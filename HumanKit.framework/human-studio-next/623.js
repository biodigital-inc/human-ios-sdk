"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[623],{51623:(De,ut,l)=>{l.r(ut),l.d(ut,{SearchModule:()=>we});var O=l(60177),G=l(38645),Y=l(28407),m=l(92014),y=l(43194),K=l(85052),X=l(82656),ot=l(40215),$=l(2573),C=l(21424),k=l(97948),R=l(16823),x=l(14264),z=l(21082),g=l(37925),st=l(36110),Bt=l(87145),mt=l(32914),gt=l(11756),Q=l(17365),$t=l(1670),d=l(49204),T=l(28696),q=l(24418),it=l(27180),b=l(47632),Mt=l(68132),nt=l(96728),A=l(72865),Rt=l(54169),j=l(17766),J=l(15877),At=l(37780),ft=l(66432),Et=l(3287),bt=l(9632),It=l(37678),wt=l.n(It),t=l(54438);let xt=(()=>{class r{constructor(e,o,i){this.store=e,this.APP_BASE_URL=o,this.VIEWER_BASE_URL=i}getStudioSearchConfigFromEmptyRoute(e){return this.store.select(R.k.getProfile).pipe((0,x.p)(o=>!(0,d.isNil)(o)),(0,Q.s)(1),(0,st.T)(o=>{switch(e.data.settings.contentType){case j.c.Module:return new A.pf("all");case j.c.Bookmark:const n=o.data.organizations[0]?.id;return n?new A.S8(n):new A.Y0;case j.c.Internal:return new A.O5}}))}getStudioSearchConfigFromRoute(e){const o=e.queryParams,i=(0,d.get)(o,"categoryId","all"),n=parseInt((0,d.get)(o,"organizationId",null),10),a=parseInt((0,d.get)(o,"collectionId",null),10),p=(0,d.get)(o,"type",k.n.Category),c=(0,d.get)(o,"tags","").split("|"),u=(0,d.get)(o,"query",""),f=(0,d.get)(o,"directory","");switch(p){case k.n.Category:return(0,J.of)(new A.pf(i,c,u));case k.n.Community:return(0,J.of)(new A.Ij(u,c));case k.n.Private:return(0,J.of)(new A.Y0(u,c));case k.n.Collection:return(0,J.of)(new A.Vf(n,a,u,c));case k.n.Organization:return(0,J.of)(new A.S8(n,u,c));case k.n.Internal:return(0,J.of)(new A.O5(u,f,c))}}getSearchOptionsFromRoute(e){const o=e.queryParams,i=e.data.settings,n=(0,d.get)(o,"sort","").split("|"),a="true"===(0,d.get)(o,"asc","true"),h=new Rt.n("",null);let p=nt.F.find(c=>(0,d.isEqual)(n,c.fields)&&c.ascending===a);return(0,d.isNil)(p)&&(p=i.contentType!==j.c.Module&&i.contentType!==j.c.Internal||q.c.application===it.c.Loft?nt._z:nt.Ir),(0,d.isNil)(p)||(h.sortBy=p),h}getLoftSearchConfigFromEmptyRoute(){return new A.qS("production","maleAdult","")}getLoftSearchConfigFromRoute(e){const o=e.queryParams,i=(0,d.get)(o,"primary"),n=(0,d.get)(o,"secondary"),a=(0,d.get)(o,"query","");return i?new A.qS(i,n,a):null}exportBookmarksToCSV(){const e=this.getCheckedResults(),o=this.store.selectSnapshot(Mt.F.getWidgetURL),i=this.store.selectSnapshot(C.q.getWidgetOptions),n=this.store.selectSnapshot(C.q.getAppFeatures),a=n&&n.offlinePkgGen,h=this.store.selectSnapshot(R.k.getUserLanguage),p=this.store.selectSnapshot(R.k.getSelectedUserApp),c=this.store.selectSnapshot(C.q.getCollections),u=this.store.selectSnapshot(C.q.getOrganization)?.id,f=this.store.selectSnapshot(C.q.getSelectedOrganizationProductAccountId);this.store.dispatch(new b.ov(e,u,c,o,h,p,i,a,f))}exportModulesToCSV(){const e=(0,At.W)(this.store.selectSnapshot(R.k.getUserProfile)),i=this.getCheckedResults().map(a=>({title:a.title,specialty:(0,d.get)((0,ft.v1)(a),"title",""),category:(0,d.get)((0,ft.ZV)(a),"title",""),viewer:`${this.VIEWER_BASE_URL}/?id=${a.id}`,...e?{viewer:`${this.VIEWER_BASE_URL}/?id=${a.id}`}:{},app:`${this.APP_BASE_URL}/view?id=${a.id}`,animated:a.animated?"yes":"no",tour:a.tour?"yes":"no",created:a.create_date_time})),n=[{label:"Model Title",field:"title"},{label:"Specialty",field:"specialty"},{label:"Category",field:"category"},...e?[{label:"Human Viewer Link",field:"viewer"}]:[],{label:"Web App Link",field:"app"},{label:"Animated",field:"animated"},{label:"Tour",field:"tour"},{label:"Created Date",field:"created"}];(0,Et.H)(i,n).subscribe(a=>{const p=`BioDigital-Library-${(new Date).toISOString().split("T")[0]}.csv`,c=new Blob([a],{type:"text/csv;charset=utf-8"});wt()(c,p)})}getCheckedResults(){const e=this.store.selectSnapshot(y.Y.getAllResults),o=this.store.selectSnapshot(y.Y.getCheckedResults);return e.items.filter(n=>o.some(a=>n.id===a))}static#t=this.\u0275fac=function(o){return new(o||r)(t.KVO(m.il),t.KVO(bt.ar),t.KVO(bt.jw))};static#e=this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var D=l(17773),jt=l(50353),Dt=l(92811),Pt=l(25382),M=l(89417),U=l(34006),kt=l(18152),at=l(21523),P=l(17215),H=l(7213),Lt=l(70737),Nt=l(89079),lt=l(95416),vt=l(82798),yt=l(86600),rt=l(21007),Ct=l(87505),ct=l(97352);const Vt=(r,s)=>s.collection_id;function zt(r,s){1&r&&(t.j41(0,"app-form-field",11)(1,"mat-select",13)(2,"mat-option",14),t.EFF(3,"View Only"),t.k0s(),t.j41(4,"mat-option",15),t.EFF(5,"View & Edit"),t.k0s()()())}function Jt(r,s){if(1&r&&(t.j41(0,"mat-option",17),t.EFF(1),t.k0s()),2&r){const e=s.$implicit;t.Y8G("value",e.collection_id),t.R7$(),t.JRh(e.collection_name)}}function Ot(r,s){if(1&r&&(t.j41(0,"app-form-field",12)(1,"mat-select",16),t.Z7z(2,Jt,2,2,"mat-option",17,Vt),t.k0s()()),2&r){const e=t.XpG(2);t.R7$(2),t.Dyx(e.collections())}}function Gt(r,s){if(1&r&&(t.j41(0,"app-form-field",7)(1,"mat-select",8)(2,"mat-option",9),t.EFF(3,"Private Library"),t.k0s(),t.j41(4,"mat-option",10),t.EFF(5,"Team & Private Library"),t.k0s()()(),t.DNE(6,zt,6,0,"app-form-field",11)(7,Ot,4,0,"app-form-field",12)),2&r){let e;const o=t.XpG();t.R7$(6),t.vxM(o.addToTeam()?6:-1),t.R7$(),t.vxM((null==(e=o.collections())?null:e.length)>0&&o.addToTeam()?7:-1)}}function Yt(r,s){1&r&&(t.nrm(0,"app-spinner",18),t.EFF(1," Adding "))}function Xt(r,s){1&r&&t.EFF(0," Confirm ")}let Qt=(()=>{class r{get formAddTo(){return this.form.get("addTo")}get formModelPermissions(){return this.form.get("modelPermissions")}get formSelectedCollections(){return this.form.get("selectedCollections")}constructor(e,o,i,n,a,h,p){this.store=e,this.actions=o,this.formBuilder=i,this.dialogRef=n,this.snackBar=a,this.storageService=h,this.data=p,this.userRole=(0,m.Lt)(R.k.getUserRole),this.userLocale=(0,m.Lt)(R.k.getUserLocale),this.organization=(0,m.Lt)(C.q.getOrganization),this.collections=(0,m.Lt)(C.q.getCollections),this.copying=(0,m.Lt)(at.J.getCopying),this.processing=(0,t.vPA)(!1),this.form=this.formBuilder.group({addTo:["",M.k0.required],modelPermissions:[""],selectedCollections:[[]]}),this.formValues=(0,Nt.ot)(this.form.valueChanges),this.addToTeam=(0,t.EWP)(()=>{const u=this.formValues();return!!u&&"team"===u.addTo}),this.canAddTeamBookmarks=(0,t.EWP)(()=>{const u=this.userRole(),f=this.organization();return!(0,d.isNil)(f)&&H._m(u,Lt.y.AddTeamBookmarks)}),this.ngUnsubscribe=new K.B,this.settings={...p};const c=this.organization();(0,d.isNil)(c)||this.store.dispatch(new kt._q(c.id)),(0,t.QZP)(()=>{this.processing()?this.form.disable():this.form.enable()}),(0,t.QZP)(()=>{this.formValues()&&("viewEdit"===this.formModelPermissions.value?this.storageService.setLocalItem(P.UT.DefaultGroupEdit,!0):this.storageService.removeLocalItem(P.UT.DefaultGroupEdit))})}ngOnInit(){this.initForm(),this.initMessaging()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleSubmit(){this.form.valid&&this.addTeamModels(this.settings.bookmarks)}initForm(){let e="private",o="view";this.organization()&&(e="team",o="true"===this.storageService.getLocalItem(P.UT.DefaultGroupEdit)?"viewEdit":"view"),this.form.patchValue({addTo:e,modelPermissions:o})}initMessaging(){this.actions.pipe((0,m.xi)(b.ZA),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.processing.set(!0)}),this.actions.pipe((0,m.xi)(b.GZ),(0,g.Q)(this.ngUnsubscribe)).subscribe(e=>{this.processing.set(!1),this.handleCopySuccess(e)}),this.actions.pipe((0,m.xi)(b.F_),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.processing.set(!1),this.handleCopyFailure()})}handleCopySuccess(e){this.dialogRef.close(e)}handleCopyFailure(){this.snackBar.open(`Failed to add ${this.settings.bookmarks.length} bookmarks to ${this.formSelectedCollections.value.length} collection(s).`)}addTeamModels(e){const o=this.organization(),i=this.userLocale().lang,n=e.map(a=>this.getBookmarkCopyEntryModel(a,i,o));this.store.dispatch(new b.ZA(n))}getBookmarkCopyEntryModel(e,o,i){const{addTo:n,modelPermissions:a,selectedCollections:h}=this.formValues(),p="team"===n&&"view"===a,c="team"===n&&"viewEdit"===a,u="team"===n?h:[],f={content_type:"bookmark"===e.type?"bookmark":"module",content_id:e.id,lang_code:o};return(0,d.isNil)(i)||(f.group_access={add_to_group:p||c?1:0,visibility:p||c?1:0,member_edit:c?1:0,add_to_collections:u??[]}),f}static#t=this.\u0275fac=function(o){return new(o||r)(t.rXU(m.il),t.rXU(m.En),t.rXU(M.ok),t.rXU(U.CP),t.rXU(lt.UG),t.rXU(P.n$),t.rXU(U.Vh))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-bulk-add-model-dialog"]],decls:13,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"text-xs","pb-6"],[1,"flex","flex-col",3,"submit","formGroup"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","type","button",3,"mat-dialog-close","disabled"],["type","submit","app-button","","buttonTheme","light","buttonType","primary","cdkFocusInitial","",3,"click","disabled"],["theme","light","label","Add To"],["hideSingleSelectionIndicator","","formControlName","addTo","aria-label","Add To",1,"input","mt-2"],["value","private"],["value","team"],["theme","light","label","Model Permissions"],["theme","light","label","Collections","data-test","saveCollection","labelHelp",'Models are automatically added to "All Team Models".'],["hideSingleSelectionIndicator","","formControlName","modelPermissions","aria-label","Model Permissions",1,"input","mt-2"],["value","view"],["value","viewEdit"],["aria-label","Collections","formControlName","selectedCollections","multiple","",1,"input"],[3,"value"],["size","small","render","inline",1,"mr-1"]],template:function(o,i){1&o&&(t.j41(0,"h1",0),t.EFF(1,"Save Selected Models"),t.k0s(),t.j41(2,"div",1)(3,"p",2),t.EFF(4),t.k0s(),t.j41(5,"form",3),t.bIt("submit",function(){return i.handleSubmit()}),t.DNE(6,Gt,8,2),t.k0s()(),t.j41(7,"div",4)(8,"button",5),t.EFF(9," Cancel "),t.k0s(),t.j41(10,"button",6),t.bIt("click",function(){return i.handleSubmit()}),t.DNE(11,Yt,2,0)(12,Xt,1,0),t.k0s()()),2&o&&(t.R7$(4),t.SpI("",i.settings.bookmarks.length," selected"),t.R7$(),t.Y8G("formGroup",i.form),t.R7$(),t.vxM(i.canAddTeamBookmarks()?6:-1),t.R7$(2),t.Y8G("disabled",i.processing()),t.R7$(2),t.Y8G("disabled",i.processing()||!i.form.valid),t.R7$(),t.vxM(i.processing()?11:12))},dependencies:[vt.VO,yt.wT,U.tx,U.BI,U.E7,U.Yi,rt.Q,Ct.K,ct.tI,M.qT,M.BC,M.cb,M.j4,M.JD],changeDetection:0})}return r})();var W=l(84370),Ht=l(39937),Wt=l(58841),Zt=l(29160),Kt=l(87996),qt=l(53236),dt=l(52394),ht=function(r,s,e,o){var a,i=arguments.length,n=i<3?s:null===o?o=Object.getOwnPropertyDescriptor(s,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(r,s,e,o);else for(var h=r.length-1;h>=0;h--)(a=r[h])&&(n=(i<3?a(n):i>3?a(s,e,n):a(s,e))||n);return i>3&&n&&Object.defineProperty(s,e,n),n},pt=function(r,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,s)};const _t=(r,s)=>s.collection_id;function te(r,s){if(1&r&&(t.j41(0,"mat-option",14),t.EFF(1),t.k0s()),2&r){const e=s.$implicit;t.Y8G("value",e.collection_id),t.R7$(),t.JRh(e.collection_name)}}function ee(r,s){if(1&r&&(t.j41(0,"app-form-field",12)(1,"mat-select",13),t.Z7z(2,te,2,2,"mat-option",14,_t),t.nI1(4,"async"),t.k0s()()),2&r){const e=t.XpG();t.R7$(2),t.Dyx(t.bMT(4,0,e.collections$))}}function oe(r,s){1&r&&(t.qex(0),t.nrm(1,"app-spinner",15),t.EFF(2," Updating "),t.bVm())}function se(r,s){1&r&&t.EFF(0,"Confirm")}class L{constructor(s,e,o,i,n,a,h){this.store=s,this.fb=e,this.dialogRef=o,this.data=i,this.snackbar=n,this.actions=a,this.changeDetectorRef=h,this.settings={bookmarks:[]},this.assignedCollections=new Map,this.unassignedCollections=new Map,this.saving$=new Zt.t(!1),this.ngUnsubscribe=new K.B,this.settings={...this.settings,...i}}ngOnInit(){this.initForm(),this.initSaveObserver(),this.initCollections(),this.dialogRef.beforeClosed().pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.cancelSave()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.bookmarkForm=this.fb.group({permission:this.fb.control(dt.c.Private),collectionIds:this.fb.control([],{nonNullable:!0})}),this.saving$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(s=>{s?this.bookmarkForm.disable():this.bookmarkForm.enable()})}initCollections(){const s=this.store.selectSnapshot(C.q.getOrganization),e=this.settings.collectionId,o=this.store.selectSnapshot(C.q.getCollections)??[];!(0,d.isNil)(s)&&0===o.length&&this.store.dispatch(new kt._q(s.id)),(0,X.z)([this.organization$,this.collections$]).pipe((0,x.p)(i=>!(0,d.isNil)(i)),(0,g.Q)(this.ngUnsubscribe)).subscribe(([i,n])=>{const a=(0,d.isNil)(i)?dt.c.Private:dt.c.TeamView;this.assignedCollections.clear(),this.unassignedCollections.clear(),n.forEach(c=>{c.collection_id===e?this.assignedCollections.set(c.collection_id,c):this.unassignedCollections.set(c.collection_id,c)});const p={permission:a,collectionIds:Array.from(this.assignedCollections.keys())};this.formInitialValue=p,this.bookmarkForm.setValue(p),this.changeDetectorRef.markForCheck()}),this.trackCollectionsDirty()}initSaveObserver(){this.actions.pipe((0,m.xi)(b.Ln),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.saving$.next(!0)}),this.actions.pipe((0,m.xi)(b.ET),(0,g.Q)(this.ngUnsubscribe)).subscribe(s=>{this.saving$.next(!1),this.handleSaveSuccess(s)}),this.actions.pipe((0,m.xi)(b.dc),(0,g.Q)(this.ngUnsubscribe)).subscribe(s=>{this.saving$.next(!1),this.handleSaveFailure(s)})}trackCollectionsDirty(){this.bookmarkForm.valueChanges.pipe((0,Kt.B)(100),(0,g.Q)(this.ngUnsubscribe)).subscribe(s=>{(0,d.isEqual)(this.formInitialValue,s)?this.bookmarkForm.markAsPristine():this.bookmarkForm.markAsDirty(),this.changeDetectorRef.markForCheck()})}handleSubmit(){this.bookmarkForm.valid&&this.saveBookmark()}saveBookmark(){const e=this.store.selectSnapshot(C.q.getOrganization)?.id,o=this.settings.bookmarks.map(i=>{const{addCollections:n,removeCollections:a}=this.getBookmarkEntry(i);return{bookmark:i,addCollections:n,removeCollections:a}});this.store.dispatch(new b.Ln(e,o))}handleSaveSuccess(s){this.snackbar.open(`${s.updates.length} bookmarks successfully updated.`),this.store.dispatch(new T.w.SearchStudio),this.dialogRef.close(!0)}handleSaveFailure(s){const e=(0,qt.u1)(s.error)||`Failed to update ${s.updates.length} bookmarks.`;this.snackbar.open(e)}handleCancelClick(){this.dialogRef.close(!1)}getBookmarkEntry(s){const{collectionIds:e}=this.bookmarkForm.value,o=[],i=new Map;return this.assignedCollections.forEach((n,a)=>{!e.includes(a)&&s.collection_content_id&&i.set(n,s.collection_content_id)}),this.unassignedCollections.forEach((n,a)=>{e.includes(a)&&o.push(n)}),{addCollections:o,removeCollections:i}}cancelSave(){this.settings.bookmarks=[],this.saving$.next(!1)}static#t=this.\u0275fac=function(e){return new(e||L)(t.rXU(m.il),t.rXU(M.ok),t.rXU(U.CP),t.rXU(U.Vh),t.rXU(lt.UG),t.rXU(m.En),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:L,selectors:[["app-bulk-update-dialog"]],decls:20,vars:14,consts:[["defaultTmp",""],["mat-dialog-title",""],["mat-dialog-content",""],[1,"text-xs","pb-6"],["data-test","saveDialog",1,"save"],[1,"flex","flex-col",3,"submit","formGroup"],[1,"theme-light","text-xs"],["label","Move To","labelHelp",'Models are automatically added to "All Team Models".',"theme","light","class","my-2",4,"ngIf"],["mat-dialog-actions",""],["type","button","app-button","","buttonTheme","light",3,"click"],["type","submit","app-button","","buttonTheme","light","buttonType","primary","data-test","saveButton",3,"click","disabled"],[4,"ngIf","ngIfElse"],["label","Move To","labelHelp",'Models are automatically added to "All Team Models".',"theme","light",1,"my-2"],["aria-label","Move To","formControlName","collectionIds","multiple","",1,"input"],[3,"value"],["size","small","render","inline",1,"mr-1"]],template:function(e,o){if(1&e){const i=t.RV6();t.j41(0,"h1",1),t.EFF(1,"Manage Models"),t.k0s(),t.j41(2,"div",2)(3,"p",3),t.EFF(4),t.k0s(),t.j41(5,"div",4)(6,"form",5),t.bIt("submit",function(){return t.eBV(i),t.Njj(o.handleSubmit())}),t.j41(7,"div",6),t.DNE(8,ee,5,2,"app-form-field",7),t.nI1(9,"async"),t.k0s()()()(),t.j41(10,"div",8)(11,"button",9),t.bIt("click",function(){return t.eBV(i),t.Njj(o.handleCancelClick())}),t.EFF(12,"Cancel"),t.k0s(),t.j41(13,"button",10),t.nI1(14,"async"),t.nI1(15,"async"),t.bIt("click",function(){return t.eBV(i),t.Njj(o.handleSubmit())}),t.DNE(16,oe,3,0,"ng-container",11),t.nI1(17,"async"),t.DNE(18,se,1,0,"ng-template",null,0,t.C5r),t.k0s()()}if(2&e){let i;const n=t.sdS(19);t.R7$(4),t.SpI("",o.settings.bookmarks.length," selected"),t.R7$(2),t.Y8G("formGroup",o.bookmarkForm),t.R7$(2),t.Y8G("ngIf",null==(i=t.bMT(9,6,o.collections$))?null:i.length),t.R7$(5),t.Y8G("disabled",t.bMT(14,8,o.collectionsLoading$)||t.bMT(15,10,o.saving$)||!o.bookmarkForm.dirty),t.R7$(3),t.Y8G("ngIf",t.bMT(17,12,o.saving$))("ngIfElse",n)}},dependencies:[O.bT,vt.VO,yt.wT,U.BI,U.E7,U.Yi,rt.Q,Ct.K,ct.tI,M.qT,M.BC,M.cb,M.j4,M.JD,O.Jj],changeDetection:0})}ht([(0,m.l6)(C.q.getOrganization),pt("design:type",$.c)],L.prototype,"organization$",void 0),ht([(0,m.l6)(C.q.getCollections),pt("design:type",$.c)],L.prototype,"collections$",void 0),ht([(0,m.l6)(C.q.getCollectionsLoading),pt("design:type",$.c)],L.prototype,"collectionsLoading$",void 0);var ie=l(43654),ne=l(35716),ae=l(72760),St=l(68947),le=l(35286),re=l(67575),ce=l(70914);function de(r,s){1&r&&t.nrm(0,"app-spinner",9)}function he(r,s){if(1&r&&(t.j41(0,"div",14)(1,"div",15)(2,"div"),t.EFF(3),t.k0s(),t.j41(4,"div",16),t.EFF(5),t.k0s()(),t.nrm(6,"mat-progress-bar",17),t.k0s()),2&r){const e=t.XpG(2);t.R7$(3),t.JRh(e.formatJobStatus(e.job)),t.R7$(2),t.SpI(" ",e.formatTaskCount(e.job.job_tasks)," "),t.R7$(),t.Y8G("value",100*e.job.job_status_pct)}}function pe(r,s){if(1&r&&(t.qex(0),t.j41(1,"div",10)(2,"div",11),t.nrm(3,"app-html",12),t.k0s(),t.DNE(4,he,7,3,"div",13),t.k0s(),t.bVm()),2&r){const e=t.XpG();t.R7$(3),t.Y8G("markdownText",e.bodyMarkdownText),t.R7$(),t.Y8G("ngIf",e.isJobActive)}}function ue(r,s){1&r&&(t.qex(0),t.nrm(1,"app-spinner",20),t.EFF(2," Stopping "),t.bVm())}function me(r,s){1&r&&t.EFF(0,"Stop")}function ge(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.cancelJobClick(i.job.job_id,i.job.job_type))}),t.DNE(1,ue,3,0,"ng-container",19)(2,me,1,0,"ng-template",null,0,t.C5r),t.k0s()}if(2&r){const e=t.sdS(3),o=t.XpG();t.Y8G("disabled",o.cancelling),t.R7$(),t.Y8G("ngIf",o.cancelling)("ngIfElse",e)}}function fe(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeDialogClick())}),t.EFF(1," Close "),t.k0s()}}let be=(()=>{class r{constructor(e,o,i,n,a,h,p,c){this.store=e,this.actions=o,this.renderer=i,this.markdownService=n,this.bookmarkService=a,this.changeRef=h,this.dialogRef=p,this.data=c,this.settings={},this.ngUnsubscribe=new K.B,this.settings={...this.settings,...c},this.initBookmarkJobListeners(c.jobId)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleElementClick(e){if(e.target instanceof HTMLAnchorElement){e.preventDefault(),e.stopImmediatePropagation();const i=e.target.href;i.startsWith(window.location.origin)&&(window.location.href=i)}}initBookmarkJobListeners(e){var o=this;const i=["aborted","complete","error"],{copyBookmarkModels:n,deleteBookmarkIds:a}=this.settings,h=n?.length??a?.length??1e3;(0,ie.O)(0,h<100?1e3:h<500?2e3:5e3).pipe((0,mt.n)(()=>this.bookmarkService.getBookmarkJobs({job_id:e,include_job_tasks:1})),(0,st.T)(c=>c[0]),(0,ne.v)(c=>!i.includes(c?.job_status),!0),(0,g.Q)(this.ngUnsubscribe)).subscribe(function(){var c=(0,Y.A)(function*(u){o.job=u,o.store.dispatch(new b.Zp([u]));const f=i.includes(u.job_status);o.isJobActive=!f;const{title:S,bodyMarkdown:B}=yield o.formatJobText(u,o.settings);switch(o.headerText=S,o.bodyMarkdownText=B,u?.job_status){case"error":"bookmark_copy"===u.job_type&&o.store.dispatch(new b.ZW),"bookmark_delete"===u.job_type&&o.store.dispatch(new b.PS);break;case"complete":"bookmark_copy"===u.job_type&&o.store.dispatch(new b.U8),"bookmark_delete"===u.job_type&&o.store.dispatch(new b.$H)}o.changeRef.markForCheck()});return function(u){return c.apply(this,arguments)}}()),this.actions.pipe((0,m.xi)(b.I0)).subscribe(()=>{this.cancelling=!0,this.changeRef.markForCheck()}),this.actions.pipe((0,m.xi)(b.HN,b.Mo)).subscribe(()=>{this.cancelling=!1,this.changeRef.markForCheck()})}formatJobText(e,o){var i=this;return(0,Y.A)(function*(){const{job_status:n,job_tasks_count:a,job_tasks:h,job_type:p}=e,c=o.copyBookmarkModels??[],u=c[0]?.group_access?.add_to_group?"**Team - All Models**":"**Private - All Models**",f=a,S=h.filter(v=>"complete"===v.job_task_status),B=S.length,N=h.filter(v=>"error"===v.job_task_status),E=N.length,Z=f-B;switch(p){case"bookmark_copy":switch(n){case"aborted":{const v=yield i.getFormattedContentNames(S,p),V=yield i.getFormattedCollectionNames(c,!0,"inline");return{title:"Task Stopped",bodyMarkdown:V?`${Z} models have been stopped. The following ${B} models have been added to ${V}:\n${v}`:`${Z} models have been stopped. The following ${B} models have been added to ${u}:\n${v}`}}case"error":{const v=yield i.getFormattedContentNames(N,p),V=yield i.getFormattedCollectionNames(c,!0,"inline");return{title:"Task Error",bodyMarkdown:V?`${S.length} models were added successfully to ${V}. **The following ${E} models were unable to be added**:\n${v}`:`${S.length} models were added successfully to ${u}. **The following ${E} models were unable to be added**:\n${v}`}}case"complete":{const v=yield i.getFormattedCollectionNames(c,!0,"inline");return{title:"Added Successfully",bodyMarkdown:v?`${B} models have been added to ${v}.`:`${B} models have been added to ${u}.`}}default:{const v=yield i.getFormattedCollectionNames(c,!1,"list");return{title:"Adding Models to My Library",bodyMarkdown:v?`Please wait while ${f} models are added to:\n${v}\n\nStopping this task will only affect models left in the queue.`:`Please wait while ${f} models are added to ${u}.\n\nStopping this task will only affect models left in the queue.`}}}case"bookmark_delete":switch(n){case"aborted":return{title:"Task Stopped",bodyMarkdown:`${Z} models have been stopped. The following ${B} models have been deleted:\n${yield i.getFormattedContentNames(S,p)}`};case"error":{const v=yield i.getFormattedContentNames(N,p);return{title:"Task Error",bodyMarkdown:`\n              ${S.length} models were deleted successfully from all My Library locations. The following ${E} models were unable to be deleted:\n${v}`}}case"complete":return{title:"Deleted Successfully",bodyMarkdown:`${B} models were deleted successfully from all My Library locations.`};default:return{title:"Deleting Models from My Library",bodyMarkdown:`Deleting ${f} models may take a few moments. Stopping this task will only affect models left in the queue.`}}}})()}formatJobPercent(e){return`${(100*e.job_status_pct).toFixed(0)}%`}formatJobStatus(e){return e.job_status.split("_").map(i=>(0,d.capitalize)(i)).join(" ")}formatTaskCount(e){const o=e.length;return`${e.filter(a=>"complete"===a.job_task_status).length}/${o}`}cancelJobClick(e,o){this.store.dispatch(new b.I0(e,o))}closeDialogClick(){this.dialogRef.close()}getFormattedCollectionNames(e,o,i){var n=this;const a=this.store.selectSnapshot(C.q.getCollections),h=e.map(f=>f.group_access?.add_to_collections??[]).flat(),p=(0,d.keyBy)(a,"collection_id"),c=Array.from(new Set(h)).map(f=>p[f]),u=c.length;return c.reduce(function(){var f=(0,Y.A)(function*(S,B,N){let E=yield S;const{group_id:Z,collection_id:v,collection_name:V}=B,xe=0===N,je=N===u-1,Ft=yield St.l.getPlainTextFromMarkdown(n.renderer,n.markdownService,V,!0),et=o?`[${Ft}](/results/bookmarks?organizationId=${Z}&collectionId=${v}&type=Collection)`:Ft;switch(i){case"list":return E+=`- ${et}\n`,E;case"inline":return E+=xe?`**${et}**`:je?` and **${et}**`:`, **${et}**`,E}return E});return function(S,B,N){return f.apply(this,arguments)}}(),Promise.resolve(""))}getFormattedContentNames(e,o){var i=this;return(0,Y.A)(function*(){let n=[];switch(o){case"bookmark_copy":n=e.map(a=>a.job_task_details.source_content_name);break;case"bookmark_delete":n=e.map(a=>a.job_task_details.bookmark_name)}return n.length>0?"- "+(yield Promise.all(n.map(h=>St.l.getPlainTextFromMarkdown(i.renderer,i.markdownService,h??"")))).join("\n- "):""})()}static#t=this.\u0275fac=function(o){return new(o||r)(t.rXU(m.il),t.rXU(m.En),t.rXU(t.sFG),t.rXU(le.Rl),t.rXU(ae.x),t.rXU(t.gRc),t.rXU(U.CP),t.rXU(U.Vh))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-bookmark-jobs-dialog"]],hostBindings:function(o,i){1&o&&t.bIt("click",function(a){return i.handleElementClick(a)})},decls:9,vars:5,consts:[["defaultTmp",""],["mat-dialog-title",""],["mat-dialog-content",""],[1,"bookmark-jobs-dialog"],["size","huge",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions",""],["app-button","","buttonType","text","buttonTheme","light","buttonType","primary","cdkFocusInitial","","aria-label","Stop Job",3,"disabled","click",4,"ngIf"],["app-button","","buttonType","text","buttonTheme","light","buttonType","flat","cdkFocusInitial","",3,"click",4,"ngIf"],["size","huge"],[1,"flex","flex-col","mt-4","mb-2"],[1,"bookmark-jobs-dialog__text","text-sm"],[3,"markdownText"],["class","mt-6 mb-2",4,"ngIf"],[1,"mt-6","mb-2"],[1,"flex","flex-row","justify-between","text-xs"],[1,"text-2xs","my-1"],[1,"bookmark-jobs-dialog__progress",3,"value"],["app-button","","buttonType","text","buttonTheme","light","buttonType","primary","cdkFocusInitial","","aria-label","Stop Job",3,"click","disabled"],[4,"ngIf","ngIfElse"],["size","small","render","inline",1,"mr-1"],["app-button","","buttonType","text","buttonTheme","light","buttonType","flat","cdkFocusInitial","",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"h1",1),t.EFF(1),t.k0s(),t.j41(2,"div",2)(3,"div",3),t.DNE(4,de,1,0,"app-spinner",4)(5,pe,5,2,"ng-container",5),t.k0s()(),t.j41(6,"div",6),t.DNE(7,ge,4,3,"button",7)(8,fe,2,0,"button",8),t.k0s()),2&o&&(t.R7$(),t.JRh(i.headerText),t.R7$(3),t.Y8G("ngIf",!i.job),t.R7$(),t.Y8G("ngIf",i.job),t.R7$(2),t.Y8G("ngIf",i.isJobActive),t.R7$(),t.Y8G("ngIf",!i.isJobActive))},dependencies:[O.bT,U.BI,U.E7,U.Yi,re.HM,rt.Q,ct.tI,ce.V],styles:[".bookmark-jobs-dialog__text{max-height:200px;overflow:auto}.bookmark-jobs-dialog__progress{height:16px}.bookmark-jobs-dialog .html a{text-decoration:none!important}\n"],encapsulation:2,changeDetection:0})}return r})();var ke=l(63181),ve=l(71217),ye=l(82608),Tt=l(99504),_=l(79898),Ce=l(99327),Se=l(18617),Te=l(51452),I=function(r,s,e,o){var a,i=arguments.length,n=i<3?s:null===o?o=Object.getOwnPropertyDescriptor(s,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(r,s,e,o);else for(var h=r.length-1;h>=0;h--)(a=r[h])&&(n=(i<3?a(n):i>3?a(s,e,n):a(s,e))||n);return i>3&&n&&Object.defineProperty(s,e,n),n},w=function(r,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(r,s)};const Ut="(max-width: 959px)";class F{constructor(s,e,o,i,n,a,h,p,c,u,f,S,B){this.actions=s,this.activatedRoute=e,this.bookmarkActionsService=o,this.breakpointObserver=i,this.router=n,this.searchService=a,this.dialog=h,this.store=p,this.location=c,this.urlSerializer=u,this.liveAnnouncer=f,this.snackBar=S,this.storageService=B,this.application=q.c.application,this.environmentApplication=it.c,this.galleryActionMode=_.g,this.ngUnsubscribe=new K.B,this.actionMode=_.g.Explore}ngOnInit(){this.searchSettings=this.activatedRoute.snapshot.data.settings,this.initSearch(),this.store.dispatch(new T.w.SetCardActions({enabled:!0})),this.updateSidenavEnabled(this.searchSettings),this.keepRouteUpdated(),this.observeActionResults(),this.keepBulkActionsUpdated(),this.keepActionModeUpdated(),this.initAccessibilty(),this.initBookmarkJobListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.store.dispatch(new T.w.Reset)}initAccessibilty(){(0,X.z)([this.store.select(y.Y.getFilteredResults),this.store.select(y.Y.getSearchConfig),this.store.select(y.Y.getLoading),(0,Ht.E)(this.store)]).pipe((0,x.p)(([s,e,o])=>!(0,d.isNil)(s)&&!(0,d.isNil)(e)&&!o),(0,z.F)((s,e)=>(0,d.isEqual)(s[0],e[0])),(0,g.Q)(this.ngUnsubscribe)).subscribe(([s,e,o,i])=>{const{total:n,items:a}=s,h=e.query,p=[];p.push(0===n?"No results found":n===a.length?`Showing ${n} results`:`Showing ${a.length} of ${n} results`),p.push(h?`for search, "${h}"`:`for category, "${i}"`);const c=`${p.join(" ")}.`;this.liveAnnouncer.announce(c)}),this.actions.pipe((0,m.xi)(T.w.CheckAll),(0,st.T)(()=>this.store.selectSnapshot(y.Y.getCheckedResults)),(0,g.Q)(this.ngUnsubscribe)).subscribe(s=>{this.liveAnnouncer.announce(`${s.length} models selected.`)}),this.actions.pipe((0,m.xi)(T.w.UncheckAll),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.liveAnnouncer.announce("Model selections cleared.")}),this.viewMode$.pipe((0,z.F)((s,e)=>(0,d.isEqual)(s,e)),(0,Bt.i)(1),(0,g.Q)(this.ngUnsubscribe)).subscribe(s=>{this.liveAnnouncer.announce(`Gallery view mode updated to ${s===Wt.P.Card?"Card":"List"} View.`)})}initBookmarkJobListeners(){this.activeBookmarkJobs$.pipe((0,g.Q)(this.ngUnsubscribe)).pipe((0,x.p)(s=>!(0,d.isNil)(s)),(0,mt.n)(s=>this.openBookmarkJobDialog({jobId:s.job_id})),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new T.w.SearchStudio)}),this.store.dispatch(new b.zW)}initSearch(){this.profile$.pipe((0,x.p)(s=>!(0,d.isNil)(s)),(0,g.Q)(this.ngUnsubscribe),(0,gt.Z)(()=>this.activatedRoute.queryParams.pipe((0,g.Q)(this.ngUnsubscribe)))).subscribe(()=>{(this.activatedRoute.snapshot.queryParamMap.has("primary")?this.searchLoftFromRoute:this.searchStudioFromRoute).call(this,this.activatedRoute.snapshot)})}searchStudioFromRoute(s){((0,d.isEmpty)(s.queryParams)?this.searchService.getStudioSearchConfigFromEmptyRoute(s):this.searchService.getStudioSearchConfigFromRoute(s)).pipe((0,Q.s)(1)).subscribe(o=>{const i=this.searchService.getSearchOptionsFromRoute(s);this.store.dispatch(new T.w.SetSearchOptions(i)),o&&this.store.dispatch(new T.w.SetSearchConfig(o))})}searchLoftFromRoute(s){const e=(0,d.isEmpty)(s.queryParams)?this.searchService.getLoftSearchConfigFromEmptyRoute():this.searchService.getLoftSearchConfigFromRoute(s),o=this.searchService.getSearchOptionsFromRoute(s);this.store.dispatch(new T.w.SetSearchOptions(o)),this.store.dispatch(new T.w.SetSearchConfig(e))}updateSidenavEnabled(s){if(s.application!==it.c.Studio||s.contentType!==j.c.Bookmark)return;const e=this.teamJoinNotificationInteracted();(0,X.z)([this.store.select(R.k.isPrivateUser),this.store.select(Tt.e.getEligibleOrganizations)]).pipe((0,x.p)(([o,i])=>!(!o||(!Array.isArray(i)||i.length>0)&&!e)),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{const o=this.store.selectSnapshot(y.Y.getSidenav);this.store.dispatch(new T.w.SetSidenav({...o,enabled:!1}))}),!e&&!this.store.selectSnapshot(Tt.e.getEligibleOrganizations)&&this.store.selectSnapshot(R.k.getUserSessionType)===ve.P.User&&this.store.dispatch(new ye.Ae)}teamJoinNotificationInteracted(){const s="true"===this.storageService.getLocalItem(P.UT.UserJoinPromptSeen),e="true"===this.storageService.getLocalItem(P.UT.UserJoinNotificationInteracted);return s&&e}keepRouteUpdated(){(0,X.z)(this.store.select(y.Y.getSearchConfig),this.store.select(y.Y.getSearchOptions)).pipe((0,x.p)(([s,e])=>!(0,d.isNil)(s)&&!(0,d.isNil)(e)),(0,z.F)(([s,e],[o,i])=>{const n=c=>c,h=(0,d.isEqualWith)(s,o,(c,u,f)=>{if("tags"===f)return(0,d.isEqual)(c.filter(n),u.filter(n))}),p=(0,d.isEqual)((0,d.omit)(e,["pageSize"]),(0,d.omit)(i,["pageSize"]));return h&&p}),(0,$t.J)(),(0,g.Q)(this.ngUnsubscribe)).subscribe(([[s],[e,o]])=>{const i=this.getUrlTree(e,o),n=(0,d.isEqual)((0,d.omit)(s,["query"]),(0,d.omit)(e,["query"]));this.router.navigateByUrl(this.router.serializeUrl(i),{skipLocationChange:n}),n&&this.replaceLocationState()})}observeActionResults(){this.actions.pipe((0,m.xi)(b.x$,b.DN,b.lN),(0,g.Q)(this.ngUnsubscribe)).subscribe(s=>{this.store.dispatch(new T.w.SearchStudio)}),this.actions.pipe((0,m.xi)(b.GZ,b.te),(0,gt.Z)(s=>this.openBookmarkJobDialog(s)),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new T.w.SearchStudio)}),this.actions.pipe((0,m.xi)(b.F_),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{})}keepActionModeUpdated(){this.bulkActionsActive$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(s=>{this.actionMode=s?_.g.Check:_.g.Explore})}keepBulkActionsUpdated(){(0,X.z)([this.breakpointObserver.observe(Ut),this.profile$,this.searchConfig$,this.collections$]).pipe((0,z.F)(),(0,g.Q)(this.ngUnsubscribe),(0,x.p)(([,,s])=>!(0,d.isNil)(s))).subscribe(([,,s,e])=>{s&&this.updateBulkActions(s,e)}),this.bulkActionsActive$.pipe((0,z.F)(d.isEqual),(0,x.p)(s=>!s),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new T.w.UncheckAll)}),this.searchConfig$.pipe((0,z.F)(d.isEqual),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new T.w.SetBulkActions({active:!1}))})}updateBulkActions(s,e){const o=s.type,i=new jt.S4;switch(i.active=this.store.selectSnapshot(y.Y.getBulkActionsActive),o){case k.n.Private:case k.n.Organization:case k.n.Collection:case k.n.Category:{const n=[],a=this.store.selectSnapshot(R.k.getUserRole),h=this.store.selectSnapshot(R.k.isPremiumUser),p=this.store.selectSnapshot(C.q.hasOrganization),c=this.store.selectSnapshot(C.q.isTrial);H.Dx(a,h)&&n.push(D.qg.ExportCSV),H.E2(h,c)&&o===k.n.Category&&n.push(D.qg.AddToLibrary),(o===k.n.Collection||o===k.n.Organization||o===k.n.Private)&&n.push(D.qg.Delete),H.Dy(a,p)&&e?.length>0&&(o===k.n.Collection||o===k.n.Organization)&&n.push(D.qg.Manage),i.enabled=!0,i.items=[...n];break}default:i.enabled=!1}(q.c.platform!==Dt.N.Web||this.breakpointObserver.isMatched(Ut))&&(i.enabled=!1),this.store.dispatch(new T.w.SetBulkActions(i))}handleBulkAction(s){const{name:e}=s,o=this.store.selectSnapshot(y.Y.getAllResults).items,i=this.store.selectSnapshot(y.Y.getCheckedResults),n=o.filter(a=>i.includes(a.id));this.performBulkAction(e,n).then(a=>{a&&this.store.dispatch(new T.w.UncheckAll)}).catch(()=>{this.snackBar.open(`There was an error performing the specified bulk action: "${e}".`)})}performBulkAction(s,e){var o=this;return(0,Y.A)(function*(){const i=o.store.selectSnapshot(y.Y.getSearchConfig);switch(s){case D.qg.ExportCSV:return i.type===k.n.Category?o.searchService.exportModulesToCSV():o.searchService.exportBookmarksToCSV(),!0;case D.qg.AddToLibrary:return(0,ot._)(o.dialog.open(Qt,{id:W.t.BulkAddModelDialog,width:"512px",data:{bookmarks:i.type===k.n.Category?e:[]}}).afterClosed().pipe((0,Q.s)(1),(0,g.Q)(o.ngUnsubscribe)));case D.qg.Delete:{const n=o.store.selectSnapshot(R.k.getUserRole),a=e.filter(p=>H.M8(n,p));return(0,ot._)(o.dialog.open(ke.Y,{id:W.t.BulkDeleteModelDialog,data:{bookmarks:a}}).afterClosed().pipe((0,Q.s)(1),(0,g.Q)(o.ngUnsubscribe)))}case D.qg.Manage:return(0,ot._)(o.dialog.open(L,{id:W.t.BulkUpdateDialog,width:"512px",data:{bookmarks:e,collectionId:i.type===k.n.Collection?i.collectionId:void 0}}).afterClosed().pipe((0,Q.s)(1),(0,g.Q)(o.ngUnsubscribe)));default:return!0}})()}handleView(s){this.bookmarkActionsService.view(s)}openBookmarkJobDialog(s){const e=this.dialog.getDialogById(W.t.BookmarkJobsDialog);return e?e.afterClosed():this.dialog.open(be,{id:W.t.BookmarkJobsDialog,disableClose:!0,width:"464px",height:"auto",data:s}).afterClosed()}replaceLocationState(){const s=this.store.selectSnapshot(y.Y.getSearchConfig),e=this.store.selectSnapshot(y.Y.getSearchOptions),o=this.getUrlTree(s,e),i=this.urlSerializer.serialize(o);this.location.replaceState(i)}getUrlTree(s,e){const o=window.location.pathname,i=(0,d.get)(e,"sortBy.fields",[]).join("|"),n=(0,d.get)(e,"sortBy.ascending",!0),a={};i.length&&(a.sort=i,a.asc=n);const h={tags:(0,d.compact)((0,d.get)(s,"tags",[])).join("|")},p=Object.entries({...s,...h,...a}).reduce((u,[f,S])=>(null!==S&&""!==S&&(u[f]=S),s.type===k.n.Loft&&(["primary","secondary","query"].includes(f)||delete u[f]),u),{});return this.router.createUrlTree([o],{queryParams:p})}static#t=this.\u0275fac=function(e){return new(e||F)(t.rXU(m.En),t.rXU(G.nX),t.rXU(Pt.h),t.rXU(Ce.QP),t.rXU(G.Ix),t.rXU(xt),t.rXU(U.bZ),t.rXU(m.il),t.rXU(O.aZ),t.rXU(G.Sd),t.rXU(Se.Ai),t.rXU(lt.UG),t.rXU(P.n$))};static#e=this.\u0275cmp=t.VBU({type:F,selectors:[["app-search-page"]],decls:2,vars:4,consts:[[1,"search-page"],[3,"bulkAction","selectBookmark","application","actionMode","contentType","showSourcePicker"]],template:function(e,o){1&e&&(t.j41(0,"div",0)(1,"app-gallery-container",1),t.bIt("bulkAction",function(n){return o.handleBulkAction(n)})("selectBookmark",function(n){return o.handleView(n)}),t.k0s()()),2&e&&(t.R7$(),t.Y8G("application",o.searchSettings.application)("actionMode",o.actionMode)("contentType",o.searchSettings.contentType)("showSourcePicker",o.application===o.environmentApplication.Loft))},dependencies:[Te.j],styles:[".search-page[_ngcontent-%COMP%]{min-height:100%;display:flex}"],changeDetection:0})}I([(0,m.l6)(y.Y.getFilteredResults),w("design:type",$.c)],F.prototype,"results$",void 0),I([(0,m.l6)(y.Y.getSearchConfig),w("design:type",$.c)],F.prototype,"searchConfig$",void 0),I([(0,m.l6)(at.J.getBookmarkJobs),w("design:type",$.c)],F.prototype,"bookmarkJobs$",void 0),I([(0,m.l6)(at.J.getActiveBookmarkJob),w("design:type",$.c)],F.prototype,"activeBookmarkJobs$",void 0),I([(0,m.l6)(R.k.getProfile),w("design:type",$.c)],F.prototype,"profile$",void 0),I([(0,m.l6)(C.q.getOrganization),w("design:type",$.c)],F.prototype,"organization$",void 0),I([(0,m.l6)(C.q.getCollections),w("design:type",$.c)],F.prototype,"collections$",void 0),I([(0,m.l6)(y.Y.getViewMode),w("design:type",$.c)],F.prototype,"viewMode$",void 0),I([(0,m.l6)(y.Y.getBulkActionsAvailable),w("design:type",$.c)],F.prototype,"bulkActionsAvailable$",void 0),I([(0,m.l6)(y.Y.getBulkActionsActive),w("design:type",$.c)],F.prototype,"bulkActionsActive$",void 0);var Ue=l(20736),Fe=l(85446);let tt=(()=>{class r{constructor(){}resolve(e){let o;switch(e.routeConfig.path){case"bookmarks":o=j.c.Bookmark;break;case"modules":o=j.c.Module;break;case"internal":o=j.c.Internal}return{application:q.c.application,contentType:o}}static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac})}return r})();var Be=l(22083);const $e=[{path:"",component:Ue.m,canActivate:[Fe.q],data:{fixedHeight:!0,overflowFix:!0,siteHeaderType:Be.D.Search},children:[{path:"modules",resolve:{settings:tt},component:F,data:{title:"Explore"}},{path:"bookmarks",resolve:{settings:tt},component:F,data:{title:"My Library"}},{path:"internal",resolve:{settings:tt},component:F}]}];let Me=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.$C({type:r});static#o=this.\u0275inj=t.G2t({imports:[G.iI.forChild($e),G.iI]})}return r})();var Re=l(8377),Ae=l(28107),Ee=l(45189),Ie=l(36569);let we=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.$C({type:r});static#o=this.\u0275inj=t.G2t({providers:[tt],imports:[O.MD,Ae.R,Me,Re.l,Ee.G,Ie.q]})}return r})()}}]);