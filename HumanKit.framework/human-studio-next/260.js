"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[260],{33260:(ut,de,l)=>{l.r(de),l.d(de,{AccountModule:()=>$l});var c=l(60177),U=l(38645),ae=l(85446),fe=l(63665),re=l(20736),p=l(92014),b=l(49204),T=l(85052),_=l(2573),D=l(14264),A=l(17365),Y=l(11756),h=l(37925),Z=l(81275),g=l(16823),m=l(15623),q=l(38104),ee=l(66571),e=l(54438),x=l(24418),j=l(12215),I=l(26779),ce=l(75736),K=l(10588);const be=()=>["/account/profile"],Re=()=>["/account/team"],dt=()=>["/account/settings"],mt=()=>["/account/internal"];function ht(n,i){1&n&&(e.j41(0,"a",1),e.nrm(1,"app-icon",6),e.EFF(2," Internal "),e.k0s()),2&n&&e.Y8G("routerLink",e.lJ4(1,mt))}let _t=(()=>{class n{constructor(){this.enableInternalRoute=x.c.deploy!==j.Z.Production}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-nav"]],decls:13,vars:7,consts:[[1,"nav"],["app-navigation-list-item","","routerLinkActive","nav__link--active",1,"nav__link",3,"routerLink"],["icon","user-circle",1,"nav__link-icon"],["icon","user-friends",1,"nav__link-icon"],["icon","cog",1,"nav__link-icon"],["app-navigation-list-item","","routerLinkActive","nav__link--active","class","nav__link",3,"routerLink",4,"ngIf"],["icon","screwdriver-wrench",1,"nav__link-icon"]],template:function(o,s){1&o&&(e.j41(0,"app-navigation-list-container")(1,"nav")(2,"div",0)(3,"a",1),e.nrm(4,"app-icon",2),e.EFF(5," Account "),e.k0s(),e.j41(6,"a",1),e.nrm(7,"app-icon",3),e.EFF(8," Team "),e.k0s(),e.j41(9,"a",1),e.nrm(10,"app-icon",4),e.EFF(11," Settings "),e.k0s(),e.DNE(12,ht,3,2,"a",5),e.k0s()()()),2&o&&(e.R7$(3),e.Y8G("routerLink",e.lJ4(4,be)),e.R7$(3),e.Y8G("routerLink",e.lJ4(5,Re)),e.R7$(3),e.Y8G("routerLink",e.lJ4(6,dt)),e.R7$(3),e.Y8G("ngIf",s.enableInternalRoute))},dependencies:[c.bT,U.Wk,U.wQ,I.R,ce.T,K.d],styles:[".nav__link[_ngcontent-%COMP%]{color:#374a68;text-decoration:none;display:flex}.nav__link-icon[_ngcontent-%COMP%]{padding-right:20px;font-size:1rem;line-height:1.5rem}.nav__link--active[_ngcontent-%COMP%]{background-color:#eaeff5;border-radius:4px}"],changeDetection:0})}return n})();var tt=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},E=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};class X{constructor(i,t,o,s){this.store=i,this.dialogService=t,this.authRoutingService=o,this.router=s,this.breakPoints=m.m,this.ngUnsubscribe=new T.B}ngOnInit(){this.initProfileCheck()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initProfileCheck(){this.userProfile$.pipe((0,D.p)(i=>!(0,b.isNil)(i)&&this.isVerificationRequired(i)),(0,A.s)(1),(0,Y.Z)(()=>this.openVerifyConfirmDialog()),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{const t=this.store.selectSnapshot(g.k.getUserProfile),{email:o}=t,{verification_jwt:s}=t.account_verification;i?this.authRoutingService.navigateToVerifyAccount(o,s):this.router.navigate(["/"])})}isVerificationRequired(i){return!0===(0,b.get)(i,"account_verification.verification_required")}openVerifyConfirmDialog(){return this.dialogService.openConfirmDialog({maxWidth:"480px",data:{titleText:"Verify your email",bodyText:"Before you can make changes to your account, we need to verify your email address. Please log out and log back in to complete the verification process.",confirmText:"Log Out",confirmColor:"warn"}}).afterClosed()}static#e=this.\u0275fac=function(t){return new(t||X)(e.rXU(p.il),e.rXU(ee.o),e.rXU(Z.y),e.rXU(U.Ix))};static#t=this.\u0275cmp=e.VBU({type:X,selectors:[["app-account-master"]],decls:7,vars:4,consts:[[1,"account"],[1,"account__container"],[1,"account__col"],[1,"account__body"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.nI1(1,"async"),e.j41(2,"div",1)(3,"div",2),e.nrm(4,"app-account-nav"),e.k0s(),e.j41(5,"div",3),e.nrm(6,"router-outlet"),e.k0s()()()),2&t&&e.AVh("account--fullscreen",e.bMT(1,2,o.horizontalBreakpoint$)<o.breakPoints.Large)},dependencies:[U.n3,_t,c.Jj],styles:[".account[_ngcontent-%COMP%]{background:#fff;display:flex;justify-content:center;padding-top:24px}.account__container[_ngcontent-%COMP%]{flex:0 1 900px;display:flex}.account__col[_ngcontent-%COMP%]{flex:0 0 160px;padding-right:20px}.account__body[_ngcontent-%COMP%]{border-left:1px solid #d7e0ea;padding-left:20px;flex:1 1 100%}.account--fullscreen[_ngcontent-%COMP%]   .account__container[_ngcontent-%COMP%]{flex:0 1 100%}.account--fullscreen[_ngcontent-%COMP%]   .account__col[_ngcontent-%COMP%]{display:none}.account--fullscreen[_ngcontent-%COMP%]   .account__body[_ngcontent-%COMP%]{padding:0 20px;border:none}"],changeDetection:0})}tt([(0,p.l6)(g.k.getUserProfile),E("design:type",_.c)],X.prototype,"userProfile$",void 0),tt([(0,p.l6)(q.V.getHorizontalBreakpoint),E("design:type",_.c)],X.prototype,"horizontalBreakpoint$",void 0);var P=l(76718),k=l(36110),O=l(87732),f=l(38165),F=l(21424),J=l(71997),d=l(89417),le=l(82656),H=l(21082),Fe=l(63308),ve=function(n){return n.MedicalDevice="Medical Device",n.Pharma="Pharma",n.ConsumerHealth="Consumer Health",n.EdTraining="Education & Training",n.DigitalHealth="Digital Health",n.ProviderHospitalPractice="Provider (Hospital & Practice)",n}(ve||{}),Ot=function(n){return n.K12="K12",n.MedicalSchool="Medical School",n.NursingSchool="Nursing School",n.UndergraduateSchool="Undergraduate School",n.GraduateSchool="Graduate School",n.HealthScienceAlliedHealth="Health Sciences or Allied Health Program",n}(Ot||{}),v=l(15828),R=function(n){return n.Student="Student",n.Faculty="Faculty",n.Administrator="Administrator",n.TeacherFaculty="Teacher / Faculty",n.PatientCaregiver="Patient / Caregiver",n.IndustryProfessional="Industry Professional",n.InstructionalDesigner="Instructional Designer",n.Marketing="Marketing",n.TrainingManager="Training Manager",n.ManagerOfMedicalEducation="Manager of Medical Education",n.Developer="Developer",n.BrandProductManager="Brand / Product Manager",n.ScientificCommunications="Scientific Communications",n.ProductManager="Product Manager",n.Editor="Editor",n.ContentManager="Content Manager",n.DesignUserExperience="Design / User Experience",n.Executive="Executive",n.TechnologyIT="Technology / IT",n.Clinician="Clinician",n.PatientEducation="Patient Education",n.Innovation="Innovation",n.PhysicalTherapist="Physical Therapist",n.OccupationalTherapist="Occupational Therapist",n.PersonalTrainer="Personal Trainer",n.Librarian="Librarian",n.SalesTraining="Sales Training",n.ProfessionalEducation="Professional Education",n}(R||{}),ye=function(n){return n.Individual="individual",n.Team="team",n}(ye||{});Object.values(v.j);const Nt=Object.values(Ot),Yt=Object.values(ve),An=[R.Student,R.TeacherFaculty,R.PatientCaregiver,R.Clinician,R.IndustryProfessional],Mn=[R.Student,R.Faculty,R.Administrator,R.Librarian],Gn={[v.j.PersonalUse]:[],[v.j.Education]:Nt,[v.j.Business]:Yt},wn={[ve.MedicalDevice]:[R.SalesTraining,R.ProfessionalEducation,R.InstructionalDesigner,R.ProductManager,R.Marketing],[ve.Pharma]:[R.SalesTraining,R.ProfessionalEducation,R.ScientificCommunications,R.InstructionalDesigner,R.ProductManager,R.Marketing],[ve.ConsumerHealth]:[R.ProductManager,R.Editor,R.ContentManager,R.DesignUserExperience,R.Developer,R.Executive],[ve.EdTraining]:[R.ProductManager,R.Editor,R.ContentManager,R.DesignUserExperience,R.Developer,R.Executive],[ve.DigitalHealth]:[R.ProductManager,R.DesignUserExperience,R.Developer,R.TechnologyIT,R.Executive],[ve.ProviderHospitalPractice]:[R.Clinician,R.Administrator,R.TechnologyIT,R.PatientEducation,R.Innovation]},$n={[v.j.PersonalUse]:[],[v.j.Education]:["<100","101-499","500+"],[v.j.Business]:["1-25","26-100","101-500","500+"]},gt={[v.j.PersonalUse]:{title:"",content:[]},[v.j.Education]:{title:"",content:[]},[v.j.Business]:{title:"",content:[]}};function ft(n){return n.map(i=>({value:i}))}function bt(n,i,t){const u=i?"":"Free for 14 Days";return{account_setting:"account_purpose",label:`${Vt(n,i)}How are you planning to use the BioDigital Human?`,hint:i?"Help us personalize your experience.":"We'll set up your experience accordingly.",responses:[{value:v.j.PersonalUse,label:"For myself",tag:i?"":"Free for 1 Person",icon:"user",content:gt[v.j.PersonalUse]},{value:v.j.Education,label:"With my students",tag:u,icon:"user-friends",content:gt[v.j.Education]},{value:v.j.Business,label:"With my business team",tag:u,icon:"user-friends",content:gt[v.j.Business]}].filter(G=>t===ye.Individual?G.value===v.j.PersonalUse:t!==ye.Team||G.value!==v.j.PersonalUse),other:!1}}function nt(n){const i=function Bn(n){return n===v.j.Education?Nt:n===v.j.Business?Yt:[]}(n);return n===v.j.Education?{account_setting:"account_field",label:"What level of education?",hint:"Help us personalize your experience.",responses:ft(i),other:!0}:n===v.j.Business?{account_setting:"account_field",label:"What field do you work in?",hint:"Help us personalize your experience.",responses:ft(i),other:!0}:void 0}function xe(n,i,t,o,s=!1){const r=`${s?Vt(n,o):""}What role best describes you?`,u=function On(n,i){switch(n){case v.j.Education:return Mn;case v.j.Business:return wn[i]||[];default:return An}}(i,t);return{account_setting:"account_role",label:r,hint:"Help us personalize your experience.",responses:ft(u),other:!0}}function Vt(n,i){const{first_name:t}=n;return i?`Welcome back, ${t}! `:""}const Nn=[[["","content-panel-tags",""]],[["","content-panel-actions",""]],"*"],Yn=["[content-panel-tags]","[content-panel-actions]","*"];let Vn=(()=>{class n{constructor(){this.label=""}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-content-panel"]],inputs:{label:"label"},ngContentSelectors:Yn,decls:11,vars:1,consts:[[1,"content-panel"],[1,"content-panel__header"],[1,"content-panel__label"],[1,"text-lg","font-semibold","mr-2"],[1,"content-panel__actions"],[1,"content-panel__body"]],template:function(o,s){1&o&&(e.NAR(Nn),e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e.EFF(4),e.k0s(),e.j41(5,"div"),e.SdG(6),e.k0s()(),e.j41(7,"div",4),e.SdG(8,1),e.k0s()(),e.j41(9,"div",5),e.SdG(10,2),e.k0s()()),2&o&&(e.R7$(4),e.JRh(s.label))},styles:[".content-panel__header[_ngcontent-%COMP%]{align-items:center;display:flex;flex-flow:wrap;margin-bottom:20px;min-height:36px}.content-panel__label[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:row;align-items:center;flex-wrap:wrap}.content-panel__actions[_ngcontent-%COMP%]{flex-grow:0}"]})}return n})();const zn=[[["","panel-view-tags",""]],"*",[["","panel-view-actions",""]],[["","panel-edit-actions",""]],[["","panel-view",""]],[["","panel-edit",""]]],Xn=["[panel-view-tags]","*","[panel-view-actions]","[panel-edit-actions]","[panel-view]","[panel-edit]"];function Ln(n,i){1&n&&e.SdG(0,2,["*ngIf","mode === 'view'"])}function Qn(n,i){1&n&&e.SdG(0,3,["*ngIf","mode === 'edit'"])}function qn(n,i){1&n&&e.SdG(0,4,["*ngIf","mode === 'view'"])}function Jn(n,i){1&n&&(e.qex(0),e.SdG(1,5),e.bVm())}let z=(()=>{class n{get mode(){return this._mode}set mode(t){t!==this.mode&&(this._mode=t,this.changeDetectorRef.markForCheck())}constructor(t){this.changeDetectorRef=t,this._mode="view"}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-panel"]],inputs:{label:"label",mode:"mode"},ngContentSelectors:Xn,decls:9,vars:5,consts:[[3,"label"],["content-panel-tags",""],["content-panel-actions",""],[4,"ngIf"]],template:function(o,s){1&o&&(e.NAR(zn),e.j41(0,"app-content-panel",0),e.qex(1,1),e.SdG(2),e.bVm(),e.j41(3,"div",2),e.DNE(4,Ln,1,0,"ng-content",3)(5,Qn,1,0,"ng-content",3),e.k0s(),e.SdG(6,1),e.DNE(7,qn,1,0,"ng-content",3)(8,Jn,2,0,"ng-container",3),e.k0s()),2&o&&(e.Y8G("label",s.label),e.R7$(4),e.Y8G("ngIf","view"===s.mode),e.R7$(),e.Y8G("ngIf","edit"===s.mode),e.R7$(2),e.Y8G("ngIf","view"===s.mode),e.R7$(),e.Y8G("ngIf","edit"===s.mode))},dependencies:[c.bT,Vn],changeDetection:0})}return n})();const zt=[{name:"Afghanistan",code:"AF"},{name:"Aland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua And Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas The",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bonaire, Sint Eustatius and Saba",code:"BQ"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo The Democratic Republic Of The",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire (Ivory Coast)",code:"CI"},{name:"Croatia (Hrvatska)",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cura\xe7ao",code:"CW"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"East Timor",code:"TL"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji Islands",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia The",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey and Alderney",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and McDonald Islands",code:"HM"},{name:"Honduras",code:"HN"},{name:"Hong Kong S.A.R.",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea North",code:"KP"},{name:"Korea South",code:"KR"},{name:"Kosovo",code:"XK"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Laos",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macau S.A.R.",code:"MO"},{name:"Macedonia",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Man (Isle of)",code:"IM"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia",code:"FM"},{name:"Moldova",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montenegro",code:"ME"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands The",code:"NL"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua new Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn Island",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russia",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts And Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent And The Grenadines",code:"VC"},{name:"Saint-Barthelemy",code:"BL"},{name:"Saint-Martin (French part)",code:"MF"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia",code:"RS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Sint Maarten (Dutch part)",code:"SX"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia",code:"GS"},{name:"South Sudan",code:"SS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard And Jan Mayen Islands",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syria",code:"SY"},{name:"Taiwan",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad And Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks And Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Vatican City State (Holy See)",code:"VA"},{name:"Venezuela",code:"VE"},{name:"Vietnam",code:"VN"},{name:"Virgin Islands (British)",code:"VG"},{name:"Virgin Islands (US)",code:"VI"},{name:"Wallis And Futuna Islands",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}],vt=[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}];var te=l(95416),w=l(21007),Ge=l(87505);const Hn=[[["","card-header",""]],[["","card-content",""]]],Wn=["[card-header]","[card-content]"];let Xt=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-summary-card"]],ngContentSelectors:Wn,decls:6,vars:2,consts:[["cardHeader",""],[1,"card"],[1,"font-semibold","text-sm"],[1,"text-xs"]],template:function(o,s){if(1&o&&(e.NAR(Hn),e.j41(0,"div",1)(1,"div",2,0),e.SdG(3),e.k0s(),e.j41(4,"div",3),e.SdG(5,1),e.k0s()()),2&o){const a=e.sdS(2);e.R7$(),e.AVh("mb-3",a.children.length)}},styles:[".card[_ngcontent-%COMP%]{border:1px solid #d7e0ea;border-radius:4px;padding:16px 20px}.card__header[_ngcontent-%COMP%]{color:#1c2a3f}.card__content[_ngcontent-%COMP%]{color:#374a68}"],changeDetection:0})}return n})();var yt=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},Ct=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};function Kn(n,i){if(1&n&&(e.j41(0,"div",35),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.name," ")}}function Zn(n,i){if(1&n&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.value," ")}}function ei(n,i){if(1&n&&e.nrm(0,"input",43),2&n){const t=e.XpG(3);e.Y8G("placeholder",null==t.accountFieldQuestion?null:t.accountFieldQuestion.hint)}}function ti(n,i){if(1&n&&(e.j41(0,"app-form-field",37)(1,"select",38)(2,"optgroup",39),e.DNE(3,Zn,2,2,"option",29),e.j41(4,"option",40),e.EFF(5,"Other"),e.k0s()()(),e.DNE(6,ei,1,1,"input",41),e.k0s()),2&n){const t=e.XpG(2);e.Y8G("label",t.selectedPurpose===t.accountPurposeEnum.Education?"Education":"Field"),e.R7$(2),e.Y8G("label",t.accountFieldQuestion.label),e.R7$(),e.Y8G("ngForOf",t.accountFieldQuestion.responses),e.R7$(3),e.Y8G("ngIf",t.otherFieldEnabled)}}function ni(n,i){if(1&n&&e.DNE(0,ti,7,4,"app-form-field",36),2&n){const t=e.XpG();e.Y8G("ngIf",t.accountFieldQuestion)}}function ii(n,i){if(1&n&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.value," ")}}function oi(n,i){if(1&n&&e.nrm(0,"input",43),2&n){const t=e.XpG(3);e.Y8G("placeholder",null==t.accountRoleQuestion?null:t.accountRoleQuestion.hint)}}function si(n,i){if(1&n&&(e.j41(0,"app-form-field",45)(1,"select",46)(2,"optgroup",39),e.DNE(3,ii,2,2,"option",29),e.j41(4,"option",40),e.EFF(5,"Other"),e.k0s()()(),e.DNE(6,oi,1,1,"input",41),e.k0s()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("label",t.accountRoleQuestion.label),e.R7$(),e.Y8G("ngForOf",t.accountRoleQuestion.responses),e.R7$(3),e.Y8G("ngIf",t.otherRoleEnabled)}}function ai(n,i){if(1&n&&e.DNE(0,si,7,3,"app-form-field",44),2&n){const t=e.XpG();e.Y8G("ngIf",t.accountRoleQuestion)}}function ri(n,i){1&n&&e.eu8(0)}function ci(n,i){if(1&n&&(e.qex(0),e.DNE(1,ri,1,0,"ng-container",47),e.bVm()),2&n){e.XpG();const t=e.sdS(37);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function li(n,i){if(1&n&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.value," ")}}function pi(n,i){if(1&n&&(e.j41(0,"app-form-field",51)(1,"select",52)(2,"optgroup",39),e.DNE(3,li,2,2,"option",29),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("label",t.accountPurposeQuestion.label),e.R7$(),e.Y8G("ngForOf",t.accountPurposeQuestion.responses)}}function ui(n,i){1&n&&e.eu8(0)}function di(n,i){if(1&n&&(e.qex(0),e.DNE(1,ui,1,0,"ng-container",47),e.bVm()),2&n){e.XpG(2);const t=e.sdS(37);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function mi(n,i){1&n&&e.eu8(0)}function hi(n,i){1&n&&e.eu8(0)}function _i(n,i){if(1&n&&(e.qex(0),e.DNE(1,mi,1,0,"ng-container",47)(2,hi,1,0,"ng-container",47),e.bVm()),2&n){e.XpG(2);const t=e.sdS(35),o=e.sdS(37);e.R7$(),e.Y8G("ngTemplateOutlet",o),e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function gi(n,i){1&n&&e.eu8(0)}function fi(n,i){1&n&&e.eu8(0)}function bi(n,i){if(1&n&&(e.qex(0),e.DNE(1,gi,1,0,"ng-container",47)(2,fi,1,0,"ng-container",47),e.bVm()),2&n){e.XpG(2);const t=e.sdS(35),o=e.sdS(37);e.R7$(),e.Y8G("ngTemplateOutlet",t),e.R7$(),e.Y8G("ngTemplateOutlet",o)}}function vi(n,i){if(1&n&&(e.DNE(0,pi,4,2,"app-form-field",48),e.qex(1,49),e.DNE(2,di,2,1,"ng-container",50)(3,_i,3,2,"ng-container",50)(4,bi,3,2,"ng-container",50),e.bVm()),2&n){const t=e.XpG();e.Y8G("ngIf",t.accountPurposeQuestion),e.R7$(),e.Y8G("ngSwitch",t.selectedPurpose),e.R7$(),e.Y8G("ngSwitchCase",t.accountPurposeEnum.PersonalUse),e.R7$(),e.Y8G("ngSwitchCase",t.accountPurposeEnum.Education),e.R7$(),e.Y8G("ngSwitchCase",t.accountPurposeEnum.Business)}}function yi(n,i){if(1&n&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.name),e.R7$(),e.SpI(" ",t.name," ")}}function Ci(n,i){if(1&n&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.code),e.R7$(),e.SpI(" ",t.name," ")}}class Se{constructor(i,t,o,s,a){this.store=i,this.actions=t,this.formBuilder=o,this.changeDetectorRef=s,this.snackBar=a,this.countries=zt,this.states=vt,this.accountPurposeEnum=v.j,this.name="",this.address="",this.demographic="",this.ngUnsubscribe=new T.B}ngOnInit(){this.initForm(),this.initAccountSettingsListeners(),this.initProfileListeners(),this.formatProfileFields()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({first_name:["",d.k0.required],last_name:["",d.k0.required],city:[""],state:[""],country:[""],account_settings:this.formBuilder.group({account_purpose:this.formBuilder.group({value:[""],description:[""]}),account_role:this.formBuilder.group({value:[""],description:[""]}),account_field:this.formBuilder.group({value:[""],description:[""]})})})}initAccountSettingsListeners(){const i=this.form.get("account_settings"),t=i.get("account_purpose"),o=i.get("account_field"),s=i.get("account_role"),a=(r,u)=>(0,b.isEqual)(r,u);t.valueChanges.pipe((0,H.F)(a),(0,h.Q)(this.ngUnsubscribe)).subscribe(r=>{const u=r.value,y=this.store.selectSnapshot(g.k.getUserProfile);this.setQuestions(y,u),o.patchValue({value:"",description:""}),s.patchValue({value:"",description:""}),this.changeDetectorRef.markForCheck()}),o.valueChanges.pipe((0,H.F)(a),(0,h.Q)(this.ngUnsubscribe)).subscribe(r=>{const u=r.value,C=xe(this.store.selectSnapshot(g.k.getUserProfile),this.selectedPurpose,u,!0);C.responses.length>0&&(this.accountRoleQuestion=C),this.changeDetectorRef.markForCheck()}),(0,le.z)(t.valueChanges,o.valueChanges,s.valueChanges).pipe((0,H.F)(a),(0,h.Q)(this.ngUnsubscribe)).subscribe(([r,u,y])=>{const C=r.value,G=u.value,N=y.value;o.enable(),s.enable(),C!==v.j.Business||G?C===v.j.Education&&!N&&o.disable():s.disable(),this.selectedPurpose=C,this.selectedField=G,this.selectedRole=N,this.otherFieldEnabled="Other"===G,this.otherRoleEnabled="Other"===N,this.changeDetectorRef.markForCheck()})}initProfileListeners(){this.userProfile$.pipe((0,D.p)(i=>!(0,b.isNil)(i)),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{(0,b.isNil)(this.accountPurposeQuestion)&&this.setQuestions(i,v.j.PersonalUse);const t=this.getUserAccountSettings();this.setFormValues(i,t),this.changeDetectorRef.markForCheck()}),this.actions.pipe((0,p.xi)(f.ZD),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new f.hs(!0)),this.form.markAsPristine(),this.panel.mode="view"}),this.actions.pipe((0,p.xi)(f._h),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("There was an error updating your user profile.")})}formatProfileFields(){this.userProfile$.pipe((0,D.p)(i=>!(0,b.isNil)(i)),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.formatProfile(i),this.changeDetectorRef.markForCheck()})}handleEditClick(){this.panel.mode="edit"}handleCancelClick(){this.setFormValues(this.store.selectSnapshot(g.k.getUserProfile),this.getUserAccountSettings()),this.form.markAsPristine(),this.panel.mode="view"}handleSaveClick(){this.saveProfile()}getUserAccountSettings(){const i=this.store.selectSnapshot(g.k.getUserAccountSettings),t=this.store.selectSnapshot(F.q.getOrganizationAccountSettings);return(0,Fe.j)([...i,...t])}saveProfile(){const i=this.getUserProfileFromValues(this.form.value);this.store.dispatch(new f.Kg(i)),this.changeDetectorRef.markForCheck()}setQuestions(i,t){this.accountPurposeQuestion=bt(i,!1),this.accountFieldQuestion=nt(t),this.accountRoleQuestion=xe(i,t,"",!1)}setFormValues(i,t){this.form.patchValue({...i,account_settings:t})}getUserProfileFromValues(i){const{account_settings:t}=i,o=(0,Fe.q)(t||{},!0);return{...i,account_settings:o}}formatProfile(i){const{first_name:t,last_name:o,city:s,state:a,country:r}=i;this.name=this.formatValues([t,o]," "),this.address=this.formatValues([s,a,r],", ");const u=this.getUserAccountSettings();this.demographic=this.formatDemographic(u)}formatDemographic(i){const t=i.account_field||{value:"",description:""},o=i.account_role||{value:"",description:""};return this.formatValues(["Other"===t.value?t.description:t.value,"Other"===o.value?o.description:o.value]," ")}formatValues(i,t=""){return i.filter(Boolean).join(t)}static#e=this.\u0275fac=function(t){return new(t||Se)(e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(e.gRc),e.rXU(te.UG))};static#t=this.\u0275cmp=e.VBU({type:Se,selectors:[["app-account-profile"]],viewQuery:function(t,o){if(1&t&&e.GBs(z,7),2&t){let s;e.mGM(s=e.lsd())&&(o.panel=s.first)}},decls:62,vars:23,consts:[["panel",""],["fieldTemplate",""],["roleTemplate",""],["standardUserTemplate",""],["label","Profile"],["panel-view-actions",""],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click"],["panel-view",""],["card-header","",4,"ngIf"],["card-content",""],["panel-edit","",1,"profile"],[1,"profile__notice","mb-7","text-xs"],["href","https://www.biodigital.com/privacy","target","_blank",1,"text-link","underline"],["href","https://support.biodigital.com/hc/en-us/articles/360054841794-What-information-does-BioDigital-collect-about-me-","target","_blank",1,"text-link","underline"],[3,"formGroup"],["label","Email","theme","light",1,"mb-2"],["type","email",1,"input",3,"value","disabled"],[1,"flex","mb-2"],["label","First Name","theme","light",1,"grow","basis-2/4","pr-2"],["type","email","formControlName","first_name",1,"input"],["label","Last Name","theme","light",1,"grow","basis-2/4","pl-2"],["type","email","formControlName","last_name",1,"input"],["formGroupName","account_settings"],[4,"ngIf","ngIfElse"],["label","City","theme","light",1,"grow","basis-2/4","pr-2"],["type","text","formControlName","city",1,"input"],["label","State","theme","light",1,"grow","basis-2/4","pl-2"],["formControlName","state",1,"input"],["value",""],[3,"value",4,"ngFor","ngForOf"],["label","Country","theme","light",1,"pb-2"],["placeholder","Select Country","formControlName","country",1,"input"],[1,"flex","justify-end","mt-4"],["type","button","app-button","","buttonTheme","light","buttonType","default",1,"mr-4",3,"click","disabled"],["type","submit","app-button","","buttonType","primary",3,"click","disabled"],["card-header",""],["theme","light","class","pb-2","formGroupName","account_field",3,"label",4,"ngIf"],["theme","light","formGroupName","account_field",1,"pb-2",3,"label"],["placeholder","Select Field","formControlName","value",1,"input"],[3,"label"],["value","Other"],["type","text","class","input mt-2","formControlName","description",3,"placeholder",4,"ngIf"],[3,"value"],["type","text","formControlName","description",1,"input","mt-2",3,"placeholder"],["label","Role","theme","light","class","pb-2","formGroupName","account_role",4,"ngIf"],["label","Role","theme","light","formGroupName","account_role",1,"pb-2"],["placeholder","Select Role","formControlName","value",1,"input"],[4,"ngTemplateOutlet"],["label","Purpose","theme","light","class","pb-2","formGroupName","account_purpose",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["label","Purpose","theme","light","formGroupName","account_purpose",1,"pb-2"],["placeholder","Select Purpose","formControlName","value",1,"input"]],template:function(t,o){if(1&t){const s=e.RV6();e.j41(0,"app-account-panel",4,0)(2,"span",5)(3,"button",6),e.bIt("click",function(){return e.eBV(s),e.Njj(o.handleEditClick())}),e.EFF(4," Edit "),e.k0s()(),e.j41(5,"div",7)(6,"app-account-summary-card"),e.DNE(7,Kn,2,1,"div",8),e.j41(8,"div",9)(9,"div"),e.EFF(10),e.nI1(11,"async"),e.k0s(),e.j41(12,"div"),e.EFF(13),e.k0s(),e.j41(14,"div"),e.EFF(15),e.k0s()()()(),e.j41(16,"div",10)(17,"div",11),e.EFF(18," This information is optional, but by entering it we can provide a more personal experience, and we will always keep it secure. See our "),e.j41(19,"a",12),e.EFF(20,"privacy policy"),e.k0s(),e.EFF(21," for details. "),e.j41(22,"a",13),e.EFF(23,"What other personal information does BioDigital store?"),e.k0s()(),e.j41(24,"form",14)(25,"app-form-field",15),e.nrm(26,"input",16),e.nI1(27,"async"),e.k0s(),e.j41(28,"div",17)(29,"app-form-field",18),e.nrm(30,"input",19),e.k0s(),e.j41(31,"app-form-field",20),e.nrm(32,"input",21),e.k0s()(),e.qex(33,22),e.DNE(34,ni,1,1,"ng-template",null,1,e.C5r)(36,ai,1,1,"ng-template",null,2,e.C5r)(38,ci,2,1,"ng-container",23),e.nI1(39,"async"),e.DNE(40,vi,5,5,"ng-template",null,3,e.C5r),e.bVm(),e.j41(42,"div",17)(43,"app-form-field",24),e.nrm(44,"input",25),e.k0s(),e.j41(45,"app-form-field",26)(46,"select",27)(47,"option",28),e.EFF(48,"-- Select a State --"),e.k0s(),e.DNE(49,yi,2,2,"option",29),e.k0s()()(),e.j41(50,"app-form-field",30)(51,"select",31)(52,"option",28),e.EFF(53,"-- Select a Country --"),e.k0s(),e.DNE(54,Ci,2,2,"option",29),e.k0s()(),e.j41(55,"div",32)(56,"button",33),e.nI1(57,"async"),e.bIt("click",function(){return e.eBV(s),e.Njj(o.handleCancelClick())}),e.EFF(58," Cancel "),e.k0s(),e.j41(59,"button",34),e.nI1(60,"async"),e.bIt("click",function(){return e.eBV(s),e.Njj(o.handleSaveClick())}),e.EFF(61," Save Changes "),e.k0s()()()()()}if(2&t){let s,a;const r=e.sdS(41);e.R7$(7),e.Y8G("ngIf",o.name),e.R7$(3),e.JRh(null==(s=e.bMT(11,13,o.userProfile$))?null:s.email),e.R7$(3),e.JRh(o.demographic),e.R7$(2),e.JRh(o.address),e.R7$(9),e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("value",null==(a=e.bMT(27,15,o.userProfile$))?null:a.email)("disabled",!0),e.R7$(12),e.Y8G("ngIf",e.bMT(39,17,o.hasOrganization$))("ngIfElse",r),e.R7$(11),e.Y8G("ngForOf",o.states),e.R7$(5),e.Y8G("ngForOf",o.countries),e.R7$(2),e.Y8G("disabled",e.bMT(57,19,o.profileUpdating$)),e.R7$(3),e.Y8G("disabled",!o.form.dirty||o.form.invalid||e.bMT(60,21,o.profileUpdating$))}},dependencies:[c.Sq,c.bT,c.T3,c.ux,c.e1,d.qT,d.xH,d.y7,d.me,d.wz,d.BC,d.cb,d.j4,d.JD,d.$R,w.Q,Ge.K,z,Xt,c.Jj],styles:[".profile__notice[_ngcontent-%COMP%]{color:#374a68}"],changeDetection:0})}yt([(0,p.l6)(g.k.getUserProfile),Ct("design:type",_.c)],Se.prototype,"userProfile$",void 0),yt([(0,p.l6)(F.q.hasOrganization),Ct("design:type",_.c)],Se.prototype,"hasOrganization$",void 0),yt([(0,p.l6)(g.k.getProfileUpdating),Ct("design:type",_.c)],Se.prototype,"profileUpdating$",void 0);var se=l(53236),me=l(8961),Lt=l(53719);function Ri(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleEditClick())}),e.EFF(1," Edit "),e.k0s()}}function Fi(n,i){1&n&&(e.qex(0),e.EFF(1," You've signed in with with your Google Account. Please visit your Google Account to manage your password. "),e.bVm())}function xi(n,i){1&n&&(e.qex(0),e.EFF(1," Change the password for your account. "),e.bVm())}function Si(n,i){if(1&n&&(e.j41(0,"div")(1,"div",11)(2,"app-message-toggle",12),e.EFF(3),e.k0s()()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("shown",t.successMessage),e.R7$(),e.SpI(" ",t.successMessage," ")}}function ji(n,i){if(1&n&&(e.j41(0,"div",27)(1,"mat-error"),e.EFF(2),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(2),e.SpI(" New password must be ",t.minPasswordLength," characters or longer. ")}}function Ii(n,i){1&n&&(e.j41(0,"div",27)(1,"mat-error"),e.EFF(2," Passwords must match. "),e.k0s()())}function Ui(n,i){if(1&n){const t=e.RV6();e.j41(0,"form",15)(1,"div",11)(2,"app-message-toggle",16),e.EFF(3),e.k0s()(),e.j41(4,"app-form-field",17),e.nrm(5,"input",18),e.k0s(),e.j41(6,"app-form-field",19),e.nrm(7,"input",20),e.DNE(8,ji,3,1,"div",21),e.k0s(),e.j41(9,"app-form-field",22),e.nrm(10,"input",23),e.DNE(11,Ii,3,0,"div",21),e.k0s(),e.j41(12,"div",24)(13,"button",25),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleCancelClick())}),e.EFF(14," Cancel "),e.k0s(),e.j41(15,"button",26),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleSaveClick())}),e.EFF(16," Save Password "),e.k0s()()()}if(2&n){const t=e.XpG(2);e.Y8G("formGroup",t.form),e.R7$(2),e.Y8G("shown",!t.form.touched&&t.errorMessage),e.R7$(),e.SpI(" ",t.errorMessage," "),e.R7$(5),e.Y8G("ngIf",null==t.form.errors?null:t.form.errors.invalidLength),e.R7$(3),e.Y8G("ngIf",null==t.form.errors?null:t.form.errors.passwordsMismatch),e.R7$(2),e.Y8G("disabled",t.updating),e.R7$(2),e.Y8G("disabled",t.form.invalid||t.updating)}}function Ei(n,i){if(1&n&&(e.j41(0,"div",13),e.EFF(1),e.k0s(),e.DNE(2,Ui,17,7,"form",14)),2&n){const t=e.XpG();e.R7$(),e.SpI(" Your password must be ",t.minPasswordLength," characters or longer. "),e.R7$(),e.Y8G("ngIf",!t.updated)}}class Ve{constructor(i,t,o,s){this.store=i,this.actions=t,this.formBuilder=o,this.changeDetectorRef=s,this.minPasswordLength=x.c.minPasswordLength,this.updating=!1,this.updated=!1,this.ngUnsubscribe=new T.B}ngOnInit(){this.initForm(),this.initUpdateListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({current_password:["",d.k0.required],new_password:["",d.k0.required],confirm_new_password:["",d.k0.required]},{validators:this.passwordValidator})}initUpdateListeners(){this.actions.pipe((0,p.xi)(f.RE),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.updating=!0,this.changeDetectorRef.markForCheck()}),this.actions.pipe((0,p.xi)(f.kP),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.form.markAsUntouched(),this.updating=!1,this.updated=!0,this.errorMessage="",this.successMessage="Your password was successfully updated.",this.changeDetectorRef.markForCheck(),setTimeout(()=>{this.resetForm(),this.resetState(),this.panel.mode="view"},5e3)}),this.actions.pipe((0,p.xi)(f.j3),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.form.markAsUntouched(),this.updating=!1,this.updated=!1,this.errorMessage=(0,se.u1)(i.error)||"Your password could not be updated. Please try again.",this.successMessage="",this.changeDetectorRef.markForCheck()})}handleEditClick(){this.panel.mode="edit"}handleCancelClick(){this.resetForm(),this.resetState(),this.panel.mode="view"}handleSaveClick(){this.updatePassword()}resetForm(){this.form.reset()}resetState(){this.updating=!1,this.updated=!1,this.errorMessage="",this.successMessage=""}updatePassword(){const{current_password:i,new_password:t,confirm_new_password:o}=this.form.value;this.store.dispatch(new f.RE(i,t,o))}passwordValidator(i){const{new_password:t,confirm_new_password:o}=i.value,s=t&&o&&t!==o,a=t&&t.length<x.c.minPasswordLength;return s||a?{passwordsMismatch:s,invalidLength:a}:null}static#e=this.\u0275fac=function(t){return new(t||Ve)(e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:Ve,selectors:[["app-account-password"]],viewQuery:function(t,o){if(1&t&&e.GBs(z,7),2&t){let s;e.mGM(s=e.lsd())&&(o.panel=s.first)}},decls:13,vars:9,consts:[["changePasswordTemplate",""],["label","Password"],["panel-view-actions",""],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click",4,"ngIf"],["panel-view",""],[1,"text-sm",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["panel-edit",""],[4,"ngIf","ngIfElse"],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click"],[1,"my-6"],["type","message",3,"shown"],[1,"text-sm","mb-7"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["type","error","icon","exclamation-circle",3,"shown"],["label","Current Password","theme","light",1,"mb-2"],["type","password","formControlName","current_password",1,"input"],["label","New Password","theme","light",1,"mb-2"],["type","password","formControlName","new_password",1,"input"],["class","mt-1",4,"ngIf"],["label","Confirm New Password","theme","light",1,"mb-2"],["type","password","formControlName","confirm_new_password",1,"input"],[1,"flex","justify-end","mt-4"],["type","button","app-button","","buttonTheme","light","buttonType","default",1,"mr-4",3,"click","disabled"],["type","submit","app-button","","buttonType","primary",3,"click","disabled"],[1,"mt-1"]],template:function(t,o){if(1&t&&(e.j41(0,"app-account-panel",1)(1,"div",2),e.DNE(2,Ri,2,0,"button",3),e.nI1(3,"async"),e.k0s(),e.j41(4,"div",4)(5,"div",5),e.nI1(6,"async"),e.DNE(7,Fi,2,0,"ng-container",6)(8,xi,2,0,"ng-container",7),e.k0s()(),e.j41(9,"div",8),e.DNE(10,Si,4,2,"div",9)(11,Ei,3,2,"ng-template",null,0,e.C5r),e.k0s()()),2&t){let s,a;const r=e.sdS(12);e.R7$(2),e.Y8G("ngIf",!(null!=(s=e.bMT(3,5,o.userProfile$))&&s.is_third_party)),e.R7$(3),e.Y8G("ngSwitch",null==(a=e.bMT(6,7,o.userProfile$))?null:a.third_party_provider_name),e.R7$(2),e.Y8G("ngSwitchCase","Google"),e.R7$(3),e.Y8G("ngIf",o.updated)("ngIfElse",r)}},dependencies:[c.bT,c.ux,c.e1,c.fG,d.qT,d.me,d.BC,d.cb,d.j4,d.JD,w.Q,Ge.K,me.X,Lt.TL,z,c.Jj],changeDetection:0})}!function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);s>3&&a&&Object.defineProperty(i,t,a)}([(0,p.l6)(g.k.getUserProfile),function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",i)}(0,_.c)],Ve.prototype,"userProfile$",void 0);var Tt=l(27182),Ai=l(19833),$=l(94371),L=l(34440),V=l(89079),it=l(25780),kt=function(n){return n.TeamAccountClosed="team_account_closed",n.ContentOwnershipTransfer="content_ownership_transfer",n}(kt||{});function Mi(n,i){if(1&n&&(e.qex(0),e.j41(1,"span",3),e.EFF(2),e.k0s(),e.EFF(3),e.bVm()),2&n){const t=e.XpG();e.R7$(2),e.JRh(t.name),e.R7$(),e.SpI(" left the team on ",t.date," and their content was transferred to you. ")}}function Gi(n,i){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"span",3),e.EFF(2,"Your team was closed"),e.k0s(),e.EFF(3),e.j41(4,"button",4),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleUpgradeClick())}),e.EFF(5," Upgrade now. "),e.k0s(),e.bVm()}if(2&n){const t=e.XpG();e.R7$(3),e.SpI(" on ",t.date,". You have been downgraded to a free Personal account. "),e.R7$(),e.Y8G("uppercase",!1)}}let wi=(()=>{class n{constructor(t,o){this.store=t,this.dialogService=o,this.UserNoticeTypes=kt,this.name="",this.date="",this.dismissing=!1}ngOnInit(){if(this.date=(0,c.Yq)(this.userNotice.notice_created_date,"longDate","en"),this.userNotice.notice_type===kt.ContentOwnershipTransfer){const t=this.userNotice.notice_details,{user_first_name:o,user_last_name:s}=t.transfer_user;this.name=[o,s].filter(Boolean).join(" ")}}handleUpgradeClick(){this.dialogService.openUpgradeDialog()}handleDismiss(){this.dismissing=!0,this.store.dispatch(new f.EX(this.userNotice.notice_id))}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(p.il),e.rXU(ee.o))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-user-notice"]],inputs:{userNotice:"userNotice"},decls:4,vars:6,consts:[["type","notification","theme","dark","icon","info-circle",1,"user-notice",3,"handleDismiss","dismiss"],[1,"text-sm",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"font-bold"],["app-button","","buttonType","text","buttonTheme","light",1,"underline",3,"click","uppercase"]],template:function(o,s){1&o&&(e.j41(0,"app-message-toggle",0),e.bIt("handleDismiss",function(){return s.handleDismiss()}),e.j41(1,"div",1),e.DNE(2,Mi,4,2,"ng-container",2)(3,Gi,6,2,"ng-container",2),e.k0s()()),2&o&&(e.AVh("user-notice--dismissing",s.dismissing),e.Y8G("dismiss",!0),e.R7$(),e.Y8G("ngSwitch",s.userNotice.notice_type),e.R7$(),e.Y8G("ngSwitchCase",s.UserNoticeTypes.ContentOwnershipTransfer),e.R7$(),e.Y8G("ngSwitchCase",s.UserNoticeTypes.TeamAccountClosed))},dependencies:[w.Q,c.ux,c.e1,me.X],styles:[".user-notice--dismissing[_ngcontent-%COMP%]{opacity:.5}"],changeDetection:0})}return n})();function $i(n,i){1&n&&e.nrm(0,"app-user-notice",1),2&n&&e.Y8G("userNotice",i.$implicit)}let Rt=(()=>{class n{constructor(t){this.store=t,this.ngUnsubscribe=new T.B}ngOnInit(){this.userNotices$=this.store.select(g.k.getUserNotices).pipe((0,D.p)(t=>!(0,b.isNil)(t)),(0,k.T)(t=>t.filter(o=>o.notice_type===this.noticeType)),(0,h.Q)(this.ngUnsubscribe)),this.store.selectSnapshot(g.k.getUserNotices)||this.store.dispatch(new f.T9)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(p.il))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-user-notices"]],inputs:{noticeType:"noticeType"},decls:2,vars:3,consts:[["class","block mb-3",3,"userNotice",4,"ngFor","ngForOf"],[1,"block","mb-3",3,"userNotice"]],template:function(o,s){1&o&&(e.DNE(0,$i,1,1,"app-user-notice",0),e.nI1(1,"async")),2&o&&e.Y8G("ngForOf",e.bMT(1,1,s.userNotices$))},dependencies:[c.Sq,wi,c.Jj],changeDetection:0})}return n})();var Ce=l(28407),Qt=l(59771),Bi=l(59e3);const qt=["discover","visa","master-card","american-express"];var Jt=l(39705),Ht=l(87996),Oi=l(27153),Te=l(97352);function Ni(n,i){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.JRh(t.paypalEmail())}}function Yi(n,i){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s(),e.j41(2,"span",4),e.EFF(3),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI("Ending in ",t.cardInfo().lastFour,""),e.R7$(2),e.JRh(t.cardInfo().cardType)}}let Wt=(()=>{class n{constructor(t){this.subscriptionService=t,this.paymentType=(0,e.hFB)(),this.paypalEmail=(0,e.hFB)(),this.cardInfo=(0,e.hFB)()}getCardImageSrc(t){return this.subscriptionService.getCardImageSrc(t)}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(Qt.n))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-subscription-payment-method"]],inputs:{paymentType:[1,"paymentType"],paypalEmail:[1,"paypalEmail"],cardInfo:[1,"cardInfo"]},decls:6,vars:2,consts:[[1,"h-16","flex","flex-row","items-center","mt-3","p-3","gap-3","border-2","border-solid","border-green-800","rounded"],[1,"max-w-20","max-h-7","block",3,"src"],[1,"flex","flex-col","flex-grow","gap-1"],["src","assets/images/circle-check.svg","alt","Circle Check"],[1,"text-2xs","text-gray-600"]],template:function(o,s){1&o&&(e.j41(0,"div",0),e.nrm(1,"img",1),e.j41(2,"div",2),e.DNE(3,Ni,2,1,"span")(4,Yi,4,2),e.k0s(),e.nrm(5,"img",3),e.k0s()),2&o&&(e.R7$(),e.Y8G("src",s.getCardImageSrc(s.paymentType()),e.B4B),e.R7$(2),e.vxM(s.paypalEmail()?3:s.cardInfo()?4:-1))}})}return n})();function Vi(n,i){1&n&&(e.j41(0,"div",2),e.EFF(1,"Invalid code"),e.k0s())}function zi(n,i){if(1&n&&(e.j41(0,"div",3),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" Upon subscription renewal, the total cost of Personal Plus will increase to ",e.ii3(2,1,t.planBasePrice(),"USD","symbol","1.2-2")," plus sales tax (if applicable). ")}}let Xi=(()=>{class n{get discountcode(){return this.form.get("discountcode")}constructor(t,o,s,a,r){this.store=t,this.actions=o,this.formBuilder=s,this.snackBar=a,this.changeDetectorRef=r,this.plan=(0,V.ot)(this.store.select(L.z.getSelectedPlan)),this.planBasePrice=(0,e.EWP)(()=>this.plan().price??0),this.discount=(0,e.EWP)(()=>this.plan().discount),this.form=this.formBuilder.group({discountcode:["",{updateOn:"blur"}]}),this.actions.pipe((0,p.xi)($.wq),(0,V.pQ)()).subscribe(()=>{this.handleCheckSuccess(),this.changeDetectorRef.markForCheck()}),this.actions.pipe((0,p.xi)($.Vz),(0,V.pQ)()).subscribe(()=>{this.snackBar.open("There was an error applying the promo code, please try again.")}),this.discountcode.valueChanges.pipe((0,H.F)((u,y)=>(0,b.isEqual)(u,y)),(0,V.pQ)()).subscribe(()=>this.checkPromoCode())}handleEnter(t){this.discountcode.setValue(t.target.value)}checkPromoCode(){const t=this.plan().plan_id,o=this.discountcode.value;o?(this.store.dispatch(new $.FT(t,o)),this.discountcode.disable({emitEvent:!1})):(this.store.dispatch(new $.l2),this.discountcode.setErrors(null))}handleCheckSuccess(){const t=(0,b.isNil)(this.discount())?{invalid:!0}:null;this.discountcode.enable({emitEvent:!1}),this.discountcode.setErrors(t,{emitEvent:!1})}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(p.il),e.rXU(p.En),e.rXU(d.ok),e.rXU(te.UG),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-subscription-promo"]],decls:5,vars:3,consts:[[3,"formGroup"],["type","text","formControlName","discountcode",1,"input","h-12","!text-sm",3,"keyup.enter"],[1,"text-sm","text-error"],[1,"text-xs","mt-1"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"div")(2,"input",1),e.bIt("keyup.enter",function(r){return s.handleEnter(r)}),e.k0s(),e.DNE(3,Vi,2,0,"div",2),e.k0s(),e.DNE(4,zi,3,6,"div",3),e.k0s()),2&o&&(e.Y8G("formGroup",s.form),e.R7$(3),e.vxM(s.discountcode.invalid&&(s.discountcode.dirty||s.discountcode.touched)?3:-1),e.R7$(),e.vxM(s.discount()?4:-1))},dependencies:[d.me,d.BC,d.cb,d.j4,d.JD,c.oe],changeDetection:0})}return n})(),Li=(()=>{class n{constructor(t){this.changeDetectorRef=t,this.appAccountSubscriptionHostedField=(0,e.hFB)(),this.formControlName=(0,e.hFB)(),(0,e.QZP)(()=>this.listenForEvents())}listenForEvents(){const t=this.appAccountSubscriptionHostedField();if(t){const s=a=>{a.emittedBy===this.formControlName()&&(this.onChange(a.fields[a.emittedBy].isValid),this.changeDetectorRef.detectChanges())};t.on("blur",a=>{a.emittedBy===this.formControlName()&&(this.onTouched(),this.changeDetectorRef.detectChanges())}),t.on("notEmpty",s),t.on("empty",s),t.on("validityChange",s)}}writeValue(){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}onChange(t){}onTouched(){}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(e.gRc))};static#t=this.\u0275dir=e.FsC({type:n,selectors:[["","appAccountSubscriptionHostedField",""]],inputs:{appAccountSubscriptionHostedField:[1,"appAccountSubscriptionHostedField"],formControlName:[1,"formControlName"]},features:[e.Jv_([{provide:d.kq,useExisting:(0,e.Rfq)(()=>n),multi:!0}])]})}return n})();const Qi=(n,i)=>i.type,qi=(n,i)=>i.code,Ji=(n,i)=>i.abbreviation,Hi=(n,i)=>({"flex-row":n,"flex-col":i});function Wi(n,i){if(1&n&&(e.j41(0,"li"),e.nrm(1,"img",42),e.k0s()),2&n){const t=i.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("src",o.getCardImageSrc(t.type),e.B4B)}}function Ki(n,i){1&n&&(e.j41(0,"div",11),e.EFF(1,"Invalid card number"),e.k0s())}function Zi(n,i){if(1&n&&e.nrm(0,"img",12),2&n){const t=e.XpG(2);e.Y8G("src",t.getCardImageSrc(t.card().type),e.B4B)}}function eo(n,i){1&n&&(e.j41(0,"div",11),e.EFF(1,"Invalid expiration date"),e.k0s())}function to(n,i){if(1&n&&e.EFF(0),2&n){const t=e.XpG(2);e.SpI(" (",t.card().code.size," digits) ")}}function no(n,i){1&n&&(e.j41(0,"div",11),e.EFF(1,"Invalid CVV"),e.k0s())}function io(n,i){1&n&&e.EFF(0," or pay with ")}function oo(n,i){1&n&&e.nrm(0,"app-spinner",19)}function so(n,i){1&n&&(e.j41(0,"div",11),e.EFF(1,"Invalid street address"),e.k0s())}function ao(n,i){1&n&&(e.j41(0,"div",11),e.EFF(1,"Invalid city"),e.k0s())}function ro(n,i){if(1&n&&(e.j41(0,"option",34),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.abbreviation),e.R7$(),e.SpI(" ",t.name," ")}}function co(n,i){if(1&n&&(e.j41(0,"label",43),e.EFF(1,"State"),e.k0s(),e.j41(2,"select",44),e.nrm(3,"option",33),e.Z7z(4,ro,2,2,"option",34,Ji),e.k0s()),2&n){const t=e.XpG(2);e.R7$(4),e.Dyx(t.states)}}function lo(n,i){1&n&&(e.j41(0,"label",43),e.EFF(1,"State, Province or Region"),e.k0s(),e.nrm(2,"input",45))}function po(n,i){1&n&&(e.j41(0,"div",11),e.EFF(1,"Invalid state"),e.k0s())}function uo(n,i){1&n&&(e.j41(0,"div",11),e.EFF(1,"Invalid zipcode"),e.k0s())}function mo(n,i){if(1&n&&(e.j41(0,"option",34),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.code),e.R7$(),e.SpI(" ",t.name," ")}}function ho(n,i){1&n&&(e.j41(0,"div",11),e.EFF(1,"Invalid country"),e.k0s())}function _o(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",4)(1,"div",6),e.EFF(2,"Payment Method"),e.k0s(),e.nrm(3,"app-account-subscription-payment-method",46),e.j41(4,"button",47),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setPaymentType("card"))}),e.EFF(5," Change payment method "),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(3),e.Y8G("paypalEmail",t.paypalEmail()),e.R7$(),e.Y8G("uppercase",!1)}}function go(n,i){1&n&&(e.j41(0,"div",21)(1,"div",6),e.EFF(2,"Promo code"),e.k0s(),e.nrm(3,"app-account-subscription-promo",48),e.k0s())}function fo(n,i){if(1&n&&(e.j41(0,"app-message-toggle",35),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.formError()," ")}}function bo(n,i){1&n&&e.nrm(0,"app-spinner",19)}function vo(n,i){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.JRh(e.ii3(2,1,t.planDiscount(),"USD","symbol","1.2-2"))}}function yo(n,i){1&n&&e.nrm(0,"app-spinner",19)}function Co(n,i){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.JRh(e.ii3(2,1,t.planSalesTaxAmount(),"USD","symbol","1.2-2"))}}function To(n,i){1&n&&e.nrm(0,"app-spinner",19)}function ko(n,i){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.JRh(e.ii3(2,1,t.planTotal(),"USD","symbol","1.2-2"))}}function Ro(n,i){if(1&n&&(e.j41(0,"div",5)(1,"span"),e.EFF(2,"Sub total"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"currency"),e.k0s()(),e.j41(6,"div",5)(7,"span"),e.EFF(8,"Promo code"),e.k0s(),e.DNE(9,bo,1,0,"app-spinner",19)(10,vo,3,6,"span"),e.k0s(),e.j41(11,"div",5)(12,"span"),e.EFF(13,"Sales tax"),e.k0s(),e.DNE(14,yo,1,0,"app-spinner",19)(15,Co,3,6,"span"),e.k0s(),e.j41(16,"div",49)(17,"span"),e.EFF(18,"Total"),e.k0s(),e.DNE(19,To,1,0,"app-spinner",19)(20,ko,3,6,"span"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(4),e.JRh(e.ii3(5,4,t.planBasePrice(),"USD","symbol","1.2-2")),e.R7$(5),e.vxM(t.checkingDiscountCode()?9:10),e.R7$(5),e.vxM(t.checkingSalesTax()?14:15),e.R7$(5),e.vxM(t.checkingSalesTax()?19:20)}}function Fo(n,i){1&n&&e.nrm(0,"app-spinner",41)}function xo(n,i){if(1&n){const t=e.RV6();e.j41(0,"form",3),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.submitPayment())}),e.j41(1,"div")(2,"div",4)(3,"div",5)(4,"div",6),e.EFF(5,"Pay with Credit Card"),e.k0s(),e.j41(6,"ul",7),e.Z7z(7,Wi,2,1,"li",null,Qi),e.k0s()(),e.j41(9,"div",8)(10,"label",9),e.EFF(11,"Card Number"),e.k0s(),e.nrm(12,"div",10),e.DNE(13,Ki,2,0,"div",11)(14,Zi,1,1,"img",12),e.k0s(),e.j41(15,"div",13)(16,"div",8)(17,"label",14),e.EFF(18,"Exp MM/YY"),e.k0s(),e.nrm(19,"div",15),e.DNE(20,eo,2,0,"div",11),e.k0s(),e.j41(21,"div",8)(22,"label",16),e.EFF(23,"CVV "),e.DNE(24,to,1,1),e.k0s(),e.nrm(25,"div",17),e.DNE(26,no,2,0,"div",11),e.k0s()()(),e.j41(27,"div",18),e.DNE(28,io,1,0)(29,oo,1,0,"app-spinner",19),e.nrm(30,"div",20),e.k0s(),e.j41(31,"div",21)(32,"div",6),e.EFF(33,"Billing Address"),e.k0s(),e.j41(34,"div",8)(35,"label",22),e.EFF(36,"Street Address"),e.k0s(),e.nrm(37,"input",23),e.DNE(38,so,2,0,"div",11),e.k0s(),e.j41(39,"div",8)(40,"label",24),e.EFF(41,"Apt, Suite, Building (Optional)"),e.k0s(),e.nrm(42,"input",25),e.k0s(),e.j41(43,"div",26)(44,"div",8)(45,"label",27),e.EFF(46,"City"),e.k0s(),e.nrm(47,"input",28),e.DNE(48,ao,2,0,"div",11),e.k0s(),e.j41(49,"div",8),e.DNE(50,co,6,0)(51,lo,3,0)(52,po,2,0,"div",11),e.k0s()(),e.j41(53,"div",13)(54,"div",8)(55,"label",29),e.EFF(56,"Zipcode"),e.k0s(),e.nrm(57,"input",30),e.DNE(58,uo,2,0,"div",11),e.k0s(),e.j41(59,"div",8)(60,"label",31),e.EFF(61,"Country"),e.k0s(),e.j41(62,"select",32),e.nrm(63,"option",33),e.Z7z(64,mo,2,2,"option",34,qi),e.k0s(),e.DNE(66,ho,2,0,"div",11),e.k0s()()()(),e.DNE(67,_o,6,2,"div",4)(68,go,4,0,"div",21)(69,fo,2,1,"app-message-toggle",35),e.j41(70,"div",36)(71,"div",37),e.DNE(72,Ro,21,9),e.j41(73,"div",38)(74,"button",39),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.cancel())}),e.EFF(75," Cancel "),e.k0s(),e.j41(76,"button",40),e.EFF(77),e.DNE(78,Fo,1,0,"app-spinner",41),e.k0s()()()()()}if(2&n){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(),e.AVh("hidden","paypal"===t.paymentType()),e.R7$(6),e.Dyx(t.supportedCards()),e.R7$(5),e.Y8G("appAccountSubscriptionHostedField",t.braintreeHostedFields()),e.R7$(),e.vxM(t.number.invalid&&(t.number.dirty||t.number.touched)?13:-1),e.R7$(),e.vxM(t.card()?14:-1),e.R7$(5),e.Y8G("appAccountSubscriptionHostedField",t.braintreeHostedFields()),e.R7$(),e.vxM(t.expirationDate.invalid&&(t.expirationDate.dirty||t.expirationDate.touched)?20:-1),e.R7$(4),e.vxM(t.card()?24:-1),e.R7$(),e.Y8G("appAccountSubscriptionHostedField",t.braintreeHostedFields()),e.R7$(),e.vxM(t.cvv.invalid&&(t.cvv.dirty||t.cvv.touched)?26:-1),e.R7$(2),e.vxM(t.paypalLoaded()?28:29),e.R7$(10),e.vxM(t.streetAddress.invalid&&(t.streetAddress.dirty||t.streetAddress.touched)?38:-1),e.R7$(5),e.Y8G("ngClass",e.l_i(26,Hi,t.horizontalBreakpoint()>t.HorizontalBreakpoint.Small,t.horizontalBreakpoint()<=t.HorizontalBreakpoint.Small)),e.R7$(5),e.vxM(t.locality.invalid&&(t.locality.dirty||t.locality.touched)?48:-1),e.R7$(2),e.vxM(t.usAddress()?50:51),e.R7$(2),e.vxM(t.region.invalid&&(t.region.dirty||t.region.touched)?52:-1),e.R7$(6),e.vxM(t.postalCode.invalid&&(t.postalCode.dirty||t.postalCode.touched)?58:-1),e.R7$(6),e.Dyx(t.countries),e.R7$(2),e.vxM(t.countryCodeAlpha2.invalid&&(t.countryCodeAlpha2.dirty||t.countryCodeAlpha2.touched)?66:-1),e.R7$(),e.vxM("paypal"===t.paymentType()?67:-1),e.R7$(),e.vxM("buy"===t.mode()?68:-1),e.R7$(),e.vxM(t.formError()?69:-1),e.R7$(3),e.vxM("buy"===t.mode()?72:-1),e.R7$(4),e.Y8G("disabled",!t.canSubmitPayment()),e.R7$(),e.SpI(" ",t.submitText()," "),e.R7$(),e.vxM(t.submittingPayment()?78:-1)}}function So(n,i){1&n&&e.nrm(0,"app-spinner",2)}function Kt(n){return(0,Oi.$r)(n.value)?null:{invalidUSZipCode:!0}}let Zt=(()=>{class n{get number(){return this.form.get("number")}get expirationDate(){return this.form.get("expirationDate")}get cvv(){return this.form.get("cvv")}get streetAddress(){return this.form.get("streetAddress")}get locality(){return this.form.get("locality")}get region(){return this.form.get("region")}get postalCode(){return this.form.get("postalCode")}get countryCodeAlpha2(){return this.form.get("countryCodeAlpha2")}get formBillingAddress(){const t=this.form.value;return{streetAddress:t.streetAddress,extendedAddress:t.extendedAddress,locality:t.locality,region:t.region,postalCode:t.postalCode,countryCodeAlpha2:t.countryCodeAlpha2}}constructor(t,o,s,a,r,u){this.subscriptionService=t,this.vendorAnalyticsService=o,this.snackBar=s,this.store=a,this.formBuilder=r,this.actions=u,this.mode=(0,e.hFB)(),this.paymentType=(0,e.vPA)("card"),this.paymentCancel=new e.bkB,this.braintreeHostedFields=(0,e.vPA)(null),this.plan=(0,V.ot)(this.store.select(L.z.getSelectedPlan)),this.planSalesTax=(0,V.ot)(this.store.select(L.z.getSelectedPlanSalesTax)),this.horizontalBreakpoint=(0,V.ot)(this.store.select(q.V.getHorizontalBreakpoint)),this.HorizontalBreakpoint=m.m,this.planId=(0,e.hFB)(),this.deviceData=(0,e.vPA)(""),this.nonce=(0,e.vPA)(""),this.billingAddress=(0,e.vPA)(null),this.salesTaxCode=(0,e.EWP)(()=>this.planSalesTax()?.sales_tax_code),this.discountcode=(0,e.EWP)(()=>this.plan()?.discount?.id??""),this.discountcode$=(0,V.br)(this.discountcode),this.checkingSalesTax=(0,V.ot)(this.store.select(L.z.getCheckingSalesTax)),this.checkingDiscountCode=(0,V.ot)(this.store.select(L.z.getCheckingCode)),this.buying=(0,V.ot)(this.store.select(L.z.getBuying)),this.updating=(0,V.ot)(this.store.select(L.z.getUpdating)),this.braintreeLoaded=(0,e.vPA)(!1),this.paypalLoaded=(0,e.vPA)(!1),this.submittingPayment=(0,e.EWP)(()=>{const y=this.buying(),C=this.updating();return y||C}),this.form=this.formBuilder.group({number:[!1,d.k0.requiredTrue],expirationDate:[!1,d.k0.requiredTrue],cvv:[!1,d.k0.requiredTrue],streetAddress:["",d.k0.required],extendedAddress:[""],locality:["",d.k0.required],region:["",d.k0.required],postalCode:["",[d.k0.required,d.k0.minLength(3)]],countryCodeAlpha2:["",d.k0.required]}),this.countries=zt,this.states=vt,this.supportedCards=(0,e.vPA)([]),this.card=(0,e.vPA)(null),this.usAddress=(0,e.vPA)(!1),this.canSubmitPayment=(0,e.EWP)(()=>this.planId()&&this.deviceData()&&this.nonce()&&this.billingAddress()&&(this.salesTaxCode()||"update"===this.mode())&&!this.checkingDiscountCode()&&!this.checkingSalesTax()&&!this.submittingPayment()),this.submitText=(0,e.EWP)(()=>"buy"===this.mode()?this.submittingPayment()?"Purchasing":"Purchase":"Save Information"),this.formError=(0,e.vPA)(null),this.paypalEmail=(0,e.vPA)(""),this.planBasePrice=(0,e.EWP)(()=>this.plan().price??0),this.planDiscount=(0,e.EWP)(()=>{const y=this.plan()?.discount?.amount??0;return y>0?-1*y:0}),this.planSalesTaxAmount=(0,e.EWP)(()=>this.planSalesTax()?.sales_tax_amount??0),this.planTotal=(0,e.EWP)(()=>{const y=this.planSalesTax(),C=this.plan(),G=this.planBasePrice();return y?.price_total??C?.price_total??G}),this.subscriptions=[]}ngOnInit(){this.loadBraintree(),this.initFormSubscriptions()}ngOnDestroy(){this.destroyBraintree(),this.subscriptions.forEach(t=>t.unsubscribe()),this.clearState()}cancel(){this.paymentCancel.emit()}submitPayment(){var t=this;return(0,Ce.A)(function*(){if(!t.canSubmitPayment())return;const o={planId:t.planId(),deviceData:t.deviceData(),nonce:t.nonce(),type:t.paymentType()};t.formError.set(null),"buy"===t.mode()?t.store.dispatch(new $.OR({...o,discountcode:t.discountcode(),salesTaxCode:t.salesTaxCode()})):t.store.dispatch(new $.P1({...o,billingAddress:t.billingAddress()}))})()}getCardImageSrc(t){return this.subscriptionService.getCardImageSrc(t)}setPaymentType(t){this.paymentType.set(t),this.clearBillingDetails(),"card"===t&&this.form.valid&&this.handleValidForm()}clearBillingDetails(){this.billingAddress.set(null),this.nonce.set(""),this.store.dispatch(new $.sM)}tokenize(t){var o=this;return(0,Ce.A)(function*(){let s;const a={planId:o.planId(),type:o.paymentType()};try{s=t?yield o.braintreePaypalCheckout.tokenizePayment(t):yield o.braintreeHostedFields().tokenize({billingAddress:o.formBillingAddress}),o.store.dispatch(new $.Jv(a))}catch(r){o.store.dispatch(new $.K$(a,(0,se.u1)(r)));const u="buy"===o.mode()?"There was an error requesting your purchase.":"There was an error updating your payment method.";o.snackBar.open(u)}return s})()}initFormSubscriptions(){this.subscriptions.push(this.countryCodeAlpha2.valueChanges.subscribe(t=>this.handleCountryCodeAlpha2Change(t)),this.form.valueChanges.pipe((0,Jt.M)(()=>this.clearBillingDetails()),(0,Ht.B)(250),(0,D.p)(()=>this.form.valid)).subscribe(()=>this.handleValidForm()),this.discountcode$.pipe((0,D.p)(()=>this.form.valid||"paypal"===this.paymentType())).subscribe(()=>this.getSalesTax()),this.actions.pipe((0,p.xi)($.xD,$.ee,$.BO)).subscribe(t=>this.handleActionErrors(t)))}getSalesTax(){this.store.dispatch(new $.Fn(this.planId(),this.billingAddress(),this.discountcode()))}handleCountryCodeAlpha2Change(t){if(this.usAddress.set("US"===t),this.usAddress()){this.postalCode.addValidators(Kt);const o=this.region.value;if(o){const s=vt.find(r=>r.name===o||r.abbreviation===o);this.region.setValue(s?s.abbreviation:"",{emitEvent:!1})}}else this.postalCode.removeValidators(Kt);this.postalCode.updateValueAndValidity({emitEvent:!1})}handleValidForm(){var t=this;return(0,Ce.A)(function*(){t.tokenize().then(o=>t.nonce.set(o.nonce)),t.billingAddress.set(t.formBillingAddress),"buy"===t.mode()&&t.getSalesTax()})()}handlePaypalApprove(t){var o=this;return(0,Ce.A)(function*(){const s=yield o.tokenize(t),a=s.details.billingAddress;return o.nonce.set(s.nonce),o.billingAddress.set({streetAddress:a.line1,extendedAddress:a.line2,locality:a.city,region:a.state,postalCode:a.postalCode,countryCodeAlpha2:a.countryCode}),o.paypalEmail.set(s.details.email),"buy"===o.mode()&&o.getSalesTax(),s})()}handleActionErrors(t){if(t instanceof $.xD)this.snackBar.open("There was an error calculating the plan price.");else{const o=(0,se.u1)(t.error.error);this.formError.set(`There was an issue while ${t instanceof $.ee?"processing":"saving"} your payment: "${o}". Please try again.`)}}loadBraintree(){var t=this;return(0,Ce.A)(function*(){try{const[o,s]=yield t.subscriptionService.loadBraintreeAPI();t.initBraintee(o,s)}catch(o){t.vendorAnalyticsService.track("Braintree Cart Load Failure",{errorMessage:(0,se.u1)(o)}),t.snackBar.open("There was an error loading the payment form."),t.cancel()}t.braintreeLoaded.set(!0)})()}initBraintee(t,o){var s=this;return(0,Ce.A)(function*(){try{s.braintreeClient=yield t.client.create({authorization:o}),s.braintreeDataCollector=yield t.dataCollector.create({client:s.braintreeClient}),s.deviceData.set(s.braintreeDataCollector.deviceData);const a=yield t.hostedFields.create({client:s.braintreeClient,fields:{number:{container:"#number",maskInput:{character:"*",showLastFour:!0}},expirationDate:{container:"#expiration-date"},cvv:{container:"#cvv"}},styles:{input:{"font-size":"14px"}}});s.braintreeHostedFields.set(a),s.braintreePaypalCheckout=yield t.paypalCheckout.create({client:s.braintreeClient}),s.initPaypal(),s.setSupportedCards()}catch(a){s.vendorAnalyticsService.track("Braintree Cart Initialization Failure",{errorMessage:(0,se.u1)(a)}),s.snackBar.open("There was an error initializing the payment form."),s.cancel()}})()}initPaypal(){var t=this;return(0,Ce.A)(function*(){yield t.braintreePaypalCheckout.loadPayPalSDK({vault:!0,intent:"tokenize"});try{window.paypal.Buttons({style:{layout:"horizontal",borderRadius:4,tagline:!1,height:28,color:"white",size:"responsive"},createBillingAgreement:()=>(t.setPaymentType("paypal"),t.braintreePaypalCheckout.createPayment({flow:"vault"})),onApprove:o=>t.handlePaypalApprove(o),onCancel:()=>{t.setPaymentType("card")},onError:function(o){this.vendorAnalyticsService.track("Paypal Communication Failure",{errorMessage:o}),this.snackBar.open("There was an error communicating with Paypal.")}}).render("#paypal-container"),t.paypalLoaded.set(!0)}catch(o){t.vendorAnalyticsService.track("Paypal Initialization Failure",{errorMessage:(0,se.u1)(o)}),t.snackBar.open("There was an error initializing Paypal.")}})()}setSupportedCards(){var t=this;return(0,Ce.A)(function*(){const o=t.braintreeHostedFields(),s=yield o.getState(),a=qt.map(r=>s.cards.find(u=>u.type===r));t.supportedCards.set(a),o.on("cardTypeChange",r=>{let u=null;1===r.cards.length&&qt.includes(r.cards[0].type)&&(u=r.cards[0]),t.card.set(u)})})()}clearState(){this.store.dispatch(new $.sM),this.store.dispatch(new $.l2)}destroyBraintree(){this.braintreeClient&&(this.braintreeClient.teardown(),this.braintreeClient=null),this.braintreeDataCollector&&(this.braintreeDataCollector.teardown(),this.braintreeDataCollector=null),this.braintreeHostedFields()&&(this.braintreeHostedFields().teardown(),this.braintreeHostedFields.set(null)),this.braintreePaypalCheckout&&(this.braintreePaypalCheckout.teardown(),this.braintreePaypalCheckout=null)}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(Qt.n),e.rXU(Bi.e),e.rXU(te.UG),e.rXU(p.il),e.rXU(d.ok),e.rXU(p.En))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-subscription-payment"]],inputs:{mode:[1,"mode"],planId:[1,"planId"]},outputs:{paymentCancel:"paymentCancel"},decls:3,vars:1,consts:[[1,"account-subscription-payment"],[3,"formGroup"],["size","huge",1,"block","my-4"],[3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-3"],[1,"flex","flex-row","justify-between"],[1,"text-md","font-semibold"],[1,"flex","flex-row","gap-2"],[1,"account-subscription-payment__input-container"],["for","number",1,"account-subscription-payment__input-label"],["id","number","formControlName","number",1,"input","account-subscription-payment__input",3,"appAccountSubscriptionHostedField"],[1,"account-subscription-payment__invalid"],[1,"absolute","top-2.5","right-2.5","h-7","block",3,"src"],[1,"flex","flex-row","gap-3"],["for","expiration-date",1,"account-subscription-payment__input-label"],["id","expiration-date","formControlName","expirationDate",1,"input","account-subscription-payment__input",3,"appAccountSubscriptionHostedField"],["for","cvv",1,"account-subscription-payment__input-label"],["id","cvv","formControlName","cvv",1,"input","account-subscription-payment__input",3,"appAccountSubscriptionHostedField"],[1,"mt-3","flex","flex-row","gap-2","items-center","text-sm"],["size","small","render","inline"],["id","paypal-container",1,"z-0"],[1,"flex","flex-col","gap-3","mt-10"],["for","street-address",1,"account-subscription-payment__input-label"],["id","street-address","type","text","formControlName","streetAddress",1,"input","account-subscription-payment__input"],["for","extended-address",1,"account-subscription-payment__input-label"],["id","extended-address","type","text","formControlName","extendedAddress",1,"input","account-subscription-payment__input"],[1,"flex","gap-3",3,"ngClass"],["for","locality",1,"account-subscription-payment__input-label"],["id","locality","type","text","formControlName","locality",1,"input","account-subscription-payment__input"],["for","postal-code",1,"account-subscription-payment__input-label"],["id","postal-code","type","text","formControlName","postalCode",1,"input","account-subscription-payment__input"],["for","country-code-alpha-2",1,"account-subscription-payment__input-label"],["id","country-code-alpha-2","formControlName","country","formControlName","countryCodeAlpha2",1,"input","account-subscription-payment__input"],["value",""],[3,"value"],["type","error","icon","info-circle","alignIcon","center",1,"block","mt-4"],[1,"flex","justify-end","mt-10"],[1,"flex","flex-col","gap-3","text-sm"],[1,"pt-8"],["type","button","app-button","","buttonTheme","light","buttonType","default",1,"mr-4",3,"click"],["type","submit","app-button","","buttonTheme","light","buttonType","primary",3,"disabled"],["size","small","render","inline",1,"ml-2"],[1,"h-7","block",3,"src"],["for","region",1,"account-subscription-payment__input-label"],["id","region","formControlName","region",1,"input","account-subscription-payment__input"],["id","region","type","text","formControlName","region",1,"input","account-subscription-payment__input"],["paymentType","paypal",3,"paypalEmail"],["app-button","","buttonType","text","buttonShape","text",1,"text-xs","underline","self-end",3,"click","uppercase"],["appEventFence",""],[1,"flex","flex-row","justify-between","font-semibold"]],template:function(o,s){1&o&&(e.j41(0,"div",0),e.DNE(1,xo,79,29,"form",1)(2,So,1,0,"app-spinner",2),e.k0s()),2&o&&(e.R7$(),e.vxM(s.braintreeLoaded()?1:2))},dependencies:[c.YU,d.qT,d.xH,d.y7,d.me,d.wz,d.BC,d.cb,d.j4,d.JD,w.Q,it.L,Te.tI,me.X,Wt,Xi,Li,c.oe],styles:[".braintree-hosted-fields-focused[_ngcontent-%COMP%]{outline:#2d72dc solid 2px!important}.braintree-hosted-fields-focused.ng-invalid[_ngcontent-%COMP%]{outline-color:#ed4758!important;outline-width:1px!important}.account-subscription-payment__input-container[_ngcontent-%COMP%]{position:relative;flex-grow:1;outline-width:0px}.account-subscription-payment__input-label[_ngcontent-%COMP%]{font-size:11px;position:absolute;display:block;height:1rem;padding-left:.75rem;padding-right:.75rem;padding-top:.25rem;--tw-text-opacity: 1;color:rgb(129 150 177 / var(--tw-text-opacity, 1))}.account-subscription-payment__input[_ngcontent-%COMP%]{height:3rem;border-width:1px;border-style:solid;--tw-border-opacity: 1;border-color:rgb(150 168 192 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding-left:.75rem;padding-right:.75rem;padding-top:1.25rem;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(40 56 83 / var(--tw-text-opacity, 1))}.account-subscription-payment__invalid[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(237 71 88 / var(--tw-text-opacity, 1))}"],changeDetection:0})}return n})();function Uo(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12),e.EFF(3),e.k0s(),e.j41(4,"div",13)(5,"div",12),e.EFF(6),e.nI1(7,"currency"),e.k0s(),e.j41(8,"div",14),e.EFF(9,"(sales tax may apply)"),e.k0s()()(),e.j41(10,"div",15)(11,"app-account-subscription-payment",16),e.bIt("paymentCancel",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleCancelClick())}),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(3),e.SpI("Upgrade to ",t.selectedPlan().plan_display_name,""),e.R7$(3),e.SpI(" ",e.ii3(7,3,t.selectedPlan().price,"USD","symbol","1.2-2")," / year "),e.R7$(5),e.Y8G("planId",t.selectedPlan().plan_id)}}class ze{constructor(i,t,o,s,a,r){this.router=i,this.activatedRoute=t,this.store=o,this.actions=s,this.snackBar=a,this.dialogService=r,this.selectedPlan=(0,V.ot)(this.store.select(L.z.getSelectedPlan)),this.ngUnsubscribe=new T.B}ngOnInit(){this.initForm(),this.initSubscriptionListeners(),this.store.dispatch(new $.eI)}ngAfterViewInit(){this.initNavigation()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.plans$.pipe((0,D.p)(i=>i.length>0),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.store.dispatch(new $.dJ(i[0]))})}initSubscriptionListeners(){this.actions.pipe((0,p.xi)($.XF),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.handleCheckoutSuccess(i)}),this.actions.pipe((0,p.rM)(f.sz),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.router.navigate(["/login/verify"])})}initNavigation(){this.activatedRoute.queryParams.pipe((0,Ai.c)(0),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.handleNavigation(i)})}handleNavigation(i){const{section:t,mode:o}=i;"subscription"===t&&"edit"===o&&(this.panel.mode="edit")}handleLearnMoreClick(){this.dialogService.openUpgradeDialog()}handleCancelClick(){this.panel.mode="view"}handleUpgradeClick(){x.c.native?this.dialogService.openUpgradeDialog():this.panel.mode="edit"}handleCheckoutSuccess(i){this.snackBar.open("You've Successfully upgraded to a premium account");const{discountcode:t}=i.request;t&&this.store.dispatch(new f.r({type:"promocode",id:t})),window.location.href="/account/profile"}static#e=this.\u0275fac=function(t){return new(t||ze)(e.rXU(U.Ix),e.rXU(U.nX),e.rXU(p.il),e.rXU(p.En),e.rXU(te.UG),e.rXU(ee.o))};static#t=this.\u0275cmp=e.VBU({type:ze,selectors:[["app-account-free-user-subscription"]],viewQuery:function(t,o){if(1&t&&e.GBs(z,7),2&t){let s;e.mGM(s=e.lsd())&&(o.panel=s.first)}},decls:21,vars:1,consts:[["panel",""],["label","Subscription",1,"free-user-subscription"],["panel-view-actions",""],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click"],["panel-view","",1,"text-sm"],["noticeType","team_account_closed"],[1,"mb-4"],[1,"font-bold"],["appEventFence","",1,"text-link","underline",3,"click"],["panel-edit",""],[1,"free-user-subscription__edit"],[1,"free-user-subscription__edit-head"],[1,"font-semibold"],[1,"flex","flex-col","items-end"],[1,"free-user-subscription__sales-tax"],[1,"free-user-subscription__edit-body"],["mode","buy",3,"paymentCancel","planId"]],template:function(t,o){if(1&t){const s=e.RV6();e.j41(0,"app-account-panel",1,0)(2,"span",2)(3,"button",3),e.bIt("click",function(){return e.eBV(s),e.Njj(o.handleUpgradeClick())}),e.EFF(4," Upgrade "),e.k0s()(),e.j41(5,"div",4),e.nrm(6,"app-user-notices",5),e.j41(7,"div",6),e.EFF(8,"You have a free "),e.j41(9,"em",7),e.EFF(10,"Personal"),e.k0s(),e.EFF(11," account."),e.k0s(),e.j41(12,"div"),e.EFF(13," As a free user you currently have access to our basic features. Upgrade to a "),e.j41(14,"em",7),e.EFF(15,"Personal Plus"),e.k0s(),e.EFF(16," plan to unlock full access. "),e.j41(17,"a",8),e.bIt("click",function(){return e.eBV(s),e.Njj(o.handleLearnMoreClick())}),e.EFF(18,"Learn more"),e.k0s()()(),e.j41(19,"div",9),e.DNE(20,Uo,12,8,"div",10),e.k0s()()}if(2&t){const s=e.sdS(1);e.R7$(20),e.vxM("edit"===s.mode&&o.selectedPlan()?20:-1)}},dependencies:[w.Q,it.L,Rt,z,Zt,c.oe],styles:[".free-user-subscription__edit[_ngcontent-%COMP%]{border:1px solid #d7e0ea;border-radius:4px}.free-user-subscription__edit-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #d7e0ea}.free-user-subscription__sales-tax[_ngcontent-%COMP%]{font-size:12px;color:#8196b1}.free-user-subscription__edit-body[_ngcontent-%COMP%]{padding:40px 20px 20px;border-bottom:1px solid #d7e0ea}"],changeDetection:0})}!function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);s>3&&a&&Object.defineProperty(i,t,a)}([(0,p.l6)(L.z.getPlans),function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",i)}(0,_.c)],ze.prototype,"plans$",void 0);var en=l(73127);function Eo(n,i){1&n&&e.eu8(0)}function Po(n,i){if(1&n&&(e.j41(0,"div",7),e.EFF(1," This subscription has been purchased through iTunes. "),e.DNE(2,Eo,1,0,"ng-container",8),e.k0s()),2&n){e.XpG(2);const t=e.sdS(7);e.R7$(2),e.Y8G("ngTemplateOutlet",t)}}function Do(n,i){1&n&&e.eu8(0)}function Ao(n,i){if(1&n&&(e.j41(0,"div",7),e.EFF(1," This subscription has been purchased through Google Play. "),e.DNE(2,Do,1,0,"ng-container",8),e.k0s()),2&n){e.XpG(2);const t=e.sdS(7);e.R7$(2),e.Y8G("ngTemplateOutlet",t)}}function Mo(n,i){if(1&n&&(e.j41(0,"div",6),e.DNE(1,Po,3,1,"div",5)(2,Ao,3,1,"div",5),e.k0s()),2&n){const t=e.XpG(2);e.Y8G("ngSwitch",t.subscription.subscription_provider),e.R7$(),e.Y8G("ngSwitchCase","apple"),e.R7$(),e.Y8G("ngSwitchCase","google")}}function Go(n,i){1&n&&(e.j41(0,"div",7),e.EFF(1," Premium access will remain active until your renewal date passes. "),e.k0s())}function wo(n,i){1&n&&(e.j41(0,"div",7),e.EFF(1," Please visit your iTunes account to manage or cancel your subscription. "),e.k0s())}function $o(n,i){1&n&&(e.j41(0,"div",7),e.EFF(1," Please visit your Google Play account to manage your subscription. "),e.k0s())}function Bo(n,i){if(1&n&&(e.j41(0,"div",7),e.EFF(1," Your subscription has been canceled. "),e.qex(2,3),e.DNE(3,Go,2,0,"div",5)(4,wo,2,0,"div",5)(5,$o,2,0,"div",5),e.bVm(),e.k0s()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngSwitch",t.subscription.subscription_provider),e.R7$(),e.Y8G("ngSwitchCase","braintree"),e.R7$(),e.Y8G("ngSwitchCase","apple"),e.R7$(),e.Y8G("ngSwitchCase","google")}}function Oo(n,i){1&n&&e.eu8(0)}function No(n,i){if(1&n&&(e.j41(0,"div",7),e.EFF(1," Your payment is past due. "),e.DNE(2,Oo,1,0,"ng-container",8),e.k0s()),2&n){e.XpG();const t=e.sdS(7);e.R7$(2),e.Y8G("ngTemplateOutlet",t)}}function Yo(n,i){1&n&&e.eu8(0)}function Vo(n,i){if(1&n&&(e.j41(0,"div",7),e.EFF(1," Your subscription has been canceled or expired. "),e.DNE(2,Yo,1,0,"ng-container",8),e.k0s()),2&n){e.XpG();const t=e.sdS(7);e.R7$(2),e.Y8G("ngTemplateOutlet",t)}}function zo(n,i){1&n&&(e.j41(0,"div",7),e.EFF(1," Please update your payment info for premium access. "),e.k0s())}function Xo(n,i){1&n&&(e.j41(0,"div",7),e.EFF(1," Please visit your iTunes account to manage or cancel your subscription. "),e.k0s())}function Lo(n,i){1&n&&(e.j41(0,"div",7),e.EFF(1," Please visit your Google Play account to manage your subscription. "),e.k0s())}function Qo(n,i){if(1&n&&(e.qex(0,3),e.DNE(1,zo,2,0,"div",5)(2,Xo,2,0,"div",5)(3,Lo,2,0,"div",5),e.bVm()),2&n){const t=e.XpG(2);e.Y8G("ngSwitch",t.subscription.subscription_provider),e.R7$(),e.Y8G("ngSwitchCase","braintree"),e.R7$(),e.Y8G("ngSwitchCase","apple"),e.R7$(),e.Y8G("ngSwitchCase","google")}}function qo(n,i){if(1&n&&(e.j41(0,"div",2),e.qex(1,3),e.DNE(2,Mo,3,3,"div",4)(3,Bo,6,4,"div",5)(4,No,3,1,"div",5)(5,Vo,3,1,"div",5),e.bVm(),e.DNE(6,Qo,4,4,"ng-template",null,0,e.C5r),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngSwitch",t.subscription.subscription_status),e.R7$(),e.Y8G("ngSwitchCase","active"),e.R7$(),e.Y8G("ngSwitchCase","canceled"),e.R7$(),e.Y8G("ngSwitchCase","past due"),e.R7$(),e.Y8G("ngSwitchCase","expired")}}let Jo=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-status-message"]],inputs:{subscription:"subscription"},decls:1,vars:1,consts:[["providerTpl",""],["class","text-sm",4,"ngIf"],[1,"text-sm"],[3,"ngSwitch"],["class","mb-1",3,"ngSwitch",4,"ngSwitchCase"],["class","mb-1",4,"ngSwitchCase"],[1,"mb-1",3,"ngSwitch"],[1,"mb-1"],[4,"ngTemplateOutlet"]],template:function(o,s){1&o&&e.DNE(0,qo,8,5,"div",1),2&o&&e.Y8G("ngIf",s.subscription)},dependencies:[c.bT,c.T3,c.ux,c.e1],changeDetection:0})}return n})();function Ho(n,i){if(1&n&&(e.j41(0,"div",8)(1,"div",9),e.EFF(2),e.k0s(),e.j41(3,"div",10),e.EFF(4),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.SpI(" $",t.subscription.billing_details.next_billing_period_amount," "),e.R7$(2),e.SpI(" ",t.calcPaymentFrequency(t.subscription.plan_id)," ")}}function Wo(n,i){if(1&n&&(e.qex(0),e.j41(1,"div",11),e.EFF(2,"Renewal Date"),e.k0s(),e.j41(3,"div",12),e.qex(4),e.EFF(5),e.nI1(6,"date"),e.bVm(),e.k0s(),e.bVm()),2&n){const t=i.$implicit,o=e.XpG();e.R7$(5),e.Lme(" ",e.i5U(6,2,t,"longDate")," (in ",o.calcDaysRemaining(t)," days) ")}}let Ko=(()=>{class n{constructor(){this.calcDaysRemaining=en.lu,this.calcPaymentFrequency=en.Qh}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-subscription-summary"]],inputs:{subscription:"subscription"},decls:10,vars:4,consts:[["card-header","",1,"summary","flex","flex-row","justify-between"],[1,"summary__title","flex-auto"],[1,"text-base","font-semibold","uppercase"],["class","flex flex-col items-center",4,"ngIf"],["card-content",""],[4,"ngIf"],[1,"my-1"],[3,"subscription"],[1,"flex","flex-col","items-center"],[1,"text-lg","font-semibold"],[1,"summary__pricing","text-xs"],[1,"text-xs","text-gray-400"],[1,"text-sm"]],template:function(o,s){1&o&&(e.j41(0,"app-account-summary-card")(1,"div",0)(2,"div",1)(3,"div",2),e.EFF(4),e.k0s()(),e.DNE(5,Ho,5,2,"div",3),e.k0s(),e.j41(6,"div",4),e.DNE(7,Wo,7,5,"ng-container",5),e.j41(8,"div",6),e.nrm(9,"app-account-status-message",7),e.k0s()()()),2&o&&(e.R7$(4),e.SpI(" ",null==s.subscription?null:s.subscription.subscription_type_display," "),e.R7$(),e.Y8G("ngIf",null==s.subscription?null:s.subscription.billing_details),e.R7$(2),e.Y8G("ngIf",null==s.subscription||null==s.subscription.billing_details?null:s.subscription.billing_details.next_billing_date_time),e.R7$(2),e.Y8G("subscription",s.subscription))},dependencies:[c.bT,Xt,Jo,c.vh],styles:[".summary__pricing[_ngcontent-%COMP%]{color:#374a68}"],changeDetection:0})}return n})();var Ft=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},xt=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};class je{get isBraintreeSubscription$(){return this.subscriptionProvider$.pipe((0,k.T)(i=>"braintree"===i))}get subscriptionProvider$(){return this.subscription$.pipe((0,k.T)(i=>i?i.subscription_provider:""))}constructor(i){this.store=i,this.ngUnsubscribe=new T.B}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static#e=this.\u0275fac=function(t){return new(t||je)(e.rXU(p.il))};static#t=this.\u0275cmp=e.VBU({type:je,selectors:[["app-account-premium-user-subscription"]],viewQuery:function(t,o){if(1&t&&e.GBs(z,7),2&t){let s;e.mGM(s=e.lsd())&&(o.panel=s.first)}},decls:5,vars:3,consts:[["panel",""],["label","Subscription"],[1,"account","mt-4"],[3,"subscription"]],template:function(t,o){1&t&&(e.j41(0,"app-account-panel",1,0)(2,"div",2),e.nrm(3,"app-account-subscription-summary",3),e.nI1(4,"async"),e.k0s()()),2&t&&(e.R7$(3),e.Y8G("subscription",e.bMT(4,1,o.subscription$)))},dependencies:[z,Ko,c.Jj],changeDetection:0})}Ft([(0,p.l6)(g.k.getUserProfile),xt("design:type",_.c)],je.prototype,"userProfile$",void 0),Ft([(0,p.l6)(L.z.getSubscription),xt("design:type",_.c)],je.prototype,"subscription$",void 0),Ft([(0,p.l6)(L.z.isFreeTrial),xt("design:type",_.c)],je.prototype,"isFreeTrial$",void 0);var pe=l(15877),tn=l(28577),S=l(34006),ue=l(70737),M=l(82608),he=l(99504),St=l(80910),ot=l(45438);function Zo(n,i){if(1&n&&(e.j41(0,"div",15)(1,"p"),e.EFF(2),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(2),e.JRh(t.message)}}function es(n,i){1&n&&e.nrm(0,"app-team-user",16),2&n&&e.Y8G("user",i.$implicit)("showEmail",!0)("showNameUnknown",!0)}function ts(n,i){if(1&n&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.id),e.R7$(),e.Lme(" ",t.name,"(",t.email,") ")}}function ns(n,i){if(1&n&&(e.j41(0,"div",7),e.DNE(1,Zo,3,1,"div",8),e.j41(2,"app-form-field",9),e.DNE(3,es,1,3,"app-team-user",10),e.k0s(),e.j41(4,"app-form-field",11)(5,"select",12)(6,"option",13),e.EFF(7,"-- Select User --"),e.k0s(),e.DNE(8,ts,2,3,"option",14),e.k0s()()()),2&n){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(),e.Y8G("ngIf",t.message),e.R7$(2),e.Y8G("ngForOf",t.sourceUsers),e.R7$(),e.Y8G("label","To User ("+t.availableRoles.join(" OR ")+")"),e.R7$(4),e.Y8G("ngForOf",t.availableUsers)}}const nn=[O.x.Creator,O.x.Admin];let is=(()=>{class n{constructor(t,o,s,a,r,u,y,C){this.data=t,this.dialogRef=o,this.formBuilder=s,this.store=a,this.actions=r,this.changeRef=u,this.snackBar=y,this.usersService=C,this.availableRoles=nn,this.availableUsers=[],this.sourceUsers=[],this.transferring=!1,this.ngUnsubscribe=new T.B}ngOnInit(){this.initForm(),this.initOrganization(),this.initMessaging()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({targetUserId:[`${this.data.targetUserId||""}`,d.k0.required]})}initOrganization(){const t=this.store.selectSnapshot(he.e.getUsers);this.sourceUsers=this.data.sourceUsers;const o=new Set(this.sourceUsers.map(s=>s.id));this.availableUsers=t.filter(s=>{const a=nn.includes(s.user_role.role_name),r=o.has(s.user_id);return a&&!r}).sort((s,a)=>(0,b.trim)((s.user_first_name??"").toLocaleUpperCase())>(0,b.trim)((a.user_first_name??"").toLocaleUpperCase())?1:-1).map(s=>this.usersService.createUserDisplayModel(s)),this.message="Transfer the original save location and management permissions of the user(s)' content to a new owner",this.data.action===ue.y.RemoveUser&&(this.message+=" before removing the user(s).")}initMessaging(){this.actions.pipe((0,p.xi)(M.Qy),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.transferring=!0,this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(M.Fk),(0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{this.transferring=!1,this.dialogRef.close(t.users),this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(M.ah),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.transferring=!1,this.snackBar.open("There was an error transferring user content, please try again."),this.changeRef.markForCheck()})}handleTransferClick(){const{organization:t,sourceUsers:o}=this.data,s=parseInt(this.form.value.targetUserId,10),a=o.map(r=>({sourceUserId:r.id,targetUserId:s}));this.store.dispatch(new M.Qy(t.id,a))}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(S.Vh),e.rXU(S.CP),e.rXU(d.ze),e.rXU(p.il),e.rXU(p.En),e.rXU(e.gRc),e.rXU(te.UG),e.rXU(St.g))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-team-transfer-dialog"]],decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["data-test","teamTransferDialog",1,"dialog"],[3,"formGroup",4,"ngIf"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","mat-dialog-close",""],["app-button","","buttonType","primary",3,"click","disabled"],[3,"formGroup"],["class","mb-3 text-sm",4,"ngIf"],["label","From User"],["class","flex grow my-1 py-2",3,"user","showEmail","showNameUnknown",4,"ngFor","ngForOf"],[3,"label"],["formControlName","targetUserId",1,"input"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"mb-3","text-sm"],[1,"flex","grow","my-1","py-2",3,"user","showEmail","showNameUnknown"],[3,"value"]],template:function(o,s){1&o&&(e.j41(0,"h1",0),e.EFF(1,"Transfer Content"),e.k0s(),e.j41(2,"div",1)(3,"div",2),e.DNE(4,ns,9,5,"div",3),e.k0s()(),e.j41(5,"div",4)(6,"button",5),e.EFF(7,"Cancel"),e.k0s(),e.j41(8,"button",6),e.bIt("click",function(){return s.handleTransferClick()}),e.EFF(9," Transfer Content "),e.k0s()()),2&o&&(e.R7$(4),e.Y8G("ngIf",s.sourceUsers),e.R7$(4),e.Y8G("disabled",s.form.invalid||s.transferring))},dependencies:[c.Sq,c.bT,S.tx,S.BI,S.E7,S.Yi,w.Q,Ge.K,ot.o,d.xH,d.y7,d.wz,d.BC,d.cb,d.j4,d.JD],styles:[".dialog__user-role[_ngcontent-%COMP%]{text-transform:uppercase;color:#96a8c0}"],changeDetection:0})}return n})();var st=l(84370),Xe=l(82765),on=l(93547);function os(n,i){if(1&n&&(e.j41(0,"app-alert",14)(1,"strong",15),e.EFF(2),e.k0s(),e.EFF(3," is excluded as they are the current user "),e.k0s()),2&n){const t=e.XpG();e.R7$(2),e.JRh(t.data.excluded)}}function ss(n,i){1&n&&e.nrm(0,"app-team-user",16),2&n&&e.Y8G("user",i.$implicit)("showEmail",!0)("showNameUnknown",!0)}function as(n,i){if(1&n&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.label," ")}}function rs(n,i){if(1&n&&(e.j41(0,"app-message-toggle",18),e.EFF(1," You are trying to "),e.j41(2,"a",19),e.EFF(3),e.k0s(),e.EFF(4,". If you remove them, the apps will "),e.j41(5,"span",4),e.EFF(6,"stop working."),e.k0s(),e.j41(7,"div",20)(8,"mat-checkbox",21)(9,"span",22),e.EFF(10),e.k0s()()()()),2&n){const t=e.XpG();e.R7$(3),e.SpI(" remove ",1===t.activeDevelopersLength?"a "+t.developerNoun:t.developerNoun," with active developer apps"),e.R7$(7),e.SpI("I confirm that I want to remove the ",t.developerNoun,".")}}var we=function(n){return n.Transfer="transfer",n.Remove="remove",n}(we||{});let cs=(()=>{class n{constructor(t,o,s){this.data=t,this.dialogRef=o,this.formBuilder=s,this.contentOptions=[{value:we.Transfer,label:"Transfer ownership to a different team member"},{value:we.Remove,label:"Make private and remove from team"}],this.hasActiveDevelopers=!1}ngOnInit(){const t=this.data.users.length;this.userNoun=1===t?"user":"users",this.title=`Remove ${1===t?"":`${t} `}${(0,b.capitalize)(this.userNoun)}`;const o=this.data.users.filter(s=>s.activeDeveloper);this.activeDevelopersLength=o.length,this.developerNoun=1===this.activeDevelopersLength?"user":"users",this.hasActiveDevelopers=this.activeDevelopersLength>0,this.form=this.formBuilder.group({contentOptions:[we.Transfer,d.k0.required],confirm:[!this.hasActiveDevelopers,d.k0.requiredTrue]})}handleRemoveClick(){this.dialogRef.close(this.form.value.contentOptions)}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(S.Vh),e.rXU(S.CP),e.rXU(d.ze))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-team-remove-users-dialog"]],decls:20,vars:9,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["data-test","teamRemoveUserDialog",1,"dialog",3,"formGroup"],[1,"text-sm","pb-3"],[1,"font-bold"],["type","info","theme","light",4,"ngIf"],["class","flex grow my-1 py-2",3,"user","showEmail","showNameUnknown",4,"ngFor","ngForOf"],["label","What would you like to do with their 3D models?"],["formControlName","contentOptions",1,"input"],[3,"value",4,"ngFor","ngForOf"],["type","danger","theme","dark","icon","info-circle",4,"ngIf"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","mat-dialog-close",""],["app-button","","buttonType","primary",3,"click","disabled"],["type","info","theme","light"],[1,"font-semibold"],[1,"flex","grow","my-1","py-2",3,"user","showEmail","showNameUnknown"],[3,"value"],["type","danger","theme","dark","icon","info-circle"],["href","https://support.biodigital.com/hc/en-us/articles/22012525162391-Remove-a-developer-from-my-team#h_01HRSNVCVE63TZ85HB9Y5436R0","target","_blank",1,"font-bold","text-link","underline"],[1,"theme-light","mt-3"],["formControlName","confirm"],[2,"white-space","normal"]],template:function(o,s){1&o&&(e.j41(0,"h1",0),e.EFF(1),e.k0s(),e.j41(2,"div",1)(3,"div",2)(4,"div",3),e.EFF(5),e.j41(6,"span",4),e.EFF(7),e.k0s()(),e.DNE(8,os,4,1,"app-alert",5),e.j41(9,"app-form-field"),e.DNE(10,ss,1,3,"app-team-user",6),e.k0s(),e.j41(11,"app-form-field",7)(12,"select",8),e.DNE(13,as,2,2,"option",9),e.k0s()(),e.DNE(14,rs,11,2,"app-message-toggle",10),e.k0s()(),e.j41(15,"div",11)(16,"button",12),e.EFF(17,"Cancel"),e.k0s(),e.j41(18,"button",13),e.bIt("click",function(){return s.handleRemoveClick()}),e.EFF(19," Remove "),e.k0s()()),2&o&&(e.R7$(),e.JRh(s.title),e.R7$(2),e.Y8G("formGroup",s.form),e.R7$(2),e.SpI(" Are you sure you want to remove the following ",s.userNoun,"? They will no longer have access to "),e.R7$(2),e.JRh(s.data.organization.name),e.R7$(),e.Y8G("ngIf",""!==s.data.excluded),e.R7$(2),e.Y8G("ngForOf",s.data.users),e.R7$(3),e.Y8G("ngForOf",s.contentOptions),e.R7$(),e.Y8G("ngIf",s.hasActiveDevelopers),e.R7$(4),e.Y8G("disabled",0===s.data.users.length||s.form.invalid))},dependencies:[c.Sq,c.bT,Xe.So,S.tx,S.BI,S.E7,S.Yi,on.C,w.Q,Ge.K,me.X,ot.o,d.xH,d.y7,d.wz,d.BC,d.cb,d.j4,d.JD],styles:[".dialog__user-role[_ngcontent-%COMP%]{text-transform:uppercase;color:#96a8c0}"],changeDetection:0})}return n})();function ls(n,i){if(1&n&&(e.j41(0,"app-alert",10)(1,"strong",11),e.EFF(2),e.k0s(),e.EFF(3," is excluded as they are the current user "),e.k0s()),2&n){const t=e.XpG();e.R7$(2),e.JRh(t.data.excluded)}}function ps(n,i){1&n&&e.nrm(0,"app-team-user",12),2&n&&e.Y8G("user",i.$implicit)("showEmail",!0)("showNameUnknown",!0)}let us=(()=>{class n{constructor(t,o){this.data=t,this.dialogRef=o}ngOnInit(){this.newRoleName=this.data.role.role_display_name}handleConfirmClick(){this.dialogRef.close(!0)}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(S.Vh),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-team-confirm-role-dialog"]],decls:17,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["data-test","teamConfirmRoleDialog",1,"dialog"],[1,"my-3","text-sm"],[1,"font-bold"],["type","info","theme","light",4,"ngIf"],["class","flex grow my-1 py-2",3,"user","showEmail","showNameUnknown",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","mat-dialog-close",""],["app-button","","buttonType","primary",3,"click","disabled"],["type","info","theme","light"],[1,"font-semibold"],[1,"flex","grow","my-1","py-2",3,"user","showEmail","showNameUnknown"]],template:function(o,s){1&o&&(e.j41(0,"h1",0),e.EFF(1,"Confirm Role Change"),e.k0s(),e.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"p"),e.EFF(6," Are you sure you want to change the role of the following user(s) to "),e.j41(7,"span",4),e.EFF(8),e.k0s(),e.EFF(9,"? "),e.k0s()(),e.DNE(10,ls,4,1,"app-alert",5)(11,ps,1,3,"app-team-user",6),e.k0s()(),e.j41(12,"div",7)(13,"button",8),e.EFF(14,"Cancel"),e.k0s(),e.j41(15,"button",9),e.bIt("click",function(){return s.handleConfirmClick()}),e.EFF(16," Confirm Role Change "),e.k0s()()),2&o&&(e.R7$(8),e.JRh(s.newRoleName),e.R7$(2),e.Y8G("ngIf",""!==s.data.excluded),e.R7$(),e.Y8G("ngForOf",s.data.users),e.R7$(4),e.Y8G("disabled",0===s.data.users.length))},dependencies:[c.Sq,c.bT,S.tx,S.BI,S.E7,S.Yi,on.C,w.Q,ot.o],changeDetection:0})}return n})();var B=l(18152),jt=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},It=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};function ds(n,i){1&n&&(e.j41(0,"li"),e.EFF(1," You will "),e.j41(2,"span",4),e.EFF(3,"lose access"),e.k0s(),e.EFF(4," to content you've added to the team. This content will be transferred to an admin. "),e.k0s())}function ms(n,i){1&n&&(e.j41(0,"li"),e.EFF(1," Your developer apps will "),e.j41(2,"span",4),e.EFF(3,"stop working."),e.k0s()())}function hs(n,i){1&n&&e.nrm(0,"app-spinner",13)}class Ie{constructor(i,t,o,s,a,r){this.data=i,this.formBuilder=t,this.store=o,this.snackBar=s,this.actions=a,this.dialogRef=r,this.ngUnsubscribe=new T.B}ngOnInit(){this.name=this.data.organization.name,this.mode=this.data.mode,this.initActionHandlers(),this.initForm()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({confirm:[!1,d.k0.requiredTrue]})}initActionHandlers(){this.actions.pipe((0,p.xi)(B.GC,M.AA),(0,A.s)(1),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new f.hs),this.snackBar.open(("leave"===this.mode?"You have left the team.":"Your team account was closed.")+" You have been downgraded to a free Personal account."),this.dialogRef.close(!0)}),this.actions.pipe((0,p.xi)(B.XL,M.Rr),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open(`There was an error ${"leave"===this.mode?"leaving":"closing"} the team. Please try again.`)})}handleCancelClick(){this.dialogRef.close()}handleLeaveClick(){this.store.dispatch("close"===this.mode?new B.$7(this.data.organization):new M.f0(this.data.organization))}static#e=this.\u0275fac=function(t){return new(t||Ie)(e.rXU(S.Vh),e.rXU(d.ze),e.rXU(p.il),e.rXU(te.UG),e.rXU(p.En),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:Ie,selectors:[["app-team-leave-dialog"]],decls:36,vars:24,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"dialog",3,"formGroup"],[1,"dialog__list"],[1,"font-bold"],[4,"ngIf"],[1,"mt-4"],["formControlName","confirm"],[1,"dialog__confirm"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","buttonType","default",3,"click"],["app-button","","buttonType","primary",3,"click","disabled"],["size","small","class","mr-1","render","inline",4,"ngIf"],["size","small","render","inline",1,"mr-1"]],template:function(t,o){1&t&&(e.j41(0,"h1",0),e.EFF(1),e.nI1(2,"titlecase"),e.k0s(),e.j41(3,"div",1)(4,"div",2),e.EFF(5),e.j41(6,"ul",3)(7,"li"),e.EFF(8),e.j41(9,"span",4),e.EFF(10,"downgraded"),e.k0s(),e.EFF(11," to a free Personal account. "),e.k0s(),e.j41(12,"li"),e.EFF(13," You will "),e.j41(14,"span",4),e.EFF(15,"lose access"),e.k0s(),e.EFF(16," to collections and content in your team. "),e.k0s(),e.DNE(17,ds,5,0,"li",5)(18,ms,4,0,"li",5),e.nI1(19,"async"),e.j41(20,"li"),e.EFF(21,"Your private content will remain with your account."),e.k0s()(),e.j41(22,"div",6)(23,"mat-checkbox",7)(24,"span",8),e.EFF(25),e.k0s()()()()(),e.j41(26,"div",9)(27,"button",10),e.bIt("click",function(){return o.handleCancelClick()}),e.EFF(28," Cancel "),e.k0s(),e.j41(29,"button",11),e.nI1(30,"async"),e.nI1(31,"async"),e.bIt("click",function(){return o.handleLeaveClick()}),e.DNE(32,hs,1,0,"app-spinner",12),e.nI1(33,"async"),e.nI1(34,"async"),e.EFF(35),e.k0s()()),2&t&&(e.R7$(),e.Lme("",e.bMT(2,12,o.mode)," ",o.name," Team?"),e.R7$(3),e.Y8G("formGroup",o.form),e.R7$(),e.Lme(" Are you sure you want to ",o.mode," the ",o.name," Team? "),e.R7$(3),e.SpI(" Your account ","close"===o.mode?"and your team members' accounts":""," will be "),e.R7$(9),e.Y8G("ngIf","leave"===o.mode),e.R7$(),e.Y8G("ngIf","close"===o.mode&&e.bMT(19,14,o.hasActiveDeveloperAccount$)),e.R7$(7),e.SpI("I confirm that I want to ",o.mode," my team."),e.R7$(4),e.Y8G("disabled",o.form.invalid||e.bMT(30,16,o.leaving$)||e.bMT(31,18,o.deleting$)),e.R7$(3),e.Y8G("ngIf",e.bMT(33,20,o.leaving$)||e.bMT(34,22,o.deleting$)),e.R7$(3),e.SpI(" ",o.mode," Team "))},dependencies:[c.bT,Xe.So,S.BI,S.E7,S.Yi,w.Q,Te.tI,d.BC,d.cb,d.j4,d.JD,c.Jj,c.PV],styles:[".dialog[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.dialog__list[_ngcontent-%COMP%]{margin:12px 24px;list-style-type:disc;line-height:20px}.dialog__confirm[_ngcontent-%COMP%]{white-space:normal}"],changeDetection:0})}jt([(0,p.l6)(he.e.getLeaving),It("design:type",_.c)],Ie.prototype,"leaving$",void 0),jt([(0,p.l6)(F.q.getDeleting),It("design:type",_.c)],Ie.prototype,"deleting$",void 0),jt([(0,p.l6)(g.k.hasActiveDeveloperAccount),It("design:type",_.c)],Ie.prototype,"hasActiveDeveloperAccount$",void 0);let sn=(()=>{class n{constructor(t,o){this.dialog=t,this.usersService=o}removeUser(t,o,s){return this.confirmRemoveUser(t,o,s).pipe((0,Y.Z)(a=>{if(a===we.Transfer)return this.transferUserContent(t,o,ue.y.RemoveUser);if(a===we.Remove){const r=o.map(u=>({sourceUserId:u.id}));return(0,pe.of)(r)}return(0,pe.of)(!1)}),(0,Y.Z)(a=>a?this.usersService.removeUsers(t.id,a).pipe((0,tn.W)(()=>(0,pe.of)(!1)),(0,k.T)(r=>({success:r,targetUserId:a[0].targetUserId}))):(0,pe.of)({success:!1})))}setUserRole(t,o,s,a){const r=a.role_id,u=a.role_name,y=o.map(N=>({userId:N.id,roleId:r}));let C=[];return u===O.x.Viewer&&(C=o.filter(N=>N.role.role_name!==O.x.Viewer)),this.confirmRoleChange(o,s,a).pipe((0,Y.Z)(N=>N&&C.length>0?this.transferUserContent(t,C,ue.y.AssignRole):(0,pe.of)(N)),(0,Y.Z)(N=>N?this.usersService.updateUserRoles(t.id,y):(0,pe.of)(!1)),(0,tn.W)(()=>(0,pe.of)(!1)),(0,k.T)(N=>({success:N,targetRoleId:a.role_id})))}confirmRoleChange(t,o,s){return this.dialog.open(us,{id:st.t.ConfirmRoleDialog,disableClose:!1,maxWidth:"420px",data:{users:t,excluded:o,role:s}}).afterClosed()}confirmRemoveUser(t,o,s){return this.dialog.open(cs,{id:st.t.RemoveUserDialog,disableClose:!1,maxWidth:"420px",data:{organization:t,users:o,excluded:s}}).afterClosed()}transferUserContent(t,o,s){return this.dialog.open(is,{id:st.t.TransferUserContentDialog,disableClose:!0,maxWidth:"420px",data:{organization:t,sourceUsers:o,action:s}}).afterClosed()}confirmLeaveTeam(t,o){return this.dialog.open(Ie,{width:"480px",data:{mode:o,organization:t}}).afterClosed()}static#e=this.\u0275fac=function(o){return new(o||n)(e.KVO(S.bZ),e.KVO(St.g))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _s=l(27044),Le=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},Qe=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};function gs(n,i){if(1&n&&(e.j41(0,"div",9)(1,"app-message-toggle",10),e.nI1(2,"async"),e.nI1(3,"async"),e.EFF(4),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"date"),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.Y8G("type",e.bMT(2,6,t.isSubscriptionExpired$)?"warning":"notification")("icon",e.bMT(3,8,t.isSubscriptionExpired$)?"exclamation-triangle":"info-circle")("shown",!0),e.R7$(3),e.E5c(" Your ",e.bMT(5,10,t.isTrial$)?"free trial":"subscription"," ",e.bMT(6,12,t.isSubscriptionExpired$)?"expired":"expires"," on ",e.i5U(8,16,e.bMT(7,14,t.subscriptionEndDate$),"longDate"),". ")}}function fs(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",11)(1,"button",12),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleNeedToLeaveClick())}),e.EFF(2),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("uppercase",!1),e.R7$(),e.SpI(" ",t.canCloseTeam?"Need to close your team or switch to a Personal Plus account?":"Need to leave the team?"," ")}}function bs(n,i){1&n&&(e.j41(0,"div")(1,"div"),e.EFF(2," In order to upgrade to a Personal Plus account you'll first need to close your team. If you "),e.j41(3,"span",5),e.EFF(4,"close your team"),e.k0s(),e.EFF(5,", you'll lose access to everything in your team, including team collections. All members in your team including yourself will be downgraded to a Personal free account. "),e.k0s(),e.j41(6,"div",6),e.EFF(7," Once you close your team, you'll have the option to upgrade to a Personal Plus account. "),e.k0s()())}function vs(n,i){if(1&n){const t=e.RV6();e.j41(0,"div"),e.DNE(1,bs,8,0,"div",13),e.j41(2,"button",14),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleLeaveClick())}),e.EFF(3),e.k0s()()}if(2&n){e.XpG();const t=e.sdS(3),o=e.XpG();e.R7$(),e.Y8G("ngIf",o.canCloseTeam)("ngIfElse",t),e.R7$(2),e.SpI(" ",o.canCloseTeam?"Close Team":"Leave Team"," ")}}function ys(n,i){if(1&n&&(e.j41(0,"div"),e.EFF(1," By "),e.j41(2,"span",5),e.EFF(3),e.nI1(4,"async"),e.k0s(),e.EFF(5,", you'll lose access to everything in this team, including team collections. The content you have shared with the team will be transferred to an administrator. "),e.k0s()),2&n){let t;const o=e.XpG(2);e.R7$(3),e.SpI("leaving the ",null==(t=e.bMT(4,1,o.organization$))?null:t.name," team")}}function Cs(n,i){if(1&n){const t=e.RV6();e.j41(0,"app-message-toggle",15),e.EFF(1," You will need to "),e.j41(2,"button",12),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleContactClick())}),e.EFF(3," contact us "),e.k0s(),e.EFF(4),e.nI1(5,"async"),e.k0s(),e.j41(6,"button",14),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleContactClick())}),e.EFF(7," Contact Us "),e.k0s()}if(2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("uppercase",!1),e.R7$(2),e.SpI(" if you need to leave the team",e.bMT(5,2,t.hasActiveDeveloperAccount$)?" because you have an active developer account associated with this team":"",". ")}}function Ts(n,i){if(1&n&&(e.j41(0,"div",11),e.DNE(1,vs,4,3,"div",13)(2,ys,6,3,"ng-template",null,0,e.C5r)(4,Cs,8,4,"ng-template",null,1,e.C5r),e.k0s()),2&n){const t=e.sdS(5),o=e.XpG();e.R7$(),e.Y8G("ngIf",o.canCloseTeam||o.canLeaveTeam)("ngIfElse",t)}}class _e{constructor(i,t,o,s){this.store=i,this.zendeskService=t,this.organizationActionsService=o,this.changeDetectorRef=s,this.showLeaveTeam=!1,this.canLeaveTeam=!1,this.canCloseTeam=!1,this.needToLeaveClicked=!1,this.ngUnsubscribe=new T.B}ngOnInit(){this.organization$.pipe((0,D.p)(i=>!(0,b.isNil)(i)),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.showLeaveTeam=!this.store.selectSnapshot(g.k.isAdmin),this.canLeaveTeam=i.user_can_leave_group,this.canCloseTeam=i.account_closure_allowed&&this.store.selectSnapshot(g.k.isAdmin),this.changeDetectorRef.markForCheck()})}handleContactClick(){this.zendeskService.showWidget("contact")}handleHelpClick(){this.zendeskService.showWidget()}handleNeedToLeaveClick(){this.needToLeaveClicked=!0}handleLeaveClick(){const i=this.canCloseTeam?"close":"leave";this.organizationActionsService.confirmLeaveTeam(this.store.selectSnapshot(F.q.getOrganization),i).subscribe(()=>{this.needToLeaveClicked=!1,this.changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(t){return new(t||_e)(e.rXU(p.il),e.rXU(_s.c),e.rXU(sn),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:_e,selectors:[["app-account-premium-team-subscription"]],decls:22,vars:13,consts:[["leaveTeamTemplate",""],["contactUsTemplate",""],["label","Subscription"],[1,"text-sm"],["class","mb-4",4,"ngIf"],[1,"font-bold"],[1,"mt-2"],[1,"text-link","underline",3,"click"],["class","mt-4",4,"ngIf"],[1,"mb-4"],[3,"type","icon","shown"],[1,"mt-4"],["app-button","","buttonType","text","buttonTheme","light",1,"underline",3,"click","uppercase"],[4,"ngIf","ngIfElse"],["app-button","","buttonType","outline","buttonTheme","light",1,"mt-4",3,"click"],["type","notification","theme","dark","icon","info-circle","alignIcon","center"]],template:function(t,o){if(1&t&&(e.j41(0,"app-account-panel",2)(1,"div",3),e.DNE(2,gs,9,19,"div",4),e.nI1(3,"async"),e.nI1(4,"async"),e.j41(5,"div"),e.EFF(6," You have a "),e.j41(7,"em",5),e.EFF(8),e.nI1(9,"async"),e.k0s(),e.EFF(10," plan through the "),e.j41(11,"em",5),e.EFF(12),e.nI1(13,"async"),e.k0s(),e.EFF(14," team. "),e.k0s(),e.j41(15,"div",6),e.EFF(16," For more information or questions regarding your subscription, please contact our "),e.j41(17,"a",7),e.bIt("click",function(){return o.handleHelpClick()}),e.EFF(18,"Customer Experience"),e.k0s(),e.EFF(19," team. "),e.k0s(),e.DNE(20,fs,3,2,"div",8)(21,Ts,6,2,"div",8),e.k0s()()),2&t){let s,a;e.R7$(2),e.Y8G("ngIf",e.bMT(3,5,o.isTrial$)||e.bMT(4,7,o.isSubscriptionExpired$)),e.R7$(6),e.JRh(null==(s=e.bMT(9,9,o.organization$))?null:s.subscription.type),e.R7$(4),e.JRh(null==(a=e.bMT(13,11,o.organization$))?null:a.name),e.R7$(8),e.Y8G("ngIf",(o.canCloseTeam||o.showLeaveTeam)&&!o.needToLeaveClicked),e.R7$(),e.Y8G("ngIf",o.needToLeaveClicked)}},dependencies:[c.bT,w.Q,me.X,z,c.Jj,c.vh],changeDetection:0})}function Fs(n,i){1&n&&(e.j41(0,"div")(1,"div",9),e.EFF(2," Are you sure you want to "),e.j41(3,"em",10),e.EFF(4,"cancel"),e.k0s(),e.EFF(5," your subscription? "),e.k0s(),e.j41(6,"ul",11)(7,"li",12),e.EFF(8," After cancelling your BioDigital Human subscription, your premium benefits will continue until the subscription end date. "),e.k0s(),e.j41(9,"li",12),e.EFF(10,"You will not be billed after your subscription end date."),e.k0s()(),e.j41(11,"div",13)(12,"mat-checkbox",14)(13,"span",15),e.EFF(14,"I confirm I want to cancel my subscription."),e.k0s()()()())}function xs(n,i){1&n&&(e.j41(0,"div",16),e.nrm(1,"app-spinner",17),e.j41(2,"div",18),e.EFF(3,"Cancelling your subscription..."),e.k0s()())}Le([(0,p.l6)(F.q.isTrial),Qe("design:type",_.c)],_e.prototype,"isTrial$",void 0),Le([(0,p.l6)(F.q.isSubscriptionExpired),Qe("design:type",_.c)],_e.prototype,"isSubscriptionExpired$",void 0),Le([(0,p.l6)(F.q.getSubscriptionEndDate),Qe("design:type",_.c)],_e.prototype,"subscriptionEndDate$",void 0),Le([(0,p.l6)(F.q.getOrganization),Qe("design:type",_.c)],_e.prototype,"organization$",void 0),Le([(0,p.l6)(g.k.hasActiveDeveloperAccount),Qe("design:type",_.c)],_e.prototype,"hasActiveDeveloperAccount$",void 0);class qe{constructor(i,t,o,s,a){this.store=i,this.actions=t,this.formBuilder=o,this.dialogRef=s,this.snackbar=a,this.ngUnsubscribe=new T.B}ngOnInit(){this.initForm(),this.initListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({confirm:[!1,d.k0.requiredTrue]})}initListeners(){this.actions.pipe((0,p.xi)($.lG),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackbar.open("Subscription successfully cancelled."),this.store.dispatch(new f.hs(!0)),this.dialogRef.close()}),this.actions.pipe((0,p.xi)($.GY),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{const t=(0,se.u1)(i.error)||"There was an error cancelling your subscription.";this.snackbar.open(t)})}handleCancelClick(){this.dialogRef.close()}handleCancelSubscriptionClick(){this.store.dispatch(new $.wE)}static#e=this.\u0275fac=function(t){return new(t||qe)(e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(S.CP),e.rXU(te.UG))};static#t=this.\u0275cmp=e.VBU({type:qe,selectors:[["app-cancel-subscription-dialog"]],decls:15,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"dialog",3,"formGroup"],[1,"text-sm"],[4,"ngIf"],["class","dialog__cancel flex flex-col items-center",4,"ngIf"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","buttonType","default",3,"click"],["app-button","","buttonType","primary",3,"click","disabled"],[1,"mb-6"],[1,"font-bold"],[1,"dialog__list"],[1,"my-2"],[1,"mt-4"],["formControlName","confirm"],[2,"white-space","normal"],[1,"dialog__cancel","flex","flex-col","items-center"],["size","large"],[1,"mt-3","text-xs"]],template:function(t,o){1&t&&(e.j41(0,"h1",0),e.EFF(1,"Cancel Subscription"),e.k0s(),e.j41(2,"div",1)(3,"div",2)(4,"div",3),e.DNE(5,Fs,15,0,"div",4),e.nI1(6,"async"),e.DNE(7,xs,4,0,"div",5),e.nI1(8,"async"),e.k0s()()(),e.j41(9,"div",6)(10,"button",7),e.bIt("click",function(){return o.handleCancelClick()}),e.EFF(11," Cancel "),e.k0s(),e.j41(12,"button",8),e.nI1(13,"async"),e.bIt("click",function(){return o.handleCancelSubscriptionClick()}),e.EFF(14," Yes, Cancel Subscription "),e.k0s()()),2&t&&(e.R7$(3),e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("ngIf",!e.bMT(6,4,o.cancelling$)),e.R7$(2),e.Y8G("ngIf",e.bMT(8,6,o.cancelling$)),e.R7$(5),e.Y8G("disabled",o.form.invalid||e.bMT(13,8,o.cancelling$)))},dependencies:[c.bT,Xe.So,S.BI,S.E7,S.Yi,w.Q,Te.tI,d.BC,d.cb,d.j4,d.JD,c.Jj],styles:[".dialog[_ngcontent-%COMP%]{max-width:520px}.dialog__list[_ngcontent-%COMP%]{list-style-type:disc;margin:0;padding-left:40px}"],changeDetection:0})}function Is(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleCancelSubscriptionClick())}),e.EFF(1," Cancel "),e.k0s()}}function Us(n,i){1&n&&e.nrm(0,"app-spinner",5)}function Es(n,i){if(1&n&&(e.j41(0,"div"),e.EFF(1," You have access to Premium features through a "),e.j41(2,"em",11),e.EFF(3,"free trial"),e.k0s(),e.EFF(4,". "),e.k0s(),e.j41(5,"div"),e.EFF(6),e.nI1(7,"date"),e.k0s()),2&n){let t;const o=e.XpG(2);e.R7$(6),e.SpI(" Your trial ends on ",e.i5U(7,1,null==(t=o.subscription())?null:t.paid_through_date_time,"longDate"),". ")}}function Ps(n,i){1&n&&(e.j41(0,"app-message-toggle",12),e.EFF(1," Your subscription renewal failed. Please update your payment details. "),e.k0s())}function Ds(n,i){if(1&n&&(e.j41(0,"app-message-toggle",13),e.EFF(1),e.nI1(2,"date"),e.j41(3,"em",11),e.EFF(4,"Free Personal plan"),e.k0s(),e.EFF(5,". "),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" Your annual subscription has been canceled. It will remain active until ",e.i5U(2,1,t.billingDetails().paid_through_date,"longDate"),", after which your account will downgrade to a ")}}function As(n,i){1&n&&(e.j41(0,"div"),e.EFF(1,"No renewal"),e.k0s())}function Ms(n,i){1&n&&(e.j41(0,"app-message-toggle",14),e.EFF(1," Please log in through a web browser to "),e.j41(2,"a",16),e.EFF(3,"manage your subscription"),e.k0s(),e.EFF(4,". Our mobile app does not support updates for web-based subscriptions. "),e.k0s())}function Gs(n,i){if(1&n&&e.nrm(0,"app-account-subscription-payment-method",15),2&n){const t=e.XpG(4);e.Y8G("paymentType",t.paymentType())("paypalEmail",t.paypalEmail())("cardInfo",t.cardInfo())}}function ws(n,i){if(1&n&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"date"),e.k0s(),e.j41(3,"div"),e.EFF(4),e.nI1(5,"currency"),e.k0s(),e.DNE(6,Ms,5,0,"app-message-toggle",14)(7,Gs,1,3,"app-account-subscription-payment-method",15)),2&n){const t=e.XpG(3);e.R7$(),e.SpI("Renews ",e.i5U(2,3,t.billingDetails().next_billing_date,"longDate"),""),e.R7$(3),e.SpI(" ",e.ii3(5,6,t.billingDetails().plan_price,"USD","symbol","1.2-2")," + sales tax (if applicable) "),e.R7$(2),e.vxM(t.native?6:7)}}function $s(n,i){if(1&n&&(e.DNE(0,Ps,2,0,"app-message-toggle",12)(1,Ds,6,4,"app-message-toggle",13),e.j41(2,"div",11),e.EFF(3),e.k0s(),e.DNE(4,As,2,0,"div")(5,ws,8,11)),2&n){const t=e.XpG(2);e.vxM(t.failedToRenew()?0:t.isCanceled()?1:-1),e.R7$(3),e.JRh(t.subscription().subscription_type_display),e.R7$(),e.vxM(t.isCanceled()?4:5)}}function Bs(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleManageClick())}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.isFreeTrial()?"Upgrade":"Change Billing Information"," ")}}function Os(n,i){if(1&n&&(e.j41(0,"div",9),e.DNE(1,Es,8,4)(2,$s,6,3),e.k0s(),e.DNE(3,Bs,2,1,"button",10)),2&n){const t=e.XpG();e.R7$(),e.vxM(t.isFreeTrial()?1:t.subscription()&&t.billingDetails()?2:-1),e.R7$(2),e.vxM(t.canManage()?3:-1)}}function Ns(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",7)(1,"div",18)(2,"div",19),e.EFF(3,"Change Billing Information"),e.k0s()(),e.j41(4,"div",20)(5,"app-account-subscription-payment",21),e.bIt("paymentCancel",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleCancelClick())}),e.k0s()()()}if(2&n){let t;const o=e.XpG();e.R7$(5),e.Y8G("planId",null==(t=o.subscription())?null:t.plan_id)}}!function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);s>3&&a&&Object.defineProperty(i,t,a)}([(0,p.l6)(L.z.getCancelling),function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",i)}(0,_.c)],qe.prototype,"cancelling$",void 0);const Ys={Discover:"discover",Visa:"visa",MasterCard:"master-card","American Express":"american-express"};let Vs=(()=>{class n{constructor(t,o,s,a){this.store=t,this.actions=o,this.snackBar=s,this.dialog=a,this.native=x.c.native,this.subscription=(0,V.ot)(this.store.select(L.z.getSubscription)),this.billingDetails=(0,e.EWP)(()=>{const r=this.subscription();return function js(n){return"braintree"===n.subscription_provider}(r)?r.billing_details:null}),this.failedToRenew=(0,e.EWP)(()=>{const r=this.billingDetails();return r&&r.failure_count>0}),this.paymentType=(0,e.EWP)(()=>{const r=this.billingDetails();return"paypal_account"===r?.payment_type?"paypal":Ys[r?.payment_info?.card_type]}),this.paypalEmail=(0,e.EWP)(()=>{const r=this.billingDetails();return"paypal_account"===r?.payment_type?r.payment_info.payer_email:""}),this.cardInfo=(0,e.EWP)(()=>{const r=this.billingDetails();return"credit_card"===r?.payment_type?{lastFour:r.payment_info.last_4,cardType:r.payment_info.card_type}:null}),this.isFreeTrial=(0,V.ot)(this.store.select(L.z.isFreeTrial)),this.isCanceled=(0,V.ot)(this.store.select(L.z.isCanceled)),this.loading=(0,V.ot)(this.store.select(g.k.getLoading)),this.updating=(0,V.ot)(this.store.select(L.z.getUpdating)),this.canManage=(0,e.EWP)(()=>!this.isCanceled()&&!this.native),this.ngUnsubscribe=new T.B}ngOnInit(){this.initSubscriptionListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initSubscriptionListeners(){this.actions.pipe((0,p.xi)($.Yj),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("Your subscription has been successfully updated."),this.store.dispatch(new f.hs(!0)),this.panel.mode="view"})}handleCancelClick(){this.panel.mode="view"}handleCancelSubscriptionClick(){this.dialog.open(qe)}handleManageClick(){this.panel.mode="edit"}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(p.il),e.rXU(p.En),e.rXU(te.UG),e.rXU(S.bZ))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-premium-braintree"]],viewQuery:function(o,s){if(1&o&&e.GBs(z,7),2&o){let a;e.mGM(a=e.lsd())&&(s.panel=a.first)}},decls:9,vars:3,consts:[["panel",""],["label","Subscription",1,"premium-user-subscription"],["panel-view-actions",""],["type","button","app-button","","buttonType","outline","buttonTheme","light"],["panel-view","",1,"text-sm"],["size","huge"],["panel-edit",""],[1,"premium-user-subscription__edit"],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click"],[1,"flex","flex-col","gap-1"],["type","button","app-button","","buttonType","flat","buttonTheme","light",1,"mt-3"],[1,"font-bold"],["type","warning","icon","exclamation-triangle","alignIcon","center",1,"mb-4"],["type","notification","icon","info-circle","alignIcon","center",1,"mb-4"],["type","notification","icon","info-circle","alignIcon","center",1,"mt-2"],[3,"paymentType","paypalEmail","cardInfo"],["href","https://human.biodigital.com/account/profile",1,"underline"],["type","button","app-button","","buttonType","flat","buttonTheme","light",1,"mt-3",3,"click"],[1,"premium-user-subscription__edit-head"],[1,"font-semibold"],[1,"premium-user-subscription__edit-body"],["mode","update",3,"paymentCancel","planId"]],template:function(o,s){if(1&o&&(e.j41(0,"app-account-panel",1,0)(2,"span",2),e.DNE(3,Is,2,0,"button",3),e.k0s(),e.j41(4,"div",4),e.DNE(5,Us,1,0,"app-spinner",5)(6,Os,4,2),e.k0s(),e.j41(7,"div",6),e.DNE(8,Ns,6,1,"div",7),e.k0s()()),2&o){const a=e.sdS(1);e.R7$(3),e.vxM(s.canManage()?3:-1),e.R7$(2),e.vxM(s.loading()?5:6),e.R7$(3),e.vxM("edit"===a.mode&&s.subscription()?8:-1)}},dependencies:[w.Q,Te.tI,me.X,z,Zt,Wt,c.oe,c.vh],styles:[".premium-user-subscription__edit[_ngcontent-%COMP%]{border:1px solid #d7e0ea;border-radius:4px}.premium-user-subscription__edit-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #d7e0ea}.premium-user-subscription__edit-body[_ngcontent-%COMP%]{padding:40px 20px 20px;border-bottom:1px solid #d7e0ea}"],changeDetection:0})}return n})();var an=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},rn=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};function zs(n,i){1&n&&e.nrm(0,"app-account-free-user-subscription")}function Xs(n,i){1&n&&(e.qex(0),e.nrm(1,"app-account-premium-braintree"),e.bVm())}function Ls(n,i){1&n&&e.nrm(0,"app-account-premium-user-subscription")}function Qs(n,i){if(1&n&&(e.qex(0),e.DNE(1,Xs,2,0,"ng-container",3)(2,Ls,1,0,"ng-template",null,0,e.C5r),e.bVm()),2&n){const t=e.sdS(3),o=e.XpG();e.R7$(),e.Y8G("ngIf",o.isBraintreeSubscription)("ngIfElse",t)}}function qs(n,i){1&n&&e.nrm(0,"app-account-premium-team-subscription")}class $e{constructor(i){this.changeDetectorRef=i,this.userType=Tt.I,this.isBraintreeSubscription=!1,this.ngUnsubscribe=new T.B}ngOnInit(){this.initProfileCheck()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initProfileCheck(){this.userProfile$.pipe((0,D.p)(i=>!(0,b.isNil)(i)),(0,H.F)((i,t)=>(0,b.isEqual)(i,t)),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.isBraintreeSubscription=i.subscription&&"braintree"===i.subscription.subscription_provider,this.changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(t){return new(t||$e)(e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:$e,selectors:[["app-account-subscription"]],decls:5,vars:6,consts:[["manageExternalTmp",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngIf","ngIfElse"]],template:function(t,o){1&t&&(e.qex(0,1),e.nI1(1,"async"),e.DNE(2,zs,1,0,"app-account-free-user-subscription",2)(3,Qs,4,2,"ng-container",2)(4,qs,1,0,"app-account-premium-team-subscription",2),e.bVm()),2&t&&(e.Y8G("ngSwitch",e.bMT(1,4,o.userType$)),e.R7$(2),e.Y8G("ngSwitchCase",o.userType.Free),e.R7$(),e.Y8G("ngSwitchCase",o.userType.Premium),e.R7$(),e.Y8G("ngSwitchCase",o.userType.Team))},dependencies:[c.bT,c.ux,c.e1,ze,je,_e,Vs,c.Jj],changeDetection:0})}an([(0,p.l6)(g.k.getUserProfile),rn("design:type",_.c)],$e.prototype,"userProfile$",void 0),an([(0,p.l6)(g.k.getUserType),rn("design:type",_.c)],$e.prototype,"userType$",void 0);var cn=l(52762),ln=l(55361),Js=l(77276),Hs=l(11583),pn=l(88041);function Ws(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",7),e.bIt("click",function(s){e.eBV(t);const a=e.XpG();return e.Njj(a.handleAppToggleClick(a.app,s))}),e.j41(1,"div",8),e.nrm(2,"app-icon",9),e.k0s(),e.j41(3,"div",10),e.EFF(4,"Default"),e.k0s()()}}let Ks=(()=>{class n{constructor(){this.compact=!1,this.appSelected=new e.bkB,this.appToggleSelected=new e.bkB}ngOnInit(){}handleSelectAppClick(t,o){o.stopPropagation(),this.appSelected.emit(t)}handleAppToggleClick(t,o){o.stopPropagation(),this.appToggleSelected.emit(t)}formatPlatforms(t){return t.map(o=>o.display_name).join(", ")}formatPlatformTypes(t){return t.map(o=>o.type===cn.MM.Mobile?"API Bundle IDs":"Domains").join(", ")}formatDomains(t){return t.map(o=>o.value).join(", ")}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-app"]],inputs:{app:"app",selected:"selected",compact:"compact"},outputs:{appSelected:"appSelected",appToggleSelected:"appToggleSelected"},decls:16,vars:10,consts:[[1,"app",3,"click"],[1,"flex","flex-row","justify-between","app__header"],[1,"text-sm","font-semibold"],["class","flex flex-row items-center app__badge",3,"click",4,"ngIf"],[1,"text-xs","text-hint"],[1,"mt-4","text-xs","app__settings"],[1,"font-semibold"],[1,"flex","flex-row","items-center","app__badge",3,"click"],[1,"mr-2","text-xs","app__badge-icon"],["icon","check"],[1,"uppercase","text-sm","font-bold"]],template:function(o,s){1&o&&(e.j41(0,"div",0),e.bIt("click",function(r){return s.handleSelectAppClick(s.app,r)}),e.j41(1,"div",1)(2,"div",2),e.EFF(3),e.k0s(),e.DNE(4,Ws,5,0,"div",3),e.k0s(),e.j41(5,"div",4),e.EFF(6),e.k0s(),e.j41(7,"div",5)(8,"div",6),e.EFF(9,"API Key"),e.k0s(),e.j41(10,"div"),e.EFF(11),e.k0s(),e.j41(12,"div",6),e.EFF(13),e.k0s(),e.j41(14,"div"),e.EFF(15),e.k0s()()()),2&o&&(e.AVh("app--selected",s.selected)("app--compact",s.compact),e.R7$(3),e.SpI(" ",s.app.app_name," "),e.R7$(),e.Y8G("ngIf",s.selected),e.R7$(2),e.SpI(" ",s.formatPlatforms(s.app.app_platform)," "),e.R7$(5),e.JRh(s.app.app_apikey),e.R7$(2),e.JRh(s.formatPlatformTypes(s.app.app_platform)),e.R7$(2),e.JRh(s.formatDomains(s.app.app_domains)))},dependencies:[c.bT,I.R],styles:[".app[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #d7e0ea;border-radius:4px;padding:20px}.app__settings[_ngcontent-%COMP%]{display:grid;grid-template-columns:20% 80%;gap:8px 0px}.app__badge[_ngcontent-%COMP%]{color:#2d72dc}.app__badge-icon[_ngcontent-%COMP%]{width:20px;height:20px;display:flex;align-items:center;justify-content:center;border-radius:50%;color:#fff;background-color:#2d72dc}.app--selected[_ngcontent-%COMP%]{border:2px solid #2d72dc}.app--compact[_ngcontent-%COMP%]{padding:12px}.app--compact[_ngcontent-%COMP%]   .app__settings[_ngcontent-%COMP%]{display:flex;flex-direction:column}"],changeDetection:0})}return n})();var Je=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},He=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};function Zs(n,i){if(1&n&&e.nrm(0,"app-tag",11),2&n){const t=e.XpG(2);e.Y8G("label",t.premiumOnlyTag)}}function ea(n,i){if(1&n&&(e.qex(0,9),e.DNE(1,Zs,1,1,"app-tag",10),e.nI1(2,"async"),e.bVm()),2&n){let t;const o=e.XpG();e.R7$(),e.Y8G("ngIf",!(null!=(t=e.bMT(2,1,o.userProfile$))&&t.developer_account_valid_plan))}}function ta(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleManageAppsClick())}),e.nrm(1,"app-icon",13),e.EFF(2," Manage "),e.k0s()}}function na(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",21)(1,"app-account-app",22),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("appSelected",function(s){e.eBV(t);const a=e.XpG(3);return e.Njj(a.handleSelectAppSelected(s,!1))})("appToggleSelected",function(s){e.eBV(t);const a=e.XpG(3);return e.Njj(a.handleSelectAppSelected(s,!0))}),e.k0s()()}if(2&n){let t;const o=i.$implicit,s=e.XpG(3);e.R7$(),e.Y8G("app",o)("compact",e.bMT(2,3,s.horizontalBreakpoint$)<s.breakPoints.Medium)("selected",o.id===(null==(t=e.bMT(3,5,s.selectedUserApp$))?null:t.id))}}function ia(n,i){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",14),e.EFF(2,"Select a default application:"),e.k0s(),e.j41(3,"div",15)(4,"div",16),e.EFF(5),e.k0s(),e.j41(6,"div")(7,"app-sort",17),e.bIt("sortChange",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleSort(s))}),e.k0s()()(),e.DNE(8,na,4,7,"div",18),e.j41(9,"div",19),e.EFF(10," All models will be published with the developer key associated with your default application. Learn more about how to register an application "),e.j41(11,"a",20),e.EFF(12,"here"),e.k0s(),e.EFF(13,". "),e.k0s(),e.bVm()}if(2&n){const t=e.XpG(2);e.R7$(5),e.Lme(" ",t.userApps.length," ",1===t.userApps.length?"app":"apps"," "),e.R7$(2),e.Y8G("sortLabel","Sort Apps")("sortOptions",t.sortOptions)("sort",t.sort),e.R7$(),e.Y8G("ngForOf",t.userApps)}}function oa(n,i){1&n&&(e.j41(0,"div",23)(1,"div",24),e.EFF(2,"You don't have any apps."),e.k0s(),e.j41(3,"a",25),e.EFF(4,"What's an app?"),e.k0s()())}function sa(n,i){if(1&n&&(e.j41(0,"div"),e.DNE(1,ia,14,6,"ng-container",8)(2,oa,5,0,"ng-template",null,1,e.C5r),e.k0s()),2&n){const t=e.sdS(3),o=e.XpG();e.R7$(),e.Y8G("ngIf",o.userApps.length>0)("ngIfElse",t)}}function aa(n,i){if(1&n){const t=e.RV6();e.qex(0),e.EFF(1," You must sign in on the developer site to activate access. Click "),e.j41(2,"a",27),e.bIt("click",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleDeveloperActivateClick(s))}),e.EFF(3,"here"),e.k0s(),e.EFF(4," to activate. "),e.bVm()}}function ra(n,i){if(1&n){const t=e.RV6();e.EFF(0," Interested in leveraging the BioDigital Human's powerful toolkit to create your own custom applications? Visit our Developer Site to "),e.j41(1,"a",28),e.bIt("click",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleDeveloperTrialClick(s))}),e.EFF(2,"learn more"),e.k0s(),e.EFF(3,". ")}}function ca(n,i){if(1&n&&(e.j41(0,"p",26),e.DNE(1,aa,5,0,"ng-container",8),e.nI1(2,"async"),e.DNE(3,ra,4,0,"ng-template",null,2,e.C5r),e.k0s()),2&n){let t;const o=e.sdS(4),s=e.XpG();e.R7$(),e.Y8G("ngIf",null==(t=e.bMT(2,2,s.userProfile$))?null:t.developer_account_valid_plan)("ngIfElse",o)}}const la=[j.Z.QA,j.Z.Local].includes(x.c.deploy)?"https://developer-qa.biodigital.com/":"https://developer.biodigital.com/",un=[{label:"Last Updated",fields:["timestamp"],ascending:!1},{label:"Name (A-Z)",fields:["app_name"],ascending:!0},{label:"Name (Z-A)",fields:["app_name"],ascending:!1}];class ge{get sort(){return this._sort}set sort(i){this._sort=i,this.userApps=this.sortApps(this.userApps,this.sort),this.changeDetectorRef.markForCheck()}constructor(i,t,o,s){this.store=i,this.snackBar=t,this.router=o,this.changeDetectorRef=s,this.breakPoints=m.m,this.authUserTypes=Tt.I,this.premiumOnlyTag=Js.kf,this.ngUnsubscribe=new T.B,this.userApps=[],this.sortOptions=un,this._sort=un[0]}ngOnInit(){this.userApps$.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.userApps=this.sortApps(i,this.sort),this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleSort(i){this.sort=i}handleSelectAppSelected(i,t=!1){if(i.app_platform.some(s=>s.type===cn.MM.Web)){const s=this.store.selectSnapshot(g.k.getSelectedUserApp);s&&s.id===i.id?t&&this.store.dispatch(new f.A$(void 0)):this.store.dispatch(new f.A$(i.id))}else this.snackBar.open("Cannot assign default app. Please select a Web Widget to continue.")}handleManageAppsClick(){this.navigateToDeveloperPortal()}handleDeveloperActivateClick(i){i.preventDefault(),this.navigateToDeveloperPortal()}handleDeveloperTrialClick(i){i.preventDefault(),this.navigateToDeveloperPortal()}sortApps(i,t){const{ascending:o,fields:s}=t;return(0,ln.h5)(i,s,o)}navigateToDeveloperPortal(){const t=this.store.selectSnapshot(g.k.getUserProfile).developer_portal_signin_url??la;window.open(t,"_blank")}static#e=this.\u0275fac=function(t){return new(t||ge)(e.rXU(p.il),e.rXU(te.UG),e.rXU(U.Ix),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:ge,selectors:[["app-account-apps"]],decls:11,vars:10,consts:[["nonDeveloper",""],["noApps",""],["nonValidPlan",""],["label","Developer Apps"],["panel-view-tags","",4,"ngIf"],["panel-view-actions",""],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click",4,"ngIf"],["panel-view","",1,"developer"],[4,"ngIf","ngIfElse"],["panel-view-tags",""],["icon","lock",3,"label",4,"ngIf"],["icon","lock",3,"label"],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click"],["icon","external-link-alt",1,"mr-2"],[1,"my-5","text-sm"],[1,"flex","flex-row","justify-between","items-center"],[1,"text-xs"],[3,"sortChange","sortLabel","sortOptions","sort"],["class","developer__app my-3",4,"ngFor","ngForOf"],[1,"developer__notice","text-xs","my-4"],["href","https://devsupport.biodigital.com/hc/en-us/articles/234450188-How-to-register-an-app","target","_blank",1,"text-link"],[1,"developer__app","my-3"],[3,"appSelected","appToggleSelected","app","compact","selected"],[1,"flex","flex-col","items-center","my-10"],[1,"text-sm","mb-1"],["href","https://devsupport.biodigital.com/hc/en-us/articles/234450188","target","_blank",1,"text-xs","text-gray-400"],[1,"text-sm"],[1,"text-link","underline",3,"click"],["appEventFence","",1,"text-link","underline",3,"click"]],template:function(t,o){if(1&t&&(e.j41(0,"app-account-panel",3),e.DNE(1,ea,3,3,"ng-container",4),e.nI1(2,"async"),e.j41(3,"div",5),e.DNE(4,ta,3,0,"button",6),e.nI1(5,"async"),e.k0s(),e.j41(6,"div",7),e.DNE(7,sa,4,2,"div",8),e.nI1(8,"async"),e.DNE(9,ca,5,4,"ng-template",null,0,e.C5r),e.k0s()()),2&t){let s,a;const r=e.sdS(10);e.R7$(),e.Y8G("ngIf",e.bMT(2,4,o.userType$)!==o.authUserTypes.Team),e.R7$(3),e.Y8G("ngIf",null==(s=e.bMT(5,6,o.userProfile$))?null:s.developer_account),e.R7$(3),e.Y8G("ngIf",null==(a=e.bMT(8,8,o.userProfile$))?null:a.developer_account)("ngIfElse",r)}},dependencies:[c.Sq,c.bT,w.Q,it.L,I.R,Hs.e,pn.K,z,Ks,c.Jj],styles:[".developer__app[_ngcontent-%COMP%]{cursor:pointer}.developer__notice[_ngcontent-%COMP%]{color:#374a68}"],changeDetection:0})}function da(n,i){1&n&&(e.j41(0,"div",8),e.nrm(1,"app-spinner",9),e.j41(2,"div",10),e.EFF(3,"Deleting your account..."),e.k0s()())}function ma(n,i){if(1&n&&(e.j41(0,"div",20)(1,"app-message-toggle",21)(2,"em",13),e.EFF(3,"Server Error."),e.k0s(),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.SpI(" ",t.error," ")}}function ha(n,i){if(1&n&&(e.j41(0,"div")(1,"div",11)(2,"div")(3,"div",12),e.EFF(4," Are you sure you want to "),e.j41(5,"em",13),e.EFF(6,"permanently delete"),e.k0s(),e.EFF(7," your account? "),e.k0s(),e.j41(8,"ul",14)(9,"li",15),e.EFF(10," Deleting your BioDigital Human account is a permanent action and "),e.j41(11,"em",13),e.EFF(12,"cannot be undone"),e.k0s(),e.EFF(13,". "),e.k0s(),e.j41(14,"li",15),e.EFF(15," After you delete your account, you will not be able to log back in to the app, and any 3D models you created and saved to your Library will be removed from our database permanently and cannot be restored. "),e.k0s()(),e.j41(16,"div",16)(17,"mat-checkbox",17)(18,"span",18),e.EFF(19,"I confirm that I want to permanently delete my account."),e.k0s()()()(),e.DNE(20,ma,5,1,"div",19),e.k0s()()),2&n){const t=e.XpG();e.R7$(20),e.Y8G("ngIf",t.error)}}Je([(0,p.l6)(q.V.getHorizontalBreakpoint),He("design:type",_.c)],ge.prototype,"horizontalBreakpoint$",void 0),Je([(0,p.l6)(g.k.getUserProfile),He("design:type",_.c)],ge.prototype,"userProfile$",void 0),Je([(0,p.l6)(g.k.getUserType),He("design:type",_.c)],ge.prototype,"userType$",void 0),Je([(0,p.l6)(g.k.getUserApps),He("design:type",_.c)],ge.prototype,"userApps$",void 0),Je([(0,p.l6)(g.k.getSelectedUserApp),He("design:type",_.c)],ge.prototype,"selectedUserApp$",void 0);class We{constructor(i,t,o,s,a){this.store=i,this.actions=t,this.formBuilder=o,this.dialogRef=s,this.changeRef=a,this.error="",this.attempts=0,this.ngUnsubscribe=new T.B}ngOnInit(){this.initForm(),this.initListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.setDialogTransparent(!1)}initForm(){this.form=this.formBuilder.group({confirm:[!1,d.k0.requiredTrue]})}initListeners(){this.deleting$.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{i&&(this.error="",this.attempts++),this.setDialogTransparent(i),this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(f.nb),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new f.fQ)}),this.actions.pipe((0,p.xi)(f.cO,f.je),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.redirectOnLogout(),this.dialogRef.close()}),this.actions.pipe((0,p.xi)(f.cZ),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.error=(0,se.u1)(i.error)||"There was an error deleting your account.",this.changeRef.markForCheck()})}handleCancelClick(){this.dialogRef.close()}handleDeleteClick(){this.store.dispatch(new f.sG)}redirectOnLogout(){window.location.href=x.c.native?"/#/login?returnUrl=/explore":"/login"}setDialogTransparent(i){this.dialogRef.removePanelClass("transparent"),i&&this.dialogRef.addPanelClass("transparent")}static#e=this.\u0275fac=function(t){return new(t||We)(e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(S.CP),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:We,selectors:[["app-delete-account-dialog"]],decls:13,vars:9,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"dialog",3,"formGroup"],["class","flex flex-col items-center",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","buttonType","default",3,"click"],["app-button","","buttonType","primary",3,"click","disabled"],[1,"flex","flex-col","items-center"],["size","large"],[1,"mt-3","text-xs"],[1,"text-sm","my-4","mb-9"],[1,"mb-6"],[1,"font-bold"],[1,"dialog__list"],[1,"my-2"],[1,"mt-4"],["formControlName","confirm"],[2,"white-space","normal"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["type","error","icon","info"]],template:function(t,o){1&t&&(e.j41(0,"h1",0),e.EFF(1,"Delete Account"),e.k0s(),e.j41(2,"div",1)(3,"div",2),e.DNE(4,da,4,0,"div",3),e.nI1(5,"async"),e.DNE(6,ha,21,1,"div",4),e.nI1(7,"async"),e.k0s()(),e.j41(8,"div",5)(9,"button",6),e.bIt("click",function(){return o.handleCancelClick()}),e.EFF(10," Cancel "),e.k0s(),e.j41(11,"button",7),e.bIt("click",function(){return o.handleDeleteClick()}),e.EFF(12),e.k0s()()),2&t&&(e.R7$(3),e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("ngIf",e.bMT(5,5,o.deleting$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(7,7,o.deleting$)),e.R7$(5),e.Y8G("disabled",o.form.invalid),e.R7$(),e.SpI(" ",o.attempts>0?"Try Again":"Yes, Delete Account"," "))},dependencies:[c.bT,Xe.So,S.BI,S.E7,S.Yi,w.Q,Te.tI,me.X,d.BC,d.cb,d.j4,d.JD,c.Jj],styles:[".dialog[_ngcontent-%COMP%]{max-width:520px}.dialog__list[_ngcontent-%COMP%]{list-style-type:disc;margin:0;padding-left:40px}"],changeDetection:0})}!function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);s>3&&a&&Object.defineProperty(i,t,a)}([(0,p.l6)(g.k.getProfileDeleting),function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",i)}(0,_.c)],We.prototype,"deleting$",void 0);const ga=()=>["./"];let fa=(()=>{class n{constructor(t){this.dialog=t}ngOnInit(){}handleDeleteAccountClick(){this.dialog.open(We)}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(S.bZ))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-delete"]],decls:10,vars:2,consts:[["label","Delete Account"],[1,"delete-account","text-sm"],[1,"font-bold"],[1,"mt-4"],[1,"text-link","underline",3,"click","routerLink"]],template:function(o,s){1&o&&(e.j41(0,"app-account-panel",0)(1,"div",1)(2,"div"),e.EFF(3," Deleting your BioDigital Human account is a permanent action and "),e.j41(4,"em",2),e.EFF(5,"cannot be undone"),e.k0s(),e.EFF(6,". "),e.k0s(),e.j41(7,"div",3)(8,"a",4),e.bIt("click",function(){return s.handleDeleteAccountClick()}),e.EFF(9," Delete account "),e.k0s()()()()),2&o&&(e.R7$(8),e.Y8G("routerLink",e.lJ4(1,ga)))},dependencies:[U.Wk,z],changeDetection:0})}return n})();var dn=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},mn=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};function ba(n,i){1&n&&(e.qex(0),e.nrm(1,"mat-divider"),e.j41(2,"div",4),e.nrm(3,"app-account-apps"),e.k0s(),e.bVm())}function va(n,i){1&n&&(e.qex(0),e.nrm(1,"mat-divider"),e.j41(2,"div",5),e.nrm(3,"app-account-delete"),e.k0s(),e.bVm())}class Be{constructor(i,t){this.store=i,this.activatedRoute=t,this.ngUnsubscribe=new T.B,this.userRoleEnum=O.x}ngOnInit(){this.store.dispatch(new f.hs(!0))}ngAfterViewInit(){this.initRoutingListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initRoutingListeners(){(0,P.h)(this.activatedRoute.url,this.activatedRoute.queryParams).pipe((0,k.T)(()=>this.activatedRoute.snapshot.queryParams),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{const{section:t}=i;this.scrollToSection(t)})}scrollToSection(i){const o=document.getElementById(`account-${i}`);o&&o.scrollIntoView()}static#e=this.\u0275fac=function(t){return new(t||Be)(e.rXU(p.il),e.rXU(U.nX))};static#t=this.\u0275cmp=e.VBU({type:Be,selectors:[["app-profile-page"]],decls:13,vars:8,consts:[["id","account-profile",1,"mb-10"],["id","account-password",1,"my-10"],["id","account-subscription",1,"my-10"],[4,"ngIf"],["id","account-developer",1,"my-10"],["id","account-delete",1,"my-10"]],template:function(t,o){if(1&t&&(e.j41(0,"div",0),e.nrm(1,"app-account-profile"),e.k0s(),e.nrm(2,"mat-divider"),e.j41(3,"div",1),e.nrm(4,"app-account-password"),e.k0s(),e.nrm(5,"mat-divider"),e.j41(6,"div",2),e.nrm(7,"app-account-subscription"),e.k0s(),e.DNE(8,ba,4,0,"ng-container",3),e.nI1(9,"async"),e.nI1(10,"async"),e.DNE(11,va,4,0,"ng-container",3),e.nI1(12,"async")),2&t){let s;e.R7$(8),e.Y8G("ngIf",(null==(s=e.bMT(9,2,o.userRole$))?null:s.role_name)===o.userRoleEnum.Creator||(null==(s=e.bMT(10,4,o.userRole$))?null:s.role_name)===o.userRoleEnum.Admin),e.R7$(3),e.Y8G("ngIf",!e.bMT(12,6,o.organization$))}},dependencies:[c.bT,J.q,Se,Ve,$e,ge,fa,c.Jj],changeDetection:0})}dn([(0,p.l6)(g.k.getUserRole),mn("design:type",_.c)],Be.prototype,"userRole$",void 0),dn([(0,p.l6)(F.q.getOrganization),mn("design:type",_.c)],Be.prototype,"organization$",void 0);var ya=l(291);const Ca=(n,i)=>({"toggle--checked":n,"toggle--disabled":i});let Ta=(()=>{class n{set id(t){this._ID=t,this.externalId=null}get id(){return this._ID}get value(){return this._value}set value(t){t!==this.value&&(this._value=t,this.onChange(t),this.onTouched())}constructor(){this.externalId="",this._ID="",this._value=!1,this.onChange=()=>{},this.onTouched=()=>{},this.disabled=!1,this.checkedIcon="check",this.uncheckedIcon="minus"}registerOnChange(t){this.onChange=t}writeValue(t){t&&(this.value=t)}registerOnTouched(t){this.onTouched=t}toggle(){this.disabled||(this.value=!this.value)}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-toggle"]],hostVars:1,hostBindings:function(o,s){2&o&&e.BMQ("id",s.externalId)},inputs:{id:"id",_value:[0,"value","_value"],disabled:"disabled",checkedIcon:"checkedIcon",uncheckedIcon:"uncheckedIcon"},features:[e.Jv_([{provide:d.kq,useExisting:(0,e.Rfq)(()=>n),multi:!0}])],decls:4,vars:9,consts:[[1,"toggle",3,"click","ngClass"],["type","checkbox",1,"toggle__input",3,"value","id"],[1,"toggle__handle"],[3,"icon"]],template:function(o,s){1&o&&(e.j41(0,"div",0),e.bIt("click",function(){return s.toggle()}),e.nrm(1,"input",1),e.j41(2,"div",2),e.nrm(3,"app-icon",3),e.k0s()()),2&o&&(e.Y8G("ngClass",e.l_i(6,Ca,s.value,s.disabled)),e.R7$(),e.Y8G("value",s.value)("id",s.id),e.BMQ("checked",s.value)("disabled",s.disabled),e.R7$(2),e.Y8G("icon",s.value?s.checkedIcon:s.uncheckedIcon))},dependencies:[c.YU,I.R],styles:['[_nghost-%COMP%]{padding:0 8px}.toggle[_ngcontent-%COMP%]{box-sizing:border-box;--diameter: 20px;--track-height: calc(var(--diameter) * .7);--track-color: #d7e0ea;--handle-color: #374a68;display:flex;justify-content:center;align-items:center;width:calc(var(--diameter) * 2);min-height:40px;position:relative;transition:all ease-in-out .15s;cursor:pointer}.toggle--checked[_ngcontent-%COMP%]{--track-color: #add6ff;--handle-color: #2d72dc}.toggle--checked[_ngcontent-%COMP%]   .toggle__handle[_ngcontent-%COMP%]{transform:translate(100%)}.toggle--disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.toggle[_ngcontent-%COMP%]:after{content:" ";background-color:var(--track-color);width:100%;height:var(--track-height);border-radius:calc(var(--track-height) / 2);position:absolute;z-index:1}.toggle__input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;width:0;height:0}.toggle__handle[_ngcontent-%COMP%]{width:var(--diameter);height:var(--diameter);border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--handle-color);color:#fff;font-size:calc(var(--diameter) * .4);position:absolute;left:0;z-index:2;transition:all ease-in-out .15s}'],changeDetection:0})}return n})();var Ut=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},Et=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};const ka=["emailMessage"],Ra=["emailError"];function Fa(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",10)(1,"app-account-panel",22)(2,"div",23),e.EFF(3,"This will clear your downloaded content from this device."),e.k0s(),e.j41(4,"button",24),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleDeleteDataClick())}),e.EFF(5," Delete Data "),e.k0s()()()}}class Ue{constructor(i,t,o){this.actions=i,this.changeRef=t,this.store=o,this.environment=x.c,this.ngUnsubscribe=new T.B}ngOnInit(){this.initEmailPreferenceObservers()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initEmailPreferenceObservers(){this.userAccountSettings$.pipe((0,k.T)(i=>{const t=(0,Fe.j)(i);return(0,b.get)(t,"email_marketing_optin.value")}),(0,D.p)(i=>!(0,b.isNil)(i)),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.emailPreference=i,this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(f.ZD),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.updateEmailMessage="You have successfully "+(this.emailPreference?"subscribed":"unsubscribed"),this.emailMessage.shown=!0,this.changeRef.markForCheck(),this.store.dispatch(new f.hs)}),this.actions.pipe((0,p.xi)(f._h),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.emailError.shown=!0,this.changeRef.markForCheck(),this.store.dispatch(new f.hs)})}handleDeleteDataClick(){this.store.dispatch(new f.tM)}handleToggleEmail(i){i!==this.emailPreference&&(this.emailPreference=i,this.store.dispatch(new f.Kg({account_settings:[{email_marketing_optin:{value:i?1:0}}]})))}static#e=this.\u0275fac=function(t){return new(t||Ue)(e.rXU(p.En),e.rXU(e.gRc),e.rXU(p.il))};static#t=this.\u0275cmp=e.VBU({type:Ue,selectors:[["app-settings-page"]],viewQuery:function(t,o){if(1&t&&(e.GBs(ka,7),e.GBs(Ra,7)),2&t){let s;e.mGM(s=e.lsd())&&(o.emailMessage=s.first),e.mGM(s=e.lsd())&&(o.emailError=s.first)}},decls:34,vars:9,consts:[["emailMessage",""],["emailError",""],[1,"settings","flex","flex-col"],[1,"mb-6"],["label","Language"],[1,"text-sm","my-5"],[1,"flex","flex-row"],["buttonType","outline","buttonTheme","light","localeFormat","full",3,"showFlag"],[1,"settings__notice","text-xs","my-2"],["class","my-6",4,"ngIf"],[1,"my-6"],["label","Email Preferences"],[1,"my-2"],["type","message",3,"shown"],["type","error",3,"shown"],[1,"flex"],["checkedIcon","","uncheckedIcon","",1,"mr-2",3,"ngModelChange","disabled","ngModel"],[1,"text-sm"],["label","Legal"],[1,"flex","flex-col","text-sm"],["href","https://www.biodigital.com/terms","target","_blank",1,"text-link","underline"],["href","https://www.biodigital.com/privacy","target","_blank",1,"text-link","underline","mt-2"],["label","Delete Stored Data"],[1,"text-sm","mb-5"],["type","submit","buttonTheme","light","app-button","","buttonType","primary",3,"click"]],template:function(t,o){if(1&t){const s=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"app-account-panel",4)(3,"div",5),e.EFF(4,"Select the language you'd like to use for our 3D models:"),e.k0s(),e.j41(5,"div",6),e.nrm(6,"app-locales",7),e.k0s(),e.j41(7,"div",8),e.EFF(8," This setting translates the contents of the 3D models (i.e., titles, descriptions, and anatomical structures) found in Explore. The models stored in your Library will not be translated. "),e.k0s()()(),e.DNE(9,Fa,6,0,"div",9),e.j41(10,"div",10)(11,"app-account-panel",11)(12,"div",12)(13,"app-message-toggle",13,0),e.EFF(15),e.k0s(),e.j41(16,"app-message-toggle",14,1),e.EFF(18," There was a problem updating your email preferences. Please try again later. "),e.k0s()(),e.j41(19,"div",15)(20,"app-toggle",16),e.nI1(21,"async"),e.bIt("ngModelChange",function(r){return e.eBV(s),e.Njj(o.handleToggleEmail(r))}),e.k0s(),e.j41(22,"div")(23,"div",17),e.EFF(24,"Receive emails for newsletters, product tips, and more."),e.k0s(),e.j41(25,"div",8),e.EFF(26," You will always receive important transactional and billing-related updates. "),e.k0s()()()()(),e.j41(27,"div",10)(28,"app-account-panel",18)(29,"div",19)(30,"a",20),e.EFF(31,"Terms of Service"),e.k0s(),e.j41(32,"a",21),e.EFF(33,"Privacy Policy"),e.k0s()()()()()}2&t&&(e.R7$(6),e.Y8G("showFlag",!1),e.R7$(3),e.Y8G("ngIf",o.environment.native),e.R7$(4),e.Y8G("shown",!1),e.R7$(2),e.SpI(" ",o.updateEmailMessage," "),e.R7$(),e.Y8G("shown",!1),e.R7$(4),e.Y8G("disabled",e.bMT(21,7,o.profileUpdating$))("ngModel",o.emailPreference))},dependencies:[c.bT,d.BC,d.vS,w.Q,me.X,ya.J,Ta,z,c.Jj],styles:[".settings__select[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.settings__notice[_ngcontent-%COMP%]{color:#374a68}"],changeDetection:0})}Ut([(0,p.l6)(g.k.getUserLocale),Et("design:type",_.c)],Ue.prototype,"userLocale$",void 0),Ut([(0,p.l6)(g.k.getUserAccountSettings),Et("design:type",_.c)],Ue.prototype,"userAccountSettings$",void 0),Ut([(0,p.l6)(g.k.getProfileUpdating),Et("design:type",_.c)],Ue.prototype,"profileUpdating$",void 0);var hn=l(76203),_n=l(21827),Pt=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},Dt=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};const xa=["error"];function Sa(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleShowFormClick())}),e.j41(1,"div",9),e.EFF(2,"Have a team invite code for a different team?"),e.k0s()()}2&n&&e.Y8G("uppercase",!1)}function ja(n,i){1&n&&(e.j41(0,"div",10),e.nrm(1,"mat-divider"),e.k0s())}function Ia(n,i){if(1&n&&(e.qex(0),e.DNE(1,Sa,3,1,"button",6),e.nI1(2,"async"),e.DNE(3,ja,2,0,"div",7),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!1===e.bMT(2,2,t.requesting$)&&!t.showInviteForm),e.R7$(2),e.Y8G("ngIf",t.showInviteForm)}}function Ua(n,i){1&n&&e.nrm(0,"app-spinner",13)}function Ea(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.handleCancelClick())}),e.EFF(1," Cancel "),e.k0s()}}function Pa(n,i){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",14)(2,"app-message-toggle",15,0),e.EFF(4),e.k0s()(),e.j41(5,"div",16)(6,"app-form-field",17),e.nrm(7,"input",18),e.k0s(),e.j41(8,"div",19),e.DNE(9,Ea,2,0,"button",20),e.j41(10,"button",21),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleJoinClick())}),e.EFF(11," Join Team "),e.k0s()()(),e.bVm()}if(2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("shown",!1),e.R7$(2),e.SpI(" ",t.errorMessage," "),e.R7$(),e.Y8G("formGroup",t.form),e.R7$(4),e.Y8G("ngIf",t.form.dirty),e.R7$(),e.Y8G("disabled",t.form.invalid)}}function Da(n,i){if(1&n&&(e.qex(0),e.j41(1,"div",11),e.EFF(2,"Use your team invite code to join an existing team account."),e.k0s(),e.DNE(3,Ua,1,0,"app-spinner",12),e.nI1(4,"async"),e.DNE(5,Pa,12,5,"ng-container",5),e.bVm()),2&n){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",e.bMT(4,2,t.joining$)||t.joined),e.R7$(2),e.Y8G("ngIf",!t.joined)}}function Aa(n,i){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",10),e.nrm(2,"mat-divider"),e.k0s(),e.j41(3,"app-account-panel",23)(4,"div",24),e.nrm(5,"app-team-features"),e.k0s(),e.j41(6,"div",25)(7,"button",26),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleStartTrialClick())}),e.EFF(8," Start free trial "),e.k0s()()(),e.bVm()}}class Ee{constructor(i,t,o,s,a){this.authRoutingService=i,this.store=t,this.actions=o,this.formBuilder=s,this.changeDetectorRef=a,this.showInviteForm=!1,this.showFreeTrial=!1,this.joined=!1,this.errorMessage="",this.requestOrganizationsText="The following teams are available for you to join based on your email domain. Submit a request to start collaborating.",this.ngUnsubscribe=new T.B}ngOnInit(){this.initForm(),this.initEventListers()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({code:["",d.k0.required]})}initEventListers(){this.actions.pipe((0,p.xi)(M.yX),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.joined=!0,this.errorMessage="",this.store.dispatch(new f.hs),this.changeDetectorRef.markForCheck()}),this.actions.pipe((0,p.xi)(M.zi),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.errorMessage=(0,se.u1)(i.error)||"There was an error joining the group",this.error.shown=!0,this.form.markAsUntouched(),this.changeDetectorRef.markForCheck()})}handleCancelClick(){this.form.reset(),this.errorMessage="",this.error.shown=!1,this.changeDetectorRef.markForCheck()}handleJoinClick(){const{code:i}=this.form.value;this.store.dispatch(new M.Jt(i))}handleStartTrialClick(){this.authRoutingService.navigateToTeamCreation()}handleShowFormClick(){this.showInviteForm=!0}handlePendingJoinRequest(i){this.showFreeTrial=void 0===i,i&&(this.showInviteForm=!1)}handleRequestOrganizationsSuccess(i){this.showInviteForm=0===i.length}static#e=this.\u0275fac=function(t){return new(t||Ee)(e.rXU(Z.y),e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:Ee,selectors:[["app-team-free-user"]],viewQuery:function(t,o){if(1&t&&e.GBs(xa,5),2&t){let s;e.mGM(s=e.lsd())&&(o.error=s.first)}},decls:8,vars:6,consts:[["error",""],[1,"team"],["noticeType","team_account_closed"],["label","Join a Team"],[3,"pendingJoinRequestSuccess","requestOrganizationsSuccess","requestOrganizationsText"],[4,"ngIf"],["class","mt-3","app-button","","buttonSize","xs","buttonType","text","buttonTheme","light",3,"uppercase","click",4,"ngIf"],["class","my-8",4,"ngIf"],["app-button","","buttonSize","xs","buttonType","text","buttonTheme","light",1,"mt-3",3,"click","uppercase"],[1,"text-sm","underline"],[1,"my-8"],[1,"text-sm","my-4"],["size","huge",4,"ngIf"],["size","huge"],[1,"my-4"],["type","error","icon","exclamation-circle",3,"shown"],[1,"mt-4",3,"formGroup"],["label","Team Invite Code","theme","light"],["type","text","formControlName","code",1,"input"],[1,"flex","justify-end","mt-1"],["type","reset","app-button","","buttonTheme","light","buttonType","default","class","mr-4",3,"click",4,"ngIf"],["type","submit","buttonTheme","light","app-button","","buttonType","primary",3,"click","disabled"],["type","reset","app-button","","buttonTheme","light","buttonType","default",1,"mr-4",3,"click"],["label","Create a Team"],[1,"team__features"],[1,"mt-8","flex","flex-col","items-center"],["type","button","buttonTheme","light","app-button","","buttonType","outline",1,"mb-4",3,"click"]],template:function(t,o){1&t&&(e.j41(0,"div",1),e.nrm(1,"app-user-notices",2),e.j41(2,"app-account-panel",3)(3,"app-team-join",4),e.bIt("pendingJoinRequestSuccess",function(a){return o.handlePendingJoinRequest(a)})("requestOrganizationsSuccess",function(a){return o.handleRequestOrganizationsSuccess(a)}),e.k0s(),e.DNE(4,Ia,4,4,"ng-container",5)(5,Da,6,4,"ng-container",5),e.k0s(),e.DNE(6,Aa,9,0,"ng-container",5),e.nI1(7,"async"),e.k0s()),2&t&&(e.R7$(3),e.Y8G("requestOrganizationsText",o.requestOrganizationsText),e.R7$(),e.Y8G("ngIf",o.showFreeTrial),e.R7$(),e.Y8G("ngIf",o.showInviteForm),e.R7$(),e.Y8G("ngIf",e.bMT(7,4,o.canStartFreeTrial$)&&o.showFreeTrial))},dependencies:[c.bT,d.me,d.BC,d.cb,d.j4,d.JD,w.Q,Ge.K,hn.W,Te.tI,me.X,_n.H,Rt,J.q,z,c.Jj],changeDetection:0})}Pt([(0,p.l6)(he.e.getJoining),Dt("design:type",_.c)],Ee.prototype,"joining$",void 0),Pt([(0,p.l6)(he.e.getRequesting),Dt("design:type",_.c)],Ee.prototype,"requesting$",void 0),Pt([(0,p.l6)(g.k.canStartFreeTrial),Dt("design:type",_.c)],Ee.prototype,"canStartFreeTrial$",void 0);var Ga=l(56081),Pe=l(7213),wa=l(27561),$a=l(43654),Ba=l(35160),Oa=l(32914),Na=l(56657),Ya=(l(15040),l(65459)),Va=l(42482),za=l(79083),gn=l(5951),Xa=l(87424),La=l(57018),Qa=l(65115),qa=l(77242),Ja=l(41640),De=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},Ae=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};const Ha=["upload"],Wa=n=>({"w-1/2":n});function Ka(n,i){if(1&n&&(e.j41(0,"div",25),e.nI1(1,"async"),e.j41(2,"app-form-field",26),e.nrm(3,"app-content-upload-input",27,4),e.k0s()()),2&n){const t=e.XpG(2);e.Y8G("ngClass",e.eq3(4,Wa,e.bMT(1,2,t.horizontalBreakpoint$)>t.horizontalBreakpoint.Small)),e.R7$(2),e.Y8G("labelElement",!1)}}function Za(n,i){if(1&n&&(e.j41(0,"div",28)(1,"mat-error"),e.EFF(2),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(2),e.SpI(" ",t.teamNamePlaceholder," ")}}function er(n,i){if(1&n&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function tr(n,i){1&n&&(e.j41(0,"div",28)(1,"mat-error"),e.EFF(2," Please enter a valid website (e.g. www.example.com or example.com). "),e.k0s()())}function nr(n,i){if(1&n&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function ir(n,i){1&n&&(e.j41(0,"div",30),e.nrm(1,"input",31),e.k0s())}function or(n,i){if(1&n&&(e.j41(0,"div",13),e.DNE(1,Ka,5,6,"div",14),e.j41(2,"app-form-field",15),e.nrm(3,"input",16),e.DNE(4,Za,3,1,"div",17),e.k0s(),e.j41(5,"app-form-field",15)(6,"select",18),e.nrm(7,"option",19),e.DNE(8,er,2,2,"option",20),e.k0s()(),e.j41(9,"app-form-field",15),e.nrm(10,"input",21),e.DNE(11,tr,3,0,"div",17),e.k0s(),e.j41(12,"app-form-field",15)(13,"select",22),e.nrm(14,"option",19),e.DNE(15,nr,2,2,"option",20),e.nrm(16,"option",23),e.k0s(),e.DNE(17,ir,2,0,"div",24),e.k0s()()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.environment.native),e.R7$(),e.Y8G("label",t.teamNameLabel),e.R7$(),e.Y8G("minlength",t.minNameLength)("maxlength",t.maxNameLength),e.R7$(),e.Y8G("ngIf",t.nameField.touched&&t.nameField.invalid),e.R7$(),e.Y8G("label",t.teamSizeLabel),e.R7$(3),e.Y8G("ngForOf",t.teamSizes),e.R7$(),e.Y8G("label",t.teamWebsiteLabel),e.R7$(2),e.Y8G("ngIf",t.websiteField.touched&&t.websiteField.invalid),e.R7$(),e.Y8G("label",t.teamIndustryLabel),e.R7$(3),e.Y8G("ngForOf",t.teamIndustries),e.R7$(),e.Y8G("label","Other")("value","Other"),e.R7$(),e.Y8G("ngIf","Other"===t.form.get("industry").value)}}function sr(n,i){1&n&&e.eu8(0)}function ar(n,i){if(1&n&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.role_id),e.R7$(),e.SpI(" ",t.role_display_name," ")}}function rr(n,i){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",34),e.EFF(2," You can generate a new team invite code and link if you no longer wish to use the old one. "),e.k0s(),e.j41(3,"button",41),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setShowGenerateCode(!0))}),e.EFF(4," Generate New Team Code and Link "),e.k0s(),e.bVm()}2&n&&(e.R7$(3),e.Y8G("uppercase",!0))}function cr(n,i){1&n&&e.nrm(0,"app-spinner",53)}function lr(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",42),e.EFF(1,"Are you sure you want to generate a new team invite code?"),e.k0s(),e.j41(2,"ul",43)(3,"li",44),e.EFF(4,"This action "),e.j41(5,"span",45),e.EFF(6,"cannot be undone."),e.k0s()(),e.j41(7,"li",44),e.EFF(8,"Previously shared team invite codes and links will be invalid."),e.k0s()(),e.j41(9,"div",46)(10,"mat-checkbox",47)(11,"span",48),e.EFF(12,"I confirm that I want to generate a new team invite code and link."),e.k0s()()(),e.j41(13,"div",49)(14,"button",50),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setShowGenerateCode(!1))}),e.EFF(15," Cancel "),e.k0s(),e.j41(16,"button",51),e.nI1(17,"async"),e.bIt("click",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleGenerateCodeClick(s))}),e.EFF(18," Yes, Generate "),e.DNE(19,cr,1,0,"app-spinner",52),e.nI1(20,"async"),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(14),e.Y8G("uppercase",!0),e.R7$(2),e.Y8G("disabled",!t.confirmGenerateCode.value||e.bMT(17,4,t.generatingGroupCode$))("uppercase",!0),e.R7$(3),e.Y8G("ngIf",e.bMT(20,6,t.generatingGroupCode$))}}function pr(n,i){1&n&&e.nrm(0,"app-spinner",53)}function ur(n,i){1&n&&(e.j41(0,"div",28)(1,"mat-error"),e.EFF(2," Please enter a valid domain format. "),e.k0s()())}function dr(n,i){1&n&&(e.j41(0,"div",28)(1,"mat-error"),e.EFF(2," You've already added this domain. "),e.k0s()())}function mr(n,i){1&n&&(e.j41(0,"div",28)(1,"mat-error"),e.EFF(2," You cannot use this domain. "),e.k0s()())}function hr(n,i){1&n&&e.nrm(0,"app-spinner",63)}function _r(n,i){1&n&&e.nrm(0,"app-icon",64)}function gr(n,i){if(1&n){const t=e.RV6();e.j41(0,"li",59)(1,"div",60),e.EFF(2),e.k0s(),e.j41(3,"button",61),e.nI1(4,"async"),e.bIt("click",function(s){const a=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.handleRemoveDomainClick(s,a))}),e.DNE(5,hr,1,0,"app-spinner",62)(6,_r,1,0,"ng-template",null,6,e.C5r),e.k0s()()}if(2&n){const t=i.$implicit,o=e.sdS(7),s=e.XpG(3);e.R7$(2),e.JRh(t.email_domain),e.R7$(),e.Y8G("disabled",e.bMT(4,4,s.removingJoinDomains$)),e.R7$(2),e.Y8G("ngIf",t.join_domain_id===s.domainIdToRemove)("ngIfElse",o)}}function fr(n,i){if(1&n){const t=e.RV6();e.j41(0,"div")(1,"div",37),e.EFF(2,"Approved Email Domains"),e.k0s(),e.j41(3,"div",34),e.EFF(4," Allow users with specific email domains to request to join your team. Administrators will be prompted via email to approve or deny each request. "),e.k0s(),e.j41(5,"app-form-field",35)(6,"div",54),e.nrm(7,"input",55),e.j41(8,"button",56),e.nI1(9,"async"),e.nI1(10,"async"),e.bIt("click",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleAddDomainClick(s))}),e.EFF(11," Add Domain "),e.DNE(12,pr,1,0,"app-spinner",52),e.nI1(13,"async"),e.k0s()(),e.DNE(14,ur,3,0,"div",17)(15,dr,3,0,"div",17)(16,mr,3,0,"div",17),e.k0s(),e.j41(17,"ul",57),e.DNE(18,gr,8,6,"li",58),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(8),e.Y8G("disabled",t.domainToAddEmpty||t.domainToAdd.invalid||t.domainToAdd.pending||e.bMT(9,6,t.loadingJoinDomains$)||e.bMT(10,8,t.addingJoinDomains$)),e.R7$(4),e.Y8G("ngIf",t.domainToAdd.pending||e.bMT(13,10,t.addingJoinDomains$)),e.R7$(2),e.Y8G("ngIf",null==t.domainToAdd.errors?null:t.domainToAdd.errors.invalidDomainPattern),e.R7$(),e.Y8G("ngIf",null==t.domainToAdd.errors?null:t.domainToAdd.errors.duplicateDomain),e.R7$(),e.Y8G("ngIf",null==t.domainToAdd.errors?null:t.domainToAdd.errors.forbiddenDomain),e.R7$(2),e.Y8G("ngForOf",t.joinDomains)}}function br(n,i){if(1&n&&(e.j41(0,"div",13),e.DNE(1,sr,1,0,"ng-container",32),e.j41(2,"div",33),e.EFF(3,"Default Member Role"),e.k0s(),e.j41(4,"div",34),e.EFF(5," New members are automatically assigned this role unless specified otherwise in the email invitation. Roles can also be managed on the Team page. "),e.k0s(),e.j41(6,"app-form-field",35)(7,"select",36),e.DNE(8,ar,2,2,"option",20),e.nI1(9,"async"),e.k0s()(),e.j41(10,"div",37),e.EFF(11,"Team Invite Code and Link"),e.k0s(),e.nrm(12,"app-team-group-code")(13,"mat-divider",38),e.DNE(14,rr,5,1,"ng-container",39)(15,lr,21,8,"ng-template",null,5,e.C5r)(17,fr,19,12,"div",40),e.k0s()),2&n){const t=e.sdS(16),o=e.XpG(),s=e.sdS(14);e.R7$(),e.Y8G("ngTemplateOutlet",s),e.R7$(7),e.Y8G("ngForOf",e.bMT(9,5,o.defaultRoleOptions$)),e.R7$(6),e.Y8G("ngIf",!o.showGenerateGroupCode)("ngIfElse",t),e.R7$(3),e.Y8G("ngIf",o.isValidPaidSubscription)}}function vr(n,i){1&n&&e.eu8(0)}function yr(n,i){if(1&n&&(e.j41(0,"div",13),e.DNE(1,vr,1,0,"ng-container",32),e.j41(2,"p",65),e.EFF(3," Set the fallback source to use when no official BioDigital anatomy description is available. "),e.k0s(),e.j41(4,"app-form-field",35)(5,"mat-radio-group",66)(6,"app-list",67)(7,"app-list-item")(8,"mat-radio-button",68),e.EFF(9,"Wikipedia"),e.k0s()(),e.j41(10,"app-list-item")(11,"mat-radio-button",69),e.EFF(12,"NCIT"),e.k0s()()()()()()),2&n){e.XpG();const t=e.sdS(14);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function Cr(n,i){1&n&&e.eu8(0)}function Tr(n,i){if(1&n&&(e.qex(0),e.j41(1,"legend",70),e.EFF(2,"Create your team"),e.k0s(),e.j41(3,"p",71),e.EFF(4,"Tell us about your team to set up your account."),e.k0s(),e.j41(5,"div",72),e.DNE(6,Cr,1,0,"ng-container",32),e.k0s(),e.bVm()),2&n){e.XpG();const t=e.sdS(3);e.R7$(6),e.Y8G("ngTemplateOutlet",t)}}function kr(n,i){1&n&&e.eu8(0)}function Rr(n,i){1&n&&e.eu8(0)}function Fr(n,i){1&n&&e.eu8(0)}function xr(n,i){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"legend",73),e.EFF(2,"Manage Team"),e.k0s(),e.j41(3,"app-tabs",74),e.bIt("activeTabChange",function(s){e.eBV(t);const a=e.XpG();return e.Njj(a.handleActiveTabChange(s))}),e.j41(4,"app-tab",75),e.DNE(5,kr,1,0,"ng-container",32),e.k0s(),e.j41(6,"app-tab",76),e.DNE(7,Rr,1,0,"ng-container",32),e.k0s(),e.j41(8,"app-tab",77),e.DNE(9,Fr,1,0,"ng-container",32),e.k0s()(),e.bVm()}if(2&n){const t=e.XpG(),o=e.sdS(3),s=e.sdS(5),a=e.sdS(7);e.R7$(3),e.Y8G("tabUnderline",!0)("activeTab",t.sections.Profile),e.R7$(2),e.Y8G("ngTemplateOutlet",o),e.R7$(2),e.Y8G("ngTemplateOutlet",s),e.R7$(2),e.Y8G("ngTemplateOutlet",a)}}function Sr(n,i){1&n&&e.nrm(0,"app-spinner",53)}function jr(n,i){if(1&n&&(e.j41(0,"button",78),e.EFF(1),e.DNE(2,Sr,1,0,"app-spinner",52),e.k0s()),2&n){const t=e.XpG();e.AVh("w-full","create"===t.mode),e.Y8G("disabled",t.form.invalid||t.actionState),e.R7$(),e.SpI(" ",t.actionLabel," "),e.R7$(),e.Y8G("ngIf",t.actionState)}}function Ir(n,i){1&n&&(e.j41(0,"div",80),e.EFF(1," Please fill out the required fields in the "),e.j41(2,"span",45),e.EFF(3,"Profile"),e.k0s(),e.EFF(4," tab. "),e.k0s())}function Ur(n,i){if(1&n&&e.DNE(0,Ir,5,0,"div",79),2&n){const t=e.XpG();e.Y8G("ngIf",t.profileFieldInvalid)}}const Er=new RegExp("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?","i"),Pr=new RegExp(/^(?!-)[A-Za-z0-9-]+([\\-\\.]{1}[a-z0-9]+)*\.[A-Za-z]{2,6}$/,"i");var At=function(n){return n[n.Profile=0]="Profile",n[n.TeamAccess=1]="TeamAccess",n[n.AppSettings=2]="AppSettings",n}(At||{});class ne{get formAccountLogoURL(){return(0,b.get)(this.form,"value.account_logo_url.default","")}get mode(){return(0,b.isNil)(this.organization)?"create":"manage"}get nameField(){return this.form.get("account_name")}get websiteField(){return this.form.get("website")}get sizeField(){return this.form.get("size")}get industry(){return this.form.get("industry")}get defaultRoleId(){return this.form.get("defaultRoleId")}get domainToAdd(){return this.form.get("domainToAdd")}get confirmGenerateCode(){return this.form.get("confirmGenerateCode")}get domainToAddEmpty(){const i=this.domainToAdd.value;return!i||0===i.length}get profileFieldInvalid(){return this.nameField.invalid||this.sizeField.invalid||this.websiteField.invalid||this.industry.invalid}constructor(i,t,o,s,a,r){this.organizationsService=i,this.formBuilder=t,this.store=o,this.actions=s,this.snackBar=a,this.changeRef=r,this.environment=x.c,this.accountPurposeEnum=v.j,this.horizontalBreakpoint=m.m,this.minNameLength=3,this.maxNameLength=45,this.isValidPaidSubscription=!1,this.joinDomains=[],this.organizationCreated=new e.bkB,this.organizationUpdated=new e.bkB,this.teamIndustries=[],this.showGenerateGroupCode=!1,this.ngUnsubscribe=new T.B,this.sections=At,this.showSubmitButton=!0;const u=this.store.selectSnapshot(g.k.isDeveloperReferral)?"developer":"";this.form=this.formBuilder.group({account_logo_url:[this.createImageURLs()],account_logo:[this.createAccountLogo()],account_name:["",[d.k0.required,d.k0.minLength(this.minNameLength),d.k0.maxLength(this.maxNameLength)]],size:["",[d.k0.required]],website:["",[d.k0.required,d.k0.pattern(Er)]],industry:["",d.k0.required],industryDescription:[""],purposeDescription:[u],defaultRoleId:[null],confirmGenerateCode:[!1],domainToAdd:[null,{validators:this.getDomainToAddValidator(),asyncValidators:this.getDomainToAddAsyncValidator()}],anatomyDescriptionFallback:[null]},{validators:this.getFormValidator()}),this.defaultRoleOptions$=this.userRoles$.pipe((0,k.T)(y=>y.filter(({role_name:C})=>C!==O.x.Admin)),(0,H.F)(b.isEqual),(0,h.Q)(this.ngUnsubscribe))}ngOnInit(){if(this.setTeamFields(this.purpose),this.initLoadingState(),this.initFormListeners(),this.initCreateActionListeners(),this.initGroupCodeListeners(),this.store.dispatch(new f.hs),this.isValidPaidSubscription=this.store.selectSnapshot(F.q.isValidPaidSubscription),this.isValidPaidSubscription&&(this.store.dispatch(new B.O4),this.initJoinDomainListeners()),this.organization)this.setExistingOrganizationFormValues(this.organization);else{const i=this.store.selectSnapshot(g.k.isDeveloperReferral);this.setNewOrganizationFormValues(i)}}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initLoadingState(){(0,le.z)([this.store.select(g.k.getLoading),this.store.select(F.q.getCreating),this.store.select(F.q.getUpdating)]).pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(([i,t,o])=>{this.actionState=i||t||o,"create"===this.mode?this.actionLabel=(t?"Creating":"Create")+" Team":"manage"===this.mode&&(this.actionLabel=(o?"Saving":"Save")+" Changes"),this.changeRef.markForCheck()})}setTeamFields(i){this.purpose=i===v.j.Education?v.j.Education:v.j.Business,this.teamIndustries=Gn[this.purpose]||[],this.teamSizes=$n[this.purpose]||[],this.teamNameLabel=this.purpose===v.j.Education?"School Name":"Company Name",this.teamNamePlaceholder=`Your ${this.teamNameLabel.toLowerCase()} must be ${this.minNameLength} or more characters.`,this.teamWebsiteLabel=this.purpose===v.j.Education?"School Website":"Company Website",this.teamSizeLabel=this.purpose===v.j.Education?"# of Students":"Company Size",this.teamIndustryLabel=this.purpose===v.j.Education?"Education Level":"Company Industry"}initFormListeners(){this.form.valueChanges.pipe((0,Ba.Z)(this.formAccountLogoURL),(0,k.T)(()=>!!this.formAccountLogoURL),(0,H.F)(),(0,Y.Z)(()=>this.getOrganizationLogoModel()),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.form.patchValue({account_logo:i})}),this.defaultRoleId.valueChanges.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(i=>this.updateDefaultRoleId(i))}initCreateActionListeners(){(0,wa.y)(this.actions.pipe((0,p.xi)(f.Kg)),this.actions.pipe((0,p.xi)(B.nB))).pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new f.hs),this.store.dispatch(new M.jV),this.organizationCreated.next(),this.snackBar.open("Your team has been successfully created.")}),this.actions.pipe((0,p.xi)(B.cw),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{const t=(0,b.get)(i.error,"status",400),o=(0,se.u1)(i.error);let s="There was an error creating your team.";o?s=o:413===t&&(s="The file size of your logo is too large. Please upload a new logo and try again."),this.snackBar.open(s)})}initUpdateActionListeners(i=!0){this.actions.pipe((0,p.xi)(B.m1),(0,A.s)(1),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new f.hs),i&&this.organizationUpdated.next(),this.snackBar.open("Your team has been successfully updated.")}),this.actions.pipe((0,p.xi)(B.xX),(0,A.s)(1),(0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{const o=(0,se.u1)(t.error);this.snackBar.open(o||"There was an error updating your team.")})}initGroupCodeListeners(){this.actions.pipe((0,p.xi)(B.pv),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("New team invite code and link generated."),this.setShowGenerateCode(!1),this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(B.cz),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("There was an error generating the new team invite code and link.")})}initJoinDomainListeners(){this.joinDomains$.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.joinDomains=i,this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(B.Hi),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.store.dispatch(new B.O4)}),this.actions.pipe((0,p.xi)(B.e1,B.bE),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{i instanceof B.e1&&this.removeDomains(i.joinDomainIds),this.domainIdToRemove=null,this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(B.Uj,B.bE),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.snackBar.open(`There was an error ${i instanceof B.Uj?"adding":"removing"} the email domain.`)})}handleDeleteLogoClick(){this.form.patchValue({account_logo_url:this.createImageURLs(),account_logo:this.createAccountLogo()}),this.changeRef.markForCheck()}onSubmit(){if(this.form.valid){const i=this.form.value;"create"===this.mode?this.createTeam(i):"manage"===this.mode&&this.updateTeam(this.organization.id,i)}}handleActiveTabChange(i){this.showSubmitButton=i!==At.TeamAccess,this.changeRef.markForCheck()}setNewOrganizationFormValues(i){this.form.patchValue({purposeDescription:i?"developer":""})}setExistingOrganizationFormValues(i){const t=i.group_attributes,o=this.getTeamAccountSetting(t,"account_purpose"),s=this.getTeamAccountSetting(t,"account_field"),a=this.getTeamAccountSetting(t,"account_company_size"),r=this.getTeamAccountSetting(t,"account_company_website"),u=this.getTeamAppSetting(t,"anatomy_description_fallback"),y=i.group_logos?.human_app?.default?.logo_url??"",C=y.split(".").pop(),G=this.createImageURLs(y),N=this.createAccountLogo(y,C);this.setTeamFields(o?o.value:v.j.Business);let Bt=(0,b.get)(o,"description","");Bt="developer"===Bt?"developer":"";const Bl=(0,b.get)(u,"value",za.H.Wikipedia),Ol=this.store.selectSnapshot(F.q.getDefaultUserRole).role_id;this.form.patchValue({account_name:i.name,website:r?r.value:"",account_logo_url:G,account_logo:N,size:a?a.value:"",industry:s?s.value:"",industryDescription:s?s.value_desc:"",purposeDescription:Bt,anatomyDescriptionFallback:Bl}),this.form.patchValue({defaultRoleId:Ol},{emitEvent:!1})}handleAddDomainClick(i){i.preventDefault(),this.store.dispatch(new B.OG([this.domainToAdd.value])),this.domainToAdd.setValue(null)}handleRemoveDomainClick(i,t){i.preventDefault(),this.domainIdToRemove=t.join_domain_id,this.store.dispatch(new B.DM([t.join_domain_id]))}removeDomains(i){i.forEach(t=>{const o=this.joinDomains.findIndex(s=>s.join_domain_id===t);this.joinDomains.splice(o,1)}),this.changeRef.markForCheck()}handleGenerateCodeClick(i){i.preventDefault(),this.organization&&this.confirmGenerateCode&&this.store.dispatch(new B.eS(this.organization.id))}setShowGenerateCode(i){this.showGenerateGroupCode=i}getTeamAccountSetting(i,t){return this.organizationsService.getOrganizationAttribute(i,"account_settings",t)}getTeamAppSetting(i,t){return this.organizationsService.getOrganizationAttribute(i,"app_settings",t)}createTeam(i){const{account_name:t,account_logo:o}=i,s=this.createTeamAccountSettings(this.purpose,i);this.store.dispatch(new f.Kg({account_settings:s})),this.store.dispatch(new B.ul({account_name:t,account_settings:s,account_logo:o.default.image_src?o:void 0}))}updateTeam(i,t){const{account_name:o}=t;let{account_logo:s}=t;const a=this.createTeamAccountSettings(this.purpose,t);s=this.formAccountLogoURL?s.default.image_src?s:void 0:this.createAccountLogo("","",!0),this.store.dispatch(new B.Lo({group_id:i,account_name:o,account_settings:a,account_logo:s})),this.initUpdateActionListeners()}updateDefaultRoleId(i){this.store.dispatch(new B.Lo({group_id:this.organization.id,account_settings:[{default_user_role_id:parseInt(i,10)}]})),this.initUpdateActionListeners(!1)}createTeamAccountSettings(i,t){const{size:o,industry:s,industryDescription:a,website:r,purposeDescription:u,anatomyDescriptionFallback:y,defaultRoleId:C}=t;return(0,Fe.q)({account_purpose:{value:i,description:u},account_field:{value:s,description:"Other"===s?a:""},account_company_size:o,account_company_website:r,anatomy_description_fallback:y,default_user_role_id:C})}getFormValidator(){return i=>{const{industry:t,industryDescription:o}=i.value,s="Other"===t&&""===o;return s?{invalidIndustry:s}:null}}getDomainToAddValidator(){return i=>{const t=i.value;let o=!1,s=!1;return t&&(o=!Pr.test(t),s=this.store.selectSnapshot(F.q.getJoinDomains).map(u=>u.email_domain).includes(t)),o||s?{invalidDomainPattern:o,duplicateDomain:s}:null}}getDomainToAddAsyncValidator(){return i=>{const t=i.value;return t?(0,$a.O)(300).pipe((0,Oa.n)(()=>this.organizationsService.checkJoinDomains([t])),(0,Jt.M)(()=>this.changeRef.markForCheck()),(0,k.T)(o=>o[0]?{forbiddenDomain:!0}:null)):(0,pe.of)(null)}}getOrganizationLogoModel(){const i=this.upload?this.upload.getBlob():void 0;if(this.formAccountLogoURL&&!(0,b.isNil)(i)){const t=i.type.split("/")[1];return(0,pe.of)(i).pipe((0,Y.Z)(o=>Va.X.blobToBase64(o)),(0,k.T)(o=>this.createAccountLogo(o,t)))}return(0,pe.of)(this.createAccountLogo("",""))}createAccountLogo(i="",t="",o=!1){return{default:{delete:o?"1":"0",image_type:t,image_src:i}}}createImageURLs(i=""){if(i)return{default:i,small:i,large:i}}static#e=this.\u0275fac=function(t){return new(t||ne)(e.rXU(Ya.k),e.rXU(d.ze),e.rXU(p.il),e.rXU(p.En),e.rXU(te.UG),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:ne,selectors:[["app-team-create"]],viewQuery:function(t,o){if(1&t&&e.GBs(Ha,5),2&t){let s;e.mGM(s=e.lsd())&&(o.upload=s.first)}},inputs:{organization:"organization",purpose:"purpose"},outputs:{organizationCreated:"organizationCreated",organizationUpdated:"organizationUpdated"},decls:15,vars:5,consts:[["profileTmpl",""],["teamAccessTmpl",""],["appSettingsTmpl",""],["profileFieldInvalidMessage",""],["upload",""],["generateGroupCode",""],["removeDomainIcon",""],[1,"flex","flex-auto","create","theme-light","flex-col",3,"ngSubmit","formGroup","ngSwitch"],[1,"create__fieldset"],["type","hidden","formControlName","purposeDescription","data-test","purposeDescription"],[4,"ngSwitchCase"],[1,"flex","flex-row","justify-end","mt-5"],["type","submit","app-button","","buttonSize","md","buttonTheme","light","buttonType","primary","data-test","teamActionButton",3,"disabled","w-full",4,"ngIf"],[1,"create__fields","my-5"],[3,"ngClass",4,"ngIf"],["theme","light",3,"label"],["type","text","formControlName","account_name","data-test","account_name",1,"input",3,"minlength","maxlength"],["class","mt-1",4,"ngIf"],["formControlName","size","data-test","size",1,"input"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","url","formControlName","website","data-test","website",1,"input"],["formControlName","industry","data-test","industry",1,"input"],[3,"label","value"],["class","mt-2",4,"ngIf"],[3,"ngClass"],["theme","light","label","",3,"labelElement"],["type","image","layout","compact","theme","simple","label","Add optional logo","tooltip","Recommended image size: 238x40 pixels","formControlName","account_logo_url"],[1,"mt-1"],[3,"value"],[1,"mt-2"],["type","text","formControlName","industryDescription",1,"input"],[4,"ngTemplateOutlet"],[1,"mb-3","font-semibold","text-base"],[1,"mb-3","text-sm"],["theme","light"],["formControlName","defaultRoleId",1,"w-auto","input"],[1,"font-semibold","text-base","my-3"],[1,"!my-4"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["type","button","app-button","","buttonTheme","light","buttonType","flat",1,"block","pb-4",3,"click","uppercase"],[1,"mb-4","text-sm"],[1,"pl-3","mb-3","ml-3","create__list","text-sm"],[1,"mb-1"],[1,"font-bold"],[1,"mb-3","text-xs"],["formControlName","confirmGenerateCode"],[1,"create__confirm-generate-code"],[1,"flex","justify-end","pb-4"],["app-button","","buttonSize","md","buttonTheme","light","buttonType","default",3,"click","uppercase"],["app-button","","buttonSize","md","buttonTheme","light","buttonType","primary",1,"ml-3",3,"click","disabled","uppercase"],["size","medium","class","ml-2","render","inline",4,"ngIf"],["size","medium","render","inline",1,"ml-2"],[1,"flex","flex-row"],["type","text","placeholder","e.g. example.com","formControlName","domainToAdd",1,"input"],["type","button","app-button","","buttonTheme","light","buttonType","flat",1,"flex-none","ml-4",3,"click","disabled"],[1,"create__join-domains"],["class","flex items-center justify-between p-1 create__join-domain",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-1","create__join-domain"],[1,"pl-2","text-xs"],["buttonTheme","light","app-button","","buttonSize","sm",3,"click","disabled"],["size","small","class","ml-2","render","inline",4,"ngIf","ngIfElse"],["size","small","render","inline",1,"ml-2"],["size","sm","icon","trash"],[1,"mt-3","text-xs"],["formControlName","anatomyDescriptionFallback"],["listType","flat"],["value","wikipedia",1,"text-xs"],["value","ncit",1,"text-xs"],[1,"text-3xl","font-semibold"],[1,"mt-3","mb-5","text-base"],[1,"mt-10"],[1,"mb-5","text-xl","font-semibold"],["tabSize","medium","tabTheme","light","tabColor","red",3,"activeTabChange","tabUnderline","activeTab"],["label","Profile"],["label","Team Access"],["label","App Settings"],["type","submit","app-button","","buttonSize","md","buttonTheme","light","buttonType","primary","data-test","teamActionButton",3,"disabled"],["class","p-3 mb-3 create__profile-tab-error text-sm",4,"ngIf"],[1,"p-3","mb-3","create__profile-tab-error","text-sm"]],template:function(t,o){if(1&t){const s=e.RV6();e.j41(0,"form",7),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(o.onSubmit())}),e.j41(1,"fieldset",8),e.DNE(2,or,18,14,"ng-template",null,0,e.C5r)(4,br,18,7,"ng-template",null,1,e.C5r)(6,yr,13,1,"ng-template",null,2,e.C5r),e.nrm(8,"input",9),e.DNE(9,Tr,7,1,"ng-container",10)(10,xr,10,5,"ng-container",10),e.k0s(),e.j41(11,"div",11),e.DNE(12,jr,3,5,"button",12),e.k0s()(),e.DNE(13,Ur,1,1,"ng-template",null,3,e.C5r)}2&t&&(e.Y8G("formGroup",o.form)("ngSwitch",o.mode),e.R7$(9),e.Y8G("ngSwitchCase","create"),e.R7$(),e.Y8G("ngSwitchCase","manage"),e.R7$(2),e.Y8G("ngIf",o.showSubmitButton))},dependencies:[c.YU,c.Sq,c.bT,c.T3,c.ux,c.e1,Xe.So,gn.VT,gn._g,Lt.TL,J.q,d.qT,d.xH,d.y7,d.me,d.wz,d.BC,d.cb,d.xh,d.tU,Ge.K,d.j4,d.JD,Te.tI,w.Q,Na.c,Xa.j,La.O,I.R,Qa.H,qa.s,Ja.P,c.Jj],styles:[".create__fieldset[_ngcontent-%COMP%]{overflow:auto;padding:0 20px;margin:0 -20px}.create__join-domain[_ngcontent-%COMP%]{border-radius:4px}.create__join-domain[_ngcontent-%COMP%]:hover, .create__join-domain[_ngcontent-%COMP%]:focus{background-color:#eaeff5}.create__profile-tab-error[_ngcontent-%COMP%]{background-color:#fff3f0;border-radius:4px}.create__list[_ngcontent-%COMP%]{list-style-type:disc;line-height:20px}.create__confirm-generate-code[_ngcontent-%COMP%]{white-space:normal;display:block;font-size:.75rem;line-height:1rem}"],changeDetection:0})}De([(0,p.l6)(q.V.getHorizontalBreakpoint),Ae("design:type",_.c)],ne.prototype,"horizontalBreakpoint$",void 0),De([(0,p.l6)(g.k.getUserRoles),Ae("design:type",_.c)],ne.prototype,"userRoles$",void 0),De([(0,p.l6)(F.q.getJoinDomains),Ae("design:type",_.c)],ne.prototype,"joinDomains$",void 0),De([(0,p.l6)(F.q.getGeneratingGroupCode),Ae("design:type",_.c)],ne.prototype,"generatingGroupCode$",void 0),De([(0,p.l6)(F.q.getLoadingJoinDomains),Ae("design:type",_.c)],ne.prototype,"loadingJoinDomains$",void 0),De([(0,p.l6)(F.q.getAddingJoinDomains),Ae("design:type",_.c)],ne.prototype,"addingJoinDomains$",void 0),De([(0,p.l6)(F.q.getRemovingJoinDomains),Ae("design:type",_.c)],ne.prototype,"removingJoinDomains$",void 0);let Dr=(()=>{class n{constructor(t,o){this.dialogRef=t,this.data=o,this.ngUnsubscribe=new T.B,this.organization=o.organization}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleCancelClick(){this.closeDialog()}handleOrganizationUpdated(){this.closeDialog()}closeDialog(){this.dialogRef.close()}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(S.CP),e.rXU(S.Vh))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-team-manage-dialog"]],decls:4,vars:2,consts:[[1,"dialog"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Close",1,"dialog__close",3,"click"],["icon","times","size","lg"],[1,"dialog__team-create",3,"organizationUpdated","organization"]],template:function(o,s){1&o&&(e.j41(0,"div",0)(1,"button",1),e.bIt("click",function(){return s.handleCancelClick()}),e.nrm(2,"app-icon",2),e.k0s(),e.j41(3,"app-team-create",3),e.bIt("organizationUpdated",function(){return s.handleOrganizationUpdated()}),e.k0s()()),2&o&&(e.R7$(),e.BMQ("aria-label","Close"),e.R7$(2),e.Y8G("organization",s.organization))},dependencies:[w.Q,I.R,ne],styles:[".dialog[_ngcontent-%COMP%]{position:relative;max-height:100%;padding:24px}.dialog__close[_ngcontent-%COMP%]{position:absolute;top:24px;right:24px}.dialog__team-create[_ngcontent-%COMP%]{max-height:90vh;display:flex}@media (max-width: 480px){.dialog[_ngcontent-%COMP%]{width:100vw}.dialog__team-create[_ngcontent-%COMP%]{max-height:100vh}}"],changeDetection:0})}return n})();var Ar=l(3287),Mr=l(90699),Gr=l(27180),W=function(n){return n.Members="members",n.PendingInvites="pending-invites",n.JoinRequests="join-requests",n}(W||{});const fn={label:"Role",fields:["role"],dataTest:"roleDescending",ascending:!1},bn={label:"Status",fields:["invitationStatus"],dataTest:"invitationStatusAscending",ascending:!0},Me={label:"Name (A-Z)",fields:["name"],dataTest:"nameAscending",ascending:!0},Mt={label:"Name (Z-A)",fields:["name"],dataTest:"nameDescending",ascending:!1},Gt={label:"Email (A-Z)",fields:["email"],dataTest:"emailAscending",ascending:!0},wt={label:"Email (Z-A)",fields:["email"],dataTest:"emailDescending",ascending:!1},vn=[fn,Me,Mt,Gt,wt],wr=[bn,Me,Mt,Gt,wt],$r=[Me,Mt,Gt,wt];var at=l(3188),Br=l(4951),Or=l(37678),Nr=l.n(Or),Yr=l(59369),Vr=l(91443);const zr=["*",[["","input-after",""]]],Xr=["*","[input-after]"],Lr=n=>({"input-group--has-icon":n});function Qr(n,i){if(1&n&&e.nrm(0,"app-icon",4),2&n){const t=e.XpG();e.Y8G("icon",t.icon)}}let qr=(()=>{class n{constructor(){this.icon=""}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-input-group"]],inputs:{icon:"icon"},ngContentSelectors:Xr,decls:6,vars:4,consts:[[1,"input-group",3,"ngClass"],["class","input-group__icon",3,"icon",4,"ngIf"],[1,"input-group__main"],[1,"input-group__after"],[1,"input-group__icon",3,"icon"]],template:function(o,s){1&o&&(e.NAR(zr),e.j41(0,"div",0),e.DNE(1,Qr,1,1,"app-icon",1),e.j41(2,"div",2),e.SdG(3),e.k0s(),e.j41(4,"div",3),e.SdG(5,1),e.k0s()()),2&o&&(e.Y8G("ngClass",e.eq3(2,Lr,s.icon)),e.R7$(),e.Y8G("ngIf",s.icon))},dependencies:[c.YU,c.bT,I.R],styles:[".input-group{display:flex;position:relative}.input-group__icon{display:flex;align-items:center;justify-content:center;position:absolute;z-index:1;top:0;left:0;height:100%;width:36px}.input-group__main{flex:1 1 100%}.input-group__after{position:absolute;top:0;bottom:0;right:0;display:flex;z-index:1}.input-group--has-icon input{padding-left:36px!important}\n"],encapsulation:2,changeDetection:0})}return n})();var rt=l(59115),$t=l(65478),ie=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},oe=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};const Jr=["selectedUsersActions"],Hr=["selectedInviteeActions"],Wr=["selectedJoinRequestsActions"],Kr=["selectedUsersListActions"],Zr=["selectedInviteeListActions"],ec=["selectedJoinRequestsListActions"],tc=(n,i)=>({"team__tab--active":n,"team__tab--pointer":i});function nc(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",25),e.nI1(1,"async"),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleManageTeamAccountClick())}),e.j41(2,"div",26),e.nrm(3,"app-icon",27),e.j41(4,"div",28),e.EFF(5,"Manage"),e.k0s()()()}if(2&n){const t=e.XpG(2);e.Y8G("disabled",e.bMT(1,1,t.isSubscriptionExpired$))}}function ic(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",29),e.nI1(1,"async"),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleAddMemberClick())}),e.nrm(2,"app-icon",30),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("disabled",e.bMT(1,1,t.isSubscriptionExpired$))}}function oc(n,i){if(1&n&&(e.j41(0,"div",22),e.DNE(1,nc,6,3,"button",23)(2,ic,3,3,"button",24),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.canManageTeam),e.R7$(),e.Y8G("ngIf",t.canInviteUsers)}}function sc(n,i){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.userLimitMsg," ")}}function ac(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",58),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleClearQuery())}),e.EFF(1," Clear "),e.k0s()}}function rc(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",59),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.navigateTo(s.Sections.PendingInvites))}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG(2);e.AVh("team__tab--active",t.activeSection===t.Sections.PendingInvites),e.R7$(),e.SpI(" Pending Invites (",t.invitees.length,") ")}}function cc(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",60),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.navigateTo(s.Sections.JoinRequests))}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG(2);e.AVh("team__tab--active",t.activeSection===t.Sections.JoinRequests),e.R7$(),e.SpI(" Join Requests (",t.joinRequests.length,") ")}}function lc(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",61),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.selectAllFilteredUsers())}),e.EFF(1," Select All "),e.k0s()}2&n&&e.Y8G("uppercase",!1)}function pc(n,i){if(1&n&&(e.j41(0,"button",62)(1,"span"),e.EFF(2),e.nrm(3,"app-icon",63),e.k0s()()),2&n){const t=e.XpG(2);e.Y8G("uppercase",!1)("matMenuTriggerFor",t.activeMenu),e.R7$(2),e.SpI(" ",t.selectedUsers.size," selected ")}}function uc(n,i){1&n&&e.nrm(0,"app-divider",64)}function dc(n,i){1&n&&e.eu8(0)}function mc(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.exportUsersToCSV())}),e.EFF(1," Export to CSV "),e.k0s()}}function hc(n,i){if(1&n&&(e.qex(0),e.DNE(1,mc,2,0,"button",65),e.nI1(2,"async"),e.bVm()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",e.bMT(2,1,t.horizontalBreakpoint$)>t.horizontalBreakpoint.Medium)}}function _c(n,i){1&n&&e.eu8(0)}function gc(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.exportUsersToCSV())}),e.EFF(1," Export to CSV "),e.k0s()}}function fc(n,i){if(1&n&&(e.qex(0),e.DNE(1,gc,2,0,"button",65),e.nI1(2,"async"),e.bVm()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",e.bMT(2,1,t.horizontalBreakpoint$)>t.horizontalBreakpoint.Medium)}}function bc(n,i){1&n&&e.eu8(0)}function vc(n,i){1&n&&e.eu8(0)}function yc(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",69),e.bIt("click",function(){e.eBV(t);const s=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.handleUserActionsClick(s))}),e.nrm(1,"app-icon",70),e.k0s()}if(2&n){const t=e.XpG().$implicit,o=e.XpG(2);e.Y8G("matMenuTriggerFor",o.activeListMenu)("matMenuTriggerData",t)}}function Cc(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",66),e.bIt("click",function(s){const a=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.handleUserClick(s,a))})("mouseenter",function(){const s=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.handleUserMouseEnter(s))})("mouseleave",function(){const s=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.handleUserMouseLeave(s))}),e.nrm(1,"app-team-user",67),e.DNE(2,yc,2,2,"button",68),e.nI1(3,"async"),e.k0s()}if(2&n){const t=i.$implicit,o=e.XpG(2);e.AVh("team__user--selected",t.selected),e.R7$(),e.Y8G("user",t)("theme",o.getUserTheme(t))("showNameUnknown","members"===o.activeSection)("showEmail",o.showEmail),e.R7$(),e.Y8G("ngIf",e.bMT(3,7,o.isAdmin$)||o.canInviteUsers&&"pending-invites"===o.activeSection)}}function Tc(n,i){1&n&&e.nrm(0,"app-spinner",71)}function kc(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",31),e.nI1(1,"async"),e.j41(2,"div",32)(3,"app-input-group",33),e.nrm(4,"input",34),e.DNE(5,ac,2,0,"button",35),e.k0s()(),e.j41(6,"div",36),e.nrm(7,"app-user-notices",37),e.k0s(),e.j41(8,"div")(9,"div",38)(10,"div",39)(11,"button",40),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.canInviteUsers&&s.navigateTo(s.Sections.Members))}),e.EFF(12),e.k0s(),e.DNE(13,rc,2,3,"button",41)(14,cc,2,3,"button",42),e.k0s(),e.j41(15,"div",43)(16,"div",44),e.DNE(17,lc,2,1,"button",45),e.nI1(18,"async"),e.DNE(19,pc,4,3,"button",46),e.nI1(20,"async"),e.DNE(21,uc,1,0,"app-divider",47),e.nI1(22,"async"),e.nI1(23,"async"),e.j41(24,"mat-menu",null,6),e.DNE(26,dc,1,0,"ng-container",20),e.j41(27,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.transferSelectedUsersContent())}),e.EFF(28," Transfer Content "),e.k0s(),e.j41(29,"button",48),e.EFF(30,"Change Role"),e.k0s(),e.DNE(31,hc,3,3,"ng-container",49),e.nrm(32,"mat-divider"),e.j41(33,"button",50),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.removeSelectedUsers())}),e.EFF(34," Remove From Team "),e.k0s()(),e.j41(35,"mat-menu",null,7),e.DNE(37,_c,1,0,"ng-container",20),e.j41(38,"button",51),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.resendSelectedUsersInvites())}),e.EFF(39," Resend Invite "),e.k0s(),e.DNE(40,fc,3,3,"ng-container",49),e.k0s(),e.j41(41,"mat-menu",null,8),e.DNE(43,bc,1,0,"ng-container",20)(44,vc,1,0,"ng-container",20),e.k0s()(),e.j41(45,"div",52)(46,"app-sort",53),e.bIt("sortChange",function(s){e.eBV(t);const a=e.XpG();return e.Njj(a.handleSort(s))}),e.k0s()()()(),e.j41(47,"div",54)(48,"cdk-virtual-scroll-viewport",55),e.DNE(49,Cc,4,9,"div",56),e.k0s()()(),e.DNE(50,Tc,1,0,"app-spinner",57),e.nI1(51,"async"),e.k0s()}if(2&n){const t=e.XpG(),o=e.sdS(30),s=e.sdS(34),a=e.sdS(36);e.AVh("team--admin",e.bMT(1,29,t.isAdmin$)),e.Y8G("formGroup",t.form),e.R7$(5),e.Y8G("ngIf",t.filtering),e.R7$(6),e.Y8G("ngClass",e.l_i(41,tc,t.activeSection===t.Sections.Members&&t.canInviteUsers,!t.canInviteUsers)),e.R7$(),e.SpI(" Members (",t.users.length,") "),e.R7$(),e.Y8G("ngIf",t.showPendingInvites),e.R7$(),e.Y8G("ngIf",t.showJoinRequests),e.R7$(3),e.Y8G("ngIf",(e.bMT(18,31,t.isAdmin$)||t.canInviteUsers&&t.activeSection===t.Sections.PendingInvites)&&0===t.selectedUsers.size),e.R7$(2),e.Y8G("ngIf",(e.bMT(20,33,t.isAdmin$)||t.canInviteUsers&&t.activeSection===t.Sections.PendingInvites)&&t.selectedUsers.size>0),e.R7$(2),e.Y8G("ngIf",(e.bMT(22,35,t.isAdmin$)||t.canInviteUsers&&t.activeSection===t.Sections.PendingInvites)&&e.bMT(23,37,t.horizontalBreakpoint$)>=t.horizontalBreakpoint.Large),e.R7$(5),e.Y8G("ngTemplateOutlet",s),e.R7$(3),e.Y8G("matMenuTriggerFor",o),e.R7$(2),e.Y8G("appFlagApplication",t.envApplication.All)("appFlagApplicationMode","exclude")("appFlagApplicationNative",t.nativePlatform.All),e.R7$(6),e.Y8G("ngTemplateOutlet",s),e.R7$(3),e.Y8G("appFlagApplication",t.envApplication.All)("appFlagApplicationMode","exclude")("appFlagApplicationNative",t.nativePlatform.All),e.R7$(3),e.Y8G("ngTemplateOutlet",s),e.R7$(),e.Y8G("ngTemplateOutlet",a),e.R7$(2),e.Y8G("sortLabel","Sort Team Members")("sortOptions",t.sortOptions)("sort",t.sort),e.R7$(2),e.Y8G("itemSize",48),e.R7$(),e.Y8G("cdkVirtualForOf",t.filteredUsersToDisplay)("cdkVirtualForTrackBy",t.trackTeamNode),e.R7$(),e.Y8G("ngIf",e.bMT(51,39,t.loadingUsers$))}}function Rc(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG().email,a=e.XpG();return e.Njj(a.copyEmailClick(s))}),e.EFF(1," Copy Email "),e.k0s()}}function Fc(n,i){if(1&n&&e.DNE(0,Rc,2,0,"button",65),2&n){const t=i.email,o=e.XpG();e.Y8G("ngIf",o.showEmail&&t)}}function xc(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG().email,a=e.XpG();return e.Njj(a.copyEmailClick(s))}),e.EFF(1," Copy Email "),e.k0s()}}function Sc(n,i){if(1&n&&e.DNE(0,xc,2,0,"button",65),2&n){const t=i.email,o=e.XpG();e.Y8G("ngIf",o.showEmail&&t)}}function jc(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG().email,a=e.XpG();return e.Njj(a.copyEmailClick(s))}),e.EFF(1," Copy Email "),e.k0s()}}function Ic(n,i){if(1&n&&e.DNE(0,jc,2,0,"button",65),2&n){const t=i.email,o=e.XpG();e.Y8G("ngIf",o.showEmail&&t)}}function Uc(n,i){1&n&&e.eu8(0)}function Ec(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",72),e.bIt("click",function(){const s=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.setSelectedUsersRole(s))}),e.j41(1,"div",73)(2,"div",74),e.EFF(3),e.k0s(),e.j41(4,"div",75),e.EFF(5),e.k0s()()()}if(2&n){const t=i.$implicit;e.R7$(3),e.SpI(" ",t.role_display_name," "),e.R7$(2),e.SpI(" ",t.role_description," ")}}function Pc(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.deselectAllUsers())}),e.EFF(1,"Clear Selection"),e.k0s(),e.j41(2,"button",76),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.selectAllFilteredUsers())}),e.EFF(3," Select All "),e.k0s()}if(2&n){const t=e.XpG();e.R7$(2),e.Y8G("disabled",t.allFilteredUsersSelected)}}function Dc(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.acceptSelectedUsersJoinRequest())}),e.EFF(1,"Approve Request"),e.k0s(),e.j41(2,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.denySelectedUsersJoinRequest())}),e.EFF(3,"Deny Request"),e.k0s()}}class Q{get filtering(){return""!==this.form.value.search}get showEmail(){return this.canInviteUsers&&"pending-invites"===this.activeSection||this.canManageTeam}constructor(i,t,o,s,a,r,u,y,C,G,N,pt){this.store=i,this.actions=t,this.formBuilder=o,this.dialog=s,this.dialogs=a,this.usersService=r,this.organizationActionsService=u,this.clipboardService=y,this.changeDetectorRef=C,this.snackBar=G,this.activatedRoute=N,this.router=pt,this.horizontalBreakpoint=m.m,this.sortOptions=vn,this.sort=Me,this.envApplication=Gr.c,this.nativePlatform=Mr.I,this.ngUnsubscribe=new T.B,this.users=[],this.selectedUsers=new Set,this.themeDarkUsers=new Set,this.invitees=[],this.joinRequests=[],this.usersToDisplay=[],this.filteredUsersToDisplay=[],this.userLimitMsg="",this.canManageTeam=!1,this.canAssignRoles=!1,this.canRemoveUsers=!1,this.canInviteUsers=!1,this.canViewUsers=!1,this.canManageJoinRequests=!1,this.Sections=W,this.activeSection=W.Members,this.pendingRequesterName=""}get showPendingInvites(){return this.canInviteUsers&&this.invitees.length>0}get showJoinRequests(){return this.canManageJoinRequests&&this.joinRequests.length>0}ngOnInit(){this.initForm(),this.initEventListers(),this.initPermissions(),this.initInviteListener(),this.initJoinRequestListeners()}ngAfterViewInit(){this.activeMenu=this.selectedUsersActionsMenu,this.activeListMenu=this.selectedUsersListActionsMenu,this.initQueryParamHandling()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initQueryParamHandling(){this.activatedRoute.queryParams.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(o=>{this.switchSection(o.section||W.Members),this.changeDetectorRef.markForCheck()});const{join_request_key:i,action:t}=this.activatedRoute.snapshot.queryParams;i&&t&&this.organization$.pipe((0,D.p)(o=>!(0,b.isNil)(o)),(0,Y.Z)(()=>this.usersService.getOrganizationJoinRequests({join_request_key:i})),(0,h.Q)(this.ngUnsubscribe)).subscribe(o=>{if(0===o.join_request_count)this.snackBar.open("This request cannot be found and may have been canceled by the user.");else{const s=o.join_requests[0],a=this.store.selectSnapshot(F.q.getDefaultUserRole),r=this.JoinRequestToUserDisplay(s,a);switch(s.request_status){case at.s.Pending:this.manageJoinRequests([r],"accept"===t);break;case at.s.Accepted:this.snackBar.open(`${r.name}'s request to join your team has already been accepted.`);break;case at.s.Denied:this.snackBar.open(`${r.name}'s request to join your team has already been denied.`);break;case at.s.Expired:this.snackBar.open(`${r.name}'s request to join your team has expired.`)}}})}initForm(){this.form=this.formBuilder.group({search:[""]}),this.form.valueChanges.pipe((0,Ht.B)(125),(0,h.Q)(this.ngUnsubscribe)).subscribe(({search:i})=>{this.filteredUsersToDisplay=i?this.filterUsers(this.usersToDisplay,i,this.sort):this.usersToDisplay,this.changeDetectorRef.markForCheck()})}initEventListers(){this.organization$.pipe((0,D.p)(t=>!(0,b.isNil)(t)),(0,H.F)((t,o)=>(0,b.isEqual)(t,o)),(0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{this.userLimitMsg="Unlimited"!==t.user_limit?`The maximum number of members in your team is ${t.user_limit}.`:"This team has unlimited members.",this.refreshUsers()});const i=()=>{this.synchSelectedUsers(),this.setUsersToDisplay(),this.changeDetectorRef.markForCheck()};this.users$.pipe((0,k.T)(t=>t.map(o=>this.usersService.createUserDisplayModel(o))),(0,H.F)((t,o)=>(0,b.isEqual)(t,o)),(0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{this.users=t;const o=this.store.selectSnapshot(g.k.getUserProfile).id;this.currentUser=this.getDisplayUser(o),i()}),this.invites$.pipe((0,k.T)(t=>t.map(o=>this.usersService.createUserDisplayModel(o.invitee_user,o.invite_status))),(0,H.F)((t,o)=>(0,b.isEqual)(t,o)),(0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{this.invitees=t,i()}),(0,le.z)([this.joinRequests$,this.defaultUserRole$]).pipe((0,k.T)(([t,o])=>t.map(s=>this.JoinRequestToUserDisplay(s,o))),(0,H.F)((t,o)=>(0,b.isEqual)(t,o)),(0,D.p)((t,o)=>o>0||t.length>0),(0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{this.joinRequests=t,this.activeSection!==W.JoinRequests||this.showJoinRequests?i():this.navigateTo(W.Members)})}initPermissions(){(0,le.z)([this.users$,this.userRole$]).pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(([,i])=>{this.canManageTeam=Pe._m(i,ue.y.EditTeamAccount),this.canAssignRoles=Pe._m(i,ue.y.AssignRole),this.canRemoveUsers=Pe._m(i,ue.y.RemoveUser),this.canInviteUsers=Pe._m(i,ue.y.InviteUsers),this.canViewUsers=Pe._m(i,ue.y.ViewUsers),this.canManageJoinRequests=this.checkCanManageJoinRequests(),this.changeDetectorRef.markForCheck()}),this.store.dispatch(new f.Xb)}initInviteListener(){this.actions.pipe((0,p.xi)(M.w9),(0,h.Q)(this.ngUnsubscribe)).subscribe(({responses:i})=>{const t=i.filter(a=>"success"===a.status);0===i.filter(a=>"error"===a.status).length&&(this.snackBar.open(`${this.printCount(t.length,"invite")} have been sent`),this.refreshUsers()),this.changeDetectorRef.markForCheck()}),this.actions.pipe((0,p.xi)(M.HZ),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("There was an error sending the invites, please try again."),this.changeDetectorRef.markForCheck()})}initJoinRequestListeners(){this.actions.pipe((0,p.xi)(M.mb,M.mq),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{const o=i.count>1;this.snackBar.open(`${this.pendingRequesterName?`${this.pendingRequesterName}'s`:"The"} request${o?"s":""} to join your team ${o?"have":"has"} been ${i instanceof M.mb?"accepted":"denied"}.`),this.refreshUsers(),this.pendingRequesterName="",this.changeDetectorRef.markForCheck()}),this.actions.pipe((0,p.xi)(M.DY,M.Lh),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.snackBar.open(`There was an error ${i instanceof M.DY?"accepting":"denying"} ${this.pendingRequesterName?`${this.pendingRequesterName}'s`:"the"} request${i.count>1?"s":""}, please try again.`),this.pendingRequesterName="",this.changeDetectorRef.markForCheck()})}handleUserClick(i,t){this.store.selectSnapshot(g.k.isAdmin)&&(i.shiftKey?t.selected?this.deselectUser(t):this.selectUser(t):(this.deselectAllUsers(),this.selectUser(t)))}handleUserMouseEnter(i){this.themeDarkUsers.add(i)}handleUserMouseLeave(i){i.selected||this.themeDarkUsers.delete(i)}handleUserActionsClick(i){this.store.selectSnapshot(g.k.isAdmin)&&(this.deselectAllUsers(),this.selectUser(i))}handleManageTeamAccountClick(){const i=this.store.selectSnapshot(F.q.getOrganization);this.manageTeam(i)}handleAddMemberClick(){this.dialogs.openAddUserDialog()}handleClearQuery(){this.form.patchValue({search:""})}handleSort(i){this.sort=i,this.filteredUsersToDisplay=this.sortUsers(this.filteredUsersToDisplay,i),this.changeDetectorRef.markForCheck()}trackByUser(i,t){return t.id}filterUsers(i,t,o){const s=this.searchUsers(i,t);return[...this.sortUsers(s,o)]}searchUsers(i,t){if(!t)return i;const o=t.toLocaleLowerCase();return[...i.filter(a=>{const{name:r,email:u}=a;return[r,u].some(y=>(y||"").toLocaleLowerCase().includes(o))})]}sortUsers(i,t){const{ascending:o,fields:s}=t;return t.label===fn.label?this.sortUsers(i,Me).sort((u,y)=>(0,Ga.Ub)(u.role.role_name,y.role.role_name)*(o?1:-1)):[...(0,ln.h5)(i,s,o)]}navigateTo(i){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{section:i}})}switchSection(i){switch(this.activeSection=i,i){case W.Members:this.activeMenu=this.selectedUsersActionsMenu,this.activeListMenu=this.selectedUsersListActionsMenu,this.sortOptions=vn,this.sort=Me;break;case W.PendingInvites:this.activeMenu=this.selectedInviteeActionsMenu,this.activeListMenu=this.selectedInviteeListActionsMenu,this.sortOptions=wr,this.sort=bn;break;case W.JoinRequests:this.activeMenu=this.selectedJoinRequestsActionsMenu,this.activeListMenu=this.selectedJoinRequestsListActionsMenu,this.sortOptions=$r,this.sort=Me}this.deselectAllUsers(),this.setUsersToDisplay()}setUsersToDisplay(){switch(this.activeSection){case W.Members:this.usersToDisplay=this.users;break;case W.PendingInvites:this.usersToDisplay=this.invitees;break;case W.JoinRequests:this.usersToDisplay=this.joinRequests}this.filteredUsersToDisplay=this.filterUsers(this.usersToDisplay,this.form.value.search,this.sort)}copyEmailClick(i){this.clipboardService.copyToClipboard(i,"text").pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{this.snackBar.open(t?"Email copied successfully.":"Email not copied.")})}resendSelectedUsersInvites(){const{eid:i}=this.store.selectSnapshot(F.q.getOrganization),o=Array.from(this.selectedUsers).map(s=>({user_email:s.email,role_id:s.role.role_id}));this.store.dispatch(new M.h2(i,o))}transferSelectedUsersContent(){const i=this.store.selectSnapshot(F.q.getOrganization),t=Array.from(this.selectedUsers);this.organizationActionsService.transferUserContent(i,t).pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(o=>{this.handleUserTransferResponse(o),o&&(this.deselectAllUsers(),this.changeDetectorRef.markForCheck())})}setSelectedUsersRole(i){const t=this.store.selectSnapshot(F.q.getOrganization),o=Array.from(this.selectedUsers),s=(0,b.remove)(o,r=>r.id===this.currentUser.id);this.organizationActionsService.setUserRole(t,o,s[0]?s[0].email:"",i).pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(r=>{this.handleRoleChangeResponse(r),r.success&&this.refreshUsers()})}removeSelectedUsers(){const i=this.store.selectSnapshot(F.q.getOrganization),t=Array.from(this.selectedUsers),o=(0,b.remove)(t,a=>a.id===this.currentUser.id);this.organizationActionsService.removeUser(i,t,o[0]?o[0].email:"").pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(a=>{this.handleUserRemoveResponse(a),a.success&&this.refreshUsers()})}trackTeamNode(i,t){return t.id}selectAllFilteredUsers(){this.filteredUsersToDisplay.forEach(this.selectUser,this)}deselectAllUsers(){this.selectedUsers.forEach(this.deselectUser,this)}get allFilteredUsersSelected(){return this.filteredUsersToDisplay.length===this.selectedUsers.size}isCurrentUser(i){const t=this.store.selectSnapshot(g.k.getUserProfile).id;return i.id===t}getUserTheme(i){return this.themeDarkUsers.has(i)?"dark":"light"}exportUsersToCSV(){if(this.activeSection===W.JoinRequests)return;const i=Array.from(this.selectedUsers).map(o=>({email:o.email,name:o.name,role:o.role.role_display_name,invitationStatus:o.invitationStatus})),t=[{field:"name",label:"Name"},{field:"email",label:"Email"},{field:"role",label:"Role"}];this.activeSection===W.PendingInvites&&t.push({field:"invitationStatus",label:"Invitation Status"}),(0,Ar.H)(i,t).subscribe(o=>{const s=(new Date).toISOString().split("T")[0],a=this.activeSection===W.Members?`biodigital-members-${s}.csv`:`biodigital-invitations-${s}.csv`,r=new Blob([o],{type:"text/csv;charset=utf-8"});Nr()(r,a)})}acceptSelectedUsersJoinRequest(){this.manageJoinRequests(Array.from(this.selectedUsers),!0)}denySelectedUsersJoinRequest(){this.manageJoinRequests(Array.from(this.selectedUsers),!1)}manageJoinRequests(i,t){this.dialogs.openTeamJoinDialog(i,t).afterClosed().subscribe(o=>{o&&(1===i.length&&(this.pendingRequesterName=i[0].name),this.store.dispatch(t?new M.$k(o):new M.H7(o)))})}selectUser(i){i.selected=!0,this.selectedUsers.add(i),this.themeDarkUsers.add(i)}deselectUser(i){i.selected=!1,this.selectedUsers.delete(i),this.themeDarkUsers.delete(i)}synchSelectedUsers(){const i=new Set(this.users.map(o=>o.id)),t=Array.from(this.selectedUsers).filter(o=>i.has(o.id)).map(o=>o.id);this.deselectAllUsers(),t.forEach(o=>{const s=this.getDisplayUser(o);this.selectUser(s)})}refreshUsers(){const i=this.store.selectSnapshot(F.q.getOrganization);this.store.dispatch(new M.iW(i.id)),this.store.dispatch(new M.Kl(i.id)),this.checkCanManageJoinRequests()&&this.store.dispatch(new M.Qi)}checkCanManageJoinRequests(){return Pe._m(this.store.selectSnapshot(g.k.getUserRole),ue.y.ManageJoinRequests)&&this.store.selectSnapshot(F.q.isValidPaidSubscription)}manageTeam(i){this.dialog.open(Dr,{id:st.t.AddTeamModelDialog,panelClass:"bg-dialog-responsive",disableClose:!1,data:{organization:i},width:"640px"})}handleRoleChangeResponse(i){const t=this.getModifiedUserCount();if(i.success){const s=this.getRole(i.targetRoleId).role_display_name;this.snackBar.open(`The role of ${this.printCount(t,"user")} has been updated to ${s}.`)}else this.snackBar.open(`The role of ${this.printCount(t,"user")} was not updated.`)}handleUserRemoveResponse(i){const t=this.getModifiedUserCount(),o=1===t?"has":"have";if(i.success)if("number"==typeof i.targetUserId){const s=this.getDisplayUser(i.targetUserId),a=s.name||s.email;this.snackBar.open(`${this.printCount(t,"user")} ${o} been removed from the team and their content transferred to ${a}.`)}else this.snackBar.open(`${this.printCount(t,"user")} ${o} been removed from the team and their content deleted.`);else this.snackBar.open(`${this.printCount(t,"user")} ${o} not been removed.`)}handleUserTransferResponse(i){const t=this.selectedUsers.size,o=1===t?"has":"have";if(i){const s=this.getDisplayUser(i[0].targetUserId),a=s.name||s.email;this.snackBar.open(`The content of ${this.printCount(t,"user")} ${o} been transferred to ${a}.`)}else this.snackBar.open(`The content of ${this.printCount(t,"user")} was not transferred`)}getModifiedUserCount(){return[...this.selectedUsers].filter(i=>!this.isCurrentUser(i)).length}getDisplayUser(i){return this.users.find(t=>t.id===i)}getRole(i){return this.store.selectSnapshot(g.k.getUserRoles).find(t=>t.role_id===i)}JoinRequestToUserDisplay(i,t){const o={...i.request_user,user_role:t,developer_account:!1,developer_account_active:!1,developer_has_apps:!1};return this.usersService.createUserDisplayModel(o,void 0,i.join_request_key)}printCount(i,t){return`${i} ${1===i?t:t+"s"}`}static#e=this.\u0275fac=function(t){return new(t||Q)(e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(S.bZ),e.rXU(ee.o),e.rXU(St.g),e.rXU(sn),e.rXU(Br.W),e.rXU(e.gRc),e.rXU(te.UG),e.rXU(U.nX),e.rXU(U.Ix))};static#t=this.\u0275cmp=e.VBU({type:Q,selectors:[["app-team-manage"]],viewQuery:function(t,o){if(1&t&&(e.GBs(Jr,5),e.GBs(Hr,5),e.GBs(Wr,5),e.GBs(Kr,5),e.GBs(Zr,5),e.GBs(ec,5)),2&t){let s;e.mGM(s=e.lsd())&&(o.selectedUsersActionsMenu=s.first),e.mGM(s=e.lsd())&&(o.selectedInviteeActionsMenu=s.first),e.mGM(s=e.lsd())&&(o.selectedJoinRequestsActionsMenu=s.first),e.mGM(s=e.lsd())&&(o.selectedUsersListActionsMenu=s.first),e.mGM(s=e.lsd())&&(o.selectedInviteeListActionsMenu=s.first),e.mGM(s=e.lsd())&&(o.selectedJoinRequestsListActionsMenu=s.first)}},decls:37,vars:11,consts:[["selectedUsersListActions","matMenu"],["selectedInviteeListActions","matMenu"],["selectedJoinRequestsListActions","matMenu"],["userRolesMenu","matMenu"],["selectionActions",""],["joinRequestsActions",""],["selectedUsersActions","matMenu"],["selectedInviteeActions","matMenu"],["selectedJoinRequestsActions","matMenu"],["label","Team"],["panel-view-actions","",4,"ngIf"],[1,"mb-8","text-sm"],[1,"font-bold"],[4,"ngIf"],["class","team",3,"formGroup","team--admin",4,"ngIf"],["matMenuContent",""],["mat-menu-item","",3,"click"],["mat-menu-item","","data-test","userRoleMenuButon",3,"matMenuTriggerFor"],["mat-menu-item","","data-test","userLeaveTeamButon",1,"text-red-700",3,"click"],["mat-menu-item","","data-test","resendUserInvite",3,"click"],[4,"ngTemplateOutlet"],["mat-menu-item","","data-test","userRoleMenuItem","style","height: auto",3,"click",4,"ngFor","ngForOf"],["panel-view-actions",""],["type","button","class","mr-2","app-button","","buttonType","outline","buttonTheme","light","data-test","teamManageButton",3,"disabled","click",4,"ngIf"],["type","button","app-button","","buttonType","outline","buttonTheme","light","buttonShape","square","data-test","teamInviteMembersButton",3,"disabled","click",4,"ngIf"],["type","button","app-button","","buttonType","outline","buttonTheme","light","data-test","teamManageButton",1,"mr-2",3,"click","disabled"],[1,"flex","flex-row"],["icon","cog"],[1,"ml-2"],["type","button","app-button","","buttonType","outline","buttonTheme","light","buttonShape","square","data-test","teamInviteMembersButton",3,"click","disabled"],["icon","user-plus"],[1,"team",3,"formGroup"],[1,"mb-3"],["icon","search"],["type","text","placeholder","Search...","formControlName","search",1,"input"],["type","button","buttonSize","xs","buttonType","default","app-button","","input-after","","buttonTheme","light","class","mr-2",3,"click",4,"ngIf"],[1,"team__user-notices"],["noticeType","content_ownership_transfer"],[1,"team__header"],[1,"team__tabs"],[1,"text-xs","font-semibold","team__tab",3,"click","ngClass"],["class","text-xs font-semibold team__tab","data-test","desktopPendingInvites",3,"team__tab--active","click",4,"ngIf"],["class","text-xs font-semibold team__tab",3,"team__tab--active","click",4,"ngIf"],[1,"team__selection"],[1,"flex","items-center"],["app-button","","buttonTheme","light","buttonSize","sm","data-test","selectAllUsersButton",3,"uppercase","click",4,"ngIf"],["app-button","","buttonTheme","light","buttonSize","sm","data-test","selectedUsersActionsButton",3,"uppercase","matMenuTriggerFor",4,"ngIf"],["class","mx-1",4,"ngIf"],["mat-menu-item","",3,"matMenuTriggerFor"],[4,"appFlagApplication","appFlagApplicationMode","appFlagApplicationNative"],["mat-menu-item","",1,"text-red-700",3,"click"],["mat-menu-item","","data-test","resendSelectedUserInvites",3,"click"],["data-test","teamSort"],["buttonSize","sm",3,"sortChange","sortLabel","sortOptions","sort"],[1,"py-2","pl-2"],[1,"team__users",3,"itemSize"],["class","flex flex-row items-center team__user align-center","data-test","teamMember",3,"team__user--selected","click","mouseenter","mouseleave",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["size","huge",4,"ngIf"],["type","button","buttonSize","xs","buttonType","default","app-button","","input-after","","buttonTheme","light",1,"mr-2",3,"click"],["data-test","desktopPendingInvites",1,"text-xs","font-semibold","team__tab",3,"click"],[1,"text-xs","font-semibold","team__tab",3,"click"],["app-button","","buttonTheme","light","buttonSize","sm","data-test","selectAllUsersButton",3,"click","uppercase"],["app-button","","buttonTheme","light","buttonSize","sm","data-test","selectedUsersActionsButton",3,"uppercase","matMenuTriggerFor"],["icon","caret-down",1,"ml-1"],[1,"mx-1"],["mat-menu-item","",3,"click",4,"ngIf"],["data-test","teamMember",1,"flex","flex-row","items-center","team__user","align-center",3,"click","mouseenter","mouseleave"],[1,"flex","mr-2","grow",3,"user","theme","showNameUnknown","showEmail"],["app-button","","appEventFence","","buttonTheme","light","data-test","userActionsMenuButon",3,"matMenuTriggerFor","matMenuTriggerData","click",4,"ngIf"],["app-button","","appEventFence","","buttonTheme","light","data-test","userActionsMenuButon",3,"click","matMenuTriggerFor","matMenuTriggerData"],["icon","ellipsis-v"],["size","huge"],["mat-menu-item","","data-test","userRoleMenuItem",2,"height","auto",3,"click"],[1,"team__role-option"],["data-test","userRoleName",1,"text-xs","team__role-option-name"],["data-test","userRoleDescription",1,"mt-1","text-xs","team__role-option-description"],["mat-menu-item","",3,"click","disabled"]],template:function(t,o){if(1&t){const s=e.RV6();e.j41(0,"app-account-panel",9),e.DNE(1,oc,3,2,"div",10),e.j41(2,"div",11),e.EFF(3," You are in the "),e.j41(4,"em",12),e.EFF(5),e.nI1(6,"async"),e.k0s(),e.EFF(7," team. "),e.DNE(8,sc,2,1,"ng-container",13),e.k0s(),e.DNE(9,kc,52,44,"div",14),e.k0s(),e.j41(10,"mat-menu",null,0),e.DNE(12,Fc,1,1,"ng-template",15),e.j41(13,"button",16),e.bIt("click",function(){return e.eBV(s),e.Njj(o.transferSelectedUsersContent())}),e.EFF(14,"Transfer Content"),e.k0s(),e.j41(15,"button",17),e.EFF(16," Change Role "),e.k0s(),e.nrm(17,"mat-divider"),e.j41(18,"button",18),e.bIt("click",function(){return e.eBV(s),e.Njj(o.removeSelectedUsers())}),e.EFF(19," Remove From Team "),e.k0s()(),e.j41(20,"mat-menu",null,1),e.DNE(22,Sc,1,1,"ng-template",15),e.j41(23,"button",19),e.bIt("click",function(){return e.eBV(s),e.Njj(o.resendSelectedUsersInvites())}),e.EFF(24," Resend Invite "),e.k0s()(),e.j41(25,"mat-menu",null,2),e.DNE(27,Ic,1,1,"ng-template",15)(28,Uc,1,0,"ng-container",20),e.k0s(),e.j41(29,"mat-menu",null,3),e.DNE(31,Ec,6,2,"button",21),e.nI1(32,"async"),e.k0s(),e.DNE(33,Pc,4,1,"ng-template",null,4,e.C5r)(35,Dc,4,0,"ng-template",null,5,e.C5r)}if(2&t){let s;const a=e.sdS(30),r=e.sdS(36);e.R7$(),e.Y8G("ngIf",o.canManageTeam||o.canInviteUsers),e.R7$(4),e.JRh(null==(s=e.bMT(6,7,o.organization$))?null:s.name),e.R7$(3),e.Y8G("ngIf",o.canViewUsers),e.R7$(),e.Y8G("ngIf",o.canViewUsers),e.R7$(6),e.Y8G("matMenuTriggerFor",a),e.R7$(13),e.Y8G("ngTemplateOutlet",r),e.R7$(3),e.Y8G("ngForOf",e.bMT(32,9,o.roles$))}},dependencies:[c.YU,c.Sq,c.bT,c.T3,d.me,d.BC,d.cb,d.j4,d.JD,w.Q,it.L,Yr.Y,I.R,Te.tI,pn.K,Vr.h,qr,ot.o,Rt,rt.kk,rt.fb,rt.z8,rt.Cp,J.q,$t.yg,$t.E$,$t.d6,z,c.Jj],styles:[".team__user-notices[_ngcontent-%COMP%]{overflow:auto;max-height:192px}.team__users[_ngcontent-%COMP%]{height:calc(100vh - 380px)}.team__user[_ngcontent-%COMP%]{margin:4px 0;padding:8px;border-radius:4px;-webkit-user-select:none;user-select:none}.team__user[_ngcontent-%COMP%]:hover, .team__user[_ngcontent-%COMP%]:focus{background-color:#eaeff5}.team__user--selected[_ngcontent-%COMP%]{background-color:#d6ecff}.team__user--selected[_ngcontent-%COMP%]:hover, .team__user--selected[_ngcontent-%COMP%]:focus{background-color:#add6ff}.team--admin[_ngcontent-%COMP%]   .team__user[_ngcontent-%COMP%]{cursor:pointer}.team--admin[_ngcontent-%COMP%]   .team__user--current[_ngcontent-%COMP%]{cursor:initial}.team__role-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:auto;line-height:normal;max-width:240px;white-space:normal;padding:8px 0}.team__role-option-name[_ngcontent-%COMP%]{color:#131c2a}.team__role-option-description[_ngcontent-%COMP%]{color:#374a68}.team__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-bottom:solid #eaeff5;border-width:1px}.team__selection[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.team__tab[_ngcontent-%COMP%]{background:none;border:none;padding:10px 4px;cursor:pointer;color:#374a68}.team__tab[_ngcontent-%COMP%]:not(:last-child){margin-right:12px}.team__tab--active[_ngcontent-%COMP%]{border-bottom:solid #2d72dc;border-width:3px;color:#131c2a}.team__tab--pointer[_ngcontent-%COMP%]{cursor:default}@media (max-width: 959px){.team__header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.team__selection[_ngcontent-%COMP%]{padding-top:16px;width:100%}}"],changeDetection:0})}ie([(0,p.l6)(F.q.getOrganization),oe("design:type",_.c)],Q.prototype,"organization$",void 0),ie([(0,p.l6)(F.q.isSubscriptionExpired),oe("design:type",_.c)],Q.prototype,"isSubscriptionExpired$",void 0),ie([(0,p.l6)(he.e.getUsers),oe("design:type",_.c)],Q.prototype,"users$",void 0),ie([(0,p.l6)(he.e.getInvites),oe("design:type",_.c)],Q.prototype,"invites$",void 0),ie([(0,p.l6)(he.e.getUsersLoading),oe("design:type",_.c)],Q.prototype,"loadingUsers$",void 0),ie([(0,p.l6)(g.k.getUserProfile),oe("design:type",_.c)],Q.prototype,"userProfile$",void 0),ie([(0,p.l6)(g.k.getUserRole),oe("design:type",_.c)],Q.prototype,"userRole$",void 0),ie([(0,p.l6)(g.k.getUserRoles),oe("design:type",_.c)],Q.prototype,"roles$",void 0),ie([(0,p.l6)(g.k.isAdmin),oe("design:type",_.c)],Q.prototype,"isAdmin$",void 0),ie([(0,p.l6)(q.V.getHorizontalBreakpoint),oe("design:type",_.c)],Q.prototype,"horizontalBreakpoint$",void 0),ie([(0,p.l6)(he.e.getPendingOrganizationJoinRequests),oe("design:type",_.c)],Q.prototype,"joinRequests$",void 0),ie([(0,p.l6)(F.q.getDefaultUserRole),oe("design:type",_.c)],Q.prototype,"defaultUserRole$",void 0);var Ac=l(58686);let Mc=(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-team-premium-user"]],decls:6,vars:1,consts:[["label","Team",1,"team"],[1,"team__features"],[1,"mt-4","flex","flex-col","items-center"],["type","button","appSupportLink","","buttonTheme","light","app-button","","buttonType","primary",3,"uppercase"]],template:function(o,s){1&o&&(e.j41(0,"app-account-panel",0)(1,"div",1),e.nrm(2,"app-team-features"),e.k0s(),e.j41(3,"div",2)(4,"button",3),e.EFF(5," Contact Us "),e.k0s()()()),2&o&&(e.R7$(4),e.Y8G("uppercase",!1))},dependencies:[w.Q,Ac.R,hn.W,z],styles:[".team__features[_ngcontent-%COMP%]{padding:32px}@media (max-width: 480px){.team__features[_ngcontent-%COMP%]{padding:16px}}"],changeDetection:0})}return n})();var yn=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},Cn=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};function Gc(n,i){1&n&&e.nrm(0,"app-team-manage")}function wc(n,i){1&n&&e.nrm(0,"app-team-premium-user")}function $c(n,i){1&n&&e.nrm(0,"app-team-free-user")}class Oe{constructor(){this.userType=Tt.I}ngOnInit(){}static#e=this.\u0275fac=function(t){return new(t||Oe)};static#t=this.\u0275cmp=e.VBU({type:Oe,selectors:[["app-team-page"]],decls:5,vars:6,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,o){1&t&&(e.qex(0,0),e.nI1(1,"async"),e.DNE(2,Gc,1,0,"app-team-manage",1)(3,wc,1,0,"app-team-premium-user",1)(4,$c,1,0,"app-team-free-user",1),e.bVm()),2&t&&(e.Y8G("ngSwitch",e.bMT(1,4,o.userType$)),e.R7$(2),e.Y8G("ngSwitchCase",o.userType.Team),e.R7$(),e.Y8G("ngSwitchCase",o.userType.Premium),e.R7$(),e.Y8G("ngSwitchCase",o.userType.Free))},dependencies:[c.ux,c.e1,Ee,Q,Mc,c.Jj],changeDetection:0})}yn([(0,p.l6)(g.k.getUserType),Cn("design:type",_.c)],Oe.prototype,"userType$",void 0),yn([(0,p.l6)(F.q.getOrganization),Cn("design:type",_.c)],Oe.prototype,"organization$",void 0);var Bc=l(40621),Oc=l(49206);const Nc=["optionEl"],Yc=["*"];function Vc(n,i){if(1&n&&e.nrm(0,"app-icon",14),2&n){const t=e.XpG();e.Y8G("icon",t.icon)}}function zc(n,i){if(1&n&&(e.j41(0,"div",15),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.tag," ")}}function Xc(n,i){if(1&n&&(e.j41(0,"p",16),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.description," ")}}function Lc(n,i){if(1&n&&(e.j41(0,"div",17),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.tag," ")}}function Qc(n,i){if(1&n&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.R7$(),e.SpI(" ",t," ")}}function qc(n,i){if(1&n&&(e.j41(0,"div",18)(1,"p"),e.EFF(2),e.k0s(),e.j41(3,"ul",19),e.DNE(4,Qc,2,1,"li",20),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.JRh(t.content.title),e.R7$(2),e.Y8G("ngForOf",t.content.content)}}let Tn=(()=>{class n extends Oc.Z{constructor(){super(...arguments),this.compact=!0,this.responseSelected=new e.bkB}ngOnInit(){}handleResponseClicked(){this.responseSelected.emit()}focus(t){this.optionEl&&this.optionEl.nativeElement.focus()}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=e.xGo(n)))(s||n)}})();static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-question-response"]],viewQuery:function(o,s){if(1&o&&e.GBs(Nc,7),2&o){let a;e.mGM(a=e.lsd())&&(s.optionEl=a.first)}},inputs:{title:"title",description:"description",tag:"tag",icon:"icon",content:"content",selected:"selected",compact:"compact",value:"value",responsive:"responsive"},outputs:{responseSelected:"responseSelected"},features:[e.Jv_([{provide:d.kq,useExisting:(0,e.Rfq)(()=>n),multi:!0}]),e.Vt3],ngContentSelectors:Yc,decls:17,vars:16,consts:[["optionEl",""],["data-test","questionResponseLabel",1,"response","flex","flex-col",3,"pointerup"],["type","radio",1,"sr-only",3,"formControl","value"],[1,"flex","flex-row","justify-between","items-center"],["aria-hidden","true",1,"flex","flex-col","flex-auto"],[1,"response__title","flex","flex-row"],["class","response__title-icon mr-2",3,"icon",4,"ngIf"],[1,"flex-auto"],["class","response__tag mt-2",4,"ngIf"],["class","response__description mt-2",4,"ngIf"],["aria-hidden","true",1,"flex","flex-row","items-center"],["class","response__tag",4,"ngIf"],[1,"response__icon","ml-3",3,"icon"],["class","response__content ml-8 mt-1","aria-hidden","","data-test","questionResponseContent",4,"ngIf"],[1,"response__title-icon","mr-2",3,"icon"],[1,"response__tag","mt-2"],[1,"response__description","mt-2"],[1,"response__tag"],["aria-hidden","","data-test","questionResponseContent",1,"response__content","ml-8","mt-1"],[1,"response__content-list"],[4,"ngFor","ngForOf"]],template:function(o,s){if(1&o){const a=e.RV6();e.NAR(),e.j41(0,"label",1,0),e.bIt("pointerup",function(){return e.eBV(a),e.Njj(s.handleResponseClicked())}),e.nrm(2,"input",2),e.j41(3,"div",3)(4,"div",4)(5,"div",5),e.DNE(6,Vc,1,1,"app-icon",6),e.j41(7,"span",7),e.EFF(8),e.k0s()(),e.DNE(9,zc,2,1,"div",8)(10,Xc,2,1,"p",9),e.j41(11,"div"),e.SdG(12),e.k0s()(),e.j41(13,"div",10),e.DNE(14,Lc,2,1,"div",11),e.nrm(15,"app-icon",12),e.k0s()(),e.DNE(16,qc,5,2,"div",13),e.k0s()}2&o&&(e.AVh("response--selected",s.selected)("response--compact",s.compact),e.R7$(2),e.Y8G("formControl",s.control)("value",s.value),e.BMQ("aria-label",s.title),e.R7$(4),e.Y8G("ngIf",s.icon),e.R7$(2),e.JRh(s.title),e.R7$(),e.Y8G("ngIf",s.tag&&s.responsive),e.R7$(),e.Y8G("ngIf",s.description),e.R7$(4),e.Y8G("ngIf",s.tag&&!s.responsive),e.R7$(),e.xc7("visibility",s.selected?"visible":"hidden"),e.Y8G("icon",s.selected?"check-circle":"times-circle"),e.R7$(),e.Y8G("ngIf",s.selected&&s.content))},dependencies:[c.Sq,c.bT,d.me,d.Fm,d.BC,d.l_,I.R],styles:[".response[_ngcontent-%COMP%]{padding:20px 24px;border:1px solid #96a8c0;box-sizing:border-box;border-radius:4px;color:#374a68;cursor:pointer}.response__title[_ngcontent-%COMP%]{color:#1c2a3f;font-weight:600;font-size:1rem;line-height:1.5rem}.response__title-icon[_ngcontent-%COMP%]{flex:0 0 24px}.response__description[_ngcontent-%COMP%]{color:#374a68;font-size:.875rem;line-height:1.25rem}.response__tag[_ngcontent-%COMP%]{color:#61779e;font-size:.75rem;line-height:1rem;text-transform:uppercase;font-weight:600;white-space:nowrap}.response__icon[_ngcontent-%COMP%]{flex:0 0 48px;color:#2d72dc;white-space:nowrap;font-size:1.25rem;line-height:1.75rem}.response__content[_ngcontent-%COMP%]{color:#283853;font-size:.875rem;line-height:1.25rem}.response__content-list[_ngcontent-%COMP%]{list-style-type:disc;margin-left:24px}.response[_ngcontent-%COMP%]:not(.response--selected):hover, .response[_ngcontent-%COMP%]:not(.response--selected):focus{border-color:#61779e;color:#1c2a3f;background-color:#f9fafd}.response--selected[_ngcontent-%COMP%]{border-color:#2d72dc;box-shadow:0 0 0 1px #2d72dc}.response--selected[_ngcontent-%COMP%]   .response__tag[_ngcontent-%COMP%]{color:#2d72dc}.response--compact[_ngcontent-%COMP%]   .response__title[_ngcontent-%COMP%]{font-weight:400;font-size:.875rem;line-height:1.25rem}.response[_ngcontent-%COMP%]:focus-within{outline:#2d72dc solid 2px!important}"],changeDetection:0})}return n})();var Jc=l(18617),Hc=l(37737);function Wc(n,i){if(1&n&&(e.j41(0,"p",9),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.question.hint," ")}}function Kc(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",10)(1,"app-account-question-response",11),e.bIt("responseSelected",function(){const s=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.handleResponseSelected(s))}),e.k0s()()}if(2&n){const t=i.$implicit,o=i.index,s=e.XpG(2);e.AVh("question__item--first",0===o),e.BMQ("aria-label",t.value)("data-test-value",t.value),e.R7$(),e.Y8G("title",t.label||t.value)("description",t.hint)("tag",t.tag)("icon",t.icon)("content",t.content)("compact",!t.content)("selected",s.isResponseSelected(t))("value",t)("responsive",s.responsive)}}function Zc(n,i){if(1&n&&e.nrm(0,"input",14),2&n){const t=e.XpG(3);e.BMQ("placeholder",t.question.label||"")}}function el(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",10)(1,"app-account-question-response",12),e.bIt("responseSelected",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleOtherResponseSelected())}),e.DNE(2,Zc,1,1,"input",13),e.k0s()()}if(2&n){const t=e.XpG(2);e.BMQ("aria-label","Other")("data-test-value","Other"),e.R7$(),e.Y8G("title","Other")("selected",t.isOtherSelected)("value",t.getOtherResponse())("responsive",t.responsive),e.R7$(),e.Y8G("ngIf",t.isOtherSelected)}}function tl(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleContinueClick())}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("buttonType",t.isAdvanceEnabled?"primary":"flat")("uppercase",!1)("disabled",!t.isAdvanceEnabled),e.BMQ("aria-disabled",!t.isAdvanceEnabled),e.R7$(),e.SpI(" ",t.advanceLabel," ")}}function nl(n,i){if(1&n&&(e.j41(0,"fieldset",1)(1,"legend",2),e.EFF(2),e.k0s(),e.DNE(3,Wc,2,1,"p",3),e.j41(4,"div",4),e.DNE(5,Kc,2,13,"div",5)(6,el,3,7,"div",6),e.k0s(),e.j41(7,"div",7),e.DNE(8,tl,2,5,"button",8),e.k0s()()),2&n){const t=e.XpG();e.Y8G("formGroup",t.form),e.BMQ("data-test-value",t.question.account_setting),e.R7$(2),e.SpI(" ",t.question.label," "),e.R7$(),e.Y8G("ngIf",t.question.hint),e.R7$(2),e.Y8G("ngForOf",t.question.responses),e.R7$(),e.Y8G("ngIf",t.other),e.R7$(2),e.Y8G("ngIf",t.selectedResponse)}}let kn=(()=>{class n{get selectedResponse(){return this._selectedResponse}set selectedResponse(t){this._selectedResponse=t,this.changeRef.markForCheck()}get isOtherSelected(){return 0===this.question.responses.length||this.isResponseSelected({value:"Other"})}get isOtherValid(){const{description:t}=this.form.value;return""!==t}get isAdvanceEnabled(){return!!this.advanceEnabled&&(this.isOtherSelected?this.isOtherValid:!(0,b.isNil)(this.selectedResponse))}get shown(){return this._shown}set shown(t){this._shown=t,t&&setTimeout(()=>this.focus()),this.changeRef.markForCheck()}get responseSize(){return(this.question?.responses?.length??0)+(this.other?1:0)}constructor(t,o){this.formBuilder=t,this.changeRef=o,this.responseSelected=new e.bkB,this.advanceSelected=new e.bkB,this.other=!0,this.advanceLabel="Continue",this.advanceEnabled=!0,this._shown=!1,this.isLast=!1,this.ngUnsubscribe=new T.B,this.initForm()}ngOnInit(){this.initFormListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.keyManager=new Jc.Bu(this.responsesList)}focus(t){if(this.keyManager){let o=0;this.isOtherSelected?o=this.responseSize-1:this.question?.responses&&(o=this.question.responses.findIndex(a=>this.isResponseSelected(a)));const s=Math.max(o,0);this.keyManager.setActiveItem(s)}}initForm(){this.form=this.formBuilder.group({response:[null,d.k0.required],description:[""]})}initFormListener(){this.form.valueChanges.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{this.selectedResponse=t.response,this.changeRef.markForCheck()}),this.form.get("description").valueChanges.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.selectedResponse=this.getOtherResponse()})}clearSelection(){this.selectedResponse=null}handleResponseSelected(t){this.selectedResponse=t,this.isLast||this.responseSelected.next(this.selectedResponse)}handleOtherResponseSelected(){this.selectedResponse=this.getOtherResponse()}handleContinueClick(){this.advanceSelected.next(this.selectedResponse)}isResponseSelected(t){return this.selectedResponse&&this.selectedResponse.value===t.value}getOtherResponse(){const{description:t}=this.form.value;return{value:"Other",description:t}}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(d.ze),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-question"]],viewQuery:function(o,s){if(1&o&&e.GBs(Tn,5),2&o){let a;e.mGM(a=e.lsd())&&(s.responsesList=a)}},inputs:{question:"question",other:"other",advanceLabel:"advanceLabel",advanceEnabled:"advanceEnabled",selectedResponse:"selectedResponse",shown:"shown",isLast:"isLast",responsive:"responsive"},outputs:{responseSelected:"responseSelected",advanceSelected:"advanceSelected"},decls:1,vars:1,consts:[["class","question flex flex-col","data-test","question",3,"formGroup",4,"ngIf"],["data-test","question",1,"question","flex","flex-col",3,"formGroup"],["data-test","questionLabel",1,"question__label","font-semibold"],["class","question__hint mt-3","data-test","questionHint",4,"ngIf"],[1,"flex","flex-col","my-10"],["class","question__item","data-test","questionResponse",3,"question__item--first",4,"ngFor","ngForOf"],["class","question__item","data-test","questionResponse",4,"ngIf"],[1,"flex","flex-col","items-end"],["class","w-full","app-button","","buttonSize","xl","buttonTheme","light","data-test","questionAdvanceButton",3,"buttonType","uppercase","disabled","click",4,"ngIf"],["data-test","questionHint",1,"question__hint","mt-3"],["data-test","questionResponse",1,"question__item"],["formControlName","response",3,"responseSelected","title","description","tag","icon","content","compact","selected","value","responsive"],["formControlName","response",3,"responseSelected","title","selected","value","responsive"],["type","text","class","input my-2","formControlName","description","appAutoFocus","",4,"ngIf"],["type","text","formControlName","description","appAutoFocus","",1,"input","my-2"],["app-button","","buttonSize","xl","buttonTheme","light","data-test","questionAdvanceButton",1,"w-full",3,"click","buttonType","uppercase","disabled"]],template:function(o,s){1&o&&e.DNE(0,nl,9,7,"fieldset",0),2&o&&e.Y8G("ngIf",s.shown)},dependencies:[c.Sq,c.bT,d.me,d.BC,d.cb,d.j4,d.JD,w.Q,Hc.B,Tn],styles:[".question__label[_ngcontent-%COMP%]{color:#131c2a;font-size:1.5rem;line-height:2rem}.question__hint[_ngcontent-%COMP%]{color:#283853;font-size:1rem;line-height:1.5rem}.question__item[_ngcontent-%COMP%]{margin-top:20px}.question__item--first[_ngcontent-%COMP%]{margin-top:0}@media (max-width: 959px){.question__label[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem}}"],changeDetection:0})}return n})();function il(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",5),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleBackClick())}),e.nrm(1,"app-button-icon",6),e.k0s()}}function ol(n,i){if(1&n){const t=e.RV6();e.j41(0,"app-account-question",7),e.bIt("responseSelected",function(s){const a=e.eBV(t),r=a.$implicit,u=a.index,y=e.XpG();return e.Njj(y.handleResponseSelected(r,s,u))})("advanceSelected",function(s){const a=e.eBV(t),r=a.$implicit,u=a.index,y=e.XpG();return e.Njj(y.handleAdvanceSelected(r,s,u))}),e.k0s()}if(2&n){const t=i.$implicit,o=i.index,s=e.XpG();e.Y8G("shown",o===s.selectedIndex)("question",t)("other",t.other)("advanceLabel",s.advanceLabel)("isLast",o===s.questions.length-1)("responsive",s.responsive)}}let sl=(()=>{class n{get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._selectedIndex=t}constructor(){this.questions=[],this.advanceLabel="Continue",this.handleQuestionResponse=new e.bkB,this._selectedIndex=0}ngOnInit(){}handleResponseSelected(t,o,s){s===this.questions.length-1||this.emitResponse(t,o)}handleAdvanceSelected(t,o,s){this.emitResponse(t,o)}handleNextClick(){this.nextQuestion()}handleBackClick(){this.prevQuestion()}nextQuestion(){const t=Math.max(0,this.questions.length-1);this.selectedIndex=Math.min(t,this.selectedIndex+1)}prevQuestion(){this.selectedIndex=Math.max(0,this.selectedIndex-1)}emitResponse(t,o){this.handleQuestionResponse.next({question:t,response:o})}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-question-wizard"]],inputs:{questions:"questions",advanceLabel:"advanceLabel",responsive:"responsive"},outputs:{handleQuestionResponse:"handleQuestionResponse"},decls:5,vars:2,consts:[[1,"questions"],["app-button","","buttonTheme","light","class","questions__back",3,"click",4,"ngIf"],[1,"questions__content"],[1,"questions__list"],[3,"shown","question","other","advanceLabel","isLast","responsive","responseSelected","advanceSelected",4,"ngFor","ngForOf"],["app-button","","buttonTheme","light",1,"questions__back",3,"click"],["icon","arrow-left","iconType","solid","iconPlacement","left","label","Go Back"],[3,"responseSelected","advanceSelected","shown","question","other","advanceLabel","isLast","responsive"]],template:function(o,s){1&o&&(e.j41(0,"div",0),e.DNE(1,il,2,0,"button",1),e.j41(2,"div",2)(3,"div",3),e.DNE(4,ol,1,6,"app-account-question",4),e.k0s()()()),2&o&&(e.R7$(),e.Y8G("ngIf",s.selectedIndex>0),e.R7$(3),e.Y8G("ngForOf",s.questions))},dependencies:[c.Sq,c.bT,w.Q,Bc.T,kn],styles:[".questions__back[_ngcontent-%COMP%]{margin-left:-16px}.questions__step[_ngcontent-%COMP%]{color:#96a8c0;font-weight:500;font-size:.875rem;line-height:1.25rem}@media (max-width: 959px){.questions__step[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}}"],changeDetection:0})}return n})();var Rn=l(71263),Fn=l(81127),ct=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},lt=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};const al=["wizard"];class ke{constructor(i,t,o,s,a,r){this.authRoutingService=i,this.authService=t,this.store=o,this.router=s,this.activatedRoute=a,this.changeRef=r,this.breakPoints=m.m,this.selectedAccountSetting={},this.questionnaireStarted=!1,this.isReturningUser=!1,this.questions=[],this.ngUnsubscribe=new T.B}ngOnInit(){this.initQuestionnaire()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initQuestionnaire(){const i=this.authService.checkProfileIncomplete();(0,le.z)([this.userProfile$,i,this.organizationSettings$,this.accountSettings$]).pipe((0,D.p)(([t])=>!(0,b.isNil)(t)),(0,h.Q)(this.ngUnsubscribe)).subscribe(([t,o,s,a])=>{const{is_new_user:r,is_team_user:u}=o.messageData;this.completeProfileMessage=o,this.isReturningUser=!0!==r,this.intent=u?ye.Team:ye.Individual;const y=this.activatedRoute.snapshot.queryParams.question,C="true"===this.activatedRoute.snapshot.queryParams.welcome;this.selectedAccountSetting=(0,Fe.j)([...a,...s]);const G=(0,b.get)(this.selectedAccountSetting,"account_purpose.value",v.j.PersonalUse),N=(0,b.get)(this.selectedAccountSetting,"account_field.value");this.questions=this.getCustomQueryQuestions(t,y,G,N,this.isReturningUser,C),this.changeRef.markForCheck()})}handleQuestionResponse(i){const{question:t,response:o}=i,s=t.account_setting,a=this.activatedRoute.snapshot.queryParams.question,r="true"===this.activatedRoute.snapshot.queryParams.welcome,u=this.store.selectSnapshot(g.k.getUserProfile);this.questionnaireStarted=!0,"account_purpose"===t.account_setting&&(this.selectedAccountSetting={}),this.selectedAccountSetting[s]=o;const y=(0,b.get)(this.selectedAccountSetting,"account_purpose.value"),C=(0,b.get)(this.selectedAccountSetting,"account_field.value"),G=this.isReturningUser;if(this.questions.length>1)if(a)this.questions=this.getCustomQueryQuestions(u,a,y,C,this.isReturningUser,r);else if(this.questions.length>1)switch(y){case v.j.PersonalUse:this.questions=this.getPersonalUseQuestions(G);break;case v.j.Education:this.questions=this.getEducationQuestions(G);break;case v.j.Business:this.questions=this.getBusinessQuestions(G,C)}this.wizard.selectedIndex===this.questions.length-1?this.completeQuestionnaire():this.nextQuestion(),this.changeRef.markForCheck()}handleSkipClick(){this.completeQuestionnaire()}nextQuestion(){this.wizard.nextQuestion()}completeQuestionnaire(){const i=(0,Fe.q)(this.selectedAccountSetting,!0);if(this.store.selectSnapshot(g.k.isDeveloperReferral)){const C=i.find(G=>"account_purpose"in G);C&&"account_purpose"in C&&(C.account_purpose={...C.account_purpose,description:"developer"})}this.updateAccountSettings(...i);const t=(0,b.get)(this.completeProfileMessage,"messageSeenId");(0,b.isNil)(t)||this.store.dispatch(new f.P(t));const o=this.store.selectSnapshot(F.q.hasOrganization),s=this.store.selectSnapshot(F.q.getOrganizationProfile),a=!(0,b.isNil)(s),r=this.store.selectSnapshot(g.k.getUserRole),u=(0,Pe._m)(r,ue.y.InviteUsers);this.intent===ye.Team&&o&&u&&!a&&!this.isReturningUser?this.authRoutingService.navigateToTeamInvite(!0):this.router.navigate(["/"])}getPersonalUseQuestions(i){const t=this.store.selectSnapshot(g.k.getUserProfile);return[this.createPurposeQuestion(i),xe(t,v.j.PersonalUse,"",this.isReturningUser)]}getEducationQuestions(i){const t=this.store.selectSnapshot(g.k.getUserProfile);return[this.createPurposeQuestion(i),xe(t,v.j.Education,"",this.isReturningUser),nt(v.j.Education)]}getBusinessQuestions(i,t){const o=this.store.selectSnapshot(g.k.getUserProfile);return[this.createPurposeQuestion(i),nt(v.j.Business),xe(o,v.j.Business,t,this.isReturningUser)]}updateAccountSettings(...i){this.store.dispatch(new f.Kg({account_settings:i}))}createPurposeQuestion(i){return bt(this.store.selectSnapshot(g.k.getUserProfile),i)}getCustomQueryQuestions(i,t,o,s,a,r){switch(t){case Fn.w.Role:return[xe(i,o,s,a,r)];case Fn.w.Field:return[nt(o),xe(i,o,s,a)];default:return[...this.getPersonalUseQuestions(a)]}}static#e=this.\u0275fac=function(t){return new(t||ke)(e.rXU(Z.y),e.rXU(Rn.u),e.rXU(p.il),e.rXU(U.Ix),e.rXU(U.nX),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:ke,selectors:[["app-account-questionnaire"]],viewQuery:function(t,o){if(1&t&&e.GBs(al,7),2&t){let s;e.mGM(s=e.lsd())&&(o.wizard=s.first)}},decls:4,vars:4,consts:[["wizard",""],[1,"account","theme-light"],[3,"handleQuestionResponse","questions","responsive"]],template:function(t,o){if(1&t){const s=e.RV6();e.j41(0,"div",1)(1,"app-account-question-wizard",2,0),e.nI1(3,"async"),e.bIt("handleQuestionResponse",function(r){return e.eBV(s),e.Njj(o.handleQuestionResponse(r))}),e.k0s()()}2&t&&(e.R7$(),e.Y8G("questions",o.questions)("responsive",e.bMT(3,2,o.horizontalBreakpoint$)<o.breakPoints.Medium))},dependencies:[sl,c.Jj],changeDetection:0})}ct([(0,p.l6)(q.V.getHorizontalBreakpoint),lt("design:type",_.c)],ke.prototype,"horizontalBreakpoint$",void 0),ct([(0,p.l6)(g.k.getUserProfile),lt("design:type",_.c)],ke.prototype,"userProfile$",void 0),ct([(0,p.l6)(g.k.getUserAccountSettings),lt("design:type",_.c)],ke.prototype,"accountSettings$",void 0),ct([(0,p.l6)(F.q.getOrganizationAccountSettings),lt("design:type",_.c)],ke.prototype,"organizationSettings$",void 0);var xn=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},Sn=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};function rl(n,i){if(1&n){const t=e.RV6();e.j41(0,"app-account-question",2),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("advanceSelected",function(s){e.eBV(t);const a=e.XpG();return e.Njj(a.handleResponseSelected(s))}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("shown",!0)("question",t.question)("other",t.question.other)("selectedResponse",t.selectedResponse)("advanceLabel","Continue")("advanceEnabled",!e.bMT(1,8,t.updating$))("isLast",!0)("responsive",e.bMT(2,10,t.horizontalBreakpoint$)<t.breakPoints.Medium)}}const cl=[v.j.Education,v.j.Business];class Ne{constructor(i,t,o,s,a,r,u){this.actions=i,this.authService=t,this.authRoutingService=o,this.store=s,this.activatedRoute=a,this.changeRef=r,this.snackBar=u,this.breakPoints=m.m,this.ngUnsubscribe=new T.B}ngOnInit(){this.initQuestions(),this.initProfileUpdateRedirect()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleResponseSelected(i){this.updateAccountPurpose(i)}initQuestions(){const i=this.authService.checkProfileIncomplete();(0,le.z)([this.store.select(g.k.getUserProfile),i]).pipe((0,D.p)(([t])=>!(0,b.isNil)(t)),(0,h.Q)(this.ngUnsubscribe)).subscribe(([t,o])=>{const{is_new_user:s}=o.messageData;this.setQuestion(t,!0!==s,t.premium_account,t.organizations.length>0),this.changeRef.markForCheck()})}initProfileUpdateRedirect(){this.actions.pipe((0,p.xi)(f.ZD),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.store.dispatch(new f.hs)}),this.actions.pipe((0,p.xi)(f.ZD),(0,Y.Z)(()=>this.actions.pipe((0,p.xi)(f.Cy))),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.handleProfileUpdateSuccess(i.userProfile)}),this.actions.pipe((0,p.xi)(f._h),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.handleProfileUpdateFailure(i)})}setQuestion(i,t,o,s){const{queryParams:a}=this.activatedRoute.snapshot,r=a.purpose,u=a.intent,y=this.store.selectSnapshot(g.k.isDeveloperReferral);let C;C=s||y?ye.Team:o?ye.Individual:u,this.question=bt(i,t,C),this.selectedResponse=this.question.responses.find(G=>G.value===r),this.changeRef.markForCheck()}handleProfileUpdateSuccess(i){const o=(0,Fe.j)(i.account_settings),s=(0,b.get)(o,"account_purpose.value",v.j.PersonalUse);cl.includes(s)?this.handleBusinessPurposeSelected(s):this.handlePersonalPurposeSelected()}handleProfileUpdateFailure(i){const t=(0,b.get)(i.error,"error.error.message","There was an error updating your profile.");this.snackBar.open(t)}handlePersonalPurposeSelected(){this.authRoutingService.navigateToQuestionnaire(!0,!0,v.j.PersonalUse)}handleBusinessPurposeSelected(i){this.authRoutingService.navigateToTeamCreation(i)}updateAccountPurpose(i){this.store.dispatch(new f.Kg({account_settings:[{account_purpose:i}]}))}static#e=this.\u0275fac=function(t){return new(t||Ne)(e.rXU(p.En),e.rXU(Rn.u),e.rXU(Z.y),e.rXU(p.il),e.rXU(U.nX),e.rXU(e.gRc),e.rXU(te.UG))};static#t=this.\u0275cmp=e.VBU({type:Ne,selectors:[["app-account-creation"]],decls:2,vars:1,consts:[["role","status",1,"account","theme-light"],[3,"shown","question","other","selectedResponse","advanceLabel","advanceEnabled","isLast","responsive","advanceSelected",4,"ngIf"],[3,"advanceSelected","shown","question","other","selectedResponse","advanceLabel","advanceEnabled","isLast","responsive"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.DNE(1,rl,3,12,"app-account-question",1),e.k0s()),2&t&&(e.R7$(),e.Y8G("ngIf",o.question))},dependencies:[c.bT,kn,c.Jj],changeDetection:0})}xn([(0,p.l6)(g.k.getProfileUpdating),Sn("design:type",_.c)],Ne.prototype,"updating$",void 0),xn([(0,p.l6)(q.V.getHorizontalBreakpoint),Sn("design:type",_.c)],Ne.prototype,"horizontalBreakpoint$",void 0);class Ke{constructor(i,t,o){this.authRoutingService=i,this.store=t,this.activatedRoute=o,this.ngUnsubscribe=new T.B,this.purpose=this.activatedRoute.snapshot.queryParams.purpose}ngOnInit(){this.initActionListeners(),this.store.dispatch(new f.hs)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initActionListeners(){this.organization$.pipe((0,D.p)(i=>!(0,b.isNil)(i)),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.handleOrganizationCreated()})}handleOrganizationCreated(){this.authRoutingService.navigateToQuestionnaire(!0,!1)}static#e=this.\u0275fac=function(t){return new(t||Ke)(e.rXU(Z.y),e.rXU(p.il),e.rXU(U.nX))};static#t=this.\u0275cmp=e.VBU({type:Ke,selectors:[["app-team-create-page"]],decls:2,vars:1,consts:[[1,"team-create","theme-light"],[3,"organizationCreated","purpose"]],template:function(t,o){1&t&&(e.j41(0,"form",0)(1,"app-team-create",1),e.bIt("organizationCreated",function(){return o.handleOrganizationCreated()}),e.k0s()()),2&t&&(e.R7$(),e.Y8G("purpose",o.purpose))},dependencies:[d.qT,d.cb,d.cV,ne],styles:[".team-create__skip[_ngcontent-%COMP%]{color:#283853;font-size:.875rem;line-height:1.25rem}"],changeDetection:0})}!function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);s>3&&a&&Object.defineProperty(i,t,a)}([(0,p.l6)(F.q.getOrganization),function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",i)}(0,_.c)],Ke.prototype,"organization$",void 0);var ul=l(23609);function dl(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",5),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleBackClick())}),e.j41(1,"div",6),e.nrm(2,"app-icon",7),e.j41(3,"div",8),e.EFF(4,"Back"),e.k0s()()()}}let ml=(()=>{class n{constructor(t,o,s,a){this.store=t,this.router=o,this.activatedRoute=s,this.changeRef=a,this.ngUnsubscribe=new T.B,this.store.dispatch(new f.hs)}ngOnInit(){this.initRouteHandling()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initRouteHandling(){(0,P.h)(this.activatedRoute.url,this.router.events.pipe((0,D.p)(t=>t instanceof U.wF))).pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.returnTo=this.activatedRoute.snapshot.queryParams.returnTo,this.changeRef.markForCheck()})}handleBackClick(){this.router.navigateByUrl(this.returnTo)}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(p.il),e.rXU(U.Ix),e.rXU(U.nX),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-account-workflow-master"]],decls:6,vars:1,consts:[[1,"master"],[1,"master__art"],[1,"master__content-wrapper","flex","flex-col","items-center","flex-auto"],["class","master__nav","app-button","","buttonTheme","light",3,"click",4,"ngIf"],[1,"master__content-container","flex","flex-col","justify-center","items-stretch","flex-auto"],["app-button","","buttonTheme","light",1,"master__nav",3,"click"],[1,"flex","flex-row"],["icon","arrow-left"],[1,"ml-2"]],template:function(o,s){1&o&&(e.j41(0,"div",0),e.nrm(1,"app-login-art",1),e.j41(2,"div",2),e.DNE(3,dl,5,0,"button",3),e.j41(4,"div",4),e.nrm(5,"router-outlet"),e.k0s()()()),2&o&&(e.R7$(3),e.Y8G("ngIf",s.returnTo))},dependencies:[c.bT,U.n3,w.Q,I.R,ul.Y],styles:[".master[_ngcontent-%COMP%]{background:#fff;display:flex;flex-direction:row;height:100vh;width:100%}.master__art[_ngcontent-%COMP%]{flex-basis:480px}.master__content-wrapper[_ngcontent-%COMP%]{overflow:auto;margin:auto;padding:40px;height:100%}.master__content-container[_ngcontent-%COMP%]{width:100%;max-width:560px;padding:12px}.master__nav[_ngcontent-%COMP%]{align-self:flex-start;margin:0 20px 24px 0}@media (max-width: 959px){.master__art[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){.master__content-wrapper[_ngcontent-%COMP%]{padding:20px}.master__content-container[_ngcontent-%COMP%]{padding:4px}}"],changeDetection:0})}return n})();var hl=l(21091),jn=function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);return s>3&&a&&Object.defineProperty(i,t,a),a},In=function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,i)};function _l(n,i){if(1&n){const t=e.RV6();e.j41(0,"app-team-invite",3),e.nI1(1,"async"),e.bIt("inviteSent",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleInviteComplete())})("inviteCancelled",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleInviteComplete())}),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("organization",e.bMT(1,2,t.organization$))("layout","block")}}class Ye{constructor(i,t,o){this.store=i,this.router=t,this.authRoutingService=o,this.ngUnsubscribe=new T.B}ngOnInit(){this.userProfile$.pipe((0,D.p)(i=>!(0,b.isNil)(i)),(0,A.s)(1),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{i.organizations&&i.organizations.length>0||this.handleInviteComplete()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleInviteComplete(){this.store.selectSnapshot(g.k.isDeveloperReferral)?this.authRoutingService.navigateToDeveloperWelcome():this.router.navigate(["/explore"])}static#e=this.\u0275fac=function(t){return new(t||Ye)(e.rXU(p.il),e.rXU(U.Ix),e.rXU(Z.y))};static#t=this.\u0275cmp=e.VBU({type:Ye,selectors:[["app-team-invite-page"]],decls:7,vars:3,consts:[[1,"text-3xl","font-semibold"],[1,"text-base","mt-3","mb-10"],["sentText","Send invites","cancelText","Skip this step",3,"organization","layout","inviteSent","inviteCancelled",4,"ngIf"],["sentText","Send invites","cancelText","Skip this step",3,"inviteSent","inviteCancelled","organization","layout"]],template:function(t,o){1&t&&(e.j41(0,"div")(1,"h3",0),e.EFF(2,"Invite members to join your team"),e.k0s(),e.j41(3,"p",1),e.EFF(4,"If you'd like, you can always send invites later."),e.k0s(),e.DNE(5,_l,2,4,"app-team-invite",2),e.nI1(6,"async"),e.k0s()),2&t&&(e.R7$(5),e.Y8G("ngIf",e.bMT(6,1,o.organization$)))},dependencies:[c.bT,hl.G,c.Jj],changeDetection:0})}jn([(0,p.l6)(g.k.getUserProfile),In("design:type",_.c)],Ye.prototype,"userProfile$",void 0),jn([(0,p.l6)(F.q.getOrganization),In("design:type",_.c)],Ye.prototype,"organization$",void 0);var gl=l(29160);function vl(n,i){if(1&n&&(e.j41(0,"a",3),e.nI1(1,"async"),e.EFF(2," Take me to the developer site "),e.k0s()),2&n){const t=e.XpG();e.Y8G("href",e.bMT(1,1,t.developerPortalSignInUrl$),e.B4B)}}class Ze{constructor(i){this.store=i,this.ngUnsubscribe=new T.B,this.developerPortalSignInUrl$=new gl.t("")}ngOnInit(){this.store.dispatch(new f.hs(!0)),this.userProfile$.pipe((0,h.Q)(this.ngUnsubscribe),(0,D.p)(i=>!(0,b.isNil)(i))).subscribe(i=>{this.developerPortalSignInUrl$.next(i.developer_portal_signin_url)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static#e=this.\u0275fac=function(t){return new(t||Ze)(e.rXU(p.il))};static#t=this.\u0275cmp=e.VBU({type:Ze,selectors:[["app-team-developer"]],decls:8,vars:6,consts:[[1,"text-3xl","font-semibold"],[1,"text-base","mt-3","mb-10"],["class","button button--primary button--large mb-5",3,"href",4,"ngIf"],[1,"button","button--primary","button--large","mb-5",3,"href"]],template:function(t,o){if(1&t&&(e.j41(0,"div")(1,"div",0),e.EFF(2),e.nI1(3,"async"),e.k0s(),e.j41(4,"div",1),e.EFF(5," Now that you've set up your account, navigate to the developer site to finish activating your developer access and begin building custom 3D experiences. "),e.k0s(),e.DNE(6,vl,3,3,"a",2),e.nI1(7,"async"),e.k0s()),2&t){let s;e.R7$(2),e.SpI("Welcome ",null==(s=e.bMT(3,2,o.userProfile$))?null:s.first_name,"!"),e.R7$(4),e.Y8G("ngIf",e.bMT(7,4,o.developerPortalSignInUrl$))}},dependencies:[c.bT,c.Jj],changeDetection:0})}!function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);s>3&&a&&Object.defineProperty(i,t,a)}([(0,p.l6)(g.k.getUserProfile),function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",i)}(0,_.c)],Ze.prototype,"userProfile$",void 0);var yl=l(48701),Un=l(17215);function kl(n,i){if(1&n&&(e.j41(0,"h1",4),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.headerText," ")}}function Rl(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",5),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleContinueClick())}),e.EFF(1),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("buttonType",t.skip?"flat":"primary")("uppercase",!1),e.R7$(),e.SpI(" ",t.buttonText," ")}}class et{constructor(i,t){this.authRoutingService=i,this.storageService=t,this.skip=!0,this.headerText="",this.buttonText="",this.requestOrganizationsText="It looks like of some of your teammates are already using the BioDigital Human. Submit a request to start collaborating.",this.joinRequestText="Your request has been sent to the team's administrators. While you wait for approval, continue to the next step to start exploring the BioDigital Human on your own."}ngOnInit(){this.storageService.setLocalItem(Un.UT.UserJoinPromptSeen,!0)}handleContinueClick(){this.skip?this.authRoutingService.navigateToWorkflow():this.authRoutingService.navigateToQuestionnaire(!0,!1,v.j.PersonalUse)}handlePendingJoinRequest(i){this.skip=void 0===i,this.buttonText=this.skip?"No thanks":"Continue",this.headerText=this.skip?"We found your team":"Request sent"}handleRequestOrganizationsSuccess(i){0===i.length&&this.authRoutingService.navigateToWorkflow()}static#e=this.\u0275fac=function(t){return new(t||et)(e.rXU(Z.y),e.rXU(Un.n$))};static#t=this.\u0275cmp=e.VBU({type:et,selectors:[["app-team-join-page"]],decls:6,vars:8,consts:[[1,"team-join","flex","flex-col"],["class","team-join__title mt-4 text-3xl font-semibold",4,"ngIf"],["theme","light",1,"mb-4",3,"pendingJoinRequestSuccess","requestOrganizationsSuccess","requestOrganizationsText","joinRequestText"],["class","w-full","app-button","","buttonSize","xl","buttonTheme","light",3,"buttonType","uppercase","click",4,"ngIf"],[1,"team-join__title","mt-4","text-3xl","font-semibold"],["app-button","","buttonSize","xl","buttonTheme","light",1,"w-full",3,"click","buttonType","uppercase"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.DNE(1,kl,2,1,"h1",1),e.nI1(2,"async"),e.j41(3,"app-team-join",2),e.bIt("pendingJoinRequestSuccess",function(a){return o.handlePendingJoinRequest(a)})("requestOrganizationsSuccess",function(a){return o.handleRequestOrganizationsSuccess(a)}),e.k0s(),e.DNE(4,Rl,2,3,"button",3),e.nI1(5,"async"),e.k0s()),2&t&&(e.R7$(),e.Y8G("ngIf",!1===e.bMT(2,4,o.requesting$)),e.R7$(2),e.Y8G("requestOrganizationsText",o.requestOrganizationsText)("joinRequestText",o.joinRequestText),e.R7$(),e.Y8G("ngIf",!1===e.bMT(5,6,o.requesting$)))},dependencies:[c.bT,w.Q,_n.H,c.Jj],styles:[".team-join__title[_ngcontent-%COMP%]{color:#131c2a}"],changeDetection:0})}!function(n,i,t,o){var r,s=arguments.length,a=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,i,t,o);else for(var u=n.length-1;u>=0;u--)(r=n[u])&&(a=(s<3?r(a):s>3?r(i,t,a):r(i,t))||a);s>3&&a&&Object.defineProperty(i,t,a)}([(0,p.l6)(he.e.getRequesting),function(n,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",i)}(0,_.c)],et.prototype,"requesting$",void 0);const Fl=[{path:"questionnaire",redirectTo:"workflow/questionnaire"},{path:"workflow",component:ml,canActivate:[ae.q,fe.Y],data:{title:"Welcome"},children:[{path:"",component:Ne,pathMatch:"full"},{path:"team",children:[{path:"create",component:Ke,pathMatch:"full",data:{title:"Create Your Team"}},{path:"invite",component:Ye,pathMatch:"full",data:{title:"Invite Members"}},{path:"developer",component:Ze,pathMatch:"full",data:{title:"App Configuration"}},{path:"join",component:et,pathMatch:"full",data:{title:"Join Your Team"}}]},{path:"questionnaire",component:ke,pathMatch:"full",data:{title:"Questionnaire"}}]},{path:"",component:re.m,canActivate:[ae.q,fe.Y],data:{fixedHeight:!1},children:[{path:"",component:X,children:[{path:"",redirectTo:"/account/profile",pathMatch:"full"},{path:"profile",component:Be,pathMatch:"full",data:{title:"Account"}},{path:"team",component:Oe,pathMatch:"full",data:{title:"Team"}},{path:"settings",component:Ue,pathMatch:"full",data:{title:"Settings"}},{path:"internal",canLoad:[yl.InternalDevGuard],canActivate:[ae.q],loadChildren:()=>Promise.resolve().then(l.bind(l,48701)).then(n=>n.InternalDevModule)}]}]}];let En=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[U.iI.forChild(Fl),U.iI]})}return n})();var xl=l(28107),Pn=l(72026),Sl=l(81488),jl=l(89630);let Il=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[c.MD,jl.$,Pn.o]})}return n})();var Ul=l(11818),El=l(3272),Pl=l(21604),Dl=l(45189),Al=l(35286),Ml=l(13403),Gl=l(36918),wl=l(29644);let $l=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[c.MD,En,d.YN,d.X1,xl.R,Pl.G,Ul.C,Pn.o,El.D,Sl.f,Il,Dl.G,Al.y2.forChild(),Ml.j,Gl.e,wl.R,En]})}return n})()},48701:(ut,de,l)=>{l.r(de),l.d(de,{InternalDevGuard:()=>_t,InternalDevModule:()=>tt});var c=l(60177),U=l(38645),ae=l(24418),fe=l(12215),re=l(36110),p=l(40215),b=l(4158),T=l(11040),_=l(3287),D=l(49204),A=l(26655),Y=l(22397),h=l(27180),Z=l(37678),g=l.n(Z),m=l(54438),q=l(21626),ee=l(21007),e=l(77242),x=l(41640),j=l(18111);function I(E,X){if(1&E&&(m.j41(0,"app-list-item")(1,"b",3),m.EFF(2,"AWS Voice ID:"),m.k0s(),m.EFF(3),m.k0s()),2&E){const P=X.$implicit;m.R7$(3),m.SpI(" ",null==P?null:P.voiceId," ")}}function ce(E,X){if(1&E&&(m.j41(0,"app-list-item")(1,"b",3),m.EFF(2,"Alias Locale ID:"),m.k0s(),m.EFF(3),m.k0s()),2&E){const P=m.XpG().$implicit,k=m.XpG();m.R7$(3),m.SpI(" ",k.localeNormalizationMap[P.id]," ")}}function K(E,X){if(1&E&&(m.j41(0,"app-list-item")(1,"b",3),m.EFF(2),m.k0s(),m.j41(3,"app-list",7)(4,"app-list-item")(5,"b",3),m.EFF(6,"ID:"),m.k0s(),m.EFF(7),m.k0s(),m.j41(8,"app-list-item")(9,"b",3),m.EFF(10,"URL Language:"),m.k0s(),m.EFF(11),m.k0s(),m.j41(12,"app-list-item")(13,"b",3),m.EFF(14,"Supported Applications:"),m.k0s(),m.EFF(15),m.k0s(),m.DNE(16,I,4,1,"app-list-item",8)(17,ce,4,1,"app-list-item",8),m.k0s()()),2&E){const P=X.$implicit,k=m.XpG();m.R7$(2),m.JRh(P.title),m.R7$(5),m.SpI(" ",P.id," "),m.R7$(4),m.SpI(" ",P.lang," "),m.R7$(4),m.SpI(" ",k.formatApplications(P.applications)," "),m.R7$(),m.Y8G("ngIf",k.localeIdVoices[P.id]),m.R7$(),m.Y8G("ngIf",k.localeNormalizationMap[P.id])}}let Re=(()=>{class E{constructor(P,k){this.http=P,this.changeRef=k,this.allLocales=T.N9,this.localeIds=T.N9.map(O=>O.id),this.localeNormalizationMap=T.WF,this.localeIdVoices=T.N9.reduce((O,f)=>(O[f.id]=(0,Y.P)(f.id),O),{}),this.engineVersion=A.A,this.apiVersion=A.m}ngOnInit(){}exportTranslationsClick(){const P=(0,b.KS)(this.http,this.localeIds).pipe((0,re.T)(k=>k.filter(O=>!(0,D.isNil)(O))));(0,p._)(P).then(k=>{this.exportTranslations(k),this.changeRef.markForCheck()})}exportTranslations(P){const k=function be(E){const X={};return E.forEach(P=>{const{locale:k,translations:O}=P,f=T.WF[k]??k;Object.entries(O).forEach(([F,J])=>{X[F]=X[F]??{},X[F][f]=J})}),X}(P),O=T.N9.filter(J=>J.id!==T.q.id),f=[{label:T.q.id,field:T.q.id},...O.map(J=>{const d=T.WF[J.id]??J.id;return{label:d,field:d}})],F=Object.values(k).sort((J,d)=>{const le=J[T.q.id].trim(),H=d[T.q.id].trim();return le.localeCompare(H)});(0,_.H)(F,f).subscribe(J=>{const le=`human-translations-export-${(new Date).toISOString().split("T")[0]}.csv`,H=new Blob([J],{type:"text/csv;charset=utf-8"});g()(H,le)})}formatApplications(P){return P.map(k=>k===h.c.All?"All":k).join(", ")}static#e=this.\u0275fac=function(k){return new(k||E)(m.rXU(q.Qq),m.rXU(m.gRc))};static#t=this.\u0275cmp=m.VBU({type:E,selectors:[["app-internal-info-component"]],decls:16,vars:3,consts:[[1,"info"],["label","Engine"],["listType","default",1,"text-base","my-1"],[1,"font-bold"],["label","Internationalization (Translations)"],[4,"ngFor","ngForOf"],["app-button","","buttonType","primary","buttonTheme","light",1,"my-2",3,"click"],["listType","default",1,"text-sm"],[4,"ngIf"]],template:function(k,O){1&k&&(m.j41(0,"div",0)(1,"app-panel",1)(2,"app-list",2)(3,"app-list-item")(4,"b",3),m.EFF(5,"Version: "),m.k0s(),m.EFF(6),m.k0s(),m.j41(7,"app-list-item")(8,"b",3),m.EFF(9,"API Version: "),m.k0s(),m.EFF(10),m.k0s()()(),m.j41(11,"app-panel",4)(12,"app-list",2),m.DNE(13,K,18,6,"app-list-item",5),m.k0s(),m.j41(14,"button",6),m.bIt("click",function(){return O.exportTranslationsClick()}),m.EFF(15," Export Translations "),m.k0s()()()),2&k&&(m.R7$(6),m.SpI(" ",O.engineVersion,""),m.R7$(4),m.SpI(" ",O.apiVersion,""),m.R7$(3),m.Y8G("ngForOf",O.allLocales))},dependencies:[c.Sq,c.bT,ee.Q,e.s,x.P,j.g],changeDetection:0})}return E})();var dt=l(11818),mt=l(21604);const ht=[{path:"",component:Re}];let _t=(()=>{class E{constructor(){}canLoad(P){return ae.c.deploy!==fe.Z.Production}static#e=this.\u0275fac=function(k){return new(k||E)};static#t=this.\u0275prov=m.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),tt=(()=>{class E{static#e=this.\u0275fac=function(k){return new(k||E)};static#t=this.\u0275mod=m.$C({type:E});static#n=this.\u0275inj=m.G2t({imports:[U.iI.forChild(ht),c.MD,mt.G,dt.C]})}return E})()},291:(ut,de,l)=>{l.d(de,{J:()=>ee});var c=l(54438),U=l(92014),ae=l(2573),fe=l(38165),re=l(16823),p=l(11040),b=l(82542),T=l(21007),_=l(60177),D=l(26779),A=l(59115);function Z(e,x){if(1&e&&(c.nrm(0,"img",8),c.nI1(1,"async"),c.nI1(2,"async")),2&e){let j;const I=c.XpG(2);c.Y8G("src",I.getLocaleFlag(c.bMT(1,2,I.userLocale$)),c.B4B),c.BMQ("alt",null==(j=c.bMT(2,4,I.userLocale$))?null:j.title)}}function g(e,x){if(1&e&&(c.j41(0,"button",3)(1,"div",4),c.DNE(2,Z,3,6,"img",5),c.j41(3,"span",6),c.EFF(4),c.nI1(5,"async"),c.k0s(),c.nrm(6,"app-icon",7),c.k0s()()),2&e){const j=c.XpG(),I=c.sdS(3);c.Y8G("buttonSize",j.buttonSize())("buttonTheme",j.buttonTheme())("buttonType",j.buttonType())("matMenuTriggerFor",I),c.BMQ("aria-label","Select your locale"),c.R7$(2),c.Y8G("ngIf",j.showFlag()),c.R7$(2),c.JRh(j.displayLocale(c.bMT(5,7,j.userLocale$)))}}function m(e,x){if(1&e){const j=c.RV6();c.j41(0,"button",9),c.bIt("click",function(){const ce=c.eBV(j).$implicit,K=c.XpG();return c.Njj(K.handleLocaleSelection(ce))}),c.j41(1,"span",4),c.nrm(2,"img",8),c.EFF(3),c.nI1(4,"uppercase"),c.k0s()()}if(2&e){const j=x.$implicit,I=c.XpG();c.BMQ("aria-label",j.title)("data-test",I.localesDataTestMap[j.lang]),c.R7$(2),c.Y8G("src",I.getLocaleFlag(j),c.B4B),c.BMQ("alt",j.title),c.R7$(),c.Lme(" ",j.title," (",c.bMT(4,6,j.lang),") ")}}var q=function(e){return e.Full="full",e.Title="title",e.Lang="lang",e}(q||{});class ee{constructor(x){this.store=x,this.locales=p.IB,this.localesDataTestMap=p.A8,this.buttonType=(0,c.hFB)("default"),this.buttonTheme=(0,c.hFB)(b.P.Dark),this.buttonSize=(0,c.hFB)("md"),this.localeFormat=(0,c.hFB)(q.Full),this.showFlag=(0,c.hFB)(!0)}handleLocaleSelection(x){this.store.selectSnapshot(re.k.getUserLocale)!==x&&this.store.dispatch(new fe.aD(x,!0))}getLocaleFlag(x){return`/assets/images/flags/${x.country}.svg`}displayLocale(x){switch(this.localeFormat()){case q.Full:return`${x.title} (${x.lang})`;case q.Title:return x.title;case q.Lang:return x.lang}}static#e=this.\u0275fac=function(j){return new(j||ee)(c.rXU(U.il))};static#t=this.\u0275cmp=c.VBU({type:ee,selectors:[["app-locales"]],inputs:{buttonType:[1,"buttonType"],buttonTheme:[1,"buttonTheme"],buttonSize:[1,"buttonSize"],localeFormat:[1,"localeFormat"],showFlag:[1,"showFlag"]},decls:5,vars:4,consts:[["localeOptions","matMenu"],["app-button","",3,"buttonSize","buttonTheme","buttonType","matMenuTriggerFor",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["app-button","",3,"buttonSize","buttonTheme","buttonType","matMenuTriggerFor"],[1,"flex","items-center"],["class","mr-2",3,"src",4,"ngIf"],[1,"font-semibold"],["icon","caret-down",1,"ml-1"],[1,"mr-2",3,"src"],["mat-menu-item","",3,"click"]],template:function(j,I){1&j&&(c.DNE(0,g,7,9,"button",1),c.nI1(1,"async"),c.j41(2,"mat-menu",null,0),c.DNE(4,m,5,8,"button",2),c.k0s()),2&j&&(c.Y8G("ngIf",c.bMT(1,2,I.userLocale$)),c.R7$(4),c.Y8G("ngForOf",I.locales))},dependencies:[T.Q,_.Sq,_.bT,D.R,A.kk,A.fb,A.Cp,_.Jj,_.Pc],changeDetection:0})}!function(e,x,j,I){var be,ce=arguments.length,K=ce<3?x:null===I?I=Object.getOwnPropertyDescriptor(x,j):I;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)K=Reflect.decorate(e,x,j,I);else for(var Re=e.length-1;Re>=0;Re--)(be=e[Re])&&(K=(ce<3?be(K):ce>3?be(x,j,K):be(x,j))||K);ce>3&&K&&Object.defineProperty(x,j,K)}([(0,U.l6)(re.k.getUserLocale),function(e,x){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",x)}(0,ae.c)],ee.prototype,"userLocale$",void 0)},88041:(ut,de,l)=>{l.d(de,{K:()=>T});var c=l(54438),U=l(21007),ae=l(60177),fe=l(26779),re=l(59115);function p(_,D){if(1&_&&(c.j41(0,"button",3)(1,"span",4)(2,"span",5),c.EFF(3,"Sort:"),c.k0s(),c.EFF(4),c.nrm(5,"app-icon",6),c.k0s()()),2&_){const A=c.XpG(),Y=c.sdS(2);c.Y8G("buttonSize",A.buttonSize())("uppercase",!1)("matMenuTriggerFor",Y),c.BMQ("aria-label",A.sortLabel()),c.R7$(4),c.SpI("",A.sort().label," ")}}function b(_,D){if(1&_){const A=c.RV6();c.j41(0,"button",7),c.bIt("click",function(){const h=c.eBV(A).$implicit,Z=c.XpG();return c.Njj(Z.handleSort(h))}),c.EFF(1),c.k0s()}if(2&_){const A=D.$implicit;c.BMQ("data-test-value",A.dataTest)("aria-label","Sort by "+A.label),c.R7$(),c.SpI(" ",A.label," ")}}let T=(()=>{class _{constructor(){this.sort=(0,c.hFB)(),this.sortOptions=(0,c.hFB)([]),this.sortLabel=(0,c.hFB)(),this.sortChange=(0,c.CGW)(),this.buttonSize=(0,c.hFB)()}handleSort(A){this.sortChange.emit(A)}static#e=this.\u0275fac=function(Y){return new(Y||_)};static#t=this.\u0275cmp=c.VBU({type:_,selectors:[["app-sort"]],inputs:{sort:[1,"sort"],sortOptions:[1,"sortOptions"],sortLabel:[1,"sortLabel"],buttonSize:[1,"buttonSize"]},outputs:{sortChange:"sortChange"},decls:4,vars:2,consts:[["sortActions","matMenu"],["app-button","","buttonTheme","light","data-test","gallerySortBy",3,"buttonSize","uppercase","matMenuTriggerFor",4,"ngIf"],["mat-menu-item","","data-test","gallerySortByItem",3,"click",4,"ngFor","ngForOf"],["app-button","","buttonTheme","light","data-test","gallerySortBy",3,"buttonSize","uppercase","matMenuTriggerFor"],[1,"whitespace-nowrap"],[1,"hidden","mr-1","font-semibold","sm:inline-block"],["icon","caret-down",1,"ml-1"],["mat-menu-item","","data-test","gallerySortByItem",3,"click"]],template:function(Y,h){1&Y&&(c.DNE(0,p,6,5,"button",1),c.j41(1,"mat-menu",null,0),c.DNE(3,b,2,3,"button",2),c.k0s()),2&Y&&(c.Y8G("ngIf",h.sort()),c.R7$(3),c.Y8G("ngForOf",h.sortOptions()))},dependencies:[U.Q,ae.Sq,ae.bT,fe.R,re.kk,re.fb,re.Cp],changeDetection:0})}return _})()}}]);