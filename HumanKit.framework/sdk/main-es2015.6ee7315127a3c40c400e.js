(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("ION/")},INDF:function(e,t,n){var l;!function(i){"use strict";var a=i.HTMLCanvasElement&&i.HTMLCanvasElement.prototype,o=i.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),s=o&&i.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),r=i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder,c=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,u=(o||r)&&i.atob&&i.ArrayBuffer&&i.Uint8Array&&function(e){var t,n,l,i,a,u,p,d,b;if(!(t=e.match(c)))throw new Error("invalid data URI");for(n=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),l=!!t[4],i=e.slice(t[0].length),a=l?atob(i):decodeURIComponent(i),u=new ArrayBuffer(a.length),p=new Uint8Array(u),d=0;d<a.length;d+=1)p[d]=a.charCodeAt(d);return o?new Blob([s?p:u],{type:n}):((b=new r).append(u),b.getBlob(n))};i.HTMLCanvasElement&&!a.toBlob&&(a.mozGetAsFile?a.toBlob=function(e,t,n){var l=this;setTimeout((function(){e(n&&a.toDataURL&&u?u(l.toDataURL(t,n)):l.mozGetAsFile("blob",t))}))}:a.toDataURL&&u&&(a.toBlob=a.msToBlob?function(e,t,n){var l=this;setTimeout((function(){e((t&&"image/png"!==t||n)&&a.toDataURL&&u?u(l.toDataURL(t,n)):l.msToBlob(t))}))}:function(e,t,n){var l=this;setTimeout((function(){e(u(l.toDataURL(t,n)))}))})),void 0===(l=(function(){return u}).call(t,n,t,e))||(e.exports=l)}(window)},"ION/":function(e,t,n){"use strict";n.r(t);var l=n("8Y7J"),i=function(e){return e.Loft="loft",e.Studio="studio",e.Viewer="viewer",e.All="",e}({}),a=function(e){return e.Bookmark="bookmark",e.Module="module",e}({}),o=function(e){return e.Local="Local",e.QA="QA",e.Staging="Staging",e.Production="Production",e}({}),s=function(e){return e.Web="web",e.SDK="sdk",e}({});const r={production:!0,assetDomain:"assets-human.biodigital.com",supportEmail:"support@biodigital.com",googleAuthKey:"66261904577-061oin26uo7sor0vrqc8dnn105irq82n.apps.googleusercontent.com",facebookAuthKey:"218801781466301",googleAnalyticsId:"UA-1141985-29",rollbarToken:"dd70f513aa0740668070fa3fd62b33a0",recaptchaKey:"6LdvZvcUAAAAAM0Z1St9WQXwvSYd__hMUY2WZ6um",application:i.Viewer,deploy:o.Production,platform:s.SDK,exportType:a.Bookmark};var c=n("IheW"),u=n("lJxs");class p{intercept(e,t){return t.handle(e).pipe(Object(u.a)(e=>(e instanceof c.h&&e.body&&e.body.hasOwnProperty("results")&&(e=e.clone({body:e.body.results})),e)))}}var d=n("iInd");class b{parse(e){e=e.replace(/&amp;/g,"&");const t=(new d.c).parse(e);return this.ensureQueryParam(t.queryParams,"dk",e),this.ensureQueryParam(t.queryParams,"uaid",e),t}serialize(e){return(new d.c).serialize(e).replace(/%2F/g,"/")}ensureQueryParam(e,t,n){if(e.hasOwnProperty(t))return e;const l=this.getParameterByName(t,n);return null!==l&&(e[t]=l),e}getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}}var g=n("g5Ei");const h={accessToken:r.rollbarToken,captureUncaught:!0,captureUnhandledRejections:!0,payload:{environment:r.deploy},ignoredMessages:["asset not found","this._setCompressedTextureImage is not a function"],enabled:!1},m=new l.r("rollbar");class x{constructor(e){this.rollbar=e}handleError(e){r.deploy!==o.Production&&console.error(e),this.rollbar.error(e.originalError||e)}}immer.enableAllPlugins(),immer.enableES5();const f=function(){return new g(h)};class _{}var y=n("mrSG"),O=n("e1JD");class w{}let v=(()=>{class e{constructor(e,t,n){this.hostingURL=e,this.embedded=t,this.widgetConfig=n}}return e.type="[Widget] Setup Widget",e})(),C=(()=>{class e{constructor(e,t){this.interaction=e,this.source=t}}return e.type="[Widget] Log Interaction",e})(),j=(()=>{class e{constructor(e,t){this.interaction=e,this.response=t}}return e.type="[Widget] Log Interaction Success",e})(),k=(()=>{class e{constructor(e,t){this.interaction=e,this.response=t}}return e.type="[Widget] Log Interaction Failure",e})(),S=(()=>{class e{constructor(){}}return e.type="[Widget] Auth",e})(),P=(()=>{class e{constructor(e,t){this.userType=e,this.response=t}}return e.type="[Widget] Auth Success",e})(),M=(()=>{class e{constructor(e,t){this.userType=e,this.response=t}}return e.type="[Widget] Auth Failure",e})(),T=(()=>{class e{constructor(){}}return e.type="[Widget] Reset",e})(),I=(()=>{class e{constructor(e){this.enabled=e}}return e.type="[Widget] Set Input Enabled",e})(),J=(()=>{class e{constructor(e){this.config=e}}return e.type="[Widget] Set API Config",e})();var z=n("LRne"),L=n("JIr8"),E=function(e){return e.InvalidUAID="analytic id does not exist",e.InvalidDeveloperId="Client id invalid",e.InvalidProductKey="app product key",e.MissingUAID="analytic id missing",e.WebOnlyAPI="Api key only compatible with Web Widget",e.AndroidOnlyAPI="Api key only compatible with Mobile Widget SDK for Android",e.IOSOnlyAPI="Api key only compatible with Mobile Widget SDK for iOS",e.MixedAPIKeys="Use of both an app product key and an app api key not allowed",e.ProductKeyNotRegistered='App product key "xxx" has not been registered or is incorrect.  Ensure it has been registered by the system admin',e.ProductKeyInvalidAppBundleID='The app product key "xxx" has not been authorized to be used for app bundle id "yyy".  Confirm the correct values are being used from the system admin',e.ProductKeyBundleIDWhitelist='Use of app product key "xxx" requires the affiliated app bundle id (app_domain) to be white-listed.  Ensure the system admin has white-listed "yyy"',e.ImproperProductKeyUsage='Improper use of app product key "xxx" detected. Contact the system admin if issue continues',e.InvalidPlatformSource="Invalid platform source",e.MissingSource="Missing source",e.MissingPlatform="Missing platform",e.MissingAppDomain="Missing app domain",e.APIKeyMissing="Api key missing",e.APIKeyInvalid="Api key invalid",e.DeveloperDeactivated="Developer account for api key is deactivated",e.BundleIDNotAllowed="App bundle id not allowed",e.BundleIDUnregistered="App bundle id unregistered",e}({});class A{}class F{}var R=n("b36G"),D=function(e){return e.Widget="widget",e.WidgetAPI="widgetapi",e}({});const U={headers:new c.g({"Content-Type":"application/json; charset=utf-8"})};let N=(()=>{class e{constructor(e){this.http=e}getAnalytic(e){return this.http.get(`/ws/user/analytics?analytic_id=${e}`).pipe(Object(u.a)(()=>({success:!0})),Object(L.a)(e=>Object(z.a)(this.parseError(e))))}sendAnalytic(e){return this.http.post(e instanceof F?"/ws/user/analytics":"/ws/developer/apps/access/key",e,U).pipe(Object(u.a)(()=>({success:!0})),Object(L.a)(e=>Object(z.a)(this.parseError(e))))}buildDeveloperAnalytic(e,t,n=D.Widget,l){const{widgetUrlConfig:i,parentUrl:a,embedded:o}=e,s={platform:n,app_activity:t,app_productkey:i["app-productkey"],app_userid:i["app-userid"],app_apikey:i.dk,app_domain:a.domain,app_activity_data:l,widget_is_fullscreen:!o};return Object(R.plainToClass)(A,s)}parseError(e){const t=e.error.error,n=e.status,l=t&&t.message?t.message:"";return{success:n>=500&&n<=504,message:l,errorCode:Object.values(E).includes(l)?l:null}}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(c.c))},token:e,providedIn:"root"}),e})(),H=(()=>{class e{constructor(e){this.analyticsService=e}authDeveloper(e){return this.analyticsService.sendAnalytic(e)}authUser(e){return this.analyticsService.getAnalytic(e)}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(N))},token:e,providedIn:"root"}),e})();var B=n("nYR2");class ${}var V=function(e){return e[e.User=0]="User",e[e.Developer=1]="Developer",e}({}),W=function(e){return e.Init="init",e.View="view",e.ChanceInteraction="interactionc",e.FirstInteraction="interactionf",e.Call="call",e}({});const G={userType:V.User,authenticating:!1,authenticated:!1,widgetUrlConfig:{id:"",type:""},widgetApiConfig:null,parentUrl:{full:"",domain:""},embedded:!1,engineVersion:"",engineAPIVersion:"",inputEnabled:!0};let q=(()=>{let e=class{constructor(e,t){this.authService=e,this.analyticsService=t}static getWidgetState(e){return e}static getUserType(e){return e.userType}static getWidgetAuthenticating(e){return e.authenticating}static getWidgetAuthenticated(e){return e.authenticated}static getInputEnabled(e){return e.inputEnabled}static getEmbedded(e){return e.embedded}static getParentURL(e){return e.parentUrl.full}static getWidgetUrlConfig(e){return e.widgetUrlConfig}static getWidgetApiUIConfig(e){return e.widgetApiConfig}setupWidget(e,{hostingURL:t,embedded:n,widgetConfig:l}){const i=t.match(/:\/\/(.[^/]+)/);e.patchState({userType:l.uaid?V.User:V.Developer,embedded:n,widgetUrlConfig:l,parentUrl:{full:t,domain:i&&i[1]?i[1]:t}})}authWidget(e,t){const n=e.getState(),{userType:l,widgetUrlConfig:i}=n,a=l===V.User?this.authService.authUser(i.uaid):this.authService.authDeveloper(this.analyticsService.buildDeveloperAnalytic(n,W.Init,D.WidgetAPI,this.buildAppActivityData(n)));e.patchState({authenticating:!0}),a.pipe(Object(B.a)(()=>e.patchState({authenticating:!1}))).subscribe(t=>{const n=t.success;e.patchState({authenticated:n}),e.dispatch(n?new P(l,t):new M(l,t))})}logWidgetInteraction(e,{interaction:t,source:n}){const l=e.getState(),i=l.userType===V.User?this.buildUserAnalytic(l,t,n):this.analyticsService.buildDeveloperAnalytic(l,t,D.Widget,this.buildAppActivityData(l));this.analyticsService.sendAnalytic(i).subscribe(n=>{e.dispatch(n.success?new j(t,n):new k(t,n))})}resetWidget(e,t){e.setState(G)}buildAppActivityData(e){const{engineVersion:t,engineAPIVersion:n,widgetUrlConfig:l}=e,i={engine_version:t,api_version:n};return Object.entries(l).filter(([e])=>"dk"!==e).forEach(([e,t])=>{i[`url_param_${e}`]=t}),Object(R.plainToClass)($,i)}setInputEnabled(e,t){e.patchState({inputEnabled:t.enabled})}setWidgetApiConfig(e,t){e.patchState({widgetApiConfig:t.config})}buildUserAnalytic(e,t,n){const{widgetUrlConfig:l,parentUrl:i}=e,a=l.uaid,o=i.domain,s=Object.assign({},this.buildAppActivityData(e),{parent_analytic_identifier:a,referer_domain:o,[`${t}_source`]:n}),r={analytic_platform:D.Widget,analytic_type:t,analytic_data:s};return Object(R.plainToClass)(F,r)}ngxsOnInit(e){e.patchState({engineVersion:Human.VERSION,engineAPIVersion:Human.API_VERSION})}};return Object(y.__decorate)([Object(O.a)(v),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,v]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setupWidget",null),Object(y.__decorate)([Object(O.a)(S),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,S]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"authWidget",null),Object(y.__decorate)([Object(O.a)(C),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,C]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"logWidgetInteraction",null),Object(y.__decorate)([Object(O.a)(T),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,T]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetWidget",null),Object(y.__decorate)([Object(O.a)(I),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,I]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setInputEnabled",null),Object(y.__decorate)([Object(O.a)(J),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,J]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setWidgetApiConfig",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[w]),Object(y.__metadata)("design:returntype",void 0)],e,"getWidgetState",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[w]),Object(y.__metadata)("design:returntype",void 0)],e,"getUserType",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[w]),Object(y.__metadata)("design:returntype",void 0)],e,"getWidgetAuthenticating",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[w]),Object(y.__metadata)("design:returntype",void 0)],e,"getWidgetAuthenticated",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[w]),Object(y.__metadata)("design:returntype",void 0)],e,"getInputEnabled",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[w]),Object(y.__metadata)("design:returntype",void 0)],e,"getEmbedded",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[w]),Object(y.__metadata)("design:returntype",void 0)],e,"getParentURL",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[w]),Object(y.__metadata)("design:returntype",void 0)],e,"getWidgetUrlConfig",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[w]),Object(y.__metadata)("design:returntype",void 0)],e,"getWidgetApiUIConfig",null),Object(y.__decorate)([Object(O.g)({name:"widget",defaults:G})],e)})();var X,K=n("XNiG"),Z=n("HDdC"),Y=n("1G5W"),Q=n("pLZG"),ee=function(e){return e[e.Basics=0]="Basics",e[e.All=1]="All",e[e.Shortcuts=2]="Shortcuts",e}({});!function(e){class t{constructor(e){this.canHover=e}}t.type="[View] Set Can Hover",e.SetCanHover=t;class n{constructor(e){this.canTouch=e}}n.type="[View] Set Can Touch",e.SetCanTouch=n;class l{constructor(e){this.canFullscreen=e}}l.type="[View] Set Can Fullscreen",e.SetCanFullscreen=l;class i{constructor(e){this.layout=e}}i.type="[View] Set Layout",e.SetLayout=i;class a{constructor(e){this.layout=e}}a.type="[View] Set Initial Layout",e.SetInitialLayout=a;class o{constructor(e){this.enabled=e}}o.type="[View] Set Input Enabled",e.SetInputEnabled=o;class s{constructor(e){this.mode=e}}s.type="[View] Set Search Display Mode",e.SetSearchDisplayMode=s;class r{constructor(e){this.active=e}}r.type="[View] Toggle Presentation",e.TogglePresentation=r;class c{constructor(e){this.interactType=e}}c.type="[View] Set Interact Type",e.SetInteractType=c;class u{constructor(e=ee.Basics){this.tab=e}}u.type="[View] Toggle Help Tab",e.ToggleHelpTab=u;class p{constructor(e){this.tutorial=e}}p.type="[View] Set Tutorial",e.SetTutorial=p;class d{constructor(e){this.intro=e}}d.type="[View] Start Tutorial",e.StartTutorial=d;class b{constructor(){}}b.type="[View] Tutorial Next",e.TutorialNext=b;class g{constructor(){}}g.type="[View] Tutorial Previous",e.TutorialPrevious=g;class h{constructor(e){this.show=e}}h.type="[View] Toggle Node Info",e.ToggleNodeInfo=h;class m{constructor(e){this.enabled=e}}m.type="[View] Set multi pick mode enabled",e.SetMultiPickModeEnabled=m;class x{constructor(e){this.labelsBreakpoint=e}}x.type="[View] Set Label Breakpoint",e.SetLabelBreakpoint=x;class f{constructor(e){this.usePrintImage=e}}f.type="[View] Set Use Print Image",e.SetUsePrintImage=f;class _{constructor(e){this.windows=e}}_.type="[View] Set Windows",e.SetWindows=_;class y{constructor(e){this.window=e}}y.type="[View] Open Window",e.OpenWindow=y;class O{constructor(e){this.window=e}}O.type="[View] Close Window",e.CloseWindow=O;class w{constructor(e,t){this.window=e,this.show=t}}w.type="[View] Toggle Window",e.ToggleWindow=w;class v{constructor(e){this.open=e}}v.type="[View] Toggle Menu",e.ToggleMenu=v;class C{constructor(e){this.enabled=e}}C.type="[View] Annotate Enabled",e.SetAnnotateEnabled=C;class j{constructor(e){this.brushSize=e}}j.type="[View] Annotate Brush Size",e.SetAnnotateBrushSize=j;class k{constructor(e){this.brushColor=e}}k.type="[View] Annotate Brush Color",e.SetAnnotateBrushColor=k}(X||(X={}));let te=(()=>{class e{constructor(e,t,n){this.store=e,this.router=t,this.analyticsService=n,this.title="Biodigital Human",this.ngUnsubscribe=new K.a,n.init(r.googleAnalyticsId)}ngOnInit(){this.initPageAnalytics(),this.initInputObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initInputObserver(){this.inputEnabled$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.store.dispatch(new X.SetInputEnabled(e))})}initPageAnalytics(){this.router.events.pipe(Object(Q.a)(e=>e instanceof d.d),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.analyticsService.logPageView(e.urlAfterRedirects)})}}return Object(y.__decorate)([Object(O.e)(q.getInputEnabled),Object(y.__metadata)("design:type",Z.a)],e.prototype,"inputEnabled$",void 0),e})();var ne=n("t68o"),le=n("NcP4"),ie=n("xYTU"),ae=n("D2NE"),oe=n("pMnS"),se=n("SVse");class re{constructor(){this.display="block",this.theme="dark",this.isCompact=!1}ngOnInit(){}}var ce=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}.field[_ngcontent-%COMP%]{padding-bottom:16px;display:block;width:100%}.field--light[_ngcontent-%COMP%]   .field__label[_ngcontent-%COMP%]{color:#6a82a4}.field--dark[_ngcontent-%COMP%]   .field__label[_ngcontent-%COMP%]{color:#96a8c0}.field--inline[_ngcontent-%COMP%]{display:inline-block;width:auto}.field--compact[_ngcontent-%COMP%]{padding-bottom:0}.field__help[_ngcontent-%COMP%]:not(:empty){padding-top:8px}"]],data:{}});function ue(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"label",[["class","field__label text-uppercase text-10"]],null,null,null,null,null)),(e()(),l.Rb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.label)}))}function pe(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,9,"div",[["class","field"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"field--light":0,"field--dark":1,"field--inline":2,"field--compact":3}),(e()(),l.nb(16777216,null,null,1,null,ue)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(6,0,null,null,3,"div",[["class","field__input mt-1"]],null,null,null,null,null)),l.Ib(null,0),(e()(),l.xb(8,0,null,null,1,"div",[["class","field__help text-dim text-11"]],null,null,null,null,null)),l.Ib(null,1)],(function(e,t){var n=t.component,l=e(t,3,0,"light"===n.theme,"dark"===n.theme,"inline"===n.display,n.isCompact);e(t,2,0,"field",l),e(t,5,0,n.label)}),null)}var de=n("s7LF");class be{get iconClass(){let e=`fas fa-${this.icon}`;return this.size&&(e+=` fa-${this.size}`),e}constructor(){}ngOnInit(){}}var ge=l.vb({encapsulation:2,styles:[[""]],data:{}});function he(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,2,"i",[],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{ngClass:[0,"ngClass"]},null)],(function(e,t){e(t,2,0,t.component.iconClass)}),null)}class me{constructor(){}onClick(e){e.stopPropagation(),e.stopImmediatePropagation()}}var xe=n("Z5h4"),fe=n("r0V8"),_e=n("5GAg"),ye=n("omvX");class Oe{constructor(e){this.changeRef=e,this.toggleType="none",this.isCompact=!1,this.opened=new l.n,this.disabled=!1,this.onChange=()=>{},this.onTouched=()=>{},this.propagateChange=e=>{}}get open(){return this._open}set open(e){e!==this.open&&(this._open=e,this.value=e)}get value(){return this._value}set value(e){e!==this.value&&(this._value=e,this.open=e,this.propagateChange(this.value),this.changeRef.markForCheck())}ngOnInit(){}handleClickHeader(){"none"===this.toggleType||this.disabled||(this.open=!this.open,this.opened.emit(this.open))}writeValue(e){this.value=e}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}var we=l.vb({encapsulation:0,styles:[[".panel[_ngcontent-%COMP%]{border-top:1px solid #1c2a3f}.theme-light[_nghost-%COMP%]   .panel[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{border-top:1px solid #eaeff5}.panel--static[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%]:hover{cursor:default}.panel--open[_ngcontent-%COMP%]{box-shadow:inset 4px 0 #2d72dc}.theme-light[_nghost-%COMP%]   .panel--open[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel--open[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%]{background-color:#fff}.panel--open[_ngcontent-%COMP%]   .panel__label[_ngcontent-%COMP%]{color:#fff}.theme-light[_nghost-%COMP%]   .panel--open[_ngcontent-%COMP%]   .panel__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel--open[_ngcontent-%COMP%]   .panel__label[_ngcontent-%COMP%]{color:#101823}.panel--open[_ngcontent-%COMP%]   .panel__body[_ngcontent-%COMP%]{display:block}.panel--closed[_ngcontent-%COMP%]   .panel__body[_ngcontent-%COMP%]{display:none}.panel--compact[_ngcontent-%COMP%]   .panel__body[_ngcontent-%COMP%]{padding:4px 12px 12px}.panel--compact[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%]{padding:10px 8px}.panel__header[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;word-break:break-word;padding:12px 16px;-webkit-box-pack:justify;justify-content:space-between;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.panel__header[_ngcontent-%COMP%]:hover{cursor:pointer}.panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__label[_ngcontent-%COMP%]{color:#fff}.theme-light[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__label[_ngcontent-%COMP%]{color:#101823}.panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__actions[_ngcontent-%COMP%], .panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__toggle--arrow[_ngcontent-%COMP%]{visibility:visible}.panel__actions[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 1 auto;white-space:nowrap;visibility:hidden}.panel__actions[_ngcontent-%COMP%] + .panel__toggle[_ngcontent-%COMP%]{margin-left:8px}.panel__label[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 1 auto;color:#d7e0ea;-webkit-box-align:center;align-items:center}.theme-light[_nghost-%COMP%]   .panel__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel__label[_ngcontent-%COMP%]{color:#283853;font-weight:700}.panel__body[_ngcontent-%COMP%]{display:block;padding:12px 12px 16px}.panel__toggle[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;-webkit-box-flex:0;flex:0 0 16px}.panel__toggle--arrow[_ngcontent-%COMP%]{visibility:hidden}"]],data:{}});function ve(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,"div",[["class","panel__toggle panel__toggle--arrow rotate--animate"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"rotate-90":0,"rotate-0":1}),(e()(),l.xb(4,0,null,null,1,"app-icon",[["icon","angle-right"]],null,null,null,he,ge)),l.wb(5,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){var n=t.component,l=e(t,3,0,n.open,!n.open);e(t,2,0,"panel__toggle panel__toggle--arrow rotate--animate",l),e(t,5,0,"angle-right")}),null)}function Ce(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["appEventFence",""],["class","panel__toggle panel__toggle--checkbox"]],null,[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,1).onClick(n,n.target)&&i),i}),null,null)),l.wb(1,16384,null,0,me,[],null,null),(e()(),l.xb(2,0,null,null,2,"mat-checkbox",[["class","mat-checkbox"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null]],[[null,"change"]],(function(e,t,n){var l=!0;return"change"===t&&(l=!1!==(e.component.open=n.checked)&&l),l}),xe.b,xe.a)),l.Ob(5120,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(4,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],{checked:[0,"checked"],disabled:[1,"disabled"]},{change:"change"})],(function(e,t){var n=t.component;e(t,4,0,n.open,n.disabled)}),(function(e,t){e(t,2,0,l.Jb(t,4).id,null,l.Jb(t,4).indeterminate,l.Jb(t,4).checked,l.Jb(t,4).disabled,"before"==l.Jb(t,4).labelPosition,"NoopAnimations"===l.Jb(t,4)._animationMode)}))}function je(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,null,null,null,null,null,null,null)),l.wb(1,16384,null,0,se.q,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l.nb(16777216,null,null,1,null,ve)),l.wb(3,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,Ce)),l.wb(5,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,1,0,t.component.toggleType),e(t,3,0,"arrow"),e(t,5,0,"checkbox")}),null)}function ke(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,7,"div",[["class","panel__header"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleClickHeader()&&l),l}),null,null)),(e()(),l.xb(1,0,null,null,1,"div",[["class","panel__label text-12"]],[[1,"data-test",0]],null,null,null,null)),(e()(),l.Rb(2,null,["",""])),(e()(),l.xb(3,0,null,null,2,"div",[["appEventFence",""],["class","panel__actions"]],null,[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,4).onClick(n,n.target)&&i),i}),null,null)),l.wb(4,16384,null,0,me,[],null,null),l.Ib(null,0),(e()(),l.nb(16777216,null,null,1,null,je)),l.wb(7,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,7,0,"none"!==t.component.toggleType)}),(function(e,t){var n=t.component;e(t,1,0,n.dataTestAttributeVal),e(t,2,0,n.label)}))}function Se(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,7,"div",[["class","panel"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"panel--static":0,"panel--disabled":1,"panel--open":2,"panel--closed":3,"panel--compact":4}),(e()(),l.nb(16777216,null,null,1,null,ke)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(6,0,null,null,1,"div",[["class","panel__body"]],null,null,null,null,null)),l.Ib(null,1)],(function(e,t){var n=t.component,l=e(t,3,0,"none"===n.toggleType,n.disabled,n.open,!1===n.open,n.isCompact);e(t,2,0,"panel",l),e(t,5,0,n.label)}),null)}var Pe=n("elxJ"),Me=n("Ourk"),Te=n("8bJo"),Ie=n("2Q+G"),Je=n("gavF");class ze{constructor(e){this.changeDetector=e,this.hide=!1,this._isActive=!1}get isActive(){return this._isActive}set isActive(e){this._isActive=e,this.changeDetector.markForCheck()}ngOnInit(){}}var Le=n("2Vo4"),Ee=n("Zy1z");class Ae{constructor(e){this.changeDetector=e,this.display="normal",this.activeTabChange=new l.n,this._activeTab=new Le.a(0),this.tabSize="small",this.ngUnsubscribe=new K.a}get activeTab(){return this._activeTab.value}set activeTab(e){null!=e&&("string"==typeof e&&(e=e.toUpperCase()),this._activeTab.next(e))}get tabItems(){return this._tabItems}set tabItems(e){this._tabItems=e}ngOnInit(){}ngAfterContentInit(){this._tabs.changes.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.mapTabs(),this.changeDetector.markForCheck()}),this.mapTabs(),this._activeTab.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.showTab(e)}),this._activeTab.pipe(Object(Ee.a)(),Object(Q.a)(([e,t])=>e!==t),Object(Y.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.activeTabChange.next(t)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleTabSelect(e){this._activeTab.next(e.index)}mapTabs(){this.tabItems=this._tabs.map((e,t)=>({index:t,label:e.label||`Item ${t}`,tab:e}))}showTab(e){this._tabs.forEach((t,n)=>{switch(typeof e){case"number":t.isActive=e===n;break;case"string":t.isActive=e.toString().toUpperCase()===t.label.toUpperCase()}}),this.changeDetector.markForCheck()}isTabActive(e){return("string"==typeof this._activeTab.value?e.label.toUpperCase():e.index)===this._activeTab.value}}var Fe=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}.tabs__labels[_ngcontent-%COMP%]{margin-bottom:8px}.tabs__label[_ngcontent-%COMP%]{color:#96a8c0;padding:2px 4px 4px;margin-right:8px;font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase;font-weight:500;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative}.tabs__label[_ngcontent-%COMP%]:after{content:'';display:block;border-bottom:3px solid #0060c4;margin-top:4px;width:0;-webkit-transition:.25s;transition:.25s ease;position:absolute;bottom:0;left:0}.tabs__label[_ngcontent-%COMP%]:hover{color:#fff;cursor:pointer}.tabs__label--active[_ngcontent-%COMP%]{color:#fff}.tabs__label--active[_ngcontent-%COMP%]:after{width:100%}.tabs--medium[_ngcontent-%COMP%]   .tabs__label[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.tabs--medium[_ngcontent-%COMP%]   .tabs__label--active[_ngcontent-%COMP%]{border-bottom:2px solid #0060c4}.theme-light[_nghost-%COMP%]   .tabs__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .tabs__label[_ngcontent-%COMP%]{color:#374a68;font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.theme-light[_nghost-%COMP%]   .tabs__label[_ngcontent-%COMP%]:after, .theme-light   [_nghost-%COMP%]   .tabs__label[_ngcontent-%COMP%]:after{border-color:#1c5ab9}.theme-light[_nghost-%COMP%]   .tabs__label--active[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .tabs__label--active[_ngcontent-%COMP%], .theme-light[_nghost-%COMP%]   .tabs__label[_ngcontent-%COMP%]:hover, .theme-light   [_nghost-%COMP%]   .tabs__label[_ngcontent-%COMP%]:hover{color:#283853}"]],data:{}});function Re(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"a",[["class","tabs__label"]],[[2,"tabs__label--active",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleTabSelect(e.parent.context.$implicit)&&l),l}),null,null)),(e()(),l.xb(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l.Rb(2,null,["",""]))],null,(function(e,t){e(t,0,0,t.component.isTabActive(t.parent.context.$implicit)),e(t,2,0,t.parent.context.$implicit.label)}))}function De(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Re)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,2,0,!t.context.$implicit.tab.linkExternal)}),null)}function Ue(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,8,"div",[["class","tabs"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"tabs--small":0,"tabs--medium":1}),(e()(),l.xb(4,0,null,null,2,"div",[["class","tabs__labels"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,De)),l.wb(6,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),(e()(),l.xb(7,0,null,null,1,"div",[["class","tabs__content"]],null,null,null,null,null)),l.Ib(null,0)],(function(e,t){var n=t.component,l=e(t,3,0,"small"==n.tabSize,"medium"==n.tabSize);e(t,2,0,"tabs",l),e(t,6,0,n.tabItems)}),null)}var Ne=l.vb({encapsulation:0,styles:[[""]],data:{}});function He(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"div",[],null,null,null,null,null)),l.Ib(null,0)],null,null)}function Be(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,1,null,He)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,t.component.isActive)}),null)}var $e=function(e){return e.XSmall="xsmall",e.Small="small",e.Medium="medium",e.Large="large",e}({}),Ve=function(e){return e.Default="default",e.Flat="flat",e.Primary="primary",e.Outline="outline",e.Text="text",e}({}),We=function(e){return e.Default="default",e.Circle="circle",e}({}),Ge=function(e){return e.Dark="dark",e.Light="light",e.Themed="themed",e}({}),qe=function(e){return e.Left="left",e.Center="center",e}({});class Xe{constructor(){this.buttonSize=$e.Medium,this.buttonType=Ve.Default,this.buttonTheme=Ge.Dark,this.buttonShape=We.Default,this.buttonAlign=qe.Center,this.uppercase=!0,this.selected=!1,this.expanded=!1,this.bordered=!0}ngOnInit(){}}var Ke=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}button[app-button]{border-color:transparent;background:0 0;border-width:0;padding:0;margin:0;outline:0}button[app-button]:not([disabled]):hover{cursor:pointer}button[app-button]:focus .app-button--themed{background:#e4ecf9;outline:0}.app-button{font-size:12px;letter-spacing:.3px;line-height:1.4em;-webkit-box-align:center;align-items:center;border-radius:4px;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;padding:0 16px;position:relative;text-align:center;-webkit-transition:background-color .12s;transition:background-color .12s;width:100%}.app-button:after{content:\" \";background-color:#283853;border-radius:4px;display:block;position:absolute;left:0;top:0;bottom:0;right:0;opacity:0;z-index:1;-webkit-transition:opacity 60ms;transition:opacity 60ms}.app-button:not(.app-button--disabled):hover:after{opacity:.7}.app-button__container{position:relative;z-index:2;width:100%}.app-button--uppercase{text-transform:uppercase}.app-button--expanded{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1}.app-button--xsmall{height:24px;min-width:24px;padding:0 8px;font-size:10px;letter-spacing:.25px;line-height:1.4em}.app-button--small{height:32px;min-width:32px;padding:0 12px;font-size:12px;letter-spacing:.3px;line-height:1.4em}.app-button--medium{height:36px;min-width:36px;padding:0 16px;font-size:12px;letter-spacing:.3px;line-height:1.4em}.app-button--large{height:48px;min-width:48px;padding:0 16px;font-size:14px;letter-spacing:.35px;line-height:1.4em}.app-button--no-border,.app-button--no-border:after{border-radius:0!important}.app-button--left{text-align:left}.app-button--themed{color:#374a68;color:var(--app-button-color)}.app-button--themed:hover{color:#1c2a3f;color:var(--app-button-color--hover)}.app-button--themed:after{background-color:#d7e0ea;background-color:var(--app-button-bg--hover)}.app-button--dark{color:#d7e0ea}.app-button--dark:hover{color:#fff}.app-button--dark:after{background-color:#283853}.app-button--dark.app-button--flat{background:#374a68}.app-button--dark.app-button--default{background:0 0}.app-button--dark.app-button--outline{background:0 0;border:1px solid #374a68;-webkit-transition:border-color .12s;transition:border-color .12s}.app-button--dark.app-button--outline:hover{border-color:#96a8c0}.app-button--dark.app-button--outline:hover:after{background-color:transparent;display:none}.app-button--dark.app-button--text{background:0 0;color:#d7e0ea}.app-button--dark.app-button--text:hover{color:#fff}.app-button--dark.app-button--text:hover:after{display:none}.app-button--dark.app-button--selected{background-color:#1c5ab9;color:#fff}.app-button--dark.app-button--selected:hover:after{display:none}.app-button--light{color:#283853}.app-button--light:hover{color:#1c2a3f}.app-button--light:after{background-color:#96a8c0}.app-button--light:not(.app-button--disabled):hover:after{opacity:.6}.app-button--light.app-button--flat{background:#d7e0ea;font-weight:500}.app-button--light.app-button--flat.app-button--selected{background-color:#96a8c0}.app-button--light.app-button--default{background:0 0;color:#131c2a}.app-button--light.app-button--default:not(.app-button--disabled):hover:after{opacity:.2}.app-button--light.app-button--outline{background:0 0;border:1px solid #96a8c0;color:#283853;-webkit-transition:border-color .12s;transition:border-color .12s}.app-button--light.app-button--outline:after{display:none}.app-button--light.app-button--outline:hover{background:rgba(55,74,104,.05);border-color:#374a68;color:#1c2a3f}.app-button--light.app-button--outline:hover:after{background-color:transparent}.app-button--light.app-button--selected{background-color:#eaeff5}.app-button--light.app-button--selected:hover:after{display:none}.app-button--light.app-button--text{color:#6a82a4}.app-button--light.app-button--text:hover{color:#1c2a3f}.app-button--light.app-button--text:hover:after{display:none}.app-button.app-button--primary{background:#de3838;color:#fff}.app-button.app-button--primary:after{background:#f9fafd}.app-button.app-button--primary:hover:after{opacity:.1}.app-button--selected{background-color:#1c5ab9}.app-button--disabled{opacity:.5}.app-button--circle{border-radius:50%}.app-button--circle.app-button--xsmall{width:24px}.app-button--circle.app-button--small{width:32px;padding:0 6px}.app-button--circle.app-button--medium{width:36px;padding:0 8px}.app-button--circle.app-button--large{width:48px}.app-button--circle:after{border-radius:50%}"]],data:{}});function Ze(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,5,"div",[["class","app-button"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"app-button--xsmall":0,"app-button--small":1,"app-button--medium":2,"app-button--large":3,"app-button--flat":4,"app-button--default":5,"app-button--primary":6,"app-button--outline":7,"app-button--text":8,"app-button--light":9,"app-button--dark":10,"app-button--themed":11,"app-button--circle":12,"app-button--selected":13,"app-button--uppercase":14,"app-button--disabled":15,"app-button--no-border":16,"app-button--expanded":17,"app-button--left":18}),(e()(),l.xb(4,0,null,null,1,"div",[["class","app-button__container"]],null,null,null,null,null)),l.Ib(null,0)],(function(e,t){var n=t.component,l=e(t,3,1,["xsmall"==n.buttonSize,"small"==n.buttonSize,"medium"==n.buttonSize,"large"==n.buttonSize,"flat"==n.buttonType,"default"==n.buttonType,"primary"==n.buttonType,"outline"==n.buttonType,"text"==n.buttonType,"light"==n.buttonTheme,"dark"==n.buttonTheme,"themed"==n.buttonTheme,"circle"==n.buttonShape,n.selected,n.uppercase,n.disabled,!n.bordered,n.expanded,"left"===n.buttonAlign]);e(t,2,0,"app-button",l)}),null)}var Ye,Qe=n("QQfA"),et=n("IP0z"),tt=n("Mz6y"),nt=n("hOhj"),lt=n("/HVE"),it=n("cUpR"),at=n("P8j/");class ot{constructor(e,t,n,l=1){this.red=e,this.green=t,this.blue=n,this.alpha=l}}!function(e){const t=/(\s*[\d\.]+\s*,){2,15}\s*[\d\.]+\s*/g;function n(e){for(let t=0;t<3;t++)if(parseFloat(`${e[t]}`)>1)return!0;return!1}function l(e){const t=document.createElement("div");t.style.backgroundColor=e,document.documentElement.appendChild(t);const n=window.getComputedStyle(t).backgroundColor.replace(/\s/g,"");return window.document.documentElement.removeChild(t),n}function i(e){const t=e.slice(0,4);3===t.length&&t.push(1);for(let n=0;n<4;n++)t[n]=parseFloat(`${t[n]}`),t[n]<0&&(t[n]=0),t[n]>255&&(t[n]=255);return t[3]>1&&(t[3]=1),t}function a(e){let n;if(Array.isArray(e))n=i(e);else if("string"==typeof e){let a=e.match(t);a?n=i(a[0].split(",")):(a=l(e).match(t))&&(n=i(a[0].split(",")))}return n}function o(e){const t=a(e);if(!t)throw new TypeError("Invalid color input.");const l=s(t);return{1:n(t)?l:t,255:n(t)?t:l}}function s(e){const t=n(e),l=[];for(let n=0;n<3;n++){let i=t?e[n]/255:255*e[n];i=t?Math.round(100*i)/100:Math.round(i),l.push(i)}return 4===e.length&&l.push(e[3]),l}function r(e,t=!1){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,l)=>[t,t,n,n,l,l].join("")).replace(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,(e,t,n,l)=>[t,n,l,"ff"].join(""));const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),l=parseInt(n[1],16),i=parseInt(n[2],16),a=parseInt(n[3],16),o=parseInt(n[4],16)/255;if(t){const e=u([l,i,a]);return[e[0],e[1],e[2],o]}return[l,i,a,o]}function c(e){const[t,n,l]=e;return Math.sqrt(t*t*.299+n*n*.587+l*l*.114)}function u(e){return e.map(e=>e/255)}function p(e){return e.map(e=>Math.round(255*e))}function d(e){return`#${e.map(e=>{const t=e.toString(16);return t.length%2?`0${t}`:t}).join("")}`}e.is255=n,e.isLight=function(e,t){return t||(t=[...e]),(c(e)+c(t))/2>140.25},e.getComputedColor=l,e.convertChannels=i,e.convert=a,e.getColor=o,e.getColors=function(e){let n=[];if("string"==typeof e){const n=e.match(t);n&&(e=n.join(",")),e=e.split(",")}if(Array.isArray(e))if(Array.isArray(e[0])&&Array.isArray(e[1]))n=e;else if(e.length<=2)n=1===e.length?e.concat(e):e;else{const t=Math.floor(e.length/2);n=e.length>4?[e.slice(0,t),e.slice(t)]:[e,e]}return n.map(e=>o(e))},e.scaleColor=s,e.hexToRgba=r,e.hexToRgb=function(e,t=!1){const n=r(e,t);return[n[0],n[1],n[2]]},e.rgbToHex=function(e,t=!1){return d(t?p(e):e)},e.rgbToHSP=c,e.rgbaToHex=function(e,t=!1){const n=e[0],l=e[1],i=e[2],a=255*e[3];return d(t?[...p([n,l,i]),a]:[n,l,i,a])},e.rgbToDecimal=u,e.rgbFromDecimal=p}(Ye||(Ye={}));class st{constructor(){this.size="normal",this.colorSelected=new l.n,this.colorHexSelected=new l.n}get colorHex(){return this.getHexFromColor(this.color)}get backgroundCSS(){if(this.color){const{red:e,green:t,blue:n,alpha:l}=this.color;return`rgba(${255*e}, ${255*t}, ${255*n}, ${l})`}return""}ngOnInit(){}handleColorPickerChange(e){const t=e?this.getColorFromHex(e):null;this.colorSelected.emit(t),this.colorHexSelected.emit(e)}getColorFromHex(e){const t=Ye.hexToRgba(e,!0);return new ot(t[0],t[1],t[2],t[3])}getHexFromColor(e){if(e){const{red:t,green:n,blue:l,alpha:i}=e;return Ye.rgbaToHex([t,n,l,i],!0)}return""}}var rt=l.vb({encapsulation:0,styles:[[".picker[_ngcontent-%COMP%]{display:inline-block;width:32px;height:32px;border-radius:50%;border:1px solid #6a82a4;background-color:transparent}.picker--small[_ngcontent-%COMP%]{width:24px;height:24px}.picker--large[_ngcontent-%COMP%]{width:48px;height:48px}"]],data:{}});function ct(e){return l.Tb(2,[(e()(),l.xb(0,16777216,null,null,1,"div",[["class","picker"]],[[2,"picker--small",null],[2,"picker--normal",null],[2,"picker--large",null],[4,"background",null]],[[null,"colorPickerChange"],[null,"click"],[null,"focus"],[null,"input"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1).handleClick()&&i),"focus"===t&&(i=!1!==l.Jb(e,1).handleFocus()&&i),"input"===t&&(i=!1!==l.Jb(e,1).handleInput(n)&&i),"colorPickerChange"===t&&(i=!1!==a.handleColorPickerChange(n)&&i),i}),null,null)),l.wb(1,671744,null,0,at.b,[l.s,l.k,l.g,l.S,l.l,at.d],{colorPicker:[0,"colorPicker"],cpOutputFormat:[1,"cpOutputFormat"],cpAlphaChannel:[2,"cpAlphaChannel"]},{colorPickerChange:"colorPickerChange"})],(function(e,t){var n=t.component;e(t,1,0,n.colorHex,"hex",n.alphaEnabled?"always":"disabled")}),(function(e,t){var n=t.component;e(t,0,0,"small"===n.size,"normal"===n.size,"large"===n.size,n.backgroundCSS)}))}const ut=()=>(class{});let pt=(()=>{class e{constructor(){this.type=a.Bookmark,this.favorite=!1,this.unavailable=!1}}return Object(y.__decorate)([Object(R.Type)(ut),Object(y.__metadata)("design:type",Array)],e.prototype,"group_access",void 0),e})();var dt=n("cp0P");class bt{static toArray(e){return[e.x,e.y,e.z]}static fromArray(e){return{x:e[0],y:e[1],z:e[2]}}}let gt=(()=>{class e{constructor(){}roundModel(e,t){const n=Object.assign({},e);return Object.keys(e).filter(t=>"number"==typeof e[t]).forEach(l=>{n[l]=this.roundNumber(e[l],t)}),n}roundNumber(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}}return e.ngInjectableDef=l.Wb({factory:function(){return new e},token:e,providedIn:"root"}),e})();const ht=.001,mt=.03;let xt=(()=>{class e{constructor(e){this.numberService=e,this.rotation={vx:0,vy:0},this.pan={x:0,y:0,z:0},this.zoom=0}getEye(){return Human.renderer.camera.eye}setEye(e){Human.renderer.camera.setLookAt({eye:e})}getCamera(){return Human.renderer.camera.getLookAt()}getLookDirection(){const e=vec3.create();return Human.renderer.camera.getLookDir(e),e}setCamera(e){return Human.renderer.camera.setLookAt(e)}getCameraZoom(){return Human.renderer.camera.getZoom()}captureCamera(){return{lookAt:Human.renderer.camera.getLookAt(),zoom:Human.renderer.camera.getZoom()}}resetCamera(){return new Z.a(e=>{Human.init.resetCamera(()=>{e.next(),e.complete()})})}getDirection(e){const t=this.getEye(),n=vec3.create();return n[0]=t.x-e.worldPos[0],n[1]=t.y-e.worldPos[1],n[2]=t.z-e.worldPos[2],vec3.normalize(n,n),n}rotateCameraStatic(e,t){Human.renderer.camera.rotateX(e),Human.renderer.camera.rotateY(t)}panCameraStatic(e,t,n){Human.renderer.camera.pan({x:e,y:t,z:n})}setHumanZoom(e){Human.renderer.camera.zoom(e)}setHumanZoomFactor(e){Human.renderer.camera.setZoom(e)}setCameraRotation(e,t){this.rotation.vx=t,this.rotation.vy=-e}setCameraPan(e,t){this.pan.x=e,this.pan.y=t}setCameraZoom(e){this.zoom=e*mt}tickCameraRotation(){return this.rotation.vx=this.checkEpsilon(this.rotation.vx),this.rotation.vy=this.checkEpsilon(this.rotation.vy),this.rotation}tickCameraPan(){return this.pan.x=this.checkEpsilon(this.pan.x),this.pan.y=this.checkEpsilon(this.pan.y),this.pan.z=this.checkEpsilon(this.pan.z),this.pan}tickCameraZoom(){return this.zoom=this.checkEpsilon(this.zoom),this.zoom}areCamerasEqual(e,t){return this.compareXYZ(e.eye,t.eye)&&this.compareXYZ(e.look,t.look)&&this.compareXYZ(e.up,t.up)}compareXYZ(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}roundCamera(e,t){const{eye:n,look:l,up:i}=e;return{eye:this.numberService.roundModel(n,t),look:this.numberService.roundModel(l,t),up:this.numberService.roundModel(i,t)}}cameraAfterFlyTo(e){const t=this.getCamera(),n=bt.toArray(t.look),l=bt.toArray(t.eye),i=vec3.create();vec3.subtract(i,l,n);const a=vec3.create();vec3.normalize(a,i);const o=Math.abs(vec3.length(a)),s=Human.math.getBoundaryDiag(e),r=Math.abs(s/1.8/Math.tan(27.5))/o*2.5,c=Human.math.getBoundaryCenter(e);vec3.scale(i,a,r);const u=vec3.add(vec3.create(),c,i);return{eye:bt.fromArray(u),look:bt.fromArray(c),up:{x:0,y:1,z:0}}}checkEpsilon(e){return Math.abs(e)<ht?0:e}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(gt))},token:e,providedIn:"root"}),e})();class ft{constructor(){this.background={colors:null},this.uiAnnotations=!1,this.uiAudio=!1,this.uiInfo=!0,this.uiFullscreen=!0,this.uiScrubber=!1,this.uiHelp=!0,this.uiBd="",this.loadRotate=null,this.initial={button:!1,handHint:!1,play:!1},this.disableScroll={alert:!1,overlay:!1},this.uiTour=!1,this.uiNav=!0,this.uiSearch=!0,this.uiTools=!0,this.uiReset=!0,this.uiLabelList=!0,this.uiChapterList=!1,this.all=!1,this.collapseLabel=null,this.uiMenu=!0,this.uiAnatomyDescriptions=!1,this.uiTutorial=!1,this.uiLegend=!0}}var _t=n("5+tZ"),yt=n("+sDk");let Ot=(()=>{class e{constructor(e){this.papa=e}importCSV(e){return new Z.a(t=>{const{data:n,errors:l}=this.papa.parse(e);l.length?(t.error(l),t.complete()):(t.next(n),t.complete())})}exportCSV(e,t,n=!0){const l=[];return n&&l.push(t.map(e=>e.label)),e.forEach(e=>{const n=t.map(t=>e[t.field]);l.push(n)}),new Z.a(e=>{const t=this.papa.unparse(l,{quotes:!0,header:!1});e.next(t),e.complete()})}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(yt.a))},token:e,providedIn:"root"}),e})();var wt=n("Iab2"),vt=n("Cfvw"),Ct=n("wOnQ"),jt=n.n(Ct),kt=(n("INDF"),function(e){return e.JPEG="image/jpeg",e.PNG="image/png",e}({}));let St=(()=>{class e{constructor(){}canvasToBlob(e,t,n){return new Z.a(l=>{e.toBlob(e=>{l.next(e),l.complete()},t,n)})}fitCanvas(e,{width:t,height:n}){const l=document.createElement("canvas");l.width=t,l.height=n;const i=l.getContext("2d"),a=e.height,o=l.width/l.height*a,s=.5*(e.width-o);return new Z.a(t=>{i.drawImage(e,s,0,o,a,0,0,l.width,l.height),t.next(l),t.complete()})}elementToCanvas(e,t=!1){const n=t?{backgroundColor:"transparent"}:{};return Object(vt.a)(jt()(e,n))}combineCanvasElements(e){const t=Math.max(0,...e.map(e=>e.width)),n=Math.max(0,...e.map(e=>e.height)),l=document.createElement("canvas");l.width=t,l.height=n;const i=l.getContext("2d");return e.forEach(e=>{i.drawImage(e,0,0)}),l}base64ToBlob(e,t){const n=atob(e.split(",")[1]),l=new ArrayBuffer(n.length),i=new Uint8Array(l);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return new Blob([l],{type:t})}blobToBase64(e){return new Z.a(t=>{const n=new FileReader;n.addEventListener("load",()=>{t.next(n.result),t.complete()}),n.readAsDataURL(e)})}blobToCanvas(e,{width:t,height:n}){return new Z.a(l=>{const i=document.createElement("canvas");i.width=t,i.height=n;const a=i.getContext("2d"),o=new Image;o.addEventListener("load",()=>{a.drawImage(o,0,0),l.next(i),l.complete()}),o.src=URL.createObjectURL(e)})}}return e.ngInjectableDef=l.Wb({factory:function(){return new e},token:e,providedIn:"root"}),e})();const Pt={title:"Desktop",type:"desktop",dimensions:{width:700,height:550},orientation:"vertical"};var Mt=n("LvDl");const Tt={headers:new c.g({"Content-Type":"application/json; charset=utf-8"})},It=new ft;var Jt=function(e){return e.Single="share.widget.link",e.Bulk="share.widget.export",e}({});const zt={id:"embedded-human",dimensions:Pt.dimensions,fullScreen:!0};let Lt=(()=>{class e{constructor(e,t,n,l,i){this.http=e,this.cameraService=t,this.numberService=n,this.exportService=l,this.imageService=i}exportImage(e,t,n){const l="string"==typeof e?this.imageService.base64ToBlob(e,t):e;return Object(wt.saveAs)(l,n),Object(z.a)(!0)}exportModels(e,t,n,l,i,a,o=!1){const s=[{label:"Title",field:"title"},{label:"URL",field:"url"},{label:"iFrame",field:"iFrame"},{label:"Author",field:"author"},{label:"Thumbnail URL",field:"thumbnail_url"}];return o&&s.push({label:"Offline Package URL",field:"offline_url"}),this.getExportModels(e,t,n,l,i,a,o).pipe(Object(_t.a)(e=>this.exportService.exportCSV(e,s)),Object(u.a)(e=>{const t=`BioDigital-Widgets-${(new Date).toISOString().split("T")[0]}-export.csv`,n=new Blob([e],{type:"text/csv;charset=utf-8"});return Object(wt.saveAs)(n,t),!0}))}getExportModels(e,t,n,l,i,a,o=!1){const s=a?Object(z.a)(null):this.getUAID(Jt.Bulk),r=o?this.getDownloadURLs(e):Object(z.a)([]);return Object(dt.a)(s,r).pipe(Object(u.a)(([o,s])=>e.map((e,r)=>{const{title:c,author:u,thumbnail_url:p}=e,d=this.getWidgetURL(e,t,n,null,o,i,a);return{title:c,url:d,iFrame:this.getWidgetEmbed(d,l),author:u,thumbnail_url:this.buildThumbnailURL(p),offline_url:s[r]||""}})))}generateWidgetURL(e,t,n,l,i,a,o){return(o||!i?Object(z.a)(null):this.getUAID(i)).pipe(Object(u.a)(i=>this.getWidgetURL(e,t,n,l,i,a,o)))}getWidgetURL(e,t,n,l,i,a="en",o){n=n||It;const s="bookmark"===e.type,r={};r[s?"be":"m"]=`${s?e.id:e.module_name}`;const c=Object.assign({},r,this.getParamsForUIOptions(n||It),this.getParamsForLoadingExperience(n||It),this.getParamsForScrollMode(n||It),this.getParamsForLoadRotate(n||It),this.getParamsForUIOptions(n||It)),u=Object(Mt.get)(n,"background.colors");if(Array.isArray(u)&&u.length>=3){const e=u.slice(0,4).map(e=>this.numberService.roundNumber(e,3));c["background.colors"]=`${e}`}if(l){const{eye:e,look:t,up:n}=this.cameraService.roundCamera(l,3);c.camera=`${[e.x,e.y,e.z,t.x,t.y,t.z,n.x,n.y,n.z]}`}o?c.dk=o.app_apikey:i&&(c.uaid=i),a&&"en"!==a&&(c.lang=a);const p=this.isCustomWidget(e.embed_url_path)?e.embed_url_path:t;return this.buildWidgetURL(p,c)}generateWidgetEmbed(e,t,n,l,i,a,o,s){return this.generateWidgetURL(e,t,n,i,a,o,s).pipe(Object(u.a)(e=>this.getWidgetEmbed(e,l)))}getWidgetEmbed(e,t){const{width:n,height:l}=t||zt.dimensions;return`<iframe\n  id="${zt.id}"\n  frameBorder="0"\n  width="${n}"\n  height="${l}"\n  allowFullScreen="${zt.fullScreen}"\n  src="${e}">\n</iframe>`}getImageEmbed(e,t,n){const l=`BioDigital Human: ${e}`.replace(/"/g,"&quot;");return`<a href="${t}" target="_blank"><img src="${n}" alt="${l}" title="${l}" /></a>`}getUAID(e){return this.http.post("/ws/user/analytics",{analytic_type:`${e}`,analytic_platform:"app"},Tt).pipe(Object(u.a)(e=>e.id))}getDownloadURLs(e){const t=e.filter(e=>!e.favorite&&!e.unavailable).map(e=>({type:e.type,id:"module"===e.type?e.module_name:e.id}));return this.http.post("/ws/download/reserve",{content:t},{headers:{"Content-Type":"application/json"}}).pipe(Object(u.a)(t=>{const n=t.tokens;return e.map(e=>{const t=e.type,l="module"===e.type?e.module_name:e.id,i=n.find(e=>e.type===t&&e.id===l);return i&&i.token?this.buildDownloadURL(i.token):""})}),Object(L.a)(()=>Object(z.a)(e.map(()=>""))))}extendWidgetOptions(e,t){const n=this.expandWidgetOptions(t);return this.deepExtendWidgetOptions(e,n),e}getWidgetConfig(e){const t={};return Object.keys(e).forEach(n=>{const l=e[n];if(null!==l){const e=this.getConfigName(n);t[e]=l}}),t}getConfigName(e){const t=this.camelToDashCase(e).replace(/^ui-/g,"");return this.dashCaseToCamelCase(t)}getParamsForLoadingExperience(e){return e.initial.button?{"initial.button":!0}:e.initial.handHint?{"initial.hand":!0}:e.initial.play?{"initial.play":!0}:{}}getParamsForScrollMode(e){return e.disableScroll.alert?{"disable-scroll.alert":!0}:e.disableScroll.overlay?{"disable-scroll":!0}:{"disable-scroll":!1}}getParamsForLoadRotate(e){return"number"==typeof e.loadRotate?{"load-rotate":e.loadRotate}:{}}getParamsForUIOptions(e){return{"ui-info":e.uiInfo,"ui-search":e.uiSearch,"ui-reset":e.uiReset,"ui-fullscreen":e.uiFullscreen,"ui-nav":e.uiNav,"ui-tools":e.uiTools,"ui-help":e.uiHelp,"ui-chapter-list":e.uiChapterList,"ui-label-list":e.uiLabelList,"ui-anatomy-descriptions":e.uiAnatomyDescriptions,"ui-tutorial":e.uiTutorial}}camelToDashCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}dashCaseToCamelCase(e){return e.replace(/-([a-z])/g,e=>e[1].toUpperCase())}isCustomWidget(e){return/widgets\/([^\/]+)\//.test(e)}saveUserImage(e,t="jpeg"){return this.http.post("/ws/user/image/v1-0",{image_src:e,image_type:t},Tt).pipe(Object(u.a)(e=>e.url))}buildWidgetURL(e,t){const n=Object.entries(t).map(([e,t])=>`${e}=${t}`).join("&"),l=e.replace(/^\/|\/$/g,"");return`${window.location.origin}/${l}/?${n}`}buildThumbnailURL(e){return`${window.location.origin}${e}`}buildDownloadURL(e){return`${window.location.origin}/download?t=${e}`}deepExtendWidgetOptions(e,t){Object.entries(e).forEach(([n,l])=>{const i=typeof l;[n,this.camelToDashCase(n),this.getConfigName(n)].forEach(a=>{if(t.hasOwnProperty(a)&&null!==t[a]){const o=t[a],s=typeof o;null===l?e[n]=o:i===s&&("object"===i?this.deepExtendWidgetOptions(l,o):e[n]=o)}})})}expandWidgetOptions(e){const t={};return Object.entries(e).forEach(([n,l])=>{const i=n.split(".");if(i.length>1){const e=i[0],n=i.slice(1).join(".");null!==t[e]&&"object"==typeof t[e]||(t[e]={}),t[e][n]=l}else t[n]=e[n]}),t}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(c.c),l.Xb(xt),l.Xb(gt),l.Xb(Ot),l.Xb(St))},token:e,providedIn:"root"}),e})();class Et{}let At=(()=>{class e{constructor(e){this.widgetURL=e}}return e.type="[Publish] Set Widget URL",e})(),Ft=(()=>{class e{constructor(e){this.dimensions=e}}return e.type="[Publish] Set Dimensions",e})(),Rt=(()=>{class e{constructor(e,t,n){this.model=e,this.widgetOptions=t,this.camera=n}}return e.type="[Publish] Get iFrame",e})(),Dt=(()=>{class e{constructor(e){this.embed=e}}return e.type="[Publish] Get iFrame Success",e})(),Ut=(()=>{class e{constructor(){}}return e.type="[Publish] Get iFrame Fail",e})(),Nt=(()=>{class e{constructor(e,t,n){this.model=e,this.widgetOptions=t,this.camera=n}}return e.type="[Publish] Get URL",e})(),Ht=(()=>{class e{constructor(e,t){this.model=e,this.url=t}}return e.type="[Publish] Get URL Success",e})(),Bt=(()=>{class e{constructor(e){this.model=e}}return e.type="[Publish] Get URL Fail",e})(),$t=(()=>{class e{constructor(e){this.publishing=e}}return e.type="[Publish] Set Publishing",e})(),Vt=(()=>{class e{constructor(){}}return e.type="[Publish] Reset Publishing",e})(),Wt=(()=>{class e{constructor(e,t="jpeg"){this.imageData=e,this.imageType=t}}return e.type="[Publish] Save Publish Image",e})(),Gt=(()=>{class e{constructor(e){this.imageURL=e}}return e.type="[Publish] Save Publish Image Success",e})(),qt=(()=>{class e{constructor(){}}return e.type="[Publish] Save Publish Image Fail",e})(),Xt=(()=>{class e{constructor(e,t,n,l,i){this.model=e,this.imageData=t,this.fileType=n,this.widgetOptions=l,this.camera=i}}return e.type="[Publish] Get Publish Image Code",e})(),Kt=(()=>{class e{constructor(e){this.embed=e}}return e.type="[Publish] Get Publish Image Code Success",e})(),Zt=(()=>{class e{constructor(){}}return e.type="[Publish] Get Publish Image Code Fail",e})();class Yt{}let Qt=(()=>{class e{constructor(){}}return e.type="[Auth] Is Logged In",e})(),en=(()=>{class e{constructor(){}}return e.type="[Auth] Is Logged In Success",e})(),tn=(()=>{class e{constructor(){}}return e.type="[Auth] Is Logged In Failure",e})(),nn=(()=>{class e{constructor(e){this.login=e}}return e.type="[Auth] Login With Biodigital",e})(),ln=(()=>{class e{constructor(e){this.login=e}}return e.type="[Auth] Login With Google",e})(),an=(()=>{class e{constructor(e){this.login=e}}return e.type="[Auth] Login With Facebook",e})(),on=(()=>{class e{constructor(){}}return e.type="[Auth] Login Success",e})(),sn=(()=>{class e{constructor(e,t){this.error=e,this.login=t}}return e.type="[Auth] Login Failure",e})(),rn=(()=>{class e{constructor(){}}return e.type="[Auth] Logout",e})(),cn=(()=>{class e{constructor(){}}return e.type="[Auth] Logout Success",e})(),un=(()=>{class e{constructor(){}}return e.type="[Auth] Logout Failure",e})(),pn=(()=>{class e{constructor(){}}return e.type="[Auth] Get Environment Settings",e})(),dn=(()=>{class e{constructor(e){this.environmentSettings=e}}return e.type="[Auth] Get Environment Settings Success",e})(),bn=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Get Environment Settings Failure",e})(),gn=(()=>{class e{constructor(){}}return e.type="[Auth] Get User Profile",e})(),hn=(()=>{class e{constructor(e){this.userProfile=e}}return e.type="[Auth] Get User Profile Success",e})(),mn=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Get User Profile Failure",e})(),xn=(()=>{class e{constructor(e){this.email=e}}return e.type="[Auth] Check Profile",e})(),fn=(()=>{class e{constructor(e){this.profile=e}}return e.type="[Auth] Check Profile Success",e})(),_n=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Check Profile Failure",e})(),yn=(()=>{class e{constructor(e){this.email=e}}return e.type="[Auth] Reset Password",e})(),On=(()=>{class e{constructor(e){this.email=e}}return e.type="[Auth] Reset Password Success",e})(),wn=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Reset Password Failure",e})(),vn=(()=>{class e{constructor(){}}return e.type="[Auth] Check Session",e})(),Cn=(()=>{class e{constructor(e){this.value=e}}return e.type="[Auth] Sign Up",e})(),jn=(()=>{class e{constructor(){}}return e.type="[Auth] Sign Up Success",e})(),kn=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Sign Up Failure",e})(),Sn=(()=>{class e{constructor(e){this.locale=e}}return e.type="[Auth] Set User Locale",e})(),Pn=(()=>{class e{constructor(e){this.locale=e}}return e.type="[Auth] Set User Locale Success",e})(),Mn=(()=>{class e{constructor(){}}return e.type="[Auth] Check Locale",e})(),Tn=(()=>{class e{constructor(){}}return e.type="[Auth] Get User Apps",e})(),In=(()=>{class e{constructor(e){this.apps=e}}return e.type="[Auth] Set User Apps",e})(),Jn=(()=>{class e{constructor(){}}return e.type="[Auth] Check Selected App",e})(),zn=(()=>{class e{constructor(e){this.appId=e}}return e.type="[Auth] Set Selected User App",e})(),Ln=(()=>{class e{constructor(e,t){this.type=e,this.mode=t}}return e.type="[Auth] Get User Message",e})(),En=(()=>{class e{constructor(e){this.message=e}}return e.type="[Auth] Get User Message Success",e})(),An=(()=>{class e{constructor(e){this.type=e}}return e.type="[Auth] Get User Message Fail",e})(),Fn=(()=>{class e{constructor(e){this.messageSeenId=e}}return e.type="[Auth] Set Message Viewed",e})(),Rn=(()=>{class e{constructor(){}}return e.type="[Auth] Set Message Viewed Success",e})(),Dn=(()=>{class e{constructor(){}}return e.type="[Auth] Set Message Viewed Fail",e})(),Un=(()=>{class e{constructor(){}}return e.type="[Auth] Verify Fail",e})(),Nn=(()=>{class e{constructor(){}}return e.type="[Auth] Reset",e})();n("fL5g"),n("Lyw/");let Hn=(()=>{class e{constructor(e){this.organizations=e}}return e.type="[Organizations] Set Organizations",e})(),Bn=(()=>{class e{constructor(e){this.organization=e}}return e.type="[Organizations] Select Organization",e})(),$n=(()=>{class e{constructor(e){this.collection=e}}return e.type="[Organizations] Select Collection",e})(),Vn=(()=>{class e{constructor(e){this.organizationId=e}}return e.type="[Organizations] Get Collections",e})(),Wn=(()=>{class e{constructor(e){this.collections=e}}return e.type="[Organizations] Get Collections Success",e})(),Gn=(()=>{class e{constructor(e){this.organization=e}}return e.type="[Organizations] Join Organization",e})(),qn=(()=>{class e{constructor(e){this.organization=e}}return e.type="[Organizations] Join Organization Success",e})(),Xn=(()=>{class e{constructor(e){this.organization=e}}return e.type="[Organizations] Join Organization Fail",e})(),Kn=(()=>{class e{constructor(){}}return e.type="[Organizations] Reset",e})();var Zn=n("vkgz"),Yn=function(e){return e.WidgetOptions="widgetOptions",e.Locale="locale",e.GroupRestriction="GroupRestriction",e.UserAppId="userAppId",e.RememberMeEmail="rememberMeEmail",e.LabelConversionSeen="labelConversionSeen",e.DefaultGroupEdit="defaultGroupEdit",e.DefaultCollectionId="defaultCollectionId",e.InternetExplorerWarning="internetExplorerWarning",e.GettingStartedTutorial="gettingStartedTutorial",e.AutoCapture="autoCapture",e}({});class Qn{constructor(){this._data={}}get keys(){return Object.keys(this._data)}get length(){return this.keys.length}clear(){this._data={}}getItem(e){return this._data[e]}key(e){return this.keys[e]}removeItem(e){delete this._data[e]}setItem(e,t){this._data[e]=t}}let el=(()=>{class e{constructor(){this._localStorage=this.getStorage("localStorage"),this._sessionStorage=this.getStorage("sessionStorage")}getLocalItem(e){return this._localStorage.getItem(`${e}`)}getLocalJSON(e){const t=this.getLocalItem(e);return t?JSON.parse(t):null}setLocalItem(e,t){const n="object"==typeof t?JSON.stringify(t):`${t}`;try{return this._localStorage.setItem(`${e}`,n),!0}catch(l){return!1}}removeLocalItem(e){this._localStorage.removeItem(`${e}`)}getSessionItem(e){const t=this._sessionStorage.getItem(`${e}`);return t?JSON.parse(t):null}setSessionItem(e,t){const n=JSON.stringify(t);try{return this._sessionStorage.setItem(`${e}`,n),!0}catch(l){return!1}}removeSessionItem(e){this._sessionStorage.removeItem(`${e}`)}clearStorage(){this.clearLocalStorage(),this.clearSessionStorage()}clearLocalStorage(){this._localStorage.clear()}clearSessionStorage(){this._sessionStorage.clear()}getStorage(e){try{return window[e]||new Qn}catch(t){return new Qn}}}return e.ngInjectableDef=l.Wb({factory:function(){return new e},token:e,providedIn:"root"}),e})();var tl=n("2Yyj"),nl=n.n(tl),ll=n("Kd/A"),il=n.n(ll),al=n("Hfs6"),ol=n.n(al),sl=n("VLs4"),rl=n.n(sl),cl=n("1IWC"),ul=n.n(cl),pl=n("Paii"),dl=n.n(pl),bl=n("vT00");const gl={title:"English",lang:"en",id:"en-US"},hl=[gl,{title:"Espa\xf1ol",lang:"es",id:"es-ES"},{title:"\u4e2d\u6587(\u7b80\u4f53)",lang:"zh",id:"zh-CN"},{title:"Fran\xe7ais",lang:"fr",id:"fr-FR"},{title:"Deutsch",lang:"de",id:"de-DE"},{title:"Italiano",lang:"it",id:"it-IT"},{title:"\u65e5\u672c\u8a9e",lang:"ja",id:"ja"},{title:"Portugu\xeas",lang:"pt",id:"pt-PT"}];function ml(){let e="";try{e=localStorage.getItem("locale")}catch(yr){}return(hl.find(t=>t.id===e)||gl).id}[nl.a,il.a,ol.a,rl.a,ul.a,dl.a,n.n(bl).a].forEach(e=>{Object(se.z)(e)});class xl{static forRoot(){return{ngModule:xl,providers:[{provide:l.w,useFactory:ml}]}}}let fl=(()=>{class e{constructor(e){this.query=e}}return e.type="[Bookmarks] Load",e})(),_l=(()=>{class e{constructor(e){this.organizationId=e}}return e.type="[Bookmarks] Load Organization Bookmarks",e})(),yl=(()=>{class e{constructor(e,t){this.organizationId=e,this.collectionId=t}}return e.type="[Bookmarks] Load Collection Bookmarks",e})(),Ol=(()=>{class e{constructor(e,t){this.id=e,this.type=t}}return e.type="[Bookmarks] Select Bookmark",e})(),wl=(()=>{class e{constructor(e){this.bookmark=e}}return e.type="[Bookmarks] Select Bookmark Success",e})(),vl=(()=>{class e{constructor(e){this.result=e}}return e.type="[Bookmarks] Load Success",e})(),Cl=(()=>{class e{constructor(e){this.bookmarkId=e}}return e.type="[Bookmarks] Delete Bookmark",e})(),jl=(()=>{class e{constructor(e){this.bookmarkId=e}}return e.type="[Bookmarks] Bookmark Delete Success",e})(),kl=(()=>{class e{constructor(e,t){this.bookmarkId=e,this.message=t}}return e.type="[Bookmarks] Bookmark Delete Fail",e})(),Sl=(()=>{class e{constructor(e,t,n=!0){this.bookmarkEntry=e,this.inplace=t,this.includeIndex=n}}return e.type="[Bookmarks] Save Bookmark",e})(),Pl=(()=>{class e{constructor(e,t,n){this.bookmark=e,this.story=t,this.method=n}}return e.type="[Bookmarks] Bookmark Saved",e})(),Ml=(()=>{class e{constructor(e){this.bookmarkEntry=e}}return e.type="[Bookmarks] Bookmark Save Failed",e})(),Tl=(()=>{class e{constructor(e){this.bookmark=e}}return e.type="[Bookmarks] Delete Favorite",e})(),Il=(()=>{class e{constructor(e){this.bookmarkId=e}}return e.type="[Bookmarks] Delete Favorite Success",e})(),Jl=(()=>{class e{constructor(e){this.bookmarkId=e}}return e.type="[Bookmarks] Delete Favorite Failed",e})(),zl=(()=>{class e{constructor(e,t,n,l,i){this.method=e,this.bookmarkId=t,this.bookmarkEntry=n,this.thumbnails=l,this.chapterIdMap=i}}return e.type="[Bookmarks] Save Bookmark Thumbnails",e})(),Ll=(()=>{class e{constructor(){}}return e.type="[Bookmarks] Reset",e})(),El=(()=>{class e{constructor(){}}return e.type="[Bookmarks] Clear Bookmarks",e})(),Al=(()=>{class e{constructor(e){this.sort=e}}return e.type="[Bookmarks] Sort",e})(),Fl=(()=>{class e{constructor(e,t){this.id=e,this.checked=t}}return e.type="[Bookmarks] Check Bookmark",e})(),Rl=(()=>{class e{constructor(e){this.ids=e}}return e.type="[Bookmarks] Set Checked Bookmarks",e})(),Dl=(()=>{class e{constructor(e,t,n,l,i,a){this.bookmarks=e,this.widgetURL=t,this.userLanguage=n,this.userApp=l,this.widgetOptions=i,this.offlineEnabled=a}}return e.type="[Bookmarks] Export Bookmarks",e})(),Ul=(()=>{class e{constructor(e){this.bookmarks=e}}return e.type="[Bookmarks] Export Bookmarks Success",e})(),Nl=(()=>{class e{constructor(e){this.bookmarks=e}}return e.type="[Bookmarks] Export Bookmarks Error",e})(),Hl=(()=>{class e{constructor(e,t,n){this.bookmark=e,this.addCollection=t,this.removeCollection=n}}return e.type="[Bookmarks] Update Bookmark Collection",e})(),Bl=(()=>{class e{constructor(e,t,n){this.bookmark=e,this.addCollection=t,this.removeCollection=n}}return e.type="[Bookmarks] Update Bookmark Collection Success",e})(),$l=(()=>{class e{constructor(e,t,n){this.bookmark=e,this.addCollection=t,this.removeCollection=n}}return e.type="[Bookmarks] Update Bookmark Collection Error",e})(),Vl=(()=>{class e{constructor(e,t){this.bookmark=e,this.collection=t}}return e.type="[Bookmarks] Add Bookmark Collection Success",e})(),Wl=(()=>{class e{constructor(e,t){this.bookmark=e,this.collection=t}}return e.type="[Bookmarks] Add Bookmark Collection Error",e})(),Gl=(()=>{class e{constructor(e,t){this.bookmark=e,this.collection=t}}return e.type="[Bookmarks] Remove Bookmark Collection Success",e})(),ql=(()=>{class e{constructor(e,t){this.bookmark=e,this.collection=t}}return e.type="[Bookmarks] Remove Bookmark Collection Error",e})(),Xl=(()=>{class e{constructor(e,t,n=gl.lang,l,i){this.id=e,this.type=t,this.lang=n,this.groupAccess=l,this.collection=i}}return e.type="[Bookmarks] Copy Bookmark",e})(),Kl=(()=>{class e{constructor(e,t,n,l){this.newId=e,this.sourceId=t,this.groupAccess=n,this.collection=l}}return e.type="[Bookmarks] Copy Bookmark Success",e})(),Zl=(()=>{class e{constructor(e,t){this.id=e,this.error=t}}return e.type="[Bookmarks] Copy Bookmark Failure",e})(),Yl=(()=>{class e{constructor(e){this.title=e}}return e.type="[Bookmarks] Set Bookmark Text",e})(),Ql=(()=>{class e{constructor(e){this.category=e}}return e.type="[Bookmarks] Set Selected Category",e})(),ei=(()=>{class e{constructor(e){this.view=e}}return e.type="[Edit] Set view",e})(),ti=(()=>{class e{constructor(){}}return e.type="[Edit] Next view",e})(),ni=(()=>{class e{constructor(){}}return e.type="[Edit] Previous view",e})(),li=(()=>{class e{constructor(e){this.show=e}}return e.type="[Edit] Show columns",e})(),ii=(()=>{class e{constructor(e,t){this.column=e,this.show=t}}return e.type="[Edit] Show column",e})(),ai=(()=>{class e{constructor(){}}return e.type="[Edit] Reset",e})(),oi=(()=>{class e{constructor(e){this.layerOrderMode=e}}return e.type="[Edit] Set Layer Order Mode",e})(),si=(()=>{class e{constructor(e){this.show=e}}return e.type="[Edit] Show Tree Node Ids",e})(),ri=(()=>{class e{constructor(e){this.size=e}}return e.type="[Edit] Set Canvas Size",e})(),ci=(()=>{class e{constructor(e){this.enable=e}}return e.type="[Edit] Auto Capture",e})(),ui=(()=>{class e{constructor(){}}return e.type="[Engine] Load",e})(),pi=(()=>{class e{constructor(e){this.result=e}}return e.type="[Engine] Load Success",e})(),di=(()=>{class e{constructor(e){this.ready=e}}return e.type="[Engine] Set Ready",e})(),bi=(()=>{class e{constructor(e){this.display=e}}return e.type="[Engine] Set Display of 3D Scene",e})(),gi=(()=>{class e{constructor(e){this.scrollMode=e}}return e.type="[Engine] Set Zoom via scroll Allowed",e})(),hi=(()=>{class e{constructor(e){this.shown=e}}return e.type="[Engine] Set Scroll Alert Shwon",e})(),mi=(()=>{class e{constructor(e){this.visible=e}}return e.type="[Engine] Set Visibility of 3D Scene",e})(),xi=(()=>{class e{constructor(e,t){this.color=e,this.duration=t}}return e.type="[Engine] Fade",e})(),fi=(()=>{class e{constructor(){}}return e.type="[Engine] Fade Complete",e})(),_i=(()=>{class e{constructor(e){this.graph=e}}return e.type="[Engine] Set Graph",e})(),yi=(()=>{class e{constructor(){}}return e.type="[Engine] Clear Graph",e})(),Oi=(()=>{class e{constructor(e){this.enabled=e}}return e.type="[Engine] Set Xray Mode",e})(),wi=(()=>{class e{constructor(e){this.chapterId=e}}return e.type="[Engine] Set Engine Chapter",e})(),vi=(()=>{class e{constructor(e){this.chapterInit=e}}return e.type="[Eninge] Set Chapter Init",e})(),Ci=(()=>{class e{constructor(e,t,n){this.node=e,this.event=t,this.hit=n}}return e.type="[Engine] Click Node",e})(),ji=(()=>{class e{constructor(e,t=!0,n){this.objectId=e,this.animate=t,this.animationDuration=n}}return e.type="[Engine] Fly To Object",e})(),ki=(()=>{class e{constructor(){}}return e.type="[Engine] Center Camera on Visible Nodes",e})(),Si=(()=>{class e{constructor(e,t){this.leafVisibilityState=e,this.nodes=t}}return e.type="[Engine] Synchronize Visible Nodes On Tree",e})(),Pi=(()=>{class e{constructor(e){this.leafRenderableState=e}}return e.type="[Engine] Synchronize Renderable State of Nodes On Tree",e})(),Mi=(()=>{class e{constructor(e,t){this.leafPickableState=e,this.nodes=t}}return e.type="[Engine] Synchronize Pickable State of Nodes On Tree",e})(),Ti=(()=>{class e{constructor(e){this.show=e}}return e.type="[Engine] Toggle Camera Bar",e})(),Ii=(()=>{class e{constructor(e){this.show=e}}return e.type="[Engine] Toggle Progress Bar",e})(),Ji=(()=>{class e{constructor(e){this.show=e}}return e.type="[Engine] Toggle Labels",e})(),zi=(()=>{class e{constructor(e){this.tool=e}}return e.type="[Engine] Set active tool",e})(),Li=(()=>{class e{constructor(e,t){this.chapter=e,this.pause=t}}return e.type="[Engine] Play chapter animation",e})(),Ei=(()=>{class e{constructor(e=!0){this.play=e}}return e.type="[Engine] Play animation",e})(),Ai=(()=>{class e{constructor(e){this.playing=e}}return e.type="[Engine] Set animation playing",e})(),Fi=(()=>{class e{constructor(e){this.play=e}}return e.type="[Engine] Play audio",e})(),Ri=(()=>{class e{constructor(){}}return e.type="[Engine] Play chapter from start",e})(),Di=(()=>{class e{constructor(e){this.enable=e}}return e.type="[Engine] Set autoplay",e})(),Ui=(()=>{class e{constructor(e,t){this.nodes=e,this.layer=t}}return e.type="[Engine] Set object layer order",e})(),Ni=(()=>{class e{constructor(e,t){this.nodeId=e,this.displayName=t}}return e.type="[Engine] Set object display name",e})(),Hi=(()=>{class e{constructor(){}}return e.type="[Engine] Auto Sort object layer orders",e})(),Bi=(()=>{class e{constructor(){}}return e.type="[Engine] Reset object layer orders",e})(),$i=(()=>{class e{constructor(e){this.position=e}}return e.type="[Engine] Set Engine Position",e})(),Vi=(()=>{class e{constructor(){}}return e.type="[Engine] Reset Engine Position",e})(),Wi=(()=>{class e{constructor(e){this.effects=e}}return e.type="[Engine] Set Post Processing Effects",e})(),Gi=(()=>{class e{constructor(e){this.properties=e}}return e.type="[Engine] Set Properties",e})(),qi=(()=>{class e{constructor(e){this.mode=e}}return e.type="[Engine] Set Transparency Mode",e})(),Xi=(()=>{class e{constructor(e){this.node=e}}return e.type="[Engine] Expand ViewTree Node",e})(),Ki=(()=>{class e{constructor(e){this.node=e}}return e.type="[Engine] Collapse ViewTree Node",e})(),Zi=(()=>{class e{constructor(e,t){this.node=e,this.hit=t}}return e.type="[Engine] Hover Node",e})(),Yi=(()=>{class e{constructor(e){this.node=e}}return e.type="[Engine] Set Label Edit Node",e})(),Qi=(()=>{class e{constructor(e,t){this.node=e,this.description=t}}return e.type="[Engine] Set Node Info",e})(),ea=(()=>{class e{constructor(e){this.node=e}}return e.type="[Engine] Query Node Info",e})(),ta=(()=>{class e{constructor(e,t){this.node=e,this.description=t}}return e.type="[Engine] Query Node Info Success",e})(),na=(()=>{class e{constructor(e){this.node=e}}return e.type="[Engine Nodes] Query Node Info Failure",e})(),la=(()=>{class e{constructor(e){this.category=e}}return e.type="[Explore] Load",e})(),ia=(()=>{class e{constructor(e){this.query=e}}return e.type="[Explore] Search",e})(),aa=(()=>{class e{constructor(e){this.searching=e}}return e.type="[Explore] Set Searching",e})(),oa=(()=>{class e{constructor(e){this.searchResults=e}}return e.type="[Explore] Load Success",e})(),sa=(()=>{class e{constructor(e){this.sort=e}}return e.type="[Explore] Sort",e})(),ra=(()=>{class e{constructor(){}}return e.type="[Explore] Reset Search Results",e})(),ca=(()=>{class e{constructor(e,t){this.id=e,this.checked=t}}return e.type="[Explore] Check Search Result",e})(),ua=(()=>{class e{constructor(e){this.ids=e}}return e.type="[Explore] Set Checked Search Results",e})(),pa=(()=>{class e{constructor(e){this.tag=e}}return e.type="[Explore] Select Category",e})(),da=(()=>{class e{constructor(){}}return e.type="[Explore] Reset",e})();var ba=function(e){return e.Toggle="toggle",e.None="none",e}({});let ga=(()=>{class e{constructor(e){this.patches=e}}return e.type="[Story Labels] Patch Labels",e})(),ha=(()=>{class e{constructor(e,t){this.labelId=e,this.offset=t}}return e.type="[Story Labels] Set label Offset",e})(),ma=(()=>{class e{constructor(e){this.labels=e}}return e.type="[Story Labels] Set Labels",e})(),xa=(()=>{class e{constructor(e){this.label=e}}return e.type="[Story Labels] Add Label",e})(),fa=(()=>{class e{constructor(e){this.label=e}}return e.type="[Story Labels] Set Contexdt Label",e})(),_a=(()=>{class e{constructor(e,t){this.sourceChapter=e,this.targetChapter=t}}return e.type="[Story Labels] Copy Labels",e})(),ya=(()=>{class e{constructor(e){this.label=e}}return e.type="[Story Labels] Remove Label",e})(),Oa=(()=>{class e{constructor(){}}return e.type="[Story Labels] Remove Context Label",e})(),wa=(()=>{class e{constructor(e){this.chapter=e}}return e.type="[Story Labels] Remove All Chapter Labels",e})(),va=(()=>{class e{constructor(e,t=!1){this.label=e,this.record=t}}return e.type="[Story Labels] Set Label",e})(),Ca=(()=>{class e{constructor(e,t){this.id=e,this.states=t}}return e.type="[Story Labels] Set Label States",e})(),ja=(()=>{class e{constructor(e){this.label=e}}return e.type="[Story Labels] Select Label",e})(),ka=(()=>{class e{constructor(){}}return e.type="[Story Labels] Reset",e})(),Sa=(()=>{class e{constructor(e,t){this.labels=e,this.theme=t}}return e.type="[Story Labels] Convert",e})(),Pa=(()=>{class e{constructor(e,t=!0,n=!0){this.enable=e,this.enableInfo=t,this.enableActions=n}}return e.type="[Story Labels] Enable Context Label",e})(),Ma=(()=>{class e{constructor(e,t){this.labels=e,this.shown=t}}return e.type="[Story Labels] Set Labels Shown",e})(),Ta=(()=>{class e{constructor(e){this.show=e}}return e.type="[Story Labels] Set All Labels Shown",e})(),Ia=(()=>{class e{constructor(e,t=ba.None){this.collapsed=e,this.collapsedMode=t}}return e.type="[Story Labels] Set Labels Collapsed",e})(),Ja=(()=>{class e{constructor(e){this.draggable=e}}return e.type="[Story Labels] Set Draggable",e})(),za=(()=>{class e{constructor(e,t,n=gl.lang){this.id=e,this.type=t,this.lang=n}}return e.type="[Story] Load Current Story",e})(),La=(()=>{class e{constructor(e){this.story=e}}return e.type="[Story] Replace the Story",e})(),Ea=(()=>{class e{constructor(e){this.id=e}}return e.type="[Story] Set the Story ID",e})(),Aa=(()=>{class e{constructor(e){this.displayName=e}}return e.type="[Story] Set Story Text",e})(),Fa=(()=>{class e{constructor(e){this.tags=e}}return e.type="[Story] Set Story Tags",e})(),Ra=(()=>{class e{constructor(e,t,n){this.id=e,this.type=t,this.reset=n}}return e.type="[Story] Set Incoming Story Id",e})(),Da=(()=>{class e{constructor(){}}return e.type="[Story] Load Story Chunk",e})(),Ua=(()=>{class e{constructor(e){this.chapterId=e}}return e.type="[Story] Reorder Load Chunks",e})(),Na=(()=>{class e{constructor(e){this.chunk=e}}return e.type="[Story] Load Story Chunk Success",e})(),Ha=(()=>{class e{constructor(e,t,n,l){this.id=e,this.story=t,this.type=n,this.chapterIdx=l}}return e.type="[Story] Build Story In Engine From Story Model",e})(),Ba=(()=>{class e{constructor(e){this.lookup=e}}return e.type="[Story] Set Tween Particle Lookup",e})(),$a=(()=>{class e{constructor(e,t,n){this.story=e,this.id=t,this.type=n}}return e.type="[Story] Load Success",e})(),Va=(()=>{class e{constructor(e,t){this.id=e,this.type=t}}return e.type="[Story] Load Fail",e})(),Wa=(()=>{class e{constructor(e,t,n=gl.lang){this.id=e,this.type=t,this.lang=n}}return e.type="[Story] Import",e})(),Ga=(()=>{class e{constructor(e,t,n){this.story=e,this.id=t,this.type=n}}return e.type="[Story] Import Success",e})(),qa=(()=>{class e{constructor(){}}return e.type="[Story] Clear",e})(),Xa=(()=>{class e{constructor(){}}return e.type="[Story] Synchronize Chapters",e})(),Ka=(()=>{class e{constructor(){}}return e.type="[Story] Human Ready (Web)",e})(),Za=(()=>{class e{constructor(){}}return e.type="[Story] Human Ready (SDK)",e})(),Ya=(()=>{class e{constructor(e){this.patches=e}}return e.type="[Story Chapter] Apply Patch",e})(),Qa=(()=>{class e{constructor(){}}return e.type="[Story Chapter] Next Chapter",e})(),eo=(()=>{class e{constructor(){}}return e.type="[Story Chapter] Previous Chapter",e})(),to=(()=>{class e{constructor(){}}return e.type="[Story Chapter] First Chapter",e})(),no=(()=>{class e{constructor(){}}return e.type="[Story Chapter] Last Chapter",e})(),lo=(()=>{class e{constructor(e){this.chapter=e}}return e.type="[Story Chapter] Select Chapter",e})(),io=(()=>{class e{constructor(e){this.chapterId=e}}return e.type="[Story Chapter] Select Chapter by chapter id",e})(),ao=(()=>{class e{constructor(e){this.chapters=e}}return e.type="[Story Chapter] Set Chapters",e})(),oo=(()=>{class e{constructor(e,t){this.chapterId=e,this.cameraAction=t}}return e.type="[Story Chapter] Set Chapter Camera Action",e})(),so=(()=>{class e{constructor(e,t){this.chapterId=e,this.ui=t}}return e.type="[Story Chapter] Set Chapter UI",e})(),ro=(()=>{class e{constructor(e,t){this.chapterId=e,this.info=t}}return e.type="[Story Chapter] Set Chapter Info",e})(),co=(()=>{class e{constructor(e,t){this.chapterId=e,this.legend=t}}return e.type="[Story Chapter] Set Chapter Legend",e})(),uo=(()=>{class e{constructor(e,t){this.chapterId=e,this.legend=t}}return e.type="[Story Chapter] Add To Chapter Legend",e})(),po=(()=>{class e{constructor(e,t){this.previousIndex=e,this.currentIndex=t}}return e.type="[Story Chapter] Reorder Chapters",e})(),bo=(()=>{class e{constructor(e,t){this.chapterId=e,this.readyState=t}}return e.type="[Story Chapter] Set Readystate",e})(),go=(()=>{class e{constructor(e,t,n){this.chapterId=e,this.effects=t,this.properties=n}}return e.type="[Story Chapter] Set Chapter PostProcessing",e})(),ho=(()=>{class e{constructor(e,t,n){this.chapterId=e,this.transition=t,this.key=n}}return e.type="[Story Chapter] Set Chapter Transitions",e})(),mo=(()=>{class e{constructor(e,t){this.chapterId=e,this.transparencyMode=t}}return e.type="[Story Chapter] Set Chapter Transparency Mode",e})(),xo=(()=>{class e{constructor(e,t,n,l){this.chapterId=e,this.clips=t,this.enabled=n,this.record=l}}return e.type="[Story Chapter] Set Chapter Clipping Planes",e})(),fo=(()=>{class e{constructor(e,t){this.chapterId=e,this.background=t}}return e.type="[Story Chapter] Set Chapter Background",e})(),_o=(()=>{class e{constructor(e){this.background=e}}return e.type="[Story Chapter] Set All Chapters Background",e})(),yo=(()=>{class e{constructor(){}}return e.type="[Story Chapter] Reset Selected Chapter Background",e})(),Oo=(()=>{class e{constructor(e){this.background=e}}return e.type="[Story Chapter] Set Selected Chapter Background",e})(),wo=(()=>{class e{constructor(e,t){this.chapter=e,this.chapterId=t}}return e.type="[Story Chapter] Duplicate An Existing Chapter",e})(),vo=(()=>{class e{constructor(e){this.chapter=e}}return e.type="[Story Chapter] Remove Chapter",e})(),Co=(()=>{class e{constructor(){}}return e.type="[Story Chapter] Reset",e})(),jo=(()=>{class e{constructor(e){this.thumbnails=e}}return e.type="[Story Chapters] Register thumbnail URLs from story",e})(),ko=(()=>{class e{constructor(e,t){this.sourceChapter=e,this.targetChapter=t}}return e.type="[Story Chapters] Copy Thumbnail From Chapter",e})(),So=(()=>{class e{constructor(e,t=kt.JPEG,n=.92,l,i="original",a,o,s=[]){this.chapterId=e,this.imageType=t,this.imageQuality=n,this.dimensions=l,this.crop=i,this.includeLabels=a,this.includeCopyright=o,this.layers=s}}return e.type="[Story Chapters] Take picture",e})(),Po=(()=>{class e{constructor(e,t,n){this.chapterId=e,this.blob=t,this.dimensions=n}}return e.type="[Story Chapters] Take picture success",e})(),Mo=(()=>{class e{constructor(e,t){this.chapterId=e,this.camera=t}}return e.type="[Story Chapters] Record Camera",e})(),To=(()=>{class e{constructor(e){this.theme=e}}return e.type="[Layout] Set theme",e})(),Io=(()=>{class e{constructor(){}}return e.type="[Layout] Reset",e})();class Jo{constructor(e,t,n){this.category=e,this.message=t,this.log=n}}let zo=(()=>{class e{constructor(e){this.http=e}logError(e){return this.http.post("/ws/human-error",e)}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(c.c))},token:e,providedIn:"root"}),e})();var Lo;!function(e){class t{constructor(e){this.searchMode=e}}t.type="[Gallery] Set Search Mode",e.SetSearchMode=t;class n{constructor(e){this.viewMode=e}}n.type="[Gallery] Set View Mode",e.SetViewMode=n;class l{constructor(e){this.sort=e}}l.type="[Gallery] Set Sort",e.SetSort=l;class i{constructor(e){this.organizationId=e}}i.type="[Gallery] Get Studio Options",e.GetStudioOptions=i;class a{constructor(e){this.options=e}}a.type="[Gallery] Get Studio Options Success",e.GetStudioOptionsSuccess=a;class o{constructor(e,t,n){this.primaryCategory=e,this.secondaryCategory=t,this.name=n}}o.type="[Gallery] Search Loft",e.SearchLoft=o;class s{constructor(e){this.bookmarks=e}}s.type="[Gallery] Search Loft Success",e.SearchLoftSuccess=s;class r{constructor(e,t){this.category=e,this.query=t}}r.type="[Gallery] Search Studio",e.SearchStudio=r;class c{constructor(e){this.bookmarks=e}}c.type="[Gallery] Search Studio Success",e.SearchStudioSuccess=c;class u{constructor(e){this.bookmarks=e}}u.type="[Gallery] Search Success",e.SearchSuccess=u;class p{constructor(e){this.result=e}}p.type="[Gallery] Select Bookmark",e.SelectBookmark=p;class d{constructor(){}}d.type="[Gallery] Clear Results",e.ClearResults=d;class b{constructor(){}}b.type="[Gallery] Reset",e.Reset=b}(Lo||(Lo={}));const Eo={loading:!1,loggedIn:null,userLocale:null};let Ao=(()=>{let e=class{constructor(e,t,n,l,i,a){this.authService=e,this.userMessageService=t,this.storageService=n,this.localeId=l,this.store=i,this.errorService=a}static getLoggedIn(e){return e.loggedIn}static getEnvironmentSettings(e){return e.environmentSettings}static getUserProfile(e){return e.userProfile}static getProfileCheck(e){return e.profileCheck}static getLoading(e){return e.loading}static getUserLocale(e){return e.userLocale}static getUserLanguage(e){return Object(Mt.get)(e,"userLocale.lang",gl.lang)}static getUserApps(e){return Object(Mt.get)(e,"userApps",[])}static getSelectedUserApp(e){return(e.userApps||[]).find(t=>t.id===e.selectedAppId)}static isPremiumUser(e){return!0===Object(Mt.get)(e,"userProfile.premium_account_valid")}isLoggedIn(e,t){e.patchState({loading:!0}),this.authService.isLoggedIn().pipe(Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(t.signed_in?new en:new tn)})}isLoggedInSuccess(e,t){e.patchState({loggedIn:!0})}isLoggedInFailure(e,t){e.patchState({loggedIn:!1})}login(e,t){e.patchState({loading:!0}),this.authService.isHuman("studio_login").pipe(Object(Zn.a)(t=>{t||e.dispatch(new Un)}),Object(Q.a)(e=>e),Object(_t.a)(()=>this.authService.loginWithBiodigital(t.login)),Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(()=>{e.dispatch(new on)},n=>{this.logFailure("LOGIN_FAILURE",n),e.dispatch(new sn(n,t.login))})}loginWithGoogle(e,t){e.patchState({loading:!0}),this.authService.loginWithGoogle(t.login).pipe(Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(()=>{e.dispatch(new on)},n=>{1!==t.login.groupCodeMode&&1!==t.login.groupInviteMode||this.logFailure("GOOGLE_SIGNUP_FAILURE",n),e.dispatch(new sn(n,t.login))})}loginWithFacebook(e,t){e.patchState({loading:!0}),this.authService.loginWithFacebook(t.login).pipe(Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(()=>{e.dispatch(new on)},n=>{e.dispatch(new sn(n,t.login))})}loginSuccess(e,t){e.dispatch(new Qt),e.dispatch(new Mn)}logout(e,t){e.patchState({loading:!0}),this.authService.logout().pipe(Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(()=>e.dispatch(new cn),()=>e.dispatch(new un))}logoutSuccess(e,t){e.setState(Eo),e.dispatch(new Nn),e.dispatch(new Ll),e.dispatch(new ai),e.dispatch(new Vi),e.dispatch(new da),e.dispatch(new ka),e.dispatch(new Io),e.dispatch(new Kn),e.dispatch(new qa),e.dispatch(new Co),e.dispatch(new Lo.Reset),this.storageService.clearSessionStorage()}checkProfile(e,t){return e.patchState({loading:!0}),this.authService.checkProfile(t.email).pipe(Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new fn(t))},t=>{e.dispatch(new _n(t))})}checkProfileSuccess(e,t){e.patchState({profileCheck:t.profile})}getUserProfile(e,t){return e.patchState({loading:!0}),this.authService.getUserProfile().pipe(Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new hn(t))},t=>{e.dispatch(new mn(t))})}getUserProfileSuccess(e,t){e.patchState({userProfile:t.userProfile}),e.dispatch(new Hn(t.userProfile.organizations)),e.dispatch(new Tn),e.dispatch(new Mn)}getUserApps(e,t){this.authService.getUserApps().subscribe(t=>{e.dispatch(new In(t)),e.dispatch(new Jn)},e=>{})}setUserApps(e,{apps:t}){e.patchState({userApps:t})}setSelectedUserApp(e,{appId:t}){e.patchState({selectedAppId:t}),null!==t?this.storageService.setLocalItem(Yn.UserAppId,t):this.storageService.removeLocalItem(Yn.UserAppId)}checkSelectedUserApp(e,t){const n=e.getState().userApps,l=this.storageService.getLocalItem(Yn.UserAppId);if(l){const t=parseInt(l,10);e.dispatch(new zn(t))}else n&&n.length&&e.dispatch(new zn(n[0].id))}checkSession(e,t){e.patchState({loading:!0}),this.authService.isLoggedIn().pipe(Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{t.signed_in?(e.dispatch(new en),e.dispatch(new gn)):e.dispatch(new tn)})}getEnvironmentSettings(e,t){return e.patchState({loading:!0}),this.authService.getEnvironmentSettings().pipe(Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new dn(t))},t=>{e.dispatch(new bn(t))})}GetEnvironmentSettingsSuccess(e,t){e.patchState({environmentSettings:t.environmentSettings})}resetPassword(e,t){e.patchState({loading:!0}),this.authService.resetPassword(t.email).pipe(Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(()=>{e.dispatch(new On(t.email))},t=>{e.dispatch(new wn(t))})}signUp(e,t){e.patchState({loading:!0}),this.authService.isHuman("studio_signup").pipe(Object(Zn.a)(t=>{t||e.dispatch(new Un)}),Object(Q.a)(e=>e),Object(_t.a)(()=>this.authService.signUp(t.value)),Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(()=>{e.dispatch(new jn)},t=>{e.dispatch(new kn(t))})}signUpFailure(e,t){this.logFailure("BIODIGITAL_SIGNUP_FAILURE",t)}setUserLocale(e,{locale:t}){this.storageService.setLocalItem(Yn.Locale,t.id),e.patchState({userLocale:t}),e.dispatch(new Pn(t))}checkLocale(e,t){const n=hl.find(e=>e.id===this.localeId)||gl;e.dispatch(new Sn(n))}getUserMessage(e,{type:t,mode:n}){this.userMessageService.getUserMessage(t,n).subscribe(t=>{e.dispatch(new En(t))},()=>{e.dispatch(new An(t))})}setUserMessageViewed(e,{messageSeenId:t}){this.userMessageService.setUserMessageViewed(t).subscribe(()=>e.dispatch(new Rn),()=>e.dispatch(new Dn))}resetAuth(e,t){e.setState(Eo)}logFailure(e,t){const n=Object(Mt.get)(t,"message")||"",l=Object(Mt.get)(t,"error.error.message")||"";this.errorService.logError(new Jo(e,n,l)).subscribe()}ngxsOnInit(e){e.dispatch(new vn),e.dispatch(new Mn),e.dispatch(new Jn)}};return Object(y.__decorate)([Object(O.a)(Qt),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Qt]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"isLoggedIn",null),Object(y.__decorate)([Object(O.a)(en),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,en]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"isLoggedInSuccess",null),Object(y.__decorate)([Object(O.a)(tn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,tn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"isLoggedInFailure",null),Object(y.__decorate)([Object(O.a)(nn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,nn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"login",null),Object(y.__decorate)([Object(O.a)(ln),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ln]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loginWithGoogle",null),Object(y.__decorate)([Object(O.a)(an),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,an]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loginWithFacebook",null),Object(y.__decorate)([Object(O.a)(on),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,on]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loginSuccess",null),Object(y.__decorate)([Object(O.a)(rn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,rn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"logout",null),Object(y.__decorate)([Object(O.a)(cn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,cn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"logoutSuccess",null),Object(y.__decorate)([Object(O.a)(xn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,xn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"checkProfile",null),Object(y.__decorate)([Object(O.a)(fn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,fn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"checkProfileSuccess",null),Object(y.__decorate)([Object(O.a)(gn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,gn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getUserProfile",null),Object(y.__decorate)([Object(O.a)(hn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,hn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getUserProfileSuccess",null),Object(y.__decorate)([Object(O.a)(Tn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Tn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getUserApps",null),Object(y.__decorate)([Object(O.a)(In),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,In]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setUserApps",null),Object(y.__decorate)([Object(O.a)(zn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,zn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setSelectedUserApp",null),Object(y.__decorate)([Object(O.a)(Jn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Jn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"checkSelectedUserApp",null),Object(y.__decorate)([Object(O.a)(vn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,vn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"checkSession",null),Object(y.__decorate)([Object(O.a)(pn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,pn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getEnvironmentSettings",null),Object(y.__decorate)([Object(O.a)(dn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,dn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"GetEnvironmentSettingsSuccess",null),Object(y.__decorate)([Object(O.a)(yn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,yn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetPassword",null),Object(y.__decorate)([Object(O.a)(Cn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Cn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"signUp",null),Object(y.__decorate)([Object(O.a)(kn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,kn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"signUpFailure",null),Object(y.__decorate)([Object(O.a)(Sn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Sn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setUserLocale",null),Object(y.__decorate)([Object(O.a)(Mn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Mn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"checkLocale",null),Object(y.__decorate)([Object(O.a)(Ln),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ln]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getUserMessage",null),Object(y.__decorate)([Object(O.a)(Fn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Fn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setUserMessageViewed",null),Object(y.__decorate)([Object(O.a)(Nn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Nn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetAuth",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Yt]),Object(y.__metadata)("design:returntype",void 0)],e,"getLoggedIn",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Yt]),Object(y.__metadata)("design:returntype",void 0)],e,"getEnvironmentSettings",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Yt]),Object(y.__metadata)("design:returntype",void 0)],e,"getUserProfile",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Yt]),Object(y.__metadata)("design:returntype",void 0)],e,"getProfileCheck",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Yt]),Object(y.__metadata)("design:returntype",void 0)],e,"getLoading",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Yt]),Object(y.__metadata)("design:returntype",void 0)],e,"getUserLocale",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Yt]),Object(y.__metadata)("design:returntype",String)],e,"getUserLanguage",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Yt]),Object(y.__metadata)("design:returntype",void 0)],e,"getUserApps",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Yt]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedUserApp",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Yt]),Object(y.__metadata)("design:returntype",void 0)],e,"isPremiumUser",null),Object(y.__decorate)([Object(O.g)({name:"auth",defaults:Eo})],e)})();const Fo={publishing:!1,widgetURL:"/viewer",dimensions:Pt.dimensions,minDimensions:{width:300,height:400}};let Ro=(()=>{let e=class{constructor(e,t){this.publishService=e,this.store=t}static getDimensions(e){return e.dimensions}static getMinDimensions(e){return e.minDimensions}static getWidgetURL(e){return e.widgetURL}static getPublishing(e){return e.publishing}setPublishWidgetURL(e,t){e.patchState({widgetURL:t.widgetURL||"/viewer"})}setPublishDimensions(e,t){e.patchState({dimensions:t.dimensions})}getPublishURL(e,t){const{model:n,camera:l,widgetOptions:i}=t,{widgetURL:a}=e.getState(),o=this.store.selectSnapshot(Ao.getUserLanguage),s=this.store.selectSnapshot(Ao.getSelectedUserApp);this.publishService.generateWidgetURL(n,a,i,l,Jt.Single,o,s).subscribe(t=>{e.dispatch(new Ht(n,t))},()=>{e.dispatch(new Bt(n))})}getPublishIFrame(e,t){const{model:n,camera:l,widgetOptions:i}=t,{widgetURL:a,dimensions:o}=e.getState(),s=this.store.selectSnapshot(Ao.getUserLanguage),r=this.store.selectSnapshot(Ao.getSelectedUserApp);this.publishService.generateWidgetEmbed(n,a,i,o,l,Jt.Single,s,r).subscribe(t=>{e.dispatch(new Dt(t))},()=>{e.dispatch(new Ut)})}savePublishImage(e,{imageData:t,imageType:n}){this.publishService.saveUserImage(t,n).subscribe(t=>{e.dispatch(new Gt(t))},()=>{e.dispatch(new qt)})}getPublishImage(e,t){const{model:n,camera:l,widgetOptions:i,imageData:a,fileType:o}=t,{widgetURL:s}=e.getState(),r=this.store.selectSnapshot(Ao.getUserLanguage),c=this.store.selectSnapshot(Ao.getSelectedUserApp);Object(dt.a)(this.publishService.generateWidgetURL(n,s,i,l,Jt.Single,r,c),this.publishService.saveUserImage(a,o)).subscribe(([t,l])=>{const i=this.publishService.getImageEmbed(n.title,t,l);e.dispatch(new Kt(i))},()=>{e.dispatch(new Zt)})}setPublishing(e,{publishing:t}){e.patchState({publishing:t})}resetPublish(e,t){e.setState(Fo)}};return Object(y.__decorate)([Object(O.a)(At),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,At]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setPublishWidgetURL",null),Object(y.__decorate)([Object(O.a)(Ft),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ft]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setPublishDimensions",null),Object(y.__decorate)([Object(O.a)(Nt),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Nt]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getPublishURL",null),Object(y.__decorate)([Object(O.a)(Rt),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Rt]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getPublishIFrame",null),Object(y.__decorate)([Object(O.a)(Wt),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Wt]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"savePublishImage",null),Object(y.__decorate)([Object(O.a)(Xt),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Xt]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getPublishImage",null),Object(y.__decorate)([Object(O.a)($t),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,$t]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setPublishing",null),Object(y.__decorate)([Object(O.a)(Vt),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Vt]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetPublish",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Et]),Object(y.__metadata)("design:returntype",void 0)],e,"getDimensions",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Et]),Object(y.__metadata)("design:returntype",void 0)],e,"getMinDimensions",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Et]),Object(y.__metadata)("design:returntype",void 0)],e,"getWidgetURL",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Et]),Object(y.__metadata)("design:returntype",void 0)],e,"getPublishing",null),Object(y.__decorate)([Object(O.g)({name:"publish",defaults:Fo})],e)})();class Do{constructor(e,t,n){this.store=e,this.publishService=t,this.sanitizer=n}set model(e){const t=this.store.selectSnapshot(Ro.getWidgetURL),n=this.store.selectSnapshot(Ao.getUserLanguage),l=this.publishService.getWidgetURL(e,t,this.params,null,null,n);this.src=this.sanitizer.bypassSecurityTrustResourceUrl(l)}ngOnInit(){}}var Uo=n("l5mm"),No=n("H0e8");const Ho=(e,t)=>{const n=[...e];return t.forEach(e=>{n.push(void 0!==e?Number(e):1)}),n},Bo=e=>{const t=/rgba?\((\d{1,3})\,\s*(\d{1,3})\,\s*(\d{1,3})\,?\s*(\d+\.\d{0,5})?\)/g;let n=[];const l=t.exec(e),i=t.exec(e);return n=Ho(n,l.slice(1,5)),Ho(n,i.slice(1,5))};class $o{constructor(e,t,n){this.colors=e,this.gradientType=t,this.colorStops=n}static equals(e,t){return e.gradientType===t.gradientType&&e.colors.length===t.colors.length&&e.colors.every((e,n)=>e===t.colors[n])&&e.colorStops.length===t.colorStops.length&&e.colorStops.every((e,n)=>e===t.colorStops[n])}static deserialize(e){if(!Object.keys(e).length)return null;let t=[];"string"==typeof e.colors?t=Bo(e.colors):Array.isArray(e.colors)&&8===e.colors.length&&(t=e.colors.map((e,t)=>(t+1)%4&&e<=1?Math.round(255*e):e));const n=/radial|linear/.test(e.gradientType)?e.gradientType:"radial",l=e.colorStops,i=Array.isArray(l)&&2===l.length?[l[0],l[1]]:[0,100];return new $o(t,n,i)}static toCSS(e){const t=e.colors,n=`rgba(${t[0]},${t[1]}, ${t[2]}, ${t[3]}) ${e.colorStops[0]}%`,l=`rgba(${t[4]},${t[5]}, ${t[6]}, ${t[7]}) ${e.colorStops[1]}%`;return"radial"===e.gradientType?`radial-gradient(circle, ${n}, ${l})`:`linear-gradient(180deg, ${n}, ${l})`}static fromCSS(e){const t=/radial-gradient/.test(e)?"radial":"linear",n=Bo(e),l=/([0-9]+)\%/g,i=[0,100];return i[0]=Number(l.exec(e)[1]),i[1]=Number(l.exec(e)[1]),new $o(n,t,i)}static isTransparent(e){if(!e||!e.colors)return!1;const t=e.colors,n=t[3];return t.length<=4?0===n:0===n&&0===t[7]}}var Vo=function(e){return e.AnnotationsCreate="annotations.create",e.AnnotationsDestroy="annotations.destroy",e.AnnotationsInfo="annotations.info",e.AnnotationsSetDescription="annotations.setDescription",e.AnnotationsSetLabelsShown="annotations.setLabelsShown",e.AnnotationsSetTitle="annotations.setTitle",e.AnnotationsUpdate="annotations.update",e.AnnotationsSetEnabled="annotations.setEnabled",e.CameraInfo="camera.info",e.CameraOrbit="camera.orbit",e.CameraPan="camera.pan",e.CameraReset="camera.reset",e.CameraSet="camera.set",e.CameraZoom="camera.zoom",e.GetAnnotationInfo="annotations.info",e.HideAnnotations="annotations.hide",e.HideLabels="labels.hide",e.HotspotsCreate="hotspots.create",e.HotspotsDestroy="hotspots.destroy",e.HotspotsHide="hotspots.hide",e.HotspotsInfo="hotspots.info",e.HotspotsShow="hotspots.show",e.HotspotsTypes="hotspots.types",e.HotspotsUpdate="hotspots.update",e.HumanInfo="human.info",e.InputDisable="input.disable",e.InputEnable="input.enable",e.LabelsSetEnabled="labels.setEnabled",e.SceneMetaData="scene.metadata",e.SceneSetHighlightColor="scene.setHighlightColor",e.SceneColorObject="scene.colorObject",e.SceneDisableHighlight="scene.disableHighlight",e.SceneEnableHighlight="scene.enableHighlight",e.SceneGetColor="scene.getColor",e.SceneInfo="scene.info",e.SceneLoad="scene.load",e.ScenePick="scene.pick",e.SceneReset="scene.reset",e.SceneSelectObjects="scene.selectObjects",e.SceneShowObjects="scene.showObjects",e.SceneTransformObject="scene.transformObject",e.SceneUncolorObject="scene.uncolorObject",e.SceneSnapshot="scene.snapshot",e.SceneCapture="scene.capture",e.SceneRestore="scene.restore",e.SceneEnableXrayMode="scene.enableXray",e.SceneDisableXrayMode="scene.disableXray",e.ShowAnnotations="annotations.show",e.SetAnnotationsShown="annotations.setShown",e.ShowLabels="labels.show",e.TimelineInfo="timeline.info",e.TimelineQuery="timeline.query",e.TimelineNext="timeline.nextChapter",e.TimelinePause="timeline.pause",e.TimelinePlay="timeline.play",e.TimelinePrev="timeline.previousChapter",e.TimelineSet="timeline.set",e.UIGetBackground="ui.getBackground",e.UIGetDisplay="ui.getDisplay",e.UIGetWordPosition="ui.getWorldPosition",e.UISetBackground="ui.setBackground",e.UISetDisplay="ui.setDisplay",e.UIResetDisplay="ui.resetDisplay",e.UISnapshot="ui.snapshot",e.focusObject="focus.focusObject",e.dissectSetEnabled="dissect.setEnabled",e.pickSingleSetEnabled="pick.single.setEnabled",e.pickMultiSetEnabled="pick.multi.setEnabled",e.getCanvasPos="scene.getCanvasPos",e.sceneSetClickMode="scene.setClickMode",e.sceneGetClickMode="scene.getClickMode",e.IsolateObject="scene.isolateObject",e.setCameraMode="camera.setCameraMode",e.UISetLoadingExperience="ui.setLoadingExperience",e.UISetScrollCaptureMode="ui.setScrollCaptureMode",e.UISetTutorial="ui.setTutorial",e}({}),Wo=function(e){return e.Started="started",e.Loaded="loaded",e.Tick="tick",e.HumanReady="human.ready",e.HumanStarted="started",e.Error="error",e.HumanError="human.error",e.LogDebug="_log.debug",e.LogError="_log.error",e.LogInfo="_log.info",e.LogWarn="_log.warn",e.SceneLoaded="scene.loaded",e.HumanProgress="human.progress",e.AnnotationsCreated="annotations.created",e.AnnotationsDestroyed="annotations.destroyed",e.AnnotationsHidden="annotations.hidden",e.AnnotationsShown="annotations.shown",e.AssetsLoadFinish="assets.load.finish",e.AssetsLoadProgress="assets.load.progress",e.AssetsLoadStart="assets.load.start",e.CameraRested="camera.rested",e.CameraUpdated="camera.updated",e.HotspotsDisplayUpdated="hotspots.displayUpdated",e.HotspotsEntered="hotspots.entered",e.HotspotsLeft="hotspots.left",e.HotspotsPicked="hotspots.picked",e.HotspotsPositionUpdated="hotspots.positionUpdated",e.LabelCreated="label.created",e.LabelDestroyed="label.destroyed",e.LabelsDestroyed="label.destroyed",e.LabelsHidden="labels.hidden",e.LabelsShown="labels.shown",e.ModuleInteractive="module.interactive",e.ModulesActivateFinish="modules.activate.finish",e.ModulesCreateFinish="modules.create.finish",e.ModulesDestroyFinish="modules.destroy.finish",e.PickPicked="pick.picked",e.SceneMarkersUpdated="scene.markers.updated",e.SceneObjectRenderable="scene.objectRenderable",e.SceneObjectsSelected="scene.objectsSelected",e.SceneObjectsShown="scene.objectsShown",e.ScenePicked="scene.picked",e.SceneRestored="scene.restored",e.SceneXrayEnabled="scene.xrayEnabled",e.SceneXrayDisabled="scene.xrayDisabled",e.Debug_SceneReady="debug.scene.ready",e.TimelineChaptersActivated="timeline.chapters.activated",e.TimelineChaptersActivateFinish="timeline.chapters.activate.finish",e.TimelineChaptersActivateStart="timeline.chapters.activate.start",e.TimelineChapterTransition="timeline.chapterTransition",e.TimelinePlaying="timeline.playing",e.TimelineScrubbed="timeline.scrubbed",e.TimelinePlayed="timeline.played",e.TimelineStopped="timeline.stopped",e.TimelinePaused="timeline.paused",e.TimelineUnpaused="timeline.unpaused",e.TimelineCompleted="timeline.completed",e.GraphAssetAttachFinish="graph.assetAttach.finish",e}({}),Go=function(e){return e.Play="play",e.Button="button",e.Hand="hand",e}({}),qo=function(e){return e.Capture="capture",e.DoNotCaptureShowMessage="do_not_capture_show_message",e.DoNotCapture="do_not_capture",e}({});const Xo=.95;class Ko{constructor(e,t,n){this.elRef=e,this.publishService=t,this.cameraService=n,this.scalable=!1,this.cameraUpdated=new l.n,this.ngUnsubscribe=new K.a,this._ready=!1,this._enableUI=!0}set enableUI(e){this._enableUI=e,this.setWidgetUIConfig(this._enableUI,this._params)}set bgColor(e){this._bgColor=e,this._ready&&this.renderWidgetBGColor()}set widgetParams(e){this._params=e,this._rotateDegrees=e?e.loadRotate:0,this.setWidgetUIConfig(this._enableUI,this._params)}get topOffset(){const e=(this.elRef.nativeElement.offsetHeight-this.height)/2;return this.scaleFactor<1?e:Math.max(0,e)}get leftOffset(){const e=(this.elRef.nativeElement.offsetWidth-this.width)/2;return this.scaleFactor<1?e:Math.max(0,e)}get scaleFactor(){if(this.scalable){const{offsetWidth:e,offsetHeight:t}=this.containerRef.nativeElement,n=Math.min(e/this.width,t/this.height,1);return 1===n?1:n*Xo}return 1}ngOnInit(){this._apiRef=new HumanAPI({iframeId:this.frameRef.nativeElement.id}),this.getAPIEvent(Wo.HumanReady).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this._ready=!0,this.setupCameraTracking(),this.setupCameraRotation(),this.setWidgetUIConfig(this._enableUI,this._params),this.getCurrentBGColor().pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this._defaultColor=e,this.renderWidgetBGColor()})})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setWidgetUIConfig(e,t){if(this._apiRef&&t){if(e){const e=this.convertWidgetOptionsToDisplayParams(t);this.resetDisplay(),this.setUIDisplay(e)}else this.hideUIDisplay();const n=(e=>e.button?Go.Button:e.handHint?Go.Hand:e.play?Go.Play:void 0)(t.initial),l=(e=>e.alert?qo.DoNotCaptureShowMessage:e.overlay?qo.DoNotCapture:qo.Capture)(t.disableScroll),i={enabled:t.uiTutorial};this._apiRef.send(Vo.UISetLoadingExperience,n),this._apiRef.send(Vo.UISetScrollCaptureMode,l),this._apiRef.send(Vo.UISetTutorial,i)}}takeSnapshot(e="jpeg",t){return this.getAPIData(Vo.UISnapshot,Object.assign({width:this.width,height:this.height,fileType:e},t))}setCameraOrbit(e){this.sendAPIData(Vo.CameraOrbit,{yaw:e})}renderWidgetBGColor(){this.setWidgetBGColor(this._bgColor||this._defaultColor)}setWidgetBGColor(e){this._apiRef&&e&&this.sendAPIData(Vo.UISetBackground,e)}setupCameraTracking(){this.getCurrentCamera().pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.setDefaultCamera(e),this.getCameraUpdates().pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.setUpdateCamera(e)})})}setupCameraRotation(){let e=performance.now();Object(Uo.a)(0,No.animationFrame).pipe(Object(Q.a)(()=>!!this._rotateDegrees),Object(u.a)(()=>this._rotateDegrees*(performance.now()-e)*.001),Object(Zn.a)(()=>e=performance.now()),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.setCameraOrbit(e)})}setDefaultCamera(e){this._defaultCamera=e,this.setUpdateCamera(e)}setUpdateCamera(e){this._currentCamera=e;const t=this.cameraService.areCamerasEqual(this.cameraService.roundCamera(this._defaultCamera,3),this.cameraService.roundCamera(this._currentCamera,3));this.cameraUpdated.emit(t?null:this._currentCamera)}getAPIEvent(e){return new Z.a(t=>{this._apiRef.on(e,e=>{t.next(e)})})}getAPIData(e,t){return new Z.a(n=>{this._apiRef.send(e,t,e=>{n.next(e),n.complete()})})}sendAPIData(e,t){this._apiRef.send(e,t)}getCurrentCamera(){return this.getAPIData(Vo.CameraInfo).pipe(Object(u.a)(e=>({eye:e.position,look:e.target,up:e.up})))}getCurrentBGColor(){return this.getAPIData(Vo.UIGetBackground).pipe(Object(u.a)(e=>e?new $o([...[].concat(...e.colors)],e.gradientType,e.colorStops):null))}getCameraUpdates(){return this.getAPIEvent(Wo.CameraUpdated).pipe(Object(u.a)(e=>{const{position:t,target:n,up:l}=e;return{eye:t,look:n,up:l}}))}setUIDisplay(e){this._apiRef.send(Vo.UISetDisplay,e)}resetDisplay(){this._apiRef.send(Vo.UIResetDisplay)}hideUIDisplay(){this.setUIDisplay({all:!1})}convertWidgetOptionsToDisplayParams(e){return{info:e.uiInfo,search:e.uiSearch,reset:e.uiReset,fullscreen:e.uiFullscreen,nav:e.uiNav,tools:e.uiTools,help:e.uiHelp,chapterList:e.uiChapterList,labelList:e.uiLabelList,anatomyDescriptions:e.uiAnatomyDescriptions,legend:e.uiLegend}}}var Zo=l.vb({encapsulation:0,styles:[[".widget[_ngcontent-%COMP%]{display:block;width:100%;height:100%;position:relative}.widget__container[_ngcontent-%COMP%]{position:absolute;padding:8px}.widget__frame[_ngcontent-%COMP%]{display:block;width:100%;height:100%;box-shadow:0 0 0 1px #eaeff5}"]],data:{}});function Yo(e){return l.Tb(2,[l.Pb(402653184,1,{containerRef:0}),l.Pb(402653184,2,{frameRef:0}),(e()(),l.xb(2,0,[[1,0],["widgetContainer",1]],null,3,"div",[["class","widget"]],null,null,null,null,null)),(e()(),l.xb(3,0,null,null,2,"div",[["class","widget__container"]],[[4,"width",null],[4,"height",null],[4,"top",null],[4,"left",null],[4,"transform",null]],null,null,null,null)),(e()(),l.xb(4,0,[[2,0],["widgetFrame",1]],null,1,"iframe",[["allowfullscreen",""],["appEmbedSrc",""],["class","widget__frame"],["id","widget-frame"]],[[8,"width",0],[8,"height",0],[4,"width",null],[4,"height",null],[8,"src",5]],null,null,null,null)),l.wb(5,81920,null,0,Do,[O.i,Lt,it.b],{model:[0,"model"],id:[1,"id"]},null)],(function(e,t){e(t,5,0,t.component.model,"widget-frame")}),(function(e,t){var n=t.component;e(t,3,0,n.width+"px",n.height+"px",n.topOffset+"px",n.leftOffset+"px","scale("+n.scaleFactor+")"),e(t,4,0,n.width,n.height,n.width+"px",n.height+"px",l.Jb(t,5).src)}))}var Qo=n("Kj3r");class es{}class ts{}var ns=n("z6cu");class ls{}class is{}class as{}const os=()=>is;let ss=(()=>{class e{}return Object(y.__decorate)([Object(R.Type)(os),Object(y.__metadata)("design:type",String)],e.prototype,"objectId",void 0),e})();class rs{}const cs=()=>ss,us=()=>rs,ps=()=>(class{}),ds=()=>(class{});let bs=(()=>{class e{}return Object(y.__decorate)([Object(R.Type)(cs),Object(R.Type)(us),Object(R.Type)(ps),Object(R.Type)(ds),Object(y.__metadata)("design:type",String)],e.prototype,"moduleId",void 0),e})();class gs{}class hs{constructor(e){this.shown=e=>!1,this.selected=e=>!1,this.pickable=e=>!0,e.forEach(e=>{this[e]=e=>!1})}}var ms,xs=function(e){return e.Default="default",e.Plus="plus",e.Minus="minus",e.PlusMinus="plusMinus",e}({}),fs=function(e){return e.Annotation="annotation",e.Classic="classic",e.StudioNext="studioNext",e.Context="context",e}({});class _s{constructor(e){this.pinType=xs.PlusMinus,this.theme=fs.StudioNext,this.expandTag=!0,this.showDescription=!0,this.collapseDescription=!1,this.pinGlow=!1,this.hideWire=!1,this.hideTag=!1,this.title=e}}!function(e){function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}e.getUuid=t,e.idWithPrefix=function(e){return`${e}-${t()}`}}(ms||(ms={}));class ys{}var Os=function(e){return e.classicAnnotation="classic-annotation",e.classicHotspot="classic-hotspot",e.studioNext="studio-light",e}({});class ws{constructor(){this.title=null,this.description=null,this.errands=[]}}var vs=function(e){return e.flyToChapter="flyToChapter",e.flyToObject="flyToObject",e.flyToCamera="flyToCamera",e}({});class Cs{constructor(e){this.type=vs.flyToObject,this.value=e}}class js{constructor(e){this.type=vs.flyToCamera,this.value=e}}var ks,Ss,Ps=function(e){return e.Circle="circle",e.CirclePlus="circle-plus",e.CircleMinus="circle-minus",e.Label="label",e.CircleLabel="circle-label",e}({});!function(e){function t(e,t){e.nodes[t.id]||(e.nodes[t.id]=t)}function n(e,t){return e.nodes[t]||null}function l(e,t){return e.predecessors[t]||null}function i(e,t){return[...e.successors[t]||[]]}function a(e){return Object.keys(e.roots)}e.addRootNode=function(e,l){t(e,l);const i=n(e,l.id);e.roots[i.id]=i},e.getNodes=function(e,t){const n=[];return t.forEach(t=>{e.nodes[t]&&n.push(e.nodes[t])}),n},e.getAncestors=function(e,t,n=!1,l="ascending"){const i=n?[t]:[];let a=e.predecessors[t];for(;a;)i.push(a),a=e.predecessors[a];return"descending"===l&&i.reverse(),i},e.addNode=t,e.getNode=n,e.getAncestor=l,e.getAllAncestorsFromList=function(e,t){const n={};let i;return t.forEach(t=>{(i=l(e,t))&&!n[i]&&(n[i]=!0)}),Object.keys(n)},e.getSuccessors=i,e.getState=function(e,t,l){const i={},a=n(e,t);return Object.entries(a.boolState).forEach(([e,t])=>{l&&l.includes(e)&&(i[e]=t)}),Object.entries(a.numState).forEach(([e,t])=>{l&&l.includes(e)&&(i[e]=t)}),i},e.isLeaf=function(e,t){return!!e.nodes[t]&&void 0===e.successors[t]},e.isRoot=function(e,t){return e.roots.hasOwnProperty(t)||!1},e.getRoots=a,e.depthFirst=function e(t,n,l){l?(n(l),i(t,l).forEach(l=>{e(t,n,l)})):a(t).forEach(l=>{n(l),e(t,n,l)})},e.createGraphFromSrc=function(e,t="objectId",n="objects",l={}){const i={nodes:{},successors:{},predecessors:{},roots:{}};return e.forEach(e=>{!function e(t,n,l,i,a,o,s){const r={id:l[i],depth:0,boolState:{},numState:{}};r.depth=s,Object.entries(o).forEach(([e,t])=>{let n;"string"==typeof t?n=l[t]:"function"==typeof t&&(n=t(l[i])),"boolean"==typeof n?r.boolState[e]=n:"number"==typeof n?r.numState[e]=n:r[e]=n}),t.nodes[r.id]=r,n?(t.successors[n]=[...t.successors[n]||[],r.id],t.predecessors[r.id]=n):t.roots[r.id]=r,s+=1,l[a].forEach(n=>{e(t,r.id,n,i,a,o,s)})}(i,null,e,t,n,l,0)}),i},e.pruneHiddenObjects=function e(t,n,l){const i=[];for(const a of t){const t=n[a.objectId],o=(()=>!0===t||!1!==t&&l)(),s=e(a.objects||[],n,o);if(o){const e=Object.assign({},a);e.objects=s,i.push(e)}else s.forEach(e=>i.push(e))}return i}}(ks||(ks={})),function(e){function t(e,t){return e.reduce((e,n)=>(e[n]=t[n]||!1,e),{})}e.createVoter=t,e.getInitialVoterState=function(e,n){return Object.keys(e).reduce((l,i)=>(l[i]=t(n,e[i]),l),{})},e.getInitialElectionDepth=function(e,t){return Object.keys(e).reduce((e,n)=>Math.max(e,ks.getNode(t,n).depth),0)-1},e.getEligibleElections=function(e,t,n){return ks.getAllAncestorsFromList(e,t).filter(t=>t&&ks.getNode(e,t).depth===n)};const n={trueWins:e=>({result:e.votesFor.length>0,dissenters:[...e.votesAgainst]}),falseWins:e=>({result:e.votesAgainst.length>0,dissenters:[...e.votesFor]}),majorityWins:e=>{const t=e.votesFor.length>e.votesAgainst.length;return{result:t,dissenters:t?[...e.votesAgainst]:[...e.votesFor]}}};function l(e,t,l){return Object.keys(t).reduce((i,a)=>{const o=t[a],s=l[a]||"majorityWins",{result:r,dissenters:c}=n[s](o);return i[a]={id:e,result:r,dissenters:c,voters:[...o.votesFor,...o.votesAgainst]},i},{})}e.buildElectionResult=l,e.getElectionResults=function(e,n,i,a){const o=n,s=Object.keys(a);return{results:i.reduce((i,r)=>{const c=ks.getSuccessors(e,r),u=c.map(l=>({[l]:n[l]||t(s,ks.getState(e,l,s))}));c.forEach(e=>{delete o[e]});const p=l(r,function(e,t){return Object.keys(e).reduce((e,n)=>{const l=t.reduce((e,t)=>{const l=Object.keys(t)[0];return t[l][n]?e.votesFor.push(l):e.votesAgainst.push(l),e},{votesFor:[],votesAgainst:[]});return e[n]=l,e},{})}(a,u),a);return o[r]=Object.entries(p).reduce((e,[t,n])=>(e[t]=n.result,e),{}),i.results.push(p),i},{results:[]}).results,remainingVoters:o}}}(Ss||(Ss={}));class Ms{}let Ts=(()=>{class e{serializeNode(e,t,n={},l=(e=>!0)){const i={};return i.id=t.id,Object.entries(t.boolState).forEach(([e,t])=>{n.hasOwnProperty(e)&&(i[e]=t)}),Object.entries(t.numState).forEach(([e,t])=>{n.hasOwnProperty(e)&&(i[e]=t)}),e.successors[t.id]&&(i.children=[],e.successors[t.id].forEach(t=>{l(t)&&i.children.push(this.serializeNode(e,e.nodes[t],n,l))},this)),i}getAllSiblingsFromList(e,t,n){const l=[];let i;for(i=0;i<t.length;i++)this.getSiblings(e,t[i],n).forEach(e=>{l.includes(e)||l.push(e)});return l}getElectionResults(e,t,n,l){class i extends Ms{constructor(e,t){super(),Object.entries(e).forEach(([e,n])=>{this[e]={votesFor:[],votesAgainst:[]},Object.entries(t).forEach(([t,n])=>{n[e]?this[e].votesFor.push(t):this[e].votesAgainst.push(t)},this)},this)}}let a,o;const s=Object.keys(l),r=[];return n.forEach(n=>{o={},ks.getSuccessors(e,n).forEach(n=>{o[n]=t[n]||Ss.createVoter(s,ks.getState(e,n,s)),delete t[n]},this),a=new i(l,o);const c=Ss.buildElectionResult(n,a,l);r.push(c);const u={};Object.entries(c).forEach(([e,t])=>{u[e]=t.result}),t[n]=u},this),r}updateGraphStateRecord(e,t,n,l,i=!0){n.forEach(n=>{const a=n[l[0]].id,o=ks.getState(e,a,l),s={};let r=!1;l.forEach(e=>{(i||n[e].result!==o[e])&&(s[e]=n[e].result,r=!0)}),r&&(t[a]=s)},this)}nodeExists(e,t){return!!e.nodes[t]}getLeaves(e){const t=[];return Object.entries(e.nodes).forEach(([n,l])=>{e.successors[n]||t.push(n)}),t}getDescendants(e,t,n=!1){const l=[];return function t(n){ks.getSuccessors(e,n).forEach(e=>{l.push(e),t(e)})}(t),n&&l.push(t),l}getLeafDescendants(e,t,n=!1){const l=this.getDescendants(e,t,n).filter(t=>ks.isLeaf(e,t));return(ks.isLeaf(e,t)||n)&&l.push(t),l}getAllLeafDescendants(e,t){let n=[];return t.forEach(t=>{n=ks.isLeaf(e,t)?[...n,t]:[...n,...this.getLeafDescendants(e,t,!1)]}),n.sort().reduce((e,t)=>(e.indexOf(t)<0&&e.push(t),e),[])}getInverseSelection(e,t){const n=this.getAllLeafDescendants(e,t);return this.getLeaves(e).filter(e=>n.indexOf(e)<0)}getSiblings(e,t,n=!1){const l=e.predecessors[t];let i=[];if(i=l?ks.getSuccessors(e,l):ks.getRoots(e),!n){const e=i.indexOf(t);e>=0&&i.splice(e,1)}return i}getNodes(e,t){const n=[];return t.forEach(t=>{e.nodes[t]&&n.push(e.nodes[t])}),n}setState(e,t,n){const l=ks.getNode(e,t),i={};return Object.entries(n).forEach(([e,t])=>{"boolean"==typeof t&&l.boolState[e]!==t?(l.boolState[e]=t,i[e]=t):"number"==typeof t&&l.numState[e]!==t&&(l.numState[e]=t,i[e]=t)}),i}synchronize(e,t,n){const l=this.calculateGraphStateMap(e,t,n);return Object.entries(l).forEach(([t,n])=>{this.setState(e,t,n)},this),l}calculateGraphStateMap(e,t,n,l=!n){let i=[];const a={};let o=[];const s={},r=Object.keys(t);let c=0;for(n?Object.entries(n).forEach(([t,l])=>{a[t]=Ss.createVoter(r,n[t]),s[t]=Object.assign({},a[t]),c=Math.max(c,ks.getNode(e,t).depth)},this):this.getLeaves(e).forEach(t=>{a[t]=Ss.createVoter(r,ks.getNode(e,t).boolState),s[t]=Object.assign({},a[t]),c=Math.max(c,ks.getNode(e,t).depth)},this),c-=1,i=Ss.getEligibleElections(e,Object.keys(a),c);c>=0;)o=this.getElectionResults(e,a,i,t),this.updateGraphStateRecord(e,s,o,r,l),c-=1,i=Ss.getEligibleElections(e,Object.keys(a),c);return s}filterGraphAccessors(e,t){const n=this.getNodes(e,t).sort((e,t)=>e.depth-t.depth),l=new Map;return n.filter(t=>!l.has(t.id)&&(this.getDescendants(e,t.id,!0).forEach(e=>l.set(e,!0)),!0)).map(e=>e.id)}resetDepth(e){ks.depthFirst(e,t=>{let n=0;e.predecessors[t]&&(n=ks.getNode(e,e.predecessors[t]).depth+1),ks.getNode(e,t).depth=n})}deleteNode(e,t,n=!0){if(!this.nodeExists(e,t))return;delete e.nodes[t];const l=e.predecessors[t];l&&(delete e.predecessors[t],e.successors[l]&&(e.successors[l]=e.successors[l].filter(e=>e!==t)));const i=e.successors[t];i&&(delete e.successors[t],n&&i.forEach(t=>{this.deleteNode(e,t)},this)),e.roots[t]&&delete e.roots[t]}sanitizeNodeID(e){const t=new RegExp(/\|/,"gi");return e.replace(t,"_")}resetAsLeaf(e,t){let n=[];return e.nodes[t]&&!ks.isLeaf(e,t)&&(n=this.getDescendants(e,t),delete e.successors[t],n.forEach(t=>{delete e.nodes[t],delete e.successors[t],delete e.predecessors[t]})),n}createGraphStateMapFromPropertyMaps(e){const t={};for(const n in e)for(const l in e[n])t[l]=Object.assign({},t[l]||{},{[n]:e[n][l]});return t}extractPropertymapFromGraphState(e,t){const n={};for(const l in e)e[l].hasOwnProperty(t)&&(n[l]=e[l][t]);return n}}return e.ngInjectableDef=l.Wb({factory:function(){return new e},token:e,providedIn:"root"}),e})();function Is(e,t,n){const l={},i={};return ks.depthFirst(e,a=>{i[a]=ks.isRoot(e,a)?Object.assign({},ks.getState(e,a,n),t[a]||{}):Object.assign({},i[e.predecessors[a]],t[a]||{}),ks.isLeaf(e,a)&&(l[a]=i[a])}),l}const Js="objectId",zs="objects",Ls={shown:"shown",renderable:e=>Human.scene.objects[e].isRenderable(),pickable:"pickable",label:e=>Human.scene.objects[e].displayName,expanded:e=>!1,layer:"layer"},Es={shown:"trueWins",renderable:"falseWins",pickable:"trueWins"},As={trim:!0};class Fs{constructor(e){this.trim=e.trim||!1,this.terminal=e.terminal||[],this.root=e.root||{children:[],replace:!1},this.connect=e.connect||{},this.nodes=e.nodes||[]}}let Rs=(()=>{class e{constructor(e){this.graphService=e,this.objectToNodeMap={},this.nodeToObjectMap={},this.events={},this.events=Object.values(Wo).reduce((e,t)=>(e[t]=this.makeObservable(t),e),{})}makeObservable(e){return new Z.a(t=>{Human.events.on(e,e=>{t.next(e)})})}getCanvas(){return Human.renderer.canvas.canvas}getEvent(e){return this.events[e]}fireEvent(e,t){Human.events.fire(e,t)}getSceneBoundary(){return Human.scene.getBoundary()}getObjectBoundary(e){return Human.scene.objects[e].getBoundary()}pickScene(e){return Human.renderer.pick.pick(e.x,e.y,{rayPick:e.rayPick})}transformObject(e,t){const n=Human.scene.objects[e];n?n.setTransform(t):console.error(`Scene object not found: '${e}'`)}toggleNodes(e,t){const n={replace:!1,objects:{},fetchAssets:t};e.forEach(e=>{this.getObjects(e).forEach(e=>{n.objects[e]=t})}),Human.scene.setEnabledObjects(n)}setNodesVisible(e,t=!1){const n={replace:t,objects:Object.assign({},e),fetchAssets:!0};Human.scene.setEnabledObjects(n)}setNodesPickable(e){Object.keys(e).forEach(t=>{(Human.scene.objects[t].isLeaf()?[t]:this.getLeafObjects(t)).forEach(n=>{Human.scene.objects[n].setPickable(e[t])})})}filterObjects(e,t){let n=e.length;for(;n--;)switch(!0){case e[n]instanceof Human.scene.Group:e[n].objects=this.filterObjects(e[n].objects,t),0===e[n].objects.length&&e.splice(n,1);break;case e[n]instanceof Human.scene.Object:-1===e[n].displayName.toLowerCase().indexOf(t)&&e.splice(n,1)}return e}setObjectLayer(e,t){const n=Human.scene.objects[e];if(n.layer=t,n.renderables)for(let l=0;l<n.renderables.length;++l)n.renderables[l].setLayer(t);else n.hasOwnProperty("_layerNode")?n._layerNode.setPriority(t):n.hasOwnProperty("_propertiesNode")&&n._propertiesNode.setProperties({layer:t})}getObjectLayerValues(e){const t={},n=Human.scene.getBoundary();return e.forEach(e=>{const l=Human.scene.objects[e],i=l.getBoundary(),a=Math.min(i.xmin-n.xmin,n.xmax-i.xmax),o=2*Math.min(i.ymin-n.ymin,n.ymax-i.ymax),s=Math.min(i.zmin-n.zmin,n.zmax-i.zmax),r=l.layer;t[r]=t[r]||[],t[r].push({nodeId:e,value:Math.min(a,o,s)})}),t}getSceneGraph(e){const t=ks.createGraphFromSrc(e,Js,zs,Ls);return this.graphService.synchronize(t,Es),t}createViewGraph(e,t=!0){const n=t?ks.pruneHiddenObjects(Human.scene.rootObjects,e):Human.scene.rootObjects,l=n.reduce((e,t)=>{const n=t.objectId.includes("-root");return e[t.objectId]=!0!==n,n&&t.objects.forEach(t=>{e[t.objectId]=!0}),e},{}),i=this.getSceneGraph(ks.pruneHiddenObjects(n,l));return this.graphService.resetDepth(i),i}getNode(e,t){return this.graphService.nodeExists(e,t)?ks.getNode(e,t):this.objectToNodeMap[t]?ks.getNode(e,this.objectToNodeMap[t]):null}getChapterGraphConfig(){const e=Human.timeline.activeRoot._nowBranch;return new Fs(Object.assign({},As,e.graph||{}))}getRootObjects(){return Human.scene.rootObjects}getAllSceneObjects(){return Human.scene.objects}getObjects(e){return this.nodeToObjectMap[e]?this.nodeToObjectMap[e]:[Human.scene.objects[e].objectId]||!1}getLeafObjects(e){if(e in this.nodeToObjectMap){const t={};return this.nodeToObjectMap[e].forEach(e=>{Human.scene.objects[e].isLeaf()?t[e]=!0:Human.scene.getLeaves(e).forEach(e=>{t[e]=!0})}),Object.keys(t)}return e in Human.scene.objects?Human.scene.getLeaves(e):[]}getChapter(e){return Human.timeline.branchTimelines[e]||null}getActiveChapters(){return Human.timeline.activeRoot?Human.timeline.activeRoot._chapters:[]}getBoundaryFromObjects(e){return e=e.filter(e=>Human.scene.objects[e].isLeaf()),Human.scene.getBoundary({objectIds:e,clipped:!0})}getLeaves(e){return Human.scene.getLeaves(e)}getVisibleLeaves(){return Human.scene.getEnabledLeaves()}getCameraLookAt(){return Object(R.plainToClass)(rs,Human.renderer.camera.getLookAt())}barycentricToWorld(e,t,n,l=0){const i=new Float32Array([0,0,0]);return Human.scene.objects[e].barycentricToWorldSpace(l,t,n,i),isNaN(i[0])?[0,0,0]:[...Array.from(i)]}setGraphState(e){Human.scene.setObjectProperties(e)}getAssetNamespaces(){const e={};return Object.keys(Human.assets.loadedAssets).map(e=>e.split("/")[0]).forEach(t=>{e[t]=!0}),Object.keys(e)}queryShownObjects(e,t,n=!0){const l={};e.forEach(e=>{const n=Is(t,e.synchronization,["shown"]);for(const t in n)n.hasOwnProperty(t)&&(l[t]=l[t]||n[t].shown)});let i=l;if(n){const e=this.graphService.createGraphStateMapFromPropertyMaps({shown:l}),n=this.graphService.calculateGraphStateMap(t,{shown:"trueWins"},e,!0);i=this.graphService.extractPropertymapFromGraphState(n,"shown")}return i}loadGraphObject(e){const t=this.getObjects(e).map(e=>Human.scene.objects[e]);return new Z.a(e=>{Human.scene.graph.attachAssetSetsToSubtree(t,null,()=>{e.next(!0),e.complete()})})}setProperties(e){Human.properties.set(e)}setTransparencyMode(e){Human.renderer.setTransparencyMode(e)}setPostProcessingEnabled(e){e?Human.renderer.postprocess.enable():Human.renderer.postprocess.disable()}setPostProcessingFeatures(e){Human.renderer.postprocess.parse(e)}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(Ts))},token:e,providedIn:"root"}),e})();class Ds{constructor(){this.type=vs.flyToChapter,this.value=null}}const Us={flyToCamera:"flyTo",flyToChapter:"flyTo"};let Ns=(()=>{class e{constructor(e){this.engineService=e,this.convertActionToErrand=(e,t,n)=>{const l=new RegExp("^flyTo(Async)?"),i=new RegExp("^flyToObject(Async)?"),a=new RegExp("^flyTo[w.:]+currentChapter.[flyTo|jumpTo]"),o=n.split(":").slice(0,2),s=e;let r=o[1];/currentChapter/.test(r)&&(r=r.replace("currentChapter",`chapters[${t}]`));let c=null;return i.test(o[0])?c=new Cs(this.objectAddress(s,r)):l.test(o[0])?c=new js(this.objectAddress(s,r)):a.test(o[0])&&(c=new Ds),c},this.convertErrandToAction=(e,t)=>{const n=ms.idWithPrefix("errand").replace(/\-/g,"_"),l={};let i="";const a=function(e){return Us[e]||e}(t.type);return t.type===vs.flyToChapter?i=`${a}Async:currentChapter.${this.engineService.getChapter(e.chapterId).camera.action}`:(i=`${a}Async:currentChapter.customData.${n}`,l[n]=t.value),{action:i,data:l}},this.objectAddress=(e,t)=>t.split(".").reduce((e,t)=>{if(null===e)return null;if(/\[+[0-9+]\]+/.test(t)){const n=t.split("["),l=Number(n[1].match(/[0-9]+/));return n[0]in e&&l in e[n[0]]?e[n[0]][l]:null}return t in e?e[t]:null},e)}filterHotspot(e,t,n){const l=new RegExp("^(flyTo|flyToObject|hideHotspot|showHotspot|resetHotspots)"),i=this.getHotspotAction(e,n),a=i.filter(e=>l.test(e));return i.length===a.length}deserializeAnnotation(e,t,n){const l=new _s(e.title||"");return l.id=e.annotationId||ms.idWithPrefix("label"),l.chapterId=t.id,l.expandTag=!0,l.showDescription=!0,l.collapseDescription=!1,l.pinGlow=!1,l.hideWire=!1,l.hideTag=!1,n===fs.Annotation?(l.theme=fs.Annotation,l.pinType=xs.Default,l.flyTo=!1,l.states=[]):(l.theme=fs.StudioNext,l.pinType=xs.PlusMinus,l.flyTo=!0,l.states=[new ws,new ws],l.states[0].errands=[new js(t.camera.location)],l.states[1].errands=[new Cs(e.objectId)]),l.occludable=!1!==e.occludable,l.renderableIndex=e.renderableIndex||0,e.objectId&&e.hasOwnProperty("barycentric")?(l.objectId=e.objectId,l.primitiveIndex=e.primitiveIndex,l.barycentric=e.barycentric):e.hasOwnProperty("pos")&&(e.hasOwnProperty("objectId")&&(l.objectId=e.objectId),l.pos=e.pos),e.dir&&Array.isArray(e.dir)?l.dir=e.dir:e.dir&&e.dir instanceof Object&&(l.dir=Object.values(e.dir)),l.description=e.description||"",l.offset=e.labelOffset||[40,40],l.shown=!1!==e.shown,l.labelShown=!1!==e.labelShown,l}deserializeHotspots(e,t,n,...l){const[i,a]=l,o=new _s(i.title||"");switch(o.id=ms.idWithPrefix("hotspot"),o.objectId=i.objectId,o.chapterId=t.id,o.description=i.description||"",o.pinType=/plus|minus/.test(i.className)?xs.PlusMinus:xs.Default,o.pinGlow=/pulse/.test(i.className),o.occludable=!0,o.shown=i.shown,o.offset=i.labelOffset?i.labelOffset:[22,-17],/left/.test(i.className)&&o.offset[0]>0?o.offset[0]*=-1:/right/.test(i.className)&&o.offset[0]<0&&(o.offset[0]*=-1),i.hasOwnProperty("barycentric")?(o.renderableIndex=i.renderableIndex||0,o.barycentric=i.barycentric,o.primitiveIndex=i.primitiveIndex):o.pos=i.pos,o.dir=i.dir,i.theme=i.theme?i.theme:Os.classicHotspot,i.theme){case Os.classicAnnotation:o.theme=fs.Annotation,o.showDescription=!0,o.collapseDescription=/collapsible/g.test(i.className),o.expandTag=!0,o.hideTag=!1,o.hideWire=!/leader-line/.test(i.className);break;case Os.classicHotspot:o.theme=fs.Classic,o.showDescription=/label/.test(i.className),o.expandTag=/label/.test(i.className),o.hideTag=!o.expandTag,o.collapseDescription=!1,o.hideWire=!/leader-line/.test(i.className);break;case Os.studioNext:o.theme=fs.StudioNext,o.showDescription=!!i.description,o.collapseDescription=/collapsible/g.test(i.className),o.hideTag=!i.title,o.hideWire=!/leader-line/.test(i.className)}o.flyTo=!1,o.flyToTarget=null,o.states=[];const s=this.filterHotspotActions(this.getHotspotAction(e,i)),r=a?this.filterHotspotActions(this.getHotspotAction(e,a)):[],c=new ws,u=new ws;return s.length&&(c.errands=s.map(t=>this.convertActionToErrand(e,n,t))),r.length&&(u.errands=r.map(t=>this.convertActionToErrand(e,n,t))),o.states=[u,c],o}makeDefaultStudioLabel(e){const t=e?Object.assign({},e):new _s("");return t.pinType=xs.PlusMinus,t.theme=fs.StudioNext,t.expandTag=!0,t.showDescription=!0,t.collapseDescription=!1,t.pinGlow=!1,t.hideWire=!1,t.hideTag=!1,t.states=[new ws,new ws],t}makeAnnotationLabel(e){const t=e?Object.assign({},e):new _s("");return t.pinType=xs.Default,t.theme=fs.Annotation,t.expandTag=!0,t.showDescription=!0,t.collapseDescription=!1,t.pinGlow=!1,t.hideWire=!1,t.hideTag=!1,t.states=[],t}serializeLabel(e,t){const n=new ys,l=Object(R.classToClass)(e),i=["circle","draggable"];n.shown=!0,e.objectId&&(n.objectId=l.objectId);try{e.primitiveIndex&&e.barycentric&&e.objectId?(n.renderableIndex=e.renderableIndex||0,n.primitiveIndex=e.primitiveIndex,n.barycentric=e.barycentric,n.pos=this.engineService.barycentricToWorld(e.objectId,e.primitiveIndex,e.barycentric)):n.pos=l.pos}catch(r){return{data:{},hotspots:[]}}switch(e.dir&&(n.dir=Array.prototype.slice.call(e.dir)),n.labelOffset=e.offset,e.theme){case fs.Annotation:n.theme=Os.classicAnnotation;break;case fs.Classic:n.theme=Os.classicHotspot;break;default:n.theme=Os.studioNext}""!==l.title?(n.title=l.title,n.description=l.description,n.type=Ps.CircleLabel):n.type=Ps.Circle,e.pinGlow&&i.push("pulse"),e.pinType===xs.PlusMinus&&i.push("plus"),e.hideWire||i.push("leader-line"),e.hideTag||i.push("label"),e.collapseDescription&&i.push("collapsible collapsed"),n.className=i.join(" ");let a={};n.actions=[];const o=[n],s=e.states.length;return e.states.forEach((t,l)=>{if(l===s-1)o[0].actions.push("resetHotspots"),t.errands.forEach(t=>{const n=this.convertErrandToAction(e,t);o[0].actions.push(n.action),a=Object.assign({},a,n.data)});else{const l=Object(R.classToClass)(n);l.actions=[],l.className=l.className.replace("plus","minus"),t.errands.forEach(t=>{const n=this.convertErrandToAction(e,t);l.actions.push(n.action),a=Object.assign({},a,n.data)}),o.push(l)}}),2===o.length&&(o[0].actions.push(`hideHotspots:currentChapter.hotspots[${t}]`),o[0].actions.push(`showHotspots:currentChapter.hotspots[${t+1}]`),o[1].actions.push(`hideHotspots:currentChapter.hotspots[${t+1}]`),o[1].actions.push(`showHotspots:currentChapter.hotspots[${t}]`),o[0].shown=!0,o[1].shown=!1),2===o.length&&e.collapseDescription&&(o[1].className+=o[1].className.replace("collapsed","")),o.forEach(e=>{n.labelOffset[0]<0?e.className=e.className.replace("right","")+" left":n.labelOffset[0]>0&&(e.className=e.className.replace("left","")+" right")}),{data:a,hotspots:o}}setLabelContainer(e){this._labelContainer=e}getLabelContainer(){return this._labelContainer}getHotspotAction(e,t){const n=t.actionSrc?this.objectAddress(e,t.actionSrc):t.actions?t.actions:[];return n instanceof Array?n:[]}filterHotspotActions(e){const t=new RegExp("^(flyTo|flyToObject)");return e.filter(e=>t.test(e))}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(Rs))},token:e,providedIn:"root"}),e})();class Hs{}var Bs,$s,Vs;function Ws(e,t,n,l){(function e(t,n){const l=n.objects;return 0===l.length?[]:Object(Mt.flattenDeep)(l.map(n=>[n.objectId,...e(t,t.scene.objects[n.objectId])]))})(Human,Human.scene.objects[e]).forEach(e=>t[e][n]=l)}function Gs(e,t){if(void 0===e.activeChapterId||void 0===e.nodeState)return;const[n,l,i]=immer.produceWithPatches(e,e=>{const n=e.nodeState[e.activeChapterId],l=t.objectIds||Object.keys(n);t.patch?Object.entries(t.patch).forEach(([e,t])=>{n[e].shown=t}):l.forEach(e=>{n[e].shown=t.show,t.objectIds&&Ws(e,n,"shown",t.show)})});return{finalState:immer.produce(n,e=>{e.patches=l,e.patchesForChapter[e.activeChapterId].push(...l)}),patches:l,inversePatches:i}}!function(e){class t{constructor(){}}t.type="[Engine Nodes] Reset",e.Reset=t;class n{constructor(e){this.nodeState=e}}n.type="[Engine Nodes] init nodes",e.InitNodeState=n;class l{constructor(e){this.patches=e}}l.type="[Engine Nodes] patch nodes",e.ApplyPatch=l;class i{constructor(e){this.activeChapterId=e}}i.type="[Engine Nodes] set active chapter",e.SetActiveChapter=i;class a{constructor(e,t){this.originalChapterId=e,this.copyChapterId=t}}a.type="[Engine Nodes] Duplicate node state",e.DuplicateNodeState=a;class o{constructor(e,t,n,l=!0){this.show=e,this.objectIds=t,this.patch=n,this.record=l}}o.type="[Engine Nodes] update nodes shown",e.UpdateNodesShown=o;class s{constructor(e){this.objectId=e}}s.type="[Engine Nodes] update nodes selected",e.UpdateNodeSelected=s;class r{constructor(e,t,n){this.checked=e,this.objectIds=t,this.patch=n}}r.type="[Engine Nodes] update nodes checked",e.UpdateNodesChecked=r;class c{constructor(e,t,n){this.pickable=e,this.objectIds=t,this.patch=n}}c.type="[Engine Nodes] update nodes pickable",e.UpdateNodesPickable=c;class u{constructor(e,t,n){this.recipe=e,this.objectIds=t,this.patch=n}}u.type="[Engine Nodes] update nodes paint",e.UpdateNodesPaint=u}(Bs||(Bs={})),function(e){class t{constructor(){}}t.type="[Undo] Reset",e.Reset=t;class n{constructor(e){this.chapterId=e}}n.type="[Undo] Undo",e.Undo=n;class l{constructor(e){this.chapterId=e}}l.type="[Undo] Undo All",e.UndoAll=l;class i{constructor(e){this.chapterId=e}}i.type="[Undo] Redo",e.Redo=i;class a{constructor(e){this.patches=e}}a.type="[Undo] Store Patches",e.SavePatches=a}($s||($s={}));const qs={activeChapterId:void 0,nodeState:void 0,patches:[],patchesForChapter:{}};let Xs=(()=>{let e=Vs=class{constructor(){}static getAllNodeState(e){return e.nodeState}static getActiveChapter(e){return e.activeChapterId}static getPatches(e){return e.patches}static getNodes(e){return void 0===e.activeChapterId||void 0===e.nodeState?{}:e.nodeState[e.activeChapterId]||{}}static getNodePaint(e){return t=>e.nodeState[e.activeChapterId][t].paint}static getNodeIds(e){return Object.keys(Vs.getNodes(e))}static getCheckedNodeIds(e){return Object.values(Vs.getNodes(e)).filter(e=>e.checked).map(e=>e.objectId)}static getCheckedNodes(e){return Vs.getCheckedNodeIds(e).map(t=>e.nodeState[e.activeChapterId][t])}static getUncheckedNodeIds(e){return Vs.getNodeIds(e).filter(t=>!e.nodeState[e.activeChapterId][t].checked)}static getSelectedNode(e){const t=Vs.getNodeIds(e).find(t=>e.nodeState[e.activeChapterId][t].selected);return t?e.nodeState[e.activeChapterId][t]:void 0}reset(e,t){e.patchState(immer.produce(e.getState(),e=>{e.activeChapterId=void 0,e.nodeState=void 0,e.patches=[],e.patchesForChapter={}}))}applyPatch(e,t){const n=immer.applyPatches(e.getState(),t.patches),l=immer.produce(n,e=>{e.patchesForChapter[e.activeChapterId].push(...t.patches),e.patches=t.patches});e.patchState(l)}initNodeState(e,t){e.patchState({nodeState:t.nodeState})}setActiveChapter(e,t){const n=e.getState(),l=immer.produce(n,e=>{e.activeChapterId=t.activeChapterId,e.patchesForChapter[t.activeChapterId]=e.patchesForChapter[t.activeChapterId]||[],e.patches=e.patchesForChapter[t.activeChapterId]});e.patchState(l)}duplicateNodeState(e,t){const n=e.getState(),l=immer.produce(n,e=>{e.nodeState[t.copyChapterId]=e.nodeState[t.originalChapterId],e.patchesForChapter[t.copyChapterId]=e.patchesForChapter[t.originalChapterId].map(e=>(e.path[1]=t.copyChapterId,e))});e.patchState(l)}updateNodesShown(e,t){const n=e.getState(),{finalState:l,patches:i,inversePatches:a}=Gs(n,t);e.patchState(l),t.record&&e.dispatch(new $s.SavePatches([{forward:i,inverse:a,patchAction:Bs.ApplyPatch}]))}updateNodesSelected(e,t){const n=e.getState(),l=immer.produce(n,e=>{const n=e.nodeState[e.activeChapterId],l=Object.keys(n);switch(t.objectId){case void 0:l.forEach(e=>n[e].selected=!1);break;default:l.forEach(e=>n[e].selected=!1),n[t.objectId].selected=!0}});e.patchState(l)}updateNodesChecked(e,t){const n=e.getState(),[l,i,a]=immer.produceWithPatches(n,e=>{const n=e.nodeState[e.activeChapterId];switch(t.patch){case void 0:(t.objectIds||Object.keys(n)).forEach(e=>{n[e].checked=t.checked,t.objectIds&&Ws(e,n,"checked",t.checked)});break;default:Object.entries(t.patch).forEach(([e,t])=>n[e].checked=t)}}),o=immer.produce(l,e=>{e.patches=i});e.patchState(o)}updateNodesPickable(e,t){const n=e.getState(),[l,i,a]=immer.produceWithPatches(n,e=>{const n=e.nodeState[e.activeChapterId];t.patch?Object.entries(t.patch).forEach(([e,t])=>n[e].pickable=t):(t.objectIds||Object.keys(n)).forEach(e=>{n[e].pickable=t.pickable,t.objectIds&&Ws(e,n,"pickable",t.pickable)})}),o=immer.produce(l,e=>{e.patches=i,e.patchesForChapter[e.activeChapterId].push(...i)});e.patchState(o),e.dispatch(new $s.SavePatches([{forward:i,inverse:a,patchAction:Bs.ApplyPatch}]))}updateNodesPaint(e,t){const n=e.getState(),[l,i,a]=immer.produceWithPatches(n,e=>{const n=e.nodeState[e.activeChapterId],l=t.objectIds||Object.keys(n);t.patch?Object.entries(t.patch).forEach(([e,t])=>n[e].paint=t):l.forEach(e=>{n[e].paint=t.recipe,t.objectIds&&Ws(e,n,"paint",t.recipe)})}),o=immer.produce(l,e=>{e.patches=i,e.patchesForChapter[e.activeChapterId].push(...i)});e.patchState(o),e.dispatch(new $s.SavePatches([{forward:i,inverse:a,patchAction:Bs.ApplyPatch}]))}};return Object(y.__decorate)([Object(O.a)(Bs.Reset),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Bs.Reset]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"reset",null),Object(y.__decorate)([Object(O.a)(Bs.ApplyPatch),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Bs.ApplyPatch]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"applyPatch",null),Object(y.__decorate)([Object(O.a)(Bs.InitNodeState),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Bs.InitNodeState]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"initNodeState",null),Object(y.__decorate)([Object(O.a)(Bs.SetActiveChapter),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Bs.SetActiveChapter]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setActiveChapter",null),Object(y.__decorate)([Object(O.a)(Bs.DuplicateNodeState),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Bs.DuplicateNodeState]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"duplicateNodeState",null),Object(y.__decorate)([Object(O.a)(Bs.UpdateNodesShown),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Bs.UpdateNodesShown]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"updateNodesShown",null),Object(y.__decorate)([Object(O.a)(Bs.UpdateNodeSelected),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Bs.UpdateNodeSelected]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"updateNodesSelected",null),Object(y.__decorate)([Object(O.a)(Bs.UpdateNodesChecked),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Bs.UpdateNodesChecked]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"updateNodesChecked",null),Object(y.__decorate)([Object(O.a)(Bs.UpdateNodesPickable),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Bs.UpdateNodesPickable]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"updateNodesPickable",null),Object(y.__decorate)([Object(O.a)(Bs.UpdateNodesPaint),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Bs.UpdateNodesPaint]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"updateNodesPaint",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Hs]),Object(y.__metadata)("design:returntype",void 0)],e,"getAllNodeState",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Hs]),Object(y.__metadata)("design:returntype",void 0)],e,"getActiveChapter",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Hs]),Object(y.__metadata)("design:returntype",void 0)],e,"getPatches",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Hs]),Object(y.__metadata)("design:returntype",void 0)],e,"getNodes",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Hs]),Object(y.__metadata)("design:returntype",void 0)],e,"getNodePaint",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Hs]),Object(y.__metadata)("design:returntype",void 0)],e,"getNodeIds",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Hs]),Object(y.__metadata)("design:returntype",void 0)],e,"getCheckedNodeIds",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Hs]),Object(y.__metadata)("design:returntype",void 0)],e,"getCheckedNodes",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Hs]),Object(y.__metadata)("design:returntype",void 0)],e,"getUncheckedNodeIds",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Hs]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedNode",null),Vs=Object(y.__decorate)([Object(O.g)({name:"engineNodes",defaults:qs})],e)})();class Ks{constructor(e={center:[0,0,0],edge:[1,1,1],centerBias:1,edgeBias:0,power:1}){const{edge:t,center:n,centerBias:l,edgeBias:i,power:a}=e;this.edge=t,this.center=n,this.centerBias=l,this.edgeBias=i,this.power=a}static toEngine(e){const{center:t,edge:n,centerBias:l,edgeBias:i,power:a}=e;return[[...t],[...n],l,i,a]}}class Zs{constructor(e={center:0,edge:1,centerBias:1,edgeBias:0,power:1}){const{edge:t,center:n,centerBias:l,edgeBias:i,power:a}=e;this.edge=t,this.center=n,this.centerBias=l,this.edgeBias=i,this.power=a}static toEngine(e){const{center:t,edge:n,centerBias:l,edgeBias:i,power:a}=e;return[t,n,l,i,a]}}function Ys(e,t){switch(!0){case void 0===e[t]:return;case!1===e[t]:return!1;case"number"==typeof e[t]:return 100*e[t];default:return new Zs({center:e[t][0],edge:e[t][1],centerBias:e[t][2],edgeBias:e[t][3],power:e[t][4]})}}class Qs{constructor(e={}){const{tintColor:t,saturation:n,contrast:l,brightness:i,opacity:a}=e;this.tintColor=t,this.saturation=n,this.contrast=l,this.brightness=i,this.opacity=a}static fromEngine(e){const t=(()=>{switch(!0){case void 0===e.tintColor:return;case!1===e.tintColor:return!1;case Array.isArray(e.tintColor):return 3===e.tintColor.length?[...e.tintColor]:new Ks({center:e.tintColor[0],edge:e.tintColor[1],centerBias:e.tintColor[2],edgeBias:e.tintColor[3],power:e.tintColor[4]})}})();return new Qs({tintColor:t,saturation:Ys(e,"saturation"),brightness:Ys(e,"brightness"),contrast:Ys(e,"contrast"),opacity:Ys(e,"opacity")})}static toEngine(e){let t=!1!==e.tintColor&&void 0,n=!1!==e.saturation&&void 0,l=!1!==e.brightness&&void 0,i=!1!==e.contrast&&void 0,a=!1!==e.opacity&&void 0;return Array.isArray(e.tintColor)?t=[...e.tintColor]:e.tintColor&&e.tintColor instanceof Ks&&(t=Ks.toEngine(e.tintColor)),"number"==typeof e.saturation?n=e.saturation/100:e.saturation instanceof Zs&&(n=Zs.toEngine(e.saturation)),"number"==typeof e.brightness?l=e.brightness/100:e.brightness instanceof Zs&&(l=Zs.toEngine(e.brightness)),"number"==typeof e.contrast?i=e.contrast/100:e.contrast instanceof Zs&&(i=Zs.toEngine(e.contrast)),"number"==typeof e.opacity?a=e.opacity/100:e.opacity instanceof Zs&&(a=Zs.toEngine(e.opacity)),{tintColor:t,saturation:n,brightness:l,contrast:i,opacity:a}}}function er(){return Human.scene.colorRecipes?Human.scene.colorRecipes.getRecipes():[]}class tr{constructor(e){this.shown="majorityWins",this.selected="majorityWins",this.pickable="majorityWins",e.forEach(e=>{this[e]="majorityWins"})}}let nr=(()=>{class e{constructor(e,t,n){this.store=e,this.labelService=t,this.graphService=n}getMinimumGraphSync(e,t,n){const l=er(),i=Object.keys(new hs(l)),a=Is(e,t,i),o=function(e,t,n){const l=Object.keys(t),i=Ss.getInitialVoterState(n,l),a=Ss.getInitialElectionDepth(n,e),o=Object(Mt.range)(a,-1).reduce((n,l)=>{const i=Ss.getEligibleElections(e,Object.keys(n.remainingVoters),l),a=Ss.getElectionResults(e,n.remainingVoters,i,t),o=function(e){return e.reduce((e,t)=>{const n=Object.keys(t).map(e=>(function(e,t,n,l){const i=l.reduce((t,l)=>(t[l]={[e]:!n},t),{});return i[t]={[e]:n},i})(e,t[e].id,t[e].result,t[e].dissenters)).reduce((e,t)=>Object(Mt.merge)(e,t),{});return Object.keys(n).forEach(t=>{e[t]=n[t]}),e},{})}(a.results);return Object.keys(o).forEach(e=>{n.syncGraph[e]=o[e]}),n.remainingVoters=a.remainingVoters,n},{syncGraph:{},remainingVoters:i}).syncGraph;return function(e,t,n,l){const i=t.reduce((t,i)=>{const a=e[i],o=e[l.predecessors[i]];for(const e of n)a[e]===o[e]&&t.push({successorId:i,prop:e});return t},[]);for(const a of i)delete e[a.successorId][a.prop],0===Object.keys(e[a.successorId]).length&&delete e[a.successorId];return e}(o,Object.keys(o).filter(t=>!e.roots[t]&&!!e.successors[t]),l,e)}(e,JSON.parse(JSON.stringify(new tr(l))),a);Object.entries(t).forEach(([e,t])=>{const n=Object(Mt.omit)(t,i);Object(Mt.isEmpty)(n)||(o[e]=Object.assign({},o[e]||{},n))});const s=new gs;return Object.entries(o).forEach(([e,t])=>{s[this.switchNamespace(e,n)]=t},this),s}convertGraphSync(e){const t={},n={},l={},i={},a={},o=er();return Object.entries(e).forEach(([e,s])=>{Object.entries(s).forEach(([s,r])=>{"shown"===s?t[e]=r:"selected"===s?n[e]=r:"pickable"===s?l[e]=!r:o.find(e=>e===s)?i[s]=Object.assign({},i[s],{[e]:r}):a[e]=Object.assign({},a[e]||{},{[s]:r})},this)},this),{showObjects:t,selectObjects:n,pickThroughObjects:l,colorRecipeObjects:i,synchronization:a}}switchNamespace(e,t){return t[e]||e}serializeTimelineMaps(e,t){const n=e.timelineMap;return n.forEach(e=>{e.data.timeline=this.switchNamespace(e.data.timeline,t)}),n}serializeProperties(e){const t=Object.assign({},e.properties),n=Human.properties.properties["annotations.layout.type"];return"draggable"!==n&&(t["annotations.layout.type"]=n),t}serializeHotspots(e,t){let n=[...e.hotspots],l={};return t.filter(t=>t.chapterId===e.id).forEach(e=>{const t=this.labelService.serializeLabel(e,n.length);n=[...n,...t.hotspots],l=Object.assign({},l,t.data)}),{customData:l,hotspots:n}}serializeMedia(e){return e.media?Object.entries(e.media).reduce((e,[t,n])=>(e[t]=Object.assign({},n.data),e),{}):null}serializeBackground(e){return e?Object(R.classToClass)(e):{}}serializeUI(e,t){return Object(Mt.isEmpty)(t)?{play:{count:1}}:t}calcMinimumPaintState(e,t){return Object.keys(e.roots).reduce((n,l)=>Object.assign({},n,function n(l,i=!0){const a=(e.successors[l]||[]).reduce((e,i)=>{const a=!Object(Mt.isEqual)(t[l],t[i]);return Object.assign({},e,n(i,a))},{});return i?Object.assign({[l]:t[l]},a):a}(l)),{})}serializeChapter(e,t,n,l,i){const a=this.serializeHotspots(t,l),o=Object.assign({},t.customData,a.customData),s={id:i[t.id],displayName:t.info.displayName,description:t.info.description,[t.camera.action]:t.camera.location,background:this.serializeBackground(t.background),hotspots:a.hotspots,clippingPlanes:{clips:t.clippingPlanes.clips,boundary:t.clippingPlanes.boundary},ui:this.serializeUI(t,t.ui),media:this.serializeMedia(t),graph:t.graph||{},timelineMap:t.timelineMap||[],customData:o,viewModes:t.viewModes,lights:t.lights,recipes:t.recipes||{},transparencyMode:t.transparencyMode||"",fallbackTransparency:t.fallbackTransparency||"",properties:this.serializeProperties(t),effects:t.effects||{},options:t.options,transitions:t.transitions,environment:t.environment||{},legend:t.legend||[]},r=this.store.selectSnapshot(Xs.getAllNodeState)[t.id],c=Object.keys(r).reduce((e,t)=>{const n=r[t];return e.boolState[t]={shown:n.shown,pickable:n.pickable},e.paintState[t]=Qs.toEngine(n.paint),e},{boolState:{},paintState:{}}),u=this.getMinimumGraphSync(e,c.boolState,n);return Object.entries(this.convertGraphSync(u)).forEach(([e,t])=>{s[e]=t}),s.synchronization=this.calcMinimumPaintState(e,c.paintState),s}serializeSingleChapter(e,t={},n,l){const i=new hs(er()),a=ks.createGraphFromSrc(Object.values(Human.scene.rootObjects),"objectId","objects",i);return this.serializeChapter(a,e,t,n,l)}serialize(e,t,n,l){const i=new hs(er()),a=ks.createGraphFromSrc(Object.values(Human.scene.rootObjects),"objectId","objects",i);return e.map(e=>this.serializeChapter(a,e,t,n,l))}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(O.i),l.Xb(Ns),l.Xb(Ts))},token:e,providedIn:"root"}),e})();const lr=1e-4;var ir;!function(e){function t(e,t=0){["x","y","z"].forEach(n=>{void 0!==e[n]&&Math.abs(e[n]-t)<lr&&delete e[n]})}function n(e){["translate","rotate","pivot"].forEach(n=>{void 0!==e[n]&&(t(e[n]),0===Object.keys(e[n]).length&&delete e[n])}),void 0!==e.scale&&(t(e.scale,1),0===Object.keys(e.scale).length&&delete e.scale)}function l(e,t){["backfaces","displayName","layer"].forEach(n=>{e[n]&&(t[n]=e[n])})}function i(e,t){const l=new is;l.translate=JSON.parse(JSON.stringify(e.translate)),l.rotate=JSON.parse(JSON.stringify(e.rotate)),l.scale=JSON.parse(JSON.stringify(e.scale)),l.pivot=JSON.parse(JSON.stringify(e.pivot)),n(l),Object.entries(l).forEach(([e,n])=>{t[e]=JSON.parse(JSON.stringify(n))}),t.transformId&&delete t.transformId}function a(e,t){const n=["geometryId","morphId","materialId"],l=[];return e.renderables&&e.renderables.forEach(e=>{const t=new ls;n.forEach(n=>{e[n]&&(t[n]=e[n])}),e.layer&&(t.layer=e.layer),l.push(t)}),1===l.length?t=Object.assign({},t,l[0]):l.length>1&&(t.renderables=l),t}e.filterTransformProperties=n,e.serializeObjectProperties=l,e.serializeTransformData=i,e.serializeRenderables=a,e.serializeHumanObject=function e(t,n){if(n[t.objectId])return null;let o=new as;return o.objectId=t.objectId,l(t,o),i(t,o),o=a(t,o),t.objects&&t.objects.length&&(o.objects=[]),t.objects.forEach(t=>{const l=e(t,n);null!==l&&o.objects.push(l)},this),o}}(ir||(ir={}));class ar{constructor(){this.firstTime=0,this.lastTime=1}}let or=(()=>{class e{constructor(){}getChapterLocalTimerange(e){const t=Human.timeline.activeRoot._chapters.find(t=>t.id===e);return Object(R.plainToClass)(ar,t.timeRange)}mapGlobalTimeToLocal(e,t={}){const n=Human.timeline.activeRoot.mapGlobalTime(e,t);return n.time<0&&(n.time=0),n}mapLocalTimeToGlobal(e,t){const n=Human.timeline.activeRoot._chapters.find(t=>t.id===e);return Human.timeline.activeRoot.mapBranchTime(n,t)}isChapterAnimated(e){return e.timelineMap.filter(e=>"dummy"!==Object(Mt.get)(e,"data.timeline")&&"dummy"!==Object(Mt.get)(e,"data.timeline.id")&&"dummy"!==Object(Mt.get)(e,"data.timeline.id.id")).length>0}isChapterLooped(e){return!0===Object(Mt.get)(e,"loop")||-1===Object(Mt.get)(e,"ui.play.count")}scrub(e){Human.timeline.scrub({time:e.time,borderCondition:{which:e.which?e.which:"first",direction:"forward"}})}getTimeFrame(){return Human.timeline.getTimeFrame()}getTime(){return Human.timeline.time}isPlaying(){return Human.timeline.playing}hasChapterFinished(e){const t=this.getChapterLocalTimerange(e);return this.mapGlobalTimeToLocal(Human.timeline.time).time===t.lastTime}play(e){this.playParams=Object.keys(e).reduce((e,t)=>(void 0===e[t]&&delete e[t],e),Object.assign({},e)),Human.timeline.play(this.playParams)}rewind(e){const t=this.mapLocalTimeToGlobal(e,0);this.scrub({time:t,which:"second"})}unpause(e){this.hasChapterFinished(e)&&this.rewind(e),Human.timeline.unpause()}pause(){Human.timeline.pause()}}return e.ngInjectableDef=l.Wb({factory:function(){return new e},token:e,providedIn:"root"}),e})();var sr,rr;function cr(e,t){return{showObjects:Object(Mt.mapKeys)(e.showObjects,(e,n)=>rr.renamespaceValue(n,t)),selectObjects:Object(Mt.mapKeys)(e.selectObjects,(e,n)=>rr.renamespaceValue(n,t)),pickThroughObjects:Object(Mt.mapKeys)(e.pickThroughObjects,(e,n)=>rr.renamespaceValue(n,t)),synchronization:Object(Mt.mapKeys)(e.synchronization,(e,n)=>rr.renamespaceValue(n,t))}}function ur(e,t){const n=e=>e.map(e=>e.type===vs.flyToChapter||e.type===vs.flyToObject?Object.assign({},e,{value:rr.renamespaceValue(e.value,t)}):e);return(e||[]).map(e=>Object.assign({},e,{objectId:rr.renamespaceValue(e.objectId,t),states:e.states.map(e=>Object.assign({},e,{errands:n(e.errands)}))}))}function pr(e,t){return(e||[]).map(e=>(e.data.timeline=t[e.data.timeline]||e.data.timeline,e))}function dr(e,t){return(e||[]).map(e=>(e.objectId&&(e.objectId=rr.renamespaceValue(e.objectId,t)),e))}function br(e,t){return e?{xray:Object(Mt.mapKeys)(e.xray,(e,n)=>rr.renamespaceValue(n,t)),highlight:Object(Mt.mapKeys)(e.highlight,(e,n)=>rr.renamespaceValue(n,t))}:{}}function gr(e,t){const n=function(e,t){return"string"==typeof e?[t[e]||e]:e.map(e=>t[e]||e)}(e.stateId,t),l=e.assetLibraries.tweens.map(e=>rr.renamespaceValue(e,t)),i=e.assetLibraries.reflections.map(e=>rr.renamespaceValue(e,t)),a=Object(Mt.mapValues)(e.reflections,(e,n)=>rr.renamespaceValue(e,t)),o=function(e,t){return e.map(e=>Object.assign({},e,cr(e,t),{colorRecipeObjects:br(e.colorRecipeObjects,t),timelineMap:pr(e.timelineMap,t),labels:ur(e.labels,t),hotspots:dr(e.hotspots,t)}))}(e.chapters,t),s=function e(t,n){for(const l of t)["objectId","displayName","geometryId","morphId","materialId"].forEach(e=>{l[e]&&(l[e]=rr.renamespaceValue(l[e],n))}),e(l.objects||[],n);return t}(e.sceneGraph,t);return Object.assign({},e,{stateId:n},cr(e,t),{assetLibraries:Object.assign({},e.assetLibraries,{tweens:l,reflections:i}),reflections:a,chapters:o,sceneGraph:s})}!function(e){e.updateChapterIds=function(e,t){return Object.keys(e).reduce((n,l)=>(n[t[l]]=e[l],n),{})},e.duplicateChapter=function(e,t,n){return Object.assign({},n,{[t]:n[e]})},e.deleteChapter=function(e,t){const n=Object.assign({},t);return delete n[e],n},e.refreshEngineLookup=function(e,t){Human.modules.moduleData[e].tweenParticleLookup=t}}(sr||(sr={})),function(e){function t(e,t){return Object.entries(t).reduce((e,[t,n])=>{if(e.startsWith(t)){const l=new RegExp(`^${t}`);e=e.replace(l,n)}return e},e||"")}e.renamespaceValue=t,e.renamespaceKeys=function(e,n){return Object.entries(e).reduce((e,[l,i])=>(e[t(l,n)]=i,e),{})},e.renamespaceAssetLibrary=function(e,n,l){if(!l)return e;const i=e.tweens.map(e=>t(e,n)),a=e.reflections.map(e=>t(e,n));return Object.assign({},e,{tweens:i,reflections:a})},e.renamespaceReflections=function(e,n,l){return l?Object(Mt.mapValues)(e,e=>t(e,n)):e}}(rr||(rr={}));const hr="context-label";class mr{}class xr{}class fr{}class _r{}var yr;let Or=class{constructor(){this[yr]=!0}};var wr;yr=immer.immerable,Object(y.__decorate)([Object(R.Type)(()=>_s),Object(R.Type)(()=>fr),Object(R.Type)(()=>rs),Object(R.Type)(()=>_r),Object(R.Expose)(),Object(y.__metadata)("design:type",String)],Or.prototype,"id",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"info",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Array)],Or.prototype,"labels",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Array)],Or.prototype,"hotspots",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",fr)],Or.prototype,"synchronization",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",$o)],Or.prototype,"background",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"lights",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Array)],Or.prototype,"timelineMap",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"camera",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"transitions",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"properties",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Boolean)],Or.prototype,"loop",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"customData",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"clippingPlanes",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",class{})],Or.prototype,"ui",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",_r)],Or.prototype,"graph",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"viewModes",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"recipes",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",String)],Or.prototype,"transparencyMode",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"fallbackTransparency",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"effects",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"environment",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"pickThroughObjects",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"showObjects",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"options",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Object)],Or.prototype,"media",void 0),Object(y.__decorate)([Object(R.Expose)(),Object(y.__metadata)("design:type",Array)],Or.prototype,"legend",void 0),Or=Object(y.__decorate)([Object(R.Exclude)()],Or),(wr||(wr={})).makeChapterIdMap=function(e,t){return e.reduce((e,n)=>(e[n.id]=!0===t?ms.idWithPrefix("chapter"):n.id,e),{})};var vr=function(e){return e[e.LeftClip=0]="LeftClip",e[e.RightClip=1]="RightClip",e[e.BottomClip=2]="BottomClip",e[e.TopClip=3]="TopClip",e[e.FrontClip=4]="FrontClip",e[e.BackClip=5]="BackClip",e}({});const Cr={0:"left",1:"right",2:"bottom",3:"top",4:"front",5:"back"},jr={enabled:!1,clips:{left:{clipId:vr.LeftClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},right:{clipId:vr.RightClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},back:{clipId:vr.BackClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},front:{clipId:vr.FrontClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},top:{clipId:vr.TopClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},bottom:{clipId:vr.BottomClip,enabled:!1,fade:!1,fadeDistance:0,progress:0}}};let kr=(()=>{class e{constructor(e,t){this.serializeChapterService=e,this.labelService=t}addChapterToEngine(e,t){const n=wr.makeChapterIdMap([e],!1),l=this.serializeChapterService.serializeSingleChapter(e,{},[],n);l.synchronization=JSON.parse(JSON.stringify(e.synchronization));const i=new Human.timeline.BranchTimeline(l);Human.timeline.activeRoot.addChapter(i,{rebuild:!0,position:t})}removeChapterFromEngine(e){Human.timeline.activeRoot._chapters=Human.timeline.activeRoot._chapters.filter(t=>t.id!==e.id),Human.timeline.activeRoot.build()}copyChapter(e,t){const n=Object(R.classToClass)(e);return n.id=t,n.labels.forEach(e=>{e.id=ms.idWithPrefix("label"),e.chapterId=n.id}),n.readyState={model:!0,animation:!0},n}getCurrentChapterId(){return Human.timeline.activeRoot._nowBranch.id}fromHumanChapter(e,t,n,l){const i=Object.assign({},n),a=e.chapters[l];i.environment=Object.assign({},a.environment),i.transitions=Object.assign({},a.transitions),a.transparencyMode&&(i.transparencyMode=a.transparencyMode),i.showObjects=Object.assign({},e.chapters[l].showObjects),i.pickThroughObjects=Object.assign({},e.chapters[l].pickThroughObjects),i.id||(i.id=ms.idWithPrefix("chapter"));let o=!1;i.timelineMap=Object.values(n.maps).map(e=>("dummy"!==e.data.timeline.id&&(o=!0),{start:e.start,end:e.end,data:{timeline:e.data.timeline.id,start:e.data.start,end:e.data.end,fit:e.data.fit||!1,onEnd:e.data.onEnd}})),delete i.maps;let s=0;const r=!!n.animation&&n.animation.loop;o&&r?s=-1:o&&!r&&(s=1),i.ui=n.ui&&!Object(Mt.isEmpty)(n.ui)?n.ui:{play:{count:s}};const c=fs.Annotation,u=[...i.annotations||[]].map(e=>this.labelService.deserializeAnnotation(e,i,c)),p=[],d=this.groupHotspots([...i.hotspots||[]].filter(l=>{const i=this.labelService.filterHotspot(e,n,l);return i?l.theme||(l.theme="module"===t?Os.studioNext:Os.classicHotspot):p.push(l),i})).map(t=>this.labelService.deserializeHotspots(e,n,l,...t));i.labels=[...u,...d],delete i.annotations,i.background=$o.deserialize(n.background);const b=Object(R.plainToClass)(Or,i);return b.hotspots=p,b.readyState={model:!1,animation:!1},b.clippingPlanes=Object(Mt.isEmpty)(b.clippingPlanes)?jr:this.sanitizeClippingPlanes(b.clippingPlanes),b.legend=[...a.legend||[]],b}sanitizeClippingPlanes(e){const t=Object.values(e.clips).some(e=>e.progress>0),n=Object(Mt.mapKeys)(e.clips,(e,t)=>Cr[t]||t);return Object.assign({},e,{clips:n,enabled:t})}groupHotspots(e){const t={},n=e=>e.primitiveIndex?e.primitiveIndex.toFixed(0):e.pos?e.pos.map(e=>e.toFixed(3)).join(":"):Math.random().toFixed(3),l=e=>RegExp("^circle-(plus|minus)").test(e)?"pair":"single";return e.forEach(e=>{const i=[l(e.type),e.objectId,n(e)].join("|");i in t?t[i].push(e):t[i]=[e]}),Object.values(t)}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(nr),l.Xb(Ns))},token:e,providedIn:"root"}),e})();var Sr=n("GyhO"),Pr=n("7wxJ");let Mr=(()=>{class e{constructor(e,t,n,l){this.engineService=e,this.imageService=t,this.labelsService=n,this.store=l}localResize(e,t){const n=Human.renderer.canvas.canvas,l=Human.renderer.canvas.annotationCanvas,i=n.parentNode,a=i.clientWidth,o=i.clientHeight;return i.width=e,i.height=t,n.width=e,n.height=t,l.width=e,l.height=t,i.style.width=`${e}px`,i.style.height=`${t}px`,Human.renderer.canvas.init(),Human.renderer.viewportDirty=!0,Human.renderer.camera.updateCanvas(),Human.renderer.postprocess.updateCanvas(),Human.renderer.draw.updateCanvas(),Human.renderer.viewportDirty=!0,Human.renderer.prepareFrame(),Human.renderer.forceRenderFrame(),[a,o]}canvasToImage(e,t="original"){const n=e.width/e.height,l=this.engineService.getCanvas();let{width:i,height:a}=l,o=.5*(l.width-i),s=0;switch(t){case"square":a>i?a=i:i=a,o=.5*(l.width-i),s=.5*(l.height-a);break;case"original":i=n*a}return new Z.a(t=>{const n=e.getContext("2d");Human.renderer.forceRenderFrame(),n.drawImage(l,o,s,i,a,0,0,e.width,e.height),t.next(),t.complete()})}canvasToImageWithResize(e){const t=this.engineService.getCanvas();t.style.opacity="0",this.store.dispatch(new Ji(!1));const[n,l]=this.localResize(e.width,e.height),i=e.getContext("2d");return new Z.a(e=>{setTimeout(()=>{Human.renderer.viewportDirty=!0,Human.renderer.prepareFrame(),Human.renderer.forceRenderFrame(),i.drawImage(t,0,0,t.width,t.height),this.localResize(n,l),document.getElementById("theCanvas").style.opacity="",this.store.dispatch(new Ji(!0)),e.next(),e.complete()},10)})}drawRadialGradient(e,t){const n=t.colors,[l,i]=t.colorStops.map(t=>((e,t,n)=>{const[l,i]=[Math.pow(t/2,2),Math.pow(n/2,2)];return e/100*Math.pow(l+i,.5)})(t,e.width,e.height)),a=e.getContext("2d"),[o,s]=[e.width/2,e.height/2],r=a.createRadialGradient(o,s,l,o,s,i);r.addColorStop(t.colorStops[0]/100,`rgba(${n.slice(0,4).join(",")})`),r.addColorStop(t.colorStops[1]/100,`rgba(${n.slice(4,8).join(",")})`),a.fillStyle=r,a.fillRect(0,0,e.width,e.height)}drawLinearGradient(e,t){const n=t.colors,l=e.getContext("2d"),[i,a]=[e.width/2,e.height/2],o=l.createLinearGradient(i,a,i,e.height);o.addColorStop(t.colorStops[0]/100,`rgba(${n.slice(0,4).join(",")})`),o.addColorStop(t.colorStops[1]/100,`rgba(${n.slice(4,8).join(",")})`),l.fillStyle=o,l.fillRect(0,0,e.width,e.height)}takeSnapshot(e,t,n,l,i,a){const{imageType:o,imageQuality:s,copyrightEnabled:r,crop:c}=a,p=document.createElement("canvas");p.width=e,p.height=t,"radial"===n.gradientType?this.drawRadialGradient(p,n):"linear"===n.gradientType&&this.drawLinearGradient(p,n);const d=this.engineService.getCanvas(),b=[],g=(p.height>d.height||p.width>d.width?this.canvasToImageWithResize(p):this.canvasToImage(p,c)).pipe(Object(u.a)(()=>p));b.push(g);const h=[],m=this.labelsService.getLabelContainer();return i&&m&&h.push(m.nativeElement),h.push(...l),b.push(...h.map(n=>(n instanceof HTMLCanvasElement?Object(z.a)(n):this.imageService.elementToCanvas(n,!0)).pipe(Object(_t.a)(n=>this.imageService.fitCanvas(n,{width:e,height:t}))))),Object(Sr.a)(b).pipe(Object(Pr.a)(),Object(u.a)(e=>this.imageService.combineCanvasElements(e)),Object(_t.a)(e=>r?this.writeLogoToCanvas(e,a):Object(z.a)(e)),Object(_t.a)(e=>this.imageService.canvasToBlob(e,o,s)))}writeLogoToCanvas(e,t){return this.getLogoImage(t.copyrightImagePath).pipe(Object(u.a)(n=>{let{width:l,height:i}=n;const{width:a,height:o}=e;.1*a>l&&(i=i/l*(l=.1*a));const{xOffset:s,yOffset:r}=this.getLogoPosition(a,o,l,i,t);return e.getContext("2d").drawImage(n,s,r,l,i),e}),Object(L.a)(()=>Object(z.a)(e)))}getLogoImage(e){return new Z.a(t=>{const n=new Image;n.onload=()=>{t.next(n),t.complete()},n.onerror=()=>t.error(),n.src=e})}getLogoPosition(e,t,n,l,i){const{copyrightPosition:a,copyrightOffset:o}=i;let s,r;switch(a.x){case"right":s=e-n;break;case"center":s=e/2-n/2;break;default:s=0}switch(a.y){case"bottom":r=t-l;break;case"center":r=t/2-l/2;break;default:r=0}return{xOffset:s+o.x,yOffset:r+o.y}}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(Rs),l.Xb(St),l.Xb(Ns),l.Xb(O.i))},token:e,providedIn:"root"}),e})();var Tr;class Ir{constructor(){this[Tr]=!0}}Tr=immer.immerable;const Jr={colors:[245,245,245,1,245,245,245,1],gradientType:"radial",colorStops:[0,100]},zr={colors:[255,255,255,0,255,255,255,0],gradientType:"linear",colorStops:[0,100]},Lr=[{colors:[0,0,0,1,0,0,0,1],gradientType:"linear",colorStops:[0,100]},{colors:[38,38,38,1,38,38,38,1],gradientType:"linear",colorStops:[0,100]},{colors:[77,77,77,1,77,77,77,1],gradientType:"linear",colorStops:[0,100]},{colors:[115,115,115,1,115,115,115,1],gradientType:"linear",colorStops:[0,100]},{colors:[153,153,153,1,153,153,153,1],gradientType:"linear",colorStops:[0,100]},{colors:[191,191,191,1,191,191,191,1],gradientType:"linear",colorStops:[0,100]},{colors:[230,230,230,1,230,230,230,1],gradientType:"linear",colorStops:[0,100]},{colors:[255,255,255,1,255,255,255,1],gradientType:"linear",colorStops:[0,100]},{colors:[128,128,128,1,0,0,0,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,38,38,38,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,77,77,77,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,115,115,115,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,153,153,153,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,191,191,191,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,230,230,230,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,255,255,255,1],gradientType:"radial",colorStops:[0,100]},{colors:[245,208,208,1,245,208,208,1],gradientType:"linear",colorStops:[0,100]},{colors:[253,236,219,1,253,236,219,1],gradientType:"linear",colorStops:[0,100]},{colors:[255,246,219,1,255,246,219,1],gradientType:"linear",colorStops:[0,100]},{colors:[220,236,213,1,220,236,213,1],gradientType:"linear",colorStops:[0,100]},{colors:[212,229,245,1,212,229,245,1],gradientType:"linear",colorStops:[0,100]},{colors:[219,212,235,1,219,212,235,1],gradientType:"linear",colorStops:[0,100]},{colors:[164,194,244,1,164,194,244,1],gradientType:"linear",colorStops:[0,100]},{colors:[118,165,175,1,118,165,175,1],gradientType:"linear",colorStops:[0,100]},{colors:[245,208,208,1,245,208,208,1],gradientType:"radial",colorStops:[0,100]},{colors:[253,236,219,1,240,169,99,1],gradientType:"radial",colorStops:[0,100]},{colors:[255,246,219,1,250,210,92,1],gradientType:"radial",colorStops:[0,100]},{colors:[220,236,213,1,147,188,129,1],gradientType:"radial",colorStops:[0,100]},{colors:[212,229,245,1,112,164,213,1],gradientType:"radial",colorStops:[0,100]},{colors:[219,212,235,1,145,128,187,1],gradientType:"radial",colorStops:[0,100]},{colors:[164,194,244,1,112,164,213,1],gradientType:"radial",colorStops:[0,100]},{colors:[211,211,211,1,118,165,175,1],gradientType:"radial",colorStops:[0,100]}],Er=[...Lr,{colors:[10,132,130,255,5,43,51,255],gradientType:"radial",colorStops:[0,68]},{colors:[0,28,84,1,0,0,0,1],gradientType:"radial",colorStops:[12,100]}],Ar={small:{width:256,height:256},medium:{width:512,height:512},large:{width:1024,height:1024}};var Fr,Rr=n("Mc5n");const Dr={imageType:kt.JPEG,crop:"original",copyrightEnabled:!1,copyrightImagePath:"assets/images/powered-by-biodigital-color.svg",copyrightPosition:{x:"left",y:"bottom"},copyrightOffset:{x:12,y:-12},imageQuality:1},Ur={loading:!1,chapters:[],chaptersViewed:[],selectedChapter:null,isChapterAnimated:!1,thumbnails:new Map,patches:[],inversePatches:[]};let Nr=(()=>{let e=Fr=class{constructor(e,t,n,l,i){this.chapterService=e,this.snapshotService=t,this.store=n,this.animationService=l,this.engineService=i}static getStoryChapters(e){return e.chapters}static getChaptersViewed(e){return e.chaptersViewed}static getChapter(e){return Object(O.j)([Fr],t=>t.chapters.find(t=>t.id===e))}static getSelectedChapterId(e){return e.selectedChapter}static getSelectedChapter(e){return e.chapters.find(t=>t.id===e.selectedChapter)||null}static getNextChapter(e){const t=1+Fr.getSelectedChapterIndex(e);return e.chapters[t]}static getPreviousChapter(e){const t=-1+Fr.getSelectedChapterIndex(e);return e.chapters[t]}static getSelectedChapterIndex(e){return e.chapters.findIndex(t=>t.id===e.selectedChapter)}static getSelectedChapterTitle(e){return e.chapters.find(t=>t.id===e.selectedChapter).info.displayName}static getChapterCount(e){return e.chapters.length}static getRegisteredThumbnails(e){return e.thumbnails}static getIsChapterAnimated(e){return e.isChapterAnimated}static getSelectedChapterReadyState(e){const{chapters:t,selectedChapter:n}=e,l=Fr.findChapter(t,n);return Object(Mt.get)(l,"readyState")}static getChaptersLoaded(e){return{count:e.chapters.length,modelChapters:e.chapters.filter(e=>e.readyState.model),animationChapters:e.chapters.filter(e=>e.readyState.animation)}}static getAllChaptersModelsReady(e){return e.chapters.length>0&&e.chapters.every(e=>e.readyState.model)}static getAllChaptersAnimationsReady(e){return e.chapters.length>0&&e.chapters.every(e=>e.readyState.animation)}static getSelectedChapterBackground(e){const{chapters:t,selectedChapter:n}=e,l=Fr.findChapter(t,n);return Object(Mt.get)(l,"background")||Jr}static getAllChaptersBackground(e){return e.chapters.map(e=>Object(Mt.get)(e,"background"))}static getSelectedChapterAudio(e){const t=e.chapters.find(t=>t.id===e.selectedChapter);return t&&t.media?Object.values(t.media).filter(({data:e})=>"audio"===e.streamType)[0]:null}static getSelectedChapterLegend(e){const{chapters:t,selectedChapter:n}=e,l=Fr.findChapter(t,n);return Object(Mt.get)(l,"legend")||[]}static getSelectedChapterClippingPlanes(e){const{chapters:t,selectedChapter:n}=e,l=Fr.findChapter(t,n);return Object(Mt.get)(l,"clippingPlanes")}static getChapterCamera(e){const{chapters:t,selectedChapter:n}=e,l=Fr.findChapter(t,n);return Object(Mt.get)(l,"camera.location")}static findChapter(e,t){return e.find(e=>e.id===t)}setChapters(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters=t.chapters}))}SetChapterCameraAction(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).camera.action=t.cameraAction}))}setChapterUI(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).ui=t.ui}))}setChapterInfo(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).info=t.info}))}setChapterLegend(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).legend=t.legend}))}addToChapterLegend(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).legend.push(t.legend)}))}ReorderChapters(e,t){e.patchState(immer.produce(e.getState(),e=>{Object(Rr.g)(e.chapters,t.previousIndex,t.currentIndex)}))}SetChapterReadyState(e,t){const n=immer.produce(e.getState(),e=>{if(t.chapterId){const n=e.chapters.find(e=>e.id===t.chapterId);n&&(n.readyState=Object.assign({},n.readyState,t.readyState))}});e.patchState(n)}SetChapterPostProcessing(e,t){e.patchState(immer.produce(e.getState(),e=>{const n=e.chapters.find(e=>e.id===t.chapterId),l=n.properties||{};n.customData=Object.assign({},n.customData?n.customData:{},{postprocess:t.effects}),n.properties=Object.assign({},l,t.properties)}))}SetChapterTransitions(e,t){e.patchState(immer.produce(e.getState(),e=>{const n=e.chapters.find(e=>e.id===t.chapterId);n.transitions=n.transitions||{},n.transitions[t.key]=t.transition}))}SetChapterTransparencyMode(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).transparencyMode=t.transparencyMode}))}applyChapterPatch(e,t){const n=immer.applyPatches(e.getState(),t.patches);e.patchState(immer.produce(n,e=>{e.patches=[],e.inversePatches=[]}))}setChapterClippingPlane(e,t){const[n,l,i]=immer.produceWithPatches(e.getState(),e=>{const n=e.chapters.find(e=>e.id===t.chapterId);n.clippingPlanes.clips=t.clips,n.clippingPlanes.enabled=t.enabled,n.clippingPlanes.boundary=n.clippingPlanes.boundary||JSON.parse(JSON.stringify(this.engineService.getSceneBoundary()))}),a=immer.produce(n,e=>{e.patches.push(...l),e.inversePatches.push(...i)});t.record&&e.dispatch(new $s.SavePatches([{forward:a.patches,inverse:[...a.inversePatches].reverse(),patchAction:Ya}])),e.patchState(t.record?immer.produce(a,e=>{e.patches=[],e.inversePatches=[]}):a)}setChapterBackground(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).background=t.background}))}setAllChaptersBackground(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.forEach(e=>{e.background=t.background})}))}resetSelectedChapterBackground(e,t){const{selectedChapter:n}=e.getState();this.store.dispatch(new fo(n,Jr))}setSelectedChapterBackground(e,{background:t}){const n=e.getState().selectedChapter;this.store.dispatch(new fo(n,t))}selectChapter(e,t){if(!t.chapter)return;this.store.dispatch([new Bs.UpdateNodesChecked(!1),new Bs.UpdateNodeSelected]);const n=this.animationService.isChapterAnimated(t.chapter);this.store.dispatch(new mi(!!t.chapter));const l=immer.produce(e.getState(),e=>{e.chaptersViewed.some(e=>t.chapter.id===e)||e.chaptersViewed.push(t.chapter.id),e.selectedChapter=t.chapter?t.chapter.id:null,e.isChapterAnimated=n});e.patchState(l)}selectChapterById(e,{chapterId:t}){this.store.dispatch(new mi(!0)),e.patchState({selectedChapter:t})}duplicateChapter(e,t){const n=t.chapter,l=this.chapterService.copyChapter(n,t.chapterId),i=e.getState().chapters.length;this.chapterService.addChapterToEngine(Object(Mt.cloneDeep)(l),i),e.patchState(immer.produce(e.getState(),e=>{e.chapters.push(l)})),e.dispatch(new _a(n,l)),e.dispatch(new ko(n,l))}copyThumbnail(e,t){if(t.sourceChapter){const n=e.getState().thumbnails,l=immer.produce(e.getState(),e=>{const l=n.get(t.sourceChapter.id),i=new Ir;i.storyId=l.storyId,i.chapterId=l.chapterId,i.urls={small:l.urls.small.replace(t.sourceChapter.id,t.targetChapter.id),large:l.urls.large.replace(t.sourceChapter.id,t.targetChapter.id)},i.snapshot=l.snapshot?l.snapshot:l.urls.large,e.thumbnails.set(t.targetChapter.id,i)});e.patchState(l)}else e.dispatch(new So(t.targetChapter.id,kt.JPEG,92,Ar.medium,"square"))}nextChapter(e,t){const n=e.getState().chapters,l=this.chapterService.getCurrentChapterId();let i=0;(i=n.findIndex(e=>e.id===l))<n.length-1&&i++,e.dispatch(new lo(n[i]))}previousChapter(e,t){const n=e.getState().chapters,l=this.chapterService.getCurrentChapterId();let i=0;(i=n.findIndex(e=>e.id===l))>0&&i--,e.dispatch(new lo(n[i]))}lastChapter(e,t){const n=e.getState().chapters;e.dispatch(new lo(n[n.length-1]))}firstChapter(e,t){const n=e.getState().chapters;e.dispatch(new lo(n[0]))}removeChapter(e,t){const{chapters:n,selectedChapter:l}=e.getState();if(1===n.length)return;this.chapterService.removeChapterFromEngine(t.chapter);let i=n.findIndex(e=>e.id===t.chapter.id);e.patchState(immer.produce(e.getState(),e=>{e.chapters.splice(i,1)})),t.chapter.id===l&&(i===n.length-1&&i--,e.dispatch(new lo(n[i]))),e.dispatch(new wa(t.chapter))}resetStoryChaptersState(e,t){e.setState(Ur)}registerChapterThumbnails(e,t){e.patchState(immer.produce(e.getState(),e=>{e.thumbnails=new Map(t.thumbnails)}))}takeChapterPicture(e,t){const{chapterId:n,includeLabels:l,includeCopyright:i,dimensions:a,imageType:o,imageQuality:s,crop:r,layers:c}=t,u=a||Ar.large,{width:p,height:d}=u,b=this.store.selectSnapshot(Fr.getSelectedChapterBackground);let g;switch(o){case kt.PNG:g=b||Jr;break;case kt.JPEG:default:g=b&&!$o.isTransparent(b)?b:Jr}const h=b.colors.slice(0,3),m=Ye.isLight(h),x=Object.assign({},Dr,{crop:r,imageType:o,imageQuality:s,copyrightEnabled:i,copyrightImagePath:m?"assets/images/powered-by-biodigital-color.svg":"assets/images/powered-by-biodigital-white.svg"});setTimeout(()=>{this.snapshotService.takeSnapshot(p,d,g,c,l,x).subscribe(t=>{e.dispatch(new Po(n,t,u))})})}takeChapterPictureSuccess(e,t){e.patchState(immer.produce(e.getState(),e=>{const n=e.thumbnails.get(t.chapterId)||new Ir;n.snapshot=URL.createObjectURL(t.blob),e.thumbnails.set(t.chapterId,n)}))}RecordCamera(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).camera.location=t.camera}))}};return Object(y.__decorate)([Object(O.a)(ao),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ao]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setChapters",null),Object(y.__decorate)([Object(O.a)(oo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,oo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"SetChapterCameraAction",null),Object(y.__decorate)([Object(O.a)(so),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,so]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setChapterUI",null),Object(y.__decorate)([Object(O.a)(ro),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ro]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setChapterInfo",null),Object(y.__decorate)([Object(O.a)(co),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,co]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setChapterLegend",null),Object(y.__decorate)([Object(O.a)(uo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,uo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"addToChapterLegend",null),Object(y.__decorate)([Object(O.a)(po),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,po]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"ReorderChapters",null),Object(y.__decorate)([Object(O.a)(bo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,bo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"SetChapterReadyState",null),Object(y.__decorate)([Object(O.a)(go),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,go]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"SetChapterPostProcessing",null),Object(y.__decorate)([Object(O.a)(ho),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ho]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"SetChapterTransitions",null),Object(y.__decorate)([Object(O.a)(mo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,mo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"SetChapterTransparencyMode",null),Object(y.__decorate)([Object(O.a)(Ya),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ya]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"applyChapterPatch",null),Object(y.__decorate)([Object(O.a)(xo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,xo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setChapterClippingPlane",null),Object(y.__decorate)([Object(O.a)(fo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,fo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setChapterBackground",null),Object(y.__decorate)([Object(O.a)(_o),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,_o]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setAllChaptersBackground",null),Object(y.__decorate)([Object(O.a)(yo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,yo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetSelectedChapterBackground",null),Object(y.__decorate)([Object(O.a)(Oo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Object]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setSelectedChapterBackground",null),Object(y.__decorate)([Object(O.a)(lo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,lo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"selectChapter",null),Object(y.__decorate)([Object(O.a)(io),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Object]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"selectChapterById",null),Object(y.__decorate)([Object(O.a)(wo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,wo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"duplicateChapter",null),Object(y.__decorate)([Object(O.a)(ko),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ko]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"copyThumbnail",null),Object(y.__decorate)([Object(O.a)(Qa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Qa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"nextChapter",null),Object(y.__decorate)([Object(O.a)(eo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,eo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"previousChapter",null),Object(y.__decorate)([Object(O.a)(no),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,no]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"lastChapter",null),Object(y.__decorate)([Object(O.a)(to),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,no]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"firstChapter",null),Object(y.__decorate)([Object(O.a)(vo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,vo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"removeChapter",null),Object(y.__decorate)([Object(O.a)(Co),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Co]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetStoryChaptersState",null),Object(y.__decorate)([Object(O.a)(jo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,jo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"registerChapterThumbnails",null),Object(y.__decorate)([Object(O.a)(So),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,So]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"takeChapterPicture",null),Object(y.__decorate)([Object(O.a)(Po),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Po]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"takeChapterPictureSuccess",null),Object(y.__decorate)([Object(O.a)(Mo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Mo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"RecordCamera",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getStoryChapters",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getChaptersViewed",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedChapterId",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedChapter",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getNextChapter",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getPreviousChapter",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedChapterIndex",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedChapterTitle",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getChapterCount",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getRegisteredThumbnails",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getIsChapterAnimated",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedChapterReadyState",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getChaptersLoaded",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getAllChaptersModelsReady",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getAllChaptersAnimationsReady",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedChapterBackground",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getAllChaptersBackground",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedChapterAudio",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedChapterLegend",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedChapterClippingPlanes",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getChapterCamera",null),Fr=Object(y.__decorate)([Object(O.g)({name:"storyChapters",defaults:Ur})],e)})();const Hr={enableContextLabel:{enable:!0,enableInfo:!0,enableActions:!0},loading:!1,labelsCollapsed:!1,labelsCollapsedMode:ba.None,labels:[],contextLabel:null,selectedLabel:null,draggable:{pin:!0,tag:!0}};let Br=(()=>{let e=class{constructor(e,t){this.store=e,this.labelsService=t}static getLabels(e){return e.labels}static getLabelsCollapsed(e){return e.labelsCollapsed}static getLabelsCollapsedMode(e){return e.labelsCollapsedMode}static getSelectedLabelId(e){return e.selectedLabel}static getSelectedLabel(e){return e.labels.find(t=>t.id===e.selectedLabel)||null}static getContextLabel(e){return e.contextLabel}static getChapterLabels(e,t){return e.labels.filter(e=>e.chapterId===t.selectedChapter)}static getEnableContextLabel(e){return e.enableContextLabel.enable}static getEnableContextLabelInfo(e){return e.enableContextLabel.enableInfo}static getEnableContextLabelActions(e){return e.enableContextLabel.enableActions}static getLabelsDraggable(e){return e.draggable}PatchLabels(e,t){const n=immer.applyPatches(e.getState(),t.patches);e.patchState(n)}setLabelOffset(e,t){const[n,l,i]=immer.produceWithPatches(e.getState(),e=>{e.labels.find(e=>e.id===t.labelId).offset=t.offset});e.patchState(n),this.savePatches(l,i)}setLabels(e,t){e.patchState(immer.produce(e.getState(),e=>{e.labels=t.labels}))}setLabel(e,t){const[n,l,i]=immer.produceWithPatches(e.getState(),e=>{e.labels=e.labels.map(e=>e.id===t.label.id?t.label:e)});e.patchState(n),t.record&&this.savePatches(l,i)}setLabelStates(e,t){const[n,l,i]=immer.produceWithPatches(e.getState(),e=>{e.labels.find(e=>e.id===t.id).states=t.states});e.patchState(n),this.savePatches(l,i)}addLabel(e,t){const[n,l,i]=immer.produceWithPatches(e.getState(),e=>{const n=t.label.id||ms.idWithPrefix("label"),l=Object.assign({},t.label,{id:n});e.labels.push(l)});e.patchState(n),this.savePatches(l,i)}addContextLabel(e,t){const n=immer.produce(e.getState(),e=>{e.contextLabel=Object.assign({},t.label,{id:hr})});e.patchState(n)}copyLabels(e,t){const n=e.getState().labels,l=n.filter(e=>e.chapterId===t.sourceChapter.id).map(e=>Object.assign({},Object(Mt.cloneDeep)(e),{id:ms.idWithPrefix("label"),chapterId:t.targetChapter.id}));e.patchState({labels:[...n,...l]})}removeLabel(e,t){const[n,l,i]=immer.produceWithPatches(e.getState(),e=>{e.labels=e.labels.filter(e=>e.id!==t.label.id)});e.patchState(n),Human.scene.markers.delete(t.label.id),this.savePatches(l,i)}removeContextLabel(e,t){const n=immer.produce(e.getState(),e=>{e.contextLabel=void 0});Human.scene.markers.delete(hr),e.patchState(n)}removeAllChapterLabels(e,t){const[n,l,i]=immer.produceWithPatches(e.getState(),e=>{const[n,l]=Object(Mt.partition)(e.labels,e=>e.chapterId!==t.chapter.id);l.forEach(e=>Human.scene.markers.delete(e.id)),e.labels=n});e.patchState(n),this.savePatches(l,i)}selectLabel(e,t){e.patchState({selectedLabel:t.label?t.label.id:null})}resetLabels(e,t){const n=e.getState();Human.scene.markers.delete(hr),n.labels.forEach(e=>{Human.scene.markers.delete(e.id)}),e.setState(immer.produce(e.getState(),e=>{}))}convertLabels(e,t){const[n,l,i]=immer.produceWithPatches(e.getState(),e=>{t.labels.forEach(n=>{const l=e.labels.findIndex(e=>e.id===n.id);e.labels[l].theme=t.theme})});e.setState(Object.assign({},n)),this.savePatches(l,i)}enableContextLabel(e,t){e.patchState({enableContextLabel:Object.assign({},t)})}setLabelsShown(e,{labels:t,shown:n}){const l=e.getState().labels.map(e=>{const l=t.some(t=>t.id===e.id);return Object.assign({},e,{shown:l?n:e.shown})});e.patchState({labels:[...l]})}setAllLabelsShown(e,{show:t}){const n=e.getState().labels;e.dispatch(new Ma(n,t))}setLabelsCollapsed(e,{collapsed:t,collapsedMode:n}){e.patchState({labelsCollapsed:t,labelsCollapsedMode:n})}setLabelsDraggable(e,t){e.patchState({draggable:Object.assign({},t.draggable)})}savePatches(e,t){this.store.dispatch(new $s.SavePatches([{forward:e,inverse:t,patchAction:ga}]))}};return Object(y.__decorate)([Object(O.a)(ga),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ga]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"PatchLabels",null),Object(y.__decorate)([Object(O.a)(ha),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ha]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setLabelOffset",null),Object(y.__decorate)([Object(O.a)(ma),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ma]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setLabels",null),Object(y.__decorate)([Object(O.a)(va),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,va]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setLabel",null),Object(y.__decorate)([Object(O.a)(Ca),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ca]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setLabelStates",null),Object(y.__decorate)([Object(O.a)(xa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,xa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"addLabel",null),Object(y.__decorate)([Object(O.a)(fa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,fa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"addContextLabel",null),Object(y.__decorate)([Object(O.a)(_a),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,_a]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"copyLabels",null),Object(y.__decorate)([Object(O.a)(ya),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ya]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"removeLabel",null),Object(y.__decorate)([Object(O.a)(Oa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Oa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"removeContextLabel",null),Object(y.__decorate)([Object(O.a)(wa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,wa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"removeAllChapterLabels",null),Object(y.__decorate)([Object(O.a)(ja),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ja]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"selectLabel",null),Object(y.__decorate)([Object(O.a)(ka),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ka]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetLabels",null),Object(y.__decorate)([Object(O.a)(Sa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Sa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"convertLabels",null),Object(y.__decorate)([Object(O.a)(Pa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Pa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"enableContextLabel",null),Object(y.__decorate)([Object(O.a)(Ma),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ma]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setLabelsShown",null),Object(y.__decorate)([Object(O.a)(Ta),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ta]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setAllLabelsShown",null),Object(y.__decorate)([Object(O.a)(Ia),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ia]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setLabelsCollapsed",null),Object(y.__decorate)([Object(O.a)(Ja),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ja]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setLabelsDraggable",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[mr]),Object(y.__metadata)("design:returntype",void 0)],e,"getLabels",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[mr]),Object(y.__metadata)("design:returntype",void 0)],e,"getLabelsCollapsed",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[mr]),Object(y.__metadata)("design:returntype",void 0)],e,"getLabelsCollapsedMode",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[mr]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedLabelId",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[mr]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedLabel",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[mr]),Object(y.__metadata)("design:returntype",void 0)],e,"getContextLabel",null),Object(y.__decorate)([Object(O.f)([Nr]),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[mr,xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getChapterLabels",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[mr]),Object(y.__metadata)("design:returntype",void 0)],e,"getEnableContextLabel",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[mr]),Object(y.__metadata)("design:returntype",void 0)],e,"getEnableContextLabelInfo",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[mr]),Object(y.__metadata)("design:returntype",void 0)],e,"getEnableContextLabelActions",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[mr]),Object(y.__metadata)("design:returntype",void 0)],e,"getLabelsDraggable",null),Object(y.__decorate)([Object(O.g)({name:"labels",defaults:Hr})],e)})(),$r=(()=>{class e{constructor(e,t,n,l){this.store=e,this.engineService=t,this.chapterSerializer=n,this.animationService=l}serializeUI(e){const t=Object.assign({},e.ui);return e.chapters.length>1&&(t.scrubber=!1,t.playPause=!1,t.tour={chapters:!0}),t}serializeAnimation(e){return this.animationService.isChapterAnimated(e)?{startTime:e.timelineMap[0].start,loop:!1!==e.loop,numChapters:1}:{}}getClippedObjects(){return 0===Human.renderer.clip.getActiveClips().length?{}:Human.scene.getLeaves().reduce((e,t)=>(Human.scene.objects[t].culledByClip&&(e[t]=!0),e),{})}generateTrimObjectMap(e,t){const n=this.engineService.getSceneGraph(Human.scene.rootObjects);let l={};t.graph.hidden&&(l=Object.assign({},l,this.engineService.queryShownObjects(e,n,!0)));const i={};for(const o in l)i[o]=!l[o];const a=t.graph.clipped?this.getClippedObjects():{};return Object.assign({},i,a)}serialize(e,t,n=!1,l,i,a){const o=this.generateTrimObjectMap(i,t),s=Object(Mt.cloneDeep)(l),r=this.chapterSerializer.serialize(i,e,this.store.selectSnapshot(Br.getLabels),a);s.chapters=r,s.tweenParticleLookup&&(s.tweenParticleLookup=sr.updateChapterIds(s.tweenParticleLookup,a));const c=Human.scene.rootObjects;return s.sceneGraph=function(e,t){const n=[];return Object.entries(e).forEach(([e,l])=>{const i=ir.serializeHumanObject(l,t);null!==i&&n.push(i)},this),n}(c,o),s.ui=this.serializeUI(s),s.animation=this.serializeAnimation(i[0]),{story:n?gr(s,e):s}}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(O.i),l.Xb(Rs),l.Xb(nr),l.Xb(or))},token:e,providedIn:"root"}),e})();class Vr{constructor(){this.graph={hidden:!1,clipped:!1,disabled:!1,transparent:!1}}}const Wr={main:{title:"All Categories",image:"cat-all",translations:{es:{title:"Todas las Categor\xedas"},zh:{title:"\u6240\u6709\u7c7b\u522b"},fr:{title:"Toutes les cat\xe9gories"},de:{title:"Alle Kategorien"},it:{title:"Tutte le categorie"},ja:{title:"\u3059\u3079\u3066\u306e\u30ab\u30c6\u30b4\u30ea"},pt:{title:"Todas as categorias"}}},baseAnatomyCategories:[{title:"Male Complete Anatomy",image:"cat-complete-male",id:"production/maleAdult/male_complete_anatomy_10",translations:{es:{title:"Anatom\xeda Completa Masculina"},zh:{title:"\u7537\u6027\u5b8c\u6574\u89e3\u5256\u5b66"},fr:{title:"Anatomie compl\xe8te masculine"},de:{title:"M\xe4nnliche vollst\xe4ndige Anatomie"},it:{title:"Anatomia Completa Maschile"},ja:{title:"\u7537\u6027\u306e\u5b8c\u5168\u306a\u89e3\u5256\u5b66"},pt:{title:"Anatomia Completa Masculina"}}},{title:"Female Complete Anatomy",image:"cat-complete-female",id:"production/femaleAdult/female_complete_anatomy_10",translations:{es:{title:"Anatom\xeda Completa Femenina"},zh:{title:"\u5973\u6027\u5b8c\u6574\u89e3\u5256\u5b66"},fr:{title:"Anatomie compl\xe8te f\xe9minine"},de:{title:"Weibliche komplette Anatomie"},it:{title:"Anatomia Completa Femminile"},ja:{title:"\u5973\u6027\u89e3\u5256\u5b66"},pt:{title:"Anatomia Completa Feminina"}}}],categories:[{title:"Anatomy by Systems",id:"anatomy-by-system",image:"cat-anatomy",translations:{es:{title:"Anatom\xeda por Sistemas"},zh:{title:"\u6309\u7cfb\u7edf\u8fdb\u884c\u89e3\u5256\u5b66"},fr:{title:"Anatomie par syst\xe8mes"},de:{title:"Anatomie nach Systemen"},it:{title:"Anatomia per sistemi"},ja:{title:"\u30b7\u30b9\u30c6\u30e0\u306b\u3088\u308b\u89e3\u5256\u5b66"},pt:{title:"Anatomia por Sistemas"}}},{title:"Anatomy by Regions",id:"regional",image:"cat-anatomy-region",translations:{es:{title:"Anatom\xeda por Regiones"},zh:{title:"\u6309\u5730\u533a\u5212\u5206\u7684\u89e3\u5256\u5b66"},fr:{title:"Anatomie par r\xe9gions"},de:{title:"Anatomie nach Regionen"},it:{title:"Anatomia per regioni"},ja:{title:"\u5730\u57df\u5225\u89e3\u5256\u5b66"},pt:{title:"Anatomia por Regi\xf5es"}}},{title:"Blood, Heart and Circulation",id:"Blood, Heart and Circulation",image:"cat-blood-heart",translations:{es:{title:"Sangre, Coraz\xf3n y Circulaci\xf3n"},zh:{title:"\u8840\u6db2\u3001\u5fc3\u810f\u548c\u8840\u6db2\u5faa\u73af"},fr:{title:"Sang, c\u0153ur et circulation sanguine"},de:{title:"Blut, Herz und Kreislauf"},it:{title:"Sangue, Cuore e Circolazione"},ja:{title:"\u8840\u6db2\u3001\u5fc3\u81d3\u3001\u5faa\u74b0"},pt:{title:"Sangue, Cora\xe7\xe3o e Circula\xe7\xe3o"}}},{title:"Bones, Joints and Muscles",id:"Bones, Joints and Muscles",image:"cat-bones-joints-muscles",translations:{es:{title:"Huesos, Articulaciones y M\xfascula"},zh:{title:"\u9aa8\u9abc\u3001\u5173\u8282\u548c\u808c\u8089"},fr:{title:"Os, articulations et muscles"},de:{title:"Knochen, Gelenke und Muskeln"},it:{title:"Ossa, articolazioni e muscoli"},ja:{title:"\u30dc\u30fc\u30f3\u3001\u30b8\u30e7\u30a4\u30f3\u30c8\u3001\u30de\u30c3\u30b9\u30eb"},pt:{title:"Ossos, articula\xe7\xf5es e m\xfasculos"}}},{title:"Brain and Nerves",id:"Brain and Nerves",image:"cat-brain-nerves",translations:{es:{title:"Cerebro y Nervios"},zh:{title:"\u5927\u8111\u548c\u795e\u7ecf"},fr:{title:"Cerveau et nerfs"},de:{title:"Gehirn und Nerven"},it:{title:"Cervello e nervi"},ja:{title:"\u8133\u3068\u795e\u7d4c"},pt:{title:"C\xe9rebro e Nervos"}}},{title:"Digestive System",id:"Digestive System",image:"cat-digestive-system",translations:{es:{title:"Sistema Digestivo"},zh:{title:"\u6d88\u5316\u7cfb\u7edf"},fr:{title:"Syst\xe8me digestif"},de:{title:"Verdauungssystem"},it:{title:"Apparato Digestivo"},ja:{title:"\u6d88\u5316\u5668\u7cfb"},pt:{title:"Sistema Digestivo"}}},{title:"Ear, Nose and Throat",id:"Ear, Nose and Throat",image:"cat-ear-nose-throat",translations:{es:{title:"O\xeddo, Nariz y Garganta"},zh:{title:"\u8033\u9f3b\u5589\u79d1"},fr:{title:"Oreille, Nez et Gorge"},de:{title:"Ohr, Nase und Hals"},it:{title:"Orecchio, naso e gola"},ja:{title:"\u8033\u30fb\u9f3b\u30fb\u5589"},pt:{title:"Orelha, nariz e garganta"}}},{title:"Endocrine System",id:"Endocrine System",image:"cat-endocrine-system",translations:{es:{title:"Sistema Endocrino"},zh:{title:"\u5185\u5206\u6ccc\u7cfb\u7edf"},fr:{title:"Syst\xe8me endocrinien"},de:{title:"Endokrine System"},it:{title:"Sistema Endocrino"},ja:{title:"\u5185\u5206\u6ccc\u7cfb"},pt:{title:"Sistema end\xf3crino"}}},{title:"Eyes and Vision",id:"Eyes and Vision",image:"cat-eyes-vision",translations:{es:{title:"Ojos y Visi\xf3n"},zh:{title:"\u773c\u775b\u548c\u89c6\u529b"},fr:{title:"Yeux et vision"},de:{title:"Augen und Sehkraft"},it:{title:"Occhi e Visione"},ja:{title:"\u76ee\u3068\u30d3\u30b8\u30e7\u30f3"},pt:{title:"Olhos e Vis\xe3o"}}},{title:"Immune System",id:"Immune System",image:"cat-immune-system",translations:{es:{title:"Sistema Inmunol\xf3gico"},zh:{title:"\u514d\u75ab\u7cfb\u7edf"},fr:{title:"Syst\xe8me immunitaire"},de:{title:"Immunsystem"},it:{title:"Sistema immunitario"},ja:{title:"\u514d\u75ab\u7cfb"},pt:{title:"Sistema Imunit\xe1rio"}}},{title:"Kidneys and Urinary System",id:"Kidneys and Urinary System",image:"cat-kidney-urinary",translations:{es:{title:"Ri\xf1ones y Sistema Urinario"},zh:{title:"\u80be\u810f\u548c\u6ccc\u5c3f\u7cfb\u7edf"},fr:{title:"Reins et syst\xe8me urinaire"},de:{title:"Nieren und Harnwege"},it:{title:"Reni e sistema urinario"},ja:{title:"\u814e\u81d3\u3068\u6ccc\u5c3f\u5668\u7cfb"},pt:{title:"Rins e Sistema Urin\xe1rio"}}},{title:"Lungs and Breathing",id:"Lungs and Breathing",image:"cat-lungs-breathing",translations:{es:{title:"Pulmones y Respiraci\xf3n"},zh:{title:"\u80ba\u548c\u547c\u5438"},fr:{title:"Poumons et respiration"},de:{title:"Lunge und Atmung"},it:{title:"Polmoni e Respirazione"},ja:{title:"\u80ba\u3068\u547c\u5438"},pt:{title:"Pulm\xf5es e respira\xe7\xe3o"}}},{title:"Mouth and Teeth",id:"Mouth and Teeth",image:"cat-mouth-teeth",translations:{es:{title:"Boca y Dientes"},zh:{title:"\u53e3\u8154\u548c\u7259\u9f7f"},fr:{title:"Bouche et dents"},de:{title:"Mund und Z\xe4hne"},it:{title:"Bocca e Denti"},ja:{title:"\u53e3\u3068\u6b6f"},pt:{title:"Boca e Dentes"}}},{title:"Skin, Hair and Nails",id:"Skin, Hair and Nails",image:"cat-skin-hair-nails",translations:{es:{title:"Piel, Pelo y U\xf1as"},zh:{title:"\u76ae\u80a4\u3001\u5934\u53d1\u548c\u6307\u7532"},fr:{title:"Peau, cheveux et ongles"},de:{title:"Haut, Haare und N\xe4gel"},it:{title:"Pelle, Capelli e Unghie"},ja:{title:"\u808c\u3001\u9aea\u3001\u722a"},pt:{title:"Pele, Cabelo e Unhas"}}},{title:"Female Reproductive System",id:"Female Reproductive System",image:"cat-female-reproductive",translations:{es:{title:"Sistema Reproductivo Femenino"},zh:{title:"\u5973\u6027\u751f\u6b96\u7cfb\u7edf"},fr:{title:"Syst\xe8me reproducteur f\xe9minin"},de:{title:"Weibliches Fortpflanzungssystem"},it:{title:"Sistema riproduttivo femminile"},ja:{title:"\u5973\u6027\u306e\u751f\u6b96\u5668\u7cfb"},pt:{title:"Sistema Reprodutivo Feminino"}}},{title:"Male Reproductive System",id:"Male Reproductive System",image:"cat-male-reproductive",translations:{es:{title:"Sistema Reproductivo Masculino"},zh:{title:"\u7537\u6027\u751f\u6b96\u7cfb\u7edf"},fr:{title:"Syst\xe8me reproducteur masculin"},de:{title:"M\xe4nnliches Fortpflanzungssystem"},it:{title:"Sistema riproduttivo maschile"},ja:{title:"\u751f\u6b96\u5668\u7cfb"},pt:{title:"Sistema Reprodutor Masculino"}}},{title:"Community Bookmarks",id:"public",image:"cat-community",translations:{es:{title:"Marcadores de la Comunidad"},zh:{title:"\u793e\u533a\u4e66\u7b7e"},fr:{title:"Signets de la communaut\xe9"},de:{title:"Community-Lesezeichen"},it:{title:"Segnalibri della Comunit\xe0"},ja:{title:"\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u30d6\u30c3\u30af\u30de\u30fc\u30af"},pt:{title:"Marcadores da Comunidade"}}}]},Gr=["web platform","!obsolete"];let qr=(()=>{class e{constructor(e){this.http=e}search(e="",t=[],n="en"){const l=e.split(/[ ]+/).join("+"),i=Gr.concat(t).map(e=>`"${e}"`).join("+");return this.http.get(`/search?k=${l}&t=${i}&ol=${n}&odns=true`).pipe(Object(u.a)(e=>this.resultsToBookmarks(e)))}getAnatomyCategory(e,t,n){return this.search(e,[t],n)}getConditionModel(e){const t=this.toDatabaseContentId(e);return this.http.get(`/search/conditions?q=${t}`).pipe(Object(u.a)(e=>this.resultsToBookmarks(e)),Object(u.a)(e=>e[0]))}resultsToBookmarks(e){return e.forEach(e=>{e.id=this.toAppContentId(e.id),e.tour=e.tags.indexOf("tour")>=0}),Object(R.plainToClass)(pt,e)}getBookmarkCategory(e){if(!e.tags)return null;const t=Wr.categories.map(e=>e.id.toLocaleLowerCase());return e.tags.find(e=>t.includes(e.toLocaleLowerCase()))}getStoryCategory(e){if(!e.tags)return null;const t=Wr.categories.map(e=>e.id.toLocaleLowerCase());return e.tags.find(e=>t.includes(e.toLocaleLowerCase()))}toAppContentId(e){return e.replace("Condition.content.","").replace(".json","").split(".").join("/")}toDatabaseContentId(e){return e.match("Condition.content")?e:`Condition.content.${e.replace(".json","").split("/").join(".")}.json`}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(c.c))},token:e,providedIn:"root"}),e})();class Xr{}class Kr{}class Zr{}class Yr{}function Qr(e,...t){return()=>new Promise(n=>{e(...t,()=>{n()})})}const ec=["reflections","lights"],tc=["material","geometry","transform"],nc=["tweens","morph"];let lc=(()=>{class e{constructor(e,t,n){this.http=e,this.engineService=t,this.chapterService=n}getShownObjectsFromChapter(e){const t=[];return Object.entries(e.synchronization).forEach(([e,n])=>{n.shown&&t.push(e)}),t}getChapterLoadChunks(e,t,n){const l=this.getShownObjectsFromChapter(t),i=new Kr;return i.activate=!1,i.chapterId=t.id,i.objects=l,i.storyId=e,i.assetTypes=[...tc,...nc,...ec],i.readyState={model:!0,animation:!0},[i]}getOnDemandLoadChunks(e,t){let n=[];return Human.timeline.rootTimelines[e]._chapters.forEach(l=>{const i=this.getChapterLoadChunks(e,l,t);n=l.id===t.targetChapterId?[...i,...n]:[...n,...i]}),n}getChapterIndex(e,t){return Human.timeline.rootTimelines[e]?Human.timeline.rootTimelines[e]._chapters.findIndex(e=>e.id===t):-1}getStory(e,t,n="en"){const l=t===a.Bookmark?this.getBookmark(e):this.getContent(e);if("en"===n)return l;{let i;return l.pipe(Object(_t.a)(l=>(i=l,this.getStoryTranslation(e,t,n)))).pipe(Object(u.a)(e=>this.translateStory(i,e)),Object(L.a)(()=>l))}}getContent(e){return this.http.get(`/content/modules/${e}.json`).pipe(Object(u.a)(e=>e))}getBookmark(e){return this.http.get("/search/bookmarks/data",{params:{be:e}}).pipe(Object(u.a)(e=>e.bookmark))}getLoadConfig(e,t=0){const n=new Zr;return n.chapterAssetBundle=!0,n.targetChapterId=Human.timeline.rootTimelines[e]._chapters[t].id,n.targetChapterConfig={global:{clipping:!0,graph:!0,camera:!0,properties:!0,transparencyMode:!0,postprocess:!0},static:{labels:!0},dynamic:{timeline:!0,particles:!0}},n.sortBy="chapter",n}buildStory(e,t,n){Human.modules.moduleData[e]=t;const l=Object.assign({},t);return l.moduleId=e,new Z.a(t=>{Human.modules.create(e,l,()=>{n&&Human.modules.activate(e,0,{},()=>{}),t.next(!0),t.complete()})})}getStoryChapters(e,t){const n=Human.modules.moduleData[e];return Human.timeline.rootTimelines[e]._chapters.map((e,l)=>this.chapterService.fromHumanChapter(n,t,e,l))}getStoryLoadChunks(e,t){return this.getOnDemandLoadChunks(e,t).map(e=>Object.assign({},e,{chunkId:ms.idWithPrefix("chunk")}))}loadStoryChunk(e,t){const n=e.objects.map(e=>Human.scene.objects[e]);e.storyId?Human.modules.load(e.storyId,n,e.assetTypes,()=>{t()}):this.engineService.loadGraphObject(e.objects[0]).subscribe(()=>{t()})}unloadStory(e,t=!0){const n=(e?[e]:Object.keys(Human.modules.modules)).map(e=>this.hardDeleteStory(e,t));return new Z.a(e=>{n.length?Object(dt.a)(n).subscribe(()=>{e.next(!0),e.complete()}):(e.next(!0),e.complete())})}createLoadObjectChunk(e){const t=new Kr;return t.assetTypes=[...tc,...nc],t.objects=[e],t}hardDeleteStory(e,t=!0){const n=(e in Human.modules.modules?Human.modules.modules[e].sceneGraph:[]).map(e=>Human.scene.objects[e.objectId]).filter(e=>!!e),l=Object(Mt.flatten)(n.map(e=>e.getLeafObjects())),i=Qr(Human.modules.deactivate,e,{}),a=Qr(Human.modules.unload,e,l,["geometries","morphs","reflections","tweens","lights","materials","transforms"]),o=Qr(Human.modules.destroy,e);return new Z.a(n=>{(Human.timeline.activeRoot&&Human.timeline.activeRoot.id===e?i():Promise.resolve({})).then(()=>t?a():Promise.resolve({})).then(()=>o()).then(()=>(n.next(),void n.complete()))})}getStoryTranslation(e,t,n){return this.http.get(t===a.Bookmark?`/search/bookmarks/tr/${n}/${e}`:`/tr/${n}/${e}.json`).pipe(Object(u.a)(e=>Object(R.plainToClass)(Yr,e)))}getStoryType(e){return e.indexOf("/")>=0?a.Module:a.Bookmark}translateStory(e,t){const n=e.chapters||[],l=e.sceneGraph||[],i=t.objects||{},a=t.chapters||[];return e.displayName=t.displayName||e.displayName,e.description=t.description||e.description,l.forEach(e=>{(e.objects||[]).forEach(e=>{this.translateObject(e,i)})}),n.forEach((e,t)=>{const n=a[t];if(n){this.translateMetaInfo(e,n);const t=n.annotations||[];(e.annotations||[]).forEach((e,n)=>{const l=t[n];l&&this.translateMetaInfo(e,l)});const l=n.hotspots||[];(e.hotspots||[]).forEach((e,t)=>{const n=l[t];n&&this.translateMetaInfo(e,n)})}}),e}translateMetaInfo(e,t){const{title:n,description:l}=t;e.hasOwnProperty("displayName")&&(e.displayName=n),e.hasOwnProperty("title")&&(e.title=n),e.hasOwnProperty("description")&&(e.description=l)}translateObject(e,t){const n=t[e.objectId];n&&(e.displayName=n);const l=e.objects;l&&l.forEach(e=>{this.translateObject(e,t)})}exportWrittenContent(e,t,n){const l=[];return l.push(`\n${e.displayName}\n    `),t.forEach((e,t)=>{l.push(`\n---\n\n# Chapter ${t+1}: ${e.info.displayName||"-No Title-"}\n\n${e.info.description||"-No Description-"}\n      `),e.legend.length&&(l.push("\n## Legend\n"),e.legend.forEach(e=>{l.push(`\n* ${e.label} (${Ye.rgbToHex(e.colors,!0)})\n`)}));const i=n.filter(t=>t.chapterId===e.id);i.length&&(l.push("\n## Labels\n"),i.forEach(e=>{l.push(`\n* ${e.title}\n`),e.description&&l.push(`\n  > ${e.description}\n`)}))}),l.join("")}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(c.c),l.Xb(Rs),l.Xb(kr))},token:e,providedIn:"root"}),e})();function ic(e,t,n){const l=function(e,t){const n={};for(const l of e){const e=Object.keys(t[l]);for(const t of e)n[t]=!1}return n}(t,n);return e.map(e=>Object.assign({},e,{showObjects:Object.assign({},e.showObjects,l),selectObjects:Object.assign({},e.selectObjects,l),pickThroughObjects:Object.assign({},e.pickThroughObjects,l)}))}function ac(e){return e.split("/").length>1?a.Module:a.Bookmark}function oc(e,t){return e.map(e=>{if(!Object(Mt.isEmpty)(e.lights))return e;const n={libraries:[...t],lights:[]};return Object.assign({},e,{lights:n})})}function sc(e){return e.split("_particle-")[0]}function rc(e,t){return e.customData&&e.customData.particleSystems?e.customData.particleSystems.reduce((e,n)=>{const l=sc(n.id);return e[l]=`${l}_${t("particle")}`,e},{}):{}}function cc(e,t){return e.customData&&e.customData.particleSystems?e.customData.particleSystems.map(e=>{const n=sc(e.id);return Object.assign({},e,{id:t[n]})}):[]}function uc(e,t){return e.map(e=>(e.customData&&e.customData.particleSystems&&(e.customData.particleSystems=e.customData.particleSystems.map(e=>t[sc(e)])),e))}function pc(e,t){return e.map(e=>e.id).reduce((n,l)=>(e.some(e=>e.id===l&&Object(Mt.get)(e,"customData.particleSystems",[]).length>0)&&(n[l]=t),n),{})}function dc(e,t,n,l,i=a.Bookmark,o=ms.idWithPrefix){const{sceneGraph:s,graphsMerged:r,objectIdsUniqueToNew:c,objectIdsUniqueToOriginal:u}=function(e,t){const n=e=>void 0!==e.objectId,[l,i]=Object(Mt.partition)(e,n),[a,o]=Object(Mt.partition)(t,n),s=function(e,t){return t.reduce((t,n)=>{for(const l of e)Object(Mt.isEqual)(l,n)||t.push(n);return t},e)}(i,o),{newSceneGraph:r,graphsMerged:c,objectIdsUniqueToNew:u,objectIdsUniqueToOriginal:p}=function(e,t){const n=e.reduce((e,t)=>(e[t.objectId]=t,e),{}),l=t.reduce((e,t)=>{if(void 0===e.nodes[t.objectId])return e.nodes[t.objectId]=t,e;if(!Object(Mt.isEqual)(t,e.nodes[t.objectId])){const n=function(e,t){const n={},l={};return{root:function e(t,i){if(t.objectId!==i.objectId)return n[i.objectId]=!0,[t,i];if(void 0===t.objects&&i.objects){for(const e of i.objects)n[e.objectId]=!0;return[Object.assign({},i)]}if(t.objects&&void 0===i.objects){for(const e of t.objects)l[e.objectId]=!0;return[Object.assign({},t)]}if(void 0===t.objects&&void 0===i.objects)return[Object.assign({},t)];const a=[];for(const n of t.objects){const t=i.objects.find(e=>e.objectId===n.objectId);t?a.push(e(n,t)):(l[n.objectId]=!0,a.push(n))}for(const l of i.objects)t.objects.find(e=>e.objectId===l.objectId)||(n[l.objectId]=!0,a.push(l));const o=Object.assign({},t);return o.objects=Object(Mt.flatten)(a),[o]}(e,t),objectIdsUniqueToNew:n,objectIdsUniqueToOriginal:l}}(e.nodes[t.objectId],t);e.nodes[t.objectId]=n.root[0],e.graphsMerged.push(t.objectId),e.objectIdsUniqueToNew[t.objectId]=n.objectIdsUniqueToNew,e.objectIdsUniqueToOriginal[t.objectId]=n.objectIdsUniqueToOriginal}return e},{nodes:n,graphsMerged:[],objectIdsUniqueToNew:{},objectIdsUniqueToOriginal:{}});return{newSceneGraph:Object.keys(l.nodes).reduce((e,t)=>(e.push(l.nodes[t]),e),[]),graphsMerged:l.graphsMerged,objectIdsUniqueToNew:l.objectIdsUniqueToNew,objectIdsUniqueToOriginal:l.objectIdsUniqueToOriginal}}(l,a);return{sceneGraph:[...s,...r],graphsMerged:c,objectIdsUniqueToNew:u,objectIdsUniqueToOriginal:p}}(e.sceneGraph,n.sceneGraph),p=function(e,t){const n=(e,t)=>Object(Mt.uniq)([...e,...t]);return{lights:n(e.lights,t.lights),tweens:n(e.tweens,t.tweens),regionMaps:n(e.regionMaps,t.regionMaps),reflections:n(e.reflections,t.reflections)}}(e.assetLibraries,n.assetLibraries),d=function(e,t,n,l){e=e||{},t=t||{};const i=(e,t)=>(e=>e.includes("/"))(t)?t:`${function(e){return ac(e)===a.Bookmark?e:e.split("/").pop()}(e)}/${t}`;return Object.assign({},Object(Mt.mapKeys)(e,(e,t)=>i(n,t)),Object(Mt.mapKeys)(t,(e,t)=>i(l,t)))}(e.reflections,n.reflections,t,l),{colorRecipes:b,newColorRecipeIds:g}=function(e,t,n){e=e||{},t=t||{};const l=Object.keys(t).reduce((e,l)=>{const i=n(`color-recipe-${l}`);return e.newColorRecipeIds[l]=i,e.colorRecipes[i]=t[l],e},{colorRecipes:{},newColorRecipeIds:{}});return{colorRecipes:Object.assign({},e,l.colorRecipes),newColorRecipeIds:l.newColorRecipeIds}}(e.colorRecipes,n.colorRecipes,o),h=oc(e.chapters,e.assetLibraries.lights),m=oc(n.chapters,n.assetLibraries.lights),x=function(e,t,n,l,i){const a=rc(e,i),o=rc(t,i),s=[...cc(e,a),...cc(t,o)],r=uc(n,a),c=uc(l,o),u=Object.assign({},pc(r,a),pc(c,o));return{mergedParticles:s,currentChapters:r,importedChapters:c,tweenParticleLookup:Object(Mt.pickBy)(u,(e,t)=>!Object(Mt.isEmpty)(e))}}(e,n,ic(h,r,c),ic(m,r,u).map(e=>Object.assign({},e,{id:o("chapter")})),o),f=function(e,t){return e.map(e=>{if(Object(Mt.isEmpty)(e.colorRecipeObjects))return e;const n=Object.keys(e.colorRecipeObjects).reduce((n,l)=>(n[t[l]]=e.colorRecipeObjects[l],n),{});return e.colorRecipeObjects=n,e})}(x.importedChapters,g),_=[...x.currentChapters,...f],y=Object.assign({},e.customData,{particleSystems:x.mergedParticles});return Object.assign({},e,{assetLibraries:p,chapters:_,sceneGraph:s,customData:y,tags:"module"===i?e.tags:[],reflections:d,colorRecipes:b,stateId:Object(Mt.uniq)([...e.stateId,...n.stateId]),tweenParticleLookup:x.tweenParticleLookup})}var bc;(bc||(bc={})).generateThumbnailUrls=function(e){return e.reduce((e,{originalChapterId:t,newChapterId:n,originalStoryId:l})=>{const i=`/thumbs/${a.Bookmark===ac(l)?"bookmarks":"modules"}/${l.replace(".json","")}`,o=new Ir;return o.storyId=l,o.chapterId=t,o.urls={small:`${i}/small/chapters/${t}.jpg`,large:`${i}/large/chapters/${t}.jpg`},e.set(n,o),e},new Map)};class gc{constructor(e,t,n="_color",l){this.label=e,this.recipe=t,this.icon=n,this.group=l}}var hc=function(e){return e.Colors="Colors",e.Effects="Effects",e}({}),mc=function(e){return e.Colors="_color",e.Effects="adjust",e}({});const xc=new gc("Original",new Qs({tintColor:!1,saturation:!1,contrast:!1,brightness:!1,opacity:!1}),"times-circle",hc.Colors),fc=new gc("Black",{tintColor:[0,0,0],saturation:!1,contrast:!1,brightness:!1,opacity:!1},mc.Colors,hc.Colors),_c=new gc("Red",{tintColor:[1,0,0],saturation:!1,contrast:!1,brightness:!1,opacity:!1},mc.Colors,hc.Colors),yc=new gc("Yellow",new Qs({tintColor:[1,1,0],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),mc.Colors,hc.Colors),Oc=new gc("Green",new Qs({tintColor:[0,1,0],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),mc.Colors,hc.Colors),wc=new gc("Cyan",new Qs({tintColor:[0,1,1],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),mc.Colors,hc.Colors),vc=new gc("Blue",new Qs({tintColor:[0,0,1],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),mc.Colors,hc.Colors),Cc=new gc("Pink",new Qs({tintColor:[1,0,1],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),mc.Colors,hc.Colors),jc=(new gc("Grayscale",new Qs({tintColor:!1,saturation:-100,contrast:!1,brightness:!1,opacity:!1}),mc.Effects,hc.Effects),new gc("Desaturated",new Qs({tintColor:!1,saturation:-50,contrast:!1,brightness:!1,opacity:!1}),mc.Effects,hc.Effects),new gc("Fade",new Qs({tintColor:[0,0,0],contrast:!1,brightness:55,saturation:-100,opacity:new Zs({edge:1,center:0,edgeBias:0,centerBias:1,power:1})}),mc.Effects,hc.Effects)),kc=[fc,_c,yc,Oc,wc,vc,Cc];class Sc{constructor(e={}){const{tintColor:t,saturation:n,contrast:l,brightness:i,opacity:a}=e;this.tintColor=t,this.saturation=n,this.contrast=l,this.brightness=i,this.opacity=a}}var Pc;const Mc={loading:!1,incoming:{id:void 0,type:void 0},storyId:void 0,storyType:void 0,loadingChunk:null,loadChunks:[],loadChunksRemaining:[],thumbnailLookup:[]};let Tc=(()=>{let e=Pc=class{constructor(e,t,n,l){this.store=e,this.storyService=t,this.engineService=n,this.serializeModuleService=l,this.reload=!0}static getStory(e){return e.story}static getStoryId(e){return e.storyId}static getLoadingChunk(e){return e.loadingChunk}static getLoadChunks(e){return e.loadChunks}static getLoadChunksRemaining(e){return e.loadChunksRemaining}static getStoryInfo(e){return{id:e.storyId,type:e.storyType}}static getIncomingStoryInfo(e){return e.incoming}static getStoryTags(e){return Object(Mt.get)(e,"story.tags",[])}setStoryText(e,t){const n=e.getState().story;n&&e.patchState({story:Object.assign({},n,{displayName:t.displayName})})}setStoryTags(e,{tags:t}){const n=e.getState().story;n&&e.patchState({story:Object.assign({},n,{tags:t})})}setStory(e,t){e.patchState({story:t.story})}SetStoryId(e,t){e.patchState({storyId:t.id})}setIncomingStory(e,t){const n=e.getState(),{id:l,type:i,reset:a}=t;l!==n.storyId||a?e.patchState({incoming:{id:l,type:i}}):a&&e.dispatch(new Ha(t.id,n.story,t.type))}loadStory(e,t){this.storyService.getStory(t.id,t.type,t.lang).subscribe(n=>{e.dispatch(new $a(n,t.id,t.type))},()=>{!0===this.reload?(this.reload=!1,this.loadStory(e,t)):e.dispatch(new Va(t.id,t.type))})}loadStorySuccess(e,t){this.storyService.unloadStory(null).subscribe(()=>{e.dispatch(new Ha(t.id,t.story,t.type))})}buildStoryWorkflow(e,t,n,l,i=0,a=new Map){this.storyService.buildStory(t,n,!0).subscribe(o=>{const s=this.storyService.getStoryChapters(t,l);let r=[];s.forEach(e=>{r=[...r,...e.labels]});const c=this.storyService.getLoadConfig(t,i),u=this.storyService.getStoryLoadChunks(t,c);e.patchState({storyId:t,story:n,loadChunks:u,loadChunksRemaining:u,incoming:{id:void 0,type:void 0}});const p=this.engineService.getSceneGraph(Human.scene.rootObjects),d=s.reduce((e,t)=>(e[t.id]=function(e,t,n,l){return Object.keys(e.nodes).reduce((i,a)=>{const o=function e(t,n,l){switch(l[n]){case!0:return!0;case!1:return!1;case void 0:{const i=ks.getAncestor(t,n);return!!i&&e(t,i,l)}}}(e,a,t)||function e(t,n,l){const i=ks.getSuccessors(t,n);if(0===i.length)return!1;for(const a of i)if(!0===l[a])return!0;return i.some(n=>e(t,n,l))}(e,a,t),s=function e(t,n,l){switch(l[n]){case!0:return!1;case!1:return!0;case void 0:{const i=ks.getAncestor(t,n);return!i||e(t,i,l)}}}(e,a,n),r=function e(t,n,l){if(l[n]&&("tintColor"in(i=l[n])||"opacity"in i))return Qs.fromEngine(new Sc(l[n]));var i;const a=ks.getAncestor(t,n);return a?e(t,a,l):xc.recipe}(e,a,l);return i[a]={objectId:a,checked:!1,selected:!1,paint:r,shown:o,pickable:s},i},{})}(p,t.showObjects,t.pickThroughObjects,t.synchronization),e),{});e.dispatch(new Bs.InitNodeState(d)),e.dispatch(new Bs.SetActiveChapter(s[i].id)),e.dispatch(new ao(s)),e.dispatch(new jo(a)),e.dispatch(new ma(r)),e.dispatch(new lo(s[i])),e.dispatch(new Za),e.dispatch(new Da)})}setTweenParticleLookup(e,t){e.patchState({story:Object.assign({},e.getState().story,{tweenParticleLookup:t.lookup})})}importStorySuccess(e,t){const n=e.getState(),l=n.storyType,i=n.storyId,a=new Vr,o=this.store.selectSnapshot(Pc.getStory),s=this.store.selectSnapshot(Nr.getStoryChapters),c=wr.makeChapterIdMap(s,!1),u=this.serializeModuleService.serialize({},a,!1,o,s,c).story,p=dc(u,i,t.story,t.id,r.exportType),d=u.chapters.map((e,t)=>({newChapterId:e.id,originalChapterId:e.id,originalStoryId:i})),b=(n.thumbnailLookup||[]).concat(t.story.chapters.map((e,n)=>({newChapterId:p.chapters[u.chapters.length+n].id,originalChapterId:e.id,originalStoryId:t.id})));e.patchState({thumbnailLookup:b});const g=bc.generateThumbnailUrls([...d,...b]),h=this.store.selectSnapshot(Nr.getRegisteredThumbnails),m=new Map([...h].filter(e=>e[1].snapshot)),x=new Map([...g,...m]);this.storyService.unloadStory(null,!0).subscribe(()=>{this.buildStoryWorkflow(e,i,p,l,p.chapters.length-1,x)})}buildStory(e,t){const n=t.story.chapters.map((e,n)=>({newChapterId:e.id,originalChapterId:e.id,originalStoryId:t.id})),l=bc.generateThumbnailUrls(n);this.buildStoryWorkflow(e,t.id,t.story,t.type,t.chapterIdx||0,l)}loadStoryChunk(e){const t=e.getState().loadChunksRemaining[0];t&&(e.patchState({loadingChunk:t}),this.storyService.loadStoryChunk(t,()=>{e.dispatch([new Na(t),new Da])}))}reorderLoadChunks(e,t){const{loadChunksRemaining:n}=e.getState(),[l,i]=Object(Mt.partition)(n,e=>e.chapterId===t.chapterId);e.patchState({loadChunksRemaining:[...l,...i]})}loadStoryChunkSuccess(e,t){const n=e.getState().loadChunksRemaining.filter(e=>e.chunkId!==t.chunk.chunkId);e.patchState({loadingChunk:null,loadChunksRemaining:n}),e.dispatch(new bo(t.chunk.chapterId,t.chunk.readyState))}synchronizeChapters(e){const t=this.store.selectSnapshot(Nr.getStoryChapters),{story:n}=e.getState();e.patchState({story:Object.assign({},n,{chapters:[...t]})})}importStory(e,t){this.storyService.getStory(t.id,t.type,t.lang).subscribe(n=>{e.dispatch(new Ga(n,t.id,t.type))})}resetStory(e){e.setState(Mc)}};return Object(y.__decorate)([Object(O.a)(Aa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Aa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setStoryText",null),Object(y.__decorate)([Object(O.a)(Fa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Fa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setStoryTags",null),Object(y.__decorate)([Object(O.a)(La),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,La]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setStory",null),Object(y.__decorate)([Object(O.a)(Ea),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ea]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"SetStoryId",null),Object(y.__decorate)([Object(O.a)(Ra),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ra]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setIncomingStory",null),Object(y.__decorate)([Object(O.a)(za),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,za]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loadStory",null),Object(y.__decorate)([Object(O.a)($a),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,$a]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loadStorySuccess",null),Object(y.__decorate)([Object(O.a)(Ba),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ba]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setTweenParticleLookup",null),Object(y.__decorate)([Object(O.a)(Ga),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ga]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"importStorySuccess",null),Object(y.__decorate)([Object(O.a)(Ha),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ha]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"buildStory",null),Object(y.__decorate)([Object(O.a)(Da),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loadStoryChunk",null),Object(y.__decorate)([Object(O.a)(Ua),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ua]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"reorderLoadChunks",null),Object(y.__decorate)([Object(O.a)(Na),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Na]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loadStoryChunkSuccess",null),Object(y.__decorate)([Object(O.a)(Xa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"synchronizeChapters",null),Object(y.__decorate)([Object(O.a)(Wa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Wa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"importStory",null),Object(y.__decorate)([Object(O.a)(qa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetStory",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getStory",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getStoryId",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getLoadingChunk",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getLoadChunks",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getLoadChunksRemaining",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getStoryInfo",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getIncomingStoryInfo",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Xr]),Object(y.__metadata)("design:returntype",void 0)],e,"getStoryTags",null),Pc=Object(y.__decorate)([Object(O.g)({name:"story",defaults:Mc})],e)})();const Ic="/ws/user/bookmark/v1",Jc="/ws/thumbs/bookmarks",zc="/ws/user/favorite",Lc={headers:new c.g({"Content-Type":"application/json; charset=utf-8"})};var Ec=function(e){return e.Private="private",e.Group="enterprise",e.Public="public",e}({});let Ac=(()=>{class e{constructor(e,t,n,l,i){this.store=e,this.http=t,this.serializeModuleService=n,this.exploreService=l,this.storyService=i}getBookmarkData(e){return this.http.get(`/search/bookmarks/data?be=${e}`).pipe(Object(u.a)(e=>((e=e.bookmark).moduleId=e.customData?e.customData.moduleId:e.modules.activeModules[0],Object(R.plainToClass)(bs,e))))}getBookmarkModel(e){return this.http.get(`/ws/search/bookmarks?eid=${e}`).pipe(Object(u.a)(e=>Object(R.plainToClass)(pt,e.bookmark_info)),Object(u.a)(e=>this.normalizeBookmarkModel(e)))}getUserBookmarks(e,t=""){return this.http.get(`/ws/search/bookmarks/${e}?q=${t}`).pipe(Object(u.a)(e=>e.map(e=>Object(R.plainToClass)(pt,e)).map(e=>this.normalizeBookmarkModel(e))))}getUserConditions(e,t){let n="";switch(e){case Ec.Private:n="user";break;case Ec.Group:n="group"}return this.http.get("/ws/search/conditions/private").pipe(Object(u.a)(e=>e.filter(e=>e.module_accessor_level===n&&(!t||e.module_accessor_id===t))),Object(u.a)(e=>Object(R.plainToClass)(pt,e)),Object(u.a)(e=>e.map(e=>this.normalizeBookmarkModel(e))))}getPrivateBookmarks(e=""){return this.getUserBookmarks(Ec.Private,e).pipe(Object(u.a)(e=>e.filter(e=>e.is_owner)))}getFavorites(){return this.http.get(zc).pipe(Object(u.a)(e=>Object.values(e).map(e=>Object(R.plainToClass)(pt,e)).map(e=>this.normalizeBookmarkModel(e))))}deleteFavorite(e,t){return this.http.delete(`${zc}?modelId=${e}&category=${t}`)}getPrivateConditions(){return this.getUserConditions(Ec.Private)}getOrganizationBookmarks(e,t=""){return this.getUserBookmarks(Ec.Private,t).pipe(Object(u.a)(t=>t.filter(e=>e.tags.includes("enterprise")).filter(t=>t.group_access.some(t=>t.group_id===e))))}getOrganizationConditions(e){return this.getUserConditions(Ec.Group,e)}getOrganizationContent(e,t=""){return Object(dt.a)(this.getOrganizationBookmarks(e,t),this.getOrganizationConditions(e)).pipe(Object(u.a)(([e,t])=>[...e,...t]))}createBookmarkStory(e){return this.serializeModuleService.serialize({},new Vr,!1,this.store.selectSnapshot(Tc.getStory),this.store.selectSnapshot(Nr.getStoryChapters),e)}getPublicBookmarks(e=""){return this.getUserBookmarks(Ec.Public,e)}saveBookmark(e){const t=this.getNormalizedBookmarkEntry(e);let n;return(n=this.http.post(e.id?`${Ic}/update`:`${Ic}/save`,t,Lc)).pipe(Object(_t.a)(e=>this.getBookmarkModel(e.id)))}deleteBookmark(e){return this.http.delete(`${Ic}/delete?eid=${e}`).pipe(Object(L.a)(e=>{const{error:t}=e.error,n=t?t.message:"";return Object(ns.a)(n)}))}copyBookmark(e,t,n="en"){return t!==a.Module||Object(Mt.endsWith)(e,".json")||(e+=".json"),this.http.post(`${Ic}/copy`,{source_content_type:t,source_content_id:e}).pipe(Object(u.a)(e=>e.id),Object(_t.a)(l=>"en"===n?Object(z.a)(l):this.translateBookmark(l,e,t,n)))}atMaxFreeBookmarkCount(){return this.http.get("/ws/user/content/limit/check").pipe(Object(u.a)(()=>!1),Object(L.a)(e=>Object(z.a)(403===e.status)))}saveBookmarkThumbnails(e,t,n,l){const i=t.index.chapters.reduce((t,i)=>{const a=n.get(l[i.id]),o=Object(Mt.get)(a,"snapshot");if(o)t.push(this.postThumbnail(e,i.id,o,!0));else if(i.id!==l[i.id]||a.chapterId!==i.id){const n=Object(Mt.get)(a,"urls.large");if(n){const l=n.match(/(bookmarks\/)|(modules\/)/).index,a=n.slice(l);t.push(this.copyThumbnail(e,i.id,a))}}return t},[]),a=n.get(l[t.index.chapters[0].id]),o=Object(Mt.get)(a,"snapshot");if(o)i.push(this.postThumbnail(e,null,o,!0));else{const t=Object(Mt.get)(a,"urls.large");t&&i.push(this.copyThumbnail(e,null,t))}return i}deleteBookmarkThumbnails(e,t,n,l){const i=t.index.chapters.map(e=>l[e.id]||e.id);return Array.from(n.values()).filter(e=>i.indexOf(e.chapterId)<0).map(t=>this.deleteThumbnail(e,t.chapterId))}filterByTags(e,t,n=!1){return e.filter(e=>n?t.every(t=>e.tags.includes(t)):t.some(t=>e.tags.includes(t)))}canEdit(e){return!!e.is_owner||!(!e.group_access||!e.group_access.length)&&e.group_access[0].member_edit}normalizeBookmarkModel(e){const{id:t,type:n}=e;return"module"===n&&(e.id=this.exploreService.toAppContentId(t)),e.tour=e.tags.includes("tour"),e.animated=e.tags.includes("animated"),e}translateBookmark(e,t,n,l){const i=n===a.Module?t.replace(".json",""):t;return Object(dt.a)(this.storyService.getStory(e,a.Bookmark),this.storyService.getStoryTranslation(i,n,l)).pipe(Object(u.a)(([e,t])=>this.storyService.translateStory(e,t)),Object(_t.a)(t=>this.saveBookmark({isOwner:!0,title:t.displayName.substr(0,60),id:e,index:t})),Object(u.a)(e=>e.id),Object(L.a)(t=>404===t.status?Object(z.a)(e):Object(ns.a)(t)))}getNormalizedBookmarkEntry(e){const{id:t,title:n,description:l,index:i,public_access:a,add_group_access:o,remove_group_access:s,isOwner:r}=e;let c,u,p;if(r&&(c=o?this.getGroupAccess(o):[],s&&s.forEach(e=>{const t=this.getNormalizeGroupAccess({group_id:e.group_id,remove:!0});c.push(t)}),u=this.getNormalizedBool(a),i)){p={},i.chapters&&(p.user_generated_tour=this.getNormalizedBool(i.chapters.length>1));const e=(i.tags||[]).includes("animated");p.animated=this.getNormalizedBool(e)}return{eid:t,name:n,description:l,index:i,group_access:c,public_access:u,flags:p}}getGroupAccess(e){return e.map(e=>this.getNormalizeGroupAccess(e))}getNormalizeGroupAccess(e){const{group_id:t,group_name:n,member_edit:l,visible:i,remove:a}=e;return{group_id:t,group_name:n,member_edit:this.getNormalizedBool(l),visibility:this.getNormalizedBool(i),remove:this.getNormalizedBool(a)}}getNormalizedBool(e){return!0===e?"1":!1===e?"0":""}postThumbnail(e,t,n,l=!1){const i=new Image;return i.src=n,new Z.a(n=>{i.onload=()=>{const a=document.createElement("canvas"),o=a.getContext("2d");a.width=i.naturalWidth,a.height=i.naturalHeight,o.drawImage(i,0,0);const s=a.toDataURL("image/jpeg",1);let r="";r=t?`${Jc}/${e}/large/chapters/${t}.jpg`:`${Jc}/${e}/large/index.jpg`;const u=(new c.g).set("Content-Type","application/json");this.http.post(r,{image:s,invalidate:l},{headers:u,responseType:"text"}).subscribe(e=>{n.next(),n.complete()})}})}deleteThumbnail(e,t){return new Z.a(n=>{const l=new Request(`${Jc}/${e}/large/chapters/${t}.jpg`,{method:"DELETE"});fetch(l).then(e=>{n.complete()})})}copyThumbnail(e,t,n){let l="";const i=n.replace("/thumbs/","");l=t?`bookmarks/${e}/large/chapters/${t}.jpg`:`bookmarks/${e}/large/index.jpg`;const a=(new c.g).set("Content-Type","application/json");return new Z.a(e=>{this.http.post("/ws/thumbs/copy",{src:i,dst:l},{headers:a,responseType:"text"}).subscribe(t=>{e.next(),e.complete()})})}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(O.i),l.Xb(c.c),l.Xb($r),l.Xb(qr),l.Xb(lc))},token:e,providedIn:"root"}),e})();const Fc="/ws/enterprise/collection";let Rc=(()=>{class e{constructor(e,t){this.http=e,this.bookmarkService=t}getCollections(e){return this.http.get(`${Fc}?group_id=${e}`).pipe(Object(u.a)(e=>Object(R.plainToClass)(ts,e).map(e=>this.normalizeCollectionModel(e))))}getCollectionsByContent(e,t,n=!1){const{content_type:l,content_id:i}=t;return this.http.get(`${Fc}?group_id=${e}&content_type=${l}&content_id=${i}&include_content=${n?1:0}`).pipe(Object(u.a)(e=>Object(R.plainToClass)(ts,e).map(e=>this.normalizeCollectionModel(e))))}getCollectionContentId(e,t){const{content_type:n,content_id:l}=t;return this.getCollectionsByContent(e.group_id,t,!0).pipe(Object(u.a)(t=>t.find(t=>t.collection_id===e.collection_id)),Object(u.a)(e=>{let t;return e&&(t=e.collection_content.find(e=>"module"===n?l===e.module_name:l===e.id)),t?t.collection_content_id:null}))}getCollection(e,t,n){return this.http.get(`${Fc}?group_id=${e}&collection_id=${t}&include_content=${n?1:0}`).pipe(Object(u.a)(e=>{const t=e[0];return t?this.normalizeCollectionModel(t):t}))}getCollectionContent(e,t,n=""){const l=n.toLocaleLowerCase().split(" ");return this.getCollection(e,t,!0).pipe(Object(u.a)(e=>e.collection_content.map(e=>Object(R.plainToClass)(pt,e)).filter(e=>{let t=!0;return l.length&&e.title&&l.forEach(n=>{t=t&&e.title.toLocaleLowerCase().indexOf(n)>=0}),t=t&&!0!==e.unavailable})))}addToCollection(e,t){return this.formPost(Fc,{group_id:e.group_id,collection_id:e.collection_id,add_content:t}).pipe(Object(u.a)(e=>e.map(e=>this.normalizeCollectionModel(e))))}removeFromCollection(e,t){return this.formPost(Fc,{group_id:e.group_id,collection_id:e.collection_id,remove_content:t}).pipe(Object(u.a)(e=>e.map(e=>this.normalizeCollectionModel(e))))}getOrganizationAttribute(e,t,n){return e.find(e=>e.type===t&&e.name===n)}addUserToOrganization(e){return this.http.post("/ws/enterprise/user/add",{group_eid:e})}addUserWithGroupCode(e){return this.http.post("/ws/enterprise/user/add",{group_code:e})}normalizeCollectionModel(e){return e.collection_content&&e.collection_content.forEach(e=>{this.bookmarkService.normalizeBookmarkModel(e)}),e}formPost(e,t){const n={headers:new c.g({"Content-Type":"application/x-www-form-urlencoded"})},l=new URLSearchParams;return Object.keys(t).forEach(e=>{const n=t[e],i=`${n instanceof Object?JSON.stringify(n):n}`;l.set(e,i)}),this.http.post(`${e}`,l.toString(),n).pipe(Object(u.a)(e=>e))}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(c.c),l.Xb(Ac))},token:e,providedIn:"root"}),e})();const Dc={};let Uc=(()=>{let e=class{constructor(e,t){this.organizationsService=e,this.publishService=t}static getOrganizations(e){return e.organizations}static getOrganization(e){return e.organization}static getSelectedOrganization(e){return e.selectedOrganization}static getCollections(e){return e.collections}static getSelectedCollection(e){return e.selectedCollection}static getWidgetURL(e){return e.widgetURL}static getWidgetOptions(e){return e.widgetOptions}static getAppFeatures(e){return e.appFeatures}selectOrganization(e,t){e.patchState({selectedOrganization:t.organization,selectedCollection:null})}setOrganizations(e,t){const n=t.organizations||[],l=n[0];let i,a=null,o=Object.assign({},e.getState().appFeatures);if(l&&l.group_attributes){const e=l.group_attributes,t=this.organizationsService.getOrganizationAttribute(e,"widget_settings","widget_custom_url_path");t&&t.value&&(i=t.value);const n=this.organizationsService.getOrganizationAttribute(e,"widget_settings","widget_url_params");n&&n.value&&(a=this.publishService.extendWidgetOptions(new ft,n.value));const s=this.organizationsService.getOrganizationAttribute(e,"app_settings","web_app_features");s&&(o=Object.assign({},o,s.value))}e.patchState({organization:l,organizations:n,widgetURL:i,widgetOptions:a,appFeatures:o}),e.dispatch(new At(i))}joinOrganization(e,{organization:t}){this.organizationsService.addUserToOrganization(t.eid).subscribe(()=>e.dispatch(new qn(t)),n=>e.dispatch(new Xn(t)))}getCollections(e,t){this.organizationsService.getCollections(t.organizationId).subscribe(t=>{e.dispatch(new Wn(t))})}getCollectionsSuccess(e,t){e.patchState({collections:t.collections})}selectCollection(e,t){const{organization:n,selectedOrganization:l}=e.getState();e.patchState({selectedOrganization:l||n,selectedCollection:t.collection})}resetOrganizations(e,t){e.setState(Dc)}};return Object(y.__decorate)([Object(O.a)(Bn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Bn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"selectOrganization",null),Object(y.__decorate)([Object(O.a)(Hn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Hn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setOrganizations",null),Object(y.__decorate)([Object(O.a)(Gn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Gn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"joinOrganization",null),Object(y.__decorate)([Object(O.a)(Vn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Vn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getCollections",null),Object(y.__decorate)([Object(O.a)(Wn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Wn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getCollectionsSuccess",null),Object(y.__decorate)([Object(O.a)($n),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,$n]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"selectCollection",null),Object(y.__decorate)([Object(O.a)(Kn),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Kn]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetOrganizations",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[es]),Object(y.__metadata)("design:returntype",void 0)],e,"getOrganizations",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[es]),Object(y.__metadata)("design:returntype",void 0)],e,"getOrganization",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[es]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedOrganization",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[es]),Object(y.__metadata)("design:returntype",void 0)],e,"getCollections",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[es]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedCollection",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[es]),Object(y.__metadata)("design:returntype",void 0)],e,"getWidgetURL",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[es]),Object(y.__metadata)("design:returntype",void 0)],e,"getWidgetOptions",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[es]),Object(y.__metadata)("design:returntype",void 0)],e,"getAppFeatures",null),Object(y.__decorate)([Object(O.g)({name:"organizations",defaults:{}})],e)})();const Nc={title:"Small",type:"desktop",dimensions:{width:480,height:320},orientation:"horizontal"},Hc={title:"Medium",type:"desktop",dimensions:{width:700,height:550},orientation:"horizontal"},Bc={title:"Large",type:"desktop",dimensions:{width:1920,height:1200},orientation:"horizontal"},$c={title:"Extra Large",type:"desktop",dimensions:{width:2560,height:1440},orientation:"horizontal"},Vc={title:"Maximum",type:"desktop",dimensions:{width:5120,height:2880},orientation:"horizontal"},Wc=300;let Gc=(()=>{class e{constructor(e,t,n,l,i,a,o,s,r){this.store=e,this.actions=t,this.publishService=n,this.storageService=l,this.clipboardService=i,this.dialogService=a,this.snackBar=o,this.formBuilder=s,this.ref=r,this.minSnapshotPixels={width:300,height:300},this.maxSnapshotPixels={width:5120,height:2880},this.minSnapshotInches={width:this.pixelsToInches(this.minSnapshotPixels.width),height:this.pixelsToInches(this.minSnapshotPixels.height)},this.maxSnapshotInches={width:this.pixelsToInches(this.maxSnapshotPixels.width),height:this.pixelsToInches(this.maxSnapshotPixels.height)},this.imageTypeEnum=kt,this.snapshotSizes=[Nc,Hc,Bc,$c,Vc],this.selectedSnapshotSize=Hc,this.ngUnsubscribe=new K.a,this.defaultWidgetOptions=Object.assign({},new ft,{loadRotate:10});const c=this.getWidgetOptions(),u=this.store.selectSnapshot(Ro.getDimensions),p=this.store.selectSnapshot(Ro.getMinDimensions),{button:d,handHint:b,play:g}=c.initial,{alert:h,overlay:m}=c.disableScroll;this.formModeGroup=this.formBuilder.group({mode:["3d",de.x.required]});const x=this.selectedSnapshotSize.dimensions;this.formSnapshot=this.formBuilder.group({dimensions:this.formBuilder.group({width:[x.width,[de.x.required,de.x.min(this.minSnapshotPixels.width),de.x.max(this.maxSnapshotPixels.width)]],height:[x.height,[de.x.required,de.x.min(this.minSnapshotPixels.height),de.x.max(this.maxSnapshotPixels.height)]]}),inches:this.formBuilder.group({width:[this.pixelsToInches(x.width),[de.x.required,de.x.min(this.minSnapshotInches.width),de.x.max(this.maxSnapshotInches.width)]],height:[this.pixelsToInches(x.height),[de.x.required,de.x.min(this.minSnapshotInches.height),de.x.max(this.maxSnapshotInches.height)]]}),imageType:[kt.JPEG,[de.x.required]]}),this.form=this.formBuilder.group({dimensions:this.formBuilder.group({width:[u.width,[de.x.min(p.width)]],height:[u.height,[de.x.min(p.height)]]}),options:this.formBuilder.group(c),rotate:this.formBuilder.group({enabled:null!==c.loadRotate,value:c.loadRotate}),initial:this.formBuilder.group({enabled:d||b||g,mode:d?"button":b?g:""}),disableScroll:this.formBuilder.group({enabled:h||m,mode:h?"alert":m?"overlay":""})});const f=Object(Mt.get)(c,"background.colors");f&&(this.bgColor=this.getBackgroundFromColor({red:f[0],green:f[1],blue:f[2],alpha:f.length>3?f[3]:1})),this.actions.pipe(Object(O.l)(Ht),Object(_t.a)(e=>this.copyToClipboard(e.url)),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackBar.open(e?"Successfully copied URL to clipboard.":"Unable to copy URL to clipboard.")}),this.actions.pipe(Object(O.l)(Bt),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("Unable to generate URL.")}),this.actions.pipe(Object(O.l)(Dt),Object(_t.a)(e=>this.copyToClipboard(e.embed)),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackBar.open(e?"Successfully copied embed code to clipboard.":"Unable to copy embed code to clipboard.")}),this.actions.pipe(Object(O.l)(Ut),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("Unable to generate embed code.")}),this.actions.pipe(Object(O.l)(Gt),Object(_t.a)(e=>this.copyToClipboard(e.imageURL)),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackBar.open(e?"Successfully copied image URL to clipboard.":"Unable to copy image URL to clipboard.")}),this.actions.pipe(Object(O.l)(qt),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("Unable to generate image URL.")}),this.actions.pipe(Object(O.l)(Kt),Object(_t.a)(e=>this.copyToClipboard(e.embed)),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackBar.open(e?"Successfully copied image embed code to clipboard.":"Unable to copy image embed code to clipboard.")}),this.actions.pipe(Object(O.l)(Zt),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("Unable to generate embed code.")})}get widgetOptions(){return"2d"===this.mode?null:this.form.value.options}get rotateEnabled(){return this.form.get("rotate").value.enabled}get mode(){return this.formModeGroup.get("mode").value}get widgetWidth(){return"2d"===this.mode?this.selectedSnapshotSize.dimensions.width:this.store.selectSnapshot(Ro.getDimensions).width}get widgetHeight(){return"2d"===this.mode?this.selectedSnapshotSize.dimensions.height:this.store.selectSnapshot(Ro.getDimensions).height}get widgetBGColor(){return"2d"===this.mode?this.snapshotBGColor:this.bgColor}get widgetScalable(){return"2d"===this.mode}get imageType(){return this.formSnapshot.get("imageType").value}ngOnInit(){this.setupWidgetForm(),this.setupSnapshotForm(),this.store.dispatch(new $t(!0))}ngOnDestroy(){this.store.dispatch(new $t(!1)),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setupWidgetForm(){const e=this.form.get("options"),t=this.form.get("dimensions"),n=this.form.get("rotate"),l=this.form.get("initial"),i=this.form.get("disableScroll"),a=n.get("enabled"),o=n.get("value");a.valueChanges.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(t=>{t?o.patchValue("number"==typeof o.value?o.value:this.defaultWidgetOptions.loadRotate):e.patchValue({loadRotate:null})}),o.valueChanges.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(t=>{e.patchValue({loadRotate:t})}),l.get("enabled").valueChanges.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{l.patchValue({mode:e?"button":""})}),l.get("mode").valueChanges.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(t=>{l.patchValue({enabled:!!t},{emitEvent:!1}),e.patchValue({initial:{button:"button"===t,handHint:"handHint"===t,play:"play"===t}})}),i.get("enabled").valueChanges.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{i.patchValue({mode:e?"alert":""})}),i.get("mode").valueChanges.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(t=>{i.patchValue({enabled:!!t},{emitEvent:!1}),e.patchValue({disableScroll:{alert:"alert"===t,overlay:"overlay"===t}})}),t.valueChanges.pipe(Object(Qo.a)(300),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.setScreenDimensions(e)}),this.dimensions$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{t.setValue(e,{emitEvent:!1})}),e.valueChanges.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.writeSavedOptions(e)})}setupSnapshotForm(){const e=this.formSnapshot.get("dimensions"),t=this.formSnapshot.get("inches");t.valueChanges.pipe(Object(Qo.a)(500),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{const{width:n,height:l}=t.value;t.valid&&e.patchValue({width:this.inchesToPixels(n),height:this.inchesToPixels(l)})}),e.valueChanges.pipe(Object(Qo.a)(500),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{const{width:t,height:n}=e.value;if(e.valid){const e=this.snapshotSizes.find(e=>e.dimensions.width===t&&e.dimensions.height===n);this.selectedSnapshotSize=Object.assign({},this.selectedSnapshotSize,{title:e?e.title:"Custom",dimensions:{width:t,height:n}}),this.ref.markForCheck()}})}setScreenDimensions(e){this.store.dispatch(new Ft(e))}handleGenerateIFrame(){this.generateIFrameCode()}handleGenerateURL(){this.generateURL()}handleCopyImageURL(){this.generateImageURL()}handleGenerateImage(){this.generateImageCode()}generateIFrameCode(){this.store.dispatch(new Rt(this.model,this.form.value.options,this.camera))}generateURL(){this.store.dispatch(new Nt(this.model,this.form.value.options,this.camera))}generateImageURL(){const e=this.imageType===kt.PNG?"png":"jpeg";this.publishWidget.takeSnapshot(e).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(t=>{this.store.dispatch(new Wt(t,e))})}generateImageCode(){const e=this.imageType===kt.PNG?"png":"jpeg";this.publishWidget.takeSnapshot(e).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(t=>{const n=new ft;this.store.dispatch(new Xt(this.model,t,e,n,this.camera))})}handleSnapshotBGColorClick(e){this.snapshotBGColor=this.getBackgroundFromColor(e)}handleSnapshotSizeClick(e){this.selectedSnapshotSize=Object.assign({},e),this.formSnapshot.patchValue({dimensions:{width:e.dimensions.width,height:e.dimensions.height},inches:{width:this.pixelsToInches(e.dimensions.width),height:this.pixelsToInches(e.dimensions.height)}},{emitEvent:!1})}handleDownloadSnapClick(){this.publishWidget.takeSnapshot(this.imageType===kt.PNG?"png":"jpeg").pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.downloadImage(e)})}handleCameraUpdated(e){this.camera=e}copyToClipboard(e){return this.clipboardService.copyToClipboard(e).pipe(Object(_t.a)(t=>t?Object(z.a)(t):this.dialogService.openClipboardDialog(e).afterClosed()))}formatScreenSizeText(e){const{title:t,dimensions:n}=e;return`${t} (${n.width} x ${n.height})`}getBackgroundFromColor(e){const t=e?[e.red,e.green,e.blue,e.alpha]:null;return t?new $o([...t,...t],"radial",[0,100]):null}getWidgetOptions(){const e=this.readSavedOptions(),t=this.store.selectSnapshot(Uc.getWidgetOptions);if(e){const n=this.publishService.extendWidgetOptions(new ft,e);return Object.assign({},n,{background:t?t.background:null})}return t||new ft}readSavedOptions(){!function(e,t){const n=localStorage.getItem(Yn.WidgetOptions);if(null===n)return;const l=JSON.parse(n);if(void 0!==l[e]&&(l[e].timestamp||0)<1573675067505){delete l[e];try{localStorage.setItem(Yn.WidgetOptions,JSON.stringify(l))}catch(yr){}}}(this.getStorageKey());const e=this.storageService.getLocalJSON(Yn.WidgetOptions);return e?e[this.getStorageKey()]:null}writeSavedOptions(e){const t=Object.assign({},e,{timestamp:Date.now()}),n=this.storageService.getLocalJSON(Yn.WidgetOptions)||{};n[this.getStorageKey()]=t,this.storageService.setLocalItem(Yn.WidgetOptions,n)}getStorageKey(){return this.store.selectSnapshot(Ao.getUserProfile).eid}downloadImage(e){const t=(this.model.title||"snapshot").replace(/ /g,"_").replace(/\W/g,"");this.publishService.exportImage(e,this.imageType,`${t}.${this.imageType===kt.PNG?"png":"jpg"}`).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackBar.open(e?"Successfuly downloaded image":"Unable to download image.")})}pixelsToInches(e){return parseFloat((e/Wc).toFixed(2))}inchesToPixels(e){return e*Wc}}return Object(y.__decorate)([Object(O.e)(Ro.getDimensions),Object(y.__metadata)("design:type",Z.a)],e.prototype,"dimensions$",void 0),Object(y.__decorate)([Object(O.e)(Ro.getMinDimensions),Object(y.__metadata)("design:type",Z.a)],e.prototype,"minDimensions$",void 0),e})();const qc="clipboard";let Xc=(()=>{class e{constructor(){}getClipboardAPISupport(){return qc in navigator}getClipboardAPI(){return navigator[qc]}copyToClipboard(e){if(this.getClipboardAPISupport()){const t=this.getClipboardAPI();return new Z.a(n=>{t.writeText(e).then(()=>{n.next(!0),n.complete()}).catch(e=>{n.next(!1),n.complete()})})}return Object(z.a)(!1)}copyInputFieldValue(e){e.select();let t=!1;try{t=document.execCommand("copy")}catch(n){t=!1}return t}}return e.ngInjectableDef=l.Wb({factory:function(){return new e},token:e,providedIn:"root"}),e})();class Kc{constructor(){}ngOnInit(){}}var Zc=function(e){return e.UpgradeSubscription="/legacy/upgrade-human.html",e.BuySubscription="/legacy/buy-subscription.html",e.MyProfile="/legacy/user-account.html",e}({});class Yc{constructor(e,t,n){this.dialogRef=e,this.data=t,this.sanitizer=n,this.headerOffset=100,this.settings={type:null,dimensions:{width:100,height:100}},this.settings=Object.assign({},this.settings,t);const{width:l,height:i}=t.dimensions;this.dialogRef.updateSize(`${l}px`,`${i}px`)}get height(){const{height:e}=this.settings.dimensions;return Math.max(200,e-this.headerOffset)}get src(){const e=this.getURL();return e?this.sanitizer.bypassSecurityTrustResourceUrl(e):null}ngOnInit(){}closeDialog(){this.dialogRef.close()}getURL(){const e=`${this.settings.type}`;if(Object.values(Zc).includes(e)){const t=this.getURLParams();return t?`${e}?${t}`:e}return""}getURLParams(){const e=this.settings.options;return e?Object.entries(e).map(([e,t])=>`${e}=${t}`).join("&"):""}}class Qc{constructor(e,t){this.dialogRef=e,this.data=t,this.settings={titleText:"Confirm Action",bodyText:"",confirmText:"Confirm",confirmColor:"primary",cancelText:"Cancel",confirmEnabled:!0,cancelEnabled:!0,miscText:""},t&&(this.settings=Object.assign({},this.settings,t))}ngOnInit(){}}class eu{}var tu=n("IAdc");const nu={label:"Most Recent",fields:["collection_content_createdate","update_date_time","create_date_time"],ascending:!1},lu={label:"Title (A-Z)",fields:["title"],ascending:!0},iu=[nu,lu,{label:"Title (Z-A)",fields:["title"],ascending:!1},{label:"Author (A-Z)",fields:["author"],ascending:!0},{label:"Author (Z-A)",fields:["author"],ascending:!1}];function au(e,t,n){const l=t.map(t=>e[t]).filter(e=>!Object(Mt.isNil)(e));return n?l.sort().shift():l.sort().pop()}function ou(e,t,n){const l=new Intl.Collator("en-US",{sensitivity:"base"});return e.sort((e,i)=>{const a=au(e,t,n)||"",o=au(i,t,n)||"";return(n?1:-1)*l.compare(a.toString(),o.toString())})}const su={loading:!0,exporting:!1,copying:!1,saving:!1,bookmarks:[],selectedBookmark:null,sort:nu,checkedBookmarks:[],selectedCategory:null};let ru=(()=>{let e=class{constructor(e,t,n,l,i,a){this.store=e,this.storyService=t,this.bookmarksService=n,this.exploreService=l,this.publishService=i,this.organizationsService=a}static getBookmarks(e){const{bookmarks:t,sort:n}=e,{ascending:l,fields:i}=n;return ou(t,i,l)}static getCheckedBookmarks(e){return e.checkedBookmarks}static getSelectedBookmark(e){return e.selectedBookmark}static getLoading(e){return e.loading}static getExporting(e){return e.exporting}static getSaving(e){return e.saving}static getCopying(e){return e.copying}static getSort(e){return e.sort}static getSelectedCategory(e){return e.selectedCategory}loadBookmarks(e,t){e.patchState({loading:!0,bookmarks:[],checkedBookmarks:[]}),Object(dt.a)(this.bookmarksService.getPrivateBookmarks(t.query),this.bookmarksService.getPrivateConditions(),this.bookmarksService.getFavorites()).pipe(Object(B.a)(()=>{e.patchState({loading:!1})})).subscribe(([t,n,l])=>{e.dispatch(new vl([...t,...n,...l]))})}loadOrganizationBookmarks(e,{organizationId:t}){e.patchState({loading:!0,bookmarks:[],checkedBookmarks:[]}),this.bookmarksService.getOrganizationContent(t).pipe(Object(B.a)(()=>{e.patchState({loading:!1})})).subscribe(t=>{e.dispatch(new vl(t))})}loadCollectionBookmarks(e,t){e.patchState({loading:!0,bookmarks:[],checkedBookmarks:[]}),this.organizationsService.getCollectionContent(t.organizationId,t.collectionId).pipe(Object(B.a)(()=>{e.patchState({loading:!1})})).subscribe(t=>{e.dispatch(new vl(t))})}loadSuccess({patchState:e},t){e({bookmarks:t.result})}loadBookmark(e,t){const{id:n,type:l}=t;("bookmark"===l?this.bookmarksService.getBookmarkModel(n):this.exploreService.getConditionModel(n)).subscribe(t=>{e.dispatch(new wl(t))})}selectBookmarkSuccess(e,t){e.patchState({selectedBookmark:t.bookmark})}saveBookmark(e,t){const n=t.bookmarkEntry;let l;e.patchState({saving:!0});const i=this.store.selectSnapshot(Nr.getStoryChapters),a=wr.makeChapterIdMap(i,!1===t.inplace);t.includeIndex&&(l=this.bookmarksService.createBookmarkStory(a),n.index=l.story);const o=n.id?"update":"save";this.bookmarksService.saveBookmark(n).pipe(Object(B.a)(()=>{e.patchState({saving:!1})})).subscribe(i=>{if(t.includeIndex){const t=this.store.selectSnapshot(Nr.getRegisteredThumbnails);e.dispatch(new zl(o,i.id,n,t,Object(Mt.invert)(a)))}(n.addCollection||n.removeCollection)&&e.dispatch(new Hl(i,n.addCollection,n.removeCollection)),e.dispatch(new Pl(i,l?l.story:null,o))},t=>{e.dispatch(new Ml(n))})}saveBookmarkSuccess(e,t){const n=t.bookmark,l=e.getState().bookmarks,i=l.findIndex(e=>e.id===n.id);-1!==i&&(l[i]=n,e.patchState({bookmarks:[...l]})),"save"===t.method&&e.patchState({selectedBookmark:t.bookmark})}deleteBookmark(e,t){const n=t.bookmarkId;this.bookmarksService.deleteBookmark(n).subscribe(()=>{e.dispatch(new jl(n))},t=>{e.dispatch(new kl(n,t))})}deleteBookmarkSuccess(e,t){const n=e.getState().bookmarks.filter(e=>e.id!==t.bookmarkId);e.patchState({bookmarks:[...n]})}deleteFavorite(e,t){const n=t.bookmark,l=n.id,i=Object(Mt.get)(n,"category","bookmark"),a="bookmark"===i?l:this.exploreService.toDatabaseContentId(l);this.bookmarksService.deleteFavorite(a,i).subscribe(()=>{e.dispatch(new Il(l))},t=>{e.dispatch(new Jl(l))})}deleteFavoriteSuccess(e,t){const n=e.getState().bookmarks.filter(e=>e.id!==t.bookmarkId);e.patchState({bookmarks:[...n]})}sortBookmarks(e,t){const n=e.getState().bookmarks;e.patchState({sort:t.sort,bookmarks:[...n]})}clearBookmarks(e,t){e.patchState({bookmarks:[],checkedBookmarks:[]})}resetBookmarks(e,t){e.setState(su)}checkBookmark(e,t){let n=e.getState().checkedBookmarks;const l=n.some(e=>e===t.id);t.checked&&!l?n=[...n,t.id]:t.checked||(n=n.filter(e=>e!==t.id)),e.patchState({checkedBookmarks:n})}setCheckedBookmarks(e,t){e.patchState({checkedBookmarks:t.ids})}saveBookmarkThumbnails(e,t){const n=t.chapterIdMap,l=t.thumbnails,i=this.bookmarksService.saveBookmarkThumbnails(t.bookmarkId,t.bookmarkEntry,l,n);if("update"===t.method){const e=this.bookmarksService.deleteBookmarkThumbnails(t.bookmarkId,t.bookmarkEntry,l,n);for(const t of e)i.push(t)}Object(dt.a)(i).subscribe(n=>{const l=t.bookmarkEntry.index.chapters.map(e=>{const n=e.id;return{originalStoryId:t.bookmarkId,newChapterId:n,originalChapterId:n}}),i=bc.generateThumbnailUrls(l);e.dispatch(new jo(new Map)).subscribe(()=>{e.dispatch(new jo(i))})})}exportBookmarks(e,t){const{bookmarks:n,widgetURL:l,widgetOptions:i,offlineEnabled:a}=t,o=i||new ft;e.patchState({exporting:!0}),this.publishService.exportModels(n,l,o,null,t.userLanguage,t.userApp,a).pipe(Object(B.a)(()=>{e.patchState({exporting:!1})})).subscribe(t=>{e.dispatch(t?new Ul(n):new Nl(n))})}updateBookmarkCollection(e,t){const{bookmark:n,addCollection:l,removeCollection:i}=t,a={content_type:n.type,content_id:n.id},o=[];i&&o.push(this.organizationsService.getCollectionContentId(i,a).pipe(Object(Q.a)(e=>!!e),Object(_t.a)(e=>this.organizationsService.removeFromCollection(i,[e])),Object(Zn.a)(()=>e.dispatch(new Gl(n,i)),()=>e.dispatch(new ql(n,i))))),l&&o.push(this.organizationsService.addToCollection(l,[a]).pipe(Object(Zn.a)(()=>e.dispatch(new Vl(n,i)),()=>e.dispatch(new Wl(n,i))))),Object(Sr.a)(...o).subscribe(()=>e.dispatch(new Bl(n,l,i)),()=>e.dispatch(new $l(n,l,i)))}removeBookmarkCollectionSuccess(e,t){const{bookmarks:n,selectedCategory:l}=e.getState();if("collection"===l){const l=t.bookmark.id,i=n.filter(e=>e.id!==l);e.patchState({bookmarks:[...i]})}}copyBookmark(e,t){const{groupAccess:n,collection:l}=t;e.patchState({copying:!0}),this.bookmarksService.copyBookmark(t.id,t.type,t.lang).pipe(Object(_t.a)(e=>{const t=[Object(z.a)(e)];return n&&(t.push(this.bookmarksService.saveBookmark({isOwner:!0,id:e,add_group_access:[n]})),l&&t.push(this.organizationsService.addToCollection(l,[{content_type:"bookmark",content_id:e}]))),Object(Sr.a)(...t).pipe(Object(tu.a)(),Object(u.a)(()=>e))}),Object(B.a)(()=>{e.patchState({copying:!1})})).subscribe(i=>{e.dispatch(new Kl(i,t.id,n,l))},n=>{e.dispatch(new Zl(t.id,n))})}setBookmarkText(e,t){const n=e.getState().selectedBookmark;e.patchState({selectedBookmark:Object.assign({},n,{title:t.title})})}setSelectedCategory(e,{category:t}){e.patchState({selectedCategory:t||null})}};return Object(y.__decorate)([Object(O.a)(fl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,fl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loadBookmarks",null),Object(y.__decorate)([Object(O.a)(_l),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,_l]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loadOrganizationBookmarks",null),Object(y.__decorate)([Object(O.a)(yl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,yl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loadCollectionBookmarks",null),Object(y.__decorate)([Object(O.a)(vl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,vl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loadSuccess",null),Object(y.__decorate)([Object(O.a)(Ol),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ol]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loadBookmark",null),Object(y.__decorate)([Object(O.a)(wl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,wl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"selectBookmarkSuccess",null),Object(y.__decorate)([Object(O.a)(Sl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Sl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"saveBookmark",null),Object(y.__decorate)([Object(O.a)(Pl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Pl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"saveBookmarkSuccess",null),Object(y.__decorate)([Object(O.a)(Cl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Cl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"deleteBookmark",null),Object(y.__decorate)([Object(O.a)(jl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,jl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"deleteBookmarkSuccess",null),Object(y.__decorate)([Object(O.a)(Tl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Tl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"deleteFavorite",null),Object(y.__decorate)([Object(O.a)(Il),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Il]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"deleteFavoriteSuccess",null),Object(y.__decorate)([Object(O.a)(Al),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Al]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"sortBookmarks",null),Object(y.__decorate)([Object(O.a)(El),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,El]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"clearBookmarks",null),Object(y.__decorate)([Object(O.a)(Ll),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ll]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetBookmarks",null),Object(y.__decorate)([Object(O.a)(Fl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Fl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"checkBookmark",null),Object(y.__decorate)([Object(O.a)(Rl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Rl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setCheckedBookmarks",null),Object(y.__decorate)([Object(O.a)(zl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,zl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"saveBookmarkThumbnails",null),Object(y.__decorate)([Object(O.a)(Dl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Dl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"exportBookmarks",null),Object(y.__decorate)([Object(O.a)(Hl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Hl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"updateBookmarkCollection",null),Object(y.__decorate)([Object(O.a)(Gl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Gl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"removeBookmarkCollectionSuccess",null),Object(y.__decorate)([Object(O.a)(Xl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Xl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"copyBookmark",null),Object(y.__decorate)([Object(O.a)(Yl),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Yl]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setBookmarkText",null),Object(y.__decorate)([Object(O.a)(Ql),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ql]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setSelectedCategory",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[eu]),Object(y.__metadata)("design:returntype",void 0)],e,"getBookmarks",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[eu]),Object(y.__metadata)("design:returntype",void 0)],e,"getCheckedBookmarks",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[eu]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedBookmark",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[eu]),Object(y.__metadata)("design:returntype",void 0)],e,"getLoading",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[eu]),Object(y.__metadata)("design:returntype",void 0)],e,"getExporting",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[eu]),Object(y.__metadata)("design:returntype",void 0)],e,"getSaving",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[eu]),Object(y.__metadata)("design:returntype",void 0)],e,"getCopying",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[eu]),Object(y.__metadata)("design:returntype",void 0)],e,"getSort",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[eu]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedCategory",null),Object(y.__decorate)([Object(O.g)({name:"bookmarks",defaults:su})],e)})();var cu=function(e){return e[e.SaveStory=0]="SaveStory",e[e.Manage=1]="Manage",e}({});let uu=(()=>{class e{constructor(e,t,n,l,i,a,o){this.store=e,this.fb=t,this.dialogRef=n,this.data=l,this.snackBar=i,this.actions=a,this.organizationsService=o,this.saveDebounce=new K.a,this.settings={mode:cu.SaveStory},this.ngUnsubscribe=new K.a,this.settings=Object.assign({},this.settings,l),this.form=this.fb.group({title:["",[de.x.required,de.x.maxLength(60)]],collection:[null],groupAccess:[null],publicAccess:[!1]}),this.actions.pipe(Object(O.l)(Pl),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>this.handleSaveSuccess(e)),this.actions.pipe(Object(O.l)(Ml),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>this.handleSaveFailure(e)),this.saveDebounce.pipe(Object(Qo.a)(100),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.saveBookmark()})}get dialogTitle(){return this.settings.title||(this.settings.mode===cu.Manage?"Manage":"Save")}ngOnInit(){const e=this.store.selectSnapshot(Uc.getOrganization);e&&this.store.dispatch(new Vn(e.id));const t=this.settings.bookmark,n=t?t.title:this.settings.bookmarkTitle?this.settings.bookmarkTitle:"",l=t?this.getGroupAccess(t):null;let i=!1,a=!1;l?a=!(i=l.member_edit)&&l.visible:!t&&e&&(i=!1,a=!0);const o=!this.isGroupUser()&&t&&t.tags.includes("public");if(this.form.patchValue({title:n,groupAccess:i?"edit":a?"view":"",publicAccess:o}),this.isNew=!0,this.isOwner=!0,t)if(t.is_owner)this.isNew=!1,this.isOwner=!0;else{const e=t.group_access.some(e=>!0===e.member_edit);this.isNew=!e,this.isOwner=this.isNew}this.initGroupAccess(),this.initCollections(),this.toggleGroupAccess(a,i)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initGroupAccess(){this.form.get("groupAccess").valueChanges.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.toggleGroupAccess("view"===e,"edit"===e)})}initCollections(){const e=this.settings.bookmark;this.form.get("collection").disable();const t=this.store.selectSnapshot(Uc.getOrganization);t&&e&&this.organizationsService.getCollectionsByContent(t.id,{content_type:e.type,content_id:e.id}).pipe(Object(u.a)(e=>e[0]),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.currentCollection=e,this.form.patchValue({collection:this.currentCollection?this.currentCollection.collection_id:null})})}toggleGroupAccess(e,t){const n=this.form.get("collection"),l=this.isOwner||this.isNew,i=e||t;i||n.setValue(null),l&&i?n.enable():n.disable()}handleSubmit(){this.form.valid&&this.saveDebounce.next()}saveBookmark(){const e=this.getBookmarkEntry();this.store.dispatch(new Sl(e,!1,this.settings.mode===cu.SaveStory))}handleSaveSuccess(e){const t=e.bookmark;this.snackBar.open(this.settings.mode===cu.Manage?`Your updates to "${t.title}" have been saved to your dashboard.`:`"${t.title}" saved to your dashboard.`),this.dialogRef.close(t)}handleSaveFailure(e){this.snackBar.open(`Unable to save bookmark "${e.bookmarkEntry.title}". Please try again.`)}getBookmarkEntry(){const{bookmark:e}=this.settings,{title:t,collection:n,groupAccess:l,publicAccess:i}=this.form.value,a="view"===l,o="edit"===l,s=this.isGroupUser()?null:i;let r,c,u=[],p=[];if(this.isOwner){const t=this.createGroupAccess(a,o);t?u=[t]:p=e?e.group_access:[];const l=this.store.selectSnapshot(Uc.getCollections)||[],i=parseInt(n,10),s=l.find(e=>e.collection_id===i);this.currentCollection?this.currentCollection.collection_id===i||(r=s,c=this.currentCollection):s&&(r=s)}return{isOwner:!e||e.is_owner,id:e?e.id:null,title:t,add_group_access:u,remove_group_access:p,addCollection:r,removeCollection:c,public_access:s}}getGroupAccess(e){const t=this.store.selectSnapshot(Uc.getOrganization);let n=null;if(t&&e.group_access){const l=t.id;n=e.group_access.find(e=>e.group_id===l)}return n}createGroupAccess(e,t){const n=this.store.selectSnapshot(Uc.getOrganization);return n&&(e||t)?{group_id:n.id,member_edit:t,visible:e||t}:null}isGroupUser(){return!!this.store.selectSnapshot(Uc.getOrganization)}}return Object(y.__decorate)([Object(O.e)(Uc.getOrganization),Object(y.__metadata)("design:type",Z.a)],e.prototype,"organization$",void 0),Object(y.__decorate)([Object(O.e)(Uc.getCollections),Object(y.__metadata)("design:type",Z.a)],e.prototype,"collections$",void 0),Object(y.__decorate)([Object(O.e)(ru.getSaving),Object(y.__metadata)("design:type",Z.a)],e.prototype,"saving$",void 0),e})();class pu{constructor(e,t,n){this.dialogRef=e,this.data=t,this.storageService=n,this.email=!1,this.ip=!1,this.supportEmail=r.supportEmail,this.organizationName=t.organizationName,this.email=t.email,this.ip=t.ip}ngOnInit(){}handleDontShowClick(){const e=this.storageService.getLocalJSON(Yn.GroupRestriction)||{};e.dontShowDialog=!0,this.storageService.setLocalItem(Yn.GroupRestriction,e),this.dialogRef.close()}}class du{constructor(e,t,n){this.dialogRef=e,this.data=t,this.clipboardService=n,this.settings={title:"Copy to Clipboard",copyText:""},this.settings=Object.assign({},this.settings,t)}get rowCount(){return this.settings.copyText.split(/\r?\n/).length+1}ngOnInit(){}ngAfterViewInit(){const e=this.copyField.nativeElement;e.focus(),e.select()}handleCopyClick(){const e=this.clipboardService.copyInputFieldValue(this.copyField.nativeElement);this.close(e)}handleCancelClick(){this.close(!1)}close(e){this.dialogRef.close(e)}}var bu=function(e){return e[e.NewUser=0]="NewUser",e[e.ExistingUser=1]="ExistingUser",e[e.Group=2]="Group",e}({});const gu=[{text:"We make it easy to visualize the human body<br/> for your educational needs - all in interactive 3D.",logo:"/assets/images/biodigital-logo.svg"},{title:"Explore",text:"Browse our digital library for 3D models to complement your curriculum.",image:"/assets/images/welcome-tour-explore.jpg"},{title:"Customize",text:"Use our authoring tools to create 3D views tailored to your educational goals.",image:"/assets/images/welcome-tour-customize.jpg"},{title:"Collaborate",text:"Share your saved 3D views with your team from a central Dashboard.",image:"/assets/images/welcome-tour-collaborate.jpg"},{title:"Integrate",text:"Publish your interactive 3D model and drop into your digital content.",image:"/assets/images/welcome-tour-integrate.jpg"}],hu=[{title:"Introducing Human Studio",text:"The first product for authoring custom interactive 3D models of anatomy, disease and treatments.",image:"/assets/images/studio-tour-studio.jpg"},{title:"Interactive Labels",text:"Quickly add anatomical labels to call out key learning objectives.",image:"/assets/images/studio-tour-labels.jpg"},{title:"Paint",text:"Customize the look and feel of your 3D model by applying different paint effects to anatomical structures.",image:"/assets/images/studio-tour-paint.jpg"},{title:"Tour Builder",text:"Tell an interactive story by stringing together different views of your 3D model.",image:"/assets/images/studio-tour-tour.jpg"},{title:"Text Manager",text:"Add or modify text from one dedicated place.",image:"/assets/images/studio-tour-text.jpg"}];class mu{constructor(e,t,n){switch(this.store=e,this.dialogRef=t,this.data=n,this.ngUnsubscribe=new K.a,this.settings={userType:bu.NewUser},this.slides=[],this.selectedIndex=0,this.settings=Object.assign({},this.settings,n),this.settings.userType){case bu.NewUser:this.slides=gu;break;case bu.ExistingUser:this.slides=hu}}get isFirstSlide(){return 0===this.selectedIndex}get isLastSlide(){return this.selectedIndex===this.slides.length-1}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleCloseTour(){this.close()}close(){this.dialogRef.close()}handleSelectSlideClick(e){this.selectedIndex=e}handleNextClick(){this.incrementSelectedIndex(1)}handlePrevClick(){this.incrementSelectedIndex(-1)}incrementSelectedIndex(e){this.selectedIndex=Math.max(0,this.selectedIndex+e)%this.slides.length}}class xu{constructor(e,t,n,l,i){this.store=e,this.dialogRef=t,this.data=n,this.actions=l,this.snackBar=i,this.ngUnsubscribe=new K.a,this.organization=n.organization}ngOnInit(){this.actions.pipe(Object(O.l)(qn),Object(Y.a)(this.ngUnsubscribe)).subscribe(({organization:e})=>{this.handleJoinSuccess(e)}),this.actions.pipe(Object(O.l)(Xn),Object(Y.a)(this.ngUnsubscribe)).subscribe(({organization:e})=>{this.handleJoinFail(e)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleCancelClick(){this.close(!1)}handleJoinClick(){this.join()}handleJoinSuccess(e){this.snackBar.open(`Successfully joined "${e.name}".`),this.close(!0)}handleJoinFail(e){this.snackBar.open(`There was an error joining "${e.name}".`)}join(){this.store.dispatch(new Gn(this.organization))}close(e){this.dialogRef.close(e)}}class fu{constructor(e){this.dialogRef=e}ngOnInit(){}closeDialog(){this.dialogRef.close()}}class _u{constructor(e){this.namespaceMap={},this.duplicate=!1,this.replace=!1,Object.assign(this,e)}}let yu=(()=>{class e{constructor(e,t,n){this.id=e,this.saveConfig=t,this.trimConfig=n}}return e.type="[Modules] Save Module",e})(),Ou=(()=>{class e{constructor(e,t,n=!1){this.id=e,this.story=t,this.statesDuplicated=n}}return e.type="[Modules] Save Module Success",e})(),wu=(()=>{class e{constructor(e){this.id=e}}return e.type="[Modules] Save Module Failure",e})(),vu=(()=>{class e{constructor(e){this.id=e}}return e.type="[Modules] Duplicate Module Success",e})(),Cu=(()=>{class e{constructor(e){this.id=e}}return e.type="[Modules] Duplicate Module Failure",e})(),ju=(()=>{class e{constructor(e){this.module=e}}return e.type="[Modules] Set Save Module",e})(),ku=(()=>{class e{constructor(){}}return e.type="[Modules] Get Primary Categories",e})(),Su=(()=>{class e{constructor(e){this.primaryCategory=e}}return e.type="[Modules] Get Secondary Categories",e})(),Pu=(()=>{class e{constructor(){}}return e.type="[Modules] Reset",e})();var Mu=function(e){return e.Success="success",e.Fail="fail",e}({});const Tu="cdb/content",Iu="cdb/copy/content",Ju={headers:new c.g({"Content-Type":"application/json; charset=utf-8"})},zu=["production","client","preview","internal_content","public_preview","demos","social","exports","real_data"];let Lu=(()=>{class e{constructor(e,t){this.http=e,this.serializeModuleService=t}saveModule(e,t){t=this.formatModulePath(t);const n=[Tu,"modules",t].join("/"),l=this.JSONStringify(e);return this.http.put(n,l,Ju).pipe(Object(u.a)(()=>Mu.Success),Object(L.a)(({status:e})=>e>=200&&e<=202?Object(z.a)(Mu.Success):Object(z.a)(Mu.Fail)))}copyState(e,t){const n=[Iu,"states",t].join("/"),l={headers:new c.g({"Content-Type":"application/json; charset=utf-8","source-state":e})};return this.http.put(n,{},l)}listContents(e,t,n){const l=this.generateModulePath(e,t||"",n||"");return this.http.get(`/cdb/ls/content/modules/${l}`).pipe(Object(u.a)(e=>e.contents))}getState(e){return this.http.get(`/cdb/ls/content/states/${e}`).pipe(Object(u.a)(e=>e.contents))}getClients(){return this.http.get("/search/client").pipe(Object(u.a)(e=>e.clients))}getUsedStates(){const e={};return Object.values(Human.scene.objects).reduce((t,n)=>(["transformId","morphId","geometryId","materialId"].forEach(t=>{const l=this.getPropertyState(n,t);l.length&&(e[l]=!0)}),n.hasOwnProperty("renderables")&&["morphId","geometryId","materialId"].forEach(t=>{n.renderables.forEach(n=>{const l=this.getPropertyState(n,t);l.length&&(e[l]=!0)})}),t),{}),Object.keys(e)}parseScenePath(e){const t=e.split("/");return 1===t.length?null:{fullPath:`https://qa.biodigital.com/content/modules/${e}`,relativePath:t.slice(0,t.length-1).join("/"),sceneName:t[t.length-1]}}formatModulePath(e){let t=e;return/\.json$/.test(e)||(t=`${t}.json`),t}getPrimaryCategories(){return Object(z.a)(zu)}getSecondaryCategories(e){switch(e){case"production":return Object(z.a)(["maleAdult","femaleAdult"]);case"client":return this.getClients();default:return Object(z.a)([])}}generateSaveModule(e){const t=this.parseScenePath(e),n=t.relativePath.split("/");return{id:e,name:t.sceneName,primaryCategory:n[0]||"",secondaryCategory:n[1]||""}}generateModulePath(e,t,n){const l=[];return e.length&&l.push(e),t.length&&l.push(t),n.length&&(n.indexOf(".json")<0&&(n=`${n}.json`),l.push(n)),l.join("/")}getPropertyState(e,t){return null!=e[t]?e[t].split("/")[0]:""}JSONStringify(e){return JSON.stringify(e).replace(/[\u007f-\uffff]/g,e=>"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4))}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(c.c),l.Xb($r))},token:e,providedIn:"root"}),e})();(new c.g).set("Content-Type","application/json");var Eu,Au=n("IzEk");(new Vr).graph.hidden=!0;const Fu={primaryCategoryOptions:[],secondaryCategoryOptions:[],moduleExists:!1,saveModule:new class{},storyType:a.Module,saving:!1};let Ru=(()=>{let e=Eu=class{constructor(e,t,n,l,i){this.store=e,this.serializeModuleService=t,this.modulesService=n,this.modulesThumbnailService=l,this.storyService=i}static getSaveModule(e){return e.saveModule}static getPrimaryCategoryOptions(e){return Object(O.j)([Eu],t=>"read"===e?t.primaryCategoryOptions:t.primaryCategoryOptions.filter(e=>"exports"!==e))}static getSecondaryCategoryOptions(e){return e.secondaryCategoryOptions}static getSaving(e){return e.saving}saveModule(e,t){e.patchState({saving:!0});const n=t.saveConfig,l=t.trimConfig?t.trimConfig:new Vr,i=n.duplicate?t.saveConfig.namespaceMap:{},o=this.store.selectSnapshot(Nr.getStoryChapters),s=wr.makeChapterIdMap(o,!1===n.replace),r=this.serializeModuleService.serialize(i,l,t.saveConfig.duplicate,this.store.selectSnapshot(Tc.getStory),this.store.selectSnapshot(Nr.getStoryChapters),s);if(this.modulesService.saveModule(r.story,t.id).pipe(Object(B.a)(()=>e.patchState({saving:!1}))).subscribe(l=>{if(l===Mu.Success){const l=this.store.selectSnapshot(Nr.getRegisteredThumbnails),i=r.story.chapters[0].id,o=this.modulesThumbnailService.saveStoryThumbnails({storyId:t.id,storyType:a.Module,thumbnails:l,chapterIdMap:Object(Mt.invert)(s),indexId:i,deleteUnused:n.replace});0===o.length?e.dispatch(new Ou(t.id,r.story,t.saveConfig.duplicate)):Object(dt.a)(o).subscribe(()=>{e.dispatch(new Ou(t.id,r.story,t.saveConfig.duplicate))})}else e.dispatch(new wu(t.id))}),n.duplicate){const n=[];Object.entries(i).forEach(([e,t])=>{n.push(this.modulesService.copyState(e,t))}),Object(dt.a)(n).subscribe(n=>{e.dispatch(new vu(t.id))},n=>{e.dispatch(new Cu(t.id))})}}setSaveModule(e,t){e.patchState({saveModule:Object.assign({},t.module)})}getModulePrimaryCategories(e,t){this.modulesService.getPrimaryCategories().subscribe(t=>{e.patchState({primaryCategoryOptions:t})})}getModuleSecondaryCategories(e,t){this.modulesService.getSecondaryCategories(t.primaryCategory).subscribe(t=>{e.patchState({secondaryCategoryOptions:t})})}resetModules(e,t){Object(dt.a)(this.modulesService.getPrimaryCategories(),this.modulesService.getSecondaryCategories("")).pipe(Object(Au.a)(1)).subscribe(([t,n])=>{e.patchState({primaryCategoryOptions:t,secondaryCategoryOptions:n})})}};return Object(y.__decorate)([Object(O.a)(yu),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,yu]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"saveModule",null),Object(y.__decorate)([Object(O.a)(ju),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ju]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setSaveModule",null),Object(y.__decorate)([Object(O.a)(ku),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ku]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getModulePrimaryCategories",null),Object(y.__decorate)([Object(O.a)(Su),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Su]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getModuleSecondaryCategories",null),Object(y.__decorate)([Object(O.a)(Pu),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Pu]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetModules",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object]),Object(y.__metadata)("design:returntype",void 0)],e,"getSaveModule",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object]),Object(y.__metadata)("design:returntype",void 0)],e,"getSecondaryCategoryOptions",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object]),Object(y.__metadata)("design:returntype",void 0)],e,"getSaving",null),Eu=Object(y.__decorate)([Object(O.g)({name:"modules",defaults:Fu})],e)})();var Du=n("itXk"),Uu=n("VRyK"),Nu=n("eIep");const Hu="[0-9a-zA-Z_]*",Bu=/^[0-9a-zA-Z_]+$/;let $u=(()=>{class e{constructor(e,t,n,l,i,a,o,s){this.store=e,this.actions=t,this.formBuilder=n,this.modulesService=l,this.changeDetector=i,this.snackbar=a,this.dialogRef=o,this.data=s,this.saving=!1,this.moduleExists=!1,this.validating=!1,this.ngUnsubscribe=new K.a,this.settings=Object.assign({},s)}get formName(){return this.form.get("name")}get formStates(){return this.form.get("states")}get formPrimaryCategory(){return this.form.get("primaryCategory")}get formSecondaryCategory(){return this.form.get("secondaryCategory")}get formDuplicateStates(){return this.form.get("duplicateStates")}get formTrimShown(){return this.form.get("trimShown")}get formTrimClipped(){return this.form.get("trimClipped")}get formConfirmProduction(){return this.form.get("confirmProduction")}ngOnInit(){this.store.dispatch(new Pu),this.saveModule=this.generateSaveModule(),this.usedStates=this.modulesService.getUsedStates(),this.initApplicationListeners(),this.initForm(),this.setFormValidators(),this.initFormListeners(),this.setFormValues(this.saveModule),this.populateStateValues()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initApplicationListeners(){this.actions.pipe(Object(O.l)(Ou),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.handleSaveSuccess(e.id)}),this.actions.pipe(Object(O.l)(wu),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.handleSaveFail(e.id)})}initFormListeners(){this.formPrimaryCategory.valueChanges.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.store.dispatch(new Su(e))}),Object(Du.b)(this.formPrimaryCategory.valueChanges,this.formSecondaryCategory.valueChanges,this.formName.valueChanges,this.formDuplicateStates.valueChanges).pipe(Object(Y.a)(this.ngUnsubscribe),Object(Qo.a)(300)).subscribe(([e,t,n,l])=>{this.handleNameChange(e,t,n,l)}),Object(Uu.a)(this.formDuplicateStates.valueChanges,this.formStates.valueChanges).pipe(Object(Zn.a)(()=>this.validating=!0),Object(Qo.a)(300),Object(Nu.a)(e=>this.checkStateGroups()),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.validating=!1,this.updateFormStates(e)})}initForm(){this.form=this.formBuilder.group({primaryCategory:["",de.x.required],secondaryCategory:[""],name:["",[de.x.required,de.x.pattern(Hu)]],trimShown:[!1],trimClipped:[!1],duplicateStates:[!1],confirmProduction:[!1,this.validateProductionSave],states:this.formBuilder.array([this.initStateForm("")])},{validators:[this.validateProductionSave]})}initStateForm(e){return this.formBuilder.group({include:[!0],oldState:[e],newState:[e,[de.x.required,de.x.pattern(Hu)]]})}handleReplaceClick(e){this.changeStatePrefix(e,"replace")}handlePrependClick(e){this.changeStatePrefix(e,"prepend")}handleSubmit(){this.form.valid&&this.save()}handleSaveSuccess(e){this.dialogRef.close(),this.snackbar.open(`"${e}" successfully saved.`)}handleSaveFail(e){this.dialogRef.close(),this.snackbar.open(`There was an error saving "${e}".`)}generateSaveModule(){return this.modulesService.generateSaveModule(this.settings.id)}populateStateValues(){for(;this.formStates.length>0;)this.formStates.removeAt(0);const e=[];this.modulesService.getUsedStates().forEach(t=>{const n={enabled:!0,state:t};this.formStates.push(this.initStateForm(n.state)),e.push(n)}),this.formStates.markAsDirty()}setFormValidators(){this.formPrimaryCategory.valueChanges.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{switch(e){case"production":case"client":this.formSecondaryCategory.setValidators([de.x.required]);break;default:this.formSecondaryCategory.setValidators(null),this.formSecondaryCategory.setValue("")}})}setFormValues(e){this.form.patchValue({primaryCategory:"exports"===e.primaryCategory?"preview":e.primaryCategory||"preview",secondaryCategory:e.secondaryCategory||"",name:e.name||"",trimShown:!1,trimClipped:!1,duplicateStates:!1})}save(){const e=this.modulesService.generateModulePath(this.formPrimaryCategory.value,this.formSecondaryCategory.value,this.formName.value),t=new _u;this.formDuplicateStates.value&&(t.duplicate=!0,this.formStates.value.map(e=>{e.include&&(t.namespaceMap[e.oldState]=e.newState)}));const n=new Vr;n.graph.hidden=this.formTrimShown.value,n.graph.clipped=this.formTrimClipped.value,this.saving=!0,this.store.dispatch(new yu(e,t,n))}handleNameChange(e,t,n,l){if(this.modulePath=this.modulesService.generateModulePath(e,t,n),this.formName.errors){const{pattern:e,required:t}=this.formName.errors;if(e||t)return}this.modulePath&&n.length&&this.modulesService.listContents(e,t,n).subscribe(e=>{this.moduleExists=e.length>0;const t=l&&this.moduleExists,i=!Bu.test(n);this.formName.setErrors(t||i?{invalid:!0}:null),this.formName.markAsDirty(),this.changeDetector.markForCheck()})}validateProductionSave(e){const t=e.get("primaryCategory"),n=e.get("confirmProduction");return t&&n&&"production"===t.value&&!1===n.value?{confirmProduction:!0}:null}checkStateGroups(){const e=this.formStates.controls.map(e=>this.validateStateGroup(e));return e.length>0?Object(Du.b)(...e):Object(z.a)([])}validateStateGroup(e){const t=!0===this.formDuplicateStates.value,n=e.get("newState"),l=e.get("include");return t&&!1!==l.value?n.errors||0===n.value.length?Object(z.a)({stateControl:n,valid:!1}):this.modulesService.getState(n.value).pipe(Object(u.a)(e=>{const t=Bu.test(n.value);return{stateControl:n,valid:0===e.length&&t}})):Object(z.a)({stateControl:n,valid:!0})}updateFormStates(e){e.forEach(e=>{e.valid?(e.stateControl.setErrors(null),e.stateControl.markAsDirty()):e.stateControl.setErrors({stateTaken:!0})}),this.changeDetector.markForCheck()}changeStatePrefix(e,t){this.formStates.controls.forEach(n=>{const l=n.get("newState");switch(t){case"prepend":l.setValue(`${e}_${l.value}`);break;case"replace":const t=new RegExp(/[^_]*/),n=l.value.replace(t,e);l.setValue(n)}})}}return Object(y.__decorate)([Object(O.e)(Ru.getSaveModule),Object(y.__metadata)("design:type",Z.a)],e.prototype,"saveModule$",void 0),Object(y.__decorate)([Object(O.e)(Ru.getPrimaryCategoryOptions("write")),Object(y.__metadata)("design:type",Z.a)],e.prototype,"primaryCategoryOptions$",void 0),Object(y.__decorate)([Object(O.e)(Ru.getSecondaryCategoryOptions),Object(y.__metadata)("design:type",Z.a)],e.prototype,"secondaryCategoryOptions$",void 0),e})();const Vu="https://www.research.net/r/BKTXJMC";class Wu{constructor(e,t,n,l){this.store=e,this.dialogRef=t,this.data=n,this.sanitizer=l;const i=this.store.selectSnapshot(Ao.getUserProfile);this.settings=Object.assign({surveyEmail:i?i.email:""},this.data)}get src(){const{surveyGroupName:e,surveyEmail:t}=this.settings;return this.sanitizer.bypassSecurityTrustResourceUrl(`${Vu}?Org=${e}&Email=${t}`)}ngOnInit(){}closeDialog(){this.dialogRef.close()}}class Gu{}var qu=function(e){return e[e.Query=0]="Query",e[e.Path=1]="Path",e}({}),Xu=function(e){return e[e.List=0]="List",e[e.Cards=1]="Cards",e}({});class Ku{constructor(e,t,n,l=null){this.label=e,this.value=t,this.type=n,this.organizationId=l,this.id=`${n}|${t||""}|${l||""}`}}const Zu={loading:!0,searchMode:qu.Query,viewMode:Xu.Cards,sort:lu,sortOptions:iu,studioOptions:[],studioQuery:"",studioCategoryId:"category||",searchResults:[],checkedResults:[]};let Yu=(()=>{let e=class{constructor(e,t,n,l){this.organizationsService=e,this.modulesService=t,this.exploreService=n,this.bookmarksService=l}static getLoading(e){return e.loading}static getSearchMode(e){return e.searchMode}static getViewMode(e){return e.viewMode}static getSort(e){return e.sort}static getSortOptions(e){return e.sortOptions}static getStudioOptions(e){return e.studioOptions}static getSearchResults(e){const{searchResults:t,sort:n}=e,{ascending:l,fields:i}=n;return ou(t,i,l)}static getStudioCategoryId(e){return e.studioCategoryId}static getStudioQuery(e){return e.studioQuery}setSearchMode(e,t){e.patchState({searchMode:t.searchMode})}setViewMode(e,t){e.patchState({viewMode:t.viewMode})}setSort(e,t){const n=e.getState().searchResults;e.patchState({sort:t.sort,searchResults:[...n]})}getStudioCategories(e,{organizationId:t}){const n=Object(z.a)(Wr.categories),l=t?this.organizationsService.getCollections(t):Object(z.a)([]);Object(dt.a)(n,l).subscribe(([n,l])=>{let i=[];i=[new Ku("My Models","","user"),new Ku("Biodigital Models","","category"),...n.map(e=>new Ku(e.title,e.id,"category"))],t&&(i=[...i,new Ku("Team Models","","organization",t),...l.map(e=>new Ku(e.collection_name,e.collection_id.toString(),"collection",t))]),e.dispatch(new Lo.GetStudioOptionsSuccess(i))})}getStudioOptionsSuccess(e,t){e.patchState({studioOptions:[...t.options]})}searchStudio(e,t){const{category:n,query:l}=t,{organizationId:i,value:a,id:o,type:s}=n;e.patchState({loading:!0,studioQuery:l,studioCategoryId:o});let r=new Z.a;switch(s){case"category":r="public"===a?this.bookmarksService.getPublicBookmarks(l):this.exploreService.getAnatomyCategory(l,a.toString());break;case"organization":r=this.bookmarksService.getOrganizationContent(i,l);break;case"collection":r=this.organizationsService.getCollectionContent(i,a,l);break;case"user":r=this.bookmarksService.getPrivateBookmarks(l)}r.pipe(Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new Lo.SearchStudioSuccess(t))})}searchStudioSuccess(e,t){e.dispatch(new Lo.SearchSuccess(t.bookmarks))}searchLoft(e,t){e.patchState({loading:!0});const n=t.name.indexOf(".json")>0;this.modulesService.listContents(t.primaryCategory,t.secondaryCategory,n?t.name:"").pipe(Object(u.a)(e=>n?e:e.filter(e=>e.name.indexOf(t.name)>=0)),Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new Lo.SearchLoftSuccess(t))},t=>{e.dispatch(new Lo.SearchLoftSuccess([]))})}searchLoftSuccess(e,t){const n=t.bookmarks.map(e=>{const t=e.name.replace("/content/modules/","").replace(".json",""),n=e.name.split("/").pop().replace("/content/modules","").replace(".json",""),l=new pt;return l.id=t,l.title=n,l.type=a.Module,l});e.dispatch(new Lo.SearchSuccess(n))}searchSuccess(e,t){e.patchState({searchResults:t.bookmarks})}clearResults(e,t){e.patchState({searchResults:[]})}resetGallery(e,t){e.patchState(Zu)}};return Object(y.__decorate)([Object(O.a)(Lo.SetSearchMode),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Lo.SetSearchMode]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setSearchMode",null),Object(y.__decorate)([Object(O.a)(Lo.SetViewMode),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Lo.SetViewMode]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setViewMode",null),Object(y.__decorate)([Object(O.a)(Lo.SetSort),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Lo.SetSort]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setSort",null),Object(y.__decorate)([Object(O.a)(Lo.GetStudioOptions),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Lo.GetStudioOptions]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getStudioCategories",null),Object(y.__decorate)([Object(O.a)(Lo.GetStudioOptionsSuccess),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Lo.GetStudioOptionsSuccess]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"getStudioOptionsSuccess",null),Object(y.__decorate)([Object(O.a)(Lo.SearchStudio),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Lo.SearchStudio]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"searchStudio",null),Object(y.__decorate)([Object(O.a)(Lo.SearchStudioSuccess),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Lo.SearchStudioSuccess]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"searchStudioSuccess",null),Object(y.__decorate)([Object(O.a)(Lo.SearchLoft),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Lo.SearchLoft]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"searchLoft",null),Object(y.__decorate)([Object(O.a)(Lo.SearchLoftSuccess),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Lo.SearchLoftSuccess]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"searchLoftSuccess",null),Object(y.__decorate)([Object(O.a)(Lo.SearchSuccess),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Lo.SearchSuccess]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"searchSuccess",null),Object(y.__decorate)([Object(O.a)(Lo.ClearResults),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Lo.ClearResults]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"clearResults",null),Object(y.__decorate)([Object(O.a)(Lo.Reset),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Lo.Reset]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetGallery",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Gu]),Object(y.__metadata)("design:returntype",void 0)],e,"getLoading",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Gu]),Object(y.__metadata)("design:returntype",void 0)],e,"getSearchMode",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Gu]),Object(y.__metadata)("design:returntype",void 0)],e,"getViewMode",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Gu]),Object(y.__metadata)("design:returntype",void 0)],e,"getSort",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Gu]),Object(y.__metadata)("design:returntype",void 0)],e,"getSortOptions",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Gu]),Object(y.__metadata)("design:returntype",void 0)],e,"getStudioOptions",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Gu]),Object(y.__metadata)("design:returntype",void 0)],e,"getSearchResults",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Gu]),Object(y.__metadata)("design:returntype",void 0)],e,"getStudioCategoryId",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Gu]),Object(y.__metadata)("design:returntype",void 0)],e,"getStudioQuery",null),Object(y.__decorate)([Object(O.g)({name:"gallery",defaults:Zu})],e)})();var Qu;!function(e){class t{constructor(){}}t.type="[Dialog] Open Premium Content",e.OpenPremiumContent=t;class n{constructor(e){this.confirmed=e}}n.type="[Dialog] Close Premium Content",e.ClosePremiumContent=n;class l{constructor(){}}l.type="[Dialog] Open Upgrade",e.OpenUpgrade=l;class i{constructor(){}}i.type="[Dialog] Close Upgrade",e.CloseUpgrade=i}(Qu||(Qu={}));let ep=(()=>{class e{constructor(e,t,n){this.store=e,this.dialogRef=t,this.changeDetectorRef=n,this.ngUnsubscribe=new K.a}ngOnInit(){this.results$.subscribe(e=>{this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.store.dispatch(new Lo.ClearResults),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleSelect(e){!e.premium||this.store.selectSnapshot(Ao.isPremiumUser)?(this.store.dispatch(new Lo.SelectBookmark(e)),this.dialogRef.close(e)):this.store.dispatch(new Qu.OpenPremiumContent)}}return Object(y.__decorate)([Object(O.e)(Yu.getViewMode),Object(y.__metadata)("design:type",Z.a)],e.prototype,"viewMode$",void 0),Object(y.__decorate)([Object(O.e)(Yu.getLoading),Object(y.__metadata)("design:type",Z.a)],e.prototype,"loading$",void 0),Object(y.__decorate)([Object(O.e)(Yu.getSearchResults),Object(y.__metadata)("design:type",Z.a)],e.prototype,"results$",void 0),Object(y.__decorate)([Object(O.e)(Ao.isPremiumUser),Object(y.__metadata)("design:type",Z.a)],e.prototype,"isPremiumUser$",void 0),e})(),tp=(()=>{class e{constructor(e,t,n,l,i,a,o){this.store=e,this.actions=t,this.formBuilder=n,this.dialogRef=l,this.snackBar=i,this.storageService=a,this.data=o,this.ngUnsubscribe=new K.a,this.settings=Object.assign({},o);const s=this.store.selectSnapshot(Uc.getOrganization);s&&this.store.dispatch(new Vn(s.id))}ngOnInit(){const e="true"===this.storageService.getLocalItem(Yn.DefaultGroupEdit),t=this.storageService.getLocalItem(Yn.DefaultCollectionId);this.form=this.formBuilder.group({groupEditEnabled:[`${e}`,de.x.required],collectionId:[t]}),this.form.valueChanges.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(({groupEditEnabled:e,collectionId:t})=>{e?this.storageService.setLocalItem(Yn.DefaultGroupEdit,e):this.storageService.removeLocalItem(Yn.DefaultGroupEdit),t?this.storageService.setLocalItem(Yn.DefaultCollectionId,t):this.storageService.removeLocalItem(Yn.DefaultCollectionId)}),this.actions.pipe(Object(O.l)(Kl),Object(Q.a)(e=>e.sourceId===this.settings.bookmark.id&&!!e.groupAccess),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.dialogRef.close(e.newId)}),this.actions.pipe(Object(O.l)(Zl),Object(Q.a)(e=>e.id===this.settings.bookmark.id),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackBar.open(`Adding ${this.settings.bookmark.title} to your team models has failed. Please try again`)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleSubmit(){this.form.valid&&this.addTeamModel(this.settings.bookmark)}addTeamModel(e){const{groupEditEnabled:t,collectionId:n}=this.form.value,l=this.store.selectSnapshot(Uc.getOrganization),i=this.store.selectSnapshot(Uc.getCollections),a=this.store.selectSnapshot(Ao.getUserLocale).lang,o={group_id:l.id,member_edit:"true"===t,visible:!0},s=i.find(({collection_id:e})=>`${e}`===n);this.store.dispatch(new Xl(e.id,e.type,a,o,s))}}return Object(y.__decorate)([Object(O.e)(Uc.getCollections),Object(y.__metadata)("design:type",Z.a)],e.prototype,"collections$",void 0),Object(y.__decorate)([Object(O.e)(ru.getCopying),Object(y.__metadata)("design:type",Z.a)],e.prototype,"copying$",void 0),e})();var np=function(e){return e.ClipboardDialog="ClipboardDialog",e.WelcomeTourDialog="WelcomeTourDialog",e.JoinDomainDialog="JoinDomainDialog",e.NpsSurveyDialog="NpsSurveyDialog",e.ConfirmDialog="ConfirmDialog",e.LimitDialog="LimitDialog",e.UpgradeDialog="UpgradeDialog",e.BuyDialog="BuyDialog",e.ProfileDialog="ProfileDialog",e.SaveModuleDialog="SaveModuleDialog",e.SaveBookmarkDialog="SaveBookmarkDialog",e.SaveAsBookmarkDialog="SaveAsBookmarkDialog",e.ManageDialog="ManageDialog",e.BookmarkAccessDialog="BookmarkAccessDialog",e.GroupRestrictionDialog="GroupRestrictionDialog",e.PremiumContentDialog="PremiumContentDialog",e.AboutDialog="AboutDialog",e.ImportDialog="ImportDialog",e.AddTeamModelDialog="AddTeamModelDialog",e}({});let lp=(()=>{class e{constructor(e,t,n,l){this.store=e,this.actions=t,this.fb=n,this.snackBar=l,this.presetBackgrounds="module"===r.exportType?Object(R.plainToClass)($o,Er):Object(R.plainToClass)($o,Lr),this.ngUnsubscribe=new K.a}ngOnInit(){this.initPresets(),this.initForm(),this.actions.pipe(Object(O.k)(_o),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("Successfully applied color to all chapters.")})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initPresets(){this.presetBackground=this.store.selectSnapshot(Nr.getSelectedChapterBackground),this.background$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.presetBackground=e}),this.allChapterBackgrounds$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.distinctBackgrounds=e.filter((t,n)=>e.findIndex(e=>this.backgroundsEqual(t,e))===n)})}initForm(){const e=this.store.selectSnapshot(Nr.getSelectedChapterBackground);this.form=this.fb.group({type:["solid",[de.x.required]],color1:["",[de.x.required]],stop1:[0,[de.x.required,de.x.min(0),de.x.max(100)]],color2:["",[de.x.required]],stop2:[100,[de.x.required,de.x.min(0),de.x.max(100)]]}),this.form.valueChanges.pipe(Object(Q.a)(()=>this.customTab.isActive),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.applyFromCustom()}),e&&this.setCustomColorForm(e)}handleFormColorSelected(e,t){this.form.get(e).setValue(t)}handlePresetSelected(e){this.presetBackground=e,this.store.dispatch(new Oo(e))}handleResetClick(){this.store.dispatch(new yo)}handleTabChange(e){this.customTab.isActive&&this.presetBackground&&this.setCustomColorForm(this.presetBackground)}backgroundsEqual(e,t){return Object(Mt.isEqual)(e,t)}getBackgroundHex(e){const t=e.colors;return Ye.rgbToHex([t[0],t[1],t[2]])}getFormBackgroundHex(e){return this.form.get(e).value}applyAll(){const e=this.form.value.type;if(this.presetTab.isActive)this.store.dispatch(new _o(this.presetBackground));else if(this.customTab.isActive){const t=this.formToBackgroundColor(e);t&&this.store.dispatch(new _o(t))}}applyFromCustom(){const e=this.formToBackgroundColor(this.form.value.type);e&&this.store.dispatch(new Oo(e))}setCustomColorForm(e){let t="solid",n="",l="",i=0,a=100;const{colors:o,gradientType:s,colorStops:r}=e,c=[o[0],o[1],o[2]],u=o.length<8?c:[o[4],o[5],o[6]];n=Ye.rgbToHex(c,!1),l=Ye.rgbToHex(u,!1),t=$o.isTransparent(e)?"transparent":Object(Mt.isEqual)(c,u)?"solid":s,this.form.patchValue({type:t,color1:n,stop1:i=r[0],color2:l,stop2:a=r[1]})}formToBackgroundColor(e){const{color1:t,color2:n,stop1:l,stop2:i}=this.form.value;if("transparent"===e)return zr;if(!this.form.valid)return null;const a=[],o="radial"===e?"radial":"linear";return t&&a.push(...Ye.hexToRgb(t,!1),1),n&&"solid"!==e?a.push(...Ye.hexToRgb(n,!1),1):a.push(...a),new $o(a,o,[l,i])}}return Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterBackground),Object(y.__metadata)("design:type",Z.a)],e.prototype,"background$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getAllChaptersBackground),Object(y.__metadata)("design:type",Z.a)],e.prototype,"allChapterBackgrounds$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterIndex),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedChapterIndex$",void 0),e})();var ip=n("s6ns");const ap=768,op="backdropClass";let sp=(()=>{class e{constructor(e){this.dialog=e}get isMobile(){return window.innerWidth<=ap}openClipboardDialog(e,t){const n=Object.assign({data:{id:np.ClipboardDialog,copyText:e}},t);return this.dialog.open(du,n)}openWelcomeTourDialog(e,t){const n=Object.assign({id:np.WelcomeTourDialog,disableClose:!0,data:{userType:"updated_tour"===e?bu.ExistingUser:bu.NewUser}},t);return this.dialog.open(mu,n)}openJoinDomainDialog(e,t){const n=Object.assign({id:np.JoinDomainDialog,data:{organization:e}},t);return this.dialog.open(xu,n)}openNpsSurveyDialog(e,t){const n=Object.assign({id:np.NpsSurveyDialog,data:{surveyGroupName:e}},t);return this.dialog.open(Wu,n)}openConfirmDialog(e){const t=Object.assign({id:np.ConfirmDialog},e);return this.dialog.open(Qc,t)}openLimitDialog(){return this.dialog.closeAll(),this.dialog.open(Kc,{id:np.LimitDialog,width:"480px"})}openUpgradeDialog(e){const t={width:925,height:700},n=Object.assign({id:np.UpgradeDialog},{width:`${t.width}px`,height:`${t.height}px`,data:{type:Zc.UpgradeSubscription,dimensions:t}},e);return this.dialog.closeAll(),this.dialog.open(Yc,n)}openBuyDialog(e){const t={width:550,height:650},n=Object.assign({id:np.BuyDialog},{width:`${t.width}px`,height:`${t.height}px`,data:{type:Zc.BuySubscription,dimensions:t}},e);return this.dialog.closeAll(),this.dialog.open(Yc,n)}openProfileDialog(e,t=""){const n={width:750,height:600},l=Object.assign({id:np.ProfileDialog},{width:`${n.width}px`,height:`${n.height}px`,data:{type:Zc.MyProfile,dimensions:n,options:{show_tab:t}}},e);return this.dialog.closeAll(),this.dialog.open(Yc,l)}openSaveModuleDialog(e,t){this.dialog.closeAll();const n=Object.assign({id:np.SaveModuleDialog},{width:"480px",data:{id:e}},t);return this.dialog.open($u,n)}openSaveBookmarkDialog(e,t){return this._openSaveBookmarkDialog(Object.assign({id:np.SaveBookmarkDialog,data:{bookmark:e,mode:cu.SaveStory}},t))}openSaveAsBookmarkDialog(e,t,n,l){return this._openSaveBookmarkDialog(Object.assign({id:np.SaveBookmarkDialog,data:{title:e,bookmarkTitle:t,message:n,mode:cu.SaveStory}},l))}openManageDialog(e,t){return this._openSaveBookmarkDialog(Object.assign({id:np.SaveBookmarkDialog,data:{bookmark:e,mode:cu.Manage}},t))}openBookmarkAccessDialog(e,t){const n=Object.assign({id:np.BookmarkAccessDialog,width:"480px",data:{model:e}},t);return this.dialog.closeAll(),this.dialog.open(uu,n)}openGroupRestrictionDialog(e){const t=Object.assign({id:np.GroupRestrictionDialog},{width:"480px",height:"auto"},e);return this.dialog.open(pu,t)}openPremiumContentDialog(){return this.openConfirmDialog({id:np.PremiumContentDialog,data:{titleText:"Premium Content",bodyText:this.isMobile?"This is premium content. Visit us on desktop to upgrade to a premium plan.":"This is premium content. Upgrade to a Premium Plan for unlimited access.",confirmText:"Go Premium",confirmEnabled:!this.isMobile,cancelText:"OK",confirmColor:"warn"}})}openAboutDialog(){return this.dialog.closeAll(),this.dialog.open(fu,{id:np.AboutDialog})}openImportDialog(){return this.dialog.closeAll(),this.dialog.open(ep,{id:np.ImportDialog,maxWidth:"90vw",width:"90vw",height:"90vh"})}openAddTeamModelDialog(e){return this.dialog.open(tp,{id:np.AddTeamModelDialog,data:{bookmark:e}})}openBackgroundColorDialog(){return this.dialog.open(lp,{backdropClass:op,data:{}})}_openSaveBookmarkDialog(e){const t=Object.assign({mode:cu.SaveStory},e);return this.dialog.closeAll(),this.dialog.open(uu,t)}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(ip.e))},token:e,providedIn:"root"}),e})();var rp=n("dFDH"),cp=l.vb({encapsulation:0,styles:[[".publish[_ngcontent-%COMP%]{display:grid;grid-template-columns:320px auto;grid-template-rows:1fr auto;height:100%;grid-template-areas:'options embed' 'actions embed'}.publish__options[_ngcontent-%COMP%]{grid-area:options;overflow-y:scroll}.publish__screens[_ngcontent-%COMP%]{grid-area:screens;text-align:center}.publish__embed[_ngcontent-%COMP%]{grid-area:embed;background-color:#fff;border-left:1px solid #eaeff5;overflow:auto}.publish__actions[_ngcontent-%COMP%]{grid-area:actions}.publish__actions[_ngcontent-%COMP%]:before{content:' ';display:block;background-color:#fff;height:12px;box-shadow:inset 0 -12px 8px -10px rgba(150,168,192,.4)}.publish__actions-content[_ngcontent-%COMP%]{padding:0 20px 0 8px}.publish__group[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;-webkit-box-align:center;align-items:center}.publish__flex-group[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.publish__input[_ngcontent-%COMP%]{width:100px;min-height:28px;padding:6px 8px}.publish__picker[_ngcontent-%COMP%]{width:60px}"]],data:{}});function up(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,22,"div",[["class","publish__flex-group"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,10,"app-form-field",[["class","mr-6"],["display","inline"],["label","Width"],["theme","light"]],null,null,null,pe,ce)),l.wb(2,114688,null,0,re,[],{label:[0,"label"],display:[1,"display"],theme:[2,"theme"],isCompact:[3,"isCompact"]},null),(e()(),l.xb(3,0,null,0,6,"input",[["class","publish__input input input--small"],["formControlName","width"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,4)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,4).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,4)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,4)._compositionEnd(n.target.value)&&i),"change"===t&&(i=!1!==l.Jb(e,5).onChange(n.target.value)&&i),"input"===t&&(i=!1!==l.Jb(e,5).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,5).onTouched()&&i),i}),null,null)),l.wb(4,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.wb(5,16384,null,0,de.s,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e,t){return[e,t]}),[de.d,de.s]),l.wb(7,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(9,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(10,0,null,1,1,"div",[["class","mt-1"],["form-field-help",""]],null,null,null,null,null)),(e()(),l.Rb(11,null,["Min. ","px"])),(e()(),l.xb(12,0,null,null,10,"app-form-field",[["display","inline"],["label","Height"],["theme","light"]],null,null,null,pe,ce)),l.wb(13,114688,null,0,re,[],{label:[0,"label"],display:[1,"display"],theme:[2,"theme"],isCompact:[3,"isCompact"]},null),(e()(),l.xb(14,0,null,0,6,"input",[["class","publish__input input input--small"],["formControlName","height"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,15)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,15).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,15)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,15)._compositionEnd(n.target.value)&&i),"change"===t&&(i=!1!==l.Jb(e,16).onChange(n.target.value)&&i),"input"===t&&(i=!1!==l.Jb(e,16).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,16).onTouched()&&i),i}),null,null)),l.wb(15,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.wb(16,16384,null,0,de.s,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e,t){return[e,t]}),[de.d,de.s]),l.wb(18,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(20,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(21,0,null,1,1,"div",[["class","mt-1"],["form-field-help",""]],null,null,null,null,null)),(e()(),l.Rb(22,null,["Min. ","px"]))],(function(e,t){e(t,2,0,"Width","inline","light",!0),e(t,7,0,"width"),e(t,13,0,"Height","inline","light",!0),e(t,18,0,"height")}),(function(e,t){e(t,3,0,l.Jb(t,9).ngClassUntouched,l.Jb(t,9).ngClassTouched,l.Jb(t,9).ngClassPristine,l.Jb(t,9).ngClassDirty,l.Jb(t,9).ngClassValid,l.Jb(t,9).ngClassInvalid,l.Jb(t,9).ngClassPending),e(t,11,0,t.context.ngIf.width),e(t,14,0,l.Jb(t,20).ngClassUntouched,l.Jb(t,20).ngClassTouched,l.Jb(t,20).ngClassPristine,l.Jb(t,20).ngClassDirty,l.Jb(t,20).ngClassValid,l.Jb(t,20).ngClassInvalid,l.Jb(t,20).ngClassPending),e(t,22,0,t.context.ngIf.height)}))}function pp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,8,"app-panel",[["formGroupName","dimensions"],["label","Size"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Se,we)),l.Ob(5120,null,de.m,(function(e){return[e]}),[Oe]),l.wb(2,212992,null,0,de.i,[[3,de.c],[8,null],[8,null]],{name:[0,"name"]},null),l.Ob(2048,null,de.c,null,[de.i]),l.wb(4,16384,null,0,de.p,[[4,de.c]],null,null),l.wb(5,114688,null,0,Oe,[l.i],{label:[0,"label"]},null),(e()(),l.nb(16777216,null,1,2,null,up)),l.wb(7,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,2,0,"dimensions"),e(t,5,0,"Size"),e(t,7,0,l.Sb(t,7,0,l.Jb(t,8).transform(n.minDimensions$)))}),(function(e,t){e(t,0,0,l.Jb(t,4).ngClassUntouched,l.Jb(t,4).ngClassTouched,l.Jb(t,4).ngClassPristine,l.Jb(t,4).ngClassDirty,l.Jb(t,4).ngClassValid,l.Jb(t,4).ngClassInvalid,l.Jb(t,4).ngClassPending)}))}function dp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,8,"app-form-field",[["label","Degrees"],["theme","light"]],null,null,null,pe,ce)),l.wb(1,114688,null,0,re,[],{label:[0,"label"],theme:[1,"theme"],isCompact:[2,"isCompact"]},null),(e()(),l.xb(2,0,null,0,6,"input",[["class","publish__input input"],["formControlName","value"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,3)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,3).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,3)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,3)._compositionEnd(n.target.value)&&i),"change"===t&&(i=!1!==l.Jb(e,4).onChange(n.target.value)&&i),"input"===t&&(i=!1!==l.Jb(e,4).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,4).onTouched()&&i),i}),null,null)),l.wb(3,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.wb(4,16384,null,0,de.s,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e,t){return[e,t]}),[de.d,de.s]),l.wb(6,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(8,16384,null,0,de.o,[[4,de.n]],null,null)],(function(e,t){e(t,1,0,"Degrees","light",!0),e(t,6,0,"value")}),(function(e,t){e(t,2,0,l.Jb(t,8).ngClassUntouched,l.Jb(t,8).ngClassTouched,l.Jb(t,8).ngClassPristine,l.Jb(t,8).ngClassDirty,l.Jb(t,8).ngClassValid,l.Jb(t,8).ngClassInvalid,l.Jb(t,8).ngClassPending)}))}function bp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,163,null,null,null,null,(function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==l.Jb(e,1).onSubmit(n)&&i),"reset"===t&&(i=!1!==l.Jb(e,1).onReset()&&i),i}),null,null)),l.wb(1,540672,null,0,de.h,[[8,null],[8,null]],{form:[0,"form"]},null),l.Ob(2048,null,de.c,null,[de.h]),l.wb(3,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.nb(16777216,null,null,2,null,pp)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(7,0,null,null,76,"app-panel",[["formGroupName","options"],["label","Display Options"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Se,we)),l.Ob(5120,null,de.m,(function(e){return[e]}),[Oe]),l.wb(9,212992,null,0,de.i,[[3,de.c],[8,null],[8,null]],{name:[0,"name"]},null),l.Ob(2048,null,de.c,null,[de.i]),l.wb(11,16384,null,0,de.p,[[4,de.c]],null,null),l.wb(12,114688,null,0,Oe,[l.i],{label:[0,"label"]},null),(e()(),l.xb(13,0,null,1,70,"div",[["class","publish__group"]],null,null,null,null,null)),(e()(),l.xb(14,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","uiInfo"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(15,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(17,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(19,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["Information Panel"])),(e()(),l.xb(21,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","uiNav"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(22,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(24,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(26,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["3D Navigation"])),(e()(),l.xb(28,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","uiSearch"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(29,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(31,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(33,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["Search"])),(e()(),l.xb(35,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","uiTools"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(36,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(38,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(40,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["Edit Toolbar"])),(e()(),l.xb(42,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","uiReset"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(43,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(45,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(47,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["Reset"])),(e()(),l.xb(49,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","uiHelp"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(50,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(52,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(54,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["Help"])),(e()(),l.xb(56,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","uiFullscreen"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(57,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(59,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(61,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["Fullscreen"])),(e()(),l.xb(63,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","uiChapterList"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(64,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(66,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(68,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["Chapter List"])),(e()(),l.xb(70,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","uiLabelList"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(71,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(73,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(75,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["Label List"])),(e()(),l.xb(77,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","uiAnatomyDescriptions"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(78,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(80,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(82,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["Anatomy Descriptions"])),(e()(),l.xb(84,0,null,null,79,"app-panel",[["label","Loading Experience"]],null,null,null,Se,we)),l.Ob(5120,null,de.m,(function(e){return[e]}),[Oe]),l.wb(86,114688,null,0,Oe,[l.i],{label:[0,"label"]},null),(e()(),l.xb(87,0,null,1,12,"div",[["class","mb-1"],["formGroupName","rotate"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(88,212992,null,0,de.i,[[3,de.c],[8,null],[8,null]],{name:[0,"name"]},null),l.Ob(2048,null,de.c,null,[de.i]),l.wb(90,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(91,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","enabled"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(92,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(94,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(96,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["Rotate 3D Model"])),(e()(),l.nb(16777216,null,null,1,null,dp)),l.wb(99,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(100,0,null,1,27,"div",[["class","mb-2"],["formGroupName","initial"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(101,212992,null,0,de.i,[[3,de.c],[8,null],[8,null]],{name:[0,"name"]},null),l.Ob(2048,null,de.c,null,[de.i]),l.wb(103,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(104,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","enabled"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(105,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(107,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(109,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,['Show "Click to Interact" hint'])),(e()(),l.xb(111,0,null,null,16,"div",[["class","m-1 ml-5"]],null,null,null,null,null)),(e()(),l.xb(112,0,null,null,15,"mat-radio-group",[["class","publish__group mat-radio-group"],["formControlName","mode"],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(113,1064960,null,1,Pe.c,[l.i],null,null),l.Pb(603979776,3,{_radios:1}),l.Ob(1024,null,de.m,(function(e){return[e]}),[Pe.c]),l.wb(116,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(118,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(119,0,null,null,2,"mat-radio-button",[["class","mv-1 mat-radio-button"],["value","button"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,120)._inputElement.nativeElement.focus()&&i),i}),Me.b,Me.a)),l.wb(120,4440064,[[3,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),(e()(),l.Rb(-1,0,["Button"])),(e()(),l.xb(122,0,null,null,2,"mat-radio-button",[["class","mv-1 mat-radio-button"],["value","handHint"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,123)._inputElement.nativeElement.focus()&&i),i}),Me.b,Me.a)),l.wb(123,4440064,[[3,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),(e()(),l.Rb(-1,0,["Animated hand"])),(e()(),l.xb(125,0,null,null,2,"mat-radio-button",[["class","mv-1 mat-radio-button"],["value","play"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,126)._inputElement.nativeElement.focus()&&i),i}),Me.b,Me.a)),l.wb(126,4440064,[[3,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),(e()(),l.Rb(-1,0,["Play"])),(e()(),l.xb(128,0,null,1,10,"div",[["formGroupName","options"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(129,212992,null,0,de.i,[[3,de.c],[8,null],[8,null]],{name:[0,"name"]},null),l.Ob(2048,null,de.c,null,[de.i]),l.wb(131,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(132,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","uiTutorial"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(133,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(135,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(137,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["Getting Started Tutorial"])),(e()(),l.xb(139,0,null,1,24,"div",[["formGroupName","disableScroll"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(140,212992,null,0,de.i,[[3,de.c],[8,null],[8,null]],{name:[0,"name"]},null),l.Ob(2048,null,de.c,null,[de.i]),l.wb(142,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(143,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["formControlName","enabled"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(144,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(146,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(148,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.Rb(-1,0,["Disable scroll wheel zooming"])),(e()(),l.xb(150,0,null,null,13,"div",[["class","m-1 ml-5"]],null,null,null,null,null)),(e()(),l.xb(151,0,null,null,12,"mat-radio-group",[["class","publish__group mat-radio-group"],["formControlName","mode"],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(152,1064960,null,1,Pe.c,[l.i],null,null),l.Pb(603979776,4,{_radios:1}),l.Ob(1024,null,de.m,(function(e){return[e]}),[Pe.c]),l.wb(155,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(157,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(158,0,null,null,2,"mat-radio-button",[["class","mv-1 mat-radio-button"],["value","alert"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,159)._inputElement.nativeElement.focus()&&i),i}),Me.b,Me.a)),l.wb(159,4440064,[[4,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),(e()(),l.Rb(-1,0,["Show alert"])),(e()(),l.xb(161,0,null,null,2,"mat-radio-button",[["class","mv-1 mat-radio-button"],["value","overlay"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,162)._inputElement.nativeElement.focus()&&i),i}),Me.b,Me.a)),l.wb(162,4440064,[[4,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),(e()(),l.Rb(-1,0,["Do not show alert"]))],(function(e,t){var n=t.component;e(t,1,0,n.form),e(t,5,0,l.Sb(t,5,0,l.Jb(t,6).transform(n.dimensions$))),e(t,9,0,"options"),e(t,12,0,"Display Options"),e(t,17,0,"uiInfo"),e(t,24,0,"uiNav"),e(t,31,0,"uiSearch"),e(t,38,0,"uiTools"),e(t,45,0,"uiReset"),e(t,52,0,"uiHelp"),e(t,59,0,"uiFullscreen"),e(t,66,0,"uiChapterList"),e(t,73,0,"uiLabelList"),e(t,80,0,"uiAnatomyDescriptions"),e(t,86,0,"Loading Experience"),e(t,88,0,"rotate"),e(t,94,0,"enabled"),e(t,99,0,n.rotateEnabled),e(t,101,0,"initial"),e(t,107,0,"enabled"),e(t,116,0,"mode"),e(t,120,0,"button"),e(t,123,0,"handHint"),e(t,126,0,"play"),e(t,129,0,"options"),e(t,135,0,"uiTutorial"),e(t,140,0,"disableScroll"),e(t,146,0,"enabled"),e(t,155,0,"mode"),e(t,159,0,"alert"),e(t,162,0,"overlay")}),(function(e,t){e(t,7,0,l.Jb(t,11).ngClassUntouched,l.Jb(t,11).ngClassTouched,l.Jb(t,11).ngClassPristine,l.Jb(t,11).ngClassDirty,l.Jb(t,11).ngClassValid,l.Jb(t,11).ngClassInvalid,l.Jb(t,11).ngClassPending),e(t,14,1,[l.Jb(t,15).id,null,l.Jb(t,15).indeterminate,l.Jb(t,15).checked,l.Jb(t,15).disabled,"before"==l.Jb(t,15).labelPosition,"NoopAnimations"===l.Jb(t,15)._animationMode,l.Jb(t,19).ngClassUntouched,l.Jb(t,19).ngClassTouched,l.Jb(t,19).ngClassPristine,l.Jb(t,19).ngClassDirty,l.Jb(t,19).ngClassValid,l.Jb(t,19).ngClassInvalid,l.Jb(t,19).ngClassPending]),e(t,21,1,[l.Jb(t,22).id,null,l.Jb(t,22).indeterminate,l.Jb(t,22).checked,l.Jb(t,22).disabled,"before"==l.Jb(t,22).labelPosition,"NoopAnimations"===l.Jb(t,22)._animationMode,l.Jb(t,26).ngClassUntouched,l.Jb(t,26).ngClassTouched,l.Jb(t,26).ngClassPristine,l.Jb(t,26).ngClassDirty,l.Jb(t,26).ngClassValid,l.Jb(t,26).ngClassInvalid,l.Jb(t,26).ngClassPending]),e(t,28,1,[l.Jb(t,29).id,null,l.Jb(t,29).indeterminate,l.Jb(t,29).checked,l.Jb(t,29).disabled,"before"==l.Jb(t,29).labelPosition,"NoopAnimations"===l.Jb(t,29)._animationMode,l.Jb(t,33).ngClassUntouched,l.Jb(t,33).ngClassTouched,l.Jb(t,33).ngClassPristine,l.Jb(t,33).ngClassDirty,l.Jb(t,33).ngClassValid,l.Jb(t,33).ngClassInvalid,l.Jb(t,33).ngClassPending]),e(t,35,1,[l.Jb(t,36).id,null,l.Jb(t,36).indeterminate,l.Jb(t,36).checked,l.Jb(t,36).disabled,"before"==l.Jb(t,36).labelPosition,"NoopAnimations"===l.Jb(t,36)._animationMode,l.Jb(t,40).ngClassUntouched,l.Jb(t,40).ngClassTouched,l.Jb(t,40).ngClassPristine,l.Jb(t,40).ngClassDirty,l.Jb(t,40).ngClassValid,l.Jb(t,40).ngClassInvalid,l.Jb(t,40).ngClassPending]),e(t,42,1,[l.Jb(t,43).id,null,l.Jb(t,43).indeterminate,l.Jb(t,43).checked,l.Jb(t,43).disabled,"before"==l.Jb(t,43).labelPosition,"NoopAnimations"===l.Jb(t,43)._animationMode,l.Jb(t,47).ngClassUntouched,l.Jb(t,47).ngClassTouched,l.Jb(t,47).ngClassPristine,l.Jb(t,47).ngClassDirty,l.Jb(t,47).ngClassValid,l.Jb(t,47).ngClassInvalid,l.Jb(t,47).ngClassPending]),e(t,49,1,[l.Jb(t,50).id,null,l.Jb(t,50).indeterminate,l.Jb(t,50).checked,l.Jb(t,50).disabled,"before"==l.Jb(t,50).labelPosition,"NoopAnimations"===l.Jb(t,50)._animationMode,l.Jb(t,54).ngClassUntouched,l.Jb(t,54).ngClassTouched,l.Jb(t,54).ngClassPristine,l.Jb(t,54).ngClassDirty,l.Jb(t,54).ngClassValid,l.Jb(t,54).ngClassInvalid,l.Jb(t,54).ngClassPending]),e(t,56,1,[l.Jb(t,57).id,null,l.Jb(t,57).indeterminate,l.Jb(t,57).checked,l.Jb(t,57).disabled,"before"==l.Jb(t,57).labelPosition,"NoopAnimations"===l.Jb(t,57)._animationMode,l.Jb(t,61).ngClassUntouched,l.Jb(t,61).ngClassTouched,l.Jb(t,61).ngClassPristine,l.Jb(t,61).ngClassDirty,l.Jb(t,61).ngClassValid,l.Jb(t,61).ngClassInvalid,l.Jb(t,61).ngClassPending]),e(t,63,1,[l.Jb(t,64).id,null,l.Jb(t,64).indeterminate,l.Jb(t,64).checked,l.Jb(t,64).disabled,"before"==l.Jb(t,64).labelPosition,"NoopAnimations"===l.Jb(t,64)._animationMode,l.Jb(t,68).ngClassUntouched,l.Jb(t,68).ngClassTouched,l.Jb(t,68).ngClassPristine,l.Jb(t,68).ngClassDirty,l.Jb(t,68).ngClassValid,l.Jb(t,68).ngClassInvalid,l.Jb(t,68).ngClassPending]),e(t,70,1,[l.Jb(t,71).id,null,l.Jb(t,71).indeterminate,l.Jb(t,71).checked,l.Jb(t,71).disabled,"before"==l.Jb(t,71).labelPosition,"NoopAnimations"===l.Jb(t,71)._animationMode,l.Jb(t,75).ngClassUntouched,l.Jb(t,75).ngClassTouched,l.Jb(t,75).ngClassPristine,l.Jb(t,75).ngClassDirty,l.Jb(t,75).ngClassValid,l.Jb(t,75).ngClassInvalid,l.Jb(t,75).ngClassPending]),e(t,77,1,[l.Jb(t,78).id,null,l.Jb(t,78).indeterminate,l.Jb(t,78).checked,l.Jb(t,78).disabled,"before"==l.Jb(t,78).labelPosition,"NoopAnimations"===l.Jb(t,78)._animationMode,l.Jb(t,82).ngClassUntouched,l.Jb(t,82).ngClassTouched,l.Jb(t,82).ngClassPristine,l.Jb(t,82).ngClassDirty,l.Jb(t,82).ngClassValid,l.Jb(t,82).ngClassInvalid,l.Jb(t,82).ngClassPending]),e(t,87,0,l.Jb(t,90).ngClassUntouched,l.Jb(t,90).ngClassTouched,l.Jb(t,90).ngClassPristine,l.Jb(t,90).ngClassDirty,l.Jb(t,90).ngClassValid,l.Jb(t,90).ngClassInvalid,l.Jb(t,90).ngClassPending),e(t,91,1,[l.Jb(t,92).id,null,l.Jb(t,92).indeterminate,l.Jb(t,92).checked,l.Jb(t,92).disabled,"before"==l.Jb(t,92).labelPosition,"NoopAnimations"===l.Jb(t,92)._animationMode,l.Jb(t,96).ngClassUntouched,l.Jb(t,96).ngClassTouched,l.Jb(t,96).ngClassPristine,l.Jb(t,96).ngClassDirty,l.Jb(t,96).ngClassValid,l.Jb(t,96).ngClassInvalid,l.Jb(t,96).ngClassPending]),e(t,100,0,l.Jb(t,103).ngClassUntouched,l.Jb(t,103).ngClassTouched,l.Jb(t,103).ngClassPristine,l.Jb(t,103).ngClassDirty,l.Jb(t,103).ngClassValid,l.Jb(t,103).ngClassInvalid,l.Jb(t,103).ngClassPending),e(t,104,1,[l.Jb(t,105).id,null,l.Jb(t,105).indeterminate,l.Jb(t,105).checked,l.Jb(t,105).disabled,"before"==l.Jb(t,105).labelPosition,"NoopAnimations"===l.Jb(t,105)._animationMode,l.Jb(t,109).ngClassUntouched,l.Jb(t,109).ngClassTouched,l.Jb(t,109).ngClassPristine,l.Jb(t,109).ngClassDirty,l.Jb(t,109).ngClassValid,l.Jb(t,109).ngClassInvalid,l.Jb(t,109).ngClassPending]),e(t,112,0,l.Jb(t,118).ngClassUntouched,l.Jb(t,118).ngClassTouched,l.Jb(t,118).ngClassPristine,l.Jb(t,118).ngClassDirty,l.Jb(t,118).ngClassValid,l.Jb(t,118).ngClassInvalid,l.Jb(t,118).ngClassPending),e(t,119,1,[l.Jb(t,120).checked,l.Jb(t,120).disabled,"NoopAnimations"===l.Jb(t,120)._animationMode,"primary"===l.Jb(t,120).color,"accent"===l.Jb(t,120).color,"warn"===l.Jb(t,120).color,-1,l.Jb(t,120).id,null,null,null]),e(t,122,1,[l.Jb(t,123).checked,l.Jb(t,123).disabled,"NoopAnimations"===l.Jb(t,123)._animationMode,"primary"===l.Jb(t,123).color,"accent"===l.Jb(t,123).color,"warn"===l.Jb(t,123).color,-1,l.Jb(t,123).id,null,null,null]),e(t,125,1,[l.Jb(t,126).checked,l.Jb(t,126).disabled,"NoopAnimations"===l.Jb(t,126)._animationMode,"primary"===l.Jb(t,126).color,"accent"===l.Jb(t,126).color,"warn"===l.Jb(t,126).color,-1,l.Jb(t,126).id,null,null,null]),e(t,128,0,l.Jb(t,131).ngClassUntouched,l.Jb(t,131).ngClassTouched,l.Jb(t,131).ngClassPristine,l.Jb(t,131).ngClassDirty,l.Jb(t,131).ngClassValid,l.Jb(t,131).ngClassInvalid,l.Jb(t,131).ngClassPending),e(t,132,1,[l.Jb(t,133).id,null,l.Jb(t,133).indeterminate,l.Jb(t,133).checked,l.Jb(t,133).disabled,"before"==l.Jb(t,133).labelPosition,"NoopAnimations"===l.Jb(t,133)._animationMode,l.Jb(t,137).ngClassUntouched,l.Jb(t,137).ngClassTouched,l.Jb(t,137).ngClassPristine,l.Jb(t,137).ngClassDirty,l.Jb(t,137).ngClassValid,l.Jb(t,137).ngClassInvalid,l.Jb(t,137).ngClassPending]),e(t,139,0,l.Jb(t,142).ngClassUntouched,l.Jb(t,142).ngClassTouched,l.Jb(t,142).ngClassPristine,l.Jb(t,142).ngClassDirty,l.Jb(t,142).ngClassValid,l.Jb(t,142).ngClassInvalid,l.Jb(t,142).ngClassPending),e(t,143,1,[l.Jb(t,144).id,null,l.Jb(t,144).indeterminate,l.Jb(t,144).checked,l.Jb(t,144).disabled,"before"==l.Jb(t,144).labelPosition,"NoopAnimations"===l.Jb(t,144)._animationMode,l.Jb(t,148).ngClassUntouched,l.Jb(t,148).ngClassTouched,l.Jb(t,148).ngClassPristine,l.Jb(t,148).ngClassDirty,l.Jb(t,148).ngClassValid,l.Jb(t,148).ngClassInvalid,l.Jb(t,148).ngClassPending]),e(t,151,0,l.Jb(t,157).ngClassUntouched,l.Jb(t,157).ngClassTouched,l.Jb(t,157).ngClassPristine,l.Jb(t,157).ngClassDirty,l.Jb(t,157).ngClassValid,l.Jb(t,157).ngClassInvalid,l.Jb(t,157).ngClassPending),e(t,158,1,[l.Jb(t,159).checked,l.Jb(t,159).disabled,"NoopAnimations"===l.Jb(t,159)._animationMode,"primary"===l.Jb(t,159).color,"accent"===l.Jb(t,159).color,"warn"===l.Jb(t,159).color,-1,l.Jb(t,159).id,null,null,null]),e(t,161,1,[l.Jb(t,162).checked,l.Jb(t,162).disabled,"NoopAnimations"===l.Jb(t,162)._animationMode,"primary"===l.Jb(t,162).color,"accent"===l.Jb(t,162).color,"warn"===l.Jb(t,162).color,-1,l.Jb(t,162).id,null,null,null])}))}function gp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleSnapshotSizeClick(e.context.$implicit)&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[6,4],[7,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(2,0,[" "," "]))],null,(function(e,t){var n=t.component;e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null),e(t,2,0,n.formatScreenSizeText(t.context.$implicit))}))}function hp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,113,null,null,null,null,(function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==l.Jb(e,1).onSubmit(n)&&i),"reset"===t&&(i=!1!==l.Jb(e,1).onReset()&&i),i}),null,null)),l.wb(1,540672,null,0,de.h,[[8,null],[8,null]],{form:[0,"form"]},null),l.Ob(2048,null,de.c,null,[de.h]),l.wb(3,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(4,0,null,null,78,"app-panel",[["label","Size"]],null,null,null,Se,we)),l.Ob(5120,null,de.m,(function(e){return[e]}),[Oe]),l.wb(6,114688,null,0,Oe,[l.i],{label:[0,"label"]},null),(e()(),l.xb(7,0,null,1,75,"app-tabs",[],null,null,null,Ue,Fe)),l.wb(8,1294336,null,1,Ae,[l.i],null,null),l.Pb(603979776,5,{_tabs:1}),(e()(),l.xb(10,0,null,0,42,"app-tab",[["label","Pixels"]],null,null,null,Be,Ne)),l.wb(11,114688,[[5,4]],0,ze,[l.i],{label:[0,"label"]},null),(e()(),l.xb(12,16777216,null,0,5,"button",[["app-button",""],["aria-haspopup","true"],["buttonTheme","light"],["buttonType","outline"],["class","mt-2 mat-menu-trigger"]],[[1,"aria-expanded",0],[8,"disabled",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var i=!0;return"mousedown"===t&&(i=!1!==l.Jb(e,13)._handleMousedown(n)&&i),"keydown"===t&&(i=!1!==l.Jb(e,13)._handleKeydown(n)&&i),"click"===t&&(i=!1!==l.Jb(e,13)._handleClick(n)&&i),i}),Ze,Ke)),l.wb(13,1196032,null,0,Je.g,[Qe.a,l.l,l.S,Je.c,[2,Je.d],[8,null],[2,et.b],_e.e],{menu:[0,"menu"]},null),l.wb(14,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"],uppercase:[2,"uppercase"]},null),(e()(),l.Rb(15,0,[" "," "])),(e()(),l.xb(16,0,null,0,1,"app-icon",[["class","ml-1"],["icon","caret-down"]],null,null,null,he,ge)),l.wb(17,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(18,0,null,0,8,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.Ob(6144,null,Je.d,null,[Je.h]),l.Ob(6144,null,Je.b,null,[Je.d]),l.wb(21,1294336,[["imageSizes",4]],3,Je.h,[l.l,l.B,Je.a],null,null),l.Pb(603979776,6,{_allItems:1}),l.Pb(603979776,7,{items:1}),l.Pb(603979776,8,{lazyContent:0}),(e()(),l.nb(16777216,null,0,1,null,gp)),l.wb(26,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),(e()(),l.xb(27,0,null,0,25,"div",[["class","publish__flex-group mt-2"],["formGroupName","dimensions"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(28,212992,null,0,de.i,[[3,de.c],[8,null],[8,null]],{name:[0,"name"]},null),l.Ob(2048,null,de.c,null,[de.i]),l.wb(30,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(31,0,null,null,10,"app-form-field",[["class","mr-6"],["display","inline"],["label","Width"],["theme","light"]],null,null,null,pe,ce)),l.wb(32,114688,null,0,re,[],{label:[0,"label"],display:[1,"display"],theme:[2,"theme"],isCompact:[3,"isCompact"]},null),(e()(),l.xb(33,0,null,0,6,"input",[["class","publish__input input input--small"],["formControlName","width"],["type","number"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,34)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,34).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,34)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,34)._compositionEnd(n.target.value)&&i),"change"===t&&(i=!1!==l.Jb(e,35).onChange(n.target.value)&&i),"input"===t&&(i=!1!==l.Jb(e,35).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,35).onTouched()&&i),i}),null,null)),l.wb(34,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.wb(35,16384,null,0,de.s,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e,t){return[e,t]}),[de.d,de.s]),l.wb(37,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(39,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(40,0,null,1,1,"div",[["class","mt-1"],["form-field-help",""]],null,null,null,null,null)),(e()(),l.Rb(41,null,["","px to ","px"])),(e()(),l.xb(42,0,null,null,10,"app-form-field",[["display","inline"],["label","Height"],["theme","light"]],null,null,null,pe,ce)),l.wb(43,114688,null,0,re,[],{label:[0,"label"],display:[1,"display"],theme:[2,"theme"],isCompact:[3,"isCompact"]},null),(e()(),l.xb(44,0,null,0,6,"input",[["class","publish__input input input--small"],["formControlName","height"],["type","number"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,45)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,45).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,45)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,45)._compositionEnd(n.target.value)&&i),"change"===t&&(i=!1!==l.Jb(e,46).onChange(n.target.value)&&i),"input"===t&&(i=!1!==l.Jb(e,46).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,46).onTouched()&&i),i}),null,null)),l.wb(45,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.wb(46,16384,null,0,de.s,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e,t){return[e,t]}),[de.d,de.s]),l.wb(48,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(50,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(51,0,null,1,1,"div",[["class","mt-1"],["form-field-help",""]],null,null,null,null,null)),(e()(),l.Rb(52,null,["","px to ","px"])),(e()(),l.xb(53,0,null,0,29,"app-tab",[["label","Inches"]],null,null,null,Be,Ne)),l.wb(54,114688,[[5,4]],0,ze,[l.i],{label:[0,"label"]},null),(e()(),l.xb(55,0,null,0,25,"div",[["class","publish__flex-group mt-2"],["formGroupName","inches"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(56,212992,null,0,de.i,[[3,de.c],[8,null],[8,null]],{name:[0,"name"]},null),l.Ob(2048,null,de.c,null,[de.i]),l.wb(58,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(59,0,null,null,10,"app-form-field",[["class","mr-6"],["display","inline"],["label","Width"],["theme","light"]],null,null,null,pe,ce)),l.wb(60,114688,null,0,re,[],{label:[0,"label"],display:[1,"display"],theme:[2,"theme"],isCompact:[3,"isCompact"]},null),(e()(),l.xb(61,0,null,0,6,"input",[["class","publish__input input input--small"],["formControlName","width"],["step",".01"],["type","number"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,62)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,62).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,62)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,62)._compositionEnd(n.target.value)&&i),"change"===t&&(i=!1!==l.Jb(e,63).onChange(n.target.value)&&i),"input"===t&&(i=!1!==l.Jb(e,63).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,63).onTouched()&&i),i}),null,null)),l.wb(62,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.wb(63,16384,null,0,de.s,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e,t){return[e,t]}),[de.d,de.s]),l.wb(65,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(67,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(68,0,null,1,1,"div",[["class","mt-1"],["form-field-help",""]],null,null,null,null,null)),(e()(),l.Rb(69,null,["",'" to ','"'])),(e()(),l.xb(70,0,null,null,10,"app-form-field",[["class","mr-6"],["display","inline"],["label","Height"],["theme","light"]],null,null,null,pe,ce)),l.wb(71,114688,null,0,re,[],{label:[0,"label"],display:[1,"display"],theme:[2,"theme"],isCompact:[3,"isCompact"]},null),(e()(),l.xb(72,0,null,0,6,"input",[["class","publish__input input input--small"],["formControlName","height"],["step",".01"],["type","number"]],[[8,"min",0],[8,"max",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,73)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,73).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,73)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,73)._compositionEnd(n.target.value)&&i),"change"===t&&(i=!1!==l.Jb(e,74).onChange(n.target.value)&&i),"input"===t&&(i=!1!==l.Jb(e,74).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,74).onTouched()&&i),i}),null,null)),l.wb(73,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.wb(74,16384,null,0,de.s,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e,t){return[e,t]}),[de.d,de.s]),l.wb(76,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(78,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(79,0,null,1,1,"div",[["class","mt-1"],["form-field-help",""]],null,null,null,null,null)),(e()(),l.Rb(80,null,["",'" to ','"'])),(e()(),l.xb(81,0,null,0,1,"div",[["class","pt-2 text-small text-dim"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Images are published at 300 dpi"])),(e()(),l.xb(83,0,null,null,18,"app-panel",[["label","Image Type"]],null,null,null,Se,we)),l.Ob(5120,null,de.m,(function(e){return[e]}),[Oe]),l.wb(85,114688,null,0,Oe,[l.i],{label:[0,"label"]},null),(e()(),l.xb(86,0,null,1,15,"div",[["class","publish__flex-group"]],null,null,null,null,null)),(e()(),l.xb(87,0,null,null,14,"mat-radio-group",[["class","mat-radio-group"],["formControlName","imageType"],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(88,1064960,null,1,Pe.c,[l.i],null,null),l.Pb(603979776,9,{_radios:1}),l.Ob(1024,null,de.m,(function(e){return[e]}),[Pe.c]),l.wb(91,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(93,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(94,16777216,null,null,3,"mat-radio-button",[["class","mr-2 mat-radio-button"],["matTooltip","Smallest file size, best for most uses."]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,95)._inputElement.nativeElement.focus()&&i),"longpress"===t&&(i=!1!==l.Jb(e,96).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,96)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,96)._handleTouchend()&&i),i}),Me.b,Me.a)),l.wb(95,4440064,[[9,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),l.wb(96,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),(e()(),l.Rb(-1,0,["JPEG"])),(e()(),l.xb(98,16777216,null,null,3,"mat-radio-button",[["class","mat-radio-button"],["matTooltip","Highest quality, best for print and offline use."]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,99)._inputElement.nativeElement.focus()&&i),"longpress"===t&&(i=!1!==l.Jb(e,100).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,100)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,100)._handleTouchend()&&i),i}),Me.b,Me.a)),l.wb(99,4440064,[[9,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),l.wb(100,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),(e()(),l.Rb(-1,0,["PNG"])),(e()(),l.xb(102,0,null,null,8,"app-panel",[["label","Background Color"]],null,null,null,Se,we)),l.Ob(5120,null,de.m,(function(e){return[e]}),[Oe]),l.wb(104,114688,null,0,Oe,[l.i],{label:[0,"label"]},null),(e()(),l.xb(105,0,null,1,5,"div",[["class","publish__flex-group"]],null,null,null,null,null)),(e()(),l.xb(106,0,null,null,1,"app-color-picker",[["alphaEnabled","false"],["class","publish__picker"],["size","normal"]],null,[[null,"colorSelected"]],(function(e,t,n){var l=!0;return"colorSelected"===t&&(l=!1!==e.component.handleSnapshotBGColorClick(n)&&l),l}),ct,rt)),l.wb(107,114688,null,0,st,[],{color:[0,"color"],size:[1,"size"],alphaEnabled:[2,"alphaEnabled"]},{colorSelected:"colorSelected"}),(e()(),l.xb(108,0,null,null,2,"button",[["app-button",""],["buttonSize","xsmall"],["buttonTheme","light"],["buttonType","outline"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleSnapshotBGColorClick(null)&&l),l}),Ze,Ke)),l.wb(109,114688,null,0,Xe,[],{buttonSize:[0,"buttonSize"],buttonType:[1,"buttonType"],buttonTheme:[2,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Reset Color"])),(e()(),l.xb(111,0,null,null,2,"div",[["class","mt-4"]],null,null,null,null,null)),(e()(),l.xb(112,0,null,null,1,"a",[["class","text-link"],["href","https://www.biodigital.com/terms"],["target","_blank"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Read about our Terms of Use"]))],(function(e,t){var n=t.component;e(t,1,0,n.formSnapshot),e(t,6,0,"Size"),e(t,8,0),e(t,11,0,"Pixels"),e(t,13,0,l.Jb(t,21)),e(t,14,0,"outline","light",!1),e(t,17,0,"caret-down"),e(t,21,0),e(t,26,0,n.snapshotSizes),e(t,28,0,"dimensions"),e(t,32,0,"Width","inline","light",!0),e(t,37,0,"width"),e(t,43,0,"Height","inline","light",!0),e(t,48,0,"height"),e(t,54,0,"Inches"),e(t,56,0,"inches"),e(t,60,0,"Width","inline","light",!0),e(t,65,0,"width"),e(t,71,0,"Height","inline","light",!0),e(t,76,0,"height"),e(t,85,0,"Image Type"),e(t,91,0,"imageType"),e(t,95,0,n.imageTypeEnum.JPEG),e(t,96,0,"Smallest file size, best for most uses."),e(t,99,0,n.imageTypeEnum.PNG),e(t,100,0,"Highest quality, best for print and offline use."),e(t,104,0,"Background Color"),e(t,107,0,n.snapshotBGColor,"normal","false"),e(t,109,0,"xsmall","outline","light")}),(function(e,t){var n=t.component;e(t,12,0,l.Jb(t,13).menuOpen||null,l.Jb(t,14).disabled),e(t,15,0,n.formatScreenSizeText(n.selectedSnapshotSize)),e(t,27,0,l.Jb(t,30).ngClassUntouched,l.Jb(t,30).ngClassTouched,l.Jb(t,30).ngClassPristine,l.Jb(t,30).ngClassDirty,l.Jb(t,30).ngClassValid,l.Jb(t,30).ngClassInvalid,l.Jb(t,30).ngClassPending),e(t,33,0,n.minSnapshotPixels.width,n.maxSnapshotPixels.width,l.Jb(t,39).ngClassUntouched,l.Jb(t,39).ngClassTouched,l.Jb(t,39).ngClassPristine,l.Jb(t,39).ngClassDirty,l.Jb(t,39).ngClassValid,l.Jb(t,39).ngClassInvalid,l.Jb(t,39).ngClassPending),e(t,41,0,n.minSnapshotPixels.width,n.maxSnapshotPixels.width),e(t,44,0,n.minSnapshotPixels.height,n.maxSnapshotPixels.height,l.Jb(t,50).ngClassUntouched,l.Jb(t,50).ngClassTouched,l.Jb(t,50).ngClassPristine,l.Jb(t,50).ngClassDirty,l.Jb(t,50).ngClassValid,l.Jb(t,50).ngClassInvalid,l.Jb(t,50).ngClassPending),e(t,52,0,n.minSnapshotPixels.height,n.maxSnapshotPixels.height),e(t,55,0,l.Jb(t,58).ngClassUntouched,l.Jb(t,58).ngClassTouched,l.Jb(t,58).ngClassPristine,l.Jb(t,58).ngClassDirty,l.Jb(t,58).ngClassValid,l.Jb(t,58).ngClassInvalid,l.Jb(t,58).ngClassPending),e(t,61,0,n.minSnapshotInches.width,n.maxSnapshotInches.width,l.Jb(t,67).ngClassUntouched,l.Jb(t,67).ngClassTouched,l.Jb(t,67).ngClassPristine,l.Jb(t,67).ngClassDirty,l.Jb(t,67).ngClassValid,l.Jb(t,67).ngClassInvalid,l.Jb(t,67).ngClassPending),e(t,69,0,n.minSnapshotInches.width,n.maxSnapshotInches.width),e(t,72,0,n.minSnapshotInches.height,n.maxSnapshotInches.height,l.Jb(t,78).ngClassUntouched,l.Jb(t,78).ngClassTouched,l.Jb(t,78).ngClassPristine,l.Jb(t,78).ngClassDirty,l.Jb(t,78).ngClassValid,l.Jb(t,78).ngClassInvalid,l.Jb(t,78).ngClassPending),e(t,80,0,n.minSnapshotInches.height,n.maxSnapshotInches.height),e(t,87,0,l.Jb(t,93).ngClassUntouched,l.Jb(t,93).ngClassTouched,l.Jb(t,93).ngClassPristine,l.Jb(t,93).ngClassDirty,l.Jb(t,93).ngClassValid,l.Jb(t,93).ngClassInvalid,l.Jb(t,93).ngClassPending),e(t,94,1,[l.Jb(t,95).checked,l.Jb(t,95).disabled,"NoopAnimations"===l.Jb(t,95)._animationMode,"primary"===l.Jb(t,95).color,"accent"===l.Jb(t,95).color,"warn"===l.Jb(t,95).color,-1,l.Jb(t,95).id,null,null,null]),e(t,98,1,[l.Jb(t,99).checked,l.Jb(t,99).disabled,"NoopAnimations"===l.Jb(t,99)._animationMode,"primary"===l.Jb(t,99).color,"accent"===l.Jb(t,99).color,"warn"===l.Jb(t,99).color,-1,l.Jb(t,99).id,null,null,null]),e(t,108,0,l.Jb(t,109).disabled)}))}function mp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,9,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"div",[["class","text-12 p-2 mt-2 mb-2"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Make this model available to anyone by publishing it to the web. "])),(e()(),l.xb(3,0,null,null,6,"div",[["class","publish__actions-content"]],null,null,null,null,null)),(e()(),l.xb(4,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["buttonType","flat"],["class","mb-2 w-100"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleGenerateIFrame()&&l),l}),Ze,Ke)),l.wb(5,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"],disabled:[2,"disabled"]},null),(e()(),l.Rb(-1,0,["Copy embed"])),(e()(),l.xb(7,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["buttonType","flat"],["class","w-100"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleGenerateURL()&&l),l}),Ze,Ke)),l.wb(8,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"],disabled:[2,"disabled"]},null),(e()(),l.Rb(-1,0,["Copy URL"]))],(function(e,t){var n=t.component;e(t,5,0,"flat","light",!n.form.valid),e(t,8,0,"flat","light",!n.form.valid)}),(function(e,t){e(t,4,0,l.Jb(t,5).disabled),e(t,7,0,l.Jb(t,8).disabled)}))}function xp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,12,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"div",[["class","text-12 p-2 mt-2 mb-2"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Download this image or make it available to anyone by publishing it to the web. "])),(e()(),l.xb(3,0,null,null,9,"div",[["class","publish__actions-content"]],null,null,null,null,null)),(e()(),l.xb(4,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["buttonType","flat"],["class","mb-2 w-100"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleDownloadSnapClick()&&l),l}),Ze,Ke)),l.wb(5,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"],disabled:[2,"disabled"]},null),(e()(),l.Rb(-1,0,["Download"])),(e()(),l.xb(7,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["buttonType","flat"],["class","mb-2 w-100"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCopyImageURL()&&l),l}),Ze,Ke)),l.wb(8,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"],disabled:[2,"disabled"]},null),(e()(),l.Rb(-1,0,["Copy URL"])),(e()(),l.xb(10,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["buttonType","flat"],["class","w-100"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleGenerateImage()&&l),l}),Ze,Ke)),l.wb(11,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"],disabled:[2,"disabled"]},null),(e()(),l.Rb(-1,0,["Copy Embed"]))],(function(e,t){var n=t.component;e(t,5,0,"flat","light",!n.formSnapshot.valid),e(t,8,0,"flat","light",!n.formSnapshot.valid),e(t,11,0,"flat","light",!n.formSnapshot.valid)}),(function(e,t){e(t,4,0,l.Jb(t,5).disabled),e(t,7,0,l.Jb(t,8).disabled),e(t,10,0,l.Jb(t,11).disabled)}))}function fp(e){return l.Tb(2,[l.Pb(402653184,1,{publishWidget:0}),(e()(),l.xb(1,0,null,null,33,"div",[["class","publish theme-light"]],null,null,null,null,null)),l.wb(2,16384,null,0,se.q,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l.xb(3,0,null,null,24,"div",[["class","publish__options text-12"]],null,null,null,null,null)),(e()(),l.xb(4,0,null,null,19,"app-panel",[["label","Select a format to publish:"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==l.Jb(e,6).onSubmit(n)&&i),"reset"===t&&(i=!1!==l.Jb(e,6).onReset()&&i),i}),Se,we)),l.Ob(5120,null,de.m,(function(e){return[e]}),[Oe]),l.wb(6,540672,null,0,de.h,[[8,null],[8,null]],{form:[0,"form"]},null),l.Ob(2048,null,de.c,null,[de.h]),l.wb(8,16384,null,0,de.p,[[4,de.c]],null,null),l.wb(9,114688,null,0,Oe,[l.i],{label:[0,"label"]},null),(e()(),l.xb(10,0,null,1,13,"div",[["class","publish__flex-group"]],null,null,null,null,null)),(e()(),l.xb(11,0,null,null,12,"mat-radio-group",[["class","mat-radio-group"],["formControlName","mode"],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(12,1064960,null,1,Pe.c,[l.i],null,null),l.Pb(603979776,2,{_radios:1}),l.Ob(1024,null,de.m,(function(e){return[e]}),[Pe.c]),l.wb(15,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(17,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(18,0,null,null,2,"mat-radio-button",[["class","mr-2 mat-radio-button"],["value","3d"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,19)._inputElement.nativeElement.focus()&&i),i}),Me.b,Me.a)),l.wb(19,4440064,[[2,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),(e()(),l.Rb(-1,0,["3D Embeddable"])),(e()(),l.xb(21,0,null,null,2,"mat-radio-button",[["class","mat-radio-button"],["value","2d"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,22)._inputElement.nativeElement.focus()&&i),i}),Me.b,Me.a)),l.wb(22,4440064,[[2,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),(e()(),l.Rb(-1,0,["Image"])),(e()(),l.nb(16777216,null,null,1,null,bp)),l.wb(25,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,hp)),l.wb(27,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.xb(28,0,null,null,4,"div",[["class","publish__actions"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,mp)),l.wb(30,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,xp)),l.wb(32,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.xb(33,0,null,null,1,"app-publish-widget",[["class","publish__embed"]],null,[[null,"cameraUpdated"]],(function(e,t,n){var l=!0;return"cameraUpdated"===t&&(l=!1!==e.component.handleCameraUpdated(n)&&l),l}),Yo,Zo)),l.wb(34,245760,[[1,4],["publishWidget",4]],0,Ko,[l.l,Lt,xt],{model:[0,"model"],width:[1,"width"],height:[2,"height"],scalable:[3,"scalable"],enableUI:[4,"enableUI"],bgColor:[5,"bgColor"],widgetParams:[6,"widgetParams"]},{cameraUpdated:"cameraUpdated"})],(function(e,t){var n=t.component;e(t,2,0,n.mode),e(t,6,0,n.formModeGroup),e(t,9,0,"Select a format to publish:"),e(t,15,0,"mode"),e(t,19,0,"3d"),e(t,22,0,"2d"),e(t,25,0,"3d"),e(t,27,0,"2d"),e(t,30,0,"3d"),e(t,32,0,"2d"),e(t,34,0,n.model,n.widgetWidth,n.widgetHeight,n.widgetScalable,"3d"===n.mode,n.widgetBGColor,n.widgetOptions)}),(function(e,t){e(t,4,0,l.Jb(t,8).ngClassUntouched,l.Jb(t,8).ngClassTouched,l.Jb(t,8).ngClassPristine,l.Jb(t,8).ngClassDirty,l.Jb(t,8).ngClassValid,l.Jb(t,8).ngClassInvalid,l.Jb(t,8).ngClassPending),e(t,11,0,l.Jb(t,17).ngClassUntouched,l.Jb(t,17).ngClassTouched,l.Jb(t,17).ngClassPristine,l.Jb(t,17).ngClassDirty,l.Jb(t,17).ngClassValid,l.Jb(t,17).ngClassInvalid,l.Jb(t,17).ngClassPending),e(t,18,1,[l.Jb(t,19).checked,l.Jb(t,19).disabled,"NoopAnimations"===l.Jb(t,19)._animationMode,"primary"===l.Jb(t,19).color,"accent"===l.Jb(t,19).color,"warn"===l.Jb(t,19).color,-1,l.Jb(t,19).id,null,null,null]),e(t,21,1,[l.Jb(t,22).checked,l.Jb(t,22).disabled,"NoopAnimations"===l.Jb(t,22)._animationMode,"primary"===l.Jb(t,22).color,"accent"===l.Jb(t,22).color,"warn"===l.Jb(t,22).color,-1,l.Jb(t,22).id,null,null,null])}))}class _p{constructor(e,t){this.dialogRef=e,this.bookmark=t.bookmark}ngOnInit(){}closeDialog(){this.dialogRef.close()}}var yp=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}a[_ngcontent-%COMP%]{color:#de3838}a[_ngcontent-%COMP%]:hover{color:#c32020}.publish__contents[_ngcontent-%COMP%]{height:calc(90vh - 80px);border-top:1px solid #eaeff5;margin-top:12px}.publish__heading[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.publish__text[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.publish__title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.publish__close[_ngcontent-%COMP%]{cursor:pointer;color:#283853}.publish__close[_ngcontent-%COMP%]:hover{color:#1c2a3f}"]],data:{}});function Op(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-publish",[],null,null,null,fp,cp)),l.wb(1,245760,null,0,Gc,[O.i,O.b,Lt,el,Xc,sp,rp.c,de.f,l.i],{model:[0,"model"]},null)],(function(e,t){e(t,1,0,t.component.bookmark)}),null)}function wp(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,9,"div",[["class","publish"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,5,"div",[["class","publish__heading"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l.xb(3,0,null,null,1,"h1",[["class","publish__title"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Publish "])),(e()(),l.xb(5,0,null,null,1,"app-icon",[["class","publish__close"],["icon","times"],["size","lg"],["title","close"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.closeDialog()&&l),l}),he,ge)),l.wb(6,114688,null,0,be,[],{icon:[0,"icon"],size:[1,"size"]},null),(e()(),l.xb(7,0,null,null,2,"div",[["class","publish__contents"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Op)),l.wb(9,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,6,0,"times","lg"),e(t,9,0,n.bookmark)}),null)}function vp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-publish-dialog",[],null,null,null,wp,yp)),l.wb(1,114688,null,0,_p,[ip.l,ip.a],null,null)],(function(e,t){e(t,1,0)}),null)}var Cp=l.tb("app-publish-dialog",_p,vp,{},{},[]),jp=l.vb({encapsulation:0,styles:[["a[_ngcontent-%COMP%]{color:#1c5ab9;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.modal[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:end;align-items:flex-end;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.modal__close[_ngcontent-%COMP%]{cursor:pointer;color:#283853}.content[_ngcontent-%COMP%]{width:640px;position:relative;margin:auto;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;padding:40px;text-align:center}@media (max-width:1024px){.content[_ngcontent-%COMP%]{width:100%}}"]],data:{}});function kp(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,30,"div",[["class","modal"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-icon",[["class","modal__close"],["icon","times"],["size","lg"],["title","close"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.closeDialog()&&l),l}),he,ge)),l.wb(2,114688,null,0,be,[],{icon:[0,"icon"],size:[1,"size"]},null),(e()(),l.xb(3,0,null,null,27,"div",[["class","text-12 content mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l.wb(4,16384,null,0,ip.j,[],null,null),(e()(),l.xb(5,0,null,null,0,"img",[["class","mb-2"],["src","assets/images/biodigital-logo.svg"],["width","190"]],null,null,null,null,null)),(e()(),l.xb(6,0,null,null,1,"p",[["class","text-14 text-semibold"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["The BioDgital Human Platform"])),(e()(),l.xb(8,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Version 4.0"])),(e()(),l.xb(10,0,null,null,5,"p",[["class","mb-3"]],null,null,null,null,null)),(e()(),l.xb(11,0,null,null,1,"a",[["href","https://wwww.biodigital.com/terms"],["target","_blank"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Terms of Service"])),(e()(),l.Rb(-1,null,[" | "])),(e()(),l.xb(14,0,null,null,1,"a",[["href","https://wwww.biodigital.com/privacy"],["target","_blank"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Privacy Policy"])),(e()(),l.xb(16,0,null,null,4,"p",[["class","mb-4"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Software and all 3D models \xa9 "])),(e()(),l.xb(18,0,null,null,1,"span",[["class","text-semibold"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["BioDigital, Inc 2019."])),(e()(),l.Rb(-1,null,[" All rights reserved."])),(e()(),l.xb(21,0,null,null,3,"p",[["class","mb-2"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["This program is protected by copyright law and international treaties. Unauthorized reproduction, distribution, reverse engineering or sale of the software is strictly prohibited. This software is not a diagnostic or clinical decision-making tool. The medical information is intended for background viewing and general interest. Content is asserted neither complete nor error free. Please consult your own licensed physician regarding diagnosis and treatment of any medical condition! Please see also our full "])),(e()(),l.xb(23,0,null,null,1,"a",[["href","https://wwww.biodigital.com/terms"],["target","_blank"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Terms of Service."])),(e()(),l.xb(25,0,null,null,1,"p",[["class","mb-2"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["The BioDigital Human is made possible through the expertise and dedication of our development team, advisors, investors and all who pioneered medical education before us. Thank you! "])),(e()(),l.xb(27,0,null,null,3,"p",[["class","mb-2"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["For licensing information contact "])),(e()(),l.xb(29,0,null,null,1,"span",[["class","text-medium"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["info@biodigital.com."]))],(function(e,t){e(t,2,0,"times","lg")}),null)}function Sp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-about-dialog",[],null,null,null,kp,jp)),l.wb(1,114688,null,0,fu,[ip.l],null,null)],(function(e,t){e(t,1,0)}),null)}var Pp=l.tb("app-about-dialog",fu,Sp,{},{},[]);class Mp{constructor(e,t){this.dialogRef=e,this.data=t,this.settings={titleText:"Confirm Action"},t&&(this.settings=Object.assign({},this.settings,t))}ngOnInit(){}}var Tp=l.vb({encapsulation:0,styles:[[""]],data:{}});function Ip(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l.wb(1,81920,null,0,ip.m,[[2,ip.l],l.l,ip.e],null,null),(e()(),l.Rb(-1,null,[" View Only\n"])),(e()(),l.xb(3,0,null,null,3,"div",[["class","mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l.wb(4,16384,null,0,ip.j,[],null,null),(e()(),l.xb(5,0,null,null,1,"span",[["class","text-14"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["This content is currently set to view only, and changes made will be saved to a copy. "])),(e()(),l.xb(7,0,null,null,5,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),l.wb(8,16384,null,0,ip.f,[],null,null),(e()(),l.xb(9,0,null,null,3,"button",[["app-button",""],["buttonType","primary"],["cdkFocusInitial",""],["style","min-width: 100px;"]],[[1,"aria-label",0],[1,"type",0],[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,10).dialogRef.close(l.Jb(e,10).dialogResult)&&i),i}),Ze,Ke)),l.wb(10,606208,null,0,ip.g,[[2,ip.l],l.l,ip.e],{dialogResult:[0,"dialogResult"]},null),l.wb(11,114688,null,0,Xe,[],{buttonType:[0,"buttonType"]},null),(e()(),l.Rb(-1,0,["OK"]))],(function(e,t){e(t,1,0),e(t,10,0,!0),e(t,11,0,"primary")}),(function(e,t){e(t,0,0,l.Jb(t,1).id),e(t,9,0,l.Jb(t,10).ariaLabel||null,l.Jb(t,10).type,l.Jb(t,11).disabled)}))}function Jp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-access-dialog",[],null,null,null,Ip,Tp)),l.wb(1,114688,null,0,Mp,[ip.l,ip.a],null,null)],(function(e,t){e(t,1,0)}),null)}var zp=l.tb("app-access-dialog",Mp,Jp,{},{},[]),Lp=function(e){return e.Small="small",e.Medium="medium",e.Large="large",e.Huge="huge",e}({}),Ep=function(e){return e.Horizontal="horizontal",e.Vertical="vertical",e}({}),Ap=function(e){return e.Inline="inline",e.Block="block",e.Fill="fill",e}({});class Fp{constructor(){this.size=Lp.Medium,this.label="",this.direction=Ep.Horizontal,this.render=Ap.Fill}ngOnInit(){}}var Rp=l.vb({encapsulation:0,styles:[['@-webkit-keyframes spinner{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.spinner[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.spinner--small[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%], .spinner--small[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%]:after{width:11px;height:11px}.spinner--small[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{font-size:10px}.spinner--medium[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%], .spinner--medium[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%]:after{width:14px;height:14px}.spinner--medium[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{font-size:10px}.spinner--large[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%], .spinner--large[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%]:after{width:28px;height:28px}.spinner--large[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{font-size:14px}.spinner--huge[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%], .spinner--huge[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%]:after{width:44px;height:44px}.spinner--huge[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{font-size:16px}.spinner--horizontal[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.spinner--vertical[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.spinner--vertical[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{padding:8px 0 0}.spinner--inline[_ngcontent-%COMP%]{display:-webkit-inline-box;display:inline-flex}.spinner--block[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.spinner--fill[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%}.spinner__circle[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:50%;border:2px solid rgba(16,24,35,.1);position:relative}.spinner__circle[_ngcontent-%COMP%]:after{-webkit-animation:.4s linear infinite spinner;animation:.4s linear infinite spinner;content:" ";border-radius:50%;border:2px solid transparent;border-top-color:rgba(255,255,255,.2);border-right-color:rgba(16,24,35,.2);box-sizing:border-box;position:absolute;display:block;width:14px;height:14px;top:-2px;left:-2px}.spinner__label[_ngcontent-%COMP%]{padding-left:8px;font-size:14px;text-transform:uppercase}.theme-dark[_nghost-%COMP%]   .spinner__label[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .spinner__label[_ngcontent-%COMP%]{color:rgba(255,255,255,.2)}.theme-light[_nghost-%COMP%]   .spinner__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .spinner__label[_ngcontent-%COMP%]{color:rgba(16,24,35,.2)}']],data:{}});function Dp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"div",[["class","spinner__label"]],null,null,null,null,null)),(e()(),l.Rb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.label)}))}function Up(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,6,"div",[["class","spinner spinner--horizontal"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Kb(3,3),(e()(),l.xb(4,0,null,null,0,"div",[["class","spinner__circle"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Dp)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component,l=e(t,3,0,"spinner--"+n.size,"spinner--"+n.render,"spinner--"+n.direction);e(t,2,0,"spinner spinner--horizontal",l),e(t,6,0,n.label.length)}),null)}var Np=l.vb({encapsulation:0,styles:[[".dialog__radio-group[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}@media (min-width:480px){.dialog[_ngcontent-%COMP%]{min-width:380px}}"]],data:{}});function Hp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"option",[],null,null,null,null,null)),l.wb(1,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(2,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(3,null,[" "," "]))],(function(e,t){e(t,1,0,t.context.$implicit.collection_id),e(t,2,0,t.context.$implicit.collection_id)}),(function(e,t){e(t,3,0,t.context.$implicit.collection_name)}))}function Bp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,14,"app-form-field",[["class","mb-2"],["label","Collection (Optional)"],["theme","light"]],null,null,null,pe,ce)),l.wb(1,114688,null,0,re,[],{label:[0,"label"],theme:[1,"theme"]},null),(e()(),l.xb(2,0,null,0,12,"select",[["class","input"],["formControlName","collectionId"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(e,t,n){var i=!0;return"change"===t&&(i=!1!==l.Jb(e,3).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,3).onTouched()&&i),i}),null,null)),l.wb(3,16384,null,0,de.w,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.w]),l.wb(5,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(7,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(8,0,null,null,3,"option",[],null,null,null,null,null)),l.wb(9,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(10,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(-1,null,["--"])),(e()(),l.nb(16777216,null,null,2,null,Hp)),l.wb(13,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,1,0,"Collection (Optional)","light"),e(t,5,0,"collectionId"),e(t,9,0,null),e(t,10,0,null),e(t,13,0,l.Sb(t,13,0,l.Jb(t,14).transform(n.collections$)))}),(function(e,t){e(t,2,0,l.Jb(t,7).ngClassUntouched,l.Jb(t,7).ngClassTouched,l.Jb(t,7).ngClassPristine,l.Jb(t,7).ngClassDirty,l.Jb(t,7).ngClassValid,l.Jb(t,7).ngClassInvalid,l.Jb(t,7).ngClassPending)}))}function $p(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-spinner",[["class","mr-1"],["render","inline"],["size","small"]],null,null,null,Up,Rp)),l.wb(2,114688,null,0,Fp,[],{size:[0,"size"],render:[1,"render"]},null),(e()(),l.Rb(-1,null,[" Adding "]))],(function(e,t){e(t,2,0,"small","inline")}),null)}function Vp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Add "]))],null,null)}function Wp(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l.wb(1,81920,null,0,ip.m,[[2,ip.l],l.l,ip.e],null,null),(e()(),l.Rb(-1,null,[" Add to Team Models\n"])),(e()(),l.xb(3,0,null,null,24,"div",[["class","dialog mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l.wb(4,16384,null,0,ip.j,[],null,null),(e()(),l.xb(5,0,null,null,22,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var i=!0,a=e.component;return"submit"===t&&(i=!1!==l.Jb(e,7).onSubmit(n)&&i),"reset"===t&&(i=!1!==l.Jb(e,7).onReset()&&i),"submit"===t&&(i=!1!==a.handleSubmit()&&i),i}),null,null)),l.wb(6,16384,null,0,de.C,[],null,null),l.wb(7,540672,null,0,de.h,[[8,null],[8,null]],{form:[0,"form"]},null),l.Ob(2048,null,de.c,null,[de.h]),l.wb(9,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(10,0,null,null,14,"app-form-field",[["class","mt-2 mb-2"],["label","Permissions"],["theme","light"]],null,null,null,pe,ce)),l.wb(11,114688,null,0,re,[],{label:[0,"label"],theme:[1,"theme"]},null),(e()(),l.xb(12,0,null,0,12,"mat-radio-group",[["class","dialog__radio-group text-12 mt-2 mat-radio-group"],["formControlName","groupEditEnabled"],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(13,1064960,null,1,Pe.c,[l.i],null,null),l.Pb(603979776,1,{_radios:1}),l.Ob(1024,null,de.m,(function(e){return[e]}),[Pe.c]),l.wb(16,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(18,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(19,0,null,null,2,"mat-radio-button",[["class","mb-2 mat-radio-button"],["value","false"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,20)._inputElement.nativeElement.focus()&&i),i}),Me.b,Me.a)),l.wb(20,4440064,[[1,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),(e()(),l.Rb(-1,0,["Team - View Only"])),(e()(),l.xb(22,0,null,null,2,"mat-radio-button",[["class","mat-radio-button"],["value","true"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,23)._inputElement.nativeElement.focus()&&i),i}),Me.b,Me.a)),l.wb(23,4440064,[[1,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),(e()(),l.Rb(-1,0,["Team - View & Edit"])),(e()(),l.nb(16777216,null,null,2,null,Bp)),l.wb(26,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(28,0,null,null,14,"div",[["class","pt-2 mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),l.wb(29,16384,null,0,ip.f,[],null,null),(e()(),l.xb(30,0,null,null,3,"button",[["app-button",""],["buttonTheme","light"],["class","mr-2"],["type","button"]],[[1,"aria-label",0],[1,"type",0],[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,31).dialogRef.close(l.Jb(e,31).dialogResult)&&i),i}),Ze,Ke)),l.wb(31,606208,null,0,ip.g,[[2,ip.l],l.l,ip.e],{type:[0,"type"]},null),l.wb(32,114688,null,0,Xe,[],{buttonTheme:[0,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Cancel"])),(e()(),l.xb(34,0,null,null,8,"button",[["app-button",""],["buttonType","primary"],["cdkFocusInitial",""]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleSubmit()&&l),l}),Ze,Ke)),l.wb(35,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],disabled:[1,"disabled"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,0,2,null,$p)),l.wb(38,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,0,2,null,Vp)),l.wb(41,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n,i=t.component;e(t,1,0),e(t,7,0,i.form),e(t,11,0,"Permissions","light"),e(t,16,0,"groupEditEnabled"),e(t,20,0,"false"),e(t,23,0,"true"),e(t,26,0,null==(n=l.Sb(t,26,0,l.Jb(t,27).transform(i.collections$)))?null:n.length),e(t,31,0,"button"),e(t,32,0,"light"),e(t,35,0,"primary",l.Sb(t,35,1,l.Jb(t,36).transform(i.copying$))),e(t,38,0,l.Sb(t,38,0,l.Jb(t,39).transform(i.copying$))),e(t,41,0,!l.Sb(t,41,0,l.Jb(t,42).transform(i.copying$)))}),(function(e,t){e(t,0,0,l.Jb(t,1).id),e(t,5,0,l.Jb(t,9).ngClassUntouched,l.Jb(t,9).ngClassTouched,l.Jb(t,9).ngClassPristine,l.Jb(t,9).ngClassDirty,l.Jb(t,9).ngClassValid,l.Jb(t,9).ngClassInvalid,l.Jb(t,9).ngClassPending),e(t,12,0,l.Jb(t,18).ngClassUntouched,l.Jb(t,18).ngClassTouched,l.Jb(t,18).ngClassPristine,l.Jb(t,18).ngClassDirty,l.Jb(t,18).ngClassValid,l.Jb(t,18).ngClassInvalid,l.Jb(t,18).ngClassPending),e(t,19,1,[l.Jb(t,20).checked,l.Jb(t,20).disabled,"NoopAnimations"===l.Jb(t,20)._animationMode,"primary"===l.Jb(t,20).color,"accent"===l.Jb(t,20).color,"warn"===l.Jb(t,20).color,-1,l.Jb(t,20).id,null,null,null]),e(t,22,1,[l.Jb(t,23).checked,l.Jb(t,23).disabled,"NoopAnimations"===l.Jb(t,23)._animationMode,"primary"===l.Jb(t,23).color,"accent"===l.Jb(t,23).color,"warn"===l.Jb(t,23).color,-1,l.Jb(t,23).id,null,null,null]),e(t,30,0,l.Jb(t,31).ariaLabel||null,l.Jb(t,31).type,l.Jb(t,32).disabled),e(t,34,0,l.Jb(t,35).disabled)}))}function Gp(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-add-team-model-dialog",[],null,null,null,Wp,Np)),l.wb(1,245760,null,0,tp,[O.i,O.b,de.f,ip.l,rp.c,el,ip.a],null,null)],(function(e,t){e(t,1,0)}),null)}var qp=l.tb("app-add-team-model-dialog",tp,Gp,{},{},[]);class Xp{constructor(e){this.domSanitizer=e,this.size="medium"}get isTransparent(){return this.color&&$o.isTransparent(this.color)}ngOnInit(){}getBackgroundCSS(){if(this.color&&!this.isTransparent){const e=$o.toCSS(this.color);return this.domSanitizer.bypassSecurityTrustStyle(e)}return null}}var Kp=l.vb({encapsulation:0,styles:[[".item[_ngcontent-%COMP%]{border-radius:1px;cursor:pointer;border:1px solid #eaeff5}.item--small[_ngcontent-%COMP%]{width:12px;height:12px}.item--medium[_ngcontent-%COMP%]{width:24px;height:24px}.item--large[_ngcontent-%COMP%]{width:36px;height:36px}.item--selected[_ngcontent-%COMP%]{border-color:#1c5ab9;border-width:2px}.item--transparent[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f9fafd 48%,#de3838 50%,#f9fafd 52%)}"]],data:{}});function Zp(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,0,"div",[["class","item"]],[[2,"item--x-small",null],[2,"item--small",null],[2,"item--medium",null],[2,"item--large",null],[2,"item--x-large",null],[2,"item--selected",null],[2,"item--transparent",null],[4,"background-image",null]],null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,"x-small"===n.size,"small"===n.size,"medium"===n.size,"large"===n.size,"x-large"===n.size,n.selected,n.isTransparent,n.getBackgroundCSS())}))}class Yp{constructor(){this.theme="dark",this.min=0,this.max=100,this.step=1,this._value=0,this.disabled=!1,this.blurred=new l.n,this.mouseUp=new l.n,this.onChange=()=>{},this.onTouched=()=>{},this.propagateChange=e=>{}}get value(){return this._value}set value(e){null!=e&&(null==this._initialValue&&(this._initialValue=e),this._value=e,this.propagateChange(this.value))}ngOnInit(){}handleMouseUp(){this.mouseUp.emit()}handleBlur(){this.blurred.emit()}handleRangeDoubleClick(){this.value=this._initialValue}writeValue(e){this.value=e}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}var Qp=l.vb({encapsulation:0,styles:[[".slider[_ngcontent-%COMP%]{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex}.slider__range[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 1 100%}.slider__input[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 64px;margin-left:8px}"]],data:{}});function ed(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,16,"div",[["class","slider"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,7,"div",[["class","slider__range"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,6,"input",[["class","range"],["type","range"]],[[2,"light",null],[2,"dark",null],[8,"min",0],[8,"max",0],[8,"step",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"dblclick"],[null,"mouseup"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var i=!0,a=e.component;return"input"===t&&(i=!1!==l.Jb(e,3)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,3).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,3)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,3)._compositionEnd(n.target.value)&&i),"change"===t&&(i=!1!==l.Jb(e,4).onChange(n.target.value)&&i),"input"===t&&(i=!1!==l.Jb(e,4).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,4).onTouched()&&i),"ngModelChange"===t&&(i=!1!==(a.value=n)&&i),"dblclick"===t&&(i=!1!==a.handleRangeDoubleClick()&&i),"mouseup"===t&&(i=!1!==a.handleMouseUp()&&i),i}),null,null)),l.wb(3,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.wb(4,16384,null,0,de.t,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e,t){return[e,t]}),[de.d,de.t]),l.wb(6,671744,null,0,de.q,[[8,null],[8,null],[8,null],[6,de.m]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l.Ob(2048,null,de.n,null,[de.q]),l.wb(8,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(9,0,null,null,7,"div",[["class","slider__input"]],null,null,null,null,null)),(e()(),l.xb(10,0,null,null,6,"input",[["class","input"],["type","number"]],[[8,"min",0],[8,"max",0],[8,"step",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"blur"],[null,"input"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(e,t,n){var i=!0,a=e.component;return"input"===t&&(i=!1!==l.Jb(e,11)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,11).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,11)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,11)._compositionEnd(n.target.value)&&i),"change"===t&&(i=!1!==l.Jb(e,12).onChange(n.target.value)&&i),"input"===t&&(i=!1!==l.Jb(e,12).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,12).onTouched()&&i),"ngModelChange"===t&&(i=!1!==(a.value=n)&&i),"blur"===t&&(i=!1!==a.handleBlur()&&i),i}),null,null)),l.wb(11,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.wb(12,16384,null,0,de.s,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e,t){return[e,t]}),[de.d,de.s]),l.wb(14,671744,null,0,de.q,[[8,null],[8,null],[8,null],[6,de.m]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),l.Ob(2048,null,de.n,null,[de.q]),l.wb(16,16384,null,0,de.o,[[4,de.n]],null,null)],(function(e,t){var n=t.component;e(t,6,0,n.disabled,n.value),e(t,14,0,n.disabled,n.value)}),(function(e,t){var n=t.component;e(t,2,1,["light"===n.theme,"dark"===n.theme,n.min,n.max,n.step,l.Jb(t,8).ngClassUntouched,l.Jb(t,8).ngClassTouched,l.Jb(t,8).ngClassPristine,l.Jb(t,8).ngClassDirty,l.Jb(t,8).ngClassValid,l.Jb(t,8).ngClassInvalid,l.Jb(t,8).ngClassPending]),e(t,10,0,n.min,n.max,n.step,l.Jb(t,16).ngClassUntouched,l.Jb(t,16).ngClassTouched,l.Jb(t,16).ngClassPristine,l.Jb(t,16).ngClassDirty,l.Jb(t,16).ngClassValid,l.Jb(t,16).ngClassInvalid,l.Jb(t,16).ngClassPending)}))}var td=function(e){return e.Danger="danger",e.Info="info",e}({});class nd{constructor(){this.type=td.Info,this.theme="dark"}ngOnInit(){}}var ld=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}:host{display:block}.app-alert{border-radius:4px;padding:16px;font-size:12px;letter-spacing:.3px;line-height:1.4em}.app-alert--info{background:rgba(45,144,220,.15);border:1px solid rgba(45,144,220,.5)}.app-alert--danger{background:rgba(222,56,56,.15);border:1px solid rgba(222,56,56,.4)}.app-alert--light{color:#1c2a3f}.app-alert--light a,.app-alert--light a:visited{color:#283853}.app-alert--dark{color:#f9fafd}.app-alert--dark a,.app-alert--dark a:visited{color:#fff}"]],data:{}});function id(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,3,"div",[["class","app-alert"]],[[2,"app-alert--dark",null],[2,"app-alert--light",null]],null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Ib(null,0)],(function(e,t){e(t,2,0,"app-alert","app-alert--"+t.component.type)}),(function(e,t){var n=t.component;e(t,0,0,"dark"===n.theme,"light"===n.theme)}))}var ad=l.vb({encapsulation:0,styles:[[".background[_ngcontent-%COMP%]{width:256px;min-height:280px}.background__section[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.background__swatches[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;flex-wrap:wrap}"]],data:{}});function od(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-swatch-item",[["class","m-1"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handlePresetSelected(e.context.$implicit)&&l),l}),Zp,Kp)),l.wb(1,114688,null,0,Xp,[it.b],{color:[0,"color"],size:[1,"size"],selected:[2,"selected"]},null)],(function(e,t){var n=t.component;e(t,1,0,t.context.$implicit,"medium",n.backgroundsEqual(t.context.$implicit,n.presetBackground))}),null)}function sd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-swatch-item",[["class","m-1"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handlePresetSelected(e.context.$implicit)&&l),l}),Zp,Kp)),l.wb(1,114688,null,0,Xp,[it.b],{color:[0,"color"],size:[1,"size"]},null)],(function(e,t){e(t,1,0,t.context.$implicit,"medium")}),null)}function rd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,3,"app-form-field",[["label","Color"]],null,null,null,pe,ce)),l.wb(2,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(3,16777216,null,0,1,"input",[["class","input"],["cpPosition","left"],["type","text"]],[[4,"background",null]],[[null,"colorPickerChange"],[null,"click"],[null,"focus"],[null,"input"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,4).handleClick()&&i),"focus"===t&&(i=!1!==l.Jb(e,4).handleFocus()&&i),"input"===t&&(i=!1!==l.Jb(e,4).handleInput(n)&&i),"colorPickerChange"===t&&(i=!1!==a.handleFormColorSelected("color1",n)&&i),i}),null,null)),l.wb(4,671744,null,0,at.b,[l.s,l.k,l.g,l.S,l.l,at.d],{colorPicker:[0,"colorPicker"],cpOutputFormat:[1,"cpOutputFormat"],cpAlphaChannel:[2,"cpAlphaChannel"],cpPosition:[3,"cpPosition"]},{colorPickerChange:"colorPickerChange"})],(function(e,t){var n=t.component;e(t,2,0,"Color"),e(t,4,0,n.getFormBackgroundHex("color1"),"hex","disabled","left")}),(function(e,t){e(t,3,0,t.component.getFormBackgroundHex("color1"))}))}function cd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,24,"div",[],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,3,"app-form-field",[["label","Inner Color"]],null,null,null,pe,ce)),l.wb(2,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(3,16777216,null,0,1,"input",[["class","input"],["cpPosition","left"],["type","text"]],[[4,"background",null]],[[null,"colorPickerChange"],[null,"click"],[null,"focus"],[null,"input"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,4).handleClick()&&i),"focus"===t&&(i=!1!==l.Jb(e,4).handleFocus()&&i),"input"===t&&(i=!1!==l.Jb(e,4).handleInput(n)&&i),"colorPickerChange"===t&&(i=!1!==a.handleFormColorSelected("color1",n)&&i),i}),null,null)),l.wb(4,671744,null,0,at.b,[l.s,l.k,l.g,l.S,l.l,at.d],{colorPicker:[0,"colorPicker"],cpOutputFormat:[1,"cpOutputFormat"],cpAlphaChannel:[2,"cpAlphaChannel"],cpPosition:[3,"cpPosition"]},{colorPickerChange:"colorPickerChange"}),(e()(),l.xb(5,0,null,null,7,"app-form-field",[["label","Inner Radius"]],null,null,null,pe,ce)),l.wb(6,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(7,0,null,0,5,"app-slider",[["formControlName","stop1"],["theme","light"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,ed,Qp)),l.wb(8,114688,null,0,Yp,[],{theme:[0,"theme"],min:[1,"min"],max:[2,"max"]},null),l.Ob(1024,null,de.m,(function(e){return[e]}),[Yp]),l.wb(10,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(12,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(13,0,null,null,3,"app-form-field",[["label","Outer Color"]],null,null,null,pe,ce)),l.wb(14,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(15,16777216,null,0,1,"input",[["class","input"],["cpPosition","left"],["type","text"]],[[4,"background",null]],[[null,"colorPickerChange"],[null,"click"],[null,"focus"],[null,"input"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,16).handleClick()&&i),"focus"===t&&(i=!1!==l.Jb(e,16).handleFocus()&&i),"input"===t&&(i=!1!==l.Jb(e,16).handleInput(n)&&i),"colorPickerChange"===t&&(i=!1!==a.handleFormColorSelected("color2",n)&&i),i}),null,null)),l.wb(16,671744,null,0,at.b,[l.s,l.k,l.g,l.S,l.l,at.d],{colorPicker:[0,"colorPicker"],cpOutputFormat:[1,"cpOutputFormat"],cpAlphaChannel:[2,"cpAlphaChannel"],cpPosition:[3,"cpPosition"]},{colorPickerChange:"colorPickerChange"}),(e()(),l.xb(17,0,null,null,7,"app-form-field",[["label","Outer Radius"]],null,null,null,pe,ce)),l.wb(18,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(19,0,null,0,5,"app-slider",[["formControlName","stop2"],["theme","light"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,ed,Qp)),l.wb(20,114688,null,0,Yp,[],{theme:[0,"theme"],min:[1,"min"],max:[2,"max"]},null),l.Ob(1024,null,de.m,(function(e){return[e]}),[Yp]),l.wb(22,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(24,16384,null,0,de.o,[[4,de.n]],null,null)],(function(e,t){var n=t.component;e(t,2,0,"Inner Color"),e(t,4,0,n.getFormBackgroundHex("color1"),"hex","disabled","left"),e(t,6,0,"Inner Radius"),e(t,8,0,"light",0,100),e(t,10,0,"stop1"),e(t,14,0,"Outer Color"),e(t,16,0,n.getFormBackgroundHex("color2"),"hex","disabled","left"),e(t,18,0,"Outer Radius"),e(t,20,0,"light",0,100),e(t,22,0,"stop2")}),(function(e,t){var n=t.component;e(t,3,0,n.getFormBackgroundHex("color1")),e(t,7,0,l.Jb(t,12).ngClassUntouched,l.Jb(t,12).ngClassTouched,l.Jb(t,12).ngClassPristine,l.Jb(t,12).ngClassDirty,l.Jb(t,12).ngClassValid,l.Jb(t,12).ngClassInvalid,l.Jb(t,12).ngClassPending),e(t,15,0,n.getFormBackgroundHex("color2")),e(t,19,0,l.Jb(t,24).ngClassUntouched,l.Jb(t,24).ngClassTouched,l.Jb(t,24).ngClassPristine,l.Jb(t,24).ngClassDirty,l.Jb(t,24).ngClassValid,l.Jb(t,24).ngClassInvalid,l.Jb(t,24).ngClassPending)}))}function ud(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,24,"div",[],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,3,"app-form-field",[["label","Starting Color"]],null,null,null,pe,ce)),l.wb(2,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(3,16777216,null,0,1,"input",[["class","input"],["cpPosition","left"],["type","text"]],[[4,"background",null]],[[null,"colorPickerChange"],[null,"click"],[null,"focus"],[null,"input"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,4).handleClick()&&i),"focus"===t&&(i=!1!==l.Jb(e,4).handleFocus()&&i),"input"===t&&(i=!1!==l.Jb(e,4).handleInput(n)&&i),"colorPickerChange"===t&&(i=!1!==a.handleFormColorSelected("color1",n)&&i),i}),null,null)),l.wb(4,671744,null,0,at.b,[l.s,l.k,l.g,l.S,l.l,at.d],{colorPicker:[0,"colorPicker"],cpOutputFormat:[1,"cpOutputFormat"],cpAlphaChannel:[2,"cpAlphaChannel"],cpPosition:[3,"cpPosition"]},{colorPickerChange:"colorPickerChange"}),(e()(),l.xb(5,0,null,null,7,"app-form-field",[["label","Starting Color Stop"]],null,null,null,pe,ce)),l.wb(6,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(7,0,null,0,5,"app-slider",[["formControlName","stop1"],["theme","light"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,ed,Qp)),l.wb(8,114688,null,0,Yp,[],{theme:[0,"theme"],min:[1,"min"],max:[2,"max"]},null),l.Ob(1024,null,de.m,(function(e){return[e]}),[Yp]),l.wb(10,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(12,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(13,0,null,null,3,"app-form-field",[["label","Ending Color"]],null,null,null,pe,ce)),l.wb(14,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(15,16777216,null,0,1,"input",[["class","input"],["cpPosition","left"],["type","text"]],[[4,"background",null]],[[null,"colorPickerChange"],[null,"click"],[null,"focus"],[null,"input"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,16).handleClick()&&i),"focus"===t&&(i=!1!==l.Jb(e,16).handleFocus()&&i),"input"===t&&(i=!1!==l.Jb(e,16).handleInput(n)&&i),"colorPickerChange"===t&&(i=!1!==a.handleFormColorSelected("color2",n)&&i),i}),null,null)),l.wb(16,671744,null,0,at.b,[l.s,l.k,l.g,l.S,l.l,at.d],{colorPicker:[0,"colorPicker"],cpOutputFormat:[1,"cpOutputFormat"],cpAlphaChannel:[2,"cpAlphaChannel"],cpPosition:[3,"cpPosition"]},{colorPickerChange:"colorPickerChange"}),(e()(),l.xb(17,0,null,null,7,"app-form-field",[["label","Ending Color Stop"]],null,null,null,pe,ce)),l.wb(18,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(19,0,null,0,5,"app-slider",[["formControlName","stop2"],["theme","light"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,ed,Qp)),l.wb(20,114688,null,0,Yp,[],{theme:[0,"theme"],min:[1,"min"],max:[2,"max"]},null),l.Ob(1024,null,de.m,(function(e){return[e]}),[Yp]),l.wb(22,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(24,16384,null,0,de.o,[[4,de.n]],null,null)],(function(e,t){var n=t.component;e(t,2,0,"Starting Color"),e(t,4,0,n.getFormBackgroundHex("color1"),"hex","disabled","left"),e(t,6,0,"Starting Color Stop"),e(t,8,0,"light",0,100),e(t,10,0,"stop1"),e(t,14,0,"Ending Color"),e(t,16,0,n.getFormBackgroundHex("color2"),"hex","disabled","left"),e(t,18,0,"Ending Color Stop"),e(t,20,0,"light",0,100),e(t,22,0,"stop2")}),(function(e,t){var n=t.component;e(t,3,0,n.getFormBackgroundHex("color1")),e(t,7,0,l.Jb(t,12).ngClassUntouched,l.Jb(t,12).ngClassTouched,l.Jb(t,12).ngClassPristine,l.Jb(t,12).ngClassDirty,l.Jb(t,12).ngClassValid,l.Jb(t,12).ngClassInvalid,l.Jb(t,12).ngClassPending),e(t,15,0,n.getFormBackgroundHex("color2")),e(t,19,0,l.Jb(t,24).ngClassUntouched,l.Jb(t,24).ngClassTouched,l.Jb(t,24).ngClassPristine,l.Jb(t,24).ngClassDirty,l.Jb(t,24).ngClassValid,l.Jb(t,24).ngClassInvalid,l.Jb(t,24).ngClassPending)}))}function pd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,2,"app-alert",[["theme","light"],["type","info"]],null,null,null,id,ld)),l.wb(2,114688,null,0,nd,[],{type:[0,"type"],theme:[1,"theme"]},null),(e()(),l.Rb(-1,0,[" The background of your application will appear behind the 3D model. "]))],(function(e,t){e(t,2,0,"info","light")}),null)}function dd(e){return l.Tb(2,[l.Pb(402653184,1,{presetTab:0}),l.Pb(402653184,2,{customTab:0}),(e()(),l.xb(2,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l.wb(3,81920,null,0,ip.m,[[2,ip.l],l.l,ip.e],null,null),(e()(),l.Rb(-1,null,[" Background Color\n"])),(e()(),l.xb(5,0,null,null,59,"div",[["class","background theme-light"]],null,null,null,null,null)),(e()(),l.xb(6,0,null,null,58,"app-tabs",[],null,[[null,"activeTabChange"]],(function(e,t,n){var l=!0;return"activeTabChange"===t&&(l=!1!==e.component.handleTabChange(n)&&l),l}),Ue,Fe)),l.wb(7,1294336,null,1,Ae,[l.i],null,{activeTabChange:"activeTabChange"}),l.Pb(603979776,3,{_tabs:1}),(e()(),l.xb(9,0,null,0,15,"app-tab",[["label","Presets"]],null,null,null,Be,Ne)),l.wb(10,114688,[[3,4],[1,4],["presetTab",4]],0,ze,[l.i],{label:[0,"label"]},null),(e()(),l.xb(11,0,null,0,13,"div",[["class","background__section mt-3"]],null,null,null,null,null)),(e()(),l.xb(12,0,null,null,4,"app-form-field",[],null,null,null,pe,ce)),l.wb(13,114688,null,0,re,[],null,null),(e()(),l.xb(14,0,null,0,2,"div",[["class","background__swatches"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,od)),l.wb(16,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),(e()(),l.xb(17,0,null,null,2,"button",[["app-button",""],["buttonSize","small"],["buttonTheme","light"],["buttonType","outline"],["class","mb-4"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleResetClick()&&l),l}),Ze,Ke)),l.wb(18,114688,null,0,Xe,[],{buttonSize:[0,"buttonSize"],buttonType:[1,"buttonType"],buttonTheme:[2,"buttonTheme"]},null),(e()(),l.Rb(-1,0,[" Revert to Original "])),(e()(),l.xb(20,0,null,null,4,"app-form-field",[["label","Currently Used"]],null,null,null,pe,ce)),l.wb(21,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(22,0,null,0,2,"div",[["class","background__swatches"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,sd)),l.wb(24,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),(e()(),l.xb(25,0,null,0,39,"app-tab",[["label","Custom"]],null,null,null,Be,Ne)),l.wb(26,114688,[[3,4],[2,4],["customTab",4]],0,ze,[l.i],{label:[0,"label"]},null),(e()(),l.xb(27,0,null,0,37,"form",[["class","background__section mt-4"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==l.Jb(e,30).onSubmit(n)&&i),"reset"===t&&(i=!1!==l.Jb(e,30).onReset()&&i),i}),null,null)),l.wb(28,16384,null,0,se.q,[],{ngSwitch:[0,"ngSwitch"]},null),l.wb(29,16384,null,0,de.C,[],null,null),l.wb(30,540672,null,0,de.h,[[8,null],[8,null]],{form:[0,"form"]},null),l.Ob(2048,null,de.c,null,[de.h]),l.wb(32,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(33,0,null,null,23,"app-form-field",[["label","Type"]],null,null,null,pe,ce)),l.wb(34,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(35,0,null,0,21,"select",[["class","input"],["formControlName","type"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(e,t,n){var i=!0;return"change"===t&&(i=!1!==l.Jb(e,36).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,36).onTouched()&&i),i}),null,null)),l.wb(36,16384,null,0,de.w,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.w]),l.wb(38,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(40,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(41,0,null,null,3,"option",[["value","solid"]],null,null,null,null,null)),l.wb(42,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(43,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(-1,null,["Solid Color"])),(e()(),l.xb(45,0,null,null,3,"option",[["value","radial"]],null,null,null,null,null)),l.wb(46,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(47,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(-1,null,["Radial Gradient"])),(e()(),l.xb(49,0,null,null,3,"option",[["value","linear"]],null,null,null,null,null)),l.wb(50,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(51,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(-1,null,["Linear Gradient"])),(e()(),l.xb(53,0,null,null,3,"option",[["value","transparent"]],null,null,null,null,null)),l.wb(54,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(55,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(-1,null,["Transparent"])),(e()(),l.nb(16777216,null,null,1,null,rd)),l.wb(58,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,cd)),l.wb(60,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,ud)),l.wb(62,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,pd)),l.wb(64,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.xb(65,0,null,null,8,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),l.wb(66,16384,null,0,ip.f,[],null,null),(e()(),l.xb(67,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["class","mr-2"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.applyAll()&&l),l}),Ze,Ke)),l.wb(68,114688,null,0,Xe,[],{buttonTheme:[0,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Apply to All"])),(e()(),l.xb(70,0,null,null,3,"button",[["app-button",""],["buttonTheme","light"],["buttonType","flat"],["cdkFocusInitial",""]],[[1,"aria-label",0],[1,"type",0],[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,71).dialogRef.close(l.Jb(e,71).dialogResult)&&i),i}),Ze,Ke)),l.wb(71,606208,null,0,ip.g,[[2,ip.l],l.l,ip.e],{dialogResult:[0,"dialogResult"]},null),l.wb(72,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Done"]))],(function(e,t){var n=t.component;e(t,3,0),e(t,7,0),e(t,10,0,"Presets"),e(t,13,0),e(t,16,0,n.presetBackgrounds),e(t,18,0,"small","outline","light"),e(t,21,0,"Currently Used"),e(t,24,0,n.distinctBackgrounds),e(t,26,0,"Custom"),e(t,28,0,n.form.get("type").value),e(t,30,0,n.form),e(t,34,0,"Type"),e(t,38,0,"type"),e(t,42,0,"solid"),e(t,43,0,"solid"),e(t,46,0,"radial"),e(t,47,0,"radial"),e(t,50,0,"linear"),e(t,51,0,"linear"),e(t,54,0,"transparent"),e(t,55,0,"transparent"),e(t,58,0,"solid"),e(t,60,0,"radial"),e(t,62,0,"linear"),e(t,64,0,"transparent"),e(t,68,0,"light"),e(t,71,0,!0),e(t,72,0,"flat","light")}),(function(e,t){e(t,2,0,l.Jb(t,3).id),e(t,17,0,l.Jb(t,18).disabled),e(t,27,0,l.Jb(t,32).ngClassUntouched,l.Jb(t,32).ngClassTouched,l.Jb(t,32).ngClassPristine,l.Jb(t,32).ngClassDirty,l.Jb(t,32).ngClassValid,l.Jb(t,32).ngClassInvalid,l.Jb(t,32).ngClassPending),e(t,35,0,l.Jb(t,40).ngClassUntouched,l.Jb(t,40).ngClassTouched,l.Jb(t,40).ngClassPristine,l.Jb(t,40).ngClassDirty,l.Jb(t,40).ngClassValid,l.Jb(t,40).ngClassInvalid,l.Jb(t,40).ngClassPending),e(t,67,0,l.Jb(t,68).disabled),e(t,70,0,l.Jb(t,71).ariaLabel||null,l.Jb(t,71).type,l.Jb(t,72).disabled)}))}function bd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-background-color-dialog",[],null,null,null,dd,ad)),l.wb(1,245760,null,0,lp,[O.i,O.b,de.f,rp.c],null,null)],(function(e,t){e(t,1,0)}),null)}var gd=l.tb("app-background-color-dialog",lp,bd,{},{},[]),hd=l.vb({encapsulation:0,styles:[[".copy[_ngcontent-%COMP%]{min-width:480px;display:-webkit-box;display:flex}.copy__input[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}"]],data:{}});function md(e){return l.Tb(2,[l.Pb(402653184,1,{copyField:0}),(e()(),l.xb(1,0,null,null,2,"div",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l.wb(2,81920,null,0,ip.m,[[2,ip.l],l.l,ip.e],null,null),(e()(),l.Rb(3,null,[" ","\n"])),(e()(),l.xb(4,0,null,null,3,"div",[["class","copy mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l.wb(5,16384,null,0,ip.j,[],null,null),(e()(),l.xb(6,0,[[1,0],["copyField",1]],null,1,"textarea",[["class","copy__input"]],[[8,"value",0],[8,"rows",0]],null,null,null,null)),(e()(),l.Rb(-1,null,["  "])),(e()(),l.xb(8,0,null,null,7,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),l.wb(9,16384,null,0,ip.f,[],null,null),(e()(),l.xb(10,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCancelClick()&&l),l}),Ze,Ke)),l.wb(11,114688,null,0,Xe,[],{buttonTheme:[0,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Cancel"])),(e()(),l.xb(13,0,null,null,2,"button",[["app-button",""],["buttonType","primary"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCopyClick()&&l),l}),Ze,Ke)),l.wb(14,114688,null,0,Xe,[],{buttonType:[0,"buttonType"]},null),(e()(),l.Rb(-1,0,["Copy to Clipboard"]))],(function(e,t){e(t,2,0),e(t,11,0,"light"),e(t,14,0,"primary")}),(function(e,t){var n=t.component;e(t,1,0,l.Jb(t,2).id),e(t,3,0,n.settings.title),e(t,6,0,n.settings.copyText,n.rowCount),e(t,10,0,l.Jb(t,11).disabled),e(t,13,0,l.Jb(t,14).disabled)}))}function xd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-clipboard-dialog",[],null,null,null,md,hd)),l.wb(1,4308992,null,0,du,[ip.l,ip.a,Xc],null,null)],(function(e,t){e(t,1,0)}),null)}var fd=l.tb("app-clipboard-dialog",du,xd,{},{},[]),_d=l.vb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.dialog__actions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.dialog__actions--compact[_ngcontent-%COMP%]{-webkit-box-pack:end;justify-content:flex-end}@media (min-width:480px){[_nghost-%COMP%]{min-width:320px}}"]],data:{}});function yd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"button",[["app-button",""],["buttonTheme","light"]],[[1,"aria-label",0],[1,"type",0],[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,1).dialogRef.close(l.Jb(e,1).dialogResult)&&i),i}),Ze,Ke)),l.wb(1,606208,null,0,ip.g,[[2,ip.l],l.l,ip.e],null,null),l.wb(2,114688,null,0,Xe,[],{buttonTheme:[0,"buttonTheme"]},null),(e()(),l.Rb(3,0,["",""]))],(function(e,t){e(t,1,0),e(t,2,0,"light")}),(function(e,t){var n=t.component;e(t,0,0,l.Jb(t,1).ariaLabel||null,l.Jb(t,1).type,l.Jb(t,2).disabled),e(t,3,0,n.settings.miscText)}))}function Od(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"button",[["app-button",""],["buttonTheme","light"],["class","mr-1"]],[[1,"aria-label",0],[1,"type",0],[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,1).dialogRef.close(l.Jb(e,1).dialogResult)&&i),i}),Ze,Ke)),l.wb(1,606208,null,0,ip.g,[[2,ip.l],l.l,ip.e],{dialogResult:[0,"dialogResult"]},null),l.wb(2,114688,null,0,Xe,[],{buttonTheme:[0,"buttonTheme"]},null),(e()(),l.Rb(3,0,["",""]))],(function(e,t){e(t,1,0,!1),e(t,2,0,"light")}),(function(e,t){var n=t.component;e(t,0,0,l.Jb(t,1).ariaLabel||null,l.Jb(t,1).type,l.Jb(t,2).disabled),e(t,3,0,n.settings.cancelText)}))}function wd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"button",[["app-button",""],["buttonType","primary"],["cdkFocusInitial",""]],[[1,"aria-label",0],[1,"type",0],[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,1).dialogRef.close(l.Jb(e,1).dialogResult)&&i),i}),Ze,Ke)),l.wb(1,606208,null,0,ip.g,[[2,ip.l],l.l,ip.e],{dialogResult:[0,"dialogResult"]},null),l.wb(2,114688,null,0,Xe,[],{buttonType:[0,"buttonType"]},null),(e()(),l.Rb(3,0,["",""]))],(function(e,t){e(t,1,0,!0),e(t,2,0,"primary")}),(function(e,t){var n=t.component;e(t,0,0,l.Jb(t,1).ariaLabel||null,l.Jb(t,1).type,l.Jb(t,2).disabled),e(t,3,0,n.settings.confirmText)}))}function vd(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l.wb(1,81920,null,0,ip.m,[[2,ip.l],l.l,ip.e],null,null),(e()(),l.Rb(2,null,[" ","\n"])),(e()(),l.xb(3,0,null,null,3,"div",[["class","pt-4 pb-6 mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l.wb(4,16384,null,0,ip.j,[],null,null),(e()(),l.xb(5,0,null,null,1,"div",[["class","text-14"]],null,null,null,null,null)),(e()(),l.Rb(6,null,["",""])),(e()(),l.xb(7,0,null,null,8,"div",[["class","dialog__actions pt-2 mat-dialog-actions"],["mat-dialog-actions",""]],[[2,"dialog__actions--compact",null]],null,null,null,null)),l.wb(8,16384,null,0,ip.f,[],null,null),(e()(),l.nb(16777216,null,null,1,null,yd)),l.wb(10,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(11,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Od)),l.wb(13,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,wd)),l.wb(15,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,1,0),e(t,10,0,n.settings.miscText),e(t,13,0,n.settings.cancelEnabled),e(t,15,0,n.settings.confirmEnabled)}),(function(e,t){var n=t.component;e(t,0,0,l.Jb(t,1).id),e(t,2,0,n.settings.titleText),e(t,6,0,n.settings.bodyText),e(t,7,0,!n.settings.miscText)}))}function Cd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-confirm-dialog",[],null,null,null,vd,_d)),l.wb(1,114688,null,0,Qc,[ip.l,ip.a],null,null)],(function(e,t){e(t,1,0)}),null)}var jd=l.tb("app-confirm-dialog",Qc,Cd,{},{},[]),kd=l.vb({encapsulation:0,styles:[[".welcome[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}.welcome__close[_ngcontent-%COMP%]{cursor:pointer;align-self:flex-end}.welcome__button[_ngcontent-%COMP%]{margin:auto 8px}"]],data:{}});function Sd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"img",[["class","m-4"]],[[8,"src",4]],null,null,null,null))],null,(function(e,t){e(t,0,0,t.component.organization.group_logos.default)}))}function Pd(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,14,"div",[["class","welcome"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-icon",[["class","welcome__close"],["icon","times"],["size","lg"],["title","Close"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCancelClick()&&l),l}),he,ge)),l.wb(2,114688,null,0,be,[],{icon:[0,"icon"],size:[1,"size"]},null),(e()(),l.xb(3,0,null,null,1,"div",[["class","m-4 text-16"]],null,null,null,null,null)),(e()(),l.Rb(4,null,[" Welcome to the "," Group Network! "])),(e()(),l.nb(16777216,null,null,1,null,Sd)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(7,0,null,null,7,"div",[["class","m-4 mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),l.wb(8,16384,null,0,ip.f,[],null,null),(e()(),l.xb(9,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["buttonType","outline"],["class","welcome__button"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCancelClick()&&l),l}),Ze,Ke)),l.wb(10,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"]},null),(e()(),l.Rb(-1,0,[" No, thank you "])),(e()(),l.xb(12,0,null,null,2,"button",[["app-button",""],["buttonType","primary"],["cdkFocusInitial",""],["class","welcome__button"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleJoinClick()&&l),l}),Ze,Ke)),l.wb(13,114688,null,0,Xe,[],{buttonType:[0,"buttonType"]},null),(e()(),l.Rb(-1,0,[" Join Group "]))],(function(e,t){var n=t.component;e(t,2,0,"times","lg"),e(t,6,0,n.organization.group_logos.default),e(t,10,0,"outline","light"),e(t,13,0,"primary")}),(function(e,t){e(t,4,0,t.component.organization.name),e(t,9,0,l.Jb(t,10).disabled),e(t,12,0,l.Jb(t,13).disabled)}))}function Md(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-domain-join-dialog",[],null,null,null,Pd,kd)),l.wb(1,245760,null,0,xu,[O.i,ip.l,ip.a,O.b,rp.c],null,null)],(function(e,t){e(t,1,0)}),null)}var Td=l.tb("app-domain-join-dialog",xu,Md,{},{},[]),Id=l.vb({encapsulation:0,styles:[[""]],data:{}});function Jd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["class","text-14"]],null,null,null,null,null)),(e()(),l.Rb(1,null,[" You must be within the "," network to access this group account. "])),(e()(),l.xb(2,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(e()(),l.Rb(-1,null,["Contact us"])),(e()(),l.Rb(-1,null,[" if you have any questions regarding your group account. "]))],null,(function(e,t){var n=t.component;e(t,1,0,n.organizationName),e(t,2,0,"mailto:"+n.supportEmail)}))}function zd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["class","text-14"]],null,null,null,null,null)),(e()(),l.Rb(1,null,[" You must be within the "," network to access this group account. "])),(e()(),l.xb(2,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(e()(),l.Rb(-1,null,["Contact us"])),(e()(),l.Rb(-1,null,[" if you have any questions regarding your group account. "]))],null,(function(e,t){var n=t.component;e(t,1,0,n.organizationName),e(t,2,0,"mailto:"+n.supportEmail)}))}function Ld(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,4,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l.wb(1,81920,null,0,ip.m,[[2,ip.l],l.l,ip.e],null,null),(e()(),l.Rb(-1,null,[" Oh no, you have no access to the "])),(e()(),l.xb(3,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),l.Rb(4,null,[""," group!\n"])),(e()(),l.xb(5,0,null,null,5,"div",[["class","pt-4 pb-6 mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l.wb(6,16384,null,0,ip.j,[],null,null),(e()(),l.nb(16777216,null,null,1,null,Jd)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,zd)),l.wb(10,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(11,0,null,null,8,"div",[["class","pt-2 mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),l.wb(12,16384,null,0,ip.f,[],null,null),(e()(),l.xb(13,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["buttonType","outline"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleDontShowClick()&&l),l}),Ze,Ke)),l.wb(14,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Don't show me this again"])),(e()(),l.xb(16,0,null,null,3,"button",[["app-button",""],["buttonType","primary"],["cdkFocusInitial",""]],[[1,"aria-label",0],[1,"type",0],[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,17).dialogRef.close(l.Jb(e,17).dialogResult)&&i),i}),Ze,Ke)),l.wb(17,606208,null,0,ip.g,[[2,ip.l],l.l,ip.e],{dialogResult:[0,"dialogResult"]},null),l.wb(18,114688,null,0,Xe,[],{buttonType:[0,"buttonType"]},null),(e()(),l.Rb(-1,0,["Close"]))],(function(e,t){var n=t.component;e(t,1,0),e(t,8,0,n.ip),e(t,10,0,n.email),e(t,14,0,"outline","light"),e(t,17,0,!0),e(t,18,0,"primary")}),(function(e,t){var n=t.component;e(t,0,0,l.Jb(t,1).id),e(t,4,0,n.organizationName),e(t,13,0,l.Jb(t,14).disabled),e(t,16,0,l.Jb(t,17).ariaLabel||null,l.Jb(t,17).type,l.Jb(t,18).disabled)}))}function Ed(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-group-restriction-dialog",[],null,null,null,Ld,Id)),l.wb(1,114688,null,0,pu,[ip.l,ip.a,el],null,null)],(function(e,t){e(t,1,0)}),null)}var Ad=l.tb("app-group-restriction-dialog",pu,Ed,{},{},[]),Fd=l.vb({encapsulation:0,styles:[[".modal[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.modal__close[_ngcontent-%COMP%]{margin-bottom:4px;align-self:flex-end;cursor:pointer}.modal__contents[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;height:100vh}.modal__frame[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 1 auto;display:-webkit-box;display:flex}"]],data:{}});function Rd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"iframe",[["class","modal__frame"]],[[8,"src",5]],null,null,null,null))],null,(function(e,t){e(t,0,0,t.component.src)}))}function Dd(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,5,"div",[["class","modal"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-icon",[["class","modal__close"],["icon","times"],["size","lg"],["title","close"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.closeDialog()&&l),l}),he,ge)),l.wb(2,114688,null,0,be,[],{icon:[0,"icon"],size:[1,"size"]},null),(e()(),l.xb(3,0,null,null,2,"div",[["class","modal__contents"]],[[4,"height",null]],null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Rd)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,"times","lg"),e(t,5,0,n.src)}),(function(e,t){e(t,3,0,t.component.height+"px")}))}function Ud(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-legacy-dialog",[],null,null,null,Dd,Fd)),l.wb(1,114688,null,0,Yc,[ip.l,ip.a,it.b],null,null)],(function(e,t){e(t,1,0)}),null)}var Nd=l.tb("app-legacy-dialog",Yc,Ud,{},{},[]),Hd=l.vb({encapsulation:0,styles:[[""]],data:{}});function Bd(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l.wb(1,81920,null,0,ip.m,[[2,ip.l],l.l,ip.e],null,null),(e()(),l.Rb(-1,null,[" New Bookmark Limit Reached\n"])),(e()(),l.xb(3,0,null,null,5,"div",[["class","pt-1 pb-6 mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l.wb(4,16384,null,0,ip.j,[],null,null),(e()(),l.xb(5,0,null,null,1,"div",[["class","text-14 pb-3"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["You've reached your limit of 5 3D models in your dashboard. You can make changes to this model, but you will not be able to save as a new model."])),(e()(),l.xb(7,0,null,null,1,"div",[["class","text-14"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Upgrade to a Premium Plan to save unlimited 3D models."])),(e()(),l.xb(9,0,null,null,9,"div",[["class","pt-2 mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),l.wb(10,16384,null,0,ip.f,[],null,null),(e()(),l.xb(11,0,null,null,3,"button",[["app-button",""],["buttonTheme","light"],["cdkFocusInitial",""],["class","mr-2"]],[[1,"aria-label",0],[1,"type",0],[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,12).dialogRef.close(l.Jb(e,12).dialogResult)&&i),i}),Ze,Ke)),l.wb(12,606208,null,0,ip.g,[[2,ip.l],l.l,ip.e],{dialogResult:[0,"dialogResult"]},null),l.wb(13,114688,null,0,Xe,[],{buttonTheme:[0,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["OK"])),(e()(),l.xb(15,0,null,null,3,"button",[["app-button",""],["buttonType","primary"]],[[1,"aria-label",0],[1,"type",0],[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,16).dialogRef.close(l.Jb(e,16).dialogResult)&&i),i}),Ze,Ke)),l.wb(16,606208,null,0,ip.g,[[2,ip.l],l.l,ip.e],{dialogResult:[0,"dialogResult"]},null),l.wb(17,114688,null,0,Xe,[],{buttonType:[0,"buttonType"]},null),(e()(),l.Rb(-1,0,["Go Premium"]))],(function(e,t){e(t,1,0),e(t,12,0,!1),e(t,13,0,"light"),e(t,16,0,!0),e(t,17,0,"primary")}),(function(e,t){e(t,0,0,l.Jb(t,1).id),e(t,11,0,l.Jb(t,12).ariaLabel||null,l.Jb(t,12).type,l.Jb(t,13).disabled),e(t,15,0,l.Jb(t,16).ariaLabel||null,l.Jb(t,16).type,l.Jb(t,17).disabled)}))}function $d(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-limit-dialog",[],null,null,null,Bd,Hd)),l.wb(1,114688,null,0,Kc,[],null,null)],(function(e,t){e(t,1,0)}),null)}var Vd=l.tb("app-limit-dialog",Kc,$d,{},{},[]),Wd=l.vb({encapsulation:0,styles:[[".survey[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:end;align-items:flex-end}.survey__close[_ngcontent-%COMP%]{cursor:pointer}.survey__frame[_ngcontent-%COMP%]{display:block;width:600px;height:520px}@media (max-width:760px){.survey__frame[_ngcontent-%COMP%]{display:block;width:100%}}"]],data:{}});function Gd(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,3,"div",[["class","survey"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-icon",[["class","survey__close mb-2"],["icon","times"],["size","lg"],["title","close"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.closeDialog()&&l),l}),he,ge)),l.wb(2,114688,null,0,be,[],{icon:[0,"icon"],size:[1,"size"]},null),(e()(),l.xb(3,0,null,null,0,"iframe",[["class","survey__frame"]],[[8,"src",5]],null,null,null,null))],(function(e,t){e(t,2,0,"times","lg")}),(function(e,t){e(t,3,0,t.component.src)}))}function qd(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-nps-dialog",[],null,null,null,Gd,Wd)),l.wb(1,114688,null,0,Wu,[O.i,ip.l,ip.a,it.b],null,null)],(function(e,t){e(t,1,0)}),null)}var Xd=l.tb("app-nps-dialog",Wu,qd,{},{},[]),Kd=n("HsOI"),Zd=n("xgIS");class Yd{constructor(e){this.ref=e,this.ngUnsubscribe=new K.a,this.display="block",this.mode="count"}get remainingCount(){return this.max-this.count}ngOnInit(){this.count=0,this.max=this.field.maxLength||0}ngAfterViewInit(){this.getValueChanges().pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.updateCount()})}ngAfterContentChecked(){this.updateCount()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}updateCount(){const e=this.getValue().length;this.count!==e&&(this.count=e,this.ref.markForCheck())}getValueChanges(){return this.field.getValueChanges?this.field.getValueChanges():Object(Zd.a)(this.field,"input")}getValue(){return void 0!==this.field.textValue?this.field.textValue:this.field.value}}var Qd=l.vb({encapsulation:0,styles:[[".theme-light[_nghost-%COMP%]   .counter__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .counter__label[_ngcontent-%COMP%]{color:#1c2a3f}.theme-dark[_nghost-%COMP%]   .counter__label[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .counter__label[_ngcontent-%COMP%]{color:#96a8c0}.counter[_ngcontent-%COMP%]{display:block;width:100%;float:right;text-align:right}.counter--inline[_ngcontent-%COMP%]{display:inline-block;width:auto}"]],data:{}});function eb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"span",[["class","counter__label"]],null,null,null,null,null)),(e()(),l.Rb(1,null,[""," "," remaining"]))],null,(function(e,t){var n=t.component;e(t,1,0,n.remainingCount,1===n.remainingCount?"character":"characters")}))}function tb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"span",[["class","counter__label"]],null,null,null,null,null)),(e()(),l.Rb(1,null,["","/",""]))],null,(function(e,t){var n=t.component;e(t,1,0,n.count,n.max)}))}function nb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,"div",[["class","counter text-10 pt-1 pb-1"]],[[2,"counter--inline",null]],null,null,null,null)),l.wb(1,16384,null,0,se.q,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l.nb(16777216,null,null,1,null,eb)),l.wb(3,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,tb)),l.wb(5,16384,null,0,se.s,[l.S,l.P,se.q],null,null)],(function(e,t){e(t,1,0,t.component.mode),e(t,3,0,"remaining")}),(function(e,t){e(t,0,0,"inline"===t.component.display)}))}function lb(e){return l.Tb(0,[(e()(),l.nb(16777216,null,null,1,null,nb)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,t.component.max)}),null)}var ib=l.vb({encapsulation:0,styles:[[".save[_ngcontent-%COMP%]{min-width:380px}.save__message[_ngcontent-%COMP%]{color:#6a82a4;margin:12px auto;font-size:12px}.save__radio-group[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.save__permission[_ngcontent-%COMP%]{display:block;margin:4px auto}"]],data:{}});function ab(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"p",[["class","save__message"]],null,null,null,null,null)),(e()(),l.Rb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.settings.message)}))}function ob(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),l.wb(1,16384,null,0,Kd.a,[],null,null),(e()(),l.Rb(-1,null,["Please enter a valid title."]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).id)}))}function sb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,17,"app-form-field",[["label","Permissions"],["theme","light"]],null,null,null,pe,ce)),l.wb(1,114688,null,0,re,[],{label:[0,"label"],theme:[1,"theme"]},null),(e()(),l.xb(2,0,null,0,15,"mat-radio-group",[["class","save__radio-group text-12 mt-2 mat-radio-group"],["formControlName","groupAccess"],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(3,1064960,null,1,Pe.c,[l.i],null,null),l.Pb(603979776,1,{_radios:1}),l.Ob(1024,null,de.m,(function(e){return[e]}),[Pe.c]),l.wb(6,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(8,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(9,0,null,null,2,"mat-radio-button",[["class","mb-2 mat-radio-button"],["value",""]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,10)._inputElement.nativeElement.focus()&&i),i}),Me.b,Me.a)),l.wb(10,4440064,[[1,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),(e()(),l.Rb(-1,0,["Private"])),(e()(),l.xb(12,0,null,null,2,"mat-radio-button",[["class","mb-2 mat-radio-button"],["value","view"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,13)._inputElement.nativeElement.focus()&&i),i}),Me.b,Me.a)),l.wb(13,4440064,[[1,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),(e()(),l.Rb(-1,0,["Team - View Only"])),(e()(),l.xb(15,0,null,null,2,"mat-radio-button",[["class","mat-radio-button"],["value","edit"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==l.Jb(e,16)._inputElement.nativeElement.focus()&&i),i}),Me.b,Me.a)),l.wb(16,4440064,[[1,4]],0,Pe.b,[[2,Pe.c],l.l,l.i,_e.e,Te.c,[2,ye.a],[2,Pe.a]],{value:[0,"value"]},null),(e()(),l.Rb(-1,0,["Team - View & Edit"]))],(function(e,t){e(t,1,0,"Permissions","light"),e(t,6,0,"groupAccess"),e(t,10,0,""),e(t,13,0,"view"),e(t,16,0,"edit")}),(function(e,t){e(t,2,0,l.Jb(t,8).ngClassUntouched,l.Jb(t,8).ngClassTouched,l.Jb(t,8).ngClassPristine,l.Jb(t,8).ngClassDirty,l.Jb(t,8).ngClassValid,l.Jb(t,8).ngClassInvalid,l.Jb(t,8).ngClassPending),e(t,9,1,[l.Jb(t,10).checked,l.Jb(t,10).disabled,"NoopAnimations"===l.Jb(t,10)._animationMode,"primary"===l.Jb(t,10).color,"accent"===l.Jb(t,10).color,"warn"===l.Jb(t,10).color,-1,l.Jb(t,10).id,null,null,null]),e(t,12,1,[l.Jb(t,13).checked,l.Jb(t,13).disabled,"NoopAnimations"===l.Jb(t,13)._animationMode,"primary"===l.Jb(t,13).color,"accent"===l.Jb(t,13).color,"warn"===l.Jb(t,13).color,-1,l.Jb(t,13).id,null,null,null]),e(t,15,1,[l.Jb(t,16).checked,l.Jb(t,16).disabled,"NoopAnimations"===l.Jb(t,16)._animationMode,"primary"===l.Jb(t,16).color,"accent"===l.Jb(t,16).color,"warn"===l.Jb(t,16).color,-1,l.Jb(t,16).id,null,null,null])}))}function rb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"option",[],null,null,null,null,null)),l.wb(1,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(2,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(3,null,[" "," "]))],(function(e,t){e(t,1,0,t.context.$implicit.collection_id),e(t,2,0,t.context.$implicit.collection_id)}),(function(e,t){e(t,3,0,t.context.$implicit.collection_name)}))}function cb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,14,"app-form-field",[["label","Collection (Optional)"],["theme","light"]],null,null,null,pe,ce)),l.wb(1,114688,null,0,re,[],{label:[0,"label"],theme:[1,"theme"]},null),(e()(),l.xb(2,0,null,0,12,"select",[["class","input"],["formControlName","collection"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(e,t,n){var i=!0;return"change"===t&&(i=!1!==l.Jb(e,3).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,3).onTouched()&&i),i}),null,null)),l.wb(3,16384,null,0,de.w,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.w]),l.wb(5,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(7,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(8,0,null,null,3,"option",[],null,null,null,null,null)),l.wb(9,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(10,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(-1,null,["--"])),(e()(),l.nb(16777216,null,null,2,null,rb)),l.wb(13,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,1,0,"Collection (Optional)","light"),e(t,5,0,"collection"),e(t,9,0,null),e(t,10,0,null),e(t,13,0,l.Sb(t,13,0,l.Jb(t,14).transform(n.collections$)))}),(function(e,t){e(t,2,0,l.Jb(t,7).ngClassUntouched,l.Jb(t,7).ngClassTouched,l.Jb(t,7).ngClassPristine,l.Jb(t,7).ngClassDirty,l.Jb(t,7).ngClassValid,l.Jb(t,7).ngClassInvalid,l.Jb(t,7).ngClassPending)}))}function ub(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,sb)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,2,null,cb)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n,i=t.component;e(t,2,0,i.isNew||i.isOwner),e(t,4,0,(null==(n=l.Sb(t,4,0,l.Jb(t,5).transform(i.collections$)))?null:n.length)>0)}),null)}function pb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,10,"div",[],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,9,"app-form-field",[["label","Share"],["theme","light"]],null,null,null,pe,ce)),l.wb(2,114688,null,0,re,[],{label:[0,"label"],theme:[1,"theme"]},null),(e()(),l.xb(3,0,null,0,7,"mat-checkbox",[["class","save__permission mat-checkbox"],["formControlName","publicAccess"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(4,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(6,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(8,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(9,0,null,0,1,"span",[["class","text-12"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["With the BioDigital Community"]))],(function(e,t){e(t,2,0,"Share","light"),e(t,6,0,"publicAccess")}),(function(e,t){e(t,3,1,[l.Jb(t,4).id,null,l.Jb(t,4).indeterminate,l.Jb(t,4).checked,l.Jb(t,4).disabled,"before"==l.Jb(t,4).labelPosition,"NoopAnimations"===l.Jb(t,4)._animationMode,l.Jb(t,8).ngClassUntouched,l.Jb(t,8).ngClassTouched,l.Jb(t,8).ngClassPristine,l.Jb(t,8).ngClassDirty,l.Jb(t,8).ngClassValid,l.Jb(t,8).ngClassInvalid,l.Jb(t,8).ngClassPending])}))}function db(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-spinner",[["class","ml-2"],["render","inline"],["size","medium"]],null,null,null,Up,Rp)),l.wb(1,114688,null,0,Fp,[],{size:[0,"size"],render:[1,"render"]},null)],(function(e,t){e(t,1,0,"medium","inline")}),null)}function bb(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,48,"div",[["class","save"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,47,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var i=!0,a=e.component;return"submit"===t&&(i=!1!==l.Jb(e,3).onSubmit(n)&&i),"reset"===t&&(i=!1!==l.Jb(e,3).onReset()&&i),"submit"===t&&(i=!1!==a.handleSubmit()&&i),i}),null,null)),l.wb(2,16384,null,0,de.C,[],null,null),l.wb(3,540672,null,0,de.h,[[8,null],[8,null]],{form:[0,"form"]},null),l.Ob(2048,null,de.c,null,[de.h]),l.wb(5,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(6,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l.wb(7,81920,null,0,ip.m,[[2,ip.l],l.l,ip.e],null,null),(e()(),l.Rb(8,null,[" "," "])),(e()(),l.nb(16777216,null,null,1,null,ab)),l.wb(10,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(11,0,null,null,23,"div",[["class","mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l.wb(12,16384,null,0,ip.j,[],null,null),(e()(),l.xb(13,0,null,null,21,"div",[["class","theme-light"]],null,null,null,null,null)),(e()(),l.xb(14,0,null,null,14,"app-form-field",[["label","Title"],["theme","light"]],null,null,null,pe,ce)),l.wb(15,114688,null,0,re,[],{label:[0,"label"],theme:[1,"theme"]},null),(e()(),l.xb(16,0,[["title",1]],0,8,"input",[["autocomplete","off"],["class","input"],["formControlName","title"],["maxlength","60"],["name","title"],["required",""],["type","text"]],[[1,"required",0],[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,17)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,17).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,17)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,17)._compositionEnd(n.target.value)&&i),i}),null,null)),l.wb(17,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.wb(18,16384,null,0,de.v,[],{required:[0,"required"]},null),l.wb(19,540672,null,0,de.k,[],{maxlength:[0,"maxlength"]},null),l.Ob(1024,null,de.l,(function(e,t){return[e,t]}),[de.v,de.k]),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.d]),l.wb(22,671744,null,0,de.g,[[3,de.c],[6,de.l],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(24,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(25,0,null,0,1,"app-character-counter",[],null,null,null,lb,Qd)),l.wb(26,6537216,null,0,Yd,[l.i],{field:[0,"field"]},null),(e()(),l.nb(16777216,null,0,1,null,ob)),l.wb(28,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,2,null,ub)),l.wb(30,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,pb)),l.wb(33,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(35,0,null,null,13,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),l.wb(36,16384,null,0,ip.f,[],null,null),(e()(),l.xb(37,0,null,null,3,"button",[["app-button",""],["buttonTheme","light"],["class","mr-2"],["type","button"]],[[1,"aria-label",0],[1,"type",0],[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,38).dialogRef.close(l.Jb(e,38).dialogResult)&&i),i}),Ze,Ke)),l.wb(38,606208,null,0,ip.g,[[2,ip.l],l.l,ip.e],{type:[0,"type"]},null),l.wb(39,114688,null,0,Xe,[],{buttonTheme:[0,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Cancel"])),(e()(),l.xb(41,0,null,null,7,"button",[["app-button",""],["buttonType","primary"],["cdkFocusInitial",""]],[[8,"disabled",0]],null,null,Ze,Ke)),l.wb(42,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],disabled:[1,"disabled"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.Rb(44,0,[" "," "])),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,0,2,null,db)),l.wb(47,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,3,0,n.form),e(t,7,0),e(t,10,0,n.settings.message),e(t,15,0,"Title","light"),e(t,18,0,""),e(t,19,0,"60"),e(t,22,0,"title"),e(t,26,0,l.Jb(t,16)),e(t,28,0,!n.form.get("title").valid),e(t,30,0,l.Sb(t,30,0,l.Jb(t,31).transform(n.organization$))),e(t,33,0,!l.Sb(t,33,0,l.Jb(t,34).transform(n.organization$))),e(t,38,0,"button"),e(t,39,0,"light"),e(t,42,0,"primary",l.Sb(t,42,1,l.Jb(t,43).transform(n.saving$))),e(t,47,0,l.Sb(t,47,0,l.Jb(t,48).transform(n.saving$)))}),(function(e,t){var n=t.component;e(t,1,0,l.Jb(t,5).ngClassUntouched,l.Jb(t,5).ngClassTouched,l.Jb(t,5).ngClassPristine,l.Jb(t,5).ngClassDirty,l.Jb(t,5).ngClassValid,l.Jb(t,5).ngClassInvalid,l.Jb(t,5).ngClassPending),e(t,6,0,l.Jb(t,7).id),e(t,8,0,n.dialogTitle),e(t,16,0,l.Jb(t,18).required?"":null,l.Jb(t,19).maxlength?l.Jb(t,19).maxlength:null,l.Jb(t,24).ngClassUntouched,l.Jb(t,24).ngClassTouched,l.Jb(t,24).ngClassPristine,l.Jb(t,24).ngClassDirty,l.Jb(t,24).ngClassValid,l.Jb(t,24).ngClassInvalid,l.Jb(t,24).ngClassPending),e(t,37,0,l.Jb(t,38).ariaLabel||null,l.Jb(t,38).type,l.Jb(t,39).disabled),e(t,41,0,l.Jb(t,42).disabled),e(t,44,0,l.Sb(t,44,0,l.Jb(t,45).transform(n.saving$))?"Saving":"Save")}))}function gb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-save-bookmark-dialog",[],null,null,null,bb,ib)),l.wb(1,245760,null,0,uu,[O.i,de.f,ip.l,ip.a,rp.c,O.b,Rc],null,null)],(function(e,t){e(t,1,0)}),null)}var hb=l.tb("app-save-bookmark-dialog",uu,gb,{},{},[]),mb=n("TtEo"),xb=n("02hT"),fb=l.vb({encapsulation:0,styles:[[""]],data:{}});function _b(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["class","text-danger pt-2"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-icon",[["icon","exclamation-circle"]],null,null,null,he,ge)),l.wb(2,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(3,0,null,null,1,"span",[["class","pl-2 text-12"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["The scene graph will be trimmed using the clipping planes of the currently active chapter. Objects shared with other chapters will be lost. A page reload is recommended."]))],(function(e,t){e(t,2,0,"exclamation-circle")}),null)}function yb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"option",[],null,null,null,null,null)),l.wb(1,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(2,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(3,null,["",""]))],(function(e,t){e(t,1,0,t.context.$implicit),e(t,2,0,t.context.$implicit)}),(function(e,t){e(t,3,0,t.context.$implicit)}))}function Ob(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"option",[],null,null,null,null,null)),l.wb(1,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(2,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(3,null,["",""]))],(function(e,t){e(t,1,0,t.context.$implicit),e(t,2,0,t.context.$implicit)}),(function(e,t){e(t,3,0,t.context.$implicit)}))}function wb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,10,"app-form-field",[["label","Secondary Category"]],null,null,null,pe,ce)),l.wb(1,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(2,0,null,0,8,"select",[["class","input"],["data-test","secondaryCategory"],["formControlName","secondaryCategory"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(e,t,n){var i=!0;return"change"===t&&(i=!1!==l.Jb(e,3).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,3).onTouched()&&i),i}),null,null)),l.wb(3,16384,null,0,de.w,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.w]),l.wb(5,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(7,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.nb(16777216,null,null,2,null,Ob)),l.wb(9,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,1,0,"Secondary Category"),e(t,5,0,"secondaryCategory"),e(t,9,0,l.Sb(t,9,0,l.Jb(t,10).transform(n.secondaryCategoryOptions$)))}),(function(e,t){e(t,2,0,l.Jb(t,7).ngClassUntouched,l.Jb(t,7).ngClassTouched,l.Jb(t,7).ngClassPristine,l.Jb(t,7).ngClassDirty,l.Jb(t,7).ngClassValid,l.Jb(t,7).ngClassInvalid,l.Jb(t,7).ngClassPending)}))}function vb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"div",[["class","text-info"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-icon",[["icon","exclamation-triangle"]],null,null,null,he,ge)),l.wb(2,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(3,0,null,null,1,"span",[["class","pl-2"]],null,null,null,null,null)),(e()(),l.Rb(4,null,["",""])),(e()(),l.xb(5,0,null,null,1,"span",[["class","pl-2 text-bold"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["(File exists)"]))],(function(e,t){e(t,2,0,"exclamation-triangle")}),(function(e,t){e(t,4,0,t.component.modulePath)}))}function Cb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"div",[["class","text-danger"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-icon",[["icon","exclamation-circle"]],null,null,null,he,ge)),l.wb(2,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(3,0,null,null,1,"span",[["class","pl-2"]],null,null,null,null,null)),(e()(),l.Rb(4,null,["",""])),(e()(),l.xb(5,0,null,null,1,"span",[["class","pl-2 text-bold"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["(File exists and cannot be overwritten)"]))],(function(e,t){e(t,2,0,"exclamation-circle")}),(function(e,t){e(t,4,0,t.component.modulePath)}))}function jb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["class","text-success"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-icon",[["icon","check-circle"]],null,null,null,he,ge)),l.wb(2,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(3,0,null,null,1,"span",[["class","pl-2"]],null,null,null,null,null)),(e()(),l.Rb(4,null,["",""]))],(function(e,t){e(t,2,0,"check-circle")}),(function(e,t){e(t,4,0,t.component.modulePath)}))}function kb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"div",[["class","pt-2 text-12"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,vb)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Cb)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,jb)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.moduleExists&&!n.formDuplicateStates.value),e(t,4,0,n.moduleExists&&n.formDuplicateStates.value),e(t,6,0,!n.moduleExists)}),null)}function Sb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,9,"app-form-field",[["label","Production Save"]],null,null,null,pe,ce)),l.wb(1,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(2,0,null,0,7,"mat-checkbox",[["class","mat-checkbox"],["formControlName","confirmProduction"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(3,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(5,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(7,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(8,0,null,0,1,"span",[["class","text-12"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["I intend to save to Production"]))],(function(e,t){e(t,1,0,"Production Save"),e(t,5,0,"confirmProduction")}),(function(e,t){e(t,2,1,[l.Jb(t,3).id,null,l.Jb(t,3).indeterminate,l.Jb(t,3).checked,l.Jb(t,3).disabled,"before"==l.Jb(t,3).labelPosition,"NoopAnimations"===l.Jb(t,3)._animationMode,l.Jb(t,7).ngClassUntouched,l.Jb(t,7).ngClassTouched,l.Jb(t,7).ngClassPristine,l.Jb(t,7).ngClassDirty,l.Jb(t,7).ngClassValid,l.Jb(t,7).ngClassInvalid,l.Jb(t,7).ngClassPending])}))}function Pb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,26,"div",[["class","mb-2"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,25,"div",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(2,212992,null,0,de.i,[[3,de.c],[8,null],[8,null]],{name:[0,"name"]},null),l.Ob(2048,null,de.c,null,[de.i]),l.wb(4,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(5,0,null,null,21,"div",[["class","flex"]],null,null,null,null,null)),(e()(),l.xb(6,0,null,null,7,"div",[["class","flex-shrink pr-2 pt-2"]],null,null,null,null,null)),(e()(),l.xb(7,16777216,null,null,6,"mat-checkbox",[["class","mat-checkbox"],["data-test","includeState"],["formControlName","include"],["matTooltip","Include State"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0;return"longpress"===t&&(i=!1!==l.Jb(e,9).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,9)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,9)._handleTouchend()&&i),i}),xe.b,xe.a)),l.wb(8,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.wb(9,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(11,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(13,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(14,0,null,null,12,"div",[["class","flex-grow"]],null,null,null,null,null)),(e()(),l.xb(15,0,null,null,5,"input",[["class","input"],["data-test","oldState"],["formControlName","oldState"],["type","hidden"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,16)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,16).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,16)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,16)._compositionEnd(n.target.value)&&i),i}),null,null)),l.wb(16,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.d]),l.wb(18,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(20,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(21,0,null,null,5,"input",[["class","input"],["data-test","newState"],["formControlName","newState"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,22)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,22).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,22)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,22)._compositionEnd(n.target.value)&&i),i}),null,null)),l.wb(22,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.d]),l.wb(24,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(26,16384,null,0,de.o,[[4,de.n]],null,null)],(function(e,t){e(t,2,0,t.context.index),e(t,9,0,"Include State"),e(t,11,0,"include"),e(t,18,0,"oldState"),e(t,24,0,"newState")}),(function(e,t){e(t,1,0,l.Jb(t,4).ngClassUntouched,l.Jb(t,4).ngClassTouched,l.Jb(t,4).ngClassPristine,l.Jb(t,4).ngClassDirty,l.Jb(t,4).ngClassValid,l.Jb(t,4).ngClassInvalid,l.Jb(t,4).ngClassPending),e(t,7,1,[l.Jb(t,8).id,null,l.Jb(t,8).indeterminate,l.Jb(t,8).checked,l.Jb(t,8).disabled,"before"==l.Jb(t,8).labelPosition,"NoopAnimations"===l.Jb(t,8)._animationMode,l.Jb(t,13).ngClassUntouched,l.Jb(t,13).ngClassTouched,l.Jb(t,13).ngClassPristine,l.Jb(t,13).ngClassDirty,l.Jb(t,13).ngClassValid,l.Jb(t,13).ngClassInvalid,l.Jb(t,13).ngClassPending]),e(t,15,0,l.Jb(t,20).ngClassUntouched,l.Jb(t,20).ngClassTouched,l.Jb(t,20).ngClassPristine,l.Jb(t,20).ngClassDirty,l.Jb(t,20).ngClassValid,l.Jb(t,20).ngClassInvalid,l.Jb(t,20).ngClassPending),e(t,21,0,l.Jb(t,26).ngClassUntouched,l.Jb(t,26).ngClassTouched,l.Jb(t,26).ngClassPristine,l.Jb(t,26).ngClassDirty,l.Jb(t,26).ngClassValid,l.Jb(t,26).ngClassInvalid,l.Jb(t,26).ngClassPending)}))}function Mb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,18,"div",[],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"mat-divider",[["class","mv-4 mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(2,49152,null,0,xb.a,[],null,null),(e()(),l.xb(3,0,null,null,15,"app-form-field",[["label","Prefix"]],null,null,null,pe,ce)),l.wb(4,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(5,0,null,0,7,"div",[["class","flex"]],null,null,null,null,null)),(e()(),l.xb(6,0,[["prefix",1]],null,0,"input",[["class","input flex-25 w-25"],["pattern","[^ ]*"],["type","text"]],null,null,null,null,null)),(e()(),l.xb(7,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["buttonType","outline"],["class","ml-2"],["data-test","prefixReplace"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.handleReplaceClick(l.Jb(e,6).value)&&i),i}),Ze,Ke)),l.wb(8,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Replace"])),(e()(),l.xb(10,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["buttonType","outline"],["class","ml-2"],["data-test","prefixPrepend"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.handlePrependClick(l.Jb(e,6).value)&&i),i}),Ze,Ke)),l.wb(11,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Prepend"])),(e()(),l.xb(13,0,null,0,5,"div",[["class","pv-4 text-12"],["formArrayName","states"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),l.wb(14,212992,null,0,de.e,[[3,de.c],[8,null],[8,null]],{name:[0,"name"]},null),l.Ob(2048,null,de.c,null,[de.e]),l.wb(16,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.nb(16777216,null,null,1,null,Pb)),l.wb(18,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,4,0,"Prefix"),e(t,8,0,"outline","light"),e(t,11,0,"outline","light"),e(t,14,0,"states"),e(t,18,0,n.formStates.controls)}),(function(e,t){e(t,1,0,l.Jb(t,2).vertical?"vertical":"horizontal",l.Jb(t,2).vertical,!l.Jb(t,2).vertical,l.Jb(t,2).inset),e(t,7,0,l.Jb(t,8).disabled),e(t,10,0,l.Jb(t,11).disabled),e(t,13,0,l.Jb(t,16).ngClassUntouched,l.Jb(t,16).ngClassTouched,l.Jb(t,16).ngClassPristine,l.Jb(t,16).ngClassDirty,l.Jb(t,16).ngClassValid,l.Jb(t,16).ngClassInvalid,l.Jb(t,16).ngClassPending)}))}function Tb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-spinner",[["class","ml-2"],["render","inline"],["size","medium"]],null,null,null,Up,Rp)),l.wb(2,114688,null,0,Fp,[],{size:[0,"size"],render:[1,"render"]},null),(e()(),l.Rb(-1,null,[" Validating "]))],(function(e,t){e(t,2,0,"medium","inline")}),null)}function Ib(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-spinner",[["class","ml-2"],["render","inline"],["size","medium"]],null,null,null,Up,Rp)),l.wb(2,114688,null,0,Fp,[],{size:[0,"size"],render:[1,"render"]},null),(e()(),l.Rb(-1,null,[" Saving "]))],(function(e,t){e(t,2,0,"medium","inline")}),null)}function Jb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Save Module "]))],null,null)}function zb(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),l.wb(1,81920,null,0,ip.m,[[2,ip.l],l.l,ip.e],null,null),(e()(),l.Rb(-1,null,[" Save Module\n"])),(e()(),l.xb(3,0,null,null,68,"div",[["class","theme-light mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),l.wb(4,16384,null,0,ip.j,[],null,null),(e()(),l.xb(5,0,null,null,66,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var i=!0,a=e.component;return"submit"===t&&(i=!1!==l.Jb(e,7).onSubmit(n)&&i),"reset"===t&&(i=!1!==l.Jb(e,7).onReset()&&i),"submit"===t&&(i=!1!==a.handleSubmit()&&i),i}),null,null)),l.wb(6,16384,null,0,de.C,[],null,null),l.wb(7,540672,null,0,de.h,[[8,null],[8,null]],{form:[0,"form"]},null),l.Ob(2048,null,de.c,null,[de.h]),l.wb(9,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(10,0,null,null,11,"app-form-field",[],null,null,null,pe,ce)),l.wb(11,114688,null,0,re,[],null,null),(e()(),l.xb(12,0,null,0,7,"mat-checkbox",[["class","mat-checkbox"],["data-test","duplicateStates"],["formControlName","duplicateStates"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(13,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(15,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(17,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(18,0,null,0,1,"span",[["class","text-12"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Duplicate Content States"])),(e()(),l.xb(20,0,null,1,1,"div",[["form-field-help",""]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" This requires that you specify the location for the new module, and new unused names for each of the content states. "])),(e()(),l.xb(22,0,null,null,19,"app-form-field",[],null,null,null,pe,ce)),l.wb(23,114688,null,0,re,[],null,null),(e()(),l.xb(24,0,null,0,7,"mat-checkbox",[["class","mat-checkbox"],["formControlName","trimShown"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(25,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(27,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(29,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(30,0,null,0,1,"span",[["class","text-12"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Trim Shown Objects"])),(e()(),l.xb(32,0,null,0,7,"mat-checkbox",[["class","ml-4 mat-checkbox"],["formControlName","trimClipped"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,xe.b,xe.a)),l.wb(33,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(35,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(37,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(38,0,null,0,1,"span",[["class","text-12"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Trim Clipped Objects"])),(e()(),l.nb(16777216,null,0,1,null,_b)),l.wb(41,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(42,0,null,null,1,"mat-divider",[["class","mb-4 mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(43,49152,null,0,xb.a,[],null,null),(e()(),l.xb(44,0,null,null,10,"app-form-field",[["label","Primary Category"]],null,null,null,pe,ce)),l.wb(45,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(46,0,null,0,8,"select",[["class","input"],["data-test","primaryCategory"],["formControlName","primaryCategory"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(e,t,n){var i=!0;return"change"===t&&(i=!1!==l.Jb(e,47).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,47).onTouched()&&i),i}),null,null)),l.wb(47,16384,null,0,de.w,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.w]),l.wb(49,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(51,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.nb(16777216,null,null,2,null,yb)),l.wb(53,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,wb)),l.wb(56,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(58,0,null,null,9,"app-form-field",[["label","Name"]],null,null,null,pe,ce)),l.wb(59,114688,null,0,re,[],{label:[0,"label"]},null),(e()(),l.xb(60,0,[["name",1]],0,5,"input",[["class","input w-100"],["data-test","moduleName"],["formControlName","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,61)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,61).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,61)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,61)._compositionEnd(n.target.value)&&i),i}),null,null)),l.wb(61,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.d]),l.wb(63,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(65,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.nb(16777216,null,0,1,null,kb)),l.wb(67,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Sb)),l.wb(69,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Mb)),l.wb(71,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(72,0,null,null,13,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),l.wb(73,16384,null,0,ip.f,[],null,null),(e()(),l.xb(74,0,null,null,3,"button",[["app-button",""],["buttonTheme","light"],["class","mr-2"],["type","button"]],[[1,"aria-label",0],[1,"type",0],[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,75).dialogRef.close(l.Jb(e,75).dialogResult)&&i),i}),Ze,Ke)),l.wb(75,606208,null,0,ip.g,[[2,ip.l],l.l,ip.e],{type:[0,"type"]},null),l.wb(76,114688,null,0,Xe,[],{buttonTheme:[0,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Cancel"])),(e()(),l.xb(78,0,null,null,7,"button",[["app-button",""],["buttonTheme","light"],["buttonType","primary"],["data-test","saveModuleSubmit"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleSubmit()&&l),l}),Ze,Ke)),l.wb(79,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"],disabled:[2,"disabled"]},null),(e()(),l.nb(16777216,null,0,1,null,Tb)),l.wb(81,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,0,1,null,Ib)),l.wb(83,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,0,1,null,Jb)),l.wb(85,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n,i=t.component;e(t,1,0),e(t,7,0,i.form),e(t,11,0),e(t,15,0,"duplicateStates"),e(t,23,0),e(t,27,0,"trimShown"),e(t,35,0,"trimClipped"),e(t,41,0,i.formTrimClipped.value),e(t,45,0,"Primary Category"),e(t,49,0,"primaryCategory"),e(t,53,0,l.Sb(t,53,0,l.Jb(t,54).transform(i.primaryCategoryOptions$))),e(t,56,0,null==(n=l.Sb(t,56,0,l.Jb(t,57).transform(i.secondaryCategoryOptions$)))?null:n.length),e(t,59,0,"Name"),e(t,63,0,"name"),e(t,67,0,i.modulePath&&l.Jb(t,60).value.length),e(t,69,0,"production"===i.formPrimaryCategory.value),e(t,71,0,i.formDuplicateStates.value),e(t,75,0,"button"),e(t,76,0,"light"),e(t,79,0,"primary","light",i.saving||!i.form.valid||i.validating),e(t,81,0,i.validating),e(t,83,0,i.saving),e(t,85,0,!i.validating&&!i.saving)}),(function(e,t){e(t,0,0,l.Jb(t,1).id),e(t,5,0,l.Jb(t,9).ngClassUntouched,l.Jb(t,9).ngClassTouched,l.Jb(t,9).ngClassPristine,l.Jb(t,9).ngClassDirty,l.Jb(t,9).ngClassValid,l.Jb(t,9).ngClassInvalid,l.Jb(t,9).ngClassPending),e(t,12,1,[l.Jb(t,13).id,null,l.Jb(t,13).indeterminate,l.Jb(t,13).checked,l.Jb(t,13).disabled,"before"==l.Jb(t,13).labelPosition,"NoopAnimations"===l.Jb(t,13)._animationMode,l.Jb(t,17).ngClassUntouched,l.Jb(t,17).ngClassTouched,l.Jb(t,17).ngClassPristine,l.Jb(t,17).ngClassDirty,l.Jb(t,17).ngClassValid,l.Jb(t,17).ngClassInvalid,l.Jb(t,17).ngClassPending]),e(t,24,1,[l.Jb(t,25).id,null,l.Jb(t,25).indeterminate,l.Jb(t,25).checked,l.Jb(t,25).disabled,"before"==l.Jb(t,25).labelPosition,"NoopAnimations"===l.Jb(t,25)._animationMode,l.Jb(t,29).ngClassUntouched,l.Jb(t,29).ngClassTouched,l.Jb(t,29).ngClassPristine,l.Jb(t,29).ngClassDirty,l.Jb(t,29).ngClassValid,l.Jb(t,29).ngClassInvalid,l.Jb(t,29).ngClassPending]),e(t,32,1,[l.Jb(t,33).id,null,l.Jb(t,33).indeterminate,l.Jb(t,33).checked,l.Jb(t,33).disabled,"before"==l.Jb(t,33).labelPosition,"NoopAnimations"===l.Jb(t,33)._animationMode,l.Jb(t,37).ngClassUntouched,l.Jb(t,37).ngClassTouched,l.Jb(t,37).ngClassPristine,l.Jb(t,37).ngClassDirty,l.Jb(t,37).ngClassValid,l.Jb(t,37).ngClassInvalid,l.Jb(t,37).ngClassPending]),e(t,42,0,l.Jb(t,43).vertical?"vertical":"horizontal",l.Jb(t,43).vertical,!l.Jb(t,43).vertical,l.Jb(t,43).inset),e(t,46,0,l.Jb(t,51).ngClassUntouched,l.Jb(t,51).ngClassTouched,l.Jb(t,51).ngClassPristine,l.Jb(t,51).ngClassDirty,l.Jb(t,51).ngClassValid,l.Jb(t,51).ngClassInvalid,l.Jb(t,51).ngClassPending),e(t,60,0,l.Jb(t,65).ngClassUntouched,l.Jb(t,65).ngClassTouched,l.Jb(t,65).ngClassPristine,l.Jb(t,65).ngClassDirty,l.Jb(t,65).ngClassValid,l.Jb(t,65).ngClassInvalid,l.Jb(t,65).ngClassPending),e(t,74,0,l.Jb(t,75).ariaLabel||null,l.Jb(t,75).type,l.Jb(t,76).disabled),e(t,78,0,l.Jb(t,79).disabled)}))}function Lb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-save-module-dialog",[],null,null,null,zb,fb)),l.wb(1,245760,null,0,$u,[O.i,O.b,de.f,Lu,l.i,rp.c,ip.l,ip.a],null,null)],(function(e,t){e(t,1,0)}),null)}var Eb=l.tb("app-save-module-dialog",$u,Lb,{},{},[]),Ab=l.vb({encapsulation:0,styles:[[".welcome[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:end;align-items:flex-end;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.welcome__close[_ngcontent-%COMP%]{cursor:pointer}.slide[_ngcontent-%COMP%]{width:800px;height:600px;position:relative;margin:auto;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between}.slide__item[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;text-align:center}.slide__item--hidden[_ngcontent-%COMP%]{display:none}.slide__logo[_ngcontent-%COMP%]{width:300px;margin:160px 0 40px}.slide__image[_ngcontent-%COMP%]{-webkit-box-flex:2;flex:2;overflow:auto;width:100%}.slide__nav[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;font-size:16px;margin:12px 0}.slide__nav-arrow[_ngcontent-%COMP%]{cursor:pointer;margin:auto 12px;opacity:.8}.slide__nav-arrow[_ngcontent-%COMP%]:hover{opacity:1}.slide__nav-arrow--disabled[_ngcontent-%COMP%]{opacity:.25;pointer-events:none}.slide__nav-dots[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.slide__nav-dot[_ngcontent-%COMP%]{margin:auto 4px;cursor:pointer;display:-webkit-box;display:flex;background-color:rgba(28,42,63,.4);border-radius:50%;width:14px;height:14px;line-height:17px}.slide__nav-dot[_ngcontent-%COMP%]:hover{background-color:rgba(28,42,63,.6)}.slide__nav-dot--active[_ngcontent-%COMP%]{background-color:#2d72dc}@media (max-width:1024px){.slide[_ngcontent-%COMP%]{width:100%;height:80vh}}"]],data:{}});function Fb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"img",[["class","slide__logo"]],[[8,"src",4]],null,null,null,null))],null,(function(e,t){e(t,0,0,t.parent.context.$implicit.logo)}))}function Rb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"div",[["class","text-24 text-medium text-uppercase mt-4"]],null,null,null,null,null)),(e()(),l.Rb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.parent.context.$implicit.title)}))}function Db(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"div",[["class","text-18 mt-4 mb-4"]],[[2,"text-22",null],[2,"text-medium",null],[8,"innerHTML",1]],null,null,null,null))],null,(function(e,t){e(t,0,0,t.parent.context.$implicit.logo,t.parent.context.$implicit.logo,t.parent.context.$implicit.text)}))}function Ub(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"img",[["class","slide__image"]],[[8,"src",4]],null,null,null,null))],null,(function(e,t){e(t,0,0,t.parent.context.$implicit.image)}))}function Nb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,8,"div",[["class","slide__item"]],[[2,"slide__item--hidden",null]],null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Fb)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Rb)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Db)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Ub)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,2,0,t.context.$implicit.logo),e(t,4,0,t.context.$implicit.title),e(t,6,0,t.context.$implicit.text),e(t,8,0,t.context.$implicit.image)}),(function(e,t){e(t,0,0,t.component.selectedIndex!==t.context.index)}))}function Hb(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"div",[["class","slide__nav-dot"]],[[2,"slide__nav-dot--active",null],[1,"title",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleSelectSlideClick(e.context.index)&&l),l}),null,null))],null,(function(e,t){e(t,0,0,t.component.selectedIndex===t.context.index,t.context.$implicit.title)}))}function Bb(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,13,"div",[["class","welcome"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-icon",[["class","welcome__close"],["icon","times"],["size","lg"],["title","Close"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCloseTour()&&l),l}),he,ge)),l.wb(2,114688,null,0,be,[],{icon:[0,"icon"],size:[1,"size"]},null),(e()(),l.xb(3,0,null,null,10,"div",[["class","slide"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Nb)),l.wb(5,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),(e()(),l.xb(6,0,null,null,7,"div",[["class","slide__nav"]],null,null,null,null,null)),(e()(),l.xb(7,0,null,null,1,"app-icon",[["class","slide__nav-arrow"],["icon","chevron-left"]],[[2,"slide__nav-arrow--disabled",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handlePrevClick()&&l),l}),he,ge)),l.wb(8,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(9,0,null,null,2,"div",[["class","slide__nav-dots"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Hb)),l.wb(11,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),(e()(),l.xb(12,0,null,null,1,"app-icon",[["class","slide__nav-arrow"],["icon","chevron-right"]],[[2,"slide__nav-arrow--disabled",null]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleNextClick()&&l),l}),he,ge)),l.wb(13,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){var n=t.component;e(t,2,0,"times","lg"),e(t,5,0,n.slides),e(t,8,0,"chevron-left"),e(t,11,0,n.slides),e(t,13,0,"chevron-right")}),(function(e,t){var n=t.component;e(t,7,0,n.isFirstSlide),e(t,12,0,n.isLastSlide)}))}function $b(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-welcome-tour-dialog",[],null,null,null,Bb,Ab)),l.wb(1,245760,null,0,mu,[O.i,ip.l,ip.a],null,null)],(function(e,t){e(t,1,0)}),null)}var Vb=l.tb("app-welcome-tour-dialog",mu,$b,{},{},[]);class Wb{constructor(){}ngOnInit(){}}var Gb=l.vb({encapsulation:2,styles:[[""]],data:{}});function qb(e){return l.Tb(2,[l.Ib(null,0)],null,null)}var Xb=function(e){return e.Default="default",e.Commafied="commafied",e.flat="flat",e}({});class Kb{constructor(){this.listType=Xb.Default}ngOnInit(){}}var Zb=l.vb({encapsulation:2,styles:[['.list{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.list--default app-list-item{display:list-item;margin-left:16px;list-style-type:disc}.list--commafied{-webkit-box-align:center;align-items:center;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;flex-wrap:wrap;padding:0 4px 4px 0}.list--commafied app-list-item:not(:last-child):after{content:", ";float:right;padding-right:4px}.list--flat app-list-item:not(:last-child){margin-bottom:4px}.list__item{display:block}']],data:{}});function Yb(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,3,"div",[["class","list"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Ib(null,0)],(function(e,t){e(t,2,0,"list","list--"+t.component.listType)}),null)}let Qb=(()=>{class e{constructor(e,t){this.store=e,this.formBuilder=t,this.gallerySearchMode=qu,this.ngUnsubscribe=new K.a}get primaryCategoryControl(){return this.queryForm.get("primaryCategory")}get secondaryCategoryControl(){return this.queryForm.get("secondaryCategory")}get pathControl(){return this.pathForm.get("path")}ngOnInit(){this.initForms(),this.initFormListeners(),this.store.dispatch(new ku),this.store.dispatch(new Su(this.primaryCategoryControl.value))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForms(){this.queryForm=this.formBuilder.group({primaryCategory:["production"],secondaryCategory:["maleAdult"]}),this.pathForm=this.formBuilder.group({path:[]}),this.searchLoft(this.getQuery())}initFormListeners(){this.primaryCategoryControl.valueChanges.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.handlePrimaryUpdate(e)}),Object(Uu.a)(this.queryForm.valueChanges,this.pathForm.valueChanges).pipe(Object(Qo.a)(300),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.searchLoft(this.getQuery())})}toggleSearchMode(e){this.store.dispatch(new Lo.SetSearchMode(e))}handlePrimaryUpdate(e){this.secondaryCategoryControl.setValue(""),this.store.dispatch(new Su(e))}searchLoft(e){this.store.dispatch(new Lo.SearchLoft(e.primaryCategory,e.secondaryCategory,e.name))}getQuery(){const e={primaryCategory:"",secondaryCategory:"",name:""};switch(this.store.selectSnapshot(Yu.getSearchMode)){case qu.Query:e.primaryCategory=this.primaryCategoryControl.value,e.secondaryCategory=this.secondaryCategoryControl.value;break;case qu.Path:const t=decodeURIComponent(this.pathControl.value||""),n=t.split("/"),l=t.match(/([A-Za-z_-\s0-9]*\/)/gi);null!=l&&(e.primaryCategory=(l[0]||"").replace("/",""),e.secondaryCategory=(l[1]||"").replace("/",""),e.name=n.pop())}return e}}return Object(y.__decorate)([Object(O.e)(Ru.getPrimaryCategoryOptions("read")),Object(y.__metadata)("design:type",Z.a)],e.prototype,"primaryCategoryOptions$",void 0),Object(y.__decorate)([Object(O.e)(Ru.getSecondaryCategoryOptions),Object(y.__metadata)("design:type",Z.a)],e.prototype,"secondaryCategoryOptions$",void 0),Object(y.__decorate)([Object(O.e)(Yu.getSearchMode),Object(y.__metadata)("design:type",Z.a)],e.prototype,"searchMode$",void 0),e})();var eg=l.vb({encapsulation:0,styles:[[".gallery-filters[_ngcontent-%COMP%]{display:-webkit-box;display:flex}"]],data:{}});function tg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"option",[],null,null,null,null,null)),l.wb(1,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(2,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(3,null,["",""]))],(function(e,t){e(t,1,0,t.context.$implicit),e(t,2,0,t.context.$implicit)}),(function(e,t){e(t,3,0,t.context.$implicit)}))}function ng(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"option",[],null,null,null,null,null)),l.wb(1,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(2,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(3,null,["",""]))],(function(e,t){e(t,1,0,t.context.$implicit),e(t,2,0,t.context.$implicit)}),(function(e,t){e(t,3,0,t.context.$implicit)}))}function lg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,8,"select",[["class","input mr-2 w-25"],["formControlName","secondaryCategory"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(e,t,n){var i=!0;return"change"===t&&(i=!1!==l.Jb(e,1).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,1).onTouched()&&i),i}),null,null)),l.wb(1,16384,null,0,de.w,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.w]),l.wb(3,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(5,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.nb(16777216,null,null,2,null,ng)),l.wb(7,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,3,0,"secondaryCategory"),e(t,7,0,l.Sb(t,7,0,l.Jb(t,8).transform(n.secondaryCategoryOptions$)))}),(function(e,t){e(t,0,0,l.Jb(t,5).ngClassUntouched,l.Jb(t,5).ngClassTouched,l.Jb(t,5).ngClassPristine,l.Jb(t,5).ngClassDirty,l.Jb(t,5).ngClassValid,l.Jb(t,5).ngClassInvalid,l.Jb(t,5).ngClassPending)}))}function ig(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,19,"form",[["class","gallery-filters"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==l.Jb(e,2).onSubmit(n)&&i),"reset"===t&&(i=!1!==l.Jb(e,2).onReset()&&i),i}),null,null)),l.wb(1,16384,null,0,de.C,[],null,null),l.wb(2,540672,null,0,de.h,[[8,null],[8,null]],{form:[0,"form"]},null),l.Ob(2048,null,de.c,null,[de.h]),l.wb(4,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(5,0,null,null,8,"select",[["autofocus",""],["class","input mr-2 w-25"],["formControlName","primaryCategory"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(e,t,n){var i=!0;return"change"===t&&(i=!1!==l.Jb(e,6).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,6).onTouched()&&i),i}),null,null)),l.wb(6,16384,null,0,de.w,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.w]),l.wb(8,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(10,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.nb(16777216,null,null,2,null,tg)),l.wb(12,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,lg)),l.wb(15,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(17,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["data-test","specifyFilePath"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.toggleSearchMode(i.gallerySearchMode.Path)&&l),l}),Ze,Ke)),l.wb(18,114688,null,0,Xe,[],{buttonTheme:[0,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["...or specify file path"]))],(function(e,t){var n,i=t.component;e(t,2,0,i.queryForm),e(t,8,0,"primaryCategory"),e(t,12,0,l.Sb(t,12,0,l.Jb(t,13).transform(i.primaryCategoryOptions$))),e(t,15,0,null==(n=l.Sb(t,15,0,l.Jb(t,16).transform(i.secondaryCategoryOptions$)))?null:n.length),e(t,18,0,"light")}),(function(e,t){e(t,0,0,l.Jb(t,4).ngClassUntouched,l.Jb(t,4).ngClassTouched,l.Jb(t,4).ngClassPristine,l.Jb(t,4).ngClassDirty,l.Jb(t,4).ngClassValid,l.Jb(t,4).ngClassInvalid,l.Jb(t,4).ngClassPending),e(t,5,0,l.Jb(t,10).ngClassUntouched,l.Jb(t,10).ngClassTouched,l.Jb(t,10).ngClassPristine,l.Jb(t,10).ngClassDirty,l.Jb(t,10).ngClassValid,l.Jb(t,10).ngClassInvalid,l.Jb(t,10).ngClassPending),e(t,17,0,l.Jb(t,18).disabled)}))}function ag(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,13,"form",[["class","gallery-filters"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==l.Jb(e,2).onSubmit(n)&&i),"reset"===t&&(i=!1!==l.Jb(e,2).onReset()&&i),i}),null,null)),l.wb(1,16384,null,0,de.C,[],null,null),l.wb(2,540672,null,0,de.h,[[8,null],[8,null]],{form:[0,"form"]},null),l.Ob(2048,null,de.c,null,[de.h]),l.wb(4,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(5,0,null,null,5,"input",[["class","input mr-2 w-75"],["data-test","moduleIdInput"],["formControlName","path"],["placeholder","primary/secondary/name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,6)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,6).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,6)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,6)._compositionEnd(n.target.value)&&i),i}),null,null)),l.wb(6,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.d]),l.wb(8,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(10,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.xb(11,0,null,null,2,"button",[["app-button",""],["autofocus",""],["buttonTheme","light"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.toggleSearchMode(i.gallerySearchMode.Query)&&l),l}),Ze,Ke)),l.wb(12,114688,null,0,Xe,[],{buttonTheme:[0,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Cancel"]))],(function(e,t){e(t,2,0,t.component.pathForm),e(t,8,0,"path"),e(t,12,0,"light")}),(function(e,t){e(t,0,0,l.Jb(t,4).ngClassUntouched,l.Jb(t,4).ngClassTouched,l.Jb(t,4).ngClassPristine,l.Jb(t,4).ngClassDirty,l.Jb(t,4).ngClassValid,l.Jb(t,4).ngClassInvalid,l.Jb(t,4).ngClassPending),e(t,5,0,l.Jb(t,10).ngClassUntouched,l.Jb(t,10).ngClassTouched,l.Jb(t,10).ngClassPristine,l.Jb(t,10).ngClassDirty,l.Jb(t,10).ngClassValid,l.Jb(t,10).ngClassInvalid,l.Jb(t,10).ngClassPending),e(t,11,0,l.Jb(t,12).disabled)}))}function og(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,2,null,ig)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,ag)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,1,0,l.Sb(t,1,0,l.Jb(t,2).transform(n.searchMode$))===n.gallerySearchMode.Query),e(t,4,0,l.Sb(t,4,0,l.Jb(t,5).transform(n.searchMode$))===n.gallerySearchMode.Path)}),null)}var sg=n("/uUt");let rg=(()=>{class e{constructor(e,t,n){this.store=e,this.changeDetectorRef=t,this.formBuilder=n,this.ngUnsubscribe=new K.a,this.groupedOptions={}}get queryControl(){return this.form.get("query")}get categoryControl(){return this.form.get("category")}ngOnInit(){this.initForm(),this.initFormListeners(),this.populateDropdown()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){const e=this.store.selectSnapshot(Yu.getStudioCategoryId),t=this.store.selectSnapshot(Yu.getStudioQuery);this.form=this.formBuilder.group({category:[e],query:[t]})}initFormListeners(){this.form.valueChanges.pipe(Object(Zn.a)(()=>{this.category=this.store.selectSnapshot(Yu.getStudioOptions).find(e=>e.id===this.categoryControl.value),this.changeDetectorRef.markForCheck()}),Object(u.a)(e=>JSON.stringify(e)),Object(sg.a)(),Object(u.a)(e=>JSON.parse(e)),Object(Qo.a)(300),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new Lo.SearchStudio(this.category,this.queryControl.value))})}populateDropdown(){const e=this.store.selectSnapshot(Uc.getOrganization);this.store.dispatch(new Lo.GetStudioOptions(e?e.id:null)),this.store.select(Yu.getStudioOptions).pipe(Object(Q.a)(e=>e.length>0),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.updateOptions(e)})}updateOptions(e){this.groupedOptions=Object(Mt.groupBy)(e,e=>e.type);const t=this.store.selectSnapshot(Yu.getStudioCategoryId);this.category=e.find(e=>e.id===t),this.categoryControl.setValue(this.category.id),this.changeDetectorRef.markForCheck()}}return Object(y.__decorate)([Object(O.e)(Yu.getStudioCategoryId),Object(y.__metadata)("design:type",Z.a)],e.prototype,"categoryId$",void 0),Object(y.__decorate)([Object(O.e)(Yu.getStudioQuery),Object(y.__metadata)("design:type",Z.a)],e.prototype,"query$",void 0),e})();var cg=l.vb({encapsulation:0,styles:[[".gallery-filters[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.gallery-filters__category[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:0 0 auto;position:relative}.gallery-filters__category-select[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;opacity:0;z-index:2}.gallery-filters__category-selection[_ngcontent-%COMP%]{background-color:#d7e0ea;border:1px solid #96a8c0;border-right:0;-webkit-box-flex:1;flex:1 1 auto;border-radius:4px 0 0 4px}.gallery-filters__query[_ngcontent-%COMP%]{border-radius:0 4px 4px 0}"]],data:{}});function ug(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"button",[["app-button",""],["buttonTheme","light"],["buttonType","flat"],["class","gallery-filters__category-selection"],["type","button"]],[[8,"disabled",0]],null,null,Ze,Ke)),l.wb(1,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"]},null),(e()(),l.Rb(2,0,[""," "])),(e()(),l.xb(3,0,null,0,1,"app-icon",[["icon","caret-down"]],null,null,null,he,ge)),l.wb(4,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){e(t,1,0,"flat","light"),e(t,4,0,"caret-down")}),(function(e,t){var n=t.component;e(t,0,0,l.Jb(t,1).disabled),e(t,2,0,n.category.label)}))}function pg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l.Rb(-1,null,["\xa0\xa0"]))],null,null)}function dg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,"option",[],null,null,null,null,null)),l.wb(1,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(2,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.nb(16777216,null,null,1,null,pg)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.Rb(5,null,[" "," "]))],(function(e,t){e(t,1,0,t.context.$implicit.id),e(t,2,0,t.context.$implicit.id),e(t,4,0,""!==t.context.$implicit.value)}),(function(e,t){e(t,5,0,t.context.$implicit.label)}))}function bg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"option",[],null,null,null,null,null)),l.wb(1,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(2,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(3,null,[" "," "]))],(function(e,t){e(t,1,0,t.context.$implicit.id),e(t,2,0,t.context.$implicit.id)}),(function(e,t){e(t,3,0,t.context.$implicit.label)}))}function gg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l.Rb(-1,null,["\xa0\xa0"]))],null,null)}function hg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,"option",[],null,null,null,null,null)),l.wb(1,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(2,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.nb(16777216,null,null,1,null,gg)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.Rb(5,null,[" "," "]))],(function(e,t){e(t,1,0,t.context.$implicit.id),e(t,2,0,t.context.$implicit.id),e(t,4,0,""!==t.context.$implicit.value)}),(function(e,t){e(t,5,0,t.context.$implicit.label)}))}function mg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"option",[],null,null,null,null,null)),l.wb(1,147456,null,0,de.r,[l.l,l.H,[2,de.w]],{value:[0,"value"]},null),l.wb(2,147456,null,0,de.B,[l.l,l.H,[8,null]],{value:[0,"value"]},null),(e()(),l.Rb(3,null,["",""]))],(function(e,t){e(t,1,0,t.context.$implicit.id),e(t,2,0,t.context.$implicit.id)}),(function(e,t){e(t,3,0,t.context.$implicit.label)}))}function xg(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,27,"form",[["class","gallery-filters"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==l.Jb(e,2).onSubmit(n)&&i),"reset"===t&&(i=!1!==l.Jb(e,2).onReset()&&i),i}),null,null)),l.wb(1,16384,null,0,de.C,[],null,null),l.wb(2,540672,null,0,de.h,[[8,null],[8,null]],{form:[0,"form"]},null),l.Ob(2048,null,de.c,null,[de.h]),l.wb(4,16384,null,0,de.p,[[4,de.c]],null,null),(e()(),l.xb(5,0,null,null,16,"div",[["class","gallery-filters__category"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,ug)),l.wb(7,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(8,0,null,null,13,"select",[["class","gallery-filters__category-select"],["formControlName","category"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(e,t,n){var i=!0;return"change"===t&&(i=!1!==l.Jb(e,9).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,9).onTouched()&&i),i}),null,null)),l.wb(9,16384,null,0,de.w,[l.H,l.l],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.w]),l.wb(11,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(13,16384,null,0,de.o,[[4,de.n]],null,null),(e()(),l.nb(16777216,null,null,1,null,dg)),l.wb(15,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),(e()(),l.nb(16777216,null,null,1,null,bg)),l.wb(17,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),(e()(),l.nb(16777216,null,null,1,null,hg)),l.wb(19,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),(e()(),l.nb(16777216,null,null,1,null,mg)),l.wb(21,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),(e()(),l.xb(22,0,null,null,5,"input",[["class","input gallery-filters__query"],["formControlName","query"],["placeholder","Search..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,t,n){var i=!0;return"input"===t&&(i=!1!==l.Jb(e,23)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==l.Jb(e,23).onTouched()&&i),"compositionstart"===t&&(i=!1!==l.Jb(e,23)._compositionStart()&&i),"compositionend"===t&&(i=!1!==l.Jb(e,23)._compositionEnd(n.target.value)&&i),i}),null,null)),l.wb(23,16384,null,0,de.d,[l.H,l.l,[2,de.a]],null,null),l.Ob(1024,null,de.m,(function(e){return[e]}),[de.d]),l.wb(25,671744,null,0,de.g,[[3,de.c],[8,null],[8,null],[6,de.m],[2,de.A]],{name:[0,"name"]},null),l.Ob(2048,null,de.n,null,[de.g]),l.wb(27,16384,null,0,de.o,[[4,de.n]],null,null)],(function(e,t){var n=t.component;e(t,2,0,n.form),e(t,7,0,n.category),e(t,11,0,"category"),e(t,15,0,n.groupedOptions.category),e(t,17,0,n.groupedOptions.organization),e(t,19,0,n.groupedOptions.collection),e(t,21,0,n.groupedOptions.user),e(t,25,0,"query")}),(function(e,t){e(t,0,0,l.Jb(t,4).ngClassUntouched,l.Jb(t,4).ngClassTouched,l.Jb(t,4).ngClassPristine,l.Jb(t,4).ngClassDirty,l.Jb(t,4).ngClassValid,l.Jb(t,4).ngClassInvalid,l.Jb(t,4).ngClassPending),e(t,8,0,l.Jb(t,13).ngClassUntouched,l.Jb(t,13).ngClassTouched,l.Jb(t,13).ngClassPristine,l.Jb(t,13).ngClassDirty,l.Jb(t,13).ngClassValid,l.Jb(t,13).ngClassInvalid,l.Jb(t,13).ngClassPending),e(t,22,0,l.Jb(t,27).ngClassUntouched,l.Jb(t,27).ngClassTouched,l.Jb(t,27).ngClassPristine,l.Jb(t,27).ngClassDirty,l.Jb(t,27).ngClassValid,l.Jb(t,27).ngClassInvalid,l.Jb(t,27).ngClassPending)}))}class fg{constructor(e,t){this.templateRef=e,this.viewContainer=t}ngOnInit(){this.update()}update(){"module"===r.exportType?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()}}class _g{constructor(e,t){this.templateRef=e,this.viewContainer=t}ngOnInit(){this.update()}update(){"bookmark"===r.exportType?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()}}class yg{constructor(e){this.changeDetectorRef=e,this.sortOptions=[],this.sortChange=new l.n}get sort(){return this._sort}set sort(e){this._sort=e,this.changeDetectorRef.markForCheck()}ngOnInit(){}handleSort(e){this.sortChange.emit(e)}}var Og=l.vb({encapsulation:0,styles:[[""]],data:{}});function wg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleSort(e.context.$implicit)&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(2,0,[" "," "]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null),e(t,2,0,t.context.$implicit.label)}))}function vg(e){return l.Tb(2,[(e()(),l.xb(0,16777216,null,null,5,"button",[["app-button",""],["aria-haspopup","true"],["buttonTheme","light"],["buttonType","flat"],["class","mat-menu-trigger"]],[[8,"disabled",0],[1,"aria-expanded",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var i=!0;return"mousedown"===t&&(i=!1!==l.Jb(e,2)._handleMousedown(n)&&i),"keydown"===t&&(i=!1!==l.Jb(e,2)._handleKeydown(n)&&i),"click"===t&&(i=!1!==l.Jb(e,2)._handleClick(n)&&i),i}),Ze,Ke)),l.wb(1,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"]},null),l.wb(2,1196032,null,0,Je.g,[Qe.a,l.l,l.S,Je.c,[2,Je.d],[8,null],[2,et.b],_e.e],{menu:[0,"menu"]},null),(e()(),l.Rb(3,0,[" "," "])),(e()(),l.xb(4,0,null,0,1,"app-icon",[["class","ml-1"],["icon","caret-down"]],null,null,null,he,ge)),l.wb(5,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(6,0,null,null,8,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.Ob(6144,null,Je.d,null,[Je.h]),l.Ob(6144,null,Je.b,null,[Je.d]),l.wb(9,1294336,[["sortActions",4]],3,Je.h,[l.l,l.B,Je.a],null,null),l.Pb(603979776,1,{_allItems:1}),l.Pb(603979776,2,{items:1}),l.Pb(603979776,3,{lazyContent:0}),(e()(),l.nb(16777216,null,0,1,null,wg)),l.wb(14,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,1,0,"flat","light"),e(t,2,0,l.Jb(t,9)),e(t,5,0,"caret-down"),e(t,9,0),e(t,14,0,n.sortOptions)}),(function(e,t){var n=t.component;e(t,0,0,l.Jb(t,1).disabled,l.Jb(t,2).menuOpen||null),e(t,3,0,n.sort.label)}))}var Cg=function(e){return e.Inline="inline",e.Block="block",e}({});class jg{constructor(){this.render=Cg.Inline}ngOnInit(){}}var kg=l.vb({encapsulation:2,styles:[[".app-button-group{display:-webkit-inline-box;display:inline-flex;position:relative}.app-button-group--inline{display:-webkit-inline-box;display:inline-flex}.app-button-group--block{display:-webkit-box;display:flex}.app-button-group--expanded{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;-webkit-box-pack:center;justify-content:center}.app-button-group button[app-button]{position:relative;z-index:1;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1}.app-button-group button[app-button]:hover{z-index:2}.app-button-group button[app-button]:first-child .app-button,.app-button-group button[app-button]:first-child .app-button:after{border-top-right-radius:0;border-bottom-right-radius:0}.app-button-group button[app-button]:last-child .app-button,.app-button-group button[app-button]:last-child .app-button:after{border-top-left-radius:0;border-bottom-left-radius:0}.app-button-group button[app-button]:last-child .app-button{margin-left:1px}.app-button-group button[app-button]:last-child .app-button--outline{margin-left:-1px}.app-button-group button[app-button]:not(:first-child):not(:last-child) .app-button,.app-button-group button[app-button]:not(:first-child):not(:last-child) .app-button:after{border-radius:0}.app-button-group button[app-button]:not(:first-child):not(:last-child) .app-button{margin-left:1px}.app-button-group button[app-button]:not(:first-child):not(:last-child) .app-button--outline{margin-left:-1px}"]],data:{}});function Sg(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,4,"div",[["class","app-button-group"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Kb(3,1),l.Ib(null,0)],(function(e,t){var n=e(t,3,0,"app-button-group--"+t.component.render);e(t,2,0,"app-button-group",n)}),null)}let Pg=(()=>{class e{constructor(e){this.store=e,this.galleryViewMode=Xu}ngOnInit(){}handleViewModeClick(e){this.store.dispatch(new Lo.SetViewMode(e))}}return Object(y.__decorate)([Object(O.e)(Yu.getViewMode),Object(y.__metadata)("design:type",Z.a)],e.prototype,"viewMode$",void 0),e})();var Mg=l.vb({encapsulation:0,styles:[[""]],data:{}});function Tg(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,11,"app-button-group",[],null,null,null,Sg,kg)),l.wb(1,114688,null,0,jg,[],null,null),(e()(),l.xb(2,0,null,0,4,"button",[["app-button",""],["buttonTheme","light"],["buttonType","flat"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.handleViewModeClick(i.galleryViewMode.Cards)&&l),l}),Ze,Ke)),l.wb(3,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"],selected:[2,"selected"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(5,0,null,0,1,"app-icon",[["icon","th"]],null,null,null,he,ge)),l.wb(6,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(7,0,null,0,4,"button",[["app-button",""],["buttonTheme","light"],["buttonType","flat"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.handleViewModeClick(i.galleryViewMode.List)&&l),l}),Ze,Ke)),l.wb(8,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"],selected:[2,"selected"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(10,0,null,0,1,"app-icon",[["icon","bars"]],null,null,null,he,ge)),l.wb(11,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){var n=t.component;e(t,1,0),e(t,3,0,"flat","light",l.Sb(t,3,2,l.Jb(t,4).transform(n.viewMode$))===n.galleryViewMode.Cards),e(t,6,0,"th"),e(t,8,0,"flat","light",l.Sb(t,8,2,l.Jb(t,9).transform(n.viewMode$))===n.galleryViewMode.List),e(t,11,0,"bars")}),(function(e,t){e(t,2,0,l.Jb(t,3).disabled),e(t,7,0,l.Jb(t,8).disabled)}))}let Ig=(()=>{class e{constructor(e){this.store=e,this.galleryViewMode=Xu}ngOnInit(){}handleSort(e){this.store.dispatch(new Lo.SetSort(e))}toggleView(e){this.store.dispatch(new Lo.SetViewMode(e))}}return Object(y.__decorate)([Object(O.e)(Yu.getViewMode),Object(y.__metadata)("design:type",Z.a)],e.prototype,"viewMode$",void 0),Object(y.__decorate)([Object(O.e)(Yu.getSort),Object(y.__metadata)("design:type",Z.a)],e.prototype,"sort$",void 0),Object(y.__decorate)([Object(O.e)(Yu.getSortOptions),Object(y.__metadata)("design:type",Z.a)],e.prototype,"sortOptions$",void 0),e})();var Jg=l.vb({encapsulation:0,styles:[[""]],data:{}});function zg(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,3,"app-sort",[["class","mr-4"]],null,[[null,"sortChange"]],(function(e,t,n){var l=!0;return"sortChange"===t&&(l=!1!==e.component.handleSort(n)&&l),l}),vg,Og)),l.wb(1,114688,null,0,yg,[l.i],{sort:[0,"sort"],sortOptions:[1,"sortOptions"]},{sortChange:"sortChange"}),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(4,0,null,null,1,"app-gallery-view-mode",[],null,null,null,Tg,Mg)),l.wb(5,114688,null,0,Pg,[O.i],null,null)],(function(e,t){var n=t.component;e(t,1,0,l.Sb(t,1,0,l.Jb(t,2).transform(n.sort$)),l.Sb(t,1,1,l.Jb(t,3).transform(n.sortOptions$))),e(t,5,0)}),null)}var Lg=n("szML"),Eg=n("9N3a"),Ag=function(e){return e.Model="model",e.Tags="tags",e.CreatedBy="created-by",e.UpdatedBy="updated-by",e.Actions="actions",e}({});class Fg{constructor(e){this.changeDetectorRef=e,this.selectLabel="Select",this._columns=[Ag.Model,Ag.Tags,Ag.CreatedBy,Ag.UpdatedBy,Ag.Actions],this.showActions=!1,this.checkable=!1,this.checkedResults=[],this.checkedChange=new l.n,this.selectBookmark=new l.n}get columns(){return this._columns}set columns(e){this._columns=e}get results(){return this._results}set results(e){this._results=e,this.changeDetectorRef.markForCheck()}ngOnInit(){}handleSelect(e){this.selectBookmark.emit(e)}handleCheckedChange(e){const t=e.checked?[...this.checkedResults,e.source.value]:this.checkedResults.filter(t=>t!==e.source.value);this.checkedChange.emit(t)}isChecked(e){return this.checkedResults.indexOf(e)>=0}}var Rg=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}[_nghost-%COMP%]{display:block;height:100%;width:100%}.gallery[_ngcontent-%COMP%]{width:100%;height:100%}.gallery__table[_ngcontent-%COMP%]{width:100%}.gallery__row[_ngcontent-%COMP%]:nth-child(even){background:#f9fafd}.gallery__row[_ngcontent-%COMP%]:hover{background:#eaeff5;cursor:pointer}.gallery__row[_ngcontent-%COMP%]:hover   .gallery__actions[_ngcontent-%COMP%], .gallery__row[_ngcontent-%COMP%]:hover   .gallery__checkbox[_ngcontent-%COMP%]{visibility:visible}.gallery__row--checked[_ngcontent-%COMP%]:nth-child(even), .gallery__row--checked[_ngcontent-%COMP%]:nth-child(odd){background:#d7e0ea}.gallery__row--checked[_ngcontent-%COMP%]   .gallery__checkbox[_ngcontent-%COMP%]{visibility:visible}.gallery__cell[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em;padding:8px;vertical-align:middle}.gallery__cell--header[_ngcontent-%COMP%]{background:#f9fafd;box-shadow:0 1px 0 #d7e0ea;padding:8px;color:#96a8c0;text-align:left;font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.gallery__cell--meta[_ngcontent-%COMP%]{color:#f9fafd}.gallery__cell--tags[_ngcontent-%COMP%]{width:180px}.gallery__cell--author[_ngcontent-%COMP%]{color:#96a8c0;width:120px}.gallery__cell--updated[_ngcontent-%COMP%]{color:#96a8c0;width:160px}.gallery__cell--checkbox[_ngcontent-%COMP%]{width:32px}.gallery__cell--actions[_ngcontent-%COMP%]{width:80px}.gallery__model[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-flex:1;flex:1 1 auto}.gallery__image-container[_ngcontent-%COMP%]{background:url(/assets/images/logo-dark-transparent.svg) center center/75% no-repeat #f9fafd;border-radius:4px;border:1px solid #d7e0ea;-webkit-box-flex:0;flex:0 0 36px;height:36px;margin-right:8px}.gallery__image[_ngcontent-%COMP%]{border-radius:4px;width:100%;height:100%;background-size:cover}.gallery__label[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em;font-weight:500;word-break:break-word}.gallery__actions[_ngcontent-%COMP%]{visibility:hidden;white-space:nowrap}.gallery__checkbox[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;visibility:hidden}"]],data:{}});function Dg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"div",[["class","gallery__image"]],null,null,null,null,null)),l.Ob(512,null,se.C,se.D,[l.l,l.v,l.H]),l.wb(2,278528,null,0,se.p,[se.C],{ngStyle:[0,"ngStyle"]},null),l.Mb(3,{"background-image":0})],(function(e,t){var n=e(t,3,0,"url("+t.parent.context.$implicit.thumbnail_url+")");e(t,2,0,n)}),null)}function Ug(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function Ng(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l.Rb(1,null,[" "," on "]))],null,(function(e,t){e(t,1,0,t.parent.context.$implicit.last_editor_first_name||t.parent.context.$implicit.last_editor)}))}function Hg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["appEventFence",""],["class","gallery__checkbox hide-sm"]],null,[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,1).onClick(n,n.target)&&i),i}),null,null)),l.wb(1,16384,null,0,me,[],null,null),(e()(),l.xb(2,0,null,null,2,"mat-checkbox",[["class","mat-checkbox"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null]],[[null,"change"]],(function(e,t,n){var l=!0;return"change"===t&&(l=!1!==e.component.handleCheckedChange(n)&&l),l}),xe.b,xe.a)),l.Ob(5120,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(4,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],{value:[0,"value"],checked:[1,"checked"]},{change:"change"})],(function(e,t){e(t,4,0,t.parent.parent.context.$implicit.id,t.component.isChecked(t.parent.parent.context.$implicit.id))}),(function(e,t){e(t,2,0,l.Jb(t,4).id,null,l.Jb(t,4).indeterminate,l.Jb(t,4).checked,l.Jb(t,4).disabled,"before"==l.Jb(t,4).labelPosition,"NoopAnimations"===l.Jb(t,4)._animationMode)}))}function Bg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"td",[["appEventFence",""],["class","gallery__cell gallery__cell--checkbox hide-md"]],null,[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,1).onClick(n,n.target)&&i),i}),null,null)),l.wb(1,16384,null,0,me,[],null,null),(e()(),l.nb(16777216,null,null,1,null,Hg)),l.wb(3,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,3,0,t.component.checkable)}),null)}function $g(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function Vg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,"td",[["appEventFence",""],["class","gallery__cell gallery__cell--actions hide-md"]],null,[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,1).onClick(n,n.target)&&i),i}),null,null)),l.wb(1,16384,null,0,me,[],null,null),(e()(),l.xb(2,0,null,null,3,"div",[["class","gallery__actions"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,$g)),l.wb(4,540672,null,0,se.t,[l.S],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),l.Mb(5,{$implicit:0})],(function(e,t){var n=t.component,l=e(t,5,0,t.parent.context.$implicit);e(t,4,0,l,n.galleryActionsTemplate)}),null)}function Wg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,26,"tr",[["class","gallery__row"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleSelect(e.context.$implicit)&&l),l}),null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"gallery__row--checked":0}),(e()(),l.xb(4,0,null,null,6,"td",[["class","gallery__cell gallery__cell--model"]],null,null,null,null,null)),(e()(),l.xb(5,0,null,null,5,"div",[["class","gallery__model"]],null,null,null,null,null)),(e()(),l.xb(6,0,null,null,2,"div",[["class","gallery__image-container"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Dg)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(9,0,null,null,1,"div",[["class","gallery__label"]],null,null,null,null,null)),(e()(),l.Rb(10,null,["",""])),(e()(),l.xb(11,0,null,null,4,"td",[["class","gallery__cell gallery__cell--tags hide-md"]],null,null,null,null,null)),(e()(),l.xb(12,0,null,null,3,"span",[["class","text-10 text-uppercase text-medium text-dim"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,Ug)),l.wb(14,540672,null,0,se.t,[l.S],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),l.Mb(15,{$implicit:0}),(e()(),l.xb(16,0,null,null,1,"td",[["class","gallery__cell gallery__cell--author hide-md"]],null,null,null,null,null)),(e()(),l.Rb(17,null,[" "," "])),(e()(),l.xb(18,0,null,null,4,"td",[["class","gallery__cell gallery__cell--updated hide-md"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Ng)),l.wb(20,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.Rb(21,null,[" "," "])),l.Nb(22,2),(e()(),l.nb(16777216,null,null,1,null,Bg)),l.wb(24,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Vg)),l.wb(26,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component,l=e(t,3,0,n.isChecked(t.context.$implicit.id));e(t,2,0,"gallery__row",l),e(t,8,0,t.context.$implicit.thumbnail_url);var i=e(t,15,0,t.context.$implicit);e(t,14,0,i,n.galleryTagsTemplate),e(t,20,0,null==t.context.$implicit.editor?null:t.context.$implicit.editor.name),e(t,24,0,n.checkable),e(t,26,0,n.showActions)}),(function(e,t){e(t,10,0,t.context.$implicit.title),e(t,17,0,t.context.$implicit.author_first_name||t.context.$implicit.author);var n=l.Sb(t,21,0,e(t,22,0,l.Jb(t.parent,0),t.context.$implicit.update_date_time||t.context.$implicit.create_date_time,"shortDate"));e(t,21,0,n)}))}function Gg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"td",[["class","gallery__cell gallery__cell--header hide-md"]],null,null,null,null,null))],null,null)}function qg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"th",[["class","gallery__cell gallery__cell--header hide-md"]],null,null,null,null,null))],null,null)}function Xg(e){return l.Tb(0,[l.Lb(0,se.e,[l.w]),(e()(),l.xb(1,0,null,null,20,"virtual-scroller",[["bufferAmount","20"],["class","gallery"]],[[2,"horizontal",null],[2,"vertical",null],[2,"selfScroll",null]],null,null,Lg.b,Lg.a)),l.wb(2,1032192,[["scroll",4]],2,Eg.b,[l.l,l.H,l.B,l.i,l.D,[2,"virtual-scroller-default-options"]],{stripedTable:[0,"stripedTable"],bufferAmount:[1,"bufferAmount"],items:[2,"items"]},null),l.Pb(603979776,1,{headerElementRef:0}),l.Pb(603979776,2,{containerElementRef:0}),(e()(),l.xb(5,0,null,0,16,"table",[["class","gallery__table"]],null,null,null,null,null)),(e()(),l.xb(6,0,[[2,0],["container",1]],null,2,"tbody",[],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Wg)),l.wb(8,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),(e()(),l.xb(9,0,[[1,0],["header",1]],null,12,"thead",[],null,null,null,null,null)),(e()(),l.xb(10,0,null,null,1,"th",[["class","gallery__cell gallery__cell--header"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Model"])),(e()(),l.xb(12,0,null,null,1,"th",[["class","gallery__cell gallery__cell--header hide-md"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Tags"])),(e()(),l.xb(14,0,null,null,1,"th",[["class","gallery__cell gallery__cell--header hide-md"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Author"])),(e()(),l.xb(16,0,null,null,1,"th",[["class","gallery__cell gallery__cell--header hide-md"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Updated"])),(e()(),l.nb(16777216,null,null,1,null,Gg)),l.wb(19,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,qg)),l.wb(21,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,!0,"20",n.results),e(t,8,0,l.Jb(t,2).viewPortItems),e(t,19,0,n.checkable),e(t,21,0,n.showActions)}),(function(e,t){e(t,1,0,l.Jb(t,2).horizontal,!l.Jb(t,2).horizontal,!l.Jb(t,2).parentScroll)}))}class Kg{constructor(e){this.changeDetectorRef=e,this.galleryColumns=Ag,this.selectLabel="Select",this._columns=[Ag.Model,Ag.Tags,Ag.CreatedBy,Ag.UpdatedBy,Ag.Actions],this.checkable=!1,this.checked=!1,this.showActions=!1,this.selectBookmark=new l.n,this.checkedChange=new l.n}get columns(){return this._columns}set columns(e){this._columns=e}get result(){return this._result}set result(e){this._result=e,this.changeDetectorRef.markForCheck()}ngOnInit(){}hasColumns(...e){return e.some(e=>this.hasColumn(e))}hasColumn(e){return this.columns.some(t=>t===e)}handleSelect(e){this.selectBookmark.emit(e)}handleCheckedChange(e){this.checkedChange.emit({id:e.source.value,checked:e.checked})}}var Zg=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}[_nghost-%COMP%]{padding:1px}[_nghost-%COMP%]:focus{outline:0}.gallery-card[_ngcontent-%COMP%]{background:#fff;border-radius:4px;box-shadow:0 -1px 1px 0 rgba(16,24,35,.15),0 1px 2px 0 rgba(16,24,35,.2);display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;width:100%;height:100%;position:relative;overflow:hidden}.gallery-card[_ngcontent-%COMP%]:hover{cursor:pointer}.gallery-card[_ngcontent-%COMP%]:hover   .gallery-card__hover[_ngcontent-%COMP%]{display:block;opacity:1}.gallery-card[_ngcontent-%COMP%]:hover   .gallery-card__actions[_ngcontent-%COMP%]{opacity:1}.gallery-card--checked[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #0060c4}.gallery-card__image-container[_ngcontent-%COMP%]{background:url(/assets/images/logo-dark-transparent.svg) center center/30% no-repeat #eaeff5;border-radius:4px 4px 0 0;position:relative;-webkit-box-flex:1;flex:1 1 auto;display:-webkit-box;display:flex}.gallery-card__image[_ngcontent-%COMP%]{border-radius:4px 4px 0 0;position:relative;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;background-size:cover;background-position:top center}.gallery-card__body[_ngcontent-%COMP%]{color:#283853;background:#fff;padding:12px;word-break:break-word;-webkit-box-flex:0;flex:0 1 72px}.gallery-card__label[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em;font-weight:500}.gallery-card__hover[_ngcontent-%COMP%]{color:#fff;left:0;right:0;top:0;bottom:0;opacity:0;position:absolute;background:rgba(28,42,63,.9);-webkit-transition:opacity .25s;transition:opacity .25s;z-index:2}.gallery-card__action[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase;border:1px solid #fff;border-radius:4px;position:absolute;left:30%;top:40%;right:30%;text-align:center;padding:10px 12px}.gallery-card__meta[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em;color:#d7e0ea;padding:12px;position:absolute;bottom:0}.gallery-card__header[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;padding:8px 8px 8px 16px;min-height:36px}.gallery-card__check[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 1 auto}.gallery-card__actions[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 1 auto;float:right;text-align:right;margin:-8px -8px 0 0;-webkit-transition:opacity 250ms;transition:opacity 250ms}"]],data:{}});function Yg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"div",[["class","gallery-card__image"]],null,null,null,null,null)),l.Ob(512,null,se.C,se.D,[l.l,l.v,l.H]),l.wb(2,278528,null,0,se.p,[se.C],{ngStyle:[0,"ngStyle"]},null),l.Mb(3,{"background-image":0})],(function(e,t){var n=e(t,3,0,"url("+t.component.result.thumbnail_url+")");e(t,2,0,n)}),null)}function Qg(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),l.Rb(1,null,["Created by ",""]))],null,(function(e,t){var n=t.component;e(t,1,0,n.result.author_first_name||n.result.author)}))}function eh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l.Rb(1,null,["Updated by "," on ",""])),l.Nb(2,2)],null,(function(e,t){var n=t.component,i=n.result.last_editor_first_name||n.result.last_editor,a=l.Sb(t,1,1,e(t,2,0,l.Jb(t.parent,0),n.result.update_date_time||n.result.create_date_time,"shortDate"));e(t,1,0,i,a)}))}function th(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"div",[["class","gallery-card__check theme-ghost"]],[[2,"card__check--checked",null]],null,null,null,null)),(e()(),l.xb(1,0,null,null,2,"mat-checkbox",[["class","mat-checkbox"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null]],[[null,"change"]],(function(e,t,n){var l=!0;return"change"===t&&(l=!1!==e.component.handleCheckedChange(n)&&l),l}),xe.b,xe.a)),l.Ob(5120,null,de.m,(function(e){return[e]}),[fe.b]),l.wb(3,8568832,null,0,fe.b,[l.l,l.i,_e.e,l.B,[8,null],[2,fe.a],[2,ye.a]],{value:[0,"value"],checked:[1,"checked"]},{change:"change"})],(function(e,t){var n=t.component;e(t,3,0,n.result.id,n.checked)}),(function(e,t){e(t,0,0,t.component.checked),e(t,1,0,l.Jb(t,3).id,null,l.Jb(t,3).indeterminate,l.Jb(t,3).checked,l.Jb(t,3).disabled,"before"==l.Jb(t,3).labelPosition,"NoopAnimations"===l.Jb(t,3)._animationMode)}))}function nh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function lh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function ih(e){return l.Tb(2,[l.Lb(0,se.e,[l.w]),(e()(),l.xb(1,0,null,null,30,"div",[["class","gallery-card"],["data-test","galleryCard"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.handleSelect(i.result)&&l),l}),null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(3,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(4,{"gallery-card--checked":0}),(e()(),l.xb(5,0,null,null,14,"div",[["class","gallery-card__image-container"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Yg)),l.wb(7,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(8,0,null,null,11,"div",[["class","gallery-card__hover hide-sm"]],null,null,null,null,null)),(e()(),l.xb(9,0,null,null,4,"div",[["class","gallery-card__meta"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Qg)),l.wb(11,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,eh)),l.wb(13,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(14,0,null,null,1,"div",[["class","gallery-card__action"]],null,null,null,null,null)),(e()(),l.Rb(15,null,[" "," "])),(e()(),l.xb(16,0,null,null,3,"div",[["appEventFence",""],["class","gallery-card__header"]],null,[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,17).onClick(n,n.target)&&i),i}),null,null)),l.wb(17,16384,null,0,me,[],null,null),(e()(),l.nb(16777216,null,null,1,null,th)),l.wb(19,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(20,0,null,null,11,"div",[["class","gallery-card__body"]],null,null,null,null,null)),(e()(),l.xb(21,0,null,null,4,"div",[["appEventFence",""],["class","gallery-card__actions hide-sm"]],null,[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,22).onClick(n,n.target)&&i),i}),null,null)),l.wb(22,16384,null,0,me,[],null,null),(e()(),l.nb(16777216,null,null,2,null,nh)),l.wb(24,540672,null,0,se.t,[l.S],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),l.Mb(25,{$implicit:0}),(e()(),l.xb(26,0,null,null,1,"div",[["class","gallery-card__label"]],null,null,null,null,null)),(e()(),l.Rb(27,null,["",""])),(e()(),l.xb(28,0,null,null,3,"div",[["class","text-10 text-uppercase text-medium text-dim mt-2"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,lh)),l.wb(30,540672,null,0,se.t,[l.S],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),l.Mb(31,{$implicit:0})],(function(e,t){var n=t.component,l=e(t,4,0,n.checked);e(t,3,0,"gallery-card",l),e(t,7,0,n.result.thumbnail_url),e(t,11,0,n.hasColumn(n.galleryColumns.CreatedBy)&&n.result.author),e(t,13,0,n.hasColumn(n.galleryColumns.UpdatedBy)&&n.result.last_editor),e(t,19,0,n.checkable);var i=e(t,25,0,n.result);e(t,24,0,i,n.galleryActionsTemplate);var a=e(t,31,0,n.result);e(t,30,0,a,n.galleryTagsTemplate)}),(function(e,t){var n=t.component;e(t,15,0,n.selectLabel),e(t,27,0,n.result.title)}))}class ah{constructor(){this.galleryColumns=Ag,this.selectLabel="Select",this._columns=[Ag.Model,Ag.Tags,Ag.CreatedBy,Ag.UpdatedBy,Ag.Actions],this.checkable=!1,this.checkedResults=[],this.showActions=!1,this.checkedChange=new l.n,this.selectBookmark=new l.n}get columns(){return this._columns}set columns(e){this._columns=e}get results(){return this._results}set results(e){this._results=e}ngOnInit(){}handleSelect(e){this.selectBookmark.emit(e)}handleCheckedChange(e){const t=e.checked?[...this.checkedResults,e.id]:this.checkedResults.filter(t=>t!==e.id);this.checkedChange.emit(t)}isChecked(e){return this.checkedResults.indexOf(e)>=0}}var oh=l.vb({encapsulation:2,styles:[[":host{display:block;height:100%;width:100%}.gallery-cards{display:block;height:100%;width:100%}.gallery-cards__loading{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;margin-top:20vh}.gallery-cards__content{display:block;padding:1px;height:100%}.gallery-cards__content .scrollable-content{display:grid;padding:1px;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));grid-auto-rows:364px;grid-auto-flow:row;-webkit-box-pack:center;justify-content:center}.gallery-cards__content .scrollable-content app-gallery-card{padding:16px}"]],data:{}});function sh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"app-gallery-card",[],null,[[null,"selectBookmark"],[null,"checkedChange"]],(function(e,t,n){var l=!0,i=e.component;return"selectBookmark"===t&&(l=!1!==i.handleSelect(n)&&l),"checkedChange"===t&&(l=!1!==i.handleCheckedChange(n)&&l),l}),ih,Zg)),l.wb(1,114688,null,2,Kg,[l.i],{galleryActionsTemplate:[0,"galleryActionsTemplate"],galleryTagsTemplate:[1,"galleryTagsTemplate"],selectLabel:[2,"selectLabel"],columns:[3,"columns"],result:[4,"result"],checkable:[5,"checkable"],checked:[6,"checked"],showActions:[7,"showActions"]},{selectBookmark:"selectBookmark",checkedChange:"checkedChange"}),l.Pb(335544320,3,{galleryActionsTemplate:0}),l.Pb(335544320,4,{galleryTagsTemplate:0})],(function(e,t){var n=t.component;e(t,1,0,n.galleryActionsTemplate,n.galleryTagsTemplate,n.selectLabel,n.columns,t.context.$implicit,n.checkable,n.isChecked(t.context.$implicit.id),n.showActions)}),null)}function rh(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,6,"div",[["class","gallery-cards"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,5,"virtual-scroller",[["class","gallery-cards__content"]],[[2,"horizontal",null],[2,"vertical",null],[2,"selfScroll",null]],null,null,Lg.b,Lg.a)),l.wb(2,1032192,[["scroll",4]],2,Eg.b,[l.l,l.H,l.B,l.i,l.D,[2,"virtual-scroller-default-options"]],{items:[0,"items"]},null),l.Pb(603979776,1,{headerElementRef:0}),l.Pb(603979776,2,{containerElementRef:0}),(e()(),l.nb(16777216,null,0,1,null,sh)),l.wb(6,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,2,0,t.component.results),e(t,6,0,l.Jb(t,2).viewPortItems)}),(function(e,t){e(t,1,0,l.Jb(t,2).horizontal,!l.Jb(t,2).horizontal,!l.Jb(t,2).parentScroll)}))}class ch{constructor(e){this.changeDetectorRef=e,this.galleryViewMode=Xu,this.loading=!1,this.viewMode=Xu.Cards,this.selectLabel="Select",this.checkable=!1,this.showActions=!1,this.checkedResults=[],this.selectBookmark=new l.n,this.checkedChange=new l.n}get results(){return this._results}set results(e){this._results=e,this.changeDetectorRef.markForCheck()}ngOnInit(){switch(r.exportType){case"bookmark":this.columns=[Ag.Model,Ag.Tags,Ag.CreatedBy,Ag.UpdatedBy,Ag.Actions];break;case"module":this.columns=[Ag.Model,Ag.Actions]}}handleSelect(e){this.selectBookmark.emit(e)}handleCheckedChange(e){this.checkedChange.emit(e)}}var uh=l.vb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:100%;position:relative}.no-results[_ngcontent-%COMP%]{display:-webkit-box;display:flex;height:100%;width:100%;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:absolute;left:0;top:0}"]],data:{}});function ph(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"app-gallery-list",[],null,[[null,"selectBookmark"],[null,"checkedChange"]],(function(e,t,n){var l=!0,i=e.component;return"selectBookmark"===t&&(l=!1!==i.handleSelect(n)&&l),"checkedChange"===t&&(l=!1!==i.handleCheckedChange(n)&&l),l}),Xg,Rg)),l.wb(1,114688,null,2,Fg,[l.i],{galleryActionsTemplate:[0,"galleryActionsTemplate"],galleryTagsTemplate:[1,"galleryTagsTemplate"],selectLabel:[2,"selectLabel"],columns:[3,"columns"],results:[4,"results"],showActions:[5,"showActions"],checkable:[6,"checkable"],checkedResults:[7,"checkedResults"]},{checkedChange:"checkedChange",selectBookmark:"selectBookmark"}),l.Pb(335544320,1,{galleryActionsTemplate:0}),l.Pb(335544320,2,{galleryTagsTemplate:0})],(function(e,t){var n=t.component;e(t,1,0,n.galleryActionsTemplate,n.galleryTagsTemplate,n.selectLabel,n.columns,n.results,n.showActions,n.checkable,n.checkedResults)}),null)}function dh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"app-gallery-cards",[],null,[[null,"selectBookmark"],[null,"checkedChange"]],(function(e,t,n){var l=!0,i=e.component;return"selectBookmark"===t&&(l=!1!==i.handleSelect(n)&&l),"checkedChange"===t&&(l=!1!==i.handleCheckedChange(n)&&l),l}),rh,oh)),l.wb(1,114688,null,2,ah,[],{galleryActionsTemplate:[0,"galleryActionsTemplate"],galleryTagsTemplate:[1,"galleryTagsTemplate"],selectLabel:[2,"selectLabel"],columns:[3,"columns"],results:[4,"results"],checkable:[5,"checkable"],checkedResults:[6,"checkedResults"],showActions:[7,"showActions"]},{checkedChange:"checkedChange",selectBookmark:"selectBookmark"}),l.Pb(335544320,3,{galleryActionsTemplate:0}),l.Pb(335544320,4,{galleryTagsTemplate:0})],(function(e,t){var n=t.component;e(t,1,0,n.galleryActionsTemplate,n.galleryTagsTemplate,n.selectLabel,n.columns,n.results,n.checkable,n.checkedResults,n.showActions)}),null)}function bh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-spinner",[["label","Loading..."],["size","large"]],null,null,null,Up,Rp)),l.wb(1,114688,null,0,Fp,[],{size:[0,"size"],label:[1,"label"]},null)],(function(e,t){e(t,1,0,"large","Loading...")}),null)}function gh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"div",[["class","no-results text-dim text-14 text-uppercase text-light"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["No Models Found"]))],null,null)}function hh(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,1,null,ph)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,dh)),l.wb(3,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,bh)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,gh)),l.wb(7,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,1,0,n.viewMode===n.galleryViewMode.List&&!n.loading&&n.results),e(t,3,0,n.viewMode===n.galleryViewMode.Cards&&!n.loading&&n.results),e(t,5,0,n.loading),e(t,7,0,!n.loading&&n.results&&0===(null==n.results?null:n.results.length))}),null)}class mh{constructor(e){this.changeDetectorRef=e,this.viewMode=Xu.Cards,this.checkedResults=[],this.loading=!1,this.selectLabel="Select",this.checkable=!0,this.showActions=!0,this.selectBookmark=new l.n}get results(){return this._results}set results(e){this._results=e,this.changeDetectorRef.markForCheck()}ngOnInit(){}handleSelect(e){this.selectBookmark.emit(e)}}var xh=l.vb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;width:100%;height:100%}.gallery-container[_ngcontent-%COMP%]{height:100%;width:100%;display:grid;display:grid;grid-template-areas:'filters controls' 'body body';grid-template-columns:1fr auto;grid-template-rows:auto 1fr}.gallery-container__filters[_ngcontent-%COMP%]{grid-area:filters;padding:8px 8px 8px 0}.gallery-container__controls[_ngcontent-%COMP%]{grid-area:controls;padding:8px 0}.gallery-container__body[_ngcontent-%COMP%]{grid-area:body;padding:8px 0;overflow-y:hidden}"]],data:{}});function fh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-gallery-filters-loft",[],null,null,null,og,eg)),l.wb(1,245760,null,0,Qb,[O.i,de.f],null,null)],(function(e,t){e(t,1,0)}),null)}function _h(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-gallery-filters-studio",[],null,null,null,xg,cg)),l.wb(1,245760,null,0,rg,[O.i,l.i,de.f],null,null)],(function(e,t){e(t,1,0)}),null)}function yh(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,13,"div",[["class","gallery-container theme-light"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,4,"div",[["class","gallery-container__filters"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,fh)),l.wb(3,81920,null,0,fg,[l.P,l.S],null,null),(e()(),l.nb(16777216,null,null,1,null,_h)),l.wb(5,81920,null,0,_g,[l.P,l.S],null,null),(e()(),l.xb(6,0,null,null,2,"div",[["class","gallery-container__controls"]],null,null,null,null,null)),(e()(),l.xb(7,0,null,null,1,"app-gallery-controls",[],null,null,null,zg,Jg)),l.wb(8,114688,null,0,Ig,[O.i],null,null),(e()(),l.xb(9,0,null,null,4,"div",[["class","gallery-container__body"]],null,null,null,null,null)),(e()(),l.xb(10,0,null,null,3,"app-gallery-results",[],null,[[null,"selectBookmark"]],(function(e,t,n){var l=!0;return"selectBookmark"===t&&(l=!1!==e.component.handleSelect(n)&&l),l}),hh,uh)),l.wb(11,114688,null,2,ch,[l.i],{galleryActionsTemplate:[0,"galleryActionsTemplate"],galleryTagsTemplate:[1,"galleryTagsTemplate"],loading:[2,"loading"],viewMode:[3,"viewMode"],selectLabel:[4,"selectLabel"],results:[5,"results"],checkable:[6,"checkable"],showActions:[7,"showActions"],checkedResults:[8,"checkedResults"]},{selectBookmark:"selectBookmark"}),l.Pb(335544320,1,{galleryActionsTemplate:0}),l.Pb(335544320,2,{galleryTagsTemplate:0})],(function(e,t){var n=t.component;e(t,3,0),e(t,5,0),e(t,8,0),e(t,11,0,n.galleryActionsTemplate,n.galleryTagsTemplate,n.loading,n.viewMode,n.selectLabel,n.results,n.checkable,n.showActions,n.checkedResults)}),null)}var Oh=l.vb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:calc(90vh - 48px);width:calc(90vw - 48px)}"]],data:{}});function wh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"app-list-item",[],null,null,null,qb,Gb)),l.wb(1,114688,null,0,Wb,[],null,null),(e()(),l.xb(2,0,null,0,1,"app-icon",[["icon","lock"]],null,null,null,he,ge)),l.wb(3,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.Rb(-1,0,[" Premium "]))],(function(e,t){e(t,1,0),e(t,3,0,"lock")}),null)}function vh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"app-list-item",[],null,null,null,qb,Gb)),l.wb(1,114688,null,0,Wb,[],null,null),(e()(),l.Rb(-1,0,[" Animated "]))],(function(e,t){e(t,1,0)}),null)}function Ch(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"app-list-item",[],null,null,null,qb,Gb)),l.wb(1,114688,null,0,Wb,[],null,null),(e()(),l.Rb(-1,0,[" Tour "]))],(function(e,t){e(t,1,0)}),null)}function jh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,8,"app-list",[["listType","commafied"]],null,null,null,Yb,Zb)),l.wb(1,114688,null,0,Kb,[],{listType:[0,"listType"]},null),(e()(),l.nb(16777216,null,0,2,null,wh)),l.wb(3,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,0,1,null,vh)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,0,1,null,Ch)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,1,0,"commafied"),e(t,3,0,t.context.$implicit.premium&&!l.Sb(t,3,0,l.Jb(t,4).transform(n.isPremiumUser$))),e(t,6,0,t.context.$implicit.animated),e(t,8,0,t.context.$implicit.tour)}),null)}function kh(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,1,"div",[["class","import__header"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Import Chapters\n"])),(e()(),l.xb(2,0,null,null,7,"app-gallery-container",[["class","import__content"],["selectLabel","Import"]],null,[[null,"selectBookmark"]],(function(e,t,n){var l=!0;return"selectBookmark"===t&&(l=!1!==e.component.handleSelect(n)&&l),l}),yh,xh)),l.wb(3,114688,null,2,mh,[l.i],{viewMode:[0,"viewMode"],loading:[1,"loading"],selectLabel:[2,"selectLabel"],checkable:[3,"checkable"],showActions:[4,"showActions"],results:[5,"results"]},{selectBookmark:"selectBookmark"}),l.Pb(335544320,1,{galleryActionsTemplate:0}),l.Pb(335544320,2,{galleryTagsTemplate:0}),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(0,[[2,2],["galleryTags",2]],null,0,null,jh))],(function(e,t){var n=t.component;e(t,3,0,l.Sb(t,3,0,l.Jb(t,6).transform(n.viewMode$)),l.Sb(t,3,1,l.Jb(t,7).transform(n.loading$)),"Import",!1,!1,l.Sb(t,3,5,l.Jb(t,8).transform(n.results$)))}),null)}function Sh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-import-model-dialog",[],null,null,null,kh,Oh)),l.wb(1,245760,null,0,ep,[O.i,ip.l,l.i],null,null)],(function(e,t){e(t,1,0)}),null)}var Ph=l.tb("app-import-model-dialog",ep,Sh,{},{},[]);class Mh{constructor(e,t,n){this.overlay=e,this.content=t,this.data=n,this.afterClosed=new K.a,this.afterClosed$=this.afterClosed.asObservable(),e.backdropClick().subscribe(()=>this._close("backdropClick",n))}close(e){this._close("close",e)}_close(e,t){this.overlay.dispose(),this.afterClosed.next({type:e,data:t}),this.afterClosed.complete()}}class Th{constructor(e){this.popupRef=e,this.renderMethod="component"}ngOnInit(){this.content=this.popupRef.content,"string"==typeof this.content?this.renderMethod="text":this.content instanceof l.P&&(this.renderMethod="template",this.context={close:this.popupRef.close.bind(this.popupRef)})}}var Ih=l.vb({encapsulation:0,styles:[["[_nghost-%COMP%]{width:100%;height:100%}.popup[_ngcontent-%COMP%]{background:#fff;border-radius:4px;padding:8px;overflow-y:auto;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3)}"]],data:{}});function Jh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,t){e(t,0,0,t.component.content)}))}function zh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function Lh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,zh)),l.wb(2,540672,null,0,se.t,[l.S],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,n.context,n.content)}),null)}function Eh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function Ah(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Eh)),l.wb(2,671744,null,0,se.k,[l.S],{ngComponentOutlet:[0,"ngComponentOutlet"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,2,0,t.component.content)}),null)}function Fh(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,8,"div",[["class","popup"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,7,null,null,null,null,null,null,null)),l.wb(2,16384,null,0,se.q,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l.nb(16777216,null,null,1,null,Jh)),l.wb(4,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,Lh)),l.wb(6,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,Ah)),l.wb(8,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(e,t){e(t,2,0,t.component.renderMethod),e(t,4,0,"text"),e(t,6,0,"template"),e(t,8,0,"component")}),null)}function Rh(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-popup",[],null,null,null,Fh,Ih)),l.wb(1,114688,null,0,Th,[Mh],null,null)],(function(e,t){e(t,1,0)}),null)}var Dh=l.tb("app-popup",Th,Rh,{},{},[]),Uh=n("VLCt");function Nh(e){if(null==e)return"";const t=new RegExp(/[^a-zA-Z0-9_]/,"gi");return e.replace(t,"_")}class Hh{transform(e,t){return Nh(e)}}var Bh=n("3UWI");let $h=(()=>{class e{constructor(e,t,n){this.store=e,this.viewService=t,this.changeDetectorRef=n,this.defaultImage="/assets/images/view-chapter-thumbnail-placeholder.png",this.autoscroll=!0,this.ngUnsubscribe=new K.a,this.nextChapter=null}ngOnInit(){this.initChaptersObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.initScrollObserver()}initChaptersObserver(){Object(Du.b)([this.store.select(Nr.getStoryChapters),this.store.select(Nr.getSelectedChapterIndex)]).pipe(Object(Bh.a)(300),Object(Y.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{const n=t+1;this.nextChapter=n>=e.length?null:e[n],this.changeDetectorRef.markForCheck()})}initScrollObserver(){this.selectedChapterId$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.scrollChapterIntoView(e)})}handleChapterClick(e){this.viewService.selectChapter(e)}handleNextChapterClick(){this.viewService.nextChapter()}getChapterThumb(e){const t=this.store.selectSnapshot(Nr.getRegisteredThumbnails).get(e);return t?t.snapshot||t.urls.small:""}scrollChapterIntoView(e){const t=Nh(e);if(!t)return;const n=this.chapterList.nativeElement.querySelector(`[data-chapter-id=${t}]`);n&&this.autoscroll&&"scrollBehavior"in document.documentElement.style&&n.scrollIntoView({behavior:"auto",block:"nearest"})}isViewed(e){return this.store.selectSnapshot(Nr.getChaptersViewed).some(t=>t===e)}}return Object(y.__decorate)([Object(O.e)(Nr.getStoryChapters),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapters$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterId),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedChapterId$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterIndex),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedChapterIndex$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getRegisteredThumbnails),Object(y.__metadata)("design:type",Z.a)],e.prototype,"thumbnails$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getChaptersViewed),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chaptersViewed$",void 0),e})();class Vh{}class Wh{constructor(e,t,n,l,i){this.left=e,this.top=t,this.width=n,this.height=l,this.visibility=i}}var Gh=function(e){return e[e.Hidden=-1]="Hidden",e[e.Shown=1]="Shown",e}({});class qh{}let Xh=(()=>{class e{constructor(e){this.id=e}}return e.type="[Engine Camera] Clear Camera",e})(),Kh=(()=>{class e{constructor(e,t){this.id=e,this.camera=t}}return e.type="[Engine Camera] Store Camera",e})(),Zh=(()=>{class e{constructor(e,t=!0,n){this.camera=e,this.animate=t,this.animationDuration=n}}return e.type="[Engine Camera] Set Camera",e})(),Yh=(()=>{class e{constructor(){}}return e.type="[Engine Camera] Set Camera Success",e})(),Qh=(()=>{class e{constructor(e){this.cameraMotion=e}}return e.type="[Engine Camera] Move Camera",e})(),em=(()=>{class e{constructor(){}}return e.type="[Engine Camera] Reset Camera",e})(),tm=(()=>{class e{constructor(e){this.value=e}}return e.type="[Engine Camera] Zoom Camera",e})(),nm=(()=>{class e{constructor(e){this.value=e}}return e.type="[Engine Camera] Zoom Camera Static",e})(),lm=(()=>{class e{constructor(e){this.value=e}}return e.type="[Engine Camera] Pan Camera X",e})(),im=(()=>{class e{constructor(e){this.value=e}}return e.type="[Engine Camera] Pan Camera Y",e})(),am=(()=>{class e{constructor(e,t,n){this.x=e,this.y=t,this.z=n}}return e.type="[Engine Camera] Pan Camera Static",e})(),om=(()=>{class e{constructor(e){this.value=e}}return e.type="[Engine Camera] Rotate Camera X",e})(),sm=(()=>{class e{constructor(e){this.value=e}}return e.type="[Engine Camera] Rotate Camera Y",e})(),rm=(()=>{class e{constructor(e,t){this.x=e,this.y=t}}return e.type="[Engine Camera] Rotate Camera Static",e})(),cm=(()=>{class e{constructor(e){this.mode=e}}return e.type="[Engine Camera] Set Camera Mode",e})(),um=(()=>{class e{constructor(e){this.zoomed=e}}return e.type="[Engine Camera] Set Zoomed",e})(),pm=(()=>{class e{constructor(e){this.lock=e}}return e.type="[Engine Camera] Lock camera",e})(),dm=(()=>{class e{constructor(e){this.camera=e}}return e.type="[Engine Camera] Set Camera Fly To",e})(),bm=(()=>{class e{constructor(e){this.patches=e}}return e.type="[Engine Camera] Patch Camera State",e})();class gm{constructor(e=0,t=0,n=0,l=0,i=0,a=!1){this.zoom=e,this.panX=t,this.panY=n,this.rotateX=l,this.rotateY=i,this.applyFriction=a}}var hm;const mm={storedCameras:{},cameraMotion:new gm,panMode:"rotate",zoomed:!1,lockCamera:!1,cameraFlyTo:void 0};let xm=(()=>{let e=hm=class{constructor(e,t){this.cameraService=e,this.store=t}static getStoredCamera(e){return Object(O.j)([hm],t=>t.storedCameras[e]||null)}static getCameraMotion(e){return e.cameraMotion}static getPanMode(e){return e.panMode}static getZoomed(e){return e.zoomed}static getLockCamera(e){return e.lockCamera}storeCamera(e,t){const n=t.camera||this.cameraService.getCamera(),l=e.getState().storedCameras;l[t.id]=Object.assign({},n),e.patchState({storedCameras:Object.assign({},l)})}clearCamera(e,t){const n=e.getState().storedCameras;delete n[t.id],e.patchState({storedCameras:Object.assign({},n)})}setCameraFlyTo(e,t){e.patchState(immer.produce(e.getState(),e=>{e.cameraFlyTo=t.camera}))}applyCameraPatch(e,t){const n=immer.applyPatches(e.getState(),t.patches);e.patchState(n);const l=void 0===n.cameraFlyTo?this.store.selectSnapshot(Nr.getChapterCamera):n.cameraFlyTo;e.dispatch(new Zh(l,!0,1))}moveCamera(e,t){e.patchState({cameraMotion:Object.assign({},t.cameraMotion)})}resetCamera(e,t){return this.cameraService.resetCamera().pipe(Object(Zn.a)(()=>{e.patchState({cameraMotion:new gm})}))}zoomCamera(e,t){const{cameraMotion:n}=e.getState();n.zoom=t.value,e.patchState({cameraMotion:Object.assign({},n)})}panCameraX(e,t){const{cameraMotion:n}=e.getState();n.panX=t.value,e.patchState({cameraMotion:Object.assign({},n)})}panCameraY(e,t){const{cameraMotion:n}=e.getState();n.panY=t.value,e.patchState({cameraMotion:Object.assign({},n)})}rotateCameraX(e,t){const{cameraMotion:n}=e.getState();e.patchState({cameraMotion:Object.assign({},n,{rotateX:t.value})})}rotateCameraY(e,t){const{cameraMotion:n}=e.getState();n.rotateY=t.value,e.patchState({cameraMotion:Object.assign({},n)})}SetCameraMode(e,t){e.patchState({panMode:t.mode})}setZoomed(e,t){e.patchState({zoomed:t.zoomed})}lockCamera(e,t){e.patchState({lockCamera:t.lock})}};return Object(y.__decorate)([Object(O.a)(Kh),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Kh]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"storeCamera",null),Object(y.__decorate)([Object(O.a)(Xh),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Xh]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"clearCamera",null),Object(y.__decorate)([Object(O.a)(dm),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,dm]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setCameraFlyTo",null),Object(y.__decorate)([Object(O.a)(bm),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,bm]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"applyCameraPatch",null),Object(y.__decorate)([Object(O.a)(Qh),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Qh]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"moveCamera",null),Object(y.__decorate)([Object(O.a)(em),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,em]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetCamera",null),Object(y.__decorate)([Object(O.a)(tm),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,tm]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"zoomCamera",null),Object(y.__decorate)([Object(O.a)(lm),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,lm]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"panCameraX",null),Object(y.__decorate)([Object(O.a)(im),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,im]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"panCameraY",null),Object(y.__decorate)([Object(O.a)(om),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,om]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"rotateCameraX",null),Object(y.__decorate)([Object(O.a)(sm),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,sm]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"rotateCameraY",null),Object(y.__decorate)([Object(O.a)(cm),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,cm]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"SetCameraMode",null),Object(y.__decorate)([Object(O.a)(um),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,um]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setZoomed",null),Object(y.__decorate)([Object(O.a)(pm),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,pm]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"lockCamera",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[qh]),Object(y.__metadata)("design:returntype",void 0)],e,"getCameraMotion",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[qh]),Object(y.__metadata)("design:returntype",void 0)],e,"getPanMode",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[qh]),Object(y.__metadata)("design:returntype",void 0)],e,"getZoomed",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[qh]),Object(y.__metadata)("design:returntype",void 0)],e,"getLockCamera",null),hm=Object(y.__decorate)([Object(O.g)({name:"engineCamera",defaults:mm})],e)})();var fm=function(e){return e.Select="Select",e.Hide="Hide",e.Paint="Paint",e.Label="Label",e.Isolate="Isolate",e.Fade="Fade",e.Position="Position",e}({});let _m=(()=>{class e{constructor(e){this.http=e,this.wikiCache=new Map}getWikiText(e,t=!0){if(t&&this.wikiCache.has(e)){const t=this.wikiCache.get(e);return Object(z.a)(t)}return this.http.get(`/search/wiki?name=${e}`).pipe(Object(u.a)(e=>e.description),Object(L.a)(e=>404===e.status?Object(z.a)(""):Object(ns.a)(e)),Object(Zn.a)(t=>this.wikiCache.set(e,t)))}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(c.c))},token:e,providedIn:"root"}),e})();var ym;const Om=new Wh(0,0,0,0,Gh.Hidden);let wm=(()=>{let e=ym=class{constructor(e,t,n,l,i){this.store=e,this.graphService=t,this.engineService=n,this.wikiService=l,this.animationService=i}static getEngine(e){return e.engine}static getReady(e){return e.ready}static getDisplay(e){return e.display}static getScrollMode(e){return e.scrollMode}static getVisible(e){return e.visible}static getViewGraph(e){return e.viewGraph}static getViewGraphNode(e){return t=>e.viewGraph.nodes[t]}static getEnginePosition(e){return e.enginePosition}static getChapter(e){return e.chapter}static getActiveTool(e){return e.activeTool}static getShowCameraBar(e){return e.showCameraBar}static getShowProgressBar(e){return e.showProgressBar}static getShowLabels(e){return e.showLabels}static getChapterInit(e){return e.chapterInit}static getAnimationPlaying(e){return e.animationPlaying}static getPlayAudio(e){return e.playAudio}static getAutoplay(e){return e.autoplay}static getXrayModeEnabled(e){return e.xrayModeEnabled}static getHoveredNode(e){return e.hoveredNode}static getLabelEditNode(e){return e.labelEditNode}static getQuerying(e){return e.queryingWiki}load(e,t){e.dispatch(new pi("engine"))}loadSuccess({patchState:e},t){e({engine:t.result})}setReady(e,t){e.patchState({ready:t.ready})}setDisplay(e,t){e.patchState({display:t.display})}setZoomViaScrollAllowed(e,t){e.patchState({scrollMode:t.scrollMode})}setVisible(e,t){e.patchState({visible:t.visible})}setEnginePosition(e,t){e.patchState({enginePosition:Object.assign({},t.position,{right:t.position.left+t.position.width,bottom:t.position.top+t.position.height})})}resetEnginePosition(e,t){e.patchState({enginePosition:Om})}setChapter(e,t){e.patchState({chapter:t.chapterId})}setChapterInit(e,t){e.patchState({chapterInit:t.chapterInit})}setActiveTool(e,t){e.patchState({activeTool:t.tool})}setGraph(e,t){e.patchState({viewGraph:Object.assign({},t.graph)})}clearGraph(e,t){e.patchState({viewGraph:{nodes:{},successors:{},predecessors:{},roots:{}}})}setXrayMode(e,t){e.patchState({xrayModeEnabled:t.enabled})}centerCameraOnVisible(e,t){const n=this.engineService.getVisibleLeaves(),l=this.engineService.getBoundaryFromObjects(n),i=this.engineService.getCameraLookAt();i.look={x:(l.xmin+l.xmax)/2,y:(l.ymin+l.ymax)/2,z:(l.zmin+l.zmax)/2},Human.renderer.camera.fly.flyTo(i)}toggleProgressBar(e,t){e.patchState({showProgressBar:t.show})}toggleCameraBar(e,t){e.patchState({showCameraBar:t.show})}toggleLabels(e,t){const n=null!=t.show?t.show:!e.getState().showLabels;e.patchState({showLabels:n})}synchronizeVisibleNodes(e,t){const n=e.getState().viewGraph,l=this.stateMapToNodeIds(n,t.leafVisibilityState),i={};l.forEach(e=>{const n=this.engineService.getLeafObjects(e).reduce((e,n)=>e||t.nodes[n].shown,!1);i[e]={shown:n}}),this.graphService.synchronize(Object.assign({},n),{shown:"trueWins"},i),e.patchState({viewGraph:Object.assign({},n)})}synchronizeRenderableNodes(e,t){const n=e.getState().viewGraph,l=this.stateMapToNodeIds(n,t.leafRenderableState),i={};l.forEach(e=>{i[e]={renderable:!0}}),this.graphService.synchronize(n,{renderable:"falseWins"},i)}synchronizePickableNodes(e,t){const n=e.getState().viewGraph,l=this.stateMapToNodeIds(n,t.leafPickableState),i={};l.forEach(e=>{const t=this.engineService.getLeafObjects(e).reduce((e,t)=>e||Human.scene.objects[t].pickable,!1);i[e]={pickable:t}}),this.graphService.synchronize(n,{pickable:"trueWins"},i),e.patchState({viewGraph:Object.assign({},n)})}playChapterAnimation(e,t){const n=this.store.selectSnapshot(Nr.getSelectedChapter),l=Object(Mt.get)(n,"ui.play.count",0);this.animationService.play({startChapterId:n.id,loop:-1===l,numChapters:1,queue:!1}),e.getState().animationPlaying||this.animationService.pause()}toggleAnimation(e,t){const n=this.store.selectSnapshot(Nr.getSelectedChapterId);t.play?this.animationService.unpause(n):this.animationService.pause()}setAnimationPlaying(e,t){e.patchState({animationPlaying:t.playing})}playAudio(e,t){e.patchState({playAudio:t.play})}setAutoplay(e,t){e.patchState({autoplay:t.enable})}setObjectLayerOrder(e,t){const n=e.getState().viewGraph,l=isNaN(t.layer)?0:t.layer;let i=[];t.nodes.forEach(e=>{const t=this.graphService.getDescendants(n,e.id,!0);i=i.concat(t)}),i.forEach(e=>{this.engineService.setObjectLayer(e,l),this.graphService.setState(n,e,{layer:l})}),e.patchState({viewGraph:Object.assign({},n)})}setObjectDisplayName(e,t){const n=Human.scene.objects[t.nodeId];n&&(n.displayName=t.displayName)}autoSortObjectLayers(e,t){const n=e.getState().viewGraph;let l=0;const i=Human.scene.getEnabledLeaves(),a=this.engineService.getObjectLayerValues(i);Object.keys(a).map(e=>parseInt(e,10)).sort((e,t)=>e-t).forEach(e=>{a[e].sort((e,t)=>t.value-e.value).forEach(e=>{const t=20*l;this.engineService.setObjectLayer(e.nodeId,t),this.graphService.setState(n,e.nodeId,{layer:t}),l++})}),e.patchState({viewGraph:Object.assign({},n)})}resetObjectLayers(e,t){const n=e.getState().viewGraph;Human.scene.getEnabledLeaves().forEach(e=>{this.engineService.setObjectLayer(e,0),this.graphService.setState(n,e,{layer:0})}),e.patchState({viewGraph:Object.assign({},n)})}setPostProcessingEffects(e,{effects:t}){this.engineService.setPostProcessingFeatures(t)}setProperties(e,{properties:t}){this.engineService.setProperties(Object.assign({},t))}setTransparencyMode(e,{mode:t}){this.engineService.setTransparencyMode(t)}expandNode(e,t){const n=this.store.selectSnapshot(ym.getViewGraph);ks.getAncestors(n,t.node.id,!0).forEach(e=>{n.nodes[e].boolState.expanded=!0}),this.store.dispatch(new _i(n))}collapseNode(e,t){const n=this.store.selectSnapshot(ym.getViewGraph);n.nodes[t.node.id].boolState.expanded=!1,this.store.dispatch(new _i(n))}hoverNode(e,t){e.patchState({hoveredNode:t.node})}setLabelEditNode(e,t){e.patchState({labelEditNode:t.node})}queryNodeInfo(e,{node:t}){e.patchState({queryingWiki:!0}),this.wikiService.getWikiText(t.label).pipe(Object(B.a)(()=>e.patchState({queryingWiki:!1}))).subscribe(n=>e.dispatch(new ta(t,n)),()=>e.dispatch(new na(t)))}queryNodeInfoSuccess(e,{node:t,description:n}){e.dispatch(new Qi(t,n))}setNodeInfo(e,{node:t,description:n}){const l=this.store.selectSnapshot(ym.getViewGraph),i=l.nodes[t.id];i&&(i.description=n,this.store.dispatch(new _i(l)))}stateMapToNodeIds(e,t){const n=Object.keys(t).map(t=>this.engineService.getNode(e,t)).filter(e=>!!e).map(e=>e.id);return new Set(n)}};return Object(y.__decorate)([Object(O.a)(ui),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ui]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"load",null),Object(y.__decorate)([Object(O.a)(pi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,pi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loadSuccess",null),Object(y.__decorate)([Object(O.a)(di),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,di]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setReady",null),Object(y.__decorate)([Object(O.a)(bi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,bi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setDisplay",null),Object(y.__decorate)([Object(O.a)(gi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,gi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setZoomViaScrollAllowed",null),Object(y.__decorate)([Object(O.a)(mi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,mi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setVisible",null),Object(y.__decorate)([Object(O.a)($i),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,$i]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setEnginePosition",null),Object(y.__decorate)([Object(O.a)(Vi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Vi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetEnginePosition",null),Object(y.__decorate)([Object(O.a)(wi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,wi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setChapter",null),Object(y.__decorate)([Object(O.a)(vi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,vi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setChapterInit",null),Object(y.__decorate)([Object(O.a)(zi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,zi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setActiveTool",null),Object(y.__decorate)([Object(O.a)(_i),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,_i]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setGraph",null),Object(y.__decorate)([Object(O.a)(yi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,_i]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"clearGraph",null),Object(y.__decorate)([Object(O.a)(Oi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Oi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setXrayMode",null),Object(y.__decorate)([Object(O.a)(ki),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ki]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"centerCameraOnVisible",null),Object(y.__decorate)([Object(O.a)(Ii),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ii]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"toggleProgressBar",null),Object(y.__decorate)([Object(O.a)(Ti),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ti]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"toggleCameraBar",null),Object(y.__decorate)([Object(O.a)(Ji),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ji]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"toggleLabels",null),Object(y.__decorate)([Object(O.a)(Si),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Si]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"synchronizeVisibleNodes",null),Object(y.__decorate)([Object(O.a)(Pi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Pi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"synchronizeRenderableNodes",null),Object(y.__decorate)([Object(O.a)(Mi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Mi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"synchronizePickableNodes",null),Object(y.__decorate)([Object(O.a)(Li),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Li]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"playChapterAnimation",null),Object(y.__decorate)([Object(O.a)(Ei),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ei]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"toggleAnimation",null),Object(y.__decorate)([Object(O.a)(Ai),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ai]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setAnimationPlaying",null),Object(y.__decorate)([Object(O.a)(Fi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Fi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"playAudio",null),Object(y.__decorate)([Object(O.a)(Di),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Di]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setAutoplay",null),Object(y.__decorate)([Object(O.a)(Ui),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ui]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setObjectLayerOrder",null),Object(y.__decorate)([Object(O.a)(Ni),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ni]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setObjectDisplayName",null),Object(y.__decorate)([Object(O.a)(Hi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Hi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"autoSortObjectLayers",null),Object(y.__decorate)([Object(O.a)(Bi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Bi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetObjectLayers",null),Object(y.__decorate)([Object(O.a)(Wi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Wi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setPostProcessingEffects",null),Object(y.__decorate)([Object(O.a)(Gi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Gi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setProperties",null),Object(y.__decorate)([Object(O.a)(qi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,qi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setTransparencyMode",null),Object(y.__decorate)([Object(O.a)(Xi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Xi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"expandNode",null),Object(y.__decorate)([Object(O.a)(Ki),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ki]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"collapseNode",null),Object(y.__decorate)([Object(O.a)(Zi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Zi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"hoverNode",null),Object(y.__decorate)([Object(O.a)(Yi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Yi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setLabelEditNode",null),Object(y.__decorate)([Object(O.a)(ea),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ea]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"queryNodeInfo",null),Object(y.__decorate)([Object(O.a)(ta),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ta]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"queryNodeInfoSuccess",null),Object(y.__decorate)([Object(O.a)(Qi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Qi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setNodeInfo",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getEngine",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getReady",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getDisplay",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getScrollMode",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getVisible",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getViewGraph",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getViewGraphNode",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getEnginePosition",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getChapter",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getActiveTool",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getShowCameraBar",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getShowProgressBar",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getShowLabels",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getChapterInit",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getAnimationPlaying",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getPlayAudio",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getAutoplay",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getXrayModeEnabled",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getHoveredNode",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getLabelEditNode",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Vh]),Object(y.__metadata)("design:returntype",void 0)],e,"getQuerying",null),ym=Object(y.__decorate)([Object(O.g)({name:"engine",defaults:{loading:!1,ready:!1,viewGraph:{nodes:{},successors:{},predecessors:{},roots:{}},hoveredNode:void 0,labelEditNode:void 0,queryingWiki:!1,engine:"",chapter:"",chapterInit:{id:"",init:!1,camera:!1,annotations:!1,graph:!1,properties:!1,particles:!1,clips:!1,postprocessing:!1,transparency:!1},showProgressBar:!0,showCameraBar:!0,showLabels:!0,activeTool:fm.Select,animationPlaying:!0,autoplay:!0,playAudio:!1,display:!0,visible:!0,scrollMode:qo.Capture,xrayModeEnabled:!1},children:[xm]})],e)})();var vm=function(e){return e.Hide="hide",e.Show="show",e.Collapse="collapse",e}({}),Cm=function(e){return e.None="none",e.Small="small",e.Full="full",e}({}),jm=function(e){return e.None="none",e.Circle="circle",e.Bar="bar",e}({});class km{constructor(e=vm.Hide,t=!0){this.status=e,this.enable=t}}var Sm,Pm=n("qpAl"),Mm=n.n(Pm);!function(e){function t(t){if(i()){if(t||(t=document.body),e.isFullscreen())return;Mm.a.prefixed("requestFullscreen",document.body)()}}function n(){i()&&Mm.a.prefixed("exitFullscreen",document)()}function l(){return Mm.a.fullscreen&&Mm.a.prefixed("fullscreenEnabled",document)}function i(){return!!l()||(console.warn("Fullscreen is not enabled"),!1)}function a(){return Mm.a.prefixed("fullscreenElement",document)}e.toggleFullscreen=function(e){null===a()?t(e):n()},e.requestFullscreen=t,e.exitFullscreen=n,e.canFullscreen=l,e.checkFullscreenSupport=i,e.getFullscreenElement=a,e.isFullscreen=function(){return null!=a()},e.onFullscreenChange=function(){const e="mozfullscreenchange webkitfullscreenchange MSFullscreenChange fullscreenchange".split(" ").map(e=>Object(Zd.a)(document.body,e));return Object(Uu.a)(...e)}}(Sm||(Sm={}));var Tm=function(e){return e.Light="light",e.Dark="dark",e.Themed="themed",e}({});let Im=(()=>{class e{constructor(e,t){this.store=e,this.graphService=t,this.theme=Tm.Dark,this.ngUnsubscribe=new K.a}ngOnInit(){this.store.select(Xs.getCheckedNodes).pipe(Object(Q.a)(e=>1===e.length),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{setTimeout(()=>{this.scrollNodeIntoView(e[0])})})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}scrollNodeIntoView(e){const t=this.graphService.sanitizeNodeID(e.objectId),n=document.querySelector(`[data-id=${t}]`);n&&"scrollBehavior"in document.documentElement.style&&n.scrollIntoView({behavior:"smooth",block:"nearest"})}}return Object(y.__decorate)([Object(O.e)(wm.getViewGraph),Object(y.__metadata)("design:type",Z.a)],e.prototype,"viewGraph$",void 0),e})();var Jm=n("C9yA"),zm=function(e){return e[e.List=0]="List",e[e.Tree=1]="Tree",e}({});class Lm{constructor(e,t,n,i,a){this.renderer=e,this.changeDetectorRef=t,this.elementRef=n,this.engineService=i,this.store=a,this._query="",this._displayMode=zm.List,this.displayModeChange=new l.n,this.theme=Tm.Dark,this.treeSearchDisplayMode=zm,this.searchResults=[],this.searchHeight=0,this.ngUnsubscribe=new K.a}get query(){return this._query}set query(e){this._query=e||"",this.handleQueryChange()}get displayMode(){return this._displayMode}set displayMode(e){null!=e&&(this._displayMode=e,this.handleQueryChange(),this.displayModeChange.emit(this.displayMode))}get viewGraph(){return this._viewGraph}set viewGraph(e){this._viewGraph=e,this.leafNodes=this.engineService.getLeaves(),this.buildPrunedViewGraph(this.displayMode),this.handleQueryChange(),this.changeDetectorRef.markForCheck()}ngOnInit(){}buildPrunedViewGraph(e){const t=this.store.selectSnapshot(Nr.getSelectedChapter),n=this.engineService.createViewGraph(t.showObjects,!0);this.prunedViewGraph=n}ngAfterViewInit(){this.renderer.listen("window","resize",e=>{this.resize()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleQueryChange(){const e=this.search(this._query,this.displayMode===zm.List?this.prunedViewGraph:this.viewGraph);this.displayMode===zm.Tree&&(this.searchGraph=function(e,t){return t.reduce((t,n)=>(function e(t,n,l){ks.addNode(t,n);const i=ks.getAncestor(l,n.id);if(i){const a=t.successors[i]||[];return a.push(n.id),t.successors[i]=Object(Mt.uniq)(a),t.predecessors[n.id]=i,e(t,ks.getNode(l,i),l)}return ks.addRootNode(t,n),t})(t,n,e),{nodes:{},successors:{},predecessors:{},roots:{}})}(this.viewGraph,e)),this.searchResults=e,this.resize()}resize(){this.getSearchHeight().pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.searchHeight=e,this.changeDetectorRef.markForCheck()})}getSearchHeight(){return new Z.a(e=>{setTimeout(()=>{const t=this.elementRef.nativeElement.offsetHeight;null!=t&&(e.next(t),e.complete())})})}search(e,t){return void 0===t?[]:(e=e.toLowerCase(),Object.values(t.nodes).filter(t=>0===e.length||Object(Jm.remove)(t.label.toLowerCase()).indexOf(e)>=0).sort((e,t)=>e.label.localeCompare(t.label)))}trackTreeNode(e,t){return t.id}}var Em=function(e){return e[e.Interact=0]="Interact",e[e.Loader=1]="Loader",e[e.Tutorial=2]="Tutorial",e[e.Annotate=3]="Annotate",e[e.Help=4]="Help",e}({});const Am=[4,8,12,16,24,32].reverse().map(e=>({label:`${e}`,size:e})),Fm=kc.map(e=>{const{label:t,recipe:n}=e,l=Array.isArray(n.tintColor)?n.tintColor:[1,1,1];return{label:t,color:Ye.rgbToHex(l,!0)}}),Rm=Am[4],Dm=Fm[0];var Um;class Nm{}const Hm={audio:new km,camera:new km(vm.Show,!0),chapterList:new km(vm.Show,!1),column:new km,description:new km,drawer:new class extends km{constructor(e=!1){super(),this.isExpandedInitially=e}},fullscreen:new km,help:new km,labelInfo:new km,labelList:new km(vm.Show,!1),loader:new class extends km{constructor(e=jm.Bar){super(),this.template=e}},logo:new class extends km{constructor(e=!0){super(),this.isHyperLink=e}},media:new class extends km{constructor(e=Cm.Small){super(),this.template=e}},menu:new km,nodeInfo:new km(vm.Hide,!1),pagination:new km,presenter:new km(vm.Hide,!1),reset:new km,search:new km,titleOnly:new km,toolbar:new km,tools:new km,anatomyLabels:new km,tutorial:new km(vm.Hide,!1),internetExplorerWarning:new km,legend:new km,annotate:new km(vm.Hide,!1)},Bm={labelsBreakpoint:480,inputEnabled:!0,fullscreenActive:!1,presentationActive:!1,drawerCoversContent:!1,searchDisplayMode:zm.Tree,showNodeInfo:!1,interactType:Go.Play,help:{tab:ee.Basics},usePrintImage:!1,multiPickModeEnabled:!1,canHover:!1,canTouch:!1,canFullscreen:!1,layout:Hm,initialLayout:Hm,openWindows:[Em.Loader],tutorial:{pageSize:0,pageIndex:-1},annotate:{enabled:!1,brushSize:Rm.size,brushColor:Dm.color},menuOpen:!1};let $m=(()=>{let e=Um=class{static getLayout(e){return e.layout}static getInitialLayout(e){return e.initialLayout}static getLabelsBreakpoint(e){return e.labelsBreakpoint}static getInputEnabled(e){return e.inputEnabled}static getFullscreenActive(e){return e.fullscreenActive}static getPresentationActive(e){return e.presentationActive}static getDrawerCoversContent(e){return e.drawerCoversContent}static getShowNodeInfo(e){return e.showNodeInfo}static getInteractType(e){return e.interactType}static getShowHelpTab(e){return e.help.tab}static getTutorial(e){return e.tutorial}static getAnnotateEnabled(e){return e.annotate.enabled}static getAnnotateBrushSize(e){return e.annotate.brushSize}static getAnnotateBrushColor(e){return e.annotate.brushColor}static getCanTouch(e){return e.canTouch}static getCanHover(e){return e.canHover}static getMultiPickModeEnabled(e){return e.multiPickModeEnabled}static getSearchDisplayMode(e){return e.searchDisplayMode}static getUsePrintImage(e){return e.usePrintImage}static getOpenWindow(e){return e.openWindows.length>0?e.openWindows.sort()[0]:null}static getMenuOpen(e){return e.menuOpen}static shouldWindowOpen(e){return Object(O.j)([Um],t=>t.openWindows.indexOf(e)>=0)}setLayout(e,t){const n=e.getState().layout;e.patchState({layout:Object.assign({},n,t.layout)})}setInitialLayout(e,{layout:t}){e.patchState({initialLayout:t})}setInputEnabled(e,t){e.patchState({inputEnabled:t.enabled})}setCanHover(e,t){e.patchState({canHover:t.canHover})}setCanTouch(e,t){e.patchState({canTouch:t.canTouch})}setCanFullscreen(e,t){e.patchState({canFullscreen:t.canFullscreen})}setSearchDisplayMode(e,t){e.patchState({searchDisplayMode:t.mode})}toggleNodeInfo(e,t){e.patchState({showNodeInfo:t.show})}togglePresentation(e,t){e.patchState({presentationActive:t.active})}toggleHelp(e,t){e.patchState({help:{tab:t.tab}})}setLoaderType(e,t){e.patchState({interactType:t.interactType})}setTutorial(e,t){const n=e.getState().tutorial;e.patchState({tutorial:Object.assign({},n,t.tutorial)})}startTutorial(e,t){e.patchState({tutorial:Object.assign({},e.getState().tutorial,{pageIndex:t.intro?-1:0})})}tutorialPrevious(e,t){const n=e.getState().tutorial,l=Math.max(n.pageIndex-1,0);e.dispatch(new X.SetTutorial(Object.assign({},n,{pageIndex:l})))}tutorialNext(e,t){const n=e.getState().tutorial,l=Math.min(n.pageIndex+1,n.pageSize-1);e.dispatch(new X.SetTutorial(Object.assign({},n,{pageIndex:l})))}setAnnotateEnabled(e,{enabled:t}){e.patchState({annotate:Object.assign({},e.getState().annotate,{enabled:t})})}setAnnotateBrushSize(e,{brushSize:t}){e.patchState({annotate:Object.assign({},e.getState().annotate,{brushSize:t})})}setAnnotateBrushColor(e,{brushColor:t}){e.patchState({annotate:Object.assign({},e.getState().annotate,{brushColor:t})})}setMultiPickModeEnabled(e,t){e.patchState({multiPickModeEnabled:t.enabled})}setLabelBreakpoint(e,t){e.patchState({labelsBreakpoint:t.labelsBreakpoint})}setUsePrintImage(e,t){e.patchState({usePrintImage:t.usePrintImage})}setWindows(e,t){e.patchState({openWindows:t.windows})}openWindow(e,t){const n=e.getState().openWindows;n.indexOf(t.window)<0&&e.patchState({openWindows:[t.window,...n]})}closeWindow(e,t){let n=e.getState().openWindows;null!=t.window?n=n.filter(e=>e!==t.window):n.shift(),e.patchState({openWindows:[...n]})}toggleWindow(e,t){const n=e.getState().openWindows.indexOf(t.window)>=0;e.dispatch((null!=t.show?t.show:!n)?new X.OpenWindow(t.window):new X.CloseWindow(t.window))}toggleMenu(e,t){e.patchState({menuOpen:t.open})}ngxsOnInit(e){Sm.onFullscreenChange().subscribe(t=>{e.patchState({fullscreenActive:Sm.isFullscreen()})})}};return Object(y.__decorate)([Object(O.a)(X.SetLayout),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetLayout]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setLayout",null),Object(y.__decorate)([Object(O.a)(X.SetInitialLayout),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetInitialLayout]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setInitialLayout",null),Object(y.__decorate)([Object(O.a)(X.SetInputEnabled),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetInputEnabled]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setInputEnabled",null),Object(y.__decorate)([Object(O.a)(X.SetCanHover),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetCanHover]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setCanHover",null),Object(y.__decorate)([Object(O.a)(X.SetCanTouch),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetCanTouch]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setCanTouch",null),Object(y.__decorate)([Object(O.a)(X.SetCanFullscreen),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetCanFullscreen]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setCanFullscreen",null),Object(y.__decorate)([Object(O.a)(X.SetSearchDisplayMode),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetSearchDisplayMode]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setSearchDisplayMode",null),Object(y.__decorate)([Object(O.a)(X.ToggleNodeInfo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.ToggleNodeInfo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"toggleNodeInfo",null),Object(y.__decorate)([Object(O.a)(X.TogglePresentation),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.TogglePresentation]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"togglePresentation",null),Object(y.__decorate)([Object(O.a)(X.ToggleHelpTab),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.ToggleHelpTab]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"toggleHelp",null),Object(y.__decorate)([Object(O.a)(X.SetInteractType),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetInteractType]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setLoaderType",null),Object(y.__decorate)([Object(O.a)(X.SetTutorial),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetTutorial]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setTutorial",null),Object(y.__decorate)([Object(O.a)(X.StartTutorial),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.StartTutorial]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"startTutorial",null),Object(y.__decorate)([Object(O.a)(X.TutorialPrevious),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.TutorialPrevious]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"tutorialPrevious",null),Object(y.__decorate)([Object(O.a)(X.TutorialNext),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.TutorialNext]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"tutorialNext",null),Object(y.__decorate)([Object(O.a)(X.SetAnnotateEnabled),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetAnnotateEnabled]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setAnnotateEnabled",null),Object(y.__decorate)([Object(O.a)(X.SetAnnotateBrushSize),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetAnnotateBrushSize]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setAnnotateBrushSize",null),Object(y.__decorate)([Object(O.a)(X.SetAnnotateBrushColor),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetAnnotateBrushColor]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setAnnotateBrushColor",null),Object(y.__decorate)([Object(O.a)(X.SetMultiPickModeEnabled),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetMultiPickModeEnabled]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setMultiPickModeEnabled",null),Object(y.__decorate)([Object(O.a)(X.SetLabelBreakpoint),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetLabelBreakpoint]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setLabelBreakpoint",null),Object(y.__decorate)([Object(O.a)(X.SetUsePrintImage),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetUsePrintImage]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setUsePrintImage",null),Object(y.__decorate)([Object(O.a)(X.SetWindows),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.SetWindows]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setWindows",null),Object(y.__decorate)([Object(O.a)(X.OpenWindow),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.OpenWindow]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"openWindow",null),Object(y.__decorate)([Object(O.a)(X.CloseWindow),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.CloseWindow]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"closeWindow",null),Object(y.__decorate)([Object(O.a)(X.ToggleWindow),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.ToggleWindow]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"toggleWindow",null),Object(y.__decorate)([Object(O.a)(X.ToggleMenu),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,X.ToggleMenu]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"toggleMenu",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getLayout",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getInitialLayout",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getLabelsBreakpoint",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getInputEnabled",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getFullscreenActive",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getPresentationActive",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getDrawerCoversContent",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getShowNodeInfo",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getInteractType",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getShowHelpTab",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getTutorial",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getAnnotateEnabled",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getAnnotateBrushSize",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getAnnotateBrushColor",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getCanTouch",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getCanHover",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getMultiPickModeEnabled",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getSearchDisplayMode",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getUsePrintImage",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getOpenWindow",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Nm]),Object(y.__metadata)("design:returntype",void 0)],e,"getMenuOpen",null),Um=Object(y.__decorate)([Object(O.g)({name:"view",defaults:Bm})],e)})();var Vm=function(e){return e[e.Content=0]="Content",e[e.Label=1]="Label",e[e.Tools=2]="Tools",e[e.Search=3]="Search",e[e.Help=4]="Help",e[e.NodeInfo=5]="NodeInfo",e[e.LabelInfo=6]="LabelInfo",e}({});const Wm=["ui-bd.class","ui-play-pause","ui-camera-mode","ui-center","ui-cross-section","ui-dissect","ui-fs","ui-tools-display","ui-tree","ui-zoom","ui-zoom-in","ui-zoom-out","ui-pan","ui-share","ui-keys","ui-slider","o","background.color-stops","background.gradient-type","dd","dn","image-display","imageDisplay","imageSrc","pre","referrer"];function Gm(e){const{id:t,s:n,m:l,be:i,b:a}=e;let o="";if(t)o=t;else if(i)o=i;else if(a){const e=parseInt(a,10);o=Number.isNaN(e)?"":function(e){const t=[];let n,l=e;for(;l>0;)[l,n]=(i=l,[Math.floor(i/62),i%62]),t.unshift("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"[n]);var i;return t.join("")}(e)}else l&&(o=function(e,t="male"){return e.includes("/")?e:`production/${t}Adult/${e}`}(l,"female"===n?"female":"male"));return o.replace(/\.json$/,"")}function qm(e){return Gm(e).includes("/")?"module":"bookmark"}const Xm={type:e=>qm(e),id:e=>Gm(e),background:e=>e.bgstd||e["background.colors"]||e.background};function Km(e){if(3===e.length){const{0:t,1:n,2:l}=e;return{x:t,y:n,z:l}}return null}const Zm={camera:function(e){const t=e.split(",").map(e=>parseFloat(e));if(t.length%3==0&&!t.some(e=>Number.isNaN(e))){const e=t.slice(0,3),n=t.slice(3,6),l=t.slice(6,9);return{eye:Km(e),look:Km(n),up:Km(l)}}return null},background:function(e){const t=Ye.getColors(e);if(t){const e=[...t[0][255],...t[1][255]];return new $o(e,"radial",[0,100])}return null}};function Ym(e){const t=function(e){const t=Object.keys(e),n=t.filter(e=>Wm.includes(e));if(n.length>0){const e=[`The following URL parameters have been deprecated: "${n.join('", "')}"`,"Please contact support@biodigital.com for more information."];console.warn(e.join("\n"))}return t.reduce((e,t)=>(Wm.includes(t)&&delete e[t],e),e)}(e);var n;return function(e){const t=e=>{if(e){const t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if(!isNaN(Number(t)))return Number(t)}return e};return Object.keys(e).reduce((n,l)=>{const i=(Zm[l]||t)(e[l]);return"load-rotate"===l&&isNaN(Number(i))?n:(n[l]=i,n)},{})}((n=t,Object.keys(Xm).filter(e=>void 0===n[e]).reduce((e,t)=>{const l=(0,Xm[t])(n);return void 0!==l&&(e[t]=l),e},n)))}let Qm=(()=>{class e{constructor(e){this.store=e}chapterHasTransition(e,t){const n=t?"transitions.pre":"transitions.post",l=Object(Mt.get)(e,n);return!!l&&(t?l.onPrevious:l.onNext)}searchChapterTransitions(e,t,n){let l=[...n],i=l.findIndex(t=>t.id===e),a=l.findIndex(e=>e.id===t);const o=a<i;if(o&&(i=(l=l.reverse()).findIndex(t=>t.id===e),a=l.findIndex(e=>e.id===t)),i<0||a<0||i===a)return null;const s=l.slice(i,a).find(e=>this.chapterHasTransition(e,o));return s?o?s.transitions.pre:s.transitions.post:null}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(O.i))},token:e,providedIn:"root"}),e})();var ex,tx=function(e){return e.JumpTo="jumpTo",e.FlyTo="flyTo",e}({});!function(e){class t{constructor(e){this.breakpoint=e}}t.type="[View] Set Breakpoint",e.SetBreakpoint=t}(ex||(ex={}));var nx=function(e){return e[e.XSmall=0]="XSmall",e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Large=3]="Large",e[e.XLarge=4]="XLarge",e}({});class lx{}let ix=(()=>{let e=class{constructor(e,t){this.breakpointObserver=e,this.store=t}static getBreakpoint(e){return e.breakpoint}setBreakpoint(e,t){e.patchState({breakpoint:t.breakpoint})}ngxsOnInit(e){const t=this.breakpointObserver.observe(["(max-width: 374px)"]),n=this.breakpointObserver.observe(["(max-width: 599px)"]),l=this.breakpointObserver.observe(["(max-width: 959px)"]),i=this.breakpointObserver.observe(["(max-width: 1439px)"]),a=this.breakpointObserver.observe(["(min-width: 1440px)"]);Object(Du.b)(t,n,l,i,a).pipe(Object(u.a)(([e,t,n,l,i])=>e.matches?nx.XSmall:t.matches?nx.Small:n.matches?nx.Medium:l.matches?nx.Large:i.matches?nx.XLarge:null),Object(sg.a)(),Object(Q.a)(e=>null!=e)).subscribe(t=>{e.dispatch(new ex.SetBreakpoint(t))})}};return Object(y.__decorate)([Object(O.a)(ex.SetBreakpoint),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ex.SetBreakpoint]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setBreakpoint",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[lx]),Object(y.__metadata)("design:returntype",void 0)],e,"getBreakpoint",null),Object(y.__decorate)([Object(O.g)({name:"breakpoint",defaults:{breakpoint:null}})],e)})();var ax=function(e){return e.Column="column",e.ColumnToggle="column-toggle",e.Drawer="drawer",e.TitleOnly="title-only",e.Tools="tools",e.Toolbar="toolbar",e.Camera="camera",e.Media="media",e.Mediabar="mediabar",e.Reset="reset",e.Audio="audio",e.Menu="menu",e.Pagination="pagination",e.Fullscreen="fullscreen",e.Help="help",e.Description="description",e.NodeInfo="nodeInfo",e.Search="search",e.Presenter="presenter",e.Logo="logo",e.LabelList="labelList",e.ChapterList="chapterList",e.AnatomyLabels="anatomyLabels",e.Tutorial="tutorial",e.InternetExplorerWarning="internetExplorerWarning",e.Legend="legend",e.Loader="loader",e.Annotate="annotate",e}({});let ox=(()=>{class e{constructor(e){this.store=e,this.layout=null,this.breakpoint=null}getBase(){return{layout:this.store.selectSnapshot($m.getLayout),breakpoint:this.store.selectSnapshot(ix.getBreakpoint),hideUI:this.isUIHidden()}}isUIHidden(){const e=this.store.selectSnapshot($m.getOpenWindow),t=this.store.selectSnapshot(Nr.getSelectedChapterIndex),n=this.store.selectSnapshot($m.getLayout);return e===Em.Loader&&t<=0&&n.loader.template===jm.Circle||e===Em.Interact||e===Em.Tutorial||e===Em.Annotate}isDrawerVisible(){const{hideUI:e,layout:t,breakpoint:n}=this.getBase();return!e&&!(n>=nx.Large)&&(r.application!==i.Viewer||t.drawer.enable&&"none"!==this.getVisibleContent()||t.nodeInfo.status===vm.Show||t.labelInfo.status===vm.Show)}isColumnVisible(){const{hideUI:e,layout:t,breakpoint:n}=this.getBase();return!e&&!(n<nx.Large)&&t.column.status!==vm.Collapse&&(r.application!==i.Viewer||t.column.enable&&"full"===this.getVisibleContent())}isColumnToggleVisible(){const{hideUI:e,layout:t,breakpoint:n}=this.getBase();return!e&&!(n<nx.Large)&&t.column.enable&&"full"===this.getVisibleContent()}isTitleOnlyVisible(){const{hideUI:e,layout:t,breakpoint:n}=this.getBase();return!e&&!(n<nx.Large)&&t.titleOnly.enable&&"titleOnly"===this.getVisibleContent()}isToolsVisible(){const{hideUI:e}=this.getBase();return!e&&this.isLayoutVisible(ax.Tools)}isToolbarVisible(){const{hideUI:e,layout:t}=this.getBase();return!e&&t.toolbar.enable}isLogoVisible(){const{layout:e}=this.getBase();return e.logo.enable}isCameraVisible(){const{hideUI:e,layout:t}=this.getBase();return!e&&t.camera.enable}isPaginationVisible(){const{hideUI:e,layout:t}=this.getBase();return!e&&t.pagination.enable}isMediaVisible(){const{hideUI:e,layout:t}=this.getBase();return!e&&this.store.selectSnapshot(Nr.getIsChapterAnimated)&&t.media.enable}isMediabarVisible(){const{hideUI:e}=this.getBase();if(e)return!1;const t=this.isMediaVisible(),n=this.isAudioVisible();return t||n}isMenuVisible(){const{hideUI:e,layout:t}=this.getBase();return!e&&t.menu.enable}isNodeInfoColumnVisible(){const{hideUI:e,layout:t,breakpoint:n}=this.getBase();return!e&&(!!(n>=nx.Large&&this.isLayoutVisible(ax.NodeInfo))||(n<nx.Large?!t.drawer.enable&&this.isLayoutVisible(ax.NodeInfo):void 0))}isNodeInfoVisible(e){const{hideUI:t,breakpoint:n}=this.getBase();return!t&&(n>=nx.Large&&"column"===e?this.isLayoutVisible(ax.NodeInfo):n<nx.Large&&"drawer"===e&&this.isLayoutVisible(ax.NodeInfo))}isAudioVisible(){const{layout:e}=this.getBase(),t=null!=this.store.selectSnapshot(Nr.getSelectedChapterAudio);return e.audio.enable&&t}isSearchColumnVisible(){const{hideUI:e}=this.getBase();return!e&&this.isLayoutVisible(ax.Search)}isVisible(e){switch(e){case ax.Audio:return this.isAudioVisible();case ax.Camera:return this.isCameraVisible();case ax.Column:return this.isColumnVisible();case ax.ColumnToggle:return this.isColumnToggleVisible();case ax.Drawer:return this.isDrawerVisible();case ax.Logo:return this.isLogoVisible();case ax.Media:return this.isMediaVisible();case ax.Mediabar:return this.isMediabarVisible();case ax.Menu:return this.isMenuVisible();case ax.Pagination:return this.isPaginationVisible();case ax.Search:return this.isSearchColumnVisible();case ax.TitleOnly:return this.isTitleOnlyVisible();case ax.Tools:return this.isToolsVisible();case ax.Toolbar:return this.isToolbarVisible();default:return this.isLayoutVisible(e)}}isLayoutVisible(e){const{hideUI:t,layout:n}=this.getBase();return n[e]?!t&&n[e].enable&&n[e].status!==vm.Hide:(console.warn("Attempting to check visibility of a non-existent element: ${element}"),!1)}isLayoutEnabled(e){const{layout:t}=this.getBase();return t[e].enable}getVisibleContent(){const{layout:e}=this.getBase(),t=this.store.selectSnapshot(Br.getChapterLabels),n=this.store.selectSnapshot(Nr.getChapterCount),l=this.store.selectSnapshot(Nr.getSelectedChapter),i=Object(Mt.get)(l,"info.description"),a=Object(Mt.get)(l,"info.displayName"),o=Object(Mt.get)(l,"legend",[]),s=e.labelList.enable&&t.length>0,r=e.chapterList.enable&&n>1,c=null!=i&&Object(Mt.trim)(i).length>0,u=null!=a&&Object(Mt.trim)(a).length>0;return s||r||c||e.legend.enable&&o.length>0?"full":u?"titleOnly":"none"}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(O.i))},token:e,providedIn:"root"}),e})();var sx=function(e,t,n,l){return new(n||(n=Promise))((function(i,a){function o(e){try{r(l.next(e))}catch(t){a(t)}}function s(e){try{r(l.throw(e))}catch(t){a(t)}}function r(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,s)}r((l=l.apply(e,t||[])).next())}))};let rx=(()=>{class e{constructor(e,t,n,l,i,a,o,s){this.store=e,this.location=t,this.transitionService=n,this.engineService=l,this.layoutService=i,this.actions=a,this.imageService=o,this.publishService=s}initStory(e,t,n){this.store.dispatch(new Ra(e,t,!0));const l=this.store.select(wm.getReady),i=this.store.select(Tc.getIncomingStoryInfo);Object(Du.b)(l,i).pipe(Object(Q.a)(([e,t])=>e&&!!t.id),Object(Au.a)(1)).subscribe(()=>{this.store.dispatch(new lo),this.store.dispatch(new za(e,t,n))})}nextChapter(){const e=this.store.selectSnapshot(Nr.getSelectedChapterIndex),t=this.store.selectSnapshot(Nr.getStoryChapters)[e+1];t&&this.selectChapter(t)}previousChapter(){const e=this.store.selectSnapshot(Nr.getSelectedChapterIndex),t=this.store.selectSnapshot(Nr.getStoryChapters)[e-1];t&&this.selectChapter(t)}selectChapter(e){return sx(this,void 0,void 0,(function*(){const t=this.store.selectSnapshot(Nr.getSelectedChapterId),n=e.id,l=this.store.selectSnapshot(Nr.getStoryChapters),i=this.transitionService.searchChapterTransitions(t,n,l);i&&(yield this.chapterTransition(i)),this.store.dispatch([new Ua(e.id),new lo(e)])}))}chapterTransition(e){return new Promise(t=>{e.camera&&this.store.dispatch(new Zh(e.camera,!0,e.duration)),e.fadeColor&&this.store.dispatch(new xi(e.fadeColor,e.duration)),setTimeout(()=>{t(!0)},1e3*e.duration)})}hideSelectedStructures(){const e=this.store.selectSnapshot(Xs.getCheckedNodeIds);this.store.dispatch(new Bs.UpdateNodesShown(!1,e))}selectTool(e){this.store.dispatch(new zi(e))}toggleColumn(e){const t=this.store.selectSnapshot($m.getLayout);t.column.status=(e=null==e?!(t.column.status===vm.Show):e)?vm.Show:vm.Collapse,this.store.dispatch(new X.SetLayout(t))}togglePresentation(){this.store.selectSnapshot($m.getPresentationActive)?this.stopPresentation():this.startPresentation()}startPresentation(){this.store.dispatch(new X.TogglePresentation(!0))}stopPresentation(){this.store.dispatch(new X.TogglePresentation(!1))}takeSnapshot(e,t,n,l){e=e||this.store.selectSnapshot(Nr.getSelectedChapterId),this.store.dispatch(new So(e,t=t||kt.JPEG,n=n||92,l=l||Ar.medium,"square")),this.actions.pipe(Object(O.l)(Po),Object(Au.a)(1)).subscribe(e=>{const t=`${"snapshot".replace(/ /g,"_").replace(/\W/g,"")}.jpg`;this.imageService.blobToBase64(e.blob).pipe(Object(Au.a)(1)).subscribe(e=>{this.publishService.exportImage(e,kt.JPEG,t)})})}toggleHelp(e,t=ee.Basics){this.store.dispatch(new X.ToggleWindow(Em.Help,e)),this.store.dispatch(new X.ToggleHelpTab(t))}toggleInteract(e){this.store.dispatch(new X.ToggleWindow(Em.Interact,e))}toggleTutorial(e){this.store.dispatch(new X.ToggleWindow(Em.Tutorial,e)),e&&this.store.dispatch(new X.StartTutorial(!0))}toggleAnnotate(e){this.store.dispatch(new X.ToggleWindow(Em.Annotate,e)),e&&(this.store.dispatch(new Ei(!1)),this.store.dispatch(new X.SetAnnotateEnabled(!0)))}toggleLabels(e){this.store.dispatch(new Ji(e))}toggleSearch(e){const t=this.store.selectSnapshot(ix.getBreakpoint),n=this.store.selectSnapshot($m.getLayout);n.search.status=(e=null==e?!(n.search.status===vm.Show):e)?vm.Show:vm.Hide,(t===nx.Medium||t===nx.Small||t>=nx.Large&&e)&&this.toggleColumn(e),e&&(n.nodeInfo.status=vm.Hide),this.store.dispatch(new X.SetLayout(n))}toggleNodeInfo(e){this.toggleInfoLayout("nodeInfo",e)}toggleLabelInfo(e){this.toggleInfoLayout("labelInfo",e)}toggleInfoLayout(e,t){const n=this.store.selectSnapshot($m.getLayout);(t=null==t?n[e].status===vm.Hide:t)?(n[e].status=vm.Show,["nodeInfo","labelInfo"].filter(t=>t!==e).forEach(e=>n[e].status=vm.Hide)):n[e].status=vm.Hide,this.store.dispatch(new X.SetLayout(n))}delegateNodeClick(e,t){if(this.clearSelectedLabel(),e||t.srcEvent.shiftKey)if(t.srcEvent.shiftKey||this.store.selectSnapshot($m.getMultiPickModeEnabled))this.checkNode(e);else switch(this.store.selectSnapshot(wm.getActiveTool)){case fm.Hide:this.hideNode(e);break;case fm.Select:this.selectNode(e);break;case fm.Isolate:this.isolateNode(e);break;case fm.Fade:this.fadeNode(e)}else this.clearSelectedNodes()}clearSelectedLabel(){this.store.dispatch(new ja)}clearSelectedNodes(){this.store.dispatch(new Bs.UpdateNodeSelected),this.store.dispatch(new Bs.UpdateNodesChecked(!1))}checkNode(e,t){void 0!==e&&(null==t&&(t=this.store.selectSnapshot(Xs.getNodes)[e.id].checked),this.store.dispatch(new Bs.UpdateNodesChecked(!t,[e.id])),this.store.dispatch(new Bs.UpdateNodeSelected(e.id)))}fadeNode(e){this.store.dispatch(new Bs.UpdateNodesPaint(jc.recipe,[e.id]))}isolateNode(e){this.store.dispatch(new Bs.UpdateNodesShown(!1)),this.store.dispatch(new Bs.UpdateNodesShown(!0,[e.id]))}selectNode(e){const t=!this.store.selectSnapshot(Xs.getNodes)[e.id].checked;this.store.dispatch(new Bs.UpdateNodesChecked(!1)),t&&(this.store.dispatch(new Bs.UpdateNodesChecked(!0,[e.id])),this.store.dispatch(new Bs.UpdateNodeSelected(e.id))),this.store.dispatch(new Xi(e)),this.store.dispatch(new ea(e))}hideNode(e){this.store.dispatch(new Bs.UpdateNodesShown(!1,[e.id])),this.store.dispatch(new Bs.UpdateNodesChecked(!1))}selectLabel(e,t=!1){const{objectId:n,states:l}=e;this.store.dispatch(new ja(e)),t&&n&&0===l.length&&this.store.dispatch(new ji(n,!0))}initChapter(e){return sx(this,void 0,void 0,(function*(){const t=this.engineService.createViewGraph({},!1);this.store.dispatch(new _i(t)),this.store.dispatch(new Zh(e.camera.location,e.camera.action===tx.FlyTo))}))}playChapterFromStart(){this.store.dispatch(new Ri)}resetCamera(){const e=this.store.selectSnapshot(Nr.getSelectedChapter);e&&this.store.dispatch(new Zh(e.camera.location))}resetChapter(){this.resetCamera();const e=this.store.selectSnapshot(Nr.getSelectedChapterId);this.store.dispatch(new $s.UndoAll(e)),this.store.dispatch(new Bs.UpdateNodesChecked(!1)),this.store.dispatch(new Oa)}resetLayout(){const{layout:e}=this.store.selectSnapshot($m);this.layoutService.isUIHidden()?Object.keys(e).forEach(t=>{e[t].status=vm.Hide}):(Object.keys(e).forEach(t=>{e[t].status=vm.Show}),e.search.status=vm.Hide,e.tools.status=vm.Hide,e.nodeInfo.status=vm.Hide,e.labelInfo.status=vm.Hide,e.media.status=vm.Hide),this.store.dispatch(new X.SetLayout(e))}undo(){this.store.dispatch(new $s.Undo(this.store.selectSnapshot(Nr.getSelectedChapterId)))}redo(){this.store.dispatch(new $s.Redo(this.store.selectSnapshot(Nr.getSelectedChapterId)))}toggleAnimation(){const e=!this.store.selectSnapshot(wm.getAnimationPlaying);this.store.dispatch(new Ei(e))}toggleAudio(){const e=this.store.selectSnapshot(wm.getPlayAudio);this.store.dispatch(new Fi(!e))}normalizeQueryParams(e){const t=Object.assign({},e);return{id:Gm(t),type:qm(t),lang:e.lang}}sanitizeRouteId(e){return e=e.replace(/\.json$/,""),this.location.replaceState("view",`?id=${e}`),e}openInNewTab(){const e=window.document.location.href;window.open(e)}getComputedTransform(e){const t=getComputedStyle(e).transform.replace("matrix3d","").replace("matrix","").replace("(","").replace(")","").split(",").map(e=>e.trim()).map(e=>parseInt(e,10)),n=16===t.length?t[12]:t[4],l=16===t.length?t[13]:t[5];return Number.isNaN(n)||Number.isNaN(l)?null:{x:n,y:l}}inferDrawerMode(e){let t=Vm.Content;return e.nodeInfo.status===vm.Show?t=Vm.NodeInfo:e.labelInfo.status===vm.Show&&(t=Vm.LabelInfo),t}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(O.i),l.Xb(se.h),l.Xb(Qm),l.Xb(Rs),l.Xb(ox),l.Xb(O.b),l.Xb(St),l.Xb(Lt))},token:e,providedIn:"root"}),e})();var cx=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.view-chapters{max-height:320px;overflow:auto}.view-chapters__header{border-top:var(--view-chapters-border);display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:16px 0;margin-top:16px}.view-chapters__next{font-size:14px;letter-spacing:.35px;line-height:1.4em;font-style:italic;padding:8px;border-radius:4px;-webkit-box-flex:1;flex-grow:1}.view-chapters__next:hover{background:var(--view-chapters-bg--hover);color:var(--view-chapters-color--hover);cursor:pointer}.view-chapters__toggle{-webkit-box-pack:end;justify-content:flex-end;flex-shrink:1;text-align:right;margin-left:4px}.view-chapters__item{font-size:14px;letter-spacing:.35px;line-height:1.4em;display:-webkit-box;display:flex;padding:8px;margin:4px;border-radius:2px;border-left:4px solid transparent;background-color:transparent;color:#131c2a;border-left:var(--view-chapters-border);background-color:var(--view-chapters-bg);color:var(--view-chapters-color);-webkit-transition:background-color 125ms,color 125ms,border 125ms;transition:background-color 125ms,color 125ms,border 125ms}.view-chapters__item:hover{cursor:pointer;background:var(--view-chapters-bg--hover)}.view-chapters__item:focus{background:#e4ecf9;outline:0}.view-chapters__item--selected{border-left:4px solid #2d72dc;background-color:#f1f5fc;background:var(--view-chapters-bg--selected);border-left:var(--view-chapters-border--selected)}.view-chapters__index{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 32px;-webkit-box-pack:center;justify-content:center}.view-chapters__thumb{background-color:#f9fafd;background-color:var(--view-chapters-thumb-bg);border-radius:4px;background-repeat:no-repeat;-webkit-box-flex:0;flex:0 0 56px;height:56px;width:56px;-webkit-transition:border-color .1s;transition:border-color .1s;background-size:cover}.view-chapters__title{word-wrap:break-word;overflow-wrap:break-word;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;padding-right:4px}"]],data:{}});function ux(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,11,"li",[["class","view-chapters__item"],["role","button"],["tabindex","0"]],[[1,"aria-label",0],[1,"data-chapter-id",0]],[[null,"click"],[null,"keyup.enter"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.handleChapterClick(e.context.$implicit)&&l),"keyup.enter"===t&&(l=!1!==i.handleChapterClick(e.context.$implicit)&&l),l}),null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Lb(131072,se.b,[l.i]),l.Mb(4,{"view-chapters__item--viewed":0,"view-chapters__item--selected":1}),l.Nb(5,1),(e()(),l.xb(6,0,null,null,1,"div",[["class","view-chapters__index"]],null,null,null,null,null)),(e()(),l.Rb(7,null,["","."])),(e()(),l.xb(8,0,null,null,1,"div",[["class","view-chapters__title"]],null,null,null,null,null)),(e()(),l.Rb(9,null,["",""])),(e()(),l.xb(10,0,null,null,1,"div",[["class","view-chapters__thumb"]],null,null,null,null,null)),l.wb(11,1720320,null,0,Uh.a,[l.l,l.B,l.D,[2,"options"]],{lazyImage:[0,"lazyImage"],defaultImage:[1,"defaultImage"]},null)],(function(e,t){var n=t.component,i=e(t,4,0,n.isViewed(t.context.$implicit.id),t.context.$implicit.id===l.Sb(t,2,1,l.Jb(t,3).transform(n.selectedChapterId$)));e(t,2,0,"view-chapters__item",i),e(t,11,0,n.getChapterThumb(t.context.$implicit.id),n.defaultImage)}),(function(e,t){var n=t.context.$implicit.info.displayName,i=l.Sb(t,0,1,e(t,5,0,l.Jb(t.parent,0),t.context.$implicit.id));e(t,0,0,n,i),e(t,7,0,t.context.index+1),e(t,9,0,t.context.$implicit.info.displayName)}))}function px(e){return l.Tb(2,[l.Lb(0,Hh,[]),l.Pb(671088640,1,{chapterList:0}),(e()(),l.xb(2,0,[[1,0],["chapterList",1]],null,5,"nav",[["aria-label","Chapters"],["class","view-chapters"],["role","navigation"]],[[8,"hidden",0]],null,null,null,null)),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(4,0,null,null,3,"ol",[],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,ux)),l.wb(6,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,6,0,l.Sb(t,6,0,l.Jb(t,7).transform(n.chapters$)))}),(function(e,t){var n,i=t.component;e(t,2,0,1===(null==(n=l.Sb(t,2,0,l.Jb(t,3).transform(i.chapters$)))?null:n.length))}))}function dx(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-chapters",[],null,null,null,px,cx)),l.wb(1,4440064,null,0,$h,[O.i,rx,l.i],null,null)],(function(e,t){e(t,1,0)}),null)}var bx=l.tb("app-view-chapters",$h,dx,{defaultImage:"defaultImage",autoscroll:"autoscroll"},{},[]);class gx{constructor(){this.selectable=!1,this.size="medium",this.buttonType="default",this.direction="column",this._selected=!1,this.disabled=!1,this.selectedChange=new l.n}get selected(){return this._selected}set selected(e){this._selected=e,this.selectedChange=new l.n}ngOnInit(){}handleClick(){this.disabled||this.selectable&&(this.selected=!this.selected)}}var hx=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}button[app-pin-button]{border-color:transparent;background:0 0;border-width:0;padding:0;outline:0;margin:0;pointer-events:all}button[app-pin-button]::-moz-focus-inner{border:0}button[app-pin-button]:not([disabled]):hover{cursor:pointer}button[app-pin-button]:focus :not(.pin-button--selected) .pin-button__pin{background:#e4ecf9;outline:0}.pin-button{display:-webkit-inline-box;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;-webkit-box-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-tap-highlight-color:transparent}.pin-button:hover{cursor:pointer}.pin-button:hover:not(.pin-button--selected):not(.pin-button--disabled) .pin-button__pin{background:#d7e0ea;background:var(--pin-button-pin-background--hover)}.pin-button:not(.pin-button--selected):active:hover .pin-button__pin{background:#d7e0ea;background:var(--pin-button-pin-background--active)}.pin-button--selected .pin-button__pin{background-color:#2d72dc;background-color:var(--pin-button-pin-background--selected);color:#fff;color:var(--pin-button-pin-color--selected)}.pin-button--selected .pin-button__label{color:#2d72dc;color:var(--pin-button-label-color--selected);font-weight:600}.pin-button--small .pin-button__pin{border-radius:14px;min-width:28px;height:28px}.pin-button--small .pin-button__label{margin-top:0}.pin-button--large .pin-button__pin{font-size:20px;letter-spacing:.5px;line-height:1.4em}.pin-button--row{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.pin-button--row .pin-button__label{margin:0 0 0 4px}.pin-button--ghost:not(.pin-button--selected) .pin-button__pin{background:0 0}.pin-button--outline:not(.pin-button--selected) .pin-button__pin{background:0 0;border:var(--pin-button-pin-border)}.pin-button--primary .pin-button__pin{background:var(--pin-button-pin-background--primary);color:#fff}.pin-button--primary:not(.pin-button--selected):not(.pin-button--disabled) .pin-button__pin{background:var(--pin-button-pin-background--primary)!important;color:#fff!important}.pin-button--disabled{opacity:.2}.pin-button--disabled:hover{cursor:auto}.pin-button--floating .pin-button__pin{background-color:#fff;background-color:var(--pin-button-pin-background--floating);box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3);box-shadow:var(--pin-button-shadow)}.pin-button--dark .pin-button__pin{color:#fff;color:var(--pin-button-pin-color--dark);background-color:#fff;background-color:var(--pin-button-pin-background--dark)!important;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3);box-shadow:var(--pin-button-shadow)}.pin-button__pin{border-radius:18px;display:-webkit-box;display:flex;font-size:12px;float:left;min-width:36px;height:36px;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:relative;background-color:#eaeff5;color:#1c2a3f;background-color:var(--pin-button-pin-background);color:var(--pin-button-pin-color);-webkit-transition:background-color 125ms;transition:background-color 125ms}.pin-button__label{font-size:10px;letter-spacing:.25px;line-height:1.4em;color:#1c2a3f;color:var(--pin-button-label-color);padding:2px 0 4px}.pin-button__image{width:100%;height:100%;background-size:50%;background-repeat:no-repeat;background-position:center}"]],data:{}});function mx(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-icon",[],null,null,null,he,ge)),l.wb(1,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){e(t,1,0,t.component.icon)}),null)}function xx(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"span",[["class","pin-button__image"]],[[4,"backgroundImage",null]],null,null,null,null))],null,(function(e,t){e(t,0,0,"url("+t.component.src+")")}))}function fx(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"div",[["class","pin-button__label"]],null,null,null,null,null)),(e()(),l.Rb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.label)}))}function _x(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,11,"div",[["class","pin-button"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleClick()&&l),l}),null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"pin-button--selected":0,"pin-button--disabled":1,"pin-button--small":2,"pin-button--medium":3,"pin-button--large":4,"pin-button--ghost":5,"pin-button--primary":6,"pin-button--outline":7,"pin-button--floating":8,"pin-button--dark":9,"pin-button--row":10}),(e()(),l.xb(4,0,null,null,5,"div",[["class","pin-button__pin"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,mx)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,xx)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Ib(null,0),(e()(),l.nb(16777216,null,null,1,null,fx)),l.wb(11,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component,l=e(t,3,1,[n.selected,n.disabled,"small"===n.size,"medium"===n.size,"large"===n.size,"ghost"===n.buttonType,"primary"===n.buttonType,"outline"===n.buttonType,"floating"===n.buttonType,"dark"===n.buttonType,"row"===n.direction]);e(t,2,0,"pin-button",l),e(t,6,0,n.icon),e(t,8,0,n.src),e(t,11,0,n.label)}),null)}var yx=n("gcYM");let Ox=(()=>{class e{constructor(e,t,n,l,i,a){this.engineService=e,this.animationService=t,this.renderer=n,this.viewService=l,this.changeDetectorRef=i,this.store=a,this.showHandle=!0,this.ngUnsubscribe=new K.a,this.trackWidth=0,this.dragPosition={x:16,y:0},this.dragMove=new K.a}ngOnInit(){this.initChapterListener(),this.initTimelineListener(),this.initDragListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initChapterListener(){this.selectedChapterId$.pipe(Object(Q.a)(e=>null!=e),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.timerange=this.animationService.getChapterLocalTimerange(e)})}initTimelineListener(){this.engineService.getEvent(Wo.TimelinePlaying).pipe(Object(yx.a)(20),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>this.tick(e.time)),this.engineService.getEvent(Wo.TimelineScrubbed).pipe(Object(yx.a)(20),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.calcScrubbedPercent(e.time);this.setScrubberBar(t)})}initDragListener(){this.dragMove.pipe(Object(Bh.a)(20),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.calculateHandlePercent();this.scrubToPercent(t)})}handleDragMoved(e){this.dragMove.next(e)}tick(e){if(!this.timerange)return;const t=this.calcScrubbedPercent(e);this.setScrubberBar(t),0===this.trackWidth&&(this.trackWidth=this.track.nativeElement.offsetWidth),this.showHandle&&(this.dragPosition=Object.assign({},this.dragPosition,{x:16+this.trackWidth*(t/100)}),this.changeDetectorRef.markForCheck())}calculateHandlePercent(){const{left:e,right:t}=this.scrubber.nativeElement.getBoundingClientRect(),n=t-e-32;return(this.handle.nativeElement.getBoundingClientRect().left-e)/n*100}scrubToPercent(e){const t=e/100*this.timerange.lastTime,n=0===e?"second":"first",l=this.store.selectSnapshot(Nr.getSelectedChapterId),i=this.animationService.mapLocalTimeToGlobal(l,t);this.animationService.scrub({time:i,which:n})}handlePlayClick(){this.viewService.toggleAnimation()}setScrubberBar(e){this.renderer.setStyle(this.bar.nativeElement,"width",`${e}%`)}calcScrubbedPercent(e){const{firstTime:t,lastTime:n}=this.timerange,l=this.animationService.mapGlobalTimeToLocal(e).time,i=Math.max(t,Math.min(l,n));return Math.round(i/n*100)}}return Object(y.__decorate)([Object(O.e)(wm.getAnimationPlaying),Object(y.__metadata)("design:type",Z.a)],e.prototype,"animationPlaying$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterId),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedChapterId$",void 0),Object(y.__decorate)([Object(O.e)($m.getCanTouch),Object(y.__metadata)("design:type",Z.a)],e.prototype,"canTouch$",void 0),e})();var wx=l.vb({encapsulation:2,styles:[['.view-scrubber{position:relative;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;height:28px;width:100%}.view-scrubber:hover .view-scrubber__handle:after{opacity:1}.view-scrubber--draggable .view-scrubber__track{left:16px;right:16px}.view-scrubber__track{position:absolute;background:rgba(28,42,63,.5);background:var(--scrubber-track-bg);z-index:1;height:3px;left:0;right:0}.view-scrubber__bar{position:absolute;background:var(--scrubber-track-color);height:3px;z-index:2;width:0;left:0}.view-scrubber__handle{width:28px;height:28px;margin-left:-16px;left:0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:absolute;z-index:2}.view-scrubber__handle--hide{display:none}.view-scrubber__handle:after{opacity:0;-webkit-transition:opacity 250ms;transition:opacity 250ms;content:"";width:8px;height:8px;border-radius:4px;background:var(--scrubber-handle-color);box-shadow:var(--scrubber-handle-shadow)}.view-scrubber__handle:hover:after{opacity:1;background:var(--scrubber-handle-color--hover)}.view-scrubber__handle-touch:after{opacity:1}']],data:{}});function vx(e){return l.Tb(2,[l.Pb(402653184,1,{scrubber:0}),l.Pb(402653184,2,{track:0}),l.Pb(402653184,3,{bar:0}),l.Pb(402653184,4,{handle:0}),(e()(),l.xb(4,0,[[1,0],["scrubber",1]],null,15,"div",[["class","view-scrubber"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(6,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(7,{"view-scrubber--draggable":0}),(e()(),l.xb(8,0,[[2,0],["track",1]],null,1,"div",[["class","view-scrubber__track"]],null,null,null,null,null)),(e()(),l.xb(9,0,[[3,0],["bar",1]],null,0,"div",[["class","view-scrubber__bar"]],null,null,null,null,null)),(e()(),l.xb(10,16777216,[[4,0],["handle",1]],null,9,"div",[["cdkDrag",""],["cdkDragBoundary",".view-scrubber"],["cdkDragLockAxis","x"],["class","view-scrubber__handle cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],[[null,"cdkDragMoved"]],(function(e,t,n){var l=!0;return"cdkDragMoved"===t&&(l=!1!==e.component.handleDragMoved(n)&&l),l}),null,null)),l.Ob(6144,null,Rr.h,null,[Rr.c]),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(13,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Lb(131072,se.b,[l.i]),l.Mb(15,{"view-scrubber__handle--hide":0,"view-scrubber__handle-touch":1}),l.wb(16,4866048,null,3,Rr.c,[l.l,[3,Rr.b],se.d,l.B,l.S,Rr.a,[2,et.b],Rr.d,l.i],{lockAxis:[0,"lockAxis"],boundaryElement:[1,"boundaryElement"],freeDragPosition:[2,"freeDragPosition"]},{moved:"cdkDragMoved"}),l.Pb(603979776,5,{_handles:1}),l.Pb(603979776,6,{_previewTemplate:0}),l.Pb(603979776,7,{_placeholderTemplate:0})],(function(e,t){var n=t.component,i=e(t,7,0,n.showHandle);e(t,6,0,"view-scrubber",i);var a=e(t,15,0,!n.showHandle,l.Sb(t,13,1,l.Jb(t,14).transform(n.canTouch$)));e(t,13,0,"view-scrubber__handle",a),e(t,16,0,"x",".view-scrubber",n.dragPosition)}),(function(e,t){e(t,10,0,l.Jb(t,16).disabled,l.Jb(t,16)._dragRef.isDragging())}))}let Cx=(()=>{class e{constructor(e,t,n){this.animationService=e,this.viewService=t,this.layoutService=n,this.viewLayout=ax,this.size="small",this.showPlayPause=!0,this.showScrubber=!0,this.showBar=!0,this.ngUnsubscribe=new K.a}get template(){return this._template}set template(e){this._template=e,this.updateLayoutProperties(this.template)}ngOnInit(){this.initChapterListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initChapterListener(){this.selectedChapterId$.pipe(Object(Q.a)(e=>null!=e),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.timerange=this.animationService.getChapterLocalTimerange(e)})}updateLayoutProperties(e){this.showBar=e!==Cm.None,this.showScrubber=e===Cm.Full,this.showPlayPause=e!==Cm.None}handlePlayClick(){this.viewService.toggleAnimation()}handleAudioClick(){this.viewService.toggleAudio()}handlePlayChapterFromStartClick(){this.viewService.playChapterFromStart()}isVisible(e){return this.layoutService.isVisible(e)}}return Object(y.__decorate)([Object(O.e)(wm.getAnimationPlaying),Object(y.__metadata)("design:type",Z.a)],e.prototype,"animationPlaying$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterId),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedChapterId$",void 0),Object(y.__decorate)([Object(O.e)(wm.getPlayAudio),Object(y.__metadata)("design:type",Z.a)],e.prototype,"playAudio$",void 0),e})();var jx=l.vb({encapsulation:2,styles:[[".view-media-bar{display:-webkit-box;display:flex}.view-media-bar__scrubber{width:120px;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}"]],data:{}});function kx(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,4,"button",[["app-pin-button",""],["buttonType","ghost"],["data-test","Play/Pause__small"],["matTooltipPosition","above"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handlePlayClick()&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),l.Lb(131072,se.b,[l.i]),l.wb(3,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,1,0,"above",l.Sb(t,1,1,l.Jb(t,2).transform(n.animationPlaying$))?"Pause":"Play"),e(t,3,0,l.Sb(t,3,0,l.Jb(t,4).transform(n.animationPlaying$))?"pause":"play","ghost")}),null)}function Sx(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,2,"button",[["app-pin-button",""],["buttonType","ghost"],["icon","step-backward"],["matTooltip","Play Chapter from Start"],["matTooltipPosition","above"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handlePlayChapterFromStartClick()&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),l.wb(2,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,1,0,"above","Play Chapter from Start"),e(t,2,0,"step-backward","ghost")}),null)}function Px(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-scrubber",[["class","view-media-bar__scrubber"],["data-test","Scrub__small"]],null,null,null,vx,wx)),l.wb(1,245760,null,0,Ox,[Rs,or,l.H,rx,l.i,O.i],null,null)],(function(e,t){e(t,1,0)}),null)}function Mx(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,4,"button",[["app-pin-button",""],["buttonType","ghost"],["class","view-tools__item"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleAudioClick()&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.Lb(131072,se.b,[l.i]),l.wb(3,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,1,0,l.Sb(t,1,0,l.Jb(t,2).transform(n.playAudio$))?"Mute Audio":"Play Audio"),e(t,3,0,l.Sb(t,3,0,l.Jb(t,4).transform(n.playAudio$))?"volume":"volume-slash","ghost")}),null)}function Tx(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,8,"div",[["class","view-media-bar"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,kx)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Sx)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Px)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Mx)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.showPlayPause),e(t,4,0,n.showPlayPause),e(t,6,0,n.showScrubber),e(t,8,0,n.isVisible(n.viewLayout.Audio))}),null)}function Ix(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,1,null,Tx)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,t.component.showBar)}),null)}function Jx(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-media-bar",[],null,null,null,Ix,jx)),l.wb(1,245760,null,0,Cx,[or,rx,ox],null,null)],(function(e,t){e(t,1,0)}),null)}var zx=l.tb("app-view-media-bar",Cx,Jx,{template:"template",size:"size"},{},[]);class Lx{constructor(){}ngOnInit(){}}var Ex=l.vb({encapsulation:2,styles:[[".message{background-color:#0060c4;color:#fff}@media print{.message{display:none}}"]],data:{}});function Ax(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,1,"div",[["class","message p-4 text-12"]],null,null,null,null,null)),l.Ib(null,0)],null,null)}const Fx=()=>window.navigator.userAgent.includes("Trident");let Rx=(()=>{class e{constructor(e,t){this.changeDetector=e,this.storageService=t,this.show=!1,this.message="For the full interactive 3D experience please try loading this content in Chrome or Firefox.",this.ngUnsubscribe=new K.a}ngOnInit(){this.initLayoutListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleDismissClick(){this.show=!1,this.storageService.setLocalItem(Yn.InternetExplorerWarning,!0)}shouldShow(e){const t=this.storageService.getLocalItem(Yn.InternetExplorerWarning);return Fx()&&!t&&e.internetExplorerWarning.enable}initLayoutListener(){this.layout$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.show=this.shouldShow(e),this.changeDetector.markForCheck()})}}return Object(y.__decorate)([Object(O.e)($m.getLayout),Object(y.__metadata)("design:type",Z.a)],e.prototype,"layout$",void 0),e})();var Dx=l.vb({encapsulation:0,styles:[[".warning[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.warning__text[_ngcontent-%COMP%]{text-align:center;-webkit-box-flex:1;flex:1}.warning__close[_ngcontent-%COMP%]{cursor:pointer;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;display:-webkit-box;display:flex;width:32px;height:32px}"]],data:{}});function Ux(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,8,"app-warning-message",[],null,null,null,Ax,Ex)),l.wb(1,114688,null,0,Lx,[],null,null),(e()(),l.xb(2,0,null,0,6,"div",[["class","warning"]],null,null,null,null,null)),(e()(),l.xb(3,0,null,null,1,"div",[["class","warning__text"]],null,null,null,null,null)),(e()(),l.Rb(4,null,[" "," "])),(e()(),l.xb(5,0,null,null,3,"div",[],null,null,null,null,null)),(e()(),l.xb(6,0,null,null,2,"div",[["class","warning__close"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleDismissClick()&&l),l}),null,null)),(e()(),l.xb(7,0,null,null,1,"app-icon",[["icon","times"],["size","lg"],["title","Close"]],null,null,null,he,ge)),l.wb(8,114688,null,0,be,[],{icon:[0,"icon"],size:[1,"size"]},null)],(function(e,t){e(t,1,0),e(t,8,0,"times","lg")}),(function(e,t){e(t,4,0,t.component.message)}))}function Nx(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,1,null,Ux)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,!0===t.component.show)}),null)}class Hx{constructor(e,t){this.el=e,this.renderer=t}ngOnInit(){Fx()||this.renderer.setStyle(this.el.nativeElement,"display","none")}}class Bx{constructor(e,t,n){this.templateRef=e,this.viewContainer=t,this.router=n,this._appFlagApplicationMode="include"}get appFlagApplication(){return this._appFlagApplication}set appFlagApplication(e){this._appFlagApplication=e}get appFlagApplicationMode(){return this._appFlagApplicationMode}set appFlagApplicationMode(e){this._appFlagApplicationMode=e}get appFlagApplicationPage(){return this._appFlagApplicationPage}set appFlagApplicationPage(e){this._appFlagApplicationPage=e}get appFlagApplicationPlatform(){return this._appFlagApplicationPlatform}set appFlagApplicationPlatform(e){this._appFlagApplicationPlatform=e}ngOnInit(){this.update()}update(){let e=!1,t=!1,n=!1,l=!1;if(""===this.appFlagApplication?t=!0:Array.isArray(this.appFlagApplication)?t=this.appFlagApplication.some(e=>e===r.application):"string"==typeof this.appFlagApplication&&(t=this.appFlagApplication===r.application),null==this.appFlagApplicationPage)n=!0;else{const e=this.router.url;Array.isArray(this.appFlagApplicationPage)?n=this.appFlagApplicationPage.some(t=>e.indexOf(t)>=0):"string"==typeof this.appFlagApplicationPage&&(n=e.indexOf(this.appFlagApplicationPage)>=0)}if(null==this.appFlagApplicationPlatform)l=!0;else{const e=r.platform;Array.isArray(this.appFlagApplicationPlatform)?l=this.appFlagApplicationPlatform.some(t=>e.indexOf(t)>=0):"string"==typeof this.appFlagApplicationPlatform&&(l=e.indexOf(this.appFlagApplicationPlatform)>=0)}(e=t&&n&&l)&&"include"===this.appFlagApplicationMode||!e&&"exclude"===this.appFlagApplicationMode?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()}}var $x,Vx=n("vqkR");($x||($x={})).getColorRecipe=function(e,t){const n=e.scene.objects[t];if(n instanceof e.scene.Object){const e=n.getProperties();return{tintColor:Object(Mt.get)(e,"tintColor")?e.tintColor:[1,1,1],brightness:e.brightness,saturation:e.saturation,contrast:e.contrast,opacity:e.opacity}}return null};let Wx=(()=>{class e{constructor(e,t,n){this.store=e,this.graphService=t,this.engineService=n,this.highlightDisabled=!1}colorObject(e,t){const{tintColor:n,saturation:l,brightness:i,contrast:a,opacity:o}=t,s=Human.scene.objects[e];s instanceof Human.scene.Object&&(Object(Mt.isNil)(n)||s.setTintColor(n),Object(Mt.isNil)(l)||s.setSaturation(l),Object(Mt.isNil)(i)||s.setBrightness(i),Object(Mt.isNil)(a)||s.setContrast(a),Object(Mt.isNil)(o)||s.setOpacity(o))}getColor(e){return $x.getColorRecipe(Human,e)}uncolorObject(e){const t=Human.scene.objects[e];t instanceof Human.scene.Object&&(t.clearColorModifiers(),t.clearOpacityModifiers())}unpaint(e){const t=this.store.selectSnapshot(wm.getViewGraph);this.graphService.getLeafDescendants(t,e.id).forEach(e=>{this.engineService.getObjects(e).forEach(e=>{const t=Human.scene.objects[e];t instanceof Human.scene.Object&&(t.clearColorModProperties(),t.clearOpacityModProperties())})})}paint(e,t){const n=this.store.selectSnapshot(wm.getViewGraph),l=Qs.toEngine(t);this.graphService.getLeafDescendants(n,e).forEach(e=>{this.engineService.getObjects(e).forEach(e=>{this.colorObject(e,l)})})}highlight(e,t){if(!1===this.highlightDisabled||!1===t){const n=this.store.selectSnapshot(wm.getViewGraph);this.graphService.getLeafDescendants(n,e).forEach(e=>{this.engineService.getObjects(e).forEach(e=>{const n=Human.scene.objects[e];n instanceof Human.scene.Object&&n.setHighlight(t)})})}}xRay(e,t){Human.scene.objects[e.id].setXRay(t)}paintAll(e,t){e.forEach(e=>this.paint(e,t))}unpaintAll(e){e.forEach(e=>{this.unpaint(e)})}highlightAll(e,t){e.forEach(e=>this.highlight(e,t))}disableHighlight(){this.highlightDisabled=!0}enableHighlight(){this.highlightDisabled=!1}setHighlightColor(e){Human.renderer.highlightColor=[...e]}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(O.i),l.Xb(Ts),l.Xb(Rs))},token:e,providedIn:"root"}),e})();function Gx(e){const{procName:t,actionFn:n,aliases:l=[],mapFnIn:i,mapFnOut:a}=e,o=function(e){const t=this,l=i?i(e):e,o=n(l);if(void 0!==o)if(o instanceof Z.a)o.subscribe(e=>{const n=a?a(e):e;t.setResult(n)});else{const e=a?a(o):o;t.setResult(e)}};[t,...l].forEach(e=>Human.rpc.define(e,o))}function qx(e){const t=e.captureCamera();return{position:t.lookAt.eye,target:t.lookAt.look,up:t.lookAt.up,zoom:t.zoom}}var Xx,Kx,Zx=n("SxV6"),Yx=n("IOcx");function Qx(e,t){return e.dispatch(new Oi(!1)),t.fireEvent(Wo.SceneXrayDisabled,void 0),!0}function ef(e){if(!e)return null;const{objectId:t,canvasPos:n,worldPos:l}=e;return{objectId:t||void 0,canvasPosition:n?{x:n[0],y:n[1]}:void 0,mode:"query",position:l?{x:l[0],y:l[1],z:l[2]}:void 0}}function tf(e,t){const n=Human.scene.objects[t].parent;return null!==n&&(e[n.objectId].checked||tf(e,n.objectId))}function nf(e,t){const n=t.includes("/")?a.Module:a.Bookmark;e.dispatch(new za(t,n))}function lf(e,t){return e.dispatch(new Oi(!0)),t.fireEvent(Wo.SceneXrayEnabled,void 0),!0}function af(e,t,n){Human.rpc.defineEvent(e,{events:t||[e],map:n||(e=>e)})}(Xx||(Xx={})).getCanvasPos=function(e,t,n,l,i){n&&Yx.a.add(t,n,t);const a=e.renderer.getViewMat(),o=e.renderer.getProjMat(),s=Yx.b.create();Yx.a.transformMat4(s,t,a),s[3]=1,Yx.b.transformMat4(s,s,o);const r=s[1],c=s[3];return[Math.round((1+s[0]/c)*l/2),Math.round((1-r/c)*i/2)]},function(e){e.isLegacyCaptureFormat=function(e){return void 0!==e.engineVersion},e.convertCaptureFormat=function(e){const t=Object.keys(e.objects).reduce((e,t)=>(e.push({objectId:t,selected:!1,hidden:!1}),e),[]);return{storyId:e.timeline.rootName.replace(".json",""),camera:{lookAt:e.camera,zoom:void 0},labels:[],objects:t,background:[],activeChapterId:e.timeline.scrub?e.timeline.scrub.chapterId:void 0}}}(Kx||(Kx={}));var of=n("I65S");const sf=Bm.layout;class rf{}const cf=(e,t)=>void 0===e?t:e;function uf(...e){return!!e.some(e=>!0===e)||!e.some(e=>!1===e)&&void 0}function pf(e,t,n){return Object.values(Cm).indexOf(n)>=0?n:!1===e?Cm.None:null!=t?t?Cm.Full:Cm.Small:null}var df;function bf(e){return Ye.getColors(e).map(e=>e[255])}function gf(e){return e.selectSnapshot(Br.getChapterLabels)}function hf(e,t){return function(e,t){return e.find(e=>t===e.id)}(gf(e),t)}function mf(e,t){const n=function(e,t){return e.scene.markers.markers[t]}(e,t.id);return{annotationId:t.id,objectId:t.objectId||null,title:t.title,description:t.description,shown:t.shown,occludable:t.occludable,position:n?{x:n.pos[0],y:n.pos[1],z:n.pos[2]}:null,canvasPosition:n?{x:n.canvasPos[0],y:n.canvasPos[1]}:null}}function xf(e,t){const n=hf(e,t.annotationId);return n?Object.assign({},n,t):null}function ff(e,t){return t&&e.dispatch(new va(t)),!0}function _f(e,t){return e.dispatch(new Ta(t)),!0}function yf(e,t){return e.reduce((e,n)=>Object.assign({},e,{[`${n}`]:t}),{})}function Of(e,t){return function(e,n){return Object.entries(e).filter(([e,n])=>((e,n)=>n===t)(0,n)).reduce((e,[t,n])=>Object.assign({},e,{[`${t}`]:n}),{})}(e)}function wf(e,t){return Object.keys(Of(e,t))}function vf(e,t,n){return function(e,t){return e.filter(e=>t.includes(e.id))}(e,wf(t,n))}function Cf(e,t,n){const l=wf(t,n).map(t=>(function(e,...t){const n=t.map(t=>e.filter(e=>t===e.objectId));return function(e){const t=new Set(e);return Array.from(t.values())}([].concat(...n))})(e,t)).map(e=>e.map(e=>e.id));return yf([].concat(...l),n)}function jf(e,t){return[{eventName:Wo.AnnotationsCreated,aliasEvents:[Wo.LabelCreated],mapFn:t=>mf(e,t)},{eventName:Wo.AnnotationsDestroyed,aliasEvents:[Wo.LabelDestroyed],mapFn:e=>({annotationId:e.id})},{eventName:Wo.AnnotationsShown,aliasEvents:[Wo.LabelsShown],mapFn:()=>!0},{eventName:Wo.AnnotationsHidden,aliasEvents:[Wo.LabelsHidden],mapFn:()=>!0}]}function kf(e,t,n){return[{procName:Vo.AnnotationsInfo,actionFn:()=>gf(t),mapFnOut:t=>(function(e,t){return t.reduce((t,n)=>(t[n.id]=mf(e,n),t),{})})(e,t)},{procName:Vo.AnnotationsCreate,mapFnIn:l=>(function(e,t,n,l){const i=t.selectSnapshot(Nr.getSelectedChapter),a={annotationId:l.annotationId,title:l.title,description:l.description,objectId:e.scene.objects[l.objectId]?l.objectId:void 0,pos:l.position,occludable:l.occludable,labelOffset:l.labelOffset,shown:l.shown,labelShown:l.shown};return a.objectId&&void 0===a.pos&&(a.pos=e.scene.objects[a.objectId].center),n.deserializeAnnotation(a,i,fs.Annotation)})(e,t,n,l),actionFn:e=>(function(e,t){return t.objectId||t.pos?(e.dispatch(new xa(t)),t):null})(t,e),mapFnOut:t=>t?mf(e,t):null},{procName:Vo.AnnotationsUpdate,mapFnIn:e=>xf(t,e),actionFn:e=>ff(t,e)},{procName:Vo.AnnotationsSetTitle,mapFnIn:e=>xf(t,e),actionFn:e=>ff(t,e)},{procName:Vo.AnnotationsSetDescription,mapFnIn:e=>xf(t,e),actionFn:e=>ff(t,e)},{procName:Vo.AnnotationsDestroy,mapFnIn:e=>hf(t,e),actionFn:e=>(function(e,t){return t&&e.dispatch(new ya(t)),!0})(t,e)},{procName:Vo.ShowAnnotations,aliases:[Vo.SetAnnotationsShown],actionFn:()=>_f(t,!0)},{procName:Vo.HideAnnotations,actionFn:()=>_f(t,!1)},{procName:Vo.AnnotationsSetLabelsShown,mapFnIn:e=>(function(e,t){const{annotations:n,objects:l,replace:i}=t,a=n||{},o=l||{},s=gf(e),r=Object.assign({},Of(a,!0),Of(a,!1),Cf(s,o,!0),Cf(s,o,!1));return i?Object.assign({},yf(s.map(e=>e.id),!1),r):r})(t,e),actionFn:e=>(function(e,t){const n=gf(e),l=vf(n,t,!1),i=vf(n,t,!0);e.dispatch(new Ma(i,!0)),e.dispatch(new Ma(l,!1))})(t,e)}]}!function(e){function t(e){return{[ax.Loader]:jm.Bar,[ax.Column]:e,[ax.Drawer]:e,[ax.Tools]:e,[ax.Toolbar]:e,[ax.Fullscreen]:e,[ax.Help]:e,[ax.Camera]:e,[ax.Search]:e,[ax.Presenter]:e,[ax.Menu]:e,[ax.Audio]:e,[ax.Pagination]:e,[ax.NodeInfo]:e,[ax.Reset]:e,[ax.LabelList]:e,[ax.ChapterList]:e,[ax.Media]:e?Cm.Full:Cm.None,[ax.TitleOnly]:e,all:e,drawerExpandedInitially:null,logoIsHyperLink:null,[ax.AnatomyLabels]:null,[ax.Logo]:!0,[ax.Tutorial]:null,[ax.InternetExplorerWarning]:!0,[ax.Legend]:!0}}function n(e,t){return null==t?e:Object(Mt.uniq)([...Object.keys(e),...Object.keys(t)]).reduce((n,l)=>(n[l]=null!=e[l]?e[l]:t[l],n),new rf)}e.convertAPIUIConfigToUIConfig=function(e){const l=null!=e.all?t(e.all):new rf;return n({all:e.all,[ax.Loader]:e.loader,[ax.Help]:uf(e.help,e.help),[ax.Tools]:uf(e.tools,e.tools),[ax.Toolbar]:e.toolbar,[ax.Fullscreen]:uf(e.fullscreen,e.fullscreen),[ax.Search]:uf(e.objectTree,e.search),[ax.Audio]:e.audio,[ax.Media]:pf(e.playPause,uf(e.scrubber,e["scrubber.chapters"]),e.media),[ax.Camera]:uf(e.nav,e.cameraMode,e.center,e.zoomIn,e.zoomOut,e.nav),[ax.Pagination]:uf(e.tour,e["tour.chapters"]),[ax.Reset]:e.reset,[ax.Column]:uf(e.info,e.info),[ax.Drawer]:uf(e.info,e.info),[ax.TitleOnly]:uf(e.info,e.info),[ax.LabelList]:e.labelList,[ax.ChapterList]:e.chapterList,[ax.NodeInfo]:e.anatomyDescriptions,[ax.Legend]:e.legend,[ax.Menu]:e.menu,[ax.InternetExplorerWarning]:void 0,[ax.Logo]:void 0,[ax.Presenter]:void 0,logoIsHyperLink:void 0,drawerExpandedInitially:void 0,[ax.Tutorial]:void 0,[ax.AnatomyLabels]:uf(e.anatomyLabels,e.anatomyLabels)},l)},e.convertUrlUIConfigToUIConfig=function(e){const l=null!=e["ui-all"]?t(e["ui-all"]):new rf;return n({[ax.Loader]:e["ui-loader"],[ax.NodeInfo]:e["ui-anatomy-descriptions"],[ax.Tools]:e["ui-tools"],[ax.Toolbar]:e["ui-toolbar"],[ax.Media]:pf(null,uf(e["ui-scrubber"],e["ui-scrubber.chapters"],e["ui-scrubber.tour"]),e["ui-media-controls"]),[ax.Reset]:e["ui-reset"],[ax.Audio]:e["ui-audio"],[ax.Fullscreen]:e["ui-fullscreen"],[ax.Help]:e["ui-help"],[ax.Camera]:e["ui-nav"],[ax.Presenter]:e["ui-presenter"],[ax.Menu]:e["ui-menu"],[ax.Pagination]:e["ui-tour"],[ax.Search]:uf(e["ui-search"],e["ui-object-tree"]),[ax.Column]:uf(e["ui-info"],e["ui-panel"]),[ax.Drawer]:uf(e["ui-info"],e["ui-panel"]),[ax.Description]:uf(e["ui-info"]),[ax.TitleOnly]:uf(e["ui-info"]),[ax.Logo]:uf(e["ui-bd"],e["ui-logo"]),logoIsHyperLink:uf(e["ui-bd.link"],e["ui-logo.islink"]),[ax.LabelList]:e["ui-label-list"],[ax.ChapterList]:e["ui-chapter-list"],[ax.InternetExplorerWarning]:e["ie-warning"],all:e["ui-all"],drawerExpandedInitially:e["ui-info-expand"],[ax.AnatomyLabels]:uf(e["ui-anatomy-labels"]),[ax.Tutorial]:uf(e["ui-tutorial"]),[ax.Legend]:uf(e["ui-legend"])},l)},e.convertChapterToUIConfig=function(e){const t=e.ui;if(!t||!t.config)return null;const n=new rf;return n[ax.Column]=t.config.info,n[ax.Drawer]=t.config.info,n[ax.Fullscreen]=t.config.fullscreen,n[ax.Search]=t.config.objectTree,n[ax.Camera]=t.config.nav,n[ax.Loader]=t.config.loader,n[ax.Media]=pf(t.config.playPause,t.config.scrubber,t.config.mediaControls),n},e.generateUIAllConfig=t,e.mergeUIConfigs=n,e.createLayoutFromConfig=function(e,t){const n=JSON.parse(JSON.stringify(e));return n.loader.enable=cf(t[ax.Loader]!==jm.None,sf.loader.enable),null!=t[ax.Loader]&&(n.loader.template=t[ax.Loader]),n.nodeInfo.enable=cf(t[ax.NodeInfo],sf.nodeInfo.enable),n.pagination.enable=cf(t[ax.Pagination],sf.pagination.enable),n.drawer.isExpandedInitially=cf(t.drawerExpandedInitially,sf.drawer.isExpandedInitially),n.tools.enable=cf(t[ax.Tools],sf.tools.enable),n.toolbar.enable=cf(t[ax.Toolbar],sf.toolbar.enable),n.media.enable=cf(t[ax.Media]!==Cm.None,sf.media.enable),n.media.template=t[ax.Media],n.fullscreen.enable=cf(t[ax.Fullscreen],sf.fullscreen.enable),n.help.enable=cf(t[ax.Help],sf.help.enable),n.description.enable=cf(t[ax.Description],sf.description.enable),n.titleOnly.enable=cf(t[ax.TitleOnly],sf.titleOnly.enable),n.camera.enable=cf(t[ax.Camera],sf.camera.enable),n.search.enable=cf(t[ax.Search],sf.search.enable),n.presenter.enable=cf(t[ax.Presenter],sf.presenter.enable),n.menu.enable=cf(t[ax.Menu],sf.menu.enable),n.logo.enable=cf(t[ax.Logo],sf.logo.enable),n.logo.isHyperLink=cf(t.logoIsHyperLink,sf.logo.isHyperLink),n.internetExplorerWarning.enable=cf(t.internetExplorerWarning,sf.internetExplorerWarning.enable),n.labelList.enable=cf(t[ax.LabelList],sf.labelList.enable),n.chapterList.enable=cf(t[ax.ChapterList],sf.chapterList.enable),n.audio.enable=cf(t[ax.Audio],sf.audio.enable),n.reset.enable=cf(t[ax.Reset],sf.reset.enable),n.column.enable=cf(t[ax.Column],sf.column.enable),n.drawer.enable=cf(t[ax.Drawer],sf.drawer.enable),n.anatomyLabels.enable=cf(t[ax.AnatomyLabels],sf.anatomyLabels.enable),n.tutorial.enable=cf(t[ax.Tutorial],sf.tutorial.enable),n},e.getScrollSetting=function(e){return e["disable-scroll"]?qo.DoNotCapture:e["disable-scroll.alert"]||e["disable-scroll.overlay"]?qo.DoNotCaptureShowMessage:qo.Capture},e.getUsePrintImage=function(e){return!0===e["ui-print-image"]},e.getInteractType=function(e,t,n){const l=e["initial.play"]||e.initial||e["initial.button"]||e["initial.hand"]||e["initial.hand-hint"]||t;return{interactType:(()=>{switch(!0){case e.initial:case e["initial.button"]:return Go.Button;case e["initial.hand"]:case e["initial.hand-hint"]:return Go.Hand;case e["initial.play"]:return Go.Play;default:return n}})(),isInteractActive:l}}}(df||(df={}));const Sf={};function Pf(e,t){t.hasOwnProperty("data")&&(t[e]=t.data)}const Mf={hotspotSeedId:0,hotspotIdMap:new Map,getHotspotMap:e=>{const{hotspotIdMap:t,createHotspotId:n}=Mf;return e.selectSnapshot(Br.getLabels).forEach(e=>{const l=e.id;void 0===t.get(l)&&n(l)}),t},createHotspotId:e=>(Mf.hotspotSeedId++,Mf.hotspotIdMap.set(e,Mf.hotspotSeedId),Mf.hotspotSeedId),getHotspotIdByLabel:(e,t,n)=>{const{getHotspotMap:l,createHotspotId:i}=Mf,a=l(e).get(t);return n&&void 0===a?i(t):a},getLabelIdByHotspotId:(e,t)=>{const n=Mf.getHotspotMap(e),l=Array.from(n).find(([e,n])=>n===t);return l?l[0]:null}};function Tf(e,t){const n=e.selectSnapshot(Br.getLabels);return void 0!==t?n.filter(e=>e.chapterId===t):n}function If(e,t){const n=Tf(e),l=Mf.getLabelIdByHotspotId(e,t);return n.find(e=>e.id===l)}function Jf(e){return e===Ps.CirclePlus?xs.Plus:e===Ps.CircleMinus?xs.Minus:xs.Default}function zf(e,t){return Mf.getHotspotIdByLabel(e,t)}function Lf(e,t){return Object.assign({},t,{id:zf(e,t.id)})}function Ef(e,t,n){const l=t.selectSnapshot(Nr.getStoryChapters);return n.map(n=>(function(e,t,n,l){const{id:i,chapterId:a,title:o,objectId:s}=l,r=n.findIndex(e=>a===e.id),c=Mf.getHotspotIdByLabel(t,i,!0),u=function(e,t){return e.scene.markers.markers[t]}(e,i);return{id:c,title:o,objectId:s,position:u?Af(u.pos):null,direction:u?Af(u.dir):null,canvasPosition:u?(p=u.canvasPos,{x:p[0],y:p[1]}):null,chapterScope:r,type:l.pinType===xs.PlusMinus?Ps.CirclePlus:Ps.Circle,shown:l.shown,data:Sf[l.id]};var p})(e,t,l,n))}function Af(e){return{x:e[0],y:e[1],z:e[2]}}function Ff(e){return[e.x,e.y,e.z]}function Rf(e,t,n){return e.dispatch(new Ma(t,n)),!0}function Df(e,t){if("number"==typeof t){const n=If(e,t);return n?[n]:[]}return Tf(e)}function Uf(e,t){return[{eventName:Wo.HotspotsEntered,mapFn:e=>Lf(t,e)},{eventName:Wo.HotspotsLeft,mapFn:e=>Lf(t,e)},{eventName:Wo.HotspotsPicked,mapFn:e=>Lf(t,e)},{eventName:Wo.HotspotsDisplayUpdated,mapFn:e=>Lf(t,e)},{eventName:Wo.HotspotsPositionUpdated,mapFn:e=>(function(e,t){const{id:n,canvasPos:l}=t,{x:i,y:a}=l;return{id:zf(e,n),canvasPosition:{x:i,y:a,0:i,1:a},occluded:t.occluded}})(t,e)}]}function Nf(e,t,n){return[{procName:Vo.HotspotsInfo,actionFn:n=>{const l="number"==typeof n?n:void 0;if(void 0!==l){const n=If(t,l);return Ef(e,t,[n])[0]}{const n=Df(t,l);return Ef(e,t,n)}}},{procName:Vo.HotspotsTypes,mapFnIn:()=>Object.values(Ps).map(e=>`${e}`),actionFn:e=>e},{procName:Vo.HotspotsCreate,mapFnIn:e=>(function(e,t,n){const{title:l,objectId:i,position:a,direction:o,chapterScope:s,type:r}=n,c=e.selectSnapshot(Nr.getStoryChapters),u=e.selectSnapshot(Nr.getSelectedChapter),p=e.selectSnapshot(Nr.getSelectedChapterIndex),d="number"==typeof s?s:p,b=c[d]||u,g=!1!==n.shown,h=g&&!!l,m={title:l,type:r||Ps.CircleLabel,objectId:i,pos:a?Ff(a):null,dir:o?Ff(o):null,shown:g,symbol:"",className:""},x=t.deserializeHotspots({},b,d,m);return x.title=l,x.expandTag=!0,x.flyTo=!1,x.flyToTarget=null,x.occludable=!0,x.pinGlow=!1,x.pinType=xs.PlusMinus,x.shown=g,x.hideTag=!h,x.hideWire=!0,x.theme=fs.StudioNext,x.pinType=Jf(r),Pf(x.id,n),x})(t,n,e),actionFn:e=>(function(e,t){return t.objectId||t.pos?(e.dispatch(new xa(t)),t):null})(t,e),mapFnOut:e=>e?zf(t,e.id):null},{procName:Vo.HotspotsUpdate,mapFnIn:e=>(function(e,t){const n=If(e,t.id);return n?function(e,t){const{title:n,objectId:l,direction:i,position:a,shown:o,type:s}=e,r=Object.assign({},t,{title:n,objectId:l,shown:o,pos:a?Ff(a):null,dir:i?Ff(i):null,pinType:s?Jf(s):null});return Pf(t.id,e),Object.assign({},t,Object(Mt.omitBy)(r,Mt.isNil))}(t,n):null})(t,e),actionFn:e=>e?function(e,t){return e.dispatch(new va(t)),t}(t,e):null},{procName:Vo.HotspotsDestroy,mapFnIn:e=>If(t,e),actionFn:e=>e?function(e,t){return e.dispatch(new ya(t)),t}(t,e):null},{procName:Vo.HotspotsShow,mapFnIn:e=>Df(t,e),actionFn:e=>Rf(t,e,!0)},{procName:Vo.HotspotsHide,mapFnIn:e=>Df(t,e),actionFn:e=>Rf(t,e,!1)}]}let Hf=(()=>{class e{constructor(e,t,n,l,i,a,o,s,r,c,u){this.store=e,this.actions=t,this.cameraService=n,this.engineService=l,this.animationService=i,this.imageService=a,this.paintService=o,this.labelsService=s,this.graphService=r,this.viewService=c,this.widgetAnalyticsService=u,this.webGLInfo=SceneJS.WEBGL_INFO}listen(){this.initProcedures(),this.initEvents(),o.Production&&this.logAPIUsage()}logAPIUsage(){setInterval(()=>{const e=Human.rpc.getLog(),t=Object(Mt.uniqBy)(e,e=>e.identifier);if(t.length>0){const e=JSON.stringify(t),n=this.store.selectSnapshot(q.getWidgetState),l=this.widgetAnalyticsService.buildDeveloperAnalytic(n,W.Call,D.WidgetAPI,e);this.widgetAnalyticsService.sendAnalytic(l).subscribe({next:e=>{},error:e=>{throw new Error(e)}}),Human.rpc.resetLog()}},1e4)}initEvents(){var e,t,n;af(Wo.HumanProgress,void 0,e=>e),[{eventName:Wo.HumanReady,aliasEvents:[Wo.HumanStarted]},{eventName:Wo.Error,aliasEvents:[Wo.HumanError],mapFn:e=>e}].forEach(e=>{af(e.eventName,e.aliasEvents,e.mapFn)}),[{eventName:Wo.SceneLoaded,mapFn:e=>e},{eventName:Wo.ScenePicked,aliasEvents:[Wo.PickPicked],mapFn:ef},{eventName:Wo.SceneObjectsSelected,mapFn:e=>e.selectedObjectsUpdate},{eventName:Wo.SceneObjectsShown,mapFn:e=>e.enabledObjectsUpdate},{eventName:Wo.Debug_SceneReady,aliasEvents:[Wo.Started]},{eventName:Wo.SceneRestored,mapFn:()=>!0},{eventName:Wo.SceneXrayEnabled,mapFn:()=>!0},{eventName:Wo.SceneXrayDisabled,mapFn:()=>!0}].forEach(e=>{af(e.eventName,e.aliasEvents,e.mapFn)}),(e=this.cameraService,[{eventName:Wo.CameraUpdated,aliasEvents:[Wo.CameraRested],mapFn:()=>qx(e)}]).forEach(e=>{af(e.eventName,e.aliasEvents,e.mapFn)}),[{eventName:Wo.TimelinePlaying,mapFn:e=>e},{eventName:Wo.TimelineCompleted,mapFn:e=>!0},{eventName:Wo.TimelineChapterTransition,aliasEvents:[Wo.TimelineChaptersActivated],mapFn:e=>({previousChapter:e.oldChapterIndex,currentChapter:e.newChapterIndex,time:e.time})}].forEach(e=>{af(e.eventName,e.aliasEvents,e.mapFn)}),[].forEach(e=>{af(e.eventName,e.aliasEvents,e.mapFn)}),[].forEach(e=>{af(e.eventName,e.aliasEvents,e.mapFn)}),(t=Human,n=this.store,[...jf(t),...Uf(0,n)]).forEach(e=>{af(e.eventName,e.aliasEvents,e.mapFn)})}initProcedures(){var e,t,n,l;(e=Human,t=this.webGLInfo,[{procName:Vo.HumanInfo,actionFn:()=>({version:e.VERSION,webglInfo:t,apiFunctions:e.rpc.getProcedures().sort(),apiEvents:e.rpc.getEvents().sort()})}]).forEach(e=>{Gx(e)}),function(e,t,n,l,i,a,o){return[{procName:Vo.SceneMetaData,actionFn:()=>{const t=e.selectSnapshot(Tc.getStory),n=e.selectSnapshot(Nr.getStoryChapters);return{title:t.displayName,description:t.description,chapters:n.map(e=>({id:e.id,title:e.info.displayName,description:e.info.description,isAnimated:a.isChapterAnimated(e),loops:a.isChapterLooped(e),duration:a.getChapterLocalTimerange(e.id)}))}}},{procName:Vo.focusObject,actionFn:n=>(function(e,t,n){e.select&&e.xray?lf(t,n):Qx(t,n),e.select&&t.dispatch(new Bs.UpdateNodesChecked(!0,[e.objectId])),t.dispatch(new ji(e.objectId,!0,1))}(n,e,t),!0)},{procName:Vo.dissectSetEnabled,actionFn:t=>(e.dispatch(new zi(t.enable?fm.Hide:fm.Select)),!0)},{procName:Vo.sceneSetClickMode,actionFn:t=>{const n=(()=>"select"===t?fm.Select:"hide"===t?fm.Hide:"fade"===t?fm.Fade:fm.Select)();return e.dispatch(new zi(n)),!0}},{procName:Vo.sceneGetClickMode,actionFn:()=>e.selectSnapshot(wm.getActiveTool)},{procName:Vo.pickSingleSetEnabled,actionFn:t=>{const n=(()=>{switch(t.enable){case void 0:return!e.selectSnapshot($m.getMultiPickModeEnabled);case!0:return!1;case!1:return!0}})();return e.dispatch(new X.SetMultiPickModeEnabled(n)),!0}},{procName:Vo.pickMultiSetEnabled,actionFn:t=>{const n=(()=>{switch(t.enable){case void 0:return!e.selectSnapshot($m.getMultiPickModeEnabled);default:return t.enable}})();return e.dispatch(new X.SetMultiPickModeEnabled(n)),!0}},{procName:Vo.getCanvasPos,actionFn:e=>{const n=t.getCanvas();return Xx.getCanvasPos(Human,e.worldPos,e.offset,n.width,n.height)}},{procName:Vo.SceneCapture,actionFn:()=>(function(e,t){const n=t.captureCamera(),l=e.selectSnapshot(Xs.getNodes),i=Object.keys(l).map(e=>({objectId:e,selected:l[e].checked||tf(l,e),hidden:!l[e].shown})),a=e.selectSnapshot(Nr.getStoryChapters).map(e=>({chapterId:e.id,background:e.background||Jr})),o=e.selectSnapshot(Tc.getStoryId);return{camera:n,labels:e.selectSnapshot(Br.getLabels),storyId:o,objects:i,background:a,activeChapterId:e.selectSnapshot(Nr.getSelectedChapterId)}})(e,l)},{procName:Vo.SceneRestore,actionFn:n=>{const l=Kx.isLegacyCaptureFormat(n);return function(e,t,n,l){return new Z.a(i=>{n.getEvent(Wo.HumanStarted).pipe(Object(Zx.a)()).subscribe(()=>{(function(e,t,n=!1){return new Promise(l=>{t.selectSnapshot(wm.getViewGraph);const i=e.objects.filter(e=>!0===e.selected).map(e=>e.objectId),a=(()=>n?Human.scene.getLeaves().filter(t=>void 0===e.objects.find(e=>e.objectId===t)):e.objects.filter(e=>!0===e.hidden).map(e=>e.objectId))(),o=e.background.map(e=>new fo(e.chapterId,e.background)),s=e.activeChapterId?[new io(e.activeChapterId)]:[],r=void 0!==e.camera.zoom?[new nm(e.camera.zoom)]:[];setTimeout(()=>{t.dispatch([new Zh(e.camera.lookAt,!1),new ma(e.labels),new Bs.UpdateNodesShown(!1,a),new Bs.UpdateNodesChecked(!0,i),...r,...s,...o]),l()})})})(e,t,l).then(()=>{n.fireEvent(Wo.SceneRestored,void 0),i.next(!0),i.complete()})}),nf(t,e.storyId)})}(l?Kx.convertCaptureFormat(n):n,e,t,l)}},{procName:Vo.SceneEnableXrayMode,actionFn:()=>lf(e,t)},{procName:Vo.SceneDisableXrayMode,actionFn:()=>Qx(e,t)},{procName:Vo.SceneLoad,actionFn:t=>(nf(e,t),!0)},{procName:Vo.SceneReset,actionFn:()=>(o.resetChapter(),!0)},{procName:Vo.SceneInfo,actionFn:t=>{const n=t&&t.objectId?[t.objectId]:Object.keys(Human.scene.objects);return function(e,t,n){const l=n.selectSnapshot(Xs.getNodes);return{name:e,objects:t.reduce((e,t)=>(e[t]=(e=>{const t=Human.scene.objects[e],n=t.isLeaf()?l[e].checked||tf(l,e):void 0;return{objectId:t.objectId,name:t.displayName,description:t.description||"",shown:t.shown,selected:n,children:t.objects.map(e=>e.objectId),parent:t.parent?t.parent.objectId:null}})(t),e),{})}}(e.selectSnapshot(Tc.getStory).displayName,n,e)}},{procName:Vo.ScenePick,actionFn:e=>ef(t.pickScene({x:e.x,y:e.y,rayPick:!0}))},{procName:Vo.SceneSelectObjects,actionFn:t=>{const n=!0===t.replace,l=t;return delete l.replace,n&&e.dispatch(new Bs.UpdateNodesChecked(!1)),e.dispatch(new Bs.UpdateNodesChecked(!1,[],l)),!0}},{procName:Vo.SceneShowObjects,actionFn:t=>{delete t.replace;const n=(e,l)=>{const i=Human.scene.objects[e].objects;let a={[e]:l};for(const o of i)void 0!==t[o.objectId]||(a[o.objectId]=l,a=Object.assign({},a,n(o.objectId,l)));return a},l=Object.entries(t).reduce((e,[t,l])=>Object.assign({},e,n(t,l)),{});return e.dispatch(new Bs.UpdateNodesShown(!1,[],l)),!0}},{procName:Vo.IsolateObject,actionFn:t=>{const n="string"==typeof t?[t]:t,l=e.selectSnapshot(wm.getViewGraph),a=i.getInverseSelection(l,n),o=i.getNodes(l,a);return e.dispatch(new Bs.UpdateNodesShown(!1,o.map(e=>e.id))),!0}},{procName:Vo.SceneTransformObject,actionFn:e=>(t.transformObject(e.objectId,e),!0)},{procName:Vo.SceneColorObject,actionFn:t=>{const{objectId:n,tintColor:l,saturation:i,contrast:a,brightness:o,opacity:s}=t;return e.dispatch(new Bs.UpdateNodesPaint(Qs.fromEngine({tintColor:l,saturation:i,contrast:a,brightness:o,opacity:s}),[n])),!0}},{procName:Vo.SceneGetColor,actionFn:t=>{const n=e.selectSnapshot(Xs.getNodePaint)(t.objectId);return Qs.toEngine(n)}},{procName:Vo.SceneUncolorObject,actionFn:t=>(e.dispatch(new Bs.UpdateNodesPaint(xc.recipe,[t.objectId])),!0)},{procName:Vo.SceneDisableHighlight,actionFn:()=>(n.disableHighlight(),!0)},{procName:Vo.SceneEnableHighlight,actionFn:()=>(n.enableHighlight(),!0)},{procName:Vo.SceneSetHighlightColor,actionFn:e=>(n.setHighlightColor(e),!0)}]}(this.store,this.engineService,this.paintService,this.cameraService,this.graphService,this.animationService,this.viewService).forEach(e=>{Gx(e)}),(n=this.store,l=this.cameraService,[{procName:Vo.CameraInfo,actionFn:()=>qx(l)},{procName:Vo.CameraOrbit,actionFn:e=>(n.dispatch(new rm(void 0===e.pitch?0:e.pitch,void 0===e.yaw?0:e.yaw)),!0)},{procName:Vo.CameraPan,actionFn:e=>(n.dispatch(new am(void 0===e.x?0:e.x,void 0===e.y?0:e.y,void 0===e.z?0:e.z)),!0)},{procName:Vo.CameraReset,actionFn:()=>n.dispatch(new em)},{procName:Vo.CameraSet,actionFn:e=>{const t=e.animate||!1;if(e.objectId)return n.dispatch(new ji(e.objectId,t,e.animationDuration)),!0;const i=qx(l);return n.dispatch(new Zh({eye:e.position||i.position,look:e.target||i.target,up:e.up||i.up},t)),!0}},{procName:Vo.CameraZoom,actionFn:e=>(n.dispatch(new nm(e||0)),!0)},{procName:Vo.setCameraMode,actionFn:e=>(n.dispatch(new cm("pan"===e?"pan":"rotate")),!0)}]).forEach(e=>{Gx(e)}),function(e,t,n,l){return[{procName:Vo.TimelineQuery,actionFn:()=>({chapters:e.selectSnapshot(Nr.getStoryChapters).map(e=>{const{description:t,displayName:n}=e.info;return{description:t,displayName:n,annotations:e.labels.map(e=>({title:e.title,description:e.description}))}})})},{procName:Vo.TimelineInfo,actionFn:()=>(function(e,t){const n=t.getTimeFrame();return{time:t.getTime(),startTime:n.firstTime,endTime:n.lastTime,chapters:e.selectSnapshot(Nr.getStoryChapters).map(e=>e.id),playing:t.isPlaying()}})(e,n)},{procName:Vo.TimelinePlay,actionFn:l=>{const i=l.loop||!1;if(void 0===l.time&&void 0===l.chapterId){const t=e.selectSnapshot(Nr.getSelectedChapterId);return n.play({numChapters:1,loop:i,queue:!1,startChapterId:t}),!0}const a=Math.max(0,l.time),o=n.getTimeFrame().lastTime,s=Math.min(a,o-.001);return new Z.a(a=>{t.pipe(Object(O.k)(io),Object(Au.a)(1)).subscribe(()=>{const e={numChapters:1,queue:!1,loop:i};n.play(void 0!==l.time?Object.assign({},e,{startTime:s}):Object.assign({},e,{startChapterId:l.chapterId})),a.next(!0),a.complete()});const o=(()=>l.chapterId?l.chapterId:n.mapGlobalTimeToLocal(s,{tie:"later"}).branch.id)();e.dispatch(new io(o))})}},{procName:Vo.TimelinePause,actionFn:()=>(n.pause(),!0)},{procName:Vo.TimelineSet,actionFn:l=>{if(void 0===l.time&&void 0===l.chapterId)return!0;if(void 0!==l.chapterId)return e.dispatch(new io(l.chapterId)),!0;const i=Math.max(0,l.time),a=n.getTimeFrame().lastTime,o=Math.min(i,a);return new Z.a(l=>{t.pipe(Object(O.k)(io),Object(Au.a)(1)).subscribe(()=>{n.scrub({time:o,which:0===o?"second":"first"}),l.next(!0),l.complete()});const i=n.mapGlobalTimeToLocal(o,0===o?{tie:"later"}:{});e.dispatch(new io(i.branch.id))})}},{procName:Vo.TimelineNext,actionFn:()=>(l.nextChapter(),!0)},{procName:Vo.TimelinePrev,actionFn:()=>(l.previousChapter(),!0)}]}(this.store,this.actions,this.animationService,this.viewService).forEach(e=>{Gx(e)}),function(e){return[{procName:Vo.InputEnable,actionFn:()=>(e.dispatch(new I(!0)),!0)},{procName:Vo.InputDisable,actionFn:()=>(e.dispatch(new I(!1)),!0)}]}(this.store).forEach(e=>{Gx(e)}),function(e,t,n,l,i){return[{procName:Vo.UIGetBackground,actionFn:()=>(function(e){const{colors:t,gradientType:n,colorStops:l}=e;return{colors:[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]]],gradientType:n,colorStops:l}})(t.selectSnapshot(Nr.getSelectedChapterBackground))},{procName:Vo.UISetBackground,mapFnIn:e=>{const{colors:t,colorStops:n,gradientType:l}=e;return{colors:t?bf(t):t,gradientType:l,colorStops:n}},actionFn:e=>{if(e){const n=t.selectSnapshot(Nr.getSelectedChapterBackground),{colors:l,colorStops:i,gradientType:a}=n,o=e.colors?[].concat(...e.colors):l,s=new $o(o,e.gradientType||a,e.colorStops||i);t.dispatch(new Oo(s))}}},{procName:Vo.UIGetWordPosition,actionFn:t=>{const{worldPos:n}=e.renderer.pick.pick(t.x,t.y,{rayPick:!0});if(n){const{0:e,1:t,2:l}=n;return{x:e,y:t,z:l}}return null}},{procName:Vo.UISetLoadingExperience,actionFn:e=>(Object(Mt.isEmpty)(e)?t.dispatch(new X.CloseWindow(Em.Interact)):t.dispatch([new X.SetInteractType(e),new X.OpenWindow(Em.Interact)]),!0)},{procName:Vo.UISetScrollCaptureMode,actionFn:e=>(t.dispatch(new gi(e)),!0)},{procName:Vo.UISetTutorial,actionFn:e=>(t.dispatch([new X.ToggleWindow(Em.Tutorial,e.enabled),new X.StartTutorial(e.enabled)]),!0)},{procName:Vo.UIGetDisplay,actionFn:()=>{const e=t.selectSnapshot($m.getLayout);return{audio:e.audio.enable,fullscreen:e.fullscreen.enable,help:e.help.enable,nav:e.camera.enable,cameraMode:e.camera.enable,center:e.camera.enable,zoomIn:e.camera.enable,zoomOut:e.camera.enable,info:e.column.enable||e.drawer.enable,playPause:e.media.enable,scrubber:e.media.enable,"scrubber.chapters":e.media.enable,tools:e.tools.enable,"tools-display":e.tools.enable,tour:e.pagination.enable,"tour.chapters":e.pagination.enable,objectTree:e.search.enable,anatomyLabels:e.anatomyLabels.enable,share:!1,dissect:!1,xray:!1,annotations:!1}}},{procName:Vo.UISetDisplay,actionFn:e=>{const n=df.convertAPIUIConfigToUIConfig(e);t.dispatch(new J(n))}},{procName:Vo.UIResetDisplay,actionFn:()=>{const e=t.selectSnapshot($m.getInitialLayout);t.dispatch(new X.SetLayout(e))}},{procName:Vo.UISnapshot,aliases:[Vo.SceneSnapshot],mapFnIn:e=>{const{width:t,height:n}=l.getCanvas();return Object.assign({width:t,height:n,openInTab:!1,fileType:"jpeg",quality:.92},e)},actionFn:e=>{const{width:l,height:a,openInTab:o,fileType:s}=e,r=t.selectSnapshot(Nr.getSelectedChapterId);return t.dispatch(new So(r,"jpeg"===s?kt.JPEG:kt.PNG,.92,{width:l,height:a},"original",!0,!0)).pipe(Object(_t.a)(()=>n.pipe(Object(O.l)(Po),Object(Au.a)(1))),Object(_t.a)(e=>i.blobToBase64(e.blob)),Object(Zn.a)(e=>{o&&e&&function(e){const t=window.open("","_blank");if(t){const n=t.document.createElement("img");n.src=e,t.document.body.appendChild(n)}}(e)}),Object(L.a)(()=>Object(of.of)(null)))}}]}(Human,this.store,this.actions,this.engineService,this.imageService).forEach(e=>{Gx(e)}),function(e,t,n){return[...kf(e,t,n),...Nf(e,t,n),{procName:Vo.LabelsSetEnabled,aliases:[Vo.AnnotationsSetEnabled],actionFn:e=>{t.dispatch(new Ji(e.enable))}}]}(Human,this.store,this.labelsService).forEach(e=>{Gx(e)})}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(O.i),l.Xb(O.b),l.Xb(xt),l.Xb(Rs),l.Xb(or),l.Xb(St),l.Xb(Wx),l.Xb(Ns),l.Xb(Ts),l.Xb(rx),l.Xb(N))},token:e,providedIn:"root"}),e})();var Bf=function(e){return e.Content="content",e.Engine="engine",e.Auth="auth",e}({}),$f=n("yLV6");class Vf{constructor(e,t,n,l,a,o,r,c,u,p,d){this.locationStrategy=e,this.router=t,this.store=n,this.actions=l,this.activatedRoute=a,this.widgetAPIHandler=o,this.errorService=r,this.engineService=c,this.cameraService=u,this.storageService=p,this.renderer=d,this.title="Biodigital Human",this.environmentApplication=i,this.environmentPlatform=s,this.ngUnsubscribe=new K.a}ngOnInit(){this.initErrorHandling(),this.initInteractions();const e=this.activatedRoute.snapshot.data.widgetUrlConfig;this.initWidgetBreakpoints(e),this.initWidgetSetup(e),this.initWidgetAuth(),this.initViewAnalytics(),this.initInteractionAnalytics(),this.initBackgroundFromWidget(e),this.initBackgroundFromChapter(),this.initCamera(e),this.initRotation(e),this.widgetAPIHandler.listen(),this.initChaptersReadyListener(),this.initHumanReadyListener(),this.initDynamicLayout()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initWidgetSetup(e){const t=window!==window.top,n=t?BD_DOCUMENT_REFERRER:window.location.href;this.store.dispatch(new v(n,t,e));const l=this.store.selectSnapshot($m.getLayout),i=df.convertUrlUIConfigToUIConfig(e),a=df.createLayoutFromConfig(l,i);this.store.dispatch(new X.SetLayout(a)),this.store.dispatch(new X.SetInitialLayout(a));const o=df.getScrollSetting(e);this.store.dispatch(new gi(o));const s=df.getUsePrintImage(e),{interactType:r,isInteractActive:c}=df.getInteractType(e,this.store.selectSnapshot($m.shouldWindowOpen(Em.Interact)),this.store.selectSnapshot($m.getInteractType)),u=this.storageService.getLocalItem(Yn.GettingStartedTutorial),p=!0===i.tutorial&&"true"!==u;this.store.dispatch([new X.SetInteractType(r),new X.ToggleWindow(Em.Interact,c),new X.ToggleWindow(Em.Tutorial,p),new X.StartTutorial(p),new X.SetUsePrintImage(s)])}initWidgetAuth(){this.store.selectSnapshot(q.getEmbedded)&&this.store.dispatch(new S)}initViewAnalytics(){const e=["loaded","interactive","complete"].includes(document.readyState);(e?Object(z.a)(e):Object(Zd.a)(document,"DOMContentLoaded")).pipe(Object(Au.a)(1),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new C(W.View))})}initInteractionAnalytics(){this.interactionChance$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new C(W.ChanceInteraction))}),this.firstInteraction$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new C(W.FirstInteraction))})}initErrorHandling(){this.actions.pipe(Object(O.l)(Va),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>this.handleContentErrors()),this.engineService.getEvent(Wo.Error).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>this.handleEngineErrors(e)),this.actions.pipe(Object(O.l)(M),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>this.handleAuthErrors(e))}initWidgetBreakpoints({"ui-collapse-label":e,"annotation-collapse":t}){const n=[e,t].find(e=>!Object(Mt.isNil)(e));Object(Mt.isNil)(n)||this.store.dispatch(new X.SetLabelBreakpoint(n))}initInteractions(){const e=this.getCanvasInteraction(),t=this.actions.pipe(Object(O.l)(Bs.UpdateNodeSelected,Bs.UpdateNodesChecked,Bs.UpdateNodesShown,Bs.UpdateNodesPickable,Bs.UpdateNodesPaint));this.interactionReady$=this.store.select(Nr.getSelectedChapter).pipe(Object(Q.a)(e=>e&&e.readyState.model),Object(Au.a)(1));const n=this.engineService.getCanvas();this.interactionChance$=Object(dt.a)(this.interactionReady$,this.getIntersectionObserver(n,.75)).pipe(Object(Au.a)(1)),this.firstInteraction$=Object(Uu.a)(e,t).pipe(Object(Vx.a)(this.interactionReady$),Object(Au.a)(1))}initBackgroundFromWidget({background:e}){e&&(this.setWidgetTransparent($o.isTransparent(e)),this.actions.pipe(Object(O.k)(ao),Object(Au.a)(1),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new _o(e))}))}initBackgroundFromChapter(){this.store.select(Nr.getSelectedChapter).pipe(Object(Q.a)(e=>null!=e),Object(u.a)(e=>$o.isTransparent(e.background)),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.setWidgetTransparent(e)})}initCamera({camera:e}){e&&this.actions.pipe(Object(O.l)(Na),Object(Au.a)(1),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new Zh(e,!1))})}initRotation({"load-rotate":e}){if(e){let t=performance.now();Object(Uo.a)(0,No.animationFrame).pipe(Object(u.a)(()=>e*(performance.now()-t)*.001),Object(Zn.a)(()=>t=performance.now()),Object(Y.a)(this.firstInteraction$),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.cameraService.rotateCameraStatic(0,e)}),this.firstInteraction$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{const e=this.store.selectSnapshot(Nr.getSelectedChapter),t=Object(Mt.get)(e,"camera.location");t&&this.store.dispatch(new Zh(t,!0,2))})}}initHumanReadyListener(){this.actions.pipe(Object(O.l)(r.platform===s.SDK?Za:Ka)).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.engineService.fireEvent(Wo.Started,null)})}initChaptersReadyListener(){this.store.select(Nr.getAllChaptersModelsReady).pipe(Object(Q.a)(e=>!0===e),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new Ka),this.engineService.fireEvent(Wo.TimelineChaptersActivated,{oldChapterIndex:0,newChapterIndex:0,time:0})})}initDynamicLayout(){Object(Du.b)(this.store.select(q.getWidgetApiUIConfig),this.store.select(q.getWidgetUrlConfig),this.store.select(Nr.getSelectedChapter)).pipe(Object(Q.a)(([e,t,n])=>null!=n&&null!=t),Object(Y.a)(this.ngUnsubscribe)).subscribe(([e,t,n])=>{const l=df.convertUrlUIConfigToUIConfig(t),i=df.convertChapterToUIConfig(n);let a=new rf;a=df.mergeUIConfigs(a,e),a=df.mergeUIConfigs(a,l),a=df.mergeUIConfigs(a,i);const o=this.store.selectSnapshot($m.getLayout),s=df.createLayoutFromConfig(o,a);this.store.dispatch(new X.SetLayout(s))})}handleContentErrors(){this.store.dispatch(new Ra(null,null)),this.redirectToErrorPage(Bf.Content)}handleEngineErrors(e){const t={category:e.name,log:JSON.stringify({log:e.log,stack:e.stack,webglInfo:e.webglInfo}),message:e.message};this.errorService.logError(t).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(),this.redirectToErrorPage(Bf.Engine,e.name)}handleAuthErrors(e){this.redirectToErrorPage(Bf.Auth,e.response.errorCode)}redirectToErrorPage(e,t){if((this.router.url||"").match("/error"))return;const n=this.locationStrategy.getBaseHref(),l=this.router.createUrlTree([`${n}/error`],{queryParams:{errorType:e,errorCode:t,errorUrl:this.router.url}}),i=this.router.serializeUrl(l);window.location.href=i}getCanvasInteraction(){let e;return new Z.a(t=>{const n=this.engineService.getCanvas();(e=new $f.Manager(n)).add([new $f.Tap({event:"singletap"}),new $f.Tap({event:"doubletap",taps:2}),new $f.Pan({event:"pan",direction:$f.DIRECTION_ALL,threshold:0})]);const l=(()=>t.next()).bind(this);e.on("panstart",l),e.on("singletap",l)}).pipe(Object(B.a)(()=>{e&&(e.destroy(),e=null)}),Object(Y.a)(this.ngUnsubscribe))}getIntersectionObserver(e,t){return new Z.a(n=>{const l=new IntersectionObserver(i=>{i[0].intersectionRatio>=t&&(n.next(e),n.complete(),l.unobserve(e))},{root:null,threshold:t});l.observe(e)})}setWidgetTransparent(e){e?this.renderer.setStyle(document.body,"background","none transparent"):this.renderer.removeStyle(document.body,"background")}}var Wf=l.vb({encapsulation:0,styles:[[".widget__messages[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:fixed;top:0;left:0;right:0;z-index:101}.widget-shell[_ngcontent-%COMP%]{pointer-events:none;position:fixed;top:0;bottom:0;left:0;right:0;z-index:99999;border:var(--widget-shell-border)}"]],data:{}});function Gf(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"div",[["class","widget-shell"]],null,null,null,null,null))],null,null)}function qf(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"div",[["class","widget theme-light"]],null,null,null,null,null)),(e()(),l.xb(1,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),l.wb(2,212992,null,0,d.q,[d.b,l.S,l.k,[8,null],l.i],null,null),(e()(),l.xb(3,0,null,null,3,"div",[["class","widget__messages pt-2 pr-2 pl-2"]],null,null,null,null,null)),(e()(),l.xb(4,0,null,null,2,"app-ie-warning",[["appShowIE11",""]],null,null,null,Nx,Dx)),l.wb(5,81920,null,0,Hx,[l.l,l.H],null,null),l.wb(6,245760,null,0,Rx,[l.i,el],null,null),(e()(),l.nb(16777216,null,null,1,null,Gf)),l.wb(8,81920,null,0,Bx,[l.P,l.S,d.m],{appFlagApplication:[0,"appFlagApplication"],appFlagApplicationMode:[1,"appFlagApplicationMode"],appFlagApplicationPlatform:[2,"appFlagApplicationPlatform"]},null)],(function(e,t){var n=t.component;e(t,2,0),e(t,5,0),e(t,6,0),e(t,8,0,n.environmentApplication.All,"exclude",n.environmentPlatform.SDK)}),null)}function Xf(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-widget-master",[],null,null,null,qf,Wf)),l.wb(1,245760,null,0,Vf,[se.i,d.m,O.i,O.b,d.a,Hf,zo,Rs,xt,el,l.H],null,null)],(function(e,t){e(t,1,0)}),null)}var Kf=l.tb("app-widget-master",Vf,Xf,{},{},[]);class Zf{transform(e,t){return Object(Mt.lowerCase)(e).split(" ").map(e=>Object(Mt.upperFirst)(e)).join(" ")}}class Yf{constructor(){this.iconType="solid",this.iconPlacement="bottom",this.arrow="",this.color="",this.labelSize="medium",this.label=""}ngOnInit(){}}var Qf=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}[_nghost-%COMP%]{white-space:nowrap}.button-icon[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.button-icon__label[_ngcontent-%COMP%]{color:#d7e0ea}.theme-light[_nghost-%COMP%]   .button-icon__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .button-icon__label[_ngcontent-%COMP%]{color:#1c2a3f}.theme-dark[_nghost-%COMP%]   .button-icon__label[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .button-icon__label[_ngcontent-%COMP%]{color:#d7e0ea}.button-icon__label--light[_ngcontent-%COMP%]{color:#d7e0ea!important}.button-icon__label--dark[_ngcontent-%COMP%]{color:#1c2a3f!important}.button-icon--left[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}.button-icon--left[_ngcontent-%COMP%]   .button-icon__label[_ngcontent-%COMP%]{padding-right:4px}.button-icon--left[_ngcontent-%COMP%]   .button-icon__label--small[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.button-icon--left[_ngcontent-%COMP%]   .button-icon__label--medium[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.button-icon--left[_ngcontent-%COMP%]   .button-icon__label--large[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.button-icon--left[_ngcontent-%COMP%]   .button-icon__icon[_ngcontent-%COMP%]{margin-right:8px}.button-icon--bottom[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.button-icon--bottom[_ngcontent-%COMP%]   .button-icon__label[_ngcontent-%COMP%]{margin-top:4px}.button-icon--bottom[_ngcontent-%COMP%]   .button-icon__label--small[_ngcontent-%COMP%]{font-size:6px;letter-spacing:.36px;line-height:1.25em;text-transform:uppercase}.button-icon--bottom[_ngcontent-%COMP%]   .button-icon__label--medium[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.button-icon--bottom[_ngcontent-%COMP%]   .button-icon__label--large[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.button-icon__arrow[_ngcontent-%COMP%]{display:inline-block;margin-left:4px}"]],data:{}});function e_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-icon",[["class","button-icon__arrow"],["icon","angle-down"],["size","sm"]],null,null,null,he,ge)),l.wb(1,114688,null,0,be,[],{icon:[0,"icon"],size:[1,"size"]},null)],(function(e,t){e(t,1,0,"angle-down","sm")}),null)}function t_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-icon",[["class","button-icon__arrow"],["icon","angle-up"],["size","sm"]],null,null,null,he,ge)),l.wb(1,114688,null,0,be,[],{icon:[0,"icon"],size:[1,"size"]},null)],(function(e,t){e(t,1,0,"angle-up","sm")}),null)}function n_(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,14,"div",[["class","button-icon"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l.xb(3,0,null,null,6,"div",[["class","button-icon__icon"]],null,null,null,null,null)),(e()(),l.xb(4,0,null,null,1,"app-icon",[],null,null,null,he,ge)),l.wb(5,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.nb(16777216,null,null,1,null,e_)),l.wb(7,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,t_)),l.wb(9,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(10,0,null,null,4,"div",[["class","button-icon__label"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(12,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(13,{"button-icon__label--light":0,"button-icon__label--dark":1,"button-icon__label--small":2,"button-icon__label--medium":3,"button-icon__label--large":4}),(e()(),l.Rb(14,null,[" "," "]))],(function(e,t){var n=t.component;e(t,2,0,"button-icon","button-icon--"+n.iconPlacement),e(t,5,0,n.icon),e(t,7,0,"down"===n.arrow),e(t,9,0,"up"===n.arrow);var l=e(t,13,0,"light"===n.color,"dark"===n.color,"small"===n.labelSize,"medium"===n.labelSize,"large"===n.labelSize);e(t,12,0,"button-icon__label",l)}),(function(e,t){e(t,14,0,t.component.label)}))}var l_=function(e){return e.View="view",e.Edit="edit",e.Manage="manage",e.Embed="embed",e.Delete="delete",e.CopyLink="copy-link",e.CopyBookmark="copy-bookmark",e.CopyTeamBookmark="copy-team-bookmark",e}({});class i_{constructor(e,t,n,o,s,r,c,u,p,d){this.dialog=e,this.dialogService=t,this.router=n,this.store=o,this.actions=s,this.snackbar=r,this.clipboardService=c,this.bookmarksService=u,this.exploreService=p,this.changeDetectorRef=d,this.bookmarkActionsEnum=l_,this.application=i,this.bookmarkSubject=new Le.a(null),this.bookmarkType=a.Module,this.bookmarkEmbedTypes=[a.Bookmark],this.theme="dark",this.bookmarkActions=[l_.View,l_.Edit,l_.Manage,l_.Embed,l_.Delete,l_.CopyLink],this.otherActions=[],this.otherClick=new l.n,this.ngUnsubscribe=new K.a}get bookmark(){return this._bookmark}set bookmark(e){null!=e&&this.bookmarkSubject.next(e)}ngOnInit(){this.bookmarkSubject.pipe(Object(Q.a)(e=>null!=e),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this._bookmark=e,this.bookmarkId=e.id,this.bindApplicationEvents(),this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}bindApplicationEvents(){this.actions.pipe(Object(O.l)(jl,Il),Object(Q.a)(e=>e.bookmarkId===this.bookmark.id),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.handleDeleteSuccess()}),this.actions.pipe(Object(O.l)(kl,Jl),Object(Q.a)(e=>e.bookmarkId===this.bookmark.id),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.handleDeleteFailure()}),this.actions.pipe(Object(O.l)(Ht),Object(Q.a)(()=>!this.store.selectSnapshot(Ro.getPublishing)),Object(Q.a)(e=>e.model.id===this.bookmark.id),Object(_t.a)(e=>this.copyToClipboard(e.url)),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackbar.open(e?"Successfully copied link to clipboard.":"Unable to copy link to clipboard.")}),this.actions.pipe(Object(O.l)(Bt),Object(Q.a)(e=>e.model.id===this.bookmark.id),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.snackbar.open("Unable to generate URL.")}),this.actions.pipe(Object(O.l)(Kl),Object(Q.a)(e=>e.sourceId===this.bookmark.id),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.handleCopySuccess(e)}),this.actions.pipe(Object(O.l)(Zl),Object(Q.a)(e=>e.id===this.bookmark.id),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.handleCopyFailure(e.error)})}handleDeleteSuccess(){this.snackbar.open("Successfully deleted 3D model")}handleDeleteFailure(){this.snackbar.open("There was an error deleting the 3D model")}handleManageClick(){this.dialogService.openManageDialog(this.bookmark)}handleMenuOpened(){this.bookmarkSubject.value||(this.bookmarkType===a.Module?this.exploreService.getConditionModel(this.bookmarkId).subscribe(e=>{this.bookmarkSubject.next(e),this.bookmarkSubject.complete()}):this.bookmarksService.getBookmarkModel(this.bookmarkId).subscribe(e=>{this.bookmarkSubject.next(e),this.bookmarkSubject.complete()}))}handleViewBookmarkClick(){if(this.canViewBookmark(this.bookmark)){const e=this.bookmark.id,t=this.store.selectSnapshot(Ao.getUserLocale).lang;this.router.navigate(["/view"],{queryParams:{id:e,lang:t}})}else this.promptPremiumContentRestriction()}handleDeleteClick(){this.delete()}handleCopySuccess({groupAccess:e,collection:t}){const n=this.bookmark.title;this.snackbar.open(t?`${n} was successfully added to the "${t.collection_name}" collection.`:e?`${n} was successfully added to Team Models.`:`${n} was successfully added to My Models`)}handleCopyFailure(e){switch(Object(Mt.get)(e,"error.error.message")){case"Action forbidden.  Your account content limit has been reached":this.dialogService.openLimitDialog().afterClosed().subscribe(e=>{e&&this.dialogService.openUpgradeDialog()});break;default:this.snackbar.open("There was an error adding to My Models")}}handleEmbedModel(){this.dialog.open(_p,{width:"90vw",height:"95vh",data:{bookmark:this.bookmark}})}handleCopyLinkClick(){this.copyLink()}handleCopyBookmarkClick(){this.canViewBookmark(this.bookmark)?this.copyBookmark():this.promptPremiumContentRestriction()}handleAddTeamModelClick(){this.dialogService.openAddTeamModelDialog(this.bookmark)}handleOtherClick(e){this.otherClick.emit(e)}copyToClipboard(e){return this.clipboardService.copyToClipboard(e).pipe(Object(_t.a)(t=>t?Object(z.a)(t):this.dialogService.openClipboardDialog(e).afterClosed()))}hasActions(...e){return e.some(e=>this.hasAction(e))}hasAction(e){const t=this.bookmarkActions.some(t=>t===e);if(!t)return t;switch(e){case l_.Delete:return this.bookmark&&this.bookmark.is_owner||this.bookmark.favorite;case l_.Embed:return this.bookmarkEmbedTypes.includes(this.bookmarkType);case l_.CopyBookmark:return this.bookmark&&!this.bookmark.is_owner&&!this.bookmark.favorite&&!this.bookmark.unavailable;default:return t}}delete(){this.dialogService.openConfirmDialog({data:{titleText:"Delete 3D model",bodyText:"Are you sure you want to delete this 3D model?",confirmText:"Delete",confirmColor:"warn"}}).afterClosed().pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{e&&this.store.dispatch(this.bookmark.favorite?new Tl(this.bookmark):new Cl(this.bookmarkId))})}copyLink(){const e=this.store.selectSnapshot(Uc.getWidgetOptions)||new ft;this.store.dispatch(new Nt(this.bookmark,e))}copyBookmark(){const e=this.store.selectSnapshot(Ao.getUserLocale).lang;this.store.dispatch(new Xl(this.bookmarkId,this.bookmarkType,e))}promptPremiumContentRestriction(){this.store.dispatch(new Qu.OpenPremiumContent)}canViewBookmark(e){return!e.premium||this.store.selectSnapshot(Ao.isPremiumUser)}}var a_=l.vb({encapsulation:0,styles:[[""]],data:{}});function o_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-spinner",[],null,null,null,Up,Rp)),l.wb(2,114688,null,0,Fp,[],null,null)],(function(e,t){e(t,2,0)}),null)}function s_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleViewBookmarkClick()&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,[" View "]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function r_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l.Rb(-1,null,["Edit in Studio"]))],null,null)}function c_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l.Rb(-1,null,["Edit in Loft"]))],null,null)}function u_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,8,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==l.Jb(e,2).onClick()&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),l.wb(2,16384,null,0,d.n,[d.m,d.a,[8,null],l.H,l.l],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),l.Mb(3,{id:0}),l.Kb(4,1),(e()(),l.nb(16777216,null,0,1,null,r_)),l.wb(6,81920,null,0,Bx,[l.P,l.S,d.m],{appFlagApplication:[0,"appFlagApplication"]},null),(e()(),l.nb(16777216,null,0,1,null,c_)),l.wb(8,81920,null,0,Bx,[l.P,l.S,d.m],{appFlagApplication:[0,"appFlagApplication"]},null)],(function(e,t){var n=t.component,l=e(t,3,0,n.bookmarkId),i=e(t,4,0,"/edit");e(t,2,0,l,i),e(t,6,0,n.application.Studio),e(t,8,0,n.application.Loft)}),(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function p_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(1,49152,null,0,xb.a,[],null,null)],null,(function(e,t){e(t,0,0,l.Jb(t,1).vertical?"vertical":"horizontal",l.Jb(t,1).vertical,!l.Jb(t,1).vertical,l.Jb(t,1).inset)}))}function d_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleCopyLinkClick()&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,[" Copy URL "]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function b_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleEmbedModel()&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,[" Publish... "]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function g_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(1,49152,null,0,xb.a,[],null,null)],null,(function(e,t){e(t,0,0,l.Jb(t,1).vertical?"vertical":"horizontal",l.Jb(t,1).vertical,!l.Jb(t,1).vertical,l.Jb(t,1).inset)}))}function h_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleManageClick()&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,[" Manage... "]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function m_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleDeleteClick()&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,[" Delete... "]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function x_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(1,49152,null,0,xb.a,[],null,null)],null,(function(e,t){e(t,0,0,l.Jb(t,1).vertical?"vertical":"horizontal",l.Jb(t,1).vertical,!l.Jb(t,1).vertical,l.Jb(t,1).inset)}))}function f_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleCopyBookmarkClick()&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,[" Add to My Models "]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function __(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleAddTeamModelClick()&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,[" Add to Team Models "]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function y_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,x_)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,f_)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,__)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,n.hasActions(n.bookmarkActionsEnum.CopyBookmark)),e(t,4,0,n.hasActions(n.bookmarkActionsEnum.CopyBookmark)),e(t,6,0,n.hasActions(n.bookmarkActionsEnum.CopyTeamBookmark))}),null)}function O_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,18,null,null,null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,s_)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,u_)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,p_)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,d_)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,b_)),l.wb(10,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,g_)),l.wb(12,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,h_)),l.wb(14,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,m_)),l.wb(16,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,y_)),l.wb(18,81920,null,0,_g,[l.P,l.S],null,null),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,n.hasActions(n.bookmarkActionsEnum.View)),e(t,4,0,n.hasActions(n.bookmarkActionsEnum.Edit)),e(t,6,0,n.hasActions(n.bookmarkActionsEnum.View,n.bookmarkActionsEnum.Edit)),e(t,8,0,n.hasActions(n.bookmarkActionsEnum.CopyLink)),e(t,10,0,n.hasActions(n.bookmarkActionsEnum.Embed)),e(t,12,0,n.hasActions(n.bookmarkActionsEnum.Manage,n.bookmarkActionsEnum.Delete)),e(t,14,0,n.hasActions(n.bookmarkActionsEnum.Manage)),e(t,16,0,n.hasActions(n.bookmarkActionsEnum.Delete)),e(t,18,0)}),null)}function w_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,16,null,null,null,null,null,null,null)),(e()(),l.xb(1,16777216,null,null,4,"button",[["app-button",""],["aria-haspopup","true"],["class","mat-menu-trigger"]],[[1,"aria-expanded",0],[8,"disabled",0]],[[null,"menuOpened"],[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var i=!0,a=e.component;return"mousedown"===t&&(i=!1!==l.Jb(e,2)._handleMousedown(n)&&i),"keydown"===t&&(i=!1!==l.Jb(e,2)._handleKeydown(n)&&i),"click"===t&&(i=!1!==l.Jb(e,2)._handleClick(n)&&i),"menuOpened"===t&&(i=!1!==a.handleMenuOpened()&&i),i}),Ze,Ke)),l.wb(2,1196032,null,0,Je.g,[Qe.a,l.l,l.S,Je.c,[2,Je.d],[8,null],[2,et.b],_e.e],{menu:[0,"menu"]},{menuOpened:"menuOpened"}),l.wb(3,114688,null,0,Xe,[],{buttonTheme:[0,"buttonTheme"]},null),(e()(),l.xb(4,0,null,0,1,"app-icon",[["icon","ellipsis-v"]],null,null,null,he,ge)),l.wb(5,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(6,0,null,null,10,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.Ob(6144,null,Je.d,null,[Je.h]),l.Ob(6144,null,Je.b,null,[Je.d]),l.wb(9,1294336,[["mainMenu",4]],3,Je.h,[l.l,l.B,Je.a],null,null),l.Pb(603979776,1,{_allItems:1}),l.Pb(603979776,2,{items:1}),l.Pb(603979776,3,{lazyContent:0}),(e()(),l.nb(16777216,null,0,1,null,o_)),l.wb(14,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,0,1,null,O_)),l.wb(16,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,l.Jb(t,9)),e(t,3,0,n.theme),e(t,5,0,"ellipsis-v"),e(t,9,0),e(t,14,0,!n.bookmark),e(t,16,0,n.bookmark)}),(function(e,t){e(t,1,0,l.Jb(t,2).menuOpen||null,l.Jb(t,3).disabled)}))}function v_(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,1,null,w_)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,t.component.bookmarkId)}),null)}let C_=(()=>{class e{constructor(e,t,n,l,a){this.activatedRoute=e,this.store=t,this.changeDetectorRef=n,this.exploreService=l,this.storyService=a,this.ngUnsubscribe=new K.a,this.id="",this.type="",this.category="",this.isLoft=r.application===i.Loft}ngOnInit(){this.story$.pipe(Object(Q.a)(e=>null!=e),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.id=this.activatedRoute.snapshot.queryParams.id,this.type=this.storyService.getStoryType(this.activatedRoute.snapshot.queryParams.id),this.category=this.exploreService.getStoryCategory(e),this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}get bookmarkActions(){const e=this.store.selectSnapshot(Uc.getOrganization);return[l_.CopyLink,l_.Embed,l_.CopyBookmark,...e?[l_.CopyTeamBookmark]:[]]}}return Object(y.__decorate)([Object(O.e)(Tc.getStory),Object(y.__metadata)("design:type",Z.a)],e.prototype,"story$",void 0),e})();var j_=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.view-internal-header{padding:12px 12px 0;border-bottom:1px solid #eaeff5;border-bottom:var(--view-internal-header-border)}.view-internal-header__controls{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;padding-bottom:8px}.view-internal-header__logo{background:url(logo-color.e5306d37dd40b7ac98d4.svg) center center no-repeat rgba(215,224,234,.3);background-size:24px 24px;border-radius:4px;border:1px solid #eaeff5;border-bottom:var(--view-internal-header-border);width:36px;height:36px;-webkit-transition:background-color 250ms,background-image 250ms;transition:background-color 250ms,background-image 250ms;-webkit-box-flex:0;flex:0 0 36px}.view-internal-header__logo:hover{background-color:rgba(215,224,234,.6)}.view-internal-header__breadcrumb{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase;cursor:pointer;display:inline-block;margin:16px 0;color:#6a82a4;color:var(--view-internal-header-breadcrumb-color);text-decoration:none}.view-internal-header__breadcrumb:hover{text-decoration:underline}"]],data:{}});function k_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"a",[["class","view-internal-header__breadcrumb"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i}),null,null)),l.wb(1,671744,null,0,d.o,[d.m,d.a,se.i],{routerLink:[0,"routerLink"]},null),l.Kb(2,2),(e()(),l.xb(3,0,null,null,1,"app-icon",[["icon","caret-left"]],null,null,null,he,ge)),l.wb(4,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.Rb(5,null,[" "," "])),l.Nb(6,1)],(function(e,t){var n=e(t,2,0,"/explore",t.component.category);e(t,1,0,n),e(t,4,0,"caret-left")}),(function(e,t){var n=t.component;e(t,0,0,l.Jb(t,1).target,l.Jb(t,1).href);var i=l.Sb(t,5,0,e(t,6,0,l.Jb(t.parent,0),n.category));e(t,5,0,i)}))}function S_(e){return l.Tb(2,[l.Lb(0,Zf,[]),(e()(),l.xb(1,0,null,null,16,"div",[["class","view-internal-header"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,13,"div",[["class","view-internal-header__controls"]],null,null,null,null,null)),(e()(),l.xb(3,16777216,null,null,2,"a",[["class","view-internal-header__logo"],["matTooltip","Back to Dashboard"],["routerLink","/"]],[[1,"target",0],[8,"href",4]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,4).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),"longpress"===t&&(i=!1!==l.Jb(e,5).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,5)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,5)._handleTouchend()&&i),i}),null,null)),l.wb(4,671744,null,0,d.o,[d.m,d.a,se.i],{routerLink:[0,"routerLink"]},null),l.wb(5,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),(e()(),l.xb(6,0,null,null,9,"div",[["class","panel__actions hide-sm"]],null,null,null,null,null)),(e()(),l.xb(7,0,null,null,6,"button",[["app-button",""],["buttonTheme","light"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,8).onClick()&&i),i}),Ze,Ke)),l.wb(8,16384,null,0,d.n,[d.m,d.a,[8,null],l.H,l.l],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),l.Mb(9,{id:0}),l.Kb(10,1),l.wb(11,114688,null,0,Xe,[],{buttonTheme:[0,"buttonTheme"]},null),(e()(),l.xb(12,0,null,0,1,"app-button-icon",[["icon","pen"],["iconPlacement","left"]],null,null,null,n_,Qf)),l.wb(13,114688,null,0,Yf,[],{icon:[0,"icon"],iconPlacement:[1,"iconPlacement"],label:[2,"label"]},null),(e()(),l.xb(14,0,null,null,1,"app-bookmark-actions",[["theme","light"]],null,null,null,v_,a_)),l.wb(15,245760,null,0,i_,[ip.e,sp,d.m,O.i,O.b,rp.c,Xc,Ac,qr,l.i],{bookmarkId:[0,"bookmarkId"],bookmarkType:[1,"bookmarkType"],theme:[2,"theme"],bookmarkActions:[3,"bookmarkActions"]},null),(e()(),l.nb(16777216,null,null,1,null,k_)),l.wb(17,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,4,0,"/"),e(t,5,0,"Back to Dashboard");var l=e(t,9,0,n.id),i=e(t,10,0,"/edit");e(t,8,0,l,i),e(t,11,0,"light"),e(t,13,0,"pen","left",n.isLoft?"Edit in Loft":"Edit in Studio"),e(t,15,0,n.id,n.type,"light",n.bookmarkActions),e(t,17,0,"module"===n.type&&n.category)}),(function(e,t){e(t,3,0,l.Jb(t,4).target,l.Jb(t,4).href),e(t,7,0,l.Jb(t,11).disabled)}))}class P_{constructor(){this.unpadded=!1,this.placement="left"}ngOnInit(){}updateViewHeight(){const e=.01*window.innerHeight;this.viewColumn.nativeElement.style.setProperty("--vh",`${e}px`)}}var M_=l.vb({encapsulation:0,styles:[[".view-column[_ngcontent-%COMP%]{pointer-events:initial;background:#fff;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3);color:#131c2a;background:var(--view-column-background);box-shadow:var(--view-column-toggle-shadow);color:var(--view-column-color);width:320px;height:100%;position:absolute;z-index:30}.view-column--left[_ngcontent-%COMP%]{left:0}.view-column--right[_ngcontent-%COMP%]{right:0;box-shadow:0 -1px 24px rgba(0,0,0,.4)}.view-column--unpadded[_ngcontent-%COMP%]   .view-column__body[_ngcontent-%COMP%]{padding:0}.view-column__inner[_ngcontent-%COMP%]{background:#fff;border-right:1px solid #eaeff5;background:var(--view-column-background);border-right:var(--view-column-border);display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;width:320px;position:absolute;left:0;z-index:10}.view-column__header[_ngcontent-%COMP%]{flex-shrink:1;background:var(--view-column-background)}.view-column__header[_ngcontent-%COMP%]:empty{display:none}.view-column__body[_ngcontent-%COMP%]{overflow-y:auto;-webkit-box-flex:1;flex-grow:1;height:100%;padding:16px 12px}"]],data:{}});function T_(e){return l.Tb(2,[l.Pb(671088640,1,{viewColumn:0}),(e()(),l.xb(1,0,[[1,0],["viewColumn",1]],null,8,"div",[["class","view-column"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(3,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(4,{"view-column--unpadded":0,"view-column--left":1,"view-column--right":2}),(e()(),l.xb(5,0,null,null,4,"div",[["class","view-column__inner"]],null,null,null,null,null)),(e()(),l.xb(6,0,null,null,1,"div",[["class","view-column__header"]],null,null,null,null,null)),l.Ib(null,0),(e()(),l.xb(8,0,null,null,1,"div",[["class","view-column__body"]],null,null,null,null,null)),l.Ib(null,1)],(function(e,t){var n=t.component,l=e(t,4,0,n.unpadded,"left"===n.placement,"right"===n.placement);e(t,3,0,"view-column",l)}),null)}class I_{constructor(){this.label="",this.showHeader=!0,this.padding="normal"}ngOnInit(){}}var J_=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.view-panel{padding:0 0 32px;margin-bottom:16px;border-bottom:var(--view-panel-border)}.view-panel--padding-none{padding:0;margin:0}.view-panel--padding-dense{padding:0 0 8px;margin:0 0 8px}.view-panel__label{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase;color:var(--view-panel-color);font-weight:600;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;min-height:28px}.view-panel__header{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:justify;justify-content:space-between;margin-bottom:16px}"]],data:{}});function z_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"div",[["class","view-panel__header"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"div",[["class","view-panel__label"]],null,null,null,null,null)),(e()(),l.Rb(2,null,[" "," "])),l.Ib(null,0)],null,(function(e,t){e(t,2,0,t.component.label)}))}function L_(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,6,"div",[["class","view-panel"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"view-panel--padding-none":0,"view-panel--padding-dense":1}),(e()(),l.nb(16777216,null,null,1,null,z_)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Ib(null,1)],(function(e,t){var n=t.component,l=e(t,3,0,"none"===n.padding,"dense"===n.padding);e(t,2,0,"view-panel",l),e(t,5,0,n.showHeader)}),null)}class E_{constructor(e,t){this.domSanitizer=e,this.markdownService=t}set html(e){this.safeHTML=this.domSanitizer.bypassSecurityTrustHtml(e||"")}set markdownText(e){this.html=this.markdownService.compile(e,!0)}ngOnInit(){}}var A_,F_=n("ZcxY"),R_=l.vb({encapsulation:2,styles:[[""]],data:{}});function D_(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,0,"div",[["class","html"]],[[8,"innerHTML",1]],null,null,null,null))],null,(function(e,t){e(t,0,0,t.component.safeHTML)}))}!function(e){e.normalize=function(e){return`${e||""}`.replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(t)).replace(/(&.+;)/gi,(e,t)=>String.fromCharCode(e.charCodeAt(0)))}}(A_||(A_={}));class U_{transform(e,t){return A_.normalize(`${e||""}`)}}let N_=(()=>{class e{constructor(e,t){this.layoutService=e,this.changeDetectorRef=t,this._isPopulated=!1,this.isPopulatedChange=new l.n,this.viewLayout=ax,this.ngUnsubscribe=new K.a,this.chapterTitle="",this.chapterAudio=null}get isPopulated(){return this._isPopulated}set isPopulated(e){this._isPopulated=e,this.isPopulatedChange.emit(this.isPopulated)}ngOnInit(){this.initContentListener(),this.initLayoutListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}isEnabled(e){return this.layoutService.isLayoutEnabled(e)}initContentListener(){Object(Du.b)(this.chapter$,this.selectedChapterAudio$).pipe(Object(Q.a)(([e,t])=>null!=e),Object(Y.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.chapterTitle=A_.normalize(e.info.displayName),this.chapterAudio=t,this.isPopulated=!!this.chapterTitle||null!=this.chapterAudio})}initLayoutListener(){this.layout$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.changeDetectorRef.markForCheck()})}handleAudioPlayClick(){this.audio.playing?this.audio.pause():this.audio.play()}}return Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapter),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapter$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterAudio),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedChapterAudio$",void 0),Object(y.__decorate)([Object(O.e)($m.getLayout),Object(y.__metadata)("design:type",Z.a)],e.prototype,"layout$",void 0),e})();var H_=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.view-title{font-size:14px;letter-spacing:.35px;line-height:1.4em;word-wrap:break-word;overflow-wrap:break-word;font-weight:600;color:var(--view-title-color);text-align:left}.view-title--center{text-align:center}.view-title--large{font-size:18px;letter-spacing:.45px;line-height:1.4em}"]],data:{}});function B_(e){return l.Tb(2,[l.Lb(0,U_,[]),l.Pb(671088640,1,{audio:0}),(e()(),l.xb(2,0,null,null,6,"header",[["class","view-title"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(4,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(5,{"view-title--center":0,"view-title--large":1}),(e()(),l.xb(6,0,null,null,2,"h1",[["id","view-chapter-title"]],null,null,null,null,null)),(e()(),l.Rb(7,null,["",""])),l.Nb(8,1)],(function(e,t){var n=t.component,l=e(t,5,0,"center"===n.alignTitle,"large"===n.size);e(t,4,0,"view-title",l)}),(function(e,t){var n=t.component,i=l.Sb(t,7,0,e(t,8,0,l.Jb(t,0),n.chapterTitle));e(t,7,0,i)}))}let $_=(()=>{class e{constructor(e,t,n){this.viewService=e,this.layoutService=t,this.changeDetectorRef=n,this.viewLayout=ax,this.ngUnsubscribe=new K.a,this.storyTitle="",this.chapterTitle="",this.chapterDescription="",this.chapterAudio=null,this.layout="drawer",this._isPopulated=!1,this.isPopulatedChange=new l.n}get isPopulated(){return this._isPopulated}set isPopulated(e){this._isPopulated=e,this.isPopulatedChange.emit(this.isPopulated)}ngOnInit(){this.initContentListener(),this.initLayoutListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}isEnabled(e){return this.layoutService.isLayoutEnabled(e)}initContentListener(){Object(Du.b)(this.story$,this.chapter$,this.selectedChapterAudio$).pipe(Object(Q.a)(([e,t,n])=>null!=e&&null!=t),Object(Y.a)(this.ngUnsubscribe)).subscribe(([e,t,n])=>{this.storyTitle=r.application!==i.Viewer?A_.normalize(e.displayName):"",this.chapterTitle=A_.normalize(t.info.displayName),this.chapterDescription=Object(Mt.trim)(t.info.description),this.chapterAudio=n,this.isPopulated=""!==this.storyTitle||!!this.chapterTitle||!!this.chapterDescription||null!=this.chapterAudio})}initLayoutListener(){this.layout$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.changeDetectorRef.markForCheck()})}handlePreviousChapterClick(){this.viewService.previousChapter()}handleNextChapterClick(){this.viewService.nextChapter()}handleAudioPlayClick(){this.audio.playing?this.audio.pause():this.audio.play()}}return Object(y.__decorate)([Object(O.e)(Tc.getStory),Object(y.__metadata)("design:type",Z.a)],e.prototype,"story$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapter),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapter$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterIndex),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapterIndex$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getChapterCount),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapterCount$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterAudio),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedChapterAudio$",void 0),Object(y.__decorate)([Object(O.e)($m.getLayout),Object(y.__metadata)("design:type",Z.a)],e.prototype,"layout$",void 0),e})();var V_=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.view-description{color:var(--view-description-primary-color);display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:left;justify-content:left}.view-description--layout-column .view-description__chapter-title{font-size:18px;letter-spacing:.45px;line-height:1.4em}.view-description--layout-column .view-description__body{padding-top:12px}.view-description--layout-drawer .view-description__story-title{text-align:center}.view-description--layout-drawer .view-description__story-title--large{font-size:14px;letter-spacing:.35px;line-height:1.4em}.view-description--layout-drawer .view-description__body,.view-description--layout-drawer .view-description__header{padding-top:4px}.view-description__inner{-webkit-box-flex:1;flex:1 0 auto}.view-description__story-title{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase;word-wrap:break-word;overflow-wrap:break-word;-webkit-box-flex:1;flex-grow:1;font-weight:600;color:var(--view-description-secondary-color)}.view-description__story-title--large{font-size:18px;letter-spacing:.45px;line-height:1.4em;text-transform:initial}.view-description__body{font-size:14px;letter-spacing:.35px;line-height:1.4em;word-wrap:break-word;overflow-wrap:break-word;padding-top:8px;color:var(--view-description-secondary-color)}"]],data:{}});function W_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["class","view-description__story-title"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"view-description__story-title--large":0}),(e()(),l.Rb(4,null,[" "," "]))],(function(e,t){var n=e(t,3,0,!t.component.chapterTitle);e(t,2,0,"view-description__story-title",n)}),(function(e,t){e(t,4,0,t.component.storyTitle)}))}function G_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"div",[["class","view-description__body"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-view-html",[],null,null,null,D_,R_)),l.wb(2,114688,null,0,E_,[it.b,F_.c],{markdownText:[0,"markdownText"]},null)],(function(e,t){e(t,2,0,t.component.chapterDescription)}),null)}function q_(e){return l.Tb(2,[l.Pb(671088640,1,{audio:0}),(e()(),l.xb(1,0,null,null,12,"div",[["class","view-description"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(3,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(4,{"view-description--layout-column":0,"view-description--layout-drawer":1}),(e()(),l.xb(5,0,null,null,8,"div",[["class","view-description__inner"]],null,null,null,null,null)),(e()(),l.xb(6,0,null,null,7,"article",[],null,null,null,null,null)),(e()(),l.xb(7,0,null,null,4,"header",[["class","view-description__header"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,W_)),l.wb(9,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(10,0,null,null,1,"app-view-title",[],null,null,null,B_,H_)),l.wb(11,245760,null,0,N_,[ox,l.i],{size:[0,"size"],alignTitle:[1,"alignTitle"]},null),(e()(),l.nb(16777216,null,null,1,null,G_)),l.wb(13,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component,l=e(t,4,0,"column"===n.layout,"drawer"===n.layout);e(t,3,0,"view-description",l),e(t,9,0,n.storyTitle&&n.storyTitle!=n.chapterTitle),e(t,11,0,"column"===n.layout?"large":"medium","column"===n.layout?"left":"center"),e(t,13,0,n.chapterDescription)}),null)}class X_{constructor(){}ngOnInit(){}getComputedColor(e){return Ye.rgbToHex(e,!0)}}var K_=l.vb({encapsulation:2,styles:[[".view-legend{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.view-legend__item{padding:8px 0;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:start;align-items:flex-start}.view-legend__content{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.view-legend__color{content:' ';display:block;-webkit-box-flex:0;flex:0 0 16px;width:16px;height:16px;border-radius:50%}.view-legend__color::after{content:' '}"]],data:{}});function Z_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"div",[["class","mv-2"]],null,null,null,null,null)),(e()(),l.Rb(1,null,["",""]))],null,(function(e,t){e(t,1,0,t.parent.context.$implicit.description)}))}function Y_(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"li",[["class","view-legend__item"],["tabindex","0"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,0,"div",[["class","view-legend__color mh-2"]],[[4,"background-color",null]],null,null,null,null)),(e()(),l.xb(2,0,null,null,4,"div",[["class","view-legend__content text-14"]],null,null,null,null,null)),(e()(),l.xb(3,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),l.Rb(4,null,["",""])),(e()(),l.nb(16777216,null,null,1,null,Z_)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,6,0,t.context.$implicit.description)}),(function(e,t){e(t,1,0,t.component.getComputedColor(t.context.$implicit.colors)),e(t,4,0,t.context.$implicit.label)}))}function Q_(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,2,"ul",[["aria-label","Legend"],["class","view-legend"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Y_)),l.wb(2,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,2,0,t.component.legend)}),null)}let ey=(()=>{class e{constructor(e){this.viewService=e,this.labelPinType=xs}ngOnInit(){}handleLabelClick(e){this.viewService.selectLabel(e,!0)}}return Object(y.__decorate)([Object(O.e)(Br.getChapterLabels),Object(y.__metadata)("design:type",Z.a)],e.prototype,"labels$",void 0),Object(y.__decorate)([Object(O.e)(Br.getSelectedLabel),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedLabel$",void 0),e})();var ty=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.view-labels__item{border-left:4px solid transparent;border-left:var(--view-labels-border);border-radius:2px;display:-webkit-box;display:flex;padding:12px 8px;margin-bottom:4px;cursor:pointer;-webkit-transition:background-color 125ms,color 125ms,border 125ms;transition:background-color 125ms,color 125ms,border 125ms}.view-labels__item:focus{background:#e4ecf9;outline:0}.view-labels__item:hover{background:#f1f5fc;background:var(--view-labels-bg--hover)}.view-labels__item--selected{background:#f1f5fc;border-left:4px solid #2d72dc;background:var(--view-labels-bg--selected);border-left:var(--view-labels-border--selected)}.view-labels__pre{-webkit-box-flex:0;flex:0 0 32px;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}.view-labels__pin{width:16px;height:16px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.view-labels__title{font-size:14px;letter-spacing:.35px;line-height:1.4em}.view-labels__description{color:#374a68;color:var(--view-labels-description-color);padding-top:4px;font-size:14px;letter-spacing:.35px;line-height:1.4em}"]],data:{}});function ny(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"img",[["alt",""],["draggable","false"],["src","/assets/images/labels/circle-plus.svg"]],null,null,null,null,null))],null,null)}function ly(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"img",[["alt",""],["draggable","false"],["src","/assets/images/labels/circle.svg"]],null,null,null,null,null))],null,null)}function iy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"div",[["class","view-labels__description html"]],[[8,"innerHTML",1]],null,null,null,null)),l.Nb(1,1)],null,(function(e,t){var n=l.Sb(t,0,0,e(t,1,0,l.Jb(t.parent.parent,0),t.parent.context.$implicit.description));e(t,0,0,n)}))}function ay(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,15,"li",[["class","view-labels__item"],["role","button"],["tabindex","0"]],[[1,"aria-label",0]],[[null,"click"],[null,"keyup.enter"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.handleLabelClick(e.context.$implicit)&&l),"keyup.enter"===t&&(l=!1!==i.handleLabelClick(e.context.$implicit)&&l),l}),null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Lb(131072,se.b,[l.i]),l.Mb(4,{"view-labels__item--selected":0}),(e()(),l.xb(5,0,null,null,6,"div",[["class","view-labels__pre"]],null,null,null,null,null)),(e()(),l.xb(6,0,null,null,5,"div",[["class","view-labels__pin"]],null,null,null,null,null)),l.wb(7,16384,null,0,se.q,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l.nb(16777216,null,null,1,null,ny)),l.wb(9,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,ly)),l.wb(11,16384,null,0,se.s,[l.S,l.P,se.q],null,null),(e()(),l.xb(12,0,null,null,3,"div",[["class","view-labels__body"]],null,null,null,null,null)),(e()(),l.xb(13,0,null,null,0,"div",[["class","view-labels__title"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,iy)),l.wb(15,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n,i=t.component,a=e(t,4,0,(null==(n=l.Sb(t,2,1,l.Jb(t,3).transform(i.selectedLabel$)))?null:n.id)===t.context.$implicit.id);e(t,2,0,"view-labels__item",a),e(t,7,0,t.context.$implicit.pinType===i.labelPinType.PlusMinus),e(t,9,0,!0),e(t,15,0,t.context.$implicit.description)}),(function(e,t){e(t,0,0,t.context.$implicit.title),e(t,13,0,t.context.$implicit.title)}))}function oy(e){return l.Tb(2,[l.Lb(0,F_.b,[l.l,F_.c,l.B]),(e()(),l.xb(1,0,null,null,3,"ul",[["aria-label","Labels"],["class","view-labels"],["role","complementary"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,ay)),l.wb(3,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,3,0,l.Sb(t,3,0,l.Jb(t,4).transform(n.labels$)))}),null)}let sy=(()=>{class e{constructor(e,t,n,l){this.store=e,this.viewService=t,this.layoutService=n,this.changeDetectorRef=l,this.ngUnsubscribe=new K.a,this.layout="column",this.viewLayout=ax}ngOnInit(){this.store.select($m.getLayout).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}isVisible(e){return this.layoutService.isLayoutVisible(e)}isEnabled(e){return this.layoutService.isLayoutEnabled(e)}handlePrevClick(){this.selectLabel(-1)}handleNextClick(){this.selectLabel(1)}selectLabel(e){const t=this.store.selectSnapshot(Br.getChapterLabels),n=t.length,l=this.store.selectSnapshot(Br.getSelectedLabelId),i=t.findIndex(e=>e.id===l),a=t[((-1!==i?i+e:0)%n+n)%n];a&&this.viewService.selectLabel(a,!0)}}return Object(y.__decorate)([Object(O.e)(Nr.getStoryChapters),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapters$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapter),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapter$",void 0),Object(y.__decorate)([Object(O.e)(Br.getChapterLabels),Object(y.__metadata)("design:type",Z.a)],e.prototype,"labels$",void 0),e})();var ry=l.vb({encapsulation:0,styles:[[".view-content-mode[_ngcontent-%COMP%]{padding-bottom:24px}"]],data:{}});function cy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"app-view-panel",[],[[8,"hidden",0]],null,null,L_,J_)),l.wb(1,114688,null,0,I_,[],{showHeader:[0,"showHeader"]},null),(e()(),l.xb(2,0,null,1,1,"app-view-description",[],null,[[null,"isPopulatedChange"]],(function(e,t,n){var l=!0;return"isPopulatedChange"===t&&(l=!1!==(e.component.isPopulated=n)&&l),l}),q_,V_)),l.wb(3,245760,null,0,$_,[rx,ox,l.i],{layout:[0,"layout"],isPopulated:[1,"isPopulated"]},{isPopulatedChange:"isPopulatedChange"})],(function(e,t){var n=t.component;e(t,1,0,!1),e(t,3,0,n.layout,n.isPopulated)}),(function(e,t){e(t,0,0,!t.component.isPopulated)}))}function uy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"app-view-panel",[["label","Legend"]],null,null,null,L_,J_)),l.wb(1,114688,null,0,I_,[],{label:[0,"label"]},null),(e()(),l.xb(2,0,null,1,2,"app-view-legend",[],null,null,null,Q_,K_)),l.wb(3,114688,null,0,X_,[],{legend:[0,"legend"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,1,0,"Legend"),e(t,3,0,l.Sb(t,3,0,l.Jb(t,4).transform(n.chapter$)).legend)}),null)}function py(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"div",[["actions",""],["class","flex"]],null,null,null,null,null)),(e()(),l.xb(1,16777216,null,null,2,"button",[["app-pin-button",""],["buttonType","ghost"],["icon","chevron-left"],["matTooltip","Previous Label"],["size","small"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,2).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,2)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,2)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handlePrevClick()&&i),i}),_x,hx)),l.wb(2,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(3,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"],buttonType:[2,"buttonType"]},null),(e()(),l.xb(4,16777216,null,null,2,"button",[["app-pin-button",""],["buttonType","ghost"],["icon","chevron-right"],["matTooltip","Next Label"],["size","small"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,5).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,5)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,5)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleNextClick()&&i),i}),_x,hx)),l.wb(5,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(6,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"],buttonType:[2,"buttonType"]},null)],(function(e,t){e(t,2,0,"Previous Label"),e(t,3,0,"chevron-left","small","ghost"),e(t,5,0,"Next Label"),e(t,6,0,"chevron-right","small","ghost")}),null)}function dy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"app-view-panel",[["label","Labels"]],null,null,null,L_,J_)),l.wb(1,114688,null,0,I_,[],{label:[0,"label"]},null),(e()(),l.nb(16777216,null,0,2,null,py)),l.wb(3,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(5,0,null,1,1,"app-view-labels",[],null,null,null,oy,ty)),l.wb(6,114688,null,0,ey,[rx],null,null)],(function(e,t){var n,i=t.component;e(t,1,0,"Labels"),e(t,3,0,(null==(n=l.Sb(t,3,0,l.Jb(t,4).transform(i.labels$)))?null:n.length)>1),e(t,6,0)}),null)}function by(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"app-view-panel",[["label","Chapters"]],null,null,null,L_,J_)),l.wb(1,114688,null,0,I_,[],{label:[0,"label"]},null),(e()(),l.xb(2,0,null,1,1,"app-view-chapters",[],null,null,null,px,cx)),l.wb(3,4440064,null,0,$h,[O.i,rx,l.i],{autoscroll:[0,"autoscroll"]},null)],(function(e,t){e(t,1,0,"Chapters"),e(t,3,0,!1)}),null)}function gy(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,12,"div",[["class","view-content-mode"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,cy)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,3,null,uy)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,dy)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,by)),l.wb(11,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,2,0,n.isVisible(n.viewLayout.Description));var i,a,o=null;e(t,4,0,(null==(o=l.Sb(t,4,0,l.Jb(t,5).transform(n.chapter$)))?null:o.legend)&&(null==(o=l.Sb(t,4,0,l.Jb(t,6).transform(n.chapter$)))?null:o.legend.length)>0&&n.isVisible(n.viewLayout.Legend)),e(t,8,0,(null==(i=l.Sb(t,8,0,l.Jb(t,9).transform(n.labels$)))?null:i.length)&&n.isVisible(n.viewLayout.LabelList)),e(t,11,0,(null==(a=l.Sb(t,11,0,l.Jb(t,12).transform(n.chapters$)))?null:a.length)>1&&n.isVisible(n.viewLayout.ChapterList)&&"drawer"!=n.layout)}),null)}class hy{constructor(e){this.el=e}ngAfterContentInit(){setTimeout(()=>{this.el.nativeElement.focus()},0)}}class my{constructor(){}onClick(e,t){t.select()}}class xy{constructor(e,t){this.graphService=e,this.store=t,this.treeTheme=Tm,this.graphSubject=new Le.a(null),this.theme=Tm.Dark,this.nodes=[],this.ngUnsubscribe=new K.a}get graph(){return this._graph}set graph(e){e&&(this._graph=e,this.graphSubject.next(e))}ngOnInit(){this.graphSubject.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{e&&this.getNodes()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}getNodes(){const e=this.node?ks.getSuccessors(this.graph,this.node.id):ks.getRoots(this.graph);this.nodes=this.graphService.getNodes(this.graph,e)}countChildren(e){return ks.getSuccessors(this.graph,e.id).length}hasChildren(e){return this.countChildren(e)>0}trackTreeNode(e,t){return t.id}handleExpandClick(e,t){this.store.dispatch(t?new Ki(e):new Xi(e))}}class fy{constructor(e,t,n,l,a,o,s){this.store=e,this.graphService=t,this.changeDetectorRef=n,this.clipboardService=l,this.snackbar=a,this.cameraService=o,this.engineService=s,this.application=i,this.shortId="",this.theme="dark"}get node(){return this._node}set node(e){this._node=e;const t=this.node.id.split("-");this.shortId=2===t.length?t[1]:t[0]}ngOnInit(){}isNodeChecked(e){return this.store.selectSnapshot(Xs.getNodes)[e].checked}isNodeShown(e){return this.store.selectSnapshot(Xs.getNodes)[e].shown}checkNode(e,t){const n=void 0===t?!this.isNodeChecked(e.id):t;this.store.dispatch(new Bs.UpdateNodesChecked(n,[e.id]))}checkInverse(e){this.store.dispatch(new Bs.UpdateNodesChecked(!0)),this.store.dispatch(new Bs.UpdateNodesChecked(!1,[e.id]))}setCheckedNodes(e,t){this.store.dispatch(new Bs.UpdateNodesChecked(!1));const n=void 0===t?!this.isNodeChecked(e.id):t;this.store.dispatch(new Bs.UpdateNodesChecked(n,[e.id]))}flyToNode(e){this.store.dispatch(new ji(e.id))}hideNode(e){this.store.dispatch(new Bs.UpdateNodesShown(!1,[e.id]))}hideInverse(e){const t=this.store.selectSnapshot(wm.getViewGraph),n=this.graphService.getInverseSelection(t,[e.id]),l=new Bs.UpdateNodesShown(!1,n),i=Gs(this.store.selectSnapshot(Xs),l);this.store.dispatch(new Bs.ApplyPatch(i.patches));const a=this.engineService.getObjectBoundary(e.id),o=this.cameraService.cameraAfterFlyTo(a),s=new dm(o),r=function(e,t){const[n,l,i]=immer.produceWithPatches(e,e=>{e.cameraFlyTo=t.camera});return{nextState:n,patches:l,inversePatches:i}}(this.store.selectSnapshot(xm),s);this.store.dispatch(new bm(r.patches)),this.store.dispatch(new $s.SavePatches([{forward:i.patches,inverse:i.inversePatches,patchAction:Bs.ApplyPatch},{forward:r.patches,inverse:r.inversePatches,patchAction:bm}]))}showNode(e){this.store.dispatch(new Bs.UpdateNodesShown(!0,[e.id])),this.changeDetectorRef.markForCheck()}toggleVisible(e,t){const n=void 0===t?this.isNodeShown(e.id):t;this.store.dispatch(new Bs.UpdateNodesShown(n,[e.id])),this.changeDetectorRef.markForCheck()}togglePickable(e,t){this.store.dispatch(new Bs.UpdateNodesPickable(t,[e.id])),this.changeDetectorRef.markForCheck()}makeEverythingElseUnpickale(e){this.store.dispatch(new Bs.UpdateNodesPickable(!1)),this.store.dispatch(new Bs.UpdateNodesPickable(!0,[e.id]))}fadeInverseNodes(e){const t=this.store.selectSnapshot(wm.getViewGraph),n=this.graphService.getInverseSelection(t,[e.id]),l=this.graphService.getNodes(t,n);this.store.dispatch(new Bs.UpdateNodesPaint(jc.recipe,l.map(e=>e.id)))}fadeNode(e){this.store.dispatch(new Bs.UpdateNodesPaint(jc.recipe,[e.id]))}editNodeLabel(e){this.store.dispatch(new Yi(e))}copy(e){this.clipboardService.copyToClipboard(e).subscribe(()=>{this.snackbar.open(`Copied ${e} to clipboard.`)})}}var _y=l.vb({encapsulation:0,styles:[[""]],data:{}});function yy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.xb(1,16777216,null,null,3,"button",[["aria-haspopup","true"],["class","mat-menu-item mat-menu-trigger"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"],[null,"mouseenter"],[null,"mousedown"],[null,"keydown"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,2)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,2)._handleMouseEnter()&&i),"mousedown"===t&&(i=!1!==l.Jb(e,3)._handleMousedown(n)&&i),"keydown"===t&&(i=!1!==l.Jb(e,3)._handleKeydown(n)&&i),"click"===t&&(i=!1!==l.Jb(e,3)._handleClick(n)&&i),i}),Ie.c,Ie.a)),l.wb(2,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),l.wb(3,1196032,null,0,Je.g,[Qe.a,l.l,l.S,Je.c,[2,Je.d],[6,Je.e],[2,et.b],_e.e],{menu:[0,"menu"]},null),(e()(),l.Rb(-1,0,["Select"])),(e()(),l.xb(5,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(6,49152,null,0,xb.a,[],null,null)],(function(e,t){e(t,3,0,l.Jb(t.parent,39))}),(function(e,t){e(t,1,0,l.Jb(t,2).role,l.Jb(t,2)._highlighted,l.Jb(t,2)._triggersSubmenu,l.Jb(t,2)._getTabIndex(),l.Jb(t,2).disabled.toString(),l.Jb(t,2).disabled||null,l.Jb(t,3).menuOpen||null),e(t,5,0,l.Jb(t,6).vertical?"vertical":"horizontal",l.Jb(t,6).vertical,!l.Jb(t,6).vertical,l.Jb(t,6).inset)}))}function Oy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsShow"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.toggleVisible(a.node,!0)&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Show"]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function wy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsHide"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.toggleVisible(a.node,!1)&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Hide"]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function vy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(2,49152,null,0,xb.a,[],null,null),(e()(),l.xb(3,16777216,null,null,3,"button",[["aria-haspopup","true"],["class","mat-menu-item mat-menu-trigger"],["data-test","nodeActionsPickableTrigger"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"],[null,"mouseenter"],[null,"mousedown"],[null,"keydown"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,4)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,4)._handleMouseEnter()&&i),"mousedown"===t&&(i=!1!==l.Jb(e,5)._handleMousedown(n)&&i),"keydown"===t&&(i=!1!==l.Jb(e,5)._handleKeydown(n)&&i),"click"===t&&(i=!1!==l.Jb(e,5)._handleClick(n)&&i),i}),Ie.c,Ie.a)),l.wb(4,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),l.wb(5,1196032,null,0,Je.g,[Qe.a,l.l,l.S,Je.c,[2,Je.d],[6,Je.e],[2,et.b],_e.e],{menu:[0,"menu"]},null),(e()(),l.Rb(-1,0,["Pickable / Unpickable"])),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,5,0,l.Jb(t.parent,83))}),(function(e,t){e(t,1,0,l.Jb(t,2).vertical?"vertical":"horizontal",l.Jb(t,2).vertical,!l.Jb(t,2).vertical,l.Jb(t,2).inset),e(t,3,0,l.Jb(t,4).role,l.Jb(t,4)._highlighted,l.Jb(t,4)._triggersSubmenu,l.Jb(t,4)._getTabIndex(),l.Jb(t,4).disabled.toString(),l.Jb(t,4).disabled||null,l.Jb(t,5).menuOpen||null)}))}function Cy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(2,49152,null,0,xb.a,[],null,null),(e()(),l.xb(3,0,null,null,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsEditName"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,4)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,4)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.editNodeLabel(a.node)&&i),i}),Ie.c,Ie.a)),l.wb(4,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Edit Object Name"]))],null,(function(e,t){e(t,1,0,l.Jb(t,2).vertical?"vertical":"horizontal",l.Jb(t,2).vertical,!l.Jb(t,2).vertical,l.Jb(t,2).inset),e(t,3,0,l.Jb(t,4).role,l.Jb(t,4)._highlighted,l.Jb(t,4)._triggersSubmenu,l.Jb(t,4)._getTabIndex(),l.Jb(t,4).disabled.toString(),l.Jb(t,4).disabled||null)}))}function jy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(2,49152,null,0,xb.a,[],null,null),(e()(),l.xb(3,16777216,null,null,3,"button",[["aria-haspopup","true"],["class","mat-menu-item mat-menu-trigger"],["data-test","nodeActionsCopyTrigger"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"],[null,"mouseenter"],[null,"mousedown"],[null,"keydown"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,4)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,4)._handleMouseEnter()&&i),"mousedown"===t&&(i=!1!==l.Jb(e,5)._handleMousedown(n)&&i),"keydown"===t&&(i=!1!==l.Jb(e,5)._handleKeydown(n)&&i),"click"===t&&(i=!1!==l.Jb(e,5)._handleClick(n)&&i),i}),Ie.c,Ie.a)),l.wb(4,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),l.wb(5,1196032,null,0,Je.g,[Qe.a,l.l,l.S,Je.c,[2,Je.d],[6,Je.e],[2,et.b],_e.e],{menu:[0,"menu"]},null),(e()(),l.Rb(-1,0,["Copy"])),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,5,0,l.Jb(t.parent,97))}),(function(e,t){e(t,1,0,l.Jb(t,2).vertical?"vertical":"horizontal",l.Jb(t,2).vertical,!l.Jb(t,2).vertical,l.Jb(t,2).inset),e(t,3,0,l.Jb(t,4).role,l.Jb(t,4)._highlighted,l.Jb(t,4)._triggersSubmenu,l.Jb(t,4)._getTabIndex(),l.Jb(t,4).disabled.toString(),l.Jb(t,4).disabled||null,l.Jb(t,5).menuOpen||null)}))}function ky(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsShowThis"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.toggleVisible(a.node,!0)&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[10,4],[11,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Show This"]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function Sy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsShowEverythingElse"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.toggleVisible(a.node,!1)&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[10,4],[11,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Hide This"]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function Py(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsPickable"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.togglePickable(a.node,!1)&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[13,4],[14,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Make Unpickable"]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function My(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsUnpickable"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.togglePickable(a.node,!0)&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[13,4],[14,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Make Pickable"]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function Ty(e){return l.Tb(2,[(e()(),l.xb(0,16777216,null,null,4,"button",[["app-button",""],["aria-haspopup","true"],["buttonSize","xsmall"],["class","mat-menu-trigger"],["data-test","nodeActionsTrigger"]],[[1,"aria-expanded",0],[8,"disabled",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var i=!0;return"mousedown"===t&&(i=!1!==l.Jb(e,1)._handleMousedown(n)&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"click"===t&&(i=!1!==l.Jb(e,1)._handleClick(n)&&i),i}),Ze,Ke)),l.wb(1,1196032,null,0,Je.g,[Qe.a,l.l,l.S,Je.c,[2,Je.d],[8,null],[2,et.b],_e.e],{menu:[0,"menu"]},null),l.wb(2,114688,null,0,Xe,[],{buttonSize:[0,"buttonSize"],buttonTheme:[1,"buttonTheme"]},null),(e()(),l.xb(3,0,null,0,1,"app-icon",[["icon","ellipsis-v"]],null,null,null,he,ge)),l.wb(4,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(5,0,null,null,32,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.Ob(6144,null,Je.d,null,[Je.h]),l.Ob(6144,null,Je.b,null,[Je.d]),l.wb(8,1294336,[["nodeActions",4]],3,Je.h,[l.l,l.B,Je.a],{overlapTrigger:[0,"overlapTrigger"]},null),l.Pb(603979776,1,{_allItems:1}),l.Pb(603979776,2,{items:1}),l.Pb(603979776,3,{lazyContent:0}),(e()(),l.nb(16777216,null,0,1,null,yy)),l.wb(13,81920,null,0,Bx,[l.P,l.S,d.m],{appFlagApplication:[0,"appFlagApplication"],appFlagApplicationMode:[1,"appFlagApplicationMode"],appFlagApplicationPage:[2,"appFlagApplicationPage"]},null),(e()(),l.nb(16777216,null,0,1,null,Oy)),l.wb(15,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,0,1,null,wy)),l.wb(17,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(18,0,null,0,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsIsolate"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,19)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,19)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.hideInverse(a.node)&&i),i}),Ie.c,Ie.a)),l.wb(19,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Isolate"])),(e()(),l.xb(21,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(22,49152,null,0,xb.a,[],null,null),(e()(),l.xb(23,16777216,null,0,3,"button",[["aria-haspopup","true"],["class","mat-menu-item mat-menu-trigger"],["data-test","nodeActionsFadeTrigger"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"],[null,"mouseenter"],[null,"mousedown"],[null,"keydown"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,24)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,24)._handleMouseEnter()&&i),"mousedown"===t&&(i=!1!==l.Jb(e,25)._handleMousedown(n)&&i),"keydown"===t&&(i=!1!==l.Jb(e,25)._handleKeydown(n)&&i),"click"===t&&(i=!1!==l.Jb(e,25)._handleClick(n)&&i),i}),Ie.c,Ie.a)),l.wb(24,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),l.wb(25,1196032,null,0,Je.g,[Qe.a,l.l,l.S,Je.c,[2,Je.d],[6,Je.e],[2,et.b],_e.e],{menu:[0,"menu"]},null),(e()(),l.Rb(-1,0,["Fade"])),(e()(),l.nb(16777216,null,0,1,null,vy)),l.wb(28,81920,null,0,Bx,[l.P,l.S,d.m],{appFlagApplication:[0,"appFlagApplication"]},null),(e()(),l.xb(29,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(30,49152,null,0,xb.a,[],null,null),(e()(),l.xb(31,0,null,0,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsFlyTo"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,32)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,32)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.flyToNode(a.node)&&i),i}),Ie.c,Ie.a)),l.wb(32,180224,[[1,4],[2,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Fly To"])),(e()(),l.nb(16777216,null,0,1,null,Cy)),l.wb(35,81920,null,0,Bx,[l.P,l.S,d.m],{appFlagApplication:[0,"appFlagApplication"],appFlagApplicationMode:[1,"appFlagApplicationMode"],appFlagApplicationPage:[2,"appFlagApplicationPage"]},null),(e()(),l.nb(16777216,null,0,1,null,jy)),l.wb(37,81920,null,0,Bx,[l.P,l.S,d.m],{appFlagApplication:[0,"appFlagApplication"],appFlagApplicationMode:[1,"appFlagApplicationMode"],appFlagApplicationPage:[2,"appFlagApplicationPage"]},null),(e()(),l.xb(38,0,null,null,12,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.wb(39,1294336,[["selectActions",4]],3,Je.h,[l.l,l.B,Je.a],null,null),l.Pb(603979776,4,{_allItems:1}),l.Pb(603979776,5,{items:1}),l.Pb(603979776,6,{lazyContent:0}),l.Ob(2048,null,Je.d,null,[Je.h]),l.Ob(2048,null,Je.b,null,[Je.d]),(e()(),l.xb(45,0,null,0,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsSelectThis"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,46)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,46)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.checkNode(a.node,!0)&&i),i}),Ie.c,Ie.a)),l.wb(46,180224,[[4,4],[5,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Select This"])),(e()(),l.xb(48,0,null,0,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsSelectEverythingElse"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,49)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,49)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.checkInverse(a.node)&&i),i}),Ie.c,Ie.a)),l.wb(49,180224,[[4,4],[5,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Select Everything Else"])),(e()(),l.xb(51,0,null,null,12,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.wb(52,1294336,[["fadeActions",4]],3,Je.h,[l.l,l.B,Je.a],null,null),l.Pb(603979776,7,{_allItems:1}),l.Pb(603979776,8,{items:1}),l.Pb(603979776,9,{lazyContent:0}),l.Ob(2048,null,Je.d,null,[Je.h]),l.Ob(2048,null,Je.b,null,[Je.d]),(e()(),l.xb(58,0,null,0,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsFadeThis"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,59)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,59)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.fadeNode(a.node)&&i),i}),Ie.c,Ie.a)),l.wb(59,180224,[[7,4],[8,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Fade This"])),(e()(),l.xb(61,0,null,0,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsFadeEverythingElse"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,62)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,62)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.fadeInverseNodes(a.node)&&i),i}),Ie.c,Ie.a)),l.wb(62,180224,[[7,4],[8,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Fade Everything Else"])),(e()(),l.xb(64,0,null,null,15,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.Ob(6144,null,Je.d,null,[Je.h]),l.Ob(6144,null,Je.b,null,[Je.d]),l.wb(67,1294336,[["showHideActions",4]],3,Je.h,[l.l,l.B,Je.a],null,null),l.Pb(603979776,10,{_allItems:1}),l.Pb(603979776,11,{items:1}),l.Pb(603979776,12,{lazyContent:0}),(e()(),l.nb(16777216,null,0,1,null,ky)),l.wb(72,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,0,1,null,Sy)),l.wb(74,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(75,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(76,49152,null,0,xb.a,[],null,null),(e()(),l.xb(77,0,null,0,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,78)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,78)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.hideInverse(a.node)&&i),i}),Ie.c,Ie.a)),l.wb(78,180224,[[10,4],[11,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Hide Everything Else"])),(e()(),l.xb(80,0,null,null,15,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.Ob(6144,null,Je.d,null,[Je.h]),l.Ob(6144,null,Je.b,null,[Je.d]),l.wb(83,1294336,[["pickableActions",4]],3,Je.h,[l.l,l.B,Je.a],null,null),l.Pb(603979776,13,{_allItems:1}),l.Pb(603979776,14,{items:1}),l.Pb(603979776,15,{lazyContent:0}),(e()(),l.nb(16777216,null,0,1,null,Py)),l.wb(88,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,0,1,null,My)),l.wb(90,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(91,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(92,49152,null,0,xb.a,[],null,null),(e()(),l.xb(93,0,null,0,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsEverythingElseUnpickable"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,94)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,94)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.makeEverythingElseUnpickale(a.node)&&i),i}),Ie.c,Ie.a)),l.wb(94,180224,[[13,4],[14,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Make Everything Else Unpickable"])),(e()(),l.xb(96,0,null,null,17,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.wb(97,1294336,[["copyActions",4]],3,Je.h,[l.l,l.B,Je.a],null,null),l.Pb(603979776,16,{_allItems:1}),l.Pb(603979776,17,{items:1}),l.Pb(603979776,18,{lazyContent:0}),l.Ob(2048,null,Je.d,null,[Je.h]),l.Ob(2048,null,Je.b,null,[Je.d]),(e()(),l.xb(103,0,null,0,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsCopyShortID"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,104)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,104)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.copy(a.shortId)&&i),i}),Ie.c,Ie.a)),l.wb(104,180224,[[16,4],[17,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Copy Short ID"])),(e()(),l.xb(106,0,null,0,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsCopyFullID"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,107)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,107)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.copy(a.node.id)&&i),i}),Ie.c,Ie.a)),l.wb(107,180224,[[16,4],[17,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Copy Full ID"])),(e()(),l.xb(109,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(110,49152,null,0,xb.a,[],null,null),(e()(),l.xb(111,0,null,0,2,"button",[["class","mat-menu-item"],["data-test","nodeActionsCopyDisplayName"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,112)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,112)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.copy(a.node.label)&&i),i}),Ie.c,Ie.a)),l.wb(112,180224,[[16,4],[17,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Copy Display Name"]))],(function(e,t){var n=t.component;e(t,1,0,l.Jb(t,8)),e(t,2,0,"xsmall",n.theme),e(t,4,0,"ellipsis-v"),e(t,8,0,!0),e(t,13,0,n.application.All,"include","/edit"),e(t,15,0,!n.node.boolState.shown),e(t,17,0,n.node.boolState.shown),e(t,25,0,l.Jb(t,52)),e(t,28,0,n.application.Loft),e(t,35,0,n.application.Loft,"include","/edit"),e(t,37,0,n.application.Loft,"include","/edit"),e(t,39,0),e(t,52,0),e(t,67,0),e(t,72,0,!n.node.boolState.shown),e(t,74,0,n.node.boolState.shown),e(t,83,0),e(t,88,0,n.node.boolState.pickable),e(t,90,0,!n.node.boolState.pickable),e(t,97,0)}),(function(e,t){e(t,0,0,l.Jb(t,1).menuOpen||null,l.Jb(t,2).disabled),e(t,18,0,l.Jb(t,19).role,l.Jb(t,19)._highlighted,l.Jb(t,19)._triggersSubmenu,l.Jb(t,19)._getTabIndex(),l.Jb(t,19).disabled.toString(),l.Jb(t,19).disabled||null),e(t,21,0,l.Jb(t,22).vertical?"vertical":"horizontal",l.Jb(t,22).vertical,!l.Jb(t,22).vertical,l.Jb(t,22).inset),e(t,23,0,l.Jb(t,24).role,l.Jb(t,24)._highlighted,l.Jb(t,24)._triggersSubmenu,l.Jb(t,24)._getTabIndex(),l.Jb(t,24).disabled.toString(),l.Jb(t,24).disabled||null,l.Jb(t,25).menuOpen||null),e(t,29,0,l.Jb(t,30).vertical?"vertical":"horizontal",l.Jb(t,30).vertical,!l.Jb(t,30).vertical,l.Jb(t,30).inset),e(t,31,0,l.Jb(t,32).role,l.Jb(t,32)._highlighted,l.Jb(t,32)._triggersSubmenu,l.Jb(t,32)._getTabIndex(),l.Jb(t,32).disabled.toString(),l.Jb(t,32).disabled||null),e(t,45,0,l.Jb(t,46).role,l.Jb(t,46)._highlighted,l.Jb(t,46)._triggersSubmenu,l.Jb(t,46)._getTabIndex(),l.Jb(t,46).disabled.toString(),l.Jb(t,46).disabled||null),e(t,48,0,l.Jb(t,49).role,l.Jb(t,49)._highlighted,l.Jb(t,49)._triggersSubmenu,l.Jb(t,49)._getTabIndex(),l.Jb(t,49).disabled.toString(),l.Jb(t,49).disabled||null),e(t,58,0,l.Jb(t,59).role,l.Jb(t,59)._highlighted,l.Jb(t,59)._triggersSubmenu,l.Jb(t,59)._getTabIndex(),l.Jb(t,59).disabled.toString(),l.Jb(t,59).disabled||null),e(t,61,0,l.Jb(t,62).role,l.Jb(t,62)._highlighted,l.Jb(t,62)._triggersSubmenu,l.Jb(t,62)._getTabIndex(),l.Jb(t,62).disabled.toString(),l.Jb(t,62).disabled||null),e(t,75,0,l.Jb(t,76).vertical?"vertical":"horizontal",l.Jb(t,76).vertical,!l.Jb(t,76).vertical,l.Jb(t,76).inset),e(t,77,0,l.Jb(t,78).role,l.Jb(t,78)._highlighted,l.Jb(t,78)._triggersSubmenu,l.Jb(t,78)._getTabIndex(),l.Jb(t,78).disabled.toString(),l.Jb(t,78).disabled||null),e(t,91,0,l.Jb(t,92).vertical?"vertical":"horizontal",l.Jb(t,92).vertical,!l.Jb(t,92).vertical,l.Jb(t,92).inset),e(t,93,0,l.Jb(t,94).role,l.Jb(t,94)._highlighted,l.Jb(t,94)._triggersSubmenu,l.Jb(t,94)._getTabIndex(),l.Jb(t,94).disabled.toString(),l.Jb(t,94).disabled||null),e(t,103,0,l.Jb(t,104).role,l.Jb(t,104)._highlighted,l.Jb(t,104)._triggersSubmenu,l.Jb(t,104)._getTabIndex(),l.Jb(t,104).disabled.toString(),l.Jb(t,104).disabled||null),e(t,106,0,l.Jb(t,107).role,l.Jb(t,107)._highlighted,l.Jb(t,107)._triggersSubmenu,l.Jb(t,107)._getTabIndex(),l.Jb(t,107).disabled.toString(),l.Jb(t,107).disabled||null),e(t,109,0,l.Jb(t,110).vertical?"vertical":"horizontal",l.Jb(t,110).vertical,!l.Jb(t,110).vertical,l.Jb(t,110).inset),e(t,111,0,l.Jb(t,112).role,l.Jb(t,112)._highlighted,l.Jb(t,112)._triggersSubmenu,l.Jb(t,112)._getTabIndex(),l.Jb(t,112).disabled.toString(),l.Jb(t,112).disabled||null)}))}class Iy{}var Jy=function(e){return e.Chapter="chapter",e.Label="label",e.Paint="paint",e.Position="position",e}({});class zy{}let Ly=(()=>{class e{constructor(e){this.colorRecipe=e}}return e.type="[Edit Paint] Set Color Recipe",e})(),Ey=(()=>{class e{constructor(e){this.brushMode=e}}return e.type="[Edit Paint] Set Paint Brush Mode",e})(),Ay=(()=>{class e{constructor(){}}return e.type="[Edit Paint] Clear Color Recipe",e})(),Fy=(()=>{class e{constructor(){}}return e.type="[Edit Paint] Reset Paint",e})();const Ry={colorRecipe:_c.recipe,brushMode:function(e){return e[e.Modify=0]="Modify",e[e.Replace=1]="Replace",e}({}).Modify};let Dy=(()=>{let e=class{constructor(){}static getColorRecipe(e){return e.colorRecipe}static getPaintBrushMode(e){return e.brushMode}setColorRecipe(e,{colorRecipe:t}){e.patchState({colorRecipe:t})}setBrushMode(e,t){e.patchState({brushMode:t.brushMode})}clearColorRecipe(e,t){e.patchState({colorRecipe:null})}resetPaint(e,t){e.setState(Ry)}};return Object(y.__decorate)([Object(O.a)(Ly),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ly]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setColorRecipe",null),Object(y.__decorate)([Object(O.a)(Ey),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ey]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setBrushMode",null),Object(y.__decorate)([Object(O.a)(Ay),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Ay]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"clearColorRecipe",null),Object(y.__decorate)([Object(O.a)(Fy),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Fy]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetPaint",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[zy]),Object(y.__metadata)("design:returntype",void 0)],e,"getColorRecipe",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[zy]),Object(y.__metadata)("design:returntype",void 0)],e,"getPaintBrushMode",null),Object(y.__decorate)([Object(O.g)({name:"editPaint",defaults:Ry})],e)})();class Uy{constructor(e,t,n){this.label=e,this.width=t,this.height=n}}const Ny=new Uy("Don't Resize",-1,-1),Hy=(new Uy("Common (Mobile)",360,640),new Uy("Common (Minimum)",300,300),new Uy("Common (Publish Default)",700,550),new Uy("iPhone X",375,812),new Uy("iPad (Portrait)",768,1024),new Uy("iPad (Landscape)",1024,768),{view:Jy.Chapter,showColumns:!0,showLeftColumn:!0,showRightColumn:!0,showHeader:!0,showFooter:!0,autoCapture:r.application!==i.Loft,record:!0,layerOrderMode:!1,showTreeNodeIds:!1,canvasSize:Ny,canvasSettings:{emulateDrawer:!0,emulateColumn:!0}});let By=(()=>{let e=class{constructor(e){this.storageService=e}static getView(e){return e.view}static getShowColumns(e){return e.showColumns}static getShowLeftColumn(e){return e.showLeftColumn}static getShowRightColumn(e){return e.showRightColumn}static getShowHeader(e){return e.showHeader}static getShowFooter(e){return e.showFooter}static getRecord(e){return e.record}static getLayerOrderMode(e){return e.layerOrderMode}static getShowTreeNodeIds(e){return e.showTreeNodeIds}static getCanvasSize(e){return e.canvasSize}static getCanvasSettings(e){return e.canvasSettings}static getAutoCapture(e){return e.autoCapture}SetLayerOrderMode(e,t){e.patchState({layerOrderMode:t.layerOrderMode})}ShowTreeNodeIds(e,t){const n=null!=t.show?t.show:!e.getState().showTreeNodeIds;e.patchState({showTreeNodeIds:n})}setView(e,t){e.patchState({view:t.view})}nextView(e,t){const{view:n}=e.getState(),l=Object.values(Jy),i=l[l.indexOf(n)+1]||l[0];e.patchState({view:i})}previousView(e,t){const{view:n}=e.getState(),l=Object.values(Jy),i=l[l.indexOf(n)-1]||l[l.length-1];e.patchState({view:i})}showColumns(e,t){e.patchState({showColumns:t.show})}showColumn(e,t){switch(t.column){case"left":e.patchState({showLeftColumn:t.show});break;case"right":e.patchState({showRightColumn:t.show});break;case"header":e.patchState({showHeader:t.show});break;case"footer":e.patchState({showFooter:t.show})}}resetEditPage(e,t){e.setState(Hy),e.dispatch(new Fy)}setCanvasSize(e,t){e.patchState({canvasSize:t.size})}autoCapture(e,t){e.patchState({autoCapture:t.enable}),r.application===i.Studio&&this.storageService.setLocalItem(Yn.AutoCapture,t.enable)}ngxsOnInit(e){setTimeout(()=>{this.initAutoCapture(e)})}initAutoCapture(e){if(r.application===i.Studio){const t=this.storageService.getLocalJSON(Yn.AutoCapture);"boolean"==typeof t&&e.patchState({autoCapture:t})}}};return Object(y.__decorate)([Object(O.a)(oi),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,oi]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"SetLayerOrderMode",null),Object(y.__decorate)([Object(O.a)(si),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,si]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"ShowTreeNodeIds",null),Object(y.__decorate)([Object(O.a)(ei),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ei]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setView",null),Object(y.__decorate)([Object(O.a)(ti),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ti]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"nextView",null),Object(y.__decorate)([Object(O.a)(ni),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ti]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"previousView",null),Object(y.__decorate)([Object(O.a)(li),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,li]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"showColumns",null),Object(y.__decorate)([Object(O.a)(ii),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ii]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"showColumn",null),Object(y.__decorate)([Object(O.a)(ai),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ai]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetEditPage",null),Object(y.__decorate)([Object(O.a)(ri),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ri]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setCanvasSize",null),Object(y.__decorate)([Object(O.a)(ci),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ci]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"autoCapture",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Iy]),Object(y.__metadata)("design:returntype",void 0)],e,"getView",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Iy]),Object(y.__metadata)("design:returntype",void 0)],e,"getShowColumns",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Iy]),Object(y.__metadata)("design:returntype",void 0)],e,"getShowLeftColumn",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Iy]),Object(y.__metadata)("design:returntype",void 0)],e,"getShowRightColumn",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Iy]),Object(y.__metadata)("design:returntype",void 0)],e,"getShowHeader",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Iy]),Object(y.__metadata)("design:returntype",void 0)],e,"getShowFooter",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Iy]),Object(y.__metadata)("design:returntype",void 0)],e,"getRecord",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Iy]),Object(y.__metadata)("design:returntype",void 0)],e,"getLayerOrderMode",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Iy]),Object(y.__metadata)("design:returntype",void 0)],e,"getShowTreeNodeIds",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Iy]),Object(y.__metadata)("design:returntype",void 0)],e,"getCanvasSize",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Iy]),Object(y.__metadata)("design:returntype",void 0)],e,"getCanvasSettings",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Iy]),Object(y.__metadata)("design:returntype",void 0)],e,"getAutoCapture",null),Object(y.__decorate)([Object(O.g)({name:"edit",defaults:Hy,children:[Dy]})],e)})(),$y=(()=>{class e{constructor(e,t,n,l){this.store=e,this.graphService=t,this.router=n,this.changeDetection=l,this.treeTheme=Tm,this.isLoft="module"===r.exportType,this.nested=!0,this.theme=Tm.Dark,this.checked=!1,this.hasChildren=!1,this.editLabelMode=!1,this.sanitizedID="",this.parentId="",this.shortId="",this.ngUnsubscribe=new K.a}get node(){return this._node}set node(e){this._node=e,this.sanitizedID=this.graphService.sanitizeNodeID(this.node.id),this.checked=this.isNodeChecked(this.node.id);const t=this.node.id.split("-");2===t.length?(this.parentId=t[0],this.shortId=t[1]):(this.shortId=t[0],this.parentId=""),this.shortId=this.shortId.replace(/_/g," "),this.hasChildren=ks.getSuccessors(this.graph,this.node.id).length>0,this.changeDetection.markForCheck()}isNodeChecked(e){return this.store.selectSnapshot(Xs.getNodes)[e].checked}isNodeShown(e){return this.store.selectSnapshot(Xs.getNodes)[e].shown}ngOnInit(){this.checkedNodesIds$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.checked=e.some(e=>e===this.node.id),this.changeDetection.markForCheck()}),this.labelEditNode$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.editLabelMode=e===this.node}),this.isEditMode=this.router.url.indexOf("/edit")>=0}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleExpandClick(e,t){this.store.dispatch(t?new Ki(e):new Xi(e))}handleNodeClick(e,t){e.shiftKey?this.checkNode(t):(this.setCheckedNodes(t),this.isEditMode||this.store.dispatch(new ji(t.id)),this.handleExpandClick(t,!t.boolState.expanded))}toggleVisible(e,t){const n=void 0===t?!this.isNodeShown(e.id):t;this.store.dispatch(new Bs.UpdateNodesShown(n,[e.id])),this.changeDetection.markForCheck()}handleLayerOrder(e,t){const n=parseInt(e.target.value,10);this.setLayerOrder(t,n)}checkNode(e,t){const n=void 0===t?!this.isNodeChecked(e.id):t;this.store.dispatch(new Bs.UpdateNodesChecked(n,[e.id]))}setCheckedNodes(e,t){this.store.dispatch(new Bs.UpdateNodesChecked(!1));const n=void 0===t?!this.isNodeChecked(e.id):t;this.store.dispatch(new Bs.UpdateNodesChecked(n,[e.id]))}setLayerOrder(e,t){this.store.dispatch(new Ui([e],t)),this.changeDetection.markForCheck()}handleLabel(e){const t=e.target;e instanceof KeyboardEvent?("enter"===e.key.toLowerCase()&&(this.setLabel(t.value),this.setEditLabelMode(!1)),"escape"===e.key.toLowerCase()&&this.setEditLabelMode(!1)):e instanceof FocusEvent&&"blur"===e.type&&(this.setLabel(t.value),this.setEditLabelMode(!1))}setLabel(e){this.node.label=e,this.store.dispatch(new Ni(this.node.id,e))}setEditLabelMode(e){r.application===i.Loft&&this.isEditMode&&this.store.dispatch(new Yi(e?this.node:null))}}return Object(y.__decorate)([Object(O.e)(Xs.getCheckedNodeIds),Object(y.__metadata)("design:type",Z.a)],e.prototype,"checkedNodesIds$",void 0),Object(y.__decorate)([Object(O.e)(By.getLayerOrderMode),Object(y.__metadata)("design:type",Z.a)],e.prototype,"layerOrderMode$",void 0),Object(y.__decorate)([Object(O.e)(wm.getLabelEditNode),Object(y.__metadata)("design:type",Z.a)],e.prototype,"labelEditNode$",void 0),Object(y.__decorate)([Object(O.e)(By.getShowTreeNodeIds),Object(y.__metadata)("design:type",Z.a)],e.prototype,"showTreeNodeIds$",void 0),e})();var Vy=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}:host{display:block}.tree-node{margin:4px 0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;height:100%;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;min-width:200px;-webkit-transition:background-color .12s;transition:background-color .12s}.tree-node:hover{cursor:pointer}.tree-node:hover .tree-node__actions,.tree-node:hover .tree-node__visible{visibility:visible}.tree-node:hover .tree-node__label{color:#fff}.tree-node--themed{padding-right:12px;border-radius:2px;border-left:var(--tree-node-border)}.tree-node--themed:focus{background:#e4ecf9;outline:0}.tree-node--themed:hover{cursor:pointer;background:var(--tree-node-bg--hover)}.tree-node--themed:hover .tree-node__label{color:#131c2a;color:var(--tree-node-color--hover)}.tree-node--themed .tree-node__label{color:#131c2a;color:var(--tree-node-color);font-size:13px;letter-spacing:.325px;line-height:1.4em}.tree-node--themed.tree-node--selected{border-left:4px solid #2d72dc;background-color:#f1f5fc;background:var(--tree-node-bg--selected);border-left:var(--tree-node-border--selected)}.tree-node--themed.tree-node--selected:hover{background-color:#f1f5fc;background-color:var(--tree-node-bg--selected)}.tree-node--themed.tree-node--selected .tree-node__actions,.tree-node--themed.tree-node--selected .tree-node__label{color:#131c2a;color:var(--tree-node-color--selected)}.tree-node--themed.tree-node--selected .tree-node__actions,.tree-node--themed.tree-node--selected .tree-node__expand,.tree-node--themed.tree-node--selected .tree-node__visible{background-color:#f1f5fc;color:#131c2a;background-color:var(--tree-node-button-bg--selected);color:var(--tree-node-button-color--selected)}.tree-node--themed.tree-node--selected .tree-node__actions:hover,.tree-node--themed.tree-node--selected .tree-node__expand:hover,.tree-node--themed.tree-node--selected .tree-node__visible:hover{background-color:var(--tree-node-button-bg--hover);color:var(--tree-node-button-color--hover)}.tree-node--themed.tree-node--unpickable{border:1px dashed #d7e0ea}.tree-node--themed.tree-node--hidden .tree-node__label{color:#96a8c0;color:var(--tree-node-color--hidden)}.tree-node--themed .tree-node__actions,.tree-node--themed .tree-node__expand,.tree-node--themed .tree-node__visible{background-color:transparent;background-color:var(--tree-node-button-bg);color:#96a8c0;color:var(--tree-node-button-color);border-radius:4px}.tree-node--themed .tree-node__actions:hover,.tree-node--themed .tree-node__expand:hover,.tree-node--themed .tree-node__visible:hover{background-color:transparent;color:inherit;background-color:var(--tree-node-button-bg--hover);color:var(--tree-node-button-color--hover)}.tree-node--light:hover{background:rgba(234,239,245,.5)}.tree-node--light:hover .tree-node__label{color:#131c2a}.tree-node--light .tree-node__label{color:#283853;font-weight:400;font-size:14px;line-height:1.33em}.tree-node--light.tree-node--selected:hover{background:#2d72dc}.tree-node--light.tree-node--selected .tree-node__actions,.tree-node--light.tree-node--selected .tree-node__expand,.tree-node--light.tree-node--selected .tree-node__label,.tree-node--light.tree-node--selected .tree-node__visible{color:#fff}.tree-node--light.tree-node--selected .tree-node__actions:hover,.tree-node--light.tree-node--selected .tree-node__expand:hover,.tree-node--light.tree-node--selected .tree-node__visible:hover{color:#f9fafd}.tree-node--light.tree-node--unpickable{border:1px dashed #d7e0ea}.tree-node--light.tree-node--hidden .tree-node__label{color:#96a8c0;font-weight:300}.tree-node--light .tree-node__actions,.tree-node--light .tree-node__expand,.tree-node--light .tree-node__visible{color:#6a82a4;border-radius:4px}.tree-node--light .tree-node__actions:hover,.tree-node--light .tree-node__expand:hover,.tree-node--light .tree-node__visible:hover{background-color:#eaeff5;color:#131c2a}.tree-node.tree-node--hidden.tree-node--selected .tree-node__label{color:#96a8c0}.tree-node--selected{background-color:#2d72dc}.tree-node--selected .tree-node__label{color:#fff}.tree-node--unpickable{border:1px dashed #6a82a4}.tree-node--hidden .tree-node__actions,.tree-node--hidden .tree-node__expand,.tree-node--hidden .tree-node__label,.tree-node--hidden .tree-node__visible{color:#6a82a4}.tree-node--hidden .tree-node__visible{visibility:visible}.tree-node__label{font-size:12px;letter-spacing:.3px;letter-spacing:.5px;font-weight:400;line-height:1.3em;color:#d7e0ea;padding:8px 4px 8px 12px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-flex:1;flex:1 1 100%;min-height:28px}.tree-node__label--padded{padding-left:32px}.tree-node__expand i{-webkit-transition:-webkit-transform .12s;transition:-webkit-transform .12s;transition:transform .12s;transition:transform .12s,-webkit-transform .12s}.tree-node__expand--open app-icon{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.tree-node .tree-node__expand+.tree-node__label{margin-left:-8px}.tree-node__actions,.tree-node__expand,.tree-node__visible{border-radius:4px;color:#d7e0ea;display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 30px;height:30px;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.tree-node__actions:hover,.tree-node__expand:hover,.tree-node__visible:hover{background-color:#1c2a3f;color:#fff;cursor:pointer}.tree-node--selected .tree-node__actions:hover,.tree-node--selected .tree-node__expand:hover,.tree-node--selected .tree-node__visible:hover{background-color:#2d72dc}.tree-node__actions,.tree-node__visible{visibility:hidden}.tree-node__layer-order{font-size:10px;-webkit-box-flex:0;flex:0 0 56px;min-height:28px;height:28px;padding:4px;margin:2px;text-align:center}.tree-node .tree-node__eye,.tree-node .tree-node__eye-slash{display:none}.tree-node.tree-node--hidden .tree-node__eye-slash,.tree-node:hover .tree-node__eye-slash{display:inline}.tree-node.tree-node--hidden .tree-node__visible:hover .tree-node__eye-slash{display:none}.tree-node.tree-node--hidden .tree-node__visible:hover .tree-node__eye{display:inline}"]],data:{}});function Wy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"div",[["appEventFence",""],["class","tree-node__expand"],["data-test","treeNodeExpand"]],[[2,"tree-node__expand--open",null]],[[null,"click"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1).onClick(n,n.target)&&i),"click"===t&&(i=!1!==a.handleExpandClick(a.node,a.node.boolState.expanded)&&i),i}),null,null)),l.wb(1,16384,null,0,me,[],null,null),(e()(),l.xb(2,0,null,null,1,"app-icon",[["icon","caret-right"]],null,null,null,he,ge)),l.wb(3,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){e(t,3,0,"caret-right")}),(function(e,t){e(t,0,0,t.component.node.boolState.expanded)}))}function Gy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"div",[["class","text-10 text-uppercase"],["data-test","treeNodeId"],["style","opacity: 0.7;"]],null,null,null,null,null)),(e()(),l.Rb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.shortId)}))}function qy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,9,"div",[["class","tree-node__label"]],null,[[null,"dblclick"]],(function(e,t,n){var l=!0;return"dblclick"===t&&(l=!1!==e.component.setEditLabelMode(!0)&&l),l}),null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"tree-node__label--padded":0}),(e()(),l.xb(4,0,null,null,5,"div",[["class","flex flex-column"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,Gy)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(8,0,null,null,1,"div",[["data-test","treeNodeLabel"]],null,null,null,null,null)),(e()(),l.Rb(9,null,[" "," "]))],(function(e,t){var n=t.component,i=e(t,3,0,!n.hasChildren&&n.nested);e(t,2,0,"tree-node__label",i),e(t,6,0,l.Sb(t,6,0,l.Jb(t,7).transform(n.showTreeNodeIds$)))}),(function(e,t){e(t,9,0,t.component.node.label)}))}function Xy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"input",[["appAutoFocus",""],["appEventFence",""],["class","input"],["data-test","treeNodeEditLabel"],["type","text"]],[[8,"value",0]],[[null,"blur"],[null,"keyup"],[null,"click"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,2).onClick(n,n.target)&&i),"blur"===t&&(i=!1!==a.handleLabel(n)&&i),"keyup"===t&&(i=!1!==a.handleLabel(n)&&i),i}),null,null)),l.wb(1,1064960,null,0,hy,[l.l],null,null),l.wb(2,16384,null,0,me,[],null,null)],null,(function(e,t){e(t,0,0,t.component.node.label)}))}function Ky(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"input",[["appEventFence",""],["class","input input--small tree-node__layer-order"],["data-test","treeNodeLayerOrder"],["type","text"]],[[8,"value",0]],[[null,"change"],[null,"click"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1).onClick(n,n.target)&&i),"change"===t&&(i=!1!==a.handleLayerOrder(n,a.node)&&i),i}),null,null)),l.wb(1,16384,null,0,me,[],null,null)],null,(function(e,t){e(t,0,0,t.component.node.numState.layer)}))}function Zy(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,21,"div",[["class","tree-node"],["data-test","treeNode"],["tabindex","0"]],[[1,"data-id",0]],[[null,"keyup.enter"],[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"keyup.enter"===t&&(l=!1!==i.handleNodeClick(n,i.node)&&l),"click"===t&&(l=!1!==i.handleNodeClick(n,i.node)&&l),l}),null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"tree-node--light":0,"tree-node--themed":1,"tree-node--hidden":2,"tree-node--selected":3,"tree-node--unpickable":4}),(e()(),l.nb(16777216,null,null,1,null,Wy)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,qy)),l.wb(7,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Xy)),l.wb(9,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,2,null,Ky)),l.wb(11,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(13,0,null,null,5,"div",[["appEventFence",""],["class","tree-node__visible"],["data-test","treeNodeVisible"]],null,[[null,"click"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,14).onClick(n,n.target)&&i),"click"===t&&(i=!1!==a.toggleVisible(a.node)&&i),i}),null,null)),l.wb(14,16384,null,0,me,[],null,null),(e()(),l.xb(15,0,null,null,1,"app-icon",[["class","tree-node__eye"],["data-test","treeNodeVisibleTrue"],["icon","eye"],["size","xs"]],null,null,null,he,ge)),l.wb(16,114688,null,0,be,[],{icon:[0,"icon"],size:[1,"size"]},null),(e()(),l.xb(17,0,null,null,1,"app-icon",[["class","tree-node__eye-slash"],["data-test","treeNodeVisibleFalse"],["icon","eye-slash"],["size","xs"]],null,null,null,he,ge)),l.wb(18,114688,null,0,be,[],{icon:[0,"icon"],size:[1,"size"]},null),(e()(),l.xb(19,0,null,null,2,"app-node-actions",[["appEventFence",""]],null,[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,21).onClick(n,n.target)&&i),i}),Ty,_y)),l.wb(20,114688,null,0,fy,[O.i,Ts,l.i,Xc,rp.c,xt,Rs],{node:[0,"node"],theme:[1,"theme"]},null),l.wb(21,16384,null,0,me,[],null,null)],(function(e,t){var n=t.component,i=e(t,3,0,n.theme===n.treeTheme.Light,n.theme===n.treeTheme.Themed,!n.node.boolState.shown,n.checked,!n.node.boolState.pickable&&n.isLoft);e(t,2,0,"tree-node",i),e(t,5,0,n.nested&&n.hasChildren),e(t,7,0,!n.editLabelMode),e(t,9,0,n.editLabelMode),e(t,11,0,l.Sb(t,11,0,l.Jb(t,12).transform(n.layerOrderMode$))),e(t,16,0,"eye","xs"),e(t,18,0,"eye-slash","xs"),e(t,20,0,n.node,n.theme)}),(function(e,t){e(t,0,0,t.component.sanitizedID)}))}var Yy=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}.tree-group[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tree-group--themed[_ngcontent-%COMP%]   .tree-group__collapse[_ngcontent-%COMP%]:after{background:var(--tree-node-collapse-color)}.tree-group--themed[_ngcontent-%COMP%]   .tree-group__collapse[_ngcontent-%COMP%]:hover{background:0 0}.tree-group--themed[_ngcontent-%COMP%]   .tree-group__collapse[_ngcontent-%COMP%]:hover:after{background:var(--tree-node-collapse-color--hover)}.tree-group--light[_ngcontent-%COMP%]   .tree-group__collapse[_ngcontent-%COMP%]:after{background:#eaeff5}.tree-group--light[_ngcontent-%COMP%]   .tree-group__collapse[_ngcontent-%COMP%]:hover{background:0 0}.tree-group--light[_ngcontent-%COMP%]   .tree-group__collapse[_ngcontent-%COMP%]:hover:after{background:#d7e0ea}.tree-group__children[_ngcontent-%COMP%]{padding-left:20px;position:relative}.tree-group__collapse[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;width:20px;z-index:1}.tree-group__collapse[_ngcontent-%COMP%]:after{content:\" \";display:block;position:absolute;width:1px;left:10px;top:0;bottom:0;background:#1c2a3f}.tree-group__collapse[_ngcontent-%COMP%]:hover{cursor:pointer}.tree-group__collapse[_ngcontent-%COMP%]:hover:after{background:#283853}"]],data:{}});function Qy(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"div",[["class","tree-group__collapse"]],[[8,"title",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleExpandClick(e.parent.parent.context.$implicit,!0)&&l),l}),null,null))],null,(function(e,t){e(t,0,0,t.parent.parent.context.$implicit.label)}))}function eO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["class","tree-group__children"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Qy)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(3,0,null,null,1,"app-tree-group",[],null,[[null,"clickNode"]],(function(e,t,n){var l=!0;return"clickNode"===t&&(l=!1!==e.component.handleNodeClick(n)&&l),l}),nO,Yy)),l.wb(4,245760,null,0,xy,[Ts,O.i],{graph:[0,"graph"],theme:[1,"theme"],node:[2,"node"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.hasChildren(t.parent.context.$implicit)),e(t,4,0,n.graph,n.theme,t.parent.context.$implicit)}),null)}function tO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,7,"div",[["class","tree-group"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"tree-group--light":0,"tree-group--themed":1}),(e()(),l.xb(4,0,null,null,1,"app-tree-nested-node",[],null,null,null,Zy,Vy)),l.wb(5,245760,null,0,$y,[O.i,Ts,d.m,l.i],{graph:[0,"graph"],node:[1,"node"],theme:[2,"theme"]},null),(e()(),l.nb(16777216,null,null,1,null,eO)),l.wb(7,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component,l=e(t,3,0,n.theme===n.treeTheme.Light,n.theme===n.treeTheme.Themed);e(t,2,0,"tree-group",l),e(t,5,0,n.graph,t.context.$implicit,n.theme),e(t,7,0,t.context.$implicit.boolState.expanded)}),null)}function nO(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,1,null,tO)),l.wb(1,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],(function(e,t){var n=t.component;e(t,1,0,n.nodes,n.trackTreeNode)}),null)}var lO=l.vb({encapsulation:0,styles:[[""]],data:{}});function iO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"app-tree-group",[],null,null,null,nO,Yy)),l.wb(1,245760,null,0,xy,[Ts,O.i],{graph:[0,"graph"],theme:[1,"theme"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,1,0,n.searchGraph?n.searchGraph:l.Sb(t,1,0,l.Jb(t,2).transform(n.viewGraph$)),n.theme)}),null)}var aO=n("Wucu"),oO=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.tree-search{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-flex:1;flex:1 1 auto;height:100%}.tree-search__tree{-webkit-box-flex:1;flex-grow:1;width:100%}.tree-search__empty{font-size:14px;letter-spacing:.35px;line-height:1.4em;padding:12px;font-style:italic;margin-top:12px}.tree-search cdk-virtual-scroll-viewport{-webkit-box-flex:1;flex:1 1 auto}.tree-search cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper{padding-right:12px}"]],data:{}});function sO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"div",[["class","tree-search__empty"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" No results "]))],null,null)}function rO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"div",[["class","pr-3 pv-3"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-tree",[["class","tree-search__tree"]],null,null,null,iO,lO)),l.wb(2,245760,null,0,Im,[O.i,Ts],{theme:[0,"theme"],searchGraph:[1,"searchGraph"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.theme,n.searchGraph)}),null)}function cO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-tree-nested-node",[["class","mr-3"],["style","height: 64px;"]],null,null,null,Zy,Vy)),l.wb(2,245760,null,0,$y,[O.i,Ts,d.m,l.i],{graph:[0,"graph"],node:[1,"node"],nested:[2,"nested"],theme:[3,"theme"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.prunedViewGraph,t.context.$implicit,!1,n.theme)}),null)}function uO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"cdk-virtual-scroll-viewport",[["class","pv-3 cdk-virtual-scroll-viewport"]],[[4,"height","px"],[2,"cdk-virtual-scroll-orientation-horizontal",null],[2,"cdk-virtual-scroll-orientation-vertical",null]],null,null,aO.b,aO.a)),l.Ob(6144,null,nt.b,null,[nt.d]),l.wb(2,540672,null,0,nt.a,[],{itemSize:[0,"itemSize"]},null),l.Ob(1024,null,nt.i,nt.k,[nt.a]),l.wb(4,245760,null,0,nt.d,[l.l,l.i,l.B,[2,nt.i],[2,et.b],nt.f],null,null),(e()(),l.nb(16777216,null,0,1,null,cO)),l.wb(6,409600,null,0,nt.c,[l.S,l.P,l.u,[1,nt.d],l.B],{cdkVirtualForOf:[0,"cdkVirtualForOf"],cdkVirtualForTrackBy:[1,"cdkVirtualForTrackBy"]},null)],(function(e,t){var n=t.component;e(t,2,0,64),e(t,4,0),e(t,6,0,n.searchResults,n.trackTreeNode)}),(function(e,t){e(t,0,0,t.component.searchHeight,"horizontal"===l.Jb(t,4).orientation,"horizontal"!==l.Jb(t,4).orientation)}))}function pO(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,6,"div",[["class","tree-search"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,sO)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,rO)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,uO)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,0===n.searchResults.length),e(t,4,0,n.displayMode===n.treeSearchDisplayMode.Tree),e(t,6,0,n.displayMode===n.treeSearchDisplayMode.List)}),null)}let dO=(()=>{class e{constructor(e,t){this.viewService=e,this.store=t,this.query="",this.treeTheme=Tm,this.treeSearchDisplayMode=zm}ngOnInit(){}handleSearchKeyup(e,t){"Escape"===e.key&&(this.handleExitClick(),this.searchInput.nativeElement.blur()),this.query=t}handleExitClick(){this.query="",this.viewService.toggleSearch(!1)}toggleDisplayMode(){let e=this.store.selectSnapshot($m.getSearchDisplayMode);this.setDisplayMode(e=e===zm.List?zm.Tree:zm.List)}setDisplayMode(e){this.store.dispatch(new X.SetSearchDisplayMode(e))}}return Object(y.__decorate)([Object(O.e)(wm.getViewGraph),Object(y.__metadata)("design:type",Z.a)],e.prototype,"viewGraph$",void 0),Object(y.__decorate)([Object(O.e)($m.getSearchDisplayMode),Object(y.__metadata)("design:type",Z.a)],e.prototype,"searchDisplayMode$",void 0),e})();var bO=l.vb({encapsulation:2,styles:[[".view-search{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%}@-webkit-keyframes appear{from{background-color:transparent}}@keyframes appear{from{background-color:transparent}}.view-search__header{background-color:#2d72dc;background-color:var(--view-search-header-bg);-webkit-box-flex:0;flex:0 0 auto;display:-webkit-box;display:flex;padding:12px 12px 16px;-webkit-animation:250ms ease-out appear;animation:250ms ease-out appear}.view-search__input-container{background-color:#fff;background-color:var(--view-search-input-bg);display:-webkit-box;display:flex;-webkit-box-flex:1;flex-grow:1;border-radius:4px}.view-search__input{color:#131c2a;color:var(--view-search-active-color);background:0 0;border:1px solid transparent;outline:0;-webkit-box-flex:1;flex:1 0 auto;padding:8px 12px;font-size:13px;font-family:'Inter UI',\"Font Awesome 5 Pro\"!important}.view-search__input::-ms-clear{display:none}.view-search__input::-webkit-input-placeholder{color:#96a8c0;color:var(--view-search-inactive-color)}.view-search__input::-moz-placeholder{color:#96a8c0;color:var(--view-search-inactive-color)}.view-search__input:-ms-input-placeholder{color:#96a8c0;color:var(--view-search-inactive-color)}.view-search__input::-ms-input-placeholder{color:#96a8c0;color:var(--view-search-inactive-color)}.view-search__input::placeholder{color:#96a8c0;color:var(--view-search-inactive-color)}.view-search__action{background:0 0;border:0;color:#96a8c0;color:var(--view-search-inactive-color);cursor:pointer;width:36px;height:36px;outline:0}.view-search__action:hover{color:#131c2a;color:var(--view-search-active-color)}.view-search__divider{border-right:1px solid #96a8c0;border-right:1px solid var(--view-search-divider-color);margin:8px 0}.view-search__body{-webkit-box-flex:1;flex:1 1 100%;overflow-y:scroll;padding-left:12px}.view-search__actions{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}@media not all and (min-resolution:0.001dpcm){@supports (-webkit-appearance:none){.view-search__input{font-size:16px;padding:4px 8px;width:0}}}"]],data:{}});function gO(e){return l.Tb(2,[l.Pb(671088640,1,{searchInput:0}),(e()(),l.xb(1,0,null,null,21,"div",[["class","view-search"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,15,"div",[["class","view-search__header"]],null,null,null,null,null)),(e()(),l.xb(3,0,null,null,14,"div",[["class","view-search__input-container"]],null,null,null,null,null)),(e()(),l.xb(4,0,[[1,0],["searchInput",1]],null,2,"input",[["appAutoFocus",""],["appSelectOnFocus",""],["aria-label","Search Anatomy"],["class","view-search__input"],["placeholder","Search Anatomy"],["role","search"],["type","text"]],[[8,"value",0]],[[null,"keyup"],[null,"click"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,6).onClick(n,n.target)&&i),"keyup"===t&&(i=!1!==a.handleSearchKeyup(n,l.Jb(e,4).value)&&i),i}),null,null)),l.wb(5,1064960,null,0,hy,[l.l],null,null),l.wb(6,16384,null,0,my,[],null,null),(e()(),l.xb(7,16777216,null,null,5,"button",[["class","view-search__action"],["type","button"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,8).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,8)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,8)._handleTouchend()&&i),"click"===t&&(i=!1!==a.toggleDisplayMode()&&i),i}),null,null)),l.wb(8,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(10,0,null,null,2,"app-icon",[["aria-hidden","true"]],null,null,null,he,ge)),l.wb(11,114688,null,0,be,[],{icon:[0,"icon"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(13,0,null,null,0,"div",[["class","view-search__divider"]],null,null,null,null,null)),(e()(),l.xb(14,16777216,null,null,3,"button",[["class","view-search__action"],["matTooltip","Close Search"],["type","button"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,15).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,15)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,15)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleExitClick()&&i),i}),null,null)),l.wb(15,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),(e()(),l.xb(16,0,null,null,1,"app-icon",[["icon","times"]],null,null,null,he,ge)),l.wb(17,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(18,0,null,null,4,"div",[["class","view-search__body"]],null,null,null,null,null)),(e()(),l.xb(19,0,null,null,3,"app-tree-search",[],null,null,null,pO,oO)),l.wb(20,4440064,null,0,Lm,[l.H,l.i,l.l,Rs,O.i],{query:[0,"query"],displayMode:[1,"displayMode"],viewGraph:[2,"viewGraph"],theme:[3,"theme"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,8,0,l.Sb(t,8,0,l.Jb(t,9).transform(n.searchDisplayMode$))===n.treeSearchDisplayMode.List?"Switch to Anatomy Tree":"Switch to Anatomy List"),e(t,11,0,l.Sb(t,11,0,l.Jb(t,12).transform(n.searchDisplayMode$))===n.treeSearchDisplayMode.List?"sitemap":"list"),e(t,15,0,"Close Search"),e(t,17,0,"times"),e(t,20,0,n.query,l.Sb(t,20,1,l.Jb(t,21).transform(n.searchDisplayMode$)),l.Sb(t,20,2,l.Jb(t,22).transform(n.viewGraph$)),n.treeTheme.Themed)}),(function(e,t){e(t,4,0,t.component.query)}))}let hO=(()=>{class e{constructor(e,t,n){this.store=e,this.actions=t,this.changeRef=n,this.layout="drawer",this.showClose=!0,this.isOpen=!1,this.ngUnsubscribe=new K.a}ngOnInit(){this.initInfoListeners(),this.store.select(Xs.getSelectedNode).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{void 0!==e&&(this.node=this.store.selectSnapshot(wm.getViewGraphNode)(e.objectId))})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleHideClick(e){this.store.dispatch(new Bs.UpdateNodesShown(!1,[e.id]))}handleCloseClick(){const e=this.store.selectSnapshot($m.getLayout);e.nodeInfo.status=vm.Hide,this.store.dispatch(new X.SetLayout(e))}initInfoListeners(){this.actions.pipe(Object(O.k)(ta,na,Qi),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.isOpen=!0,this.changeRef.markForCheck()})}formatHTML(e){return e.trim().replace(new RegExp("\r?\n","g"),"<br><br>")}}return Object(y.__decorate)([Object(O.e)(wm.getQuerying),Object(y.__metadata)("design:type",Z.a)],e.prototype,"querying$",void 0),e})();var mO=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.view-node-description{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.view-node-description--layout-drawer .view-node-description__body{margin-top:8px}.view-node-description--layout-column .view-node-description__body{margin-top:4px}.view-node-description__header{display:-webkit-box;display:flex}.view-node-description__title{font-size:18px;letter-spacing:.45px;line-height:1.4em;-webkit-box-flex:1;flex:1 1 auto;font-weight:600;align-self:center}.view-node-description--layout-drawer .view-node-description__title{font-size:14px;letter-spacing:.35px;line-height:1.4em}.view-node-description__body{font-size:14px;letter-spacing:.35px;line-height:1.4em;color:var(--view-description-secondary-color)}.view-node-description__attribution{color:var(--view-description-secondary-color);margin-top:16px;font-size:12px;letter-spacing:.3px;line-height:1.4em}.view-node-description__actions{cursor:pointer;outline:0;border:none;background:0 0;padding:4px 8px}"]],data:{}});function xO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"button",[["app-pin-button",""],["class","mr-1 mt-1"],["icon","arrow-left"],["size","small"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCloseClick()&&l),l}),_x,hx)),l.wb(1,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"]},null)],(function(e,t){e(t,1,0,"arrow-left","small")}),null)}function fO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"div",[["class","view-node-description__body"]],[[2,"text-italic",null],[8,"innerHTML",1]],null,null,null,null))],null,(function(e,t){var n=t.component;e(t,0,0,!(null!=n.node&&n.node.description),n.formatHTML((null==n.node?null:n.node.description)||"No description available"))}))}function _O(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"div",[["class","view-node-description__attribution"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Source: "])),(e()(),l.xb(2,0,null,null,1,"span",[["class","text-italic"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Wikipedia"]))],null,null)}function yO(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,13,"div",[["class","view-node-description"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"view-node-description--layout-column":0,"view-node-description--layout-drawer":1}),(e()(),l.xb(4,0,null,null,4,"div",[["class","view-node-description__header"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,xO)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(7,0,null,null,1,"div",[["class","view-node-description__title"]],null,null,null,null,null)),(e()(),l.Rb(8,null,["",""])),(e()(),l.nb(16777216,null,null,2,null,fO)),l.wb(10,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,1,null,_O)),l.wb(13,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component,i=e(t,3,0,"column"===n.layout,"drawer"===n.layout);e(t,2,0,"view-node-description",i),e(t,6,0,n.showClose),e(t,10,0,!l.Sb(t,10,0,l.Jb(t,11).transform(n.querying$))),e(t,13,0,null==n.node?null:n.node.description)}),(function(e,t){var n=t.component;e(t,8,0,null==n.node?null:n.node.label)}))}let OO=(()=>{class e{constructor(e,t,n){this.viewService=e,this.layoutService=t,this.changeDetectorRef=n,this.ngUnsubscribe=new K.a,this.viewLayout=ax,this.application=i}ngOnInit(){this.initLayoutObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initLayoutObserver(){Object(Du.b)(this.layout$,this.chapter$).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.changeDetectorRef.markForCheck()})}isVisible(e){return this.layoutService.isVisible(e)}handleSearchClick(){this.viewService.toggleSearch(!0)}}return Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapter),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapter$",void 0),Object(y.__decorate)([Object(O.e)($m.getLayout),Object(y.__metadata)("design:type",Z.a)],e.prototype,"layout$",void 0),e})();var wO=l.vb({encapsulation:2,styles:[[".view-column-container{pointer-events:none;height:100%;width:320px;position:fixed;left:0;top:0;z-index:30}.view-column-container app-view-column{position:absolute;left:0;top:0;height:100%;z-index:40}"]],data:{animation:[{type:7,name:"slideInOut",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translateX(-320px)"},offset:null},{type:4,styles:{type:6,styles:{transform:"*"},offset:null},timings:"300ms ease-in-out"}],options:null},{type:1,expr:":leave",animation:[{type:4,styles:{type:6,styles:{transform:"translateX(-320px)"},offset:null},timings:"300ms ease-in-out"}],options:null}],options:{}}]}});function vO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-internal-header",[],null,null,null,S_,j_)),l.wb(1,245760,null,0,C_,[d.a,O.i,l.i,qr,lc],null,null)],(function(e,t){e(t,1,0)}),null)}function CO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,7,"app-view-column",[["class","view-column-container__inner"]],[[24,"@slideInOut",0]],null,null,T_,M_)),l.wb(1,114688,null,0,P_,[],null,null),(e()(),l.xb(2,0,null,0,2,null,null,null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,vO)),l.wb(4,81920,null,0,Bx,[l.P,l.S,d.m],{appFlagApplication:[0,"appFlagApplication"],appFlagApplicationMode:[1,"appFlagApplicationMode"]},null),(e()(),l.xb(5,0,null,1,2,null,null,null,null,null,null,null)),(e()(),l.xb(6,0,null,null,1,"app-view-content-mode",[["layout","column"]],null,null,null,gy,ry)),l.wb(7,245760,null,0,sy,[O.i,rx,ox,l.i],{layout:[0,"layout"]},null)],(function(e,t){var n=t.component;e(t,1,0),e(t,4,0,n.application.Viewer,"exclude"),e(t,7,0,"column")}),(function(e,t){e(t,0,0,void 0)}))}function jO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"app-view-column",[["class","view-column-container__inner"]],[[24,"@slideInOut",0]],null,null,T_,M_)),l.wb(1,114688,null,0,P_,[],{unpadded:[0,"unpadded"]},null),(e()(),l.xb(2,0,null,1,1,"app-view-search",[],null,null,null,gO,bO)),l.wb(3,114688,null,0,dO,[rx,O.i],null,null)],(function(e,t){e(t,1,0,!0),e(t,3,0)}),(function(e,t){e(t,0,0,void 0)}))}function kO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"app-view-column",[["class","view-column-container__inner"]],[[24,"@slideInOut",0]],null,null,T_,M_)),l.wb(1,114688,null,0,P_,[],null,null),(e()(),l.xb(2,0,null,1,1,"app-view-node-description",[["layout","column"]],null,null,null,yO,mO)),l.wb(3,245760,null,0,hO,[O.i,O.b,l.i],{layout:[0,"layout"]},null)],(function(e,t){e(t,1,0),e(t,3,0,"column")}),(function(e,t){e(t,0,0,void 0)}))}function SO(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,6,"div",[["class","view-column-container"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,CO)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,jO)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,kO)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.isVisible(n.viewLayout.Column)),e(t,4,0,n.isVisible(n.viewLayout.Search)),e(t,6,0,n.isVisible(n.viewLayout.NodeInfo))}),null)}class PO{constructor(){}ngOnInit(){}}var MO=l.vb({encapsulation:2,styles:[[".pillbox-divider{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-right:1px solid rgba(0,0,0,.1);border-right:var(--pillbox-border);height:18px;margin:0 8px}"]],data:{}});function TO(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,0,"div",[["class","pillbox-divider"]],null,null,null,null,null))],null,null)}class IO{constructor(){this.canExit=!1,this.padding="normal",this.orientation="horizontal",this.name="",this.exit=new l.n}ngOnInit(){}handleExitClick(){this.exit.emit()}}var JO=l.vb({encapsulation:2,styles:[[".pillbox{border-radius:32px;background-color:rgba(255,255,255,.8);box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3);color:#131c2a;background-color:var(--pillbox-bg);box-shadow:var(--pillbox-shadow);color:var(--pillbox-color);padding:6px 16px;display:-webkit-inline-box;display:inline-flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;overflow:hidden;-webkit-transition:padding 150ms;transition:padding 150ms}.pillbox--padding-dense{padding:4px}.pillbox--padding-none{padding:0}.pillbox--vertical{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"]],data:{}});function zO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-pillbox-divider",[],null,null,null,TO,MO)),l.wb(2,114688,null,0,PO,[],null,null),(e()(),l.xb(3,16777216,null,null,2,"button",[["app-pin-button",""],["buttonType","ghost"],["icon","times"]],[[1,"aria-label",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,5).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,5)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,5)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleExitClick()&&i),i}),_x,hx)),l.wb(4,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),l.wb(5,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0),e(t,4,0,"times","ghost"),e(t,5,0,"Close "+n.name)}),(function(e,t){e(t,3,0,"Close "+t.component.name)}))}function LO(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,6,"div",[["class","pillbox"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"pillbox--padding-dense":0,"pillbox--padding-none":1,"pillbox--vertical":2}),l.Ib(null,0),(e()(),l.nb(16777216,null,null,1,null,zO)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component,l=e(t,3,0,"dense"===n.padding,"none"===n.padding,"vertical"===n.orientation);e(t,2,0,"pillbox",l),e(t,6,0,n.canExit)}),null)}class EO{constructor(e,t){this.el=e,this.renderer=t}ngOnInit(){Fx()&&this.renderer.setStyle(this.el.nativeElement,"display","none")}}var AO=n("zMNK"),FO=function(e){return e.Above="above",e.Below="below",e.Left="left",e.Right="right",e}({});const RO={[FO.Above]:{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-12},[FO.Below]:{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:12},[FO.Left]:{originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:-12},[FO.Right]:{originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:12}};let DO=(()=>{class e{constructor(e,t){this.overlay=e,this.injector=t}open({origin:e,content:t,data:n,width:l,height:i}){const a=this.overlay.create(this.getOverlayConfig({origin:e,width:l,height:i})),o=new Mh(a,t,n),s=this.createInjector(o,this.injector);return a.attach(new AO.c(Th,null,s)),o}createInjector(e,t){const n=new WeakMap([[Mh,e]]);return new AO.e(t,n)}getPositionStrategy(e,t){return this.overlay.position().flexibleConnectedTo(e).withPositions(this.getPositions(t))}getOverlayConfig({origin:e,width:t,height:n}){return new Qe.b({width:t,height:n,hasBackdrop:!0,backdropClass:"popup-scrim",positionStrategy:this.getOverlayPosition(e),scrollStrategy:this.overlay.scrollStrategies.reposition()})}getOverlayPosition(e,t){return t=t||[FO.Above,FO.Below,FO.Left,FO.Right],this.overlay.position().flexibleConnectedTo(e).withPositions(this.getPositions(t)).withPush(!0)}getPositions(e){return e.map(e=>RO[e])}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(Qe.a),l.Xb(l.p))},token:e,providedIn:"root"}),e})();var UO=function(e){return e[e.Main=0]="Main",e[e.Media=1]="Media",e[e.Tools=2]="Tools",e[e.Annotate=3]="Annotate",e[e.Empty=4]="Empty",e}({}),NO=function(e){return e[e.ViewToolbarMain=0]="ViewToolbarMain",e[e.ViewToolsPlay=1]="ViewToolsPlay",e[e.ViewToolsNewTab=2]="ViewToolsNewTab",e[e.ViewToolsFullscreen=3]="ViewToolsFullscreen",e[e.ViewToolsTools=4]="ViewToolsTools",e[e.ViewToolsSearch=5]="ViewToolsSearch",e[e.ViewToolsMediaBarToggle=6]="ViewToolsMediaBarToggle",e[e.ViewToolsPreviousChapter=7]="ViewToolsPreviousChapter",e[e.ViewToolsNextChapter=8]="ViewToolsNextChapter",e[e.ViewToolsChapterCount=9]="ViewToolsChapterCount",e[e.ViewToolsMore=10]="ViewToolsMore",e[e.EngineCameraBar=11]="EngineCameraBar",e}({});const HO={stacksForChapter:{}};let BO=(()=>{let e=class{constructor(e){this.store=e}static canUndo(e,t){return e.stacksForChapter[t.selectedChapter].undoStack.length>0}static canRedo(e,t){return e.stacksForChapter[t.selectedChapter].redoStack.length>0}reset(e,t){e.patchState(immer.produce(e.getState(),e=>{e.stacksForChapter={}}))}undoAll(e,t){const n=e.getState();if(void 0===n.stacksForChapter[t.chapterId])return;const l=[...n.stacksForChapter[t.chapterId].undoStack].reverse(),i=l.flat().reduce((e,t)=>(void 0===e[t.patchAction]&&(e[t.patchAction]={action:t.patchAction,patches:[]}),e[t.patchAction].patches=[...e[t.patchAction].patches,...t.inverse],e),{});Object.keys(i).forEach(t=>{e.dispatch(new i[t].action(i[t].patches))});const a=immer.produce(n,e=>{e.stacksForChapter[t.chapterId].undoStack=[],e.stacksForChapter[t.chapterId].redoStack=l});e.patchState(a)}preserveState(e,t){const n=this.store.selectSnapshot(Nr.getSelectedChapterId),l=immer.produce(e.getState(),e=>{0!==t.patches.length&&(t.patches.some(e=>0===e.forward.length)&&t.patches.some(e=>0===e.inverse.length)||(void 0===e.stacksForChapter[n]&&(e.stacksForChapter[n]={redoStack:[],undoStack:[]}),e.stacksForChapter[n].redoStack=[],e.stacksForChapter[n].undoStack.push(t.patches)))});e.patchState(l)}redo(e,t){const n=e.getState(),l=Object(Mt.get)(n.stacksForChapter[t.chapterId],"redoStack",[]);if(0===l.length)return;const i=l[l.length-1],a=immer.produce(n,e=>{e.stacksForChapter[t.chapterId].redoStack.pop(),e.stacksForChapter[t.chapterId].undoStack.push(i)});e.patchState(a),i.forEach(t=>{e.dispatch(new t.patchAction(t.forward))})}undo(e,t){const n=e.getState(),l=Object(Mt.get)(n.stacksForChapter[t.chapterId],"undoStack",[]);if(0===l.length)return;const i=l[l.length-1],a=immer.produce(n,e=>{e.stacksForChapter[t.chapterId].undoStack.pop(),e.stacksForChapter[t.chapterId].redoStack.push(i)});e.patchState(a),i.forEach(t=>{e.dispatch(new t.patchAction(t.inverse))})}};return Object(y.__decorate)([Object(O.a)($s.Reset),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,$s.Reset]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"reset",null),Object(y.__decorate)([Object(O.a)($s.UndoAll),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,$s.UndoAll]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"undoAll",null),Object(y.__decorate)([Object(O.a)($s.SavePatches),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,$s.SavePatches]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"preserveState",null),Object(y.__decorate)([Object(O.a)($s.Redo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,$s.Redo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"redo",null),Object(y.__decorate)([Object(O.a)($s.Undo),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,$s.Undo]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"undo",null),Object(y.__decorate)([Object(O.f)([Nr]),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,xr]),Object(y.__metadata)("design:returntype",Boolean)],e,"canUndo",null),Object(y.__decorate)([Object(O.f)([Nr]),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,xr]),Object(y.__metadata)("design:returntype",Boolean)],e,"canRedo",null),Object(y.__decorate)([Object(O.g)({name:"undo",defaults:HO})],e)})(),$O=(()=>{class e{constructor(e,t,n,i,a){this.viewService=e,this.layoutService=t,this.store=n,this.changeDetectorRef=i,this.popupService=a,this.viewToolsMode=UO,this.viewLayout=ax,this.breakpointEnum=nx,this.testSelectors=NO,this.canFullscreen=!0,this.isFullscreen=!1,this.toolEnum=fm,this.mediaControlsEnum=Cm,this.ngUnsubscribe=new K.a,this.animate=!0,this._mode=UO.Main,this.collapsePagination=!1,this.modeChange=new l.n}get mode(){return this._mode}set mode(e){this._mode=e}ngOnInit(){this.canFullscreen=Sm.canFullscreen(),this.initLayoutListener(),this.initBreakpointListener(),this.initChapterListener(),this.initFullscreenListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initLayoutListener(){this.store.select($m.getLayout).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.mediaTemplate=e.media.template,this.changeDetectorRef.markForCheck()})}initBreakpointListener(){this.store.select(ix.getBreakpoint).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.breakpoint=e,this.changeDetectorRef.markForCheck()})}initChapterListener(){this.store.select(Nr.getSelectedChapterIndex).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.chaptersPopup&&this.chaptersPopup.close()})}initFullscreenListener(){this.fullscreen$=Sm.onFullscreenChange(),this.fullscreen$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.isFullscreen=Sm.isFullscreen(),this.changeDetectorRef.markForCheck()})}handleSelectTool(e){this.viewService.selectTool(e)}handleUndoClick(){this.viewService.undo()}handleRedoClick(){this.viewService.redo()}handleToggleLabelsClick(){this.viewService.toggleLabels()}handleFullscreenClick(){Sm.toggleFullscreen()}handleSearchClick(){this.viewService.toggleSearch()}handlePlayClick(){this.viewService.toggleAnimation()}handleAudioClick(){this.viewService.toggleAudio()}handlePresentClick(){this.viewService.togglePresentation()}handleTutorialClick(){this.viewService.toggleTutorial(!0)}handleHelpBasicsClick(){this.viewService.toggleHelp(!0,ee.Basics)}handleHelpShortcutsClick(){this.viewService.toggleHelp(!0,ee.Shortcuts)}handleMenuClick(){this.store.dispatch(new X.ToggleMenu(!0))}handleNewTabClick(){this.viewService.openInNewTab()}handlePreviousClick(){this.viewService.previousChapter()}handleNextClick(){this.viewService.nextChapter()}handleChapterCountClick(){this.toggleChaptersPopup()}handleMediaClick(){this.toggleMediaPopup()}handleAnnotateClick(){this.viewService.toggleAnnotate(!0)}handleSnapshotClick(){this.viewService.takeSnapshot(this.store.selectSnapshot(Nr.getSelectedChapterId),kt.JPEG)}toggleChaptersPopup(){this.chaptersPopup?this.chaptersPopup.close():(this.chaptersPopup=this.popupService.open({origin:this.chapterCount.nativeElement,content:$h,width:"300px"}),this.chaptersPopup.afterClosed$.pipe(Object(Y.a)(this.ngUnsubscribe),Object(Au.a)(1)).subscribe(e=>{this.chaptersPopup=null}))}toggleMediaPopup(){this.mediaPopup?this.mediaPopup.close():(this.mediaPopup=this.popupService.open({origin:this.mediaToggle.nativeElement,content:Cx,width:"300px"}),this.mediaPopup.afterClosed$.pipe(Object(Y.a)(this.ngUnsubscribe),Object(Au.a)(1)).subscribe(e=>{this.mediaPopup=null}))}toggleToolbar(e){const t=this.store.selectSnapshot($m.getLayout);t.media.status=vm.Hide,t.tools.status=vm.Hide,t.toolbar.status=vm.Hide,t[e].status=vm.Show,this.store.dispatch(new X.SetLayout(t))}isEnabled(e){return this.layoutService.isLayoutEnabled(e)}isVisible(e){return this.layoutService.isVisible(e)}}return Object(y.__decorate)([Object(O.e)(wm.getActiveTool),Object(y.__metadata)("design:type",Z.a)],e.prototype,"activeTool$",void 0),Object(y.__decorate)([Object(O.e)($m.getPresentationActive),Object(y.__metadata)("design:type",Z.a)],e.prototype,"presentationActive$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getIsChapterAnimated),Object(y.__metadata)("design:type",Z.a)],e.prototype,"isChapterAnimated$",void 0),Object(y.__decorate)([Object(O.e)(wm.getShowLabels),Object(y.__metadata)("design:type",Z.a)],e.prototype,"showLabels$",void 0),Object(y.__decorate)([Object(O.e)(wm.getAnimationPlaying),Object(y.__metadata)("design:type",Z.a)],e.prototype,"animationPlaying$",void 0),Object(y.__decorate)([Object(O.e)(wm.getPlayAudio),Object(y.__metadata)("design:type",Z.a)],e.prototype,"playAudio$",void 0),Object(y.__decorate)([Object(O.e)(Br.getChapterLabels),Object(y.__metadata)("design:type",Z.a)],e.prototype,"labels$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterTitle),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapterTitle$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterIndex),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapterIndex$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getNextChapter),Object(y.__metadata)("design:type",Z.a)],e.prototype,"nextChapter$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getPreviousChapter),Object(y.__metadata)("design:type",Z.a)],e.prototype,"previousChapter$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getChapterCount),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapterCount$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterAudio),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedChapterAudio$",void 0),Object(y.__decorate)([Object(O.e)(BO.canUndo),Object(y.__metadata)("design:type",Z.a)],e.prototype,"canUndo$",void 0),Object(y.__decorate)([Object(O.e)(BO.canRedo),Object(y.__metadata)("design:type",Z.a)],e.prototype,"canRedo$",void 0),Object(y.__decorate)([Object(O.e)($m.getCanTouch),Object(y.__metadata)("design:type",Z.a)],e.prototype,"canTouch$",void 0),e})();var VO=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.view-tools{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;overflow:hidden}@-webkit-keyframes viewToolsToggle{0%,100%{opacity:1}50%{opacity:0}}@keyframes viewToolsToggle{0%,100%{opacity:1}50%{opacity:0}}.view-tools--swap{-webkit-animation:.3s ease-in-out viewToolsToggle;animation:.3s ease-in-out viewToolsToggle}.view-tools--dense .view-tools__divider{margin:4px}.view-tools__inner{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}.view-tools__group{border-right:var(--view-tools-border);padding:0 8px;display:-webkit-box;display:flex}.view-tools__group:empty{display:none}.view-tools__group:empty:first-of-type+.view-tools__group:not(:empty),.view-tools__group:first-of-type{padding-left:0}.view-tools__group:last-of-type{border-right:none;padding-right:0}.view-tools__item{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.view-tools__item:not(:last-child){margin-right:4px}.view-tools__divider{border-right:var(--view-tools-border);margin:4px 8px}.view-tools__count{font-size:12px;letter-spacing:.3px;line-height:1.4em;white-space:nowrap}"]],data:{}});function WO(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,2,"button",[["app-pin-button",""],["aria-label","Open Explore Tools"],["buttonType","ghost"],["class","view-tools__item"],["icon","pen"],["matTooltip","Open Explore Tools"]],[[1,"data-test",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.toggleToolbar("tools")&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(2,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,1,0,"Open Explore Tools"),e(t,2,0,"pen","ghost")}),(function(e,t){e(t,0,0,t.component.testSelectors.ViewToolsTools)}))}function GO(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,2,"button",[["app-pin-button",""],["aria-label","Open Search"],["buttonType","ghost"],["class","view-tools__item"],["icon","search"],["matTooltip","Open Search"]],[[1,"data-test",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleSearchClick()&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(2,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,1,0,"Open Search"),e(t,2,0,"search","ghost")}),(function(e,t){e(t,0,0,t.component.testSelectors.ViewToolsSearch)}))}function qO(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,2,"button",[["app-pin-button",""],["buttonType","ghost"],["class","view-tools__item"],["icon","expand"]],[[1,"data-test",0],[1,"aria-label",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleFullscreenClick()&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(2,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,1,0,t.component.isFullscreen?"Exit Fullscreen":"Enter Fullscreen"),e(t,2,0,"expand","ghost")}),(function(e,t){var n=t.component;e(t,0,0,n.testSelectors.ViewToolsFullscreen,n.isFullscreen?"Exit Fullscreen":"Enter Fullscreen")}))}function XO(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,2,"button",[["app-pin-button",""],["aria-label","Open in New Tab"],["buttonType","ghost"],["class","view-tools__item"],["icon","external-link"],["matTooltip","Open in New Tab"]],[[1,"data-test",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleNewTabClick()&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(2,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,1,0,"Open in New Tab"),e(t,2,0,"external-link","ghost")}),(function(e,t){e(t,0,0,t.component.testSelectors.ViewToolsNewTab)}))}function KO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,8,"div",[["class","view-tools__group"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,WO)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,GO)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,qO)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,XO)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.isEnabled(n.viewLayout.Tools)),e(t,4,0,n.isEnabled(n.viewLayout.Search)),e(t,6,0,n.canFullscreen&&n.isEnabled(n.viewLayout.Fullscreen)),e(t,8,0,!n.canFullscreen&&n.isEnabled(n.viewLayout.Fullscreen))}),null)}function ZO(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,4,"button",[["app-pin-button",""],["aria-label","Open Media Bar"],["buttonType","ghost"],["class","view-tools__item"],["matTooltip","Open Media Bar"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.toggleToolbar("media")&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(2,114688,null,0,gx,[],{buttonType:[0,"buttonType"]},null),(e()(),l.xb(3,0,null,0,1,"app-view-scrubber",[["style","width: 16px"]],null,null,null,vx,wx)),l.wb(4,245760,null,0,Ox,[Rs,or,l.H,rx,l.i,O.i],{showHandle:[0,"showHandle"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,1,0,"Open Media Bar"),e(t,2,0,"ghost"),e(t,4,0,!1)}),null)}function YO(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,4,"button",[["app-pin-button",""],["buttonType","ghost"],["class","view-tools__item"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleAudioClick()&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.Lb(131072,se.b,[l.i]),l.wb(3,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,1,0,l.Sb(t,1,0,l.Jb(t,2).transform(n.playAudio$))?"Mute Audio":"Play Audio"),e(t,3,0,l.Sb(t,3,0,l.Jb(t,4).transform(n.playAudio$))?"volume":"volume-slash","ghost")}),null)}function QO(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,10,"div",[["class","view-tools__group"]],null,null,null,null,null)),(e()(),l.xb(1,16777216,null,null,5,"button",[["app-pin-button",""],["buttonType","ghost"],["class","view-tools__item"]],[[1,"data-test",0],[1,"aria-label",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,2).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,2)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,2)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handlePlayClick()&&i),i}),_x,hx)),l.wb(2,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.Lb(131072,se.b,[l.i]),l.wb(4,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,1,null,ZO)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,YO)),l.wb(10,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,l.Sb(t,2,0,l.Jb(t,3).transform(n.animationPlaying$))?"Pause Animation":"Play Animation"),e(t,4,0,l.Sb(t,4,0,l.Jb(t,5).transform(n.animationPlaying$))?"pause":"play","ghost"),e(t,8,0,n.mediaTemplate===n.mediaControlsEnum.Full),e(t,10,0,n.isVisible(n.viewLayout.Audio))}),(function(e,t){var n=t.component;e(t,1,0,n.testSelectors.ViewToolsPlay,l.Sb(t,1,1,l.Jb(t,6).transform(n.animationPlaying$))?"Pause Animation":"Play Animation")}))}function ew(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,10,"button",[["app-pin-button",""],["aria-label","Toggle Chapter List"],["buttonType","ghost"]],[[1,"data-test",0],[1,"visible",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleChapterCountClick()&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(2,114688,null,0,gx,[],{buttonType:[0,"buttonType"]},null),(e()(),l.xb(3,0,null,0,3,"div",[["aria-hidden","true"],["class","ph-2 text-bold"],["style","white-space: nowrap;"]],null,null,null,null,null)),(e()(),l.Rb(4,null,[" "," / "," "])),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(7,0,null,0,3,"span",[["class","visually-hidden"]],null,null,null,null,null)),(e()(),l.Rb(8,null,[" Toggle Chapter List, Chapter "," of "," "])),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,1,0,t.component.chaptersPopup?"Close Chapter List":"Open Chapter List"),e(t,2,0,"ghost")}),(function(e,t){var n=t.component;e(t,0,0,n.testSelectors.ViewToolsChapterCount,n.breakpoint!==n.breakpointEnum.Small),e(t,4,0,l.Sb(t,4,0,l.Jb(t,5).transform(n.chapterIndex$))+1,l.Sb(t,4,1,l.Jb(t,6).transform(n.chapterCount$))),e(t,8,0,l.Sb(t,8,0,l.Jb(t,9).transform(n.chapterIndex$))+1,l.Sb(t,8,1,l.Jb(t,10).transform(n.chapterCount$)))}))}function tw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,19,"div",[["class","view-tools__group"]],null,null,null,null,null)),(e()(),l.xb(1,16777216,null,null,6,"button",[["app-pin-button",""],["aria-label","Previous Chapter"],["buttonType","ghost"],["class","view-tools__item"],["icon","arrow-left"]],[[1,"data-test",0],[1,"aria-disabled",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,2).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,2)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,2)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handlePreviousClick()&&i),i}),_x,hx)),l.wb(2,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),l.wb(5,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"],disabled:[2,"disabled"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(8,0,[[1,0],["chapterCount",1]],null,2,"div",[["class","view-tools__item"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,ew)),l.wb(10,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(11,16777216,null,null,8,"button",[["app-pin-button",""],["aria-label","Next Chapter"],["buttonType","ghost"],["class","view-tools__item"],["icon","arrow-right"]],[[1,"data-test",0],[1,"aria-disabled",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,12).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,12)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,12)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleNextClick()&&i),i}),_x,hx)),l.wb(12,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),l.wb(15,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"],disabled:[2,"disabled"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component,i=null;e(t,2,0,l.Sb(t,2,0,l.Jb(t,3).transform(n.previousChapter$))?"Previous: "+(null==(i=l.Sb(t,2,0,l.Jb(t,4).transform(n.previousChapter$)))?null:i.info.displayName):""),e(t,5,0,"arrow-left","ghost",0===l.Sb(t,5,2,l.Jb(t,6).transform(n.chapterIndex$))),e(t,10,0,!n.collapsePagination);var a=null;e(t,12,0,l.Sb(t,12,0,l.Jb(t,13).transform(n.nextChapter$))?"Next: "+(null==(a=l.Sb(t,12,0,l.Jb(t,14).transform(n.nextChapter$)))?null:a.info.displayName):""),e(t,15,0,"arrow-right","ghost",l.Sb(t,15,2,l.Jb(t,16).transform(n.chapterIndex$))===l.Sb(t,15,2,l.Jb(t,17).transform(n.chapterCount$))-1)}),(function(e,t){var n=t.component;e(t,1,0,n.testSelectors.ViewToolsPreviousChapter,0===l.Sb(t,1,1,l.Jb(t,7).transform(n.chapterIndex$))),e(t,11,0,n.testSelectors.ViewToolsNextChapter,l.Sb(t,11,1,l.Jb(t,18).transform(n.chapterIndex$))===l.Sb(t,11,1,l.Jb(t,19).transform(n.chapterCount$))-1)}))}function nw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["class","view-tools__group"]],null,null,null,null,null)),(e()(),l.xb(1,16777216,null,null,3,"button",[["app-pin-button",""],["aria-haspopup","true"],["aria-label","More Options"],["buttonType","ghost"],["class","view-tools__item mat-menu-trigger"],["icon","ellipsis-v"],["matTooltip","More Options"]],[[1,"data-test",0],[1,"aria-expanded",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"],[null,"longpress"],[null,"touchend"]],(function(e,t,n){var i=!0;return"mousedown"===t&&(i=!1!==l.Jb(e,2)._handleMousedown(n)&&i),"keydown"===t&&(i=!1!==l.Jb(e,2)._handleKeydown(n)&&i),"click"===t&&(i=!1!==l.Jb(e,2)._handleClick(n)&&i),"longpress"===t&&(i=!1!==l.Jb(e,3).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,3)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,3)._handleTouchend()&&i),i}),_x,hx)),l.wb(2,1196032,null,0,Je.g,[Qe.a,l.l,l.S,Je.c,[2,Je.d],[8,null],[2,et.b],_e.e],{menu:[0,"menu"]},null),l.wb(3,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(4,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null)],(function(e,t){e(t,2,0,l.Jb(t.parent.parent,10)),e(t,3,0,"More Options"),e(t,4,0,"ellipsis-v","ghost")}),(function(e,t){e(t,1,0,t.component.testSelectors.ViewToolsMore,l.Jb(t,2).menuOpen||null)}))}function lw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,9,null,null,null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,KO)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,QO)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,2,null,tw)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,1,null,nw)),l.wb(9,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,n.breakpoint>=n.breakpointEnum.Large),e(t,4,0,n.isVisible(n.viewLayout.Mediabar)),e(t,6,0,l.Sb(t,6,0,l.Jb(t,7).transform(n.chapterCount$))>1&&n.isEnabled(n.viewLayout.Pagination)),e(t,9,0,n.isEnabled(n.viewLayout.Menu))}),null)}function iw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,26,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,14,"div",[["class","view-tools__group"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,13,"div",[["class","flex"],["role","radiogroup"]],null,null,null,null,null)),(e()(),l.xb(3,16777216,null,null,3,"button",[["app-pin-button",""],["aria-label","Select"],["buttonType","ghost"],["class","view-tools__item"],["icon","mouse-pointer"],["matTooltip","Select"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,4).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,4)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,4)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleSelectTool(a.toolEnum.Select)&&i),i}),_x,hx)),l.wb(4,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(5,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"],selected:[2,"selected"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(7,16777216,null,null,3,"button",[["app-pin-button",""],["aria-label","Hide"],["buttonType","ghost"],["class","view-tools__item"],["icon","eye-slash"],["matTooltip","Hide"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,8).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,8)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,8)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleSelectTool(a.toolEnum.Hide)&&i),i}),_x,hx)),l.wb(8,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(9,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"],selected:[2,"selected"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(11,16777216,null,null,4,"button",[["app-pin-button",""],["appHideIE11",""],["aria-label","Fade"],["buttonType","ghost"],["class","view-tools__item"],["icon","adjust"],["matTooltip","Fade"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,12).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,12)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,12)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleSelectTool(a.toolEnum.Fade)&&i),i}),_x,hx)),l.wb(12,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(13,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"],selected:[2,"selected"]},null),l.Lb(131072,se.b,[l.i]),l.wb(15,81920,null,0,EO,[l.l,l.H],null,null),(e()(),l.xb(16,0,null,null,10,"div",[["class","view-tools__group"]],null,null,null,null,null)),(e()(),l.xb(17,16777216,null,null,4,"button",[["app-pin-button",""],["aria-label","Undo"],["buttonType","ghost"],["class","view-tools__item"],["data-test","undo-btn"],["icon","undo"],["matTooltip","Undo"]],[[1,"aria-disabled",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,18).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,18)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,18)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleUndoClick()&&i),i}),_x,hx)),l.wb(18,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(19,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"],disabled:[2,"disabled"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(22,16777216,null,null,4,"app-pin-button",[["class","view-tools__item"],["data-test","redo-btn"],["icon","redo"],["matTooltip","Redo"],["type","ghost"]],[[1,"aria-disabled",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,23).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,23)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,23)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleRedoClick()&&i),i}),_x,hx)),l.wb(23,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(24,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"],disabled:[2,"disabled"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,4,0,"Select"),e(t,5,0,"mouse-pointer","ghost",l.Sb(t,5,2,l.Jb(t,6).transform(n.activeTool$))===n.toolEnum.Select),e(t,8,0,"Hide"),e(t,9,0,"eye-slash","ghost",l.Sb(t,9,2,l.Jb(t,10).transform(n.activeTool$))===n.toolEnum.Hide),e(t,12,0,"Fade"),e(t,13,0,"adjust","ghost",l.Sb(t,13,2,l.Jb(t,14).transform(n.activeTool$))===n.toolEnum.Fade),e(t,15,0),e(t,18,0,"Undo"),e(t,19,0,"undo","ghost",!l.Sb(t,19,2,l.Jb(t,20).transform(n.canUndo$))),e(t,23,0,"Redo"),e(t,24,0,"redo",n.size,!l.Sb(t,24,2,l.Jb(t,25).transform(n.canRedo$)))}),(function(e,t){var n=t.component;e(t,17,0,!l.Sb(t,17,0,l.Jb(t,21).transform(n.canUndo$))),e(t,22,0,!l.Sb(t,22,0,l.Jb(t,26).transform(n.canRedo$)))}))}function aw(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,3,"button",[["aria-haspopup","true"],["class","mat-menu-item mat-menu-trigger"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0],[1,"aria-expanded",0]],[[null,"click"],[null,"mouseenter"],[null,"mousedown"],[null,"keydown"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"mousedown"===t&&(i=!1!==l.Jb(e,2)._handleMousedown(n)&&i),"keydown"===t&&(i=!1!==l.Jb(e,2)._handleKeydown(n)&&i),"click"===t&&(i=!1!==l.Jb(e,2)._handleClick(n)&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[3,4],[4,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),l.wb(2,1196032,null,0,Je.g,[Qe.a,l.l,l.S,Je.c,[2,Je.d],[6,Je.e],[2,et.b],_e.e],{menu:[0,"menu"]},null),(e()(),l.Rb(-1,0,[" Help "])),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,2,0,l.Jb(t.parent,50))}),(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null,l.Jb(t,2).menuOpen||null)}))}function ow(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l.Rb(-1,null,["Hide labels"]))],null,null)}function sw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l.Rb(-1,null,["Show labels"]))],null,null)}function rw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.toggleToolbar("tools")&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[3,4],[4,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.xb(2,0,null,0,1,"app-icon",[["icon","pen"]],null,null,null,he,ge)),l.wb(3,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(4,0,null,0,1,"span",[["class","ml-2"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Open Explore Tools"]))],(function(e,t){e(t,3,0,"pen")}),(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function cw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleSearchClick()&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[3,4],[4,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.xb(2,0,null,0,1,"app-icon",[["icon","search"]],null,null,null,he,ge)),l.wb(3,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(4,0,null,0,1,"span",[["class","ml-2"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Open Search"]))],(function(e,t){e(t,3,0,"search")}),(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function uw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(2,49152,null,0,xb.a,[],null,null),(e()(),l.nb(16777216,null,null,1,null,rw)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,cw)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,4,0,n.isEnabled(n.viewLayout.Tools)),e(t,6,0,n.isEnabled(n.viewLayout.Search))}),(function(e,t){e(t,1,0,l.Jb(t,2).vertical?"vertical":"horizontal",l.Jb(t,2).vertical,!l.Jb(t,2).vertical,l.Jb(t,2).inset)}))}function pw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"span",[["class","ml-2"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Exit Fullscreen"]))],null,null)}function dw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"span",[["class","ml-2"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Enter Fullscreen"]))],null,null)}function bw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,7,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleFullscreenClick()&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[3,4],[4,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.xb(2,0,null,0,1,"app-icon",[["icon","expand"]],null,null,null,he,ge)),l.wb(3,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.nb(16777216,null,0,1,null,pw)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,0,1,null,dw)),l.wb(7,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,3,0,"expand"),e(t,5,0,n.isFullscreen),e(t,7,0,!n.isFullscreen)}),(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function gw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleNewTabClick()&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[3,4],[4,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.xb(2,0,null,0,1,"app-icon",[["icon","external-link"]],null,null,null,he,ge)),l.wb(3,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(4,0,null,0,1,"span",[["class","ml-2"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Open in New Tab"]))],(function(e,t){e(t,3,0,"external-link")}),(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function hw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(2,49152,null,0,xb.a,[],null,null),(e()(),l.nb(16777216,null,null,1,null,bw)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,gw)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,4,0,n.canFullscreen),e(t,6,0,!n.canFullscreen)}),(function(e,t){e(t,1,0,l.Jb(t,2).vertical?"vertical":"horizontal",l.Jb(t,2).vertical,!l.Jb(t,2).vertical,l.Jb(t,2).inset)}))}function mw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,hw)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,n.isEnabled(n.viewLayout.Fullscreen))}),null)}function xw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleHelpShortcutsClick()&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[6,4],[7,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Keyboard Shortcuts"]))],null,(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null)}))}function fw(e){return l.Tb(2,[l.Pb(671088640,1,{chapterCount:0}),l.Pb(671088640,2,{mediaToggle:0}),(e()(),l.xb(2,0,null,null,4,"div",[["aria-label","Tools"],["class","view-tools"],["role","toolbar"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,lw)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,iw)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(7,0,null,null,41,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.Ob(6144,null,Je.d,null,[Je.h]),l.Ob(6144,null,Je.b,null,[Je.d]),l.wb(10,1294336,[["moreMenu",4]],3,Je.h,[l.l,l.B,Je.a],null,null),l.Pb(603979776,3,{_allItems:1}),l.Pb(603979776,4,{items:1}),l.Pb(603979776,5,{lazyContent:0}),(e()(),l.nb(16777216,null,0,1,null,aw)),l.wb(15,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(16,0,null,0,8,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,17)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,17)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleToggleLabelsClick()&&i),i}),Ie.c,Ie.a)),l.wb(17,180224,[[3,4],[4,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],{disabled:[0,"disabled"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,0,2,null,ow)),l.wb(20,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,0,2,null,sw)),l.wb(23,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(25,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(26,49152,null,0,xb.a,[],null,null),(e()(),l.xb(27,0,null,0,4,"button",[["class","mat-menu-item"],["data-test","undo-btn"],["mat-menu-item",""]],[[1,"aria-disabled",0],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,28)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,28)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleUndoClick()&&i),i}),Ie.c,Ie.a)),l.wb(28,180224,[[3,4],[4,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],{disabled:[0,"disabled"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),(e()(),l.Rb(-1,0,["Undo"])),(e()(),l.xb(32,0,null,0,4,"button",[["class","mat-menu-item"],["data-test","redo-btn"],["mat-menu-item",""]],[[1,"aria-disabled",0],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,33)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,33)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleRedoClick()&&i),i}),Ie.c,Ie.a)),l.wb(33,180224,[[3,4],[4,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],{disabled:[0,"disabled"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),(e()(),l.Rb(-1,0,["Redo"])),(e()(),l.nb(16777216,null,0,1,null,uw)),l.wb(38,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(39,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,mb.b,mb.a)),l.wb(40,49152,null,0,xb.a,[],null,null),(e()(),l.xb(41,0,null,0,5,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,42)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,42)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleAnnotateClick()&&i),i}),Ie.c,Ie.a)),l.wb(42,180224,[[3,4],[4,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.xb(43,0,null,0,1,"app-icon",[["icon","chalkboard-teacher"]],null,null,null,he,ge)),l.wb(44,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(45,0,null,0,1,"span",[["class","ml-2"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Open Whiteboard"])),(e()(),l.nb(16777216,null,0,1,null,mw)),l.wb(48,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(49,0,null,null,15,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.wb(50,1294336,[["helpMenu",4]],3,Je.h,[l.l,l.B,Je.a],null,null),l.Pb(603979776,6,{_allItems:1}),l.Pb(603979776,7,{items:1}),l.Pb(603979776,8,{lazyContent:0}),l.Ob(2048,null,Je.d,null,[Je.h]),l.Ob(2048,null,Je.b,null,[Je.d]),(e()(),l.xb(56,0,null,0,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,57)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,57)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleTutorialClick()&&i),i}),Ie.c,Ie.a)),l.wb(57,180224,[[6,4],[7,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["Launch Tutorial"])),(e()(),l.xb(59,0,null,0,2,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,60)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,60)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.handleHelpBasicsClick()&&i),i}),Ie.c,Ie.a)),l.wb(60,180224,[[6,4],[7,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.Rb(-1,0,["3D Navigation Basics"])),(e()(),l.nb(16777216,null,0,2,null,xw)),l.wb(63,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n,i=t.component;e(t,4,0,i.mode===i.viewToolsMode.Main),e(t,6,0,i.mode===i.viewToolsMode.Tools),e(t,10,0),e(t,15,0,i.isEnabled(i.viewLayout.Help)),e(t,17,0,!(null!=(n=l.Sb(t,17,0,l.Jb(t,18).transform(i.labels$)))&&n.length)),e(t,20,0,l.Sb(t,20,0,l.Jb(t,21).transform(i.showLabels$))),e(t,23,0,!l.Sb(t,23,0,l.Jb(t,24).transform(i.showLabels$))),e(t,28,0,!l.Sb(t,28,0,l.Jb(t,29).transform(i.canUndo$))),e(t,33,0,!l.Sb(t,33,0,l.Jb(t,34).transform(i.canRedo$))),e(t,38,0,i.breakpoint<=i.breakpointEnum.Medium),e(t,44,0,"chalkboard-teacher"),e(t,48,0,i.breakpoint<=i.breakpointEnum.Medium),e(t,50,0),e(t,63,0,!l.Sb(t,63,0,l.Jb(t,64).transform(i.canTouch$)))}),(function(e,t){var n=t.component;e(t,16,0,l.Jb(t,17).role,l.Jb(t,17)._highlighted,l.Jb(t,17)._triggersSubmenu,l.Jb(t,17)._getTabIndex(),l.Jb(t,17).disabled.toString(),l.Jb(t,17).disabled||null),e(t,25,0,l.Jb(t,26).vertical?"vertical":"horizontal",l.Jb(t,26).vertical,!l.Jb(t,26).vertical,l.Jb(t,26).inset),e(t,27,0,!l.Sb(t,27,0,l.Jb(t,30).transform(n.canUndo$)),l.Jb(t,28).role,l.Jb(t,28)._highlighted,l.Jb(t,28)._triggersSubmenu,l.Jb(t,28)._getTabIndex(),l.Jb(t,28).disabled.toString(),l.Jb(t,28).disabled||null),e(t,32,0,!l.Sb(t,32,0,l.Jb(t,35).transform(n.canRedo$)),l.Jb(t,33).role,l.Jb(t,33)._highlighted,l.Jb(t,33)._triggersSubmenu,l.Jb(t,33)._getTabIndex(),l.Jb(t,33).disabled.toString(),l.Jb(t,33).disabled||null),e(t,39,0,l.Jb(t,40).vertical?"vertical":"horizontal",l.Jb(t,40).vertical,!l.Jb(t,40).vertical,l.Jb(t,40).inset),e(t,41,0,l.Jb(t,42).role,l.Jb(t,42)._highlighted,l.Jb(t,42)._triggersSubmenu,l.Jb(t,42)._getTabIndex(),l.Jb(t,42).disabled.toString(),l.Jb(t,42).disabled||null),e(t,56,0,l.Jb(t,57).role,l.Jb(t,57)._highlighted,l.Jb(t,57)._triggersSubmenu,l.Jb(t,57)._getTabIndex(),l.Jb(t,57).disabled.toString(),l.Jb(t,57).disabled||null),e(t,59,0,l.Jb(t,60).role,l.Jb(t,60)._highlighted,l.Jb(t,60)._triggersSubmenu,l.Jb(t,60)._getTabIndex(),l.Jb(t,60).disabled.toString(),l.Jb(t,60).disabled||null)}))}class _w{constructor(e,t,n,l){this.store=e,this.changeDetectorRef=t,this.layoutService=n,this.viewService=l,this.canExit=!0,this.mode=UO.Main,this.lockMode=!1,this.position="center",this.ngUnsubscribe=new K.a,this.breakpoint=nx,this.viewToolsMode=UO,this.viewLayout=ax,this.testSelectors=NO,this.collapsePagination=!1}ngOnInit(){this.initLayoutListener(),this.initBreakpointListener()}initLayoutListener(){this.store.select($m.getLayout).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.lockMode||(this.mode=UO.Main,this.layoutService.isLayoutVisible(ax.Media)&&(this.mediaTemplate=e.media.template,this.mode=UO.Media),this.layoutService.isToolsVisible()&&(this.mode=UO.Tools),this.changeDetectorRef.markForCheck())})}initBreakpointListener(){this.store.select(ix.getBreakpoint).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.collapsePagination=e<nx.Small,this.changeDetectorRef.markForCheck()})}handleExitClick(){const e=this.store.selectSnapshot($m.getLayout);e.media.status=vm.Hide,e.tools.status=vm.Hide,this.viewService.selectTool(fm.Select),this.store.dispatch(new X.SetLayout(e))}}var yw=l.vb({encapsulation:2,styles:[[".view-toolbar{position:absolute;display:inline-block;z-index:20;bottom:0;right:0}"]],data:{animation:[{type:7,name:"inOutAnimation",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(200px)"},offset:null},{type:4,styles:{type:6,styles:{opacity:1,transform:"*"},offset:null},timings:"300ms ease-in-out"}],options:null},{type:1,expr:":leave",animation:[{type:4,styles:{type:6,styles:{transform:"translateY(200px)",opacity:0},offset:null},timings:"300ms ease-in-out"}],options:null}],options:{}}]}});function Ow(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,7,"div",[["class","view-toolbar"]],[[1,"data-test",0],[24,"@inOutAnimation",0]],null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l.xb(3,0,null,null,4,"app-pillbox",[["name","Primary Toolbar"],["padding","dense"]],null,null,null,LO,JO)),l.wb(4,114688,null,0,IO,[],{padding:[0,"padding"],name:[1,"name"]},null),(e()(),l.xb(5,0,null,0,2,"app-view-tools",[],null,[[null,"modeChange"]],(function(e,t,n){var l=!0;return"modeChange"===t&&(l=!1!==e.component.handleModeChange(n)&&l),l}),fw,VO)),l.Ob(512,null,DO,DO,[Qe.a,l.s]),l.wb(7,245760,null,0,$O,[rx,ox,O.i,l.i,DO],{mode:[0,"mode"],collapsePagination:[1,"collapsePagination"]},{modeChange:"modeChange"})],(function(e,t){var n=t.component;e(t,2,0,"view-toolbar","view-toolbar--"+n.position),e(t,4,0,"dense","Primary Toolbar"),e(t,7,0,n.viewToolsMode.Main,n.collapsePagination)}),(function(e,t){e(t,0,0,t.component.testSelectors.ViewToolbarMain,void 0)}))}function ww(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"div",[["class","view-toolbar"]],[[24,"@inOutAnimation",0]],null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l.xb(3,0,null,null,3,"app-pillbox",[["name","Media Bar"],["padding","dense"]],null,[[null,"exit"]],(function(e,t,n){var l=!0;return"exit"===t&&(l=!1!==e.component.handleExitClick()&&l),l}),LO,JO)),l.wb(4,114688,null,0,IO,[],{canExit:[0,"canExit"],padding:[1,"padding"],name:[2,"name"]},{exit:"exit"}),(e()(),l.xb(5,0,null,0,1,"app-view-media-bar",[],null,null,null,Ix,jx)),l.wb(6,245760,null,0,Cx,[or,rx,ox],{template:[0,"template"]},null)],(function(e,t){var n=t.component;e(t,2,0,"view-toolbar","view-toolbar--"+n.position),e(t,4,0,n.canExit,"dense","Media Bar"),e(t,6,0,n.mediaTemplate)}),(function(e,t){e(t,0,0,void 0)}))}function vw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,7,"div",[["class","view-toolbar"]],[[24,"@inOutAnimation",0]],null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),l.xb(3,0,null,null,4,"app-pillbox",[["name","Explore Tools"],["padding","dense"]],null,[[null,"exit"]],(function(e,t,n){var l=!0;return"exit"===t&&(l=!1!==e.component.handleExitClick()&&l),l}),LO,JO)),l.wb(4,114688,null,0,IO,[],{canExit:[0,"canExit"],padding:[1,"padding"],name:[2,"name"]},{exit:"exit"}),(e()(),l.xb(5,0,null,0,2,"app-view-tools",[],null,null,null,fw,VO)),l.Ob(512,null,DO,DO,[Qe.a,l.s]),l.wb(7,245760,null,0,$O,[rx,ox,O.i,l.i,DO],{mode:[0,"mode"]},null)],(function(e,t){var n=t.component;e(t,2,0,"view-toolbar","view-toolbar--"+n.position),e(t,4,0,n.canExit,"dense","Explore Tools"),e(t,7,0,n.viewToolsMode.Tools)}),(function(e,t){e(t,0,0,void 0)}))}function Cw(e){return l.Tb(2,[l.Pb(671088640,1,{viewToolbar:0}),(e()(),l.xb(1,0,null,null,7,null,null,null,null,null,null,null)),l.wb(2,16384,null,0,se.q,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l.nb(16777216,null,null,1,null,Ow)),l.wb(4,16384,null,0,se.s,[l.S,l.P,se.q],null,null),(e()(),l.nb(16777216,null,null,1,null,ww)),l.wb(6,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,vw)),l.wb(8,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.mode),e(t,6,0,n.viewToolsMode.Media),e(t,8,0,n.viewToolsMode.Tools)}),null)}let jw=(()=>{class e{constructor(){this.logoSize="full",this.logoColor="color",this.isLight=!0,this.breakpoint=nx,this.ngUnsubscribe=new K.a}ngOnInit(){}}return Object(y.__decorate)([Object(O.e)($m.getLayout),Object(y.__metadata)("design:type",Z.a)],e.prototype,"layout$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterBackground),Object(y.__metadata)("design:type",Z.a)],e.prototype,"background$",void 0),Object(y.__decorate)([Object(O.e)(ix.getBreakpoint),Object(y.__metadata)("design:type",Z.a)],e.prototype,"breakpoint$",void 0),e})();var kw=l.vb({encapsulation:2,styles:[[".view-logo--small-color{width:28px;height:44px;background:url(logo-color.e5306d37dd40b7ac98d4.svg) center center no-repeat}.view-logo--full-color{width:112px;height:44px;background:url(powered-by-biodigital-color.1af4a9f2cdc7d71b94c9.svg) center center no-repeat}.view-logo--small-white{width:28px;height:44px;background:url(logo-white.6874afd084344cc1654d.svg) center center no-repeat}.view-logo--full-white{width:112px;height:44px;background:url(powered-by-biodigital-white.30ab6344e33c0a48a1fa.svg) center center no-repeat}.view-logo:not([hidden]){display:-webkit-box;display:flex}.view-logo[href]:hover{cursor:pointer}"]],data:{}});function Sw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,5,"a",[["class","view-logo"],["href","https://www.biodigital.com"],["tabindex","-1"],["target","_blank"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(3,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(4,{"view-logo--full-color":0,"view-logo--full-white":1,"view-logo--small-color":2,"view-logo--small-white":3}),(e()(),l.xb(5,0,null,null,1,"span",[["class","visually-hidden"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Powered by Biodigital"]))],(function(e,t){var n=t.component,l=e(t,4,0,"color"===n.logoColor&&"full"===n.logoSize,"white"===n.logoColor&&"full"===n.logoSize,"color"===n.logoColor&&"small"===n.logoSize,"white"===n.logoColor&&"small"===n.logoSize);e(t,3,0,"view-logo",l)}),null)}function Pw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,5,"span",[["class","view-logo"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(3,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(4,{"view-logo--full-color":0,"view-logo--full-white":1,"view-logo--small-color":2,"view-logo--small-white":3}),(e()(),l.xb(5,0,null,null,1,"span",[["class","visually-hidden"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Powered by Biodigital"]))],(function(e,t){var n=t.component,l=e(t,4,0,"color"===n.logoColor&&"full"===n.logoSize,"white"===n.logoColor&&"full"===n.logoSize,"color"===n.logoColor&&"small"===n.logoSize,"white"===n.logoColor&&"small"===n.logoSize);e(t,3,0,"view-logo",l)}),null)}function Mw(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,2,null,Sw)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,Pw)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n,i,a=t.component;e(t,1,0,null==(n=l.Sb(t,1,0,l.Jb(t,2).transform(a.layout$)))?null:n.logo.isHyperLink),e(t,4,0,!(null!=(i=l.Sb(t,4,0,l.Jb(t,5).transform(a.layout$)))&&i.logo.isHyperLink))}),null)}let Tw=(()=>{class e{constructor(e){this.store=e,this.showNav=!0,this.showZoom=!0,this.showPan=!0,this.showResetPosition=!0,this.showResetScene=!0,this.viewLayout=ax,this.toolEnum=fm,this.testSelectors=NO,this.expandNav=!1,this.breakpointEnum=nx,this.padding="none",this.ngUnsubscribe=new K.a}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setZoom(e){let t=""===e?0:8;this.store.dispatch(new tm(t="in"===e?-t:t))}returnToChapterCamera(){const e=this.store.selectSnapshot(Nr.getSelectedChapter);this.store.dispatch(new Zh(e.camera.location))}resetChapter(){this.returnToChapterCamera();const e=this.store.selectSnapshot(Nr.getSelectedChapterId);this.store.dispatch(new $s.UndoAll(e)),this.store.dispatch(new Bs.UpdateNodesChecked(!1)),this.store.dispatch(new Oa)}centerCamera(){this.store.dispatch(new ki)}togglePan(){const e="pan"===this.store.selectSnapshot(xm.getPanMode)?"rotate":"pan";this.store.dispatch(new cm(e))}toggleNav(){this.expandNav=!this.expandNav}}return Object(y.__decorate)([Object(O.e)(xm.getPanMode),Object(y.__metadata)("design:type",Z.a)],e.prototype,"panMode$",void 0),Object(y.__decorate)([Object(O.e)(BO.canUndo),Object(y.__metadata)("design:type",Z.a)],e.prototype,"canResetChapter$",void 0),Object(y.__decorate)([Object(O.e)(ix.getBreakpoint),Object(y.__metadata)("design:type",Z.a)],e.prototype,"breakpoint$",void 0),e})();var Iw=l.vb({encapsulation:2,styles:[[":host{position:relative}.camera-bar{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}.camera-bar button:not(:first-child){margin-top:4px}.camera-bar__nav{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;overflow:hidden;-webkit-transition:height 150ms ease-in-out;transition:height 150ms ease-in-out;-webkit-box-pack:justify;justify-content:space-between}"]],data:{animation:[{type:7,name:"expand",definitions:[{type:1,expr:":enter",animation:[{type:2,steps:[{type:6,styles:{height:0},offset:null},{type:4,styles:{type:6,styles:{height:"*"},offset:null},timings:"150ms ease-in-out"}],options:null}],options:null},{type:1,expr:":leave",animation:[{type:2,steps:[{type:4,styles:{type:6,styles:{height:"0"},offset:null},timings:"150ms ease-in-out"}],options:null}],options:null}],options:{}},{type:7,name:"show",definitions:[{type:1,expr:":enter",animation:[{type:2,steps:[{type:6,styles:{height:"0"},offset:null},{type:4,styles:{type:6,styles:{height:"*"},offset:null},timings:"125ms ease-in-out"}],options:null}],options:null},{type:1,expr:":leave",animation:[{type:2,steps:[{type:4,styles:{type:6,styles:{height:"0"},offset:null},timings:"125ms 125ms ease-in-out"}],options:null}],options:null}],options:{}}]}});function Jw(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,5,"button",[["app-pin-button",""],["buttonType","ghost"],["icon","arrows-alt"],["matTooltipPosition","left"],["size","medium"]],[[1,"tabindex",0],[1,"aria-label",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.togglePan()&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),l.Lb(131072,se.b,[l.i]),l.wb(3,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"],buttonType:[2,"buttonType"],selected:[3,"selected"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,1,0,"left","pan"===l.Sb(t,1,1,l.Jb(t,2).transform(n.panMode$))?"Switch to Rotate Mode":"Switch to Pan Mode"),e(t,3,0,"arrows-alt","medium","ghost","pan"===l.Sb(t,3,3,l.Jb(t,4).transform(n.panMode$)))}),(function(e,t){var n=t.component;e(t,0,0,n.expandNav?0:-1,"pan"===l.Sb(t,0,1,l.Jb(t,5).transform(n.panMode$))?"Switch to Rotate Mode":"Switch to Pan Mode")}))}function zw(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,2,"button",[["app-pin-button",""],["aria-label","Zoom In"],["buttonType","ghost"],["icon","plus"],["matTooltip","Zoom In"],["matTooltipPosition","left"],["size","medium"]],[[1,"tabindex",0]],[[null,"touchstart"],[null,"mousedown"],[null,"touchend"],[null,"mouseup"],[null,"mouseleave"],[null,"longpress"],[null,"keydown"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"touchstart"===t&&(i=!1!==a.setZoom("in")&&i),"mousedown"===t&&(i=!1!==a.setZoom("in")&&i),"touchend"===t&&(i=!1!==a.setZoom("")&&i),"mouseup"===t&&(i=!1!==a.setZoom("")&&i),"mouseleave"===t&&(i=!1!==a.setZoom("")&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),l.wb(2,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"],buttonType:[2,"buttonType"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,1,0,"left","Zoom In"),e(t,2,0,"plus","medium","ghost")}),(function(e,t){e(t,0,0,t.component.expandNav?0:-1)}))}function Lw(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,2,"button",[["app-pin-button",""],["aria-label","Zoom Out"],["buttonType","ghost"],["icon","minus"],["matTooltip","Zoom Out"],["matTooltipPosition","left"],["size","medium"]],[[1,"tabindex",0]],[[null,"touchstart"],[null,"mousedown"],[null,"touchend"],[null,"mouseup"],[null,"mouseleave"],[null,"longpress"],[null,"keydown"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"touchstart"===t&&(i=!1!==a.setZoom("out")&&i),"mousedown"===t&&(i=!1!==a.setZoom("out")&&i),"touchend"===t&&(i=!1!==a.setZoom("")&&i),"mouseup"===t&&(i=!1!==a.setZoom("")&&i),"mouseleave"===t&&(i=!1!==a.setZoom("")&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),l.wb(2,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"],buttonType:[2,"buttonType"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,1,0,"left","Zoom Out"),e(t,2,0,"minus","medium","ghost")}),(function(e,t){e(t,0,0,t.component.expandNav?0:-1)}))}function Ew(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,2,"button",[["app-pin-button",""],["aria-label","Recenter 3D model"],["buttonType","ghost"],["icon","dot-circle"],["matTooltip","Recenter 3D model"],["matTooltipPosition","left"],["size","medium"]],[[1,"tabindex",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.returnToChapterCamera()&&i),i}),_x,hx)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),l.wb(2,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"],buttonType:[2,"buttonType"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,1,0,"left","Recenter 3D model"),e(t,2,0,"dot-circle","medium","ghost")}),(function(e,t){e(t,0,0,t.component.expandNav?0:-1)}))}function Aw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,8,"div",[["class","camera-bar__nav"]],[[24,"@expand",0]],null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Jw)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,zw)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Lw)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Ew)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.showPan),e(t,4,0,n.showZoom),e(t,6,0,n.showZoom),e(t,8,0,n.showResetPosition)}),(function(e,t){e(t,0,0,void 0)}))}function Fw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"app-pillbox",[["orientation","vertical"],["padding","dense"]],[[1,"data-test",0]],null,null,LO,JO)),l.wb(1,114688,null,0,IO,[],{padding:[0,"padding"],orientation:[1,"orientation"]},null),(e()(),l.nb(16777216,null,0,1,null,Aw)),l.wb(3,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(4,16777216,null,0,2,"button",[["app-pin-button",""],["buttonType","ghost"],["icon","location-arrow"],["matTooltipPosition","left"],["size","medium"],["tabindex","0"]],[[1,"aria-label",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,5).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,5)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,5)._handleTouchend()&&i),"click"===t&&(i=!1!==a.toggleNav()&&i),i}),_x,hx)),l.wb(5,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),l.wb(6,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"],buttonType:[2,"buttonType"],selected:[3,"selected"]},null)],(function(e,t){var n=t.component;e(t,1,0,"dense","vertical"),e(t,3,0,n.expandNav),e(t,5,0,"left",n.expandNav?"Close 3D controls":"Expand 3D controls"),e(t,6,0,"location-arrow","medium","ghost",n.expandNav)}),(function(e,t){var n=t.component;e(t,0,0,n.testSelectors.EngineCameraBar),e(t,4,0,n.expandNav?"Close 3D controls":"Expand 3D controls")}))}function Rw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,4,"app-pillbox",[["padding","dense"],["style","margin-top: 8px"]],[[24,"@show",0]],null,null,LO,JO)),l.wb(2,114688,null,0,IO,[],{padding:[0,"padding"]},null),(e()(),l.xb(3,16777216,null,0,2,"button",[["app-pin-button",""],["aria-label","Reset Chapter"],["buttonType","ghost"],["data-test","resetChapterBtn"],["icon","sync-alt"],["matTooltip","Reset Chapter"],["matTooltipPosition","left"],["size","medium"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,4).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,4)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,4)._handleTouchend()&&i),"click"===t&&(i=!1!==a.resetChapter()&&i),i}),_x,hx)),l.wb(4,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),l.wb(5,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"],buttonType:[2,"buttonType"]},null)],(function(e,t){e(t,2,0,"dense"),e(t,4,0,"left","Reset Chapter"),e(t,5,0,"sync-alt","medium","ghost")}),(function(e,t){e(t,1,0,void 0)}))}function Dw(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,5,"div",[["class","camera-bar"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Fw)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,2,null,Rw)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,2,0,n.showNav),e(t,4,0,n.showResetScene&&l.Sb(t,4,0,l.Jb(t,5).transform(n.canResetChapter$)))}),null)}var Uw,Nw,Hw=n("GS7A");(Nw=Uw||(Uw={})).slideTransition=Object(Hw.g)([Object(Hw.m)({transform:"translateY({{ from }}%)",opacity:0}),Object(Hw.e)("{{ duration }}ms ease-out",Object(Hw.m)({transform:"translateY({{ to }})",opacity:1}))]),Nw.fadeIn=Object(Hw.g)([Object(Hw.m)({opacity:"*"}),Object(Hw.e)("{{ duration }}ms ease-out",Object(Hw.m)({opacity:1}))]),Nw.fadeOut=Object(Hw.g)([Object(Hw.m)({opacity:"*"}),Object(Hw.e)("{{ duration }}ms ease-in",Object(Hw.m)({opacity:0}))]);let Bw=(()=>{class e{constructor(e){this.viewService=e,this.layout="drawer"}ngOnInit(){}handleCloseClick(){this.viewService.clearSelectedLabel()}}return Object(y.__decorate)([Object(O.e)(Br.getSelectedLabel),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedLabel$",void 0),e})();var $w=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.view-label-description{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.view-label-description__header{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start}.view-label-description .view-label-description__title{font-size:14px;letter-spacing:.35px;line-height:1.4em;font-weight:700;align-self:center}.view-label-description .view-label-description__body{margin-top:8px;font-size:12px;letter-spacing:.3px;line-height:1.4em}"]],data:{animation:[{type:7,name:"refresh",definitions:[{type:1,expr:":enter",animation:[{type:10,animation:Uw.slideTransition,options:{params:{duration:300,from:50,to:0}}}],options:null}],options:{}}]}});function Vw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"div",[["class","view-label-description__body"]],null,null,null,null,null)),(e()(),l.Rb(1,null,[" "," "])),l.Lb(131072,se.b,[l.i])],null,(function(e,t){var n,i=t.component;e(t,1,0,null==(n=l.Sb(t,1,0,l.Jb(t,2).transform(i.selectedLabel$)))?null:n.description)}))}function Ww(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,12,"div",[["class","view-label-description"]],[[24,"@refresh",0]],null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"view-label-description--layout-column":0,"view-label-description--layout-drawer":1}),(e()(),l.xb(4,0,null,null,5,"div",[["class","view-label-description__header"]],null,null,null,null,null)),(e()(),l.xb(5,0,null,null,1,"button",[["app-pin-button",""],["class","mr-1"],["icon","arrow-left"],["size","small"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCloseClick()&&l),l}),_x,hx)),l.wb(6,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"]},null),(e()(),l.xb(7,0,null,null,2,"div",[["class","view-label-description__title"]],null,null,null,null,null)),(e()(),l.Rb(8,null,[" "," "])),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,Vw)),l.wb(11,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n,i=t.component,a=e(t,3,0,"column"===i.layout,"drawer"===i.layout);e(t,2,0,"view-label-description",a),e(t,6,0,"arrow-left","small"),e(t,11,0,null==(n=l.Sb(t,11,0,l.Jb(t,12).transform(i.selectedLabel$)))?null:n.description)}),(function(e,t){var n,i=t.component;e(t,0,0,void 0),e(t,8,0,null==(n=l.Sb(t,8,0,l.Jb(t,9).transform(i.selectedLabel$)))?null:n.title)}))}const Gw=64,qw=.4;let Xw=(()=>{class e{constructor(e,t,n,i,a){this.renderer=e,this.changeDetectorRef=t,this.viewService=n,this.store=i,this.layoutService=a,this.offsetYChange=new l.n,this.breakpoints={minimumDrawer:{velocity:1/0,point:0},halfDrawer:{velocity:1,point:0}},this.ngUnsubscribe=new K.a,this.viewMode=Vm,this.viewToolsMode=UO,this.mode=Vm.Content,this.open=!1}get expandable(){return"full"===this.layoutService.getVisibleContent()||this.mode===Vm.LabelInfo||this.mode===Vm.NodeInfo||this.open}ngOnInit(){this.initWindowSizeObserver(),this.initLayoutObserver()}ngAfterViewInit(){this.refresh(this.store.selectSnapshot($m.getLayout).drawer.isExpandedInitially)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initWindowSizeObserver(){this.renderer.listen("window","resize",()=>{this.refresh(!1)})}initLayoutObserver(){this.layout$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.updateMode(e)})}updateViewHeight(){const e=.01*window.innerHeight;this.viewDrawer.nativeElement.style.setProperty("--vh",`${e}px`)}updateStops(){const e=window.innerHeight;this.breakpoints.minimumDrawer.point=-Gw,this.breakpoints.halfDrawer.point=Math.floor(-e*qw)}updateMode(e){this.mode=this.viewService.inferDrawerMode(e),this.changeDetectorRef.markForCheck()}resetDrawerPosition(e){setTimeout(()=>{this.slideDrawerToPoint(e?this.breakpoints.halfDrawer.point:this.breakpoints.minimumDrawer.point)})}refresh(e){setTimeout(()=>{this.updateViewHeight(),this.updateStops(),this.resetDrawerPosition(e)})}handleClick(){!this.open&&this.expandable&&this.toggleDrawer(!0)}handleToggleClick(){this.toggleDrawer()}toggleDrawer(e){null==e&&(e=!this.open),this.slideDrawerToPoint((e?this.breakpoints.halfDrawer:this.breakpoints.minimumDrawer).point),this.open=e}slideDrawerToPoint(e){this.renderer.setStyle(this.viewDrawer.nativeElement,"transform",`translate3d(0, ${e}px, 0)`),this.offsetYChange.emit(e)}getDrawerY(){if(this.viewDrawer){const e=this.viewService.getComputedTransform(this.viewDrawer.nativeElement);return e?e.y:null}return null}}return Object(y.__decorate)([Object(O.e)($m.getLayout),Object(y.__metadata)("design:type",Z.a)],e.prototype,"layout$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterIndex),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapterIndex$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getChapterCount),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapterCount$",void 0),e})();var Kw=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.view-drawer{border-top:rgba(234,239,245,.8);box-shadow:0 -1px 0 0 rgba(28,42,63,.16);background:rgba(255,255,255,.8);color:#131c2a;border-top:var(--view-drawer-border);box-shadow:var(--view-drawer-shadow);background:var(--view-drawer-background);color:var(--view-drawer-color);left:0;min-height:100vh;right:0;position:absolute;z-index:20;top:100vh;top:calc(var(--vh,1vh) * 100);-webkit-transform:translate3d(0,-64px,0);transform:translate3d(0,-64px,0);-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}.view-drawer--animate{-webkit-transition:background-color 1s ease-in-out;transition:background-color 1s ease-in-out}.view-drawer--active{background-color:#fff;background-color:var(--view-drawer-background--active)}.view-drawer--active .view-drawer__toggle{height:40px}.view-drawer--closed{background-color:#fff;background-color:var(--view-drawer-background--closed);-webkit-transition:background-color 150ms;transition:background-color 150ms}.view-drawer--scrollable{min-height:0}.view-drawer--scrollable .view-drawer__outer{height:40vh;height:calc(var(--vh,1vh) * 40);overflow-y:scroll}.view-drawer--fixed{height:64px;overflow:hidden}.view-drawer--fixed .view-drawer__inner{height:64px;padding:0 16px}.view-drawer--fixed .view-drawer__content{-webkit-box-pack:center;justify-content:center;padding-top:0}.view-drawer__toggle{position:absolute;left:0;top:0;right:0;height:64px;margin:0 48px;z-index:10;font-size:14px;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;color:#d7e0ea;color:var(--view-drawer-toggle-color)}.view-drawer__toggle:hover{cursor:pointer;color:#101823;color:var(--view-drawer-toggle-color--hover)}.view-drawer__toggle-bar{background-color:#fff;height:16px;width:100%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;pointer-events:none}.view-drawer__inner{position:relative;padding:0 16px}.view-drawer__content{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;max-width:600px;min-height:64px;margin:0 auto}"]],data:{}});function Zw(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,1,"div",[["class","view-drawer__toggle"],["matTooltipPosition","above"],["role","button"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleToggleClick()&&i),i}),null,null)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){e(t,1,0,"above",t.component.open?"Collapse Description":"Expand Description")}),null)}function Yw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-icon",[["icon","caret-up"]],null,null,null,he,ge)),l.wb(1,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){e(t,1,0,"caret-up")}),null)}function Qw(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-icon",[["icon","caret-down"]],null,null,null,he,ge)),l.wb(1,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){e(t,1,0,"caret-down")}),null)}function ev(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["class","view-drawer__toggle-bar"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Yw)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Qw)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,!n.open),e(t,4,0,n.open)}),null)}function tv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"div",[["class","view-drawer__content"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-view-node-description",[["layout","drawer"]],null,null,null,yO,mO)),l.wb(2,245760,null,0,hO,[O.i,O.b,l.i],{layout:[0,"layout"]},null)],(function(e,t){e(t,2,0,"drawer")}),null)}function nv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"div",[["class","view-drawer__content"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-view-label-description",[["layout","drawer"]],null,null,null,Ww,$w)),l.wb(2,114688,null,0,Bw,[rx],{layout:[0,"layout"]},null)],(function(e,t){e(t,2,0,"drawer")}),null)}function lv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-content-mode",[["layout","drawer"]],null,null,null,gy,ry)),l.wb(1,245760,null,0,sy,[O.i,rx,ox,l.i],{layout:[0,"layout"]},null)],(function(e,t){e(t,1,0,"drawer")}),null)}function iv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-title",[["alignTitle","center"]],null,null,null,B_,H_)),l.wb(1,245760,null,0,N_,[ox,l.i],{alignTitle:[0,"alignTitle"]},null)],(function(e,t){e(t,1,0,"center")}),null)}function av(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["class","view-drawer__content"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,lv)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,iv)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.expandable),e(t,4,0,!n.expandable)}),null)}function ov(e){return l.Tb(2,[l.Pb(671088640,1,{viewDrawer:0}),(e()(),l.xb(1,0,[[1,0],["viewDrawer",1]],null,16,"div",[["class","view-drawer"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(3,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(4,{"view-drawer--closed":0,"view-drawer--active":1,"view-drawer--scrollable":2,"view-drawer--fixed":3}),(e()(),l.nb(16777216,null,null,1,null,Zw)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,ev)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(9,0,null,null,8,"div",[["class","view-drawer__outer"]],null,null,null,null,null)),(e()(),l.xb(10,0,null,null,7,"div",[["class","view-drawer__inner"]],null,null,null,null,null)),l.wb(11,16384,null,0,se.q,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l.nb(16777216,null,null,1,null,tv)),l.wb(13,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,nv)),l.wb(15,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,av)),l.wb(17,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(e,t){var n=t.component,l=e(t,4,0,!n.open,n.open,n.open,!n.expandable);e(t,3,0,"view-drawer",l),e(t,6,0,n.expandable),e(t,8,0,n.expandable),e(t,11,0,n.mode),e(t,13,0,n.viewMode.NodeInfo),e(t,15,0,n.viewMode.LabelInfo),e(t,17,0,n.viewMode.Content)}),null)}var sv=function(e){return e.Left="\u2190",e.Right="\u2192",e.Up="\u2191",e.Down="\u2193",e.Command="\u2318",e}({});class rv{constructor(){this.shortcutGroups=[{label:"Navigation",shortcuts:[{keys:[",","Pg-Up"],label:"Previous chapter"},{keys:[".","Pg-Down"],label:"Next chapter"},{keys:["/"],label:"Open Search"},{keys:["Ctrl + Enter"],label:"Enter Fullscreen"}]},{label:"Tools",shortcuts:[{keys:["1"],label:'Use "Select" tool'},{keys:["2"],label:'Use "Hide" tool'},{keys:["3"],label:'Use "Fade" tool'},{keys:["del","backspace"],label:"Hide selected structure"},{keys:["Shift + R"],label:"Reset chapter"},{keys:["Ctrl/Cmd + Z"],label:"Undo"},{keys:["Ctrl/Cmd + Shift + Z","Ctrl/Cmd + Y"],label:"Redo"}]},{label:"Pan",shortcuts:[{keys:["W"],label:"Pan up"},{keys:["S"],label:"Pan down"},{keys:["A"],label:"Pan left"},{keys:["D"],label:"Pan right"},{keys:["Shift + W"],label:"Slow pan up"},{keys:["Shift + S"],label:"Slow pan down"},{keys:["Shift + A"],label:"Slow pan left"},{keys:["Shift + D"],label:"Slow pan right"}]},{label:"Rotate",shortcuts:[{keys:[sv.Up],label:"Rotate up"},{keys:[sv.Down],label:"Rotate down"},{keys:[sv.Left],label:"Rotate left"},{keys:[sv.Right],label:"Rotate right"},{keys:[`Shift + ${sv.Up}`],label:"Slow rotate up"},{keys:[`Shift + ${sv.Down}`],label:"Slow rotate down"},{keys:[`Shift + ${sv.Left}`],label:"Slow rotate left"},{keys:[`Shift + ${sv.Right}`],label:"Slow rotate right"}]},{label:"Zoom",shortcuts:[{keys:["C","="],label:"Zoom in"},{keys:["E","-"],label:"Zoom out"},{keys:["Shift + C","Shift + ="],label:"Slow zoom in"},{keys:["Shift + E","Shift + -"],label:"Slow zoom out"}]}]}ngOnInit(){}}var cv=l.vb({encapsulation:0,styles:[[".view-shortcuts[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.view-shortcuts__group[_ngcontent-%COMP%]{width:100%;padding-bottom:32px;margin-top:32px}.view-shortcuts__label[_ngcontent-%COMP%]{padding:8px 0 12px}.view-shortcuts__table[_ngcontent-%COMP%]{width:100%}.view-shortcuts__cell[_ngcontent-%COMP%]{padding:8px;border-bottom:1px solid rgba(255,255,255,.3);width:50%}.view-shortcuts__key[_ngcontent-%COMP%]{border-radius:4px;display:-webkit-inline-box;display:inline-flex;padding:4px;margin-right:4px;background:#000;color:#fff;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;font-family:monospace;font-size:16px}"]],data:{}});function uv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"kbd",[["class","view-shortcuts__key"]],null,null,null,null,null)),(e()(),l.Rb(1,null,["",""]))],null,(function(e,t){e(t,1,0,t.context.$implicit)}))}function pv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,"tr",[["class","view-shortcuts__row"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"td",[["class","view-shortcuts__cell view-shortcuts__cell--label"]],null,null,null,null,null)),(e()(),l.Rb(2,null,["",""])),(e()(),l.xb(3,0,null,null,2,"td",[["class","view-shortcuts__cell view-shortcuts__cell--key"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,uv)),l.wb(5,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,5,0,t.context.$implicit.keys)}),(function(e,t){e(t,2,0,t.context.$implicit.label)}))}function dv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"div",[["class","view-shortcuts__group"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"h2",[["class","view-shortcuts__label text-bold"]],null,null,null,null,null)),(e()(),l.Rb(2,null,["",""])),(e()(),l.xb(3,0,null,null,3,"table",[["class","view-shortcuts__table"]],null,null,null,null,null)),(e()(),l.xb(4,0,null,null,2,"tbody",[],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,pv)),l.wb(6,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,6,0,t.context.$implicit.shortcuts)}),(function(e,t){e(t,2,0,t.context.$implicit.label)}))}function bv(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,2,"div",[["class","view-shortcuts"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,dv)),l.wb(2,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){e(t,2,0,t.component.shortcutGroups)}),null)}let gv=(()=>{class e{constructor(e,t){this.renderer=e,this.viewService=t,this.helpTypeEnum=ee,this.activeTab=ee.Basics}ngOnInit(){this.initWindowSizeObserver()}ngAfterViewInit(){this.updateViewHeight()}initWindowSizeObserver(){this.renderer.listen("window","resize",()=>{this.updateViewHeight()})}updateViewHeight(){const e=.01*window.innerHeight;this.viewHelp.nativeElement.style.setProperty("--vh",`${e}px`)}handleCloseClick(){this.viewService.toggleHelp(!1)}handleTabClick(e){this.activeTab=e}}return Object(y.__decorate)([Object(O.e)($m.getCanTouch),Object(y.__metadata)("design:type",Z.a)],e.prototype,"canTouch$",void 0),e})();var hv=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.view-help{background-color:rgba(16,24,35,.9);color:#fff;background-color:var(--view-help-bg);color:var(--view-help-color);display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;position:fixed;top:0;left:0;right:0;z-index:10000;height:100vh;height:calc(var(--vh,1vh) * 100);max-height:100vh;overflow:auto}.view-help__inner{width:100%;max-width:1140px;height:99vh;height:calc(var(--vh,1vh) * 99);padding:32px;position:relative}.view-help__close{width:40px;height:40px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:fixed;right:8px;top:8px}.view-help__close:hover{cursor:pointer}.view-help__header{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase;border-bottom:1px solid rgba(255,255,255,.3);border-bottom:var(--view-help-border);font-weight:600;padding-bottom:12px;margin-top:32px}.view-help__label{font-size:12px;letter-spacing:.3px;line-height:1.4em;font-weight:600;margin-bottom:12px}.view-help__group{display:-webkit-box;display:flex;justify-content:space-around;flex-wrap:wrap}.view-help__item{font-size:12px;letter-spacing:.3px;line-height:1.4em;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column;text-align:center;padding:20px;-webkit-box-flex:0;flex:0 1 180px}.view-help__image{margin-bottom:16px;width:160px;height:100px;background-position:center center;background-repeat:no-repeat}.view-help__icon{font-size:24px;margin-bottom:16px}.view-help__tabs{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.view-help__tab{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase;border-bottom:2px solid transparent;padding:12px;text-align:center}.view-help__tab:after{content:'';display:block;border-bottom:3px solid #2d72dc;border-bottom:var(--view-help-tab-border);margin-top:4px;width:0;-webkit-transition:250ms;transition:250ms ease}.view-help__tab:hover{cursor:pointer}.view-help__tab--active:after{width:100%}"]],data:{}});function mv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["class","view-help__tab"],["role","button"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.handleTabClick(i.helpTypeEnum.Shortcuts)&&l),l}),null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"view-help__tab--active":0}),(e()(),l.Rb(-1,null,[" Keyboard Shortcuts "]))],(function(e,t){var n=t.component,l=e(t,3,0,n.activeTab===n.helpTypeEnum.Shortcuts);e(t,2,0,"view-help__tab",l)}),null)}function xv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,20,"div",[["class","view-help__group"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,4,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.xb(3,0,null,null,1,"div",[["class","view-help__label"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Rotate the model"])),(e()(),l.Rb(-1,null,[" Click and drag to rotate and view from other angles "])),(e()(),l.xb(6,0,null,null,4,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(7,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.xb(8,0,null,null,1,"div",[["class","view-help__label"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Pan the model"])),(e()(),l.Rb(-1,null,[" Use the W, A, S, D keys to move side to side or up and down "])),(e()(),l.xb(11,0,null,null,4,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(12,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.xb(13,0,null,null,1,"div",[["class","view-help__label"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Zoom in and out"])),(e()(),l.Rb(-1,null,[" Use your scroll wheel or trackpad to zoom in and out "])),(e()(),l.xb(16,0,null,null,4,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(17,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.xb(18,0,null,null,1,"div",[["class","view-help__label"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Explore the anatomy"])),(e()(),l.Rb(-1,null,[" Click on an anatomical structure or label to learn more "]))],null,(function(e,t){e(t,2,0,"url(assets/images/widget/help-rotate.svg)"),e(t,7,0,"url(assets/images/widget/help-pan.svg)"),e(t,12,0,"url(assets/images/widget/help-zoom.svg)"),e(t,17,0,"url(assets/images/widget/help-learn.svg)")}))}function fv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,20,"div",[["class","view-help__group"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,4,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.xb(3,0,null,null,1,"div",[["class","view-help__label"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Rotate the model"])),(e()(),l.Rb(-1,null,[" Use one finger to rotate "])),(e()(),l.xb(6,0,null,null,4,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(7,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.xb(8,0,null,null,1,"div",[["class","view-help__label"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Pan the model"])),(e()(),l.Rb(-1,null,[" Use two fingers to move up and down or side to side "])),(e()(),l.xb(11,0,null,null,4,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(12,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.xb(13,0,null,null,1,"div",[["class","view-help__label"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Zoom in and out"])),(e()(),l.Rb(-1,null,[" Pinch or expand to zoom in and out "])),(e()(),l.xb(16,0,null,null,4,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(17,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.xb(18,0,null,null,1,"div",[["class","view-help__label"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Explore the anatomy"])),(e()(),l.Rb(-1,null,[" Tap a label to learn more and get a closer look "]))],null,(function(e,t){e(t,2,0,"url(assets/images/widget/help-rotate.svg)"),e(t,7,0,"url(assets/images/widget/help-pan.svg)"),e(t,12,0,"url(assets/images/widget/help-zoom.svg)"),e(t,17,0,"url(assets/images/widget/help-learn.svg)")}))}function _v(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,xv)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,fv)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,!l.Sb(t,2,0,l.Jb(t,3).transform(n.canTouch$))),e(t,5,0,l.Sb(t,5,0,l.Jb(t,6).transform(n.canTouch$)))}),null)}function yv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"div",[["class","view-help__header"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Mouse "]))],null,null)}function Ov(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,15,"div",[["class","view-help__group"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Hold left button to rotate "])),(e()(),l.xb(4,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(5,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Hold right button to pan "])),(e()(),l.xb(7,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(8,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Single-click left button to select a structure "])),(e()(),l.xb(10,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(11,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Double-click left button to auto-focus on a structure "])),(e()(),l.xb(13,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(14,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Long-click to fly to a structure "]))],null,(function(e,t){e(t,2,0,"url(assets/images/widget/help-mouse-hold-left.svg)"),e(t,5,0,"url(assets/images/widget/help-mouse-hold-right.svg)"),e(t,8,0,"url(assets/images/widget/help-mouse-single-click-left.svg)"),e(t,11,0,"url(assets/images/widget/help-mouse-double-click-left.svg)"),e(t,14,0,"url(assets/images/widget/help-mouse-long-press-left.svg)")}))}function wv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"div",[["class","view-help__header"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Keyboard "]))],null,null)}function vv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,12,"div",[["class","view-help__group"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Rotate with arrows "])),(e()(),l.xb(4,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(5,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Pan up (W), left (A), down (S), right(D) "])),(e()(),l.xb(7,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(8,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Zoom out (-, C) and zoom in (+, E) "])),(e()(),l.xb(10,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(11,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Hold with any previous key to slow down motion "]))],null,(function(e,t){e(t,2,0,"url(assets/images/widget/help-keyboard-rotate.svg)"),e(t,5,0,"url(assets/images/widget/help-keyboard-pan.svg)"),e(t,8,0,"url(assets/images/widget/help-keyboard-zoom.svg)"),e(t,11,0,"url(assets/images/widget/help-keyboard-slow-motion.svg)")}))}function Cv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Scroll up and down to zoom "]))],null,(function(e,t){e(t,1,0,"url(assets/images/widget/help-trackpad-scroll.svg)")}))}function jv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,46,null,null,null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,yv)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,Ov)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,wv)),l.wb(8,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,vv)),l.wb(11,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(13,0,null,null,1,"div",[["class","view-help__header"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Trackpad "])),(e()(),l.xb(15,0,null,null,12,"div",[["class","view-help__group"]],null,null,null,null,null)),(e()(),l.xb(16,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(17,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Single-tap to auto-focus a structure "])),(e()(),l.xb(19,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(20,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Double-tap to select a structure "])),(e()(),l.xb(22,0,null,null,2,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(23,0,null,null,0,"div",[["class","view-help__image"]],[[4,"backgroundImage",null]],null,null,null,null)),(e()(),l.Rb(-1,null,[" Long-press to fly to a structure "])),(e()(),l.nb(16777216,null,null,2,null,Cv)),l.wb(26,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(28,0,null,null,1,"div",[["class","view-help__header"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" In-App "])),(e()(),l.xb(30,0,null,null,16,"div",[["class","view-help__group"]],null,null,null,null,null)),(e()(),l.xb(31,0,null,null,3,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(32,0,null,null,1,"app-icon",[["class","view-help__icon"],["icon","plus"]],null,null,null,he,ge)),l.wb(33,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.Rb(-1,null,[" Zoom in "])),(e()(),l.xb(35,0,null,null,3,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(36,0,null,null,1,"app-icon",[["class","view-help__icon"],["icon","minus"]],null,null,null,he,ge)),l.wb(37,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.Rb(-1,null,[" Zoom out "])),(e()(),l.xb(39,0,null,null,3,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(40,0,null,null,1,"app-icon",[["class","view-help__icon"],["icon","dot-circle"]],null,null,null,he,ge)),l.wb(41,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.Rb(-1,null,[" Recenter 3D model "])),(e()(),l.xb(43,0,null,null,3,"div",[["class","view-help__item"]],null,null,null,null,null)),(e()(),l.xb(44,0,null,null,1,"app-icon",[["class","view-help__icon"],["icon","arrows"]],null,null,null,he,ge)),l.wb(45,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.Rb(-1,null,[" Pan "]))],(function(e,t){var n=t.component;e(t,2,0,!l.Sb(t,2,0,l.Jb(t,3).transform(n.canTouch$))),e(t,5,0,!l.Sb(t,5,0,l.Jb(t,6).transform(n.canTouch$))),e(t,8,0,!l.Sb(t,8,0,l.Jb(t,9).transform(n.canTouch$))),e(t,11,0,!l.Sb(t,11,0,l.Jb(t,12).transform(n.canTouch$))),e(t,26,0,!l.Sb(t,26,0,l.Jb(t,27).transform(n.canTouch$))),e(t,33,0,"plus"),e(t,37,0,"minus"),e(t,41,0,"dot-circle"),e(t,45,0,"arrows")}),(function(e,t){e(t,17,0,"url(assets/images/widget/help-trackpad-single-tap.svg)"),e(t,20,0,"url(assets/images/widget/help-trackpad-double-tap.svg)"),e(t,23,0,"url(assets/images/widget/help-trackpad-long-press.svg)")}))}function kv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-shortcuts",[],null,null,null,bv,cv)),l.wb(1,114688,null,0,rv,[],null,null)],(function(e,t){e(t,1,0)}),null)}function Sv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,kv)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,!l.Sb(t,2,0,l.Jb(t,3).transform(n.canTouch$)))}),null)}function Pv(e){return l.Tb(2,[l.Pb(402653184,1,{viewHelp:0}),(e()(),l.xb(1,0,[[1,0],["viewHelp",1]],null,25,"div",[["class","view-help"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,24,"div",[["class","view-help__inner"]],null,null,null,null,null)),l.wb(3,16384,null,0,se.q,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l.xb(4,0,null,null,2,"div",[["class","view-help__close"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCloseClick()&&l),l}),null,null)),(e()(),l.xb(5,0,null,null,1,"app-icon",[["icon","times"]],null,null,null,he,ge)),l.wb(6,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(7,0,null,null,13,"div",[["class","view-help__tabs"]],null,null,null,null,null)),(e()(),l.xb(8,0,null,null,4,"div",[["class","view-help__tab"],["role","button"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.handleTabClick(i.helpTypeEnum.Basics)&&l),l}),null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(10,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(11,{"view-help__tab--active":0}),(e()(),l.Rb(-1,null,[" Navigation Basics "])),(e()(),l.xb(13,0,null,null,4,"div",[["class","view-help__tab"],["role","button"]],null,[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.handleTabClick(i.helpTypeEnum.All)&&l),l}),null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(15,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(16,{"view-help__tab--active":0}),(e()(),l.Rb(-1,null,[" All Controls "])),(e()(),l.nb(16777216,null,null,2,null,mv)),l.wb(19,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,1,null,_v)),l.wb(22,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,jv)),l.wb(24,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,Sv)),l.wb(26,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(e,t){var n=t.component;e(t,3,0,n.activeTab),e(t,6,0,"times");var i=e(t,11,0,n.activeTab===n.helpTypeEnum.Basics);e(t,10,0,"view-help__tab",i);var a=e(t,16,0,n.activeTab===n.helpTypeEnum.All);e(t,15,0,"view-help__tab",a),e(t,19,0,!l.Sb(t,19,0,l.Jb(t,20).transform(n.canTouch$))),e(t,22,0,n.helpTypeEnum.Basics),e(t,24,0,n.helpTypeEnum.All),e(t,26,0,n.helpTypeEnum.Shortcuts)}),null)}class Mv{constructor(e,t){this.renderer=e,this.changeDetectorRef=t,this.ngUnsubscribe=new K.a,this._show=!1,this._percent=0,this._label=""}get show(){return this._show}set show(e){setTimeout(()=>{this._show=e,this.changeDetectorRef.markForCheck()})}get percent(){return Math.floor(this._percent)}set percent(e){null!=e&&(this._percent=e,this.setProgress(this.percent))}get label(){return this._label}set label(e){this._label=e}ngOnInit(){this.initSizeObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.updateDimensions()}initSizeObserver(){Object(Zd.a)(window,"resize").pipe(Object(Qo.a)(10),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.updateDimensions()})}calculateRadius(){return this.getCircleWidth()/2}getCircleWidth(){return this.circleRef.nativeElement.offsetWidth}getRadius(){return this.progressCircleRef.nativeElement.r.baseVal.value}getCircumference(){return 2*this.getRadius()*Math.PI}getOffset(e=100){const t=this.getCircumference();return t-e/100*t}setProgress(e){e>=100&&(e=100);const t=this.getCircumference(),n=this.getOffset(e);this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${t} ${t}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",`${n}`)}updateDimensions(){const e=this.calculateRadius();this.renderer.setAttribute(this.progressContainerRef.nativeElement,"width",`${2*e}`),this.renderer.setAttribute(this.progressContainerRef.nativeElement,"height",`${2*e}`),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"r",`${e-6}`),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"cx",`${e}`),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"cy",`${e}`);const t=this.getCircumference();this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${t} ${t}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",`${t}`),setTimeout(()=>{this.renderer.setStyle(this.progressCircleRef.nativeElement,"transition","stroke-dashoffset 300ms")})}}var Tv=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}.view-progress[_ngcontent-%COMP%]{--circleSize:35vw;pointer-events:none;position:absolute;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;left:0;right:0;top:0;bottom:0;z-index:1000;-webkit-transition:background-color 150ms;transition:background-color 150ms}.view-progress--active[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.2)}.view-progress__circle[_ngcontent-%COMP%]{-webkit-transform:scale(0);transform:scale(0);width:var(--circleSize);height:var(--circleSize);border-radius:50%;background-color:var(--view-progress-bg);display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:relative}.view-progress__count[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em;color:var(--view-progress-primary-color);font-weight:700}.view-progress__label[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em;color:var(--view-progress-secondary-color)}.view-progress__ring[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:3;stroke-dashoffset:0;stroke-width:4;stroke:var(--view-progress-secondary-color);fill:transparent;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}@media (min-width:600px){.view-progress__circle[_ngcontent-%COMP%]{width:160px;height:160px}}"]],data:{animation:[{type:7,name:"isOpen",definitions:[{type:0,name:"open",styles:{type:6,styles:{transform:"scale(1)"},offset:null},options:void 0},{type:0,name:"closed",styles:{type:6,styles:{transform:"scale(0)"},offset:null},options:void 0},{type:1,expr:"closed => open",animation:[{type:4,styles:null,timings:"300ms ease-out"}],options:null},{type:1,expr:"open => closed",animation:[{type:4,styles:null,timings:"150ms ease-in"}],options:null}],options:{}}]}});function Iv(e){return l.Tb(2,[l.Pb(402653184,1,{circleRef:0}),l.Pb(402653184,2,{progressCircleRef:0}),l.Pb(402653184,3,{progressContainerRef:0}),(e()(),l.xb(3,0,null,null,10,"div",[["class","view-progress"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(5,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(6,{"view-progress--active":0}),(e()(),l.xb(7,0,[[1,0],["circle",1]],null,6,"div",[["class","view-progress__circle"]],[[24,"@isOpen",0]],null,null,null,null)),(e()(),l.xb(8,0,[[3,0],["progressContainer",1]],null,1,":svg:svg",[["class","view-progress__ring"]],null,null,null,null,null)),(e()(),l.xb(9,0,[[2,0],["progressCircle",1]],null,0,":svg:circle",[["class","view-progress__ring-inner"]],null,null,null,null,null)),(e()(),l.xb(10,0,null,null,1,"div",[["class","view-progress__count"]],null,null,null,null,null)),(e()(),l.Rb(11,null,[" ","% "])),(e()(),l.xb(12,0,null,null,1,"div",[["class","view-progress__label"]],null,null,null,null,null)),(e()(),l.Rb(13,null,[" "," "]))],(function(e,t){var n=e(t,6,0,t.component.show);e(t,5,0,"view-progress",n)}),(function(e,t){var n=t.component;e(t,7,0,n.show?"open":"closed"),e(t,11,0,n.percent),e(t,13,0,n.label)}))}class Jv{constructor(e){this.renderer=e,this.ngUnsubscribe=new K.a,this._percent=0}get percent(){return this._percent}set percent(e){null!=e&&(this._percent=e,this.setProgress(this.percent))}ngOnInit(){this.initSizeObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.updateDimensions()}initSizeObserver(){Object(Zd.a)(window,"resize").pipe(Object(Qo.a)(10),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.updateDimensions()})}calculateRadius(){return this.getCircleWidth()/2}getCircleWidth(){return this.circleRef.nativeElement.offsetWidth}getRadius(){return this.progressCircleRef.nativeElement.r.baseVal.value}getCircumference(){return 2*this.getRadius()*Math.PI}getOffset(e=100){const t=this.getCircumference();return t-e/100*t}setProgress(e=0){e>=100&&(e=100);const t=this.getCircumference(),n=this.getOffset(e);this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${t} ${t}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",`${n}`)}updateDimensions(){const e=this.calculateRadius();this.renderer.setAttribute(this.progressContainerRef.nativeElement,"width",`${2*e}`),this.renderer.setAttribute(this.progressContainerRef.nativeElement,"height",`${2*e}`),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"r",`${e-6}`),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"cx",`${e}`),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"cy",`${e}`);const t=this.getCircumference();this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${t} ${t}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",`${t}`),setTimeout(()=>{this.renderer.setStyle(this.progressCircleRef.nativeElement,"transition","stroke-dashoffset 300ms")})}}var zv=l.vb({encapsulation:0,styles:[[".play-loader[_ngcontent-%COMP%]{--buttonSize:35vw;background:rgba(0,0,0,.2);display:-webkit-box;display:flex;position:fixed;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;top:0;bottom:0;left:0;right:0;-webkit-transition:background-color 250ms,opacity 250ms;transition:background-color 250ms,opacity 250ms;z-index:10000}.play-loader[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:var(--view-loader-scrim-bg--hover)}.play-loader[_ngcontent-%COMP%]:hover   .play-loader__circle[_ngcontent-%COMP%]{background:var(--view-loader-button-bg--hover);color:var(--view-loader-circle-color--hover);-webkit-transform:scale(1.1);transform:scale(1.1)}.play-loader[_ngcontent-%COMP%]:hover   .play-loader__icon[_ngcontent-%COMP%]{color:var(--view-loader-icon-color--hover);-webkit-transform:scale(1.2);transform:scale(1.2)}.play-loader[_ngcontent-%COMP%]:hover   .play-loader__label[_ngcontent-%COMP%]{color:var(--view-loader-label-color--hover)}.play-loader[_ngcontent-%COMP%]:hover   .play-loader__ring[_ngcontent-%COMP%]{stroke:var(--view-loader-progress-color--hover)}.play-loader__circle[_ngcontent-%COMP%]{width:var(--buttonSize);height:var(--buttonSize);border-radius:50%;background-color:var(--view-loader-button-bg);color:var(--view-loader-circle-color);display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;position:relative;-webkit-transition:background-color 250ms,color 250ms,-webkit-transform 250ms;transition:background-color 250ms,color 250ms,-webkit-transform 250ms;transition:background-color 250ms,color 250ms,transform 250ms;transition:background-color 250ms,color 250ms,transform 250ms,-webkit-transform 250ms}.play-loader__icon[_ngcontent-%COMP%]{font-size:calc(var(--buttonSize)/ 2);color:var(--view-loader-icon-color);-webkit-transition:color 250ms,-webkit-transform 250ms;transition:color 250ms,-webkit-transform 250ms;transition:color 250ms,transform 250ms;transition:color 250ms,transform 250ms,-webkit-transform 250ms;margin-right:-10%}.play-loader__label[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;z-index:2;font-weight:600}.play-loader__ring[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:3;stroke-width:4;stroke:var(--view-loader-progress-color);fill:transparent;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}@media (min-width:600px){.play-loader__circle[_ngcontent-%COMP%]{width:160px;height:160px}.play-loader__icon[_ngcontent-%COMP%]{font-size:80px}}"]],data:{}});function Lv(e){return l.Tb(2,[l.Pb(402653184,1,{circleRef:0}),l.Pb(402653184,2,{progressCircleRef:0}),l.Pb(402653184,3,{progressContainerRef:0}),(e()(),l.xb(3,0,null,null,7,"div",[["class","play-loader"]],null,null,null,null,null)),(e()(),l.xb(4,0,[[1,0],["circle",1]],null,6,"div",[["class","play-loader__circle"]],null,null,null,null,null)),(e()(),l.xb(5,0,[[3,0],["progressContainer",1]],null,1,":svg:svg",[["class","play-loader__ring"]],null,null,null,null,null)),(e()(),l.xb(6,0,[[2,0],["progressCircle",1]],null,0,":svg:circle",[["class","play-loader__ring-inner"]],null,null,null,null,null)),(e()(),l.xb(7,0,null,null,1,"app-icon",[["class","play-loader__icon"],["icon","play"]],null,null,null,he,ge)),l.wb(8,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(9,0,null,null,1,"div",[["class","play-loader__label"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["3D"]))],(function(e,t){e(t,8,0,"play")}),null)}class Ev{constructor(){}ngOnInit(){}}var Av=l.vb({encapsulation:0,styles:[[".m-1[_ngcontent-%COMP%]{margin:4px!important}.mv-1[_ngcontent-%COMP%]{margin-top:4px!important;margin-bottom:4px!important}.mh-1[_ngcontent-%COMP%]{margin-left:4px!important;margin-right:4px!important}.mt-1[_ngcontent-%COMP%]{margin-top:4px!important}.mr-1[_ngcontent-%COMP%]{margin-right:4px!important}.mb-1[_ngcontent-%COMP%]{margin-bottom:4px!important}.ml-1[_ngcontent-%COMP%]{margin-left:4px!important}.p-1[_ngcontent-%COMP%]{padding:4px!important}.pv-1[_ngcontent-%COMP%]{padding-top:4px!important;padding-bottom:4px!important}.ph-1[_ngcontent-%COMP%]{padding-left:4px!important;padding-right:4px!important}.pt-1[_ngcontent-%COMP%]{padding-top:4px!important}.pr-1[_ngcontent-%COMP%]{padding-right:4px!important}.pb-1[_ngcontent-%COMP%]{padding-bottom:4px!important}.pl-1[_ngcontent-%COMP%]{padding-left:4px!important}.m-2[_ngcontent-%COMP%]{margin:8px!important}.mv-2[_ngcontent-%COMP%]{margin-top:8px!important;margin-bottom:8px!important}.mh-2[_ngcontent-%COMP%]{margin-left:8px!important;margin-right:8px!important}.mt-2[_ngcontent-%COMP%]{margin-top:8px!important}.mr-2[_ngcontent-%COMP%]{margin-right:8px!important}.mb-2[_ngcontent-%COMP%]{margin-bottom:8px!important}.ml-2[_ngcontent-%COMP%]{margin-left:8px!important}.p-2[_ngcontent-%COMP%]{padding:8px!important}.pv-2[_ngcontent-%COMP%]{padding-top:8px!important;padding-bottom:8px!important}.ph-2[_ngcontent-%COMP%]{padding-left:8px!important;padding-right:8px!important}.pt-2[_ngcontent-%COMP%]{padding-top:8px!important}.pr-2[_ngcontent-%COMP%]{padding-right:8px!important}.pb-2[_ngcontent-%COMP%]{padding-bottom:8px!important}.pl-2[_ngcontent-%COMP%]{padding-left:8px!important}.m-3[_ngcontent-%COMP%]{margin:12px!important}.mv-3[_ngcontent-%COMP%]{margin-top:12px!important;margin-bottom:12px!important}.mh-3[_ngcontent-%COMP%]{margin-left:12px!important;margin-right:12px!important}.mt-3[_ngcontent-%COMP%]{margin-top:12px!important}.mr-3[_ngcontent-%COMP%]{margin-right:12px!important}.mb-3[_ngcontent-%COMP%]{margin-bottom:12px!important}.ml-3[_ngcontent-%COMP%]{margin-left:12px!important}.p-3[_ngcontent-%COMP%]{padding:12px!important}.pv-3[_ngcontent-%COMP%]{padding-top:12px!important;padding-bottom:12px!important}.ph-3[_ngcontent-%COMP%]{padding-left:12px!important;padding-right:12px!important}.pt-3[_ngcontent-%COMP%]{padding-top:12px!important}.pr-3[_ngcontent-%COMP%]{padding-right:12px!important}.pb-3[_ngcontent-%COMP%]{padding-bottom:12px!important}.pl-3[_ngcontent-%COMP%]{padding-left:12px!important}.m-4[_ngcontent-%COMP%]{margin:16px!important}.mv-4[_ngcontent-%COMP%]{margin-top:16px!important;margin-bottom:16px!important}.mh-4[_ngcontent-%COMP%]{margin-left:16px!important;margin-right:16px!important}.mt-4[_ngcontent-%COMP%]{margin-top:16px!important}.mr-4[_ngcontent-%COMP%]{margin-right:16px!important}.mb-4[_ngcontent-%COMP%]{margin-bottom:16px!important}.ml-4[_ngcontent-%COMP%]{margin-left:16px!important}.p-4[_ngcontent-%COMP%]{padding:16px!important}.pv-4[_ngcontent-%COMP%]{padding-top:16px!important;padding-bottom:16px!important}.ph-4[_ngcontent-%COMP%]{padding-left:16px!important;padding-right:16px!important}.pt-4[_ngcontent-%COMP%]{padding-top:16px!important}.pr-4[_ngcontent-%COMP%]{padding-right:16px!important}.pb-4[_ngcontent-%COMP%]{padding-bottom:16px!important}.pl-4[_ngcontent-%COMP%]{padding-left:16px!important}.m-5[_ngcontent-%COMP%]{margin:20px!important}.mv-5[_ngcontent-%COMP%]{margin-top:20px!important;margin-bottom:20px!important}.mh-5[_ngcontent-%COMP%]{margin-left:20px!important;margin-right:20px!important}.mt-5[_ngcontent-%COMP%]{margin-top:20px!important}.mr-5[_ngcontent-%COMP%]{margin-right:20px!important}.mb-5[_ngcontent-%COMP%]{margin-bottom:20px!important}.ml-5[_ngcontent-%COMP%]{margin-left:20px!important}.p-5[_ngcontent-%COMP%]{padding:20px!important}.pv-5[_ngcontent-%COMP%]{padding-top:20px!important;padding-bottom:20px!important}.ph-5[_ngcontent-%COMP%]{padding-left:20px!important;padding-right:20px!important}.pt-5[_ngcontent-%COMP%]{padding-top:20px!important}.pr-5[_ngcontent-%COMP%]{padding-right:20px!important}.pb-5[_ngcontent-%COMP%]{padding-bottom:20px!important}.pl-5[_ngcontent-%COMP%]{padding-left:20px!important}.m-6[_ngcontent-%COMP%]{margin:24px!important}.mv-6[_ngcontent-%COMP%]{margin-top:24px!important;margin-bottom:24px!important}.mh-6[_ngcontent-%COMP%]{margin-left:24px!important;margin-right:24px!important}.mt-6[_ngcontent-%COMP%]{margin-top:24px!important}.mr-6[_ngcontent-%COMP%]{margin-right:24px!important}.mb-6[_ngcontent-%COMP%]{margin-bottom:24px!important}.ml-6[_ngcontent-%COMP%]{margin-left:24px!important}.p-6[_ngcontent-%COMP%]{padding:24px!important}.pv-6[_ngcontent-%COMP%]{padding-top:24px!important;padding-bottom:24px!important}.ph-6[_ngcontent-%COMP%]{padding-left:24px!important;padding-right:24px!important}.pt-6[_ngcontent-%COMP%]{padding-top:24px!important}.pr-6[_ngcontent-%COMP%]{padding-right:24px!important}.pb-6[_ngcontent-%COMP%]{padding-bottom:24px!important}.pl-6[_ngcontent-%COMP%]{padding-left:24px!important}.m-7[_ngcontent-%COMP%]{margin:28px!important}.mv-7[_ngcontent-%COMP%]{margin-top:28px!important;margin-bottom:28px!important}.mh-7[_ngcontent-%COMP%]{margin-left:28px!important;margin-right:28px!important}.mt-7[_ngcontent-%COMP%]{margin-top:28px!important}.mr-7[_ngcontent-%COMP%]{margin-right:28px!important}.mb-7[_ngcontent-%COMP%]{margin-bottom:28px!important}.ml-7[_ngcontent-%COMP%]{margin-left:28px!important}.p-7[_ngcontent-%COMP%]{padding:28px!important}.pv-7[_ngcontent-%COMP%]{padding-top:28px!important;padding-bottom:28px!important}.ph-7[_ngcontent-%COMP%]{padding-left:28px!important;padding-right:28px!important}.pt-7[_ngcontent-%COMP%]{padding-top:28px!important}.pr-7[_ngcontent-%COMP%]{padding-right:28px!important}.pb-7[_ngcontent-%COMP%]{padding-bottom:28px!important}.pl-7[_ngcontent-%COMP%]{padding-left:28px!important}.m-8[_ngcontent-%COMP%]{margin:32px!important}.mv-8[_ngcontent-%COMP%]{margin-top:32px!important;margin-bottom:32px!important}.mh-8[_ngcontent-%COMP%]{margin-left:32px!important;margin-right:32px!important}.mt-8[_ngcontent-%COMP%]{margin-top:32px!important}.mr-8[_ngcontent-%COMP%]{margin-right:32px!important}.mb-8[_ngcontent-%COMP%]{margin-bottom:32px!important}.ml-8[_ngcontent-%COMP%]{margin-left:32px!important}.p-8[_ngcontent-%COMP%]{padding:32px!important}.pv-8[_ngcontent-%COMP%]{padding-top:32px!important;padding-bottom:32px!important}.ph-8[_ngcontent-%COMP%]{padding-left:32px!important;padding-right:32px!important}.pt-8[_ngcontent-%COMP%]{padding-top:32px!important}.pr-8[_ngcontent-%COMP%]{padding-right:32px!important}.pb-8[_ngcontent-%COMP%]{padding-bottom:32px!important}.pl-8[_ngcontent-%COMP%]{padding-left:32px!important}.m-9[_ngcontent-%COMP%]{margin:36px!important}.mv-9[_ngcontent-%COMP%]{margin-top:36px!important;margin-bottom:36px!important}.mh-9[_ngcontent-%COMP%]{margin-left:36px!important;margin-right:36px!important}.mt-9[_ngcontent-%COMP%]{margin-top:36px!important}.mr-9[_ngcontent-%COMP%]{margin-right:36px!important}.mb-9[_ngcontent-%COMP%]{margin-bottom:36px!important}.ml-9[_ngcontent-%COMP%]{margin-left:36px!important}.p-9[_ngcontent-%COMP%]{padding:36px!important}.pv-9[_ngcontent-%COMP%]{padding-top:36px!important;padding-bottom:36px!important}.ph-9[_ngcontent-%COMP%]{padding-left:36px!important;padding-right:36px!important}.pt-9[_ngcontent-%COMP%]{padding-top:36px!important}.pr-9[_ngcontent-%COMP%]{padding-right:36px!important}.pb-9[_ngcontent-%COMP%]{padding-bottom:36px!important}.pl-9[_ngcontent-%COMP%]{padding-left:36px!important}.m-10[_ngcontent-%COMP%]{margin:40px!important}.mv-10[_ngcontent-%COMP%]{margin-top:40px!important;margin-bottom:40px!important}.mh-10[_ngcontent-%COMP%]{margin-left:40px!important;margin-right:40px!important}.mt-10[_ngcontent-%COMP%]{margin-top:40px!important}.mr-10[_ngcontent-%COMP%]{margin-right:40px!important}.mb-10[_ngcontent-%COMP%]{margin-bottom:40px!important}.ml-10[_ngcontent-%COMP%]{margin-left:40px!important}.p-10[_ngcontent-%COMP%]{padding:40px!important}.pv-10[_ngcontent-%COMP%]{padding-top:40px!important;padding-bottom:40px!important}.ph-10[_ngcontent-%COMP%]{padding-left:40px!important;padding-right:40px!important}.pt-10[_ngcontent-%COMP%]{padding-top:40px!important}.pr-10[_ngcontent-%COMP%]{padding-right:40px!important}.pb-10[_ngcontent-%COMP%]{padding-bottom:40px!important}.pl-10[_ngcontent-%COMP%]{padding-left:40px!important}.text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}.button-loader[_ngcontent-%COMP%]{background:rgba(0,0,0,.2);display:-webkit-box;display:flex;position:fixed;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;top:0;bottom:0;left:0;right:0;-webkit-transition:background-color 250ms,opacity 250ms;transition:background-color 250ms,opacity 250ms;z-index:10000}.button-loader[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:var(--view-loader-scrim-bg--hover)}@media print{.button-loader[_ngcontent-%COMP%]{display:none}}.button-loader[_ngcontent-%COMP%]:hover   .button-loader__button[_ngcontent-%COMP%]{background-color:var(--view-loader-icon-color--hover);-webkit-transform:scale(1.1);transform:scale(1.1)}.button-loader[_ngcontent-%COMP%]:hover   .button-loader__3d-arrow[_ngcontent-%COMP%]{-webkit-transform:scale(1.2);transform:scale(1.2)}.button-loader__button[_ngcontent-%COMP%]{display:-webkit-box;display:flex;padding:12px 28px;border-radius:32px;-webkit-box-align:center;align-items:center;-webkit-transition:background-color 250ms,-webkit-transform 250ms;transition:background-color 250ms,-webkit-transform 250ms;transition:transform 250ms,background-color 250ms;transition:transform 250ms,background-color 250ms,-webkit-transform 250ms;background-color:var(--view-loader-button-bg)}.button-loader__3d-arrow[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform 250ms;transition:-webkit-transform 250ms;transition:transform 250ms;transition:transform 250ms,-webkit-transform 250ms;margin-right:4px}.button-loader__label[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em;color:#fff;font-weight:600;margin-left:4px}"]],data:{}});function Fv(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,4,"div",[["class","button-loader"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,3,"div",[["class","button-loader__button"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,0,"img",[["class","button-loader__3d-arrow"],["src","assets/images/widget/loading_experience/interact-in-3d-arrow.svg"]],null,null,null,null,null)),(e()(),l.xb(3,0,null,null,1,"div",[["class","button-loader__label"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Interact in 3D"]))],null,null)}class Rv{constructor(){}ngOnInit(){}}var Dv=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}.hand-loader[_ngcontent-%COMP%]{background:rgba(0,0,0,.2);display:-webkit-box;display:flex;position:fixed;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;top:0;bottom:0;left:0;right:0;-webkit-transition:background-color 250ms,opacity 250ms;transition:background-color 250ms,opacity 250ms;z-index:10000}.hand-loader[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:var(--view-loader-scrim-bg--hover)}@-webkit-keyframes handKeyframes{0%,100%,60%{-webkit-transform:scale(1.2);transform:scale(1.2)}25%,40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes handKeyframes{0%,100%,60%{-webkit-transform:scale(1.2);transform:scale(1.2)}25%,40%{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes circleKeyframes{0%{-webkit-transform:scale(0);transform:scale(0)}20%{-webkit-transform:scale(0);transform:scale(0);opacity:1}100%{-webkit-transform:scale(1);transform:scale(1);opacity:0}}@keyframes circleKeyframes{0%{-webkit-transform:scale(0);transform:scale(0)}20%{-webkit-transform:scale(0);transform:scale(0);opacity:1}100%{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.hand-loader__container[_ngcontent-%COMP%]{position:relative;width:200px;height:200px}.hand-loader__circle[_ngcontent-%COMP%]{background-color:#fff;position:absolute;left:50%;margin-left:-40.5px;margin-top:-1.5px;width:70px;height:70px;border-radius:50%;-webkit-animation:2s infinite circleKeyframes;animation:2s infinite circleKeyframes}.hand-loader__3d-hand[_ngcontent-%COMP%]{-webkit-animation:2s ease-in-out infinite handKeyframes;animation:2s ease-in-out infinite handKeyframes;position:absolute;height:96px;width:86px;left:50%;margin-left:-43px;margin-top:27px}.hand-loader__label[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em;font-weight:600;color:#fff;text-shadow:0 1px 5px #000;bottom:40px;position:absolute;text-align:center;width:100%}"]],data:{}});function Uv(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,5,"div",[["class","hand-loader"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,4,"div",[["class","hand-loader__container"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,0,"div",[["class","hand-loader__circle"]],null,null,null,null,null)),(e()(),l.xb(3,0,null,null,0,"img",[["class","hand-loader__3d-hand"],["src","assets/images/widget/loading_experience/interact-in-3d-hand.svg"]],null,null,null,null,null)),(e()(),l.xb(4,0,null,null,1,"div",[["class","hand-loader__label"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Interact in 3D"]))],null,null)}class Nv{constructor(e,t,n){this.renderer=e,this.viewService=t,this.actions=n,this.ngUnsubscribe=new K.a}handleClick(){this.renderer.addClass(this.viewLoaderRef.nativeElement,"view-loader--disappear"),setTimeout(()=>{this.viewService.toggleInteract(!1)},250)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}var Hv=l.vb({encapsulation:2,styles:[[""]],data:{}});function Bv(e){return l.Tb(2,[l.Pb(402653184,1,{viewLoaderRef:0}),(e()(),l.xb(1,0,[[1,0],["viewLoader",1]],null,1,"div",[["class","view-loader"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleClick()&&l),l}),null,null)),l.Ib(null,0)],null,null)}class $v{constructor(){this.buttonType="outline"}ngOnInit(){}}var Vv=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}button[app-view-rounded-button]{border-color:transparent;background:0 0;border-width:0;padding:0;outline:0;margin:0;pointer-events:all}.view-rounded-button{cursor:pointer;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;padding:12px 16px;border-radius:24px;color:#f9fafd;border:1px solid #f9fafd}.view-rounded-button__label{font-size:16px;letter-spacing:.4px;line-height:1.4em}.view-rounded-button--solid{color:#060502;border-color:#060502;background:#f9fafd}.view-rounded-button--shadow{box-shadow:0 0 8px rgba(0,0,0,.32)}"]],data:{}});function Wv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-icon",[["class","view-rounded-button__icon mh-1"]],null,null,null,he,ge)),l.wb(1,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){e(t,1,0,t.component.icon)}),null)}function Gv(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,4,"div",[["class","view-rounded-button"]],[[2,"view-rounded-button--outline",null],[2,"view-rounded-button--solid",null],[2,"view-rounded-button--shadow",null]],null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Wv)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(3,0,null,null,1,"div",[["class","view-rounded-button__label mh-1"]],null,null,null,null,null)),(e()(),l.Rb(4,null,["",""]))],(function(e,t){e(t,2,0,t.component.icon)}),(function(e,t){var n=t.component;e(t,0,0,"outline"===n.buttonType,"solid"===n.buttonType,n.shadow),e(t,4,0,n.label)}))}let qv=(()=>{class e{constructor(e,t){this.store=e,this.changeRef=t,this.ngUnsubscribe=new K.a}ngOnInit(){}ngAfterViewInit(){this.tutorial$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.setPageShown(e.pageIndex)}),this.store.dispatch(new X.SetTutorial({pageSize:this.pages.length,pageIndex:0}))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handlePrevClick(){this.store.dispatch(new X.TutorialPrevious)}handleNextClick(){this.store.dispatch(new X.TutorialNext)}handleExitClick(){this.store.dispatch(new X.ToggleWindow(Em.Tutorial,!1))}setPageShown(e){this.pages.forEach((t,n)=>{t.shown=n===e}),this.changeRef.markForCheck()}}return Object(y.__decorate)([Object(O.e)($m.getTutorial),Object(y.__metadata)("design:type",Z.a)],e.prototype,"tutorial$",void 0),e})();var Xv=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}.pages[_ngcontent-%COMP%]{pointer-events:none;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;margin:20px auto 48px;max-width:600px;position:relative;background:rgba(16,24,35,.8);border-radius:16px;padding:24px 28px 20px}.pages--opaquer[_ngcontent-%COMP%]{background:rgba(16,24,35,.9)}.pages__footer[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;font-size:16px;letter-spacing:.4px;line-height:1.4em;font-weight:500}.pages__close[_ngcontent-%COMP%]{z-index:1;position:absolute;top:8px;right:8px;align-self:flex-end;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.pages__contents[_ngcontent-%COMP%]{padding:16px 0}@media (max-width:768px){.pages[_ngcontent-%COMP%]{margin:16px 12% 48px;border-radius:10px;padding:18px 22px 14px}.pages__contents[_ngcontent-%COMP%]{padding:24px 0}.pages__footer[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.pages__nav[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}}@media (max-width:480px){.pages[_ngcontent-%COMP%]{margin:12px 10% 48px;border-radius:8px;padding:24px 20px 12px}.pages__footer[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.pages__nav[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}}"]],data:{}});function Kv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,8,"div",[["class","pages__footer"]],null,null,null,null,null)),(e()(),l.xb(1,16777216,null,null,2,"button",[["app-pin-button",""],["aria-label","Previous Tutorial Step"],["buttonType","dark"],["class","pages__nav"],["icon","angle-left"],["matTooltip","Previous Tutorial Step"],["matTooltipPosition","left"],["size","large"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,2).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,2)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,2)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handlePrevClick()&&i),i}),_x,hx)),l.wb(2,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),l.wb(3,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"],buttonType:[2,"buttonType"],disabled:[3,"disabled"]},null),(e()(),l.xb(4,0,null,null,1,"div",[["class","mh-8"]],null,null,null,null,null)),(e()(),l.Rb(5,null,[" "," / "," "])),(e()(),l.xb(6,16777216,null,null,2,"button",[["app-pin-button",""],["aria-label","Next Tutorial Step"],["buttonType","dark"],["class","pages__nav"],["icon","angle-right"],["matTooltip"," Next Tutorial Step"],["matTooltipPosition","right"],["size","large"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,7).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,7)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,7)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleNextClick()&&i),i}),_x,hx)),l.wb(7,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),l.wb(8,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"],buttonType:[2,"buttonType"],disabled:[3,"disabled"]},null)],(function(e,t){e(t,2,0,"left","Previous Tutorial Step"),e(t,3,0,"angle-left","large","dark",t.parent.context.$implicit.pageIndex<1),e(t,7,0,"right"," Next Tutorial Step"),e(t,8,0,"angle-right","large","dark",t.parent.context.$implicit.pageIndex===t.parent.context.$implicit.pageSize-1)}),(function(e,t){e(t,5,0,t.parent.context.$implicit.pageIndex+1,t.parent.context.$implicit.pageSize)}))}function Zv(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,10,"div",[["class","pages"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"pages--opaquer":0}),(e()(),l.xb(4,16777216,null,null,2,"button",[["app-pin-button",""],["aria-label","Exit Tutorial"],["buttonType","dark"],["class","pages__close"],["icon","times"],["matTooltip","Exit Tutorial"],["matTooltipPosition","right"],["size","medium"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,5).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,5)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,5)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleExitClick()&&i),i}),_x,hx)),l.wb(5,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),l.wb(6,114688,null,0,gx,[],{icon:[0,"icon"],size:[1,"size"],buttonType:[2,"buttonType"]},null),(e()(),l.xb(7,0,null,null,1,"div",[["class","pages__contents"]],null,null,null,null,null)),l.Ib(null,0),(e()(),l.nb(16777216,null,null,1,null,Kv)),l.wb(10,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=e(t,3,0,t.context.$implicit.pageIndex==t.context.$implicit.pageSize-1);e(t,2,0,"pages",n),e(t,5,0,"right","Exit Tutorial"),e(t,6,0,"times","medium","dark"),e(t,10,0,t.context.$implicit.pageIndex<t.context.$implicit.pageSize-1)}),null)}function Yv(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,2,null,Zv)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,1,0,l.Sb(t,1,0,l.Jb(t,2).transform(n.tutorial$)))}),null)}var Qv=function(e){return e.CameraZoom="camera-zoom",e.CameraRotate="camera-rotate",e.CameraPan="camera-pan",e.NodeSelection="node-selection",e}({}),eC=n("JX91");function tC(e,t,n=1e3,l=.001){return iC(e).pipe(Object(eC.a)(t.getCameraZoom()),Object(u.a)(()=>t.getCameraZoom()),Object(Ee.a)(),Object(u.a)(([e,t])=>t-e),Object(Q.a)(e=>Math.abs(e)>l),Object(Qo.a)(n))}function nC(e,t,n=125){return iC(e).pipe(Object(eC.a)(t.getLookDirection()),Object(u.a)(()=>t.getLookDirection()),Object(Ee.a)(),Object(u.a)(([e,t])=>(function(e,t){return Yx.a.angle(e,t)>.001})(e,t)),Object(Q.a)(e=>e),Object(Qo.a)(n))}function lC(e){return{camera:e.getCamera(),zoom:e.getCameraZoom()}}function iC(e){return e.getEvent(Wo.CameraRested)}function aC(e){const{eye:t,look:n}=e,l=[t.x,t.y,t.z],i=[n.x,n.y,n.z],a=Yx.a.create();return Yx.a.sub(a,l,i),a}var oC=n("3E0/");class sC{constructor(e,t,n,i,a){this.store=e,this.actions=t,this.engineService=n,this.cameraService=i,this.changeRef=a,this.spacing="compact",this.exitEnabled=!0,this.triggerDelay=300,this.triggerComplete=new l.n,this._shown=!1,this.ngUnsubscribe=new K.a}set shown(e){this._shown=e,this.initTrigger(),this.changeRef.markForCheck()}get shown(){return this._shown}ngOnInit(){}ngAfterViewInit(){this.initTrigger()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initTrigger(){if(this.ngUnsubscribe.next(),this.shown&&this.trigger){const e=this.resetCamera(),t=this.store.selectSnapshot($m.getCanTouch);(function(e,t,n,l,i){switch(e){case Qv.CameraZoom:return i?tC(n,l):function(e,t,n=1e3,l=.001){const i=e.getCanvas(),a=Object(Zd.a)(i,"wheel"),o=Object(Zd.a)(i,"touchmove").pipe(Object(Q.a)(e=>2===e.touches.length)),s=tC(e,t,n,l);return Object(Uu.a)(a,o).pipe(Object(_t.a)(()=>s))}(n,l);case Qv.CameraPan:return function(e,t,n=125){const l=e.getCanvas(),i=Object(Zd.a)(l,"mousemove").pipe(Object(Q.a)(e=>1===e.buttons&&e.shiftKey||2===e.buttons||4===e.buttons)),a=Object(Zd.a)(l,"touchmove").pipe(Object(Q.a)(e=>2===e.touches.length)),o=function(e,t,n=125){return iC(e).pipe(Object(eC.a)(lC(t)),Object(u.a)(()=>lC(t)),Object(Qo.a)(n),Object(Ee.a)(),Object(u.a)(([e,t])=>(function(e,t){const n=aC(e.camera),l=aC(t.camera),i=Yx.a.create();Yx.a.sub(i,n,l);const a=i.reduce((e,t)=>e+t),o=t.zoom-e.zoom;return(0!==o||0!==a)&&Math.abs(a)<1&&Math.abs(o)<.001})(e,t)),Object(Q.a)(e=>e))}(e,t,n);return Object(Uu.a)(i,a).pipe(Object(_t.a)(()=>o))}(n,l);case Qv.CameraRotate:return i?nC(n,l):function(e,t,n,l=1e3){const i=t.getCanvas(),a=Object(Zd.a)(i,"mousemove").pipe(Object(Q.a)(e=>1===e.buttons)),o=Object(Zd.a)(i,"touchmove").pipe(Object(Q.a)(e=>1===e.touches.length)),s=nC(t,n,l);return Object(Uu.a)(a,o).pipe(Object(_t.a)(()=>s),Object(Q.a)(()=>"rotate"===e.selectSnapshot(xm.getPanMode)),Object(Qo.a)(125))}(t,n,l);case Qv.NodeSelection:return function(e){return e.select(Xs.getCheckedNodes).pipe(Object(Ee.a)(),Object(Q.a)(([e,t])=>t.length>0))}(t)}})(this.trigger,this.store,this.engineService,this.cameraService,t).pipe(Object(Vx.a)(e),Object(oC.a)(this.triggerDelay),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.triggerComplete.next()})}}resetCamera(){const e=this.store.selectSnapshot(Nr.getSelectedChapter);return this.store.dispatch(new Zh(e.camera.location,!0)).pipe(Object(_t.a)(()=>this.actions.pipe(Object(O.l)(Yh))),Object(Au.a)(1))}}class rC{constructor(e){this.changeRef=e,this.selectedSlideIndex=0,this._shown=!1,this.ngUnsubscribe=new K.a}set shown(e){this._shown=e,this.setSelectedSlide(0)}get shown(){return this._shown}ngOnInit(){}ngAfterViewInit(){this.initListeners(),setTimeout(()=>{this.setSlideShown(this.selectedSlideIndex)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}goToPrevSlide(){this.setSelectedSlide(this.selectedSlideIndex-1)}goToNextSlide(){this.setSelectedSlide(this.selectedSlideIndex+1)}setSelectedSlide(e){if(this.selectedSlideIndex=e,this.slides){const t=Math.max(0,Math.min(this.slides.length-1,e));this.selectedSlideIndex=t}this.setSlideShown(this.selectedSlideIndex)}initListeners(){Object(Uu.a)(...this.slides.map(e=>e.triggerComplete.asObservable())).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.goToNextSlide()})}setSlideShown(e){this.slides&&this.slides.forEach((t,n)=>{t.shown=n===e}),this.changeRef.markForCheck()}}var cC=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}.page[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.page__contents[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}@media (max-width:768px){.page__contents[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}}@media (max-width:480px){.page__contents[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}}"]],data:{}});function uC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"div",[["class","page"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"div",[["class","page__contents"]],null,null,null,null,null)),l.Ib(null,0)],null,null)}function pC(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,1,null,uC)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,t.component.shown)}),null)}var dC=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}.slide[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;text-align:center}.slide__title[_ngcontent-%COMP%]{margin-bottom:16px;font-weight:600;font-size:18px;letter-spacing:.45px;line-height:1.4em}.slide__content[_ngcontent-%COMP%]{margin-bottom:16px;font-size:16px;letter-spacing:.4px;line-height:1.5em;max-width:600px}.slide__image[_ngcontent-%COMP%]{margin:24px auto;width:100%}.slide__footer[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em;font-weight:500;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.slide--expanded[_ngcontent-%COMP%]   .slide__title[_ngcontent-%COMP%]{margin:16px}.slide--expanded[_ngcontent-%COMP%]   .slide__content[_ngcontent-%COMP%]{margin:48px}.slide--expanded[_ngcontent-%COMP%]   .slide__image[_ngcontent-%COMP%]{margin:48px auto}@media (max-width:768px){.slide__image[_ngcontent-%COMP%]{max-width:400px auto;margin:16px}.slide__title[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em;margin-bottom:12px}.slide__content[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em;margin-bottom:12px}.slide__footer[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}}@media (max-width:480px){.slide__title[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em;margin-bottom:8px}.slide__content[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em;margin-bottom:8px}.slide__image[_ngcontent-%COMP%]{margin:4px auto}.slide__footer[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}}"]],data:{animation:[{type:7,name:"refresh",definitions:[{type:1,expr:":enter",animation:[{type:10,animation:Uw.slideTransition,options:{params:{duration:500,from:100,to:0}}}],options:null}],options:{}}]}});function bC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"h1",[["class","slide__title"]],null,null,null,null,null)),(e()(),l.Rb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.title)}))}function gC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"img",[["class","slide__image"]],[[8,"src",4]],null,null,null,null))],null,(function(e,t){e(t,0,0,t.component.image)}))}function hC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,8,"div",[["class","slide"]],[[24,"@refresh",0],[2,"slide--expanded",null]],null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,bC)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(3,0,null,null,1,"article",[["class","slide__content"]],null,null,null,null,null)),l.Ib(null,0),(e()(),l.nb(16777216,null,null,1,null,gC)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(7,0,null,null,1,"div",[["class","slide__footer"]],null,null,null,null,null)),l.Ib(null,1)],(function(e,t){var n=t.component;e(t,2,0,n.title),e(t,6,0,n.image)}),(function(e,t){e(t,0,0,void 0,"expanded"===t.component.spacing)}))}function mC(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,1,null,hC)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,t.component.shown)}),null)}class xC{constructor(){}ngOnInit(){}}var fC=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}.view-tour-success{width:52px;height:52px;display:-webkit-box;display:flex;background-color:#1bbc66;border-radius:50%;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.view-tour-success__icon{font-size:36px;letter-spacing:.9px;line-height:1.4em;color:#fff}.view-tour-success--inline{display:-webkit-inline-box;display:inline-flex;width:32px;height:32px}.view-tour-success--inline .view-tour-success__icon{font-size:18px;letter-spacing:.45px;line-height:1.4em}@media (max-width:768px){.view-tour-success{width:36px;height:36px}.view-tour-success__icon{font-size:20px;letter-spacing:.5px;line-height:1.4em}.view-tour-success--inline{display:-webkit-inline-box;display:inline-flex;width:24px;height:24px}.view-tour-success--inline .view-tour-success__icon{font-size:12px;letter-spacing:.3px;line-height:1.4em}}"]],data:{}});function _C(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,2,"div",[["class","view-tour-success"]],[[2,"view-tour-success--inline",null]],null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-icon",[["class","view-tour-success__icon"],["icon","check"]],null,null,null,he,ge)),l.wb(2,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){e(t,2,0,"check")}),(function(e,t){e(t,0,0,t.component.inline)}))}class yC{constructor(e){this.viewService=e,this.triggers=Qv}ngOnInit(){}handleStartClick(){this.viewService.toggleTutorial(!1)}}var OC=l.vb({encapsulation:0,styles:[[""]],data:{}});function wC(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,56,"app-view-tour-pages",[],null,null,null,Yv,Xv)),l.wb(1,4440064,null,1,qv,[O.i,l.i],null,null),l.Pb(603979776,1,{pages:1}),(e()(),l.xb(3,0,null,0,9,"app-view-tour-page",[],null,null,null,pC,cC)),l.wb(4,4440064,[[1,4]],1,rC,[l.i],null,null),l.Pb(603979776,2,{slides:1}),(e()(),l.xb(6,0,null,0,2,"app-view-tour-slide",[["title","Rotate"]],null,null,null,mC,dC)),l.wb(7,4440064,[[2,4]],0,sC,[O.i,O.b,Rs,xt,l.i],{title:[0,"title"],trigger:[1,"trigger"]},null),(e()(),l.Rb(-1,0,[" Tap and drag with one finger to change the viewing angle. "])),(e()(),l.xb(9,0,null,0,3,"app-view-tour-slide",[],null,null,null,mC,dC)),l.wb(10,4440064,[[2,4]],0,sC,[O.i,O.b,Rs,xt,l.i],null,null),(e()(),l.xb(11,0,null,0,1,"app-view-tour-success",[],null,null,null,_C,fC)),l.wb(12,114688,null,0,xC,[],null,null),(e()(),l.xb(13,0,null,0,9,"app-view-tour-page",[],null,null,null,pC,cC)),l.wb(14,4440064,[[1,4]],1,rC,[l.i],null,null),l.Pb(603979776,3,{slides:1}),(e()(),l.xb(16,0,null,0,2,"app-view-tour-slide",[["title","Zoom"]],null,null,null,mC,dC)),l.wb(17,4440064,[[3,4]],0,sC,[O.i,O.b,Rs,xt,l.i],{title:[0,"title"],trigger:[1,"trigger"]},null),(e()(),l.Rb(-1,0,[" Pinch with two fingers to zoom in or out. "])),(e()(),l.xb(19,0,null,0,3,"app-view-tour-slide",[],null,null,null,mC,dC)),l.wb(20,4440064,[[3,4]],0,sC,[O.i,O.b,Rs,xt,l.i],null,null),(e()(),l.xb(21,0,null,0,1,"app-view-tour-success",[],null,null,null,_C,fC)),l.wb(22,114688,null,0,xC,[],null,null),(e()(),l.xb(23,0,null,0,9,"app-view-tour-page",[],null,null,null,pC,cC)),l.wb(24,4440064,[[1,4]],1,rC,[l.i],null,null),l.Pb(603979776,4,{slides:1}),(e()(),l.xb(26,0,null,0,2,"app-view-tour-slide",[["title","Pan"]],null,null,null,mC,dC)),l.wb(27,4440064,[[4,4]],0,sC,[O.i,O.b,Rs,xt,l.i],{title:[0,"title"],trigger:[1,"trigger"]},null),(e()(),l.Rb(-1,0,[" Use two fingers to adjust the model's position. "])),(e()(),l.xb(29,0,null,0,3,"app-view-tour-slide",[],null,null,null,mC,dC)),l.wb(30,4440064,[[4,4]],0,sC,[O.i,O.b,Rs,xt,l.i],null,null),(e()(),l.xb(31,0,null,0,1,"app-view-tour-success",[],null,null,null,_C,fC)),l.wb(32,114688,null,0,xC,[],null,null),(e()(),l.xb(33,0,null,0,14,"app-view-tour-page",[],null,null,null,pC,cC)),l.wb(34,4440064,[[1,4]],1,rC,[l.i],null,null),l.Pb(603979776,5,{slides:1}),(e()(),l.xb(36,0,null,0,2,"app-view-tour-slide",[["title","Explore the Anatomy"]],null,null,null,mC,dC)),l.wb(37,4440064,[[5,4]],0,sC,[O.i,O.b,Rs,xt,l.i],{title:[0,"title"],trigger:[1,"trigger"]},null),(e()(),l.Rb(-1,0,[" Tap on an individual part of the model to highlight anatomy. "])),(e()(),l.xb(39,0,null,0,8,"app-view-tour-slide",[],null,null,null,mC,dC)),l.wb(40,4440064,[[5,4]],0,sC,[O.i,O.b,Rs,xt,l.i],null,null),(e()(),l.xb(41,0,null,0,6,"div",[["class","flex justify-start items-center"]],null,null,null,null,null)),(e()(),l.xb(42,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),l.xb(43,0,null,null,1,"app-view-tour-success",[["class","mr-2"]],null,null,null,_C,fC)),l.wb(44,114688,null,0,xC,[],{inline:[0,"inline"]},null),(e()(),l.xb(45,0,null,null,1,"strong",[["class","text-semibold"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Tip:"])),(e()(),l.Rb(-1,null,[" Double-tap to zoom in on specific structures. "])),(e()(),l.xb(48,0,null,0,8,"app-view-tour-page",[],null,null,null,pC,cC)),l.wb(49,4440064,[[1,4]],1,rC,[l.i],null,null),l.Pb(603979776,6,{slides:1}),(e()(),l.xb(51,0,null,0,5,"app-view-tour-slide",[["image","assets/images/tutorial/tutorial-toolbar@3x.png"],["title","Toolbar"]],null,null,null,mC,dC)),l.wb(52,4440064,[[6,4]],0,sC,[O.i,O.b,Rs,xt,l.i],{title:[0,"title"],image:[1,"image"]},null),(e()(),l.Rb(-1,0,[" Use the toolbar to navigate through the 3D experience, launch deeper exploration tools, and relaunch this tutorial. "])),(e()(),l.xb(54,0,null,1,2,"div",[["class","flex flex-column items-center justify-center"],["slide-footer",""]],null,null,null,null,null)),(e()(),l.xb(55,0,null,null,1,"button",[["app-view-rounded-button",""],["aria-label","Start Exploring"],["buttonType","solid"],["class","mt-4"],["label","Start Exploring!"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleStartClick()&&l),l}),Gv,Vv)),l.wb(56,114688,null,0,$v,[],{label:[0,"label"],buttonType:[1,"buttonType"]},null)],(function(e,t){var n=t.component;e(t,1,0),e(t,4,0),e(t,7,0,"Rotate","camera-rotate"),e(t,10,0),e(t,12,0),e(t,14,0),e(t,17,0,"Zoom",n.triggers.CameraZoom),e(t,20,0),e(t,22,0),e(t,24,0),e(t,27,0,"Pan",n.triggers.CameraPan),e(t,30,0),e(t,32,0),e(t,34,0),e(t,37,0,"Explore the Anatomy",n.triggers.NodeSelection),e(t,40,0),e(t,44,0,!0),e(t,49,0),e(t,52,0,"Toolbar","assets/images/tutorial/tutorial-toolbar@3x.png"),e(t,56,0,"Start Exploring!","solid")}),null)}class vC{constructor(){}ngOnInit(){}}var CC=l.vb({encapsulation:2,styles:[[".view-tour-tip-button{display:-webkit-inline-box;display:inline-flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;vertical-align:middle;color:#131c2a;background-color:#fff;border-radius:2px;font-weight:700;padding:4px;width:24px;height:24px}@media (max-width:768px){.view-tour-tip-button{width:20px;height:20px}}"]],data:{}});function jC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-icon",[],null,null,null,he,ge)),l.wb(1,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){e(t,1,0,t.component.icon)}),null)}function kC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"span",[["class","visually-hidden"]],null,null,null,null,null)),(e()(),l.Rb(1,null,["",""]))],null,(function(e,t){e(t,1,0,t.component.label)}))}function SC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,jC)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,kC)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,n.icon),e(t,4,0,n.icon)}),null)}function PC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l.Rb(1,null,[" "," "]))],null,(function(e,t){e(t,1,0,t.component.label)}))}function MC(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,5,"div",[["class","view-tour-tip-button mv-1 mh-1"]],null,null,null,null,null)),l.wb(1,16384,null,0,se.q,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),l.nb(16777216,null,null,1,null,SC)),l.wb(3,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,null,1,null,PC)),l.wb(5,16384,null,0,se.s,[l.S,l.P,se.q],null,null)],(function(e,t){e(t,1,0,!!t.component.icon),e(t,3,0,!0)}),null)}let TC=(()=>{class e{constructor(e){this.viewService=e,this.triggers=Qv}ngOnInit(){this.captureScroll$=this.scrollMode$.pipe(Object(u.a)(e=>e===qo.Capture))}handleStartClick(){this.viewService.toggleTutorial(!1)}}return Object(y.__decorate)([Object(O.e)(wm.getScrollMode),Object(y.__metadata)("design:type",Z.a)],e.prototype,"scrollMode$",void 0),e})();var IC=l.vb({encapsulation:0,styles:[[""]],data:{}});function JC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Hold the control key and scroll up and down to zoom in or out. "]))],null,null)}function zC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Scroll up and down to zoom in or out. "]))],null,null)}function LC(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,100,"app-view-tour-pages",[],null,null,null,Yv,Xv)),l.wb(1,4440064,null,1,qv,[O.i,l.i],null,null),l.Pb(603979776,1,{pages:1}),(e()(),l.xb(3,0,null,0,23,"app-view-tour-page",[],null,null,null,pC,cC)),l.wb(4,4440064,[[1,4]],1,rC,[l.i],null,null),l.Pb(603979776,2,{slides:1}),(e()(),l.xb(6,0,null,0,2,"app-view-tour-slide",[["title","Rotate"]],null,null,null,mC,dC)),l.wb(7,4440064,[[2,4]],0,sC,[O.i,O.b,Rs,xt,l.i],{title:[0,"title"],trigger:[1,"trigger"]},null),(e()(),l.Rb(-1,0,[" Click and drag the model to change the viewing angle. "])),(e()(),l.xb(9,0,null,0,17,"app-view-tour-slide",[],null,null,null,mC,dC)),l.wb(10,4440064,[[2,4]],0,sC,[O.i,O.b,Rs,xt,l.i],null,null),(e()(),l.xb(11,0,null,0,15,"div",[["class","flex justify-start items-center"]],null,null,null,null,null)),(e()(),l.xb(12,0,null,null,14,"div",[],null,null,null,null,null)),(e()(),l.xb(13,0,null,null,1,"app-view-tour-success",[["class","mr-2"]],null,null,null,_C,fC)),l.wb(14,114688,null,0,xC,[],{inline:[0,"inline"]},null),(e()(),l.xb(15,0,null,null,1,"strong",[["class","text-semibold"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Tip:"])),(e()(),l.Rb(-1,null,[" You can also use the arrow keys "])),(e()(),l.xb(18,0,null,null,1,"app-view-tour-tip-button",[["icon","caret-up"],["label","up"]],null,null,null,MC,CC)),l.wb(19,114688,null,0,vC,[],{label:[0,"label"],icon:[1,"icon"]},null),(e()(),l.xb(20,0,null,null,1,"app-view-tour-tip-button",[["icon","caret-down"],["label","down"]],null,null,null,MC,CC)),l.wb(21,114688,null,0,vC,[],{label:[0,"label"],icon:[1,"icon"]},null),(e()(),l.xb(22,0,null,null,1,"app-view-tour-tip-button",[["icon","caret-left"],["label","left"]],null,null,null,MC,CC)),l.wb(23,114688,null,0,vC,[],{label:[0,"label"],icon:[1,"icon"]},null),(e()(),l.xb(24,0,null,null,1,"app-view-tour-tip-button",[["icon","caret-right"],["label","right"]],null,null,null,MC,CC)),l.wb(25,114688,null,0,vC,[],{label:[0,"label"],icon:[1,"icon"]},null),(e()(),l.Rb(-1,null,[" to rotate. "])),(e()(),l.xb(27,0,null,0,25,"app-view-tour-page",[],null,null,null,pC,cC)),l.wb(28,4440064,[[1,4]],1,rC,[l.i],null,null),l.Pb(603979776,3,{slides:1}),(e()(),l.xb(30,0,null,0,7,"app-view-tour-slide",[["title","Zoom"]],null,null,null,mC,dC)),l.wb(31,16384,null,0,se.q,[],{ngSwitch:[0,"ngSwitch"]},null),l.Lb(131072,se.b,[l.i]),l.wb(33,4440064,[[3,4]],0,sC,[O.i,O.b,Rs,xt,l.i],{title:[0,"title"],trigger:[1,"trigger"]},null),(e()(),l.nb(16777216,null,0,1,null,JC)),l.wb(35,278528,null,0,se.r,[l.S,l.P,se.q],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),l.nb(16777216,null,0,1,null,zC)),l.wb(37,16384,null,0,se.s,[l.S,l.P,se.q],null,null),(e()(),l.xb(38,0,null,0,14,"app-view-tour-slide",[],null,null,null,mC,dC)),l.wb(39,4440064,[[3,4]],0,sC,[O.i,O.b,Rs,xt,l.i],null,null),(e()(),l.xb(40,0,null,0,12,"div",[["class","flex justify-start items-center"]],null,null,null,null,null)),(e()(),l.xb(41,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),l.xb(42,0,null,null,1,"app-view-tour-success",[["class","mr-2"]],null,null,null,_C,fC)),l.wb(43,114688,null,0,xC,[],{inline:[0,"inline"]},null),(e()(),l.xb(44,0,null,null,1,"strong",[["class","text-semibold"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Tip:"])),(e()(),l.Rb(-1,null,[" You can also use "])),(e()(),l.xb(47,0,null,null,1,"app-view-tour-tip-button",[["label","+"]],null,null,null,MC,CC)),l.wb(48,114688,null,0,vC,[],{label:[0,"label"]},null),(e()(),l.Rb(-1,null,[" to zoom in and "])),(e()(),l.xb(50,0,null,null,1,"app-view-tour-tip-button",[["label","-"]],null,null,null,MC,CC)),l.wb(51,114688,null,0,vC,[],{label:[0,"label"]},null),(e()(),l.Rb(-1,null,[" to zoom out. "])),(e()(),l.xb(53,0,null,0,23,"app-view-tour-page",[],null,null,null,pC,cC)),l.wb(54,4440064,[[1,4]],1,rC,[l.i],null,null),l.Pb(603979776,4,{slides:1}),(e()(),l.xb(56,0,null,0,2,"app-view-tour-slide",[["title","Pan"]],null,null,null,mC,dC)),l.wb(57,4440064,[[4,4]],0,sC,[O.i,O.b,Rs,xt,l.i],{title:[0,"title"],trigger:[1,"trigger"]},null),(e()(),l.Rb(-1,0,[" Hold the shift key and drag to move the model's position. "])),(e()(),l.xb(59,0,null,0,17,"app-view-tour-slide",[],null,null,null,mC,dC)),l.wb(60,4440064,[[4,4]],0,sC,[O.i,O.b,Rs,xt,l.i],null,null),(e()(),l.xb(61,0,null,0,15,"div",[["class","flex justify-start items-center"]],null,null,null,null,null)),(e()(),l.xb(62,0,null,null,14,"div",[],null,null,null,null,null)),(e()(),l.xb(63,0,null,null,1,"app-view-tour-success",[["class","mr-2"]],null,null,null,_C,fC)),l.wb(64,114688,null,0,xC,[],{inline:[0,"inline"]},null),(e()(),l.xb(65,0,null,null,1,"strong",[["class","text-semibold"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Tip:"])),(e()(),l.Rb(-1,null,[" You can also use the "])),(e()(),l.xb(68,0,null,null,1,"app-view-tour-tip-button",[["label","W"]],null,null,null,MC,CC)),l.wb(69,114688,null,0,vC,[],{label:[0,"label"]},null),(e()(),l.xb(70,0,null,null,1,"app-view-tour-tip-button",[["label","A"]],null,null,null,MC,CC)),l.wb(71,114688,null,0,vC,[],{label:[0,"label"]},null),(e()(),l.xb(72,0,null,null,1,"app-view-tour-tip-button",[["label","S"]],null,null,null,MC,CC)),l.wb(73,114688,null,0,vC,[],{label:[0,"label"]},null),(e()(),l.xb(74,0,null,null,1,"app-view-tour-tip-button",[["label","D"]],null,null,null,MC,CC)),l.wb(75,114688,null,0,vC,[],{label:[0,"label"]},null),(e()(),l.Rb(-1,null,[" keys to pan. "])),(e()(),l.xb(77,0,null,0,14,"app-view-tour-page",[],null,null,null,pC,cC)),l.wb(78,4440064,[[1,4]],1,rC,[l.i],null,null),l.Pb(603979776,5,{slides:1}),(e()(),l.xb(80,0,null,0,2,"app-view-tour-slide",[["title","Explore the Anatomy"]],null,null,null,mC,dC)),l.wb(81,4440064,[[5,4]],0,sC,[O.i,O.b,Rs,xt,l.i],{title:[0,"title"],trigger:[1,"trigger"]},null),(e()(),l.Rb(-1,0,[" Click on an individual part of the model to highlight anatomy. "])),(e()(),l.xb(83,0,null,0,8,"app-view-tour-slide",[],null,null,null,mC,dC)),l.wb(84,4440064,[[5,4]],0,sC,[O.i,O.b,Rs,xt,l.i],null,null),(e()(),l.xb(85,0,null,0,6,"div",[["class","flex justify-start items-center"]],null,null,null,null,null)),(e()(),l.xb(86,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),l.xb(87,0,null,null,1,"app-view-tour-success",[["class","mr-2"]],null,null,null,_C,fC)),l.wb(88,114688,null,0,xC,[],{inline:[0,"inline"]},null),(e()(),l.xb(89,0,null,null,1,"strong",[["class","text-semibold"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Tip:"])),(e()(),l.Rb(-1,null,[" Double-click to zoom in on specific structures. "])),(e()(),l.xb(92,0,null,0,8,"app-view-tour-page",[],null,null,null,pC,cC)),l.wb(93,4440064,[[1,4]],1,rC,[l.i],null,null),l.Pb(603979776,6,{slides:1}),(e()(),l.xb(95,0,null,0,5,"app-view-tour-slide",[["image","assets/images/tutorial/tutorial-toolbar@3x.png"]],null,null,null,mC,dC)),l.wb(96,4440064,[[6,4]],0,sC,[O.i,O.b,Rs,xt,l.i],{image:[0,"image"]},null),(e()(),l.Rb(-1,0,[" Use the toolbar to navigate through the 3D experience, launch deeper exploration tools, and relaunch this tutorial. "])),(e()(),l.xb(98,0,null,1,2,"div",[["class","flex flex-column items-center justify-center"],["slide-footer",""]],null,null,null,null,null)),(e()(),l.xb(99,0,null,null,1,"button",[["app-view-rounded-button",""],["aria-label","Start Exploring"],["buttonType","solid"],["class","mt-4"],["label","Start Exploring!"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleStartClick()&&l),l}),Gv,Vv)),l.wb(100,114688,null,0,$v,[],{label:[0,"label"],buttonType:[1,"buttonType"]},null)],(function(e,t){var n=t.component;e(t,1,0),e(t,4,0),e(t,7,0,"Rotate",n.triggers.CameraRotate),e(t,10,0),e(t,14,0,!0),e(t,19,0,"up","caret-up"),e(t,21,0,"down","caret-down"),e(t,23,0,"left","caret-left"),e(t,25,0,"right","caret-right"),e(t,28,0),e(t,31,0,l.Sb(t,31,0,l.Jb(t,32).transform(n.captureScroll$))),e(t,33,0,"Zoom",n.triggers.CameraZoom),e(t,35,0,!1),e(t,39,0),e(t,43,0,!0),e(t,48,0,"+"),e(t,51,0,"-"),e(t,54,0),e(t,57,0,"Pan",n.triggers.CameraPan),e(t,60,0),e(t,64,0,!0),e(t,69,0,"W"),e(t,71,0,"A"),e(t,73,0,"S"),e(t,75,0,"D"),e(t,78,0),e(t,81,0,"Explore the Anatomy",n.triggers.NodeSelection),e(t,84,0),e(t,88,0,!0),e(t,93,0),e(t,96,0,"assets/images/tutorial/tutorial-toolbar@3x.png"),e(t,100,0,"Start Exploring!","solid")}),null)}let EC=(()=>{class e{constructor(e,t,n,l,i){this.store=e,this.viewService=t,this.engineService=n,this.storageService=l,this.renderer=i,this.tourStarted=!1,this.tourEnded=!1,this.ngUnsubscribe=new K.a}ngOnInit(){this.initListeners(),this.storageService.setLocalItem(Yn.GettingStartedTutorial,!0)}ngAfterViewInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initListeners(){this.tutorial$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(({pageIndex:e,pageSize:t})=>{this.tourStarted=e>-1,this.tourEnded=e===t-1}),Object(Zd.a)(window,"keyup").pipe(Object(Q.a)(e=>"Escape"===e.key),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.exit()})}handleExitClick(){this.exit()}handleStartClick(){this.store.dispatch(new X.StartTutorial(!1))}exit(){this.viewService.toggleTutorial(!1)}}return Object(y.__decorate)([Object(O.e)($m.getCanTouch),Object(y.__metadata)("design:type",Z.a)],e.prototype,"canTouch$",void 0),Object(y.__decorate)([Object(O.e)($m.getTutorial),Object(y.__metadata)("design:type",Z.a)],e.prototype,"tutorial$",void 0),e})();var AC=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}.tour[_ngcontent-%COMP%]{color:#fff;position:fixed;top:0;right:0;bottom:0;left:0;z-index:100;pointer-events:none;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;overflow:auto}.tour__title[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.tour__welcome[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em;margin:16px auto 32px}.tour__intro[_ngcontent-%COMP%]{background:rgba(16,24,35,.9);border-radius:16px;margin:auto;padding:28px 32px;text-align:center}.tour__header[_ngcontent-%COMP%]{-webkit-box-flex:0;flex:none;align-self:flex-end;justify-self:flex-start;margin:24px}.tour__contents[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:auto;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:end;justify-content:flex-end;width:100%}.tour__footer[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.tour__nav-arrow[_ngcontent-%COMP%]{font-size:32px;letter-spacing:.8px;line-height:1.4em;cursor:pointer}.tour--ended[_ngcontent-%COMP%]   .tour__contents[_ngcontent-%COMP%]{-webkit-box-pack:center;justify-content:center}@media (max-width:768px){.tour__intro[_ngcontent-%COMP%]{border-radius:12px;padding:20px 24px;margin:auto 12%}.tour__intro__title[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.tour__intro__content[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em;max-width:80%}.tour__header[_ngcontent-%COMP%]{margin:12px;font-size:14px;letter-spacing:.35px;line-height:1.4em}.tour__footer[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.tour__nav-arrow[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}}@media (max-width:480px){.tour__intro[_ngcontent-%COMP%]{border-radius:8px;padding:16px 20px;margin:auto 10%}.tour__intro__title[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.tour__intro__content[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em;margin:12px auto 16px}.tour__header[_ngcontent-%COMP%]{margin:12px;font-size:12px;letter-spacing:.3px;line-height:1.4em}.tour__footer[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.tour__nav-arrow[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}}"]],data:{animation:[{type:7,name:"refresh",definitions:[{type:1,expr:":enter",animation:[{type:10,animation:Uw.slideTransition,options:{params:{duration:500,from:100,to:0}}}],options:null}],options:{}}]}});function FC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,9,"div",[["class","tour__intro"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"h1",[["class","tour__title"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Getting Started"])),(e()(),l.xb(3,0,null,null,1,"p",[["class","tour__welcome"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Welcome! This tutorial will teach you how to navigate and explore in 3D. "])),(e()(),l.xb(5,0,null,null,4,"div",[["class","tour__footer"]],null,null,null,null,null)),(e()(),l.xb(6,0,null,null,1,"button",[["app-view-rounded-button",""],["aria-label","Exit Tutorial"],["buttonType","outline"],["class","mr-3 text-medium"],["label","No, Thanks."]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleExitClick()&&l),l}),Gv,Vv)),l.wb(7,114688,null,0,$v,[],{label:[0,"label"],buttonType:[1,"buttonType"]},null),(e()(),l.xb(8,0,null,null,1,"button",[["app-view-rounded-button",""],["aria-label","Start Tutorial"],["buttonType","solid"],["class","ml-3 text-medium"],["label","Start Tutorial"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleStartClick()&&l),l}),Gv,Vv)),l.wb(9,114688,null,0,$v,[],{label:[0,"label"],buttonType:[1,"buttonType"]},null)],(function(e,t){e(t,7,0,"No, Thanks.","outline"),e(t,9,0,"Start Tutorial","solid")}),null)}function RC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-tour-mobile",[],null,null,null,wC,OC)),l.wb(1,114688,null,0,yC,[rx],null,null)],(function(e,t){e(t,1,0)}),null)}function DC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-tour-desktop",[],null,null,null,LC,IC)),l.wb(1,114688,null,0,TC,[rx],null,null)],(function(e,t){e(t,1,0)}),null)}function UC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,"div",[["class","tour__contents"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,RC)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,DC)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,2,0,l.Sb(t,2,0,l.Jb(t,3).transform(n.canTouch$))),e(t,5,0,!l.Sb(t,5,0,l.Jb(t,6).transform(n.canTouch$)))}),null)}function NC(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,4,"div",[["class","tour"]],[[24,"@refresh",0],[2,"tour--started",null],[2,"tour--ended",null]],null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,FC)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,UC)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,2,0,!n.tourStarted),e(t,4,0,n.tourStarted)}),(function(e,t){var n=t.component;e(t,0,0,void 0,n.tourStarted,n.tourEnded)}))}class HC{constructor(){this.undoClick=new l.n,this.redoClick=new l.n,this.resetClick=new l.n}ngOnInit(){}handleUndoClick(){this.undoClick.next()}handleRedoClick(){this.redoClick.next()}handleResetClick(){this.resetClick.next()}}var BC=l.vb({encapsulation:2,styles:[[""]],data:{animation:[{type:7,name:"show",definitions:[{type:1,expr:":enter",animation:[{type:10,animation:Uw.slideTransition,options:{params:{duration:300,from:-100,to:0}}}],options:null},{type:1,expr:":leave",animation:[{type:10,animation:Uw.fadeOut,options:{params:{duration:300}}}],options:null}],options:{}}]}});function $C(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,14,"div",[["class","view-annotate-undo"]],[[24,"@show",0]],null,null,null,null)),(e()(),l.xb(1,0,null,null,13,"app-pillbox",[["padding","dense"]],null,null,null,LO,JO)),l.wb(2,114688,null,0,IO,[],{padding:[0,"padding"]},null),(e()(),l.xb(3,16777216,null,0,2,"button",[["app-pin-button",""],["aria-label","Undo"],["buttonType","ghost"],["class","mr-2"],["icon","undo"],["matTooltip","Undo"]],[[1,"aria-disabled",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,4).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,4)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,4)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleUndoClick()&&i),i}),_x,hx)),l.wb(4,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(5,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"],disabled:[2,"disabled"]},null),(e()(),l.xb(6,16777216,null,0,2,"button",[["app-pin-button",""],["aria-label","Redo"],["buttonType","ghost"],["icon","redo"],["matTooltip","Redo"]],[[1,"aria-disabled",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,7).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,7)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,7)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleRedoClick()&&i),i}),_x,hx)),l.wb(7,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(8,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"],disabled:[2,"disabled"]},null),(e()(),l.xb(9,0,null,0,1,"app-pillbox-divider",[],null,null,null,TO,MO)),l.wb(10,114688,null,0,PO,[],null,null),(e()(),l.xb(11,0,null,0,3,"button",[["app-pin-button",""],["buttonType","ghost"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleResetClick()&&l),l}),_x,hx)),l.wb(12,114688,null,0,gx,[],{buttonType:[0,"buttonType"]},null),(e()(),l.xb(13,0,null,0,1,"span",[["class","ph-4 text-bold"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Clear"]))],(function(e,t){var n=t.component;e(t,2,0,"dense"),e(t,4,0,"Undo"),e(t,5,0,"undo","ghost",n.undoIndex<0||0===n.undoCount),e(t,7,0,"Redo"),e(t,8,0,"redo","ghost",n.undoCount-n.undoIndex<=1),e(t,10,0),e(t,12,0,"ghost")}),(function(e,t){var n=t.component;e(t,0,0,void 0),e(t,3,0,n.undoIndex<0||0===n.undoCount),e(t,6,0,n.undoCount-n.undoIndex<=1)}))}let VC=(()=>{class e{constructor(e){this.store=e,this.brushSizes=Am,this.brushColors=Fm,this.downloadClick=new l.n,this.exitClick=new l.n,this.ngUnsubscribe=new K.a}ngOnInit(){}ngAfterViewInit(){this.brushColor$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.colorBtn.nativeElement.style.setProperty("--pin-button-pin-color",e)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setBrushSize(e){this.store.dispatch(new X.SetAnnotateBrushSize(e))}setBrushColor(e){this.store.dispatch(new X.SetAnnotateBrushColor(e))}handleDownloadClick(){this.downloadClick.next()}handleExitClick(){this.exitClick.next()}}return Object(y.__decorate)([Object(O.e)($m.getAnnotateBrushSize),Object(y.__metadata)("design:type",Z.a)],e.prototype,"brushSize$",void 0),Object(y.__decorate)([Object(O.e)($m.getAnnotateBrushColor),Object(y.__metadata)("design:type",Z.a)],e.prototype,"brushColor$",void 0),e})();var WC=l.vb({encapsulation:2,styles:[[".view-annotate-tools__check{-webkit-box-flex:2;flex:2 1 0;color:#0060c4}.view-annotate-tools__label{display:-webkit-box;display:flex;-webkit-box-flex:6;flex:6 1 0}"]],data:{}});function GC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-icon",[["class","mr-2"],["icon","check"]],null,null,null,he,ge)),l.wb(1,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){e(t,1,0,"check")}),null)}function qC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,11,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.setBrushSize(e.context.$implicit.size)&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[2,4],[3,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.xb(2,0,null,0,9,"div",[["class","flex flex-row items-center justify-end"]],null,null,null,null,null)),(e()(),l.xb(3,0,null,null,3,"div",[["class","view-annotate-tools__check"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,GC)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(7,0,null,null,4,"div",[["class","view-annotate-tools__label"]],null,null,null,null,null)),(e()(),l.xb(8,0,null,null,1,"app-icon",[["class","mr-2"],["icon","circle"]],[[4,"font-size","px"]],null,null,he,ge)),l.wb(9,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(10,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l.Rb(11,null,["",""]))],(function(e,t){var n=t.component;e(t,5,0,t.context.$implicit.size===l.Sb(t,5,0,l.Jb(t,6).transform(n.brushSize$))),e(t,9,0,"circle")}),(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null),e(t,8,0,t.context.$implicit.size),e(t,11,0,t.context.$implicit.label)}))}function XC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-icon",[["class","mr-2"],["icon","check"]],null,null,null,he,ge)),l.wb(1,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){e(t,1,0,"check")}),null)}function KC(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,11,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var i=!0,a=e.component;return"click"===t&&(i=!1!==l.Jb(e,1)._checkDisabled(n)&&i),"mouseenter"===t&&(i=!1!==l.Jb(e,1)._handleMouseEnter()&&i),"click"===t&&(i=!1!==a.setBrushColor(e.context.$implicit.color)&&i),i}),Ie.c,Ie.a)),l.wb(1,180224,[[5,4],[6,4]],0,Je.e,[l.l,se.d,_e.e,[2,Je.b]],null,null),(e()(),l.xb(2,0,null,0,9,"div",[["class","flex flex-row items-center justify-end"]],null,null,null,null,null)),(e()(),l.xb(3,0,null,null,3,"div",[["class","view-annotate-tools__check"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,XC)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(7,0,null,null,4,"div",[["class","view-annotate-tools__label"]],null,null,null,null,null)),(e()(),l.xb(8,0,null,null,1,"app-icon",[["class","mr-2"],["icon","circle"]],[[4,"font-size","px"],[4,"color",null]],null,null,he,ge)),l.wb(9,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(10,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),l.Rb(11,null,["",""]))],(function(e,t){var n=t.component;e(t,5,0,t.context.$implicit.color===l.Sb(t,5,0,l.Jb(t,6).transform(n.brushColor$))),e(t,9,0,"circle")}),(function(e,t){e(t,0,0,l.Jb(t,1).role,l.Jb(t,1)._highlighted,l.Jb(t,1)._triggersSubmenu,l.Jb(t,1)._getTabIndex(),l.Jb(t,1).disabled.toString(),l.Jb(t,1).disabled||null),e(t,8,0,14,t.context.$implicit.color),e(t,11,0,t.context.$implicit.label)}))}function ZC(e){return l.Tb(2,[l.Pb(402653184,1,{colorBtn:0}),(e()(),l.xb(1,0,null,null,33,"div",[["class","view-annotate-tools"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,32,"app-pillbox",[["name","Whiteboard"],["padding","dense"]],null,[[null,"exit"]],(function(e,t,n){var l=!0;return"exit"===t&&(l=!1!==e.component.handleExitClick()&&l),l}),LO,JO)),l.wb(3,114688,null,0,IO,[],{canExit:[0,"canExit"],padding:[1,"padding"],name:[2,"name"]},{exit:"exit"}),(e()(),l.xb(4,16777216,null,0,3,"button",[["app-pin-button",""],["aria-haspopup","true"],["aria-label","Brush Size"],["buttonType","ghost"],["class","mat-menu-trigger"],["icon","paint-brush"],["matTooltip","Brush Size"]],[[1,"aria-expanded",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"],[null,"longpress"],[null,"touchend"]],(function(e,t,n){var i=!0;return"mousedown"===t&&(i=!1!==l.Jb(e,5)._handleMousedown(n)&&i),"keydown"===t&&(i=!1!==l.Jb(e,5)._handleKeydown(n)&&i),"click"===t&&(i=!1!==l.Jb(e,5)._handleClick(n)&&i),"longpress"===t&&(i=!1!==l.Jb(e,6).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,6)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,6)._handleTouchend()&&i),i}),_x,hx)),l.wb(5,1196032,null,0,Je.g,[Qe.a,l.l,l.S,Je.c,[2,Je.d],[8,null],[2,et.b],_e.e],{menu:[0,"menu"]},null),l.wb(6,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(7,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),(e()(),l.xb(8,16777216,[[1,0]],0,3,"button",[["app-pin-button",""],["aria-haspopup","true"],["aria-label","Brush Color"],["buttonType","ghost"],["class","mat-menu-trigger"],["icon","tint"],["matTooltip","Brush Color"]],[[1,"aria-expanded",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"],[null,"longpress"],[null,"touchend"]],(function(e,t,n){var i=!0;return"mousedown"===t&&(i=!1!==l.Jb(e,9)._handleMousedown(n)&&i),"keydown"===t&&(i=!1!==l.Jb(e,9)._handleKeydown(n)&&i),"click"===t&&(i=!1!==l.Jb(e,9)._handleClick(n)&&i),"longpress"===t&&(i=!1!==l.Jb(e,10).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,10)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,10)._handleTouchend()&&i),i}),_x,hx)),l.wb(9,1196032,null,0,Je.g,[Qe.a,l.l,l.S,Je.c,[2,Je.d],[8,null],[2,et.b],_e.e],{menu:[0,"menu"]},null),l.wb(10,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(11,114688,[["colorBtn",4]],0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),(e()(),l.xb(12,0,null,0,1,"app-pillbox-divider",[],null,null,null,TO,MO)),l.wb(13,114688,null,0,PO,[],null,null),(e()(),l.xb(14,16777216,null,0,2,"button",[["app-pin-button",""],["aria-label","Download"],["buttonType","ghost"],["icon","download"],["matTooltip","Download"]],null,[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,15).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,15)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,15)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleDownloadClick()&&i),i}),_x,hx)),l.wb(15,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{message:[0,"message"]},null),l.wb(16,114688,null,0,gx,[],{icon:[0,"icon"],buttonType:[1,"buttonType"]},null),(e()(),l.xb(17,0,null,0,8,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.Ob(6144,null,Je.d,null,[Je.h]),l.Ob(6144,null,Je.b,null,[Je.d]),l.wb(20,1294336,[["brushSizeMenu",4]],3,Je.h,[l.l,l.B,Je.a],null,null),l.Pb(603979776,2,{_allItems:1}),l.Pb(603979776,3,{items:1}),l.Pb(603979776,4,{lazyContent:0}),(e()(),l.nb(16777216,null,0,1,null,qC)),l.wb(25,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null),(e()(),l.xb(26,0,null,0,8,"mat-menu",[],null,null,null,Ie.d,Ie.b)),l.Ob(6144,null,Je.d,null,[Je.h]),l.Ob(6144,null,Je.b,null,[Je.d]),l.wb(29,1294336,[["brushColorMenu",4]],3,Je.h,[l.l,l.B,Je.a],null,null),l.Pb(603979776,5,{_allItems:1}),l.Pb(603979776,6,{items:1}),l.Pb(603979776,7,{lazyContent:0}),(e()(),l.nb(16777216,null,0,1,null,KC)),l.wb(34,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,3,0,!0,"dense","Whiteboard"),e(t,5,0,l.Jb(t,20)),e(t,6,0,"Brush Size"),e(t,7,0,"paint-brush","ghost"),e(t,9,0,l.Jb(t,29)),e(t,10,0,"Brush Color"),e(t,11,0,"tint","ghost"),e(t,13,0),e(t,15,0,"Download"),e(t,16,0,"download","ghost"),e(t,20,0),e(t,25,0,n.brushSizes),e(t,29,0),e(t,34,0,n.brushColors)}),(function(e,t){e(t,4,0,l.Jb(t,5).menuOpen||null),e(t,8,0,l.Jb(t,9).menuOpen||null)}))}const YC=kt.PNG,QC=100;let ej=(()=>{class e{constructor(e,t,n,l,i){this.store=e,this.actions=t,this.viewService=n,this.publishService=l,this.changeRef=i,this.snapshots=[],this.snapshotIndex=-1,this.brushSize=0,this.ngUnsubscribe=new K.a}ngOnInit(){this.canvasElement=this.drawCanvas.nativeElement,this.canvasContext=this.canvasElement.getContext("2d")}ngAfterViewInit(){this.initCanvasListeners(),this.initInputListeners()}ngOnDestroy(){this.inputManager.destroy(),this.reset(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initCanvasListeners(){const e=this.store.select($m.getLayout),t=Object(Zd.a)(window,"resize");Object(Uu.a)(e,t).pipe(Object(eC.a)(this.getScreenDimensions()),Object(Qo.a)(250),Object(u.a)(()=>this.getScreenDimensions()),Object(Ee.a)(),Object(Y.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.syncCanvas();const{width:n,height:l}=e,{width:i,height:a}=t,o=i-n,s=a-l,r=o/i*100,c=s/a*100;Math.abs(o)>50&&Math.abs(r)>5||Math.abs(s)>50&&Math.abs(c)>5?this.reset():this.goToSnapshot(this.snapshotIndex)}),this.brushSize$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.setBrushSize(e)}),this.brushColor$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.setBrushColor(e)}),this.syncCanvas()}initInputListeners(){this.inputManager=new Hammer.Manager(this.drawCanvas.nativeElement),this.inputManager.add(new Hammer.Pan({event:"pan",pointers:0})),this.inputManager.add(new Hammer.Tap({event:"tap"}));const e=new Map;this.inputManager.on("tap",e=>{e.pointers.forEach(e=>{const{x:t,y:n}=e;this.drawPoint(t,n)}),this.trackSnapshot()}),this.inputManager.on("panstart",t=>{t.pointers.forEach(t=>{const{x:n,y:l}=t;e.set(t.pointerId,{x:n,y:l})})}),this.inputManager.on("pan",t=>{t.pointers.forEach(t=>{const{x:n,y:l}=t,{x:i,y:a}=e.get(t.pointerId);this.drawLine(i,a,n,l),this.drawPoint(n,l),e.set(t.pointerId,{x:n,y:l})})}),this.inputManager.on("panend",()=>{this.trackSnapshot(),e.clear()})}handleUndoClick(){this.undo()}handleRedoClick(){this.redo()}handleResetClick(){this.reset()}handleDownloadClick(){const{width:e,height:t}=this.canvasElement,n=this.store.selectSnapshot(Nr.getSelectedChapterId);this.store.dispatch(new So(n,YC,QC,{width:e,height:t},"original",!0,!0,[this.canvasElement])).pipe(Object(_t.a)(()=>this.actions.pipe(Object(O.l)(Po),Object(Au.a)(1))),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.downloadSnapshot(e.blob)})}handleExitClick(){this.resetCanvas(),this.viewService.toggleAnnotate(!1)}drawPoint(e,t){const n=this.brushSize/2,l=2*Math.PI;this.canvasContext.beginPath(),this.canvasContext.arc(e,t,n,0,l),this.canvasContext.fill()}drawLine(e,t,n,l){this.canvasContext.beginPath(),this.canvasContext.moveTo(e,t),this.canvasContext.lineTo(n,l),this.canvasContext.stroke(),this.canvasContext.closePath()}undo(){this.snapshotIndex=Math.max(this.snapshotIndex-1,-1),this.goToSnapshot(this.snapshotIndex),this.changeRef.markForCheck()}redo(){this.snapshotIndex=Math.min(this.snapshotIndex+1,this.snapshots.length-1),this.goToSnapshot(this.snapshotIndex),this.changeRef.markForCheck()}reset(){this.resetSnapshots(),this.resetCanvas(),this.changeRef.markForCheck()}setBrushSize(e){this.canvasContext.lineWidth=e,this.brushSize=e}setBrushColor(e){this.canvasContext.fillStyle=e,this.canvasContext.strokeStyle=e}syncCanvas(){const e=this.store.selectSnapshot($m.getAnnotateBrushSize),t=this.store.selectSnapshot($m.getAnnotateBrushColor),{width:n,height:l}=this.getScreenDimensions();this.canvasElement.width=n,this.canvasElement.height=l,this.setBrushSize(e),this.setBrushColor(t),this.canvasContext.lineJoin="round"}resetCanvas(){const{width:e,height:t}=this.canvasElement;this.canvasContext.clearRect(0,0,e,t)}takeSnapshot(){return this.canvasElement.toDataURL(kt.PNG,1)}trackSnapshot(){const e=this.takeSnapshot();this.snapshots.splice(this.snapshotIndex+1),this.snapshots.push(e),this.snapshotIndex=this.snapshots.length-1,this.changeRef.markForCheck()}resetSnapshots(){this.snapshots.length=0,this.snapshotIndex=-1}goToSnapshot(e){const t=this.snapshots[e];this.resetCanvas(),t&&this.drawSnapshot(t)}drawSnapshot(e){const t=new Image;t.onload=()=>{const{width:e,height:n}=t,{width:l,height:i}=this.canvasElement;this.canvasContext.drawImage(t,0,0,e,n,0,0,l,i)},t.src=e}downloadSnapshot(e){const{displayName:t}=this.store.selectSnapshot(Tc.getStory),n=(t||"").replace(/ /g,"_").replace(/\W/g,"").toLowerCase();this.publishService.exportImage(e,YC,`${n}_drawing.${YC===kt.PNG?"png":"jpg"}`)}getScreenDimensions(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}}return Object(y.__decorate)([Object(O.e)($m.getAnnotateBrushSize),Object(y.__metadata)("design:type",Z.a)],e.prototype,"brushSize$",void 0),Object(y.__decorate)([Object(O.e)($m.getAnnotateBrushColor),Object(y.__metadata)("design:type",Z.a)],e.prototype,"brushColor$",void 0),e})();var tj=l.vb({encapsulation:2,styles:[[".view-annotate{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:justify;justify-content:space-between;border:4px solid #38de38;padding:8px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transition:border .3s linear;transition:border .3s linear}.view-annotate__canvas{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1}.view-annotate__undo{z-index:1}.view-annotate__tools{z-index:1;align-self:flex-end}"]],data:{}});function nj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-annotate-undo",[],null,[[null,"undoClick"],[null,"redoClick"],[null,"resetClick"]],(function(e,t,n){var l=!0,i=e.component;return"undoClick"===t&&(l=!1!==i.handleUndoClick()&&l),"redoClick"===t&&(l=!1!==i.handleRedoClick()&&l),"resetClick"===t&&(l=!1!==i.handleResetClick()&&l),l}),$C,BC)),l.wb(1,114688,null,0,HC,[],{undoCount:[0,"undoCount"],undoIndex:[1,"undoIndex"]},{undoClick:"undoClick",redoClick:"redoClick",resetClick:"resetClick"})],(function(e,t){var n=t.component;e(t,1,0,n.snapshots.length,n.snapshotIndex)}),null)}function lj(e){return l.Tb(2,[l.Pb(402653184,1,{drawCanvas:0}),(e()(),l.xb(1,0,null,null,7,"div",[["class","view-annotate"]],null,null,null,null,null)),(e()(),l.xb(2,0,[[1,0],["drawCanvas",1]],null,0,"canvas",[["class","view-annotate__canvas"]],null,null,null,null,null)),(e()(),l.xb(3,0,null,null,2,"div",[["class","view-annotate__undo"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,nj)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(6,0,null,null,2,"div",[["class","view-annotate__tools"]],null,null,null,null,null)),(e()(),l.xb(7,0,null,null,1,"app-view-annotate-tools",[],null,[[null,"downloadClick"],[null,"exitClick"]],(function(e,t,n){var l=!0,i=e.component;return"downloadClick"===t&&(l=!1!==i.handleDownloadClick()&&l),"exitClick"===t&&(l=!1!==i.handleExitClick()&&l),l}),ZC,WC)),l.wb(8,4440064,null,0,VC,[O.i],null,{downloadClick:"downloadClick",exitClick:"exitClick"})],(function(e,t){e(t,5,0,t.component.snapshots.length>0),e(t,8,0)}),null)}let ij=(()=>{class e{constructor(e,t){this.store=e,this.changeDetectorRef=t,this.ngUnsubscribe=new K.a,this.visible=!1}beforePrint(e){this.visible=!0,this.changeDetectorRef.markForCheck()}afterPrint(e){this.visible=!1,this.changeDetectorRef.markForCheck()}ngOnInit(){this.initImageUrlListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initImageUrlListener(){Object(Du.b)(this.storyChapters$,this.store.select(Nr.getRegisteredThumbnails)).pipe(Object(Q.a)(([e,t])=>e.length>0&&t.size>0),Object(u.a)(([e,t])=>t.get(e[0].id).urls.large),Object(sg.a)(),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.imageUrl=e,this.changeDetectorRef.markForCheck()})}}return Object(y.__decorate)([Object(O.e)(Nr.getStoryChapters),Object(y.__metadata)("design:type",Z.a)],e.prototype,"storyChapters$",void 0),e})();var aj=l.vb({encapsulation:0,styles:[[".view-print[_ngcontent-%COMP%]{background-color:#fff;display:none;position:absolute;top:0;left:0;width:100%;height:100%;z-index:10000;justify-content:space-around;margin:auto;margin-top:0!important}@media print{.view-print[_ngcontent-%COMP%]{display:-webkit-box;display:flex}}.view-print__scrim[_ngcontent-%COMP%]{display:block;width:100%;height:100%;position:absolute;z-index:-1;top:0;right:0;bottom:0;left:0}.view-print__image[_ngcontent-%COMP%]{display:block;-webkit-box-flex:1;flex:1 1 auto;-o-object-fit:contain;object-fit:contain;margin:0 auto;z-index:1}"]],data:{}});function oj(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,2,"div",[["class","view-print"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,0,"img",[["class","view-print__scrim"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII="]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,0,"img",[["class","view-print__image"]],[[8,"src",4]],null,null,null,null))],null,(function(e,t){e(t,2,0,t.component.imageUrl)}))}class sj{constructor(){this.selected=!1}ngOnInit(){}}var rj=l.vb({encapsulation:2,styles:[[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:'Courier New',Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#b31212}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link{color:inherit}.text-success{color:#38de38}.text-danger{color:#de3838}.text-info{color:#0060c4}[app-view-list-item]{border-color:transparent;background:0 0;border-width:0;padding:0;outline:0;margin:0;pointer-events:all;display:-webkit-box;display:flex;width:100%}[app-view-list-item]::-moz-focus-inner{border:0}[app-view-list-item]:not([disabled]):hover{cursor:pointer}.view-list-item{font-size:14px;letter-spacing:.35px;line-height:1.4em;display:-webkit-box;display:flex;-webkit-box-flex:1;flex-grow:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;padding:12px;border-radius:2px;border-left:4px solid transparent;background-color:transparent;color:#131c2a;border-left:var(--view-chapters-border);background-color:var(--view-chapters-bg);color:var(--view-chapters-color);-webkit-transition:background-color 125ms,color 125ms,border 125ms;transition:background-color 125ms,color 125ms,border 125ms}.view-list-item:hover{cursor:pointer;background:var(--view-chapters-bg--hover)}.view-list-item:focus{background:#e4ecf9;outline:0}.view-list-item--selected{border-left:4px solid #2d72dc;background-color:#f1f5fc;background:var(--view-chapters-bg--selected);border-left:var(--view-chapters-border--selected)}.view-list-item__index{display:-webkit-box;display:flex;-webkit-box-flex:0;flex:0 0 32px;-webkit-box-pack:center;justify-content:center}.view-list-item__title{word-wrap:break-word;overflow-wrap:break-word;display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1 1 auto;padding-right:4px}.view-list-item__thumb{background-color:#f9fafd;background-color:var(--view-chapters-thumb-bg);background-size:cover;border-radius:4px;background-repeat:no-repeat;-webkit-box-flex:0;flex:0 0 56px;height:56px;width:56px;-webkit-transition:border-color .1s;transition:border-color .1s}"]],data:{}});function cj(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,4,"div",[["class","view-list-item"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"view-list-item--selected":0}),l.Ib(null,0)],(function(e,t){var n=e(t,3,0,t.component.selected);e(t,2,0,"view-list-item",n)}),null)}class uj{constructor(){}ngOnInit(){}}var pj=l.vb({encapsulation:2,styles:[[".view-list-container{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}"]],data:{}});function dj(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,1,"div",[["class","view-list-container"]],null,null,null,null,null)),l.Ib(null,0)],null,null)}let bj=(()=>{class e{constructor(e,t){this.store=e,this.viewService=t}ngOnInit(){}handleCloseClick(){this.store.dispatch(new X.ToggleMenu(!1))}handleToggleLabelsClick(){this.viewService.toggleLabels()}handleFullscreenClick(){this.handleCloseClick(),Sm.toggleFullscreen()}handleNewTabClick(){this.handleCloseClick(),this.viewService.openInNewTab()}handleSearchClick(){this.handleCloseClick(),this.viewService.toggleSearch()}handleTutorialClick(){this.handleCloseClick(),this.viewService.toggleTutorial(!0)}handleHelpBasicsClick(){this.handleCloseClick(),this.viewService.toggleHelp(!0,ee.Basics)}handleHelpShortcutsClick(){this.handleCloseClick(),this.viewService.toggleHelp(!0,ee.Shortcuts)}handleToggleToolbar(e){this.handleCloseClick();const t=this.store.selectSnapshot($m.getLayout);t.media.status=vm.Hide,t.tools.status=vm.Hide,t.toolbar.status=vm.Hide,t[e].status=vm.Show,this.store.dispatch(new X.SetLayout(t))}}return Object(y.__decorate)([Object(O.e)($m.getMenuOpen),Object(y.__metadata)("design:type",Z.a)],e.prototype,"menuOpen$",void 0),Object(y.__decorate)([Object(O.e)($m.getCanTouch),Object(y.__metadata)("design:type",Z.a)],e.prototype,"canTouch$",void 0),Object(y.__decorate)([Object(O.e)(wm.getShowLabels),Object(y.__metadata)("design:type",Z.a)],e.prototype,"showLabels$",void 0),e})();var gj=l.vb({encapsulation:0,styles:[[".view-menu-column[_ngcontent-%COMP%]{position:absolute;top:0;right:0;z-index:10000;height:100%}.view-menu-scrim[_ngcontent-%COMP%]{background:rgba(0,0,0,.2);display:-webkit-box;display:flex;position:fixed;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;top:0;bottom:0;left:0;right:0;-webkit-transition:background-color 250ms,opacity 250ms;transition:background-color 250ms,opacity 250ms;z-index:10000}.view-menu-scrim[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:var(--view-loader-scrim-bg--hover)}"]],data:{animation:[{type:7,name:"slideInOut",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translateX(320px)"},offset:null},{type:4,styles:{type:6,styles:{transform:"*"},offset:null},timings:"200ms ease-out"}],options:null},{type:1,expr:":leave",animation:[{type:4,styles:{type:6,styles:{transform:"translateX(320px)"},offset:null},timings:"200ms"}],options:null}],options:{}}]}});function hj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"div",[["class","view-menu-scrim"]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCloseClick()&&l),l}),null,null))],null,null)}function mj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"span",[["class","text-dim"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["(On)"]))],null,null)}function xj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"span",[["class","text-dim"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["(Off)"]))],null,null)}function fj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["app-view-list-item",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleHelpShortcutsClick()&&l),l}),cj,rj)),l.wb(1,114688,null,0,sj,[],null,null),(e()(),l.Rb(-1,0,["Keyboard Shortcuts"]))],(function(e,t){e(t,1,0)}),null)}function _j(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,61,"app-view-column",[["class","view-menu-column"],["placement","right"]],[[24,"@slideInOut",0]],null,null,T_,M_)),l.wb(1,114688,null,0,P_,[],{placement:[0,"placement"]},null),(e()(),l.xb(2,0,null,1,59,"nav",[["app-view-list-container",""]],null,null,null,dj,pj)),l.wb(3,114688,null,0,uj,[],null,null),(e()(),l.xb(4,0,null,0,3,"app-view-panel",[["padding","dense"]],null,null,null,L_,J_)),l.wb(5,114688,null,0,I_,[],{showHeader:[0,"showHeader"],padding:[1,"padding"]},null),(e()(),l.xb(6,0,null,1,1,"app-view-logo",[],null,null,null,Mw,kw)),l.wb(7,114688,null,0,jw,[],null,null),(e()(),l.xb(8,0,null,0,4,"app-view-panel",[["padding","dense"]],null,null,null,L_,J_)),l.wb(9,114688,null,0,I_,[],{showHeader:[0,"showHeader"],padding:[1,"padding"]},null),(e()(),l.xb(10,0,null,1,2,"button",[["app-view-list-item",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleCloseClick()&&l),l}),cj,rj)),l.wb(11,114688,null,0,sj,[],null,null),(e()(),l.Rb(-1,0,[" Close "])),(e()(),l.xb(13,0,null,0,16,"app-view-panel",[["padding","dense"]],null,null,null,L_,J_)),l.wb(14,114688,null,0,I_,[],{showHeader:[0,"showHeader"],padding:[1,"padding"]},null),(e()(),l.xb(15,0,null,1,4,"button",[["app-view-list-item",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleToggleToolbar("tools")&&l),l}),cj,rj)),l.wb(16,114688,null,0,sj,[],null,null),(e()(),l.xb(17,0,null,0,1,"app-icon",[["class","mr-3"],["icon","pen"]],null,null,null,he,ge)),l.wb(18,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.Rb(-1,0,[" Open Explore Tools "])),(e()(),l.xb(20,0,null,1,4,"button",[["app-view-list-item",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleToggleToolbar("media")&&l),l}),cj,rj)),l.wb(21,114688,null,0,sj,[],null,null),(e()(),l.xb(22,0,null,0,1,"app-icon",[["class","mr-3"],["icon","play"]],null,null,null,he,ge)),l.wb(23,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.Rb(-1,0,[" Open Media Controls "])),(e()(),l.xb(25,0,null,1,4,"button",[["app-view-list-item",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleSearchClick()&&l),l}),cj,rj)),l.wb(26,114688,null,0,sj,[],null,null),(e()(),l.xb(27,0,null,0,1,"app-icon",[["class","mr-3"],["icon","search"]],null,null,null,he,ge)),l.wb(28,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.Rb(-1,0,[" Search Anatomy "])),(e()(),l.xb(30,0,null,0,6,"app-view-panel",[["padding","dense"]],null,null,null,L_,J_)),l.wb(31,114688,null,0,I_,[],{showHeader:[0,"showHeader"],padding:[1,"padding"]},null),(e()(),l.xb(32,0,null,1,4,"button",[["app-view-list-item",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleFullscreenClick()&&l),l}),cj,rj)),l.wb(33,114688,null,0,sj,[],null,null),(e()(),l.xb(34,0,null,0,1,"app-icon",[["class","mr-3"],["icon","expand"]],null,null,null,he,ge)),l.wb(35,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.Rb(-1,0,[" Enter Fullscreen "])),(e()(),l.xb(37,0,null,0,13,"app-view-panel",[["padding","dense"]],null,null,null,L_,J_)),l.wb(38,114688,null,0,I_,[],{showHeader:[0,"showHeader"],padding:[1,"padding"]},null),(e()(),l.xb(39,0,null,1,11,"button",[["app-view-list-item",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleToggleLabelsClick()&&l),l}),cj,rj)),l.wb(40,114688,null,0,sj,[],null,null),(e()(),l.xb(41,0,null,0,1,"app-icon",[["class","mr-3"],["icon","tag"]],null,null,null,he,ge)),l.wb(42,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.xb(43,0,null,0,1,"span",[["class","mr-3"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,["Toggle Labels"])),(e()(),l.nb(16777216,null,0,2,null,mj)),l.wb(46,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,0,2,null,xj)),l.wb(49,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(51,0,null,0,10,"app-view-panel",[["padding","dense"]],null,null,null,L_,J_)),l.wb(52,114688,null,0,I_,[],{showHeader:[0,"showHeader"],padding:[1,"padding"]},null),(e()(),l.xb(53,0,null,1,2,"button",[["app-view-list-item",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleTutorialClick()&&l),l}),cj,rj)),l.wb(54,114688,null,0,sj,[],null,null),(e()(),l.Rb(-1,0,["Launch Tutorial"])),(e()(),l.xb(56,0,null,1,2,"button",[["app-view-list-item",""]],null,[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleHelpBasicsClick()&&l),l}),cj,rj)),l.wb(57,114688,null,0,sj,[],null,null),(e()(),l.Rb(-1,0,["3D Navigation Basics"])),(e()(),l.nb(16777216,null,1,2,null,fj)),l.wb(60,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,1,0,"right"),e(t,3,0),e(t,5,0,!1,"dense"),e(t,7,0),e(t,9,0,!1,"dense"),e(t,11,0),e(t,14,0,!1,"dense"),e(t,16,0),e(t,18,0,"pen"),e(t,21,0),e(t,23,0,"play"),e(t,26,0),e(t,28,0,"search"),e(t,31,0,!1,"dense"),e(t,33,0),e(t,35,0,"expand"),e(t,38,0,!1,"dense"),e(t,40,0),e(t,42,0,"tag"),e(t,46,0,l.Sb(t,46,0,l.Jb(t,47).transform(n.showLabels$))),e(t,49,0,!l.Sb(t,49,0,l.Jb(t,50).transform(n.showLabels$))),e(t,52,0,!1,"dense"),e(t,54,0),e(t,57,0),e(t,60,0,!l.Sb(t,60,0,l.Jb(t,61).transform(n.canTouch$)))}),(function(e,t){e(t,0,0,void 0)}))}function yj(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,2,null,hj)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,_j)),l.wb(4,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,1,0,l.Sb(t,1,0,l.Jb(t,2).transform(n.menuOpen$))),e(t,4,0,l.Sb(t,4,0,l.Jb(t,5).transform(n.menuOpen$)))}),null)}let Oj=(()=>{class e{constructor(e,t,n){this.viewService=e,this.layoutService=t,this.changeDetectorRef=n,this.ngUnsubscribe=new K.a,this.isIn=!1}ngOnInit(){Object(Du.b)(this.chapter$,this.layout$).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.isIn=t.column.status===vm.Collapse,this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}isVisible(){return this.layoutService.isVisible(ax.ColumnToggle)}handleToggleClick(){this.viewService.toggleColumn(),this.viewService.toggleSearch(!1),this.viewService.toggleNodeInfo(!1),this.viewService.toggleLabelInfo(!1),this.changeDetectorRef.markForCheck()}}return Object(y.__decorate)([Object(O.e)($m.getLayout),Object(y.__metadata)("design:type",Z.a)],e.prototype,"layout$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapter),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapter$",void 0),e})();var wj=l.vb({encapsulation:2,styles:[[".view-column-toggle{background:#fff;color:#131c2a;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3);background:var(--view-column-toggle-background);box-shadow:var(--view-column-toggle-shadow);color:var(--view-column-toggle-color);border-radius:0 4px 4px 0;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;width:24px;height:48px}.view-column-toggle:hover{background-color:#131c2a;background-color:var(--view-column-toggle-background--hover);cursor:pointer}"]],data:{animation:[{type:7,name:"show",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{opacity:0,transform:"translateX(-32px)"},offset:null},{type:4,styles:{type:6,styles:{opacity:1,transform:"*"},offset:null},timings:"300ms ease-in-out"}],options:null},{type:1,expr:":leave",animation:[{type:4,styles:{type:6,styles:{transform:"translateX(-32px)",opacity:0},offset:null},timings:"300ms ease-in-out"}],options:null}],options:{}}]}});function vj(e){return l.Tb(0,[(e()(),l.xb(0,16777216,null,null,3,"div",[["class","view-column-toggle"],["matTooltipPosition","right"]],[[24,"@show",0]],[[null,"click"],[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(e,t,n){var i=!0,a=e.component;return"longpress"===t&&(i=!1!==l.Jb(e,1).show()&&i),"keydown"===t&&(i=!1!==l.Jb(e,1)._handleKeydown(n)&&i),"touchend"===t&&(i=!1!==l.Jb(e,1)._handleTouchend()&&i),"click"===t&&(i=!1!==a.handleToggleClick()&&i),i}),null,null)),l.wb(1,212992,null,0,tt.d,[Qe.a,l.l,nt.f,l.S,l.B,lt.a,_e.c,_e.e,tt.b,[2,et.b],[2,tt.a],[2,it.f]],{position:[0,"position"],message:[1,"message"]},null),(e()(),l.xb(2,0,null,null,1,"app-icon",[],null,null,null,he,ge)),l.wb(3,114688,null,0,be,[],{icon:[0,"icon"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,1,0,"right",n.isIn?"Show Column":"Hide Column"),e(t,3,0,n.isIn?"caret-right":"caret-left")}),(function(e,t){e(t,0,0,void 0)}))}function Cj(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,1,null,vj)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,t.component.isVisible())}),null)}var jj=n("imBb"),kj=n("7sSR");let Sj=(()=>{class e{constructor(e,t){this.storyLoadProgress=e,this.chunkLoadProgress=t}}return e.type="[Engine Progress] set progress",e})();const Pj={storyLoadProgress:0,chunkLoadProgress:0};let Mj=(()=>{let e=class{constructor(e){this.store=e}static getStoryLoadProgress(e){return e.storyLoadProgress}static getChunkLoadProgress(e){return e.chunkLoadProgress}setProgress(e,t){e.patchState({storyLoadProgress:t.storyLoadProgress,chunkLoadProgress:t.chunkLoadProgress})}};return Object(y.__decorate)([Object(O.a)(Sj),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Sj]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setProgress",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object]),Object(y.__metadata)("design:returntype",void 0)],e,"getStoryLoadProgress",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object]),Object(y.__metadata)("design:returntype",void 0)],e,"getChunkLoadProgress",null),Object(y.__decorate)([Object(O.g)({name:"engineProgress",defaults:Pj})],e)})();const Tj=64;let Ij=(()=>{class e{constructor(e,t,n,l,i,a,o,s,r){this.activatedRoute=e,this.renderer=t,this.store=n,this.viewService=l,this.changeDetectorRef=i,this.actions=a,this.layoutService=o,this.engineService=s,this.title=r,this.breakpoint=nx,this.viewLayoutStatus=vm,this.viewMode=Vm,this.viewLayout=ax,this.viewWindow=Em,this.columnLayoutStatus=vm.Hide,this.drawerExpandable=!0,this.drawerOpen=!1,this.drawerY=0,this.loadLabel="",this.loadProgress=0,this.isBackgroundLight=!0,this.selectedChapterLoading=!1,this.viewToolsMode=UO,this.testSelectors=NO,this.ngUnsubscribe=new K.a}ngOnInit(){this.resetScene();const e=this.viewService.normalizeQueryParams(this.activatedRoute.snapshot.queryParams);this.viewService.initStory(e.id,e.type,e.lang)}ngAfterViewInit(){this.store.dispatch(new Ja({tag:!0,pin:!1})),this.store.dispatch(new Di(!0));const e=this.store.selectSnapshot($m.getLayout).loader.template===jm.Bar;this.store.dispatch(new Ii(e)),this.checkCapabilities(),this.initSizeObservers(),this.initLayoutObserver(),this.initBreakpointObservers(),this.initKeyboardObserver(),this.initLoadProgressObserver(),this.initWindowObserver(),this.initBackgroundColorObserver(),this.initResponsiveLabels(),this.initNodeObserver(),this.initChapterObserver(),this.positionRelativeElements(this.drawerY)}ngOnDestroy(){this.store.dispatch(new bi(!1)),this.store.dispatch(new Sj(0,0)),Sm.isFullscreen()&&Sm.exitFullscreen(),this.unbindKeyboard(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}checkCapabilities(){const e=this.renderer.listen("window","mouseover",()=>{e(),this.store.dispatch(new X.SetCanHover(!0))}),t="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;this.store.dispatch(new X.SetCanTouch(t)),this.store.dispatch(new X.SetCanFullscreen(Sm.canFullscreen()))}initBreakpointObservers(){this.breakpoint$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.handleResize()})}initResponsiveLabels(){const e=Object(Zd.a)(window,"resize").pipe(Object(Qo.a)(100)),t=this.store.select($m.getLabelsBreakpoint),n=this.store.select(Br.getSelectedLabel),l=this.store.select(Br.getLabelsCollapsed);n.pipe(Object(Q.a)(()=>this.store.selectSnapshot(Br.getLabelsCollapsed)),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.viewService.toggleLabelInfo(!!e)}),l.pipe(Object(Q.a)(()=>!!this.store.selectSnapshot(Br.getSelectedLabel)),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.viewService.toggleLabelInfo(e)}),Object(Du.b)(e,t).pipe(Object(Q.a)(([,e])=>!Object(Mt.isNil)(e)),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.checkLabelsCollapsed()}),this.checkLabelsCollapsed()}initSizeObservers(){const e=kj({strategy:"scroll"});Object(Zd.a)(window,"resize").pipe(Object(Qo.a)(10),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.updateViewHeight()}),new Z.a(t=>{e.listenTo(this.engineContainer.nativeElement,()=>{t.next()})}).pipe(Object(Qo.a)(10)).subscribe(()=>{this.resizeEngineContainer()})}initLayoutObserver(){this.layout$.pipe(Object(Q.a)(e=>null!=e),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.refreshLayout()})}initKeyboardObserver(){this.inputEnabled$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{e?this.bindKeyboard():this.unbindKeyboard()})}initNodeObserver(){this.actions.pipe(Object(O.l)(Ci),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.viewService.delegateNodeClick(e.node,e.event)}),this.store.select(Xs.getSelectedNode).pipe(Object(Ee.a)(),Object(Y.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{const n=Object(Mt.get)(e,"objectId",void 0),l=Object(Mt.get)(t,"objectId",void 0);void 0!==t&&n===l||this.viewService.toggleNodeInfo(!1)})}initChapterObserver(){this.store.select(Nr.getSelectedChapterId).pipe(Object(Q.a)(e=>null!=e),Object(u.a)(()=>this.store.selectSnapshot(Nr.getSelectedChapter)),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.viewService.initChapter(e),this.setPageTitle(e),this.refreshLayout()})}initLoadProgressObserver(){const e=this.store.select(Mj.getChunkLoadProgress),t=this.store.select(Tc.getLoadingChunk);Object(Du.b)(e,t).pipe(Object(Q.a)(()=>{const e=this.store.selectSnapshot(Tc.getLoadChunks);return null!==e&&e.length>0}),Object(Ee.a)(),Object(Q.a)(([[e,t],[n,l]])=>e!==n),Object(Y.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{const n=t[0],l=t[1];this.selectedChapterLoading=null!==l&&l.chapterId===this.store.selectSnapshot(Nr.getSelectedChapterId),this.loadProgress=this.selectedChapterLoading?100*n:100,this.store.dispatch(new X.ToggleWindow(Em.Loader,this.selectedChapterLoading)),this.engineService.fireEvent(Wo.HumanProgress,{progress:this.loadProgress}),this.changeDetectorRef.markForCheck()})}initWindowObserver(){this.viewWindow$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.viewService.resetLayout(),e===Em.Tutorial?(this.viewService.resetChapter(),this.viewService.toggleLabels(!1)):this.viewService.toggleLabels(!0)})}initBackgroundColorObserver(){this.background$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{if(!e.colors)return;const t=e.colors.slice(0,3);this.isBackgroundLight=Ye.isLight([t[0],t[1],t[2]]),this.changeDetectorRef.markForCheck()})}handleColumnToggle(){this.viewService.toggleColumn(),this.changeDetectorRef.markForCheck()}handleDrawerOffsetChange(e){this.drawerY=e,this.drawerOpen=e!==-Tj,this.positionRelativeElements(this.drawerY)}checkLabelsCollapsed(){const e=this.store.selectSnapshot(ix.getBreakpoint),t=this.store.selectSnapshot($m.getLabelsBreakpoint),n=this.isLabelBreaking(t);this.store.dispatch(new Ia(n,e>=nx.Large?ba.Toggle:ba.None))}isLabelBreaking(e){return window.innerWidth<e}bindKeyboard(){jj.bind("1",()=>this.viewService.selectTool(fm.Select)),jj.bind("2",()=>this.viewService.selectTool(fm.Hide)),jj.bind("3",()=>this.viewService.selectTool(fm.Fade)),jj.bind("mod+,",e=>{e.preventDefault(),this.viewService.toggleColumn(),this.changeDetectorRef.markForCheck()}),jj.bind(["command+enter","ctrl+enter","command+p"],e=>{e.preventDefault(),Sm.toggleFullscreen()}),jj.bind("meta+z",e=>{e.preventDefault(),this.viewService.undo()}),jj.bind(["meta+y","meta+shift+z"],e=>{e.preventDefault(),this.viewService.redo()}),jj.bind([".","pagedown"],()=>this.viewService.nextChapter()),jj.bind([",","pageup"],()=>this.viewService.previousChapter()),jj.bind(["del","backspace"],e=>{e.preventDefault(),this.viewService.hideSelectedStructures()}),jj.bind("R",e=>{e.preventDefault(),this.viewService.resetChapter()}),jj.bind("/",()=>this.viewService.toggleSearch()),jj.bind("?",()=>this.viewService.toggleHelp()),jj.bind("space",e=>{e.preventDefault(),this.viewService.toggleAnimation()})}unbindKeyboard(){jj.reset()}resizeEngineContainer(){const{offsetLeft:e,offsetTop:t,offsetWidth:n,offsetHeight:l}=this.engineContainer.nativeElement,i=new Wh(e,t,n,l,Gh.Shown);this.store.dispatch(new $i(i))}updateViewHeight(){const e=.01*window.innerHeight;this.view.nativeElement.style.setProperty("--vh",`${e}px`)}handleResize(){this.viewService.resetLayout()}resetScene(){this.store.dispatch(new bi(!0)),this.store.dispatch(new mi(!1)),this.engineService.getEvent(Wo.AssetsLoadProgress).pipe(Object(Au.a)(1),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new mi(!0))})}refreshLayout(){const e=this.store.selectSnapshot($m.getLayout);this.columnLayoutStatus=e.column.status,this.updateViewHeight(),this.resizeEngineContainer(),this.store.dispatch(new Pa(!1!==e.anatomyLabels.enable,!1!==e.nodeInfo.enable,!0)),setTimeout(()=>{this.drawer?this.positionRelativeElements(this.drawerY):this.positionRelativeElements()})}positionRelativeElements(e=0){const t=this.store.selectSnapshot(ix.getBreakpoint),n=this.isVisible(ax.Drawer),l=this.isVisible(ax.Camera);this.isVisible(ax.Menu),null!=this.viewCameraBar&&l&&this.renderer.setStyle(this.viewCameraBar.nativeElement,"transform","translate3d(-4px, 0px, 0)"),this.renderer.setStyle(this.viewToolbar.nativeElement,"transform",`translate3d(${l?-60:-8}px, 0, 0)`),this.renderer.setStyle(this.viewSceneBase.nativeElement,"transform",`translate3d(0, ${t>nx.Medium?-8:n?e+Tj-8:-8}px, 0)`)}isVisible(e){return this.layoutService.isVisible(e)}isEnabled(e){return this.layoutService.isLayoutEnabled(e)}setPageTitle(e){const t=Object(Mt.get)(e,"info.displayName");this.title.setTitle(`${t?`${t} | `:""}BioDigital Human Platform`)}}return Object(y.__decorate)([Object(O.e)($m.getLayout),Object(y.__metadata)("design:type",Z.a)],e.prototype,"layout$",void 0),Object(y.__decorate)([Object(O.e)($m.getInputEnabled),Object(y.__metadata)("design:type",Z.a)],e.prototype,"inputEnabled$",void 0),Object(y.__decorate)([Object(O.e)($m.getFullscreenActive),Object(y.__metadata)("design:type",Z.a)],e.prototype,"fullscreenActive$",void 0),Object(y.__decorate)([Object(O.e)($m.getDrawerCoversContent),Object(y.__metadata)("design:type",Z.a)],e.prototype,"drawerCoversContent$",void 0),Object(y.__decorate)([Object(O.e)($m.getInteractType),Object(y.__metadata)("design:type",Z.a)],e.prototype,"interactType$",void 0),Object(y.__decorate)([Object(O.e)($m.getShowHelpTab),Object(y.__metadata)("design:type",Z.a)],e.prototype,"showHelpTab$",void 0),Object(y.__decorate)([Object(O.e)($m.getUsePrintImage),Object(y.__metadata)("design:type",Z.a)],e.prototype,"usePrintImage$",void 0),Object(y.__decorate)([Object(O.e)($m.getOpenWindow),Object(y.__metadata)("design:type",Z.a)],e.prototype,"viewWindow$",void 0),Object(y.__decorate)([Object(O.e)(Mj.getStoryLoadProgress),Object(y.__metadata)("design:type",Z.a)],e.prototype,"loadProgress$",void 0),Object(y.__decorate)([Object(O.e)(ix.getBreakpoint),Object(y.__metadata)("design:type",Z.a)],e.prototype,"breakpoint$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapter),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapter$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getChaptersLoaded),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chaptersLoaded$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterBackground),Object(y.__metadata)("design:type",Z.a)],e.prototype,"background$",void 0),e})();var Jj=l.vb({encapsulation:2,styles:[[".view-page{border:var(--view-page-border);width:100vw;height:100vh;height:calc(var(--vh,1vh) * 100);max-height:100vh;overflow:hidden;-webkit-transition:padding-left 250ms;transition:padding-left 250ms}.view-page--column-in{padding-left:320px}.view-page--column-out{padding-left:0}.view-page--drawer-push{padding-bottom:64px}.view-page__column{height:100%}.view-page__column-toggle{position:absolute;top:50%;margin-top:-18px;left:0;z-index:10}.view-page__engine{width:100%;height:100%;position:relative}.view-page__menu{position:absolute;right:8px;bottom:0;z-index:30}.view-page__camera-bar{position:absolute;bottom:0;right:0;z-index:20;width:52px}.view-page__logo{display:inline-block;position:absolute;left:16px;bottom:0;z-index:10}.view-page__menubar{position:absolute;top:0;left:0;right:0;z-index:20}.view-page__media-bar{position:absolute;left:50%;margin-left:-100px;width:200px;bottom:0;z-index:10;-webkit-box-pack:center;justify-content:center}.view-page__media-bar:not([hidden]){display:-webkit-box;display:flex}.view-page__title-only{position:fixed;top:8px;left:8px;max-width:304px;z-index:10;padding:12px;border-radius:4px;background:rgba(255,255,255,.8);box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3);color:#131c2a;background-color:var(--view-title-background);box-shadow:var(--view-title-shadow)}.view-page__scene-base{position:absolute;left:0;bottom:0;right:0;z-index:10;-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}.view-page__toolbar{position:absolute;display:inline-block;z-index:20;bottom:0;right:0;-webkit-transition:-webkit-transform 250ms;transition:-webkit-transform 250ms;transition:transform 250ms;transition:transform 250ms,-webkit-transform 250ms}.view-page__undo{position:absolute;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;left:0;top:8px;z-index:20;width:100%}.view-block-input{position:fixed;top:0;bottom:0;left:0;right:0;z-index:10000}"]],data:{}});function zj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-column-container",[],null,null,null,SO,wO)),l.wb(1,245760,null,0,OO,[rx,ox,l.i],null,null)],(function(e,t){e(t,1,0)}),null)}function Lj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"div",[["class","view-page__title-only"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-view-title",[["layout","column"]],null,null,null,B_,H_)),l.wb(2,245760,null,0,N_,[ox,l.i],null,null)],(function(e,t){e(t,2,0)}),null)}function Ej(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-toolbar",[["position","right"]],null,null,null,Cw,yw)),l.wb(1,114688,null,0,_w,[O.i,l.i,ox,rx],{position:[0,"position"]},null)],(function(e,t){e(t,1,0,"right")}),null)}function Aj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"div",[["class","view-page__logo"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,2,"app-view-logo",[],null,null,null,Mw,kw)),l.wb(2,114688,null,0,jw,[],{logoSize:[0,"logoSize"],logoColor:[1,"logoColor"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,2,0,l.Sb(t,2,0,l.Jb(t,3).transform(n.breakpoint$))>n.breakpoint.Small?"full":"small",n.isBackgroundLight?"color":"white")}),null)}function Fj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-engine-camera-bar",[],null,null,null,Dw,Iw)),l.wb(1,245760,null,0,Tw,[O.i],{showNav:[0,"showNav"],showResetScene:[1,"showResetScene"]},null)],(function(e,t){var n=t.component;e(t,1,0,n.isVisible(n.viewLayout.Camera),n.isVisible(n.viewLayout.Reset))}),null)}function Rj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-view-drawer",[],null,[[null,"atMinimumChange"],[null,"offsetYChange"]],(function(e,t,n){var l=!0,i=e.component;return"atMinimumChange"===t&&(l=!1!==i.handleDrawerMinimumChange(n)&&l),"offsetYChange"===t&&(l=!1!==i.handleDrawerOffsetChange(n)&&l),l}),ov,Kw)),l.wb(2,4440064,[[8,4],["drawer",4]],0,Xw,[l.H,l.i,rx,O.i,ox],null,{offsetYChange:"offsetYChange"})],(function(e,t){e(t,2,0)}),null)}function Dj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"div",[["class","view-block-input"]],null,null,null,null,null))],null,null)}function Uj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"app-view-help",[],null,null,null,Pv,hv)),l.wb(1,4308992,null,0,gv,[l.H,rx],{activeTab:[0,"activeTab"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,1,0,l.Sb(t,1,0,l.Jb(t,2).transform(n.showHelpTab$)))}),null)}function Nj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"app-view-progress",[["label","Loading..."]],null,null,null,Iv,Tv)),l.wb(1,4440064,null,0,Mv,[l.H,l.i],{show:[0,"show"],percent:[1,"percent"],label:[2,"label"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,1,0,l.Sb(t,1,0,l.Jb(t,2).transform(n.viewWindow$))===n.viewWindow.Loader,n.loadProgress,"Loading...")}),null)}function Hj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-play-loader",[],null,null,null,Lv,zv)),l.wb(1,4440064,null,0,Jv,[l.H],{percent:[0,"percent"]},null)],(function(e,t){e(t,1,0,t.component.loadProgress)}),null)}function Bj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-button-loader",[],null,null,null,Fv,Av)),l.wb(1,114688,null,0,Ev,[],null,null)],(function(e,t){e(t,1,0)}),null)}function $j(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-hand-loader",[],null,null,null,Uv,Dv)),l.wb(1,114688,null,0,Rv,[],null,null)],(function(e,t){e(t,1,0)}),null)}function Vj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,10,"app-view-loader",[],null,null,null,Bv,Hv)),l.wb(1,180224,null,0,Nv,[l.H,rx,O.b],null,null),(e()(),l.nb(16777216,null,0,2,null,Hj)),l.wb(3,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,0,2,null,Bj)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,0,2,null,$j)),l.wb(9,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,3,0,"play"===l.Sb(t,3,0,l.Jb(t,4).transform(n.interactType$))),e(t,6,0,"button"===l.Sb(t,6,0,l.Jb(t,7).transform(n.interactType$))),e(t,9,0,"hand"===l.Sb(t,9,0,l.Jb(t,10).transform(n.interactType$)))}),null)}function Wj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-tour",[],null,null,null,NC,AC)),l.wb(1,4440064,null,0,EC,[O.i,rx,Rs,el,l.H],null,null)],(function(e,t){e(t,1,0)}),null)}function Gj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-annotate",[],null,null,null,lj,tj)),l.wb(1,4440064,null,0,ej,[O.i,O.b,rx,Lt,l.i],null,null)],(function(e,t){e(t,1,0)}),null)}function qj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-print",[],null,[["window","beforeprint"],["window","afterprint"]],(function(e,t,n){var i=!0;return"window:beforeprint"===t&&(i=!1!==l.Jb(e,1).beforePrint()&&i),"window:afterprint"===t&&(i=!1!==l.Jb(e,1).afterPrint()&&i),i}),oj,aj)),l.wb(1,245760,null,0,ij,[O.i,l.i],null,null)],(function(e,t){e(t,1,0)}),null)}function Xj(e){return l.Tb(2,[l.Pb(402653184,1,{engineContainer:0}),l.Pb(402653184,2,{viewContainer:0}),l.Pb(402653184,3,{view:0}),l.Pb(671088640,4,{viewCameraBar:0}),l.Pb(671088640,5,{viewLogo:0}),l.Pb(402653184,6,{viewSceneBase:0}),l.Pb(671088640,7,{viewToolbar:0}),l.Pb(671088640,8,{drawer:0}),(e()(),l.xb(8,0,[[2,0],["viewContainer",1]],null,26,"div",[],null,null,null,null,null)),(e()(),l.xb(9,0,[[3,0],["view",1]],null,25,"div",[["class","view-page"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(11,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(12,{"view-page--column-in":0,"view-page--column-out":1,"view-page--drawer-push":2}),(e()(),l.nb(16777216,null,null,1,null,zj)),l.wb(14,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(15,0,null,null,1,"app-view-menu-column",[],null,null,null,yj,gj)),l.wb(16,114688,null,0,bj,[O.i,rx],null,null),(e()(),l.nb(16777216,null,null,2,null,Lj)),l.wb(18,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(20,0,[[1,0],["engineContainer",1]],null,14,"div",[["class","view-page__engine"]],null,null,null,null,null)),(e()(),l.xb(21,0,null,null,2,"div",[["class","view-page__column-toggle"]],null,null,null,null,null)),(e()(),l.xb(22,0,null,null,1,"app-view-column-toggle",[],null,null,null,Cj,wj)),l.wb(23,245760,null,0,Oj,[rx,ox,l.i],null,null),(e()(),l.xb(24,0,[[6,0],["viewSceneBase",1]],null,8,"div",[["class","view-page__scene-base"]],null,null,null,null,null)),(e()(),l.xb(25,0,[[7,0],["viewToolbar",1]],null,2,"div",[["class","view-page__toolbar"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Ej)),l.wb(27,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Aj)),l.wb(29,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(30,0,[[4,0],["viewCameraBar",1]],null,2,"div",[["class","view-page__camera-bar"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Fj)),l.wb(32,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,1,null,Rj)),l.wb(34,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,2,null,Dj)),l.wb(36,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,Uj)),l.wb(39,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,Nj)),l.wb(42,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,Vj)),l.wb(45,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,Wj)),l.wb(48,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,Gj)),l.wb(51,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,2,null,qj)),l.wb(54,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component,i=e(t,12,0,n.isVisible(n.viewLayout.Column),!n.isVisible(n.viewLayout.Column),n.isVisible(n.viewLayout.Drawer));e(t,11,0,"view-page",i),e(t,14,0,n.isVisible(n.viewLayout.Column)||n.isVisible(n.viewLayout.Search)||n.isVisible(n.viewLayout.NodeInfo)),e(t,16,0);var a,o=null;e(t,18,0,n.isVisible(n.viewLayout.TitleOnly)&&(null==(o=l.Sb(t,18,0,l.Jb(t,19).transform(n.chapter$)))?null:o.info.displayName)),e(t,23,0),e(t,27,0,n.isVisible(n.viewLayout.Toolbar)),e(t,29,0,n.isVisible(n.viewLayout.Logo)),e(t,32,0,n.isVisible(n.viewLayout.Camera)),e(t,34,0,n.isVisible(n.viewLayout.Drawer)),e(t,36,0,!l.Sb(t,36,0,l.Jb(t,37).transform(n.inputEnabled$))),e(t,39,0,l.Sb(t,39,0,l.Jb(t,40).transform(n.viewWindow$))===n.viewWindow.Help),e(t,42,0,"circle"===(null==(a=l.Sb(t,42,0,l.Jb(t,43).transform(n.layout$)))?null:a.loader.template)),e(t,45,0,l.Sb(t,45,0,l.Jb(t,46).transform(n.viewWindow$))===n.viewWindow.Interact),e(t,48,0,l.Sb(t,48,0,l.Jb(t,49).transform(n.viewWindow$))===n.viewWindow.Tutorial),e(t,51,0,l.Sb(t,51,0,l.Jb(t,52).transform(n.viewWindow$))===n.viewWindow.Annotate),e(t,54,0,l.Sb(t,54,0,l.Jb(t,55).transform(n.usePrintImage$)))}),null)}function Kj(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-view-page",[],null,null,null,Xj,Jj)),l.wb(1,4440064,null,0,Ij,[d.a,l.H,O.i,rx,l.i,O.b,ox,Rs,it.h],null,null)],(function(e,t){e(t,1,0)}),null)}var Zj=l.tb("app-view-page",Ij,Kj,{},{},[]);const Yj={title:"We're unable to find the model you're looking for.",description:'Please check your URL or visit the <a href="/" target="_blank">BioDigital Human</a> to see what\'s available in our 3D model library.'},Qj={title:"Your BioDigital Human embed requires proper authentication.",description:""},ek={[E.InvalidUAID]:{title:"Authentication Issues",description:"Your Human Widget has invalid user credentials.",url:"https://support.biodigital.com"}},tk={title:"WebGL Error",description:"It appears your browser isn't supporting WebGL, the HTML standard used to view 3D graphics."},nk={[function(e){return e[e.Error=1]="Error",e[e.ModernizerNoWebGL=2]="ModernizerNoWebGL",e[e.WebGLNotSupported=3]="WebGLNotSupported",e[e.ShaderCompilationFailure=4]="ShaderCompilationFailure",e[e.ShaderLinkFailure=5]="ShaderLinkFailure",e[e.OutOfVRAM=6]="OutOfVRAM",e[e.WebGLContentLost=7]="WebGLContentLost",e}({}).WebGLNotSupported]:{title:"WebGL Unsupported",description:"It appears your browser isn't supporting WebGL, the HTML standard used to view 3D graphics."}},lk={title:"We're unable to find the page you're looking for.",description:'Please check your URL or return to our <a href="/">homepage</a>.'};class ik{constructor(e,t){this.route=e,this.snackBar=t,this.errorTypeEnum=Bf,this.supportURL="https://support.biodigital.com",this.errorType=Bf.Content}get widgetError(){let e;switch(this.errorType){case Bf.Auth:e=ek[this.errorCode]||Qj;break;case Bf.Engine:e=nk[this.errorCode]||tk;break;case Bf.Content:e=Yj;break;default:e=lk}return e}get title(){return Object(Mt.get)(this.widgetError,"title",lk.title)}get description(){return Object(Mt.get)(this.widgetError,"description",lk.description)}get url(){return Object(Mt.get)(this.widgetError,"url",lk.url)}ngOnInit(){this.initErrorHandling()}initErrorHandling(){const{errorType:e,errorCode:t}=this.route.snapshot.queryParams;this.errorType=e,this.errorCode=t}handleActionClick(e){window.open(e)||this.snackBar.open("Unable to open link in new window, please check your pop-up settings.")}}var ak=l.vb({encapsulation:2,styles:[[".error{margin:120px auto;width:640px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;color:#283853}.error__description a,.error__description a:visited{color:#283853}.error__actions{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.error__action-button{margin-right:12px!important}.error__logo{margin-top:80px;width:240px}@media (max-width:800px),(max-height:480px){.error{margin:80px;width:auto}}@media (max-width:480px),(max-height:360px){.error{margin:40px;width:auto}.error__logo{margin-top:40px;width:160px}}@media (max-width:360px){.error{margin:16px;width:auto}}@media (max-width:300px){.error{margin:8px;width:auto}.error__actions{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.error__action-button{margin-bottom:8px!important}.error__logo{margin-top:16px;width:80%}}"]],data:{}});function ok(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["buttonType","outline"],["class","error__action-button"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.handleActionClick(i.url)&&l),l}),Ze,Ke)),l.wb(2,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Read More"])),(e()(),l.xb(4,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["buttonType","flat"],["class","error__action-button"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.handleActionClick(i.supportURL)&&l),l}),Ze,Ke)),l.wb(5,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Contact Us"]))],(function(e,t){e(t,2,0,"outline","light"),e(t,5,0,"flat","light")}),(function(e,t){e(t,1,0,l.Jb(t,2).disabled),e(t,4,0,l.Jb(t,5).disabled)}))}function sk(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"button",[["app-button",""],["buttonTheme","light"],["buttonType","outline"],["class","error__action-button"]],[[8,"disabled",0]],[[null,"click"]],(function(e,t,n){var l=!0,i=e.component;return"click"===t&&(l=!1!==i.handleActionClick(i.supportURL)&&l),l}),Ze,Ke)),l.wb(1,114688,null,0,Xe,[],{buttonType:[0,"buttonType"],buttonTheme:[1,"buttonTheme"]},null),(e()(),l.Rb(-1,0,["Contact Us"]))],(function(e,t){e(t,1,0,"outline","light")}),(function(e,t){e(t,0,0,l.Jb(t,1).disabled)}))}function rk(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,8,"div",[["class","error"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"div",[["class","error__title text-24 text-bold"]],null,null,null,null,null)),(e()(),l.Rb(2,null,[" "," "])),(e()(),l.xb(3,0,null,null,0,"div",[["class","error__description text-16 mt-8"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l.xb(4,0,null,null,3,"div",[["class","error__actions mt-8"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,ok)),l.wb(6,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l.nb(0,[["defaultActions",2]],null,0,null,sk)),(e()(),l.xb(8,0,null,null,0,"img",[["class","error__logo mt-16"],["src","assets/images/biodigital-logo.svg"]],null,null,null,null,null))],(function(e,t){e(t,6,0,t.component.url,l.Jb(t,7))}),(function(e,t){var n=t.component;e(t,2,0,n.title),e(t,3,0,n.description)}))}function ck(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-widget-error",[],null,null,null,rk,ak)),l.wb(1,114688,null,0,ik,[d.a,rp.c],null,null)],(function(e,t){e(t,1,0)}),null)}var uk=l.tb("app-widget-error",ik,ck,{},{},[]);class pk{constructor(e,t){this.router=e,this.changeDetector=t,this.total=100,this._value=0,this.percentWidth=0,this.ngUnsubscribe=new K.a}get value(){return this._value}set value(e){this._value=e,this.percentWidth=this.value/this.total*100,this.changeDetector.markForCheck()}ngOnInit(){this.router.events.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{e instanceof d.e&&(this.value=0)})}ngOnDestroy(){this.changeDetector.detach(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}var dk=l.vb({encapsulation:0,styles:[["@-webkit-keyframes progressSuccess{0%{width:100%!important;background:#38de38}50%{opacity:1;background:#38de38}100%{opacity:0}}@keyframes progressSuccess{0%{width:100%!important;background:#38de38}50%{opacity:1;background:#38de38}100%{opacity:0}}.progress[_ngcontent-%COMP%]{border-radius:0 1px 1px 0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;height:4px;width:100%}.progress__bar[_ngcontent-%COMP%]{background:#de3838;height:100%;width:0}.progress__bar--complete[_ngcontent-%COMP%]{-webkit-animation:2s linear forwards progressSuccess;animation:2s linear forwards progressSuccess}"]],data:{}});function bk(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,7,"div",[["class","progress"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,6,"div",[["class","progress__bar"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(3,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(4,{"progress__bar--complete":0}),l.Ob(512,null,se.C,se.D,[l.l,l.v,l.H]),l.wb(6,278528,null,0,se.p,[se.C],{ngStyle:[0,"ngStyle"]},null),l.Mb(7,{width:0})],(function(e,t){var n=t.component,l=e(t,4,0,100===n.percentWidth);e(t,3,0,"progress__bar",l);var i=e(t,7,0,n.percentWidth+"%");e(t,6,0,i)}),null)}class gk{constructor(e,t){this.store=e,this.changeDetectorRef=t,this.ngUnsubscribe=new K.a,this.storyLoadProgress=0}ngOnInit(){const e=this.store.select(Mj.getChunkLoadProgress),t=this.store.select(Tc.getLoadingChunk);Object(Du.b)(e,t).pipe(Object(Q.a)(()=>{const e=this.store.selectSnapshot(Tc.getLoadChunks);return null!==e&&e.length>0}),Object(Y.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{const n=null!==t&&t.chapterId===this.store.selectSnapshot(Nr.getSelectedChapterId);this.storyLoadProgress=n?e:1,this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}var hk=l.vb({encapsulation:0,styles:[[".engine-progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;z-index:2;pointer-events:none}"]],data:{}});function mk(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,1,"app-progress",[["class","engine-progress"],["data-test","engineProgress"]],null,null,null,bk,dk)),l.wb(1,245760,null,0,pk,[d.m,l.i],{total:[0,"total"],value:[1,"value"]},null)],(function(e,t){e(t,1,0,1,t.component.storyLoadProgress)}),null)}class xk{constructor(e,t){this.engineService=e,this.changeDetectionRef=t,this.camera={x:0,y:0,z:0,dist:0}}ngOnInit(){this.initCameraListener()}initCameraListener(){this.engineService.getEvent(Wo.CameraUpdated).pipe(Object(Bh.a)(50)).subscribe(e=>{this.camera={x:e.eye.x.toFixed(0),y:e.eye.y.toFixed(0),z:e.eye.z.toFixed(0),dist:e.dist.toFixed(0)},this.changeDetectionRef.markForCheck()})}}var fk=l.vb({encapsulation:0,styles:[[".engine-camera-position[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;color:#fff;font-size:10px;text-shadow:0 0 2px rgba(0,0,0,.8);z-index:10}"]],data:{}});function _k(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,1,"div",[["class","engine-camera-position"]],null,null,null,null,null)),(e()(),l.Rb(1,null,[" X:"," Y:"," Z:"," Dist:","\n"]))],null,(function(e,t){var n=t.component;e(t,1,0,null==n.camera?null:n.camera.x,null==n.camera?null:n.camera.y,null==n.camera?null:n.camera.z,null==n.camera?null:n.camera.dist)}))}const yk=1,Ok=80,wk=100,vk=wk-Ok,Ck=16;let jk=(()=>{class e{constructor(e,t,n,l,i,a,o){this.renderer=e,this.labelsService=t,this.engineService=n,this.cameraService=l,this.store=i,this.actions=a,this.changeDetection=o,this.labelPinType=xs,this.collapsed=!1,this.collapsedMode=ba.None,this.theme="classic",this.pinDraggable=!0,this.tagDraggable=!0,this.emitEvents=!0,this.enginePosition=null,this.isSelected=!1,this.isBackgroundDark=!1,this.descriptionCollapsed=!1,this.tagCollapsed=!1,this.scale=1,this.pinDragging=!1,this.screenshotMode=!1,this.hammerManagers=[],this.displayUpdated$=new K.a,this.positionUpdated$=new K.a,this.ngUnsubscribe=new K.a,this.isIE11=Fx()}get label(){return this._label}set label(e){const t=0===Object.keys(e).length,n=null==this.label||0===Object.keys(this.label).length;t&&!n?(this._label=Object.assign({},e),this.destroyLabel()):t||(this._label=Object.assign({},e),this.initLabel(this.label))}get isCollapsed(){return this.collapsedMode===ba.Toggle?this.collapsed&&!this.isSelected:this.collapsed}ngOnInit(){this.initListeners()}ngAfterViewInit(){this.bindTagEvents(),this.bindPinEvents(),this.bindHoverEvents()}ngOnDestroy(){this.destroyLabel(),this.emitDisplayUpdated({id:this.label.id,inView:!1,shown:!1,objectShown:this.objectShown}),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}destroyLabel(){this.hammerManagers.forEach(e=>e.destroy),this.hammerManagers=[],this.deleteMarker(this.marker)}initListeners(){this.selectedLabel$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>this.handleLabelSelected(e)),this.enginePosition$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.enginePosition=e}),this.engineService.getEvent(Wo.SceneMarkersUpdated).pipe(Object(Q.a)(()=>null!=this.label&&null!=this.enginePosition),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.setCanvasPos()}),this.displayUpdated$.pipe(Object(sg.a)((e,t)=>Object(Mt.isEqual)(e,t)),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.emitEngineEvent(Wo.HotspotsDisplayUpdated,e)}),this.positionUpdated$.pipe(Object(sg.a)((e,t)=>Object(Mt.isEqual)(e,t)),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.emitEngineEvent(Wo.HotspotsPositionUpdated,e)}),this.background$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{const t=e.colors.slice(0,3),n=e.colors.slice(4,7);this.isBackgroundDark=!Ye.isLight(t,n),this.changeDetection.markForCheck()}),this.actions.pipe(Object(O.l)(So),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.screenshotMode=!0,this.changeDetection.detectChanges()}),this.actions.pipe(Object(O.k)(Po),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.screenshotMode=!1,this.changeDetection.markForCheck()})}bindTagEvents(){const e=new $f(this.tagRef.nativeElement,{domEvents:!0});e.get("pan").set({direction:$f.DIRECTION_ALL,threshold:3}),e.on("pan",e=>{if(!this.tagDraggable)return;e.srcEvent.stopPropagation(),this.cachedTagOffset||(this.cachedTagOffset=this.label.offset);const t=[this.cachedTagOffset[0]+e.deltaX,this.cachedTagOffset[1]+e.deltaY];this.label.offset=t,e.isFinal&&(this.cachedTagOffset=null,this.store.dispatch(new ha(this.label.id,t)))}),e.on("tap",e=>{e.srcEvent.preventDefault(),e.srcEvent.stopPropagation(),"BUTTON"===e.target.parentNode.nodeName?this.toggleDescription():this.selectLabel()}),this.hammerManagers.push(e)}bindPinEvents(){const e=new $f(this.pinRef.nativeElement);e.get("pan").set({direction:$f.DIRECTION_ALL,threshold:4}),e.on("pan",e=>{if(!this.pinDraggable)return;e.srcEvent.stopPropagation(),this.pinDragging=!0;let{layerX:t,layerY:n}=e.changedPointers[0];if(t-=Ck,n-=Ck,this.marker&&this.deleteMarker(this.marker),this.renderer.setStyle(this.labelContainerRef.nativeElement,"transform",`translate(${t}px, ${n}px)`),e.isFinal){this.pinDragging=!1;const e=Object.assign({},this.label),l=Human.renderer.pick.pick({canvasPos:[t,n],rayPick:!0}),i="string"==typeof l.objectId;i&&(e.dir=this.cameraService.getDirection(l),e.objectId=l.objectId,e.barycentric=[l.barycentric[0],l.barycentric[1],l.barycentric[2]],e.pos=[l.worldPos[0],l.worldPos[1],l.worldPos[2]],e.primitiveIndex=l.primitiveIndex),this.store.dispatch(new va(e,i))}}),e.on("tap",e=>{e.srcEvent.preventDefault(),e.srcEvent.stopImmediatePropagation(),this.selectLabel()}),this.hammerManagers.push(e)}bindHoverEvents(){const e=this.labelRef.nativeElement;this.renderer.listen(e,"mouseenter",()=>{this.emitEngineEvent(Wo.HotspotsEntered,{id:this.label.id})}),this.renderer.listen(e,"mouseleave",()=>{this.emitEngineEvent(Wo.HotspotsLeft,{id:this.label.id})})}initLabel(e){this.initMarker(e),this.ensureObjectId(e),this.initObjectSubscription(e),this.descriptionCollapsed=e.collapseDescription,this.tagCollapsed=e.hideTag}initMarker(e){this.marker&&this.deleteMarker(this.marker),this.marker=Human.scene.markers.create({id:e.id,pos:e.pos,dir:e.dir,objectId:e.objectId,primitiveIndex:e.primitiveIndex,barycentric:e.barycentric,renderableIndex:e.renderableIndex||0})}checkLabelDisplay(){return{id:this.label.id,shown:this.label.shown,inView:this.isOnCanvas(),objectShown:!0}}ensureObjectId(e){if(!e.objectId){const t=Human.renderer.pick.pick({canvasPos:[this.marker.canvasPos[0],this.marker.canvasPos[1]],rayPick:!0});t.objectId&&(e.objectId=t.objectId,e.states.forEach(e=>{e.errands.forEach(e=>{e.type===vs.flyToObject&&(e.value=t.objectId)})}),this.store.dispatch(new va(e)))}}initObjectSubscription(e){this.object$&&this.object$.unsubscribe(),e.objectId&&(this.object$=this.store.select(wm.getViewGraphNode).pipe(Object(u.a)(t=>t(e.objectId)),Object(Q.a)(e=>!!e),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.objectShown=e.boolState.shown}))}deleteMarker(e){Human.scene.markers.delete(e.id),this.marker=null}toggleDescription(e){this.descriptionCollapsed=e=void 0===e?!this.descriptionCollapsed:e}handleLabelSelected(e){this.isSelected=e&&e.id===this.label.id;const t=Object(Mt.get)(e,"states[1].errands"),n=this.store.selectSnapshot(xm.getLockCamera);this.isSelected&&t&&!n&&t.forEach(e=>{switch(e.type){case vs.flyToObject:this.flyToObject(e.value);break;case vs.flyToCamera:this.flyToPosition(e.value)}this.store.dispatch(new um(!0))}),this.tagCollapsed=!(this.label.title||this.label.description)||(this.label.expandTag&&this.label.hideTag?!this.isSelected:this.label.hideTag),this.descriptionCollapsed=this.label.showDescription&&this.label.collapseDescription?!this.isSelected:this.label.collapseDescription}flyToObject(e){this.store.dispatch(new ji(e))}flyToPosition(e){this.store.dispatch(new Zh(e))}setCanvasPos(){if(this.pinDragging||!this.marker)return;this.depth=-this.marker.viewPos[2];const e=this.isOccluded(),t=this.isOnCanvas(),n=void 0===this.objectShown?t:t&&this.objectShown;n!==this.shown&&(this.shown=n,this.setDisplay(n)),this.setOpacity(e),this.setElementPosition(),this.setElementScale(),this.setTagPosition(),this.setWirePosition();const{0:l,1:i}=this.marker.canvasPos;this.positionUpdated$.next({id:this.label.id,canvasPos:{x:l,y:i},occluded:e})}selectLabel(){const e=this.store.selectSnapshot(Br.getSelectedLabel);this.store.dispatch(new ja(e&&e.id===this.label.id?null:this.label)),this.emitEngineEvent(Wo.HotspotsPicked,{id:this.label.id})}isOccluded(){return!this.isSelected&&this.label.occludable&&(Math.abs(this.marker.viewAngle)>wk||this.marker.occluded||this.depth<0)}isOnCanvas(){const{offsetWidth:e,offsetHeight:t}=this.labelsService.getLabelContainer().nativeElement,[n,l]=this.marker.canvasPos;return n>0&&l>0&&n<e&&l<t}setDisplay(e){this.renderer.setStyle(this.labelRef.nativeElement,"visibility",e?"visible":"hidden"),this.emitDisplayUpdated({id:this.label.id,inView:this.isOnCanvas(),shown:e,objectShown:this.objectShown})}setOpacity(e){let t=yk;e?(this.marker.viewAngle>=Ok&&(t=Math.max(1-(this.marker.viewAngle-Ok)/vk*yk,0)),this.renderer.setStyle(this.labelContainerRef.nativeElement,"opacity",t)):this.renderer.setStyle(this.labelContainerRef.nativeElement,"opacity",1)}setElementPosition(){const e=this.marker.canvasPos;this.renderer.setStyle(this.labelContainerRef.nativeElement,"transform",`translate(${e[0]}px, ${e[1]}px)`)}setElementScale(){const e=this.store.selectSnapshot(wm.getEnginePosition).width;this.scale=e>1440?e/1440:1;const t=32*this.scale-32;this.renderer.setStyle(this.labelRef.nativeElement,"transform-origin","top left"),this.renderer.setStyle(this.labelRef.nativeElement,"transform",`translate(-${t/2}px, -${t/2}px) scale(${this.scale}, ${this.scale})`)}setTagPosition(){const e=this.label.offset,t=this.tagRef.nativeElement.offsetWidth;switch(this.label.offset[0]>0?"left":"right"){case"left":this.renderer.setStyle(this.tagRef.nativeElement,"transform",`translate(${16+e[0]}px, ${e[1]}px)`);break;case"right":this.renderer.setStyle(this.tagRef.nativeElement,"transform",`translate(${16+e[0]-t}px, ${e[1]}px)`)}}setWirePosition(){let[e,t]=this.label.offset;switch(this.label.theme){case fs.Annotation:case fs.Classic:t+=this.titleRef.nativeElement.offsetHeight-16-2}const n=Math.sqrt(e*e+t*t);this.renderer.setStyle(this.wireRef.nativeElement,"width",`${n}px`),this.renderer.setStyle(this.wireRef.nativeElement,"transform",`rotate(${Math.atan2(t,e)}rad)`)}emitDisplayUpdated(e){this.label.id!==hr&&null!=e.inView&&null!=e.shown&&this.displayUpdated$.next(e)}emitEngineEvent(e,t){this.emitEvents&&this.engineService.fireEvent(e,t)}}return Object(y.__decorate)([Object(O.e)(wm.getEnginePosition),Object(y.__metadata)("design:type",Z.a)],e.prototype,"enginePosition$",void 0),Object(y.__decorate)([Object(O.e)(Br.getSelectedLabel),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedLabel$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterBackground),Object(y.__metadata)("design:type",Z.a)],e.prototype,"background$",void 0),e})();var kk=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}@-webkit-keyframes fadeIn{0%{display:none;opacity:0}1%{display:block;opacity:0}100%{opacity:1;display:block}}@keyframes fadeIn{0%{display:none;opacity:0}1%{display:block;opacity:0}100%{opacity:1;display:block}}@-webkit-keyframes fadeOut{0%{display:block;opacity:1}99%{opacity:0}100%{opacity:0;display:none}}@keyframes fadeOut{0%{display:block;opacity:1}99%{opacity:0}100%{opacity:0;display:none}}@-webkit-keyframes glow{0%,100%{box-shadow:0 0 0 rgba(255,255,255,.5)}50%{box-shadow:0 0 8px 2px rgba(255,255,255,.5)}}@keyframes glow{0%,100%{box-shadow:0 0 0 rgba(255,255,255,.5)}50%{box-shadow:0 0 8px 2px rgba(255,255,255,.5)}}@-webkit-keyframes classic-glow{0%,10%,100%,90%{-webkit-transform:scale(.5,.5);transform:scale(.5,.5)}50%{-webkit-transform:scale(1,1);transform:scale(1,1)}}@keyframes classic-glow{0%,10%,100%,90%{-webkit-transform:scale(.5,.5);transform:scale(.5,.5)}50%{-webkit-transform:scale(1,1);transform:scale(1,1)}}.label-container[_ngcontent-%COMP%], [_nghost-%COMP%]{display:block;position:absolute;z-index:10;width:160px;pointer-events:all;pointer-events:none}.label-container[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]:hover{z-index:11}.label-container[_ngcontent-%COMP%]{left:-16px;top:-16px}.label[_ngcontent-%COMP%]{display:block;overflow:visible;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;height:32px}.label--screenshot-mode[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]:after, .label--screenshot-mode[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]:before, .label--screenshot-mode[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{box-shadow:none!important}.label--screenshot-mode[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{display:none!important}.label__pin-type[_ngcontent-%COMP%]{display:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;z-index:2}.label__glow[_ngcontent-%COMP%]{display:none;position:absolute;width:32px;height:32px;border-radius:50%;z-index:0;top:0;left:0}.label--selected[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.label__more[_ngcontent-%COMP%]{color:#374a68;display:none;-webkit-box-flex:0;flex:0 0 16px;height:16px;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out,-webkit-transform 150ms ease-in-out}.label__pin[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:32px;height:32px;border-radius:50%;position:absolute;pointer-events:all;-webkit-transition:background-color .12s;transition:background-color .12s;z-index:10}.label__pin[_ngcontent-%COMP%]:hover{cursor:pointer}.label__pin--draggable[_ngcontent-%COMP%]:hover{cursor:-webkit-grab;cursor:grab}.label__pin--draggable[_ngcontent-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}.label__wire[_ngcontent-%COMP%]{position:absolute;top:16px;left:16px;height:0;-webkit-transform-origin:0 100%;transform-origin:0 100%;pointer-events:none;z-index:1}.label__wire--collapse[_ngcontent-%COMP%]{display:none}.label__tag[_ngcontent-%COMP%]{display:inline-block;left:16px;top:0;z-index:10;max-width:160px;pointer-events:all}.label__tag[_ngcontent-%COMP%]:hover{cursor:pointer}.label__tag--draggable[_ngcontent-%COMP%]:hover{cursor:-webkit-grab;cursor:grab}.label__tag--draggable[_ngcontent-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}.label__tag--collapse[_ngcontent-%COMP%]{display:none}.label__header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.label__title[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:140%;overflow-x:hidden;align-self:center}.label__body[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.label__body--collapse[_ngcontent-%COMP%]{display:none}.label__icon[_ngcontent-%COMP%]{margin:0 -4px 0 4px}.label__actions[_ngcontent-%COMP%]{padding-left:4px}.label--studio.label--glow[_ngcontent-%COMP%]   .label__glow[_ngcontent-%COMP%]{background-color:rgba(255,255,255,.3);display:block;-webkit-animation:4s infinite classic-glow;animation:4s infinite classic-glow}.label--studio.label.label--selected[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]:before{background-color:#fff;border-color:#2d72dc;box-shadow:0 0 0 1px rgba(45,114,220,.7)}.label--studio.label.label--selected[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-color:#2d72dc}.label--studio.label.label--selected[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{background-color:#fff;border-color:#2d72dc;box-shadow:0 0 0 1px rgba(45,114,220,.7)}.label--studio.label.label--selected[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{font-weight:600}.label--studio.label[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]:before{content:' ';border:2px solid transparent;border-radius:50%;box-shadow:0 0 16px rgba(16,24,35,.5);box-sizing:border-box;display:block;position:absolute;height:18px;width:18px;top:7px;left:7px}.label--studio.label[_ngcontent-%COMP%]   .label__pin--circle[_ngcontent-%COMP%]   .label__pin-type--circle[_ngcontent-%COMP%], .label--studio.label[_ngcontent-%COMP%]   .label__pin--minus[_ngcontent-%COMP%]   .label__pin-type--minus[_ngcontent-%COMP%], .label--studio.label[_ngcontent-%COMP%]   .label__pin--plus[_ngcontent-%COMP%]   .label__pin-type--plus[_ngcontent-%COMP%]{display:block;left:7px;top:7px}.label--studio.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-top:1px solid rgba(16,24,35,.5)}.label--studio.label[_ngcontent-%COMP%]   .label__wire--collapse[_ngcontent-%COMP%]{display:none}.label--studio.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{background:rgba(255,255,255,.55);border:1px solid rgba(16,24,35,.5);box-shadow:0 0 24px rgba(16,24,35,.1);padding:4px 8px;border-radius:4px}.label--studio.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.8)}.label--studio.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{color:#101823;-webkit-box-flex:1;flex:1 1 auto;overflow-x:visible}.label--studio.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{color:#374a68;overflow-x:hidden;padding-top:4px}.label--studio.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.label--studio.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic}.label--studio.label[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.label--studio.label.label--invert[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-color:rgba(255,255,255,.5)}.label--annotation.label--glow[_ngcontent-%COMP%]   .label__glow[_ngcontent-%COMP%]{background-color:rgba(255,255,255,.25);display:block;-webkit-animation:4s infinite classic-glow;animation:4s infinite classic-glow;top:-1px;left:-1px}.label--annotation.label.label--selected[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]:before{background-color:#2d72dc}.label--annotation.label[_ngcontent-%COMP%]   .label__pin-type[_ngcontent-%COMP%]{width:16px;height:16px;top:7px;left:7px;z-index:3}.label--annotation.label[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]{border:1px solid transparent;border-radius:50%;position:absolute;z-index:2;cursor:pointer}.label--annotation.label[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]:before{content:' ';background-color:rgba(0,0,0,.25);border-radius:50%;display:block;width:22px;height:22px;position:absolute;z-index:1;top:4px;left:4px}.label--annotation.label[_ngcontent-%COMP%]   .label__pin--circle[_ngcontent-%COMP%]   .label__pin-type--circle[_ngcontent-%COMP%], .label--annotation.label[_ngcontent-%COMP%]   .label__pin--minus[_ngcontent-%COMP%]   .label__pin-type--minus[_ngcontent-%COMP%], .label--annotation.label[_ngcontent-%COMP%]   .label__pin--plus[_ngcontent-%COMP%]   .label__pin-type--plus[_ngcontent-%COMP%]{display:block}.label--annotation.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-top:1px solid #666}.label--annotation.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{text-shadow:0 0 2px rgba(255,255,255,.5);min-width:10px;color:#eee}.label--annotation.label[_ngcontent-%COMP%]   .label__tag--collapsible[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{display:-webkit-box;display:flex;color:#000}.label--annotation.label[_ngcontent-%COMP%]   .label__tag--floating[_ngcontent-%COMP%]   .label__header[_ngcontent-%COMP%]{border-bottom:none}.label--annotation.label[_ngcontent-%COMP%]   .label__header[_ngcontent-%COMP%]{border-bottom:1px solid #666}.label--annotation.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{font-weight:600;min-height:18px;width:100%;padding-bottom:4px;margin-bottom:-2px;color:#000}.label--annotation.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{padding-top:4px;color:#333}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]{text-shadow:0 0 2px rgba(0,0,0,.6)}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-color:#eee}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{text-shadow:none}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__tag--collapsible[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{display:-webkit-box;display:flex;color:#fff}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{color:#fff}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__header[_ngcontent-%COMP%]{border-color:#eee}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{color:#eee}.label--classic.label--glow[_ngcontent-%COMP%]   .label__glow[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.2);display:block;-webkit-animation:4s infinite classic-glow;animation:4s infinite classic-glow}.label--classic.label[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]{border:1px solid transparent;border-radius:50%;position:absolute;z-index:2;cursor:pointer}.label--classic.label[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]:before{content:' ';background-color:rgba(0,0,0,.25);border-radius:50%;display:block;width:32px;height:32px;z-index:1;box-sizing:border-box}.label--classic.label[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]:after{content:' ';display:block;width:18px;height:18px;background-color:rgba(0,0,0,.75);border:1px solid #ccc;border-radius:50%;position:absolute;z-index:2;box-sizing:border-box;top:6px;left:6px}.label--classic.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-top:1px solid #666}.label--classic.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{min-width:10px;color:#eee}.label--classic.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{border-bottom:1px solid #666;min-height:18px;width:100%;padding-bottom:4px;color:#000}.label--classic.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{padding-top:4px;color:#333}.label--context.label[_ngcontent-%COMP%]{pointer-events:none}.label--context.label--glow[_ngcontent-%COMP%]   .label__glow[_ngcontent-%COMP%]{background-color:rgba(255,255,255,.3);display:block;-webkit-animation:4s infinite classic-glow;animation:4s infinite classic-glow}.label--context.label[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%], .label--context.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{display:none}.label--context.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{background:rgba(255,255,255,.7);border:1px solid rgba(16,24,35,.5);box-shadow:0 0 24px rgba(16,24,35,.1);padding:4px 8px;border-radius:4px}.label--context.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.8);cursor:-webkit-grab;cursor:grab}.label--context.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{font-weight:600;color:#101823;overflow-x:hidden}.label--context.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{margin-top:8px;border-top:1px solid #eaeff5;color:#101823;overflow-x:hidden;padding-top:8px}.label--context.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.label--context.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic}"]],data:{}});function Sk(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,0,"img",[["alt",""],["class","label__pin-type label__pin-type--circle"],["draggable","false"],["src","/assets/images/labels/circle-dark.svg"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,0,"img",[["alt",""],["class","label__pin-type label__pin-type--plus"],["draggable","false"],["src","/assets/images/labels/circle-plus-dark.svg"]],null,null,null,null,null)),(e()(),l.xb(3,0,null,null,0,"img",[["alt",""],["class","label__pin-type label__pin-type--minus"],["draggable","false"],["src","/assets/images/labels/circle-minus-dark.svg"]],null,null,null,null,null))],null,null)}function Pk(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"img",[["alt",""],["class","label__pin-type label__pin-type--circle"],["draggable","false"],["src","/assets/images/labels/circle.svg"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,0,"img",[["alt",""],["class","label__pin-type label__pin-type--plus"],["draggable","false"],["src","/assets/images/labels/circle-plus.svg"]],null,null,null,null,null)),(e()(),l.xb(2,0,null,null,0,"img",[["alt",""],["class","label__pin-type label__pin-type--minus"],["draggable","false"],["src","/assets/images/labels/circle-minus.svg"]],null,null,null,null,null))],null,null)}function Mk(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"div",[["class","label__more"]],null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-icon",[["icon","caret-right"]],null,null,null,he,ge)),l.wb(2,114688,null,0,be,[],{icon:[0,"icon"]},null)],(function(e,t){e(t,2,0,"caret-right")}),null)}function Tk(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,4,"div",[["class","label__body html"]],[[8,"innerHTML",1]],null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(2,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(3,{"label__body--collapse":0}),l.Nb(4,1)],(function(e,t){var n=t.component,l=e(t,3,0,n.isCollapsed||n.descriptionCollapsed);e(t,2,0,"label__body html",l)}),(function(e,t){var n=t.component,i=l.Sb(t,0,0,e(t,4,0,l.Jb(t.parent,0),n.label.description));e(t,0,0,i)}))}function Ik(e){return l.Tb(2,[l.Lb(0,F_.b,[l.l,F_.c,l.B]),l.Pb(402653184,1,{labelContainerRef:0}),l.Pb(402653184,2,{labelRef:0}),l.Pb(402653184,3,{wireRef:0}),l.Pb(402653184,4,{tagRef:0}),l.Pb(402653184,5,{pinRef:0}),l.Pb(402653184,6,{titleRef:0}),(e()(),l.xb(7,0,[[1,0],["labelContainerEl",1]],null,33,"div",[["aria-hidden","true"],["class","label-container"]],null,null,null,null,null)),(e()(),l.xb(8,0,[[2,0],["labelEl",1]],null,32,"div",[["class","label"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(10,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Lb(131072,se.b,[l.i]),l.Mb(12,{"label--selected":0,"label--glow":1,"label--annotation":2,"label--classic":3,"label--invert":4,"label--studio":5,"label--context":6,"label--screenshot-mode":7}),(e()(),l.xb(13,0,[[5,0],["pin",1]],null,9,"div",[["class","label__pin"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(15,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),l.Mb(18,{"label__pin--circle":0,"label__pin--plus":1,"label__pin--minus":2,"label__pin--draggable":3}),(e()(),l.nb(16777216,null,null,1,null,Sk)),l.wb(20,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),l.nb(0,[["lightPins",2]],null,0,null,Pk)),(e()(),l.xb(22,0,null,null,0,"div",[["class","label__glow"]],null,null,null,null,null)),(e()(),l.xb(23,0,[[3,0],["wire",1]],null,3,"div",[["class","label__wire"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(25,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(26,{"label__wire--collapse":0}),(e()(),l.xb(27,0,[[4,0],["tag",1]],null,13,"div",[["class","label__tag"]],null,null,null,null,null)),l.Ob(512,null,se.A,se.B,[l.u,l.v,l.l,l.H]),l.wb(29,278528,null,0,se.j,[se.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),l.Mb(30,{"label__tag--collapse":0,"label__tag--collapsible":1,"label__tag--floating":2,"label__tag--draggable":3}),(e()(),l.xb(31,0,null,null,6,"div",[["class","label__header"]],null,null,null,null,null)),(e()(),l.xb(32,0,[[6,0],["title",1]],null,0,"div",[["class","label__title"]],[[8,"innerHTML",1]],null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Mk)),l.wb(34,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.xb(35,0,null,null,2,"div",[["appEventFence",""],["class","label__actions"]],null,[[null,"click"]],(function(e,t,n){var i=!0;return"click"===t&&(i=!1!==l.Jb(e,36).onClick(n,n.target)&&i),i}),null,null)),l.wb(36,16384,null,0,me,[],null,null),l.Ib(null,0),(e()(),l.nb(16777216,null,null,1,null,Tk)),l.wb(39,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Ib(null,1)],(function(e,t){var n,i=t.component,a=e(t,12,0,(null==(n=l.Sb(t,10,1,l.Jb(t,11).transform(i.selectedLabel$)))?null:n.id)===i.label.id,i.label.pinGlow,"annotation"===i.label.theme,"classic"===i.label.theme,i.isBackgroundDark,"studioNext"===i.label.theme,"context"===i.label.theme,i.screenshotMode);e(t,10,0,"label",a);var o=null,s=e(t,18,0,i.label.pinType==i.labelPinType.Default,i.label.pinType===i.labelPinType.Plus||i.label.pinType===i.labelPinType.PlusMinus&&(null==(o=l.Sb(t,15,1,l.Jb(t,16).transform(i.selectedLabel$)))?null:o.id)!==i.label.id,i.label.pinType===i.labelPinType.Minus||i.label.pinType===i.labelPinType.PlusMinus&&(null==(o=l.Sb(t,15,1,l.Jb(t,17).transform(i.selectedLabel$)))?null:o.id)===i.label.id,i.pinDraggable);e(t,15,0,"label__pin",s),e(t,20,0,"annotation"===i.label.theme,l.Jb(t,21));var r=e(t,26,0,i.isCollapsed||i.tagCollapsed||i.label.hideWire);e(t,25,0,"label__wire",r);var c=e(t,30,0,i.isCollapsed||i.tagCollapsed,i.label.collapseDescription,i.label.hideWire,i.tagDraggable);e(t,29,0,"label__tag",c),e(t,34,0,i.label.description&&i.label.collapseDescription),e(t,39,0,i.label.description)}),(function(e,t){e(t,32,0,t.component.label.title)}))}let Jk=(()=>{class e{constructor(e,t,n,l,i){this.store=e,this.actions=t,this.engineService=n,this.viewService=l,this.changeDetectorRef=i,this.ngUnsubscribe=new K.a}set label(e){this._label=e,this.setLabelNode()}get label(){return this._label}ngOnInit(){this.initInfoListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setLabelNode(){const e=Object(Mt.get)(this.label,"objectId");if(e){const t=this.store.selectSnapshot(wm.getViewGraph);this.node=this.engineService.getNode(t,e)}else this.node=null;this.changeDetectorRef.markForCheck()}initInfoListeners(){this.actions.pipe(Object(O.k)(Qi),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.setLabelNode()})}handleReadMoreClick(){this.node&&this.viewService.toggleNodeInfo(!0)}}return Object(y.__decorate)([Object(O.e)(wm.getQuerying),Object(y.__metadata)("design:type",Z.a)],e.prototype,"querying$",void 0),e})();var zk=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}.context-label__actions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center}.context-label__action[_ngcontent-%COMP%]{cursor:pointer}.context-label__action--selected[_ngcontent-%COMP%]{color:#0060c4}.context-label__more[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;cursor:pointer;display:block;line-height:24px;overflow:hidden}.context-label__more[_ngcontent-%COMP%]:hover{text-decoration:underline}"]],data:{animation:[{type:7,name:"show",definitions:[{type:1,expr:":enter",animation:[{type:2,steps:[{type:6,styles:{height:"0"},offset:null},{type:4,styles:{type:6,styles:{height:"*"},offset:null},timings:"125ms ease-in-out"}],options:null}],options:null}],options:{}}]}});function Lk(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-node-actions",[["theme","light"]],null,null,null,Ty,_y)),l.wb(1,114688,null,0,fy,[O.i,Ts,l.i,Xc,rp.c,xt,Rs],{node:[0,"node"],theme:[1,"theme"]},null)],(function(e,t){e(t,1,0,t.component.node,"light")}),null)}function Ek(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,3,"div",[["class","context-label__actions"],["label-actions",""]],null,null,null,null,null)),l.Ib(null,0),(e()(),l.nb(16777216,null,null,1,null,Lk)),l.wb(3,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,3,0,t.component.enableActions)}),null)}function Ak(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"a",[["class","context-label__more"]],[[24,"@show",0]],[[null,"click"]],(function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.handleReadMoreClick()&&l),l}),null,null)),(e()(),l.Rb(-1,null,["Read More..."]))],null,(function(e,t){e(t,0,0,void 0)}))}function Fk(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l.nb(16777216,null,null,1,null,Ak)),l.wb(2,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(0,null,null,0))],(function(e,t){var n=t.component;e(t,2,0,n.node&&n.node.description)}),null)}function Rk(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,5,"app-label",[["class","context-label"]],null,null,null,Ik,kk)),l.wb(1,4440064,null,0,jk,[l.H,Ns,Rs,xt,O.i,O.b,l.i],{label:[0,"label"],emitEvents:[1,"emitEvents"]},null),(e()(),l.nb(16777216,null,0,1,null,Ek)),l.wb(3,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,1,1,null,Fk)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){var n=t.component;e(t,1,0,n.label,!1),e(t,3,0,n.node),e(t,5,0,n.enableInfo)}),null)}let Dk=(()=>{class e{constructor(e,t,n,l,i,a,o){this.store=e,this.action$=t,this.engineService=n,this.cameraService=l,this.changeDetector=i,this.labelsService=a,this.elRef=o,this.interactive=!1,this.ngUnsubscribe=new K.a}ngOnInit(){this.bindEngineEvents(),this.bindApplicationEvents(),this.labelsService.setLabelContainer(this.elRef)}ngOnDestroy(){this.labelsService.setLabelContainer(null),this.changeDetector.detach(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}bindApplicationEvents(){this.action$.pipe(Object(O.l)(Ci),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.handleClickNode(e)}),this.labels$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.changeDetector.markForCheck()}),this.selectedLabel$.pipe(Object(Q.a)(e=>null==e),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{const e=this.store.selectSnapshot(xm.getZoomed),t=this.store.selectSnapshot(xm.getLockCamera);e&&!t&&this.resetCamera()}),this.store.select(Nr.getSelectedChapterReadyState).pipe(Object(Q.a)(e=>null!=e),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.interactive=e.model,this.changeDetector.markForCheck()})}bindEngineEvents(){this.action$.pipe(Object(O.l)(Ji,Ta),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.engineService.fireEvent(e.show?Wo.LabelsShown:Wo.LabelsHidden,null)}),this.action$.pipe(Object(O.l)(xa),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.engineService.fireEvent(Wo.LabelCreated,e.label)}),this.action$.pipe(Object(O.l)(ya),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.engineService.fireEvent(Wo.LabelDestroyed,e.label)})}handleClickNode(e){const t=this.store.selectSnapshot(wm.getActiveTool);null!=e.node?t===fm.Label?this.addLabel(e.hit,e.node):setTimeout(()=>{this.toggleContextLabel(e.hit,e.node)}):(this.store.dispatch(new ja(null)),this.store.dispatch(new Oa))}addLabel(e,t){const n=this.cameraService.getDirection(e),l=this.getLabelDefaults(e.objectId),i=l.hideWire?20:32;l.title=t.label,l.offset=[i,0],l.objectId=e.objectId,l.barycentric=[e.barycentric[0],e.barycentric[1],e.barycentric[2]],l.pos=[e.worldPos[0],e.worldPos[1],e.worldPos[2]],l.primitiveIndex=e.primitiveIndex,l.renderableIndex=e.renderableIndex||0,l.dir=n,l.chapterId=this.store.selectSnapshot(Nr.getSelectedChapter).id,l.occludable=!0,l.shown=!0,this.store.dispatch(new xa(l)),this.store.dispatch(new ja(l))}toggleContextLabel(e,t){if(this.store.selectSnapshot(Xs.getCheckedNodeIds).some(e=>e===t.id)){const n=this.cameraService.getDirection(e),l=this.labelsService.makeDefaultStudioLabel();l.theme=fs.Context,l.title=t.label,l.offset=[4,0],l.objectId=e.objectId,l.barycentric=[e.barycentric[0],e.barycentric[1],e.barycentric[2]],l.pos=[e.worldPos[0],e.worldPos[1],e.worldPos[2]],l.primitiveIndex=e.primitiveIndex,l.dir=n,l.occludable=!1,this.store.dispatch(new fa(l))}else this.store.dispatch(new Oa)}getLabelDefaults(e){let t=this.store.selectSnapshot(Br.getSelectedLabel);if(null==t){let e=this.store.selectSnapshot(Br.getChapterLabels);e&&0!==e.length||(e=this.store.selectSnapshot(Br.getLabels)),e.length&&(t=Object(Mt.cloneDeep)(e[e.length-1]))}if(null!=t){const n=this.labelsService.makeDefaultStudioLabel();switch(n.hideWire=t.hideWire,n.pinGlow=t.pinGlow,n.pinType=t.pinType,n.theme=t.theme,n.states[0].errands[0]=new Ds,Object(Mt.get)(t,"states[1].errands[0].type")){case vs.flyToObject:case vs.flyToCamera:n.states[1].errands[0]=new Cs(e)}return n}{const t=this.labelsService.makeDefaultStudioLabel();return t.states[0].errands[0]=new Ds,t.states[1].errands[0]=new Cs(e),t}}trackLabel(e,t){const{id:n,shown:l,theme:i}=t;return`${n}${l}${i}`}resetCamera(){const e=this.store.selectSnapshot(Nr.getSelectedChapter);Object(Mt.get)(e,"camera.location")&&this.store.dispatch(new Zh(e.camera.location))}}return Object(y.__decorate)([Object(O.e)($m.getLayout),Object(y.__metadata)("design:type",Z.a)],e.prototype,"layout$",void 0),Object(y.__decorate)([Object(O.e)(Br.getChapterLabels),Object(y.__metadata)("design:type",Z.a)],e.prototype,"labels$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapter),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedChapter$",void 0),Object(y.__decorate)([Object(O.e)(Br.getSelectedLabel),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedLabel$",void 0),Object(y.__decorate)([Object(O.e)(Br.getLabelsCollapsed),Object(y.__metadata)("design:type",Z.a)],e.prototype,"labelsCollapsed$",void 0),Object(y.__decorate)([Object(O.e)(Br.getLabelsCollapsedMode),Object(y.__metadata)("design:type",Z.a)],e.prototype,"labelsCollapsedMode$",void 0),Object(y.__decorate)([Object(O.e)(Br.getContextLabel),Object(y.__metadata)("design:type",Z.a)],e.prototype,"contextLabel$",void 0),Object(y.__decorate)([Object(O.e)(wm.getShowLabels),Object(y.__metadata)("design:type",Z.a)],e.prototype,"showLabels$",void 0),Object(y.__decorate)([Object(O.e)(xm.getZoomed),Object(y.__metadata)("design:type",Z.a)],e.prototype,"zoomed$",void 0),Object(y.__decorate)([Object(O.e)(Br.getEnableContextLabel),Object(y.__metadata)("design:type",Z.a)],e.prototype,"enableContextLabel$",void 0),Object(y.__decorate)([Object(O.e)(Br.getEnableContextLabelInfo),Object(y.__metadata)("design:type",Z.a)],e.prototype,"enableContextLabelInfo$",void 0),Object(y.__decorate)([Object(O.e)(Br.getEnableContextLabelActions),Object(y.__metadata)("design:type",Z.a)],e.prototype,"enableContextLabelActions$",void 0),Object(y.__decorate)([Object(O.e)(Br.getLabelsDraggable),Object(y.__metadata)("design:type",Z.a)],e.prototype,"draggable$",void 0),e})();var Uk=l.vb({encapsulation:0,styles:[["[_nghost-%COMP%]{width:100%;height:100%;display:block;position:relative}.labels[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;display:block;z-index:2;pointer-events:none}.labels__label--hidden[_ngcontent-%COMP%]{display:none}"]],data:{}});function Nk(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,5,"app-label",[["class","labels__label"]],[[2,"labels__label--hidden",null]],null,null,Ik,kk)),l.wb(2,4440064,null,0,jk,[l.H,Ns,Rs,xt,O.i,O.b,l.i],{label:[0,"label"],collapsed:[1,"collapsed"],collapsedMode:[2,"collapsedMode"],pinDraggable:[3,"pinDraggable"],tagDraggable:[4,"tagDraggable"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i])],(function(e,t){var n,i,a=t.component;e(t,2,0,t.context.$implicit,l.Sb(t,2,1,l.Jb(t,3).transform(a.labelsCollapsed$)),l.Sb(t,2,2,l.Jb(t,4).transform(a.labelsCollapsedMode$)),null==(n=l.Sb(t,2,3,l.Jb(t,5).transform(a.draggable$)))?null:n.pin,null==(i=l.Sb(t,2,4,l.Jb(t,6).transform(a.draggable$)))?null:i.tag)}),(function(e,t){e(t,1,0,!t.context.$implicit.shown)}))}function Hk(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,5,"app-context-label",[],null,null,null,Rk,zk)),l.wb(1,245760,null,0,Jk,[O.i,O.b,Rs,rx,l.i],{label:[0,"label"],enableInfo:[1,"enableInfo"],enableActions:[2,"enableActions"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component,i=null;e(t,1,0,l.Sb(t,1,0,l.Jb(t,2).transform(n.contextLabel$)),l.Sb(t,1,1,l.Jb(t,3).transform(n.enableContextLabelInfo$))&&(null==(i=l.Sb(t,1,1,l.Jb(t,4).transform(n.layout$)))?null:i.nodeInfo.enable),l.Sb(t,1,2,l.Jb(t,5).transform(n.enableContextLabelActions$)))}),null)}function Bk(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,7,"div",[["class","labels"]],null,null,null,null,null)),(e()(),l.nb(16777216,null,null,2,null,Nk)),l.wb(2,278528,null,0,se.l,[l.S,l.P,l.u],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.nb(16777216,null,null,3,null,Hk)),l.wb(5,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,2,0,l.Sb(t,2,0,l.Jb(t,3).transform(n.labels$)),n.trackLabel),e(t,5,0,l.Sb(t,5,0,l.Jb(t,6).transform(n.enableContextLabel$))&&l.Sb(t,5,0,l.Jb(t,7).transform(n.contextLabel$)))}),null)}function $k(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,2,null,Bk)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i])],(function(e,t){var n=t.component;e(t,1,0,n.interactive&&l.Sb(t,1,0,l.Jb(t,2).transform(n.showLabels$)))}),null)}class Vk{constructor(e,t){this.actions=e,this.changeDetectorRef=t,this.ngUnsubscribe=new K.a,this.show=!1}ngOnInit(){this.actions.pipe(Object(O.l)(hi),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.show=!0,this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onShowDone(){this.show=!1}}var Wk=l.vb({encapsulation:0,styles:[[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:'Courier New',Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#b31212}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%]{color:inherit}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3838}.text-info[_ngcontent-%COMP%]{color:#0060c4}.engine-scroll[_ngcontent-%COMP%]{display:-webkit-box;display:flex;position:absolute;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;top:0;bottom:0;left:0;right:0;z-index:10000;opacity:0;pointer-events:none}.engine-scroll__label[_ngcontent-%COMP%]{background:rgba(16,24,35,.5);font-size:16px;letter-spacing:.4px;line-height:1.4em;color:#fff;font-weight:600;padding:24px 32px;border-radius:40px}"]],data:{animation:[{type:7,name:"show",definitions:[{type:1,expr:":enter",animation:[{type:2,steps:[{type:6,styles:{opacity:"*"},offset:null},{type:4,styles:{type:6,styles:{opacity:1},offset:null},timings:"500ms ease-in-out"},{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"500ms 2000ms ease-in-out"}],options:null}],options:null}],options:{}}]}});function Gk(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,"div",[["class","engine-scroll"],["data-test","engineScroll"]],[[24,"@show",0]],[[null,"@show.done"]],(function(e,t,n){var l=!0;return"@show.done"===t&&(l=!1!==e.component.onShowDone(n)&&l),l}),null,null)),(e()(),l.xb(1,0,null,null,1,"div",[["class","engine-scroll__label"]],null,null,null,null,null)),(e()(),l.Rb(-1,null,[" Use control + scroll to zoom "]))],null,(function(e,t){e(t,0,0,void 0)}))}function qk(e){return l.Tb(2,[(e()(),l.nb(16777216,null,null,1,null,Gk)),l.wb(1,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null)],(function(e,t){e(t,1,0,t.component.show)}),null)}Object(Hw.g)([Object(Hw.m)({opacity:"0",backgroundColor:"*"}),Object(Hw.k)([Object(Hw.e)("{{ duration }}ms {{ easing }}",Object(Hw.m)({opacity:1,backgroundColor:"{{ backgroundColor }}"})),Object(Hw.e)("250ms 500ms ease-in",Object(Hw.m)({opacity:0}))])],{params:{duration:2e3,backgroundColor:"#ffffff",easing:"ease-out"}});class Xk{constructor(e,t,n){this.actions=e,this.changeDetectorRef=t,this.store=n,this.color="#FFFFFF",this.duration=2e3,this.isVisible=!1,this.ngUnsubscribe=new K.a}ngOnInit(){this.initFadeListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initFadeListener(){this.actions.pipe(Object(O.l)(xi),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.fadeIn(e.color,e.duration)})}handleFadeComplete(){this.store.dispatch(new fi),this.isVisible=!1,this.changeDetectorRef.markForCheck()}fadeIn(e,t){this.isVisible=!0,this.color=e,this.duration=1e3*t,this.changeDetectorRef.markForCheck()}}var Kk=l.vb({encapsulation:2,styles:[[".engine-fade{pointer-events:none;display:block;position:absolute;left:0;right:0;top:0;bottom:0;z-index:10000}"]],data:{animation:[{type:7,name:"fade",definitions:[{type:1,expr:"* => true",animation:{type:10,animation:{type:8,animation:[{type:6,styles:{opacity:"0",backgroundColor:"*"},offset:null},{type:2,steps:[{type:4,styles:{type:6,styles:{opacity:1,backgroundColor:"{{ backgroundColor }}"},offset:null},timings:"{{ duration }}ms {{ easing }}"},{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"250ms 500ms ease-in"}],options:null}],options:{params:{duration:2e3,backgroundColor:"#ffffff",easing:"ease-out"}}},options:null},options:null}],options:{}}]}});function Zk(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,2,"div",[["class","engine-fade"]],[[24,"@fade",0]],[[null,"@fade.done"]],(function(e,t,n){var l=!0;return"@fade.done"===t&&(l=!1!==e.component.handleFadeComplete()&&l),l}),null,null)),l.Mb(1,{backgroundColor:0,duration:1}),l.Mb(2,{value:0,params:1})],null,(function(e,t){var n=t.component,l=e(t,2,0,n.isVisible,e(t,1,0,n.color,n.duration));e(t,0,0,l)}))}var Yk=n("OsX3"),Qk=n("yuhW"),eS=n("HlzF"),tS=function(e){return e[e.Pan=.4]="Pan",e[e.PanSlow=.04]="PanSlow",e[e.Zoom=5]="Zoom",e[e.ZoomSlow=1]="ZoomSlow",e[e.Rotate=.3]="Rotate",e[e.RotateSlow=.03]="RotateSlow",e}({}),nS=function(e){return e[e.Rotate=6]="Rotate",e[e.Pan=1.75]="Pan",e[e.Zoom=2.5]="Zoom",e}({}),lS=function(e){return e[e.Zoom=-6]="Zoom",e[e.Pan=1.25]="Pan",e[e.Rotate=1.5]="Rotate",e[e.Friction=.85]="Friction",e[e.ZoomFriction=.85]="ZoomFriction",e[e.FrictionThreshold=.002]="FrictionThreshold",e}({}),iS=function(e){return e.Hide="engine--cursor-hide",e.Label="engine--cursor-label",e.Paint="engine--cursor-paint",e.Crosshair="engine--cursor-crosshair",e.Default="",e}({}),aS=function(e){return e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.LeftAndRight=4]="LeftAndRight",e}({});const oS=10,sS=1.66667,rS=1e3/60;let cS=(()=>{class e{constructor(e,t,l,a,o,s,c){this.actions=e,this.cameraService=t,this.changeDetecton=l,this.engineService=a,this.paintService=o,this.renderer=s,this.store=c,this.flyCamera=!0,this.chapterActivating=!1,this.visible=!1,this.application=i,this.cursorClass=iS.Default,this.audioPlayers=new Map,this.ngUnsubscribe=new K.a,this.display=!1,this.engineVisible=!0,this.ctrlPressed=!1,this.scrollType=null,this.scrollTimeout=null,this.zoomVelocity=0,this.touchZoomVelocity=0,this.pinchTicks=0,this.deltaTime=window.performance.now(),this.pinchMode="",this.inputEnabled=!0,r.application===i.Loft&&n.e(5).then(n.t.bind(null,"16wW",7)).then(e=>{window.pako=e})}get isTransparentBackground(){return!!this.background&&$o.isTransparent(this.background)}get isBackgroundCheckered(){return r.application!==i.Viewer&&this.isTransparentBackground}wheel(e){const t=this.store.selectSnapshot(wm.getScrollMode),n=this.ctrlPressed;t!==qo.DoNotCaptureShowMessage||n||this.store.dispatch(new hi(!0)),(t===qo.Capture||n)&&(e.preventDefault(),this.handleWheel(e))}contextmenu(e){this.handleContextMenu(e)}mouseout(){this.handleMouseOut()}convertToLeafStateMap(e,t){const n={};return Object.entries(t).forEach(([t,l])=>{n[t]={},n[t][e]=l}),n}ngOnInit(){this.bindEngineEvents(),this.bindApplicationEvents(),this.bindChapterChangeEvents(),this.bindCameraEvents(),this.bindToolEvents(),this.bindMouseEvents(),this.bindKeyEvents(),this.bindHumanInteractions(),this.renderer.listen(window,"keydown",e=>{"Control"===e.key&&(this.ctrlPressed=!0)}),this.renderer.listen(window,"keyup",e=>{"Control"===e.key&&(this.ctrlPressed=!1)}),this.initChangeListener(),this.initChapterAudio(),Human.properties.set({assetDomain:r.assetDomain}),Human.workers.setPath("/engine/studio/workers"),Human.init.init()}ngOnDestroy(){this.changeDetecton.detach(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initEventListeners(){}bindEngineEvents(){this.engineService.getEvent(Wo.LogError).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{throw new Error(e)}),this.engineService.getEvent(Wo.Loaded).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new di(!0))}),this.engineService.getEvent(Wo.TimelineChaptersActivateStart).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.chapterActivating=!0}),this.engineService.getEvent(Wo.TimelineChaptersActivateFinish).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.chapterActivating=!1;const t=Human.timeline.activeRoot._nowBranch,n={id:t.id,init:!0,camera:t.initializedCamera,annotations:t.initializedAnnotations,graph:t.initializedGraph,properties:t.initializedProperties,particles:t.initializedParticles,clips:t.initializedClippingPlanes,postprocessing:t.initializedPostprocess,transparency:t.initializedTransparencyMode};this.store.dispatch(new wi(e.chapterId)),this.store.dispatch(new vi(n))}),Object(Uu.a)(this.engineService.getEvent(Wo.TimelinePlayed),this.engineService.getEvent(Wo.TimelinePaused)).pipe(Object(Y.a)(this.ngUnsubscribe),Object(Q.a)(()=>null!=this.store.selectSnapshot(Nr.getSelectedChapterId)),Object(Qo.a)(50),Object(u.a)(()=>Human.timeline.playing)).subscribe(e=>{this.store.dispatch(new Ai(e))}),this.engineService.getEvent(Wo.Tick).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.visible&&(this.inputEnabled&&this.handleMouseInputEngineTick(),this.handleCameraTick(),this.deltaTime=window.performance.now())}),this.engineService.getEvent(Wo.SceneObjectsShown).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(({enabledObjectsUpdate:e})=>{if(!this.chapterActivating){const t=Object.keys(e).filter(t=>!0===e[t]),n=Object.keys(e).filter(t=>!1===e[t]);t.length>0&&this.store.dispatch(new Bs.UpdateNodesShown(!0,t,void 0,!1)),n.length>0&&this.store.dispatch(new Bs.UpdateNodesShown(!1,n,void 0,!1))}}),this.engineService.getEvent(Wo.SceneObjectRenderable).pipe(Object(Yk.a)(1e3),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{if(e.length){const t={};e.forEach(e=>{t[e.objectId]={renderable:!0}}),this.store.dispatch(new Pi(t))}}),this.engineService.getEvent(Wo.AssetsLoadProgress).pipe(Object(Y.a)(this.ngUnsubscribe),Object(Qk.b)(()=>Object(Uo.a)(250))).subscribe(e=>{const t=this.store.selectSnapshot(Tc.getLoadChunks).length,n=t-this.store.selectSnapshot(Tc.getLoadChunksRemaining).length,{receivedAssets:l,requestedAssets:i}=e,a=l/i,o=1/t;this.store.dispatch(new Sj(a*o+n*o,a))}),this.actions.pipe(Object(O.k)(Na),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{0===this.store.selectSnapshot(Tc.getLoadChunksRemaining).length&&this.store.dispatch(new Sj(1,1))})}bindApplicationEvents(){this.enginePosition$.pipe(Object(Q.a)(e=>null!=e),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.repositionEngine(e)}),this.store.select(wm.getXrayModeEnabled).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.store.selectSnapshot(Xs.getCheckedNodes),n=this.store.selectSnapshot(Xs.getNodes);!1===e?(Object.keys(n||[]).forEach(e=>{this.paintService.paint(e,n[e].paint)}),t.forEach(e=>this.paintService.highlight(e.objectId,!0))):(this.paintService.paintAll(Object.keys(n),jc.recipe),this.paintService.paintAll(t.map(e=>e.objectId),xc.recipe))}),this.background$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.background=e}),this.actions.pipe(Object(O.l)(Ri),Object(Y.a)(this.ngUnsubscribe)).subscribe(()=>{this.playChapterFromStart()}),this.engineDisplay$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.display=e,this.changeDetecton.markForCheck()}),this.engineVisible$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.engineVisible=e,this.changeDetecton.markForCheck()})}bindChapterChangeEvents(){this.selectedChapter$.pipe(Object(Q.a)(e=>null!=e),Object(Ee.a)(),Object(Y.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{e.id!==t.id&&(this.store.dispatch(new Bs.SetActiveChapter(t.id)),Qx(this.store,this.engineService),this.background=this.store.selectSnapshot(Nr.getSelectedChapterBackground),Human.timeline.scrub({chapterId:t.id}),this.store.dispatch(new dm(void 0)))}),this.clippingPlanes$.pipe(Object(Q.a)(e=>void 0!==e),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{const t=Object.values(e.clips).filter(e=>e.enabled);Human.renderer.clip.reset(),t.forEach(t=>Human.renderer.clip.setClip(Object.assign({boundary:e.boundary},t)))}),this.background$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.background=e}),this.activeTool$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{switch(Object.values(iS).forEach(e=>{e&&this.renderer.removeClass(this.engineElement.nativeElement,e)}),e){case fm.Hide:this.renderer.addClass(this.engineElement.nativeElement,iS.Hide);break;case fm.Label:this.renderer.addClass(this.engineElement.nativeElement,iS.Label);break;case fm.Paint:this.renderer.addClass(this.engineElement.nativeElement,iS.Paint);break;case fm.Isolate:case fm.Fade:this.renderer.addClass(this.engineElement.nativeElement,iS.Crosshair)}}),Object(Du.b)(this.selectedChapterId$,this.readyState$,this.autoplay$).pipe(Object(Q.a)(([e,t,n])=>!Object(Mt.isNil)(e)&&!Object(Mt.isNil)(t)&&!Object(Mt.isNil)(n)),Object(Y.a)(this.ngUnsubscribe)).subscribe(([,e,t])=>{const n=Object(Mt.get)(e,"animation",!1),l=this.store.selectSnapshot(Nr.getSelectedChapter),i=Object(Mt.get)(l,"ui.play.autoplay",!0),a=n&&t&&i;this.store.dispatch(new Li(l,!a)),this.store.dispatch(new Ei(a))})}bindCameraEvents(){this.actions.pipe(Object(O.l)(Zh),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{e.animate?this.flyToPoint(e.camera,e.animationDuration):this.jumpToPoint(e.camera)}),this.actions.pipe(Object(O.l)(am),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.cameraService.panCameraStatic(e.x,e.y,e.z)}),this.actions.pipe(Object(O.l)(rm),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.cameraService.rotateCameraStatic(e.x,e.y)}),this.actions.pipe(Object(O.l)(nm),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.cameraService.setHumanZoomFactor(e.value)}),this.actions.pipe(Object(O.l)(ji),Object(Q.a)(e=>!!e.objectId),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{e.animate?this.flyToObject(e.objectId,e.animationDuration):this.jumpToObject(e.objectId)})}bindToolEvents(){this.activeTool$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{switch(Object.values(iS).forEach(e=>{e&&this.renderer.removeClass(this.engineElement.nativeElement,e)}),e){case fm.Hide:this.renderer.addClass(this.engineElement.nativeElement,iS.Hide);break;case fm.Label:this.renderer.addClass(this.engineElement.nativeElement,iS.Label);break;case fm.Paint:this.renderer.addClass(this.engineElement.nativeElement,iS.Paint);break;case fm.Isolate:case fm.Fade:this.renderer.addClass(this.engineElement.nativeElement,iS.Crosshair)}})}bindMouseEvents(){this.mouseMove$=Object(Zd.a)(this.engineElement.nativeElement,"mousemove"),this.mouseMove$.pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.handleMousePan(e)}),this.mouseMove$.pipe(Object(Qo.a)(10),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.handleMouseHover(e)}),this.mouseLeave$=Object(Zd.a)(this.engineElement.nativeElement,"mouseleave"),this.mouseLeave$.pipe(Object(Qo.a)(10),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{this.handleMouseLeave()})}bindKeyEvents(){const e=["w","a","s","d","e","c","=","-","+","_","arrowleft","arrowright","arrowup","arrowdown","shiftKey"].reduce((e,t)=>(e[t]=!1,e),{}),t=new Le.a(e);let n;this.renderer.listen(window,"keydown",e=>{if(e.repeat||e.metaKey||e.ctrlKey)return;const n=e.target.nodeName.toLowerCase();["input","textarea","select","option"].indexOf(n)>=0||t.next(Object.assign({},t.value,{[e.key.toLowerCase()]:!0,shiftKey:e.shiftKey,hasMomentum:!1}))}),this.renderer.listen(window,"keyup",e=>{e.key&&(1===Object.values(n).filter(e=>!0===e).length?(this.applyMotion(n,!0),t.next(Object.assign({},t.value,{[e.key.toLowerCase()]:!1,shiftKey:e.shiftKey,hasMomentum:!1===n.shiftKey}))):t.next(Object.assign({},t.value,{[e.key.toLowerCase()]:!1,shiftKey:e.shiftKey,hasMomentum:!1})))}),t.pipe(Object(Q.a)(()=>this.inputEnabled),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{n=e,!1===e.hasMomentum&&this.applyMotion(e,!1)}),this.renderer.listen(window,"keydown",e=>{"Control"===e.key&&(this.ctrlPressed=!0)}),this.renderer.listen(window,"keyup",e=>{"Control"===e.key&&(this.ctrlPressed=!1)})}applyMotion(e,t){const n=new gm,l=e.shiftKey?tS.ZoomSlow:tS.Zoom,i=e.shiftKey?tS.PanSlow:tS.Pan,a=e.shiftKey?tS.RotateSlow:tS.Rotate;n.zoom+=e.c||e["-"]||e._?l:0,n.zoom-=e.e||e["="]||e["+"]?l:0,n.panX-=e.d?i:0,n.panX+=e.a?i:0,n.panY+=e.w?i:0,n.panY-=e.s?i:0,n.rotateX-=e.arrowright?a:0,n.rotateX+=e.arrowleft?a:0,n.rotateY+=e.arrowup?a:0,n.rotateY-=e.arrowdown?a:0,n.applyFriction=t,this.store.dispatch(new Qh(n))}initChangeListener(){this.store.select(Xs.getPatches).pipe(Object(Q.a)(e=>e.length>0),Object(Y.a)(this.ngUnsubscribe)).subscribe(e=>{const t=e.reduce((e,t)=>(e[t.path[t.path.length-1]].push(t),e),{shown:[],checked:[],paint:[],pickable:[]}),n=e=>t[e].reduce((e,t)=>(e[t.path[2]]=t.value,e),{}),l=n("checked"),i=n("shown"),a=n("paint"),o=n("pickable");if(!Object(Mt.isEmpty)(i)){const e=this.store.selectSnapshot(Xs.getNodes),t=Object.values(e).reduce((e,t)=>(e[t.objectId]=t.shown,e),{});this.engineService.setNodesVisible(t);const n=this.convertToLeafStateMap("shown",t);this.store.dispatch(new Si(n,e))}if(!Object(Mt.isEmpty)(l)){this.engineService.fireEvent(Wo.SceneObjectsSelected,{selectedObjectsUpdate:l});const e=this.store.selectSnapshot(wm.getXrayModeEnabled)?(e,t)=>this.paintService.paint(e,!0===t?xc.recipe:jc.recipe):(e,t)=>this.paintService.highlight(e,t);Object.entries(l).forEach(([t,n])=>{e(t,n)})}if(!Object(Mt.isEmpty)(a))for(const[s,r]of Object.entries(a))this.paintService.colorObject(s,Qs.toEngine(r));if(!Object(Mt.isEmpty)(o)){const e=this.store.selectSnapshot(Xs.getNodes),t=Object.values(e).reduce((e,t)=>(e[t.objectId]=t.pickable,e),{});this.engineService.setNodesPickable(t),this.store.dispatch(new Mi(this.convertToLeafStateMap("pickable",t),e))}})}initChapterAudio(){Object(Du.b)(this.selectedChapterId$,this.playAudio$).pipe(Object(Y.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.playAudio(e,t)})}repositionEngine(e){this.renderer.setStyle(this.engineElement.nativeElement,"left",`${e.left}px`),this.renderer.setStyle(this.engineElement.nativeElement,"top",`${e.top}px`),this.renderer.setStyle(this.engineElement.nativeElement,"width",`${e.width}px`),this.renderer.setStyle(this.engineElement.nativeElement,"height",`${e.height}px`),this.renderer.setStyle(this.engineElement.nativeElement,"zIndex",`${e.visibility}`),this.renderer.setStyle(this.engineElement.nativeElement,"visibility",e.visibility===Gh.Shown?"visible":"hidden"),this.visible=e.visibility===Gh.Shown,Human.renderer.resize()}bindHumanInteractions(){const e=new $f.Manager(this.engineCanvasElement.nativeElement);e.add(new $f.Tap({event:"doubletap",taps:2})),e.add(new $f.Tap({event:"singletap"})),e.add(new $f.Pan({event:"pan",pointers:0})),e.add(new $f.Pinch({event:"pinch"})),e.add(new $f.Press({time:500})),e.on("singletap",e=>{this.handleTap(e)}),e.on("doubletap",e=>{this.handleDoubleTap(e)}),e.on("press",e=>{this.handlePress(e)}),e.on("pan",e=>{e.preventDefault(),this.handlePan(e)}),e.on("panstart",e=>{this.handlePanStart(e)}),e.on("panend",e=>{this.handlePanEnd(e)}),e.on("pinchend",e=>{this.handlePinchEnd(e)});let t=0,n=0,l=0,i=0;e.on("pinchstart",e=>{t=e.scale,l=e.deltaX,i=e.deltaY,this.pinchMode=""}),e.on("pinchmove",e=>{if(this.pinchTicks>0)return;const l=Math.abs(e.deltaX)>60||Math.abs(e.deltaY)>60,i=e.scale>1.25||e.scale<.75;this.pinchMode?("pan"===this.pinchMode&&i&&!l&&(this.pinchMode="pinch"),"pinch"===this.pinchMode&&l&&!i&&(this.pinchMode="pan")):this.pinchMode=i?"pinch":"pan";const a=e.scale-t;t=e.scale;const o=n;n=0===a?0:a>0?1:-1,this.cameraService.setCameraPan(e.velocityX*lS.Pan,e.velocityY*lS.Pan),n+o!==0&&this.cameraService.setHumanZoom(a*lS.Zoom)})}handleMouseHover(e){if(e.buttons!==aS.None)return;const{offsetX:t,offsetY:n}=e,l=Human.renderer.pick.pick(t,n);if(l.objectId){const e=this.store.selectSnapshot(wm.getViewGraph),t=this.engineService.getNode(e,l.objectId),n=this.store.selectSnapshot(wm.getHoveredNode);n&&n.id===t.id||this.store.dispatch(new Zi(t,l))}else null!=this.store.selectSnapshot(wm.getHoveredNode)&&this.store.dispatch(new Zi(null))}handleMouseLeave(){this.store.dispatch(new Zi(null))}handleMousePan(e){if(2===e.buttons||4===e.buttons){let{movementX:t,movementY:n}=e;this.cameraService.setCameraPan(t/=16,n/=16)}}handleMouseOut(){this.store.dispatch(new Zi(null))}handleWheel(e){let t=0;switch(e.deltaMode){case 0:null===this.scrollType&&(this.scrollType=Math.abs(e.deltaY)<10?"trackpad":"wheel"),t="trackpad"===this.scrollType?Math.sign(e.deltaY)*sS:Math.sign(e.deltaY)*oS;break;default:this.scrollType="wheel",t=Math.sign(e.deltaY)*oS}clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.scrollType=null},500),Math.abs(t)>40&&(t=40*Math.sign(t)),"trackpad"===this.scrollType?this.cameraService.setCameraZoom(t):this.zoomWithVelocity(t)}zoomWithVelocity(e){this.cameraService.setCameraZoom(e),requestAnimationFrame(()=>{e*=.85,Math.abs(e)>1&&this.zoomWithVelocity(e)})}handleContextMenu(e){e.preventDefault();const{offsetX:t,offsetY:n}=e;this.getHit(t,n)}handlePanStart(e){}handlePanEnd(e){const t=this.store.selectSnapshot(xm.getCameraMotion);if(this.pinchTicks>0||t.panX===e.velocityX&&t.panY===e.velocityY)return;const n=this.store.selectSnapshot(xm.getPanMode);e.srcEvent.shiftKey||"pan"===n?(t.panX=e.velocityX*lS.Pan,t.panY=e.velocityY*lS.Pan):(t.rotateX=e.velocityX*lS.Rotate,t.rotateY=e.velocityY*lS.Rotate),t.applyFriction=!0,this.store.dispatch(new Qh(t))}handlePinchEnd(e){const t=this.store.selectSnapshot(xm.getCameraMotion);if("pan"===this.pinchMode)t.panX=e.velocityX*lS.Pan,t.panY=e.velocityY*lS.Pan;else{const n=e.velocity>0?1:-1;t.zoom=Math.sqrt(e.velocityX*e.velocityX+e.velocityY*e.velocityY)*-n*lS.Zoom}t.applyFriction=!0,this.store.dispatch(new Qh(t)),this.pinchTicks=10}handleTap(e){const{offsetX:t,offsetY:n}=this.getOffset(e),l=this.getHit(t,n),i=this.getNodeFromHit(l);this.store.dispatch(new Ci(i,e,l))}handleDoubleTap(e){const{offsetX:t,offsetY:n}=this.getOffset(e),l=this.getHit(t,n),i=this.getNodeFromHit(l);i&&this.store.dispatch(new ji(i.id))}handlePress(e){const{offsetX:t,offsetY:n}=this.getOffset(e),l=this.getHit(t,n),i=this.getNodeFromHit(l);i&&this.store.dispatch(new ji(i.id))}handlePan(e){if(this.pinchTicks>0)return;const t=this.store.selectSnapshot(xm.getPanMode),{velocityX:n,velocityY:l}=e;e.srcEvent.shiftKey||"pan"===t?this.cameraService.setCameraPan(n*lS.Pan,l*lS.Pan):this.cameraService.setCameraRotation(n*lS.Rotate,l*lS.Rotate)}handleMouseInputEngineTick(){const e=this.cameraService.tickCameraRotation(),t=this.cameraService.tickCameraPan(),n=this.cameraService.tickCameraZoom(),l=(window.performance.now()-this.deltaTime)/rS;if((e.vx||e.vy)&&this.cameraService.rotateCameraStatic(0!==e.vx?l*e.vx*nS.Rotate:0,0!==e.vy?l*e.vy*nS.Rotate:0),t.x||t.y){const e=Math.max(Human.renderer.camera.lookDistance/80,.01);this.cameraService.panCameraStatic(l*t.x*e*nS.Pan,l*t.y*e*nS.Pan,l*t.z*e*nS.Pan)}0!==n&&this.cameraService.setHumanZoom(l*n*nS.Zoom)}handleCameraTick(){this.pinchTicks>0&&this.pinchTicks--,this.applyFriction();const e=this.store.selectSnapshot(xm.getCameraMotion);this.cameraService.setCameraPan(e.panX,e.panY),this.cameraService.setCameraRotation(e.rotateX,e.rotateY),this.cameraService.setCameraZoom(e.zoom)}applyFriction(){const e=this.store.selectSnapshot(xm.getCameraMotion);if(!0!==e.applyFriction)return;const t=(window.performance.now()-this.deltaTime)/rS;0===e.rotateX&&0===e.rotateY||(e.rotateX=e.rotateX*(lS.Friction+.1*(1-t)),e.rotateY=e.rotateY*(lS.Friction+.1*(1-t)),Math.abs(e.rotateX)<lS.FrictionThreshold&&(e.rotateX=0),Math.abs(e.rotateY)<.002&&(e.rotateY=0)),0===e.panX&&0===e.panY||(e.panX=e.panX*(lS.Friction+.1*(1-t)),e.panY=e.panY*(lS.Friction+.1*(1-t)),Math.abs(e.panX)<lS.FrictionThreshold&&(e.panX=0),Math.abs(e.panY)<lS.FrictionThreshold&&(e.panY=0)),0!==e.zoom&&(e.zoom=e.zoom*(lS.ZoomFriction+.1*(1-t)),Math.abs(e.zoom)<lS.FrictionThreshold&&(e.zoom=0)),0===e.rotateX&&0===e.rotateY&&0===e.panX&&0===e.panY&&0===e.zoom&&(e.applyFriction=!1),this.store.dispatch(new Qh(e))}flyToObject(e,t){Human.renderer.camera.fly.flyTo({objectId:e,animationDuration:t})}jumpToObject(e){Human.renderer.camera.fly.jumpTo({objectId:e})}flyToPoint(e,t){Human.renderer.camera.fly.flyTo(Object.assign({},e,{animationDuration:t}),()=>{this.store.dispatch(new Yh)})}jumpToPoint(e){Human.renderer.camera.fly.jumpTo(e)}getNodeFromHit(e){let t;if(e.objectId){const n=this.store.selectSnapshot(wm.getViewGraph);t=this.engineService.getNode(n,e.objectId)}return t}getHit(e,t){return Human.renderer.pick.pick(e,t,{rayPick:!0})}getContainerStyles(){const e={};return this.background&&!this.isTransparentBackground&&(e["background-image"]=$o.toCSS(this.background)),this.display||(e.display="none"),this.engineVisible||(e.opacity=0),e}getOffset(e){let t=0,n=0;e.center?(t=e.center.x,n=e.center.y):(t=e.clientX,n=e.clientY);const l=this.engineElement.nativeElement.getBoundingClientRect();return{offsetX:t-l.left,offsetY:n-l.top}}playAudio(e,t){null==e&&(e=this.store.selectSnapshot(Nr.getSelectedChapterId)),null==t&&(t=this.store.selectSnapshot(wm.getPlayAudio));let n=this.audioPlayers.get(e);if(!n){const e=this.store.selectSnapshot(Nr.getSelectedChapterAudio);if(e){const t=Object(Mt.get)(e,"data.fullUrl");if(!t)return;n=new eS.Howl({src:[`/content/states/${t}`]}),this.audioPlayers.set(this.store.selectSnapshot(Nr.getSelectedChapterId),n)}}this.audioPlayers.forEach(e=>{e.stop()}),n&&(t?n.play():n.stop())}playChapterFromStart(){const e=this.store.selectSnapshot(Nr.getSelectedChapter);this.playAudio(),this.store.dispatch(new Li(e)),this.store.dispatch(new Ei(!0))}}return Object(y.__decorate)([Object(O.e)(wm.getReady),Object(y.__metadata)("design:type",Z.a)],e.prototype,"ready$",void 0),Object(y.__decorate)([Object(O.e)(wm.getViewGraph),Object(y.__metadata)("design:type",Z.a)],e.prototype,"viewGraph$",void 0),Object(y.__decorate)([Object(O.e)(wm.getEnginePosition),Object(y.__metadata)("design:type",Z.a)],e.prototype,"enginePosition$",void 0),Object(y.__decorate)([Object(O.e)(wm.getHoveredNode),Object(y.__metadata)("design:type",Z.a)],e.prototype,"hoveredNode$",void 0),Object(y.__decorate)([Object(O.e)(wm.getChapter),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapter$",void 0),Object(y.__decorate)([Object(O.e)(wm.getChapterInit),Object(y.__metadata)("design:type",Z.a)],e.prototype,"chapterInit$",void 0),Object(y.__decorate)([Object(O.e)(Xs.getCheckedNodes),Object(y.__metadata)("design:type",Z.a)],e.prototype,"checkedNodes$",void 0),Object(y.__decorate)([Object(O.e)(wm.getActiveTool),Object(y.__metadata)("design:type",Z.a)],e.prototype,"activeTool$",void 0),Object(y.__decorate)([Object(O.e)(wm.getAnimationPlaying),Object(y.__metadata)("design:type",Z.a)],e.prototype,"animationPlaying$",void 0),Object(y.__decorate)([Object(O.e)(wm.getAutoplay),Object(y.__metadata)("design:type",Z.a)],e.prototype,"autoplay$",void 0),Object(y.__decorate)([Object(O.e)(wm.getPlayAudio),Object(y.__metadata)("design:type",Z.a)],e.prototype,"playAudio$",void 0),Object(y.__decorate)([Object(O.e)(wm.getDisplay),Object(y.__metadata)("design:type",Z.a)],e.prototype,"engineDisplay$",void 0),Object(y.__decorate)([Object(O.e)(wm.getVisible),Object(y.__metadata)("design:type",Z.a)],e.prototype,"engineVisible$",void 0),Object(y.__decorate)([Object(O.e)(wm.getShowProgressBar),Object(y.__metadata)("design:type",Z.a)],e.prototype,"showProgressBar$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapter),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedChapter$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterId),Object(y.__metadata)("design:type",Z.a)],e.prototype,"selectedChapterId$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterReadyState),Object(y.__metadata)("design:type",Z.a)],e.prototype,"readyState$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterClippingPlanes),Object(y.__metadata)("design:type",Z.a)],e.prototype,"clippingPlanes$",void 0),Object(y.__decorate)([Object(O.e)(xm.getCameraMotion),Object(y.__metadata)("design:type",Z.a)],e.prototype,"cameraMotion$",void 0),Object(y.__decorate)([Object(O.e)(Nr.getSelectedChapterBackground),Object(y.__metadata)("design:type",Z.a)],e.prototype,"background$",void 0),e})();var uS=l.vb({encapsulation:0,styles:[[".engine[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;-webkit-tap-highlight-color:transparent;position:fixed;width:100vw;height:100vh;overflow:hidden;visibility:hidden;z-index:-1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.engine__canvas[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%;z-index:1}.engine__annotations[_ngcontent-%COMP%]{display:none}.engine--cursor-paint[_ngcontent-%COMP%]:hover{cursor:url(/assets/images/cursor-paint.png) 7 20,pointer}.engine--cursor-hide[_ngcontent-%COMP%]:hover{cursor:url(/assets/images/cursor-hide.png) 7 20,pointer}.engine--cursor-label[_ngcontent-%COMP%]:hover{cursor:url(/assets/images/cursor-label.png) 7 20,pointer}.engine--cursor-crosshair[_ngcontent-%COMP%]:hover{cursor:crosshair}.engine--checkered[_ngcontent-%COMP%]{background-color:#fff;background-size:24px 24px;background-position:0 0,12px 12px;background-image:linear-gradient(45deg,#d7e0ea 25%,transparent 25%,transparent 75%,#d7e0ea 75%,#d7e0ea),linear-gradient(45deg,#d7e0ea 25%,transparent 25%,transparent 75%,#d7e0ea 75%,#d7e0ea)}.engine__controls[_ngcontent-%COMP%]{position:absolute;right:16px;bottom:16px;z-index:2}.engine__progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:2}.engine__progress--hide[_ngcontent-%COMP%]{display:none}.engine__input-blocking[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:3}@media (max-width:768px){.engine__controls[_ngcontent-%COMP%]{bottom:96px}}"]],data:{}});function pS(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,0,"div",[["class","engine__input-blocking"],["data-test","engineInputBlocker"]],null,null,null,null,null))],null,null)}function dS(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-engine-progress",[],null,null,null,mk,hk)),l.wb(1,245760,null,0,gk,[O.i,l.i],null,null)],(function(e,t){e(t,1,0)}),null)}function bS(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),l.xb(1,0,null,null,1,"app-engine-camera-position",[],null,null,null,_k,fk)),l.wb(2,114688,null,0,xk,[Rs,l.i],null,null)],(function(e,t){e(t,2,0)}),null)}function gS(e){return l.Tb(2,[l.Pb(402653184,1,{engineElement:0}),l.Pb(402653184,2,{engineCanvasElement:0}),l.Pb(402653184,3,{engineAnnotationsElement:0}),(e()(),l.xb(3,0,[[1,0],["engine",1]],null,17,"div",[["class","engine"],["data-test","engine"],["id","container"],["role","main"]],[[2,"engine--checkered",null]],null,null,null,null)),l.Ob(512,null,se.C,se.D,[l.l,l.v,l.H]),l.wb(5,278528,null,0,se.p,[se.C],{ngStyle:[0,"ngStyle"]},null),(e()(),l.xb(6,0,[[2,0],["engineCanvas",1]],null,0,"canvas",[["class","engine__canvas"],["data-test","engineCanvas"],["id","theCanvas"]],null,null,null,null,null)),(e()(),l.xb(7,0,[[3,0],["engineAnnotations",1]],null,0,"canvas",[["class","engine__annotations"],["id","annotationCanvas"]],null,null,null,null,null)),(e()(),l.xb(8,0,null,null,1,"app-labels",[],null,null,null,$k,Uk)),l.wb(9,245760,null,0,Dk,[O.i,O.b,Rs,xt,l.i,Ns,l.l],null,null),(e()(),l.nb(16777216,null,null,1,null,pS)),l.wb(11,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),(e()(),l.nb(16777216,null,null,2,null,dS)),l.wb(13,16384,null,0,se.m,[l.S,l.P],{ngIf:[0,"ngIf"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(15,0,null,null,1,"app-engine-scroll",[],null,null,null,qk,Wk)),l.wb(16,245760,null,0,Vk,[O.b,l.i],null,null),(e()(),l.xb(17,0,null,null,1,"app-engine-fade",[],null,null,null,Zk,Kk)),l.wb(18,245760,null,0,Xk,[O.b,l.i,O.i],null,null),(e()(),l.nb(16777216,null,null,1,null,bS)),l.wb(20,81920,null,0,Bx,[l.P,l.S,d.m],{appFlagApplication:[0,"appFlagApplication"]},null)],(function(e,t){var n=t.component;e(t,5,0,n.getContainerStyles()),e(t,9,0),e(t,11,0,!n.inputEnabled),e(t,13,0,l.Sb(t,13,0,l.Jb(t,14).transform(n.showProgressBar$))),e(t,16,0),e(t,18,0),e(t,20,0,n.application.Loft)}),(function(e,t){e(t,3,0,t.component.isBackgroundCheckered)}))}var hS=function(e){return e.JS="js",e.Config="config",e.Event="event",e}({});let mS=(()=>{class e{constructor(){const e=window;e.gtag||(e.dataLayer=e.dataLayer||[],e.gtag=function(){e.dataLayer.push(arguments)})}init(e){this.analyticsId=e,this.gtag(hS.JS,new Date),this.gtag(hS.Config,e,{send_page_view:!1})}logPageView(e){this.gtag(hS.Config,this.analyticsId,{page_path:e})}logEvent(e,t){this.gtag(hS.Event,e,t)}gtag(...e){window.gtag(...e)}}return e.ngInjectableDef=l.Wb({factory:function(){return new e},token:e,providedIn:"root"}),e})();var xS=l.vb({encapsulation:0,styles:[[""]],data:{}});function fS(e){return l.Tb(2,[(e()(),l.xb(0,0,null,null,2,"app-engine",[],null,[[null,"wheel"],[null,"contextmenu"],[null,"mouseout"]],(function(e,t,n){var i=!0;return"wheel"===t&&(i=!1!==l.Jb(e,1).wheel(n)&&i),"contextmenu"===t&&(i=!1!==l.Jb(e,1).contextmenu(n)&&i),"mouseout"===t&&(i=!1!==l.Jb(e,1).mouseout(n)&&i),i}),gS,uS)),l.wb(1,245760,null,0,cS,[O.b,xt,l.i,Rs,Wx,l.H,O.i],{inputEnabled:[0,"inputEnabled"]},null),l.Lb(131072,se.b,[l.i]),(e()(),l.xb(3,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),l.wb(4,212992,null,0,d.q,[d.b,l.S,l.k,[8,null],l.i],null,null)],(function(e,t){var n=t.component;e(t,1,0,l.Sb(t,1,0,l.Jb(t,2).transform(n.inputEnabled$))),e(t,4,0)}),null)}function _S(e){return l.Tb(0,[(e()(),l.xb(0,0,null,null,1,"app-root",[],null,null,null,fS,xS)),l.wb(1,245760,null,0,te,[O.i,d.m,mS],null,null)],(function(e,t){e(t,1,0)}),null)}var yS=l.tb("app-root",te,_S,{},{},[]),OS=n("7QIX");function wS(){const e=new F_.e;return e.link=(e,t,n)=>`<a href="${function(e){return e.match(/^(?:(?:(?:ht)tps?):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i)?e:""}(e)}" target="_blank" rel="noreferrer nofollow">${n}</a>`,e.paragraph=e=>`<p>${e}</p>`,e.image=(e,t,n)=>"",{renderer:e,gfm:!1}}class vS{}var CS=n("Xd0L"),jS=n("fDlF"),kS=n("POq0"),SS=n("JjoW"),PS=n("DkaU");class MS{}class TS extends MS{constructor(){super(...arguments),this.accountUrl="biodigital.zendesk.com"}beforePageLoad(e){e.setLocale("en"),e.hide()}}class IS{}function JS(){return window}let zS=(()=>{class e{constructor(e){if(!e.accountUrl)throw new Error("Missing accountUrl. Please set in app config via ZendeskWidgetProvider");this.window=JS();let t=this.window;t.zEmbed||function(n,l){var i,a,o,s,r=[],c=document.createElement("iframe");t.zEmbed=function(){r.push(arguments)},t.zE=t.zE||t.zEmbed,c.src="javascript:false",c.title="",c.style.cssText="display: none",(o=(o=document.getElementsByTagName("script"))[o.length-1]).parentNode.insertBefore(c,o),s=c.contentWindow.document;try{a=s}catch(n){i=document.domain,c.src='javascript:var d=document.open();d.domain="'+i+'";void(0);',a=s}a.open()._l=function(){var t=this.createElement("script");i&&(this.domain=i),t.id="js-iframe-async",t.src="https://assets.zendesk.com/embeddable_framework/main.js",this.t=+new Date,this.zendeskHost=e.accountUrl,this.zEQueue=r,this.body.appendChild(t)},a.write('<body onload="document._l();">'),a.close()}(),this.window.zE(()=>{e.beforePageLoad(this.window.zE)})}setLocale(e){this.window.zE(()=>{this.window.zE.setLocale(e)})}identify(e){this.window.zE(()=>{this.window.zE.identify(e)})}hide(){this.window.zE(()=>{this.window.zE.hide()})}show(){this.window.zE(()=>{this.window.zE.show()})}activate(e){this.window.zE(()=>{this.window.zE.activate(e)})}setHelpCenterSuggestions(e){this.window.zE(()=>{this.window.zE.setHelpCenterSuggestions(e)})}setSettings(e){this.window.zESettings=e}}return e.ngInjectableDef=l.Wb({factory:function(){return new e(l.Xb(MS))},token:e,providedIn:"root"}),e})();class LS{}const{categories:ES}=Wr,AS={query:"",loading:!0,searching:!1,searchResults:[],sort:lu,checkedSearchResults:[],selectedCategory:null};let FS=(()=>{let e=class{constructor(e,t,n){this.exploreService=e,this.bookmarksService=t,this.store=n}static getSearchResults(e){const{searchResults:t,searching:n}=e;if(n)return t;{const{ascending:n,fields:l}=e.sort;return ou(t,l,n)}}static getCheckedSearchResults(e){return e.checkedSearchResults}static getLoading(e){return e.loading}static getSort(e){return e.sort}static getSelectedCategory(e){return e.selectedCategory}static getSearchQuery(e){return e.query}load(e,{category:t}){e.patchState({loading:!0});const n=this.store.selectSnapshot(Ao.getUserLanguage);(t===Ec.Public?this.bookmarksService.getPublicBookmarks():this.exploreService.getAnatomyCategory("",t,n)).pipe(Object(B.a)(()=>{e.patchState({loading:!1})})).subscribe(t=>{t.forEach(e=>{"module"===e.type&&(e.id=e.module_name.replace(".json",""))}),e.dispatch(new oa(t))})}search(e,{query:t}){e.patchState({query:t,searching:!0,loading:!0});const n=this.store.selectSnapshot(Ao.getUserLanguage);this.exploreService.search(t,[],n).pipe(Object(B.a)(()=>e.patchState({loading:!1}))).subscribe(t=>e.dispatch(new oa(t)))}setSearching(e,{searching:t}){e.patchState({searching:t})}loadSuccess({patchState:e},{searchResults:t}){e({searchResults:t})}sortSearchResults(e,t){const n=e.getState().searchResults;e.patchState({sort:t.sort,searchResults:[...n]})}resetSearchResults(e,t){e.patchState({searchResults:[],checkedSearchResults:[]})}checkSearchResult(e,t){let n=e.getState().checkedSearchResults;const l=n.some(e=>e===t.id);t.checked&&!l?n=[...n,t.id]:t.checked||(n=n.filter(e=>e!==t.id)),e.patchState({checkedSearchResults:n})}setCheckedSearchResults(e,t){e.patchState({checkedSearchResults:t.ids})}selectCategory(e,t){const n=t.tag?t.tag.toLowerCase():"";e.patchState({selectedCategory:ES.find(e=>e.id.toLowerCase()===n)})}resetExplore(e,t){e.setState(AS)}};return Object(y.__decorate)([Object(O.a)(la),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,la]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"load",null),Object(y.__decorate)([Object(O.a)(ia),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ia]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"search",null),Object(y.__decorate)([Object(O.a)(aa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,aa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setSearching",null),Object(y.__decorate)([Object(O.a)(oa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,oa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"loadSuccess",null),Object(y.__decorate)([Object(O.a)(sa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,sa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"sortSearchResults",null),Object(y.__decorate)([Object(O.a)(ra),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ra]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetSearchResults",null),Object(y.__decorate)([Object(O.a)(ca),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ca]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"checkSearchResult",null),Object(y.__decorate)([Object(O.a)(ua),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,ua]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setCheckedSearchResults",null),Object(y.__decorate)([Object(O.a)(pa),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,pa]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"selectCategory",null),Object(y.__decorate)([Object(O.a)(da),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,da]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetExplore",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[LS]),Object(y.__metadata)("design:returntype",void 0)],e,"getSearchResults",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[LS]),Object(y.__metadata)("design:returntype",void 0)],e,"getCheckedSearchResults",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[LS]),Object(y.__metadata)("design:returntype",void 0)],e,"getLoading",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[LS]),Object(y.__metadata)("design:returntype",void 0)],e,"getSort",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[LS]),Object(y.__metadata)("design:returntype",void 0)],e,"getSelectedCategory",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[LS]),Object(y.__metadata)("design:returntype",void 0)],e,"getSearchQuery",null),Object(y.__decorate)([Object(O.g)({name:"explore",defaults:AS})],e)})();class RS{}const DS={theme:function(e){return e.Light="theme-light",e.Dark="theme-dark",e}({}).Light};let US=(()=>{let e=class{static getTheme(e){return e.theme}setTheme({patchState:e},{theme:t}){e({theme:t})}resetLayout(e,t){e.setState(DS)}};return Object(y.__decorate)([Object(O.a)(To),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,To]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"setTheme",null),Object(y.__decorate)([Object(O.a)(Io),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Io]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"resetLayout",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[RS]),Object(y.__metadata)("design:returntype",void 0)],e,"getTheme",null),Object(y.__decorate)([Object(O.g)({name:"layout",defaults:DS})],e)})();class NS{}let HS=(()=>{let e=class{constructor(e){this.dialogService=e}static getOpenDialog(e){return e.openDialog}openPremiumContent(e,t){this.dialogService.openPremiumContentDialog().afterClosed().subscribe(t=>{e.dispatch(new Qu.ClosePremiumContent(t))})}closePremiumContent(e,t){t.confirmed&&e.dispatch(new Qu.OpenUpgrade)}openUpgrade(e,t){this.dialogService.openUpgradeDialog()}};return Object(y.__decorate)([Object(O.a)(Qu.OpenPremiumContent),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Qu.OpenPremiumContent]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"openPremiumContent",null),Object(y.__decorate)([Object(O.a)(Qu.ClosePremiumContent),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Qu.ClosePremiumContent]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"closePremiumContent",null),Object(y.__decorate)([Object(O.a)(Qu.OpenUpgrade),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[Object,Qu.OpenUpgrade]),Object(y.__metadata)("design:returntype",void 0)],e.prototype,"openUpgrade",null),Object(y.__decorate)([Object(O.f)(),Object(y.__metadata)("design:type",Function),Object(y.__metadata)("design:paramtypes",[NS]),Object(y.__metadata)("design:returntype",void 0)],e,"getOpenDialog",null),Object(y.__decorate)([Object(O.g)({name:"dialog",defaults:{openDialog:null}})],e)})();class BS{constructor(){}resolve(e){const t=Object.assign({},e.queryParams);return Ym(Object.keys(t).reduce((e,n)=>{const l=Array.isArray(t[n]);return e[n]=l?Object(Mt.last)(t[n]):t[n],e},{}))}}var $S=n("Mrqg");class VS{}class WS{}var GS=n("zQui"),qS=n("Fwaw"),XS=n("BzsH"),KS=n("mkRZ"),ZS=n("kNGD");const YS={duration:3e3},QS={disabled:!0,animation:{enterDuration:0,exitDuration:0}};class eP{}class tP{}class nP{}class lP{}class iP{}class aP{}class oP{}class sP{}class rP{}class cP{}class uP{}class pP{}class dP{}class bP{}class gP{static forRoot(e){return{ngModule:gP,providers:[{provide:e,useClass:e},{provide:zS,useClass:zS,deps:[e]}]}}}class hP{}class mP{}class xP{}class fP{}class _P{}class yP{}class OP{}class wP{}class vP{}class CP{}class jP{}class kP{}class SP{}class PP{}class MP{}class TP{}class IP{}class JP{}class zP{}class LP{}class EP{}class AP{}class FP{}class RP{}class DP{}class UP{}class NP{}class HP{}class BP{}class $P{}class VP{}var WP=n("dvZr"),GP=l.ub(_,[te],(function(e){return l.Gb([l.Hb(512,l.k,l.gb,[[8,[ne.a,le.a,ie.a,ie.b,ae.a,oe.a,Cp,Pp,zp,qp,gd,fd,jd,Td,Ad,Nd,Vd,Xd,hb,Eb,Vb,Ph,Dh,bx,zx,Kf,Zj,uk,yS]],[3,l.k],l.z]),l.Hb(5120,l.w,ml,[]),l.Hb(4608,se.o,se.n,[l.w,[2,se.F]]),l.Hb(4608,ix,ix,[OS.a,O.i]),l.Hb(4608,c.m,c.m,[]),l.Hb(6144,c.k,null,[c.m]),l.Hb(4608,c.i,c.i,[c.k]),l.Hb(6144,c.b,null,[c.i]),l.Hb(4608,c.f,c.l,[c.b,l.s]),l.Hb(4608,c.c,c.c,[c.f]),l.Hb(4608,it.b,it.l,[se.d]),l.Hb(5120,F_.d,wS,[]),l.Hb(4608,F_.c,F_.c,[l.D,[2,c.c],it.b,F_.d]),l.Hb(5120,l.ob,l.sb,[l.B]),l.Hb(5120,l.c,l.pb,[]),l.Hb(5120,l.u,l.qb,[]),l.Hb(5120,l.v,l.rb,[]),l.Hb(6144,l.K,null,[it.b]),l.Hb(4608,it.e,CS.b,[[2,CS.d],[2,CS.f]]),l.Hb(5120,it.c,(function(e,t,n,l,i,a,o,s){return[new it.j(e,t,n),new it.o(l),new it.n(i,a,o,s)]}),[se.d,l.B,l.D,se.d,se.d,it.e,l.hb,[2,it.f]]),l.Hb(4608,it.d,it.d,[it.c,l.B]),l.Hb(135680,it.m,it.m,[se.d]),l.Hb(4608,it.k,it.k,[it.d,it.m,l.c]),l.Hb(5120,jS.a,ye.e,[]),l.Hb(5120,jS.c,ye.f,[]),l.Hb(4608,jS.b,ye.d,[se.d,jS.a,jS.c]),l.Hb(5120,l.I,ye.g,[it.k,jS.b,l.B]),l.Hb(6144,it.p,null,[it.m]),l.Hb(4608,l.Q,l.Q,[l.B]),l.Hb(4608,Hw.b,ye.c,[l.I,se.d]),l.Hb(4608,c.j,c.p,[se.d,l.D,c.n]),l.Hb(4608,c.q,c.q,[c.j,c.o]),l.Hb(5120,c.a,(function(e){return[e,new p]}),[c.q]),l.Hb(4608,Rr.d,Rr.d,[se.d,l.B,nt.j,Rr.f]),l.Hb(4608,kS.c,kS.c,[]),l.Hb(4608,Qe.a,Qe.a,[Qe.g,Qe.c,l.k,Qe.f,Qe.d,l.s,l.B,se.d,et.b,[2,se.h]]),l.Hb(5120,Qe.h,Qe.i,[Qe.a]),l.Hb(5120,SS.a,SS.b,[Qe.a]),l.Hb(5120,Je.c,Je.j,[Qe.a]),l.Hb(4608,CS.a,CS.a,[]),l.Hb(5120,ip.c,ip.d,[Qe.a]),l.Hb(135680,ip.e,ip.e,[Qe.a,l.s,[2,se.h],[2,ip.b],ip.c,[3,ip.e],Qe.c]),l.Hb(5120,tt.b,tt.c,[Qe.a]),l.Hb(135680,_e.e,_e.e,[l.B,lt.a]),l.Hb(4608,PS.b,PS.b,[l.P]),l.Hb(4608,de.z,de.z,[]),l.Hb(4608,at.d,at.d,[]),l.Hb(4608,yt.a,yt.a,[[2,"PapaParseGlobalConfig"]]),l.Hb(4608,de.f,de.f,[]),l.Hb(4608,TS,TS,[]),l.Hb(4608,zS,zS,[TS]),l.Hb(4608,Tc,Tc,[O.i,lc,Rs,$r]),l.Hb(4608,Nr,Nr,[kr,Mr,O.i,or,Rs]),l.Hb(4608,Br,Br,[O.i,Ns]),l.Hb(4608,wm,wm,[O.i,Ts,Rs,_m,or]),l.Hb(4608,xm,xm,[xt,O.i]),l.Hb(4608,Xs,Xs,[]),l.Hb(4608,Mj,Mj,[O.i]),l.Hb(4608,Ro,Ro,[Lt,O.i]),l.Hb(4608,ru,ru,[O.i,lc,Ac,qr,Lt,Rc]),l.Hb(4608,FS,FS,[qr,Ac,O.i]),l.Hb(4608,US,US,[]),l.Hb(4608,Uc,Uc,[Rc,Lt]),l.Hb(4608,BO,BO,[O.i]),l.Hb(5120,"virtual-scroller-default-options",Eg.a,[]),l.Hb(4608,Yu,Yu,[Rc,Lu,qr,Ac]),l.Hb(4608,HS,HS,[sp]),l.Hb(4608,$m,$m,[]),l.Hb(4608,q,q,[H,N]),l.Hb(4608,BS,BS,[]),l.Hb(5120,d.a,d.A,[d.m]),l.Hb(4608,d.f,d.f,[]),l.Hb(6144,d.h,null,[d.f]),l.Hb(135680,d.r,d.r,[d.m,l.y,l.j,l.s,d.h]),l.Hb(4608,d.g,d.g,[]),l.Hb(5120,d.F,d.w,[d.m,se.w,d.i]),l.Hb(5120,d.j,d.D,[d.B]),l.Hb(5120,l.b,(function(e,t){return[e,O.d.appBootstrapListenerFactory(t)]}),[d.j,$S.c]),l.Hb(4608,O.b,O.b,[O.m,O.A]),l.Hb(256,O.d.ROOT_OPTIONS,{},[]),l.Hb(1024,O.r,O.d.ngxsConfigFactory,[O.d.ROOT_OPTIONS]),l.Hb(512,O.m,O.m,[]),l.Hb(512,O.v,O.v,[]),l.Hb(512,O.h,O.h,[]),l.Hb(1024,m,f,[]),l.Hb(512,l.m,x,[m]),l.Hb(512,O.z,O.z,[[3,O.z],[2,O.c]]),l.Hb(512,O.s,O.G,[l.B,l.D]),l.Hb(512,O.A,O.A,[O.s]),l.Hb(512,O.w,O.w,[l.m,O.m,O.v,O.z,O.h,O.A]),l.Hb(1024,O.q,O.d.isAngularInTestMode,[]),l.Hb(1024,O.p,O.d.isAngularDevMode,[]),l.Hb(512,O.C,O.C,[O.q,O.p]),l.Hb(512,O.B,O.B,[O.C,O.r]),l.Hb(512,O.y,O.y,[O.h,O.w,O.r,O.B]),l.Hb(512,O.x,O.x,[O.y]),l.Hb(1024,$S.a,O.d.getInitialState,[]),l.Hb(512,O.u,O.u,[l.s,O.r,[3,O.u],O.m,O.v,O.x,[2,$S.a]]),l.Hb(512,O.i,O.i,[O.h,O.y,O.r,O.A,[2,$S.a]]),l.Hb(512,O.D,O.D,[O.i,O.r]),l.Hb(256,O.n,[],[]),l.Hb(512,$S.c,$S.c,[]),l.Hb(512,O.E,O.E,[O.y,O.x,$S.c]),l.Hb(1073742336,O.t,O.t,[O.u,O.y,O.i,O.D,[2,O.n],O.r,O.E]),l.Hb(1024,O.o,(function(){return[[ix],[Tc,Nr,Br],[wm,xm,Xs,Mj],[Ro],[ru],[FS,US],[Uc],[BO],[Yu],[HS],[$m],[q]]}),[]),l.Hb(1073742336,O.F,O.F,[O.i,O.y,O.u,[2,O.o],O.E]),l.Hb(1073742336,se.c,se.c,[]),l.Hb(1073742336,VS,VS,[]),l.Hb(1073742336,xl,xl,[]),l.Hb(1073742336,F_.a,F_.a,[]),l.Hb(1073742336,vS,vS,[]),l.Hb(1024,l.A,(function(){return[d.v()]}),[]),l.Hb(512,d.B,d.B,[l.s]),l.Hb(1024,l.d,(function(e,t){return[it.q(e),d.C(t)]}),[[2,l.A],d.B]),l.Hb(512,l.e,l.e,[[2,l.d]]),l.Hb(131584,l.g,l.g,[l.B,l.hb,l.s,l.m,l.k,l.e]),l.Hb(1073742336,l.f,l.f,[l.g]),l.Hb(1073742336,it.a,it.a,[[3,it.a]]),l.Hb(1073742336,ye.b,ye.b,[]),l.Hb(1073742336,c.e,c.e,[]),l.Hb(1073742336,c.d,c.d,[]),l.Hb(1073742336,WS,WS,[]),l.Hb(1073742336,Rr.e,Rr.e,[]),l.Hb(1073742336,GS.a,GS.a,[]),l.Hb(1073742336,et.a,et.a,[]),l.Hb(1073742336,CS.f,CS.f,[[2,CS.c],[2,it.f]]),l.Hb(1073742336,lt.b,lt.b,[]),l.Hb(1073742336,CS.j,CS.j,[]),l.Hb(1073742336,kS.d,kS.d,[]),l.Hb(1073742336,fe.d,fe.d,[]),l.Hb(1073742336,fe.c,fe.c,[]),l.Hb(1073742336,qS.c,qS.c,[]),l.Hb(1073742336,Pe.d,Pe.d,[]),l.Hb(1073742336,AO.f,AO.f,[]),l.Hb(1073742336,nt.g,nt.g,[]),l.Hb(1073742336,Qe.e,Qe.e,[]),l.Hb(1073742336,CS.h,CS.h,[]),l.Hb(1073742336,CS.g,CS.g,[]),l.Hb(1073742336,Kd.b,Kd.b,[]),l.Hb(1073742336,SS.c,SS.c,[]),l.Hb(1073742336,Je.i,Je.i,[]),l.Hb(1073742336,Je.f,Je.f,[]),l.Hb(1073742336,XS.a,XS.a,[]),l.Hb(1073742336,KS.a,KS.a,[]),l.Hb(1073742336,ZS.b,ZS.b,[]),l.Hb(1073742336,ip.k,ip.k,[]),l.Hb(1073742336,_e.a,_e.a,[]),l.Hb(1073742336,tt.e,tt.e,[]),l.Hb(1073742336,rp.f,rp.f,[]),l.Hb(1073742336,xb.b,xb.b,[]),l.Hb(1073742336,PS.a,PS.a,[]),l.Hb(1073742336,eP,eP,[]),l.Hb(1073742336,de.y,de.y,[]),l.Hb(1073742336,de.j,de.j,[]),l.Hb(1073742336,tP,tP,[]),l.Hb(1073742336,nP,nP,[]),l.Hb(1073742336,Uh.b,Uh.b,[]),l.Hb(1073742336,lP,lP,[]),l.Hb(1073742336,iP,iP,[]),l.Hb(1073742336,at.c,at.c,[]),l.Hb(1073742336,aP,aP,[]),l.Hb(1073742336,oP,oP,[]),l.Hb(1073742336,sP,sP,[]),l.Hb(1073742336,rP,rP,[]),l.Hb(1073742336,yt.b,yt.b,[]),l.Hb(1073742336,cP,cP,[]),l.Hb(1073742336,uP,uP,[]),l.Hb(1073742336,de.u,de.u,[]),l.Hb(1073742336,pP,pP,[]),l.Hb(1073742336,dP,dP,[]),l.Hb(1073742336,bP,bP,[]),l.Hb(1073742336,gP,gP,[]),l.Hb(1073742336,IS,IS,[]),l.Hb(1073742336,hP,hP,[]),l.Hb(1073742336,mP,mP,[]),l.Hb(1073742336,xP,xP,[]),l.Hb(1024,d.u,d.y,[[3,d.m]]),l.Hb(512,d.t,b,[]),l.Hb(512,d.b,d.b,[]),l.Hb(256,d.i,{},[]),l.Hb(1024,se.i,d.x,[se.v,[2,se.a],d.i]),l.Hb(512,se.h,se.h,[se.i,se.v]),l.Hb(512,l.j,l.j,[]),l.Hb(512,l.y,l.N,[l.j,[2,l.O]]),l.Hb(1024,d.k,(function(){return[[],[{path:"",component:Vf,resolve:{widgetUrlConfig:BS},children:[{path:"",component:Ij},{path:"error",component:ik}]}]]}),[]),l.Hb(1024,d.m,d.z,[l.g,d.t,d.b,se.h,l.s,l.y,l.j,d.k,d.i,[2,d.s],[2,d.l]]),l.Hb(1073742336,d.p,d.p,[[2,d.u],[2,d.m]]),l.Hb(1073742336,fP,fP,[]),l.Hb(1073742336,_P,_P,[]),l.Hb(1073742336,yP,yP,[]),l.Hb(1073742336,OP,OP,[]),l.Hb(1073742336,wP,wP,[]),l.Hb(1073742336,vP,vP,[]),l.Hb(1073742336,CP,CP,[]),l.Hb(1073742336,jP,jP,[]),l.Hb(1073742336,kP,kP,[]),l.Hb(1073742336,SP,SP,[]),l.Hb(1073742336,PP,PP,[]),l.Hb(1073742336,MP,MP,[]),l.Hb(1073742336,TP,TP,[]),l.Hb(1073742336,IP,IP,[]),l.Hb(1073742336,JP,JP,[]),l.Hb(1073742336,zP,zP,[]),l.Hb(1073742336,LP,LP,[]),l.Hb(1073742336,EP,EP,[]),l.Hb(1073742336,AP,AP,[]),l.Hb(1073742336,Eg.c,Eg.c,[]),l.Hb(1073742336,FP,FP,[]),l.Hb(1073742336,RP,RP,[]),l.Hb(1073742336,DP,DP,[]),l.Hb(1073742336,UP,UP,[]),l.Hb(1073742336,NP,NP,[]),l.Hb(1073742336,HP,HP,[]),l.Hb(1073742336,BP,BP,[]),l.Hb(1073742336,$P,$P,[]),l.Hb(1073742336,VP,VP,[]),l.Hb(1073742336,_,_,[]),l.Hb(256,l.fb,!0,[]),l.Hb(256,ye.a,"BrowserAnimations",[]),l.Hb(256,c.n,"XSRF-TOKEN",[]),l.Hb(256,c.o,"X-XSRF-TOKEN",[]),l.Hb(256,ZS.a,{separatorKeyCodes:[WP.f]},[]),l.Hb(256,rp.b,YS,[]),l.Hb(256,CS.e,QS,[]),l.Hb(256,"options",{preset:Uh.c},[])])}));r.production&&Object(l.X)(),it.i().bootstrapModuleFactory(GP).catch(e=>console.error(e))},crnd:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},qpAl:function(e,t){!function(t){var n="Modernizr"in t,l=t.Modernizr;!function(e,t,n){function l(e,t){return typeof e===t}function i(e,t){return!!~(""+e).indexOf(t)}function a(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):_?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function o(e,n,l,i){var o,s,r,c,u="modernizr",p=a("div"),d=function(){var e=t.body;return e||((e=a(_?"svg":"body")).fake=!0),e}();if(parseInt(l,10))for(;l--;)(r=a("div")).id=i?i[l]:u+(l+1),p.appendChild(r);return(o=a("style")).type="text/css",o.id="s"+u,(d.fake?d:p).appendChild(o),d.appendChild(p),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),p.id=u,d.fake&&(d.style.background="",d.style.overflow="hidden",c=f.style.overflow,f.style.overflow="hidden",f.appendChild(d)),s=n(p,e),d.fake?(d.parentNode.removeChild(d),f.style.overflow=c):p.parentNode.removeChild(p),!!s}function s(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()})).replace(/^ms-/,"-ms-")}function r(t,n,l){var i;if("getComputedStyle"in e){i=getComputedStyle.call(e,t,n);var a=e.console;null!==i?l&&(i=i.getPropertyValue(l)):a&&a[a.error?"error":"log"].call(a,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else i=!n&&t.currentStyle&&t.currentStyle[l];return i}function c(t,l){var i=t.length;if("CSS"in e&&"supports"in e.CSS){for(;i--;)if(e.CSS.supports(s(t[i]),l))return!0;return!1}if("CSSSupportsRule"in e){for(var a=[];i--;)a.push("("+s(t[i])+":"+l+")");return o("@supports ("+(a=a.join(" or "))+") { #modernizr { position: absolute; } }",(function(e){return"absolute"===r(e,null,"position")}))}return n}function u(e){return e.replace(/([a-z])-([a-z])/g,(function(e,t,n){return t+n.toUpperCase()})).replace(/^-/,"")}function p(e,t,o,s){function r(){d&&(delete v.style,delete v.modElem)}if(s=!l(s,"undefined")&&s,!l(o,"undefined")){var p=c(e,o);if(!l(p,"undefined"))return p}for(var d,b,g,h,m,x=["modernizr","tspan","samp"];!v.style&&x.length;)d=!0,v.modElem=a(x.shift()),v.style=v.modElem.style;for(g=e.length,b=0;b<g;b++)if(m=v.style[h=e[b]],i(h,"-")&&(h=u(h)),v.style[h]!==n){if(s||l(o,"undefined"))return r(),"pfx"!==t||h;try{v.style[h]=o}catch(e){}if(v.style[h]!==m)return r(),"pfx"!==t||h}return r(),!1}function d(e,t){return function(){return e.apply(t,arguments)}}function b(e,t,n,i,a){var o=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+O.join(o+" ")+o).split(" ");return l(t,"string")||l(t,"undefined")?p(s,t,i,a):function(e,t,n){var i;for(var a in e)if(e[a]in t)return!1===n?e[a]:l(i=t[e[a]],"function")?d(i,n||t):i;return!1}(s=(e+" "+C.join(o+" ")+o).split(" "),t,n)}var g=[],h={_version:"3.8.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){g.push({name:e,fn:t,options:n})},addAsyncTest:function(e){g.push({name:null,fn:e})}},m=function(){};m.prototype=h,m=new m;var x=[],f=t.documentElement,_="svg"===f.nodeName.toLowerCase(),y="Moz O ms Webkit",O=h._config.usePrefixes?y.split(" "):[];h._cssomPrefixes=O;var w={elem:a("modernizr")};m._q.push((function(){delete w.elem}));var v={style:w.elem.style};m._q.unshift((function(){delete v.style}));var C=h._config.usePrefixes?y.toLowerCase().split(" "):[];h._domPrefixes=C,h.testAllProps=b;var j=function(t){var l,i=prefixes.length,a=e.CSSRule;if(void 0===a)return n;if(!t)return!1;if((l=(t=t.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in a)return"@"+t;for(var o=0;o<i;o++){var s=prefixes[o];if(s.toUpperCase()+"_"+l in a)return"@-"+s.toLowerCase()+"-"+t}return!1};h.atRule=j;var k=h.prefixed=function(e,t,n){return 0===e.indexOf("@")?j(e):(-1!==e.indexOf("-")&&(e=u(e)),t?b(e,t,n):b(e,"pfx"))};m.addTest("fullscreen",!(!k("exitFullscreen",t,!1)&&!k("cancelFullScreen",t,!1))),function(){var e,t,n,i,a,o;for(var s in g)if(g.hasOwnProperty(s)){if(e=[],(t=g[s]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=l(t.fn,"function")?t.fn():t.fn,a=0;a<e.length;a++)1===(o=e[a].split(".")).length?m[o[0]]=i:(m[o[0]]&&(!m[o[0]]||m[o[0]]instanceof Boolean)||(m[o[0]]=new Boolean(m[o[0]])),m[o[0]][o[1]]=i),x.push((i?"":"no-")+o.join("-"))}}(),function(e){var t=f.className,n=m._config.classPrefix||"";if(_&&(t=t.baseVal),m._config.enableJSClass){var l=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(l,"$1"+n+"js$2")}m._config.enableClasses&&(e.length>0&&(t+=" "+n+e.join(" "+n)),_?f.className.baseVal=t:f.className=t)}(x),delete h.addTest,delete h.addAsyncTest;for(var S=0;S<m._q.length;S++)m._q[S]();e.Modernizr=m}(t,document),e.exports=t.Modernizr,n?t.Modernizr=l:delete t.Modernizr}(window)}},[[0,0,4]]]);