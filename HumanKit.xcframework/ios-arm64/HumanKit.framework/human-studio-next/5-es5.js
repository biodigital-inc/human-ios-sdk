!function(){function e(t,n){return(e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(t,n)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=i(e);if(t){var a=i(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return n(this,o)}}function n(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"1CwK":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("fXoL"),o=function(){var e=function(){function e(){s(this,e)}return p(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-pillbox-divider"]],decls:1,vars:0,consts:[[1,"pillbox-divider"]],template:function(e,t){1&e&&i.Qb(0,"div",0)},styles:[".pillbox-divider{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-right:1px solid rgba(0,0,0,.1);height:18px;margin:0 8px}"],encapsulation:2,changeDetection:0}),e}()},"6/b0":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("AcyG"),o=n("11Ye"),r=n("Lyqc"),a=n("VJvM"),c=n("q8pu"),l=n("Vv7R"),u=n("MuXT"),d=n("gm/O"),h=n("JaAu"),g=n("fXoL"),f=function(){var e=function(){function e(t,n){s(this,e),this.store=t,this.storyService=n}return p(e,[{key:"resetScene",value:function(){this.store.dispatch(new o.u),this.store.dispatch(new d.a.Reset),this.store.dispatch(new h.a.Reset),this.store.dispatch(new r.D(null)),this.store.dispatch(new a.o),this.store.dispatch(new o.B("")),this.store.dispatch(new c.j),this.store.dispatch(new o.c),this.store.dispatch(new o.t),this.store.dispatch(new l.l)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Zb(i.h),g.Zb(u.a))},e.\u0275prov=g.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},C9yA:function(e,t){t.remove=function(e){return e.replace(/[^\u0000-\u007e]/g,(function(e){return i[e]||e}))};for(var n=[{base:" ",chars:"\xa0"},{base:"0",chars:"\u07c0"},{base:"A",chars:"\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",chars:"\ua732"},{base:"AE",chars:"\xc6\u01fc\u01e2"},{base:"AO",chars:"\ua734"},{base:"AU",chars:"\ua736"},{base:"AV",chars:"\ua738\ua73a"},{base:"AY",chars:"\ua73c"},{base:"B",chars:"\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0181"},{base:"C",chars:"\u24b8\uff23\ua73e\u1e08\u0106C\u0108\u010a\u010c\xc7\u0187\u023b"},{base:"D",chars:"\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018a\u0189\u1d05\ua779"},{base:"Dh",chars:"\xd0"},{base:"DZ",chars:"\u01f1\u01c4"},{base:"Dz",chars:"\u01f2\u01c5"},{base:"E",chars:"\u025b\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e\u1d07"},{base:"F",chars:"\ua77c\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",chars:"\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e\u0262"},{base:"H",chars:"\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",chars:"\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",chars:"\u24bf\uff2a\u0134\u0248\u0237"},{base:"K",chars:"\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",chars:"\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",chars:"\u01c7"},{base:"Lj",chars:"\u01c8"},{base:"M",chars:"\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c\u03fb"},{base:"N",chars:"\ua7a4\u0220\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u019d\ua790\u1d0e"},{base:"NJ",chars:"\u01ca"},{base:"Nj",chars:"\u01cb"},{base:"O",chars:"\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OE",chars:"\u0152"},{base:"OI",chars:"\u01a2"},{base:"OO",chars:"\ua74e"},{base:"OU",chars:"\u0222"},{base:"P",chars:"\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",chars:"\u24c6\uff31\ua756\ua758\u024a"},{base:"R",chars:"\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",chars:"\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",chars:"\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"Th",chars:"\xde"},{base:"TZ",chars:"\ua728"},{base:"U",chars:"\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",chars:"\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",chars:"\ua760"},{base:"W",chars:"\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",chars:"\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",chars:"\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",chars:"\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",chars:"\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250\u0251"},{base:"aa",chars:"\ua733"},{base:"ae",chars:"\xe6\u01fd\u01e3"},{base:"ao",chars:"\ua735"},{base:"au",chars:"\ua737"},{base:"av",chars:"\ua739\ua73b"},{base:"ay",chars:"\ua73d"},{base:"b",chars:"\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253\u0182"},{base:"c",chars:"\uff43\u24d2\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",chars:"\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\u018b\u13e7\u0501\ua7aa"},{base:"dh",chars:"\xf0"},{base:"dz",chars:"\u01f3\u01c6"},{base:"e",chars:"\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u01dd"},{base:"f",chars:"\u24d5\uff46\u1e1f\u0192"},{base:"ff",chars:"\ufb00"},{base:"fi",chars:"\ufb01"},{base:"fl",chars:"\ufb02"},{base:"ffi",chars:"\ufb03"},{base:"ffl",chars:"\ufb04"},{base:"g",chars:"\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\ua77f\u1d79"},{base:"h",chars:"\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",chars:"\u0195"},{base:"i",chars:"\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",chars:"\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",chars:"\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",chars:"\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747\u026d"},{base:"lj",chars:"\u01c9"},{base:"m",chars:"\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",chars:"\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5\u043b\u0509"},{base:"nj",chars:"\u01cc"},{base:"o",chars:"\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\ua74b\ua74d\u0275\u0254\u1d11"},{base:"oe",chars:"\u0153"},{base:"oi",chars:"\u01a3"},{base:"oo",chars:"\ua74f"},{base:"ou",chars:"\u0223"},{base:"p",chars:"\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755\u03c1"},{base:"q",chars:"\u24e0\uff51\u024b\ua757\ua759"},{base:"r",chars:"\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",chars:"\u24e2\uff53\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b\u0282"},{base:"ss",chars:"\xdf"},{base:"t",chars:"\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"th",chars:"\xfe"},{base:"tz",chars:"\ua729"},{base:"u",chars:"\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",chars:"\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",chars:"\ua761"},{base:"w",chars:"\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",chars:"\u24e7\uff58\u1e8b\u1e8d"},{base:"y",chars:"\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",chars:"\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],i={},o=0;o<n.length;o+=1)for(var r=n[o].chars,a=0;a<r.length;a+=1)i[r[a]]=n[o].base;t.replacementList=n,t.diacriticsMap=i},GW3K:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var i=n("LvDl");function o(e,t,n){var i=r(e),o=i.splice(t,1);return i.splice.apply(i,[n,0].concat(r(o))),i}function a(e,t,n){var o=t.findIndex((function(t,n){var o=e[n];return!Object(i.isEqual)(o,t)})),r=t[o];return t.map((function(e,t){return Object(i.isEqual)(r,e)&&t!==o?n:e}))}},JnPr:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return P}));var r=n("rDax"),a=n("XNiG"),c=n("VRyK"),l=n("xgIS"),u=n("lJxs"),d=n("1G5W"),h=function(){function e(t,n,i){var o=this;s(this,e),this.overlay=t,this.content=n,this.data=i,this.afterClosed=new a.a,this.afterClosed$=this.afterClosed.asObservable(),t.backdropClick().subscribe((function(){return o._close("backdropClick",i)})),this.entered$=Object(c.a)(Object(l.a)(t.overlayElement,"mouseenter"),Object(l.a)(t.overlayElement,"mouseleave")).pipe(Object(u.a)((function(e){return"mouseenter"===e.type})),Object(d.a)(this.afterClosed$))}return p(e,[{key:"close",value:function(e){this._close("close",e)}},{key:"_close",value:function(e,t){this.overlay.dispose(),this.afterClosed.next({type:e,data:t}),this.afterClosed.complete()}}]),e}(),g=n("+rOU"),f=n("fXoL"),b=n("ofXK");function y(e,t){if(1&e&&f.Qb(0,"div",4),2&e){var n=f.gc();f.mc("innerHTML",n.content,f.Dc)}}function m(e,t){1&e&&f.Rb(0)}function v(e,t){if(1&e&&(f.Tb(0),f.Nc(1,m,1,0,"ng-container",5),f.Sb()),2&e){var n=f.gc();f.Db(1),f.mc("ngTemplateOutlet",n.content)("ngTemplateOutletContext",n.context)}}function x(e,t){1&e&&f.Rb(0)}function w(e,t){if(1&e&&(f.Tb(0),f.Nc(1,x,1,0,"ng-container",6),f.Sb()),2&e){var n=f.gc();f.Db(1),f.mc("ngComponentOutlet",n.content)}}var O,k,C=((O=function(){function e(t){s(this,e),this.popupRef=t,this.renderMethod="component"}return p(e,[{key:"ngOnInit",value:function(){this.content=this.popupRef.content,"string"==typeof this.content?this.renderMethod="text":this.content instanceof f.O&&(this.renderMethod="template",this.context={close:this.popupRef.close.bind(this.popupRef)})}}]),e}()).\u0275fac=function(e){return new(e||O)(f.Pb(h))},O.\u0275cmp=f.Jb({type:O,selectors:[["app-popup"]],decls:5,vars:4,consts:[[1,"popup"],[3,"ngSwitch"],[3,"innerHTML",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngComponentOutlet"]],template:function(e,t){1&e&&(f.Vb(0,"div",0),f.Tb(1,1),f.Nc(2,y,1,1,"div",2),f.Nc(3,v,2,2,"ng-container",3),f.Nc(4,w,2,1,"ng-container",3),f.Sb(),f.Ub()),2&e&&(f.Db(1),f.mc("ngSwitch",t.renderMethod),f.Db(1),f.mc("ngSwitchCase","text"),f.Db(1),f.mc("ngSwitchCase","template"),f.Db(1),f.mc("ngSwitchCase","component"))},directives:[b.r,b.s,b.u,b.n],styles:["[_nghost-%COMP%]{width:100%;height:100%}.popup[_ngcontent-%COMP%]{background:#fff;border-radius:4px;padding:8px;overflow-y:auto;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3)}"],changeDetection:0}),O),_=function(e){return e.Above="above",e.Below="below",e.Left="left",e.Right="right",e}({}),j=(o(i={},_.Above,{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-12}),o(i,_.Below,{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:12}),o(i,_.Left,{originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:-12}),o(i,_.Right,{originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:12}),i),P=((k=function(){function e(t,n){s(this,e),this.overlay=t,this.injector=n}return p(e,[{key:"open",value:function(e){var t=e.origin,n=e.content,i=e.data,o=e.width,r=e.height,a=e.hasBackdrop,s=this.overlay.create(this.getOverlayConfig({origin:t,width:o,height:r,hasBackdrop:a})),c=new h(s,n,i),p=this.createInjector(c,this.injector);return s.attach(new g.c(C,null,p)),c}},{key:"createInjector",value:function(e,t){var n=new WeakMap([[h,e]]);return new g.e(t,n)}},{key:"getPositionStrategy",value:function(e,t){return this.overlay.position().flexibleConnectedTo(e).withPositions(this.getPositions(t))}},{key:"getOverlayConfig",value:function(e){var t=e.origin,n=e.width,i=e.height,o=e.hasBackdrop;return new r.d({width:n,height:i,hasBackdrop:null==o||o,backdropClass:"popup-scrim",positionStrategy:this.getOverlayPosition(t),scrollStrategy:this.overlay.scrollStrategies.reposition()})}},{key:"getOverlayPosition",value:function(e,t){return t=t||[_.Above,_.Below,_.Left,_.Right],this.overlay.position().flexibleConnectedTo(e).withPositions(this.getPositions(t)).withPush(!0)}},{key:"getPositions",value:function(e){return e.map((function(e){return j[e]}))}}]),e}()).\u0275fac=function(e){return new(e||k)(f.Zb(r.c),f.Zb(f.t))},k.\u0275prov=f.Lb({token:k,factory:k.\u0275fac,providedIn:"root"}),k)},NEgD:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("AcyG"),o=n("XNiG"),r=n("HDdC"),a=n("pLZG"),c=n("1G5W"),l=n("GMXD"),u=n("PUI9"),d=n("HdmJ"),h=n("fXoL"),g=n("7u76"),f=n("2Vo4"),b=n("nS47"),y=n("11Ye"),m=n("ofXK"),v=n("rY+M");function x(e,t){if(1&e){var n=h.Wb();h.Vb(0,"div",6),h.cc("click",(function(){h.Cc(n);var e=h.gc(2).$implicit;return h.gc().handleExpandClick(e,!0)})),h.Ub()}if(2&e){var i=h.gc(2).$implicit;h.mc("title",i.label)}}function w(e,t){if(1&e&&(h.Vb(0,"div",4),h.Nc(1,x,1,1,"div",5),h.Qb(2,"app-tree-group",2),h.Ub()),2&e){var n=h.gc().$implicit,i=h.gc();h.Db(1),h.mc("ngIf",i.hasChildren(n)),h.Db(1),h.mc("graph",i.graph)("node",n)("theme",i.theme)}}var O=function(e){return{"tree-group--light":e}};function k(e,t){if(1&e&&(h.Vb(0,"div",1),h.Qb(1,"app-tree-nested-node",2),h.Nc(2,w,3,4,"div",3),h.Ub()),2&e){var n=t.$implicit,i=h.gc();h.mc("ngClass",h.pc(5,O,i.theme===i.themeEnum.Light)),h.Db(1),h.mc("graph",i.graph)("node",n)("theme",i.theme),h.Db(1),h.mc("ngIf",n.boolState.expanded)}}var C,_,j=((C=function(){function e(t,n){s(this,e),this.graphService=t,this.store=n,this.themeEnum=d.a,this.graphSubject=new f.a(null),this.theme=d.a.Dark,this.nodes=[],this.ngUnsubscribe=new o.a}return p(e,[{key:"graph",get:function(){return this._graph},set:function(e){e&&(this._graph=e,this.graphSubject.next(e))}},{key:"ngOnInit",value:function(){var e=this;this.graphSubject.pipe(Object(c.a)(this.ngUnsubscribe)).subscribe((function(t){t&&e.getNodes()}))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"getNodes",value:function(){var e=this.node?b.a.getSuccessors(this.graph,this.node.id):b.a.getRoots(this.graph);this.nodes=this.graphService.getNodes(this.graph,e)}},{key:"countChildren",value:function(e){return b.a.getSuccessors(this.graph,e.id).length}},{key:"hasChildren",value:function(e){return this.countChildren(e)>0}},{key:"trackTreeNode",value:function(e,t){return t.id}},{key:"handleExpandClick",value:function(e,t){this.store.dispatch(t?new y.f(e):new y.g(e))}}]),e}()).\u0275fac=function(e){return new(e||C)(h.Pb(g.a),h.Pb(i.h))},C.\u0275cmp=h.Jb({type:C,selectors:[["app-tree-group"]],inputs:{graph:"graph",theme:"theme",node:"node"},decls:1,vars:2,consts:[["class","tree-group",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"tree-group",3,"ngClass"],[3,"graph","node","theme"],["class","tree-group__children",4,"ngIf"],[1,"tree-group__children"],["class","tree-group__collapse",3,"title","click",4,"ngIf"],[1,"tree-group__collapse",3,"title","click"]],template:function(e,t){1&e&&h.Nc(0,k,3,7,"div",0),2&e&&h.mc("ngForOf",t.nodes)("ngForTrackBy",t.trackTreeNode)},directives:[m.o,m.m,v.a,m.p,C],styles:['.text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.tree-group[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tree-group--light[_ngcontent-%COMP%]   .tree-group__collapse[_ngcontent-%COMP%]:after{background:#eaeff5}.tree-group--light[_ngcontent-%COMP%]   .tree-group__collapse[_ngcontent-%COMP%]:hover{background:transparent}.tree-group--light[_ngcontent-%COMP%]   .tree-group__collapse[_ngcontent-%COMP%]:hover:after{background:#d7e0ea}.tree-group__children[_ngcontent-%COMP%]{padding-left:20px;position:relative}.tree-group__collapse[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;width:20px;z-index:1}.tree-group__collapse[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;width:1px;left:10px;top:0;bottom:0;background:#1c2a3f}.tree-group__collapse[_ngcontent-%COMP%]:hover{cursor:pointer}.tree-group__collapse[_ngcontent-%COMP%]:hover:after{background:#283853}'],changeDetection:0}),C),P=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},S=((_=function(){function e(t,n){s(this,e),this.store=t,this.graphService=n,this.theme=d.a.Dark,this.ngUnsubscribe=new o.a}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.store.select(l.a.getCheckedNodes).pipe(Object(a.a)((function(e){return 1===e.length})),Object(c.a)(this.ngUnsubscribe)).subscribe((function(t){setTimeout((function(){e.scrollNodeIntoView(t[0])}))}))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"scrollNodeIntoView",value:function(e){var t=this.graphService.sanitizeNodeID(e.objectId),n=document.querySelector('[data-id="'.concat(t,'"]'));n&&"scrollBehavior"in document.documentElement.style&&n.scrollIntoView({behavior:"smooth",block:"nearest"})}}]),e}()).\u0275fac=function(e){return new(e||_)(h.Pb(i.h),h.Pb(g.a))},_.\u0275cmp=h.Jb({type:_,selectors:[["app-tree"]],inputs:{theme:"theme",searchGraph:"searchGraph"},decls:2,vars:4,consts:[[3,"theme","graph"]],template:function(e,t){1&e&&(h.Qb(0,"app-tree-group",0),h.hc(1,"async")),2&e&&h.mc("theme",t.theme)("graph",t.searchGraph?t.searchGraph:h.ic(1,2,t.viewGraph$))},directives:[j],pipes:[m.b],styles:[""]}),function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);r>3&&a&&Object.defineProperty(t,n,a)}([Object(i.e)(u.a.getViewGraph),P("design:type",r.a)],_.prototype,"viewGraph$",void 0),_)},RhC1:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i,o,a=n("AcyG"),c=function e(){s(this,e)},l=n("82LM"),u=n("EF3F"),d=n("xcvO"),h=n("GUwF"),g=n("DTUA"),f=n("LvDl"),b=n("0Yvn"),y=n("Mh2x"),m=n("CAXj"),v=n("7b4e"),x=n("fXoL"),w=function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},O=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},k={currentRecipe:u.d,brushMode:d.a.Replace,storyRecipes:{},recentRecipes:[],uniqueStoryRecipes:[],palettes:[]},C=((o=i=function(){function e(t){s(this,e),this.storageService=t}return p(e,[{key:"setCurrentRecipe",value:function(e,t){var n=t.colorRecipe;e.patchState({currentRecipe:n})}},{key:"setBrushMode",value:function(e,t){e.patchState({brushMode:t.brushMode})}},{key:"clearCurrentRecipe",value:function(e,t){e.patchState({currentRecipe:null})}},{key:"resetPaint",value:function(e,t){e.setState(k)}},{key:"addRecentRecipe",value:function(e,t){var n=e.getState().recentRecipes;n.some((function(e){return h.a.isEqual(e,t.recipe)}))||(n.splice(0,0,t.recipe),n.length>14&&(n=n.slice(0,14)),this.storageService.setLocalItem(g.b.RecentRecipes,n),e.patchState({recentRecipes:r(n)}))}},{key:"setRecentRecipes",value:function(e,t){var n=Object(f.isNil)(t.recipes)?[]:r(t.recipes);e.patchState({recentRecipes:n}),this.storageService.setLocalItem(g.b.RecentRecipes,n)}},{key:"setStoryRecipesForChapter",value:function(e,t){var n=h.a.generateUniqueRecipes(r(t.recipes)),i=e.getState().storyRecipes;i[t.chapterId]=Object(f.isNil)(n)?[]:r(n),e.patchState({storyRecipes:i});var o=Object.values(i).reduce((function(e,t){return[].concat(r(e),r(t))}),[]);(o=h.a.generateUniqueRecipes(o)).sort(h.a.compare),e.patchState({uniqueStoryRecipes:o})}},{key:"resetStoryRecipes",value:function(e,t){e.patchState({storyRecipes:{}})}},{key:"addPalette",value:function(e,t){t.palette.id=v.a.idWithPrefix("palette");var n=[].concat(r(e.getState().palettes),[t.palette]);e.dispatch(new l.j(n))}},{key:"updatePalette",value:function(e,t){var n=e.getState().palettes,i=n.findIndex((function(e){return e.id===t.palette.id}));i>=0&&(n[i]=Object.assign({},t.palette)),e.dispatch(new l.j(n))}},{key:"removePalette",value:function(e,t){var n=r(e.getState().palettes.filter((function(e){return e.id!==t.paletteId})));e.dispatch(new l.j(n))}},{key:"setPalettes",value:function(e,t){var n=Object(f.cloneDeep)(t.palettes?r(t.palettes):[]);e.patchState({palettes:n}),localStorage.setItem(g.b.PaintPalettes,JSON.stringify(n))}},{key:"addRecipeToPalette",value:function(e,t){var n=e.getState().palettes,i=n.findIndex((function(e){return e.id===t.paletteId}));i>=0&&n[i].recipes.push(t.recipe),e.dispatch(new l.j(n))}},{key:"togglePalette",value:function(e,t){var n=e.getState().palettes,i=n.findIndex((function(e){return e.id===t.paletteId}));i>=0&&(n[i].open=Object(f.isNil)(t.open)?!n[i].open:t.open,e.dispatch(new l.j(n)))}},{key:"ngxsOnInit",value:function(e){}}],[{key:"getCurrentRecipe",value:function(e){return e.currentRecipe}},{key:"getCurrentRecipeForEngine",value:function(e){return b.a.toEngine(e.currentRecipe)}},{key:"getPaintBrushMode",value:function(e){return e.brushMode}},{key:"getRecentRecipes",value:function(e){return e.recentRecipes}},{key:"getStoryRecipes",value:function(e){return e.storyRecipes}},{key:"getUniqueStoryRecipes",value:function(e){return e.uniqueStoryRecipes}},{key:"getPalettes",value:function(e){return e.palettes}},{key:"getCurrentChapterRecipes",value:function(e,t){return e.storyRecipes[t.selectedChapter]}},{key:"getChapterRecipes",value:function(e){return Object(a.i)([i],(function(t){return t.storyRecipes[e]}))}}]),e}()).\u0275fac=function(e){return new(e||o)(x.Zb(g.d))},o.\u0275prov=x.Lb({token:o,factory:o.\u0275fac}),w([Object(a.a)(l.h),O("design:type",Function),O("design:paramtypes",[Object,l.h]),O("design:returntype",void 0)],o.prototype,"setCurrentRecipe",null),w([Object(a.a)(l.i),O("design:type",Function),O("design:paramtypes",[Object,l.i]),O("design:returntype",void 0)],o.prototype,"setBrushMode",null),w([Object(a.a)(l.d),O("design:type",Function),O("design:paramtypes",[Object,l.d]),O("design:returntype",void 0)],o.prototype,"clearCurrentRecipe",null),w([Object(a.a)(l.f),O("design:type",Function),O("design:paramtypes",[Object,l.f]),O("design:returntype",void 0)],o.prototype,"resetPaint",null),w([Object(a.a)(l.b),O("design:type",Function),O("design:paramtypes",[Object,l.b]),O("design:returntype",void 0)],o.prototype,"addRecentRecipe",null),w([Object(a.a)(l.k),O("design:type",Function),O("design:paramtypes",[Object,l.k]),O("design:returntype",void 0)],o.prototype,"setRecentRecipes",null),w([Object(a.a)(l.l),O("design:type",Function),O("design:paramtypes",[Object,l.l]),O("design:returntype",void 0)],o.prototype,"setStoryRecipesForChapter",null),w([Object(a.a)(l.g),O("design:type",Function),O("design:paramtypes",[Object,l.g]),O("design:returntype",void 0)],o.prototype,"resetStoryRecipes",null),w([Object(a.a)(l.a),O("design:type",Function),O("design:paramtypes",[Object,l.a]),O("design:returntype",void 0)],o.prototype,"addPalette",null),w([Object(a.a)(l.n),O("design:type",Function),O("design:paramtypes",[Object,l.n]),O("design:returntype",void 0)],o.prototype,"updatePalette",null),w([Object(a.a)(l.e),O("design:type",Function),O("design:paramtypes",[Object,l.e]),O("design:returntype",void 0)],o.prototype,"removePalette",null),w([Object(a.a)(l.j),O("design:type",Function),O("design:paramtypes",[Object,l.j]),O("design:returntype",void 0)],o.prototype,"setPalettes",null),w([Object(a.a)(l.c),O("design:type",Function),O("design:paramtypes",[Object,l.c]),O("design:returntype",void 0)],o.prototype,"addRecipeToPalette",null),w([Object(a.a)(l.m),O("design:type",Function),O("design:paramtypes",[Object,l.m]),O("design:returntype",void 0)],o.prototype,"togglePalette",null),w([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[c]),O("design:returntype",void 0)],o,"getCurrentRecipe",null),w([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[c]),O("design:returntype",void 0)],o,"getCurrentRecipeForEngine",null),w([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[c]),O("design:returntype",void 0)],o,"getPaintBrushMode",null),w([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[c]),O("design:returntype",void 0)],o,"getRecentRecipes",null),w([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[c]),O("design:returntype",void 0)],o,"getStoryRecipes",null),w([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[c]),O("design:returntype",void 0)],o,"getUniqueStoryRecipes",null),w([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[c]),O("design:returntype",void 0)],o,"getPalettes",null),w([Object(a.f)([y.a]),O("design:type",Function),O("design:paramtypes",[c,m.a]),O("design:returntype",void 0)],o,"getCurrentChapterRecipes",null),o=i=w([Object(a.g)({name:"editPaint",defaults:k})],o))},XiU4:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var i=n("sTHe"),o=n("AcyG"),r=n("YLgZ"),a=n("XNiG"),c=n("HDdC"),l=n("TATr"),u=n("Mh2x"),d=n("11Ye"),h=n("snBo"),g=n("q8pu"),f=n("R0Ic"),b=n("j8e5"),y=n("Ryms"),m=n("gm/O"),v=n("JaAu"),x=n("fXoL"),w=n("937/"),O=n("u47x"),k=n("ofXK"),C=n("jHc0"),_=n("9AAO"),j=n("Qu3c"),P=function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},S=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function R(e,t){if(1&e){var n=x.Wb();x.Vb(0,"button",8),x.cc("touchend",(function(){return x.Cc(n),x.gc(2).setZoomFixed("out")}))("mouseup",(function(){return x.Cc(n),x.gc(2).setZoomFixed("out")}))("keyup.enter",(function(){return x.Cc(n),x.gc(2).setZoomFixed("out")})),x.Ub()}}function M(e,t){if(1&e){var n=x.Wb();x.Vb(0,"button",9),x.cc("touchend",(function(){return x.Cc(n),x.gc(2).setZoomFixed("in")}))("mouseup",(function(){return x.Cc(n),x.gc(2).setZoomFixed("in")}))("keyup.enter",(function(){return x.Cc(n),x.gc(2).setZoomFixed("in")})),x.Ub()}}function N(e,t){if(1&e){var n=x.Wb();x.Vb(0,"button",10),x.cc("click",(function(){return x.Cc(n),x.gc(2).returnToChapterCamera()})),x.Vb(1,"span",11),x.Pc(2,"Clicking this button will reset the camera viewing the 3D model"),x.Ub(),x.Ub()}}function I(e,t){if(1&e){var n=x.Wb();x.Vb(0,"button",12),x.cc("click",(function(){return x.Cc(n),x.gc(2).togglePan()})),x.hc(1,"async"),x.hc(2,"async"),x.hc(3,"async"),x.Vb(4,"span",11),x.Pc(5,"Clicking this button changes whether the mouse movement rotates or pans the camera"),x.Ub(),x.Ub()}if(2&e){var i=x.gc(2);x.mc("selected","pan"===x.ic(1,3,i.panMode$))("matTooltip","pan"===x.ic(2,5,i.panMode$)?"Switch to Rotate Mode":"Switch to Pan Mode"),x.Eb("aria-pressed","pan"===x.ic(3,7,i.panMode$))}}function T(e,t){if(1&e&&(x.Vb(0,"app-pillbox",2),x.Vb(1,"ul",3),x.Vb(2,"li"),x.Nc(3,R,1,0,"button",4),x.Ub(),x.Vb(4,"li"),x.Nc(5,M,1,0,"button",5),x.Ub(),x.Vb(6,"li"),x.Nc(7,N,3,0,"button",6),x.Ub(),x.Vb(8,"li"),x.Nc(9,I,6,9,"button",7),x.Ub(),x.Ub(),x.Ub()),2&e){var n=x.gc();x.Db(3),x.mc("ngIf",n.showZoom),x.Db(2),x.mc("ngIf",n.showZoom),x.Db(2),x.mc("ngIf",n.showResetPosition),x.Db(2),x.mc("ngIf",n.showPan)}}var F=function(){var e=function(){function e(t,n,o){s(this,e),this.store=t,this.cameraService=n,this.liveAnnouncer=o,this.showNav=!0,this.showZoom=!0,this.showPan=!0,this.showResetPosition=!0,this.viewLayout=h.a,this.toolEnum=i.a,this.expandNav=!1,this.breakpointEnum=y.a,this.padding="none",this.ngUnsubscribe=new a.a}return p(e,[{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"setZoomFixed",value:function(e){this.cameraService.setCameraZoomWithVelocity("in"===e?-8:8),this.liveAnnouncer.announce("zoom ".concat(e," complete"))}},{key:"returnToChapterCamera",value:function(){var e=this,t=this.store.selectSnapshot(u.a.getSelectedChapter);this.store.dispatch(new l.l(t.camera.location)).subscribe((function(){e.liveAnnouncer.announce("recenter complete")}))}},{key:"resetChapter",value:function(){this.returnToChapterCamera();var e=this.store.selectSnapshot(u.a.getSelectedChapterId);this.store.dispatch(new v.a.UndoAll(e)),this.store.dispatch(new m.a.UpdateNodesChecked(!1)),this.store.dispatch(new g.h)}},{key:"centerCamera",value:function(){this.store.dispatch(new d.b)}},{key:"togglePan",value:function(){var e="pan"===this.store.selectSnapshot(r.a.getPanMode)?"rotate":"pan";this.store.dispatch(new l.n(e))}},{key:"toggleNav",value:function(){this.expandNav=!this.expandNav}}]),e}();return e.\u0275fac=function(t){return new(t||e)(x.Pb(o.h),x.Pb(w.a),x.Pb(O.i))},e.\u0275cmp=x.Jb({type:e,selectors:[["app-engine-camera-bar"]],inputs:{showNav:"showNav",showZoom:"showZoom",showPan:"showPan",showResetPosition:"showResetPosition"},decls:2,vars:1,consts:[["data-test","cameraBar",1,"camera-bar"],["eventCategory","Engine 3D Controls","orientation","vertical",4,"ngIf"],["eventCategory","Engine 3D Controls","orientation","vertical"],["aria-label","Camera Control Buttons",1,"camera-bar__nav"],["app-pin-button","","buttonType","ghost","icon","minus","tabIndex","0","data-test","cameraZoomOut","matTooltip","Zoom Out","matTooltipPosition","left",3,"touchend","mouseup","keyup.enter",4,"ngIf"],["app-pin-button","","buttonType","ghost","icon","plus","tabIndex","0","data-test","cameraZoomIn","matTooltip","Zoom In","matTooltipPosition","left",3,"touchend","mouseup","keyup.enter",4,"ngIf"],["app-pin-button","","icon","location","buttonType","ghost","tabIndex","0","matTooltip","Recenter 3D Model","matTooltipPosition","left","data-test","cameraReset",3,"click",4,"ngIf"],["app-pin-button","","tabIndex","0","icon","arrows-alt","buttonType","ghost","matTooltipPosition","left","data-test","cameraPan",3,"selected","matTooltip","click",4,"ngIf"],["app-pin-button","","buttonType","ghost","icon","minus","tabIndex","0","data-test","cameraZoomOut","matTooltip","Zoom Out","matTooltipPosition","left",3,"touchend","mouseup","keyup.enter"],["app-pin-button","","buttonType","ghost","icon","plus","tabIndex","0","data-test","cameraZoomIn","matTooltip","Zoom In","matTooltipPosition","left",3,"touchend","mouseup","keyup.enter"],["app-pin-button","","icon","location","buttonType","ghost","tabIndex","0","matTooltip","Recenter 3D Model","matTooltipPosition","left","data-test","cameraReset",3,"click"],[1,"visually-hidden"],["app-pin-button","","tabIndex","0","icon","arrows-alt","buttonType","ghost","matTooltipPosition","left","data-test","cameraPan",3,"selected","matTooltip","click"]],template:function(e,t){1&e&&(x.Vb(0,"div",0),x.Nc(1,T,10,4,"app-pillbox",1),x.Ub()),2&e&&(x.Db(1),x.mc("ngIf",t.showNav))},directives:[k.p,C.a,_.a,j.c],pipes:[k.b],styles:[":host{position:relative}.camera-bar{display:flex;flex-direction:column;align-items:center}.camera-bar button:not(:first-child){margin-top:4px}.camera-bar__nav{display:flex;flex-direction:column-reverse;overflow:hidden;transition:height .15s ease-in-out;justify-content:space-between}"],encapsulation:2,data:{animation:[Object(f.n)("expand",[Object(f.m)(":enter",[Object(f.j)([Object(f.l)({height:0}),Object(f.e)("150ms ease-in-out",Object(f.l)({height:"*"}))])]),Object(f.m)(":leave",[Object(f.j)([Object(f.e)("150ms ease-in-out",Object(f.l)({height:"0"}))])])]),Object(f.n)("show",[Object(f.m)(":enter",[Object(f.j)([Object(f.l)({height:"0"}),Object(f.e)("125ms ease-in-out",Object(f.l)({height:"*"}))])]),Object(f.m)(":leave",[Object(f.j)([Object(f.e)("125ms 125ms ease-in-out",Object(f.l)({height:"0"}))])])])]},changeDetection:0}),P([Object(o.e)(r.a.getPanMode),S("design:type",c.a)],e.prototype,"panMode$",void 0),P([Object(o.e)(b.a.getBreakpoint),S("design:type",c.a)],e.prototype,"breakpoint$",void 0),e}()},gcYM:function(n,i,o){"use strict";o.d(i,"a",(function(){return l}));var r=o("7o/Q"),a=o("D0XW");o("zx2A");var c={leading:!0,trailing:!1};function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;return function(i){return i.lift(new u(e,t,n.leading,n.trailing))}}var u=function(){function e(t,n,i,o){s(this,e),this.duration=t,this.scheduler=n,this.leading=i,this.trailing=o}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new d(e,this.duration,this.scheduler,this.leading,this.trailing))}}]),e}(),d=function(n){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}(o,n);var i=t(o);function o(e,t,n,r,a){var c;return s(this,o),(c=i.call(this,e)).duration=t,c.scheduler=n,c.leading=r,c.trailing=a,c._hasTrailingValue=!1,c._trailingValue=null,c}return p(o,[{key:"_next",value:function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(h,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}]),o}(r.a);function h(e){e.subscriber.clearThrottle()}},iTtc:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i,o=n("AcyG"),r=function e(){s(this,e)},a=n("jjCP"),c=n("x/dY"),l=n("RhC1"),u=n("82LM"),d=n("mdY/"),h=n("AytR"),g=n("p345"),f=n("DTUA"),b=n("fXoL"),y=function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v={view:c.a.Chapter,showColumns:!0,showLeftColumn:!0,showRightColumn:!0,showHeader:!0,showFooter:!0,showTimelineEditor:!1,autoCapture:h.a.application!==g.a.Loft,record:!0,layerOrderMode:!1,showTreeNodeIds:!1,showRootNodes:!1,canvasSize:d.a,canvasSettings:{emulateDrawer:!0,emulateColumn:!0}},x=((i=function(){function e(t){s(this,e),this.storageService=t}return p(e,[{key:"SetLayerOrderMode",value:function(e,t){e.patchState({layerOrderMode:t.layerOrderMode})}},{key:"ShowTreeNodeIds",value:function(e,t){var n=null!=t.show?t.show:!e.getState().showTreeNodeIds;e.patchState({showTreeNodeIds:n})}},{key:"showRootNodes",value:function(e,t){e.patchState({showRootNodes:t.show})}},{key:"setView",value:function(e,t){e.patchState({view:t.view})}},{key:"nextView",value:function(e,t){var n=e.getState().view,i=Object.values(c.a),o=i[i.indexOf(n)+1]||i[0];e.patchState({view:o})}},{key:"previousView",value:function(e,t){var n=e.getState().view,i=Object.values(c.a),o=i[i.indexOf(n)-1]||i[i.length-1];e.patchState({view:o})}},{key:"showColumns",value:function(e,t){e.patchState({showColumns:t.show})}},{key:"showColumn",value:function(e,t){switch(t.column){case"left":e.patchState({showLeftColumn:t.show});break;case"right":e.patchState({showRightColumn:t.show});break;case"header":e.patchState({showHeader:t.show});break;case"footer":e.patchState({showFooter:t.show})}}},{key:"showTimelineEditor",value:function(e,t){e.patchState({showTimelineEditor:t.show})}},{key:"resetEditPage",value:function(e,t){e.setState(v),e.dispatch(new u.f)}},{key:"setCanvasSize",value:function(e,t){e.patchState({canvasSize:t.size})}},{key:"autoCapture",value:function(e,t){e.patchState({autoCapture:t.enable}),h.a.application===g.a.Studio&&this.storageService.setLocalItem(f.b.AutoCapture,t.enable)}},{key:"ngxsOnInit",value:function(e){var t=this;setTimeout((function(){t.initAutoCapture(e)}))}},{key:"initAutoCapture",value:function(e){if(h.a.application===g.a.Studio){var t=this.storageService.getLocalJSON(f.b.AutoCapture);"boolean"==typeof t&&e.patchState({autoCapture:t})}}}],[{key:"getView",value:function(e){return e.view}},{key:"getShowColumns",value:function(e){return e.showColumns}},{key:"getShowLeftColumn",value:function(e){return e.showLeftColumn}},{key:"getShowRightColumn",value:function(e){return e.showRightColumn}},{key:"getShowHeader",value:function(e){return e.showHeader}},{key:"getShowFooter",value:function(e){return e.showFooter}},{key:"getShowTimelineEditor",value:function(e){return e.showTimelineEditor}},{key:"getRecord",value:function(e){return e.record}},{key:"getLayerOrderMode",value:function(e){return e.layerOrderMode}},{key:"getShowTreeNodeIds",value:function(e){return e.showTreeNodeIds}},{key:"getCanvasSize",value:function(e){return e.canvasSize}},{key:"getCanvasSettings",value:function(e){return e.canvasSettings}},{key:"getAutoCapture",value:function(e){return e.autoCapture}},{key:"getShowRootNodes",value:function(e){return e.showRootNodes}}]),e}()).\u0275fac=function(e){return new(e||i)(b.Zb(f.d))},i.\u0275prov=b.Lb({token:i,factory:i.\u0275fac}),y([Object(o.a)(a.g),m("design:type",Function),m("design:paramtypes",[Object,a.g]),m("design:returntype",void 0)],i.prototype,"SetLayerOrderMode",null),y([Object(o.a)(a.m),m("design:type",Function),m("design:paramtypes",[Object,a.m]),m("design:returntype",void 0)],i.prototype,"ShowTreeNodeIds",null),y([Object(o.a)(a.k),m("design:type",Function),m("design:paramtypes",[Object,a.k]),m("design:returntype",void 0)],i.prototype,"showRootNodes",null),y([Object(o.a)(a.h),m("design:type",Function),m("design:paramtypes",[Object,a.h]),m("design:returntype",void 0)],i.prototype,"setView",null),y([Object(o.a)(a.b),m("design:type",Function),m("design:paramtypes",[Object,a.b]),m("design:returntype",void 0)],i.prototype,"nextView",null),y([Object(o.a)(a.d),m("design:type",Function),m("design:paramtypes",[Object,a.b]),m("design:returntype",void 0)],i.prototype,"previousView",null),y([Object(o.a)(a.j),m("design:type",Function),m("design:paramtypes",[Object,a.j]),m("design:returntype",void 0)],i.prototype,"showColumns",null),y([Object(o.a)(a.i),m("design:type",Function),m("design:paramtypes",[Object,a.i]),m("design:returntype",void 0)],i.prototype,"showColumn",null),y([Object(o.a)(a.l),m("design:type",Function),m("design:paramtypes",[Object,a.l]),m("design:returntype",void 0)],i.prototype,"showTimelineEditor",null),y([Object(o.a)(a.e),m("design:type",Function),m("design:paramtypes",[Object,a.e]),m("design:returntype",void 0)],i.prototype,"resetEditPage",null),y([Object(o.a)(a.f),m("design:type",Function),m("design:paramtypes",[Object,a.f]),m("design:returntype",void 0)],i.prototype,"setCanvasSize",null),y([Object(o.a)(a.a),m("design:type",Function),m("design:paramtypes",[Object,a.a]),m("design:returntype",void 0)],i.prototype,"autoCapture",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getView",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getShowColumns",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getShowLeftColumn",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getShowRightColumn",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getShowHeader",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getShowFooter",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getShowTimelineEditor",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getRecord",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getLayerOrderMode",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getShowTreeNodeIds",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getCanvasSize",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getCanvasSettings",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getAutoCapture",null),y([Object(o.f)(),m("design:type",Function),m("design:paramtypes",[r]),m("design:returntype",void 0)],i,"getShowRootNodes",null),i=y([Object(o.g)({name:"edit",defaults:v,children:[l.a]})],i))},imBb:function(e,t,n){var i;!function(o,r,a){if(o){for(var s,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},p={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},d=1;d<20;++d)c[111+d]="f"+d;for(d=0;d<=9;++d)c[d+96]=d.toString();m.prototype.bind=function(e,t,n){return this._bindMultiple.call(this,e=e instanceof Array?e:[e],t,n),this},m.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},m.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},m.prototype.reset=function(){return this._callbacks={},this._directMap={},this},m.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(function e(t,n){return null!==t&&t!==r&&(t===n||e(t.parentNode,n))}(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},m.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},m.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(c[t]=e[t]);s=null},m.init=function(){var e=m(r);for(var t in e)"_"!==t.charAt(0)&&(m[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},m.init(),o.Mousetrap=m,e.exports&&(e.exports=m),void 0===(i=(function(){return m}).call(t,n,t,e))||(e.exports=i)}function h(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function g(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return c[e.which]?c[e.which]:p[e.which]?p[e.which]:String.fromCharCode(e.which).toLowerCase()}function f(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function b(e,t,n){return n||(n=function(){if(!s)for(var e in s={},c)e>95&&e<112||c.hasOwnProperty(e)&&(s[c[e]]=e);return s}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function y(e,t){var n,i,o,r=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),o=0;o<n.length;++o)u[i=n[o]]&&(i=u[i]),t&&"keypress"!=t&&l[i]&&(i=l[i],r.push("shift")),f(i)&&r.push(i);return{key:i,modifiers:r,action:t=b(i,r,t)}}function m(e){var t=this;if(e=e||r,!(t instanceof m))return new m(e);t.target=e,t._callbacks={},t._directMap={};var n,i={},o=!1,a=!1,s=!1;function c(e){e=e||{};var t,n=!1;for(t in i)e[t]?n=!0:i[t]=0;n||(s=!1)}function p(e,n,o,r,a,s){var c,p,l,u=[],d=o.type;if(!t._callbacks[e])return[];for("keyup"==d&&f(e)&&(n=[e]),c=0;c<t._callbacks[e].length;++c)p=t._callbacks[e][c],(r||!p.seq||i[p.seq]==p.level)&&d==p.action&&(("keypress"!=d||o.metaKey||o.ctrlKey)&&(l=p.modifiers,n.sort().join(",")!==l.sort().join(","))||((!r&&p.combo==a||r&&p.seq==r&&p.level==s)&&t._callbacks[e].splice(c,1),u.push(p)));return u}function l(e,n,i,o){t.stopCallback(n,n.target||n.srcElement,i,o)||!1===e(n,i)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function u(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=g(e);n&&("keyup"!=e.type||o!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):o=!1)}function d(e,r,a,u,h){t._directMap[e+":"+a]=r;var f,b=(e=e.replace(/\s+/g," ")).split(" ");b.length>1?function(e,t,r,a){function p(t){return function(){s=t,++i[e],clearTimeout(n),n=setTimeout(c,1e3)}}function u(t){l(r,t,e),"keyup"!==a&&(o=g(t)),setTimeout(c,10)}i[e]=0;for(var h=0;h<t.length;++h){var f=h+1===t.length?u:p(a||y(t[h+1]).action);d(t[h],f,a,e,h)}}(e,b,r,a):(f=y(e,a),t._callbacks[f.key]=t._callbacks[f.key]||[],p(f.key,f.modifiers,{type:f.action},u,e,h),t._callbacks[f.key][u?"unshift":"push"]({callback:r,modifiers:f.modifiers,action:f.action,seq:u,level:h,combo:e}))}t._handleKey=function(e,t,n){var i,o=p(e,t,n),r={},u=0,d=!1;for(i=0;i<o.length;++i)o[i].seq&&(u=Math.max(u,o[i].level));for(i=0;i<o.length;++i)if(o[i].seq){if(o[i].level!=u)continue;d=!0,r[o[i].seq]=1,l(o[i].callback,n,o[i].combo,o[i].seq)}else d||l(o[i].callback,n,o[i].combo);var h="keypress"==n.type&&a;n.type!=s||f(e)||h||c(r),a=d&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var i=0;i<e.length;++i)d(e[i],t,n)},h(e,"keypress",u),h(e,"keydown",u),h(e,"keyup",u)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},jHc0:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("fXoL"),o=n("ofXK"),r=n("1CwK"),a=n("9AAO"),c=n("Qu3c");function l(e,t){if(1&e){var n=i.Wb();i.Tb(0),i.Qb(1,"app-pillbox-divider"),i.Vb(2,"button",2),i.cc("click",(function(){return i.Cc(n),i.gc().handleExitClick()})),i.Ub(),i.Sb()}if(2&e){var o=i.gc();i.Db(2),i.mc("matTooltip","Close "+o.name),i.Eb("aria-label","Close "+o.name)}}var u=function(e,t,n){return{"pillbox--padding-dense":e,"pillbox--padding-none":t,"pillbox--vertical":n}},d=["*"],h=function(){var e=function(){function e(){s(this,e),this.canExit=!1,this.padding="normal",this.orientation="horizontal",this.name="",this.eventCategory="",this.exit=new i.p}return p(e,[{key:"ngOnInit",value:function(){}},{key:"handleExitClick",value:function(){this.exit.emit()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-pillbox"]],inputs:{canExit:"canExit",padding:"padding",orientation:"orientation",name:"name",eventCategory:"eventCategory"},outputs:{exit:"exit"},ngContentSelectors:d,decls:3,vars:6,consts:[[1,"pillbox",3,"ngClass"],[4,"ngIf"],["data-test","closePillboxButton","app-pin-button","","buttonType","ghost","icon","times",3,"matTooltip","click"]],template:function(e,t){1&e&&(i.lc(),i.Vb(0,"div",0),i.kc(1),i.Nc(2,l,3,2,"ng-container",1),i.Ub()),2&e&&(i.mc("ngClass",i.rc(2,u,"dense"===t.padding,"none"===t.padding,"vertical"===t.orientation)),i.Db(2),i.mc("ngIf",t.canExit))},directives:[o.m,o.p,r.a,a.a,c.c],styles:[".pillbox{border-radius:32px;background-color:hsla(0,0%,100%,.9);box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3);color:#131c2a;padding:6px;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;transition:padding .15s}.pillbox--padding-dense{padding:4px}.pillbox--padding-none{padding:0}.pillbox--vertical{flex-direction:column;padding:6px}"],encapsulation:2,changeDetection:0}),e}()},"mdY/":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return d}));var i=function e(t,n,i){s(this,e),this.label=t,this.width=n,this.height=i},o=new i("Don't Resize",-1,-1),r=new i("Common (Mobile)",360,640),a=new i("Common (Minimum)",300,300),c=new i("Common (Publish Default)",700,550),p=new i("iPhone X",375,812),l=new i("iPad (Portrait)",768,1024),u=new i("iPad (Landscape)",1024,768),d=[o,r,c,a,p,l,u]},nhKa:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ZULQ"),o=n("fXoL"),r=function(){var e=function(){function e(){s(this,e)}return p(e,[{key:"transform",value:function(e,t){return i.a.normalize(""+(e||""))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Ob({name:"textNormalize",type:e,pure:!0}),e}()},o0EK:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ofXK"),o=n("fXoL"),r=function(){var e=function e(){s(this,e)};return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e}()},"rY+M":function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var i=n("AcyG"),o=n("11Ye"),r=n("iTtc"),a=n("XNiG"),c=n("HDdC"),l=n("1G5W"),u=n("GMXD"),d=n("AytR"),h=n("nS47"),g=n("p345"),f=n("gm/O"),b=n("PUI9"),y=n("HdmJ"),m=n("fXoL"),v=n("7u76"),x=n("eW6i"),w=n("tyNb"),O=n("ofXK"),k=n("IlST"),C=n("PmOP"),_=n("0njA"),j=n("51ZA"),P=n("IZUe"),S=function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},R=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function M(e,t){if(1&e){var n=m.Wb();m.Vb(0,"button",9),m.cc("click",(function(){m.Cc(n);var e=m.gc();return e.handleExpandClick(e.node,e.node.boolState.expanded)})),m.Qb(1,"app-icon",10),m.Ub()}if(2&e){var i=m.gc();m.mc("buttonTheme",i.theme),m.Eb("aria-label",i.node.boolState.expanded?"Collapse "+i.node.label:"Expand "+i.node.label)("aria-expanded",i.node.boolState.expanded),m.Db(1),m.Hb("rotate-45",i.node.boolState.expanded)}}function N(e,t){if(1&e&&(m.Vb(0,"div",16),m.Pc(1),m.Ub()),2&e){var n=m.gc(2);m.Db(1),m.Rc(" ",n.shortId," ")}}var I=function(e){return{"tree-node__label--padded":e}};function T(e,t){if(1&e){var n=m.Wb();m.Vb(0,"div",11),m.cc("dblclick",(function(){return m.Cc(n),m.gc().setEditLabelMode(!0)})),m.Vb(1,"div",12),m.Nc(2,N,2,1,"div",13),m.hc(3,"async"),m.Vb(4,"div",14),m.Vb(5,"span",15),m.Pc(6,"Select"),m.Ub(),m.Pc(7),m.Ub(),m.Ub(),m.Ub()}if(2&e){var i=m.gc();m.mc("ngClass",m.pc(6,I,!i.hasChildren&&i.nested)),m.Eb("aria-current",i.checked),m.Db(2),m.mc("ngIf",m.ic(3,4,i.showTreeNodeIds$)),m.Db(5),m.Rc(" ",i.node.label," ")}}function F(e,t){if(1&e){var n=m.Wb();m.Vb(0,"input",17),m.cc("blur",(function(e){return m.Cc(n),m.gc().handleObjectLabel(e)}))("keyup",(function(e){return m.Cc(n),m.gc().handleObjectLabel(e)})),m.Ub()}if(2&e){var i=m.gc();m.mc("value",i.node.label)}}function E(e,t){if(1&e){var n=m.Wb();m.Vb(0,"input",18),m.cc("change",(function(e){m.Cc(n);var t=m.gc();return t.handleLayerOrder(e,t.node)})),m.Ub()}if(2&e){var i=m.gc();m.mc("value",i.node.numState.layer)}}var z=function(e,t,n,i){return{"tree-node--light":e,"tree-node--hidden":t,"tree-node--selected":n,"tree-node--unpickable":i}},L=function(){var e=function(){function e(t,n,i,o,r){s(this,e),this.store=t,this.graphService=n,this.engineService=i,this.router=o,this.changeDetection=r,this.themeEnum=y.a,this.isLoft="module"===d.a.exportType,this.nested=!0,this._theme=y.a.Dark,this.checked=!1,this.hasChildren=!1,this.editLabelMode=!1,this.sanitizedID="",this.parentId="",this.shortId="",this.ngUnsubscribe=new a.a}return p(e,[{key:"node",get:function(){return this._node},set:function(e){this._node=e,this.sanitizedID=this.graphService.sanitizeNodeID(this.node.id),this.checked=this.isNodeChecked(this.node.id);var t=this.node.id.split("-");2===t.length?(this.parentId=t[0],this.shortId=t[1]):(this.shortId=t[0],this.parentId=""),this.shortId=this.shortId.replace(/_/g," "),this.nested&&(this.hasChildren=h.a.getSuccessors(this.graph,this.node.id).length>0),this.changeDetection.markForCheck()}},{key:"theme",get:function(){return this._theme},set:function(e){this._theme=e}},{key:"isNodeChecked",value:function(e){return this.store.selectSnapshot(u.a.getNodes)[e].checked}},{key:"isNodeShown",value:function(e){return this.store.selectSnapshot(u.a.getNodes)[e].shown}},{key:"ngOnInit",value:function(){var e=this;this.checkedNodesIds$.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe((function(t){e.checked=t.some((function(t){return t===e.node.id})),e.changeDetection.markForCheck()})),this.labelEditNode$.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe((function(t){e.editLabelMode=t===e.node})),this.isEditMode=this.router.url.indexOf("/edit")>=0}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"handleExpandClick",value:function(e,t){this.store.dispatch(t?new o.f(e):new o.g(e))}},{key:"handleNodeClick",value:function(e,t){e.shiftKey?this.checkNode(t):(this.setCheckedNodes(t),this.isFlyToNodeEnabled(t)&&this.store.dispatch(new o.j(t.id)),this.handleExpandClick(t,!t.boolState.expanded))}},{key:"toggleVisible",value:function(e,t){var n=void 0===t?!this.isNodeShown(e.id):t;this.store.dispatch(new f.a.UpdateNodesShown(n,[e.id])),this.changeDetection.markForCheck()}},{key:"handleLayerOrder",value:function(e,t){var n=parseInt(e.target.value,10);this.setLayerOrder(t,n)}},{key:"checkNode",value:function(e,t){var n=void 0===t?!this.isNodeChecked(e.id):t;this.store.dispatch(new f.a.UpdateNodesChecked(n,[e.id]))}},{key:"setCheckedNodes",value:function(e,t){this.store.dispatch(new f.a.UpdateNodesChecked(!1));var n=void 0===t?!this.isNodeChecked(e.id):t;this.store.dispatch(new f.a.UpdateNodesChecked(n,[e.id]))}},{key:"setLayerOrder",value:function(e,t){this.store.dispatch(new o.I([e],t)),this.changeDetection.markForCheck()}},{key:"handleObjectLabel",value:function(e){var t=e.target;e instanceof KeyboardEvent?("enter"===e.key.toLowerCase()&&(this.setLabel(t.value),this.setEditLabelMode(!1)),"escape"===e.key.toLowerCase()&&this.setEditLabelMode(!1)):e instanceof FocusEvent&&"blur"===e.type&&(this.setLabel(t.value),this.setEditLabelMode(!1))}},{key:"setLabel",value:function(e){this.node.label=e,this.store.dispatch(new o.H(this.node.id,e))}},{key:"setEditLabelMode",value:function(e){d.a.application===g.a.Loft&&this.isEditMode&&this.store.dispatch(new o.F(e?this.node:null))}},{key:"isFlyToNodeEnabled",value:function(e){return!this.isEditMode&&(e.boolState.shown||this.engineService.getObjectLoaded(e.id))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(m.Pb(i.h),m.Pb(v.a),m.Pb(x.a),m.Pb(w.e),m.Pb(m.i))},e.\u0275cmp=m.Jb({type:e,selectors:[["app-tree-nested-node"]],inputs:{graph:"graph",node:"node",nested:"nested",theme:"theme"},decls:10,vars:16,consts:[["data-test","treeNode",1,"tree-node",3,"ngClass","keyup.enter","click"],["app-button","","appEventFence","","buttonSize","xsmall","class","tree-node__button","data-test","treeNodeExpand",3,"buttonTheme","click",4,"ngIf"],["class","tree-node__label","tabindex","0","role","button",3,"ngClass","dblclick",4,"ngIf"],["type","text","appEventFence","","appAutoFocus","","data-test","treeNodeEditLabel","class","input",3,"value","blur","keyup",4,"ngIf"],["appEventFence","","type","text","data-test","treeNodeLayerOrder","class","input input--small tree-node__layer-order",3,"value","change",4,"ngIf"],["app-button","","buttonSize","xsmall","data-test","treeNodeVisible","tabindex","-1","aria-hidden","true","appEventFence","",1,"tree-node__visible",3,"buttonTheme","click"],["icon","eye","data-test","treeNodeVisibleTrue","size","xs",1,"text-14","tree-node__eye"],["icon","eye-slash","data-test","treeNodeVisibleFalse","size","xs",1,"text-14","tree-node__eye-slash"],["eventCategory","Search Node","appEventFence","",3,"theme","node"],["app-button","","appEventFence","","buttonSize","xsmall","data-test","treeNodeExpand",1,"tree-node__button",3,"buttonTheme","click"],["icon","caret-right",1,"inline-block","text-14"],["tabindex","0","role","button",1,"tree-node__label",3,"ngClass","dblclick"],[1,"flex","flex-column"],["data-test","treeNodeId","class","text-10 text-uppercase","style","opacity: 0.7",4,"ngIf"],["data-test","treeNodeLabel"],[1,"visually-hidden"],["data-test","treeNodeId",1,"text-10","text-uppercase",2,"opacity","0.7"],["type","text","appEventFence","","appAutoFocus","","data-test","treeNodeEditLabel",1,"input",3,"value","blur","keyup"],["appEventFence","","type","text","data-test","treeNodeLayerOrder",1,"input","input--small","tree-node__layer-order",3,"value","change"]],template:function(e,t){1&e&&(m.Vb(0,"div",0),m.cc("keyup.enter",(function(e){return t.handleNodeClick(e,t.node)}))("click",(function(e){return t.handleNodeClick(e,t.node)})),m.Nc(1,M,2,5,"button",1),m.Nc(2,T,8,8,"div",2),m.Nc(3,F,1,1,"input",3),m.Nc(4,E,1,1,"input",4),m.hc(5,"async"),m.Vb(6,"button",5),m.cc("click",(function(){return t.toggleVisible(t.node)})),m.Qb(7,"app-icon",6),m.Qb(8,"app-icon",7),m.Ub(),m.Qb(9,"app-node-actions",8),m.Ub()),2&e&&(m.mc("ngClass",m.sc(11,z,t.theme===t.themeEnum.Light,!t.node.boolState.shown,t.checked,!t.node.boolState.pickable)),m.Eb("data-id",t.sanitizedID),m.Db(1),m.mc("ngIf",t.nested&&t.hasChildren),m.Db(1),m.mc("ngIf",!t.editLabelMode),m.Db(1),m.mc("ngIf",t.editLabelMode),m.Db(1),m.mc("ngIf",m.ic(5,9,t.layerOrderMode$)),m.Db(2),m.mc("buttonTheme",t.theme),m.Db(3),m.mc("theme",t.theme)("node",t.node))},directives:[O.m,O.p,k.a,C.a,_.a,j.a,P.a],pipes:[O.b],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}:host{display:block}.tree-node{border-radius:4px;padding:4px;margin-bottom:4px;display:flex;align-items:center;height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;min-width:200px;transition:background-color .12s}.tree-node--light{padding-right:12px}.tree-node--light:focus{outline:2px solid #2d72dc!important;outline-offset:-2px;border-radius:4px}.tree-node--light .tree-node__label{color:#101823;font-size:13px;letter-spacing:.325px;line-height:1.4em}.tree-node--light.tree-node--selected{background:transparent;border-left-color:transparent}.tree-node--light.tree-node--selected .tree-node__label{color:#101823!important}.tree-node--light.tree-node--selected .tree-node__expand,.tree-node--light.tree-node--selected .tree-node__visible{color:#101823}.tree-node--light.tree-node--unpickable{border:none}.tree-node--light.tree-node--hidden .tree-node__label{color:#61779e}.tree-node--light .tree-node__expand,.tree-node--light .tree-node__visible{background-color:transparent;color:#96a8c0;border-radius:4px}.tree-node--selected{background-color:#2d72dc}.tree-node--selected .tree-node__label{color:#fff}.tree-node--unpickable{border:1px dashed #61779e}.tree-node--hidden .tree-node__expand,.tree-node--hidden .tree-node__label,.tree-node--hidden .tree-node__visible{color:#96a8c0}.tree-node--hidden .tree-node__visible{visibility:visible}.tree-node.tree-node--hidden.tree-node--selected .tree-node__expand,.tree-node.tree-node--hidden.tree-node--selected .tree-node__label,.tree-node.tree-node--hidden.tree-node--selected .tree-node__visible{color:#fff}.tree-node__label{font-size:12px;letter-spacing:.3px;line-height:1.4em;letter-spacing:.5px;font-weight:400;line-height:1.3em;color:#d7e0ea;padding:8px 4px 8px 12px;display:flex;align-items:center;flex:1 1 100%;min-height:28px}.tree-node__label--padded{padding-left:36px}.tree-node__button{display:flex;flex:0 0 24px;height:24px;justify-content:center;align-items:center;border:none}.tree-node__expand i{transition:transform .12s}.tree-node__expand--open app-icon{transform:rotate(45deg)}.tree-node .tree-node__expand+.tree-node__label{margin-left:-8px}.tree-node__expand,.tree-node__visible{border-radius:4px;color:#d7e0ea;display:flex;flex:0 0 24px;height:24px;justify-content:center;align-items:center;border:none}.tree-node__layer-order{font-size:10px;flex:0 0 56px;min-height:28px;height:28px;padding:4px;margin:2px;text-align:center}.tree-node .tree-node__eye,.tree-node .tree-node__eye-slash{display:none}.tree-node.tree-node--hidden .tree-node__eye-slash,.tree-node:not(.tree-node--hidden) .tree-node__eye{display:inline}@media (hover:hover){.tree-node__visible{visibility:hidden}.tree-node:hover{cursor:pointer}.tree-node:hover .tree-node__visible{visibility:visible}.tree-node:hover .tree-node__label{color:#fff}.tree-node--light:hover{background-color:#d6ecff}.tree-node--light:hover .tree-node__label{color:#101823}.tree-node--light.tree-node--selected{background-color:#d6ecff}.tree-node--light.tree-node--selected:hover{background-color:#bde0ff}.tree-node--light.tree-node--selected .tree-node__label{color:#101823}.tree-node--light.tree-node--selected .tree-node__expand:hover,.tree-node--light.tree-node--selected .tree-node__visible:hover,.tree-node--light .tree-node__expand:hover,.tree-node--light .tree-node__visible:hover{background-color:transparent;color:inherit}.tree-node__expand:hover,.tree-node__visible:hover{background-color:#1c2a3f;color:#fff;cursor:pointer}.tree-node--selected .tree-node__expand:hover,.tree-node--selected .tree-node__visible:hover{background-color:#2d72dc}.tree-node .tree-node__eye,.tree-node .tree-node__eye-slash{display:none}.tree-node.tree-node--hidden .tree-node__eye-slash,.tree-node:hover:not(.tree-node--hidden) .tree-node__eye{display:inline}}"],encapsulation:2,changeDetection:0}),S([Object(i.e)(u.a.getCheckedNodeIds),R("design:type",c.a)],e.prototype,"checkedNodesIds$",void 0),S([Object(i.e)(r.a.getLayerOrderMode),R("design:type",c.a)],e.prototype,"layerOrderMode$",void 0),S([Object(i.e)(b.a.getLabelEditNode),R("design:type",c.a)],e.prototype,"labelEditNode$",void 0),S([Object(i.e)(r.a.getShowTreeNodeIds),R("design:type",c.a)],e.prototype,"showTreeNodeIds$",void 0),e}()},xcvO:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Modify=0]="Modify",e[e.Replace=1]="Replace",e}({})}}])}();