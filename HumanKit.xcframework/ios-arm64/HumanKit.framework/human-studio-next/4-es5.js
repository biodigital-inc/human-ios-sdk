!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,o,a=[],r=!0,c=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(s){c=!0,o=s}finally{try{r||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=o(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}}).apply(this,arguments)}function o(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"6eBy":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("zx2A");function c(e){return function(t){return t.lift(new p(e))}}var p=function(){function e(t){l(this,e),this.durationSelector=t}return g(e,[{key:"call",value:function(e,t){return t.subscribe(new u(e,this.durationSelector))}}]),e}(),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,e);var t=r(n);function n(e,i){var o;return l(this,n),(o=t.call(this,e)).durationSelector=i,o.hasValue=!1,o}return g(n,[{key:"_next",value:function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(n){this.destination.error(n)}}},{key:"_complete",value:function(){this.emitValue(),this.destination.complete()}},{key:"_tryNext",value:function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(o.c)(t,new o.a(this)))&&!n.closed&&this.add(this.durationSubscription=n)}},{key:"notifyNext",value:function(){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){if(this.hasValue){var e=this.value,t=this.durationSubscription;t&&(this.durationSubscription=void 0,t.unsubscribe(),this.remove(t)),this.value=void 0,this.hasValue=!1,i(s(n.prototype),"_next",this).call(this,e)}}}]),n}(o.b)},NVq4:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("LvDl"),o=n("fXoL"),a=function(){var e=function(){function e(){l(this,e)}return g(e,[{key:"transform",value:function(e,t){if(Object(i.isNil)(e)||Object(i.isNil)(t))return e;var n=""+e,o=n.substring(0,t);return o.length<n.length?o+"...":o}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Ob({name:"ellipsis",type:e,pure:!0}),e}()},SZqb:function(t,i,o){"use strict";var a;o.d(i,"a",(function(){return Fe}));var r,c=o("fXoL"),s=(o("zrlG"),o("2Vo4")),p=o("XNiG"),u=o("1G5W"),d=o("pLZG"),h=o("LvDl"),m=o("+8WF"),f=o("PV7u"),b=o("1mir"),k=o("XqAe"),x=o("esev"),_=o("AytR"),y=o("VRyK"),v=o("xgIS"),O=o("PqYM"),C=o("lJxs"),w=o("/uUt"),P=o("6eBy"),M=((r=function(){function e(t,n){l(this,e),this.componentFactoryResolver=t,this.appRef=n}return g(e,[{key:"appendComponentToBody",value:function(e,t){var n=this.componentFactoryResolver.resolveComponentFactory(e).create(t);return this.appRef.attachView(n.hostView),document.body.appendChild(n.hostView.rootNodes[0]),n}},{key:"destroyComponent",value:function(e){e&&(this.appRef.detachView(e.hostView),e.destroy())}}]),e}()).\u0275fac=function(e){return new(e||r)(c.Zb(c.k),c.Zb(c.g))},r.\u0275prov=c.Lb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),z=o("AcyG"),S=o("3UWI"),A=o("Kj3r"),V=o("zp1y"),q=o("ECVi"),D=o("eKhQ"),R=o("ZR5G"),j=o("u47x"),I=o("l5mm"),E=o("HDdC"),U=o("5+tZ"),T=o("w1tV"),B=o("vkgz"),F=o("eIep"),N=o("Wd1f"),L=o("MuXT"),H=o("ofXK"),W=o("NVq4");function Q(e,t){if(1&e&&c.Qb(0,"img",4),2&e){var n=t.$implicit,i=t.index,o=c.gc(2);c.Hb("quick-view__image--hidden",i!==o.selectedIndex),c.mc("src",n.thumbnail_url,c.Fc)}}function G(e,t){if(1&e&&(c.Vb(0,"div",5),c.Pc(1),c.hc(2,"ellipsis"),c.Ub()),2&e){var n=c.gc(2);c.Db(1),c.Tc(" ",n.selectedIndex+1,"/",null==n.chapters?null:n.chapters.length," ",c.jc(2,3,null==n.chapters[n.selectedIndex]?null:n.chapters[n.selectedIndex].title,60)," ")}}function $(e,t){if(1&e&&(c.Vb(0,"div",1),c.Nc(1,Q,1,3,"img",2),c.Nc(2,G,3,6,"div",3),c.Ub()),2&e){var n=c.gc();c.Db(1),c.mc("ngForOf",n.chapters),c.Db(1),c.mc("ngIf",(null==n.chapters?null:n.chapters.length)>1)}}var J,Z=((J=function(){function e(t,n){l(this,e),this.storyService=t,this.changeRef=n,this.selectedIndex=0,this.chapters=[],this._bookmark=new s.a(void 0),this.ngUnsubscribe=new p.a}return g(e,[{key:"bookmark",get:function(){return this._bookmark.value},set:function(e){this._bookmark.next(e)}},{key:"ngOnInit",value:function(){this.initStoryThumbnails()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initStoryThumbnails",value:function(){var e=this;this.chapters=[this.bookmark];var t=this._bookmark.asObservable().pipe(Object(d.a)((function(e){return!Object(h.isNil)(e)&&e.tags&&e.tags.includes("tour")})),Object(U.b)((function(){return e.storyService.getStory(e.bookmark.id,e.bookmark.type)})),Object(T.a)(),Object(C.a)((function(t){return e.getChapterPreviewModels(t)})),Object(U.b)((function(t){return e.getChapterImageReady(t[0].thumbnail_url).pipe(Object(C.a)((function(){return t})))})),Object(u.a)(this.ngUnsubscribe));t.pipe(Object(u.a)(this.ngUnsubscribe)).subscribe((function(t){e.chapters=t,e.changeRef.markForCheck()})),t.pipe(Object(B.a)((function(){return e.selectedIndex=0})),Object(F.a)((function(){return Object(I.a)(2e3)})),Object(C.a)((function(){return(e.selectedIndex+1)%e.chapters.length})),Object(u.a)(this.ngUnsubscribe)).subscribe((function(t){e.selectedIndex=t,e.changeRef.markForCheck()})),this.changeRef.markForCheck()}},{key:"getChapterPreviewModels",value:function(e){var t=this;return e.chapters.map((function(e){var n,i=N.a.getChapterThumbnail(e,t.bookmark.id);return{title:null!==(n=null==e?void 0:e.displayName)&&void 0!==n?n:"",thumbnail_url:i.urls.small}}))}},{key:"getChapterImageReady",value:function(e){return new E.a((function(t){var n=new Image;n.onload=function(){t.next(!0),t.complete()},n.onerror=function(){t.next(!0),t.complete()},n.src=e}))}}]),e}()).\u0275fac=function(e){return new(e||J)(c.Pb(L.a),c.Pb(c.i))},J.\u0275cmp=c.Jb({type:J,selectors:[["app-quick-view"]],inputs:{bookmark:"bookmark"},decls:1,vars:1,consts:[["class","quick-view",4,"ngIf"],[1,"quick-view"],["class","quick-view__image",3,"quick-view__image--hidden","src",4,"ngFor","ngForOf"],["class","quick-view__tag",4,"ngIf"],[1,"quick-view__image",3,"src"],[1,"quick-view__tag"]],template:function(e,t){1&e&&c.Nc(0,$,3,2,"div",0),2&e&&c.mc("ngIf",t.chapters)},directives:[H.p,H.o],pipes:[W.a],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.quick-view[_ngcontent-%COMP%], .quick-view__image[_ngcontent-%COMP%]{width:100%;height:100%}.quick-view__image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;opacity:1}.quick-view__image--hidden[_ngcontent-%COMP%]{opacity:0;z-index:1;transition:opacity .5s ease-out}.quick-view__tag[_ngcontent-%COMP%]{position:absolute;bottom:12px;left:12px;max-width:calc(100% - 24px);z-index:2;background:hsla(0,0%,100%,.6);border:1px solid hsla(0,0%,100%,.8);border-radius:4px;color:#283853;font-size:12px;letter-spacing:.3px;line-height:1.4em;padding:4px 8px}"],changeDetection:0}),J),X=o("yIGu"),K=o("itXk"),Y=o("WkFQ"),ee=o("IlST"),te=o("Qu3c"),ne=o("0njA"),ie=o("STbY"),oe=o("f0Cb");function ae(e,t){if(1&e){var n=c.Wb();c.Vb(0,"button",3),c.cc("click",(function(e){c.Cc(n);var t=c.gc();return t.handleSelectBookmarkClick(t.bookmark,e)})),c.Pc(1),c.Ub()}if(2&e){var i=c.gc();c.Hb("mr-1",i.mainActions.length),c.Db(1),c.Rc(" ",i.primaryActionLabel," ")}}function re(e,t){if(1&e){var n=c.Wb();c.Vb(0,"button",5),c.cc("click",(function(e){c.Cc(n);var i=t.$implicit,o=c.gc(2);return o.handleBookmarkActionClick(o.bookmark,i,e)})),c.Qb(1,"app-icon",6),c.Ub()}if(2&e){var i=t.$implicit,o=c.gc(2);c.mc("buttonType",o.buttonType)("matTooltip",o.bookmarkActionsLabels[i]),c.Eb("data-test",o.bookmarkActionsDataIds[i])("aria-label",o.bookmarkActionsLabels[i]),c.Db(1),c.mc("icon",o.bookmarkActionsIcons[i])}}function ce(e,t){1&e&&c.Qb(0,"mat-divider")}function se(e,t){if(1&e){var n=c.Wb();c.Vb(0,"button",12),c.cc("click",(function(e){c.Cc(n);var t=c.gc().$implicit,i=c.gc(3);return i.handleBookmarkActionClick(i.bookmark,t,e)})),c.Pc(1),c.Ub()}if(2&e){var i=c.gc().$implicit,o=c.gc(3);c.Hb("gallery-card-actions__action-warning",i===o.bookmarkActionEnum.Delete),c.Eb("aria-label",o.bookmarkActionsLabels[i])("data-test",o.bookmarkActionsDataIds[i]),c.Db(1),c.Rc(" ",i," ")}}function le(e,t){if(1&e&&(c.Tb(0),c.Nc(1,ce,1,0,"mat-divider",2),c.Nc(2,se,2,5,"button",11),c.Sb()),2&e){var n=t.$implicit,i=c.gc(3);c.Db(1),c.mc("ngIf",n===i.bookmarkActionEnum.Divider),c.Db(1),c.mc("ngIf",n!==i.bookmarkActionEnum.Divider)}}function pe(e,t){if(1&e){var n=c.Wb();c.Tb(0),c.Vb(1,"button",7),c.cc("click",(function(e){return c.Cc(n),c.gc(2).handleOtherClick(e)}))("menuOpened",(function(){return c.Cc(n),c.gc(2).handleMenuOpened()}))("menuClosed",(function(){return c.Cc(n),c.gc(2).handleMenuClosed()})),c.Qb(2,"app-icon",8),c.Ub(),c.Vb(3,"mat-menu",null,9),c.Nc(5,le,3,2,"ng-container",10),c.Ub(),c.Sb()}if(2&e){var i=c.yc(4),o=c.gc(2);c.Db(1),c.mc("buttonType",o.buttonType)("matMenuTriggerFor",i),c.Db(4),c.mc("ngForOf",o.moreActions)}}function ge(e,t){if(1&e&&(c.Tb(0),c.Nc(1,re,2,5,"button",4),c.Nc(2,pe,6,3,"ng-container",2),c.Sb()),2&e){var n=c.gc();c.Db(1),c.mc("ngForOf",n.mainActions),c.Db(1),c.mc("ngIf",n.moreActions.length)}}var ue,de=(n(a={},Y.a.View,"galleryCardActionPrimary"),n(a,Y.a.AddToMyLibrary,"galleryCardActionAddButton"),n(a,Y.a.Edit,"galleryCardActionEditButton"),n(a,Y.a.Publish,"galleryCardActionPublishButton"),n(a,Y.a.CopyURL,"galleryCardActionCopyURLButton"),n(a,Y.a.Share,"galleryCardActionShareButton"),n(a,Y.a.Duplicate,"galleryCardActionDuplicateButton"),n(a,Y.a.Manage,"galleryCardActionManageButton"),n(a,Y.a.Delete,"galleryCardActionDeleteButton"),n(a,Y.a.Divider,""),a),he=Object(Y.d)(_.a.application),me=((ue=function(){function t(e,n,i,o){l(this,t),this.store=e,this.changeDetectorRef=n,this.bookmarkActionsService=i,this.elementRef=o,this.bookmarkActionEnum=Y.a,this.bookmarkActionsIcons=Y.c,this.bookmarkActionsLabels=he,this.bookmarkActionsDataIds=de,this._bookmark=new s.a(void 0),this.actionsEnabled=!0,this._primaryActionEnabled=new s.a(!0),this._compact=new s.a(!1),this.selectBookmark=new c.p,this.menuOpen=new c.p,this.mainActions=[],this.moreActions=[],this.ngUnsubscribe=new p.a}return g(t,[{key:"bookmark",get:function(){return this._bookmark.value},set:function(e){this._bookmark.next(e),this.changeDetectorRef.markForCheck()}},{key:"primaryActionEnabled",get:function(){return this._primaryActionEnabled.value},set:function(e){this._primaryActionEnabled.next(e),this.changeDetectorRef.markForCheck()}},{key:"compact",get:function(){return this._compact.value},set:function(e){this._compact.next(e),this.changeDetectorRef.markForCheck()}},{key:"buttonType",get:function(){return this.primaryActionEnabled?ee.b.Outline:ee.b.Default}},{key:"ngOnInit",value:function(){this.initBookmarkActions()}},{key:"ngAfterViewInit",value:function(){this.changeDetectorRef.markForCheck()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initBookmarkActions",value:function(){var t=this;Object(K.b)([this._bookmark,this.store.select(q.a.getUserRole),this.store.select(q.a.isPremiumUser),this.store.select(D.a.hasOrganization),this._primaryActionEnabled,this._compact.asObservable()]).pipe(Object(d.a)((function(t){var n=e(t,4),i=n[0],o=n[1],a=n[2],r=n[3];return!(Object(h.isNil)(o)||Object(h.isNil)(i)||Object(h.isNil)(a)||Object(h.isNil)(r))})),Object(u.a)(this.ngUnsubscribe)).subscribe((function(n){var i=e(n,6),o=i[0],a=i[1],r=i[2],c=i[3],s=i[4],l=i[5]&&!s,p=t.bookmarkActionsService.getBookmarkActions(a,o,r,c,{excludeActions:[Y.a.View]}),g=t.bookmarkActionsService.getBookmarkActionsGrouping(p,l),u=g.mainActions,d=g.moreActions;t.mainActions=u,t.moreActions=d,t.changeDetectorRef.markForCheck()}))}},{key:"handleMenuOpened",value:function(){this.menuOpen.next(!0)}},{key:"handleMenuClosed",value:function(){this.menuOpen.next(!1)}},{key:"handleSelectBookmarkClick",value:function(e,t){this.selectBookmark.emit(e),t.stopImmediatePropagation()}},{key:"handleBookmarkActionClick",value:function(e,t,n){this.handleBookmarkAction(e,t),n.stopImmediatePropagation()}},{key:"handleOtherClick",value:function(e){e.stopImmediatePropagation()}},{key:"handleBookmarkAction",value:function(e,t){this.bookmarkActionsService.handleBookmarkAction({name:t,id:e.id,bookmark:e})}}]),t}()).\u0275fac=function(e){return new(e||ue)(c.Pb(z.h),c.Pb(c.i),c.Pb(f.a),c.Pb(c.m))},ue.\u0275cmp=c.Jb({type:ue,selectors:[["app-gallery-card-actions"]],inputs:{primaryActionLabel:"primaryActionLabel",bookmark:"bookmark",actionsEnabled:"actionsEnabled",primaryActionEnabled:"primaryActionEnabled",compact:"compact"},outputs:{selectBookmark:"selectBookmark",menuOpen:"menuOpen"},features:[c.Cb([H.x])],decls:3,vars:4,consts:[[1,"gallery-card-actions","flex","flex-row"],["class","gallery-card-actions__action-primary flex-auto","type","button","app-button","","buttonType","primary","buttonTheme","light","buttonSize","medium","data-test","galleryCardActionPrimary",3,"mr-1","click",4,"ngIf"],[4,"ngIf"],["type","button","app-button","","buttonType","primary","buttonTheme","light","buttonSize","medium","data-test","galleryCardActionPrimary",1,"gallery-card-actions__action-primary","flex-auto",3,"click"],["type","button","app-button","","buttonTheme","light","buttonSize","medium","buttonShape","square","matTooltipPosition","above","class","gallery-card-actions__action",3,"buttonType","matTooltip","click",4,"ngFor","ngForOf"],["type","button","app-button","","buttonTheme","light","buttonSize","medium","buttonShape","square","matTooltipPosition","above",1,"gallery-card-actions__action",3,"buttonType","matTooltip","click"],[3,"icon"],["type","button","app-button","","buttonTheme","light","buttonSize","medium","buttonShape","square","matTooltip","More Options","matTooltipPosition","above","data-test","galleryCardActionOtherButton",1,"gallery-card-actions__action",3,"buttonType","matMenuTriggerFor","click","menuOpened","menuClosed"],["icon","ellipsis-v"],["otherMenu","matMenu"],[4,"ngFor","ngForOf"],["mat-menu-item","",3,"gallery-card-actions__action-warning","click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.Nc(1,ae,2,3,"button",1),c.Nc(2,ge,3,2,"ng-container",2),c.Ub()),2&e&&(c.Hb("gallery-card-actions--compact",!t.primaryActionEnabled),c.Db(1),c.mc("ngIf",t.primaryActionEnabled),c.Db(1),c.mc("ngIf",t.actionsEnabled))},directives:[H.p,ee.a,H.o,te.c,ne.a,ie.d,ie.a,oe.a,ie.b],styles:[".gallery-card-actions__action[_ngcontent-%COMP%]{margin:auto 4px}.gallery-card-actions__action[_ngcontent-%COMP%]:first-of-type{margin-left:auto}.gallery-card-actions__action[_ngcontent-%COMP%]:last-of-type{margin-right:auto}.gallery-card-actions__action-warning[_ngcontent-%COMP%]{color:#ed4758}.gallery-card-actions--compact[_ngcontent-%COMP%]   .gallery-card-actions__action[_ngcontent-%COMP%]{margin:auto}"],changeDetection:0}),ue),fe=o("F+jD"),be=["image"],ke=["card"];function xe(e,t){if(1&e&&(c.Vb(0,"app-list-item"),c.Tb(1),c.Pc(2),c.Sb(),c.Ub()),2&e){var n=t.$implicit;c.Db(2),c.Qc(n)}}function _e(e,t){if(1&e&&(c.Tb(0),c.Pc(1),c.hc(2,"date"),c.Sb()),2&e){var n=c.gc(2);c.Db(1),c.Rc(" on ",c.jc(2,1,n.bookmark.create_date_time,"shortDate"),"")}}function ye(e,t){if(1&e&&(c.Vb(0,"div"),c.Pc(1),c.hc(2,"date"),c.Ub()),2&e){var n=c.gc(2);c.Db(1),c.Sc(" Updated by ",n.bookmark.last_editor_first_name||n.bookmark.last_editor," on ",c.jc(2,2,n.bookmark.update_date_time,"shortDate")," ")}}function ve(e,t){if(1&e&&(c.Vb(0,"div",12),c.Vb(1,"div"),c.Pc(2),c.Nc(3,_e,3,4,"ng-container",13),c.Ub(),c.Nc(4,ye,3,5,"div",13),c.Ub()),2&e){var n=c.gc();c.Db(2),c.Rc(" Created by ",n.bookmark.author_first_name||n.bookmark.author," "),c.Db(1),c.mc("ngIf",!n.bookmark.update_date_time),c.Db(1),c.mc("ngIf",n.bookmark.update_date_time)}}var Oe,Ce,we=new c.s(null),Pe=((Oe=function(){function t(e,n,i,o,a,r,g,u){l(this,t),this.context=e,this._renderer=n,this._elementRef=i,this._bookmarksService=o,this._bookmarkActionsService=a,this._store=r,this._focusMonitor=g,this._ngZone=u,this.actionMode=b.a.Explore,this.contentType=R.a,this.galleryTags=[],this.bookmarkActions=[],this.primaryActionLabel="Select",this.menuOpened=new s.a(!1),this.focused=new s.a(!0),this.hovered=new s.a(!0),this._ngUnsubscribe=new p.a,this.destroy=new c.p,this.selectBookmark=new c.p,this.actionMode=e.actionMode,this.dimensions=e.dimensions,this.position=e.position,this.bookmark=e.bookmark}return g(t,[{key:"bookmark",get:function(){return this._bookmark},set:function(e){this._bookmark=e,this.updateTags(),this.updateActions(),this.updatePrimaryActionLabel()}},{key:"dimensions",get:function(){return this._dimensions},set:function(e){this._dimensions=e,this.updateSize()}},{key:"position",get:function(){return this._position},set:function(e){this._position=e,this.updatePosition()}},{key:"handleEscape",value:function(){this.hide()}},{key:"ngOnInit",value:function(){this._renderer.addClass(this._elementRef.nativeElement,"app-gallery-quickview-show"),this.updateImage(),this.initFocusMonitor(),this.bindEvents()}},{key:"ngOnDestroy",value:function(){this._ngUnsubscribe.next(),this._ngUnsubscribe.complete()}},{key:"updateSize",value:function(){this.dimensions.width&&this._renderer.setStyle(this._elementRef.nativeElement,"width",""+this.dimensions.width),this.dimensions.height&&this._renderer.setStyle(this._elementRef.nativeElement,"height",""+this.dimensions.height),this.dimensions.minHeight&&this._renderer.setStyle(this._elementRef.nativeElement,"minHeight",""+this.dimensions.minHeight),this._renderer.setStyle(this._elementRef.nativeElement,"height","auto")}},{key:"updatePosition",value:function(){this._renderer.setStyle(this._elementRef.nativeElement,"left",""+this.position.left),this._renderer.setStyle(this._elementRef.nativeElement,"top",""+this.position.top)}},{key:"updateTags",value:function(){this.galleryTags=this._bookmarksService.getGalleryTags(this.bookmark)}},{key:"updatePrimaryActionLabel",value:function(){this.primaryActionLabel=this._bookmarkActionsService.getBookmarkPrimaryActionLabel(this.bookmark,this.actionMode)}},{key:"updateImage",value:function(){this._renderer.setStyle(this.image.nativeElement,"background-image","url(".concat(this._bookmark.thumbnail_url,")"))}},{key:"bindEvents",value:function(){var e=this;Object(y.a)(Object(v.a)(window,"mousemove"),Object(v.a)(window,"scroll"),Object(v.a)(this._elementRef.nativeElement,"mouseout")).pipe(Object(S.a)(50),Object(u.a)(this._ngUnsubscribe)).subscribe((function(){var t=e._elementRef.nativeElement.matches(":hover");e.hovered.next(t)})),this.hovered.pipe(Object(u.a)(this._ngUnsubscribe)).subscribe((function(t){t||e.menuOpened.getValue()||e.hide()}))}},{key:"hide",value:function(){var e=this;this._renderer.removeClass(this._elementRef.nativeElement,"app-gallery-quickview-show"),this._renderer.addClass(this._elementRef.nativeElement,"app-gallery-quickview-hide"),setTimeout((function(){e.destroy.emit()}),150)}},{key:"updateActions",value:function(){if(this.actionMode===b.a.Explore){var e=this._bookmark,t=this._store.selectSnapshot(q.a.getUserRole),n=this._store.selectSnapshot(q.a.isPremiumUser),i=this._store.selectSnapshot(D.a.hasOrganization);this.bookmarkActions=this._bookmarkActionsService.getBookmarkActions(t,e,n,i)}else this.bookmarkActions=[]}},{key:"handleSelect",value:function(e,t){this.selectBookmark.emit(e),t&&t.stopPropagation()}},{key:"handleMenuOpened",value:function(e){this.menuOpened.next(e)}},{key:"initFocusMonitor",value:function(){var t=this;this._focusMonitor.monitor(this._elementRef.nativeElement,!0).pipe(Object(A.a)(0),Object(V.a)(this.menuOpened.asObservable()),Object(d.a)((function(t){var n=e(t,2);return n[0],!n[1]})),Object(u.a)(this._ngUnsubscribe)).subscribe((function(n){var i=e(n,1)[0];return t._ngZone.run((function(){switch(i){case"keyboard":break;case null:t.hide()}}))}))}}]),t}()).\u0275fac=function(e){return new(e||Oe)(c.Pb(we),c.Pb(c.H),c.Pb(c.m),c.Pb(k.a),c.Pb(f.a),c.Pb(z.h),c.Pb(j.f),c.Pb(c.B))},Oe.\u0275cmp=c.Jb({type:Oe,selectors:[["app-gallery-quick-view"]],viewQuery:function(e,t){var n;1&e&&(c.Jc(be,!0),c.Jc(ke,!0)),2&e&&(c.xc(n=c.dc())&&(t.image=n.first),c.xc(n=c.dc())&&(t.card=n.first))},hostBindings:function(e,t){1&e&&c.cc("keyup.escape",(function(){return t.handleEscape()}),!1,c.Bc)},outputs:{destroy:"destroy",selectBookmark:"selectBookmark"},decls:13,vars:9,consts:[["data-test","galleryQuickViewCard",1,"gallery-quickview",3,"click"],[1,"gallery-quickview__image"],["image",""],[3,"bookmark"],[1,"gallery-quickview__text"],[1,"gallery-quickview__label"],[1,"gallery-quickview__tags"],["listType","commafied"],[4,"ngFor","ngForOf"],["class","gallery-quickview__metadata",4,"ngIf"],[1,"gallery-quickview__actions"],[3,"actionsEnabled","primaryActionLabel","bookmark","selectBookmark","menuOpen"],[1,"gallery-quickview__metadata"],[4,"ngIf"]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.cc("click",(function(e){return t.handleSelect(t.bookmark,e)})),c.Vb(1,"div",1,2),c.Qb(3,"app-quick-view",3),c.Ub(),c.Vb(4,"div",4),c.Vb(5,"div",5),c.Pc(6),c.Ub(),c.Vb(7,"div",6),c.Vb(8,"app-list",7),c.Nc(9,xe,3,1,"app-list-item",8),c.Ub(),c.Ub(),c.Nc(10,ve,5,3,"div",9),c.Vb(11,"div",10),c.Vb(12,"app-gallery-card-actions",11),c.cc("selectBookmark",(function(e){return t.handleSelect(e)}))("menuOpen",(function(e){return t.handleMenuOpened(e)})),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&e&&(c.Db(3),c.mc("bookmark",t.bookmark),c.Db(3),c.Rc(" ",t.bookmark.title," "),c.Db(1),c.Hb("hidden",!t.galleryTags.length),c.Db(2),c.mc("ngForOf",t.galleryTags),c.Db(1),c.mc("ngIf",t.bookmark.type===t.contentType.Bookmark),c.Db(2),c.mc("actionsEnabled",t.bookmarkActions.length>0)("primaryActionLabel",t.primaryActionLabel)("bookmark",t.bookmark))},directives:[Z,X.a,H.o,H.p,me,fe.a],pipes:[H.e],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}[_nghost-%COMP%]{width:280px;height:400px;background:#fff;cursor:pointer;position:absolute;z-index:2;box-shadow:0 4px 15px 4px rgba(0,0,0,.1);border-radius:12px}.app-gallery-quickview-show[_nghost-%COMP%]{-webkit-animation:app-gallery-quickview-show .2s cubic-bezier(0,0,.2,1) forwards;animation:app-gallery-quickview-show .2s cubic-bezier(0,0,.2,1) forwards}.app-gallery-quickview-hide[_nghost-%COMP%]{-webkit-animation:app-gallery-quickview-hide .15s cubic-bezier(0,0,.2,1) forwards;animation:app-gallery-quickview-hide .15s cubic-bezier(0,0,.2,1) forwards}.gallery-quickview__image[_ngcontent-%COMP%]{background:#eaeff5 url(/assets/images/logo-dark-transparent.svg) 50% no-repeat;background-size:100%;border-radius:8px 8px 0 0;overflow:hidden;padding-bottom:100%;position:relative}.gallery-quickview__text[_ngcontent-%COMP%]{padding:12px 16px 16px}.gallery-quickview__label[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em;font-weight:600;color:#1c2a3f;word-break:break-word}.gallery-quickview__actions[_ngcontent-%COMP%]{padding-top:12px}.gallery-quickview__metadata[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em;color:#61779e;font-weight:400;padding-top:8px}.gallery-quickview__tags[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase;padding-top:4px;font-weight:600;color:#96a8c0}@-webkit-keyframes app-gallery-quickview-show{0%{opacity:1;transform:scale(.7)}50%{opacity:1;transform:scale(.99)}to{opacity:1;transform:scale(1)}}@keyframes app-gallery-quickview-show{0%{opacity:1;transform:scale(.7)}50%{opacity:1;transform:scale(.99)}to{opacity:1;transform:scale(1)}}@-webkit-keyframes app-gallery-quickview-hide{0%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.95)}to{opacity:0;transform:scale(.95)}}@keyframes app-gallery-quickview-hide{0%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.95)}to{opacity:0;transform:scale(.95)}}"],changeDetection:0}),Oe),Me=o("nLfN"),ze=((Ce=function(){function e(t,n,i,o,a,r){l(this,e),this._viewContainerRef=t,this._componentFactoryResolver=n,this._elementRef=i,this._changeDetectorRef=o,this._domService=a,this._platform=r,this._ngUnsubscribe=new p.a,this.quickviewRenderMode="relative",this.quickViewDisabled=!1,this.quickViewActionMode=b.a.Explore,this.quickViewShowDelay=500,this.quickViewHideDelay=125,this.quickViewScaleCardSize=!0,this.quickViewCardMinWidth=280,this.quickViewCardMinHeight=400,this.quickViewCardTop=-16,this.quickViewCardScaleFactor=1.025,this.quickViewCardPositionStrategy="center",this.selectBookmark=new c.p}return g(e,[{key:"ngOnInit",value:function(){this.bindEvents()}},{key:"ngOnDestroy",value:function(){this.destroy(),this._ngUnsubscribe.next(),this._ngUnsubscribe.complete()}},{key:"create",value:function(){var e=this;if(!this._componentRef&&!this.quickViewDisabled){var t=this.getCardDimensions(),n="relative"===this.quickviewRenderMode?this.getRelativeCardPosition({width:t.width,height:t.minHeight}):this.getFixedCardPosition({width:t.width,height:t.minHeight}),i=c.t.create({providers:[{provide:we,useValue:{bookmark:this.bookmark,actionMode:this.quickViewActionMode,dimensions:{width:t.width+"px",minHeight:t.minHeight+"px"},position:{left:n.left+"px",top:n.top+"px"}}}]});if(!this._componentRef){switch(this.quickviewRenderMode){case"fixed":this._componentRef=this._domService.appendComponentToBody(Pe,i);break;case"relative":this._componentRef=this._viewContainerRef.createComponent(this._componentFactoryResolver.resolveComponentFactory(Pe),null,i)}this._componentRef.instance.selectBookmark.pipe(Object(u.a)(this._componentRef.instance.destroy)).subscribe((function(t){e.selectBookmark.emit(t)})),this._componentRef.instance.destroy.pipe(Object(u.a)(this._ngUnsubscribe)).subscribe((function(){e.destroy()})),this._changeDetectorRef.markForCheck()}}}},{key:"destroy",value:function(){if(this._componentRef)switch(this.quickviewRenderMode){case"fixed":this._domService.destroyComponent(this._componentRef),this._componentRef=null;break;case"relative":this._componentRef.destroy(),this._componentRef=null,this._viewContainerRef&&this._viewContainerRef.clear()}}},{key:"getCardDimensions",value:function(){if(this.quickViewScaleCardSize){var e=this._elementRef.nativeElement,t=e.offsetWidth,n=e.offsetHeight,i=Math.max(t*this.quickViewCardScaleFactor,this.quickViewCardMinWidth);return{width:i,minHeight:i/t*n}}return{width:this.quickViewCardMinWidth,minHeight:this.quickViewCardMinHeight}}},{key:"getRelativeCardPosition",value:function(e){var t=this._elementRef.nativeElement.offsetWidth;return{left:-(e.width-t)/2,top:this.quickViewCardTop}}},{key:"getFixedCardPosition",value:function(e){var t=this._elementRef.nativeElement.offsetWidth,n=this._elementRef.nativeElement.getBoundingClientRect();return{left:n.left-(e.width-t)/2,top:n.top+window.scrollY+this.quickViewCardTop}}},{key:"bindEvents",value:function(){var e=this;if(!this._platform.ANDROID&&!this._platform.IOS){var t=this._elementRef.nativeElement;Object(y.a)(Object(v.a)(t,"mouseover"),Object(v.a)(t,"mouseout")).pipe(Object(C.a)((function(e){var t=e.type;return["mouseover"].includes(t)})),Object(w.a)(),Object(u.a)(this._ngUnsubscribe)).pipe(Object(P.a)((function(t){return Object(O.a)(t?e.quickViewShowDelay:e.quickViewHideDelay)})),Object(w.a)((function(e,t){return e===t})),Object(u.a)(this._ngUnsubscribe)).subscribe((function(t){t&&e.create()}))}}}]),e}()).\u0275fac=function(e){return new(e||Ce)(c.Pb(c.S),c.Pb(c.k),c.Pb(c.m),c.Pb(c.i),c.Pb(M),c.Pb(Me.a))},Ce.\u0275dir=c.Kb({type:Ce,selectors:[["","appQuickView",""]],inputs:{bookmark:"bookmark",quickviewRenderMode:"quickviewRenderMode",quickViewDisabled:"quickViewDisabled",quickViewActionMode:"quickViewActionMode",quickViewShowDelay:"quickViewShowDelay",quickViewHideDelay:"quickViewHideDelay",quickViewScaleCardSize:"quickViewScaleCardSize",quickViewCardMinWidth:"quickViewCardMinWidth",quickViewCardMinHeight:"quickViewCardMinHeight",quickViewCardTop:"quickViewCardTop",quickViewCardScaleFactor:"quickViewCardScaleFactor",quickViewCardPositionStrategy:"quickViewCardPositionStrategy"},outputs:{selectBookmark:"selectBookmark"}}),Ce),Se=o("wf0l"),Ae=o("PmOP"),Ve=o("bSwM");function qe(e,t){1&e&&(c.Vb(0,"div",13),c.Qb(1,"app-icon",14),c.Ub())}function De(e,t){if(1&e){var n=c.Wb();c.Vb(0,"mat-checkbox",15),c.cc("change",(function(e){return c.Cc(n),c.gc().handleCheckedChange(e)})),c.Ub()}if(2&e){var i=c.gc();c.mc("value",i.bookmark.id)("checked",i.checked)}}function Re(e,t){if(1&e){var n=c.Wb();c.Vb(0,"mat-checkbox",16),c.cc("change",(function(e){return c.Cc(n),c.gc().handleCheckedChange(e)})),c.Ub()}if(2&e){var i=c.gc();c.mc("value",i.bookmark.id)("checked",i.checked)}}function je(e,t){if(1&e){var n=c.Wb();c.Vb(0,"app-gallery-card-actions",17),c.cc("selectBookmark",(function(e){return c.Cc(n),c.gc().handleSelect(e)}))("menuOpen",(function(e){return c.Cc(n),c.gc().handleMenuOpened(e)})),c.Ub()}if(2&e){var i=c.gc();c.mc("bookmark",i.bookmark)("primaryActionLabel",i.labelPrimary)("primaryActionEnabled",!1)("actionsEnabled",i.actionsEnabled)}}function Ie(e,t){if(1&e&&(c.Vb(0,"app-list-item"),c.Tb(1),c.Pc(2),c.Sb(),c.Ub()),2&e){var n=t.$implicit;c.Db(2),c.Qc(n)}}function Ee(e,t){if(1&e&&(c.Vb(0,"div",18),c.Vb(1,"app-list",19),c.Nc(2,Ie,3,1,"app-list-item",20),c.Ub(),c.Ub()),2&e){var n=c.gc();c.Db(2),c.mc("ngForOf",n.galleryTags)}}function Ue(e,t){if(1&e&&(c.Vb(0,"div",21),c.Tb(1,22),c.Pc(2),c.hc(3,"date"),c.Sb(),c.Ub()),2&e){var n=c.gc();c.Db(2),c.Sc(" ",n.bookmark.last_editor_first_name||n.bookmark.last_editor||n.bookmark.author_first_name||n.bookmark.author,", ",c.jc(3,2,n.bookmark.update_date_time||n.bookmark.create_date_time,"shortDate")," ")}}var Te,Be=function(e,t,n,i){return{"gallery-card--checked":e,"gallery-card--list":t,"gallery-card--responsive":n,"gallery-card--loading":i}},Fe=((Te=function(){function e(t,n,i){l(this,e),this.changeDetectorRef=t,this.bookmarksService=n,this.bookmarkActionsService=i,this.galleryViewMode=m.a,this.selectLabel="Select",this.checkable=!1,this.checked=!1,this.quickviewRenderMode="relative",this.actionMode=b.a.Explore,this.actionsEnabled=!0,this.responsive=!1,this.loading=!1,this.viewMode=m.a.Card,this.availableOffline$=new s.a(!1),this._bookmark=new s.a(void 0),this.selectBookmark=new c.p,this.checkChange=new c.p,this.menuOpened=new c.p,this.galleryTags=[],this.defaultImage="/assets/images/card-thumbnail-placeholder.png",this.labelPrimary="",this.ngUnsubscribe=new p.a}return g(e,[{key:"bookmark",get:function(){return this._bookmark.value},set:function(e){this._bookmark.next(e),this.changeDetectorRef.markForCheck()}},{key:"ngOnInit",value:function(){var e=this;this.checkLabel(),this.initGalleryTags(),_.a.native&&x.a.getOfflineModelIDs().pipe(Object(u.a)(this.ngUnsubscribe)).subscribe((function(t){var n=t.includes(e.bookmark.id);e.availableOffline$.next(n)}))}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"handleSelect",value:function(e,t){this.handleBookmarkSelected(e),t&&t.stopPropagation()}},{key:"handleBookmarkSelected",value:function(e){this.checkable?this.checkChange.next(!this.checked):this.selectBookmark.emit(e)}},{key:"handleCheckedChange",value:function(e){this.checkChange.next(e.checked)}},{key:"handleMenuOpened",value:function(e){this.menuOpened.next(e)}},{key:"initGalleryTags",value:function(){var e=this;this._bookmark.asObservable().pipe(Object(d.a)((function(e){return!Object(h.isNil)(e)})),Object(u.a)(this.ngUnsubscribe)).subscribe((function(t){e.galleryTags=e.bookmarksService.getGalleryTags(t),e.changeDetectorRef.markForCheck()}))}},{key:"checkLabel",value:function(){var e=this;switch(this.actionMode){case b.a.Select:case b.a.Import:this.labelPrimary=this.selectLabel;break;case b.a.Explore:this._bookmark.pipe(Object(u.a)(this.ngUnsubscribe),Object(d.a)((function(e){return!Object(h.isNil)(e)}))).subscribe((function(t){e.labelPrimary=e.bookmarkActionsService.getBookmarkPrimaryActionLabel(t,e.actionMode),e.changeDetectorRef.markForCheck()}))}}}]),e}()).\u0275fac=function(e){return new(e||Te)(c.Pb(c.i),c.Pb(k.a),c.Pb(f.a))},Te.\u0275cmp=c.Jb({type:Te,selectors:[["app-gallery-card"]],inputs:{selectLabel:"selectLabel",checkable:"checkable",checked:"checked",quickviewRenderMode:"quickviewRenderMode",actionMode:"actionMode",actionsEnabled:"actionsEnabled",responsive:"responsive",loading:"loading",viewMode:"viewMode",bookmark:"bookmark"},outputs:{selectBookmark:"selectBookmark",checkChange:"checkChange",menuOpened:"menuOpened"},decls:15,vars:25,consts:[["appQuickView","","data-test","galleryCard","role","button",1,"gallery-card",3,"bookmark","quickviewRenderMode","quickViewDisabled","quickViewActionMode","ngClass","tabindex","selectBookmark","click","keyup.enter"],[1,"gallery-card__image-container"],["role","img","card-image","",1,"gallery-card__image",3,"defaultImage","lazyLoad"],[1,"gallery-card__header"],[1,"flex","flex-grow","justify-start"],["class","gallery-card__offline",4,"ngIf"],["appEventFence","",3,"value","checked","change",4,"ngIf"],["appEventFence","",1,"gallery-card__actions"],["class","gallery-card__inline-check",3,"value","checked","change",4,"ngIf"],[3,"bookmark","primaryActionLabel","primaryActionEnabled","actionsEnabled","selectBookmark","menuOpen",4,"ngIf"],["data-test","galleryCardLabel",1,"gallery-card__label"],["class","gallery-card__tags",4,"ngIf"],["class","gallery-card__updated",4,"ngIf"],[1,"gallery-card__offline"],["icon","arrow-circle-down"],["appEventFence","",3,"value","checked","change"],[1,"gallery-card__inline-check",3,"value","checked","change"],[3,"bookmark","primaryActionLabel","primaryActionEnabled","actionsEnabled","selectBookmark","menuOpen"],[1,"gallery-card__tags"],["listType","commafied"],[4,"ngFor","ngForOf"],[1,"gallery-card__updated"],["card-updated",""]],template:function(e,t){1&e&&(c.Vb(0,"div",0),c.cc("selectBookmark",(function(e){return t.handleBookmarkSelected(e)}))("click",(function(e){return t.handleSelect(t.bookmark,e)}))("keyup.enter",(function(e){return t.handleSelect(t.bookmark,e)})),c.Vb(1,"div",1),c.Qb(2,"div",2),c.Vb(3,"div",3),c.Vb(4,"div",4),c.Nc(5,qe,2,0,"div",5),c.hc(6,"async"),c.Nc(7,De,1,2,"mat-checkbox",6),c.Ub(),c.Ub(),c.Ub(),c.Vb(8,"div",7),c.Nc(9,Re,1,2,"mat-checkbox",8),c.Nc(10,je,1,4,"app-gallery-card-actions",9),c.Ub(),c.Vb(11,"div",10),c.Pc(12),c.Ub(),c.Nc(13,Ee,3,1,"div",11),c.Nc(14,Ue,4,5,"div",12),c.Ub()),2&e&&(c.mc("bookmark",t.bookmark)("quickviewRenderMode",t.quickviewRenderMode)("quickViewDisabled",t.loading||t.checkable||t.viewMode===t.galleryViewMode.List||t.responsive)("quickViewActionMode",t.actionMode)("ngClass",c.sc(20,Be,t.checked,t.viewMode===t.galleryViewMode.List,t.responsive,t.loading))("tabindex",t.loading?-1:0),c.Eb("data-type",t.bookmark.type)("data-loading",!0===t.loading)("aria-label",t.bookmark.title),c.Db(2),c.mc("defaultImage",t.defaultImage)("lazyLoad",t.bookmark.thumbnail_url),c.Db(3),c.mc("ngIf",c.ic(6,18,t.availableOffline$)),c.Db(2),c.mc("ngIf",t.checkable),c.Db(2),c.mc("ngIf",t.checkable),c.Db(1),c.mc("ngIf",!t.checkable),c.Db(2),c.Qc(t.bookmark.title),c.Db(1),c.mc("ngIf",t.galleryTags.length>0),c.Db(1),c.mc("ngIf",t.viewMode===t.galleryViewMode.List))},directives:[ze,H.m,Se.a,H.p,Ae.a,ne.a,Ve.a,me,X.a,H.o,fe.a],pipes:[H.b,H.e],styles:['.text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}@-webkit-keyframes loaderShimmer{0%{background-position:100% 0}to{background-position:-100% 0}}@keyframes loaderShimmer{0%{background-position:100% 0}to{background-position:-100% 0}}[_nghost-%COMP%]{display:block;position:relative}.gallery-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #eaeff5;border-radius:8px;cursor:pointer;width:100%;word-break:break-word;height:100%;position:relative;overflow:hidden;z-index:1;display:grid;grid-template:"image" 1fr "label" 36px "tags" 28px "updated"/1fr auto;transition:transform .25s ease-out,box-shadow .25s ease-in-out}.gallery-card--checked[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #2d72dc}.gallery-card--list[_ngcontent-%COMP%]{padding:8px 8px 40px;box-shadow:none!important;border:none;border-bottom:1px solid rgba(0,0,0,.12);border-radius:0;grid-template:"image label tags updated actions" 44px/44px 1fr 20% 20% 88px}.gallery-card--list[_ngcontent-%COMP%]   .gallery-card__image-container[_ngcontent-%COMP%]{border-radius:4px}.gallery-card--list[_ngcontent-%COMP%]   .gallery-card__actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.gallery-card--list[_ngcontent-%COMP%]   .gallery-card__updated[_ngcontent-%COMP%]{text-transform:uppercase;display:flex!important}.gallery-card--list[_ngcontent-%COMP%]   .gallery-card__header[_ngcontent-%COMP%]{display:none}.gallery-card--list[_ngcontent-%COMP%]   .gallery-card__inline-check[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}.gallery-card--list[_ngcontent-%COMP%]   .gallery-card__tags[_ngcontent-%COMP%]{display:flex;align-items:center}.gallery-card[_ngcontent-%COMP%]:focus-within{outline:2px solid #2d72dc!important}.gallery-card__image-container[_ngcontent-%COMP%]{grid-area:image;background:#eaeff5 url(/assets/images/logo-dark-transparent.svg) 50% no-repeat;background-size:30%;border-radius:4px 4px 0 0;padding-bottom:100%;position:relative}.gallery-card__label[_ngcontent-%COMP%]{grid-area:label;align-items:center;padding:12px 16px 0;overflow:hidden;text-overflow:ellipsis;max-width:100%;white-space:nowrap;font-size:13px;letter-spacing:.325px;line-height:1.4em;font-weight:600;color:#1c2a3f}.gallery-card__actions[_ngcontent-%COMP%]{display:none;align-items:flex-start;justify-content:center;padding:4px;grid-area:actions;transition:opacity .25s}.gallery-card__tags[_ngcontent-%COMP%]{grid-area:tags;padding-left:16px;font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase;font-weight:500;color:#96a8c0}.gallery-card__image[_ngcontent-%COMP%]{border-radius:4px 4px 0 0;position:absolute;top:0;right:0;bottom:0;left:0;background-size:cover;background-position:top}.gallery-card__action-group[_ngcontent-%COMP%]{position:absolute;top:50%;left:25%;right:25%;transform:translateY(-50%);transition:transform .25s ease-out}.gallery-card__action[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase;border:1px solid #fff;border-radius:4px;text-align:center;padding:10px 12px;transition:background-color .3s ease-out}.gallery-card__action[_ngcontent-%COMP%]:hover{background-color:#131c2a}.gallery-card__action[_ngcontent-%COMP%]:focus{border-color:transparent;outline:2px solid #2d72dc!important}.gallery-card__updated[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em;display:flex;align-items:center;padding-left:16px;padding-right:16px;font-weight:400;color:#61779e;grid-area:updated}.gallery-card__header[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;display:flex;justify-content:space-between;align-items:center;padding:8px 8px 8px 16px;min-height:36px}.gallery-card__offline[_ngcontent-%COMP%]{color:#33cd54;background-image:linear-gradient(#fff,#fff);background-repeat:no-repeat;background-position:50%;border:1px solid #fff;border-radius:50%;margin-right:8px}.gallery-card__inline-check[_ngcontent-%COMP%]{display:none}.gallery-card--loading[_ngcontent-%COMP%]{pointer-events:none}.gallery-card--loading[_ngcontent-%COMP%]   .gallery-card__image-container[_ngcontent-%COMP%]{display:block;width:100%;height:100%;border-radius:100px;background:#eaeff5;background-image:linear-gradient(90deg,#eaeff5 0,#f9fafd 20%,#eaeff5 40%,#eaeff5);background-repeat:no-repeat;background-size:300% 100%;display:inline-block;position:relative;-webkit-animation:loaderShimmer 1.5s infinite forwards;animation:loaderShimmer 1.5s infinite forwards;border-radius:4px}.gallery-card--loading[_ngcontent-%COMP%]   .gallery-card__image[_ngcontent-%COMP%]{background-image:none!important}.gallery-card--loading[_ngcontent-%COMP%]   .gallery-card__label[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{display:none}.gallery-card--loading[_ngcontent-%COMP%]   .gallery-card__label[_ngcontent-%COMP%]:after{content:"";display:block;width:100%;height:16px;border-radius:100px;background:#eaeff5;background-image:linear-gradient(90deg,#eaeff5 0,#f9fafd 20%,#eaeff5 40%,#eaeff5);background-repeat:no-repeat;background-size:300% 100%;display:inline-block;position:relative;-webkit-animation:loaderShimmer 1.5s infinite forwards;animation:loaderShimmer 1.5s infinite forwards}.gallery-card--loading[_ngcontent-%COMP%]   .gallery-card__tags[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{display:none}.gallery-card--loading[_ngcontent-%COMP%]   .gallery-card__tags[_ngcontent-%COMP%]:after{content:"";display:block;width:35%;height:16px;border-radius:100px;background:#eaeff5;background-image:linear-gradient(90deg,#eaeff5 0,#f9fafd 20%,#eaeff5 40%,#eaeff5);background-repeat:no-repeat;background-size:300% 100%;display:inline-block;position:relative;-webkit-animation:loaderShimmer 1.5s infinite forwards;animation:loaderShimmer 1.5s infinite forwards}.gallery-card--responsive[_ngcontent-%COMP%]{height:124px;grid-template:"image label actions" minmax(-webkit-min-content,48px) "image tags actions" auto/124px auto auto;grid-template:"image label actions" minmax(min-content,48px) "image tags actions" auto/124px auto auto}.gallery-card--responsive[_ngcontent-%COMP%]   .gallery-card__image[_ngcontent-%COMP%]{border-radius:0}.gallery-card--responsive[_ngcontent-%COMP%]   .gallery-card__label[_ngcontent-%COMP%]{white-space:normal;padding-bottom:12px}.gallery-card--responsive[_ngcontent-%COMP%]   .gallery-card__tags[_ngcontent-%COMP%]{padding-top:4px}.gallery-card--responsive[_ngcontent-%COMP%]   .gallery-card__actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.gallery-card--responsive[_ngcontent-%COMP%]   .gallery-card__updated[_ngcontent-%COMP%]{display:none}.gallery-card--responsive[_ngcontent-%COMP%]:focus-within, .gallery-card--responsive[_ngcontent-%COMP%]:hover{box-shadow:0 1px 2px rgba(0,0,0,.04),0 4px 10px rgba(0,0,0,.12)!important}'],changeDetection:0}),Te)}}])}();