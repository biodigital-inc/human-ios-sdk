(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"1uty":function(e,t,n){"use strict";function i(e){return e._erd}e.exports={initState:function(e){return e._erd={},i(e)},getState:i,cleanState:function(e){delete e._erd}}},"7sSR":function(e,t,n){"use strict";var i=n("t3DW").forEach,o=n("W+U1"),r=n("Sa1T"),s=n("LO96"),a=n("UFhH"),c=n("q7TX"),l=n("GOnX"),p=n("wnTG"),h=n("1uty"),g=n("GNKm"),d=n("yUZ2");function u(e){return Array.isArray(e)||void 0!==e.length}function b(e){if(Array.isArray(e))return e;var t=[];return i(e,(function(e){t.push(e)})),t}function x(e){return e&&1===e.nodeType}function f(e,t,n){var i=e[t];return null==i&&void 0!==n?n:i}e.exports=function(e){var t;if((e=e||{}).idHandler)t={get:function(t){return e.idHandler.get(t,!0)},set:e.idHandler.set};else{var n=s(),m=a({idGenerator:n,stateHandler:h});t=m}var v=e.reporter;v||(v=c(!1===v));var w=f(e,"batchProcessor",p({reporter:v})),y={};y.callOnAdd=!!f(e,"callOnAdd",!0),y.debug=!!f(e,"debug",!1);var _,C=r(t),O=o({stateHandler:h}),P=f(e,"strategy","object"),M=f(e,"important",!1),k={reporter:v,batchProcessor:w,stateHandler:h,idHandler:t,important:M};if("scroll"===P&&(l.isLegacyOpera()?(v.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),P="object"):l.isIE(9)&&(v.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),P="object")),"scroll"===P)_=d(k);else{if("object"!==P)throw new Error("Invalid strategy name: "+P);_=g(k)}var z={};return{listenTo:function(e,n,o){function r(e){var t=C.get(e);i(t,(function(t){t(e)}))}function s(e,t,n){C.add(t,n),e&&n(t)}if(o||(o=n,n=e,e={}),!n)throw new Error("At least one element required.");if(!o)throw new Error("Listener required.");if(x(n))n=[n];else{if(!u(n))return v.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=b(n)}var a=0,c=f(e,"callOnAdd",y.callOnAdd),l=f(e,"onReady",(function(){})),p=f(e,"debug",y.debug);i(n,(function(e){h.getState(e)||(h.initState(e),t.set(e));var g=t.get(e);if(p&&v.log("Attaching listener to element",g,e),!O.isDetectable(e))return p&&v.log(g,"Not detectable."),O.isBusy(e)?(p&&v.log(g,"System busy making it detectable"),s(c,e,o),z[g]=z[g]||[],void z[g].push((function(){++a===n.length&&l()}))):(p&&v.log(g,"Making detectable..."),O.markBusy(e,!0),_.makeDetectable({debug:p,important:M},e,(function(e){if(p&&v.log(g,"onElementDetectable"),h.getState(e)){O.markAsDetectable(e),O.markBusy(e,!1),_.addListener(e,r),s(c,e,o);var t=h.getState(e);t&&t.startSize&&(t.startSize.width===e.offsetWidth&&t.startSize.height===e.offsetHeight||r(e)),z[g]&&i(z[g],(function(e){e()}))}else p&&v.log(g,"Element uninstalled before being detectable.");delete z[g],++a===n.length&&l()})));p&&v.log(g,"Already detecable, adding listener."),s(c,e,o),a++})),a===n.length&&l()},removeListener:C.removeListener,removeAllListeners:C.removeAllListeners,uninstall:function(e){if(!e)return v.error("At least one element is required.");if(x(e))e=[e];else{if(!u(e))return v.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=b(e)}i(e,(function(e){C.removeAllListeners(e),_.uninstall(e),h.cleanState(e)}))},initDocument:function(e){_.initDocument&&_.initDocument(e)}}}},GNKm:function(e,t,n){"use strict";var i=n("GOnX");e.exports=function(e){var t=(e=e||{}).reporter,n=e.batchProcessor,o=e.stateHandler.getState;if(!t)throw new Error("Missing required dependency: reporter.");function r(t){var n=e.important?" !important; ":"; ";return(t.join(n)+n).trim()}function s(e){return o(e).object}return{makeDetectable:function(e,s,a){a||(a=s,s=e,e=null),e=e||{},i.isIE(8)?a(s):function(s,a){var c=r(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),l=!1,p=window.getComputedStyle(s),h=s.offsetWidth,g=s.offsetHeight;function d(){function n(){if("static"===p.position){s.style.setProperty("position","relative",e.important?"important":"");var n=function(t,n,i,o){var r=i[o];"auto"!==r&&"0"!==function(e){return e.replace(/[^-\d\.]/g,"")}(r)&&(t.warn("An element that is positioned static has style."+o+"="+r+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+o+" will be set to 0. Element: ",n),n.style.setProperty(o,"0",e.important?"important":""))};n(t,s,p,"top"),n(t,s,p,"right"),n(t,s,p,"bottom"),n(t,s,p,"left")}}""!==p.position&&(n(),l=!0);var r=document.createElement("object");r.style.cssText=c,r.tabIndex=-1,r.type="text/html",r.setAttribute("aria-hidden","true"),r.onload=function(){l||n(),function e(t,n){if(!t.contentDocument){var i=o(t);return i.checkForObjectDocumentTimeoutId&&window.clearTimeout(i.checkForObjectDocumentTimeoutId),void(i.checkForObjectDocumentTimeoutId=setTimeout((function(){i.checkForObjectDocumentTimeoutId=0,e(t,n)}),100))}n(t.contentDocument)}(this,(function(e){a(s)}))},i.isIE()||(r.data="about:blank"),o(s)&&(s.appendChild(r),o(s).object=r,i.isIE()&&(r.data="about:blank"))}o(s).startSize={width:h,height:g},n?n.add(d):d()}(s,a)},addListener:function(e,t){function n(){t(e)}if(i.isIE(8))o(e).object={proxy:n},e.attachEvent("onresize",n);else{var r=s(e);if(!r)throw new Error("Element is not detectable by this strategy.");r.contentDocument.defaultView.addEventListener("resize",n)}},uninstall:function(e){if(o(e)){var t=s(e);t&&(i.isIE(8)?e.detachEvent("onresize",t.proxy):e.removeChild(t),o(e).checkForObjectDocumentTimeoutId&&window.clearTimeout(o(e).checkForObjectDocumentTimeoutId),delete o(e).object)}}}}},GOnX:function(e,t,n){"use strict";var i=e.exports={};i.isIE=function(e){return!(-1===(t=navigator.userAgent.toLowerCase()).indexOf("msie")&&-1===t.indexOf("trident")&&-1===t.indexOf(" edge/")||e&&e!==function(){var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");do{t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e"}while(n[0]);return e>4?e:void 0}());var t},i.isLegacyOpera=function(){return!!window.opera}},LO96:function(e,t,n){"use strict";e.exports=function(){var e=1;return{generate:function(){return e++}}}},Sa1T:function(e,t,n){"use strict";e.exports=function(e){var t={};function n(n){var i=e.get(n);return void 0===i?[]:t[i]||[]}return{get:n,add:function(n,i){var o=e.get(n);t[o]||(t[o]=[]),t[o].push(i)},removeListener:function(e,t){for(var i=n(e),o=0,r=i.length;o<r;++o)if(i[o]===t){i.splice(o,1);break}},removeAllListeners:function(e){var t=n(e);t&&(t.length=0)}}}},UFhH:function(e,t,n){"use strict";e.exports=function(e){var t=e.idGenerator,n=e.stateHandler.getState;return{get:function(e){var t=n(e);return t&&void 0!==t.id?t.id:null},set:function(e){var i=n(e);if(!i)throw new Error("setId required the element to have a resize detection state.");var o=t.generate();return i.id=o,o}}}},UL9e:function(e,t,n){"use strict";(e.exports={}).getOption=function(e,t,n){var i=e[t];return null==i&&void 0!==n?n:i}},"W+U1":function(e,t,n){"use strict";e.exports=function(e){var t=e.stateHandler.getState;return{isDetectable:function(e){var n=t(e);return n&&!!n.isDetectable},markAsDetectable:function(e){t(e).isDetectable=!0},isBusy:function(e){return!!t(e).busy},markBusy:function(e,n){t(e).busy=!!n}}}},mn0Z:function(e,t,n){"use strict";n.r(t),n.d(t,"ViewInternalModule",(function(){return dp}));var i=n("ofXK"),o=n("u47x"),r=n("tyNb"),s=n("fXoL");const a=[];let c=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[r.i.forChild(a)],r.i]}),e})();var l=n("vvyD"),p=n("EWj2"),h=n("6n0X"),g=n("AcyG"),d=n("WFQG"),u=n("9Xeq"),b=n("AIoM"),x=n("+pSP"),f=n("yGOH"),m=n("Ow1N"),v=n("aKmd"),w=n("wf0l"),y=n("Wgla"),_=n("S6v9"),C=n("o0EK"),O=n("lR5k"),P=n("fP/T"),M=n("Wdmj");let k=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[i.c,x.a]]}),e})();var z=n("oH02"),S=n("PCNd"),D=n("Rc+H"),j=n("3Pt+"),U=n("e0tp");let I=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[i.c,l.a,p.a,f.a,x.a,z.a,U.a,j.z,D.a,m.a]]}),e})(),T=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[g.d.forFeature([d.a]),O.a.forChild(),M.d,i.c,b.a,c,l.a,j.z,j.l,p.a,f.a,x.a,u.a,y.a,C.a,h.a,m.a,v.a,w.b,_.a,P.a,z.a,S.a,k,D.a,I,o.a]]}),e})();var V=n("uZ1g"),R=n("XNiG"),E=n("xgIS"),L=n("itXk"),$=n("HDdC"),N=n("VRyK"),A=n("H7eZ"),Q=n("1a36"),q=n("11Ye"),F=n("pLZG"),H=n("IzEk"),B=n("1G5W"),W=n("Kj3r"),J=n("Zy1z"),G=n("lJxs"),K=n("/uUt"),Y=n("UEjg"),Z=n("yCjD"),X=n("sTHe"),ee=n("Mh2x"),te=n("zlNa"),ne=n("imBb"),ie=n("7sSR"),oe=n("Yl/Z"),re=n("k93M"),se=n("q8pu"),ae=n("N0Zw"),ce=function(e){return e[e.Main=0]="Main",e[e.Media=1]="Media",e[e.Tools=2]="Tools",e[e.Whiteboard=3]="Whiteboard",e[e.VisibilityLayers=4]="VisibilityLayers",e[e.Empty=5]="Empty",e}({}),le=n("LvDl"),pe=n("snBo"),he=n("GyhO"),ge=n("3E0/"),de=n("p345"),ue=n("AytR"),be=n("CpGW"),xe=n("mmXA"),fe=n("FFWI"),me=n("0kAG"),ve=n("WwWM"),we=n("zp9f"),ye=n("WLCt"),_e=n("XoCC"),Ce=n("9AAO"),Oe=n("0njA"),Pe=n("7gUy"),Me=n("PmOP"),ke=n("PlCH"),ze=n("ZULQ"),Se=n("Vrox"),De=n("STbY");let je=(()=>{class e{transform(e,t){return function(e){if(null==e)return"";const t=new RegExp(/[^a-zA-Z0-9_]/,"gi");return e.replace(t,"_")}(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Ob({name:"elementID",type:e,pure:!0}),e})();var Ue=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Ie=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Te=["chapterMenu"];function Ve(e,t){1&e&&s.kc(0)}function Re(e,t){1&e&&s.Rb(0)}function Ee(e,t){if(1&e){const e=s.Wb();s.Tb(0),s.Vb(1,"button",5),s.cc("menuOpened",(function(){return s.Cc(e),s.gc().handleMenuOpened()})),s.Nc(2,Re,1,0,"ng-container",6),s.Ub(),s.Sb()}if(2&e){const e=s.gc(),t=s.yc(5),n=s.yc(1);s.Db(1),s.mc("buttonShape",e.buttonShape)("fill",!0)("matMenuTriggerFor",t),s.Db(1),s.mc("ngTemplateOutlet",n)}}function Le(e,t){1&e&&(s.Vb(0,"span",12),s.Pc(1,"current"),s.Ub())}const $e=function(e,t){return{"view-chapters__item--viewed":e,"view-chapters__item--selected":t}};function Ne(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",7),s.cc("click",(function(){s.Cc(e);const n=t.$implicit;return s.gc().handleChapterClick(n)})),s.hc(1,"elementID"),s.hc(2,"async"),s.Vb(3,"div",8),s.Pc(4),s.Ub(),s.Vb(5,"div",9),s.Pc(6),s.Ub(),s.Nc(7,Le,2,0,"span",10),s.hc(8,"async"),s.Qb(9,"div",11),s.Ub()}if(2&e){const e=t.$implicit,n=t.index,i=s.gc();s.mc("ngClass",s.qc(13,$e,i.isViewed(e.id),e.id===s.ic(2,9,i.selectedChapterId$))),s.Eb("data-chapter-id",s.ic(1,7,e.id)),s.Db(4),s.Rc("",n+1,"."),s.Db(2),s.Qc(e.info.displayName),s.Db(1),s.mc("ngIf",e.id===s.ic(8,11,i.selectedChapterId$)),s.Db(2),s.mc("defaultImage",i.defaultImage)("lazyLoad",i.getChapterThumb(e.id))}}const Ae=["*"];let Qe=(()=>{class e{constructor(e,t){this.store=e,this.viewService=t,this.defaultImage="/assets/images/view-chapter-thumbnail-placeholder.png",this.buttonShape="circle"}handleChapterClick(e){this.viewService.selectChapter(e)}handleMenuOpened(){const e=this.store.selectSnapshot(ee.a.getSelectedChapterIndex);this.chapterMenu._allItems.toArray()[e].focus()}getChapterThumb(e){const t=this.store.selectSnapshot(Se.a.getRegisteredThumbnails).get(e);return t?t.snapshot||t.urls.small:""}isViewed(e){return this.store.selectSnapshot(ee.a.getChaptersViewed).some(t=>t===e)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(ve.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-chapters"]],viewQuery:function(e,t){if(1&e&&s.Jc(Te,!0),2&e){let e;s.xc(e=s.dc())&&(t.chapterMenu=e.first)}},inputs:{defaultImage:"defaultImage",buttonShape:"buttonShape"},ngContentSelectors:Ae,decls:8,vars:7,consts:[["contentTmp",""],[4,"ngIf","ngIfElse"],[1,"view-chapters"],["chapterMenu","matMenu"],["mat-menu-item","","class","view-chapters__item",3,"ngClass","click",4,"ngFor","ngForOf"],["app-pin-button","","buttonAlign","left","buttonType","ghost","data-test","viewChaptersButton",1,"w-100","h-100",3,"buttonShape","fill","matMenuTriggerFor","menuOpened"],[4,"ngTemplateOutlet"],["mat-menu-item","",1,"view-chapters__item",3,"ngClass","click"],[1,"view-chapters__index"],[1,"view-chapters__title"],["class","visually-hidden",4,"ngIf"],[1,"view-chapters__thumb",3,"defaultImage","lazyLoad"],[1,"visually-hidden"]],template:function(e,t){if(1&e&&(s.lc(),s.Nc(0,Ve,1,0,"ng-template",null,0,s.Oc),s.Nc(2,Ee,3,4,"ng-container",1),s.hc(3,"async"),s.Vb(4,"mat-menu",2,3),s.Nc(6,Ne,10,16,"button",4),s.hc(7,"async"),s.Ub()),2&e){const e=s.yc(1);let n=null;s.Db(2),s.mc("ngIf",(null==(n=s.ic(3,3,t.chapters$))?null:n.length)>1)("ngIfElse",e),s.Db(4),s.mc("ngForOf",s.ic(7,5,t.chapters$))}},directives:[i.p,De.a,i.o,Ce.a,De.d,i.u,De.b,i.m,w.a],pipes:[i.b,je],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-chapters{min-width:300px;max-height:320px;overflow:auto;padding:8px}.view-chapters button.mat-menu-item{height:auto;font-size:14px;letter-spacing:.35px;line-height:1.4em}.view-chapters button.mat-button-toggle-focus-overlay{display:none}.view-chapters__item{height:auto;white-space:normal;display:flex!important;padding:8px!important;border-radius:4px;border:2px solid transparent;background-color:transparent;color:#131c2a;margin-bottom:4px;transition:background-color 125ms,color 125ms,border 125ms}.view-chapters__item:hover{cursor:pointer;background:#eaeff5}.view-chapters__item--selected{border-color:#2d72dc}.view-chapters__index{display:flex;flex:0 0 32px;justify-content:center}.view-chapters__thumb{background-color:#f9fafd;border-radius:4px;background-repeat:no-repeat;flex:0 0 56px;height:56px;width:56px;transition:border-color .1s}.view-chapters__title{word-wrap:break-word;overflow-wrap:break-word;word-break:break-word;white-space:normal;display:flex;flex:1 1 auto;padding-right:4px}.view-chapters__thumb{background-size:cover}"],encapsulation:2,changeDetection:0}),Ue([Object(g.e)(ee.a.getStoryChapters),Ie("design:type",$.a)],e.prototype,"chapters$",void 0),Ue([Object(g.e)(ee.a.getSelectedChapterId),Ie("design:type",$.a)],e.prototype,"selectedChapterId$",void 0),Ue([Object(g.e)(ee.a.getSelectedChapterIndex),Ie("design:type",$.a)],e.prototype,"selectedChapterIndex$",void 0),Ue([Object(g.e)(Se.a.getRegisteredThumbnails),Ie("design:type",$.a)],e.prototype,"thumbnails$",void 0),Ue([Object(g.e)(ee.a.getChaptersViewed),Ie("design:type",$.a)],e.prototype,"chaptersViewed$",void 0),e})();var qe=n("YpC8"),Fe=n("nhKa"),He=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Be=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const We=function(e){return{"view-description__story-title--large":e}};function Je(e,t){if(1&e&&(s.Vb(0,"h1",7),s.Pc(1),s.Ub()),2&e){const e=s.gc();s.mc("ngClass",s.pc(2,We,!e.chapterTitle)),s.Db(1),s.Rc(" ",e.storyTitle," ")}}function Ge(e,t){if(1&e&&(s.Vb(0,"span"),s.Pc(1),s.hc(2,"async"),s.Ub()),2&e){const e=s.gc();s.Db(1),s.Rc("",s.ic(2,1,e.chapterIndex$)+1,".")}}function Ke(e,t){1&e&&s.Qb(0,"app-icon",8)}const Ye=function(e,t){return{"view-title--clickable":e,"view-title--large":t}};let Ze=(()=>{class e{constructor(e,t){this.layoutService=e,this.changeDetectorRef=t,this._isPopulated=!1,this.isPopulatedChange=new s.p,this._menuEnabled=!0,this.viewLayout=pe.a,this.ngUnsubscribe=new R.a,this.storyTitle="",this.chapterTitle=""}get isPopulated(){return this._isPopulated}set isPopulated(e){this._isPopulated=e,this.isPopulatedChange.emit(this.isPopulated)}get menuEnabled(){return this._menuEnabled}set menuEnabled(e){this._menuEnabled=e}ngOnInit(){this.initContentListener(),this.initLayoutListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}isEnabled(e){return this.layoutService.isUIEnabled(e)}initContentListener(){Object(L.b)([this.story$,this.chapter$]).pipe(Object(F.a)(([e,t])=>null!=t&&null!=e),Object(B.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.storyTitle=ue.a.application!==de.a.Viewer?ze.a.normalize(e.displayName):"",this.chapterTitle=ze.a.normalize(t.info.displayName),this.isPopulated=!!this.chapterTitle||!!this.storyTitle})}initLayoutListener(){this.layout$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.changeDetectorRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(ye.a),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-title"]],viewQuery:function(e,t){if(1&e&&s.Vc(Qe,!0),2&e){let e;s.xc(e=s.dc())&&(t.chapterListComponentMenu=e.first)}},inputs:{size:"size",isPopulated:"isPopulated",menuEnabled:"menuEnabled"},outputs:{isPopulatedChange:"isPopulatedChange"},decls:12,vars:16,consts:[[1,"view-title",3,"ngClass"],["buttonShape","square"],[1,"p-2"],["id","view-title","class","view-title__story",3,"ngClass",4,"ngIf"],["id","view-title",1,"view-title__chapter"],[4,"ngIf"],["icon","caret-down",4,"ngIf"],["id","view-title",1,"view-title__story",3,"ngClass"],["icon","caret-down"]],template:function(e,t){1&e&&(s.Vb(0,"section",0),s.hc(1,"async"),s.Vb(2,"app-view-chapters",1),s.Vb(3,"div",2),s.Nc(4,Je,2,4,"h1",3),s.Vb(5,"h1",4),s.Nc(6,Ge,3,3,"span",5),s.hc(7,"async"),s.Pc(8),s.hc(9,"textNormalize"),s.Nc(10,Ke,1,0,"app-icon",6),s.hc(11,"async"),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.mc("ngClass",s.qc(13,Ye,s.ic(1,5,t.chapterCount$)>1&&t.menuEnabled,"large"===t.size)),s.Db(4),s.mc("ngIf",t.storyTitle&&t.storyTitle!=t.chapterTitle),s.Db(2),s.mc("ngIf",s.ic(7,7,t.chapterCount$)>1&&t.menuEnabled),s.Db(2),s.Rc(" ",s.ic(9,9,t.chapterTitle)," "),s.Db(2),s.mc("ngIf",s.ic(11,11,t.chapterCount$)>1&&t.menuEnabled))},directives:[i.m,Qe,i.p,Oe.a],pipes:[i.b,Fe.a],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-title{word-wrap:break-word;overflow-wrap:break-word;border-radius:4px;padding:4px;margin:0 -4px;transition:background-color 125ms}.view-title--large{font-size:18px;letter-spacing:.45px;line-height:1.4em}.view-title__story{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase;word-wrap:break-word;overflow-wrap:break-word;text-align:left;font-weight:600;color:var(--view-description-secondary-color)}.view-title__chapter{font-size:14px;letter-spacing:.35px;line-height:1.4em;text-align:left;font-weight:600;color:#131c2a}"],encapsulation:2,changeDetection:0}),He([Object(g.e)(qe.a.getStory),Be("design:type",$.a)],e.prototype,"story$",void 0),He([Object(g.e)(ee.a.getSelectedChapter),Be("design:type",$.a)],e.prototype,"chapter$",void 0),He([Object(g.e)(ee.a.getChapterCount),Be("design:type",$.a)],e.prototype,"chapterCount$",void 0),He([Object(g.e)(ee.a.getSelectedChapterIndex),Be("design:type",$.a)],e.prototype,"chapterIndex$",void 0),He([Object(g.e)(d.a.getUI),Be("design:type",$.a)],e.prototype,"layout$",void 0),e})();var Xe=n("uDDk"),et=n("Y7Bv");function tt(e,t){if(1&e&&(s.Vb(0,"div",2),s.Vb(1,"h2",3),s.Pc(2),s.Ub(),s.kc(3,1,["class","view-panel__actions","actions",""]),s.Ub()),2&e){const e=s.gc();s.Db(2),s.Rc(" ",e.label," ")}}const nt=["*",[["","actions",""]]],it=function(e,t){return{"view-panel--padding-none":e,"view-panel--padding-dense":t}},ot=["*","[actions]"];let rt=(()=>{class e{constructor(){this.label="",this.showHeader=!0,this.padding="normal"}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-panel"]],inputs:{label:"label",showHeader:"showHeader",padding:"padding"},ngContentSelectors:ot,decls:3,vars:5,consts:[[1,"view-panel",3,"ngClass"],["class","view-panel__header",4,"ngIf"],[1,"view-panel__header"],[1,"view-panel__label"]],template:function(e,t){1&e&&(s.lc(nt),s.Vb(0,"div",0),s.Nc(1,tt,4,1,"div",1),s.kc(2),s.Ub()),2&e&&(s.mc("ngClass",s.qc(2,it,"none"===t.padding,"dense"===t.padding)),s.Db(1),s.mc("ngIf",t.showHeader))},directives:[i.m,i.p],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-panel{border-bottom:1px solid #eaeff5;padding:0 0 32px;margin-bottom:16px}.view-panel--padding-none{padding:0;margin:0}.view-panel--padding-dense{padding:0 0 8px;margin:0 0 8px}.view-panel__label{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase;color:#374a68;font-weight:600;display:flex;align-items:center;min-height:28px}.view-panel__header{display:flex;flex-direction:row;align-items:flex-start;justify-content:space-between;margin-bottom:16px}"],encapsulation:2,changeDetection:0}),e})();var st=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},at=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function ct(e,t){if(1&e&&(s.Vb(0,"div",3),s.Qb(1,"app-html",4),s.Ub()),2&e){const e=s.gc();s.Db(1),s.mc("markdownText",e.chapterDescription)}}const lt=function(e,t){return{"view-description--layout-column":e,"view-description--layout-drawer":t}};let pt=(()=>{class e{constructor(e,t,n){this.viewService=e,this.layoutService=t,this.changeDetectorRef=n,this.viewLayout=pe.a,this.ngUnsubscribe=new R.a,this.storyTitle="",this.chapterTitle="",this.chapterDescription="",this.layout=et.a.Drawer,this._isPopulated=!1,this.isPopulatedChange=new s.p}get isPopulated(){return this._isPopulated}set isPopulated(e){this._isPopulated=e,this.isPopulatedChange.emit(this.isPopulated)}ngOnInit(){this.initContentListener(),this.initLayoutListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}isEnabled(e){return this.layoutService.isUIEnabled(e)}initContentListener(){Object(L.b)(this.story$,this.chapter$).pipe(Object(F.a)(([e,t])=>null!=e&&null!=t),Object(B.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.storyTitle=ue.a.application!==de.a.Viewer?ze.a.normalize(e.displayName):"",this.chapterTitle=ze.a.normalize(t.info.displayName),this.chapterDescription=Object(le.trim)(t.info.description),this.isPopulated=""!==this.storyTitle||!!this.chapterTitle||!!this.chapterDescription})}initLayoutListener(){this.layout$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.changeDetectorRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(ve.a),s.Pb(ye.a),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-description"]],inputs:{layout:"layout",isPopulated:"isPopulated"},outputs:{isPopulatedChange:"isPopulatedChange"},decls:4,vars:5,consts:[[1,"view-description",3,"ngClass"],[1,"view-description__inner"],["class","view-description__body",4,"ngIf"],[1,"view-description__body"],[3,"markdownText"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Vb(2,"section"),s.Nc(3,ct,2,1,"div",2),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.mc("ngClass",s.qc(2,lt,"column"===t.layout,"drawer"===t.layout)),s.Db(3),s.mc("ngIf",t.chapterDescription))},directives:[i.m,i.p,Pe.a],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-description{color:#131c2a;display:flex;flex-direction:column;justify-content:left}.view-description--layout-column .view-description__chapter-title{font-size:18px;letter-spacing:.45px;line-height:1.4em}.view-description--layout-column .view-description__body{padding:4px 8px 12px}.view-description--layout-drawer .view-description__story-title{text-align:center}.view-description--layout-drawer .view-description__story-title--large{font-size:14px;letter-spacing:.35px;line-height:1.4em}.view-description--layout-drawer .view-description__body{padding-top:4px}.view-description__inner{flex:1 0 auto}.view-description__story-title{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase;word-wrap:break-word;overflow-wrap:break-word;flex-grow:1;font-weight:600;color:#374a68}.view-description__story-title--large{font-size:18px;letter-spacing:.45px;line-height:1.4em;text-transform:none}.view-description__body{font-size:14px;letter-spacing:.35px;line-height:1.4em;word-wrap:break-word;overflow-wrap:break-word;padding-top:8px;color:#374a68}"],encapsulation:2,changeDetection:0}),st([Object(g.e)(qe.a.getStory),at("design:type",$.a)],e.prototype,"story$",void 0),st([Object(g.e)(ee.a.getSelectedChapter),at("design:type",$.a)],e.prototype,"chapter$",void 0),st([Object(g.e)(ee.a.getSelectedChapterIndex),at("design:type",$.a)],e.prototype,"chapterIndex$",void 0),st([Object(g.e)(ee.a.getChapterCount),at("design:type",$.a)],e.prototype,"chapterCount$",void 0),st([Object(g.e)(d.a.getUI),at("design:type",$.a)],e.prototype,"layout$",void 0),e})();var ht=n("V7wM");function gt(e,t){if(1&e&&(s.Vb(0,"div",6),s.Pc(1),s.Ub()),2&e){const e=s.gc().$implicit;s.Db(1),s.Qc(e.description)}}function dt(e,t){if(1&e&&(s.Vb(0,"li",2),s.Qb(1,"div",3),s.Vb(2,"div",4),s.Vb(3,"div"),s.Pc(4),s.Ub(),s.Nc(5,gt,2,1,"div",5),s.Ub(),s.Ub()),2&e){const e=t.$implicit,n=s.gc();s.Db(1),s.Kc("background-color",n.getComputedColor(e.colors)),s.Db(3),s.Qc(e.label),s.Db(1),s.mc("ngIf",e.description)}}let ut=(()=>{class e{constructor(){}ngOnInit(){}getComputedColor(e){return ht.a.rgbToHex(e,!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-legend"]],inputs:{legend:"legend"},decls:2,vars:1,consts:[["aria-label","Legend","role","complementary",1,"view-legend"],["class","view-legend__item",4,"ngFor","ngForOf"],[1,"view-legend__item"],[1,"view-legend__color","mh-2"],[1,"view-legend__content","text-14"],["class","mv-2",4,"ngIf"],[1,"mv-2"]],template:function(e,t){1&e&&(s.Vb(0,"ul",0),s.Nc(1,dt,6,4,"li",1),s.Ub()),2&e&&(s.Db(1),s.mc("ngForOf",t.legend))},directives:[i.o,i.p],styles:['.view-legend{display:flex;flex-direction:column}.view-legend__item{padding:8px 0;display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start}.view-legend__content{display:flex;flex-direction:column}.view-legend__color{content:" ";display:block;flex:0 0 16px;width:16px;height:16px;border-radius:50%}.view-legend__color:after{content:" "}'],encapsulation:2,changeDetection:0}),e})();var bt=n("2o60"),xt=n("A+8E"),ft=n("2he+"),mt=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},vt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const wt=function(e){return{"view-labels__item--selected":e}};function yt(e,t){if(1&e){const e=s.Wb();s.Vb(0,"li"),s.Vb(1,"button",2),s.cc("click",(function(){s.Cc(e);const n=t.$implicit;return s.gc().handleLabelClick(n)}))("keyup.enter",(function(){s.Cc(e);const n=t.$implicit;return s.gc().handleLabelClick(n)})),s.hc(2,"async"),s.hc(3,"async"),s.Vb(4,"span",3),s.Pc(5,"Navigate to description for, "),s.Ub(),s.Vb(6,"div",4),s.Vb(7,"div",5),s.Qb(8,"app-label-pin",6),s.Ub(),s.Ub(),s.Vb(9,"div",7),s.Qb(10,"div",8),s.hc(11,"markdown"),s.Ub(),s.Ub(),s.Ub()}if(2&e){const e=t.$implicit,n=s.gc();let i=null,o=null;s.Db(1),s.mc("ngClass",s.pc(11,wt,(null==(i=s.ic(2,5,n.selectedLabel$))?null:i.id)===e.id)),s.Eb("aria-current",(null==(o=s.ic(3,7,n.selectedLabel$))?null:o.id)===e.id),s.Db(7),s.mc("label",e)("sequence",n.getLabelSequence(e)),s.Db(2),s.mc("innerHTML",s.ic(11,9,e.title),s.Dc)}}let _t=(()=>{class e{constructor(e,t){this.viewService=e,this.store=t,this.labelPinType=bt.a,this.labelSequentialtype=xt.a}ngOnInit(){}getLabelSequence(e){return this.store.selectSnapshot(ae.a.getLabelSequence(e))}handleLabelClick(e){this.viewService.selectLabel(e,!0)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(ve.a),s.Pb(g.h))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-labels"]],decls:3,vars:3,consts:[[1,"view-labels"],[4,"ngFor","ngForOf"],[1,"view-labels__item",3,"ngClass","click","keyup.enter"],[1,"visually-hidden"],[1,"view-labels__pre"],[1,"view-labels__pin"],[3,"label","sequence"],[1,"view-labels__body"],[1,"view-labels__title","html",3,"innerHTML"]],template:function(e,t){1&e&&(s.Vb(0,"ul",0),s.Nc(1,yt,12,13,"li",1),s.hc(2,"async"),s.Ub()),2&e&&(s.Db(1),s.mc("ngForOf",s.ic(2,1,t.labels$)))},directives:[i.o,i.m,ft.a],pipes:[i.b,O.b],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-labels__item{background:none;border:0;border-left:4px solid transparent;border-radius:2px;display:flex;padding:12px 8px;margin-bottom:4px;cursor:pointer;transition:background-color 125ms,color 125ms,border 125ms;width:100%;text-align:left}.view-labels__item:focus{outline:2px solid #2d72dc!important}.view-labels__item:hover{background:#eaeff5}.view-labels__item--selected{background:#f0f8ff;border-left:4px solid #2d72dc}.view-labels__item--selected:hover{background:#f0f8ff}.view-labels__pre{flex:0 0 32px;display:flex;justify-content:center;position:relative}.view-labels__pin{display:flex;align-items:center;justify-content:center;position:absolute}.view-labels__title{color:#131c2a}.view-labels__description,.view-labels__title{font-size:14px;letter-spacing:.35px;line-height:1.4em}.view-labels__description{color:#374a68;padding-top:4px}.view-labels__label{position:absolute;font-size:10px;top:3px}"],encapsulation:2,changeDetection:0}),mt([Object(g.e)(ae.a.getChapterLabels),vt("design:type",$.a)],e.prototype,"labels$",void 0),mt([Object(g.e)(ae.a.getSelectedLabel),vt("design:type",$.a)],e.prototype,"selectedLabel$",void 0),e})();var Ct=n("Qu3c"),Ot=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Pt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function Mt(e,t){if(1&e&&(s.Vb(0,"div"),s.Qb(1,"app-content-blocks",7),s.hc(2,"async"),s.Ub()),2&e){const e=s.gc(2);s.Db(1),s.mc("contentBlocks",s.ic(2,2,e.contentBlocks$))("include",e.contentBlockTypes.Ticker)}}function kt(e,t){if(1&e&&(s.Vb(0,"div"),s.Qb(1,"app-content-blocks",8),s.hc(2,"async"),s.Ub()),2&e){const e=s.gc(2);s.Db(1),s.mc("contentBlocks",s.ic(2,2,e.contentBlocks$))("exclude",e.contentBlockTypes.Ticker)}}function zt(e,t){if(1&e){const e=s.Wb();s.Vb(0,"app-view-panel",4),s.Nc(1,Mt,3,4,"div",5),s.hc(2,"async"),s.Vb(3,"app-view-description",6),s.cc("isPopulatedChange",(function(t){return s.Cc(e),s.gc().isPopulated=t})),s.Ub(),s.Nc(4,kt,3,4,"div",5),s.hc(5,"async"),s.Ub()}if(2&e){const e=s.gc();let t=null,n=null;s.mc("showHeader",!1)("hidden",!e.isPopulated),s.Db(1),s.mc("ngIf",(null==(t=s.ic(2,6,e.contentBlocks$))?null:t.length)>0),s.Db(2),s.mc("isPopulated",e.isPopulated)("layout",e.layout),s.Db(1),s.mc("ngIf",(null==(n=s.ic(5,8,e.contentBlocks$))?null:n.length)>0)}}function St(e,t){if(1&e&&(s.Vb(0,"app-view-panel",9),s.Qb(1,"app-view-legend",10),s.hc(2,"async"),s.Ub()),2&e){const e=s.gc();s.Db(1),s.mc("legend",s.ic(2,1,e.chapter$).legend)}}function Dt(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",13),s.Vb(1,"button",14),s.cc("click",(function(){return s.Cc(e),s.gc(2).handlePrevClick()})),s.Ub(),s.Vb(2,"button",15),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleNextClick()})),s.Ub(),s.Ub()}}function jt(e,t){if(1&e&&(s.Vb(0,"app-view-panel",11),s.Nc(1,Dt,3,0,"div",12),s.hc(2,"async"),s.Qb(3,"app-view-labels"),s.Ub()),2&e){const e=s.gc();let t=null;s.Db(1),s.mc("ngIf",(null==(t=s.ic(2,1,e.labels$))?null:t.length)>1)}}let Ut=(()=>{class e{constructor(e,t,n,i){this.store=e,this.viewService=t,this.layoutService=n,this.changeDetectorRef=i,this.ngUnsubscribe=new R.a,this.layout=et.a.Column,this.viewLayout=pe.a,this.isPopulated=!0,this.descriptionVisible=!1,this.legendVisible=!1,this.labelListVisible=!1,this.contentBlockTypes=Xe.a}ngOnInit(){this.store.select(d.a.getUI).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.descriptionVisible=this.isVisible(pe.a.Description),this.legendVisible=this.isVisible(pe.a.Legend),this.labelListVisible=this.isVisible(pe.a.LabelList),this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}isVisible(e){return this.layoutService.isUIVisible(e)}isEnabled(e){return this.layoutService.isUIEnabled(e)}handlePrevClick(){this.selectLabel(-1)}handleNextClick(){this.selectLabel(1)}selectLabel(e){const t=this.store.selectSnapshot(ae.a.getChapterLabels),n=t.length,i=this.store.selectSnapshot(ae.a.getSelectedLabelId),o=t.findIndex(e=>e.id===i),r=t[((-1!==o?o+e:0)%n+n)%n];r&&this.viewService.selectLabel(r,!0)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(ve.a),s.Pb(ye.a),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-content-mode"]],inputs:{layout:"layout"},decls:7,vars:9,consts:[[1,"view-content-mode"],["role","complementary","aria-describedby","view-title",3,"showHeader","hidden",4,"ngIf"],["label","Legend",4,"ngIf"],["label","Labels","role","complementary","aria-label","Labels",4,"ngIf"],["role","complementary","aria-describedby","view-title",3,"showHeader","hidden"],[4,"ngIf"],[3,"isPopulated","layout","isPopulatedChange"],[3,"contentBlocks","include"],[3,"contentBlocks","exclude"],["label","Legend"],[3,"legend"],["label","Labels","role","complementary","aria-label","Labels"],["actions","","class","flex",4,"ngIf"],["actions","",1,"flex"],["app-pin-button","","icon","chevron-left","size","small","buttonType","ghost","aria-label","Previous Label","matTooltip","Previous Label","data-test","previousLabelButton",3,"click"],["app-pin-button","","icon","chevron-right","size","small","buttonType","ghost","aria-label","Next Label","matTooltip","Next Label","data-test","nextLabelButton",3,"click"]],template:function(e,t){if(1&e&&(s.Vb(0,"div",0),s.Nc(1,zt,6,10,"app-view-panel",1),s.Nc(2,St,3,3,"app-view-panel",2),s.hc(3,"async"),s.hc(4,"async"),s.Nc(5,jt,4,3,"app-view-panel",3),s.hc(6,"async"),s.Ub()),2&e){let e=null,n=null;s.Db(1),s.mc("ngIf",t.descriptionVisible),s.Db(1),s.mc("ngIf",(null==(e=s.ic(3,3,t.chapter$))?null:e.legend)&&(null==(e=s.ic(4,5,t.chapter$))?null:e.legend.length)>0&&t.legendVisible),s.Db(3),s.mc("ngIf",(null==(n=s.ic(6,7,t.labels$))?null:n.length)&&t.labelListVisible)}},directives:[i.p,rt,pt,ke.a,ut,_t,Ce.a,Ct.c],pipes:[i.b],styles:[".view-content-mode[_ngcontent-%COMP%]{padding-bottom:24px}"],changeDetection:0}),Ot([Object(g.e)(ee.a.getStoryChapters),Pt("design:type",$.a)],e.prototype,"chapters$",void 0),Ot([Object(g.e)(ee.a.getSelectedChapter),Pt("design:type",$.a)],e.prototype,"chapter$",void 0),Ot([Object(g.e)(ee.a.getSelectedChapterContentBlocks),Pt("design:type",$.a)],e.prototype,"contentBlocks$",void 0),Ot([Object(g.e)(ae.a.getChapterLabels),Pt("design:type",$.a)],e.prototype,"labels$",void 0),e})();var It=n("5miH"),Tt=n("TATr"),Vt=n("WUhe"),Rt=n("VJvM"),Et=n("3fyd"),Lt=n("PUI9"),$t=n("GMXD"),Nt=n("gm/O"),At=n("Xk3F"),Qt=n("0UUK"),qt=n("eW6i"),Ft=n("kTA6");function Ht(e,t){if(1&e&&(s.Vb(0,"span"),s.Pc(1),s.Ub()),2&e){const e=s.gc();s.Db(1),s.Rc(" of ",e.total,"")}}let Bt=(()=>{class e{constructor(){this.index=0,this.total=0}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-quiz-progress"]],inputs:{index:"index",total:"total"},decls:4,vars:2,consts:[["data-test","quizProgress",1,"view-quiz-progress"],[1,"text-semibold"],[4,"ngIf"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"span",1),s.Pc(2),s.Ub(),s.Nc(3,Ht,2,1,"span",2),s.Ub()),2&e&&(s.Db(2),s.Rc("Question ",t.index+1,""),s.Db(1),s.mc("ngIf",t.total>1))},directives:[i.p],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.view-quiz-progress[_ngcontent-%COMP%]{color:#374a68;font-size:12px;letter-spacing:.3px;line-height:1.4em}"],changeDetection:0}),e})();var Wt=n("QibW"),Jt=n("7u76"),Gt=n("yIGu"),Kt=n("F+jD");function Yt(e,t){if(1&e&&(s.Vb(0,"app-list-item"),s.Vb(1,"div",1),s.Pc(2),s.Ub(),s.Ub()),2&e){const e=t.$implicit;s.Db(1),s.Eb("data-id",e.id),s.Db(1),s.Qc(e.label)}}let Zt=(()=>{class e{constructor(e,t,n){this.store=e,this.graphService=t,this.changeRef=n}get objectIds(){return this._objectIds}set objectIds(e){this._objectIds=e;const t=this.store.selectSnapshot(Lt.a.getViewGraph);this.nodes=this.graphService.getNodes(t,e),this.changeRef.markForCheck()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(Jt.a),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-quiz-object-tree"]],inputs:{objectIds:"objectIds"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"text-14","text-medium","mv-1"]],template:function(e,t){1&e&&(s.Vb(0,"app-list"),s.Nc(1,Yt,3,2,"app-list-item",0),s.Ub()),2&e&&(s.Db(1),s.mc("ngForOf",t.nodes))},directives:[Gt.a,i.o,Kt.a],styles:[""],changeDetection:0}),e})();var Xt=n("GW3K");let en=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-quiz-answer-number"]],inputs:{number:"number"},decls:3,vars:1,consts:[[1,"number","text-10","text-medium"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"div"),s.Pc(2),s.Ub(),s.Ub()),2&e&&(s.Db(2),s.Qc(t.number))},styles:[".number[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;height:20px;color:#131c2a;border:1px solid rgba(55,74,104,.5);border-radius:50%}"],changeDetection:0}),e})();var tn=n("EFPM"),nn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function on(e,t){if(1&e&&(s.Vb(0,"div",3),s.Vb(1,"div",4),s.Qb(2,"app-view-quiz-answer-number",5),s.Ub(),s.Vb(3,"div",6),s.Qb(4,"app-quiz-label-anatomy-select",7),s.Ub(),s.Ub()),2&e){const e=t.index,n=s.gc();s.Db(2),s.mc("number",e+1),s.Db(2),s.mc("options",n.options)("formControlName",e)}}let rn=(()=>{class e{constructor(e){this.formBuilder=e,this.valueChange=new s.p,this.ngUnsubscribe=new R.a,this._options=[],this.form=this.formBuilder.group({options:this.formBuilder.array([])}),this.optionsArray=this.form.get("options")}get options(){return this._options}set options(e){Object(le.isEqual)(e,this._options)||(this._options=e,this.buildFormOptions(e))}ngOnInit(){this.initFormListeners(),this.init()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initFormListeners(){this.form.valueChanges.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(({options:e})=>{this.valueChange.next(e)})}init(){this.activeSubmission$.pipe(Object(F.a)(e=>!Object(le.isNil)(e)&&!Object(le.isNil)(e.answer)),Object(J.a)(),Object(B.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{const n=Object(Xt.b)(e.answer||[],t.answer||[],"");Object(le.isEqual)(t,n)||this.form.patchValue({options:n||[]})}),this.activeSubmission$.pipe(Object(F.a)(e=>!Object(le.isNil)(e)&&!Object(le.isNil)(e.answer)&&Array.isArray(e.answer)),Object(K.a)((e,t)=>Object(le.isEqual)(e,t)),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.form.value.options,n=e.answer;Object(le.isEqual)(t,n)||this.form.patchValue({options:n},{emitEvent:!1,onlySelf:!0})})}buildFormOptions(e){this.optionsArray.clear(),e.forEach(()=>{this.optionsArray.push(this.formBuilder.control(""))}),this.optionsArray.setValue(e.map(()=>""))}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(j.f))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-quiz-label-anatomy"]],inputs:{options:"options"},outputs:{valueChange:"valueChange"},decls:3,vars:2,consts:[[1,"options",3,"formGroup"],["formArrayName","options"],["class","options__item mb-4","data-test","questionAnswer",4,"ngFor","ngForOf"],["data-test","questionAnswer",1,"options__item","mb-4"],[1,"mr-2"],[3,"number"],[1,"options__item-select"],[3,"options","formControlName"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Nc(2,on,5,3,"div",2),s.Ub(),s.Ub()),2&e&&(s.mc("formGroup",t.form),s.Db(2),s.mc("ngForOf",t.options))},directives:[j.s,j.j,j.e,i.o,en,tn.a,j.r,j.i],styles:[".options__item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.options__item-select[_ngcontent-%COMP%]{border:1px solid #96a8c0;border-radius:4px;flex:1 1 auto}"],changeDetection:0}),function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([Object(g.e)(fe.b.getActiveSubmission),nn("design:type",$.a)],e.prototype,"activeSubmission$",void 0),e})();var sn=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},an=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function cn(e,t){if(1&e&&(s.Vb(0,"mat-radio-button",8),s.Pc(1),s.Ub()),2&e){const e=t.$implicit;s.mc("value",e.value),s.Db(1),s.Rc(" ",e.label," ")}}function ln(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div"),s.Vb(1,"mat-radio-group",6),s.cc("change",(function(t){return s.Cc(e),s.gc(2).handleMultipleChoiceChange(t)})),s.Nc(2,cn,2,2,"mat-radio-button",7),s.Ub(),s.Ub()}if(2&e){const e=s.gc(2);s.Db(2),s.mc("ngForOf",e.question.data.options)}}function pn(e,t){if(1&e&&(s.Vb(0,"div",10),s.Qb(1,"app-view-quiz-object-tree",11),s.Ub()),2&e){const e=s.gc(3);s.Db(1),s.mc("objectIds",e.question.data.correctAnswer)}}function hn(e,t){if(1&e&&(s.Vb(0,"div"),s.Nc(1,pn,2,1,"div",9),s.Ub()),2&e){const e=s.gc(2);s.Db(1),s.mc("ngIf",e.question.data.showAnswerList)}}function gn(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div"),s.Vb(1,"app-view-quiz-label-anatomy",12),s.cc("valueChange",(function(t){return s.Cc(e),s.gc(2).handleLabelAnatomyChanges(t)})),s.Ub(),s.Ub()}if(2&e){const e=s.gc(2);s.Db(1),s.mc("options",e.question.data.options)}}function dn(e,t){if(1&e&&(s.Vb(0,"div",1),s.Vb(1,"div",2),s.Qb(2,"app-content-blocks",3),s.Ub(),s.Vb(3,"div",4),s.Nc(4,ln,3,1,"div",5),s.Nc(5,hn,2,1,"div",5),s.Nc(6,gn,2,1,"div",5),s.Ub(),s.Ub()),2&e){const e=s.gc();s.Db(2),s.mc("contentBlocks",e.question.questionPrompt),s.Db(1),s.mc("ngSwitch",e.question.type),s.Db(1),s.mc("ngSwitchCase",e.QuestionType.MultipleChoice),s.Db(1),s.mc("ngSwitchCase",e.QuestionType.SelectAnatomy),s.Db(1),s.mc("ngSwitchCase",e.QuestionType.LabelAnatomy)}}let un=(()=>{class e{constructor(e,t){this.changeRef=e,this.viewService=t,this.disabled=!1,this.QuestionType=Et.a,this.ngUnsubscribe=new R.a}get question(){return this._question}set question(e){this._question=e,this.initQuestionListeners()}get value(){return this._value}set value(e){this._value=e,this.onChange(e)}handleMultipleChoiceChange(e){this.writeValue(e.value)}handleLabelAnatomyChanges(e){this.writeValue(e)}ngOnInit(){}initQuestionListeners(){switch(this.question.type){case Et.a.SelectAnatomy:this.initSelectAnatomyListeners(),this.viewService.toggleToolbar("tools");break;case Et.a.Instructions:this.initInstructions(),this.viewService.toggleToolbar("none");break;default:this.viewService.toggleToolbar("none")}}initSelectAnatomyListeners(){this.checkedNodesIds$.pipe(Object(K.a)((e,t)=>Object(le.isEqual)(e,t)),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.writeValue(e),this.changeRef.markForCheck()})}initInstructions(){setTimeout(()=>{this.writeValue("-"),this.changeRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onChange(e){}onTouched(){}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}writeValue(e){this.value=e}setDisabledState(e){this.disabled=e}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.i),s.Pb(ve.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-quiz-question"]],inputs:{question:"question",value:"value"},features:[s.Cb([{provide:j.p,useExisting:Object(s.W)(()=>e),multi:!0}])],decls:1,vars:1,consts:[["class","view-quiz-question text-14 mb-8","data-test","question",4,"ngIf"],["data-test","question",1,"view-quiz-question","text-14","mb-8"],["data-test","questionPrompt",1,"view-quiz-question__prompt","mb-4"],[3,"contentBlocks"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"flex","flex-column",3,"change"],["data-test","questionAnswer","class","view-quiz-question__option",3,"value",4,"ngFor","ngForOf"],["data-test","questionAnswer",1,"view-quiz-question__option",3,"value"],["class","ml-3",4,"ngIf"],[1,"ml-3"],[3,"objectIds"],[3,"options","valueChange"]],template:function(e,t){1&e&&s.Nc(0,dn,7,5,"div",0),2&e&&s.mc("ngIf",t.question)},directives:[i.p,ke.a,i.r,i.s,Wt.b,i.o,Wt.a,Zt,rn],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-quiz-question__option{font-size:14px;letter-spacing:.35px;line-height:1.4em;padding:12px 0 12px 12px}.view-quiz-question__option,.view-quiz-question__option>*{white-space:normal!important}.view-quiz-question__option .mat-radio-label{align-items:flex-start!important}.view-quiz-question__option .mat-radio-label-content{padding-left:12px!important}"],encapsulation:2,changeDetection:0}),sn([Object(g.e)($t.a.getCheckedNodeIds),an("design:type",$.a)],e.prototype,"checkedNodesIds$",void 0),sn([Object(g.e)(fe.b.getActiveSubmission),an("design:type",$.a)],e.prototype,"activeSubmission$",void 0),e})();var bn=n("IlST");function xn(e,t){1&e&&s.Qb(0,"app-icon",6)}function fn(e,t){1&e&&s.Qb(0,"app-icon",7)}function mn(e,t){1&e&&(s.Vb(0,"span",8),s.Qb(1,"span",9),s.Ub())}n("vCxQ");const vn=["*"];let wn=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-quiz-answer-option"]],inputs:{correct:"correct"},ngContentSelectors:vn,decls:7,vars:7,consts:[["data-test","answerOptionContainer",1,"option"],[1,"flex","relative",3,"ngSwitch"],["class","option__icon option__icon--correct","style","font-size: 20px","icon","check-circle",4,"ngSwitchCase"],["class","option__icon option__icon--incorrect","style","font-size: 20px","icon","times-circle",4,"ngSwitchCase"],["class","option__icon",4,"ngSwitchDefault"],[1,"pl-2"],["icon","check-circle",1,"option__icon","option__icon--correct",2,"font-size","20px"],["icon","times-circle",1,"option__icon","option__icon--incorrect",2,"font-size","20px"],[1,"option__icon"],[1,"mat-radio-outer-circle"]],template:function(e,t){1&e&&(s.lc(),s.Vb(0,"div",0),s.Vb(1,"div",1),s.Nc(2,xn,1,0,"app-icon",2),s.Nc(3,fn,1,0,"app-icon",3),s.Nc(4,mn,2,0,"span",4),s.Vb(5,"div",5),s.kc(6),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Hb("option--correct",!0===t.correct)("option--incorrect",!1===t.correct),s.Db(1),s.mc("ngSwitch",t.correct),s.Db(1),s.mc("ngSwitchCase",!0),s.Db(1),s.mc("ngSwitchCase",!1))},directives:[i.r,i.s,i.t,Oe.a],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.option[_ngcontent-%COMP%]{padding:12px;border-radius:4px;margin-bottom:8px;color:#131c2a}.option--correct[_ngcontent-%COMP%]{border:1px solid #83e692;background-color:#f0fff0}.option--incorrect[_ngcontent-%COMP%]{border:1px solid #f44336;background-color:#ffe2db}.option__icon[_ngcontent-%COMP%]{position:relative;flex:0 0 20px;justify-content:center}.option__icon--correct[_ngcontent-%COMP%]{color:#83e692}.option__icon--incorrect[_ngcontent-%COMP%]{color:#f44336}"],changeDetection:0}),e})();function yn(e,t){if(1&e&&(s.Vb(0,"div"),s.Vb(1,"app-view-quiz-answer-option",1),s.Vb(2,"div",2),s.Pc(3),s.Ub(),s.Ub(),s.Ub()),2&e){const e=t.$implicit,n=s.gc();s.Db(1),s.mc("correct",n.isOptionAnswerCorrect(n.question,e.value,n.answer)),s.Db(2),s.Rc(" ",e.label," ")}}let _n=(()=>{class e{constructor(){}ngOnInit(){}isOptionAnswerCorrect(e,t,n){const i=Object(At.h)(e,[t]);return t===n[0]||i?i:void 0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-quiz-multiple-choice-answer"]],inputs:{question:"question",answer:"answer",summary:"summary"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"correct"],[1,"text-semibold"]],template:function(e,t){1&e&&s.Nc(0,yn,4,2,"div",0),2&e&&s.mc("ngForOf",t.question.data.options)},directives:[i.o,wn],styles:[""],changeDetection:0}),e})();var Cn=n("EF3F");function On(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",6),s.Vb(1,"button",7),s.cc("click",(function(){s.Cc(e);const t=s.gc();return t.handleSelectedObjectsClick(t.answer)})),s.Pc(2," Highlight My Answer "),s.Ub(),s.Vb(3,"button",8),s.cc("click",(function(){s.Cc(e);const t=s.gc();return t.handleCorrectObjectsClick(t.question.data.correctAnswer)})),s.Pc(4," Highlight Correct Answer "),s.Ub(),s.Ub()}}let Pn=(()=>{class e{constructor(e,t,n){this.graphService=e,this.viewService=t,this.store=n}get isCorrect(){return Object(At.h)(this.question,this.answer)}fadeNonselected(e){const t=this.store.selectSnapshot(Lt.a.getViewGraph),n=this.graphService.getInverseSelection(t,e),i=this.graphService.getNodes(t,n);this.store.dispatch(new Nt.a.UpdateNodesPaint(Cn.b,i.map(e=>e.id)))}handleCorrectObjectsClick(e){this.highlightNodes(e)}handleSelectedObjectsClick(e){this.highlightNodes(e)}highlightNodes(e){const t=e.filter(e=>e&&""!==e);this.resetSelectAndFade(),this.repositionCamera(t),this.fadeNonselected(t)}repositionCamera(e){1===e.length?this.store.dispatch(new q.j(e[0])):this.viewService.resetCamera()}resetSelectAndFade(){this.viewService.clearSelectedNodes(),this.viewService.clearFadedNodes()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(Jt.a),s.Pb(ve.a),s.Pb(g.h))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-quiz-select-anatomy-answer"]],inputs:{question:"question",answer:"answer",summary:"summary"},decls:9,vars:4,consts:[[3,"correct"],["selectAnatomyAnswer",""],[1,"flex","flex-column","text-semibold"],[1,"mt-2","ml-2"],[3,"objectIds"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["buttonType","outline","buttonTheme","light","app-button","","data-test","highlightUserAnswers",1,"w-100","mv-2",3,"click"],["buttonType","outline","buttonTheme","light","app-button","","data-test","highlightCorrectAnswers",1,"w-100","mv-2",3,"click"]],template:function(e,t){if(1&e&&(s.Vb(0,"div"),s.Vb(1,"app-view-quiz-answer-option",0,1),s.Vb(3,"div",2),s.Vb(4,"div"),s.Pc(5),s.Ub(),s.Vb(6,"div",3),s.Qb(7,"app-view-quiz-object-tree",4),s.Ub(),s.Ub(),s.Ub(),s.Nc(8,On,5,0,"div",5),s.Ub()),2&e){const e=s.yc(2);s.Db(1),s.mc("correct",t.isCorrect),s.Db(4),s.Rc("",e.correct?"Correct":"Incorrect","! You selected:"),s.Db(2),s.mc("objectIds",t.answer),s.Db(1),s.mc("ngIf",!t.summary&&!t.isCorrect)}},directives:[wn,Zt,i.p,bn.a],styles:[""],changeDetection:0}),e})();function Mn(e,t){if(1&e&&(s.Vb(0,"div",9),s.Pc(1),s.Ub()),2&e){const e=s.gc().$implicit;s.Db(1),s.Rc(" ",e.label.title," ")}}function kn(e,t){if(1&e&&(s.Vb(0,"div"),s.Pc(1," You selected "),s.Vb(2,"em",9),s.Pc(3),s.Ub(),s.Pc(4,". "),s.Ub(),s.Vb(5,"div",10),s.Pc(6," This is the "),s.Vb(7,"em",9),s.Pc(8),s.Ub(),s.Pc(9,". "),s.Ub()),2&e){const e=s.gc(),t=e.index,n=e.$implicit,i=s.gc();s.Db(3),s.Qc(i.getSelectedUserOption(t).label.title.trim()),s.Db(5),s.Qc(n.label.title.trim())}}function zn(e,t){if(1&e&&(s.Vb(0,"div",1),s.Vb(1,"div",2),s.Qb(2,"app-view-quiz-answer-number",3),s.Ub(),s.Vb(3,"div",4),s.Vb(4,"app-view-quiz-answer-option",5,6),s.Nc(6,Mn,2,1,"div",7),s.Nc(7,kn,10,2,"ng-template",null,8,s.Oc),s.Ub(),s.Ub(),s.Ub()),2&e){const e=t.index,n=s.yc(5),i=s.yc(8),o=s.gc();s.Db(2),s.mc("number",e+1),s.Db(2),s.mc("correct",o.isOptionAnswerCorrect(e)),s.Db(2),s.mc("ngIf",n.correct)("ngIfElse",i)}}let Sn=(()=>{class e{constructor(){}ngOnInit(){}isOptionAnswerCorrect(e){return this.answer[e]===this.question.data.correctAnswer[e]}getSelectedUserOption(e){const t=this.answer[e];return this.question.data.options.find(e=>e.value===t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-quiz-label-anatomy-answer"]],inputs:{question:"question",answer:"answer",summary:"summary"},decls:1,vars:1,consts:[["class","answers",4,"ngFor","ngForOf"],[1,"answers"],[1,"mt-2","mr-2"],[3,"number"],[1,"answers__option"],[3,"correct"],["answerOption",""],["class","text-semibold",4,"ngIf","ngIfElse"],["falseBlock",""],[1,"text-semibold"],[1,"mt-1"]],template:function(e,t){1&e&&s.Nc(0,zn,9,4,"div",0),2&e&&s.mc("ngForOf",t.question.data.options)},directives:[i.o,en,wn,i.p],styles:[".answers[_ngcontent-%COMP%]{display:flex;flex-direction:row}.answers__option[_ngcontent-%COMP%]{flex:1 1 auto}"],changeDetection:0}),e})();function Dn(e,t){if(1&e&&(s.Vb(0,"div",7),s.Pc(1),s.Ub()),2&e){const e=s.gc();s.Db(1),s.Rc("",e.questionNumber,".")}}function jn(e,t){if(1&e&&(s.Vb(0,"div"),s.Qb(1,"app-view-quiz-multiple-choice-answer",8),s.Ub()),2&e){const e=s.gc();s.Db(1),s.mc("question",e.question)("answer",e.answer)("summary",e.summary)}}function Un(e,t){if(1&e&&(s.Vb(0,"div"),s.Qb(1,"app-view-quiz-select-anatomy-answer",8),s.Ub()),2&e){const e=s.gc();s.Db(1),s.mc("question",e.question)("answer",e.answer)("summary",e.summary)}}function In(e,t){if(1&e&&(s.Vb(0,"div"),s.Qb(1,"app-view-quiz-label-anatomy-answer",8),s.Ub()),2&e){const e=s.gc();s.Db(1),s.mc("question",e.question)("answer",e.answer)("summary",e.summary)}}let Tn=(()=>{class e{constructor(e){this.store=e,this.QuestionType=Et.a}ngOnInit(){this.initAnswerConfig()}initAnswerConfig(){const{type:e}=this.question;this.store.dispatch(new Vt.a.SetQuizPickMode(e===Et.a.SelectAnatomy?"none":"single"))}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-quiz-answer"]],inputs:{question:"question",questionNumber:"questionNumber",answer:"answer",summary:"summary"},decls:11,vars:7,consts:[["data-test","answer",1,"answer"],[1,"answer__prompt"],["class","mr-1",4,"ngIf"],[3,"contentBlocks"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"answer__explanation"],[1,"mr-1"],[3,"question","answer","summary"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Nc(2,Dn,2,1,"div",2),s.Vb(3,"div"),s.Qb(4,"app-content-blocks",3),s.Ub(),s.Ub(),s.Vb(5,"div",4),s.Nc(6,jn,2,3,"div",5),s.Nc(7,Un,2,3,"div",5),s.Nc(8,In,2,3,"div",5),s.Ub(),s.Vb(9,"div",6),s.Qb(10,"app-content-blocks",3),s.Ub(),s.Ub()),2&e&&(s.Db(2),s.mc("ngIf",t.questionNumber),s.Db(2),s.mc("contentBlocks",t.question.questionPrompt),s.Db(1),s.mc("ngSwitch",t.question.type),s.Db(1),s.mc("ngSwitchCase",t.QuestionType.MultipleChoice),s.Db(1),s.mc("ngSwitchCase",t.QuestionType.SelectAnatomy),s.Db(1),s.mc("ngSwitchCase",t.QuestionType.LabelAnatomy),s.Db(2),s.mc("contentBlocks",t.question.explanation))},directives:[i.p,ke.a,i.r,i.s,_n,Pn,Sn],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.answer[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.answer__prompt[_ngcontent-%COMP%]{display:flex;padding-bottom:16px}.answer__explanation[_ngcontent-%COMP%]{padding-top:24px}"],changeDetection:0}),e})();var Vn=n("ECVi"),Rn=n("Iab2"),En=n("wOnQ"),Ln=n.n(En),$n=n("f3gM"),Nn=n("nclC");const An=["progressCircle"];let Qn=(()=>{class e{constructor(e,t){this.renderer=e,this.changeRef=t,this._size="medium",this._progress=0,this.strokeWidth=8,this.diameter=120}get size(){return this._size}set size(e){this._size=e,this.updateCircle()}get progress(){return this._progress}set progress(e){this._progress=e,this.updateCircle()}ngOnInit(){}ngAfterViewInit(){this.updateCircle()}updateCircle(){switch(this.size){case"small":this.strokeWidth=4,this.diameter=60;break;case"medium":this.strokeWidth=8,this.diameter=120;break;case"large":this.strokeWidth=16,this.diameter=240}if(this.progressCircleRef){const e=2*this.progressCircleRef.nativeElement.r.baseVal.value*Math.PI,t=e-this.progress/100*e;this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${e} ${e}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",""+t)}this.changeRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.H),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-progress-circle"]],viewQuery:function(e,t){if(1&e&&s.Jc(An,!0),2&e){let e;s.xc(e=s.dc())&&(t.progressCircleRef=e.first)}},inputs:{size:"size",progress:"progress"},decls:9,vars:18,consts:[["role","progressbar","aria-valuemin","0","aria-valuemax","100","data-test","progress",1,"progress"],["stroke","#F9FAFD","fill","transparent",1,"progress__circle"],["stroke","#5BB96F","fill","transparent",1,"progress__circle"],["progressCircle",""],["data-test","progressPercentage",1,"progress__label","text-semibold"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.fc(),s.Vb(1,"svg"),s.Vb(2,"g"),s.Qb(3,"circle",1),s.Ub(),s.Vb(4,"g"),s.Qb(5,"circle",2,3),s.Ub(),s.Ub(),s.ec(),s.Vb(7,"div",4),s.Pc(8),s.Ub(),s.Ub()),2&e&&(s.Hb("progress--small","small"===t.size)("progress--medium","medium"===t.size)("progress--large","large"===t.size),s.Eb("aria-valuenow",t.progress),s.Db(1),s.Eb("width",t.diameter)("height",t.diameter),s.Db(2),s.Eb("stroke-width",t.strokeWidth)("r",t.diameter/2-2*t.strokeWidth)("cx",t.diameter/2)("cy",t.diameter/2),s.Db(2),s.Eb("stroke-width",t.strokeWidth)("r",t.diameter/2-2*t.strokeWidth)("cx",t.diameter/2)("cy",t.diameter/2),s.Db(3),s.Rc("",t.progress,"%"))},styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.progress[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.progress__ring[_ngcontent-%COMP%]{position:absolute;z-index:1}.progress__circle[_ngcontent-%COMP%]{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%}.progress__label[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.progress--small[_ngcontent-%COMP%]   .progress__label[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.progress--medium[_ngcontent-%COMP%]   .progress__label[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.progress--large[_ngcontent-%COMP%]   .progress__label[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}"],changeDetection:0}),e})();var qn=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Fn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Hn=["summary"];function Bn(e,t){if(1&e&&(s.Vb(0,"div",14),s.Vb(1,"div",15),s.Pc(2),s.hc(3,"async"),s.Ub(),s.Vb(4,"div",16),s.Pc(5),s.hc(6,"async"),s.Ub(),s.Ub()),2&e){const e=s.gc(3);s.Db(2),s.Qc(s.ic(3,2,e.userFullName$)),s.Db(3),s.Qc(s.ic(6,4,e.userEmail$))}}function Wn(e,t){if(1&e&&(s.Vb(0,"div",11),s.Nc(1,Bn,7,6,"div",12),s.hc(2,"async"),s.Vb(3,"div",13),s.Pc(4,"Quiz Complete"),s.Ub(),s.Ub()),2&e){const e=s.gc(2);s.Db(1),s.mc("ngIf",s.ic(2,1,e.userProfile$))}}function Jn(e,t){if(1&e&&(s.Vb(0,"div",19),s.Qb(1,"app-view-quiz-answer",20),s.Ub()),2&e){const e=t.$implicit,n=t.index,i=s.gc(3);s.Db(1),s.mc("question",e)("questionNumber",n+1)("answer",null==i.quizScore?null:i.quizScore.questionAnswers[e.id])("summary",!0)}}function Gn(e,t){if(1&e&&(s.Vb(0,"div",17),s.Nc(1,Jn,2,4,"div",18),s.Ub()),2&e){const e=s.gc(2);s.Db(1),s.mc("ngForOf",e.questions)}}function Kn(e,t){if(1&e&&(s.Tb(0),s.Vb(1,"div",3,4),s.Nc(3,Wn,5,3,"div",5),s.Vb(4,"div",6),s.Qb(5,"app-progress-circle",7),s.Vb(6,"div",8),s.Pc(7,"Quiz Complete"),s.Ub(),s.Vb(8,"div",9),s.Pc(9),s.Ub(),s.Ub(),s.Nc(10,Gn,2,1,"div",10),s.Ub(),s.Sb()),2&e){const e=s.gc();s.Db(3),s.mc("ngIf",e.downloading),s.Db(2),s.mc("progress",null==e.quizScore?null:e.quizScore.score),s.Db(4),s.Sc(" You answered ",null==e.quizScore?null:e.quizScore.correctTotal," of ",null==e.quizScore?null:e.quizScore.scorableTotal," questions correctly. "),s.Db(1),s.mc("ngIf",e.showExplanationEnabled&&e.showExplanation)}}function Yn(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",26),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleToggleSummaryClick()})),s.Pc(1),s.Ub()}if(2&e){const e=s.gc(2);s.Db(1),s.Rc(" ",e.showExplanation?"Hide Summary":"Show Summary"," ")}}function Zn(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",27),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleDownloadSummaryClick()})),s.Qb(1,"app-icon",28),s.Pc(2," Download Results "),s.Ub()}}function Xn(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",29),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleRestartClick()})),s.Pc(1," Take Again "),s.Ub()}}function ei(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",30),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleExitClick()})),s.Pc(1," Back to View "),s.Ub()}}function ti(e,t){if(1&e&&(s.Vb(0,"div",21),s.Nc(1,Yn,2,1,"button",22),s.Nc(2,Zn,3,0,"button",23),s.Nc(3,Xn,2,0,"button",24),s.hc(4,"async"),s.Nc(5,ei,2,0,"button",25),s.hc(6,"async"),s.Ub()),2&e){const e=s.gc();s.Db(1),s.mc("ngIf",e.showSummaryEnabled&&e.showExplanationEnabled),s.Db(1),s.mc("ngIf",e.showSummaryEnabled&&e.showExplanationEnabled),s.Db(1),s.mc("ngIf",s.ic(4,4,e.enableQuizRetake$)),s.Db(2),s.mc("ngIf",!s.ic(6,6,e.quizLocked$))}}const ni=function(e){return{"review--downloading":e}};let ii=(()=>{class e{constructor(e,t,n,i){this.changeRef=e,this.quizService=t,this.store=n,this.clipboardService=i,this.userFullName="",this.userEmail="",this.questions=[],this.showSummaryEnabled=!1,this.showExplanationEnabled=!1,this.showExplanation=!1,this.downloading=!1,this.ngUnsubscribe=new R.a}ngOnInit(){this.initReviewListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initReviewListeners(){Object(L.b)([this.questions$,this.submissions$]).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.questions=e,this.quizScore=Object(At.i)(e,t),this.changeRef.markForCheck()}),this.quizSettings$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(({showSummary:e,showExplanation:t})=>{this.showSummaryEnabled=!1!==e,this.showExplanationEnabled=!1!==t,this.changeRef.markForCheck()})}handleToggleSummaryClick(){this.showExplanation=!this.showExplanation,this.changeRef.markForCheck()}handleDownloadSummaryClick(){this.downloadResults()}downloadResults(){const e=this.showExplanation;this.store.dispatch(new Y.a.ShowScrim(!0,"Downloading")),this.showExplanation=!0,this.changeRef.detectChanges(),this.downloading=!0,this.changeRef.detectChanges(),Ln()(this.summary.nativeElement,{onclone:e=>{e.querySelector(".review").classList.add("review--download")}}).then(t=>{const n=this.store.selectSnapshot(qe.a.getStory).displayName.replace(/\ /g,"_")||"anatomy",i=t.toDataURL("image/png");!0===ue.a.native||ue.a.platform===$n.a.SDK?this.clipboardService.copyToClipboard(i,"image").toPromise():Object(Rn.saveAs)(i,n+"_quiz_results.png"),this.showExplanation=e,this.downloading=!1,this.store.dispatch(new Y.a.HideScrim),this.changeRef.markForCheck()})}handleRestartClick(){this.quizService.resetQuiz(),this.quizService.startQuiz()}handleExitClick(){this.quizService.exitQuiz()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.i),s.Pb(we.a),s.Pb(g.h),s.Pb(Nn.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-quiz-review"]],viewQuery:function(e,t){if(1&e&&s.Vc(Hn,!0),2&e){let e;s.xc(e=s.dc())&&(t.summary=e.first)}},decls:3,vars:5,consts:[["data-test","quizReview",1,"review",3,"ngClass"],[4,"ngIf"],["class","review__actions",4,"ngIf"],["data-test","quizDownload",1,"review__container"],["summary",""],["class","pv-4",4,"ngIf"],["data-test","quizSummary",1,"text-center"],["size","medium",3,"progress"],["data-html2canvas-ignore","true",1,"mt-8","text-18","text-semibold"],[1,"mv-4","text-14","text-medium"],["class","review__summary mb-4","data-test","quizExplanation",4,"ngIf"],[1,"pv-4"],["class","pb-4 pr-4",4,"ngIf"],[1,"text-18","text-semibold","text-center"],[1,"pb-4","pr-4"],[1,"text-right","text-semibold","text-14"],[1,"text-right","text-14"],["data-test","quizExplanation",1,"review__summary","mb-4"],["class","mv-6",4,"ngFor","ngForOf"],[1,"mv-6"],[3,"question","questionNumber","answer","summary"],[1,"review__actions"],["class","w-100","app-button","","buttonType","outline","buttonTheme","light","data-test","quizToggleSummaryButton",3,"click",4,"ngIf"],["class","w-100 mt-3","app-button","","buttonType","outline","buttonTheme","light","data-test","quizDownloadSummaryButton",3,"click",4,"ngIf"],["class","mt-8 w-100","app-button","","buttonType","info","buttonTheme","light","data-test","quizTakeAgainButton",3,"click",4,"ngIf"],["class","mt-3 w-100","app-button","","buttonType","info","buttonTheme","light","data-test","quizExitButton",3,"click",4,"ngIf"],["app-button","","buttonType","outline","buttonTheme","light","data-test","quizToggleSummaryButton",1,"w-100",3,"click"],["app-button","","buttonType","outline","buttonTheme","light","data-test","quizDownloadSummaryButton",1,"w-100","mt-3",3,"click"],["icon","download"],["app-button","","buttonType","info","buttonTheme","light","data-test","quizTakeAgainButton",1,"mt-8","w-100",3,"click"],["app-button","","buttonType","info","buttonTheme","light","data-test","quizExitButton",1,"mt-3","w-100",3,"click"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Nc(1,Kn,11,5,"ng-container",1),s.Nc(2,ti,7,8,"div",2),s.Ub()),2&e&&(s.mc("ngClass",s.pc(3,ni,t.downloading)),s.Db(1),s.mc("ngIf",t.showSummaryEnabled),s.Db(1),s.mc("ngIf",!t.downloading))},directives:[i.m,i.p,Qn,i.o,Tn,bn.a,Oe.a],pipes:[i.b],styles:[".review[_ngcontent-%COMP%]{position:relative}.review--downloading[_ngcontent-%COMP%]   .review__download-scrim[_ngcontent-%COMP%]{display:flex}.review--download[_ngcontent-%COMP%]{width:595px}.review--download[_ngcontent-%COMP%], .review--download[_ngcontent-%COMP%]   .review__summary[_ngcontent-%COMP%]{background-color:#fff}.review__summary[_ngcontent-%COMP%]{background-color:#f9fafd;padding:4px 12px}"],changeDetection:0}),qn([Object(g.e)(fe.b.getAllQuestions),Fn("design:type",$.a)],e.prototype,"questions$",void 0),qn([Object(g.e)(fe.b.getAllSubmissions),Fn("design:type",$.a)],e.prototype,"submissions$",void 0),qn([Object(g.e)(fe.b.getQuizSettings),Fn("design:type",$.a)],e.prototype,"quizSettings$",void 0),qn([Object(g.e)(fe.b.getQuizModeLocked),Fn("design:type",$.a)],e.prototype,"quizLocked$",void 0),qn([Object(g.e)(fe.b.getEnableQuizRetake),Fn("design:type",$.a)],e.prototype,"enableQuizRetake$",void 0),qn([Object(g.e)(Vn.a.getUserProfile),Fn("design:type",$.a)],e.prototype,"userProfile$",void 0),qn([Object(g.e)(Vn.a.getUserFullName),Fn("design:type",$.a)],e.prototype,"userFullName$",void 0),qn([Object(g.e)(Vn.a.getUserEmail),Fn("design:type",$.a)],e.prototype,"userEmail$",void 0),e})();var oi=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},ri=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function si(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",10),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleExitClick()})),s.Vb(1,"span",11),s.Pc(2,"Exit Quiz"),s.Ub(),s.Ub()}}function ai(e,t){if(1&e&&(s.Qb(0,"app-view-quiz-progress",12),s.hc(1,"async"),s.hc(2,"async")),2&e){const e=s.gc(2);s.mc("index",s.ic(1,2,e.questionIndex$))("total",s.ic(2,4,e.questionTotal$))}}function ci(e,t){if(1&e&&(s.Vb(0,"div",5),s.Vb(1,"div",6),s.Vb(2,"h1",7),s.Pc(3,"Quiz"),s.Ub(),s.Nc(4,si,3,0,"button",8),s.hc(5,"async"),s.Ub(),s.Nc(6,ai,3,6,"app-view-quiz-progress",9),s.hc(7,"async"),s.hc(8,"async"),s.Ub()),2&e){const e=s.gc();let t=null;s.Db(4),s.mc("ngIf",!s.ic(5,2,e.quizLocked$)),s.Db(2),s.mc("ngIf",(null==(t=s.ic(7,4,e.quizSettings$))?null:t.showProgress)&&s.ic(8,6,e.lifecycle$)!==e.Lifecycle.Review)}}function li(e,t){if(1&e&&(s.Qb(0,"app-view-quiz-question",16),s.hc(1,"async")),2&e){const e=s.gc(2);s.mc("question",s.ic(1,1,e.question$))}}function pi(e,t){if(1&e&&(s.Vb(0,"div"),s.Pc(1),s.hc(2,"async"),s.Ub()),2&e){const e=s.gc(3);let t=null;s.Db(1),s.Rc(" ",(null==(t=s.ic(2,1,e.question$))?null:t.nextLabel)||e.defaultNextButtonNext," ")}}function hi(e,t){1&e&&(s.Vb(0,"div"),s.Pc(1,"Submit"),s.Ub())}function gi(e,t){if(1&e&&(s.Vb(0,"button",17),s.Vb(1,"div",18),s.hc(2,"async"),s.Nc(3,pi,3,3,"div",19),s.Nc(4,hi,2,0,"div",20),s.Ub(),s.Ub()),2&e){const e=s.gc(2);let t=null;s.mc("disabled",!e.form.valid),s.Db(1),s.mc("ngSwitch",null==(t=s.ic(2,3,e.question$))?null:t.type),s.Db(2),s.mc("ngSwitchCase",e.quizQuestionType.Instructions)}}function di(e,t){if(1&e){const e=s.Wb();s.Vb(0,"form",13),s.cc("submit",(function(){return s.Cc(e),s.gc().handleSubmit()})),s.Nc(1,li,2,3,"app-view-quiz-question",14),s.hc(2,"async"),s.Nc(3,gi,5,5,"button",15),s.hc(4,"async"),s.hc(5,"async"),s.Ub()}if(2&e){const e=s.gc();let t=null;s.mc("formGroup",e.form),s.Db(1),s.mc("ngIf",s.ic(2,3,e.question$)),s.Db(2),s.mc("ngIf",(null==(t=s.ic(4,5,e.quizSettings$))?null:t.showSubmit)&&s.ic(5,7,e.lifecycle$)===e.Lifecycle.Question)}}function ui(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",24),s.cc("click",(function(){return s.Cc(e),s.gc(2).nextQuestion()})),s.Pc(1),s.hc(2,"async"),s.Ub()}if(2&e){const e=s.gc(2);let t=null;s.Db(1),s.Rc(" ",(null==(t=s.ic(2,1,e.question$))?null:t.nextLabel)||e.defaultNextButtonNext," ")}}function bi(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",26),s.cc("click",(function(){return s.Cc(e),s.gc(3).handleViewSummaryClick()})),s.Pc(1," See Results "),s.Ub()}}function xi(e,t){if(1&e&&(s.Tb(0),s.Nc(1,bi,2,0,"button",25),s.hc(2,"async"),s.Sb()),2&e){const e=s.gc(2);s.Db(1),s.mc("ngIf",s.ic(2,1,e.quizReviewEnabled$))}}function fi(e,t){if(1&e&&(s.Tb(0),s.Vb(1,"div",21),s.Qb(2,"app-view-quiz-answer",22),s.hc(3,"async"),s.hc(4,"async"),s.Ub(),s.Tb(5,18),s.hc(6,"async"),s.Nc(7,ui,3,3,"button",23),s.Nc(8,xi,3,3,"ng-container",20),s.Sb(),s.Sb()),2&e){const e=s.gc();s.Db(2),s.mc("question",s.ic(3,5,e.question$))("answer",s.ic(4,7,e.submission$).answer)("summary",!1),s.Db(3),s.mc("ngSwitch",s.ic(6,9,e.hasQuestionsRemaining$)),s.Db(2),s.mc("ngSwitchCase",!0)}}function mi(e,t){1&e&&(s.Tb(0),s.Qb(1,"app-view-quiz-review"),s.Sb())}function vi(e,t){if(1&e&&(s.Vb(0,"div",27),s.Pc(1),s.hc(2,"async"),s.Ub()),2&e){const e=s.gc();let t=null;s.Db(1),s.Rc(" ",1===(null==(t=s.ic(2,1,e.questions$))?null:t.length)?"Answer":"Answers"," submitted ")}}let wi=(()=>{class e{constructor(e,t,n,i,o,r,s){this.store=e,this.actions=t,this.formBuilder=n,this.viewService=i,this.engineService=o,this.quizService=r,this.pendoService=s,this.defaultNextButtonNext=At.f,this.showHeader=!0,this.Lifecycle=Qt.a,this.quizQuestionType=Et.a,this.sceneConfigStash={},this.ngUnsubscribe=new R.a}ngOnInit(){if(!this.store.selectSnapshot(fe.b.getActiveQuestionId)){const e=this.store.selectSnapshot(fe.b).questions[0].id;this.store.dispatch(new Vt.a.SetActiveQuestion(e))}this.store.dispatch(new Vt.a.SetQuizLifecycle(Qt.a.Question)),this.form=this.formBuilder.group({question:new j.g("",this.getQuizValidation())}),this.initQuestionObserver(),this.initAnswerObserver(),this.initEngineInteractionObserver(),this.engineService.fireEvent(It.a.QuizEntered,!0)}ngOnDestroy(){Object.entries(this.sceneConfigStash).forEach(([e,t])=>{this.store.dispatch(new Rt.s(e,t.background))}),this.engineService.fireEvent(It.a.QuizExited,!0),this.viewService.selectTool(X.a.Select),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}get answer(){const e=this.form.get("question").value;return Array.isArray(e)?e:[e]}initQuestionObserver(){this.question$.pipe(Object(B.a)(this.ngUnsubscribe),Object(F.a)(e=>void 0!==e)).subscribe(e=>{const t=this.store.selectSnapshot(ee.a.getSelectedChapterId);e.chapterId!==t&&this.store.dispatch(new Rt.q(e.chapterId)),this.form.reset(),this.setSceneConfig(e),this.store.dispatch(new Vt.a.SetActiveSubmission(void 0)),e.type===Et.a.Instructions&&this.form.get("question").setValue("-"),this.engineService.fireEvent(It.a.QuizQuestionLoaded,e)})}initAnswerObserver(){this.form.get("question").valueChanges.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.store.selectSnapshot(fe.b.getActiveQuestion),n=this.store.selectSnapshot(fe.b.getActiveSubmission);void 0!==t&&(this.store.selectSnapshot(fe.b.getAllSubmissions).some(e=>e.questionId===t.id)||(n&&Object(le.isEqual)(n.answer,e)||this.store.dispatch(new Vt.a.SetActiveSubmission({questionId:t.id,answer:e})),Object(le.isNil)(e)||this.engineService.fireEvent(It.a.QuizAnswerSelected,{questionId:t.id,answerId:e})))})}initEngineInteractionObserver(){this.viewService.selectTool(X.a.Quiz),this.store.dispatch(new Vt.a.SetQuizPickMode("single")),this.actions.pipe(Object(g.l)(q.d),Object(F.a)(e=>{const{node:t,event:n}=e;return!Object(le.isNil)(t)&&this.store.selectSnapshot(Lt.a.getActiveTool)===X.a.Quiz&&!n.srcEvent.shiftKey})).pipe(Object(F.a)(()=>"none"!==this.store.selectSnapshot(fe.b.getPickMode)),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{"single"===this.store.selectSnapshot(fe.b.getPickMode)&&this.viewService.clearSelectedNodes();const t=Object(le.get)(e,"hit.objectId");if(t){const e=this.store.selectSnapshot($t.a.getCheckedNodeIds).includes(t);this.store.dispatch(new Nt.a.UpdateNodesChecked(!e,[t]))}}),this.question$.pipe(Object(K.a)((e,t)=>Object(le.get)(e,"id")===Object(le.get)(t,"id")),Object(F.a)(e=>!Object(le.isNil)(e))).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{const{type:t,data:n}=e;this.store.dispatch(new Vt.a.SetQuizPickMode(t===Et.a.SelectAnatomy&&n.correctAnswer.length>1&&"any"!==n.selectType?"multi":"single"))})}handleSubmit(){const e=this.store.selectSnapshot(fe.b.getActiveQuestion);(this.form.valid||e.type===Et.a.Instructions)&&this.quizService.submitQuestion(e.id,this.answer)}handleViewSummaryClick(){this.viewSummary()}handleExitClick(){this.quizService.exitQuiz()}nextQuestion(){this.quizService.nextQuestion()}viewSummary(){this.store.dispatch(new Vt.a.SetQuizLifecycle(Qt.a.Review)),this.engineService.fireEvent(It.a.QuizCompleted,!0)}setSceneConfig(e){const{camera:t,background:n}=(null==e?void 0:e.sceneConfig)||{},i=this.store.selectSnapshot(ee.a.getChapter(e.chapterId));t&&(this.setStash(e.chapterId,{camera:i.camera.location}),setTimeout(()=>{this.store.dispatch(new Tt.l(t.location,!0,1))})),n&&(this.setStash(e.chapterId,{background:i.background}),this.store.dispatch(new Rt.s(e.chapterId,n)))}setStash(e,t){this.sceneConfigStash[e]=Object.assign(Object.assign({},this.sceneConfigStash[e]||{}),t)}getQuizValidation(){return e=>{const t=e.value,n=Array.isArray(t)?t:[t],i=this.store.selectSnapshot(fe.b.getActiveQuestion),o=Object(At.g)(i),r=n.some(e=>Object(le.isNil)(e)||""===e);return o&&r?{invalidValues:r}:null}}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(g.b),s.Pb(j.f),s.Pb(ve.a),s.Pb(qt.a),s.Pb(we.a),s.Pb(Ft.b))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-quiz"]],inputs:{showHeader:"showHeader"},decls:13,vars:19,consts:[["data-test","quiz",1,"view-quiz"],["class","pb-2 mb-4 view-quiz__header",4,"ngIf"],[3,"formGroup","submit",4,"ngIf"],[4,"ngIf"],["class","text-16 text-bold text-center",4,"ngIf"],[1,"pb-2","mb-4","view-quiz__header"],[1,"flex"],[1,"text-20","text-semibold","flex-grow"],["app-pin-button","","icon","times","size","small","data-test","quizHeaderExit",3,"click",4,"ngIf"],["class","mt-3",3,"index","total",4,"ngIf"],["app-pin-button","","icon","times","size","small","data-test","quizHeaderExit",3,"click"],[1,"visually-hidden"],[1,"mt-3",3,"index","total"],[3,"formGroup","submit"],["formControlName","question",3,"question",4,"ngIf"],["app-button","","class","w-100","buttonType","info","data-test","questionSubmit",3,"disabled",4,"ngIf"],["formControlName","question",3,"question"],["app-button","","buttonType","info","data-test","questionSubmit",1,"w-100",3,"disabled"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"mb-8"],[3,"question","answer","summary"],["app-button","","buttonType","info","class","w-100","data-test","questionNextButton",3,"click",4,"ngSwitchCase"],["app-button","","buttonType","info","data-test","questionNextButton",1,"w-100",3,"click"],["data-test","quizViewSummaryButton","app-button","","buttonType","info","class","w-100",3,"click",4,"ngIf"],["data-test","quizViewSummaryButton","app-button","","buttonType","info",1,"w-100",3,"click"],[1,"text-16","text-bold","text-center"]],template:function(e,t){if(1&e&&(s.Vb(0,"div",0),s.Nc(1,ci,9,8,"div",1),s.Nc(2,di,6,9,"form",2),s.hc(3,"async"),s.Nc(4,fi,9,11,"ng-container",3),s.hc(5,"async"),s.Nc(6,mi,2,0,"ng-container",3),s.hc(7,"async"),s.hc(8,"async"),s.Nc(9,vi,3,3,"div",4),s.hc(10,"async"),s.hc(11,"async"),s.hc(12,"async"),s.Ub()),2&e){let e=null;s.Db(1),s.mc("ngIf",t.showHeader),s.Db(1),s.mc("ngIf",s.ic(3,5,t.lifecycle$)===t.Lifecycle.Question),s.Db(2),s.mc("ngIf",s.ic(5,7,t.lifecycle$)===t.Lifecycle.Explanation),s.Db(2),s.mc("ngIf",s.ic(7,9,t.lifecycle$)===t.Lifecycle.Review&&s.ic(8,11,t.quizReviewEnabled$)),s.Db(3),s.mc("ngIf",!(s.ic(10,13,t.hasQuestionsRemaining$)||s.ic(11,15,t.quizReviewEnabled$)||null!=(e=s.ic(12,17,t.quizSettings$))&&e.showExplanation))}},directives:[i.p,Ce.a,Bt,j.E,j.s,j.j,un,j.r,j.i,bn.a,i.r,i.s,i.t,Tn,ii],pipes:[i.b],styles:[".view-quiz__header[_ngcontent-%COMP%]{border-bottom:1px solid #eaeff5}"],changeDetection:0}),oi([Object(g.e)(fe.b.getQuizReviewEnabled),ri("design:type",$.a)],e.prototype,"quizReviewEnabled$",void 0),oi([Object(g.e)(fe.b.getActiveQuestion),ri("design:type",$.a)],e.prototype,"question$",void 0),oi([Object(g.e)(fe.b.getAllQuestions),ri("design:type",$.a)],e.prototype,"questions$",void 0),oi([Object(g.e)(fe.b.getActiveQuestionIndex),ri("design:type",$.a)],e.prototype,"questionIndex$",void 0),oi([Object(g.e)(fe.b.getQuestionTotal),ri("design:type",$.a)],e.prototype,"questionTotal$",void 0),oi([Object(g.e)(fe.b.getCorrectAnswerTotal),ri("design:type",$.a)],e.prototype,"correctAnswerTotal$",void 0),oi([Object(g.e)(fe.b.hasQuestionRemaining),ri("design:type",$.a)],e.prototype,"hasQuestionsRemaining$",void 0),oi([Object(g.e)(fe.b.getQuizSettings),ri("design:type",$.a)],e.prototype,"quizSettings$",void 0),oi([Object(g.e)(fe.b.getLifecycle),ri("design:type",$.a)],e.prototype,"lifecycle$",void 0),oi([Object(g.e)(fe.b.getQuizModeLocked),ri("design:type",$.a)],e.prototype,"quizLocked$",void 0),oi([Object(g.e)(fe.b.getActiveSubmission),ri("design:type",$.a)],e.prototype,"submission$",void 0),e})();var yi=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},_i=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Ci=["viewDrawer"],Oi=["viewDrawerOuter"];function Pi(e,t){if(1&e&&(s.Vb(0,"div",7),s.Qb(1,"app-spinner",8),s.hc(2,"async"),s.Ub()),2&e){const e=s.gc();let t=null;s.Db(1),s.mc("label",null==(t=s.ic(2,1,e.scrim$))?null:t.label)}}function Mi(e,t){1&e&&s.Qb(0,"app-icon",21)}function ki(e,t){1&e&&s.Qb(0,"app-icon",22)}function zi(e,t){if(1&e&&(s.Vb(0,"div",23),s.Qb(1,"app-content-blocks",24),s.hc(2,"async"),s.Ub()),2&e){const e=s.gc(2);let t=null;s.Db(1),s.mc("contentBlocks",null==(t=s.ic(2,2,e.selectedLabel$))?null:t.contentBlocks)("layout","compact")}}function Si(e,t){if(1&e){const e=s.Wb();s.Tb(0),s.Vb(1,"div",9),s.Vb(2,"div",10),s.Vb(3,"button",11),s.cc("click",(function(){return s.Cc(e),s.gc().handleLabelBack()})),s.Qb(4,"app-icon",12),s.Ub(),s.Ub(),s.Vb(5,"div",13),s.Qb(6,"app-html",14),s.hc(7,"async"),s.Ub(),s.Vb(8,"div",15),s.Vb(9,"button",11),s.cc("click",(function(){return s.Cc(e),s.gc().handleToggleClick()})),s.Nc(10,Mi,1,0,"app-icon",16),s.Nc(11,ki,1,0,"app-icon",17),s.Ub(),s.Ub(),s.Ub(),s.Nc(12,zi,3,4,"div",18),s.hc(13,"async"),s.Vb(14,"div",19),s.Qb(15,"app-html",20),s.hc(16,"async"),s.Ub(),s.Sb()}if(2&e){const e=s.gc();let t=null,n=null,i=null;s.Db(6),s.mc("markdownText",null==(t=s.ic(7,7,e.selectedLabel$))?null:t.title),s.Db(3),s.Eb("aria-expanded",e.open)("aria-label",e.open?"Close Info Panel":"Open Info Panel"),s.Db(1),s.mc("ngIf",!e.open),s.Db(1),s.mc("ngIf",e.open),s.Db(1),s.mc("ngIf",null==(n=s.ic(13,9,e.selectedLabel$))?null:n.contentBlocks),s.Db(3),s.mc("markdownText",null==(i=s.ic(16,11,e.selectedLabel$))?null:i.description)}}function Di(e,t){1&e&&(s.Tb(0),s.Qb(1,"app-view-title",29),s.Sb()),2&e&&(s.Db(1),s.mc("menuEnabled",!1))}function ji(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",35),s.cc("click",(function(){return s.Cc(e),s.gc(3).handleExitQuiz()})),s.Qb(1,"app-icon",36),s.Ub()}}function Ui(e,t){if(1&e&&(s.Vb(0,"span",37),s.Vb(1,"span",38),s.Pc(2),s.hc(3,"async"),s.Ub(),s.Pc(4),s.hc(5,"async"),s.Ub()),2&e){const e=s.gc(3);s.Db(2),s.Rc("Question ",s.ic(3,2,e.activeQuestionIndex$)+1,""),s.Db(2),s.Rc(" of ",s.ic(5,4,e.questionTotal$)," ")}}function Ii(e,t){if(1&e&&(s.Tb(0),s.Vb(1,"div",30),s.Nc(2,ji,2,0,"button",31),s.hc(3,"async"),s.Ub(),s.Vb(4,"div",13),s.Vb(5,"div",32),s.Vb(6,"span",33),s.Pc(7,"Quiz"),s.Ub(),s.Nc(8,Ui,6,6,"span",34),s.hc(9,"async"),s.hc(10,"async"),s.Ub(),s.Ub(),s.Sb()),2&e){const e=s.gc(2);let t=null;s.Db(2),s.mc("ngIf",!s.ic(3,2,e.quizLocked$)),s.Db(6),s.mc("ngIf",(null==(t=s.ic(9,4,e.quizSettings$))?null:t.showProgress)&&s.ic(10,6,e.questionRemaining$)>0)}}function Ti(e,t){1&e&&s.Qb(0,"app-icon",21)}function Vi(e,t){1&e&&s.Qb(0,"app-icon",22)}function Ri(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",39),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleToggleClick()})),s.Nc(1,Ti,1,0,"app-icon",16),s.Nc(2,Vi,1,0,"app-icon",17),s.Ub()}if(2&e){const e=s.gc(2);s.Eb("aria-expanded",e.open)("aria-label",e.open?"Close Info Panel":"Open Info Panel"),s.Db(1),s.mc("ngIf",!e.open),s.Db(1),s.mc("ngIf",e.open)}}function Ei(e,t){1&e&&s.Qb(0,"app-view-content-mode",41)}function Li(e,t){if(1&e&&(s.Tb(0),s.Nc(1,Ei,1,0,"app-view-content-mode",40),s.Sb()),2&e){const e=s.gc(2);s.Db(1),s.mc("ngIf",e.expandable)}}function $i(e,t){1&e&&s.Qb(0,"app-view-quiz",42),2&e&&s.mc("showHeader",!1)}function Ni(e,t){if(1&e&&(s.Tb(0),s.Vb(1,"article",9),s.Nc(2,Di,2,1,"ng-container",25),s.hc(3,"async"),s.Nc(4,Ii,11,8,"ng-container",25),s.hc(5,"async"),s.Vb(6,"div",26),s.Nc(7,Ri,3,4,"button",27),s.Ub(),s.Ub(),s.Vb(8,"div",19),s.Nc(9,Li,2,1,"ng-container",25),s.hc(10,"async"),s.Nc(11,$i,1,1,"app-view-quiz",28),s.hc(12,"async"),s.Ub(),s.Sb()),2&e){const e=s.gc();s.Db(2),s.mc("ngIf",!s.ic(3,5,e.quizModeActive$)),s.Db(2),s.mc("ngIf",s.ic(5,7,e.quizModeActive$)),s.Db(3),s.mc("ngIf",e.expandable),s.Db(2),s.mc("ngIf",!s.ic(10,9,e.quizModeActive$)),s.Db(2),s.mc("ngIf",s.ic(12,11,e.quizModeActive$))}}const Ai=function(e,t,n,i){return{"view-drawer--closed":e,"view-drawer--active":t,"view-drawer--scrollable":n,"view-drawer--fixed":i}};let Qi=(()=>{class e{constructor(e,t,n,i,o,r){this.renderer=e,this.changeDetectorRef=t,this.viewService=n,this.quizService=i,this.store=o,this.layoutService=r,this.offsetYChange=new s.p,this.breakpoints={minimumDrawer:{velocity:1/0,point:0},halfDrawer:{velocity:1,point:0}},this.ngUnsubscribe=new R.a,this.viewMode=te.a,this.viewToolsMode=ce,this.mode=te.a.Content,this.open=!1}get expandable(){return"full"===this.layoutService.getVisibleContent()||this.mode===te.a.LabelInfo||this.mode===te.a.NodeInfo||this.open}ngOnInit(){this.initWindowSizeObserver(),this.initLayoutObserver(),this.initQuizObserver()}ngAfterViewInit(){this.refresh(this.store.selectSnapshot(d.a.getUI).drawer.isExpandedInitially)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initWindowSizeObserver(){Object(he.a)(Object(E.a)(window,"resize"),Object(E.a)(window,"orientationchange")).pipe(Object(ge.a)(0),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.refresh(!1)})}initLayoutObserver(){this.layout$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.updateMode(e)})}initQuizObserver(){const e=this.selectedChapterReady$.pipe(Object(G.a)(e=>e&&e.model),Object(F.a)(e=>e),Object(W.a)(300));Object(L.b)([e,this.quizModeActive$]).pipe(Object(F.a)(([e,t])=>e&&t),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{setTimeout(()=>{this.toggleDrawer(!0),this.changeDetectorRef.markForCheck()})})}updateViewHeight(){const e=ue.a.application!==de.a.Viewer,t=this.store.selectSnapshot(be.a.getSiteHeader),n=Object(me.a)(t,e);this.viewDrawer.nativeElement.style.setProperty("--vh",n+"px")}updateStops(){const e=window.innerHeight,t=this.store.selectSnapshot(be.a.getSiteHeader)===xe.a.Hide?0:56;this.breakpoints.minimumDrawer.point=-64,this.breakpoints.halfDrawer.point=Math.floor(-.5*(e-t))}updateMode(e){this.mode=this.viewService.inferDrawerMode(e),this.changeDetectorRef.markForCheck()}resetDrawerPosition(e){setTimeout(()=>{this.slideDrawerToPoint(e?this.breakpoints.halfDrawer.point:this.breakpoints.minimumDrawer.point),this.open=e,this.changeDetectorRef.markForCheck()})}refresh(e){setTimeout(()=>{this.updateViewHeight(),this.updateStops(),this.resetDrawerPosition(e)})}handleToggleClick(){this.expandable&&this.toggleDrawer()}handleDrawerKeydown(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||e.stopPropagation()}handleLabelBack(){this.viewService.clearSelectedLabel()}toggleDrawer(e){null==e&&(e=!this.open),this.slideDrawerToPoint((e?this.breakpoints.halfDrawer:this.breakpoints.minimumDrawer).point),this.open=e}handleExitQuiz(){this.quizService.exitQuiz()}slideDrawerToPoint(e){this.renderer.setStyle(this.viewDrawer.nativeElement,"transform",`translate3d(0, ${e}px, 0)`),this.offsetYChange.emit(e)}getDrawerY(){if(this.viewDrawer){const e=this.viewService.getComputedTransform(this.viewDrawer.nativeElement);return e?e.y:null}return null}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.H),s.Pb(s.i),s.Pb(ve.a),s.Pb(we.a),s.Pb(g.h),s.Pb(ye.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-drawer"]],viewQuery:function(e,t){if(1&e&&(s.Vc(Ci,!0),s.Vc(Oi,!0)),2&e){let e;s.xc(e=s.dc())&&(t.viewDrawer=e.first),s.xc(e=s.dc())&&(t.viewDrawerOuter=e.first)}},inputs:{expandable:"expandable"},outputs:{offsetYChange:"offsetYChange"},decls:9,vars:13,consts:[[1,"view-drawer",3,"ngClass"],["viewDrawer",""],["class","view-drawer__scrim",4,"ngIf"],["role","region","aria-label","Chapter Description",1,"view-drawer__outer",3,"keydown"],["viewDrawerOuter",""],[1,"view-drawer__inner",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"view-drawer__scrim"],["size","large",3,"label"],[1,"view-drawer__header",2,"height","64px"],[1,"view-drawer__button","view-drawer__button--left"],["app-pin-button","","buttonType","outline",3,"click"],["icon","arrow-left"],[1,"view-drawer__title"],[1,"text-semibold","text-14",3,"markdownText"],[1,"view-drawer__button","view-drawer__button--right"],["icon","caret-up",4,"ngIf"],["icon","caret-down",4,"ngIf"],["class","mv-1","appEventFence","",4,"ngIf"],[1,"view-drawer__content"],[1,"text-14",3,"markdownText"],["icon","caret-up"],["icon","caret-down"],["appEventFence","",1,"mv-1"],[3,"contentBlocks","layout"],[4,"ngIf"],["appEventFence","",1,"view-drawer__button","view-drawer__button--right"],["type","button","app-pin-button","","buttonType","outline",3,"click",4,"ngIf"],[3,"showHeader",4,"ngIf"],["alignTitle","center","size","medium",1,"view-drawer__title",3,"menuEnabled"],["appEventFence","",1,"view-drawer__button","view-drawer__button--left"],["app-pin-button","","buttonType","outline","type","button",3,"click",4,"ngIf"],[1,"flex","flex-column","text-center"],[1,"text-11","text-semibold","text-uppercase"],["class","text-14",4,"ngIf"],["app-pin-button","","buttonType","outline","type","button",3,"click"],["icon","times"],[1,"text-14"],[1,"text-semibold"],["type","button","app-pin-button","","buttonType","outline",3,"click"],["layout","drawer",4,"ngIf"],["layout","drawer"],[3,"showHeader"]],template:function(e,t){if(1&e&&(s.Vb(0,"div",0,1),s.Nc(2,Pi,3,3,"div",2),s.hc(3,"async"),s.Vb(4,"div",3,4),s.cc("keydown",(function(e){return t.handleDrawerKeydown(e)})),s.Vb(6,"div",5),s.Nc(7,Si,17,13,"ng-container",6),s.Nc(8,Ni,13,13,"ng-container",6),s.Ub(),s.Ub(),s.Ub()),2&e){let e=null;s.mc("ngClass",s.sc(8,Ai,!t.open,t.open,t.open,!t.expandable)),s.Db(2),s.mc("ngIf",null==(e=s.ic(3,6,t.scrim$))?null:e.show),s.Db(2),s.Eb("tabindex",t.open?0:-1),s.Db(2),s.mc("ngSwitch",t.mode),s.Db(1),s.mc("ngSwitchCase",t.viewMode.LabelInfo),s.Db(1),s.mc("ngSwitchCase",t.viewMode.Content)}},directives:[i.m,i.p,i.r,i.s,_e.a,Ce.a,Oe.a,Pe.a,Me.a,ke.a,Ze,Ut,wi],pipes:[i.b],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-drawer{border-top:rgba(234,239,245,.8);box-shadow:0 -1px 0 0 rgba(28,42,63,.16);background:hsla(0,0%,100%,.8);left:0;min-height:100vh;right:0;position:absolute;z-index:20;top:100vh;top:calc(var(--vh, 1vh) * 100);transform:translate3d(0,-56px,0);transition:transform .3s}.view-drawer--active,.view-drawer--closed{background-color:#fff}.view-drawer--scrollable{min-height:0}.view-drawer--scrollable .view-drawer__outer{height:50vh;height:calc(var(--vh, 1vh) * 50);overflow-y:scroll}.view-drawer--fixed{height:56px;overflow:hidden}.view-drawer--fixed .view-drawer__inner{height:56px;padding:0 16px}.view-drawer--fixed .view-drawer__content{justify-content:center;padding-top:0}.view-drawer__header{position:relative}.view-drawer__header,.view-drawer__title{height:64px;display:flex;justify-content:center;align-items:center}.view-drawer__title{flex-grow:1;margin:0 64px;padding:0 8px}.view-drawer__button{height:40px;width:40px;display:flex;align-items:center;justify-content:center;position:absolute}.view-drawer__button--left{left:16px}.view-drawer__button--right{right:16px}.view-drawer__inner{position:relative}.view-drawer__outer{outline:none}.view-drawer__content{display:flex;flex:1 1 100%;flex-direction:column;max-width:600px;min-height:56px;margin:0 auto;padding:8px 16px 48px}.view-drawer__scrim{background-color:#fff;position:absolute;display:flex;justify-content:center;align-items:center;z-index:50;left:0;right:0;top:0;bottom:0}"],encapsulation:2,changeDetection:0}),yi([Object(g.e)(d.a.getUI),_i("design:type",$.a)],e.prototype,"layout$",void 0),yi([Object(g.e)(d.a.getScrim),_i("design:type",$.a)],e.prototype,"scrim$",void 0),yi([Object(g.e)(ee.a.getSelectedChapterReadyState),_i("design:type",$.a)],e.prototype,"selectedChapterReady$",void 0),yi([Object(g.e)(ee.a.getSelectedChapterIndex),_i("design:type",$.a)],e.prototype,"chapterIndex$",void 0),yi([Object(g.e)(ee.a.getChapterCount),_i("design:type",$.a)],e.prototype,"chapterCount$",void 0),yi([Object(g.e)(ae.a.getSelectedLabel),_i("design:type",$.a)],e.prototype,"selectedLabel$",void 0),yi([Object(g.e)(fe.b.getQuizModeActive),_i("design:type",$.a)],e.prototype,"quizModeActive$",void 0),yi([Object(g.e)(fe.b.getActiveQuestionIndex),_i("design:type",$.a)],e.prototype,"activeQuestionIndex$",void 0),yi([Object(g.e)(fe.b.getQuestionTotal),_i("design:type",$.a)],e.prototype,"questionTotal$",void 0),yi([Object(g.e)(fe.b.getQuestionsRemaining),_i("design:type",$.a)],e.prototype,"questionRemaining$",void 0),yi([Object(g.e)(fe.b.getQuizSettings),_i("design:type",$.a)],e.prototype,"quizSettings$",void 0),yi([Object(g.e)(fe.b.getQuizModeLocked),_i("design:type",$.a)],e.prototype,"quizLocked$",void 0),e})();var qi=n("4LIl"),Fi=n("Dz/e"),Hi=n("j8e5"),Bi=n("Ryms"),Wi=n("cAYK"),Ji=n("stSV"),Gi=n("ewuU"),Ki=n("fnuH"),Yi=n("Vv7R"),Zi=n("8qIY"),Xi=n("jhN1"),eo=n("R0Ic"),to=n("ufUH"),no=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const io=["viewColumn"];function oo(e,t){if(1&e&&(s.Vb(0,"div",6),s.Qb(1,"app-spinner",7),s.hc(2,"async"),s.Ub()),2&e){const e=s.gc();let t=null;s.Db(1),s.mc("label",null==(t=s.ic(2,1,e.scrim$))?null:t.label)}}const ro=[[["","view-column-header",""]],"*"],so=function(e,t,n){return{"view-column--unpadded":e,"view-column--left":t,"view-column--right":n}},ao=["[view-column-header]","*"];let co=(()=>{class e{constructor(){this.unpadded=!1,this.placement="left"}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-column"]],viewQuery:function(e,t){if(1&e&&s.Vc(io,!0),2&e){let e;s.xc(e=s.dc())&&(t.viewColumn=e.first)}},inputs:{unpadded:"unpadded",placement:"placement"},ngContentSelectors:ao,decls:9,vars:8,consts:[[1,"view-column",3,"ngClass"],["viewColumn",""],["class","view-column__scrim",4,"ngIf"],[1,"view-column__inner"],[1,"view-column__header"],[1,"view-column__body"],[1,"view-column__scrim"],["size","large",3,"label"]],template:function(e,t){if(1&e&&(s.lc(ro),s.Vb(0,"div",0,1),s.Nc(2,oo,3,3,"div",2),s.hc(3,"async"),s.Vb(4,"article",3),s.Vb(5,"div",4),s.kc(6),s.Ub(),s.Vb(7,"div",5),s.kc(8,1),s.Ub(),s.Ub(),s.Ub()),2&e){let e=null;s.mc("ngClass",s.rc(4,so,t.unpadded,"left"===t.placement,"right"===t.placement)),s.Db(2),s.mc("ngIf",null==(e=s.ic(3,2,t.scrim$))?null:e.show)}},directives:[i.m,i.p,_e.a],pipes:[i.b],styles:[".view-column[_ngcontent-%COMP%]{pointer-events:auto;background:#fff;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3);color:#131c2a;width:320px;height:100%;position:absolute;z-index:30}.view-column--left[_ngcontent-%COMP%]{left:0}.view-column--right[_ngcontent-%COMP%]{right:0;box-shadow:0 -1px 24px rgba(0,0,0,.4)}.view-column--unpadded[_ngcontent-%COMP%]   .view-column__body[_ngcontent-%COMP%]{padding:0}.view-column__inner[_ngcontent-%COMP%]{background:#fff;border-right:1px solid #eaeff5;display:flex;flex-direction:column;height:100%;width:320px;position:absolute;left:0;z-index:10}.view-column__header[_ngcontent-%COMP%]{flex-shrink:1;background:#fff}.view-column__header[_ngcontent-%COMP%]:empty{display:none}.view-column__body[_ngcontent-%COMP%]{overflow-y:auto;flex-grow:1;height:100%;padding:16px 12px}.view-column__scrim[_ngcontent-%COMP%]{background-color:#fff;position:absolute;display:flex;justify-content:center;align-items:center;z-index:50;left:0;right:0;top:0;bottom:0}"],changeDetection:0}),function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([Object(g.e)(d.a.getScrim),no("design:type",$.a)],e.prototype,"scrim$",void 0),e})();const lo=["*"];let po=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-list-container"],["","app-view-list-container",""]],ngContentSelectors:lo,decls:2,vars:0,consts:[[1,"view-list-container"]],template:function(e,t){1&e&&(s.lc(),s.Vb(0,"div",0),s.kc(1),s.Ub())},styles:[".view-list-container{display:flex;flex-direction:column}"],encapsulation:2,changeDetection:0}),e})();var ho=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},go=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const uo=function(e,t,n,i){return{"view-logo--full-color":e,"view-logo--full-white":t,"view-logo--small-color":n,"view-logo--small-white":i}};function bo(e,t){if(1&e&&(s.Tb(0),s.Qb(1,"a",1),s.Sb()),2&e){const e=s.gc();s.Db(1),s.mc("href","https://www.biodigital.com?utm_source="+(e.isNative?"human_mobile":"human_web")+"&utm_medium=PLG&utm_campaign=poweredby&ref=poweredby",s.Fc)("ngClass",s.sc(3,uo,"color"===e.logoColor&&"full"===e.logoSize,"white"===e.logoColor&&"full"===e.logoSize,"color"===e.logoColor&&"small"===e.logoSize,"white"===e.logoColor&&"small"===e.logoSize))("gaLabel",e.contentId)}}function xo(e,t){if(1&e&&(s.Tb(0),s.Qb(1,"span",2),s.Sb()),2&e){const e=s.gc();s.Db(1),s.mc("ngClass",s.sc(1,uo,"color"===e.logoColor&&"full"===e.logoSize,"white"===e.logoColor&&"full"===e.logoSize,"color"===e.logoColor&&"small"===e.logoSize,"white"===e.logoColor&&"small"===e.logoSize))}}let fo=(()=>{class e{constructor(){this.logoSize="full",this.logoColor="color",this.contentId="",this.source="",this.isNative=!1,this.isLight=!0,this.breakpoint=Bi.a,this.ngUnsubscribe=new R.a}ngOnInit(){this.isNative=ue.a.native}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-logo"]],inputs:{logoSize:"logoSize",logoColor:"logoColor",contentId:"contentId"},decls:4,vars:6,consts:[[4,"ngIf"],["target","_blank","title","Powered by BioDigital","aria-label","Powered by BioDigital (opens in a new tab)","data-test","viewLogo","gaCategory","Logo","gaEvent","clicked_powered_by",1,"view-logo",3,"href","ngClass","gaLabel"],["title","Powered by BioDigital",1,"view-logo",3,"ngClass"]],template:function(e,t){if(1&e&&(s.Nc(0,bo,2,8,"ng-container",0),s.hc(1,"async"),s.Nc(2,xo,2,6,"ng-container",0),s.hc(3,"async")),2&e){let e=null,n=null;s.mc("ngIf",null==(e=s.ic(1,2,t.layout$))?null:e.logo.isHyperLink),s.Db(2),s.mc("ngIf",!(null!=(n=s.ic(3,4,t.layout$))&&n.logo.isHyperLink))}},directives:[i.p,M.a,M.b,i.m],pipes:[i.b],styles:["[_nghost-%COMP%]{display:flex;height:52px;align-items:center}.view-logo[_ngcontent-%COMP%]:focus{border-radius:4px;outline:2px solid #2d72dc!important}.view-logo--small-color[_ngcontent-%COMP%]{width:28px;height:44px;background:url(logo-color.svg) 50% no-repeat}.view-logo--full-color[_ngcontent-%COMP%]{width:120px;height:32px;background:url(powered-by-biodigital-color.svg) 50% no-repeat}.view-logo--small-white[_ngcontent-%COMP%]{width:28px;height:44px;background:url(logo-white.svg) 50% no-repeat}.view-logo--full-white[_ngcontent-%COMP%]{width:120px;height:32px;background:url(powered-by-biodigital-white.svg) 50% no-repeat}.view-logo[_ngcontent-%COMP%]:not([hidden]){display:flex}.view-logo[href][_ngcontent-%COMP%]:hover{cursor:pointer}"],changeDetection:0}),ho([Object(g.e)(d.a.getUI),go("design:type",$.a)],e.prototype,"layout$",void 0),ho([Object(g.e)(ee.a.getSelectedChapterBackground),go("design:type",$.a)],e.prototype,"background$",void 0),ho([Object(g.e)(Hi.a.getBreakpoint),go("design:type",$.a)],e.prototype,"breakpoint$",void 0),e})();const mo=function(e){return{"view-list-item--selected":e}},vo=["*"];let wo=(()=>{class e{constructor(){this.selected=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-list-item"],["","app-view-list-item",""]],inputs:{selected:"selected"},ngContentSelectors:vo,decls:2,vars:3,consts:[[1,"view-list-item",3,"ngClass"]],template:function(e,t){1&e&&(s.lc(),s.Vb(0,"div",0),s.kc(1),s.Ub()),2&e&&s.mc("ngClass",s.pc(1,mo,t.selected))},directives:[i.m],styles:['.text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.button{font-size:12px;letter-spacing:.3px;line-height:1.4em;align-items:center;background:none;border-color:transparent;border-radius:4px;border-width:0;color:inherit;display:flex;font-family:Inter UI,sans-serif;justify-content:center;margin:0;outline:0 none;padding:0 16px;position:relative;text-align:center;text-decoration:none;transition:background-color .12s;width:100%}.button:not([disabled]):hover{cursor:pointer}.button:focus .button--themed{outline:2px solid #2d72dc!important}.button:after{content:" ";background-color:#283853;border-radius:4px;display:block;position:absolute;left:0;top:0;bottom:0;right:0;opacity:0;z-index:1;transition:opacity .06s}.button:not(.button--disabled):hover:after{opacity:.7}.button__container{position:relative;z-index:2;width:100%}.button--uppercase{text-transform:uppercase}.button--expanded{display:flex;flex:1}.button--xsmall{height:24px;min-width:24px;padding:0 8px;font-size:10px;letter-spacing:.25px;line-height:1.4em}.button--small{height:32px;min-width:32px;padding:0 12px}.button--medium,.button--small{font-size:12px;letter-spacing:.3px;line-height:1.4em}.button--medium{height:36px;min-width:36px;padding:0 16px}.button--large{height:48px;min-width:48px;padding:0 16px;font-size:14px;letter-spacing:.35px;line-height:1.4em}.button--no-border,.button--no-border:after{border-radius:0!important}.button--left{text-align:left}.button--themed{color:#374a68}.button--themed:hover{color:#1c2a3f}.button--themed:after{background-color:#d7e0ea}.button--dark{color:#d7e0ea}.button--dark:hover{color:#fff}.button--dark:after{background-color:#283853}.button--dark.button--flat{background:#374a68}.button--dark.button--default{background:transparent}.button--dark.button--outline{background:transparent;border:1px solid #374a68;transition:border-color .12s}.button--dark.button--outline:hover{border-color:#96a8c0}.button--dark.button--outline:hover:after{background-color:transparent;display:none}.button--dark.button--text{background:transparent;color:#d7e0ea}.button--dark.button--text:hover{color:#fff}.button--dark.button--text:hover:after{display:none}.button--dark.button--selected{background-color:#2d72dc;color:#fff}.button--dark.button--selected:hover:after{display:none}.button--light{color:#283853}.button--light:hover{color:#1c2a3f}.button--light:after{background-color:#96a8c0}.button--light:not(.button--disabled):hover:after{opacity:.6}.button--light.button--flat{background:#d7e0ea;font-weight:500}.button--light.button--flat.button--selected{background-color:#96a8c0}.button--light.button--default{background:transparent;color:#131c2a}.button--light.button--default:not(.button--disabled):hover:after{opacity:.2}.button--light.button--outline{background:transparent;border:1px solid #96a8c0;color:#283853;transition:border-color .12s}.button--light.button--outline:after{display:none}.button--light.button--outline:hover{background:rgba(55,74,104,.05);border-color:#374a68;color:#1c2a3f}.button--light.button--outline:hover:after{background-color:transparent}.button--light.button--selected{background-color:#eaeff5}.button--light.button--selected:hover:after{display:none}.button--light.button--text{color:#283853}.button--light.button--text:hover{color:#1c2a3f}.button--light.button--text:hover:after{display:none}.button--primary{background:#de3535;color:#fff}.button--primary:after{background:#f9fafd}.button--primary:not([disabled]):hover:after{opacity:.1}.button--info{background:#3892dc;color:#fff}.button--info:after{background:#f9fafd}.button--info:hover:after{opacity:.1}.button--selected{background-color:#2d72dc}.button--disabled{opacity:.5}.button--circle{border-radius:50%}.button--circle.button--xsmall{width:24px}.button--circle.button--small{width:32px;padding:0 6px}.button--circle.button--medium{width:36px;padding:0 8px}.button--circle.button--large{width:48px}.button--circle:after{border-radius:50%}.button--rounded,.button--rounded:after{border-radius:18px}[app-view-list-item]{border-color:transparent;background:none;border-width:0;padding:0;outline:none;margin:0;pointer-events:all;display:flex;width:100%}[app-view-list-item]::-moz-focus-inner{border:0}[app-view-list-item]:not([disabled]):hover{cursor:pointer}.view-list-item{font-size:14px;letter-spacing:.35px;line-height:1.4em;display:flex;flex-grow:1;flex-direction:row;padding:12px;border-radius:2px;border-left:4px solid transparent;background-color:transparent;color:#131c2a;transition:background-color 125ms,color 125ms,border 125ms}.view-list-item:hover{cursor:pointer;background:#eaeff5}.view-list-item:focus{outline:2px solid #2d72dc!important}.view-list-item--selected{border-left:4px solid #2d72dc;background-color:#f0f8ff}.view-list-item__index{display:flex;flex:0 0 32px;justify-content:center}.view-list-item__title{word-wrap:break-word;overflow-wrap:break-word;display:flex;flex:1 1 auto;padding-right:4px}.view-list-item__thumb{background-color:#f9fafd;background-size:cover;border-radius:4px;background-repeat:no-repeat;flex:0 0 56px;height:56px;width:56px;transition:border-color .1s}'],encapsulation:2,changeDetection:0}),e})();var yo=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},_o=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function Co(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",2),s.cc("click",(function(){return s.Cc(e),s.gc().handleCloseClick()})),s.Ub()}}function Oo(e,t){1&e&&(s.Vb(0,"span"),s.Pc(1,"Hide Labels"),s.Ub())}function Po(e,t){1&e&&(s.Vb(0,"span"),s.Pc(1,"Show Labels"),s.Ub())}function Mo(e,t){if(1&e){const e=s.Wb();s.Vb(0,"app-view-column",3),s.Vb(1,"nav",4),s.Vb(2,"app-view-panel",5),s.Qb(3,"app-view-logo"),s.Ub(),s.Vb(4,"app-view-panel",5),s.Vb(5,"button",6),s.cc("click",(function(){return s.Cc(e),s.gc().handleCloseClick()})),s.Pc(6,"Close"),s.Ub(),s.Ub(),s.Vb(7,"app-view-panel",5),s.Vb(8,"button",6),s.cc("click",(function(){return s.Cc(e),s.gc().handleToggleToolbar("tools")})),s.Qb(9,"app-icon",7),s.Pc(10," Open Explore Tools "),s.Ub(),s.Vb(11,"button",6),s.cc("click",(function(){return s.Cc(e),s.gc().handleToggleToolbar("media")})),s.Qb(12,"app-icon",8),s.Pc(13," Open Media Controls "),s.Ub(),s.Vb(14,"button",6),s.cc("click",(function(){return s.Cc(e),s.gc().handleSearchClick()})),s.Qb(15,"app-icon",9),s.Pc(16," Search Anatomy "),s.Ub(),s.Ub(),s.Vb(17,"app-view-panel",5),s.Vb(18,"button",6),s.cc("click",(function(){return s.Cc(e),s.gc().handleFullscreenClick()})),s.Qb(19,"app-icon",10),s.Pc(20," Enter Fullscreen "),s.Ub(),s.Ub(),s.Vb(21,"app-view-panel",5),s.Vb(22,"button",6),s.cc("click",(function(){return s.Cc(e),s.gc().handleToggleLabelsClick()})),s.Qb(23,"app-icon",11),s.Nc(24,Oo,2,0,"span",12),s.hc(25,"async"),s.Nc(26,Po,2,0,"span",12),s.hc(27,"async"),s.Ub(),s.Ub(),s.Vb(28,"app-view-panel",5),s.Vb(29,"button",13),s.cc("click",(function(){return s.Cc(e),s.gc().handleTutorialClick()})),s.hc(30,"async"),s.Pc(31," Launch Tutorial "),s.Ub(),s.Vb(32,"button",6),s.cc("click",(function(){return s.Cc(e),s.gc().handleHelpBasicsClick()})),s.Pc(33,"3D Navigation Basics"),s.Ub(),s.Vb(34,"button",6),s.cc("click",(function(){return s.Cc(e),s.gc().handleHelpShortcutsClick()})),s.Pc(35,"Keyboard Shortcuts"),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&e){const e=s.gc();let t=null;s.mc("@slideInOut",void 0),s.Db(2),s.mc("showHeader",!1),s.Db(2),s.mc("showHeader",!1),s.Db(3),s.mc("showHeader",!1),s.Db(10),s.mc("showHeader",!1),s.Db(4),s.mc("showHeader",!1),s.Db(3),s.mc("ngIf",s.ic(25,10,e.showLabels$)),s.Db(2),s.mc("ngIf",!s.ic(27,12,e.showLabels$)),s.Db(2),s.mc("showHeader",!1),s.Db(1),s.mc("disabled",!(null!=(t=s.ic(30,14,e.selectedChapterReady$))&&t.model))}}let ko=(()=>{class e{constructor(e,t){this.store=e,this.viewService=t}ngOnInit(){}handleCloseClick(){this.store.dispatch(new Y.a.ToggleMenu(!1))}handleToggleLabelsClick(){this.viewService.toggleLabels()}handleFullscreenClick(){this.handleCloseClick(),oe.a.toggleFullscreen()}handleNewTabClick(){this.handleCloseClick(),this.viewService.openInNewTab()}handleSearchClick(){this.handleCloseClick(),this.viewService.toggleSearch()}handleTutorialClick(){this.handleCloseClick(),this.viewService.toggleTutorial(!0)}handleHelpBasicsClick(){this.handleCloseClick(),this.viewService.toggleHelp(to.a.Basics)}handleHelpShortcutsClick(){this.handleCloseClick(),this.viewService.toggleHelp(to.a.Shortcuts)}handleToggleToolbar(e){this.handleCloseClick();const t=this.store.selectSnapshot(d.a.getUI);t.media.status=Z.a.Hide,t.tools.status=Z.a.Hide,t.toolbar.status=Z.a.Hide,t[e].status=Z.a.Show,this.store.dispatch(new Y.a.SetUI(t))}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(ve.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-menu-column"]],decls:4,vars:6,consts:[["class","view-menu-scrim",3,"click",4,"ngIf"],["placement","right","class","view-menu-column",4,"ngIf"],[1,"view-menu-scrim",3,"click"],["placement","right",1,"view-menu-column"],["app-view-list-container",""],["padding","dense",3,"showHeader"],["app-view-list-item","",3,"click"],["icon","pen",1,"mr-3"],["icon","play",1,"mr-3"],["icon","search",1,"mr-3"],["icon","expand",1,"mr-3"],["icon","tag",1,"mr-3"],[4,"ngIf"],["app-view-list-item","",3,"disabled","click"]],template:function(e,t){1&e&&(s.Nc(0,Co,1,0,"div",0),s.hc(1,"async"),s.Nc(2,Mo,36,16,"app-view-column",1),s.hc(3,"async")),2&e&&(s.mc("ngIf",s.ic(1,2,t.menuOpen$)),s.Db(2),s.mc("ngIf",s.ic(3,4,t.menuOpen$)))},directives:[i.p,co,po,rt,fo,wo,Oe.a],pipes:[i.b],styles:[".view-menu-column[_ngcontent-%COMP%]{position:absolute;top:0;right:0;z-index:10000;height:100%}.view-menu-scrim[_ngcontent-%COMP%]{background:rgba(0,0,0,.2);display:flex;position:fixed;justify-content:center;align-items:center;top:0;bottom:0;left:0;right:0;transition:background-color .25s,opacity .25s;z-index:10000}.view-menu-scrim[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:rgba(0,0,0,.2)}"],data:{animation:[Object(eo.n)("slideInOut",[Object(eo.m)(":enter",[Object(eo.l)({transform:"translateX(320px)"}),Object(eo.e)("200ms ease-out",Object(eo.l)({transform:"*"}))]),Object(eo.m)(":leave",[Object(eo.e)("200ms",Object(eo.l)({transform:"translateX(320px)"}))])])]},changeDetection:0}),yo([Object(g.e)(ee.a.getSelectedChapterReadyState),_o("design:type",$.a)],e.prototype,"selectedChapterReady$",void 0),yo([Object(g.e)(d.a.getMenuOpen),_o("design:type",$.a)],e.prototype,"menuOpen$",void 0),yo([Object(g.e)(d.a.getCanTouch),_o("design:type",$.a)],e.prototype,"canTouch$",void 0),yo([Object(g.e)(Lt.a.getShowLabels),_o("design:type",$.a)],e.prototype,"showLabels$",void 0),e})();var zo=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},So=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function Do(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",1),s.cc("click",(function(){return s.Cc(e),s.gc().handleToggle()}))("keyup.enter",(function(){return s.Cc(e),s.gc().handleToggle()})),s.Qb(1,"app-icon",2),s.Ub()}if(2&e){const e=s.gc();s.mc("@show",void 0)("matTooltip",e.isIn?"Open Info Panel":"Close Info Panel"),s.Eb("aria-label",e.isIn?"Open Info Panel":"Close Info Panel")("aria-expanded",!e.isIn),s.Db(1),s.mc("icon",e.isIn?"caret-right":"caret-left")}}let jo=(()=>{class e{constructor(e,t,n,i){this.viewService=e,this.layoutService=t,this.changeDetectorRef=n,this.store=i,this.ngUnsubscribe=new R.a,this.isIn=!1,this.columnToggleVisible=!1}ngOnInit(){Object(L.b)(this.chapter$,this.layout$).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.isIn=t.column.status===Z.a.Collapse,this.columnToggleVisible=this.layoutService.isVisible(pe.a.ColumnToggle),this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}isVisible(){return this.layoutService.isVisible(pe.a.ColumnToggle)}handleToggle(){this.viewService.toggleColumn(),this.viewService.toggleSearch(null,!1),this.viewService.toggleNodeInfo(!1),this.viewService.toggleLabelInfo(!1),this.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(ve.a),s.Pb(ye.a),s.Pb(s.i),s.Pb(g.h))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-column-toggle"]],decls:1,vars:1,consts:[["class","view-column-toggle","data-test","viewInformationPanel","role","button","tabindex","0","matTooltipPosition","right",3,"matTooltip","click","keyup.enter",4,"ngIf"],["data-test","viewInformationPanel","role","button","tabindex","0","matTooltipPosition","right",1,"view-column-toggle",3,"matTooltip","click","keyup.enter"],[3,"icon"]],template:function(e,t){1&e&&s.Nc(0,Do,2,5,"div",0),2&e&&s.mc("ngIf",t.columnToggleVisible)},directives:[i.p,Ct.c,Oe.a],styles:[".view-column-toggle{color:#131c2a;background:hsla(0,0%,100%,.8);box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3);border-radius:0 4px 4px 0;display:flex;justify-content:center;align-items:center;width:24px;height:48px}.view-column-toggle:hover{background-color:#eaeff5;cursor:pointer}"],encapsulation:2,data:{animation:[Object(eo.n)("show",[Object(eo.m)(":enter",[Object(eo.l)({opacity:0,transform:"translateX(-32px)"}),Object(eo.e)("300ms ease-in-out",Object(eo.l)({opacity:1,transform:"*"}))]),Object(eo.m)(":leave",[Object(eo.e)("300ms ease-in-out",Object(eo.l)({transform:"translateX(-32px)",opacity:0}))])])]},changeDetection:0}),zo([Object(g.e)(d.a.getUI),So("design:type",$.a)],e.prototype,"layout$",void 0),zo([Object(g.e)(ee.a.getSelectedChapter),So("design:type",$.a)],e.prototype,"chapter$",void 0),e})();var Uo=n("1w2z"),Io=n("DTUA"),To=n("zP1m");function Vo(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",1),s.Vb(1,"app-message-toggle",2),s.cc("handleDismiss",(function(){return s.Cc(e),s.gc().handleDismiss()})),s.Vb(2,"div"),s.Pc(3," This model appears to be performing slowly on your device. For an optimal experience, please switch to a different device or try another model. "),s.Ub(),s.Ub(),s.Ub()}2&e&&(s.Db(1),s.mc("dismiss",!0))}const Ro=[];let Eo,Lo,$o=(()=>{class e{constructor(e,t){this.storageService=e,this.changeRef=t,this.shown=!1,this.sampling=!1}ngOnInit(){this.storageService.getLocalItem(Io.b.Iphone12Warning)||this.testDevices()}ngOnDestroy(){this.sampling=!1}testDevices(){const e=window.matchMedia("only screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)"),t=window.matchMedia("only screen and (device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3)"),n=window.matchMedia("only screen and (device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2)"),i=e.matches||t.matches||n.matches,o=/iPhone|iPad/.test(navigator.userAgent),r=/OS\s14/.test(navigator.userAgent);i&&o&&r&&this.startFrameSampling()}startFrameSampling(){this.sampling=!0,Eo=0,Lo=Date.now();const e=()=>{this.frame()?(this.shown=!0,this.changeRef.markForCheck()):this.sampling&&requestAnimationFrame(e)};requestAnimationFrame(e)}frame(){Eo++;const e=Date.now();if(e>=Lo+500){const t=Math.floor(500*Eo/(e-Lo)*2);if(Ro.push(t),Ro.length>3&&Ro.shift(),3===Ro.length&&(Ro[0]+Ro[1]+Ro[2])/3<10)return!0;Lo=e,Eo=0}}handleDismiss(){this.shown=!1,this.changeRef.markForCheck(),this.storageService.setLocalItem(Io.b.Iphone12Warning,!0)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(Io.d),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-iphone12-warning"]],decls:1,vars:1,consts:[["class","warning",4,"ngIf"],[1,"warning"],["type","warning","toggleStyle","flat","icon","info-circle",3,"dismiss","handleDismiss"]],template:function(e,t){1&e&&s.Nc(0,Vo,4,1,"div",0),2&e&&s.mc("ngIf",t.shown)},directives:[i.p,To.a],styles:[".warning[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1002}"],changeDetection:0}),e})();var No=n("N2iv"),Ao=n("HdmJ"),Qo=n("IZUe");let qo=(()=>{class e{constructor(){}onClick(e,t){t.select()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=s.Kb({type:e,selectors:[["","appSelectOnFocus",""]],hostBindings:function(e,t){1&e&&s.cc("click",(function(e){return t.onClick(e,e.target)}))}}),e})();var Fo=n("2Vo4"),Ho=n("C9yA"),Bo=n("nS47"),Wo=n("e0fF"),Jo=n("NEgD"),Go=n("vxfF"),Ko=n("rY+M");function Yo(e,t){1&e&&(s.Vb(0,"div",4),s.Pc(1,"No results"),s.Ub())}function Zo(e,t){if(1&e&&(s.Vb(0,"div",5),s.Qb(1,"app-tree",6),s.Ub()),2&e){const e=s.gc();s.Db(1),s.mc("theme",e.theme)("searchGraph",e.searchGraph)}}function Xo(e,t){if(1&e&&(s.Vb(0,"div"),s.Qb(1,"app-tree-nested-node",9),s.Ub()),2&e){const e=t.$implicit,n=s.gc(2);s.Db(1),s.mc("theme",n.theme)("nested",!1)("node",e)("graph",n.prunedViewGraph)}}function er(e,t){if(1&e&&(s.Vb(0,"cdk-virtual-scroll-viewport",7),s.Nc(1,Xo,2,4,"div",8),s.Ub()),2&e){const e=s.gc();s.Kc("height",e.searchHeight,"px"),s.mc("itemSize",64),s.Db(1),s.mc("cdkVirtualForOf",e.searchResults)("cdkVirtualForTrackBy",e.trackTreeNode)}}let tr=(()=>{class e{constructor(e,t,n,i,o,r){this.renderer=e,this.changeDetectorRef=t,this.elementRef=n,this.engineService=i,this.store=o,this.liveAnnouncer=r,this._query="",this._displayMode=No.a.List,this.displayModeChange=new s.p,this.theme=Ao.a.Dark,this.treeSearchDisplayMode=No.a,this.searchResults=[],this.searchHeight=0,this.ngUnsubscribe=new R.a,this.numResults$=new Fo.a(0)}get query(){return this._query}set query(e){this._query=e||"",this.handleQueryChange(),void 0!==this.viewGraph&&this.numResults$.next(this.searchResults.length)}get displayMode(){return this._displayMode}set displayMode(e){null!=e&&(this._displayMode=e,this.handleQueryChange(),this.displayModeChange.emit(this.displayMode))}get viewGraph(){return this._viewGraph}set viewGraph(e){this._viewGraph=e,this.leafNodes=this.engineService.getLeaves(),this.buildPrunedViewGraph(this.displayMode),this.handleQueryChange(),this.changeDetectorRef.markForCheck()}ngOnInit(){}buildPrunedViewGraph(e){const t=this.store.selectSnapshot(ee.a.getSelectedChapter),n=this.engineService.createViewGraph(t.showObjects,!0);this.prunedViewGraph=n}ngAfterViewInit(){this.renderer.listen("window","resize",e=>{this.resize()}),this.numResults$.pipe(Object(W.a)(600)).subscribe(e=>{this.liveAnnouncer.announce(this.searchResults.length+" structures found")})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleQueryChange(){const e=this.search(this._query,this.displayMode===No.a.List?this.prunedViewGraph:this.viewGraph);this.displayMode===No.a.Tree&&(this.searchGraph=function(e,t){const n=Object(Wo.a)();return t.reduce((t,n)=>function e(t,n,i){Bo.a.addNode(t,n);const o=Bo.a.getAncestor(i,n.id);if(o){const r=t.successors[o]||[];return r.push(n.id),t.successors[o]=Object(le.uniq)(r),t.predecessors[n.id]=o,e(t,Bo.a.getNode(i,o),i)}return Bo.a.addRootNode(t,n),t}(t,n,e),n)}(this.viewGraph,e)),this.searchResults=e,this.resize()}resize(){this.getSearchHeight().pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.searchHeight=e,this.changeDetectorRef.markForCheck()})}getSearchHeight(){return new $.a(e=>{setTimeout(()=>{const t=this.elementRef.nativeElement.offsetHeight;null!=t&&(e.next(t),e.complete())})})}search(e,t){return void 0===t?[]:(e=Object(Ho.remove)(e.toLowerCase()),Object.values(t.nodes).filter(t=>0===e.length||Object(Ho.remove)(t.label.toLowerCase()).indexOf(e)>=0).sort((e,t)=>e.label.localeCompare(t.label)))}trackTreeNode(e,t){return t.id}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.H),s.Pb(s.i),s.Pb(s.m),s.Pb(qt.a),s.Pb(g.h),s.Pb(o.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-tree-search"]],inputs:{query:"query",displayMode:"displayMode",viewGraph:"viewGraph",theme:"theme"},outputs:{displayModeChange:"displayModeChange"},decls:4,vars:3,consts:[[1,"tree-search"],["class","tree-search__empty",4,"ngIf"],["class","pr-3 pv-3",4,"ngIf"],["class","pv-3",3,"itemSize","height",4,"ngIf"],[1,"tree-search__empty"],[1,"pr-3","pv-3"],[1,"tree-search__tree",3,"theme","searchGraph"],[1,"pv-3",3,"itemSize"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"mr-3",2,"height","64px",3,"theme","nested","node","graph"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Nc(1,Yo,2,0,"div",1),s.Nc(2,Zo,2,2,"div",2),s.Nc(3,er,2,5,"cdk-virtual-scroll-viewport",3),s.Ub()),2&e&&(s.Db(1),s.mc("ngIf",0===t.searchResults.length),s.Db(1),s.mc("ngIf",t.displayMode===t.treeSearchDisplayMode.Tree),s.Db(1),s.mc("ngIf",t.displayMode===t.treeSearchDisplayMode.List))},directives:[i.p,Jo.a,Go.e,Go.a,Go.d,Ko.a],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.tree-search{display:flex;flex-direction:column;flex:1 1 auto;height:100%}.tree-search__tree{flex-grow:1;width:100%}.tree-search__empty{font-size:14px;letter-spacing:.35px;line-height:1.4em;padding:12px;font-style:italic;margin-top:12px}.tree-search cdk-virtual-scroll-viewport{flex:1 1 auto}.tree-search cdk-virtual-scroll-viewport .cdk-virtual-scroll-content-wrapper{padding-right:12px}"],encapsulation:2,changeDetection:0}),e})();var nr=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},ir=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const or=["searchInput"],rr=["tabButton"],sr=function(e){return{"view-search__action--selected":e}};let ar=(()=>{class e{constructor(e,t,n){this.viewService=e,this.engineService=t,this.store=n,this.ngUnsubscribe=new R.a,this.query="",this.themeEnum=Ao.a,this.treeSearchDisplayMode=No.a}ngOnInit(){this.initViewGraphSubscription(),this.initDisplayModeSubscription()}initViewGraphSubscription(){this.store.select(ee.a.getSelectedChapterId).pipe(Object(F.a)(e=>null!=e),Object(K.a)(),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new q.E(this.engineService.createViewGraph({},!1)))})}initDisplayModeSubscription(){this.searchDisplayMode$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{setTimeout(()=>{this.searchInput.nativeElement.focus()})})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleSearchKeyup(e,t){"Escape"===e.key&&(this.handleExitClick(),this.searchInput.nativeElement.blur()),this.query=t}handleExitClick(){this.query="",this.viewService.toggleSearch(null,!1)}toggleDisplayMode(){let e=this.store.selectSnapshot(d.a.getSearchDisplayMode);e=e===No.a.List?No.a.Tree:No.a.List,this.setDisplayMode(e)}setDisplayMode(e){this.store.dispatch(new Y.a.SetSearchDisplayMode(e))}handleTreeButtonClick(){this.setDisplayMode(No.a.Tree)}handleListButtonClick(){this.setDisplayMode(No.a.List)}getActiveTab(){switch(this.store.selectSnapshot(d.a.getSearchDisplayMode)){case No.a.List:return"searchTab";case No.a.Tree:return"treeTab";default:return null}}shiftFocus(e,t){e.stopPropagation();const n=this._buttonRefs.toArray(),i=n.findIndex(e=>e.nativeElement==document.activeElement);n[(i+t+n.length)%n.length].nativeElement.focus()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(ve.a),s.Pb(qt.a),s.Pb(g.h))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-search"]],viewQuery:function(e,t){if(1&e&&(s.Vc(or,!0),s.Vc(rr,!0)),2&e){let e;s.xc(e=s.dc())&&(t.searchInput=e.first),s.xc(e=s.dc())&&(t._buttonRefs=e)}},decls:29,vars:33,consts:[["role","dialog","cdkTrapFocus","",1,"view-search",3,"keyup.escape"],[1,"view-search__header"],[1,"view-search__actions-row"],["role","tablist",1,"view-search__actions",3,"keydown.arrowleft","keydown.arrowright"],["type","button","role","tab","id","treeTab",1,"view-search__action",3,"ngClass","click","keyup.space"],["tabButton",""],["aria-hidden","true",1,"view-search__action-icon",3,"icon"],["type","button","role","tab","id","searchTab",1,"view-search__action",3,"ngClass","click","keyup.space"],["aria-hidden","true","icon","search",1,"view-search__action-icon"],["type","button","matTooltip","Close Search","aria-label","Close Search",1,"view-search__exit",3,"click"],["icon","times"],[1,"view-search__input-row"],[1,"view-search__input-container"],["icon","search",1,"view-search__input-icon"],["appAutoFocus","","appSelectOnFocus","","role","search","type","text","aria-label","Start typing the search term, then use tab to navigate the results","placeholder","Search Anatomy",1,"view-search__input",3,"value","keyup"],["searchInput",""],["role","tabpanel",1,"view-search__body"],[3,"displayMode","theme","query","viewGraph"]],template:function(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",0),s.cc("keyup.escape",(function(){return t.handleExitClick()})),s.Vb(1,"div",1),s.Vb(2,"div",2),s.Vb(3,"div",3),s.cc("keydown.arrowleft",(function(e){return t.shiftFocus(e,-1)}))("keydown.arrowright",(function(e){return t.shiftFocus(e,1)})),s.Vb(4,"button",4,5),s.cc("click",(function(){return t.handleTreeButtonClick()}))("keyup.space",(function(){return t.handleTreeButtonClick()})),s.hc(6,"async"),s.hc(7,"async"),s.hc(8,"async"),s.Qb(9,"app-icon",6),s.Pc(10,"Tree "),s.Ub(),s.Vb(11,"button",7,5),s.cc("click",(function(){return t.handleListButtonClick()}))("keyup.space",(function(){return t.handleListButtonClick()})),s.hc(13,"async"),s.hc(14,"async"),s.hc(15,"async"),s.Qb(16,"app-icon",8),s.Pc(17,"Search "),s.Ub(),s.Ub(),s.Vb(18,"button",9),s.cc("click",(function(){return t.handleExitClick()})),s.Qb(19,"app-icon",10),s.Ub(),s.Ub(),s.Vb(20,"div",11),s.Vb(21,"div",12),s.Qb(22,"app-icon",13),s.Vb(23,"input",14,15),s.cc("keyup",(function(n){s.Cc(e);const i=s.yc(24);return t.handleSearchKeyup(n,i.value)})),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(25,"div",16),s.Qb(26,"app-tree-search",17),s.hc(27,"async"),s.hc(28,"async"),s.Ub(),s.Ub()}2&e&&(s.Db(4),s.mc("ngClass",s.pc(29,sr,s.ic(6,13,t.searchDisplayMode$)===t.treeSearchDisplayMode.Tree)),s.Eb("aria-selected",s.ic(7,15,t.searchDisplayMode$)===t.treeSearchDisplayMode.Tree)("tabIndex",s.ic(8,17,t.searchDisplayMode$)===t.treeSearchDisplayMode.Tree?0:-1),s.Db(5),s.mc("icon","sitemap"),s.Db(2),s.mc("ngClass",s.pc(31,sr,s.ic(13,19,t.searchDisplayMode$)===t.treeSearchDisplayMode.List)),s.Eb("aria-selected",s.ic(14,21,t.searchDisplayMode$)===t.treeSearchDisplayMode.List)("tabIndex",s.ic(15,23,t.searchDisplayMode$)===t.treeSearchDisplayMode.List?0:-1),s.Db(12),s.mc("value",t.query),s.Db(2),s.Eb("aria-labelledby",t.getActiveTab()),s.Db(1),s.mc("displayMode",s.ic(27,25,t.searchDisplayMode$))("theme",t.themeEnum.Light)("query",t.query)("viewGraph",s.ic(28,27,t.viewGraph$)))},directives:[o.d,i.m,Oe.a,Ct.c,Qo.a,qo,tr],pipes:[i.b],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-search{display:flex;flex-direction:column;height:100%}@-webkit-keyframes appear{0%{background-color:transparent}}@keyframes appear{0%{background-color:transparent}}.view-search__header{flex:0 0 auto;flex-direction:column;display:flex;-webkit-animation:appear .25s ease-out;animation:appear .25s ease-out}.view-search__actions-row{flex:0 0 auto;display:flex;padding:0 12px;justify-content:space-between;align-items:center;border-bottom:1px solid #d7e0ea}.view-search__actions{display:flex;height:56px;flex:1;justify-content:space-between}.view-search__action{font-size:14px;letter-spacing:.35px;line-height:1.4em;font-weight:500;text-transform:uppercase;background:transparent;display:flex;align-items:center;justify-content:center;border:0;border-bottom:2px solid transparent;color:#374a68;cursor:pointer;width:49%;padding-top:4px}.view-search__action:hover:not(.view-search__action--selected){color:#131c2a;border-bottom-color:#d7e0ea}.view-search__action--selected{color:#131c2a;border-bottom-color:#2d72dc}.view-search__action-icon{margin-right:8px}.view-search__exit{display:flex;align-items:center;justify-content:center;border:0;border-radius:50%;color:#374a68;background-color:#d7e0ea;opacity:.8;cursor:pointer;width:28px;height:28px;margin-left:12px;outline:none}.view-search__input-row{flex:0 0 auto;display:flex;padding:12px}.view-search__input-container{background-color:#fff;border:1px solid #fff;display:flex;flex-grow:1;border-radius:4px}.view-search__input-container:hover{border-color:#61779e}.view-search__input-container:focus-within{outline:2px solid #2d72dc!important;outline-offset:-2px}.view-search__input-icon{background:0 0;display:flex;align-items:center;justify-content:center;color:#61779e;width:36px;height:36px;outline:0}.view-search__input{font-size:13px;letter-spacing:.325px;line-height:1.4em;font-weight:400;color:#131c2a;background:transparent;border:1px solid transparent;outline:none;flex:1 0 auto;padding:8px 12px 8px 0}.view-search__input::-ms-clear{display:none}.view-search__input::-moz-placeholder{color:#61779e;opacity:1}.view-search__input:-ms-input-placeholder{color:#61779e;opacity:1}.view-search__input::placeholder{color:#61779e;opacity:1}.view-search__body{flex:1 1 100%;overflow-y:scroll;padding-left:12px}.view-search__input{font-family:Inter UI,Font Awesome\\ 5 Pro!important}@media not all and (min-resolution:0.001dpcm){@supports (-webkit-appearance:none){.view-search__input{font-size:16px;padding:4px 8px;width:0}}}"],encapsulation:2,changeDetection:0}),nr([Object(g.e)(Lt.a.getViewGraph),ir("design:type",$.a)],e.prototype,"viewGraph$",void 0),nr([Object(g.e)(d.a.getSearchDisplayMode),ir("design:type",$.a)],e.prototype,"searchDisplayMode$",void 0),e})();var cr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function lr(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",7),s.cc("click",(function(){return s.Cc(e),s.gc().handleCloseClick()})),s.Ub()}2&e&&s.Eb("aria-label","Close")}function pr(e,t){if(1&e&&(s.Vb(0,"i",8),s.Pc(1),s.Ub()),2&e){const e=s.gc();s.Db(1),s.Rc(" ",e.node.info.latinLabel," ")}}function hr(e,t){if(1&e&&s.Qb(0,"p",9),2&e){const e=s.gc();s.Hb("text-italic",!(null!=e.node.info&&e.node.info.description)),s.mc("innerHTML",e.formatHTML((null==e.node.info?null:e.node.info.description)||"No description available"),s.Dc)}}function gr(e,t){if(1&e&&(s.Vb(0,"a",10),s.Pc(1," View source "),s.Ub()),2&e){const e=s.gc();s.Eb("href",null==e.node.info?null:e.node.info.sourceLink,s.Fc)}}const dr=function(e,t){return{"view-node-description--layout-column":e,"view-node-description--layout-drawer":t}};let ur=(()=>{class e{constructor(e,t,n){this.store=e,this.actions=t,this.changeRef=n,this.layout=et.a.Drawer,this.showClose=!0,this.isOpen=!1,this.ngUnsubscribe=new R.a}ngOnInit(){this.initInfoListeners(),this.store.select($t.a.getSelectedNode).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{void 0!==e&&(this.node=this.store.selectSnapshot(Lt.a.getViewGraphNode)(e.objectId))})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleHideClick(e){this.store.dispatch(new Nt.a.UpdateNodesShown(!1,[e.id]))}handleCloseClick(){const e=this.store.selectSnapshot(d.a.getUI);e.nodeInfo.status=Z.a.Hide,this.store.dispatch(new Y.a.SetUI(e))}initInfoListeners(){this.actions.pipe(Object(g.k)(q.s,q.r,q.G),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.isOpen=!0,this.changeRef.markForCheck()})}formatHTML(e){return e.trim().replace(new RegExp("\r?\n","g"),"<br><br>")}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(g.b),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-node-description"]],inputs:{layout:"layout",showClose:"showClose"},decls:9,vars:11,consts:[[1,"view-node-description",3,"ngClass"],[1,"view-node-description__header","mb-3"],["type","button","app-pin-button","","size","small","icon","arrow-left","class","mr-1 mt-1",3,"click",4,"ngIf"],[1,"view-node-description__title"],["class","mv-1 text-14 text-medium text-italic",4,"ngIf"],["class","view-node-description__body mv-2",3,"text-italic","innerHTML",4,"ngIf"],["class","view-node-description__attribution text-link text-underline mv-1","target","_blank","rel","noreferrer nofollow",4,"ngIf"],["type","button","app-pin-button","","size","small","icon","arrow-left",1,"mr-1","mt-1",3,"click"],[1,"mv-1","text-14","text-medium","text-italic"],[1,"view-node-description__body","mv-2",3,"innerHTML"],["target","_blank","rel","noreferrer nofollow",1,"view-node-description__attribution","text-link","text-underline","mv-1"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Nc(2,lr,1,1,"button",2),s.Vb(3,"h2",3),s.Pc(4),s.Ub(),s.Ub(),s.Nc(5,pr,2,1,"i",4),s.Nc(6,hr,1,3,"p",5),s.hc(7,"async"),s.Nc(8,gr,2,1,"a",6),s.Ub()),2&e&&(s.mc("ngClass",s.qc(8,dr,"column"===t.layout,"drawer"===t.layout)),s.Db(2),s.mc("ngIf",t.showClose),s.Db(2),s.Qc(null==t.node?null:t.node.label),s.Db(1),s.mc("ngIf",null==t.node.info?null:t.node.info.latinLabel),s.Db(1),s.mc("ngIf",!s.ic(7,6,t.querying$)),s.Db(2),s.mc("ngIf",null==t.node.info?null:t.node.info.sourceLink))},directives:[i.m,i.p,Ce.a],pipes:[i.b],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-node-description{display:flex;flex-direction:column}.view-node-description--layout-drawer .view-node-description__body{margin-top:8px}.view-node-description--layout-column .view-node-description__body{margin-top:4px}.view-node-description__header{display:flex}.view-node-description__title{font-size:18px;letter-spacing:.45px;line-height:1.4em;flex:1 1 auto;font-weight:600;align-self:center}.view-node-description--layout-drawer .view-node-description__title,.view-node-description__body{font-size:14px;letter-spacing:.35px;line-height:1.4em}.view-node-description__body{color:#374a68}.view-node-description__attribution{font-size:12px;letter-spacing:.3px;line-height:1.4em;color:#374a68}.view-node-description__actions{cursor:pointer;outline:none;border:none;background:transparent;padding:4px 8px}"],encapsulation:2,changeDetection:0}),function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([Object(g.e)(Lt.a.getQuerying),cr("design:type",$.a)],e.prototype,"querying$",void 0),e})();var br=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},xr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function fr(e,t){1&e&&(s.Tb(0),s.Qb(1,"app-view-title"),s.Qb(2,"app-view-content-mode",6),s.Sb())}function mr(e,t){1&e&&s.Qb(0,"app-view-quiz")}function vr(e,t){if(1&e&&(s.Vb(0,"app-view-column",3),s.Tb(1,4),s.Nc(2,fr,3,0,"ng-container",5),s.hc(3,"async"),s.Nc(4,mr,1,0,"app-view-quiz",5),s.hc(5,"async"),s.Sb(),s.Ub()),2&e){const e=s.gc();s.mc("@slideInOut",void 0),s.Db(2),s.mc("ngIf",!s.ic(3,3,e.quizModeActive$)),s.Db(2),s.mc("ngIf",s.ic(5,5,e.quizModeActive$))}}function wr(e,t){1&e&&(s.Vb(0,"app-view-column",7),s.Qb(1,"app-view-search"),s.Ub()),2&e&&s.mc("unpadded",!0)("@slideInOut",void 0)}function yr(e,t){1&e&&(s.Vb(0,"app-view-column",3),s.Qb(1,"app-view-node-description",6),s.Ub()),2&e&&s.mc("@slideInOut",void 0)}const _r=function(){return{"view-column-container--header-offset":!0}};let Cr=(()=>{class e{constructor(e,t,n){this.viewService=e,this.layoutService=t,this.changeDetectorRef=n,this.ngUnsubscribe=new R.a,this.viewLayout=pe.a,this.application=de.a,this.columnVisible=!1,this.searchVisible=!1,this.nodeInfoVisible=!1}ngOnInit(){this.initLayoutObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initLayoutObserver(){Object(L.b)(this.layout$,this.chapter$).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(([])=>{this.columnVisible=this.layoutService.isVisible(pe.a.Column),this.searchVisible=this.layoutService.isVisible(pe.a.Search),this.nodeInfoVisible=this.layoutService.isVisible(pe.a.NodeInfo),this.changeDetectorRef.markForCheck()})}handleSearchClick(){this.viewService.toggleSearch(null,!0)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(ve.a),s.Pb(ye.a),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-column-container"]],decls:4,vars:5,consts:[[1,"view-column-container",3,"ngClass"],["class","view-column-container__inner",4,"ngIf"],["class","view-column-container__inner",3,"unpadded",4,"ngIf"],[1,"view-column-container__inner"],["view-column-body",""],[4,"ngIf"],["layout","column"],[1,"view-column-container__inner",3,"unpadded"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Nc(1,vr,6,7,"app-view-column",1),s.Nc(2,wr,2,2,"app-view-column",2),s.Nc(3,yr,2,1,"app-view-column",1),s.Ub()),2&e&&(s.mc("ngClass",s.oc(4,_r)),s.Db(1),s.mc("ngIf",t.columnVisible),s.Db(1),s.mc("ngIf",t.searchVisible),s.Db(1),s.mc("ngIf",t.nodeInfoVisible))},directives:[i.m,i.p,co,Ze,Ut,wi,ar,ur],pipes:[i.b],styles:[".view-column-container{pointer-events:none;height:100%;width:320px;position:absolute;left:0;top:0;z-index:30}.view-column-container app-view-column{position:absolute;left:0;top:0;height:100%;z-index:40}"],encapsulation:2,data:{animation:[Object(eo.n)("slideInOut",[Object(eo.m)(":enter",[Object(eo.l)({transform:"translateX(-320px)"}),Object(eo.e)("300ms ease-in-out",Object(eo.l)({transform:"*"}))]),Object(eo.m)(":leave",[Object(eo.e)("300ms ease-in-out",Object(eo.l)({transform:"translateX(-320px)"}))])])]},changeDetection:0}),br([Object(g.e)(ee.a.getSelectedChapter),xr("design:type",$.a)],e.prototype,"chapter$",void 0),br([Object(g.e)(d.a.getUI),xr("design:type",$.a)],e.prototype,"layout$",void 0),br([Object(g.e)(fe.b.getQuizModeActive),xr("design:type",$.a)],e.prototype,"quizModeActive$",void 0),e})();var Or=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Pr=(()=>{class e{constructor(e){this.store=e,this.audioVisible=!1,this.ngUnsubscribe=new R.a}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleAudioClick(){const e=this.store.selectSnapshot(Lt.a.getPlayAudio);this.store.dispatch(new q.n(!e))}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-engine-audio"]],decls:7,vars:9,consts:[["type","button",1,"audio",3,"click"],[1,"audio__icon",3,"icon"],[1,"audio__label","text-10","text-uppercase","text-semibold"]],template:function(e,t){1&e&&(s.Vb(0,"button",0),s.cc("click",(function(){return t.handleAudioClick()})),s.hc(1,"async"),s.Qb(2,"app-icon",1),s.hc(3,"async"),s.Vb(4,"span",2),s.Pc(5),s.hc(6,"async"),s.Ub(),s.Ub()),2&e&&(s.Eb("aria-label",s.ic(1,3,t.playAudio$)?"Stop Audio":"Play Audio"),s.Db(2),s.mc("icon",s.ic(3,5,t.playAudio$)?"volume-up":"volume-slash"),s.Db(3),s.Rc(" ",s.ic(6,7,t.playAudio$)?"Stop Audio":"Play Audio"," "))},directives:[Oe.a],pipes:[i.b],styles:[".audio[_ngcontent-%COMP%]{border:none;background:#283853;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3);color:#fff;border-radius:4px;height:26px;width:26px;padding:0;display:flex;justify-content:flex-start;align-items:center;overflow:hidden;transition:width .3s ease-in-out;text-transform:uppercase}.audio[_ngcontent-%COMP%]:hover{background:#374a68;cursor:pointer;width:100px}.audio[_ngcontent-%COMP%]:hover   .audio__label[_ngcontent-%COMP%]{flex:1 0 auto;display:inline-block;padding:0 8px 0 0}.audio__icon[_ngcontent-%COMP%]{flex:0 0 26px}.audio__label[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([Object(g.e)(Lt.a.getPlayAudio),Or("design:type",$.a)],e.prototype,"playAudio$",void 0),e})();var Mr=n("/75k"),kr=n("jHc0"),zr=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Sr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function Dr(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",1),s.Vb(1,"app-pillbox",2),s.Vb(2,"button",3),s.cc("click",(function(){return s.Cc(e),s.gc().handleUndoClick()})),s.hc(3,"async"),s.hc(4,"async"),s.Ub(),s.Vb(5,"button",4),s.cc("click",(function(){return s.Cc(e),s.gc().handleRedoClick()})),s.hc(6,"async"),s.hc(7,"async"),s.Ub(),s.Vb(8,"button",5),s.cc("click",(function(){return s.Cc(e),s.gc().handleResetClick()})),s.hc(9,"async"),s.hc(10,"async"),s.Vb(11,"span",6),s.Pc(12,"Reset"),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&e){const e=s.gc();s.mc("@show",void 0),s.Db(2),s.mc("disabled",!s.ic(4,9,e.canUndo$)),s.Eb("aria-disabled",!s.ic(3,7,e.canUndo$)),s.Db(3),s.mc("disabled",!s.ic(7,13,e.canRedo$)),s.Eb("aria-disabled",!s.ic(6,11,e.canRedo$)),s.Db(3),s.mc("disabled",!s.ic(10,17,e.canUndo$)),s.Eb("aria-disabled",!s.ic(9,15,e.canUndo$))}}let jr=(()=>{class e{constructor(e){this.viewService=e}ngOnInit(){}handleUndoClick(){this.viewService.undo()}handleRedoClick(){this.viewService.redo()}handleResetClick(){this.viewService.resetChapter()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(ve.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-undo"]],decls:2,vars:3,consts:[["class","view-undo",4,"ngIf"],[1,"view-undo"],["padding","dense"],["app-pin-button","","data-test","undo-btn","buttonType","ghost","icon","undo","aria-label","Undo","matTooltip","Undo",1,"mr-2",3,"disabled","click"],["buttonType","ghost","app-pin-button","","data-test","redo-btn","aria-label","Redo","matTooltip","Redo","icon","redo",1,"mr-2",3,"disabled","click"],["app-pin-button","","buttonShape","rounded","buttonType","ghost","data-test","reset-btn",3,"disabled","click"],[1,"ph-4","text-bold"]],template:function(e,t){1&e&&(s.Nc(0,Dr,13,19,"div",0),s.hc(1,"async")),2&e&&s.mc("ngIf",s.ic(1,1,t.canUndo$))},directives:[i.p,kr.a,Ce.a,Ct.c],pipes:[i.b],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;width:100%;padding:8px 0;pointer-events:none}"],data:{animation:[Object(eo.n)("show",[Object(eo.m)(":enter",Object(eo.j)([Object(eo.l)({transform:"translateY(-100%)",opacity:0}),Object(eo.e)("150ms ease-in-out",Object(eo.l)({transform:"translateY(0%)",opacity:1}))]))])]},changeDetection:0}),zr([Object(g.e)(Mr.a.canUndo),Sr("design:type",$.a)],e.prototype,"canUndo$",void 0),zr([Object(g.e)(Mr.a.canRedo),Sr("design:type",$.a)],e.prototype,"canRedo$",void 0),zr([Object(g.e)(Mr.a.getUndoCount),Sr("design:type",$.a)],e.prototype,"undoCount$",void 0),e})();var Ur=n("PqYM"),Ir=n("JX91"),Tr=n("7o/Q");class Vr{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new Rr(e,this.predicate))}}class Rr extends Tr.a{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}var Er=n("eIep"),Lr=n("mtgE"),$r=n("qz+p"),Nr=n("gcYM"),Ar=n("3UWI"),Qr=n("5+WD"),qr=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Fr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Hr=["scrubber"],Br=["track"],Wr=["bar"],Jr=["handle"],Gr=function(e){return{"view-scrubber--draggable":e}},Kr=function(e,t){return{"view-scrubber__handle--hide":e,"view-scrubber__handle-touch":t}};let Yr=(()=>{class e{constructor(e,t,n,i,o,r){this.engineService=e,this.animationService=t,this.renderer=n,this.viewService=i,this.changeDetectorRef=o,this.store=r,this.showHandle=!0,this.ngUnsubscribe=new R.a,this.trackWidth=0,this.dragPosition={x:16,y:0},this.playing=!0}ngOnInit(){this.initChapterListener(),this.initTimelineListener()}ngAfterViewInit(){this.initDragListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initChapterListener(){this.selectedChapterId$.pipe(Object(F.a)(e=>null!=e),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.timerange=this.animationService.getChapterLocalTimerange(e),this.tick(this.animationService.getTime())})}initTimelineListener(){this.engineService.getEvent(It.a.TimelinePlaying).pipe(Object(Nr.a)(20),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>this.tick(e.time)),this.engineService.getEvent(It.a.TimelineScrubbed).pipe(Object(Nr.a)(20),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.getPercent(e.time);this.setScrubberBar(t)})}initDragListener(){this.dragInstance.moved.pipe(Object(Ar.a)(20),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.calculateHandlePercent();this.scrubToPercent(t)})}handleDragStart(){this.playing=this.store.selectSnapshot(Lt.a.getAnimationPlaying),this.store.dispatch(new q.W(!1))}handleDragEnd(){this.store.dispatch(new q.W(this.playing))}handleTrackClick(e){if(!this.showHandle)return;const t=e.offsetX/this.track.nativeElement.getBoundingClientRect().width*100;this.playing=this.store.selectSnapshot(Lt.a.getAnimationPlaying),this.scrubToPercent(t),this.setScrubberBar(t),this.setScrubberHandle(t),this.store.dispatch(new q.W(this.playing))}tick(e){if(!this.timerange)return;const t=this.getPercent(e);this.setScrubberBar(t),this.setScrubberHandle(t)}getPercent(e){return this.animationService.getLocalTime(e)/this.timerange.lastTime*100}calculateHandlePercent(){const{left:e,right:t}=this.scrubber.nativeElement.getBoundingClientRect(),n=t-e-this.handle.nativeElement.offsetWidth,i=this.handle.nativeElement.getBoundingClientRect().left;return Math.min(Math.max((i-e)/n*100,0),100)}scrubToPercent(e){const t=e/100*this.timerange.lastTime,n=0===e?"second":"first",i=this.store.selectSnapshot(ee.a.getSelectedChapterId),o=this.animationService.mapLocalTimeToGlobal(i,t);this.animationService.scrub({time:o,which:n})}handlePlayClick(){this.viewService.toggleAnimation()}setScrubberBar(e){this.renderer.setStyle(this.bar.nativeElement,"width",e+"%")}setScrubberHandle(e){0===this.trackWidth&&(this.trackWidth=this.track.nativeElement.offsetWidth-32),this.showHandle&&(this.dragPosition=Object.assign(Object.assign({},this.dragPosition),{x:16+this.trackWidth*(e/100)}),this.changeDetectorRef.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(qt.a),s.Pb($r.a),s.Pb(s.H),s.Pb(ve.a),s.Pb(s.i),s.Pb(g.h))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-scrubber"]],viewQuery:function(e,t){if(1&e&&(s.Jc(Hr,!0),s.Jc(Br,!0),s.Jc(Wr,!0),s.Jc(Jr,!0),s.Vc(Qr.a,!0)),2&e){let e;s.xc(e=s.dc())&&(t.scrubber=e.first),s.xc(e=s.dc())&&(t.track=e.first),s.xc(e=s.dc())&&(t.bar=e.first),s.xc(e=s.dc())&&(t.handle=e.first),s.xc(e=s.dc())&&(t.dragInstance=e.first)}},inputs:{showHandle:"showHandle"},decls:9,vars:10,consts:[[1,"view-scrubber",3,"ngClass"],["scrubber",""],[1,"view-scrubber__track",3,"click"],["track",""],[1,"view-scrubber__bar"],["bar",""],["cdkDrag","","cdkDragLockAxis","x","cdkDragBoundary",".view-scrubber",1,"view-scrubber__handle",3,"cdkDragFreeDragPosition","ngClass","cdkDragStarted","cdkDragEnded"],["handle",""]],template:function(e,t){1&e&&(s.Vb(0,"div",0,1),s.Vb(2,"div",2,3),s.cc("click",(function(e){return t.handleTrackClick(e)})),s.Qb(4,"div",4,5),s.Ub(),s.Vb(6,"div",6,7),s.cc("cdkDragStarted",(function(){return t.handleDragStart()}))("cdkDragEnded",(function(){return t.handleDragEnd()})),s.hc(8,"async"),s.Ub(),s.Ub()),2&e&&(s.mc("ngClass",s.pc(5,Gr,t.showHandle)),s.Db(6),s.mc("cdkDragFreeDragPosition",t.dragPosition)("ngClass",s.qc(7,Kr,!t.showHandle,s.ic(8,3,t.canTouch$))))},directives:[i.m,Qr.a],pipes:[i.b],styles:['.view-scrubber{position:relative;display:flex;justify-content:center;align-items:center;height:40px;width:100%}.view-scrubber:hover .view-scrubber__handle:after{opacity:1}.view-scrubber--draggable .view-scrubber__track{left:16px;right:16px}.view-scrubber__track{background:rgba(150,168,192,.6);z-index:1;right:0}.view-scrubber__bar,.view-scrubber__track{border-radius:2px;position:absolute;height:4px;left:0}.view-scrubber__bar{background:#374a68;z-index:2;width:0}.view-scrubber__handle{width:40px;height:40px;margin-left:-16px;left:0;display:flex;align-items:center;justify-content:center;position:absolute;z-index:2}.view-scrubber__handle--hide{display:none}.view-scrubber__handle:after{opacity:1;transition:opacity .25s;content:"";width:8px;height:8px;border-radius:4px;background:#374a68;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3)}.view-scrubber__handle:hover:after{background:#2d72dc}.view-scrubber__handle:hover{cursor:pointer}.view-scrubber__handle-touch:after{opacity:1}'],encapsulation:2,changeDetection:0}),qr([Object(g.e)(Lt.a.getAnimationPlaying),Fr("design:type",$.a)],e.prototype,"animationPlaying$",void 0),qr([Object(g.e)(ee.a.getSelectedChapterId),Fr("design:type",$.a)],e.prototype,"selectedChapterId$",void 0),qr([Object(g.e)(d.a.getCanTouch),Fr("design:type",$.a)],e.prototype,"canTouch$",void 0),e})();var Zr=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Xr=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function es(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",9),s.cc("click",(function(){return s.Cc(e),s.gc(2).handlePlayClick()})),s.hc(1,"async"),s.hc(2,"async"),s.Ub()}if(2&e){const e=s.gc(2);s.mc("matTooltip",s.ic(1,2,e.animationPlaying$)?"Pause":"Play")("icon",s.ic(2,4,e.animationPlaying$)?"pause":"play")}}function ts(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",10),s.cc("click",(function(){return s.Cc(e),s.gc(2).handlePlayChapterFromStartClick()})),s.Ub()}}function ns(e,t){1&e&&s.Qb(0,"app-view-scrubber",11)}function is(e,t){if(1&e&&(s.Vb(0,"div",3),s.Nc(1,es,3,6,"button",4),s.Nc(2,ts,1,0,"button",5),s.Nc(3,ns,1,0,"app-view-scrubber",6),s.Vb(4,"button",7),s.Vb(5,"span",8),s.Pc(6),s.hc(7,"async"),s.Ub(),s.Ub(),s.Ub()),2&e){const e=s.gc(),t=s.yc(2);s.Db(1),s.mc("ngIf",e.showPlayPause),s.Db(1),s.mc("ngIf",e.showPlayPause),s.Db(1),s.mc("ngIf",e.showScrubber),s.Db(1),s.mc("matMenuTriggerFor",t),s.Db(2),s.Rc("",s.ic(7,5,e.playbackSpeed$),"x")}}let os=(()=>{class e{constructor(e,t,n,i,o){this.animationService=e,this.viewService=t,this.layoutService=n,this.store=i,this.changeDetectorRef=o,this.viewLayout=pe.a,this.size="small",this.showPlayPause=!0,this.showScrubber=!0,this.showBar=!0,this.ngUnsubscribe=new R.a}get template(){return this._template}set template(e){this._template=e,this.updateLayoutProperties(this.template)}ngOnInit(){this.initChapterListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initChapterListener(){this.selectedChapterId$.pipe(Object(F.a)(e=>null!=e),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.timerange=this.animationService.getChapterLocalTimerange(e)})}updateLayoutProperties(e){this.showBar=e!==Lr.a.None,this.showScrubber=e===Lr.a.Full,this.showPlayPause=e!==Lr.a.None}handlePlayClick(){this.viewService.toggleAnimation()}handlePlayChapterFromStartClick(){this.viewService.playChapterFromStart()}setPlaybackSpeed(e){this.store.dispatch(new q.J(e))}}return e.\u0275fac=function(t){return new(t||e)(s.Pb($r.a),s.Pb(ve.a),s.Pb(ye.a),s.Pb(g.h),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-media-bar"]],inputs:{template:"template",size:"size"},decls:11,vars:1,consts:[["class","view-media-bar",4,"ngIf"],["playbackMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"view-media-bar"],["app-pin-button","","buttonType","ghost","data-test","Play/Pause__small","matTooltipPosition","above",3,"matTooltip","icon","click",4,"ngIf"],["app-pin-button","","buttonType","ghost","matTooltipPosition","above","matTooltip","Play Chapter from Start","icon","step-backward",3,"click",4,"ngIf"],["class","view-media-bar__scrubber","data-test","Scrub__small",4,"ngIf"],["app-pin-button","","buttonType","ghost","matTooltipPosition","above","matTooltip","Playback Speed",3,"matMenuTriggerFor"],[1,"text-semibold"],["app-pin-button","","buttonType","ghost","data-test","Play/Pause__small","matTooltipPosition","above",3,"matTooltip","icon","click"],["app-pin-button","","buttonType","ghost","matTooltipPosition","above","matTooltip","Play Chapter from Start","icon","step-backward",3,"click"],["data-test","Scrub__small",1,"view-media-bar__scrubber"]],template:function(e,t){1&e&&(s.Nc(0,is,8,7,"div",0),s.Vb(1,"mat-menu",null,1),s.Vb(3,"button",2),s.cc("click",(function(){return t.setPlaybackSpeed(1)})),s.Pc(4,"Normal"),s.Ub(),s.Vb(5,"button",2),s.cc("click",(function(){return t.setPlaybackSpeed(.5)})),s.Pc(6,"0.5"),s.Ub(),s.Vb(7,"button",2),s.cc("click",(function(){return t.setPlaybackSpeed(.25)})),s.Pc(8,"0.25"),s.Ub(),s.Vb(9,"button",2),s.cc("click",(function(){return t.setPlaybackSpeed(.1)})),s.Pc(10,"0.1"),s.Ub(),s.Ub()),2&e&&s.mc("ngIf",t.showBar)},directives:[i.p,De.a,De.b,Ce.a,Ct.c,De.d,Yr],pipes:[i.b],styles:[".view-media-bar{display:flex}.view-media-bar__scrubber{width:120px;display:flex;justify-content:center;align-items:center}"],encapsulation:2,changeDetection:0}),Zr([Object(g.e)(Lt.a.getAnimationPlaying),Xr("design:type",$.a)],e.prototype,"animationPlaying$",void 0),Zr([Object(g.e)(ee.a.getSelectedChapterId),Xr("design:type",$.a)],e.prototype,"selectedChapterId$",void 0),Zr([Object(g.e)(Lt.a.getPlaybackSpeed),Xr("design:type",$.a)],e.prototype,"playbackSpeed$",void 0),e})();var rs=n("JnPr");let ss=(()=>{class e{constructor(e,t){this.el=e,this.renderer=t}ngOnInit(){window.navigator.userAgent.includes("Trident")&&this.renderer.setStyle(this.el.nativeElement,"display","none")}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.m),s.Pb(s.H))},e.\u0275dir=s.Kb({type:e,selectors:[["","appHideIE11",""]]}),e})();var as=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},cs=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const ls=["chapterCount"],ps=["mediaToggle"];function hs(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",4),s.Vb(1,"button",5),s.cc("click",(function(){return s.Cc(e),s.gc(2).handlePreviousClick()})),s.hc(2,"async"),s.hc(3,"async"),s.hc(4,"async"),s.hc(5,"async"),s.Ub(),s.Vb(6,"button",6),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleNextClick()})),s.hc(7,"async"),s.hc(8,"async"),s.hc(9,"async"),s.hc(10,"async"),s.hc(11,"async"),s.hc(12,"async"),s.Ub(),s.Ub()}if(2&e){const e=s.gc(2);let t=null,n=null;s.Db(1),s.mc("disabled",0===s.ic(2,6,e.chapterIndex$))("matTooltip",s.ic(4,10,e.previousChapter$)?"Previous: "+(null==(t=s.ic(5,12,e.previousChapter$))?null:t.info.displayName):""),s.Eb("aria-disabled",0===s.ic(3,8,e.chapterIndex$)),s.Db(5),s.mc("disabled",s.ic(9,18,e.chapterIndex$)===s.ic(10,20,e.chapterCount$)-1)("matTooltip",s.ic(11,22,e.nextChapter$)?"Next: "+(null==(n=s.ic(12,24,e.nextChapter$))?null:n.info.displayName):""),s.Eb("aria-disabled",s.ic(7,14,e.chapterIndex$)===s.ic(8,16,e.chapterCount$)-1)}}function gs(e,t){if(1&e&&(s.Vb(0,"div",7),s.Vb(1,"app-view-chapters",8),s.Vb(2,"div",9),s.Pc(3),s.hc(4,"async"),s.hc(5,"async"),s.Qb(6,"app-icon",10),s.Ub(),s.Vb(7,"span",11),s.Pc(8),s.hc(9,"async"),s.hc(10,"async"),s.Ub(),s.Ub(),s.Ub()),2&e){const e=s.gc(2);s.Db(3),s.Sc(" ",s.ic(4,4,e.chapterIndex$)+1," of ",s.ic(5,6,e.chapterCount$)," "),s.Db(5),s.Sc(" Toggle Chapter List, Chapter ",s.ic(9,8,e.chapterIndex$)+1," of ",s.ic(10,10,e.chapterCount$)," ")}}function ds(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",14),s.cc("click",(function(){return s.Cc(e),s.gc(3).handlePlayClick()})),s.hc(1,"async"),s.hc(2,"async"),s.hc(3,"async"),s.Ub()}if(2&e){const e=s.gc(3);s.mc("icon",s.ic(1,3,e.animationPlaying$)?"pause":"play")("matTooltip",s.ic(3,7,e.animationPlaying$)?"Pause Animation":"Play Animation"),s.Eb("aria-label",s.ic(2,5,e.animationPlaying$)?"Pause Animation":"Play Animation")}}function us(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",15),s.cc("click",(function(){return s.Cc(e),s.gc(3).toggleToolbar("media")})),s.Qb(1,"app-view-scrubber",16),s.Ub()}2&e&&(s.Db(1),s.mc("showHandle",!1))}function bs(e,t){if(1&e&&(s.Vb(0,"div",7),s.Nc(1,ds,4,9,"button",12),s.Nc(2,us,2,1,"button",13),s.Ub()),2&e){const e=s.gc(2);s.Db(1),s.mc("ngIf",e.isVisible(e.viewUI.Media)),s.Db(1),s.mc("ngIf",e.isVisible(e.viewUI.ScrubberButton))}}function xs(e,t){if(1&e&&(s.Tb(0),s.Nc(1,hs,13,26,"div",2),s.Nc(2,gs,11,12,"div",3),s.Nc(3,bs,3,2,"div",3),s.Sb()),2&e){const e=s.gc();s.Db(1),s.mc("ngIf",e.paginationVisible),s.Db(1),s.mc("ngIf",e.paginationVisible&&!e.collapsePagination),s.Db(1),s.mc("ngIf",e.mediaVisible)}}function fs(e,t){if(1&e){const e=s.Wb();s.Tb(0),s.Vb(1,"div",7),s.Vb(2,"div",17),s.Vb(3,"button",18),s.cc("click",(function(){s.Cc(e);const t=s.gc();return t.handleSelectTool(t.toolEnum.Select)})),s.hc(4,"async"),s.hc(5,"async"),s.Ub(),s.Vb(6,"button",19),s.cc("click",(function(){s.Cc(e);const t=s.gc();return t.handleSelectTool(t.toolEnum.Hide)})),s.hc(7,"async"),s.hc(8,"async"),s.Ub(),s.Vb(9,"button",20),s.cc("click",(function(){s.Cc(e);const t=s.gc();return t.handleSelectTool(t.toolEnum.Fade)})),s.hc(10,"async"),s.hc(11,"async"),s.Ub(),s.Ub(),s.Ub(),s.Sb()}if(2&e){const e=s.gc();s.Db(3),s.mc("selected",s.ic(4,6,e.activeTool$)===e.toolEnum.Select),s.Eb("aria-pressed",s.ic(5,8,e.activeTool$)===e.toolEnum.Select),s.Db(3),s.mc("selected",s.ic(7,10,e.activeTool$)===e.toolEnum.Hide),s.Eb("aria-pressed",s.ic(8,12,e.activeTool$)===e.toolEnum.Hide),s.Db(3),s.mc("selected",s.ic(10,14,e.activeTool$)===e.toolEnum.Fade),s.Eb("aria-pressed",s.ic(11,16,e.activeTool$)===e.toolEnum.Fade)}}let ms=(()=>{class e{constructor(e,t,n,i,o,r){this.viewService=e,this.viewUIService=t,this.store=n,this.changeDetectorRef=i,this.popupService=o,this.ga=r,this.viewToolsMode=ce,this.viewUI=pe.a,this.breakpointEnum=Bi.a,this.canFullscreen=!0,this.isFullscreen=!1,this.toolEnum=X.a,this.mediaControlsEnum=Lr.a,this.paginationVisible=!1,this.mediaVisible=!1,this.ngUnsubscribe=new R.a,this.animate=!0,this._mode=ce.Main,this.collapsePagination=!1,this.collapseScrubber=!1,this.modeChange=new s.p}get mode(){return this._mode}set mode(e){this._mode=e}ngOnInit(){this.canFullscreen=oe.a.canFullscreen(),this.initLayoutListener(),this.initBreakpointListener(),this.initFullscreenListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initLayoutListener(){this.store.select(d.a.getUI).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.mediaTemplate=e.media.template,this.paginationVisible=this.viewUIService.isVisible(pe.a.Pagination),this.mediaVisible=this.viewUIService.isVisible(pe.a.Media),this.changeDetectorRef.markForCheck()})}initBreakpointListener(){this.store.select(Hi.a.getBreakpoint).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.breakpoint=e,this.changeDetectorRef.markForCheck()})}initFullscreenListener(){this.fullscreen$=oe.a.onFullscreenChange(),this.fullscreen$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.isFullscreen=oe.a.isFullscreen(),this.changeDetectorRef.markForCheck()})}handleSelectTool(e){const t=this.store.selectSnapshot(Lt.a.getActiveTool);this.viewService.selectTool(e===t?X.a.Select:e)}handlePlayClick(){this.viewService.toggleAnimation()}handleMenuClick(){this.store.dispatch(new Y.a.ToggleMenu(!0))}handlePreviousClick(){this.viewService.previousChapter("Toolbar")}handleNextClick(){this.viewService.nextChapter("Toolbar")}handleMediaClick(){this.toggleMediaPopup()}toggleMediaPopup(){this.mediaPopup?this.mediaPopup.close():(this.mediaPopup=this.popupService.open({origin:this.mediaToggle.nativeElement,content:os,width:"300px"}),this.mediaPopup.afterClosed$.pipe(Object(B.a)(this.ngUnsubscribe),Object(H.a)(1)).subscribe(e=>{this.mediaPopup=null}))}toggleToolbar(e){this.viewService.toggleToolbar(e)}isEnabled(e){return this.viewUIService.isUIEnabled(e)}isVisible(e){return this.viewUIService.isVisible(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(ve.a),s.Pb(ye.a),s.Pb(g.h),s.Pb(s.i),s.Pb(rs.a),s.Pb(M.c))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-tools"]],viewQuery:function(e,t){if(1&e&&(s.Vc(ls,!0),s.Vc(ps,!0)),2&e){let e;s.xc(e=s.dc())&&(t.chapterCount=e.first),s.xc(e=s.dc())&&(t.mediaToggle=e.first)}},inputs:{animate:"animate",mode:"mode",collapsePagination:"collapsePagination",collapseScrubber:"collapseScrubber"},outputs:{modeChange:"modeChange"},features:[s.Cb([rs.a])],decls:3,vars:2,consts:[["role","toolbar","aria-label","Tools","data-test","viewTools",1,"view-tools"],[4,"ngIf"],["class","view-tools__group","role","navigation","aria-label","Chapters",4,"ngIf"],["class","view-tools__group",4,"ngIf"],["role","navigation","aria-label","Chapters",1,"view-tools__group"],["data-test","viewToolsPreviousChapter","aria-label","Previous Chapter","app-pin-button","","buttonType","ghost","icon","chevron-left",1,"view-tools__item",3,"disabled","matTooltip","click"],["data-test","viewToolsNextChapter","aria-label","Next Chapter","app-pin-button","","buttonType","ghost","icon","chevron-right",1,"view-tools__item",3,"disabled","matTooltip","click"],[1,"view-tools__group"],["buttonShape","rounded"],["aria-hidden","true",1,"ph-2","text-13","text-semibold",2,"white-space","nowrap"],["icon","caret-up",1,"ml-2"],[1,"visually-hidden"],["data-test","viewToolsPlay","app-pin-button","","buttonType","ghost","class","view-tools__item",3,"icon","matTooltip","click",4,"ngIf"],["data-test","viewToolsMedia","app-pin-button","","buttonType","ghost","class","view-tools__item","aria-label","Open Media Bar","matTooltip","Open Media Bar",3,"click",4,"ngIf"],["data-test","viewToolsPlay","app-pin-button","","buttonType","ghost",1,"view-tools__item",3,"icon","matTooltip","click"],["data-test","viewToolsMedia","app-pin-button","","buttonType","ghost","aria-label","Open Media Bar","matTooltip","Open Media Bar",1,"view-tools__item",3,"click"],[2,"width","32px","margin","0 8px",3,"showHandle"],["role","radiogroup",1,"flex"],["app-pin-button","","buttonType","ghost","icon","mouse-pointer","aria-label","Select","matTooltip","Select","data-test","viewToolsSelect",1,"view-tools__item",3,"selected","click"],["app-pin-button","","buttonType","ghost","icon","eye-slash","aria-label","Hide","matTooltip","Hide","data-test","viewToolsHide",1,"view-tools__item",3,"selected","click"],["app-pin-button","","appHideIE11","","buttonType","ghost","aria-label","Fade","matTooltip","Fade","icon","adjust","data-test","viewToolsFade",1,"view-tools__item",3,"selected","click"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Nc(1,xs,4,3,"ng-container",1),s.Nc(2,fs,12,18,"ng-container",1),s.Ub()),2&e&&(s.Db(1),s.mc("ngIf",t.mode===t.viewToolsMode.Main),s.Db(1),s.mc("ngIf",t.mode===t.viewToolsMode.Tools))},directives:[i.p,Ce.a,Ct.c,Qe,Oe.a,Yr,ss],pipes:[i.b],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-tools{display:flex;justify-content:center;overflow:hidden}@-webkit-keyframes viewToolsToggle{0%{opacity:1}50%{opacity:0}to{opacity:1}}@keyframes viewToolsToggle{0%{opacity:1}50%{opacity:0}to{opacity:1}}.view-tools--swap{-webkit-animation:viewToolsToggle .3s ease-in-out;animation:viewToolsToggle .3s ease-in-out}.view-tools--dense .view-tools__divider{margin:4px}.view-tools__inner{display:flex;justify-content:center}.view-tools__group{border-right:1px solid rgba(0,0,0,.1);padding:0 8px;display:flex}.view-tools__group:empty{display:none}.view-tools__group:empty:first-of-type+.view-tools__group:not(:empty),.view-tools__group:first-of-type{padding-left:0}.view-tools__group:last-of-type{border-right:none;padding-right:0}.view-tools__item{display:flex;align-items:center}.view-tools__item:not(:last-child){margin-right:4px}.view-tools__divider{border-right:1px solid rgba(0,0,0,.1);margin:4px 8px}.view-tools__count{font-size:12px;letter-spacing:.3px;line-height:1.4em;white-space:nowrap}"],encapsulation:2,changeDetection:0}),as([Object(g.e)(ee.a.getSelectedChapterReadyState),cs("design:type",$.a)],e.prototype,"selectedChapterReady$",void 0),as([Object(g.e)(Lt.a.getActiveTool),cs("design:type",$.a)],e.prototype,"activeTool$",void 0),as([Object(g.e)(d.a.getPresentationActive),cs("design:type",$.a)],e.prototype,"presentationActive$",void 0),as([Object(g.e)(ee.a.getIsChapterAnimated),cs("design:type",$.a)],e.prototype,"isChapterAnimated$",void 0),as([Object(g.e)(Lt.a.getShowLabels),cs("design:type",$.a)],e.prototype,"showLabels$",void 0),as([Object(g.e)(Lt.a.getAnimationPlaying),cs("design:type",$.a)],e.prototype,"animationPlaying$",void 0),as([Object(g.e)(ae.a.getChapterLabels),cs("design:type",$.a)],e.prototype,"labels$",void 0),as([Object(g.e)(ee.a.getSelectedChapterTitle),cs("design:type",$.a)],e.prototype,"chapterTitle$",void 0),as([Object(g.e)(ee.a.getSelectedChapterIndex),cs("design:type",$.a)],e.prototype,"chapterIndex$",void 0),as([Object(g.e)(ee.a.getNextChapter),cs("design:type",$.a)],e.prototype,"nextChapter$",void 0),as([Object(g.e)(ee.a.getPreviousChapter),cs("design:type",$.a)],e.prototype,"previousChapter$",void 0),as([Object(g.e)(ee.a.getChapterCount),cs("design:type",$.a)],e.prototype,"chapterCount$",void 0),as([Object(g.e)(d.a.getCanTouch),cs("design:type",$.a)],e.prototype,"canTouch$",void 0),e})();var vs=n("bjoO"),ws=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},ys=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const _s=["slider"],Cs=["track"],Os=["bar"],Ps=["handle"],Ms=function(e){return{"view-layers-slider__handle-touch":e}};let ks=(()=>{class e{constructor(e,t,n){this.renderer=e,this.visibilityLayersService=t,this.changeDetectorRef=n,this.ngUnsubscribe=new R.a,this.currentLayers=[],this.fullOffset=0,this.dragMove=new R.a,this.dragPosition={x:0,y:0},this.currentLayerName="",this.currentOffset=0}ngOnInit(){this.initLayersObserver(),this.initIndexPositionObserver(),this.initDragMoveObserver()}ngAfterViewInit(){setTimeout(()=>{this.handle.nativeElement.focus()},200),this.fullOffset=this.track.nativeElement.offsetWidth}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initLayersObserver(){this.selectedChapterCurrentLayers$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.currentLayers=e})}initIndexPositionObserver(){Object(L.b)([this.selectedChapterCurrentLayersIndex$,this.selectedChapterCurrentLayersPosition$,this.selectedChapterCurrentLayers$]).pipe(Object(F.a)(([e,t,n])=>!Object(le.isNil)(e)&&!Object(le.isNil)(t)&&!Object(le.isNil)(n)),Object(W.a)(0),Object(B.a)(this.ngUnsubscribe)).subscribe(([e,t,n])=>{this.currentLayerName=n[e].name;const i=this.visibilityLayersService.indexPositionToFraction(e,t);this.currentOffset=Math.round(100*i),this.setSliderBar(i),this.setSliderHandle(i)})}initDragMoveObserver(){this.dragMove.pipe(Object(Ar.a)(20),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>this.handleAuditedDrag())}handleDragEnded(){const e=this.calculateHandleFraction(),t=this.visibilityLayersService.fractionToIndex(e),n=this.visibilityLayersService.fractionToPosition(e,t);this.visibilityLayersService.recordLayerIndexPosition(t,n)}handleDragMoved(e){this.dragMove.next(e)}handleAuditedDrag(){const e=this.calculateHandleFraction(),t=this.visibilityLayersService.fractionToIndex(e),n=this.visibilityLayersService.fractionToPosition(e,t);this.currentLayerName=this.currentLayers[t].name,this.visibilityLayersService.synchronizeScene(t,n,!1),this.setSliderBar(e)}handleTrackClick(e){const t=e.offsetX/this.fullOffset,n=this.visibilityLayersService.fractionToIndex(t),i=this.visibilityLayersService.fractionToPosition(t,n);this.visibilityLayersService.recordLayerIndexPosition(n,i)}handleKeyDown(e){switch(e.key){case"Home":this.handleIncriment(-1),e.stopPropagation();break;case"End":this.handleIncriment(1),e.stopPropagation();break;case"PageDown":this.handleIncriment(-.1),e.stopPropagation();break;case"PageUp":this.handleIncriment(.1),e.stopPropagation();break;case"ArrowLeft":case"ArrowDown":this.handleIncriment(-.01),e.stopPropagation();break;case"ArrowRight":case"ArrowUp":this.handleIncriment(.01),e.stopPropagation()}}handleIncriment(e){const t=Object(le.clamp)(this.calculateHandleFraction()+e,0,1),n=this.visibilityLayersService.fractionToIndex(t),i=this.visibilityLayersService.fractionToPosition(t,n);this.visibilityLayersService.recordLayerIndexPosition(n,i)}calculateHandleFraction(){const e=this.slider.nativeElement.getBoundingClientRect();return(this.handle.nativeElement.getBoundingClientRect().left-e.left)/this.fullOffset}setSliderBar(e){this.renderer.setStyle(this.bar.nativeElement,"width",100*e+"%")}setSliderHandle(e){this.dragPosition={x:e*this.fullOffset,y:this.dragPosition.y},this.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.H),s.Pb(vs.a),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-layers-slider"]],viewQuery:function(e,t){if(1&e&&(s.Jc(_s,!0),s.Jc(Cs,!0),s.Jc(Os,!0),s.Jc(Ps,!0)),2&e){let e;s.xc(e=s.dc())&&(t.slider=e.first),s.xc(e=s.dc())&&(t.track=e.first),s.xc(e=s.dc())&&(t.bar=e.first),s.xc(e=s.dc())&&(t.handle=e.first)}},decls:9,vars:8,consts:[[1,"view-layers-slider"],["slider",""],[1,"view-layers-slider__track",3,"click"],["track",""],[1,"view-layers-slider__bar"],["bar",""],["cdkDrag","","cdkDragLockAxis","x","cdkDragBoundary",".view-layers-slider","role","slider","tabindex","0","aria-valuemin","0","aria-valuemax","100",1,"view-layers-slider__handle",3,"cdkDragFreeDragPosition","ngClass","matTooltip","cdkDragEnded","cdkDragMoved","keydown"],["handle",""]],template:function(e,t){1&e&&(s.Vb(0,"div",0,1),s.Vb(2,"div",2,3),s.cc("click",(function(e){return t.handleTrackClick(e)})),s.Qb(4,"div",4,5),s.Ub(),s.Vb(6,"div",6,7),s.cc("cdkDragEnded",(function(){return t.handleDragEnded()}))("cdkDragMoved",(function(e){return t.handleDragMoved(e)}))("keydown",(function(e){return t.handleKeyDown(e)})),s.hc(8,"async"),s.Ub(),s.Ub()),2&e&&(s.Db(6),s.mc("cdkDragFreeDragPosition",t.dragPosition)("ngClass",s.pc(6,Ms,s.ic(8,4,t.canTouch$)))("matTooltip",t.currentLayerName),s.Eb("aria-valuenow",t.currentOffset))},directives:[Qr.a,i.m,Ct.c],pipes:[i.b],styles:['.view-layers-slider[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;height:28px;width:100%}.view-layers-slider__track[_ngcontent-%COMP%]{position:absolute;background:rgba(150,168,192,.6);z-index:1;height:5px;border-radius:5px;left:14px;right:14px}.view-layers-slider__bar[_ngcontent-%COMP%]{position:absolute;background:#374a68;height:5px;border-radius:5px;z-index:2;width:0;left:0;pointer-events:none}.view-layers-slider__handle[_ngcontent-%COMP%]{width:28px;height:28px;margin-left:-14px;left:14px;display:flex;align-items:center;justify-content:center;position:absolute;z-index:2}.view-layers-slider__handle--hide[_ngcontent-%COMP%]{display:none}.view-layers-slider__handle[_ngcontent-%COMP%]:after{content:"";width:12px;height:12px;border-radius:6px;background:#374a68;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3)}.view-layers-slider__handle[_ngcontent-%COMP%]:hover:after{background:#2d72dc}'],changeDetection:0}),ws([Object(g.e)(ee.a.getSelectedChapterCurrentLayers),ys("design:type",$.a)],e.prototype,"selectedChapterCurrentLayers$",void 0),ws([Object(g.e)(ee.a.getSelectedChapterCurrentLayersIndex),ys("design:type",$.a)],e.prototype,"selectedChapterCurrentLayersIndex$",void 0),ws([Object(g.e)(ee.a.getSelectedChapterCurrentLayersPosition),ys("design:type",$.a)],e.prototype,"selectedChapterCurrentLayersPosition$",void 0),ws([Object(g.e)(d.a.getCanTouch),ys("design:type",$.a)],e.prototype,"canTouch$",void 0),e})();const zs=function(e,t,n){return{"view-layers-bar__slider--large":e,"view-layers-bar__slider--small":t,"view-layers-bar__slider--disabled":n}};let Ss=(()=>{class e{constructor(e,t,n){this.store=e,this.engineService=t,this.changeDetectorRef=n,this.ngUnsubscribe=new R.a,this.assetsLoading=!1}ngOnInit(){this.engineService.getEvent(It.a.AssetsLoadProgress).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.assetsLoading=e.requestedAssets!==e.receivedAssets,this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}isLarge(){return this.store.selectSnapshot(Hi.a.getBreakpoint)>=Bi.a.Medium}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(qt.a),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-layers-bar"]],decls:2,vars:5,consts:[[1,"view-layers-bar"],[1,"view-layers-bar__slider",3,"ngClass"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Qb(1,"app-view-layers-slider",1),s.Ub()),2&e&&(s.Db(1),s.mc("ngClass",s.rc(1,zs,t.isLarge(),!t.isLarge(),t.assetsLoading)))},directives:[ks,i.m],styles:[".view-layers-bar[_ngcontent-%COMP%]{display:flex}.view-layers-bar__slider[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-left:4px}.view-layers-bar__slider--large[_ngcontent-%COMP%]{width:300px}.view-layers-bar__slider--small[_ngcontent-%COMP%]{width:180px}.view-layers-bar__slider--disabled[_ngcontent-%COMP%]{opacity:.25;pointer-events:none}"],changeDetection:0}),e})();const Ds=["viewToolbar"],js=["exploreTrigger"];function Us(e,t){if(1&e&&(s.Vb(0,"app-pillbox",6),s.Qb(1,"app-view-tools",7),s.Ub()),2&e){const e=s.gc(2);s.Db(1),s.mc("collapsePagination",e.collapsePagination)("collapseScrubber",e.collapseScrubber)("mode",e.viewToolsMode.Main)}}function Is(e,t){if(1&e){const e=s.Wb();s.Vb(0,"app-pillbox",8),s.Vb(1,"button",9,10),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleExploreToolsClick()})),s.Ub(),s.Ub()}2&e&&(s.Db(1),s.mc("matTooltip","Explore"),s.Eb("aria-label","Explore"))}function Ts(e,t){if(1&e&&(s.Vb(0,"div",3),s.Nc(1,Us,2,3,"app-pillbox",4),s.Nc(2,Is,3,2,"app-pillbox",5),s.Ub()),2&e){const e=s.gc();s.mc("@inOutAnimation",void 0),s.Db(1),s.mc("ngIf",e.isVisible(e.viewUI.Pagination)||e.isVisible(e.viewUI.Mediabar)),s.Db(1),s.mc("ngIf",e.isEnabled(e.viewUI.Tools))}}function Vs(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",3),s.Vb(1,"app-pillbox",11),s.cc("exit",(function(){return s.Cc(e),s.gc().handleExitClick()})),s.Qb(2,"app-view-media-bar",12),s.Ub(),s.Ub()}if(2&e){const e=s.gc();s.mc("@inOutAnimation",void 0),s.Db(1),s.mc("canExit",e.canExit),s.Db(1),s.mc("template",e.mediaTemplate)}}function Rs(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",3),s.Vb(1,"app-pillbox",13),s.cc("exit",(function(){return s.Cc(e),s.gc().handleExitClick()})),s.Qb(2,"app-view-tools",14),s.Ub(),s.Ub()}if(2&e){const e=s.gc();s.mc("@inOutAnimation",void 0),s.Db(1),s.mc("canExit",e.canExit),s.Db(1),s.mc("mode",e.viewToolsMode.Tools)}}function Es(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",3),s.Vb(1,"app-pillbox",15),s.cc("exit",(function(){return s.Cc(e),s.gc().handleExitClick()})),s.Qb(2,"app-view-layers-bar"),s.Ub(),s.Ub()}if(2&e){const e=s.gc();s.mc("@inOutAnimation",void 0),s.Db(1),s.mc("canExit",e.canExit)}}let Ls=(()=>{class e{constructor(e,t,n,i,o){this.store=e,this.changeDetectorRef=t,this.viewService=n,this.viewUIService=i,this.elementRef=o,this.viewUI=pe.a,this.canExit=!0,this.mode=ce.Main,this.lockMode=!1,this.position="center",this.ngUnsubscribe=new R.a,this.breakpoint=Bi.a,this.viewToolsMode=ce,this.viewLayout=pe.a,this.collapsePagination=!1,this.collapseScrubber=!1,this.modeSubject=new Fo.a(ce.Main)}ngOnInit(){this.initLayoutListener(),this.initBreakpointListener(),this.initFocusListeners()}initLayoutListener(){this.store.select(d.a.getUI).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.lockMode||(this.mode=ce.Main,this.viewUIService.isUIVisible(pe.a.Media)&&(this.mediaTemplate=e.media.template,this.mode=ce.Media),this.viewUIService.isToolsVisible()&&(this.mode=ce.Tools),this.viewUIService.isVisibilityLayersVisible()&&this.viewUIService.isUIVisible(pe.a.VisibilityLayers)&&(this.mode=ce.VisibilityLayers),this.modeSubject.next(this.mode),this.changeDetectorRef.markForCheck())})}initBreakpointListener(){this.store.select(Hi.a.getBreakpoint).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{const t=e<=Bi.a.Small;this.collapseScrubber=t,this.collapsePagination=t,this.changeDetectorRef.markForCheck()})}initFocusListeners(){const e=this.modeSubject.asObservable().pipe(Object(Ir.a)(this.mode),Object(J.a)(),Object(F.a)(([e,t])=>e===ce.Tools&&t===ce.Main),Object(K.a)(),Object(B.a)(this.ngUnsubscribe));var t;Object(E.a)(this.elementRef.nativeElement,"keypress").pipe((t=()=>this.mode===ce.Tools,e=>e.lift(new Vr(t))),Object(Er.a)(()=>e.pipe(Object(B.a)(Object(Ur.a)(125)))),Object(W.a)(301),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.exploreTrigger&&this.exploreTrigger.focus()})}isVisible(e){return this.viewUIService.isVisible(e)}isEnabled(e){return this.viewUIService.isUIEnabled(e)}handleExitClick(){const e=this.store.selectSnapshot(d.a.getUI);e.media.status=Z.a.Hide,e.tools.status=Z.a.Hide,e.visibilityLayers.status=Z.a.Hide,this.viewService.selectTool(X.a.Select),this.store.dispatch(new Y.a.SetUI(e))}handleExploreToolsClick(){this.viewService.toggleToolbar("tools")}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(s.i),s.Pb(ve.a),s.Pb(ye.a),s.Pb(s.m))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-toolbar"]],viewQuery:function(e,t){if(1&e&&(s.Vc(Ds,!0),s.Vc(js,!0)),2&e){let e;s.xc(e=s.dc())&&(t.viewToolbar=e.first),s.xc(e=s.dc())&&(t.exploreTrigger=e.first)}},inputs:{canExit:"canExit",mode:"mode",lockMode:"lockMode",position:"position"},decls:5,vars:4,consts:[[3,"ngSwitch"],["data-test","viewToolbar","class","view-toolbar",4,"ngSwitchDefault"],["data-test","viewToolbar","class","view-toolbar",4,"ngSwitchCase"],["data-test","viewToolbar",1,"view-toolbar"],["eventCategory","View Primary Toolbar","name","Primary Toolbar",4,"ngIf"],["name","Explore Toolbar","class","ml-3",4,"ngIf"],["eventCategory","View Primary Toolbar","name","Primary Toolbar"],[3,"collapsePagination","collapseScrubber","mode"],["name","Explore Toolbar",1,"ml-3"],["data-test","viewExploreToolbar","icon","mouse-pointer","app-pin-button","","buttonType","ghost",3,"matTooltip","click"],["exploreTrigger",""],["eventCategory","View Media Bar","name","Media Bar",3,"canExit","exit"],[3,"template"],["eventCategory","View Explore Tools","name","Explore Tools",3,"canExit","exit"],[3,"mode"],["name","Visibility Layers",3,"canExit","exit"]],template:function(e,t){1&e&&(s.Tb(0,0),s.Nc(1,Ts,3,3,"div",1),s.Nc(2,Vs,3,3,"div",2),s.Nc(3,Rs,3,3,"div",2),s.Nc(4,Es,3,2,"div",2),s.Sb()),2&e&&(s.mc("ngSwitch",t.mode),s.Db(2),s.mc("ngSwitchCase",t.viewToolsMode.Media),s.Db(1),s.mc("ngSwitchCase",t.viewToolsMode.Tools),s.Db(1),s.mc("ngSwitchCase",t.viewToolsMode.VisibilityLayers))},directives:[i.r,i.t,i.s,i.p,kr.a,ms,Ce.a,Ct.c,os,Ss],styles:[".view-toolbar{position:absolute;display:flex;z-index:20;bottom:0;right:0}"],encapsulation:2,data:{animation:[Object(eo.n)("inOutAnimation",[Object(eo.m)(":enter",[Object(eo.l)({opacity:0,transform:"translateY(200px)"}),Object(eo.e)("300ms ease-in-out",Object(eo.l)({opacity:1,transform:"*"}))]),Object(eo.m)(":leave",[Object(eo.e)("300ms ease-in-out",Object(eo.l)({transform:"translateY(200px)",opacity:0}))])])]},changeDetection:0}),e})();var $s=n("QtmD"),Ns=n("cQmI"),As=n("f0Cb"),Qs=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},qs=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function Fs(e,t){if(1&e){const e=s.Wb();s.Tb(0),s.Vb(1,"button",15),s.cc("click",(function(){return s.Cc(e),s.gc().handleTreeClick()})),s.Qb(2,"app-icon",16),s.Vb(3,"span",17),s.Pc(4,"Anatomy Tree"),s.Ub(),s.Ub(),s.Vb(5,"button",18),s.cc("click",(function(){return s.Cc(e),s.gc().handleSearchClick()})),s.Qb(6,"app-icon",19),s.Vb(7,"span",17),s.Pc(8,"Search"),s.Ub(),s.Ub(),s.Qb(9,"mat-divider"),s.Sb()}}function Hs(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",20),s.cc("click",(function(){return s.Cc(e),s.gc().toggleToolbar("visibilityLayers")})),s.Qb(1,"app-icon",21),s.Vb(2,"span",17),s.Pc(3,"Layers"),s.Ub(),s.Ub()}}function Bs(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",22),s.cc("click",(function(){return s.Cc(e),s.gc().handleDrawClick()})),s.hc(1,"async"),s.Qb(2,"app-icon",23),s.Vb(3,"span",17),s.Pc(4,"Draw"),s.Ub(),s.Ub()}if(2&e){const e=s.gc();let t=null;s.mc("disabled",!(null!=(t=s.ic(1,1,e.selectedChapterReady$))&&t.model))}}function Ws(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",24),s.cc("click",(function(){return s.Cc(e),s.gc().handleTakeQuizClick()})),s.hc(1,"async"),s.hc(2,"async"),s.Qb(3,"app-icon",25),s.Vb(4,"span",17),s.Pc(5,"Take Quiz"),s.Ub(),s.Ub()}if(2&e){const e=s.gc();let t=null;s.mc("disabled",!(null!=(t=s.ic(1,1,e.selectedChapterReady$))&&t.model)||s.ic(2,3,e.quizActive$))}}function Js(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",26),s.cc("click",(function(){return s.Cc(e),s.gc().toggleToolbar("media")})),s.Qb(1,"app-icon",27),s.Pc(2," Open Media Bar "),s.Ub()}}function Gs(e,t){if(1&e&&(s.Vb(0,"button",28),s.Pc(1," Settings "),s.Ub()),2&e){s.gc();const e=s.yc(16);s.mc("matMenuTriggerFor",e)}}function Ks(e,t){if(1&e&&(s.Vb(0,"button",28),s.Pc(1,"Help"),s.Ub()),2&e){s.gc();const e=s.yc(20);s.mc("matMenuTriggerFor",e)}}function Ys(e,t){1&e&&(s.Tb(0),s.Pc(1,"Exit Fullscreen"),s.Sb())}function Zs(e,t){1&e&&(s.Tb(0),s.Pc(1,"Enter Fullscreen"),s.Sb())}function Xs(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",31),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleFullscreenClick()})),s.Nc(1,Ys,2,0,"ng-container",3),s.Nc(2,Zs,2,0,"ng-container",3),s.Ub()}if(2&e){const e=s.gc(2);s.Db(1),s.mc("ngIf",e.isFullscreen),s.Db(1),s.mc("ngIf",!e.isFullscreen)}}function ea(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",33),s.cc("click",(function(){return s.Cc(e),s.gc(3).handleNewTabClick()})),s.Pc(1," Open in New Tab "),s.Ub()}}function ta(e,t){if(1&e&&(s.Tb(0),s.Nc(1,ea,2,0,"button",32),s.Sb()),2&e){const e=s.gc(2);s.Db(1),s.mc("ngIf",!e.canFullscreen)}}function na(e,t){if(1&e&&(s.Tb(0),s.Nc(1,Xs,3,2,"button",29),s.Nc(2,ta,2,1,"ng-container",30),s.Sb()),2&e){const e=s.gc();s.Db(1),s.mc("ngIf",e.canFullscreen),s.Db(1),s.mc("appFlagApplication",e.application.All)("appFlagApplicationMode","exclude")("appFlagApplicationNative",e.nativePlatform.All)}}function ia(e,t){1&e&&(s.Tb(0),s.Pc(1,"Hide Labels"),s.Sb())}function oa(e,t){1&e&&(s.Tb(0),s.Pc(1,"Show Labels"),s.Sb())}function ra(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",34),s.cc("click",(function(){return s.Cc(e),s.gc().handleToggleLabelsClick()})),s.Nc(1,ia,2,0,"ng-container",3),s.hc(2,"async"),s.Nc(3,oa,2,0,"ng-container",3),s.hc(4,"async"),s.Ub()}if(2&e){const e=s.gc();s.Db(1),s.mc("ngIf",s.ic(2,2,e.showLabels$)),s.Db(2),s.mc("ngIf",!s.ic(4,4,e.showLabels$))}}let sa=(()=>{class e{constructor(e,t,n,i,o){this.viewUIService=e,this.viewService=t,this.quizService=n,this.changeDetectorRef=i,this.store=o,this.application=de.a,this.nativePlatform=Zi.a,this.bookmarkViewMode=Ns.a,this.viewUI=pe.a,this.isFullscreen=!1,this.canFullscreen=!1,this.ngUnsubscribe=new R.a,this.visibilityLayersVisible=!1,this.showTakeQuiz=!1}ngOnInit(){this.canFullscreen=oe.a.canFullscreen(),this.initFullscreenListener(),this.initLayoutListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initFullscreenListener(){this.fullscreen$=oe.a.onFullscreenChange(),this.fullscreen$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.isFullscreen=oe.a.isFullscreen(),this.changeDetectorRef.markForCheck()})}initLayoutListener(){this.store.select(d.a.getUI).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.visibilityLayersVisible=this.viewUIService.isVisible(pe.a.VisibilityLayers),this.changeDetectorRef.markForCheck()})}initTakeQuizButton(){Object(L.b)([this.hasQuiz$,this.quizEnabled$,this.quizLocked$,this.selectedBookmarkViewMode$]).pipe(Object(G.a)(([e,t,n,i])=>!!e&&!!t&&(!(!n||i===Ns.a.Content)||void 0)),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.showTakeQuiz=e})}handleToggleLabelsClick(){this.viewService.showLabels()}handleFullscreenClick(){oe.a.toggleFullscreen()}handleTutorialClick(){this.viewService.toggleTutorial(!0)}handleTakeQuizClick(){this.quizService.startQuiz()}handleHelpBasicsClick(){this.viewService.toggleHelp(to.a.Basics)}handleHelpShortcutsClick(){this.viewService.toggleHelp(to.a.Shortcuts)}handlePresentClick(){this.viewService.togglePresentation()}handleNewTabClick(){this.viewService.openInNewTab()}handleSearchClick(){this.viewService.toggleSearch(No.a.List,!0)}handleTreeClick(){this.viewService.toggleSearch(No.a.Tree,!0)}handleDrawClick(){this.viewService.toggleWhiteboard(!0)}toggleToolbar(e){this.viewService.toggleToolbar(e)}isEnabled(e){return this.viewUIService.isUIEnabled(e)}isVisible(e){return this.viewUIService.isVisible(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(ye.a),s.Pb(ve.a),s.Pb(we.a),s.Pb(s.i),s.Pb(g.h))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-menu"]],decls:28,vars:22,consts:[["type","button","data-test","viewMenu","matTooltip","Menu","app-pin-button","","buttonType","secondary","icon","bars","aria-label","View Menu",2,"width","52px","height","52px",3,"matMenuTriggerFor","fill"],[1,"view-menu"],["viewMenu","matMenu"],[4,"ngIf"],["mat-menu-item","","data-test","viewLayersButton",3,"click",4,"ngIf"],["mat-menu-item","","data-test","viewDrawButton",3,"disabled","click",4,"ngIf"],["mat-menu-item","","data-test","viewQuizButton",3,"disabled","click",4,"ngIf"],["mat-menu-item","","data-test","viewMediaBarButton",3,"click",4,"ngIf"],["mat-menu-item","",3,"matMenuTriggerFor",4,"ngIf"],["settingsMenu","matMenu"],["mat-menu-item","","data-test","viewToggleLabels",3,"click",4,"ngIf"],["helpMenu","matMenu"],["mat-menu-item","","data-test","viewLaunchTutorial",3,"disabled","click"],["mat-menu-item","","data-test","view3DNavigationBasics",3,"click"],["mat-menu-item","","data-test","viewKeyboardShortcuts",3,"click"],["mat-menu-item","","data-test","viewTreeButton",3,"click"],["icon","sitemap",1,"view-menu__icon"],[1,"ml-2"],["mat-menu-item","","data-test","viewSearchButton",3,"click"],["icon","search",1,"view-menu__icon"],["mat-menu-item","","data-test","viewLayersButton",3,"click"],["icon","layer-group",1,"view-menu__icon"],["mat-menu-item","","data-test","viewDrawButton",3,"disabled","click"],["icon","signature",1,"view-menu__icon"],["mat-menu-item","","data-test","viewQuizButton",3,"disabled","click"],["icon","check",1,"view-menu__icon"],["mat-menu-item","","data-test","viewMediaBarButton",3,"click"],["icon","play",1,"view-menu__icon"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","","data-test","viewHandleFullscreen",3,"click",4,"ngIf"],[4,"appFlagApplication","appFlagApplicationMode","appFlagApplicationNative"],["mat-menu-item","","data-test","viewHandleFullscreen",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","","data-test","viewToggleLabels",3,"click"]],template:function(e,t){if(1&e&&(s.Qb(0,"button",0),s.Vb(1,"mat-menu",1,2),s.Nc(3,Fs,10,0,"ng-container",3),s.Nc(4,Hs,4,0,"button",4),s.Nc(5,Bs,5,3,"button",5),s.Nc(6,Ws,6,5,"button",6),s.hc(7,"async"),s.hc(8,"async"),s.hc(9,"async"),s.hc(10,"async"),s.Nc(11,Js,3,0,"button",7),s.Qb(12,"mat-divider"),s.Nc(13,Gs,2,1,"button",8),s.Nc(14,Ks,2,1,"button",8),s.Ub(),s.Vb(15,"mat-menu",null,9),s.Nc(17,na,3,4,"ng-container",3),s.Nc(18,ra,5,6,"button",10),s.Ub(),s.Vb(19,"mat-menu",null,11),s.Vb(21,"button",12),s.cc("click",(function(){return t.handleTutorialClick()})),s.hc(22,"async"),s.Pc(23," Launch Tutorial "),s.Ub(),s.Vb(24,"button",13),s.cc("click",(function(){return t.handleHelpBasicsClick()})),s.Pc(25," 3D Navigation Basics "),s.Ub(),s.Vb(26,"button",14),s.cc("click",(function(){return t.handleHelpShortcutsClick()})),s.Pc(27," Keyboard Shortcuts "),s.Ub(),s.Ub()),2&e){const e=s.yc(2);let n=null;s.mc("matMenuTriggerFor",e)("fill",!0),s.Db(3),s.mc("ngIf",t.isEnabled(t.viewUI.Search)),s.Db(1),s.mc("ngIf",t.visibilityLayersVisible),s.Db(1),s.mc("ngIf",t.isEnabled(t.viewUI.Whiteboard)),s.Db(1),s.mc("ngIf",s.ic(7,12,t.hasQuiz$)&&s.ic(8,14,t.quizEnabled$)&&!s.ic(9,16,t.quizLocked$)&&s.ic(10,18,t.selectedBookmarkViewMode$)!==t.bookmarkViewMode.Content),s.Db(5),s.mc("ngIf",t.isVisible(t.viewUI.ScrubberItem)),s.Db(2),s.mc("ngIf",t.isEnabled(t.viewUI.Fullscreen)||t.isEnabled(t.viewUI.ToggleLabels)),s.Db(1),s.mc("ngIf",t.isEnabled(t.viewUI.Help)),s.Db(3),s.mc("ngIf",t.isEnabled(t.viewUI.Fullscreen)),s.Db(1),s.mc("ngIf",t.isEnabled(t.viewUI.ToggleLabels)),s.Db(3),s.mc("disabled",!(null!=(n=s.ic(22,20,t.selectedChapterReady$))&&n.model))}},directives:[Ce.a,Ct.c,De.d,De.a,i.p,As.a,De.b,Oe.a,Uo.a],pipes:[i.b],styles:[".view-menu__icon[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;width:16px}"],changeDetection:0}),Qs([Object(g.e)($s.a.getSelectedBookmarkViewMode),qs("design:type",$.a)],e.prototype,"selectedBookmarkViewMode$",void 0),Qs([Object(g.e)(ee.a.getSelectedChapterReadyState),qs("design:type",$.a)],e.prototype,"selectedChapterReady$",void 0),Qs([Object(g.e)(fe.b.hasQuiz),qs("design:type",$.a)],e.prototype,"hasQuiz$",void 0),Qs([Object(g.e)(fe.b.getQuizEnabled),qs("design:type",$.a)],e.prototype,"quizEnabled$",void 0),Qs([Object(g.e)(fe.b.getQuizModeLocked),qs("design:type",$.a)],e.prototype,"quizLocked$",void 0),Qs([Object(g.e)(fe.b.getQuizModeActive),qs("design:type",$.a)],e.prototype,"quizActive$",void 0),Qs([Object(g.e)(Lt.a.getShowLabels),qs("design:type",$.a)],e.prototype,"showLabels$",void 0),e})();var aa=n("XiU4"),ca=n("XqAe"),la=n("vm16"),pa=n("ZR5G");let ha=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-button-loader"]],decls:5,vars:0,consts:[["tabindex","0","type","button","aria-label","Interact in 3D","type","button",1,"button-loader"],[1,"button-loader__button"],["src","assets/images/widget/loading_experience/interact-in-3d-arrow.svg","alt","Interact in 3D",1,"button-loader__3d-arrow"],[1,"button-loader__label"]],template:function(e,t){1&e&&(s.Vb(0,"button",0),s.Vb(1,"div",1),s.Qb(2,"img",2),s.Vb(3,"div",3),s.Pc(4,"Interact in 3D"),s.Ub(),s.Ub(),s.Ub())},styles:[".m-1[_ngcontent-%COMP%]{margin:4px!important}.mv-1[_ngcontent-%COMP%]{margin-top:4px!important;margin-bottom:4px!important}.mh-1[_ngcontent-%COMP%]{margin-left:4px!important;margin-right:4px!important}.mt-1[_ngcontent-%COMP%]{margin-top:4px!important}.mr-1[_ngcontent-%COMP%]{margin-right:4px!important}.mb-1[_ngcontent-%COMP%]{margin-bottom:4px!important}.ml-1[_ngcontent-%COMP%]{margin-left:4px!important}.p-1[_ngcontent-%COMP%]{padding:4px!important}.pv-1[_ngcontent-%COMP%]{padding-top:4px!important;padding-bottom:4px!important}.ph-1[_ngcontent-%COMP%]{padding-left:4px!important;padding-right:4px!important}.pt-1[_ngcontent-%COMP%]{padding-top:4px!important}.pr-1[_ngcontent-%COMP%]{padding-right:4px!important}.pb-1[_ngcontent-%COMP%]{padding-bottom:4px!important}.pl-1[_ngcontent-%COMP%]{padding-left:4px!important}.m-2[_ngcontent-%COMP%]{margin:8px!important}.mv-2[_ngcontent-%COMP%]{margin-top:8px!important;margin-bottom:8px!important}.mh-2[_ngcontent-%COMP%]{margin-left:8px!important;margin-right:8px!important}.mt-2[_ngcontent-%COMP%]{margin-top:8px!important}.mr-2[_ngcontent-%COMP%]{margin-right:8px!important}.mb-2[_ngcontent-%COMP%]{margin-bottom:8px!important}.ml-2[_ngcontent-%COMP%]{margin-left:8px!important}.p-2[_ngcontent-%COMP%]{padding:8px!important}.pv-2[_ngcontent-%COMP%]{padding-top:8px!important;padding-bottom:8px!important}.ph-2[_ngcontent-%COMP%]{padding-left:8px!important;padding-right:8px!important}.pt-2[_ngcontent-%COMP%]{padding-top:8px!important}.pr-2[_ngcontent-%COMP%]{padding-right:8px!important}.pb-2[_ngcontent-%COMP%]{padding-bottom:8px!important}.pl-2[_ngcontent-%COMP%]{padding-left:8px!important}.m-3[_ngcontent-%COMP%]{margin:12px!important}.mv-3[_ngcontent-%COMP%]{margin-top:12px!important;margin-bottom:12px!important}.mh-3[_ngcontent-%COMP%]{margin-left:12px!important;margin-right:12px!important}.mt-3[_ngcontent-%COMP%]{margin-top:12px!important}.mr-3[_ngcontent-%COMP%]{margin-right:12px!important}.mb-3[_ngcontent-%COMP%]{margin-bottom:12px!important}.ml-3[_ngcontent-%COMP%]{margin-left:12px!important}.p-3[_ngcontent-%COMP%]{padding:12px!important}.pv-3[_ngcontent-%COMP%]{padding-top:12px!important;padding-bottom:12px!important}.ph-3[_ngcontent-%COMP%]{padding-left:12px!important;padding-right:12px!important}.pt-3[_ngcontent-%COMP%]{padding-top:12px!important}.pr-3[_ngcontent-%COMP%]{padding-right:12px!important}.pb-3[_ngcontent-%COMP%]{padding-bottom:12px!important}.pl-3[_ngcontent-%COMP%]{padding-left:12px!important}.m-4[_ngcontent-%COMP%]{margin:16px!important}.mv-4[_ngcontent-%COMP%]{margin-top:16px!important;margin-bottom:16px!important}.mh-4[_ngcontent-%COMP%]{margin-left:16px!important;margin-right:16px!important}.mt-4[_ngcontent-%COMP%]{margin-top:16px!important}.mr-4[_ngcontent-%COMP%]{margin-right:16px!important}.mb-4[_ngcontent-%COMP%]{margin-bottom:16px!important}.ml-4[_ngcontent-%COMP%]{margin-left:16px!important}.p-4[_ngcontent-%COMP%]{padding:16px!important}.pv-4[_ngcontent-%COMP%]{padding-top:16px!important;padding-bottom:16px!important}.ph-4[_ngcontent-%COMP%]{padding-left:16px!important;padding-right:16px!important}.pt-4[_ngcontent-%COMP%]{padding-top:16px!important}.pr-4[_ngcontent-%COMP%]{padding-right:16px!important}.pb-4[_ngcontent-%COMP%]{padding-bottom:16px!important}.pl-4[_ngcontent-%COMP%]{padding-left:16px!important}.m-5[_ngcontent-%COMP%]{margin:20px!important}.mv-5[_ngcontent-%COMP%]{margin-top:20px!important;margin-bottom:20px!important}.mh-5[_ngcontent-%COMP%]{margin-left:20px!important;margin-right:20px!important}.mt-5[_ngcontent-%COMP%]{margin-top:20px!important}.mr-5[_ngcontent-%COMP%]{margin-right:20px!important}.mb-5[_ngcontent-%COMP%]{margin-bottom:20px!important}.ml-5[_ngcontent-%COMP%]{margin-left:20px!important}.p-5[_ngcontent-%COMP%]{padding:20px!important}.pv-5[_ngcontent-%COMP%]{padding-top:20px!important;padding-bottom:20px!important}.ph-5[_ngcontent-%COMP%]{padding-left:20px!important;padding-right:20px!important}.pt-5[_ngcontent-%COMP%]{padding-top:20px!important}.pr-5[_ngcontent-%COMP%]{padding-right:20px!important}.pb-5[_ngcontent-%COMP%]{padding-bottom:20px!important}.pl-5[_ngcontent-%COMP%]{padding-left:20px!important}.m-6[_ngcontent-%COMP%]{margin:24px!important}.mv-6[_ngcontent-%COMP%]{margin-top:24px!important;margin-bottom:24px!important}.mh-6[_ngcontent-%COMP%]{margin-left:24px!important;margin-right:24px!important}.mt-6[_ngcontent-%COMP%]{margin-top:24px!important}.mr-6[_ngcontent-%COMP%]{margin-right:24px!important}.mb-6[_ngcontent-%COMP%]{margin-bottom:24px!important}.ml-6[_ngcontent-%COMP%]{margin-left:24px!important}.p-6[_ngcontent-%COMP%]{padding:24px!important}.pv-6[_ngcontent-%COMP%]{padding-top:24px!important;padding-bottom:24px!important}.ph-6[_ngcontent-%COMP%]{padding-left:24px!important;padding-right:24px!important}.pt-6[_ngcontent-%COMP%]{padding-top:24px!important}.pr-6[_ngcontent-%COMP%]{padding-right:24px!important}.pb-6[_ngcontent-%COMP%]{padding-bottom:24px!important}.pl-6[_ngcontent-%COMP%]{padding-left:24px!important}.m-7[_ngcontent-%COMP%]{margin:28px!important}.mv-7[_ngcontent-%COMP%]{margin-top:28px!important;margin-bottom:28px!important}.mh-7[_ngcontent-%COMP%]{margin-left:28px!important;margin-right:28px!important}.mt-7[_ngcontent-%COMP%]{margin-top:28px!important}.mr-7[_ngcontent-%COMP%]{margin-right:28px!important}.mb-7[_ngcontent-%COMP%]{margin-bottom:28px!important}.ml-7[_ngcontent-%COMP%]{margin-left:28px!important}.p-7[_ngcontent-%COMP%]{padding:28px!important}.pv-7[_ngcontent-%COMP%]{padding-top:28px!important;padding-bottom:28px!important}.ph-7[_ngcontent-%COMP%]{padding-left:28px!important;padding-right:28px!important}.pt-7[_ngcontent-%COMP%]{padding-top:28px!important}.pr-7[_ngcontent-%COMP%]{padding-right:28px!important}.pb-7[_ngcontent-%COMP%]{padding-bottom:28px!important}.pl-7[_ngcontent-%COMP%]{padding-left:28px!important}.m-8[_ngcontent-%COMP%]{margin:32px!important}.mv-8[_ngcontent-%COMP%]{margin-top:32px!important;margin-bottom:32px!important}.mh-8[_ngcontent-%COMP%]{margin-left:32px!important;margin-right:32px!important}.mt-8[_ngcontent-%COMP%]{margin-top:32px!important}.mr-8[_ngcontent-%COMP%]{margin-right:32px!important}.mb-8[_ngcontent-%COMP%]{margin-bottom:32px!important}.ml-8[_ngcontent-%COMP%]{margin-left:32px!important}.p-8[_ngcontent-%COMP%]{padding:32px!important}.pv-8[_ngcontent-%COMP%]{padding-top:32px!important;padding-bottom:32px!important}.ph-8[_ngcontent-%COMP%]{padding-left:32px!important;padding-right:32px!important}.pt-8[_ngcontent-%COMP%]{padding-top:32px!important}.pr-8[_ngcontent-%COMP%]{padding-right:32px!important}.pb-8[_ngcontent-%COMP%]{padding-bottom:32px!important}.pl-8[_ngcontent-%COMP%]{padding-left:32px!important}.m-9[_ngcontent-%COMP%]{margin:36px!important}.mv-9[_ngcontent-%COMP%]{margin-top:36px!important;margin-bottom:36px!important}.mh-9[_ngcontent-%COMP%]{margin-left:36px!important;margin-right:36px!important}.mt-9[_ngcontent-%COMP%]{margin-top:36px!important}.mr-9[_ngcontent-%COMP%]{margin-right:36px!important}.mb-9[_ngcontent-%COMP%]{margin-bottom:36px!important}.ml-9[_ngcontent-%COMP%]{margin-left:36px!important}.p-9[_ngcontent-%COMP%]{padding:36px!important}.pv-9[_ngcontent-%COMP%]{padding-top:36px!important;padding-bottom:36px!important}.ph-9[_ngcontent-%COMP%]{padding-left:36px!important;padding-right:36px!important}.pt-9[_ngcontent-%COMP%]{padding-top:36px!important}.pr-9[_ngcontent-%COMP%]{padding-right:36px!important}.pb-9[_ngcontent-%COMP%]{padding-bottom:36px!important}.pl-9[_ngcontent-%COMP%]{padding-left:36px!important}.m-10[_ngcontent-%COMP%]{margin:40px!important}.mv-10[_ngcontent-%COMP%]{margin-top:40px!important;margin-bottom:40px!important}.mh-10[_ngcontent-%COMP%]{margin-left:40px!important;margin-right:40px!important}.mt-10[_ngcontent-%COMP%]{margin-top:40px!important}.mr-10[_ngcontent-%COMP%]{margin-right:40px!important}.mb-10[_ngcontent-%COMP%]{margin-bottom:40px!important}.ml-10[_ngcontent-%COMP%]{margin-left:40px!important}.p-10[_ngcontent-%COMP%]{padding:40px!important}.pv-10[_ngcontent-%COMP%]{padding-top:40px!important;padding-bottom:40px!important}.ph-10[_ngcontent-%COMP%]{padding-left:40px!important;padding-right:40px!important}.pt-10[_ngcontent-%COMP%]{padding-top:40px!important}.pr-10[_ngcontent-%COMP%]{padding-right:40px!important}.pb-10[_ngcontent-%COMP%]{padding-bottom:40px!important}.pl-10[_ngcontent-%COMP%]{padding-left:40px!important}.text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.button-loader[_ngcontent-%COMP%]{border:0;width:100%;background:rgba(0,0,0,.2);display:flex;position:fixed;justify-content:center;align-items:center;top:0;bottom:0;left:0;right:0;transition:background-color .25s,opacity .25s;z-index:10000}.button-loader[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:rgba(0,0,0,.2)}@media print{.button-loader[_ngcontent-%COMP%]{display:none}}.button-loader[_ngcontent-%COMP%]:focus   .button-loader__button[_ngcontent-%COMP%], .button-loader[_ngcontent-%COMP%]:hover   .button-loader__button[_ngcontent-%COMP%]{background-color:#2d72dc;transform:scale(1.1)}.button-loader[_ngcontent-%COMP%]:focus   .button-loader__3d-arrow[_ngcontent-%COMP%], .button-loader[_ngcontent-%COMP%]:hover   .button-loader__3d-arrow[_ngcontent-%COMP%]{transform:scale(1.2)}.button-loader__button[_ngcontent-%COMP%]{display:flex;padding:12px 28px;border-radius:32px;align-items:center;transition:transform .25s,background-color .25s;background-color:rgba(16,24,35,.8)}.button-loader__3d-arrow[_ngcontent-%COMP%]{transition:transform .25s;margin-right:4px}.button-loader__label[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em;color:#fff;font-weight:600;margin-left:4px}"],changeDetection:0}),e})(),ga=(()=>{class e{constructor(e,t,n,i){this.changeRef=e,this.viewService=t,this.bookmarksService=n,this.imagesService=i,this.thumbnailURL=""}ngOnInit(){this.setThumbnailUrl()}handleClick(){this.viewService.toggleOnDemand(!1)}setThumbnailUrl(){this.contentType===pa.a.Bookmark?this.bookmarksService.getBookmarkModel(this.contentId).subscribe(e=>{this.thumbnailURL=e.thumbnail_url,this.changeRef.markForCheck()}):(this.thumbnailURL=this.imagesService.getIndexThumbnail(this.contentId),this.changeRef.markForCheck())}getPoweredByUrl(){return("undefined"==typeof localBaseDirectory?"":localBaseDirectory)+"assets/images/powered-by-biodigital-logo.svg"}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.i),s.Pb(ve.a),s.Pb(ca.a),s.Pb(la.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-ondemand"]],inputs:{contentId:"contentId",contentType:"contentType"},decls:5,vars:2,consts:[[1,"ondemand",3,"click"],[1,"ondemand__image",3,"lazyLoad"],[1,"ondemand__logo"],[3,"src"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.cc("click",(function(){return t.handleClick()})),s.Qb(1,"div",1),s.Qb(2,"app-button-loader"),s.Vb(3,"div",2),s.Qb(4,"img",3),s.Ub(),s.Ub()),2&e&&(s.Db(1),s.mc("lazyLoad",t.thumbnailURL),s.Db(3),s.mc("src",t.getPoweredByUrl(),s.Fc))},directives:[w.a,ha],styles:[".ondemand__image[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;background-size:cover;background-repeat:no-repeat;background-position:50%;filter:blur(6px)}.ondemand__logo[_ngcontent-%COMP%]{position:absolute;bottom:40px;justify-content:center;width:100%;z-index:20000;display:flex}"],changeDetection:0}),e})();const da=["circle"],ua=["progressCircle"],ba=["progressContainer"];function xa(e,t){if(1&e&&(s.fc(),s.ec(),s.Vb(0,"div",9),s.Pc(1),s.Ub()),2&e){const e=s.gc();s.Db(1),s.Rc("",e.percent,"%")}}const fa=function(e){return{"view-progress--active":e}},ma=function(e){return{"view-progress__ring--pulse":e}};let va=(()=>{class e{constructor(e,t){this.renderer=e,this.changeDetectorRef=t,this.ngUnsubscribe=new R.a,this.label="Loading...",this._show=!1,this._percent=new Fo.a(0)}get show(){return this._show}set show(e){setTimeout(()=>{this._show=e,this.changeDetectorRef.markForCheck()})}get percent(){return Math.floor(this._percent.value)}set percent(e){null!=e&&this._percent.next(e)}ngOnInit(){this.initSizeObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.updateDimensions(),this.initPercentObserver()}initPercentObserver(){this._percent.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.label=this.getLoadingLabel(this.percent),this.renderProgress(0===this.percent?100:this.percent),this.changeDetectorRef.markForCheck()})}initSizeObserver(){Object(E.a)(window,"resize").pipe(Object(W.a)(10),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.updateDimensions()})}calculateRadius(){return this.getCircleWidth()/2}getCircleWidth(){return this.circleRef.nativeElement.offsetWidth}getRadius(){return this.progressCircleRef.nativeElement.r.baseVal.value}getCircumference(){return 2*this.getRadius()*Math.PI}getOffset(e=100){const t=this.getCircumference();return t-e/100*t}renderProgress(e){e>=100&&(e=100);const t=this.getCircumference(),n=this.getOffset(e);this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${t} ${t}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",""+n)}getLoadingLabel(e){return 100===e?"Launching...":"Loading..."}updateDimensions(){const e=this.calculateRadius();this.renderer.setAttribute(this.progressContainerRef.nativeElement,"width",""+2*e),this.renderer.setAttribute(this.progressContainerRef.nativeElement,"height",""+2*e),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"r",""+(e-6)),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"cx",""+e),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"cy",""+e);const t=this.getCircumference();this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${t} ${t}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",""+t)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.H),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-progress"]],viewQuery:function(e,t){if(1&e&&(s.Jc(da,!0),s.Jc(ua,!0),s.Jc(ba,!0)),2&e){let e;s.xc(e=s.dc())&&(t.circleRef=e.first),s.xc(e=s.dc())&&(t.progressCircleRef=e.first),s.xc(e=s.dc())&&(t.progressContainerRef=e.first)}},inputs:{show:"show",percent:"percent"},decls:10,vars:10,consts:[["data-test","viewProgress","role","alert",1,"view-progress",3,"ngClass"],["aria-hidden","true",1,"view-progress__circle"],["circle",""],[1,"view-progress__ring",3,"ngClass"],["progressContainer",""],[1,"view-progress__ring-inner"],["progressCircle",""],["class","view-progress__count",4,"ngIf"],[1,"view-progress__label"],[1,"view-progress__count"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"div",1,2),s.fc(),s.Vb(3,"svg",3,4),s.Qb(5,"circle",5,6),s.Ub(),s.Nc(7,xa,2,1,"div",7),s.ec(),s.Vb(8,"div",8),s.Pc(9),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.mc("ngClass",s.pc(6,fa,t.show)),s.Eb("aria-busy",t.show),s.Db(1),s.mc("@isOpen",t.show?"open":"closed"),s.Db(2),s.mc("ngClass",s.pc(8,ma,0===t.percent||100===t.percent)),s.Db(4),s.mc("ngIf",t.percent>0&&t.percent<100),s.Db(2),s.Rc(" ",t.label," "))},directives:[i.m,i.p],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.view-progress[_ngcontent-%COMP%]{--circleSize:35vw;pointer-events:none;position:absolute;display:flex;justify-content:center;align-items:center;left:0;right:0;top:0;bottom:0;z-index:1000;transition:background-color .15s}@-webkit-keyframes progressPulse{0%{stroke-width:4}50%{stroke-width:1}to{stroke-width:4}}@keyframes progressPulse{0%{stroke-width:4}50%{stroke-width:1}to{stroke-width:4}}.view-progress--active[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.2)}.view-progress__circle[_ngcontent-%COMP%]{transform:scale(0);width:var(--circleSize);height:var(--circleSize);border-radius:50%;background-color:rgba(16,24,35,.8);display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative}.view-progress__count[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em;color:#fff;font-weight:700}.view-progress__label[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em;color:hsla(0,0%,100%,.8)}.view-progress__ring[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:3;opacity:1;stroke-dashoffset:0;stroke-width:4;stroke:hsla(0,0%,100%,.8);fill:transparent;transform:rotate(-90deg)}.view-progress__ring--pulse[_ngcontent-%COMP%]{-webkit-animation:progressPulse 2s ease-in-out infinite;animation:progressPulse 2s ease-in-out infinite}@media (min-width:600px){.view-progress__circle[_ngcontent-%COMP%]{width:160px;height:160px}}"],data:{animation:[Object(eo.n)("isOpen",[Object(eo.k)("open",Object(eo.l)({transform:"scale(1)"})),Object(eo.k)("closed",Object(eo.l)({transform:"scale(0)"})),Object(eo.m)("closed => open",[Object(eo.e)("300ms ease-out")]),Object(eo.m)("open => closed",[Object(eo.e)("150ms ease-in")])])]},changeDetection:0}),e})();const wa=["viewLoader"],ya=["*"];let _a=(()=>{class e{constructor(e,t,n){this.renderer=e,this.viewService=t,this.actions=n,this.ngUnsubscribe=new R.a}handleClick(){this.renderer.addClass(this.viewLoaderRef.nativeElement,"view-loader--disappear"),setTimeout(()=>{this.viewService.toggleInteract(!1),this.viewService.playChapterFromStart()},250)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.H),s.Pb(ve.a),s.Pb(g.b))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-loader"]],viewQuery:function(e,t){if(1&e&&s.Jc(wa,!0),2&e){let e;s.xc(e=s.dc())&&(t.viewLoaderRef=e.first)}},ngContentSelectors:ya,decls:4,vars:0,consts:[["role","dialog",1,"view-loader"],["viewLoader",""],["role","button",3,"click"]],template:function(e,t){1&e&&(s.lc(),s.Vb(0,"div",0,1),s.Vb(2,"div",2),s.cc("click",(function(){return t.handleClick()})),s.kc(3),s.Ub(),s.Ub())},styles:[""],encapsulation:2,changeDetection:0}),e})();const Ca=["circle"],Oa=["progressCircle"],Pa=["progressContainer"];let Ma=(()=>{class e{constructor(e){this.renderer=e,this.ngUnsubscribe=new R.a,this._percent=0}get percent(){return this._percent}set percent(e){null!=e&&(this._percent=e,this.setProgress(this.percent))}ngOnInit(){this.initSizeObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.updateDimensions()}initSizeObserver(){Object(E.a)(window,"resize").pipe(Object(W.a)(10),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.updateDimensions()})}calculateRadius(){return this.getCircleWidth()/2}getCircleWidth(){return this.circleRef.nativeElement.offsetWidth}getRadius(){return this.progressCircleRef.nativeElement.r.baseVal.value}getCircumference(){return 2*this.getRadius()*Math.PI}getOffset(e=100){const t=this.getCircumference();return t-e/100*t}setProgress(e=0){e>=100&&(e=100);const t=this.getCircumference(),n=this.getOffset(e);this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${t} ${t}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",""+n)}updateDimensions(){const e=this.calculateRadius();this.renderer.setAttribute(this.progressContainerRef.nativeElement,"width",""+2*e),this.renderer.setAttribute(this.progressContainerRef.nativeElement,"height",""+2*e),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"r",""+(e-6)),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"cx",""+e),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"cy",""+e);const t=this.getCircumference();this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${t} ${t}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",""+t),setTimeout(()=>{this.renderer.setStyle(this.progressCircleRef.nativeElement,"transition","stroke-dashoffset 300ms")})}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.H))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-play-loader"]],viewQuery:function(e,t){if(1&e&&(s.Jc(Ca,!0),s.Jc(Oa,!0),s.Jc(Pa,!0)),2&e){let e;s.xc(e=s.dc())&&(t.circleRef=e.first),s.xc(e=s.dc())&&(t.progressCircleRef=e.first),s.xc(e=s.dc())&&(t.progressContainerRef=e.first)}},inputs:{percent:"percent"},decls:10,vars:0,consts:[["tabindex","0","type","button","aria-label","Interact in 3D",1,"play-loader"],[1,"play-loader__circle"],["circle",""],[1,"play-loader__ring"],["progressContainer",""],[1,"play-loader__ring-inner"],["progressCircle",""],["icon","play",1,"play-loader__icon"],[1,"play-loader__label"]],template:function(e,t){1&e&&(s.Vb(0,"button",0),s.Vb(1,"div",1,2),s.fc(),s.Vb(3,"svg",3,4),s.Qb(5,"circle",5,6),s.Ub(),s.ec(),s.Qb(7,"app-icon",7),s.Vb(8,"div",8),s.Pc(9,"3D"),s.Ub(),s.Ub(),s.Ub())},directives:[Oe.a],styles:[".play-loader[_ngcontent-%COMP%]{--buttonSize:35vw;border:0;width:100%;background:rgba(0,0,0,.2);display:flex;position:fixed;justify-content:center;align-items:center;top:0;bottom:0;left:0;right:0;transition:background-color .25s,opacity .25s;z-index:10000}.play-loader[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:rgba(0,0,0,.2)}.play-loader[_ngcontent-%COMP%]:focus   .play-loader__circle[_ngcontent-%COMP%], .play-loader[_ngcontent-%COMP%]:hover   .play-loader__circle[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.8);transform:scale(1.1)}.play-loader[_ngcontent-%COMP%]:focus   .play-loader__icon[_ngcontent-%COMP%], .play-loader[_ngcontent-%COMP%]:hover   .play-loader__icon[_ngcontent-%COMP%]{color:#2d72dc;transform:scale(1.2)}.play-loader[_ngcontent-%COMP%]:focus   .play-loader__label[_ngcontent-%COMP%], .play-loader[_ngcontent-%COMP%]:hover   .play-loader__label[_ngcontent-%COMP%]{color:#fff}.play-loader[_ngcontent-%COMP%]:focus   .play-loader__ring[_ngcontent-%COMP%], .play-loader[_ngcontent-%COMP%]:hover   .play-loader__ring[_ngcontent-%COMP%]{stroke:#2d72dc}.play-loader__circle[_ngcontent-%COMP%]{width:var(--buttonSize);height:var(--buttonSize);border-radius:50%;background-color:rgba(16,24,35,.8);display:flex;align-items:center;justify-content:center;position:relative;transition:background-color .25s,color .25s,transform .25s}.play-loader__icon[_ngcontent-%COMP%]{font-size:calc(var(--buttonSize) / 2);color:hsla(0,0%,100%,.9);transition:color .25s,transform .25s;margin-right:-10%}.play-loader__label[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:2;font-weight:600}.play-loader__ring[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:3;stroke-width:4;stroke:#fff;fill:transparent;transform:rotate(-90deg)}@media (min-width:600px){.play-loader__circle[_ngcontent-%COMP%]{width:160px;height:160px}.play-loader__icon[_ngcontent-%COMP%]{font-size:80px}}"],changeDetection:0}),e})(),ka=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-hand-loader"]],decls:6,vars:0,consts:[["tabindex","0","type","button","aria-label","Interact in 3D",1,"hand-loader"],[1,"hand-loader__container"],[1,"hand-loader__circle"],["src","assets/images/widget/loading_experience/interact-in-3d-hand.svg","alt","Interact in 3D",1,"hand-loader__3d-hand"],[1,"hand-loader__label"]],template:function(e,t){1&e&&(s.Vb(0,"button",0),s.Vb(1,"div",1),s.Qb(2,"div",2),s.Qb(3,"img",3),s.Vb(4,"div",4),s.Pc(5,"Interact in 3D"),s.Ub(),s.Ub(),s.Ub())},styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.hand-loader[_ngcontent-%COMP%]{border:0;width:100%;background:rgba(0,0,0,.2);display:flex;position:fixed;justify-content:center;align-items:center;top:0;bottom:0;left:0;right:0;transition:background-color .25s,opacity .25s;z-index:10000}.hand-loader[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:rgba(0,0,0,.2)}@-webkit-keyframes handKeyframes{0%{transform:scale(1.2)}25%{transform:scale(1)}40%{transform:scale(1)}60%{transform:scale(1.2)}to{transform:scale(1.2)}}@keyframes handKeyframes{0%{transform:scale(1.2)}25%{transform:scale(1)}40%{transform:scale(1)}60%{transform:scale(1.2)}to{transform:scale(1.2)}}@-webkit-keyframes circleKeyframes{0%{transform:scale(0)}20%{transform:scale(0);opacity:1}to{transform:scale(1);opacity:0}}@keyframes circleKeyframes{0%{transform:scale(0)}20%{transform:scale(0);opacity:1}to{transform:scale(1);opacity:0}}.hand-loader[_ngcontent-%COMP%]:focus   .hand-loader__3d-hand[_ngcontent-%COMP%], .hand-loader[_ngcontent-%COMP%]:hover   .hand-loader__3d-hand[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px #2d72dc)}.hand-loader__container[_ngcontent-%COMP%]{position:relative;width:200px;height:200px}.hand-loader__circle[_ngcontent-%COMP%]{background-color:#fff;position:absolute;left:50%;margin-left:-40.5px;margin-top:-1.5px;width:70px;height:70px;border-radius:50%;-webkit-animation:circleKeyframes 2s infinite;animation:circleKeyframes 2s infinite}.hand-loader__3d-hand[_ngcontent-%COMP%]{-webkit-animation:handKeyframes 2s ease-in-out infinite;animation:handKeyframes 2s ease-in-out infinite;position:absolute;height:96px;width:86px;left:50%;margin-left:-43px;margin-top:27px;transition:filter .3s ease-out}.hand-loader__label[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em;font-weight:600;color:#fff;text-shadow:0 1px 5px #000;bottom:40px;position:absolute;text-align:center;width:100%}"],changeDetection:0}),e})();var za=n("5nh7");const Sa=["app-view-rounded-button",""];function Da(e,t){if(1&e&&s.Qb(0,"app-icon",3),2&e){const e=s.gc();s.mc("icon",e.icon)}}let ja=(()=>{class e{constructor(){this.iconPlacement="left",this.compact=!1,this.buttonType="outline"}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["button","app-view-rounded-button",""]],inputs:{icon:"icon",iconPlacement:"iconPlacement",label:"label",compact:"compact",buttonType:"buttonType",shadow:"shadow"},attrs:Sa,decls:4,vars:12,consts:[[1,"view-rounded-button"],["class","view-rounded-button__icon mh-1",3,"icon",4,"ngIf"],[1,"view-rounded-button__label","mh-1"],[1,"view-rounded-button__icon","mh-1",3,"icon"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Nc(1,Da,1,1,"app-icon",1),s.Vb(2,"div",2),s.Pc(3),s.Ub(),s.Ub()),2&e&&(s.Hb("view-rounded-button--outline","outline"===t.buttonType)("view-rounded-button--solid","solid"===t.buttonType)("view-rounded-button--shadow",t.shadow)("view-rounded-button--compact",t.compact)("view-rounded-button--reverse","right"===t.iconPlacement),s.Db(1),s.mc("ngIf",t.icon),s.Db(2),s.Qc(t.label))},directives:[i.p,Oe.a],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}button[app-view-rounded-button]{border-color:transparent;background:none;border-width:0;padding:0;outline:none;margin:0;pointer-events:all}button[app-view-rounded-button]:focus .view-rounded-button,button[app-view-rounded-button]:hover .view-rounded-button{color:#f9fafd;border-color:#f9fafd;background:rgba(249,250,253,.25)}button[app-view-rounded-button]:focus .view-rounded-button--solid,button[app-view-rounded-button]:hover .view-rounded-button--solid{border-color:rgba(249,250,253,.25)}.view-rounded-button{cursor:pointer;display:flex;flex-direction:row;align-items:center;justify-content:center;padding:12px 16px;border-radius:24px;color:#f9fafd;border:1px solid #f9fafd}.view-rounded-button__label{font-size:16px;letter-spacing:.4px;line-height:1.4em}.view-rounded-button--solid{color:#060502;border-color:#060502;background:#f9fafd}.view-rounded-button--shadow{box-shadow:0 0 8px rgba(0,0,0,.32)}.view-rounded-button--reverse{flex-direction:row-reverse}.view-rounded-button--compact{padding:4px 8px}"],encapsulation:2,changeDetection:0}),e})();var Ua=function(e){return e.CameraZoom="camera-zoom",e.CameraRotate="camera-rotate",e.CameraPan="camera-pan",e.NodeSelection="node-selection",e}({}),Ia=n("937/"),Ta=n("5+tZ"),Va=n("IOcx"),Ra=n("YLgZ");function Ea(e,t,n=1e3,i=.001){return Na(e).pipe(Object(Ir.a)(t.getCameraZoom()),Object(G.a)(()=>t.getCameraZoom()),Object(J.a)(),Object(G.a)(([e,t])=>t-e),Object(F.a)(e=>Math.abs(e)>i),Object(W.a)(n))}function La(e,t,n=125){return Na(e).pipe(Object(Ir.a)(t.getLookDirection()),Object(G.a)(()=>t.getLookDirection()),Object(J.a)(),Object(G.a)(([e,t])=>function(e,t){return Va.a.angle(e,t)>.001}(e,t)),Object(F.a)(e=>e),Object(W.a)(n))}function $a(e){return{camera:e.getCamera(),zoom:e.getCameraZoom()}}function Na(e){return e.getEvent(It.a.CameraRested)}function Aa(e){const{eye:t,look:n}=e,i=Va.a.fromValues(t.x,t.y,t.z),o=Va.a.fromValues(n.x,n.y,n.z),r=Va.a.create();return Va.a.sub(r,i,o),r}var Qa=n("zx2A");class qa{constructor(e){this.notifier=e}call(e,t){return t.subscribe(new Fa(e,this.notifier))}}class Fa extends Qa.b{constructor(e,t){super(e),this.hasValue=!1;const n=new Qa.a(this);this.add(n),this.innerSubscription=n;const i=Object(Qa.c)(t,n);i!==n&&(this.add(i),this.innerSubscription=i)}_next(e){this.hasValue&&super._next(e)}notifyNext(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()}notifyComplete(){}}function Ha(e,t){if(1&e&&(s.Vb(0,"h2",6),s.Pc(1),s.Ub()),2&e){const e=s.gc(2);s.Db(1),s.Rc(" ",e.title," ")}}function Ba(e,t){if(1&e&&s.Qb(0,"img",7),2&e){const e=s.gc(2);s.mc("src",e.image,s.Fc)("alt",e.alt)}}function Wa(e,t){if(1&e&&(s.Vb(0,"div",1),s.Nc(1,Ha,2,1,"h2",2),s.Vb(2,"article",3),s.kc(3),s.Ub(),s.Nc(4,Ba,1,2,"img",4),s.Vb(5,"div",5),s.kc(6,1),s.Ub(),s.Ub()),2&e){const e=s.gc();s.Hb("slide--expanded","expanded"===e.spacing),s.mc("@refresh",void 0),s.Db(1),s.mc("ngIf",e.title),s.Db(3),s.mc("ngIf",e.image)}}const Ja=["*",[["","slide-footer",""]]],Ga=["*","[slide-footer]"];let Ka=(()=>{class e{constructor(e,t,n,i,o){this.store=e,this.actions=t,this.engineService=n,this.cameraService=i,this.changeRef=o,this.alt="",this.spacing="compact",this.exitEnabled=!0,this.triggerDelay=300,this.triggerComplete=new s.p,this._shown=!1,this.ngUnsubscribe=new R.a}set shown(e){this._shown=e,this.initTrigger(),this.changeRef.markForCheck()}get shown(){return this._shown}ngOnInit(){}ngAfterViewInit(){this.initTrigger()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initTrigger(){if(this.ngUnsubscribe.next(),this.shown&&this.trigger){const t=this.resetCamera(),n=this.store.selectSnapshot(d.a.getCanTouch);(function(e,t,n,i,o){switch(e){case Ua.CameraZoom:return o?Ea(n,i):function(e,t,n=1e3,i=.001){const o=e.getCanvas(),r=Object(E.a)(o,"wheel"),s=Object(E.a)(o,"touchmove").pipe(Object(F.a)(e=>2===e.touches.length)),a=Ea(e,t,n,i);return Object(N.a)(r,s).pipe(Object(Ta.a)(()=>a))}(n,i);case Ua.CameraPan:return function(e,t,n=125){const i=e.getCanvas(),o=Object(E.a)(i,"mousemove").pipe(Object(F.a)(e=>1===e.buttons&&e.shiftKey||2===e.buttons||4===e.buttons)),r=Object(E.a)(i,"touchmove").pipe(Object(F.a)(e=>2===e.touches.length)),s=function(e,t,n=125){return Na(e).pipe(Object(Ir.a)($a(t)),Object(G.a)(()=>$a(t)),Object(W.a)(n),Object(J.a)(),Object(G.a)(([e,t])=>function(e,t){const n=Aa(e.camera),i=Aa(t.camera),o=Va.a.create();Va.a.sub(o,n,i);const r=o.reduce((e,t)=>e+t),s=t.zoom-e.zoom;return(0!==s||0!==r)&&Math.abs(r)<1&&Math.abs(s)<.001}(e,t)),Object(F.a)(e=>e))}(e,t,n);return Object(N.a)(o,r).pipe(Object(Ta.a)(()=>s))}(n,i);case Ua.CameraRotate:return o?La(n,i):function(e,t,n,i=1e3){const o=t.getCanvas(),r=Object(E.a)(o,"mousemove").pipe(Object(F.a)(e=>1===e.buttons)),s=Object(E.a)(o,"touchmove").pipe(Object(F.a)(e=>1===e.touches.length)),a=La(t,n,i);return Object(N.a)(r,s).pipe(Object(Ta.a)(()=>a),Object(F.a)(()=>"rotate"===e.selectSnapshot(Ra.a.getPanMode)),Object(W.a)(125))}(t,n,i);case Ua.NodeSelection:return function(e){return e.select($t.a.getCheckedNodes).pipe(Object(J.a)(),Object(F.a)(([e,t])=>t.length>0))}(t)}})(this.trigger,this.store,this.engineService,this.cameraService,n).pipe((e=t,t=>t.lift(new qa(e))),Object(ge.a)(this.triggerDelay),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.triggerComplete.next()})}var e}resetCamera(){const e=this.store.selectSnapshot(ee.a.getSelectedChapter);return this.store.dispatch(new Tt.l(e.camera.location,!0)).pipe(Object(Ta.a)(()=>this.actions.pipe(Object(g.l)(Tt.o))),Object(H.a)(1))}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(g.b),s.Pb(qt.a),s.Pb(Ia.a),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-tour-slide"]],inputs:{title:"title",image:"image",alt:"alt",spacing:"spacing",shown:"shown",exitEnabled:"exitEnabled",trigger:"trigger",triggerDelay:"triggerDelay"},outputs:{triggerComplete:"triggerComplete"},ngContentSelectors:Ga,decls:1,vars:1,consts:[["class","slide",3,"slide--expanded",4,"ngIf"],[1,"slide"],["class","slide__title",4,"ngIf"],[1,"slide__content"],["class","slide__image",3,"src","alt",4,"ngIf"],[1,"slide__footer"],[1,"slide__title"],[1,"slide__image",3,"src","alt"]],template:function(e,t){1&e&&(s.lc(Ja),s.Nc(0,Wa,7,5,"div",0)),2&e&&s.mc("ngIf",t.shown)},directives:[i.p],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.slide[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;max-width:500px}.slide__title[_ngcontent-%COMP%]{font-weight:600;font-size:18px;letter-spacing:.45px}.slide__content[_ngcontent-%COMP%], .slide__title[_ngcontent-%COMP%]{margin-bottom:16px;line-height:1.4em}.slide__content[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.5em;max-width:100%}.slide__image[_ngcontent-%COMP%]{margin:24px auto;max-width:100%;min-height:1px}.slide__footer[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em;font-weight:500;display:flex;flex-direction:row;align-items:center;justify-content:center;max-width:100%}.slide--expanded[_ngcontent-%COMP%]   .slide__title[_ngcontent-%COMP%]{margin:16px}.slide--expanded[_ngcontent-%COMP%]   .slide__content[_ngcontent-%COMP%]{margin:48px}.slide--expanded[_ngcontent-%COMP%]   .slide__image[_ngcontent-%COMP%]{margin:48px auto}@media (max-width:768px){.slide[_ngcontent-%COMP%]{max-width:400px}.slide__image[_ngcontent-%COMP%]{margin:16px}.slide__title[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em;margin-bottom:12px}.slide__content[_ngcontent-%COMP%]{margin-bottom:12px}.slide__content[_ngcontent-%COMP%], .slide__footer[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}}@media (max-width:640px){.slide[_ngcontent-%COMP%]{max-width:320px}}@media (max-width:480px){.slide[_ngcontent-%COMP%]{max-width:240px}.slide__title[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px}.slide__content[_ngcontent-%COMP%], .slide__title[_ngcontent-%COMP%]{line-height:1.4em;margin-bottom:8px}.slide__content[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px}.slide__image[_ngcontent-%COMP%]{margin:4px auto}.slide__footer[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}}@media (max-width:320px){.slide[_ngcontent-%COMP%]{max-width:160px}}"],data:{animation:[Object(eo.n)("refresh",[Object(eo.m)(":enter",[Object(eo.o)(za.a.slideTransition,{params:{duration:500,from:100,to:0}})])])]},changeDetection:0}),e})();function Ya(e,t){1&e&&(s.Vb(0,"div",1),s.Vb(1,"div",2),s.kc(2),s.Ub(),s.Ub())}const Za=["*"];let Xa=(()=>{class e{constructor(e){this.changeRef=e,this.selectedSlideIndex=0,this._shown=!1,this.ngUnsubscribe=new R.a}set shown(e){this._shown=e,this.setSelectedSlide(0)}get shown(){return this._shown}ngOnInit(){}ngAfterViewInit(){this.initListeners(),setTimeout(()=>{this.setSlideShown(this.selectedSlideIndex)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}goToPrevSlide(){this.setSelectedSlide(this.selectedSlideIndex-1)}goToNextSlide(){this.setSelectedSlide(this.selectedSlideIndex+1)}setSelectedSlide(e){if(this.selectedSlideIndex=e,this.slides){const t=Math.max(0,Math.min(this.slides.length-1,e));this.selectedSlideIndex=t}this.setSlideShown(this.selectedSlideIndex)}initListeners(){Object(N.a)(...this.slides.map(e=>e.triggerComplete.asObservable())).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.goToNextSlide()})}setSlideShown(e){this.slides&&this.slides.forEach((t,n)=>{t.shown=n===e}),this.changeRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-tour-page"]],contentQueries:function(e,t,n){if(1&e&&s.Ib(n,Ka,!1),2&e){let e;s.xc(e=s.dc())&&(t.slides=e)}},inputs:{shown:"shown"},ngContentSelectors:Za,decls:1,vars:1,consts:[["class","page",4,"ngIf"],[1,"page"],[1,"page__contents"]],template:function(e,t){1&e&&(s.lc(),s.Nc(0,Ya,3,0,"div",0)),2&e&&s.mc("ngIf",t.shown)},directives:[i.p],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.page[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.page__contents[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}@media (max-width:768px){.page__contents[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}}@media (max-width:480px){.page__contents[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}}"],changeDetection:0}),e})();var ec=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function tc(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",5),s.Vb(1,"button",6),s.cc("click",(function(){return s.Cc(e),s.gc(2).handlePrevClick()})),s.Ub(),s.Vb(2,"div",7),s.Pc(3),s.Ub(),s.Vb(4,"button",8),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleNextClick()})),s.Ub(),s.Ub()}if(2&e){const e=s.gc().$implicit;s.Db(1),s.mc("disabled",e.pageIndex<1),s.Eb("aria-disabled",e.pageIndex<1)("tabindex",e.pageIndex<1?-1:0),s.Db(2),s.Sc("",e.pageIndex+1," / ",e.pageSize,""),s.Db(1),s.mc("disabled",e.pageIndex===e.pageSize-1),s.Eb("aria-disabled",e.pageIndex===e.pageSize-1)("tabindex",e.pageIndex===e.pageSize-1?-1:0)}}const nc=function(e){return{"pages--opaquer":e}};function ic(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",1),s.Vb(1,"button",2),s.cc("click",(function(){return s.Cc(e),s.gc().handleExitClick()})),s.Ub(),s.Vb(2,"div",3),s.kc(3),s.Ub(),s.Nc(4,tc,5,8,"div",4),s.Ub()}if(2&e){const e=t.$implicit;s.mc("ngClass",s.pc(2,nc,e.pageIndex==e.pageSize-1)),s.Db(4),s.mc("ngIf",e.pageIndex<e.pageSize-1)}}const oc=["*"];let rc=(()=>{class e{constructor(e,t){this.store=e,this.changeRef=t,this.ngUnsubscribe=new R.a}ngOnInit(){}ngAfterViewInit(){this.tutorial$.pipe(Object(B.a)(this.ngUnsubscribe),Object(F.a)(e=>null!=e&&e.pageSize>0)).subscribe(e=>{this.handleTutorialPages(e)}),this.store.dispatch(new Y.a.SetTutorial({pageSize:this.pages.length,pageIndex:0}))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handlePrevClick(){this.store.dispatch(new Y.a.TutorialPrevious)}handleNextClick(){this.store.dispatch(new Y.a.TutorialNext)}handleExitClick(){this.store.dispatch(new Y.a.ToggleWindow(Wi.a.Tutorial,!1))}handleTutorialPages(e){this.pages.forEach((t,n)=>{t.shown=n===e.pageIndex}),this.changeRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-tour-pages"]],contentQueries:function(e,t,n){if(1&e&&s.Ib(n,Xa,!1),2&e){let e;s.xc(e=s.dc())&&(t.pages=e)}},ngContentSelectors:oc,decls:2,vars:3,consts:[["class","pages",3,"ngClass",4,"ngIf"],[1,"pages",3,"ngClass"],["app-pin-button","","buttonType","dark","size","medium","icon","times","aria-label","Exit Tutorial","matTooltip","Exit Tutorial","matTooltipPosition","right","data-test","tutorialExitButton",1,"pages__close",3,"click"],[1,"pages__contents"],["class","pages__footer",4,"ngIf"],[1,"pages__footer"],["app-pin-button","","buttonType","dark","size","large","icon","angle-left","aria-label","Previous Tutorial Step","matTooltip","Previous Tutorial Step","matTooltipPosition","left","data-test","tutorialPreviousButton",1,"pages__nav",3,"disabled","click"],[1,"mh-8"],["app-pin-button","","buttonType","dark","size","large","icon","angle-right","aria-label","Next Tutorial Step","matTooltip"," Next Tutorial Step","matTooltipPosition","right","data-test","tutorialNextButton",1,"pages__nav",3,"disabled","click"]],template:function(e,t){1&e&&(s.lc(),s.Nc(0,ic,5,4,"div",0),s.hc(1,"async")),2&e&&s.mc("ngIf",s.ic(1,1,t.tutorial$))},directives:[i.p,i.m,Ce.a,Ct.c],pipes:[i.b],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.pages[_ngcontent-%COMP%]{pointer-events:none;display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px auto 48px;max-width:600px;position:relative;background:rgba(16,24,35,.8);border-radius:16px;padding:24px 28px 20px}.pages--opaquer[_ngcontent-%COMP%]{background:rgba(16,24,35,.9)}.pages__footer[_ngcontent-%COMP%]{flex-direction:row;font-size:16px;letter-spacing:.4px;line-height:1.4em;font-weight:500}.pages__close[_ngcontent-%COMP%], .pages__footer[_ngcontent-%COMP%]{display:flex;align-items:center}.pages__close[_ngcontent-%COMP%]{z-index:1;position:absolute;top:8px;right:8px;align-self:flex-end;justify-content:center}.pages__contents[_ngcontent-%COMP%]{padding:16px 0}@media (max-width:768px){.pages[_ngcontent-%COMP%]{margin:16px 12% 48px;border-radius:10px;padding:18px 22px 14px}.pages__contents[_ngcontent-%COMP%]{padding:24px 0}.pages__footer[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.pages__nav[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}}@media (max-width:480px){.pages[_ngcontent-%COMP%]{margin:12px 10% 48px;border-radius:8px;padding:24px 20px 12px}.pages__footer[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.pages__nav[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}}"],changeDetection:0}),function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([Object(g.e)(d.a.getTutorial),ec("design:type",$.a)],e.prototype,"tutorial$",void 0),e})(),sc=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-tour-success"]],inputs:{inline:"inline"},decls:2,vars:2,consts:[[1,"view-tour-success"],["icon","check",1,"view-tour-success__icon"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Qb(1,"app-icon",1),s.Ub()),2&e&&s.Hb("view-tour-success--inline",t.inline)},directives:[Oe.a],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-tour-success{width:52px;height:52px;display:flex;background-color:#1bbc66;border-radius:50%;justify-content:center;align-items:center}.view-tour-success__icon{font-size:36px;letter-spacing:.9px;line-height:1.4em;color:#fff}.view-tour-success--inline{display:inline-flex;width:32px;height:32px}.view-tour-success--inline .view-tour-success__icon{font-size:18px;letter-spacing:.45px;line-height:1.4em}@media (max-width:768px){.view-tour-success{width:36px;height:36px}.view-tour-success__icon{font-size:20px;letter-spacing:.5px;line-height:1.4em}.view-tour-success--inline{display:inline-flex;width:24px;height:24px}.view-tour-success--inline .view-tour-success__icon{font-size:12px;letter-spacing:.3px;line-height:1.4em}}"],encapsulation:2,changeDetection:0}),e})(),ac=(()=>{class e{constructor(e){this.viewService=e,this.triggers=Ua}handleStartClick(){this.viewService.toggleTutorial(!1)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(ve.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-tour-mobile"]],decls:31,vars:5,consts:[["title","Rotate",3,"trigger"],["title","Zoom",3,"trigger"],["title","Pan",3,"trigger"],["title","Explore the Anatomy",3,"trigger"],[1,"flex","justify-start","items-center"],[1,"mr-2",3,"inline"],[1,"text-semibold"],["title","Toolbar","image","assets/images/tutorial/tutorial-toolbar@3x.png","alt","Toolbars used for navigating content"],["slide-footer","",1,"flex","flex-column","items-center","justify-center"],["app-view-rounded-button","","buttonType","solid","label","Start Exploring!","aria-label","Start Exploring",1,"mt-4",3,"click"]],template:function(e,t){1&e&&(s.Vb(0,"app-view-tour-pages"),s.Vb(1,"app-view-tour-page"),s.Vb(2,"app-view-tour-slide",0),s.Pc(3," Tap and drag with one finger to change the viewing angle. "),s.Ub(),s.Vb(4,"app-view-tour-slide"),s.Qb(5,"app-view-tour-success"),s.Ub(),s.Ub(),s.Vb(6,"app-view-tour-page"),s.Vb(7,"app-view-tour-slide",1),s.Pc(8," Pinch with two fingers to zoom in or out. "),s.Ub(),s.Vb(9,"app-view-tour-slide"),s.Qb(10,"app-view-tour-success"),s.Ub(),s.Ub(),s.Vb(11,"app-view-tour-page"),s.Vb(12,"app-view-tour-slide",2),s.Pc(13," Use two fingers to adjust the model's position. "),s.Ub(),s.Vb(14,"app-view-tour-slide"),s.Qb(15,"app-view-tour-success"),s.Ub(),s.Ub(),s.Vb(16,"app-view-tour-page"),s.Vb(17,"app-view-tour-slide",3),s.Pc(18," Tap on an individual part of the model to highlight anatomy. "),s.Ub(),s.Vb(19,"app-view-tour-slide"),s.Vb(20,"div",4),s.Vb(21,"div"),s.Qb(22,"app-view-tour-success",5),s.Vb(23,"strong",6),s.Pc(24,"Tip:"),s.Ub(),s.Pc(25," Double-tap to zoom in on specific structures. "),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(26,"app-view-tour-page"),s.Vb(27,"app-view-tour-slide",7),s.Pc(28," Use the toolbar to navigate through the 3D experience, launch deeper exploration tools, and relaunch this tutorial. "),s.Vb(29,"div",8),s.Vb(30,"button",9),s.cc("click",(function(){return t.handleStartClick()})),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Db(2),s.mc("trigger","camera-rotate"),s.Db(5),s.mc("trigger",t.triggers.CameraZoom),s.Db(5),s.mc("trigger",t.triggers.CameraPan),s.Db(5),s.mc("trigger",t.triggers.NodeSelection),s.Db(5),s.mc("inline",!0))},directives:[rc,Xa,Ka,sc,ja],styles:[""],changeDetection:0}),e})();var cc=n("jDQD");function lc(e,t){if(1&e&&s.Qb(0,"app-icon",5),2&e){const e=s.gc(2);s.mc("icon",e.icon)}}function pc(e,t){if(1&e&&(s.Vb(0,"span",6),s.Pc(1),s.Ub()),2&e){const e=s.gc(2);s.Db(1),s.Qc(e.label)}}function hc(e,t){if(1&e&&(s.Tb(0),s.Nc(1,lc,1,1,"app-icon",3),s.Nc(2,pc,2,1,"span",4),s.Sb()),2&e){const e=s.gc();s.Db(1),s.mc("ngIf",e.icon),s.Db(1),s.mc("ngIf",e.icon)}}function gc(e,t){if(1&e&&(s.Vb(0,"span"),s.Pc(1),s.Ub()),2&e){const e=s.gc();s.Db(1),s.Rc(" ",e.label," ")}}let dc=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-tour-tip-button"]],inputs:{label:"label",icon:"icon"},decls:3,vars:2,consts:[[1,"view-tour-tip-button","mv-1","mh-1",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"icon",4,"ngIf"],["class","visually-hidden",4,"ngIf"],[3,"icon"],[1,"visually-hidden"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Nc(1,hc,3,2,"ng-container",1),s.Nc(2,gc,2,1,"span",2),s.Ub()),2&e&&(s.mc("ngSwitch",!!t.icon),s.Db(1),s.mc("ngSwitchCase",!0))},directives:[i.r,i.s,i.t,i.p,Oe.a],styles:[".view-tour-tip-button{display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;color:#131c2a;background-color:#fff;border-radius:2px;font-weight:700;padding:4px;width:24px;height:24px}@media (max-width:768px){.view-tour-tip-button{width:20px;height:20px}}"],encapsulation:2,changeDetection:0}),e})();var uc=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function bc(e,t){1&e&&(s.Tb(0),s.Pc(1," Hold the control key and scroll up and down to zoom in or out. "),s.Sb())}function xc(e,t){1&e&&(s.Tb(0),s.Pc(1," Scroll up and down to zoom in or out. "),s.Sb())}let fc=(()=>{class e{constructor(e){this.viewService=e,this.triggers=Ua}ngOnInit(){this.captureScroll$=this.scrollMode$.pipe(Object(G.a)(e=>e===cc.a.Capture))}handleStartClick(){this.viewService.toggleTutorial(!1)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(ve.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-tour-desktop"]],decls:62,vars:12,consts:[["title","Rotate",3,"trigger"],[1,"flex","justify-start","items-center"],[1,"mr-2",3,"inline"],[1,"text-semibold"],["icon","caret-up","label","up"],["icon","caret-down","label","down"],["icon","caret-left","label","left"],["icon","caret-right","label","right"],["title","Zoom",3,"trigger","ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["label","+"],["label","-"],["title","Pan",3,"trigger"],["label","W"],["label","A"],["label","S"],["label","D"],["title","Explore the Anatomy",3,"trigger"],["image","assets/images/tutorial/tutorial-toolbar@3x.png","alt","Toolbars used for navigating content"],["slide-footer","",1,"flex","flex-column","items-center","justify-center"],["app-view-rounded-button","","buttonType","solid","label","Start Exploring!","aria-label","Start Exploring",1,"mt-4",3,"click"]],template:function(e,t){1&e&&(s.Vb(0,"app-view-tour-pages"),s.Vb(1,"app-view-tour-page"),s.Vb(2,"app-view-tour-slide",0),s.Pc(3," Click and drag the model to change the viewing angle. "),s.Ub(),s.Vb(4,"app-view-tour-slide"),s.Vb(5,"div",1),s.Vb(6,"div"),s.Qb(7,"app-view-tour-success",2),s.Vb(8,"strong",3),s.Pc(9,"Tip:"),s.Ub(),s.Pc(10," You can also use the arrow keys "),s.Qb(11,"app-view-tour-tip-button",4),s.Qb(12,"app-view-tour-tip-button",5),s.Qb(13,"app-view-tour-tip-button",6),s.Qb(14,"app-view-tour-tip-button",7),s.Pc(15," to rotate. "),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(16,"app-view-tour-page"),s.Vb(17,"app-view-tour-slide",8),s.hc(18,"async"),s.Nc(19,bc,2,0,"ng-container",9),s.Nc(20,xc,2,0,"ng-container",10),s.Ub(),s.Vb(21,"app-view-tour-slide"),s.Vb(22,"div",1),s.Vb(23,"div"),s.Qb(24,"app-view-tour-success",2),s.Vb(25,"strong",3),s.Pc(26,"Tip:"),s.Ub(),s.Pc(27," You can also use "),s.Qb(28,"app-view-tour-tip-button",11),s.Pc(29," to zoom in and "),s.Qb(30,"app-view-tour-tip-button",12),s.Pc(31," to zoom out. "),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(32,"app-view-tour-page"),s.Vb(33,"app-view-tour-slide",13),s.Pc(34," Hold the shift key and drag to move the model's position. "),s.Ub(),s.Vb(35,"app-view-tour-slide"),s.Vb(36,"div",1),s.Vb(37,"div"),s.Qb(38,"app-view-tour-success",2),s.Vb(39,"strong",3),s.Pc(40,"Tip:"),s.Ub(),s.Pc(41," You can also use the "),s.Qb(42,"app-view-tour-tip-button",14),s.Qb(43,"app-view-tour-tip-button",15),s.Qb(44,"app-view-tour-tip-button",16),s.Qb(45,"app-view-tour-tip-button",17),s.Pc(46," keys to pan. "),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(47,"app-view-tour-page"),s.Vb(48,"app-view-tour-slide",18),s.Pc(49," Click on an individual part of the model to highlight anatomy. "),s.Ub(),s.Vb(50,"app-view-tour-slide"),s.Vb(51,"div",1),s.Vb(52,"div"),s.Qb(53,"app-view-tour-success",2),s.Vb(54,"strong",3),s.Pc(55,"Tip:"),s.Ub(),s.Pc(56," Double-click to zoom in on specific structures. "),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(57,"app-view-tour-page"),s.Vb(58,"app-view-tour-slide",19),s.Pc(59," Use the toolbar to navigate through the 3D experience, launch deeper exploration tools, and relaunch this tutorial. "),s.Vb(60,"div",20),s.Vb(61,"button",21),s.cc("click",(function(){return t.handleStartClick()})),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Db(2),s.mc("trigger",t.triggers.CameraRotate),s.Db(5),s.mc("inline",!0),s.Db(10),s.mc("trigger",t.triggers.CameraZoom)("ngSwitch",s.ic(18,10,t.captureScroll$)),s.Db(2),s.mc("ngSwitchCase",!1),s.Db(5),s.mc("inline",!0),s.Db(9),s.mc("trigger",t.triggers.CameraPan),s.Db(5),s.mc("inline",!0),s.Db(10),s.mc("trigger",t.triggers.NodeSelection),s.Db(5),s.mc("inline",!0))},directives:[rc,Xa,Ka,sc,dc,i.r,i.s,i.t,ja],pipes:[i.b],styles:[""],changeDetection:0}),function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([Object(g.e)(Lt.a.getScrollMode),uc("design:type",$.a)],e.prototype,"scrollMode$",void 0),e})();var mc=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},vc=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function wc(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",3),s.Vb(1,"h2",4),s.Pc(2,"Getting Started"),s.Ub(),s.Vb(3,"p",5),s.Pc(4," Welcome! This tutorial will teach you how to navigate and explore in 3D using your "),s.Qb(5,"button",6),s.hc(6,"async"),s.hc(7,"async"),s.Vb(8,"mat-menu",null,7),s.Vb(10,"button",8),s.cc("click",(function(){s.Cc(e);const t=s.gc();return t.handleSelectInputModeClick(t.inputModes.Mouse)})),s.Pc(11),s.Ub(),s.Vb(12,"button",8),s.cc("click",(function(){s.Cc(e);const t=s.gc();return t.handleSelectInputModeClick(t.inputModes.Touch)})),s.Pc(13),s.Ub(),s.Ub(),s.Ub(),s.Vb(14,"div",9),s.Vb(15,"button",10),s.cc("click",(function(){return s.Cc(e),s.gc().handleExitClick()})),s.Ub(),s.Vb(16,"button",11),s.cc("click",(function(){return s.Cc(e),s.gc().handleStartClick()})),s.Ub(),s.Ub(),s.Ub()}if(2&e){const e=s.yc(9),t=s.gc();s.Db(5),s.mc("compact",!0)("label",t.inputModesText[s.ic(6,6,t.inputMode$)])("matMenuTriggerFor",e),s.Eb("aria-label",t.inputModesText[s.ic(7,8,t.inputMode$)]),s.Db(6),s.Rc(" ",t.inputModesText[t.inputModes.Mouse]," "),s.Db(2),s.Rc(" ",t.inputModesText[t.inputModes.Touch]," ")}}function yc(e,t){1&e&&s.Qb(0,"app-view-tour-mobile")}function _c(e,t){1&e&&s.Qb(0,"app-view-tour-desktop")}function Cc(e,t){if(1&e&&(s.Vb(0,"div",12),s.hc(1,"async"),s.Nc(2,yc,1,0,"app-view-tour-mobile",13),s.Nc(3,_c,1,0,"app-view-tour-desktop",14),s.Ub()),2&e){const e=s.gc();s.mc("ngSwitch",s.ic(1,2,e.inputMode$)),s.Db(2),s.mc("ngSwitchCase",e.inputModes.Touch)}}const Oc={[Ki.a.Mouse]:"mouse, trackpad, or keyboard",[Ki.a.Touch]:"touchscreen"};let Pc=(()=>{class e{constructor(e,t,n){this.store=e,this.viewService=t,this.storageService=n,this.inputModes=Ki.a,this.inputModesText=Oc,this.tourStarted=!1,this.tourEnded=!1,this.ngUnsubscribe=new R.a}ngOnInit(){this.initListeners(),this.store.dispatch(new Y.a.TutorialSeen(!0))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initListeners(){this.tutorial$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(({pageIndex:e,pageSize:t})=>{this.tourStarted=e>-1,this.tourEnded=e===t-1}),Object(E.a)(window,"keyup").pipe(Object(F.a)(e=>"Escape"===e.key),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.exit()})}handleExitClick(){this.exit()}handleStartClick(){this.store.dispatch(new Y.a.StartTutorial(!1))}handleSelectInputModeClick(e){this.store.dispatch(new Y.a.SetInputMode(e))}exit(){this.viewService.toggleTutorial(!1)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(ve.a),s.Pb(Io.d))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-tour"]],decls:3,vars:7,consts:[["role","dialog","aria-label","Getting Started Tutorial","cdkTrapFocus","",1,"tour"],["class","tour__intro",4,"ngIf"],["class","tour__contents",3,"ngSwitch",4,"ngIf"],[1,"tour__intro"],[1,"tour__title"],[1,"tour__welcome"],["app-view-rounded-button","","buttonType","outline","icon","chevron-down","iconPlacement","right",1,"tour__input-selection","text-small",3,"compact","label","matMenuTriggerFor"],["inputSelectionMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"tour__footer"],["app-view-rounded-button","","buttonType","outline","label","No, Thanks.","data-test","tutorialExitButton",1,"mr-3","text-medium",3,"click"],["app-view-rounded-button","","buttonType","solid","label","Start Tutorial","aria-label","Start Tutorial","data-test","tutorialStartButton",1,"ml-3","text-medium",3,"click"],[1,"tour__contents",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Nc(1,wc,17,10,"div",1),s.Nc(2,Cc,4,4,"div",2),s.Ub()),2&e&&(s.Hb("tour--started",t.tourStarted)("tour--ended",t.tourEnded),s.mc("@refresh",void 0),s.Db(1),s.mc("ngIf",!t.tourStarted),s.Db(1),s.mc("ngIf",t.tourStarted))},directives:[o.d,i.p,ja,De.d,De.a,De.b,i.r,i.s,i.t,ac,fc],pipes:[i.b],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.tour[_ngcontent-%COMP%]{color:#fff;position:absolute;top:0;right:0;bottom:0;left:0;z-index:100;pointer-events:none;display:flex;flex-direction:column;align-items:center;overflow:auto}.tour__title[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.tour__welcome[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em;margin:16px auto 32px}.tour__intro[_ngcontent-%COMP%]{background:rgba(16,24,35,.9);border-radius:16px;margin:auto;padding:28px 32px;text-align:center;max-width:560px}.tour__input-selection[_ngcontent-%COMP%]{vertical-align:middle}.tour__header[_ngcontent-%COMP%]{flex:none;align-self:flex-end;justify-self:flex-start;margin:24px}.tour__contents[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column;justify-content:flex-end;width:100%}.tour__footer[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em;display:flex;flex-direction:row;align-items:center;justify-content:center}.tour__nav-arrow[_ngcontent-%COMP%]{font-size:32px;letter-spacing:.8px;line-height:1.4em;cursor:pointer}.tour--ended[_ngcontent-%COMP%]   .tour__contents[_ngcontent-%COMP%]{justify-content:center}@media (max-width:768px){.tour__intro[_ngcontent-%COMP%]{border-radius:12px;padding:20px 24px;margin:auto 12%;max-width:100%}.tour__intro__title[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.tour__intro__content[_ngcontent-%COMP%]{max-width:80%}.tour__header[_ngcontent-%COMP%], .tour__intro__content[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.tour__header[_ngcontent-%COMP%]{margin:12px}.tour__footer[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.tour__nav-arrow[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}}@media (max-width:480px){.tour__intro[_ngcontent-%COMP%]{border-radius:8px;padding:16px 20px;margin:auto 10%}.tour__intro__title[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.tour__intro__content[_ngcontent-%COMP%]{margin:12px auto 16px}.tour__header[_ngcontent-%COMP%], .tour__intro__content[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.tour__header[_ngcontent-%COMP%]{margin:12px}.tour__footer[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.tour__nav-arrow[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}}"],data:{animation:[Object(eo.n)("refresh",[Object(eo.m)(":enter",[Object(eo.o)(za.a.slideTransition,{params:{duration:500,from:100,to:0}})])])]},changeDetection:0}),mc([Object(g.e)(d.a.getTutorial),vc("design:type",$.a)],e.prototype,"tutorial$",void 0),mc([Object(g.e)(d.a.getInputMode),vc("design:type",$.a)],e.prototype,"inputMode$",void 0),e})();var Mc=n("nYR2"),kc=n("zKvh"),zc=n("ZDoJ"),Sc=n("nj9G"),Dc=n("gw9s"),jc=n("h8op"),Uc=n("pZol"),Ic=n("1CwK"),Tc=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Vc=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Rc=["colorBtn"];function Ec(e,t){1&e&&(s.Vb(0,"div"),s.Qb(1,"app-icon",19),s.Vb(2,"span",20),s.Pc(3,"current"),s.Ub(),s.Ub())}function Lc(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",14),s.cc("click",(function(){s.Cc(e);const n=t.$implicit;return s.gc().setTextSize(n.size)})),s.Vb(1,"div",15),s.Vb(2,"div",16),s.Nc(3,Ec,4,0,"div",17),s.hc(4,"async"),s.Ub(),s.Vb(5,"div",18),s.Vb(6,"span"),s.Pc(7),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&e){const e=t.$implicit,n=s.gc();s.Db(3),s.mc("ngIf",e.size===s.ic(4,2,n.textSize$)),s.Db(4),s.Rc("",e.label,"px")}}function $c(e,t){1&e&&(s.Vb(0,"div"),s.Qb(1,"app-icon",19),s.Vb(2,"span",20),s.Pc(3,"current"),s.Ub(),s.Ub())}function Nc(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",14),s.cc("click",(function(){s.Cc(e);const n=t.$implicit;return s.gc().setBrushSize(n.size)})),s.Vb(1,"div",15),s.Vb(2,"div",16),s.Nc(3,$c,4,0,"div",17),s.hc(4,"async"),s.Ub(),s.Vb(5,"div",18),s.Qb(6,"app-icon",21),s.Vb(7,"span"),s.Pc(8),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&e){const e=t.$implicit,n=s.gc();s.Db(3),s.mc("ngIf",e.size===s.ic(4,4,n.brushSize$)),s.Db(3),s.Kc("font-size",e.size,"px"),s.Db(2),s.Qc(e.label)}}function Ac(e,t){1&e&&(s.Vb(0,"div"),s.Qb(1,"app-icon",19),s.Vb(2,"span",20),s.Pc(3,"current"),s.Ub(),s.Ub())}function Qc(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",14),s.cc("click",(function(){s.Cc(e);const n=t.$implicit;return s.gc().setEraserSize(n.size)})),s.Vb(1,"div",15),s.Vb(2,"div",16),s.Nc(3,Ac,4,0,"div",17),s.hc(4,"async"),s.Ub(),s.Vb(5,"div",18),s.Qb(6,"app-icon",21),s.Vb(7,"span"),s.Pc(8),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&e){const e=t.$implicit,n=s.gc();s.Db(3),s.mc("ngIf",e.size===s.ic(4,4,n.eraserSize$)),s.Db(3),s.Kc("font-size",e.size,"px"),s.Db(2),s.Qc(e.label)}}function qc(e,t){1&e&&(s.Vb(0,"div"),s.Qb(1,"app-icon",19),s.Vb(2,"span",20),s.Pc(3,"current"),s.Ub(),s.Ub())}function Fc(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",14),s.cc("click",(function(){s.Cc(e);const n=t.$implicit;return s.gc().setBrushColor(n.color)})),s.Vb(1,"div",15),s.Vb(2,"div",16),s.Nc(3,qc,4,0,"div",17),s.hc(4,"async"),s.Ub(),s.Vb(5,"div",18),s.Qb(6,"span",22),s.Vb(7,"span"),s.Pc(8),s.Ub(),s.Ub(),s.Ub(),s.Ub()}if(2&e){const e=t.$implicit,n=s.gc();s.Db(3),s.mc("ngIf",e.color===s.ic(4,4,n.brushColor$)),s.Db(3),s.Kc("background-color",e.color),s.Db(2),s.Qc(e.label)}}let Hc=(()=>{class e{constructor(e){this.store=e,this.textSizes=Uc.j,this.brushSizes=Uc.g,this.brushColors=Uc.h,this.eraserSizes=Uc.i,this.modeEnum=Sc.a,this.downloadClick=new s.p,this.clearClick=new s.p,this.exitClick=new s.p,this.ngUnsubscribe=new R.a}ngOnInit(){}ngAfterViewInit(){this.brushColor$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.colorBtn.nativeElement.style.setProperty("--pin-button-pin-color",e)}),this.hasPaint$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{e||this.store.selectSnapshot(d.a.getWhiteboardAnnotateMode)!==Sc.a.Erase||this.handleModeSelect(Sc.a.Paint)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setBrushSize(e){this.store.dispatch(new Y.a.SetWhiteboardBrushSize(e))}setBrushColor(e){this.store.dispatch(new Y.a.SetWhiteboardBrushColor(e))}setTextSize(e){this.store.dispatch(new Y.a.SetWhiteboardTextSize(e))}handleModeSelect(e){this.store.dispatch(new Y.a.SetWhiteboardAnnotateMode(e))}setEraserSize(e){this.store.dispatch(new Y.a.SetWhiteboardEraserSize(e))}handleDownloadClick(){this.downloadClick.next()}handleClearClick(){this.clearClick.next()}handleExitClick(){this.exitClick.next()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-whiteboard-tools"]],viewQuery:function(e,t){if(1&e&&s.Jc(Rc,!0,s.m),2&e){let e;s.xc(e=s.dc())&&(t.colorBtn=e.first)}},outputs:{downloadClick:"downloadClick",clearClick:"clearClick",exitClick:"exitClick"},decls:39,vars:52,consts:[[1,"view-whiteboard-tools"],["eventCategory","View Whiteboard Tools","name","Whiteboard","padding","dense",3,"canExit","exit"],["app-pin-button","","buttonType","ghost","icon","text-size","aria-label","Text","matTooltip","Text",1,"mr-1",3,"matMenuTriggerFor","selected","click"],["app-pin-button","","buttonType","ghost","icon","paint-brush","aria-label","Brush","matTooltip","Brush",1,"mr-1",3,"matMenuTriggerFor","selected","click"],["app-pin-button","","buttonType","ghost","icon","eraser","aria-label","Eraser","matTooltip","Eraser",3,"matMenuTriggerFor","selected","disabled","click"],["app-pin-button","","buttonType","ghost","icon","tint","aria-label","Color","matTooltip","Color",3,"matMenuTriggerFor","selected"],["colorBtn","matMenuTrigger"],["app-pin-button","","buttonType","ghost","icon","download","aria-label","Download","matTooltip","Download",3,"click"],["app-pin-button","","buttonType","ghost","aria-label","Clear","matTooltip","Clear",3,"disabled","click"],["textSizeMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["brushSizeMenu","matMenu"],["eraserSizeMenu","matMenu"],["brushColorMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"flex","flex-row","items-center","justify-end"],[1,"view-whiteboard-tools__check"],[4,"ngIf"],[1,"view-whiteboard-tools__label"],["icon","check","aria-hidden","true",1,"mr-2"],[1,"visually-hidden"],["icon","circle","aria-hidden","true",1,"mr-2"],[1,"view-whiteboard-tools__swatch"]],template:function(e,t){if(1&e&&(s.Vb(0,"div",0),s.Vb(1,"app-pillbox",1),s.cc("exit",(function(){return t.handleExitClick()})),s.Vb(2,"button",2),s.cc("click",(function(){return t.handleModeSelect(t.modeEnum.Text)})),s.hc(3,"async"),s.hc(4,"async"),s.Ub(),s.Vb(5,"button",3),s.cc("click",(function(){return t.handleModeSelect(t.modeEnum.Paint)})),s.hc(6,"async"),s.hc(7,"async"),s.hc(8,"async"),s.Ub(),s.Vb(9,"button",4),s.cc("click",(function(){return t.handleModeSelect(t.modeEnum.Erase)})),s.hc(10,"async"),s.hc(11,"async"),s.hc(12,"async"),s.hc(13,"async"),s.hc(14,"async"),s.Ub(),s.Qb(15,"app-pillbox-divider"),s.Qb(16,"button",5,6),s.Qb(18,"app-pillbox-divider"),s.Vb(19,"button",7),s.cc("click",(function(){return t.handleDownloadClick()})),s.Ub(),s.Qb(20,"app-pillbox-divider"),s.Vb(21,"button",8),s.cc("click",(function(){return t.handleClearClick()})),s.hc(22,"async"),s.hc(23,"async"),s.hc(24,"async"),s.hc(25,"async"),s.Pc(26," Clear "),s.Ub(),s.Vb(27,"mat-menu",null,9),s.Nc(29,Lc,8,4,"button",10),s.Ub(),s.Vb(30,"mat-menu",null,11),s.Nc(32,Nc,9,6,"button",10),s.Ub(),s.Vb(33,"mat-menu",null,12),s.Nc(35,Qc,9,6,"button",10),s.Ub(),s.Vb(36,"mat-menu",null,13),s.Nc(38,Fc,9,6,"button",10),s.Ub(),s.Ub(),s.Ub()),2&e){const e=s.yc(17),n=s.yc(28),i=s.yc(31),o=s.yc(34),r=s.yc(37);s.Db(1),s.mc("canExit",!0),s.Db(1),s.mc("matMenuTriggerFor",n)("selected",s.ic(3,24,t.mode$)===t.modeEnum.Text),s.Eb("aria-pressed",s.ic(4,26,t.mode$)===t.modeEnum.Text),s.Db(3),s.mc("matMenuTriggerFor",i)("selected",s.ic(6,28,t.mode$)===t.modeEnum.Paint),s.Eb("aria-selected",s.ic(7,30,t.mode$)===t.modeEnum.Paint)("aria-pressed",s.ic(8,32,t.mode$)===t.modeEnum.Paint),s.Db(4),s.mc("matMenuTriggerFor",o)("selected",s.ic(10,34,t.mode$)===t.modeEnum.Erase)("disabled",!1===s.ic(13,40,t.hasPaint$)),s.Eb("aria-selected",s.ic(11,36,t.mode$)===t.modeEnum.Erase)("aria-pressed",s.ic(12,38,t.mode$)===t.modeEnum.Erase)("aria-disabled",!1===s.ic(14,42,t.hasPaint$)),s.Db(7),s.mc("matMenuTriggerFor",r)("selected",e.menuOpen),s.Eb("aria-selected",e.menuOpen)("aria-pressed",e.menuOpen),s.Db(5),s.mc("disabled",!1===s.ic(22,44,t.hasPaint$)&&!1===s.ic(23,46,t.hasText$)),s.Eb("aria-disabled",!1===s.ic(24,48,t.hasPaint$)&&!1===s.ic(25,50,t.hasText$)),s.Db(8),s.mc("ngForOf",t.textSizes),s.Db(3),s.mc("ngForOf",t.brushSizes),s.Db(3),s.mc("ngForOf",t.eraserSizes),s.Db(3),s.mc("ngForOf",t.brushColors)}},directives:[kr.a,Ce.a,Ct.c,De.d,Ic.a,De.a,i.o,De.b,i.p,Oe.a],pipes:[i.b],styles:[".view-whiteboard-tools__check{flex:2 1 0;color:#2d72dc}.view-whiteboard-tools__label{display:flex;flex:6 1 0;align-items:center}.view-whiteboard-tools__swatch{display:inline-block;width:14px;height:14px;border-radius:50%;margin-right:8px;box-shadow:0 0 0 1px #96a8c0}"],encapsulation:2,changeDetection:0}),Tc([Object(g.e)(d.a.getWhiteboardAnnotateMode),Vc("design:type",$.a)],e.prototype,"mode$",void 0),Tc([Object(g.e)(d.a.getWhiteboardBrushSize),Vc("design:type",$.a)],e.prototype,"brushSize$",void 0),Tc([Object(g.e)(d.a.getWhiteboardTextSize),Vc("design:type",$.a)],e.prototype,"textSize$",void 0),Tc([Object(g.e)(d.a.getWhiteboardBrushColor),Vc("design:type",$.a)],e.prototype,"brushColor$",void 0),Tc([Object(g.e)(d.a.getWhiteboardEraserSize),Vc("design:type",$.a)],e.prototype,"eraserSize$",void 0),Tc([Object(g.e)(d.a.getWhiteboardHasPaint),Vc("design:type",$.a)],e.prototype,"hasPaint$",void 0),Tc([Object(g.e)(d.a.getWhiteboardHasText),Vc("design:type",$.a)],e.prototype,"hasText$",void 0),e})();const Bc=["textRef"];function Wc(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div"),s.Vb(1,"div",4),s.cc("cdkDragMoved",(function(t){return s.Cc(e),s.gc().dragMoved(t,"corner1")})),s.Ub(),s.Vb(2,"div",5),s.cc("cdkDragMoved",(function(t){return s.Cc(e),s.gc().dragMoved(t,"corner2")})),s.Ub(),s.Vb(3,"div",6),s.cc("cdkDragMoved",(function(t){return s.Cc(e),s.gc().dragMoved(t,"corner3")})),s.Ub(),s.Vb(4,"div",7),s.cc("cdkDragMoved",(function(t){return s.Cc(e),s.gc().dragMoved(t,"corner4")})),s.Ub(),s.Vb(5,"div",8),s.cc("cdkDragMoved",(function(t){return s.Cc(e),s.gc().translateHandleMoved(t)})),s.Ub(),s.Ub()}if(2&e){const e=s.gc();s.Db(1),s.mc("cdkDragFreeDragPosition",e.dragHandles.corner1),s.Db(1),s.mc("cdkDragFreeDragPosition",e.dragHandles.corner2),s.Db(1),s.mc("cdkDragFreeDragPosition",e.dragHandles.corner3),s.Db(1),s.mc("cdkDragFreeDragPosition",e.dragHandles.corner4),s.Db(1),s.mc("cdkDragFreeDragPosition",e.dragHandles.translate)}}const Jc=function(e){return{"whiteboard-label__label--active":e}};let Gc=(()=>{class e{constructor(e,t){this.changeDetectorRef=e,this.renderer=t,this.active=!0,this.initialized=!1,this.labelActive=new s.p,this.labelEmpty=new s.p,this.dragHandles={translate:{x:0,y:0},corner1:{x:0,y:0},corner2:{x:0,y:0},corner3:{x:0,y:0},corner4:{x:0,y:0}},this.handleCoords={translate:{x:0,y:0},corner1:{x:0,y:0},corner2:{x:0,y:0},corner3:{x:0,y:0},corner4:{x:0,y:0}},this.textareaTransform={x:0,y:0,width:110,height:40},this.handleDocumentBackspace=e=>{const{activeElement:t}=this.textRef.nativeElement;"Backspace"===e.key&&this.active&&!t&&this.deleteLabel()},this.handleTextboxMouseDown=e=>{this.active=!0,this.labelActive.next(this.id),this.refreshHandles()},this.handleDocumentMouseDown=e=>{const t=e.target.className.includes("view-whiteboard__canvas"),n=e.target.className.includes("whiteboard-label__label"),i=e.target.dataset.id===this.id;this.isLabelEmpty()&&!i&&this.initialized?this.deleteLabel():(t||n&&!i)&&(this.active=!1,this.changeDetectorRef.markForCheck())},this.handleTextKeyDown=e=>{if(e.stopPropagation(),this.isLabelEmpty()&&"Backspace"===e.key)return void this.deleteLabel();const t=this.textRef.nativeElement.scrollHeight,{corner1:n,corner3:i,corner4:o}=this.handleCoords,r=n.y+t;this.handleCoords.corner3=Object.assign(Object.assign({},i),{y:r}),this.handleCoords.corner4=Object.assign(Object.assign({},o),{y:r}),this.dragHandles.corner3=Object.assign({},this.handleCoords.corner3),this.dragHandles.corner4=Object.assign({},this.handleCoords.corner4),this.updateTextarea(),this.changeDetectorRef.markForCheck()}}get id(){return this._id}set id(e){this._id=e,this.initialized=!1}set color(e){this.renderer.setStyle(this.textRef.nativeElement,"color",e)}set exporting(e){e&&(this.active=!1,this.labelActive.next(void 0))}set size(e){this.renderer.setStyle(this.textRef.nativeElement,"font-size",e+"px")}ngOnInit(){this.initHandles(),this.initInteractionListeners(),setTimeout(()=>{this.textRef.nativeElement.focus(),this.initialized=!0})}ngOnDestroy(){this.textRef.nativeElement.removeEventListener("keydown",this.handleTextKeyDown),this.textRef.nativeElement.removeEventListener("mousedown",this.handleTextboxMouseDown),this.mouseDownListener(),this.backspaceListener()}initHandles(){this.textareaTransform.x=this.initialPos.x,this.textareaTransform.y=this.initialPos.y;const{x:e,y:t,width:n,height:i}=this.textareaTransform;this.dragHandles.corner1={x:e,y:t},this.dragHandles.corner2={x:e+n,y:t},this.dragHandles.corner3={x:e+n,y:t+i},this.dragHandles.corner4={x:e,y:t+i},this.dragHandles.translate={x:e+n/2,y:t+-10},this.handleCoords.corner1=Object.assign({},this.dragHandles.corner1),this.handleCoords.corner2=Object.assign({},this.dragHandles.corner2),this.handleCoords.corner3=Object.assign({},this.dragHandles.corner3),this.handleCoords.corner4=Object.assign({},this.dragHandles.corner4),this.handleCoords.translate=Object.assign({},this.dragHandles.translate),this.updateTextarea()}initInteractionListeners(){this.mouseDownListener=this.renderer.listen("document","mousedown",this.handleDocumentMouseDown),this.backspaceListener=this.renderer.listen("document","keydown",this.handleDocumentBackspace),this.textRef.nativeElement.addEventListener("mousedown",this.handleTextboxMouseDown),this.textRef.nativeElement.addEventListener("keydown",this.handleTextKeyDown)}refreshHandles(){this.dragHandles.corner1=Object.assign({},this.handleCoords.corner1),this.dragHandles.corner2=Object.assign({},this.handleCoords.corner2),this.dragHandles.corner3=Object.assign({},this.handleCoords.corner3),this.dragHandles.corner4=Object.assign({},this.handleCoords.corner4),this.dragHandles.translate=Object.assign({},this.handleCoords.translate),this.changeDetectorRef.markForCheck()}isLabelEmpty(){return""===this.textRef.nativeElement.innerText||"\n"===this.textRef.nativeElement.innerText}deleteLabel(){this.labelEmpty.next(this.id)}updateTextarea(){const{corner1:e,corner2:t,corner3:n}=this.handleCoords;this.textareaTransform.x=e.x,this.textareaTransform.y=e.y,this.textareaTransform.width=t.x-e.x,this.textareaTransform.height=n.y-t.y,this.renderer.setStyle(this.textRef.nativeElement,"transform",`translate(${this.textareaTransform.x}px, ${this.textareaTransform.y}px)`),this.renderer.setStyle(this.textRef.nativeElement,"width",this.textareaTransform.width+"px"),this.renderer.setStyle(this.textRef.nativeElement,"height",this.textareaTransform.height+"px")}updateTranslateHandle(){const{corner1:e,corner2:t}=this.handleCoords;this.handleCoords.translate={x:(t.x-e.x)/2+e.x,y:e.y+-10},this.dragHandles.translate=Object.assign({},this.handleCoords.translate)}setHandle(e,t,n){this.handleCoords[e]=Object.assign(Object.assign({},this.handleCoords[e]),{[t]:n[t]}),this.dragHandles[e]=Object.assign({},this.handleCoords[e])}addDiffToHandle(e,t){this.handleCoords[e]={x:this.handleCoords[e].x+t.x,y:this.handleCoords[e].y+t.y},this.dragHandles[e]=Object.assign({},this.handleCoords[e])}translateHandleMoved(e){const t=e.source._dragRef.getFreeDragPosition(),n={x:t.x-this.handleCoords.translate.x,y:t.y-this.handleCoords.translate.y};this.handleCoords.translate=Object.assign({},t),this.addDiffToHandle("corner1",n),this.addDiffToHandle("corner2",n),this.addDiffToHandle("corner3",n),this.addDiffToHandle("corner4",n),this.updateTextarea()}dragMoved(e,t){const n=e.source._dragRef.getFreeDragPosition();this.handleCoords[t]=Object.assign({},n),"corner1"===t&&(this.setHandle("corner2","y",n),this.setHandle("corner4","x",n)),"corner2"===t&&(this.setHandle("corner1","y",n),this.setHandle("corner3","x",n)),"corner3"===t&&(this.setHandle("corner2","x",n),this.setHandle("corner4","y",n)),"corner4"===t&&(this.setHandle("corner1","x",n),this.setHandle("corner3","y",n)),this.updateTranslateHandle(),this.updateTextarea()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.i),s.Pb(s.H))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-whiteboard-label"]],viewQuery:function(e,t){if(1&e&&s.Jc(Bc,!0),2&e){let e;s.xc(e=s.dc())&&(t.textRef=e.first)}},inputs:{id:"id",initialPos:"initialPos",color:"color",exporting:"exporting",size:"size"},outputs:{labelActive:"labelActive",labelEmpty:"labelEmpty"},decls:4,vars:5,consts:[[1,"whiteboard-label"],[4,"ngIf"],["contenteditable","true","data-placeholder","Type..",1,"whiteboard-label__label",3,"ngClass"],["textRef",""],["cdkDrag","",1,"whiteboard-label__handle","whiteboard-label__handle--top-left",3,"cdkDragFreeDragPosition","cdkDragMoved"],["cdkDrag","",1,"whiteboard-label__handle","whiteboard-label__handle--top-right",3,"cdkDragFreeDragPosition","cdkDragMoved"],["cdkDrag","",1,"whiteboard-label__handle","whiteboard-label__handle--bottom-right",3,"cdkDragFreeDragPosition","cdkDragMoved"],["cdkDrag","",1,"whiteboard-label__handle","whiteboard-label__handle--bottom-left",3,"cdkDragFreeDragPosition","cdkDragMoved"],["cdkDrag","",1,"whiteboard-label__handle","whiteboard-label__handle--move",3,"cdkDragFreeDragPosition","cdkDragMoved"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Nc(1,Wc,6,5,"div",1),s.Qb(2,"div",2,3),s.Ub()),2&e&&(s.Db(1),s.mc("ngIf",!0===t.active),s.Db(1),s.mc("ngClass",s.pc(3,Jc,!0===t.active)),s.Eb("data-id",t.id))},directives:[i.p,i.m,Qr.a],styles:['.whiteboard-label[_ngcontent-%COMP%]{position:relative;z-index:1000}.whiteboard-label__handle[_ngcontent-%COMP%]{position:fixed;z-index:10;width:32px;height:32px;left:-16px;top:-16px}.whiteboard-label__handle[_ngcontent-%COMP%]:after{content:"";position:absolute;width:12px;height:12px;left:10px;top:10px;border-radius:50%;background-color:#2d72dc}.whiteboard-label__handle[_ngcontent-%COMP%]:hover{cursor:pointer}.whiteboard-label__handle--top-left[_ngcontent-%COMP%]:hover{cursor:nw-resize}.whiteboard-label__handle--top-right[_ngcontent-%COMP%]:hover{cursor:ne-resize}.whiteboard-label__handle--bottom-right[_ngcontent-%COMP%]:hover{cursor:se-resize}.whiteboard-label__handle--bottom-left[_ngcontent-%COMP%]:hover{cursor:sw-resize}.whiteboard-label__handle--move[_ngcontent-%COMP%]:hover{cursor:move}.whiteboard-label__label[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;border:none;padding:5px;overflow-y:hidden}.whiteboard-label__label--active[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #2d72dc}.whiteboard-label__label[_ngcontent-%COMP%]:focus{outline:none}.whiteboard-label__label[_ngcontent-%COMP%]:empty:before{content:attr(data-placeholder);color:rgba(55,74,104,.5)}'],changeDetection:0}),e})();var Kc=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Yc=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Zc=["drawCanvas"],Xc=["annotateWrapper"];function el(e,t){if(1&e){const e=s.Wb();s.Vb(0,"app-view-whiteboard-label",7),s.cc("labelActive",(function(t){return s.Cc(e),s.gc().handleLabelActive(t)}))("labelEmpty",(function(t){return s.Cc(e),s.gc().handleLabelEmpty(t)})),s.hc(1,"async"),s.Ub()}if(2&e){const e=t.$implicit,n=s.gc();s.Hb("view-whiteboard__label--clickthrough",s.ic(1,7,n.annotateMode$)!==n.whiteboardAnnotateMode.Text),s.mc("exporting",n.exporting)("id",e.id)("initialPos",e.pos)("color",e.color)("size",e.size)}}const tl=kc.a.PNG;let nl=(()=>{class e{constructor(e,t,n,i,o){this.store=e,this.actions=t,this.viewService=n,this.clipboardService=i,this.changeRef=o,this.whiteboardAnnotateMode=Sc.a,this.labels=[],this.exporting=!1,this.brushSize=0,this.eraserSize=0,this.lineWidth=0,this.ngUnsubscribe=new R.a}initTextModeListener(){this.inputManager=new Hammer.Manager(this.drawCanvas.nativeElement),this.inputManager.add(new Hammer.Tap({event:"tap"})),this.inputManager.on("tap",e=>{if(this.activeLabelId)return void(this.activeLabelId=void 0);const t=Object(le.uniqueId)();let n=e.center.x,i=e.center.y;void 0!==e.pointers[0].x&&(n=e.pointers[0].x,i=e.pointers[0].y);const o=this.store.selectSnapshot(d.a.getWhiteboardBrushColor),r=this.store.selectSnapshot(d.a.getWhiteboardTextSize);this.labels.push({id:t,pos:{x:n,y:i},color:o,size:r}),this.activeLabelId=t,this.changeRef.markForCheck(),this.dispatchHasText()})}handleLabelActive(e){this.activeLabelId=e;const t=this.labels.find(t=>t.id===e);t&&this.store.dispatch([new Y.a.SetWhiteboardTextSize(t.size),new Y.a.SetWhiteboardBrushColor(t.color)])}handleLabelEmpty(e){this.labels=this.labels.filter(t=>t.id!==e),this.changeRef.markForCheck(),this.dispatchHasText()}dispatchHasText(){this.store.dispatch(new Y.a.SetWhiteboardHasText(this.labels.length>0))}ngOnInit(){this.canvasElement=this.drawCanvas.nativeElement,this.canvasContext=this.canvasElement.getContext("2d"),this.siteHeader=this.store.selectSnapshot(be.a.getSiteHeader),this.store.dispatch(new zc.a.SetHeader(xe.a.Hide)),this.brushColor$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.labels.find(e=>e.id===this.activeLabelId);t&&(t.color=e,this.changeRef.markForCheck())}),this.textSize$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.labels.find(e=>e.id===this.activeLabelId);t&&(t.size=e,this.changeRef.markForCheck())}),this.annotateMode$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.inputManager&&this.inputManager.destroy(),e===Sc.a.Paint?(this.canvasContext.globalCompositeOperation="source-over",this.setLineWidth(this.brushSize),this.initInputListeners()):e===Sc.a.Text?this.initTextModeListener():e===Sc.a.Erase&&(this.canvasContext.globalCompositeOperation="destination-out",this.setLineWidth(this.eraserSize),this.initInputListeners())}),this.background$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{const t=Gi.a.isLight(e)?Uc.a:Uc.b;this.store.dispatch(new Y.a.SetWhiteboardBrushColor(t.color))})}ngAfterViewInit(){this.initCanvasListeners()}ngOnDestroy(){this.inputManager.destroy(),this.reset(),this.store.dispatch(new zc.a.SetHeader(this.siteHeader)),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initCanvasListeners(){this.brushSize$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.setBrushSize(e)}),this.brushColor$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.setBrushColor(e)}),this.eraserSize$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.setEraserSize(e)}),this.syncCanvas()}initInputListeners(){this.inputManager=new Hammer.Manager(this.drawCanvas.nativeElement),this.inputManager.add(new Hammer.Pan({event:"pan",pointers:0})),this.inputManager.add(new Hammer.Tap({event:"tap"}));const e=new Map;this.inputManager.on("tap",e=>{e.pointers.forEach(t=>{if(void 0!==t.x){const{x:e,y:n}=t;this.drawPoint(e,n)}else{const{x:t,y:n}=e.center;this.drawPoint(t,n)}this.checkCanvasPaint()})}),this.inputManager.on("panstart",t=>{t.pointers.forEach(n=>{if(void 0===n.x)e.set(1,t.center);else{const{x:t,y:i}=n;e.set(n.pointerId,{x:t,y:i})}})}),this.inputManager.on("pan",t=>{t.pointers.forEach(n=>{let i=t.center.x,o=t.center.y,r=1;void 0!==n.pointerId&&(i=n.x,o=n.y,r=n.pointerId);const{x:s,y:a}=e.get(r);this.drawLine(s,a,i,o),this.drawPoint(i,o),e.set(r,{x:i,y:o})})}),this.inputManager.on("panend",()=>{e.clear(),this.checkCanvasPaint()})}handleResetClick(){this.reset()}handleDownloadClick(){this.exporting=!0,this.changeRef.detectChanges();const{width:e,height:t}=this.canvasElement,n=this.store.selectSnapshot(ee.a.getSelectedChapterId),i=this.store.selectSnapshot(ee.a.getSelectedChapterBackground),o=this.store.selectSnapshot(Lt.a.getWatermarkEnabled),r=document.querySelector(".engine__watermark"),s=[this.annotateElement.nativeElement];o&&!Object(le.isNil)(r)&&s.push(r),this.store.dispatch(new jc.b(n,i,tl,100,{width:e,height:t},"original",!0,!0,s)).pipe(Object(Ta.a)(()=>this.actions.pipe(Object(g.l)(jc.c),Object(H.a)(1))),Object(B.a)(this.ngUnsubscribe),Object(Mc.a)(()=>{this.exporting=!1,this.changeRef.markForCheck()})).subscribe(e=>{this.downloadSnapshot(e.blob)})}handleExitClick(){this.resetCanvas(),this.viewService.toggleWhiteboard(!1)}checkCanvasPaint(){const e=this.canvasContext.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),t=new Uint32Array(e.data.buffer).some(e=>0!==e);this.store.dispatch(new Y.a.SetWhiteboardHasPaint(t))}drawPoint(e,t){const n=this.lineWidth/2,i=2*Math.PI;this.canvasContext.beginPath(),this.canvasContext.arc(e,t,n,0,i),this.canvasContext.fill()}drawLine(e,t,n,i){this.canvasContext.beginPath(),this.canvasContext.moveTo(e,t),this.canvasContext.lineTo(n,i),this.canvasContext.stroke(),this.canvasContext.closePath()}reset(){this.resetCanvas(),this.labels=[],this.changeRef.markForCheck(),this.dispatchHasText()}setBrushSize(e){this.brushSize=e,this.setLineWidth(e)}setBrushColor(e){this.canvasContext.fillStyle=e,this.canvasContext.strokeStyle=e}setEraserSize(e){this.eraserSize=e,this.setLineWidth(e)}setLineWidth(e){this.canvasContext.lineWidth=e,this.lineWidth=e}syncCanvas(){const e=this.store.selectSnapshot(d.a.getWhiteboardBrushSize),t=this.store.selectSnapshot(d.a.getWhiteboardBrushColor),n=this.store.selectSnapshot(d.a.getWhiteboardEraserSize),{width:i,height:o}=this.getScreenDimensions();this.canvasElement.width=i,this.canvasElement.height=o,this.setBrushSize(e),this.setBrushColor(t),this.setEraserSize(n),this.canvasContext.lineJoin="round"}resetCanvas(){const{width:e,height:t}=this.canvasElement;this.canvasContext.clearRect(0,0,e,t),this.store.dispatch(new Y.a.SetWhiteboardHasPaint(!1))}downloadSnapshot(e){const{displayName:t}=this.store.selectSnapshot(qe.a.getStory),n=`${(t||"").replace(/ /g,"_").replace(/\W/g,"").toLowerCase()}_drawing.${tl===kc.a.PNG?"png":"jpg"}`;!0===ue.a.native||ue.a.platform===$n.a.SDK?Dc.a.blobToBase64(e).pipe(Object(Ta.a)(e=>this.clipboardService.copyToClipboard(e,"image")),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{}):Dc.a.exportImage(e,tl,n)}getScreenDimensions(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(g.b),s.Pb(ve.a),s.Pb(Nn.a),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-whiteboard"]],viewQuery:function(e,t){if(1&e&&(s.Jc(Zc,!0),s.Jc(Xc,!0)),2&e){let e;s.xc(e=s.dc())&&(t.drawCanvas=e.first),s.xc(e=s.dc())&&(t.annotateElement=e.first)}},decls:10,vars:15,consts:[[1,"view-whiteboard"],["annotateWrapper",""],["class","view-whiteboard__label",3,"view-whiteboard__label--clickthrough","exporting","id","initialPos","color","size","labelActive","labelEmpty",4,"ngFor","ngForOf"],["data-test","drawCanvas",1,"view-whiteboard__canvas"],["drawCanvas",""],[1,"view-whiteboard__tools"],[3,"clearClick","downloadClick","exitClick"],[1,"view-whiteboard__label",3,"exporting","id","initialPos","color","size","labelActive","labelEmpty"]],template:function(e,t){1&e&&(s.Vb(0,"div",0,1),s.hc(2,"async"),s.hc(3,"async"),s.hc(4,"async"),s.Nc(5,el,2,9,"app-view-whiteboard-label",2),s.Qb(6,"canvas",3,4),s.Vb(8,"div",5),s.Vb(9,"app-view-whiteboard-tools",6),s.cc("clearClick",(function(){return t.handleResetClick()}))("downloadClick",(function(){return t.handleDownloadClick()}))("exitClick",(function(){return t.handleExitClick()})),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Hb("view-whiteboard--exporting",t.exporting)("view-whiteboard--cursor-paint",s.ic(2,9,t.annotateMode$)===t.whiteboardAnnotateMode.Paint)("view-whiteboard--cursor-erase",s.ic(3,11,t.annotateMode$)===t.whiteboardAnnotateMode.Erase)("view-whiteboard--cursor-text",s.ic(4,13,t.annotateMode$)===t.whiteboardAnnotateMode.Text),s.Db(5),s.mc("ngForOf",t.labels))},directives:[i.o,Hc,Gc],pipes:[i.b],styles:[".view-whiteboard{position:fixed;top:0;left:0;right:0;bottom:0;z-index:20;display:flex;flex-direction:column;align-items:center;justify-content:space-between;box-shadow:inset 0 0 0 4px #38de38;padding:8px;transition:border .3s linear}.view-whiteboard--exporting{box-shadow:none}.view-whiteboard--exporting .view-whiteboard__tools{display:none}.view-whiteboard--cursor-paint:hover{cursor:url(/assets/images/cursor-whiteboard-paint.svg) 7 20,pointer}.view-whiteboard--cursor-erase:hover{cursor:url(/assets/images/cursor-whiteboard-erase.svg) 7 20,pointer}.view-whiteboard--cursor-text:hover{cursor:url(/assets/images/cursor-whiteboard-text.svg) 7 20,pointer}.view-whiteboard__label{position:absolute;top:0;left:0;z-index:10}.view-whiteboard__label--clickthrough{pointer-events:none}.view-whiteboard__canvas{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1}.view-whiteboard__tools{z-index:1;right:8px;bottom:8px;position:absolute}"],encapsulation:2,changeDetection:0}),Kc([Object(g.e)(d.a.getWhiteboardAnnotateMode),Yc("design:type",$.a)],e.prototype,"annotateMode$",void 0),Kc([Object(g.e)(d.a.getWhiteboardBrushSize),Yc("design:type",$.a)],e.prototype,"brushSize$",void 0),Kc([Object(g.e)(d.a.getWhiteboardBrushColor),Yc("design:type",$.a)],e.prototype,"brushColor$",void 0),Kc([Object(g.e)(d.a.getWhiteboardTextSize),Yc("design:type",$.a)],e.prototype,"textSize$",void 0),Kc([Object(g.e)(d.a.getWhiteboardEraserSize),Yc("design:type",$.a)],e.prototype,"eraserSize$",void 0),Kc([Object(g.e)(ee.a.getSelectedChapterBackground),Yc("design:type",$.a)],e.prototype,"background$",void 0),e})();var il=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let ol=(()=>{class e{constructor(e,t){this.store=e,this.changeDetectorRef=t,this.ngUnsubscribe=new R.a,this.visible=!1}beforePrint(e){this.visible=!0,this.changeDetectorRef.markForCheck()}afterPrint(e){this.visible=!1,this.changeDetectorRef.markForCheck()}ngOnInit(){this.initImageUrlListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initImageUrlListener(){Object(L.b)(this.storyChapters$,this.store.select(Se.a.getRegisteredThumbnails)).pipe(Object(F.a)(([e,t])=>e.length>0&&t.size>0),Object(G.a)(([e,t])=>t.get(e[0].id).urls.large),Object(K.a)(),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.imageUrl=e,this.changeDetectorRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-print"]],hostBindings:function(e,t){1&e&&s.cc("beforeprint",(function(){return t.beforePrint()}),!1,s.Bc)("afterprint",(function(){return t.afterPrint()}),!1,s.Bc)},decls:3,vars:1,consts:[[1,"view-print"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",1,"view-print__scrim"],[1,"view-print__image",3,"src"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Qb(1,"img",1),s.Qb(2,"img",2),s.Ub()),2&e&&(s.Db(2),s.mc("src",t.imageUrl,s.Fc))},styles:[".view-print[_ngcontent-%COMP%]{background-color:#fff;display:none;position:absolute;top:0;left:0;width:100%;height:100%;z-index:10000;justify-content:space-around;margin:auto;margin-top:0!important}@media print{.view-print[_ngcontent-%COMP%]{display:flex}}.view-print__scrim[_ngcontent-%COMP%]{display:block;width:100%;height:100%;position:absolute;z-index:-1;top:0;right:0;bottom:0;left:0}.view-print__image[_ngcontent-%COMP%]{display:block;flex:1 1 auto;-o-object-fit:contain;object-fit:contain;margin:0 auto;z-index:1}"],changeDetection:0}),function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([Object(g.e)(ee.a.getStoryChapters),il("design:type",$.a)],e.prototype,"storyChapters$",void 0),e})();var rl=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function sl(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",1),s.Vb(1,"app-message-toggle",2),s.cc("handleDismiss",(function(){return s.Cc(e),s.gc().handleDismiss()})),s.Vb(2,"div"),s.Pc(3," This model is not optimized for use on mobile devices. For an optimal experience, please switch to a desktop device or try our Anatomy by Regions. "),s.Ub(),s.Ub(),s.Ub()}2&e&&(s.Db(1),s.mc("dismiss",!0))}let al=(()=>{class e{constructor(e){this.changeRef=e,this.shown=!1,this.ngUnsubscribe=new R.a}ngOnInit(){this.bookmark$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{const t=Object(le.get)(e,"tags",[]);this.shown=t.includes("complete anatomy"),this.changeRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleDismiss(){this.shown=!1,this.changeRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-content-warning"]],decls:2,vars:3,consts:[["class","warning",4,"ngIf"],[1,"warning"],["type","warning","toggleStyle","flat","icon","info-circle",3,"dismiss","handleDismiss"]],template:function(e,t){1&e&&(s.Nc(0,sl,4,1,"div",0),s.hc(1,"async")),2&e&&s.mc("ngIf",s.ic(1,1,t.bookmark$)&&t.shown)},directives:[i.p,To.a],pipes:[i.b],styles:[".warning{position:fixed;top:0;left:0;right:0;z-index:1001}"],encapsulation:2,changeDetection:0}),function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);r>3&&s&&Object.defineProperty(t,n,s)}([Object(g.e)($s.a.getSelectedBookmark),rl("design:type",$.a)],e.prototype,"bookmark$",void 0),e})();var cl=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},ll=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const pl=["engineContainer"],hl=["viewContainer"],gl=["view"],dl=["viewCameraBar"],ul=["viewLogo"],bl=["viewSceneBase"],xl=["viewToolbar"],fl=["drawer"];function ml(e,t){1&e&&s.Qb(0,"app-view-column-container")}function vl(e,t){1&e&&(s.Vb(0,"div",25),s.Qb(1,"app-view-title",26),s.Ub())}function wl(e,t){1&e&&(s.Vb(0,"div",27),s.Qb(1,"app-engine-audio"),s.Ub())}function yl(e,t){1&e&&(s.Vb(0,"div",28),s.Qb(1,"app-view-undo"),s.Ub())}function _l(e,t){1&e&&s.Qb(0,"app-view-toolbar",29)}function Cl(e,t){1&e&&(s.Vb(0,"div",30),s.Qb(1,"app-view-menu",31),s.Ub())}function Ol(e,t){if(1&e&&s.Qb(0,"app-engine-camera-bar",32),2&e){const e=s.gc();s.mc("showNav",e.cameraVisible)}}function Pl(e,t){if(1&e&&(s.Vb(0,"div",33),s.Qb(1,"app-view-logo",34),s.hc(2,"async"),s.Ub()),2&e){const e=s.gc();s.Db(1),s.mc("logoColor",e.isBackgroundLight?"color":"white")("logoSize",s.ic(2,3,e.breakpoint$)>e.breakpoint.Small?"full":"small")("contentId",e.contentId)}}function Ml(e,t){if(1&e){const e=s.Wb();s.Tb(0),s.Vb(1,"app-view-drawer",35,36),s.cc("offsetYChange",(function(t){return s.Cc(e),s.gc().handleDrawerOffsetChange(t)})),s.Ub(),s.Sb()}}function kl(e,t){1&e&&s.Qb(0,"div",37)}function zl(e,t){if(1&e&&s.Qb(0,"app-view-ondemand",38),2&e){const e=s.gc();s.mc("contentId",e.contentId)("contentType",e.contentType)}}function Sl(e,t){if(1&e&&(s.Qb(0,"app-view-progress",39),s.hc(1,"async")),2&e){const e=s.gc();s.mc("show",s.ic(1,2,e.viewWindow$)===e.viewWindow.Loader)("percent",e.chunkLoadProgress)}}function Dl(e,t){if(1&e&&s.Qb(0,"app-play-loader",41),2&e){const e=s.gc(2);s.mc("percent",e.chunkLoadProgress)}}function jl(e,t){1&e&&s.Qb(0,"app-button-loader")}function Ul(e,t){1&e&&s.Qb(0,"app-hand-loader")}function Il(e,t){if(1&e&&(s.Vb(0,"app-view-loader"),s.Nc(1,Dl,1,1,"app-play-loader",40),s.hc(2,"async"),s.Nc(3,jl,1,0,"app-button-loader",4),s.hc(4,"async"),s.Nc(5,Ul,1,0,"app-hand-loader",4),s.hc(6,"async"),s.Ub()),2&e){const e=s.gc();s.Db(1),s.mc("ngIf","play"===s.ic(2,3,e.interactType$)),s.Db(2),s.mc("ngIf","button"===s.ic(4,5,e.interactType$)),s.Db(2),s.mc("ngIf","hand"===s.ic(6,7,e.interactType$))}}function Tl(e,t){1&e&&s.Qb(0,"app-view-tour")}function Vl(e,t){1&e&&s.Qb(0,"app-view-whiteboard")}function Rl(e,t){1&e&&s.Qb(0,"app-view-print")}function El(e,t){1&e&&s.Qb(0,"app-view-content-warning")}const Ll=function(e,t,n){return{"view-page--column-in":e,"view-page--column-out":t,"view-page--drawer-push":n}};let $l=(()=>{class e{constructor(e,t,n,i,o,r,s,a,c,l,p,h){this.activatedRoute=e,this.renderer=t,this.changeDetectorRef=n,this.store=i,this.actions=o,this.liveAnnouncer=r,this.viewService=s,this.quizService=a,this.layoutService=c,this.engineService=l,this.pendoService=p,this.title=h,this.application=de.a,this.nativePlatform=Zi.a,this.breakpoint=Bi.a,this.viewLayoutStatus=Z.a,this.viewMode=te.a,this.viewUI=pe.a,this.viewWindow=Wi.a,this.columnLayoutStatus=Z.a.Hide,this.drawerExpandable=!0,this.drawerOpen=!1,this.drawerY=0,this.loadLabel="",this.chunkLoadProgress=0,this.chaptersLoaded=0,this.isBackgroundLight=!0,this.selectedChapterLoading=!1,this.viewToolsMode=ce,this.audioVisible=!1,this.cameraVisible=!1,this.columnVisible=!1,this.drawerVisible=!1,this.logoVisible=!1,this.menuVisible=!1,this.nodeInfoVisible=!1,this.searchVisible=!1,this.titleOnlyVisible=!1,this.toolbarVisible=!1,this.undoVisible=!1,this.ngUnsubscribe=new R.a,this.audioListening=new R.a}onClick(e){this.handleFirstClickTracking(e)}ngOnInit(){this.resetScene();const e=this.viewService.normalizeQueryParams(this.activatedRoute.snapshot.queryParams);this.contentId=e.id,this.contentType=e.type,this.contentLang=e.lang}ngAfterViewInit(){this.viewService.setViewLanguage(this.contentLang),this.loadStory(),this.store.dispatch(new se.s({tag:!0,pin:!1})),this.store.dispatch(new q.y(!0));const e=this.store.selectSnapshot(d.a.getUI).loader.template;this.store.dispatch(new q.Z(e===Ji.a.Bar)),e!==Ji.a.None&&this.store.dispatch(new Y.a.ToggleWindow(Wi.a.Loader,!0)),this.checkCapabilities(),this.initSizeObservers(),this.initHeaderObserver(),this.initLayoutObserver(),this.initBreakpointObservers(),this.initKeyboardObserver(),this.initLoadProgressObserver(),this.initWindowObserver(),this.initBackgroundColorObserver(),this.initResponsiveLabels(),this.initNodeObserver(),this.initChapterObserver(),this.initAudioObserver(),this.initAccessibility(),this.positionRelativeElements(this.drawerY),this.storyId$.pipe(Object(F.a)(e=>!Object(le.isNil)(e)&&"preview"!==e),Object(H.a)(1),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>this.initPendoEvents())}ngOnDestroy(){this.store.dispatch(new q.A(!1)),this.store.dispatch(new Fi.a),this.store.dispatch(new se.h),oe.a.isFullscreen()&&oe.a.exitFullscreen(),this.quizService.exitQuiz(),this.unbindKeyboard(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadStory(){this.onDemand$.pipe(Object(F.a)(e=>!e),Object(H.a)(1),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.viewService.initStory(this.contentId,this.contentType,this.contentLang)})}checkCapabilities(){const e=this.renderer.listen("window","mouseover",()=>{e(),this.store.dispatch(new Y.a.SetCanHover(!0))}),t="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;this.store.dispatch(new Y.a.SetCanTouch(t)),this.store.dispatch(new Y.a.SetCanFullscreen(oe.a.canFullscreen())),this.store.dispatch(new Y.a.SetInputMode(t?Ki.a.Touch:Ki.a.Mouse))}initBreakpointObservers(){this.breakpoint$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.handleResize()})}initResponsiveLabels(){const e=Object(E.a)(window,"resize").pipe(Object(W.a)(100)),t=this.store.select(d.a.getLabelsBreakpoint),n=this.store.select(ae.a.getSelectedLabel),i=this.store.select(ae.a.getLabelsCollapsed);n.pipe(Object(F.a)(()=>this.store.selectSnapshot(ae.a.getLabelsCollapsed)),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.viewService.toggleLabelInfo(!!e)}),i.pipe(Object(F.a)(()=>!!this.store.selectSnapshot(ae.a.getSelectedLabel)),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.viewService.toggleLabelInfo(e)}),Object(L.b)(e,t).pipe(Object(F.a)(([,e])=>!Object(le.isNil)(e)),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.checkLabelsCollapsed()}),this.checkLabelsCollapsed()}initSizeObservers(){const e=ie({strategy:"scroll"});Object(E.a)(window,"resize").pipe(Object(W.a)(10),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.updateViewHeight(),this.refreshLayout()}),new $.a(t=>{e.listenTo(this.engineContainer.nativeElement,()=>{t.next()})}).pipe(Object(W.a)(10)).subscribe(()=>{this.resizeEngineContainer()})}initHeaderObserver(){this.store.select(be.a.getSiteHeader).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.updateViewHeight()})}initLayoutObserver(){this.layout$.pipe(Object(F.a)(e=>null!=e),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.refreshLayout()})}initKeyboardObserver(){this.inputEnabled$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{e?this.bindKeyboard():this.unbindKeyboard()})}initNodeObserver(){this.actions.pipe(Object(g.l)(q.d),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.viewService.delegateNodeClick(e.node,e.event)}),this.store.select($t.a.getSelectedNode).pipe(Object(J.a)(),Object(B.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{const n=Object(le.get)(e,"objectId",void 0),i=Object(le.get)(t,"objectId",void 0);void 0!==t&&n===i||this.viewService.toggleNodeInfo(!1)})}initChapterObserver(){this.store.select(ee.a.getSelectedChapterId).pipe(Object(F.a)(e=>null!=e),Object(G.a)(()=>this.store.selectSnapshot(ee.a.getSelectedChapter)),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.viewService.initChapter(e),this.store.dispatch(new se.h),this.setPageTitle(e),this.refreshLayout()})}initLoadProgressObserver(){this.storyLoadProgress$.pipe(Object(B.a)(this.ngUnsubscribe),Object(F.a)(e=>1===e)).subscribe(()=>{this.viewService.resetLayout()}),this.store.select(re.a.getChunkLoadProgress).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.chunkLoadProgress=100*e,this.engineService.fireEvent(It.a.HumanProgress,{progress:this.chunkLoadProgress}),this.changeDetectorRef.markForCheck(),this.checkShowLoader()}),this.store.select(qe.a.getLoadingChunk).pipe(Object(F.a)(()=>null!=this.store.selectSnapshot(ee.a.getSelectedChapterId)),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{null!==e&&e.chapterId===this.store.selectSnapshot(ee.a.getSelectedChapterId)||ue.a.offline?this.store.dispatch(new Y.a.ToggleWindow(Wi.a.Loader,!0)):(this.engineService.enableRender(),this.store.dispatch(new Y.a.ToggleWindow(Wi.a.Loader,!1)),this.refreshLayout(),setTimeout(()=>{this.engineService.enableAnimation()},500))}),this.actions.pipe(Object(g.k)(Yi.g),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{0===this.store.selectSnapshot(qe.a.getLoadChunksRemaining).length&&(this.engineService.fireEvent(It.a.SceneLoaded,null),this.store.dispatch(new Y.a.ToggleWindow(Wi.a.Loader,!1)),ue.a.offline)&&setTimeout(()=>{this.engineService.enableAnimation()},1750)})}checkShowLoader(){if(this.store.selectSnapshot(ee.a.getSelectedChapterIndex)>0){const e=this.store.selectSnapshot(ee.a.getSelectedChapterId),t=this.store.selectSnapshot(qe.a.getLoadingChunk);null!==t&&e===t.chapterId&&this.store.dispatch(new Y.a.ToggleWindow(Wi.a.Loader,!0))}}initWindowObserver(){this.viewWindow$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.viewService.resetLayout(),e===Wi.a.Tutorial?(this.viewService.resetChapter(),this.viewService.toggleLabels(!1)):this.viewService.toggleLabels(!0)})}initBackgroundColorObserver(){this.background$.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.isBackgroundLight=Gi.a.isLight(e),this.changeDetectorRef.markForCheck()})}initAudioObserver(){const e=Object(N.a)(this.ngUnsubscribe,this.audioListening),t=this.viewWindow$.pipe(Object(G.a)(e=>e===Wi.a.Tutorial||e===Wi.a.Interact),Object(F.a)(e=>e),Object(H.a)(1));Object(L.b)(this.viewWindow$,t,this.audio$).pipe(Object(F.a)(([e])=>Object(le.isNil)(e)),Object(B.a)(e)).subscribe(([,e,t])=>{e?Object(le.isNil)(t)||this.playAudio():this.stopAudioListening()})}initPendoEvents(){const e={totalQuestions:0};this.store.select(fe.b.getQuestionTotal).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(t=>{e.totalQuestions=t}),this.store.select(fe.b.getQuizModeActive).pipe(Object(F.a)(()=>this.store.selectSnapshot(fe.b.getQuestionTotal)>0),Object(B.a)(this.ngUnsubscribe)).subscribe(t=>{t&&this.pendoService.track("Quiz - Entered",e)}),this.actions.pipe(Object(g.l)(Vt.a.SubmitQuestionAnswer),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{const t=this.store.selectSnapshot(fe.b.getActiveQuestionIndex),n=this.store.selectSnapshot(fe.b.getQuestionsRemaining);0===t&&this.pendoService.track("Quiz - First Question Answered",e),0===n&&this.pendoService.track("Quiz - Completed",e)}),this.store.select(ee.a.getSelectedChapterModelReady).pipe(Object(F.a)(e=>e),Object(H.a)(1),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{const e=this.store.selectSnapshot(qe.a.getStoryId),t=this.store.selectSnapshot(qe.a.getStory);this.pendoService.trackOncePerPage("View - Loaded",{id:e,chapters:t.chapters.length,tour:t.tags.includes("tour"),animated:t.tags.includes("animated"),quiz:this.store.selectSnapshot(fe.b.hasQuiz),edit:!1})})}initAccessibility(){this.chapter$.pipe(Object(F.a)(e=>null!==e),Object(K.a)((e,t)=>e.id===t.id),Object(G.a)(e=>Object(le.get)(e,"info.displayName",""))).subscribe(e=>{this.liveAnnouncer.announce("Opened chapter "+e)})}handleFirstClickTracking(e){e.composedPath().some(e=>"APP-SITE-HEADER"===e.nodeName)||1===this.store.selectSnapshot(re.a.getStoryLoadProgress)&&this.pendoService.trackOncePerPage("First Click")}stopAudioListening(){this.audioListening.next(),this.audioListening.complete()}playAudio(){this.store.dispatch(new q.n(!0)),this.stopAudioListening()}handleColumnToggle(){this.viewService.toggleColumn(),this.changeDetectorRef.markForCheck()}handleDrawerOffsetChange(e){this.drawerY=e,this.drawerOpen=-64!==e,this.positionRelativeElements(this.drawerY)}checkLabelsCollapsed(){const e=this.store.selectSnapshot(Hi.a.getBreakpoint),t=this.store.selectSnapshot(d.a.getLabelsBreakpoint),n=this.isLabelBreaking(t);this.store.dispatch(new se.r(n,e>=Bi.a.Large?qi.a.Toggle:qi.a.None))}isLabelBreaking(e){return window.innerWidth<e}bindKeyboard(){ne.bind("1",()=>this.viewService.selectTool(X.a.Select)),ne.bind("2",()=>this.viewService.selectTool(X.a.Hide)),ne.bind("3",()=>this.viewService.selectTool(X.a.Fade)),ne.bind(["command+,","ctrl+,"],e=>{e.preventDefault(),this.store.selectSnapshot(Hi.a.getBreakpoint)>Bi.a.Medium?this.viewService.toggleColumn():this.drawer.toggleDrawer(),this.changeDetectorRef.markForCheck()}),ne.bind(["command+enter","ctrl+enter","command+p"],e=>{e.preventDefault(),oe.a.toggleFullscreen()}),ne.bind("meta+z",e=>{e.preventDefault(),this.viewService.undo()}),ne.bind(["meta+y","meta+shift+z"],e=>{e.preventDefault(),this.viewService.redo()}),ne.bind([".","pagedown"],()=>this.viewService.nextChapter("Keyboard")),ne.bind([",","pageup"],()=>this.viewService.previousChapter("Keyboard")),ne.bind(["del","backspace"],e=>{e.preventDefault(),this.viewService.hideSelectedStructures()}),ne.bind("R",e=>{e.preventDefault(),this.viewService.resetChapter()}),ne.bind("/",()=>this.viewService.toggleSearch()),ne.bind("?",()=>this.viewService.toggleHelp()),ne.bind("space",e=>{e.preventDefault(),this.viewService.toggleAnimation()})}unbindKeyboard(){ne.reset()}resizeEngineContainer(){const{top:e,left:t,width:n,height:i}=this.engineContainer.nativeElement.getBoundingClientRect(),o=new A.a(t,e,n,i,Q.a.Shown);this.store.dispatch(new q.D(o))}updateViewHeight(){const e=ue.a.application!==de.a.Viewer,t=this.store.selectSnapshot(be.a.getSiteHeader),n=Object(me.a)(t,e);this.view.nativeElement.style.setProperty("--vh",n+"px")}handleResize(){this.viewService.resetLayout()}resetScene(){this.store.dispatch(new q.A(!0)),this.store.dispatch(new q.P(!1)),this.store.dispatch(new q.w(X.a.Select)),this.store.dispatch(new Fi.a),this.store.dispatch(new Tt.c(!1)),this.engineService.getEvent(It.a.AssetsLoadProgress).pipe(Object(H.a)(1),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new q.P(!0))})}refreshLayout(){const e=this.store.selectSnapshot(d.a.getUI);this.columnLayoutStatus=e.column.status,this.audioVisible=this.layoutService.isVisible(pe.a.Audio),this.cameraVisible=this.layoutService.isVisible(pe.a.Camera),this.columnVisible=this.layoutService.isVisible(pe.a.Column),this.drawerVisible=this.layoutService.isVisible(pe.a.Drawer),this.logoVisible=this.layoutService.isVisible(pe.a.Logo),this.menuVisible=this.layoutService.isVisible(pe.a.Menu),this.nodeInfoVisible=this.layoutService.isVisible(pe.a.NodeInfo),this.searchVisible=this.layoutService.isVisible(pe.a.Search),this.titleOnlyVisible=this.layoutService.isVisible(pe.a.TitleOnly),this.toolbarVisible=this.layoutService.isVisible(pe.a.Toolbar),this.undoVisible=this.layoutService.isVisible(pe.a.Undo),this.updateViewHeight(),this.resizeEngineContainer(),this.store.dispatch(new se.e(!1!==e.anatomyLabels.enable,!1!==e.nodeInfo.enable,!0)),this.store.dispatch(new q.Y(!1!==e.labels.enable&&!1!==e.labels.shown)),setTimeout(()=>{this.drawer?this.positionRelativeElements(this.drawerY):this.positionRelativeElements(),this.changeDetectorRef.markForCheck()})}positionRelativeElements(e=0){this.store.selectSnapshot(Hi.a.getBreakpoint),null!=this.viewCameraBar&&this.cameraVisible&&this.renderer.setStyle(this.viewCameraBar.nativeElement,"transform",`translate3d(-4px, ${this.menuVisible?-64:0}px, 0)`),this.renderer.setStyle(this.viewToolbar.nativeElement,"transform","translate3d(-8px, 0, 0)"),this.renderer.setStyle(this.viewSceneBase.nativeElement,"transform","translate3d(0, -8px, 0)"),this.renderer.setStyle(this.view.nativeElement,"padding-bottom",-e+"px")}setPageTitle(e){const t=Object(le.get)(e,"info.displayName");this.title.setTitle((t?t+" | ":"")+"BioDigital Human Platform")}isVisible(e){return this.layoutService.isVisible(e)}isEnabled(e){return this.layoutService.isUIEnabled(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(r.a),s.Pb(s.H),s.Pb(s.i),s.Pb(g.h),s.Pb(g.b),s.Pb(o.i),s.Pb(ve.a),s.Pb(we.a),s.Pb(ye.a),s.Pb(qt.a),s.Pb(Ft.b),s.Pb(Xi.c))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-page"]],viewQuery:function(e,t){if(1&e&&(s.Jc(pl,!0),s.Jc(hl,!0),s.Jc(gl,!0),s.Vc(dl,!0),s.Vc(ul,!0),s.Jc(bl,!0),s.Vc(xl,!0),s.Vc(fl,!0,Qi)),2&e){let e;s.xc(e=s.dc())&&(t.engineContainer=e.first),s.xc(e=s.dc())&&(t.viewContainer=e.first),s.xc(e=s.dc())&&(t.view=e.first),s.xc(e=s.dc())&&(t.viewCameraBar=e.first),s.xc(e=s.dc())&&(t.viewLogo=e.first),s.xc(e=s.dc())&&(t.viewSceneBase=e.first),s.xc(e=s.dc())&&(t.viewToolbar=e.first),s.xc(e=s.dc())&&(t.drawer=e.first)}},hostBindings:function(e,t){1&e&&s.cc("click",(function(e){return t.onClick(e)}),!1,s.Ac)},decls:41,vars:40,consts:[["role","main"],["viewContainer",""],[1,"view-page",3,"ngClass"],["view",""],[4,"ngIf"],["class","view-page__title-only",4,"ngIf"],[1,"view-page__engine"],["engineContainer",""],["class","view-page__audio",4,"ngIf"],["class","view-page__undo",4,"ngIf"],[1,"view-page__column-toggle"],[1,"view-page__scene-base"],["viewSceneBase",""],[1,"view-page__toolbar"],["viewToolbar",""],["position","right",4,"ngIf"],["class","view-page__menu",4,"ngIf"],[1,"view-page__camera-bar"],["viewCameraBar",""],[3,"showNav",4,"ngIf"],["class","view-page__logo",4,"ngIf"],["class","view-block-input",4,"ngIf"],[3,"contentId","contentType",4,"ngIf"],[3,"show","percent",4,"ngIf"],[4,"appFlagApplication","appFlagApplicationMode","appFlagApplicationNative"],[1,"view-page__title-only"],["layout","column"],[1,"view-page__audio"],[1,"view-page__undo"],["position","right"],[1,"view-page__menu"],[1,"ml-4"],[3,"showNav"],[1,"view-page__logo"],[3,"logoColor","logoSize","contentId"],[3,"offsetYChange"],["drawer",""],[1,"view-block-input"],[3,"contentId","contentType"],[3,"show","percent"],[3,"percent",4,"ngIf"],[3,"percent"]],template:function(e,t){if(1&e&&(s.Vb(0,"div",0,1),s.Vb(2,"div",2,3),s.Nc(4,ml,1,0,"app-view-column-container",4),s.Qb(5,"app-view-menu-column"),s.Nc(6,vl,2,0,"div",5),s.hc(7,"async"),s.Vb(8,"div",6,7),s.Nc(10,wl,2,0,"div",8),s.Nc(11,yl,2,0,"div",9),s.Vb(12,"div",10),s.Qb(13,"app-view-column-toggle"),s.Ub(),s.Vb(14,"div",11,12),s.Vb(16,"div",13,14),s.Nc(18,_l,1,0,"app-view-toolbar",15),s.Ub(),s.Nc(19,Cl,2,0,"div",16),s.Vb(20,"div",17,18),s.Nc(22,Ol,1,1,"app-engine-camera-bar",19),s.Ub(),s.Nc(23,Pl,3,5,"div",20),s.Ub(),s.Nc(24,Ml,3,0,"ng-container",4),s.Ub(),s.Ub(),s.Ub(),s.Nc(25,kl,1,0,"div",21),s.hc(26,"async"),s.Nc(27,zl,1,2,"app-view-ondemand",22),s.hc(28,"async"),s.Nc(29,Sl,2,4,"app-view-progress",23),s.hc(30,"async"),s.Nc(31,Il,7,9,"app-view-loader",4),s.hc(32,"async"),s.Nc(33,Tl,1,0,"app-view-tour",4),s.hc(34,"async"),s.Nc(35,Vl,1,0,"app-view-whiteboard",4),s.hc(36,"async"),s.Nc(37,Rl,1,0,"app-view-print",4),s.hc(38,"async"),s.Nc(39,El,1,0,"app-view-content-warning",24),s.Qb(40,"app-view-iphone12-warning")),2&e){let e=null,n=null;s.Db(2),s.mc("ngClass",s.rc(36,Ll,t.columnVisible,!t.columnVisible,t.drawerVisible)),s.Db(2),s.mc("ngIf",t.columnVisible||t.searchVisible||t.nodeInfoVisible),s.Db(2),s.mc("ngIf",t.titleOnlyVisible&&(null==(e=s.ic(7,20,t.chapter$))?null:e.info.displayName)),s.Db(4),s.mc("ngIf",t.audioVisible),s.Db(1),s.mc("ngIf",t.undoVisible),s.Db(7),s.mc("ngIf",t.toolbarVisible),s.Db(1),s.mc("ngIf",t.menuVisible),s.Db(3),s.mc("ngIf",t.cameraVisible),s.Db(1),s.mc("ngIf",t.logoVisible),s.Db(1),s.mc("ngIf",t.drawerVisible),s.Db(1),s.mc("ngIf",!s.ic(26,22,t.inputEnabled$)),s.Db(2),s.mc("ngIf",s.ic(28,24,t.viewWindow$)===t.viewWindow.OnDemand),s.Db(2),s.mc("ngIf","circle"===(null==(n=s.ic(30,26,t.layout$))?null:n.loader.template)),s.Db(2),s.mc("ngIf",s.ic(32,28,t.viewWindow$)===t.viewWindow.Interact),s.Db(2),s.mc("ngIf",s.ic(34,30,t.viewWindow$)===t.viewWindow.Tutorial),s.Db(2),s.mc("ngIf",s.ic(36,32,t.viewWindow$)===t.viewWindow.Whiteboard),s.Db(2),s.mc("ngIf",s.ic(38,34,t.usePrintImage$)),s.Db(2),s.mc("appFlagApplication",t.application.All)("appFlagApplicationMode","include")("appFlagApplicationNative",t.nativePlatform.All)}},directives:[i.m,i.p,ko,jo,Uo.a,$o,Cr,Ze,Pr,jr,Ls,sa,aa.a,fo,Qi,ga,va,_a,Ma,ha,ka,Pc,nl,ol,al],pipes:[i.b],styles:[".view-page{border:none;width:100vw;height:100vh;height:calc(var(--vh, 1vh) * 100);max-height:100vh;overflow:hidden;transition:padding-left .25s,padding-bottom .3s}.view-page--column-in{padding-left:320px}.view-page--column-out{padding-left:0}.view-page--drawer-push{padding-bottom:64px}.view-page__audio{position:absolute;z-index:10;top:12px;left:12px}.view-page__column{height:100%}.view-page__column-toggle{position:absolute;top:50%;margin-top:-18px;left:0;z-index:10}.view-page__engine{width:100%;height:100%;position:relative}.view-page__menu{position:absolute;right:8px;bottom:0;z-index:30}.view-page__camera-bar{position:absolute;bottom:0;right:4px;z-index:20}.view-page__logo{display:inline-block;position:absolute;left:16px;bottom:0;z-index:10}.view-page__media-bar{position:absolute;left:50%;margin-left:-100px;width:200px;bottom:0;z-index:10;justify-content:center}.view-page__media-bar:not([hidden]){display:flex}.view-page__notifications{position:absolute;top:12px;right:12px;z-index:20}.view-page__title-only{position:absolute;top:8px;left:8px;max-width:304px;z-index:10;padding:12px;border-radius:4px;background:hsla(0,0%,100%,.8);box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3);color:#131c2a}.view-page__scene-base{position:absolute;left:0;bottom:0;right:0;z-index:10;transition:transform .3s}.view-page__toolbar{position:absolute;display:inline-block;z-index:20;bottom:0;right:64px;transition:transform .25s}.view-page__undo{position:absolute;display:flex;justify-content:center;pointer-events:none;left:0;z-index:10;width:100%}.view-block-input{position:fixed;top:0;bottom:0;left:0;right:0;z-index:10000}"],encapsulation:2,changeDetection:0}),cl([Object(g.e)(qe.a.getStoryId),ll("design:type",$.a)],e.prototype,"storyId$",void 0),cl([Object(g.e)(d.a.getUI),ll("design:type",$.a)],e.prototype,"layout$",void 0),cl([Object(g.e)(d.a.getInputEnabled),ll("design:type",$.a)],e.prototype,"inputEnabled$",void 0),cl([Object(g.e)(d.a.getFullscreenActive),ll("design:type",$.a)],e.prototype,"fullscreenActive$",void 0),cl([Object(g.e)(d.a.getDrawerCoversContent),ll("design:type",$.a)],e.prototype,"drawerCoversContent$",void 0),cl([Object(g.e)(d.a.getInteractType),ll("design:type",$.a)],e.prototype,"interactType$",void 0),cl([Object(g.e)(d.a.getOnDemand),ll("design:type",$.a)],e.prototype,"onDemand$",void 0),cl([Object(g.e)(d.a.getShowHelpTab),ll("design:type",$.a)],e.prototype,"showHelpTab$",void 0),cl([Object(g.e)(d.a.getUsePrintImage),ll("design:type",$.a)],e.prototype,"usePrintImage$",void 0),cl([Object(g.e)(d.a.getOpenWindow),ll("design:type",$.a)],e.prototype,"viewWindow$",void 0),cl([Object(g.e)(d.a.getTutorialSeen),ll("design:type",$.a)],e.prototype,"tutorialSeen$",void 0),cl([Object(g.e)(re.a.getStoryLoadProgress),ll("design:type",$.a)],e.prototype,"storyLoadProgress$",void 0),cl([Object(g.e)(Hi.a.getBreakpoint),ll("design:type",$.a)],e.prototype,"breakpoint$",void 0),cl([Object(g.e)(ee.a.getSelectedChapter),ll("design:type",$.a)],e.prototype,"chapter$",void 0),cl([Object(g.e)(ee.a.getSelectedChapterReadyState),ll("design:type",$.a)],e.prototype,"selectedChapterReady$",void 0),cl([Object(g.e)(ee.a.getChaptersLoaded),ll("design:type",$.a)],e.prototype,"chaptersLoaded$",void 0),cl([Object(g.e)(ee.a.getSelectedChapterBackground),ll("design:type",$.a)],e.prototype,"background$",void 0),cl([Object(g.e)(ee.a.getSelectedChapterAudio),ll("design:type",$.a)],e.prototype,"audio$",void 0),cl([Object(g.e)(ae.a.getSelectedLabel),ll("design:type",$.a)],e.prototype,"selectedLabel$",void 0),e})();var Nl=n("+1W3"),Al=n("eKhQ"),Ql=n("Kn5L"),ql=n("6/b0"),Fl=n("7PKw"),Hl=n("J5ja"),Bl=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},Wl=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Jl=(()=>{class e{constructor(e,t,n,i,o,r,s,a,c){this.store=e,this.router=t,this.actions=n,this.cleanupService=i,this.viewService=o,this.quizService=r,this.organizationsService=s,this.activatedRoute=a,this.userAccessService=c,this.ngUnsubscribe=new R.a,this.viewGateSubject=new R.a}ngOnInit(){this.initDynamicLayout(),this.initNavigateAwayListener(),this.initOrganizationViewConfig(),this.initQuizAutoStart(),ue.a.application===de.a.Studio&&(this.initContentViews(),this.initPublicViewGate())}ngOnDestroy(){this.chapterLayout&&this.store.dispatch(new Y.a.SetUI(this.chapterLayout)),this.store.dispatch(new Y.a.SetWindows([])),this.viewGateSubject.next(),this.viewGateSubject.complete(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initOrganizationViewConfig(){this.store.select(Al.a.getOrganization).pipe(Object(F.a)(e=>!Object(le.isNil)(e)),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.organizationsService.getOrganizationAttribute(e.group_attributes,"app_settings","anatomy_description_fallback");Object(le.isNil)(t)||this.viewService.setAnatomyDescriptionFallback(t.value)})}initNavigateAwayListener(){this.router.events.pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{e instanceof r.d&&(e.url.startsWith("/edit")||this.cleanupService.resetScene())})}initDynamicLayout(){Object(L.b)([this.store.select(ee.a.getSelectedChapter),this.store.select(fe.b.getQuizModeActive),this.store.select(fe.b.getActiveQuestion)]).pipe(Object(F.a)(([e])=>null!=e),Object(B.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{const n=Object(Nl.f)(!0),i=Object(Nl.b)(e.ui),o=Object(Nl.e)();this.viewService.setUI({baseUIConfig:n,chapterUIConfig:i,quizUIConfig:t?o:null})})}initQuizAutoStart(){const e=this.activatedRoute.snapshot.queryParams,t=this.store.select($s.a.getSelectedBookmark),n=this.store.select(ee.a.getSelectedChapterReadyState),i=this.store.select(fe.b.hasQuiz);Object(L.b)([t,n,i]).pipe(Object(F.a)(([t,n,i])=>{if(!t)return!1;const o=Object(le.get)(n,"model",!1),r=Object(le.get)(e,"quiz",!1);return o&&i&&(r||t.viewMode===Ns.a.Quiz)}),Object(H.a)(1),Object(B.a)(this.ngUnsubscribe)).subscribe(([e])=>{this.quizService.startQuiz(),e.viewMode===Ns.a.Quiz&&this.store.dispatch(new Vt.a.SetQuizLocked(!0))})}initContentViews(){const e=this.viewService.normalizeQueryParams(this.activatedRoute.snapshot.queryParams),t=e.id,n=e.type;Object(L.b)([this.store.select(Vn.a.getLoggedIn),this.store.select(Vn.a.isPremiumUser),this.store.select(ee.a.getSelectedChapterModelReady),this.store.select(Vn.a.getContentViews)]).pipe(Object(F.a)(([e,t,n,i])=>e&&!t&&n&&!i.limit_reached),Object(H.a)(1),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new Ql.V(t,n))})}initPublicViewGate(){this.actions.pipe(Object(g.l)(Ql.fb),Object(G.a)(e=>e.active),Object(Ir.a)(!1),Object(K.a)(),Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{e?this.createPublicViewGate():this.destroyPublicViewGate()}),this.store.select(Vn.a.getLoggedIn).pipe(Object(B.a)(this.ngUnsubscribe)).subscribe(e=>{this.store.dispatch(new q.Q(!e)),this.store.dispatch(new Ql.fb(!e))})}createPublicViewGate(){this.destroyPublicViewGate(),this.store.select(Vn.a.getLoggedIn).pipe(Object(F.a)(e=>!e),Object(Er.a)(()=>this.userAccessService.createViewinteractionGate(1e4,5,15)),Object(K.a)(),Object(F.a)(e=>e),Object(Ta.b)(()=>this.userAccessService.openPublicViewGate()),Object(B.a)(this.viewGateSubject),Object(B.a)(this.ngUnsubscribe)).subscribe(()=>{this.createPublicViewGate()})}destroyPublicViewGate(){this.userAccessService.closePublicViewGate(),this.viewGateSubject.next()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(g.h),s.Pb(r.e),s.Pb(g.b),s.Pb(ql.a),s.Pb(ve.a),s.Pb(we.a),s.Pb(Fl.a),s.Pb(r.a),s.Pb(Hl.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-view-internal-page"]],decls:1,vars:0,template:function(e,t){1&e&&s.Qb(0,"router-outlet")},directives:[r.j],styles:[""],changeDetection:0}),Bl([Object(g.e)(qe.a.getStory),Wl("design:type",$.a)],e.prototype,"story$",void 0),Bl([Object(g.e)(Vn.a.getUserProfile),Wl("design:type",$.a)],e.prototype,"userProfile$",void 0),e})();var Gl=function(e){return e.Content="content",e.SceneJS="scenejs",e}({});const Kl={title:"We're unable to find the model you're looking for.",description:'Please check your URL or visit the <a href="/" target="_blank">BioDigital Human</a> to see what\'s available in our 3D model library.'};var Yl=n("aWUR");const Zl={title:"Your BioDigital Human embed requires proper authentication.",description:""},Xl={[Yl.a.InvalidUAID]:{title:"Authentication Issues",description:"Your Human Widget has invalid user credentials.",url:"https://support.biodigital.com"}};var ep=n("dNgK");function tp(e,t){if(1&e){const e=s.Wb();s.Vb(0,"button",13),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleSeeDetailsClick()})),s.Pc(1," See Details "),s.Ub()}}function np(e,t){if(1&e&&(s.Vb(0,"textarea",14),s.Pc(1,"        "),s.Ub()),2&e){const e=s.gc(2);s.mc("value",e.sceneJSErrorReport)}}function ip(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div"),s.Vb(1,"h1",3),s.Pc(2,"The BioDigital Human encountered an error."),s.Ub(),s.Vb(3,"h2",4),s.Pc(4," Error: "),s.Vb(5,"span",5),s.Pc(6),s.Ub(),s.Ub(),s.Vb(7,"div",6),s.Pc(8," To receive assistance with this error, please follow these steps: "),s.Ub(),s.Vb(9,"ol",7),s.Vb(10,"li",8),s.Vb(11,"button",9),s.cc("click",(function(){return s.Cc(e),s.gc().handleDownloadClick()})),s.Pc(12," Download "),s.Ub(),s.Pc(13," the error report. "),s.Ub(),s.Vb(14,"li",8),s.Vb(15,"button",9),s.cc("click",(function(){s.Cc(e);const t=s.gc();return t.handleActionClick(t.supportURL)})),s.Pc(16," Share the report "),s.Ub(),s.Pc(17," with the customer support team. "),s.Ub(),s.Ub(),s.Vb(18,"div",10),s.Nc(19,tp,2,0,"button",11),s.Vb(20,"div"),s.Nc(21,np,2,1,"textarea",12),s.Ub(),s.Ub(),s.Ub()}if(2&e){const e=s.gc();s.Db(6),s.Qc(e.sceneJSErrorTeaser),s.Db(13),s.mc("ngIf",!e.viewSceneJSErrorDetails),s.Db(2),s.mc("ngIf",e.viewSceneJSErrorDetails)}}function op(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",3),s.Pc(1),s.Ub(),s.Vb(2,"div",15),s.Tb(3),s.Vb(4,"button",9),s.cc("click",(function(){s.Cc(e);const t=s.gc();return t.handleActionClick(t.supportURL)})),s.Pc(5," Contact Support "),s.Ub(),s.Sb(),s.Ub(),s.Qb(6,"div",16)}if(2&e){const e=s.gc();s.Db(1),s.Rc(" ",e.title," "),s.Db(5),s.mc("innerHTML",e.description,s.Dc)}}let rp=(()=>{class e{constructor(e,t){this.route=e,this.snackBar=t,this.supportURL="https://support.biodigital.com",this.isSceneJSError=!1,this.viewSceneJSErrorDetails=!1}handleSeeDetailsClick(){this.viewSceneJSErrorDetails=!0}buildSceneJSErrorReport(e,t){return{contentId:e,error:JSON.parse(atob(t)),webglInfo:window.SceneJS.WEBGL_INFO}}get title(){return this.errorConfig.title}get description(){return this.errorConfig.description}ngOnInit(){const{errorType:e,errorCode:t,errorBlob:n,errorUrl:i}=this.route.snapshot.queryParams;if(e===Gl.SceneJS){this.isSceneJSError=!0;const e=this.buildSceneJSErrorReport(i,n);this.sceneJSErrorTeaser=e.error.errorName,this.sceneJSErrorReport=JSON.stringify(e,null,2)}else this.errorConfig=e===Gl.Content?Kl:Xl[t]||Zl}handleDownloadClick(){Object(Rn.saveAs)(new Blob([this.sceneJSErrorReport],{type:"text/plain"}),"BioDigital_Error_Report.txt")}handleActionClick(e){window.open(e)||this.snackBar.open("Unable to open link in new window, please check your pop-up settings.")}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(r.a),s.Pb(ep.b))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-error-page"]],decls:4,vars:2,consts:[[1,"error"],[4,"ngIf","ngIfElse"],["notSceneJSError",""],[1,"text-24","text-bold"],[1,"text-16","mt-4","mb-8"],[1,"text-semibold"],[1,"text-16","mb-4"],[1,"text-16"],[1,"mv-4"],["app-button","","buttonType","outline","buttonTheme","light",3,"click"],[1,"mt-8"],["app-button","","buttonType","outline","buttonTheme","light","buttonSize","xsmall",3,"click",4,"ngIf"],["class","error__details mt-2",3,"value",4,"ngIf"],["app-button","","buttonType","outline","buttonTheme","light","buttonSize","xsmall",3,"click"],[1,"error__details","mt-2",3,"value"],[1,"flex","items-start","mt-10"],[1,"error__description","text-16","mt-8",3,"innerHTML"]],template:function(e,t){if(1&e&&(s.Vb(0,"div",0),s.Nc(1,ip,22,3,"div",1),s.Nc(2,op,7,2,"ng-template",null,2,s.Oc),s.Ub()),2&e){const e=s.yc(3);s.Db(1),s.mc("ngIf",t.isSceneJSError)("ngIfElse",e)}},directives:[i.p,bn.a],styles:[".error[_ngcontent-%COMP%]{margin:0 auto;max-width:640px;display:flex;flex-direction:column;padding:40px;color:#283853}.error[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style:decimal}.error__details[_ngcontent-%COMP%]{width:100%;height:200px}.error__description[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .error__description[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#283853}"],changeDetection:0}),e})();var sp=n("LRne"),ap=n("qXBG");let cp=(()=>{class e{constructor(e,t){this.authService=e,this.store=t}canActivate(e,t){const n=this.store.selectSnapshot(Vn.a.getLoggedIn);return n?Object(sp.a)(n):this.authService.isLoggedIn().pipe(Object(G.a)(e=>e.signed_in))}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(ap.a),s.Zb(g.h))},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var lp=n("ThaW");const pp=[{path:"",component:V.a,canActivate:[(()=>{class e extends cp{constructor(e,t,n){super(e,t),this.authService=e,this.store=t,this.router=n}canActivate(e,t){const{id:n,be:i,m:o}=e.queryParams,r=n||i||o,s=Object(lp.a)(r);return super.canActivate(e,t).pipe(Object(Ta.b)(e=>{const t=e||s===pa.a.Module;return t?Object(sp.a)(t):Object(sp.a)(e)}))}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(ap.a),s.Zb(g.h),s.Zb(r.e))},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()],data:{fixedHeight:!0},resolve:{siteHeaderType:(()=>{class e{constructor(e,t){this.store=e,this.authService=t}resolve(e,t){return new cp(this.authService,this.store).canActivate(e,t).pipe(Object(G.a)(e=>e?xe.a.View:xe.a.Share))}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(g.h),s.Zb(ap.a))},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},children:[{path:"",component:Jl,children:[{path:"",component:$l}]},{path:"error",component:rp}]}];let hp=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[r.i.forChild(pp)],r.i]}),e})();var gp=n("Tx//");let dp=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[gp.a,T,hp,i.c]]}),e})()},q7TX:function(e,t,n){"use strict";e.exports=function(e){function t(){}var n={log:t,warn:t,error:t};if(!e&&window.console){var i=function(e,t){e[t]=function(){var e=console[t];if(e.apply)e.apply(console,arguments);else for(var n=0;n<arguments.length;n++)e(arguments[n])}};i(n,"log"),i(n,"warn"),i(n,"error")}return n}},t3DW:function(e,t,n){"use strict";(e.exports={}).forEach=function(e,t){for(var n=0;n<e.length;n++){var i=t(e[n]);if(i)return i}}},wnTG:function(e,t,n){"use strict";var i=n("UL9e");function o(){var e={},t=0,n=0,i=0;return{add:function(o,r){r||(r=o,o=0),o>n?n=o:o<i&&(i=o),e[o]||(e[o]=[]),e[o].push(r),t++},process:function(){for(var t=i;t<=n;t++)for(var o=e[t],r=0;r<o.length;r++)(0,o[r])()},size:function(){return t}}}e.exports=function(e){var t=(e=e||{}).reporter,n=i.getOption(e,"async",!0),r=i.getOption(e,"auto",!0);r&&!n&&(t&&t.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var s,a=o(),c=!1;function l(){for(c=!0;a.size();){var e=a;a=o(),e.process()}c=!1}function p(){s=setTimeout(l,0)}return{add:function(e,t){!c&&r&&n&&0===a.size()&&p(),a.add(e,t)},force:function(e){c||(void 0===e&&(e=n),s&&(clearTimeout(s),s=null),e?p():l())}}}},yUZ2:function(e,t,n){"use strict";var i=n("t3DW").forEach;e.exports=function(e){var t=(e=e||{}).reporter,n=e.batchProcessor,o=e.stateHandler.getState,r=e.idHandler;if(!n)throw new Error("Missing required dependency: batchProcessor");if(!t)throw new Error("Missing required dependency: reporter.");var s=function(){var e=document.createElement("div");e.style.cssText=c(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]);var t=document.createElement("div");t.style.cssText=c(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),t.appendChild(e),document.body.insertBefore(t,document.body.firstChild);var n=500-t.clientWidth,i=500-t.clientHeight;return document.body.removeChild(t),{width:n,height:i}}();function a(e){!function(e,t,n){if(!e.getElementById(t)){var i="erd_scroll_detection_container_animation",o="/* Created by the element-resize-detector library. */\n";o+=".erd_scroll_detection_container > div::-webkit-scrollbar { "+c(["display: none"])+" }\n\n",o+=".erd_scroll_detection_container_animation_active { "+c(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+i,"animation-name: "+i])+" }\n",o+="@-webkit-keyframes "+i+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",function(n,i){i=i||function(t){e.head.appendChild(t)};var o=e.createElement("style");o.innerHTML=n,o.id=t,i(o)}(o+="@keyframes "+i+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}(e,"erd_scroll_detection_scrollbar_style")}function c(t){var n=e.important?" !important; ":"; ";return(t.join(n)+n).trim()}function l(e,n,i){if(e.addEventListener)e.addEventListener(n,i);else{if(!e.attachEvent)return t.error("[scroll] Don't know how to add event listeners.");e.attachEvent("on"+n,i)}}function p(e,n,i){if(e.removeEventListener)e.removeEventListener(n,i);else{if(!e.detachEvent)return t.error("[scroll] Don't know how to remove event listeners.");e.detachEvent("on"+n,i)}}function h(e){return o(e).container.childNodes[0].childNodes[0].childNodes[0]}function g(e){return o(e).container.childNodes[0].childNodes[0].childNodes[1]}return a(window.document),{makeDetectable:function(e,a,p){function d(){if(e.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(r.get(a),"Scroll: "),t.log.apply)t.log.apply(null,n);else for(var i=0;i<n.length;i++)t.log(n[i])}}function u(e){var t=o(e).container.childNodes[0],n=window.getComputedStyle(t);return!n.width||-1===n.width.indexOf("px")}function b(){var e=window.getComputedStyle(a),t={};return t.position=e.position,t.width=a.offsetWidth,t.height=a.offsetHeight,t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left,t.widthCSS=e.width,t.heightCSS=e.height,t}function x(){if(d("storeStyle invoked."),o(a)){var e=b();o(a).style=e}else d("Aborting because element has been uninstalled")}function f(e,t,n){o(e).lastWidth=t,o(e).lastHeight=n}function m(){return 2*s.width+1}function v(){return 2*s.height+1}function w(e){return e+10+m()}function y(e){return e+10+v()}function _(e,t,n){var i=h(e),o=g(e),r=w(t),s=y(n),a=function(e){return 2*e+m()}(t),c=function(e){return 2*e+v()}(n);i.scrollLeft=r,i.scrollTop=s,o.scrollLeft=a,o.scrollTop=c}function C(){var e=o(a).container;if(!e){(e=document.createElement("div")).className="erd_scroll_detection_container",e.style.cssText=c(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),o(a).container=e,function(e){e.className+=" erd_scroll_detection_container_animation_active"}(e),a.appendChild(e);var t=function(){o(a).onRendered&&o(a).onRendered()};l(e,"animationstart",t),o(a).onAnimationStart=t}return e}function O(){if(d("Injecting elements"),o(a)){!function(){var n=o(a).style;if("static"===n.position){a.style.setProperty("position","relative",e.important?"important":"");var i=function(e,t,n,i){var o=n[i];"auto"!==o&&"0"!==function(e){return e.replace(/[^-\d\.]/g,"")}(o)&&(e.warn("An element that is positioned static has style."+i+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",t),t.style[i]=0)};i(t,a,n,"top"),i(t,a,n,"right"),i(t,a,n,"bottom"),i(t,a,n,"left")}}();var n=o(a).container;n||(n=C());var i,r,p,h,g=s.width,u=s.height,b=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),x=c(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(["left: "+(i=(i=-(1+g))?i+"px":"0"),"top: "+(r=(r=-(1+u))?r+"px":"0"),"right: "+(h=(h=-g)?h+"px":"0"),"bottom: "+(p=(p=-u)?p+"px":"0")])),f=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),m=c(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),v=c(["position: absolute","left: 0","top: 0"]),w=c(["position: absolute","width: 200%","height: 200%"]),y=document.createElement("div"),_=document.createElement("div"),O=document.createElement("div"),P=document.createElement("div"),M=document.createElement("div"),k=document.createElement("div");y.dir="ltr",y.style.cssText=b,y.className="erd_scroll_detection_container",_.className="erd_scroll_detection_container",_.style.cssText=x,O.style.cssText=f,P.style.cssText=v,M.style.cssText=m,k.style.cssText=w,O.appendChild(P),M.appendChild(k),_.appendChild(O),_.appendChild(M),y.appendChild(_),n.appendChild(y),l(O,"scroll",z),l(M,"scroll",S),o(a).onExpandScroll=z,o(a).onShrinkScroll=S}else d("Aborting because element has been uninstalled");function z(){o(a).onExpand&&o(a).onExpand()}function S(){o(a).onShrink&&o(a).onShrink()}}function P(){function s(t,n,i){var o=function(e){return h(e).childNodes[0]}(t),r=w(n),s=y(i);o.style.setProperty("width",r+"px",e.important?"important":""),o.style.setProperty("height",s+"px",e.important?"important":"")}function c(i){var c=a.offsetWidth,p=a.offsetHeight,h=c!==o(a).lastWidth||p!==o(a).lastHeight;d("Storing current size",c,p),f(a,c,p),n.add(0,(function(){h&&(o(a)?l()?(e.debug&&(a.offsetWidth===c&&a.offsetHeight===p||t.warn(r.get(a),"Scroll: Size changed before updating detector elements.")),s(a,c,p)):d("Aborting because element container has not been initialized"):d("Aborting because element has been uninstalled"))})),n.add(1,(function(){o(a)?l()?_(a,c,p):d("Aborting because element container has not been initialized"):d("Aborting because element has been uninstalled")})),h&&i&&n.add(2,(function(){o(a)?l()?i():d("Aborting because element container has not been initialized"):d("Aborting because element has been uninstalled")}))}function l(){return!!o(a).container}function p(){d("notifyListenersIfNeeded invoked");var e=o(a);return void 0===o(a).lastNotifiedWidth&&e.lastWidth===e.startSize.width&&e.lastHeight===e.startSize.height?d("Not notifying: Size is the same as the start size, and there has been no notification yet."):e.lastWidth===e.lastNotifiedWidth&&e.lastHeight===e.lastNotifiedHeight?d("Not notifying: Size already notified"):(d("Current size not notified, notifying..."),e.lastNotifiedWidth=e.lastWidth,e.lastNotifiedHeight=e.lastHeight,void i(o(a).listeners,(function(e){e(a)})))}function b(){d("Scroll detected."),u(a)?d("Scroll event fired while unrendered. Ignoring..."):c(p)}if(d("registerListenersAndPositionElements invoked."),o(a)){o(a).onRendered=function(){if(d("startanimation triggered."),u(a))d("Ignoring since element is still unrendered...");else{d("Element rendered.");var e=h(a),t=g(a);0!==e.scrollLeft&&0!==e.scrollTop&&0!==t.scrollLeft&&0!==t.scrollTop||(d("Scrollbars out of sync. Updating detector elements..."),c(p))}},o(a).onExpand=b,o(a).onShrink=b;var x=o(a).style;s(a,x.width,x.height)}else d("Aborting because element has been uninstalled")}function M(){if(d("finalizeDomMutation invoked."),o(a)){var e=o(a).style;f(a,e.width,e.height),_(a,e.width,e.height)}else d("Aborting because element has been uninstalled")}function k(){p(a)}function z(){var e;d("Installing..."),o(a).listeners=[],e=b(),o(a).startSize={width:e.width,height:e.height},d("Element start size",o(a).startSize),n.add(0,x),n.add(1,O),n.add(2,P),n.add(3,M),n.add(4,k)}p||(p=a,a=e,e=null),e=e||{},d("Making detectable..."),function(e){return!function(e){var t=e.getRootNode&&e.getRootNode().contains(e);return e===e.ownerDocument.body||e.ownerDocument.body.contains(e)||t}(e)||null===window.getComputedStyle(e)}(a)?(d("Element is detached"),C(),d("Waiting until element is attached..."),o(a).onRendered=function(){d("Element is now attached"),z()}):z()},addListener:function(e,t){if(!o(e).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");o(e).listeners.push(t)},uninstall:function(e){var t=o(e);t&&(t.onExpandScroll&&p(h(e),"scroll",t.onExpandScroll),t.onShrinkScroll&&p(g(e),"scroll",t.onShrinkScroll),t.onAnimationStart&&p(t.container,"animationstart",t.onAnimationStart),t.container&&e.removeChild(t.container))},initDocument:a}}}}]);