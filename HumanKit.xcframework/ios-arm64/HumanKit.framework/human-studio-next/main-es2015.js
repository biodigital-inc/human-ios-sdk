(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+/zV":function(e,t,n){"use strict";n.d(t,"b",(function(){return W})),n.d(t,"a",(function(){return q}));var i=n("0IaG"),a=n("AcyG"),s=n("eKhQ"),o=n("XNiG"),r=n("LRne"),c=n("itXk"),l=n("HDdC"),p=n("3Pt+"),u=n("Lyqc"),d=n("Kj3r"),g=n("pLZG"),h=n("IzEk"),b=n("1G5W"),m=n("a0wz"),f=n("QtmD"),y=n("LvDl"),v=n("ECVi"),O=n("0Zsz"),S=n("QkH1"),x=n("WoAB"),C=n("J9/X"),w=n("fXoL"),j=n("dNgK"),k=n("7PKw"),P=n("MuXT"),_=n("ofXK"),M=n("Y8QC"),I=n("oOZS"),T=n("IlST"),U=n("kmnG"),L=n("QibW"),z=n("bSwM"),A=n("XoCC"),F=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},D=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function E(e,t){if(1&e&&(w.Vb(0,"p",15),w.Pc(1),w.Ub()),2&e){const e=w.gc();w.Db(1),w.Rc(" ",e.settings.message," ")}}function N(e,t){1&e&&(w.Vb(0,"mat-error"),w.Pc(1,"Please enter a valid title."),w.Ub())}function R(e,t){1&e&&(w.Vb(0,"app-form-field",18),w.Vb(1,"mat-radio-group",19),w.Vb(2,"mat-radio-button",20),w.Pc(3,"Private "),w.Ub(),w.Vb(4,"mat-radio-button",21),w.Pc(5,"Team - View Only "),w.Ub(),w.Vb(6,"mat-radio-button",22),w.Pc(7,"Team - View & Edit "),w.Ub(),w.Ub(),w.Ub())}function V(e,t){if(1&e&&(w.Vb(0,"div",25),w.Vb(1,"mat-checkbox",26),w.Pc(2),w.Ub(),w.Ub()),2&e){const e=t.$implicit;w.mc("formGroupName",t.index),w.Db(2),w.Rc(" ",e.get("title").value," ")}}function B(e,t){if(1&e&&(w.Vb(0,"app-form-field",23),w.Nc(1,V,3,2,"div",24),w.Ub()),2&e){const e=w.gc(2);w.Db(1),w.mc("ngForOf",e.collectionsArray.controls)}}function H(e,t){if(1&e&&(w.Vb(0,"div"),w.Nc(1,R,8,0,"app-form-field",16),w.Nc(2,B,2,1,"app-form-field",17),w.hc(3,"async"),w.Ub()),2&e){const e=w.gc();let t=null;w.Db(1),w.mc("ngIf",e.isNew||e.isOwner),w.Db(1),w.mc("ngIf",(null==(t=w.ic(3,2,e.collections$))?null:t.length)>0)}}function Q(e,t){1&e&&(w.Vb(0,"div"),w.Vb(1,"app-form-field",27),w.Vb(2,"mat-checkbox",28),w.Vb(3,"span",29),w.Pc(4,"With the BioDigital Community"),w.Ub(),w.Ub(),w.Ub(),w.Ub())}function G(e,t){1&e&&w.Qb(0,"app-spinner",30)}var W=function(e){return e[e.SaveStory=0]="SaveStory",e[e.Manage=1]="Manage",e[e.Copy=2]="Copy",e[e.Duplicate=3]="Duplicate",e}({});let q=(()=>{class e{constructor(e,t,n,i,s,r,c,l,g){this.store=e,this.fb=t,this.dialogRef=n,this.data=i,this.snackbar=s,this.actions=r,this.organizationsService=c,this.storyService=l,this.changeRef=g,this.disablePristine=!1,this.collectionsDirty=!1,this.nameAccessDirty=!1,this.collectionsLoading=!1,this.collectionsEnabled=!1,this.collectionsMap=new Map,this.contentCollections=new Map,this.submit=new o.a,this.settings={mode:W.SaveStory},this.saveBookmarkDialogMode=W,this.canAddTeamBookmarks=!1,this.ngUnsubscribe=new o.a,this.settings=Object.assign(Object.assign({},this.settings),i);const h=this.settings.bookmark;this.groupModule=!!h&&S.l(h),this.form=this.fb.group({title:[{value:"",disabled:this.groupModule},[p.C.required,p.C.maxLength(60)]],collections:new p.d([]),groupAccess:[{value:null,disabled:this.groupModule}],publicAccess:[!1]}),this.collectionsArray=this.form.get("collections"),this.actions.pipe(Object(a.l)(u.B),Object(b.a)(this.ngUnsubscribe)).subscribe(e=>this.handleSaveSuccess(e)),this.actions.pipe(Object(a.l)(u.A),Object(b.a)(this.ngUnsubscribe)).subscribe(e=>this.handleSaveFailure(e.bookmarkEntry.title)),this.actions.pipe(Object(a.l)(u.l),Object(b.a)(this.ngUnsubscribe)).subscribe(e=>this.handleCopySuccess(e)),this.actions.pipe(Object(a.l)(u.k),Object(b.a)(this.ngUnsubscribe)).subscribe(e=>this.handleCopyFailure(e)),this.groupModule&&(this.actions.pipe(Object(a.l)(u.L),Object(b.a)(this.ngUnsubscribe)).subscribe(e=>{this.handleSaveSuccess(e),this.store.dispatch(new C.a.SearchStudio)}),this.actions.pipe(Object(a.l)(u.K),Object(b.a)(this.ngUnsubscribe)).subscribe(e=>this.handleSaveFailure(e.bookmark.title))),this.submit.pipe(Object(d.a)(100),Object(b.a)(this.ngUnsubscribe)).subscribe(()=>this.onDebouncedSubmit())}get saving$(){return this.settings.mode===W.Copy?this.bookmarkCopying$:this.bookmarkSaving$}get dialogTitle(){if(this.settings.title)return this.settings.title;switch(this.settings.mode){case W.Manage:return"Manage";case W.SaveStory:return"Save";case W.Copy:return"Add to My Library";case W.Duplicate:return"Duplicate"}}ngOnInit(){const e=this.store.selectSnapshot(s.a.getOrganization);e&&!this.store.selectSnapshot(s.a.getCollections)&&this.store.dispatch(new m.h(e.id));const t=this.settings.bookmark;let n=t?t.title:this.settings.bookmarkTitle?this.settings.bookmarkTitle:"";this.settings.mode===W.Duplicate&&(n=("Copy of "+n).slice(0,60));let i=!1,a=!1;const o=t?this.getGroupAccess(t):null;this.groupModule?(i=!1,a=!0):o?(i=o.member_edit,a=!i&&o.visible):!t&&e&&(i=!1,a=!0);const r=!this.isGroupUser()&&t&&t.tags.includes("public");if(this.form.patchValue({title:n,groupAccess:i?"edit":a?"view":"",publicAccess:r}),this.trackNameAccessDirty(),this.isNew=!0,this.isOwner=!0,t){const e=this.store.selectSnapshot(v.a.getUserRole);S.e(e,t)?(this.isNew=!1,this.isOwner=!0):(this.isNew=!0,this.isOwner=this.isNew)}this.initGroupAccess(),this.initCollections(),this.toggleGroupAccess(a,i),this.initPermissions(),this.dialogRef.beforeClosed().pipe(Object(b.a)(this.ngUnsubscribe)).subscribe(()=>{this.checkCanceSave()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initGroupAccess(){this.form.get("groupAccess").valueChanges.pipe(Object(b.a)(this.ngUnsubscribe)).subscribe(e=>{this.toggleGroupAccess("view"===e,"edit"===e)})}initCollections(){const e=this.settings.bookmark,t=this.store.selectSnapshot(s.a.getOrganization);let n=Object(r.a)([]);t&&e&&(this.collectionsLoading=!0,n=this.organizationsService.getCollections({group_id:t.id,content_type:e.type,content_id:e.id,include_content:1})),Object(c.b)([this.collections$,n]).pipe(Object(g.a)(([e])=>!Object(y.isNil)(e)),Object(b.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{t.forEach(e=>{this.contentCollections.set(e.collection_id,Object(y.get)(e,"collection_content[0].collection_content_id",null))}),this.collectionsArray.clear(),e.forEach(e=>{this.collectionsMap.set(e.collection_id,e);const t=this.contentCollections.get(e.collection_id);this.collectionsArray.push(this.fb.group({title:e.collection_name,id:e.collection_id,checked:[{value:!Object(y.isNil)(t),disabled:!this.collectionsEnabled}]}))}),this.trackCollectionsDirty(),this.collectionsLoading=!1,this.changeRef.markForCheck()})}trackNameAccessDirty(){const e={title:this.form.value.title,groupAccess:this.form.value.groupAccess,publicAccess:this.form.value.publicAccess};this.form.valueChanges.pipe(Object(b.a)(this.ngUnsubscribe)).subscribe(t=>{const n={title:t.title,groupAccess:t.groupAccess,publicAccess:t.publicAccess};this.nameAccessDirty=!Object(y.isEqual)(e,n),this.setDisablePristine()})}trackCollectionsDirty(){const e=this.collectionsArray.value;this.collectionsArray.valueChanges.pipe(Object(b.a)(this.ngUnsubscribe)).subscribe(t=>{this.collectionsDirty=!Object(y.isEqual)(e,t),this.setDisablePristine()})}initPermissions(){Object(c.b)([this.userRole$,this.organization$]).pipe(Object(b.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.canAddTeamBookmarks=!Object(y.isNil)(t)&&S.k(e,x.a.AddTeamBookmarks),this.changeRef.markForCheck()})}toggleGroupAccess(e,t){this.setCollectionsEnabled((this.isOwner||this.isNew)&&(e||t))}handleSubmit(){this.form.valid&&this.submit.next()}onDebouncedSubmit(){const e=this.settings.bookmark,t=this.getBookmarkEntry();switch(this.settings.mode){case W.Duplicate:case W.Copy:{const n=this.store.selectSnapshot(v.a.getUserLanguage),i=this.canAddTeamBookmarks?Object(y.get)(t,"add_group_access[0]"):void 0;this.store.dispatch(new u.j(t.id,t.title,e.type,n,i,this.canAddTeamBookmarks?t.addCollections:void 0));break}case W.SaveStory:case W.Manage:this.groupModule?this.store.dispatch(new u.J(e,t.addCollections,t.removeCollections)):this.saveBookmark(e,t)}}saveBookmark(e,t){const n=this.settings.mode===W.SaveStory;(e&&e.id&&this.settings.mode===W.Manage?this.storyService.getStory(e.id,e.type):Object(r.a)(void 0)).pipe(Object(h.a)(1),Object(b.a)(this.ngUnsubscribe)).subscribe(e=>{e&&e.displayName!==t.title&&(t.index=Object.assign(Object.assign({},e),{displayName:t.title})),this.store.dispatch(new u.z(t,!1,n))})}handleCancelClick(){this.dialogRef.close()}handleSaveSuccess(e){const t=e.bookmark;this.snackbar.open(this.settings.mode===W.Manage?`Your updates to "${t.title}" have been saved to your library.`:`"${t.title}" saved to your library.`),this.dialogRef.close(t)}handleSaveFailure(e){this.snackbar.open(`Unable to save bookmark "${e}". Please try again.`)}handleCopySuccess(e){this.snackbar.open(`"${e.newBookmark.title}" saved to your library.`),this.dialogRef.close(e.newBookmark)}handleCopyFailure(e){switch(Object(y.get)(e.error,"error.error.message")){case"Action forbidden. Your account content limit has been reached":this.store.dispatch(new O.a.OpenLimit);break;default:this.snackbar.open("There was an error adding to your library")}}getBookmarkEntry(){const{bookmark:e,viewMode:t}=this.settings,{title:n,groupAccess:i,publicAccess:a}=this.form.value,s="view"===i,o="edit"===i,r=this.isGroupUser()?null:a;let c=[],l=[];const p=[],u=new Map;if(this.isOwner){const t=this.createGroupAccess(s,o);t?c=[t]:l=e?e.group_access:[],this.collectionsArray.value.forEach(e=>{const t=this.collectionsMap.get(e.id),n=this.contentCollections.get(e.id);this.collectionsEnabled?(Object(y.isNil)(n)||this.settings.mode===W.Duplicate)&&e.checked?p.push(t):Object(y.isNil)(n)||e.checked||u.set(t,n):Object(y.isNil)(n)||u.set(t,n)})}return{isOwner:!e||this.isOwner,id:e?e.id:null,title:n,viewMode:t,add_group_access:c,remove_group_access:l,addCollections:p,removeCollections:u,public_access:r}}getGroupAccess(e){const t=this.store.selectSnapshot(s.a.getOrganization);let n=null;if(t&&e.group_access){const i=t.id;n=e.group_access.find(e=>e.group_id===i)}return n}createGroupAccess(e,t){const n=this.store.selectSnapshot(s.a.getOrganization);return n&&(e||t)?{group_id:n.id,member_edit:t,visible:e||t}:null}isGroupUser(){return!!this.store.selectSnapshot(s.a.getOrganization)}checkCanceSave(){this.store.selectSnapshot(this.settings.mode===W.Copy?f.a.getCopying:f.a.getSaving)&&this.store.dispatch(this.settings.mode===W.Copy?new u.f:new u.g)}setCollectionsEnabled(e){this.collectionsEnabled=e,this.collectionsArray.controls.forEach(t=>{e?t.enable():t.disable()})}setDisablePristine(){this.disablePristine=this.settings.mode===W.Manage&&!this.collectionsDirty&&!this.nameAccessDirty,this.changeRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(w.Pb(a.h),w.Pb(p.f),w.Pb(i.g),w.Pb(i.a),w.Pb(j.b),w.Pb(a.b),w.Pb(k.a),w.Pb(P.a),w.Pb(w.i))},e.\u0275cmp=w.Jb({type:e,selectors:[["app-save-bookmark-dialog"]],decls:24,vars:19,consts:[["data-test","saveDialog","role","dialog","aria-modal","true",1,"save"],[3,"formGroup","submit"],["mat-dialog-title",""],["class","save__message",4,"ngIf"],["mat-dialog-content",""],[1,"theme-light"],["theme","light","label","Title"],["type","text","name","title","maxlength","60","autocomplete","off","formControlName","title","required","","aria-label","Title","data-test","bookmarkTitleInput",1,"input"],["title",""],[3,"field"],[4,"ngIf"],["mat-dialog-actions",""],["type","button","app-button","","buttonTheme","light",1,"mr-2",3,"click"],["type","submit","app-button","","buttonType","primary","data-test","saveButton",3,"disabled"],["size","medium","class","ml-2","render","inline",4,"ngIf"],[1,"save__message"],["theme","light","label","Permissions",4,"ngIf"],["theme","light","label","Collection (Optional)","aria-label","Collection (Optional)","data-test","saveCollection","formArrayName","collections",4,"ngIf"],["theme","light","label","Permissions"],["formControlName","groupAccess","aria-label","Permission",1,"save__radio-group","text-12","mt-2"],["value","","data-test","groupAccessPrivateButton",1,"mb-2"],["value","view","data-test","groupAccessViewButton",1,"mb-2"],["value","edit","data-test","groupAccessEditButton"],["theme","light","label","Collection (Optional)","aria-label","Collection (Optional)","data-test","saveCollection","formArrayName","collections"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["data-test","saveCollectionCheckbox","formControlName","checked",1,"save__collection","text-12"],["theme","light","label","Share"],["formControlName","publicAccess",1,"save__permission"],[1,"text-12"],["size","medium","render","inline",1,"ml-2"]],template:function(e,t){if(1&e&&(w.Vb(0,"div",0),w.Vb(1,"form",1),w.cc("submit",(function(){return t.handleSubmit()})),w.Vb(2,"h1",2),w.Pc(3),w.Ub(),w.Nc(4,E,2,1,"p",3),w.Vb(5,"div",4),w.Vb(6,"div",5),w.Vb(7,"app-form-field",6),w.Qb(8,"input",7,8),w.Qb(10,"app-character-counter",9),w.Nc(11,N,2,0,"mat-error",10),w.Ub(),w.Nc(12,H,4,4,"div",10),w.Nc(13,Q,5,0,"div",10),w.hc(14,"async"),w.Ub(),w.Ub(),w.Vb(15,"div",11),w.Vb(16,"button",12),w.cc("click",(function(){return t.handleCancelClick()})),w.Pc(17," Cancel "),w.Ub(),w.Vb(18,"button",13),w.hc(19,"async"),w.Pc(20),w.hc(21,"async"),w.Nc(22,G,1,0,"app-spinner",14),w.hc(23,"async"),w.Ub(),w.Ub(),w.Ub(),w.Ub()),2&e){const e=w.yc(9);w.Eb("aria-label",t.dialogTitle),w.Db(1),w.mc("formGroup",t.form),w.Db(2),w.Rc(" ",t.dialogTitle," "),w.Db(1),w.mc("ngIf",t.settings.message),w.Db(6),w.mc("field",e),w.Db(1),w.mc("ngIf",t.form.get("title").invalid),w.Db(1),w.mc("ngIf",t.canAddTeamBookmarks),w.Db(1),w.mc("ngIf",!w.ic(14,11,t.organization$)&&t.settings.mode!==t.saveBookmarkDialogMode.Copy),w.Db(5),w.mc("disabled",t.disablePristine||t.collectionsLoading||w.ic(19,13,t.saving$)),w.Db(2),w.Rc(" ",w.ic(21,15,t.saving$)?"Saving":"Save"," "),w.Db(2),w.mc("ngIf",w.ic(23,17,t.saving$))}},directives:[p.E,p.s,p.j,i.h,_.p,i.e,M.a,p.c,p.m,p.r,p.i,p.A,I.a,i.c,T.a,U.b,L.b,L.a,p.e,_.o,p.k,z.a,A.a],pipes:[_.b],styles:[".save__message[_ngcontent-%COMP%]{color:#61779e;margin:12px auto;font-size:12px}.save__radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.save__permission[_ngcontent-%COMP%]{display:block;margin:4px auto}.save__collection.mat-checkbox-disabled[_ngcontent-%COMP%]{opacity:.5}@media (min-width:768px){.save[_ngcontent-%COMP%]{min-width:380px}}@media (max-width:767px){.save[_ngcontent-%COMP%]{min-width:65vw}}"],changeDetection:0}),F([Object(a.e)(v.a.getUserRole),D("design:type",l.a)],e.prototype,"userRole$",void 0),F([Object(a.e)(s.a.getOrganization),D("design:type",l.a)],e.prototype,"organization$",void 0),F([Object(a.e)(s.a.getCollections),D("design:type",l.a)],e.prototype,"collections$",void 0),F([Object(a.e)(f.a.getSaving),D("design:type",l.a)],e.prototype,"bookmarkSaving$",void 0),F([Object(a.e)(f.a.getCopying),D("design:type",l.a)],e.prototype,"bookmarkCopying$",void 0),e})()},"+1W3":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return b})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"h",(function(){return y})),n.d(t,"d",(function(){return v}));var i=n("WFQG"),a=n("snBo"),s=(n("jDQD"),n("+6Fv"),n("LvDl")),o=n("mtgE"),r=n("stSV");const c=i.c.ui;class l{}const p=(e,t)=>void 0===e?t:e;function u(...e){return!!e.some(e=>!0===e)||!e.some(e=>!1===e)&&void 0}function d(e,t,n){return Object.values(o.a).indexOf(n)>=0?n:!1===e?o.a.None:null!=t?t?o.a.Full:o.a.Small:null}function g(e){return Object.values(r.a).includes(e)?e:null}function h(e){const t=null!=e.all?m(e.all):new l;return y({all:e.all,[a.a.Loader]:g(e.loader),[a.a.Help]:u(e.help,e.help),[a.a.Tools]:u(e.tools,e.tools),[a.a.Layout]:e.layout,[a.a.Toolbar]:e.toolbar,[a.a.Fullscreen]:u(e.fullscreen,e.fullscreen),[a.a.Search]:u(e.objectTree,e.search),[a.a.Audio]:e.audio,[a.a.Media]:d(e.playPause,u(e.scrubber,e["scrubber.chapters"]),e.media),[a.a.Camera]:u(e.nav,e.cameraMode,e.center,e.zoomIn,e.zoomOut,e.nav),[a.a.Pagination]:u(e.tour,e["tour.chapters"]),[a.a.Column]:u(e.info,e.info),[a.a.Drawer]:u(e.info,e.info),[a.a.TitleOnly]:u(e.info,e.info),[a.a.LabelList]:u(e.labelList,e.labelList),[a.a.NodeInfo]:e.anatomyDescriptions,[a.a.Legend]:e.legend,[a.a.Menu]:e.menu,[a.a.InternetExplorerWarning]:void 0,[a.a.Logo]:e.logo,[a.a.Labels]:void 0,[a.a.Presenter]:void 0,logoIsHyperLink:void 0,drawerExpandedInitially:void 0,[a.a.Tutorial]:void 0,[a.a.AnatomyLabels]:u(e.anatomyLabels,e.anatomyLabels),[a.a.Undo]:u(e.reset,e.undo),[a.a.Whiteboard]:e.whiteboard,[a.a.VisibilityLayers]:e.visibilityLayers,[a.a.ContextActions]:e.contextActions,[a.a.ToggleLabels]:void 0},t)}function b(e){if(!e||!e.config)return null;const t=new l;return t[a.a.Column]=e.config.info,t[a.a.Drawer]=e.config.info,t[a.a.Fullscreen]=e.config.fullscreen,t[a.a.Search]=e.config.objectTree,t[a.a.Camera]=e.config.nav,t[a.a.Loader]=g(e.config.loader),t[a.a.Whiteboard]=e.config.whiteboard,t[a.a.VisibilityLayers]=e.config.visibilityLayers,t[a.a.ContextActions]=e.config.contextActions,t[a.a.Media]=d(e.config.playPause,e.config.scrubber,e.config.mediaControls),t}function m(e){return{[a.a.Loader]:e?r.b:r.a.None,[a.a.Column]:e,[a.a.Drawer]:e,[a.a.Tools]:e,[a.a.Toolbar]:e,[a.a.Fullscreen]:e,[a.a.Help]:e,[a.a.Camera]:e,[a.a.Search]:e,[a.a.Presenter]:e,[a.a.Menu]:e,[a.a.Audio]:e,[a.a.Pagination]:e,[a.a.NodeInfo]:e,[a.a.Labels]:null,[a.a.LabelList]:e,[a.a.Media]:null,[a.a.TitleOnly]:e,[a.a.Undo]:e,all:e,drawerExpandedInitially:null,logoIsHyperLink:null,[a.a.AnatomyLabels]:null,[a.a.Logo]:!0,[a.a.Tutorial]:null,[a.a.InternetExplorerWarning]:!0,[a.a.Legend]:!0,[a.a.Whiteboard]:e,[a.a.VisibilityLayers]:e,[a.a.ContextActions]:e,[a.a.ToggleLabels]:!0}}function f(){const e=new l;return e.search=!1,e.pagination=!1,e.labelList=!1,e.labels=!1,e.anatomyLabels=!1,e.nodeInfo=!1,e.toggleLabels=!1,e.legend=!1,e}function y(e,t,n=!1){return null==t?e:Object(s.uniq)([...Object.keys(e),...Object.keys(t)]).reduce((i,a)=>(i[a]=null==e[a]||n&&null!=t[a]?t[a]:e[a],i),new l)}function v(e,t){const n=JSON.parse(JSON.stringify(e));return n.loader.enable=p(t[a.a.Loader]!==r.a.None,c.loader.enable),null!=t[a.a.Loader]&&(n.loader.template=t[a.a.Loader]),n.nodeInfo.enable=p(t[a.a.NodeInfo],c.nodeInfo.enable),n.pagination.enable=p(t[a.a.Pagination],c.pagination.enable),n.drawer.isExpandedInitially=p(t.drawerExpandedInitially,c.drawer.isExpandedInitially),n.tools.enable=p(t[a.a.Tools],c.tools.enable),n.toolbar.enable=p(t[a.a.Toolbar],c.toolbar.enable),n.media.enable=p(t[a.a.Media]!==o.a.None,c.media.enable),n.media.template=t[a.a.Media],n.fullscreen.enable=p(t[a.a.Fullscreen],c.fullscreen.enable),n.help.enable=p(t[a.a.Help],c.help.enable),n.description.enable=p(t[a.a.Description],c.description.enable),n.titleOnly.enable=p(t[a.a.TitleOnly],c.titleOnly.enable),n.camera.enable=p(t[a.a.Camera],c.camera.enable),n.search.enable=p(t[a.a.Search],c.search.enable),n.presenter.enable=p(t[a.a.Presenter],c.presenter.enable),n.menu.enable=p(t[a.a.Menu],c.menu.enable),n.logo.enable=p(t[a.a.Logo],c.logo.enable),n.logo.isHyperLink=p(t.logoIsHyperLink,c.logo.isHyperLink),n.internetExplorerWarning.enable=p(t.internetExplorerWarning,c.internetExplorerWarning.enable),n.undo.enable=p(t[a.a.Undo],c.undo.enable),n.labels.enable=p(t[a.a.Labels],c.labels.enable),n.labelList.enable=p(t[a.a.LabelList],c.labelList.enable),n.audio.enable=p(t[a.a.Audio],c.audio.enable),n.reset.enable=p(t[a.a.Reset],c.reset.enable),n.column.enable=p(t[a.a.Column],c.column.enable),n.drawer.enable=p(t[a.a.Drawer],c.drawer.enable),n.anatomyLabels.enable=p(t[a.a.AnatomyLabels],c.anatomyLabels.enable),n.tutorial.enable=p(t[a.a.Tutorial],c.tutorial.enable),n.whiteboard.enable=p(t[a.a.Whiteboard],c.whiteboard.enable),n.visibilityLayers.enable=p(t[a.a.VisibilityLayers],c.visibilityLayers.enable),n.contextActions.enable=p(t[a.a.ContextActions],c.contextActions.enable),n.toggleLabels.enable=p(t[a.a.ToggleLabels],c.toggleLabels.enable),n}},"+6Fv":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Play="play",e.Button="button",e.Hand="hand",e}({})},"+8WF":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var i=n("AytR"),a=n("p345"),s=function(e){return e[e.List=0]="List",e[e.Card=1]="Card",e}({});const o=i.a.application===a.a.Loft?s.List:s.Card},"+DiI":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("LRne"),a=n("ZULQ");function s(e){return t=>{const n=a.a.parseEmails(t.value),s=n.filter(e=>!a.a.validateEmail(e)),o=n.length,r="number"==typeof e&&o>e;let c={};return r&&(c=Object.assign(Object.assign({},c),{maxEmailsExceeded:r,currentEmailCount:o})),s.length>0&&(c=Object.assign(Object.assign({},c),{invalidEmails:s})),Object.keys(c).length>0?Object(i.a)(c):Object(i.a)(null)}}},"+QY/":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("ofXK"),a=n("+rOU"),s=n("S+jl"),o=n("+pSP"),r=n("EWj2"),c=n("PCNd"),l=n("fXoL");let p=(()=>{class e{}return e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.f,s.a,o.a,r.a,c.a]]}),e})()},"+Xsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),a=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})()},"+pSP":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),a=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})()},"/75k":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("AcyG"),a=n("JaAu"),s=n("Mh2x"),o=n("CAXj"),r=n("LvDl"),c=n("fXoL"),l=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const u={stacksForChapter:{}};let d=(()=>{let e=class{constructor(e){this.store=e}static canUndo(e,t){return e.stacksForChapter[t.selectedChapter].undoStack.length>0}static canRedo(e,t){return e.stacksForChapter[t.selectedChapter].redoStack.length>0}static getUndoCount(e,t){return e.stacksForChapter[t.selectedChapter].undoStack.length||0}reset(e,t){e.patchState(immer.produce(e.getState(),e=>{e.stacksForChapter={}}))}undoAll(e,t){const n=e.getState();if(void 0===n.stacksForChapter[t.chapterId])return;const i=[...n.stacksForChapter[t.chapterId].undoStack].reverse(),a=i.flat().reduce((e,t)=>(void 0===e[t.patchAction]&&(e[t.patchAction]={action:t.patchAction,patches:[]}),e[t.patchAction].patches=[...e[t.patchAction].patches,...t.inverse],e),{});Object.keys(a).forEach(t=>{e.dispatch(new a[t].action(a[t].patches))});const s=immer.produce(n,e=>{e.stacksForChapter[t.chapterId].undoStack=[],e.stacksForChapter[t.chapterId].redoStack=i});e.patchState(s)}preserveState(e,t){const n=this.store.selectSnapshot(s.a.getSelectedChapterId),i=immer.produce(e.getState(),e=>{0!==t.patches.length&&(t.patches.some(e=>0===e.forward.length)&&t.patches.some(e=>0===e.inverse.length)||(void 0===e.stacksForChapter[n]&&(e.stacksForChapter[n]={redoStack:[],undoStack:[]}),e.stacksForChapter[n].redoStack=[],e.stacksForChapter[n].undoStack.push(t.patches)))});e.patchState(i)}redo(e,t){const n=e.getState(),i=Object(r.get)(n.stacksForChapter[t.chapterId],"redoStack",[]);if(0===i.length)return;const a=i[i.length-1],s=immer.produce(n,e=>{e.stacksForChapter[t.chapterId].redoStack.pop(),e.stacksForChapter[t.chapterId].undoStack.push(a)});e.patchState(s),a.forEach(t=>{e.dispatch(new t.patchAction(t.forward))})}undo(e,t){const n=e.getState(),i=Object(r.get)(n.stacksForChapter[t.chapterId],"undoStack",[]);if(0===i.length)return;const a=i[i.length-1],s=immer.produce(n,e=>{e.stacksForChapter[t.chapterId].undoStack.pop(),e.stacksForChapter[t.chapterId].redoStack.push(a)});e.patchState(s),a.forEach(t=>{e.dispatch(new t.patchAction(t.inverse))})}};return e.\u0275fac=function(t){return new(t||e)(c.Zb(i.h))},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac}),l([Object(i.a)(a.a.Reset),p("design:type",Function),p("design:paramtypes",[Object,a.a.Reset]),p("design:returntype",void 0)],e.prototype,"reset",null),l([Object(i.a)(a.a.UndoAll),p("design:type",Function),p("design:paramtypes",[Object,a.a.UndoAll]),p("design:returntype",void 0)],e.prototype,"undoAll",null),l([Object(i.a)(a.a.SavePatches),p("design:type",Function),p("design:paramtypes",[Object,a.a.SavePatches]),p("design:returntype",void 0)],e.prototype,"preserveState",null),l([Object(i.a)(a.a.Redo),p("design:type",Function),p("design:paramtypes",[Object,a.a.Redo]),p("design:returntype",void 0)],e.prototype,"redo",null),l([Object(i.a)(a.a.Undo),p("design:type",Function),p("design:paramtypes",[Object,a.a.Undo]),p("design:returntype",void 0)],e.prototype,"undo",null),l([Object(i.f)([s.a]),p("design:type",Function),p("design:paramtypes",[Object,o.a]),p("design:returntype",Boolean)],e,"canUndo",null),l([Object(i.f)([s.a]),p("design:type",Function),p("design:paramtypes",[Object,o.a]),p("design:returntype",Boolean)],e,"canRedo",null),l([Object(i.f)([s.a]),p("design:type",Function),p("design:paramtypes",[Object,o.a]),p("design:returntype",Number)],e,"getUndoCount",null),e=l([Object(i.g)({name:"undo",defaults:u})],e),e})()},"/EfZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("vXdC"),a=n("LvDl"),s=n("vXBk"),o=n("fXoL");function r(){return window}let c=(()=>{class e{constructor(e){if(!e.accountUrl)throw new Error("Missing accountUrl. Please set in app config via ZendeskWidgetProvider");this.window=r();let t=this.window;t.zEmbed||function(n,i){var a,s,o,r,c=[],l=document.createElement("iframe");t.zEmbed=function(){c.push(arguments)},t.zE=t.zE||t.zEmbed,l.src="javascript:false",l.title="",l.style.cssText="display: none",(o=(o=document.getElementsByTagName("script"))[o.length-1]).parentNode.insertBefore(l,o),r=l.contentWindow.document;try{s=r}catch(n){a=document.domain,l.src='javascript:var d=document.open();d.domain="'+a+'";void(0);',s=r}s.open()._l=function(){var t=this.createElement("script");a&&(this.domain=a),t.id="js-iframe-async",t.src="https://assets.zendesk.com/embeddable_framework/main.js",this.t=+new Date,this.zendeskHost=e.accountUrl,this.zEQueue=c,this.body.appendChild(t)},s.write('<body onload="document._l();">'),s.close()}(),this.window.zE(()=>{e.beforePageLoad(this.window.zE)})}setLocale(e){this.window.zE(()=>{this.window.zE.setLocale(e)})}identify(e){this.window.zE(()=>{Object(a.isNil)(e)?this.window.zE("webWidget","clear"):this.window.zE.identify({name:this.getUserFullName(e),email:e.email})})}hide(){this.window.zE(()=>{this.window.zE.hide()})}show(){this.window.zE(()=>{this.window.zE.show()})}activate(e){this.window.zE(()=>{this.window.zE.activate(e)})}showWidget(e="help"){this.hide(),this.setSettings({webWidget:{helpCenter:{suppress:"contact"===e}}}),this.activate({hideOnClose:!0})}setHelpCenterSuggestions(e){this.window.zE(()=>{this.window.zE.setHelpCenterSuggestions(e)})}setSettings(e){this.window.zE(()=>{this.window.zE("webWidget","updateSettings",e)})}updateFromProfile(e){const t=[];if(null!=e){const{premium_account:n,premium_account_type:i,developer_account:a,subscription:s}=e;n?(t.push("premium_account_"+i),s&&t.push("subscription_"+s.subscription_provider)):t.push("free_account"),a&&t.push("developer_account")}const n=Object(s.b)(e);this.setSettings({webWidget:{position:{horizontal:"right",vertical:"bottom"},offset:{horizontal:"0px",vertical:"0px"},contactForm:{suppress:!n,tags:t,fields:[{id:"name",prefill:{"*":this.getUserFullName(e)}}]}}})}getUserFullName(e){if(e){const{first_name:t,last_name:n}=e;return`${t} ${n}`}return""}}return e.\u0275fac=function(t){return new(t||e)(o.Zb(i.a))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"/LQR":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("L2KA"),a=n("fXoL");let s=(()=>{class e{constructor(e){this.dialogService=e}onClick(e){this.dialogService.openContactDialog()}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(i.a))},e.\u0275dir=a.Kb({type:e,selectors:[["","appSupportLink",""]],hostBindings:function(e,t){1&e&&a.cc("click",(function(e){return t.onClick(e)}))("keydown.enter",(function(e){return t.onClick(e)}))}}),e})()},"/MKm":function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return M}));var i=n("LRne"),a=n("cp0P"),s=n("937/"),o=n("dMmY"),r=n("qBAC"),c=n("lJxs"),l=n("eIep"),p=n("JIr8"),u=n("Iab2"),d=n("tk/3"),g=n("lZmj"),h=n("LvDl"),b=n("AytR"),m=n("wSC8"),f=n("PWQe"),y=n("4bFC"),v=n("ofXK"),O=n("7PKw"),S=n("CSvP"),x=n("Ie6O"),C=n("fXoL"),w=n("dNgK"),j=function(e){return e.Single="share.widget.link",e.Bulk="share.widget.export",e}({});const k={headers:new d.d({"Content-Type":"application/json; charset=utf-8"})},P=new r.a,_={id:"embedded-human",dimensions:g.a.dimensions,fullScreen:!0};let M=(()=>{class e{constructor(e,t,n,i,a,s,o,r){this.http=e,this.cameraService=t,this.numberService=n,this.orgnanizationService=i,this.contentViewService=a,this.matSnackbar=s,this.APP_BASE_URL=o,this.VIEWER_BASE_URL=r}exportBookmarks(e,t,n,s,o,r,p,d,g=!1,h=""){this.matSnackbar.open(`Exporting ${e.length} models to CSV...`);const b=[{label:"Title",field:"title"},{label:"ID",field:"id"},{label:"Collection",field:"collection"},{label:"URL",field:"url"},{label:"iFrame",field:"iFrame"},{label:"Author",field:"author"},{label:"Thumbnail URL",field:"thumbnail_url"},{label:"Created Date",field:"create_date_time"},{label:"Updated Date",field:"update_date_time"}];g&&b.push({label:"Offline Package URL",field:"offline_url"});const m=d?Object(i.a)(null):this.getUAID(j.Bulk),y=g?this.getDownloadURLs(e):Object(i.a)([]),O=new Map,S=n.length?Object(a.a)(n.map(e=>this.orgnanizationService.getCollectionContent(t,e.collection_id).pipe(Object(c.a)(t=>{t.forEach(t=>{O.set(t.id,e)})})))):Object(i.a)(!0);return Object(a.a)([m,y,S]).pipe(Object(c.a)(([t,n])=>e.map((e,i)=>{var a,c;const{id:l,title:u,author:g,thumbnail_url:b,create_date_time:m,update_date_time:f}=e,y=null!==(c=null===(a=O.get(e.id))||void 0===a?void 0:a.collection_name)&&void 0!==c?c:"",S=this.getWidgetURL(e,s,o,null,t,p,d,h),x=this.getWidgetEmbed(S,r),C=this.buildThumbnailURL(b),w=n[i]||"";return{title:u,id:l,collection:y,url:S,iFrame:x,author:g,thumbnail_url:C,create_date_time:Object(v.A)(new Date(m),"shortDate","en"),update_date_time:Object(v.A)(new Date(f),"shortDate","en"),offline_url:w}})),Object(l.a)(e=>Object(f.a)(e,b)),Object(l.a)(e=>{const t=`BioDigital-Widgets-${(new Date).toISOString().split("T")[0]}-export.csv`,n=new Blob([e],{type:"text/csv;charset=utf-8"});return Object(u.saveAs)(n,t),Object(i.a)(!0)}))}generateWidgetURL(e,t,n,s,o,r,l,p){const u=l||!o?Object(i.a)(null):this.getUAID(o);return Object(a.a)([u,this.contentViewService.trackContentPublish(e.id,e.type)]).pipe(Object(c.a)(([i])=>this.getWidgetURL(e,t,n,s,i,r,l,p)))}getWidgetURL(e,t,n,i,a,s="en",o,r){n=n||P;const c="bookmark"===e.type,l={};l[c?"id":"m"]=""+(c?e.id:e.module_name);const p=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l),this.getParamsForUIOptions(n||P)),this.getParamsForLoadingExperience(n||P)),this.getParamsForScrollMode(n||P)),this.getParamsForLoadRotate(n||P)),this.getParamsForLabelScale(n||P)),u=Object(h.get)(n,"background.colors");if(Array.isArray(u)&&u.length>=3){const e=u.slice(0,4).map(e=>this.numberService.roundNumber(e,3));p["background.colors"]=""+e}if(i){const{eye:e,look:t,up:n}=this.cameraService.roundCamera(i,3);p.camera=""+[e.x,e.y,e.z,t.x,t.y,t.z,n.x,n.y,n.z]}o?p.dk=o.app_apikey:a&&(p.uaid=a),s&&"en"!==s&&(p.lang=s),r&&(p.paid=r);const d=this.isCustomWidget(e.embed_url_path)?e.embed_url_path:t;return this.buildWidgetURL(d,p)}generateWidgetEmbed(e,t,n,i,a,s,o,r,l){return this.generateWidgetURL(e,t,n,a,s,o,r,l).pipe(Object(c.a)(e=>this.getWidgetEmbed(e,i)))}getWidgetEmbed(e,t){const{width:n,height:i}=t||_.dimensions;return`<iframe id="${_.id}" frameBorder="0" width="${n}" height="${i}" allowFullScreen="${_.fullScreen}" loading="lazy" src="${e}"></iframe>`}getImageEmbed(e,t,n){const i=("BioDigital Human: "+e).replace(/"/g,"&quot;");return`<a href="${t}" target="_blank"><img src="${n}" alt="${i}" title="${i}" /></a>`}getUAID(e){return this.http.post("/ws/user/analytics",{analytic_type:""+e,analytic_platform:"app"},k).pipe(Object(c.a)(e=>e.id))}getDownloadURLs(e){const t=e.filter(e=>!e.favorite&&!e.unavailable).map(e=>({type:e.type,id:"module"===e.type?e.module_name:e.id}));return this.http.post("/ws/download/reserve",{content:t},{headers:{"Content-Type":"application/json"}}).pipe(Object(c.a)(t=>{const n=t.tokens;return e.map(e=>{const t=e.type,i="module"===e.type?e.module_name:e.id,a=n.find(e=>e.type===t&&e.id===i);return a&&a.token?this.buildDownloadURL(a.token):""})}),Object(p.a)(()=>Object(i.a)(e.map(()=>""))))}extendWidgetOptions(e,t){const n=this.expandWidgetOptions(t);return this.deepExtendWidgetOptions(e,n),e}getWidgetConfig(e){const t={};return Object.keys(e).forEach(n=>{const i=e[n];if(null!==i){const e=this.getConfigName(n);t[e]=i}}),t}getConfigName(e){const t=this.camelToDashCase(e).replace(/^ui-/g,"");return this.dashCaseToCamelCase(t)}getParamsForLoadingExperience(e){return e.autoLoad?e.initial.button?{"initial.button":!0}:e.initial.handHint?{"initial.hand":!0}:e.initial.play?{"initial.play":!0}:{}:{"auto-load":!1}}getParamsForScrollMode(e){return e.disableScroll.alert?{"disable-scroll.alert":!0}:e.disableScroll.overlay?{"disable-scroll":!0}:{"disable-scroll":!1}}getParamsForLoadRotate(e){return"number"==typeof e.loadRotate?{"load-rotate":e.loadRotate}:{}}getParamsForLabelScale(e){return{}}getParamsForUIOptions(e){return Object.assign({"ui-info":e.uiInfo,"ui-search":e.uiSearch,"ui-undo":e.uiUndo,"ui-fullscreen":e.uiFullscreen,"ui-nav":e.uiNav,"ui-tools":e.uiTools,"ui-help":e.uiHelp,"ui-chapter-list":e.uiChapterList,"ui-label-list":e.uiLabelList,"ui-anatomy-descriptions":e.uiAnatomyDescriptions,"ui-tutorial":e.uiTutorial,"ui-loader":e.uiLoader,"ui-whiteboard":e.uiWhiteboard,"ui-layers":e.uiVisibilityLayers,"ui-anatomy-labels":e.uiAnatomyLabels},this.getParamsForUIQuiz(e))}getParamsForUIQuiz(e){const t={},n=Object(h.get)(e,"uiQuiz.mode"),i=Object(h.get)(e,"uiQuiz.number");return n===y.a.Disabled&&(t["ui-quiz"]=!1),n===y.a.Locked&&(t["ui-quiz-locked"]=!0),Object(h.isNil)(i)||(t["ui-quiz-start"]=i,t["ui-quiz-end"]=i),t}camelToDashCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}dashCaseToCamelCase(e){return e.replace(/-([a-z])/g,e=>e[1].toUpperCase())}isCustomWidget(e){return/widgets\/([^\/]+)\//.test(e)}saveUserImage(e,t="jpeg"){return this.http.post("/ws/user/image/v1-0",{image_src:e,image_type:t},k).pipe(Object(c.a)(e=>e.url))}buildWidgetURL(e,t){const n=Object.entries(t).map(([e,t])=>`${e}=${t}`).join("&");let i="",a=e.replace(/^\/|\/$/g,"");return!1===t["auto-load"]&&"viewer"===a&&(a="tiny-viewer",i="/tiny-viewer"),b.a.deploy===m.a.Local?`${this.VIEWER_BASE_URL}${i}/?${n}`:`${this.APP_BASE_URL}/${a}/?${n}`}buildThumbnailURL(e){return`${this.APP_BASE_URL}${e}`}buildDownloadURL(e){return`${this.APP_BASE_URL}/download?t=${e}`}deepExtendWidgetOptions(e,t){Object.entries(e).forEach(([n,i])=>{const a=typeof i;[n,this.camelToDashCase(n),this.getConfigName(n)].forEach(s=>{if(t.hasOwnProperty(s)&&null!==t[s]){const o=t[s],r=typeof o;null===i?e[n]=o:a===r&&("object"===a?this.deepExtendWidgetOptions(i,o):e[n]=o)}})})}expandWidgetOptions(e){const t={};return Object.entries(e).forEach(([n,i])=>{const a=n.split(".");if(a.length>1){const e=a[0],n=a.slice(1).join(".");null!==t[e]&&"object"==typeof t[e]||(t[e]={}),t[e][n]=i}else t[n]=e[n]}),t}}return e.\u0275fac=function(t){return new(t||e)(C.Zb(d.b),C.Zb(s.a),C.Zb(o.a),C.Zb(O.a),C.Zb(x.a),C.Zb(w.b),C.Zb(S.a),C.Zb(S.c))},e.\u0275prov=C.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},0:function(e,t,n){e.exports=n("zUnb")},"08/d":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i={main:[{title:"All Models",id:"all",type:"Category",translations:{es:{title:"Todas las Categor\xedas"},zh:{title:"\u6240\u6709\u7c7b\u522b"},fr:{title:"Toutes les cat\xe9gories"},de:{title:"Alle Kategorien"},it:{title:"Tutte le categorie"},ja:{title:"\u3059\u3079\u3066\u306e\u30ab\u30c6\u30b4\u30ea"},pt:{title:"Todas as categorias"}}}],categories:[{title:"Anatomy by Regions",id:"regional",type:"Category",translations:{es:{title:"Anatom\xeda por Regiones"},zh:{title:"\u5c40\u90e8\u89e3\u5256"},fr:{title:"Anatomie par r\xe9gions"},de:{title:"Anatomie nach Regionen"},it:{title:"Anatomia per regioni"},ja:{title:"\u5404\u90e8\u4f4d\u306e\u69cb\u9020"},pt:{title:"Anatomia por Regi\xf5es"}}},{title:"Anatomy by Systems",id:"system",type:"Category",translations:{es:{title:"Anatom\xeda por Sistemas"},zh:{title:"\u7cfb\u7edf\u89e3\u5256"},fr:{title:"Anatomie par syst\xe8mes"},de:{title:"Anatomie nach Systemen"},it:{title:"Anatomia per sistemi"},ja:{title:"\u5404\u5668\u5b98\u7cfb\u306e\u69cb\u9020"},pt:{title:"Anatomia por Sistemas"}}},{title:"Complete Anatomy",id:"complete anatomy",type:"Category",translations:{de:{title:"Komplette Anatomie"},es:{title:"Anatom\xeda completa"},fr:{title:"Anatomie compl\xe8te"},it:{title:"Anatomia completa"},ja:{title:"\u4eba\u4f53\u306e\u5168\u4f53\u69cb\u9020"},pt:{title:"Anatomia Completa"},zh:{title:"\u5b8c\u6574\u89e3\u5256"}}},{title:"Bony Landmarks",id:"Bony Landmarks",type:"Category",translations:{de:{title:"Knochenmarksteine"},es:{title:"Hitos huesudos"},fr:{title:"Points de rep\xe8re osseux"},it:{title:"Punti di riferimento ossei"},ja:{title:"\u9aa8\u306e\u30e9\u30f3\u30c9\u30de\u30fc\u30af"},pt:{title:"Marcos \xf3sseos"},zh:{title:"\u9aa8\u6027\u6807\u5fd7"}}},{title:"Cross Sections & Micro Anatomy",id:"Cross Section and Micro Anatomy",type:"Category",translations:{de:{title:"Querschnitte & Mikro-Anatomie"},es:{title:"Secciones transversales y Micro Anatom\xeda"},fr:{title:"Sections transversales et micro anatomie"},it:{title:"Sezioni trasversali & Micro Anatomia"},ja:{title:"\u65ad\u9762\u56f3\u30fb\u30de\u30a4\u30af\u30ed\u89e3\u5256\u5b66"},pt:{title:"Se\xe7\xf5es Transversais e Micro Anatomia"},zh:{title:"\u6a2a\u65ad\u9762&\u663e\u5fae\u89e3\u5256"}}},{title:"Origins & Insertions",id:"Origins and Insertions",type:"Category",translations:{de:{title:"Urspr\xfcnge und Einf\xfcgungen"},es:{title:"Or\xedgenes e inserciones"},fr:{title:"Origines et insertions"},it:{title:"Origini e Inserzioni"},ja:{title:"\u8d77\u6e90\u3068\u633f\u5165"},pt:{title:"Origens e Inser\xe7\xf5es"},zh:{title:"\u808c\u8089\u8d77\u6b62\u70b9"}}},{title:"Anatomy Quizzes",id:"quiz",type:"Category",translations:{de:{title:"Anatomie-Quiz"},es:{title:"Cuestionarios de anatom\xeda"},fr:{title:"Quiz d'anatomie"},it:{title:"Quiz di anatomia"},ja:{title:"\u89e3\u5256\u5b66\u30af\u30a4\u30ba"},pt:{title:"Quizzes de anatomia"},zh:{title:"\u89e3\u5256\u6d4b\u9a8c"}}}],specialties:[{title:"Allergy & Immunology",id:"Allergy and Immunology",type:"Category",translations:{de:{title:"Allergie und Immunologie"},es:{title:"Alergia e Inmunolog\xeda"},fr:{title:"Allergie et Immunologie"},it:{title:"Allergia e Immunologia"},ja:{title:"\u30a2\u30ec\u30eb\u30ae\u30fc\u3068\u514d\u75ab\u5b66"},pt:{title:"Alergia e Imunologia"},zh:{title:"\u8fc7\u654f\u4e0e\u514d\u75ab\u5b66"}}},{title:"Cardiology",id:"Cardiology",type:"Category",translations:{de:{title:"Kardiologie"},es:{title:"Cardiolog\xeda"},fr:{title:"Cardiologie"},it:{title:"Cardiologia"},ja:{title:"\u5fc3\u81d3\u75c5\u5b66"},pt:{title:"Cardiologia"},zh:{title:"\u5fc3\u810f\u79d1"}}},{title:"Dentistry",id:"Dentistry",type:"Category",translations:{de:{title:"Zahnmedizin"},es:{title:"Odontolog\xeda"},fr:{title:"Dentisterie"},it:{title:"Odontoiatria"},ja:{title:"\u6b6f\u5b66"},pt:{title:"Odontologia"},zh:{title:"\u7259\u79d1"}}},{title:"Dermatology",id:"Dermatology",type:"Category",translations:{de:{title:"Dermatologie"},es:{title:"Dermatolog\xeda"},fr:{title:"Dermatologie"},it:{title:"Dermatologia"},ja:{title:"\u76ae\u819a\u5b66"},pt:{title:"Dermatologia"},zh:{title:"\u76ae\u80a4\u79d1"}}},{title:"Endocrinology",id:"Endocrinology",type:"Category",translations:{de:{title:"Endokrinologie"},es:{title:"Endocrinolog\xeda"},fr:{title:"Endocrinologie"},it:{title:"Endocrinologia"},ja:{title:"\u5185\u5206\u6ccc\u5b66"},pt:{title:"Endocrinologia"},zh:{title:"\u5185\u5206\u6ccc\u79d1"}}},{title:"Gastroenterology",id:"Gastroenterology and Hepatology",type:"Category",translations:{de:{title:"Gastroenterologie"},es:{title:"Gastroenterolog\xeda"},fr:{title:"Gastroent\xe9rologie"},it:{title:"Gastroenterologia"},ja:{title:"\u80c3\u8178\u5b66\u30fb\u809d\u81d3\u5b66"},pt:{title:"Gastroenterologia"},zh:{title:"\u80c3\u80a0\u79d1&\u809d\u810f\u79d1"}}},{title:"Gynecology",id:"Gynecology",type:"Category",translations:{de:{title:"Gyn\xe4kologie"},es:{title:"Ginecolog\xeda"},fr:{title:"Gyn\xe9cologie"},it:{title:"Ginecologia"},ja:{title:"\u5a66\u4eba\u79d1"},pt:{title:"Ginecologia"},zh:{title:"\u5987\u79d1"}}},{title:"Hematology & Oncology",id:"Oncology and Hematology",type:"Category",translations:{de:{title:"H\xe4matologie/Onkologie"},es:{title:"Hematolog\xeda/Oncolog\xeda"},fr:{title:"H\xe9matologie/Oncologie"},it:{title:"Ematologia/Oncologia"},ja:{title:"\u816b\u760d\u5b66\u30fb\u8840\u6db2\u5b66"},pt:{title:"Hematologia/Oncologia"},zh:{title:"\u80bf\u7624\u79d1/\u8840\u6db2\u79d1"}}},{title:"Infectious Disease",id:"Infectious Disease",type:"Category",translations:{de:{title:"Infektionskrankheit"},es:{title:"Enfermedades Infecciosas"},fr:{title:"Maladies infectieuses"},it:{title:"Malattie Infettive"},ja:{title:"\u611f\u67d3\u75c7"},pt:{title:"Doen\xe7a Infecciosa"},zh:{title:"\u4f20\u67d3\u75c5"}}},{title:"Nephrology",id:"Nephrology",type:"Category",translations:{de:{title:"Nephrologie"},es:{title:"Nefrolog\xeda"},fr:{title:"N\xe9phrologie"},it:{title:"Nefrologia"},ja:{title:"\u814e\u81d3\u5b66"},pt:{title:"Nefrologia"},zh:{title:"\u80be\u79d1"}}},{title:"Neurology & Psychiatry",id:"Neurology and Psychiatry",type:"Category",translations:{de:{title:"Neurologie & Psychiatrie"},es:{title:"Neurolog\xeda y Psiquiatr\xeda"},fr:{title:"Neurologie & Psychiatrie"},it:{title:"Neurologia & Psichiatria"},ja:{title:"\u795e\u7d4c\u5b66\u30fb\u7cbe\u795e\u533b\u5b66"},pt:{title:"Neurologia e Psiquiatria"},zh:{title:"\u795e\u7ecf\u79d1&\u7cbe\u795e\u79d1"}}},{title:"Obstetrics",id:"Obstetrics",type:"Category",translations:{de:{title:"Geburtshilfe"},es:{title:"Obstetricia "},fr:{title:"Obst\xe9trique"},it:{title:"Ostetricia"},ja:{title:"\u7523\u79d1"},pt:{title:"Obstetr\xedcia"},zh:{title:"\u4ea7\u79d1"}}},{title:"Ophthalmology",id:"Ophthalmology",type:"Category",translations:{de:{title:"Ophthalmologie"},es:{title:"Oftalmolog\xeda"},fr:{title:"Ophtalmologie"},it:{title:"Oftalmologia"},ja:{title:"\u773c\u79d1\u5b66"},pt:{title:"Oftalmologia"},zh:{title:"\u773c\u79d1"}}},{title:"Orthopedics",id:"Orthopedics",type:"Category",translations:{de:{title:"Orthop\xe4die"},es:{title:"Ortopedia"},fr:{title:"Orthop\xe9die"},it:{title:"Ortopedia"},ja:{title:"\u6574\u5f62\u5916\u79d1\u5b66"},pt:{title:"Ortopedia"},zh:{title:"\u9aa8\u79d1"}}},{title:"Otolaryngology",id:"Otolaryngology",type:"Category",translations:{de:{title:"HNO-Heilkunde"},es:{title:"Otorrinolaringolog\xeda"},fr:{title:"Otorhinolaryngologie"},it:{title:"Otorinolaringoiatria"},ja:{title:"\u8033\u9f3b\u79d1\u5b66"},pt:{title:"Otorrinolaringologia"},zh:{title:"\u8033\u9f3b\u5589\u79d1"}}},{title:"Pediatrics",id:"Pediatrics",type:"Category",translations:{de:{title:"P\xe4diatrie"},es:{title:"Pediatr\xeda"},fr:{title:"P\xe9diatrie"},it:{title:"Pediatria"},ja:{title:"\u5c0f\u5150\u79d1\u5b66"},pt:{title:"Pediatria"},zh:{title:"\u513f\u79d1"}}},{title:"Physical Therapy",id:"Physical Therapy",type:"Category",translations:{de:{title:"Physikalische Therapie"},es:{title:"Fisioterapia"},fr:{title:"Physioth\xe9rapie"},it:{title:"Terapia fisica"},ja:{title:"\u7406\u5b66\u7642\u6cd5"},pt:{title:"Fisioterapia"},zh:{title:"\u7269\u7406\u7597\u6cd5"}}},{title:"Pulmonology",id:"Pulmonology and Respiratory",type:"Category",translations:{de:{title:"Pulmonologie"},es:{title:"Neumolog\xeda"},fr:{title:"Pneumologie"},it:{title:"Pneumologia"},ja:{title:"\u547c\u5438\u5668\u5b66"},pt:{title:"Pneumologia"},zh:{title:"\u80ba\u75c5\u79d1/\u547c\u5438\u79d1"}}},{title:"Rheumatology",id:"Rheumatology",type:"Category",translations:{de:{title:"Rheumatologie"},es:{title:"Reumatolog\xeda"},fr:{title:"Rhumatologie"},it:{title:"Reumatologia"},ja:{title:"\u30ea\u30a6\u30de\u30c1\u5b66"},pt:{title:"Reumatologia"},zh:{title:"\u98ce\u6e7f\u79d1"}}},{title:"Urology",id:"Urology",type:"Category",translations:{de:{title:"Urologie"},es:{title:"Urolog\xeda"},fr:{title:"Urologie"},it:{title:"Urologia"},ja:{title:"\u6ccc\u5c3f\u5668\u79d1\u5b66"},pt:{title:"Urologia"},zh:{title:"\u6ccc\u5c3f\u5916\u79d1"}}}],community:[{title:"Community Bookmarks",id:"public",type:"Community",translations:{de:{title:"Community-Lesezeichen"},es:{title:"Marcadores de la comunidad"},fr:{title:"Signets communautaires"},it:{title:"Segnalibri della community"},ja:{title:"\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u30d6\u30c3\u30af\u30de\u30fc\u30af"},pt:{title:"Favoritos da comunidade"},zh:{title:"\u793e\u533a\u4e66\u7b7e"}}}]}},"0E12":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){class t{constructor(e,t,n){this.particleSystems=e,this.assignedParticles=t,this.tweenParticleLookup=n}}t.type="[Engine Particles] Set Particle State",e.SetParticleState=t;class n{constructor(e,t){this.particleSystem=e,this.chapterId=t}}n.type="[Engine Particles] New Particle System",e.NewParticleSystem=n;class i{constructor(e,t){this.id=e,this.targetChapterId=t}}i.type="[Engine Particles] Duplicate Particle System",e.DuplicateParticleSystem=i;class a{constructor(e,t){this.id=e,this.targetChapterId=t}}a.type="[Engine Particles] Duplicate Particle System Success",e.DuplicateParticleSystemSuccess=a;class s{constructor(e,t){this.id=e,this.particleSystem=t}}s.type="[Engine Particles] Update Particle System",e.UpdateParticleSystem=s;class o{constructor(e,t){this.visible=e,this.chapterId=t}}o.type="[Engine Particles] Set Particle Systems Visible",e.SetParticleSystemsVisible=o;class r{constructor(e,t,n){this.id=e,this.visible=t,this.chapterId=n}}r.type="[Engine Particles] Set Particle System Visible",e.SetParticleSystemVisible=r;class c{constructor(e,t){this.id=e,this.chapterId=t}}c.type="[Engine Particles] Assign Particle",e.AssignParticle=c;class l{constructor(e,t){this.id=e,this.chapterId=t}}l.type="[Engine Particles] Unassign Particle",e.UnassignParticle=l;class p{constructor(e){this.id=e}}p.type="[Engine Partiles] Delete Particle System",e.DeleteParticleSystem=p;class u{constructor(e){this.id=e}}u.type="[Engine Partiles] Select Particle System",e.SelectParticleSystem=u;class d{constructor(e){this.index=e}}d.type="[Engine Partiles] Select Particle Constraint",e.SelectParticleConstraint=d;class g{constructor(e){this.index=e}}g.type="[Engine Partiles] Select Particle Creator",e.SelectParticleCreator=g;class h{constructor(e){this.index=e}}h.type="[Engine Partiles] Select Particle Updater",e.SelectParticleUpdater=h;class b{constructor(e){this.chapterMap=e}}b.type="[Engine Particles] Update Lookup Chapters",e.UpdateTweenParticleLookupChapters=b;class m{constructor(e,t){this.chapterId=e,this.lookup=t}}m.type="[Engine Particles] Set Lookup for chapter",e.SetLookupForChapter=m;class f{constructor(e){this.chapterId=e}}f.type="[Engine Particles] Delete chapter lookup",e.DeleteChapterLookup=f;class y{constructor(e){this.patches=e}}y.type="[Engine Particles] Apply Patch",e.ApplyPatch=y}(i||(i={}))},"0FUJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(){this.graph={hidden:!1,clipped:!1,disabled:!1,transparent:!1}}}},"0UUK":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Question=0]="Question",e[e.Explanation=1]="Explanation",e[e.Review=2]="Review",e}({})},"0Yvn":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("Assa"),a=n("mXx7");function s(e,t){switch(!0){case void 0===e[t]:return;case!1===e[t]:return!1;case"number"==typeof e[t]:return 100*e[t];default:return new a.a({center:e[t][0],edge:e[t][1],centerBias:e[t][2],edgeBias:e[t][3],power:e[t][4]})}}class o{constructor(e={}){const{tintColor:t,saturation:n,contrast:i,brightness:a,opacity:s,label:o}=e;this.tintColor=t,this.saturation=n,this.contrast=i,this.brightness=a,this.opacity=s,this.label=o}static isRealRecipe(e){return!1!==e.brightness||!1!==e.contrast||!1!==e.opacity||!1!==e.saturation||!1!==e.tintColor}static isFresnel(e){return void 0!==e&&e.hasOwnProperty("edge")&&e.hasOwnProperty("edgeBias")&&e.hasOwnProperty("center")&&e.hasOwnProperty("centerBias")&&e.hasOwnProperty("power")}static isColor(e){return Array.isArray(e)&&3===e.length}static fromEngine(e){const t=(()=>{switch(!0){case void 0===e.tintColor:return;case!1===e.tintColor:return!1;case Array.isArray(e.tintColor):return 3===e.tintColor.length?[...e.tintColor]:new i.a({center:e.tintColor[0],edge:e.tintColor[1],centerBias:e.tintColor[2],edgeBias:e.tintColor[3],power:e.tintColor[4]})}})();return new o({tintColor:t,saturation:s(e,"saturation"),brightness:s(e,"brightness"),contrast:s(e,"contrast"),opacity:s(e,"opacity")})}static toEngine(e){let t=!1!==e.tintColor&&void 0,n=!1!==e.saturation&&void 0,s=!1!==e.brightness&&void 0,r=!1!==e.contrast&&void 0,c=!1!==e.opacity&&void 0;return Array.isArray(e.tintColor)?t=[...e.tintColor]:o.isFresnel(e.tintColor)&&(t=i.a.toEngine(e.tintColor)),"number"==typeof e.saturation?n=e.saturation/100:o.isFresnel(e.saturation)&&(n=a.a.toEngine(e.saturation)),"number"==typeof e.brightness?s=e.brightness/100:o.isFresnel(e.brightness)&&(s=a.a.toEngine(e.brightness)),"number"==typeof e.contrast?r=e.contrast/100:o.isFresnel(e.contrast)&&(r=a.a.toEngine(e.contrast)),"number"==typeof e.opacity?c=e.opacity/100:o.isFresnel(e.opacity)&&(c=a.a.toEngine(e.opacity)),{tintColor:t,saturation:n,brightness:s,contrast:r,opacity:c}}static mergeRecipes(e,t){const n=Object.assign({},e);for(const[i,a]of Object.entries(t))void 0!==a&&(n[i]=a);return n}static modifiesSaturation(e){return"number"==typeof e.saturation&&0!==e.saturation||o.isFresnel(e.saturation)}static modifiesContrast(e){return"number"==typeof e.contrast&&0!==e.contrast||o.isFresnel(e.contrast)}static modifiesBrightness(e){return"number"==typeof e.brightness&&0!==e.brightness||o.isFresnel(e.brightness)}static modifiesOpacity(e){return"number"==typeof e.opacity||o.isFresnel(e.opacity)}}},"0Zsz":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){class t{constructor(){}}t.type="[Dialog] Open Limit",e.OpenLimit=t;class n{constructor(e){this.upgrade=e}}n.type="[Dialog] Close Limit",e.CloseLimit=n;class i{constructor(){}}i.type="[Dialog] Open Premium Content",e.OpenPremiumContent=i;class a{constructor(e){this.confirmed=e}}a.type="[Dialog] Close Premium Content",e.ClosePremiumContent=a;class s{constructor(){}}s.type="[Dialog] Open Upgrade",e.OpenUpgrade=s;class o{constructor(){}}o.type="[Dialog] Close Upgrade",e.CloseUpgrade=o}(i||(i={}))},"0kAG":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("mmXA");function a(e,t=!0){return.01*(window.innerHeight-(t&&e!==i.a.Hide?56:0))}},"0njA":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("fXoL"),a=n("ofXK");let s=(()=>{class e{constructor(){}get iconClass(){let e="fas fa-"+this.icon;return this.size&&(e+=" fa-"+this.size),e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-icon"]],inputs:{icon:"icon",size:"size"},decls:1,vars:1,consts:[[3,"ngClass"]],template:function(e,t){1&e&&i.Qb(0,"i",0),2&e&&i.mc("ngClass",t.iconClass)},directives:[a.m],styles:[""],encapsulation:2,changeDetection:0}),e})()},"0ul3":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL");let a=(()=>{class e{constructor(){}supportsWebGl(){const e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return t&&t instanceof WebGLRenderingContext}isHoverSupported(){return window.matchMedia("(hover: hover)").matches}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1:function(e,t){},"11Ye":function(e,t,n){"use strict";n.d(t,"l",(function(){return i})),n.d(t,"m",(function(){return a})),n.d(t,"M",(function(){return s})),n.d(t,"A",(function(){return o})),n.d(t,"N",(function(){return r})),n.d(t,"S",(function(){return c})),n.d(t,"P",(function(){return l})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return u})),n.d(t,"E",(function(){return d})),n.d(t,"c",(function(){return g})),n.d(t,"R",(function(){return h})),n.d(t,"B",(function(){return b})),n.d(t,"C",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"z",(function(){return y})),n.d(t,"j",(function(){return v})),n.d(t,"b",(function(){return O})),n.d(t,"V",(function(){return S})),n.d(t,"U",(function(){return x})),n.d(t,"T",(function(){return C})),n.d(t,"X",(function(){return w})),n.d(t,"Z",(function(){return j})),n.d(t,"Y",(function(){return k})),n.d(t,"w",(function(){return P})),n.d(t,"o",(function(){return _})),n.d(t,"W",(function(){return M})),n.d(t,"x",(function(){return I})),n.d(t,"J",(function(){return T})),n.d(t,"n",(function(){return U})),n.d(t,"p",(function(){return L})),n.d(t,"y",(function(){return z})),n.d(t,"I",(function(){return A})),n.d(t,"H",(function(){return F})),n.d(t,"a",(function(){return D})),n.d(t,"v",(function(){return E})),n.d(t,"D",(function(){return N})),n.d(t,"u",(function(){return R})),n.d(t,"t",(function(){return V})),n.d(t,"K",(function(){return B})),n.d(t,"L",(function(){return H})),n.d(t,"O",(function(){return Q})),n.d(t,"g",(function(){return G})),n.d(t,"f",(function(){return W})),n.d(t,"e",(function(){return q})),n.d(t,"k",(function(){return $})),n.d(t,"F",(function(){return X})),n.d(t,"G",(function(){return Z})),n.d(t,"q",(function(){return J})),n.d(t,"s",(function(){return K})),n.d(t,"r",(function(){return Y})),n.d(t,"Q",(function(){return ee}));let i=(()=>{class e{constructor(){}}return e.type="[Engine] Load",e})(),a=(()=>{class e{constructor(e){this.result=e}}return e.type="[Engine] Load Success",e})(),s=(()=>{class e{constructor(e){this.ready=e}}return e.type="[Engine] Set Ready",e})(),o=(()=>{class e{constructor(e){this.display=e}}return e.type="[Engine] Set Display of 3D Scene",e})(),r=(()=>{class e{constructor(e){this.scrollMode=e}}return e.type="[Engine] Set Zoom via scroll Allowed",e})(),c=(()=>{class e{constructor(e){this.shown=e}}return e.type="[Engine] Set Scroll Alert Shwon",e})(),l=(()=>{class e{constructor(e){this.visible=e}}return e.type="[Engine] Set Visibility of 3D Scene",e})(),p=(()=>{class e{constructor(e,t){this.color=e,this.duration=t}}return e.type="[Engine] Fade",e})(),u=(()=>{class e{constructor(){}}return e.type="[Engine] Fade Complete",e})(),d=(()=>{class e{constructor(e){this.graph=e}}return e.type="[Engine] Set Graph",e})(),g=(()=>{class e{constructor(){}}return e.type="[Engine] Clear Graph",e})(),h=(()=>{class e{constructor(e){this.enabled=e}}return e.type="[Engine] Set Xray Mode",e})(),b=(()=>{class e{constructor(e){this.chapterId=e}}return e.type="[Engine] Set Engine Chapter",e})(),m=(()=>{class e{constructor(e){this.chapterInit=e}}return e.type="[Eninge] Set Chapter Init",e})(),f=(()=>{class e{constructor(e,t,n){this.node=e,this.event=t,this.hit=n}}return e.type="[Engine] Click Node",e})(),y=(()=>{class e{constructor(e,t){this.node=e,this.hit=t}}return e.type="[Engine] Set Contextmenu",e})(),v=(()=>{class e{constructor(e,t=!0,n){this.objectId=e,this.animate=t,this.animationDuration=n}}return e.type="[Engine] Fly To Object",e})(),O=(()=>{class e{constructor(){}}return e.type="[Engine] Center Camera on Visible Nodes",e})(),S=(()=>{class e{constructor(e,t){this.leafVisibilityState=e,this.nodes=t}}return e.type="[Engine] Synchronize Visible Nodes On Tree",e})(),x=(()=>{class e{constructor(e){this.leafRenderableState=e}}return e.type="[Engine] Synchronize Renderable State of Nodes On Tree",e})(),C=(()=>{class e{constructor(e,t){this.leafPickableState=e,this.nodes=t}}return e.type="[Engine] Synchronize Pickable State of Nodes On Tree",e})(),w=(()=>{class e{constructor(e){this.show=e}}return e.type="[Engine] Toggle Camera Bar",e})(),j=(()=>{class e{constructor(e){this.show=e}}return e.type="[Engine] Toggle Progress Bar",e})(),k=(()=>{class e{constructor(e){this.show=e}}return e.type="[Engine] Toggle Labels",e})(),P=(()=>{class e{constructor(e){this.tool=e}}return e.type="[Engine] Set active tool",e})(),_=(()=>{class e{constructor(e,t){this.chapter=e,this.pause=t}}return e.type="[Engine] Play chapter animation",e})(),M=(()=>{class e{constructor(e=!0){this.play=e}}return e.type="[Engine] Play animation",e})(),I=(()=>{class e{constructor(e){this.playing=e}}return e.type="[Engine] Set animation playing",e})(),T=(()=>{class e{constructor(e){this.speed=e}}return e.type="[Engine] Set playback speed",e})(),U=(()=>{class e{constructor(e){this.play=e}}return e.type="[Engine] Play audio",e})(),L=(()=>{class e{constructor(){}}return e.type="[Engine] Play chapter from start",e})(),z=(()=>{class e{constructor(e){this.enable=e}}return e.type="[Engine] Set autoplay",e})(),A=(()=>{class e{constructor(e,t){this.nodes=e,this.layer=t}}return e.type="[Engine] Set object layer order",e})(),F=(()=>{class e{constructor(e,t){this.nodeId=e,this.displayName=t}}return e.type="[Engine] Set object display name",e})(),D=(()=>{class e{constructor(){}}return e.type="[Engine] Auto Sort object layer orders",e})(),E=(()=>{class e{constructor(){}}return e.type="[Engine] Reset object layer orders",e})(),N=(()=>{class e{constructor(e){this.position=e}}return e.type="[Engine] Set Engine Position",e})(),R=(()=>{class e{constructor(){}}return e.type="[Engine] Reset Engine Position",e})(),V=(()=>{class e{constructor(){}}return e.type="[Engine] Reset Interactions",e})(),B=(()=>{class e{constructor(e){this.effects=e}}return e.type="[Engine] Set Post Processing Effects",e})(),H=(()=>{class e{constructor(e){this.properties=e}}return e.type="[Engine] Set Properties",e})(),Q=(()=>{class e{constructor(e){this.mode=e}}return e.type="[Engine] Set Transparency Mode",e})(),G=(()=>{class e{constructor(e){this.node=e}}return e.type="[Engine] Expand ViewTree Node",e})(),W=(()=>{class e{constructor(e){this.node=e}}return e.type="[Engine] Collapse ViewTree Node",e})(),q=(()=>{class e{constructor(){}}return e.type="[Engine] Collapse All ViewTree Nodes",e})(),$=(()=>{class e{constructor(e,t){this.node=e,this.hit=t}}return e.type="[Engine] Hover Node",e})(),X=(()=>{class e{constructor(e){this.node=e}}return e.type="[Engine] Set Label Edit Node",e})(),Z=(()=>{class e{constructor(e,t){this.node=e,this.info=t}}return e.type="[Engine] Set Node Info",e})(),J=(()=>{class e{constructor(e,t,n){this.node=e,this.fallback=t,this.lang=n}}return e.type="[Engine] Query Node Info",e})(),K=(()=>{class e{constructor(e,t){this.node=e,this.info=t}}return e.type="[Engine] Query Node Info Success",e})(),Y=(()=>{class e{constructor(e){this.node=e}}return e.type="[Engine Nodes] Query Node Info Failure",e})(),ee=(()=>{class e{constructor(e){this.enabled=e}}return e.type="[Engine] Set Watermark Enabled",e})()},"1a36":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Hidden=-1]="Hidden",e[e.Shown=1]="Shown",e}({})},"1iZL":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var i=n("uDDk");class a{}class s{constructor(){this.type=i.a.Images,this.images=[]}}},"1mir":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Select=0]="Select",e[e.Import=1]="Import",e[e.Explore=2]="Explore",e}({})},"1w2z":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("AytR"),a=n("8qIY"),s=n("fXoL"),o=n("tyNb");let r=(()=>{class e{constructor(e,t,n){this.templateRef=e,this.viewContainer=t,this.router=n,this._appFlagApplicationMode="include"}get appFlagApplication(){return this._appFlagApplication}set appFlagApplication(e){this._appFlagApplication=e}get appFlagApplicationMode(){return this._appFlagApplicationMode}set appFlagApplicationMode(e){this._appFlagApplicationMode=e}get appFlagApplicationPage(){return this._appFlagApplicationPage}set appFlagApplicationPage(e){this._appFlagApplicationPage=e}get appFlagApplicationPlatform(){return this._appFlagApplicationPlatform}set appFlagApplicationPlatform(e){this._appFlagApplicationPlatform=e}get appFlagApplicationNative(){return this._appFlagApplicationNative}set appFlagApplicationNative(e){this._appFlagApplicationNative=e}ngOnInit(){this.update()}update(){let e=!1,t=!1,n=!1,s=!1,o=!1;if(""===this.appFlagApplication?t=!0:Array.isArray(this.appFlagApplication)?t=this.appFlagApplication.some(e=>e===i.a.application):"string"==typeof this.appFlagApplication&&(t=this.appFlagApplication===i.a.application),null==this.appFlagApplicationPage)n=!0;else{const e=this.router.url;Array.isArray(this.appFlagApplicationPage)?n=this.appFlagApplicationPage.some(t=>e.indexOf(t)>=0):"string"==typeof this.appFlagApplicationPage&&(n=e.indexOf(this.appFlagApplicationPage)>=0)}if(null==this.appFlagApplicationPlatform)s=!0;else{const e=i.a.platform;Array.isArray(this.appFlagApplicationPlatform)?s=this.appFlagApplicationPlatform.some(t=>e.indexOf(t)>=0):"string"==typeof this.appFlagApplicationPlatform&&(s=e.indexOf(this.appFlagApplicationPlatform)>=0)}null==this.appFlagApplicationNative?o=!0:(o=i.a.native,(Array.isArray(this.appFlagApplicationNative)?this.appFlagApplicationNative:[this.appFlagApplicationNative]).includes(a.a.iOS)&&(o=i.a.native&&void 0!==window.webkit)),e=t&&n&&s&&o,e&&"include"===this.appFlagApplicationMode||!e&&"exclude"===this.appFlagApplicationMode?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(s.O),s.Pb(s.S),s.Pb(o.e))},e.\u0275dir=s.Kb({type:e,selectors:[["","appFlagApplication",""]],inputs:{appFlagApplication:"appFlagApplication",appFlagApplicationMode:"appFlagApplicationMode",appFlagApplicationPage:"appFlagApplicationPage",appFlagApplicationPlatform:"appFlagApplicationPlatform",appFlagApplicationNative:"appFlagApplicationNative"}}),e})()},"2CE2":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.PersonalUse="Personal Use",e.Education="Education",e.Business="Business",e}({})},"2he+":function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n("2o60"),a=n("l57l"),s=(n("6L7E"),n("fXoL")),o=n("ofXK");function r(e,t){1&e&&s.Qb(0,"img",9)}function c(e,t){1&e&&s.Qb(0,"img",9)}function l(e,t){1&e&&s.Qb(0,"img",10)}function p(e,t){1&e&&s.Qb(0,"img",11)}function u(e,t){if(1&e&&(s.Tb(0),s.Nc(1,r,1,0,"img",6),s.Nc(2,c,1,0,"img",6),s.Nc(3,l,1,0,"img",7),s.Nc(4,p,1,0,"img",8),s.Sb()),2&e){const e=s.gc();s.Db(1),s.mc("ngIf",e.label.pinType==e.labelPinType.Default),s.Db(1),s.mc("ngIf",e.label.pinType==e.labelPinType.Sequential),s.Db(1),s.mc("ngIf",e.label.pinType===e.labelPinType.Plus||e.label.pinType===e.labelPinType.PlusMinus&&!e.selected),s.Db(1),s.mc("ngIf",e.label.pinType===e.labelPinType.Minus||e.label.pinType===e.labelPinType.PlusMinus&&e.selected)}}function d(e,t){1&e&&s.Qb(0,"img",15)}function g(e,t){1&e&&s.Qb(0,"img",15)}function h(e,t){1&e&&s.Qb(0,"img",16)}function b(e,t){1&e&&s.Qb(0,"img",17)}function m(e,t){if(1&e&&(s.Nc(0,d,1,0,"img",12),s.Nc(1,g,1,0,"img",12),s.Nc(2,h,1,0,"img",13),s.Nc(3,b,1,0,"img",14)),2&e){const e=s.gc();s.mc("ngIf",e.label.pinType==e.labelPinType.Default),s.Db(1),s.mc("ngIf",e.label.pinType==e.labelPinType.Sequential),s.Db(1),s.mc("ngIf",e.label.pinType===e.labelPinType.Plus||e.label.pinType===e.labelPinType.PlusMinus&&!e.selected),s.Db(1),s.mc("ngIf",e.label.pinType===e.labelPinType.Minus||e.label.pinType===e.labelPinType.PlusMinus&&e.selected)}}const f=function(e,t){return{"label-pin__text--white":e,"label-pin__text--black":t}};function y(e,t){if(1&e&&(s.Tb(0),s.Vb(1,"div",18),s.Pc(2),s.Ub(),s.Sb()),2&e){const e=s.gc();s.Db(1),s.mc("ngClass",s.qc(2,f,e.labelTheme===e.labelThemeEnum.StudioNext,e.labelTheme===e.labelThemeEnum.Annotation)),s.Db(1),s.Rc(" ",e.sequence," ")}}const v=function(e,t,n,i){return{"label-pin--light":e,"label-pin--dark":t,"label-pin--none":n,"label-pin--selected":i}};let O=(()=>{class e{constructor(){this.labelPinType=i.a,this.labelThemeEnum=a.a,this.labelTheme=a.a.StudioNext,this.selected=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-label-pin"]],inputs:{label:"label",labelTheme:"labelTheme",selected:"selected",sequence:"sequence"},decls:7,vars:9,consts:[[1,"label-pin",3,"ngClass"],["pin",""],[4,"ngIf","ngIfElse"],["lightPins",""],[4,"ngIf"],[1,"label__glow"],["draggable","false","alt","","src","./assets/images/labels/circle-dark.svg","class","label-pin__image",4,"ngIf"],["draggable","false","alt","","src","./assets/images/labels/circle-plus-dark.svg","class","label-pin__image",4,"ngIf"],["draggable","false","alt","","src","./assets/images/labels/circle-minus-dark.svg","class","label-pin__image",4,"ngIf"],["draggable","false","alt","","src","./assets/images/labels/circle-dark.svg",1,"label-pin__image"],["draggable","false","alt","","src","./assets/images/labels/circle-plus-dark.svg",1,"label-pin__image"],["draggable","false","alt","","src","./assets/images/labels/circle-minus-dark.svg",1,"label-pin__image"],["draggable","false","alt","","src","./assets/images/labels/circle.svg","class","label-pin__image",4,"ngIf"],["draggable","false","alt","","src","./assets/images/labels/circle-plus.svg","class","label-pin__image",4,"ngIf"],["draggable","false","alt","","src","./assets/images/labels/circle-minus.svg","class","label-pin__image",4,"ngIf"],["draggable","false","alt","","src","./assets/images/labels/circle.svg",1,"label-pin__image"],["draggable","false","alt","","src","./assets/images/labels/circle-plus.svg",1,"label-pin__image"],["draggable","false","alt","","src","./assets/images/labels/circle-minus.svg",1,"label-pin__image"],[1,"label-pin__text",3,"ngClass"]],template:function(e,t){if(1&e&&(s.Vb(0,"div",0,1),s.Nc(2,u,5,4,"ng-container",2),s.Nc(3,m,4,4,"ng-template",null,3,s.Oc),s.Nc(5,y,3,5,"ng-container",4),s.Qb(6,"div",5),s.Ub()),2&e){const e=s.yc(4);s.mc("ngClass",s.sc(4,v,t.labelTheme===t.labelThemeEnum.StudioNext,t.labelTheme===t.labelThemeEnum.Annotation,t.label.pinType===t.labelPinType.None,t.selected)),s.Db(2),s.mc("ngIf",t.labelTheme===t.labelThemeEnum.Annotation)("ngIfElse",e),s.Db(3),s.mc("ngIf",t.label.pinType===t.labelPinType.Sequential)}},directives:[o.m,o.p],styles:['.label-pin[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;position:relative;transition:background-color .12s;z-index:10}.label-pin__text[_ngcontent-%COMP%]{display:flex;z-index:10;justify-content:center;align-items:center;font-size:10px!important;color:#101823}.label-pin[_ngcontent-%COMP%]:before, .label-pin__text[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%}.label-pin[_ngcontent-%COMP%]:before{content:" ";background-color:transparent;border:2px solid transparent;border-radius:50%;box-sizing:border-box;display:block;z-index:-2}.label-pin--light.label-pin--selected[_ngcontent-%COMP%]:before{background-color:#fff;border-color:#2d72dc;box-shadow:0 0 0 1px rgba(45,114,220,.7)}.label-pin--light.label-pin[_ngcontent-%COMP%]   .label-pin__text[_ngcontent-%COMP%]{color:#101823}.label-pin--dark.label-pin[_ngcontent-%COMP%]:before{background-color:rgba(0,0,0,.75)}.label-pin--dark.label-pin--selected[_ngcontent-%COMP%]:after, .label-pin--dark.label-pin--selected[_ngcontent-%COMP%]:before{background-color:#2d72dc}.label-pin--dark.label-pin[_ngcontent-%COMP%]   .label-pin__text[_ngcontent-%COMP%]{color:#fff}.label-pin--none.label-pin[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),e})()},"2o60":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Default="default",e.Plus="plus",e.Minus="minus",e.PlusMinus="plusMinus",e.Sequential="sequential",e.None="None",e}({})},"3fyd":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s}));var i=function(e){return e.MultipleChoice="multiple-choice",e.SelectAnatomy="select-anatomy",e.LabelAnatomy="label-anatomy",e.Instructions="text-only",e}({});const a={[i.MultipleChoice]:"Multiple Choice",[i.SelectAnatomy]:"Select Anatomy in 3D",[i.LabelAnatomy]:"Label Anatomy",[i.Instructions]:"Instructions"},s={[i.MultipleChoice]:"Identify the correct answer from a list of options.",[i.SelectAnatomy]:"Identify the correct structure(s) in the 3D model",[i.LabelAnatomy]:"Correctly label each structure from a list of options",[i.Instructions]:"Use descriptive text to provide context between questions"}},"3ros":function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n("ofXK"),a=n("EWj2"),s=n("3Pt+"),o=n("AcyG"),r=n("GCmh"),c=n("S6v9"),l=n("yGOH"),p=n("Ow1N"),u=n("e0tp"),d=n("wf0l"),g=n("PCNd"),h=n("bSwM"),b=n("vvyD"),m=n("tyNb"),f=n("izPL"),y=n("Z48A"),v=n("DupM"),O=n("+QY/"),S=n("fXoL"),x=n("PmOP"),C=n("IlST"),w=n("0njA");let j=(()=>{class e{}return e.\u0275mod=S.Nb({type:e}),e.\u0275inj=S.Mb({factory:function(t){return new(t||e)},imports:[[o.d.forFeature([r.a]),d.b,m.i,a.a,i.c,s.z,c.a,l.a,u.a,b.a,f.a,p.a,g.a,h.b,O.a]]}),e})();S.Gc(v.a,[x.a,C.a,w.a,y.a],[])},"3zw+":function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("nRae"),a=n("b36G"),s=n("7b4e"),o=n("S/GR"),r=n("ewuU"),c=n("aqTE"),l=n("LvDl"),p=n("l57l"),u=n("yonH"),d=n("g408"),g=n("SJ0+");const h={enabled:!1,clips:{left:{clipId:g.a.LeftClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},right:{clipId:g.a.RightClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},back:{clipId:g.a.BackClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},front:{clipId:g.a.FrontClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},top:{clipId:g.a.TopClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},bottom:{clipId:g.a.BottomClip,enabled:!1,fade:!1,fadeDistance:0,progress:0}}};var b=n("eW6i"),m=n("gQBz"),f=n("e0fF"),y=n("nS47"),v=n("qz+p"),O=n("R6Q1"),S=n("fXoL");let x=(()=>{class e{constructor(e,t,n,i){this.engineService=e,this.serializeChapterService=t,this.labelService=n,this.animationService=i}addChapterToEngine(e,t){const n=d.a.makeChapterIdMap([e],!1),i=y.a.createGraphFromSrc(Object.values(Human.scene.rootObjects),"objectId","objects",new f.d(Human.scene.colorRecipes.getRecipes())),a=this.serializeChapterService.serializeChapter(i,e,{},[],n);a.synchronization=JSON.parse(JSON.stringify(e.synchronization));const s=new Human.timeline.BranchTimeline(a);return Human.timeline.activeRoot.addChapter(s,{rebuild:!0,position:t}),s}removeChapterFromEngine(e){Human.timeline.activeRoot._chapters=Human.timeline.activeRoot._chapters.filter(t=>t.id!==e.id),Human.timeline.activeRoot.build()}copyChapter(e,t){const n=Object(a.classToClass)(e);return n.id=t,n.labels.forEach(e=>{e.id=s.a.idWithPrefix("label"),e.chapterId=n.id}),n.readyState={model:!0,animation:!0},n}getCurrentChapterId(){return Human.timeline.activeRoot._nowBranch.id}fromHumanChapter(e,t,n,o){const c=Object.assign({},n),d=e.chapters[o];c.environment=Object.assign({},d.environment),c.transitions=Object.assign({},d.transitions),d.transparencyMode&&(c.transparencyMode=d.transparencyMode),c.showObjects=Object.assign({},e.chapters[o].showObjects),c.pickThroughObjects=Object.assign({},e.chapters[o].pickThroughObjects),c.camera=Object(l.cloneDeep)(n.camera),d.cameraRotationCenter&&(c.camera.rotationCenter=d.cameraRotationCenter),Array.isArray(c.camera.rotationCenter)&&(c.camera.rotationCenter=O.a.fromArray(c.camera.rotationCenter));const g=c.camera.location;g.rotationCenter&&delete g.rotationCenter,c.id||(c.id=s.a.idWithPrefix("chapter"));let b=!1;c.timelineMap=Object.values(n.maps).map(e=>("dummy"!==e.leafTimeline.id&&(b=!0),this.animationService.fromEngineTimelineMap(e))),delete c.maps;let m=0;const f=!!n.animation&&n.animation.loop;b&&f?m=-1:b&&!f&&(m=1),c.ui=n.ui&&!Object(l.isEmpty)(n.ui)?n.ui:{play:{count:m}};const y=p.a.Annotation,v=[...c.annotations||[]].map(e=>this.labelService.deserializeAnnotation(e,c,y)),S=[],x=this.groupHotspots([...c.hotspots||[]].filter(i=>{const a=this.labelService.filterHotspot(e,n,i);return a?i.theme||(i.theme="module"===t?u.a.studioNext:u.a.classicHotspot):S.push(i),a})).map(t=>this.labelService.deserializeHotspots(e,n,o,...t));c.labels=[...v,...x],delete c.annotations,c.background=r.a.deserialize(n.background);const C=Object(a.plainToClass)(i.a,c);C.hotspots=S,C.readyState={model:!1,animation:!1},C.clippingPlanes=Object(l.isEmpty)(C.clippingPlanes)?h:this.sanitizeClippingPlanes(C.clippingPlanes),C.legend=[...d.legend||[]],C.visibilityLayers=this.buildVisibilityLayers(d.visibilityLayers,C.showObjects),C.colorRecipeObjects=d.colorRecipeObjects,C.contentBlocks=[...d.contentBlocks||[]],C.quizQuestions=(d.quizQuestions||[]).map(e=>Object.assign(Object.assign({},e),{chapterId:c.id}));const w=n.media||{};return Object.values(w).forEach(e=>{e.data.hasOwnProperty("lang")||(e.data.lang="en")}),C.media=w,C.thumbnails=d.thumbnails,C}getChapterTweenStates(e){const t=e.timelineMap.filter(e=>"dummy"!==e.data.timeline).map(e=>e.data.timeline);return Array.from(new Set(t))}getChapterLightLibraries(e){return(e.lights&&e.lights.libraries||[]).filter(e=>"default"!==e)}getChapterReflectionLibraries(e){const t=e.environment&&e.environment.reflectionMap||[],n=e=>e.split(".")[0],i=(e.environment&&e.environment.lightMap||[]).map(n).concat(t.map(n));return Array.from(new Set(i))}hasVisibilityLayers(e){return Array.isArray(e)&&e.length>0}buildVisibilityLayers(e,t){const n={src:{},current:{}};if(e&&this.hasVisibilityLayers(e.layers)){const i=e.initIndex||0,a=this.unpackLayers(e.layers),s=this.buildShownObjectsSet(t),o=this.buildCurrentLayers(a,s);n.src={layers:e.layers,initIndex:i},n.current={layers:o,index:i,position:0}}return n}buildShownObjectsSet(e){const t=this.engineService.getSceneGraph(Human.scene.rootObjects),n=Object.keys(t.nodes).filter(n=>Object(m.b)(t,n,e)||Object(m.c)(t,n,e));return new Set(n)}unpackLayers(e){const t=[];return e.forEach(e=>{let n=[];e.objectIds.forEach(e=>{const t=Human.scene.objects[e].getLeafObjects();n=n.concat(t.map(e=>e.objectId))}),t.push({name:e.name,objectIds:n})}),t}buildCurrentLayers(e,t){const n=[];return e.forEach((i,a)=>{let s=!1;i.objectIds.forEach(i=>{t.has(i)&&(s?n[n.length-1].objectIds.push(i):(n.push({name:e[a].name,objectIds:[i]}),s=!0))})}),n}sanitizeClippingPlanes(e){const t=Object.values(e.clips).some(e=>e.progress>0),n=Object(l.mapKeys)(e.clips,(e,t)=>g.c[t]||t);return Object.assign(Object.assign({},e),{clips:n,enabled:t})}groupHotspots(e){const t={},n=e=>e.primitiveIndex?e.primitiveIndex.toFixed(0):e.pos?e.pos.map(e=>e.toFixed(3)).join(":"):Math.random().toFixed(3);return e.forEach(e=>{const i=[(a=e.type,RegExp("^circle-(plus|minus)").test(a)?"pair":"single"),e.objectId,n(e)].join("|");var a;i in t?t[i].push(e):t[i]=[e]}),Object.values(t)}}return e.\u0275fac=function(t){return new(t||e)(S.Zb(b.a),S.Zb(o.a),S.Zb(c.a),S.Zb(v.a))},e.\u0275prov=S.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"4FHB":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.updateChapterIds=function(e,t){return Object.keys(e).reduce((n,i)=>(n[t[i]]=e[i],n),{})},e.duplicateChapter=function(e,t,n){return Object.assign(Object.assign({},n),{[t]:n[e]})},e.deleteChapter=function(e,t){const n=Object.assign({},t);return delete n[e],n},e.addEntryForChapter=function(e,t,n){return n[e]=Object.assign(Object.assign({},n[e]),t),n},e.refreshEngineLookup=function(e,t){Human.modules.moduleData[e].tweenParticleLookup=t}}(i||(i={}))},"4LIl":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Toggle="toggle",e.None="none",e}({})},"4bFC":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Enabled="enabled",e.Disabled="disabled",e.Locked="locked",e}({})},"4qFM":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("fXoL"),a=n("awCs"),s=n("2Vo4"),o=n("XNiG"),r=n("1G5W"),c=n("Zy1z"),l=n("pLZG"),p=n("ofXK");const u=["tabButton"],d=function(e,t,n,i){return{"tabs__label--dark":e,"tabs__label--light":t,"tabs__label--dark-active":n,"tabs__label--light-active":i}};function g(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",5,6),i.cc("click",(function(){i.Cc(e);const n=t.$implicit;return i.gc().handleTabSelect(n)})),i.Pc(2),i.Ub()}if(2&e){const e=t.$implicit,n=i.gc();i.mc("ngClass",i.sc(4,d,"dark"==n.tabTheme,"light"==n.tabTheme,"dark"==n.tabTheme&&n.isTabActive(e),"light"==n.tabTheme&&n.isTabActive(e))),i.Eb("aria-selected",n.isTabActive(e))("tabIndex",n.isTabActive(e)?0:-1),i.Db(2),i.Rc(" ",e.label," ")}}const h=function(e,t){return{"tabs--small":e,"tabs--medium":t}},b=["*"];let m=(()=>{class e{constructor(e){this.changeDetector=e,this.display="normal",this.tabTheme="dark",this.activeTabChange=new i.p,this._activeTab=new s.a(0),this.tabSize="small",this.tabAlign="default",this.ngUnsubscribe=new o.a}get activeTab(){return this._activeTab.value}set activeTab(e){null!=e&&("string"==typeof e&&(e=e.toUpperCase()),this._activeTab.next(e))}get tabItems(){return this._tabItems}set tabItems(e){this._tabItems=e}ngOnInit(){}ngAfterContentInit(){this._tabs.changes.pipe(Object(r.a)(this.ngUnsubscribe)).subscribe(e=>{this.mapTabs(),this.changeDetector.markForCheck()}),this.mapTabs(),this._activeTab.pipe(Object(r.a)(this.ngUnsubscribe)).subscribe(e=>{this.showTab(e)}),this._activeTab.pipe(Object(c.a)(),Object(l.a)(([e,t])=>e!==t),Object(r.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.activeTabChange.next(t)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleTabSelect(e){this._activeTab.next(e.index)}mapTabs(){this.tabItems=this._tabs.map((e,t)=>({index:t,label:e.label||"Item "+t,tab:e}))}showTab(e){this._tabs.forEach((t,n)=>{switch(typeof e){case"number":t.isActive=e===n;break;case"string":t.isActive=e.toString().toUpperCase()===t.label.toUpperCase()}}),this.changeDetector.markForCheck()}isTabActive(e){return("string"==typeof this._activeTab.value?e.label.toUpperCase():e.index)===this._activeTab.value}shiftTab(e){const t=(this.tabItems.find(e=>this.isTabActive(e)).index+e+this.tabItems.length)%this.tabItems.length;this._activeTab.next(t),this._buttonRefs.toArray()[t].nativeElement.focus()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-tabs"]],contentQueries:function(e,t,n){if(1&e&&i.Ib(n,a.a,!1),2&e){let e;i.xc(e=i.dc())&&(t._tabs=e)}},viewQuery:function(e,t){if(1&e&&i.Vc(u,!0),2&e){let e;i.xc(e=i.dc())&&(t._buttonRefs=e)}},inputs:{display:"display",tabTheme:"tabTheme",activeTab:"activeTab",tabSize:"tabSize",tabAlign:"tabAlign"},outputs:{activeTabChange:"activeTabChange"},ngContentSelectors:b,decls:6,vars:7,consts:[[1,"tabs",3,"ngClass"],["role","tablist",1,"tabs__labels",3,"keyup.arrowright","keyup.arrowleft"],["tabElements",""],["class","tabs__label","role","tab","type","button","data-test","tabButton",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"tabs__content"],["role","tab","type","button","data-test","tabButton",1,"tabs__label",3,"ngClass","click"],["tabButton",""]],template:function(e,t){1&e&&(i.lc(),i.Vb(0,"div",0),i.Vb(1,"div",1,2),i.cc("keyup.arrowright",(function(){return t.shiftTab(1)}))("keyup.arrowleft",(function(){return t.shiftTab(-1)})),i.Nc(3,g,3,9,"button",3),i.Ub(),i.Vb(4,"div",4),i.kc(5),i.Ub(),i.Ub()),2&e&&(i.mc("ngClass",i.qc(4,h,"small"==t.tabSize,"medium"==t.tabSize)),i.Db(1),i.Hb("tabs__labels--center","center"===t.tabAlign),i.Db(2),i.mc("ngForOf",t.tabItems))},directives:[p.m,p.o],styles:['.text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.tabs__labels[_ngcontent-%COMP%]{margin-bottom:8px}.tabs__labels--center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.tabs__label[_ngcontent-%COMP%]{padding:2px 4px 4px;margin-right:8px;font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase;font-weight:500;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;background:none;border:none}.tabs__label[_ngcontent-%COMP%]:after{content:"";display:block;border-bottom:3px solid;margin-top:4px;width:0;transition:.25s ease;position:absolute;bottom:0;left:0}.tabs__label[_ngcontent-%COMP%]:hover{cursor:pointer}.tabs__label--dark[_ngcontent-%COMP%]{color:#96a8c0}.tabs__label--dark[_ngcontent-%COMP%]:after{border-color:#2d72dc}.tabs__label--dark-active[_ngcontent-%COMP%], .tabs__label--dark[_ngcontent-%COMP%]:hover{color:#fff}.tabs__label--dark-active[_ngcontent-%COMP%]:after{width:100%}.tabs__label--light[_ngcontent-%COMP%]{color:#374a68}.tabs__label--light[_ngcontent-%COMP%]:after{border-color:#2d72dc}.tabs__label--light-active[_ngcontent-%COMP%], .tabs__label--light[_ngcontent-%COMP%]:hover{color:#283853}.tabs__label--light-active[_ngcontent-%COMP%]:after{width:100%}.tabs--medium[_ngcontent-%COMP%]   .tabs__label[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}'],changeDetection:0}),e})()},"51ZA":function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var i=n("fXoL"),a=n("AcyG"),s=n("11Ye"),o=n("PUI9"),r=n("GMXD"),c=n("p345"),l=n("7u76"),p=n("EF3F"),u=n("gm/O"),d=n("nclC"),g=n("937/"),h=n("JaAu"),b=n("TATr"),m=n("YLgZ"),f=n("UsYJ"),y=n("eW6i"),v=n("0Yvn"),O=n("GUwF"),S=n("82LM"),x=n("sTHe"),C=n("jjCP"),w=n("x/dY"),j=n("dNgK"),k=n("u47x"),P=n("IlST"),_=n("STbY"),M=n("0njA"),I=n("1w2z"),T=n("f0Cb"),U=n("ofXK");const L=["nodeActionsTrigger"];function z(e,t){if(1&e&&(i.Tb(0),i.Vb(1,"button",30),i.Pc(2,"Select"),i.Ub(),i.Qb(3,"mat-divider"),i.Sb()),2&e){i.gc();const e=i.yc(24);i.Db(1),i.mc("matMenuTriggerFor",e)}}function A(e,t){if(1&e&&(i.Tb(0),i.Qb(1,"mat-divider"),i.Vb(2,"button",31),i.Pc(3," Selectable / Unselectable "),i.Ub(),i.Sb()),2&e){i.gc();const e=i.yc(43);i.Db(2),i.mc("matMenuTriggerFor",e)}}function F(e,t){if(1&e){const e=i.Wb();i.Tb(0),i.Qb(1,"mat-divider"),i.Vb(2,"button",32),i.cc("click",(function(){i.Cc(e);const t=i.gc();return t.editNodeLabel(t.node)})),i.Pc(3," Edit Object Name "),i.Ub(),i.Sb()}}function D(e,t){if(1&e&&(i.Tb(0),i.Qb(1,"mat-divider"),i.Vb(2,"button",33),i.Pc(3," Copy "),i.Ub(),i.Sb()),2&e){i.gc();const e=i.yc(50);i.Db(2),i.mc("matMenuTriggerFor",e)}}function E(e,t){if(1&e){const e=i.Wb();i.Tb(0),i.Qb(1,"mat-divider"),i.Vb(2,"button",34),i.cc("click",(function(){i.Cc(e);const t=i.gc();return t.samplePaint(t.node)})),i.Pc(3," Sample Paint "),i.Ub(),i.Sb()}}function N(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",35),i.cc("click",(function(){i.Cc(e);const t=i.gc();return t.toggleVisible(t.node,!0)})),i.Pc(1," Show This "),i.Ub()}}function R(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",36),i.cc("click",(function(){i.Cc(e);const t=i.gc();return t.toggleVisible(t.node,!1)})),i.Pc(1," Hide This "),i.Ub()}}function V(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",37),i.cc("click",(function(){i.Cc(e);const t=i.gc();return t.togglePickable(t.node,!1)})),i.Pc(1," Make Unselectable "),i.Ub()}}function B(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",38),i.cc("click",(function(){i.Cc(e);const t=i.gc();return t.togglePickable(t.node,!0)})),i.Pc(1," Make Selectable "),i.Ub()}}let H=(()=>{class e{constructor(e,t,n,a,s,o,r,l){this.store=e,this.graphService=t,this.changeDetectorRef=n,this.clipboardService=a,this.snackbar=s,this.cameraService=o,this.engineService=r,this.liveAnnouncer=l,this.application=c.a,this.shortId="",this.theme="dark",this.eventCategory="",this.nodeActionsClosed=new i.p}get node(){return this._node}set node(e){this._node=e;const t=this.node.id.split("-");this.shortId=2===t.length?t[1]:t[0]}isNodeChecked(e){return this.store.selectSnapshot(r.a.getNodes)[e].checked}isNodeShown(e){return this.store.selectSnapshot(r.a.getNodes)[e].shown}checkNode(e,t){const n=void 0===t?!this.isNodeChecked(e.id):t;this.store.dispatch(new u.a.UpdateNodesChecked(n,[e.id]))}checkInverse(e){this.store.dispatch(new u.a.UpdateNodesChecked(!0)),this.store.dispatch(new u.a.UpdateNodesChecked(!1,[e.id]))}setCheckedNodes(e,t){this.store.dispatch(new u.a.UpdateNodesChecked(!1));const n=void 0===t?!this.isNodeChecked(e.id):t;this.store.dispatch(new u.a.UpdateNodesChecked(n,[e.id]))}flyToNode(e){this.store.dispatch(new s.j(e.id)).subscribe(()=>{this.liveAnnouncer.announce("Fly to complete")})}hideNode(e){this.store.dispatch(new u.a.UpdateNodesShown(!1,[e.id]))}hideInverse(e){const t=this.store.selectSnapshot(o.a.getViewGraph),n=this.graphService.getAllLeafDescendants(t,[e.id]),i=this.graphService.getInverseSelection(t,[e.id]),a={};n.forEach(e=>{a[e]=!0}),i.forEach(e=>{a[e]=!1});const s=new u.a.UpdateNodesShown(void 0,void 0,a),c=Object(f.a)(this.store.selectSnapshot(r.a),s);this.store.dispatch(new u.a.ApplyPatch(c.patches));const l=this.engineService.getObjectBoundary(e.id),p=this.cameraService.cameraAfterFlyTo(l),d=new b.m(p),g=function(e,t){const[n,i,a]=immer.produceWithPatches(e,e=>{e.cameraFlyTo=t.camera});return{nextState:n,patches:i,inversePatches:a}}(this.store.selectSnapshot(m.a),d);this.store.dispatch(new b.a(g.patches)).subscribe(()=>{this.liveAnnouncer.announce("Isolate complete")}),this.store.dispatch(new u.a.UpdateNodeSelected),this.store.dispatch(new u.a.UpdateNodesChecked(!1)),this.store.dispatch(new h.a.SavePatches([{forward:c.patches,inverse:c.inversePatches,patchAction:u.a.ApplyPatch},{forward:g.patches,inverse:g.inversePatches,patchAction:b.a}]))}showNode(e){this.store.dispatch(new u.a.UpdateNodesShown(!0,[e.id])),this.changeDetectorRef.markForCheck()}toggleVisible(e,t){const n=void 0===t?this.isNodeShown(e.id):t;this.store.dispatch(new u.a.UpdateNodesShown(n,[e.id])).subscribe(()=>{this.liveAnnouncer.announce("Object "+(n?"shown":"hidden"))}),this.changeDetectorRef.markForCheck()}togglePickable(e,t){this.store.dispatch(new u.a.UpdateNodesPickable(t,[e.id])),this.changeDetectorRef.markForCheck()}makeEverythingElseUnpickale(e){this.store.dispatch(new u.a.UpdateNodesPickable(!1)),this.store.dispatch(new u.a.UpdateNodesPickable(!0,[e.id]))}fadeInverseNodes(e){const t=this.store.selectSnapshot(o.a.getViewGraph),n=this.graphService.getInverseSelection(t,[e.id]),i=this.graphService.getNodes(t,n);this.store.dispatch(new u.a.UpdateNodesPaint(p.b,i.map(e=>e.id))).subscribe(()=>{})}fadeNode(e){this.store.dispatch(new u.a.UpdateNodesPaint(p.b,[e.id])).subscribe(()=>{this.liveAnnouncer.announce("Fade complete")})}editNodeLabel(e){this.store.dispatch(new s.F(e))}copy(e){this.clipboardService.copyToClipboard(e,"text").subscribe(()=>{this.snackbar.open(`Copied ${e} to clipboard.`)})}onMenuClosed(){this.nodeActionsClosed.emit()}samplePaint(e){const t=this.store.selectSnapshot(r.a.getNodePaint)(e.id),n=v.a.toEngine(t);O.a.isRealRecipe(n)?this.store.dispatch(new S.h(t)):this.store.dispatch(new S.d),this.store.dispatch(new s.w(x.a.Paint)),this.store.dispatch(new C.h(w.a.Paint))}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(a.h),i.Pb(l.a),i.Pb(i.i),i.Pb(d.a),i.Pb(j.b),i.Pb(g.a),i.Pb(y.a),i.Pb(k.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-node-actions"]],viewQuery:function(e,t){if(1&e&&i.Jc(L,!0),2&e){let e;i.xc(e=i.dc())&&(t.nodeActionsTrigger=e.first)}},inputs:{node:"node",theme:"theme",eventCategory:"eventCategory"},outputs:{nodeActionsClosed:"nodeActionsClosed"},decls:58,vars:25,consts:[["app-button","","data-test","nodeActionsTrigger","buttonSize","xsmall",3,"buttonTheme","matMenuTriggerFor","menuClosed"],["nodeActionsTrigger","matMenuTrigger"],["icon","ellipsis-v","aria-hidden","true"],[1,"visually-hidden"],[3,"overlapTrigger"],["nodeActions","matMenu"],[4,"appFlagApplication","appFlagApplicationPage","appFlagApplicationMode"],["mat-menu-item","","data-test","nodeActionsHideShow",3,"click"],["mat-menu-item","","data-test","nodeActionsIsolate",3,"click"],["data-test","nodeActionsFadeTrigger","mat-menu-item","",3,"matMenuTriggerFor"],[4,"appFlagApplication","appFlagApplicationMode","appFlagApplicationPage"],["mat-menu-item","","data-test","nodeActionsFlyTo",3,"click"],["selectActions","matMenu"],["mat-menu-item","","data-test","nodeActionsSelectThis",3,"click"],["mat-menu-item","","data-test","nodeActionsSelectEverythingElse",3,"click"],["fadeActions","matMenu"],["mat-menu-item","","data-test","nodeActionsFadeThis",3,"click"],["mat-menu-item","","data-test","nodeActionsFadeEverythingElse",3,"click"],["showHideActions","matMenu"],["mat-menu-item","","data-test","nodeActionsShowThis",3,"click",4,"ngIf"],["mat-menu-item","","data-test","nodeActionsShowEverythingElse",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["pickableActions","matMenu"],["mat-menu-item","","data-test","nodeActionsPickable",3,"click",4,"ngIf"],["mat-menu-item","","data-test","nodeActionsUnpickable",3,"click",4,"ngIf"],["mat-menu-item","","data-test","nodeActionsEverythingElseUnpickable",3,"click"],["copyActions","matMenu"],["mat-menu-item","","data-test","nodeActionsCopyShortID",3,"click"],["mat-menu-item","","data-test","nodeActionsCopyFullID",3,"click"],["mat-menu-item","","data-test","nodeActionsCopyDisplayName",3,"click"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","","data-test","nodeActionsPickableTrigger",3,"matMenuTriggerFor"],["mat-menu-item","","data-test","nodeActionsEditName",3,"click"],["mat-menu-item","","data-test","nodeActionsCopyTrigger",3,"matMenuTriggerFor"],["mat-menu-item","","data-test","nodeActionsSamplePaint",3,"click"],["mat-menu-item","","data-test","nodeActionsShowThis",3,"click"],["mat-menu-item","","data-test","nodeActionsShowEverythingElse",3,"click"],["mat-menu-item","","data-test","nodeActionsPickable",3,"click"],["mat-menu-item","","data-test","nodeActionsUnpickable",3,"click"]],template:function(e,t){if(1&e&&(i.Tb(0),i.Vb(1,"button",0,1),i.cc("menuClosed",(function(){return t.onMenuClosed()})),i.Qb(3,"app-icon",2),i.Vb(4,"span",3),i.Pc(5),i.Ub(),i.Ub(),i.Vb(6,"mat-menu",4,5),i.Nc(8,z,4,1,"ng-container",6),i.Vb(9,"button",7),i.cc("click",(function(){return t.toggleVisible(t.node,!t.node.boolState.shown)})),i.Pc(10),i.Ub(),i.Vb(11,"button",8),i.cc("click",(function(){return t.hideInverse(t.node)})),i.Pc(12," Isolate "),i.Ub(),i.Qb(13,"mat-divider"),i.Vb(14,"button",9),i.Pc(15," Fade "),i.Ub(),i.Nc(16,A,4,1,"ng-container",10),i.Qb(17,"mat-divider"),i.Vb(18,"button",11),i.cc("click",(function(){return t.flyToNode(t.node)})),i.Pc(19,"Fly To"),i.Ub(),i.Nc(20,F,4,0,"ng-container",6),i.Nc(21,D,4,1,"ng-container",6),i.Nc(22,E,4,0,"ng-container",6),i.Ub(),i.Vb(23,"mat-menu",null,12),i.Vb(25,"button",13),i.cc("click",(function(){return t.checkNode(t.node,!0)})),i.Pc(26," Select This "),i.Ub(),i.Vb(27,"button",14),i.cc("click",(function(){return t.checkInverse(t.node)})),i.Pc(28," Select Everything Else "),i.Ub(),i.Ub(),i.Vb(29,"mat-menu",null,15),i.Vb(31,"button",16),i.cc("click",(function(){return t.fadeNode(t.node)})),i.Pc(32," Fade This "),i.Ub(),i.Vb(33,"button",17),i.cc("click",(function(){return t.fadeInverseNodes(t.node)})),i.Pc(34," Fade Everything Else "),i.Ub(),i.Ub(),i.Vb(35,"mat-menu",null,18),i.Nc(37,N,2,0,"button",19),i.Nc(38,R,2,0,"button",20),i.Qb(39,"mat-divider"),i.Vb(40,"button",21),i.cc("click",(function(){return t.hideInverse(t.node)})),i.Pc(41,"Hide Everything Else"),i.Ub(),i.Ub(),i.Vb(42,"mat-menu",null,22),i.Nc(44,V,2,0,"button",23),i.Nc(45,B,2,0,"button",24),i.Qb(46,"mat-divider"),i.Vb(47,"button",25),i.cc("click",(function(){return t.makeEverythingElseUnpickale(t.node)})),i.Pc(48," Make Everything Else Unselectable "),i.Ub(),i.Ub(),i.Vb(49,"mat-menu",null,26),i.Vb(51,"button",27),i.cc("click",(function(){return t.copy(t.shortId)})),i.Pc(52," Copy Short ID "),i.Ub(),i.Vb(53,"button",28),i.cc("click",(function(){return t.copy(t.node.id)})),i.Pc(54," Copy Full ID "),i.Ub(),i.Qb(55,"mat-divider"),i.Vb(56,"button",29),i.cc("click",(function(){return t.copy(t.node.label)})),i.Pc(57," Copy Display Name "),i.Ub(),i.Ub(),i.Sb()),2&e){const e=i.yc(7),n=i.yc(30);i.Db(1),i.mc("buttonTheme",t.theme)("matMenuTriggerFor",e),i.Db(4),i.Rc("",t.node.label," menu"),i.Db(1),i.mc("overlapTrigger",!0),i.Db(2),i.mc("appFlagApplication",t.application.All)("appFlagApplicationPage","/edit")("appFlagApplicationMode","include"),i.Db(2),i.Rc(" ",t.node.boolState.shown?"Hide":"Show"," "),i.Db(4),i.mc("matMenuTriggerFor",n),i.Db(2),i.mc("appFlagApplication",t.application.All)("appFlagApplicationMode","include")("appFlagApplicationPage","/edit"),i.Db(4),i.mc("appFlagApplication",t.application.Loft)("appFlagApplicationPage","/edit")("appFlagApplicationMode","include"),i.Db(1),i.mc("appFlagApplication",t.application.Loft)("appFlagApplicationPage","/edit")("appFlagApplicationMode","include"),i.Db(1),i.mc("appFlagApplication",t.application.All)("appFlagApplicationPage","/edit")("appFlagApplicationMode","include"),i.Db(15),i.mc("ngIf",!t.node.boolState.shown),i.Db(1),i.mc("ngIf",t.node.boolState.shown),i.Db(6),i.mc("ngIf",t.node.boolState.pickable),i.Db(1),i.mc("ngIf",!t.node.boolState.pickable)}},directives:[P.a,_.d,M.a,_.a,I.a,_.b,T.a,U.p],styles:[""],changeDetection:0}),e})()},"5miH":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Started="started",e.Loaded="loaded",e.Tick="tick",e.HumanReady="human.ready",e.HumanStarted="started",e.Error="error",e.HumanError="human.error",e.CanvasResized="canvas.resized",e.HumanCanvasResized="human.canvasResized",e.LogDebug="_log.debug",e.LogError="_log.error",e.LogInfo="_log.info",e.LogWarn="_log.warn",e.SceneLoaded="scene.loaded",e.HumanProgress="human.progress",e.AnnotationsCreated="annotations.created",e.AnnotationsDestroyed="annotations.destroyed",e.AnnotationsHidden="annotations.hidden",e.AnnotationsShown="annotations.shown",e.AssetsLoadFinish="assets.load.finish",e.AssetsLoadProgress="assets.load.progress",e.AssetsLoadStart="assets.load.start",e.CameraRested="camera.rested",e.CameraUpdated="camera.updated",e.HotspotsDisplayUpdated="hotspots.displayUpdated",e.HotspotsEntered="hotspots.entered",e.HotspotsLeft="hotspots.left",e.HotspotsPicked="hotspots.picked",e.HotspotsPositionUpdated="hotspots.positionUpdated",e.LabelsCreated="labels.created",e.LabelsUpdated="labels.updated",e.LabelsMoved="labels.moved",e.LabelsDestroyed="labels.destroyed",e.LabelsChapterInfo="labels.chapterInfo",e.LabelsShown="labels.shown",e.LabelsHidden="labels.hidden",e.LabelsEnabled="labels.enabled",e.LabelsDisabled="labels.disabled",e.LabelsEntered="labels.entered",e.LabelsLeft="labels.left",e.LabelsPicked="labels.picked",e.ModuleInteractive="module.interactive",e.ModulesActivateFinish="modules.activate.finish",e.ModulesCreateFinish="modules.create.finish",e.ModulesDestroyFinish="modules.destroy.finish",e.PickPicked="pick.picked",e.QuizEntered="quiz.entered",e.QuizExited="quiz.exited",e.QuizQuestionLoaded="quiz.questionLoaded",e.QuizAnswerSelected="quiz.answerSelected",e.QuizAnswerSubmitted="quiz.answerSubmitted",e.QuizCompleted="quiz.completed",e.SceneMarkersUpdated="scene.markers.updated",e.SceneObjectRenderable="scene.objectRenderable",e.SceneObjectsSelected="scene.objectsSelected",e.SceneObjectsShown="scene.objectsShown",e.ScenePicked="scene.picked",e.SceneRestored="scene.restored",e.SceneXrayEnabled="scene.xrayEnabled",e.SceneXrayDisabled="scene.xrayDisabled",e.SceneReady="scene.ready",e.TimelineChaptersActivated="timeline.chapters.activated",e.TimelineChaptersActivateFinish="timeline.chapters.activate.finish",e.TimelineChaptersActivateStart="timeline.chapters.activate.start",e.TimelineChapterTransition="timeline.chapterTransition",e.TimelinePlaying="timeline.playing",e.TimelineScrubbed="timeline.scrubbed",e.TimelinePlayed="timeline.played",e.TimelineStopped="timeline.stopped",e.TimelinePaused="timeline.paused",e.TimelineUnpaused="timeline.unpaused",e.TimelineCompleted="timeline.completed",e.TimelineTimeFrameUpdated="timeline.timeFrame.updated",e.GraphAssetAttachFinish="graph.assetAttach.finish",e.TweenVisibilityUpdate="TweenVisibilityUpdate",e.NativeDeleteData="native.deleteData",e.NativeUpgrade="native.upgrade",e.NativeRestore="native.restore",e.NativeShare="native.share",e.NativeGoogleSignUp="native.googleSignUp",e.NativeDebugMessage="native.debugMessage",e}({})},"5nh7":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("R0Ic");!function(e){e.slideTransition=Object(a.g)([Object(a.l)({transform:"translateY({{ from }}%)",opacity:0}),Object(a.e)("{{ duration }}ms ease-out",Object(a.l)({transform:"translateY({{ to }})",opacity:1}))]),e.fadeIn=Object(a.g)([Object(a.l)({opacity:0}),Object(a.e)("{{ duration }}ms ease-out",Object(a.l)({opacity:1}))]),e.fadeOut=Object(a.g)([Object(a.l)({opacity:"*"}),Object(a.e)("{{ duration }}ms ease-in",Object(a.l)({opacity:0}))])}(i||(i={}))},"5sb6":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.AboutDialog="AboutDialog",e.AddTeamModelDialog="AddTeamModelDialog",e.AssignUserRoleDialog="AssignUserRoleDialog",e.BookmarkAccessDialog="BookmarkAccessDialog",e.ClipboardDialog="ClipboardDialog",e.ShareUrlDialog="ShareUrlDialog",e.ConfirmDialog="ConfirmDialog",e.ContactDialog="ContactDialog",e.GroupRestrictionDialog="GroupRestrictionDialog",e.ImageDialog="ImageDialog",e.ImportDialog="ImportDialog",e.JoinDomainDialog="JoinDomainDialog",e.LimitDialog="LimitDialog",e.ManageDialog="ManageDialog",e.PremiumContentDialog="PremiumContentDialog",e.PricingDialog="PricingDialog",e.ProfileDialog="ProfileDialog",e.QuizSettingsDialog="QuizSettingsDialog",e.SaveAsBookmarkDialog="SaveAsBookmarkDialog",e.SaveBookmarkDialog="SaveBookmarkDialog",e.SaveModuleDialog="SaveModuleDialog",e.TransferUserContentDialog="TransferUserContentDialog",e.RemoveUserDialog="RemoveUserDialog",e.MergeModuleDialog="MergeModuleDialog",e.MergeConflictDialog="MergeConflictDialog",e.WelcomeTourDialog="WelcomeTourDialog",e.TrialExpiredDialog="TrialExpiredDialog",e.PremiumAccessDialog="PremiumAccessDialog",e.ConfirmRoleDialog="ConfirmRoleDialog",e.CollectionNameDialog="CollectionNameDialog",e.PublicViewGateDialog="PublicViewGateDialog",e}({})},"6L7E":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("2o60"),a=n("l57l"),s=n("A+8E");class o{constructor(e){this.pinType=i.a.PlusMinus,this.sequentialType=s.a.Alphabetical,this.theme=a.a.StudioNext,this.expandTag=!0,this.showDescription=!0,this.collapseDescription=!1,this.pinGlow=!1,this.hideWire=!1,this.hideTag=!1,this.title=e}}},"6d61":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("LvDl"),a=n("HDdC"),s=n("pLZG"),o=n("eIep");function r(e){return function(e){return new a.a(t=>{const n=new Image;n.onload=()=>{const e=function(e){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.naturalWidth,t.height=e.naturalHeight,n.drawImage(e,0,0),t}(n);t.next(e),t.complete()},n.onerror=()=>{const e=document.createElement("canvas");t.next(e),t.complete()},n.src=e})}(e).pipe(Object(s.a)(e=>!Object(i.isNil)(e)),Object(o.a)(e=>new a.a(t=>{e.toBlob(e=>{t.next(e),t.complete()},"image/jpeg",100)})))}},"6n0X":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("ofXK"),a=n("vvyD"),s=n("yGOH"),o=n("+pSP"),r=n("aKmd"),c=n("Wdmj"),l=n("EWj2"),p=n("fXoL");let u=(()=>{class e{}return e.\u0275mod=p.Nb({type:e}),e.\u0275inj=p.Mb({factory:function(t){return new(t||e)},imports:[[i.c,o.a,a.a,l.a,r.a,s.a,c.d]]}),e})()},"7PKw":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));class i{}var a=n("lJxs"),s=n("b36G"),o=n("zrlG"),r=n("AbMW"),c=function(e){return e.IdAsc="+collection_id",e.IdDesc="-collection_id",e.NameAsc="+collection_name",e.NameDesc="-collection_name",e.UpdateDateAsc="+collection_updatedate",e.UpdateDateDesc="-collection_updatedate",e.CreateDateAsc="+collection_createdate",e.CreateDateDesc="-collection_createdate",e.CustomAsc="+custom_sort_order",e.CustomDesc="-custom_sort_order",e}({}),l=n("MCQd"),p=n("fXoL"),u=n("tk/3");const d="/ws/organization/collection";let g=(()=>{class e{constructor(e){this.http=e}createOrganization(e){return this.http.post("/ws/organization/create",e)}updateOrganization(e){return this.http.post("/ws/organization/update",e)}getCollections(e){e.sort_order||(e.sort_order=[c.CustomAsc,c.NameDesc]);const t=l.a(e);return this.http.get(`${d}${t}`).pipe(Object(a.a)(e=>Object(s.plainToClass)(i,e).map(e=>this.normalizeCollectionModel(e))))}getCollectionContent(e,t,n=""){const i=n.toLocaleLowerCase().split(" ");return this.getCollections({group_id:e,collection_id:t,include_content:1}).pipe(Object(a.a)(e=>e[0].collection_content.map(e=>Object(s.plainToClass)(o.a,e)).filter(e=>{let t=!0;return i.length&&e.title&&i.forEach(n=>{t=t&&e.title.toLocaleLowerCase().indexOf(n)>=0}),t=t&&!0!==e.unavailable,t})))}addCollection(e,t){return this.http.post(d,{group_id:e,collection_name:t})}removeCollection(e){return this.http.request("DELETE",d,{body:{group_id:e.group_id,collection_id:e.collection_id}})}renameCollection(e,t){return this.http.post(d,{group_id:e.group_id,collection_id:e.collection_id,collection_name:t})}reorderCollections(e,t){return this.http.post(d+"/sort-order",{group_id:e,collection_id_sort_list:t.map(e=>e.collection_id)})}updateCollectionContent(e,t,n){return this.http.post(d+"/content",{group_id:e,add_content:t,remove_content:n})}getOrganizationAttribute(e,t,n){return e.find(e=>e.type===t&&e.name===n)}getPublicProfile(e){return this.http.get("/ws/organization/public/profile",{params:Object.assign({},e)}).pipe(Object(a.a)(e=>e))}normalizeCollectionModel(e){return e.collection_content&&e.collection_content.forEach(e=>{Object(r.a)(e)}),e}}return e.\u0275fac=function(t){return new(t||e)(p.Zb(u.b))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"7XdW":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("tyNb"),a=n("pLZG"),s=n("fXoL");let o=(()=>{class e{constructor(e){this.router=e,this.history=[]}loadRouting(){this.router.events.pipe(Object(a.a)(e=>e instanceof i.c)).subscribe(({urlAfterRedirects:e})=>{this.history=[...this.history,e]})}getHistory(){return this.history}getPreviousUrl(){return this.history[this.history.length-2]||"/"}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(i.e))},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"7b4e":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}e.getUuid=t,e.idWithPrefix=function(e){return e?`${e}-${t()}`:t()}}(i||(i={}))},"7gUy":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("fXoL"),a=n("jhN1"),s=n("lR5k");let o=(()=>{class e{constructor(e,t){this.domSanitizer=e,this.markdownService=t}set html(e){this.safeHTML=this.domSanitizer.bypassSecurityTrustHtml(e||"")}set markdownText(e){this.html=this.markdownService.compile(e,!0)}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(a.b),i.Pb(s.c))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-html"]],inputs:{html:"html",markdownText:"markdownText"},decls:1,vars:1,consts:[[1,"html",3,"innerHTML"]],template:function(e,t){1&e&&i.Qb(0,"div",0),2&e&&i.mc("innerHTML",t.safeHTML,i.Dc)},styles:[""],encapsulation:2,changeDetection:0}),e})()},"7u76":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n("e0fF");var i=n("f5j2"),a=n("nS47"),s=n("fXoL");let o=(()=>{class e{serializeNode(e,t,n={},i=(e=>!0)){const a={};return a.id=t.id,Object.entries(t.boolState).forEach(([e,t])=>{n.hasOwnProperty(e)&&(a[e]=t)}),Object.entries(t.numState).forEach(([e,t])=>{n.hasOwnProperty(e)&&(a[e]=t)}),e.successors[t.id]&&(a.children=[],e.successors[t.id].forEach(t=>{i(t)&&a.children.push(this.serializeNode(e,e.nodes[t],n,i))},this)),a}getAllSiblingsFromList(e,t,n){const i=[];let a;for(a=0;a<t.length;a++)this.getSiblings(e,t[a],n).forEach(e=>{i.includes(e)||i.push(e)});return i}getElectionResults(e,t,n,s){class o extends class{}{constructor(e,t){super(),Object.entries(e).forEach(([e,n])=>{this[e]={votesFor:[],votesAgainst:[]},Object.entries(t).forEach(([t,n])=>{n[e]?this[e].votesFor.push(t):this[e].votesAgainst.push(t)},this)},this)}}let r,c;const l=Object.keys(s),p=[];return n.forEach(n=>{c={},a.a.getSuccessors(e,n).forEach(n=>{c[n]=t[n]||i.a.createVoter(l,a.a.getState(e,n,l)),delete t[n]},this),r=new o(s,c);const u=i.a.buildElectionResult(n,r,s);p.push(u);const d={};Object.entries(u).forEach(([e,t])=>{d[e]=t.result}),t[n]=d},this),p}updateGraphStateRecord(e,t,n,i,s=!0){n.forEach(n=>{const o=n[i[0]].id,r=a.a.getState(e,o,i),c={};let l=!1;i.forEach(e=>{(s||n[e].result!==r[e])&&(c[e]=n[e].result,l=!0)}),l&&(t[o]=c)},this)}nodeExists(e,t){return!!e.nodes[t]}getLeaves(e){const t=[];return Object.entries(e.nodes).forEach(([n,i])=>{e.successors[n]||t.push(n)}),t}getDescendants(e,t,n=!1){const i=[];return function t(n){a.a.getSuccessors(e,n).forEach(e=>{i.push(e),t(e)})}(t),n&&i.push(t),i}getLeafDescendants(e,t,n=!1){const i=this.getDescendants(e,t,n).filter(t=>a.a.isLeaf(e,t));return(a.a.isLeaf(e,t)||n)&&i.push(t),i}getAllLeafDescendants(e,t){let n=[];return t.forEach(t=>{n=a.a.isLeaf(e,t)?[...n,t]:[...n,...this.getLeafDescendants(e,t,!1)]}),n.sort().reduce((e,t)=>(e.indexOf(t)<0&&e.push(t),e),[])}getInverseSelection(e,t){const n=this.getAllLeafDescendants(e,t);return this.getLeaves(e).filter(e=>n.indexOf(e)<0)}getSiblings(e,t,n=!1){const i=e.predecessors[t];let s=[];if(s=i?a.a.getSuccessors(e,i):a.a.getRoots(e),!n){const e=s.indexOf(t);e>=0&&s.splice(e,1)}return s}getNodes(e,t){const n=[];return t.forEach(t=>{e.nodes[t]&&n.push(e.nodes[t])}),n}setState(e,t,n){const i=a.a.getNode(e,t),s={};return Object.entries(n).forEach(([e,t])=>{"boolean"==typeof t&&i.boolState[e]!==t?(i.boolState[e]=t,s[e]=t):"number"==typeof t&&i.numState[e]!==t&&(i.numState[e]=t,s[e]=t)}),s}synchronize(e,t,n){const i=this.calculateGraphStateMap(e,t,n);return Object.entries(i).forEach(([t,n])=>{this.setState(e,t,n)},this),i}calculateGraphStateMap(e,t,n,s=!n){let o=[];const r={};let c=[];const l={},p=Object.keys(t);let u=0;for(n?Object.entries(n).forEach(([t,s])=>{r[t]=i.a.createVoter(p,n[t]),l[t]=Object.assign({},r[t]),u=Math.max(u,a.a.getNode(e,t).depth)},this):this.getLeaves(e).forEach(t=>{r[t]=i.a.createVoter(p,a.a.getNode(e,t).boolState),l[t]=Object.assign({},r[t]),u=Math.max(u,a.a.getNode(e,t).depth)},this),u-=1,o=i.a.getEligibleElections(e,Object.keys(r),u);u>=0;)c=this.getElectionResults(e,r,o,t),this.updateGraphStateRecord(e,l,c,p,s),u-=1,o=i.a.getEligibleElections(e,Object.keys(r),u);return l}filterGraphAccessors(e,t){const n=this.getNodes(e,t).sort((e,t)=>e.depth-t.depth),i=new Map;return n.filter(t=>!i.has(t.id)&&(this.getDescendants(e,t.id,!0).forEach(e=>i.set(e,!0)),!0)).map(e=>e.id)}resetDepth(e){a.a.depthFirst(e,t=>{let n=0;e.predecessors[t]&&(n=a.a.getNode(e,e.predecessors[t]).depth+1),a.a.getNode(e,t).depth=n})}deleteNode(e,t,n=!0){if(!this.nodeExists(e,t))return;delete e.nodes[t];const i=e.predecessors[t];i&&(delete e.predecessors[t],e.successors[i]&&(e.successors[i]=e.successors[i].filter(e=>e!==t)));const a=e.successors[t];a&&(delete e.successors[t],n&&a.forEach(t=>{this.deleteNode(e,t)},this)),e.roots[t]&&delete e.roots[t]}sanitizeNodeID(e){const t=new RegExp(/\|:/,"gi");return e.replace(t,"_")}resetAsLeaf(e,t){let n=[];return e.nodes[t]&&!a.a.isLeaf(e,t)&&(n=this.getDescendants(e,t),delete e.successors[t],n.forEach(t=>{delete e.nodes[t],delete e.successors[t],delete e.predecessors[t]})),n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"82LM":function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"i",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"k",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"l",(function(){return p})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"n",(function(){return g})),n.d(t,"j",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"m",(function(){return m}));let i=(()=>{class e{constructor(e){this.colorRecipe=e}}return e.type="[Edit Paint] Set Color Recipe",e})(),a=(()=>{class e{constructor(e){this.brushMode=e}}return e.type="[Edit Paint] Set Paint Brush Mode",e})(),s=(()=>{class e{constructor(){}}return e.type="[Edit Paint] Clear Current Recipe",e})(),o=(()=>{class e{constructor(){}}return e.type="[Edit Paint] Reset Paint",e})(),r=(()=>{class e{constructor(e){this.recipe=e}}return e.type="[Edit Paint] Add Recent Recipe",e})(),c=(()=>{class e{constructor(e){this.recipes=e}}return e.type="[Edit Paint] Set Recent Recipes",e})(),l=(()=>{class e{constructor(){}}return e.type="[Edit Paint] Reset Story Recipes",e})(),p=(()=>{class e{constructor(e,t){this.chapterId=e,this.recipes=t}}return e.type="[Edit Paint] Set Story Recipes For Chapter",e})(),u=(()=>{class e{constructor(e){this.palette=e}}return e.type="[Edit Paint] Add Palette",e})(),d=(()=>{class e{constructor(e){this.paletteId=e}}return e.type="[Edit Paint] Remove Palette",e})(),g=(()=>{class e{constructor(e){this.palette=e}}return e.type="[Edit Paint] Update Palette",e})(),h=(()=>{class e{constructor(e){this.palettes=e}}return e.type="[Edit Paint] Set Palettes",e})(),b=(()=>{class e{constructor(e,t){this.recipe=e,this.paletteId=t}}return e.type="[Edit Paint] Add Recipe to Palette",e})(),m=(()=>{class e{constructor(e,t){this.paletteId=e,this.open=t}}return e.type="[Edit Paint] Toggle Palette",e})()},"8mU5":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=function(e){return e.Facebook="facebook",e.LinkedIn="linkedin",e.Twitter="twitter",e}({}),a=n("CSvP"),s=function(e){return e.Model="model",e.Quiz="quiz",e}({}),o=n("fXoL"),r=n("tk/3");let c=(()=>{class e{constructor(e,t){this.http=e,this.APP_BASE_URL=t}shareEmailLink(e){return this.http.post("/ws/user/share/email",e)}generateShareLink(e,t="en"){const n=e.thumbnail_url.replace("/small/","/large/");return{type:e.quiz?s.Quiz:s.Model,title:e.title,relativeUrl:this.createShareUrl(e,"share",t,!1,!1),fullUrl:this.createShareUrl(e,"share",t,!0,!1),thumbUrl:n,social:[{type:i.Facebook,url:"https://www.facebook.com/sharer/sharer.php?u="+this.createShareUrl(e,i.Facebook,t,!0,!0)},{type:i.LinkedIn,url:"https://www.linkedin.com/sharing/share-offsite/?url="+this.createShareUrl(e,i.LinkedIn,t,!0,!0)},{type:i.Twitter,url:"http://twitter.com/share?url="+this.createShareUrl(e,i.Twitter,t,!0,!0)}]}}createShareUrl(e,t,n,a,s){const o=e.id.replace(".json",""),r=Object.values(i).includes(t),c=`/view?id=${o}&lang=${n}&ref=${t}`,l=a||r?`${r?"https://human.biodigital.com":this.APP_BASE_URL}${c}`:c;return s?encodeURIComponent(l):l}}return e.\u0275fac=function(t){return new(t||e)(o.Zb(r.b),o.Zb(a.a))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"8pBO":function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return h}));var i=n("LvDl"),a=n("WoAB"),s=n("VKIe");const o=[a.a.ViewBookmarks,a.a.CopyUrl,a.a.SavePrivateBookmarks,a.a.ExportCSV],r=[...o,a.a.InviteUsers,a.a.PublishBookmarks,a.a.EditBookmarks,a.a.EditTeamBookmarks,a.a.RemoveTeamBookmarks,a.a.AddTeamBookmarks,a.a.DuplicateTeamBookmarks],c=[...r,a.a.InviteUsers,a.a.EditTeamAccount,a.a.EditAllTeamBookmarks,a.a.CreateCollection,a.a.TransferContent,a.a.RemoveUser,a.a.AssignRole],l=[s.a.Viewer,s.a.Creator,s.a.Admin],p={role_id:void 0,role_name:s.a.Creator,role_display_name:"",role_description:"",permissions:[...r]},u={[s.a.Viewer]:o,[s.a.Creator]:r,[s.a.Admin]:c},d={[s.a.Viewer]:"Can view team content and edit personal content",[s.a.Creator]:"Can edit and view team content",[s.a.Admin]:"Can manage team settings and edit all content"};function g(e){const t=Object(i.get)(e,"role_name",p.role_name),n=Object(i.get)(e,"role_description",d[t]),a=Object(i.get)(e,"permissions",void 0);return Object.assign(Object.assign({},e),{role_description:n,permissions:Object(i.isNil)(a)?(s=t,u[s]||[]):a});var s}function h(e,t){return l.indexOf(e)-l.indexOf(t)}},"8qIY":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.All="all",e.iOS="ios",e.Android="android",e}({})},"937/":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("R6Q1"),a=n("dMmY"),s=n("HDdC"),o=n("IOcx"),r=n("fXoL");let c=(()=>{class e{constructor(e){this.numberService=e,this.rotation={vx:0,vy:0},this.pan={x:0,y:0,z:0},this.zoom=0}getEye(){return Human.renderer.camera.eye}setEye(e){Human.renderer.camera.setLookAt({eye:e})}getCamera(){return Human.renderer.camera.getLookAt()}getLookDirection(){const e=o.a.create();return Human.renderer.camera.getLookDir(e),e}setCamera(e){return Human.renderer.camera.setLookAt(e)}getCameraZoom(){return Human.renderer.camera.getZoom()}captureCamera(){return{lookAt:Human.renderer.camera.getLookAt(),zoom:Human.renderer.camera.getZoom()}}resetCamera(){return new s.a(e=>{Human.init.resetCamera(()=>{e.next(),e.complete()})})}getDirection(e){const t=this.getEye(),n=o.a.create();return n[0]=t.x-e.worldPos[0],n[1]=t.y-e.worldPos[1],n[2]=t.z-e.worldPos[2],o.a.normalize(n,n),n}rotateCameraStatic(e,t){Human.renderer.camera.rotateX(e),Human.renderer.camera.rotateY(t)}panCameraStatic(e,t,n){Human.renderer.camera.pan({x:e,y:t,z:n})}setHumanZoom(e){Human.renderer.camera.zoom(e)}setHumanZoomFactor(e){Human.renderer.camera.setZoom(e)}getCameraRotationCenter(){return i.a.fromArray(Human.renderer.camera.rotationCenter)}setCameraRotationCenter(e){Human.renderer.camera.setRotationCenter(...i.a.toArray(e))}setCameraRotation(e,t){this.rotation.vx=t,this.rotation.vy=-e}setCameraPan(e,t){this.pan.x=e,this.pan.y=t}setCameraZoom(e){this.zoom=.03*e}setCameraZoomWithVelocity(e){this.setCameraZoom(e),requestAnimationFrame(()=>{e*=.85,Math.abs(e)>1&&this.setCameraZoomWithVelocity(e)})}tickCameraRotation(){return this.rotation.vx=this.checkEpsilon(this.rotation.vx),this.rotation.vy=this.checkEpsilon(this.rotation.vy),this.rotation}tickCameraPan(){return this.pan.x=this.checkEpsilon(this.pan.x),this.pan.y=this.checkEpsilon(this.pan.y),this.pan.z=this.checkEpsilon(this.pan.z),this.pan}tickCameraZoom(){return this.zoom=this.checkEpsilon(this.zoom),this.zoom}areCamerasEqual(e,t){return this.compareXYZ(e.eye,t.eye)&&this.compareXYZ(e.look,t.look)&&this.compareXYZ(e.up,t.up)}compareXYZ(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}roundCamera(e,t){const{eye:n,look:i,up:a}=e;return{eye:this.numberService.roundModel(n,t),look:this.numberService.roundModel(i,t),up:this.numberService.roundModel(a,t)}}cameraAfterFlyTo(e){const t=this.getCamera(),n=i.a.toArray(t.look),a=i.a.toArray(t.eye),s=o.a.create();o.a.subtract(s,a,n);const r=o.a.create();o.a.normalize(r,s);const c=Math.abs(o.a.length(r)),l=Human.math.getBoundaryDiag(e),p=Math.abs(l/1.8/Math.tan(27.5))/c*2.5,u=Human.math.getBoundaryCenter(e);o.a.scale(s,r,p);const d=o.a.add(o.a.create(),u,s);return{eye:i.a.fromArray(d),look:i.a.fromArray(u),up:{x:0,y:1,z:0}}}setChapterCameraEnabled(e){this.initCamera||(this.initCamera=Human.timeline.BranchTimeline.prototype.initCamera),Human.timeline.BranchTimeline.prototype.initCamera=e?this.initCamera:()=>{}}checkEpsilon(e){return Math.abs(e)<.001?0:e}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(a.a))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"9AAO":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("fXoL"),a=n("ofXK"),s=n("0njA");function o(e,t){if(1&e&&i.Qb(0,"app-icon",5),2&e){const e=i.gc();i.mc("icon",e.icon)}}function r(e,t){if(1&e&&i.Qb(0,"span",6),2&e){const e=i.gc();i.Kc("background-image","url("+e.src+")")}}function c(e,t){if(1&e&&(i.Vb(0,"span",7),i.Pc(1),i.Ub()),2&e){const e=i.gc();i.Db(1),i.Rc(" ",e.label," ")}}const l=function(e,t,n,i,a,s,o,r,c,l,p,u,d,g,h,b,m){return{"pin-button--selected":e,"pin-button--disabled":t,"pin-button--small":n,"pin-button--medium":i,"pin-button--large":a,"pin-button--ghost":s,"pin-button--primary":o,"pin-button--secondary":r,"pin-button--outline":c,"pin-button--floating":l,"pin-button--dark":p,"pin-button--row":u,"pin-button--circle":d,"pin-button--square":g,"pin-button--rounded":h,"pin-button--fill":b,"pin-button--left":m}},p=["*"];var u=function(e){return e.Circle="circle",e.Rounded="rounded",e.Square="square",e}({}),d=function(e){return e.Left="left",e.Center="center",e}({});let g=(()=>{class e{constructor(e){this.elRef=e,this.selectable=!1,this.size="medium",this.buttonType="default",this.buttonShape=u.Circle,this.buttonAlign=d.Center,this.direction="column",this.fill=!1,this._selected=!1,this.disabled=!1,this.selectedChange=new i.p}get selected(){return this._selected}set selected(e){this._selected=e,this.selectedChange=new i.p}ngOnInit(){}handleClick(){this.disabled||this.selectable&&(this.selected=!this.selected)}focus(e){this.elRef&&this.elRef.nativeElement.focus()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.m))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-pin-button"],["button","app-pin-button",""]],inputs:{icon:"icon",src:"src",description:"description",label:"label",selectable:"selectable",size:"size",buttonType:"buttonType",buttonShape:"buttonShape",buttonAlign:"buttonAlign",direction:"direction",fill:"fill",selected:"selected",disabled:"disabled"},outputs:{selectedChange:"selectedChange"},ngContentSelectors:p,decls:6,vars:22,consts:[[1,"pin-button",3,"ngClass","click"],[1,"pin-button__pin"],["style","font-size: 14px !important",3,"icon",4,"ngIf"],["class","pin-button__image",3,"backgroundImage",4,"ngIf"],["class","pin-button__label",4,"ngIf"],[2,"font-size","14px !important",3,"icon"],[1,"pin-button__image"],[1,"pin-button__label"]],template:function(e,t){1&e&&(i.lc(),i.Vb(0,"span",0),i.cc("click",(function(){return t.handleClick()})),i.Vb(1,"span",1),i.Nc(2,o,1,1,"app-icon",2),i.Nc(3,r,1,2,"span",3),i.kc(4),i.Ub(),i.Nc(5,c,2,1,"span",4),i.Ub()),2&e&&(i.mc("ngClass",i.wc(4,l,[t.selected,t.disabled,"small"===t.size,"medium"===t.size,"large"===t.size,"ghost"===t.buttonType,"primary"===t.buttonType,"secondary"===t.buttonType,"outline"===t.buttonType,"floating"===t.buttonType,"dark"===t.buttonType,"row"===t.direction,"circle"==t.buttonShape,"square"==t.buttonShape,"rounded"==t.buttonShape,t.fill,"left"===t.buttonAlign])),i.Db(2),i.mc("ngIf",t.icon),i.Db(1),i.mc("ngIf",t.src),i.Db(2),i.mc("ngIf",t.label))},directives:[a.m,a.p,s.a],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}button[app-pin-button]{border-color:transparent;background:none;border-width:0;padding:0;outline:none;margin:0;pointer-events:all}button[app-pin-button]::-moz-focus-inner{border:0}button[app-pin-button]:not([disabled]):hover{cursor:pointer}button[app-pin-button]:focus .pin-button__pin{outline:2px solid #fff;outline-offset:-4px}button[app-pin-button]:focus :not(.pin-button--selected) .pin-button__pin{outline:2px solid #2d72dc!important;outline-offset:-2px}button[app-pin-button]:focus :not(.pin-button--selected).pin-button--dark .pin-button__pin{background-color:#61779e!important}button[app-pin-button]:focus .pin-button--secondary .pin-button__pin{outline:2px solid #fff;outline-offset:-4px}button[app-pin-button][disabled]{pointer-events:none}.pin-button{display:inline-flex;flex-flow:column;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.pin-button:hover{cursor:pointer}.pin-button:hover:not(.pin-button--selected):not(.pin-button--disabled) .pin-button__pin{background:rgba(215,224,234,.6)}.pin-button:not(.pin-button--selected):active:hover .pin-button__pin{background:#d7e0ea}.pin-button--selected .pin-button__pin{background-color:#2d72dc;color:#fff}.pin-button--selected .pin-button__label{color:#2d72dc;font-weight:600}.pin-button--small .pin-button__pin{border-radius:14px;min-width:28px;height:28px}.pin-button--small .pin-button__label{margin-top:0}.pin-button--large .pin-button__pin{font-size:20px;letter-spacing:.5px;line-height:1.4em}.pin-button--left .pin-button__pin{justify-content:flex-start}.pin-button--row{flex-direction:row}.pin-button--row .pin-button__label{margin:0 0 0 4px}.pin-button--ghost:not(.pin-button--selected) .pin-button__pin{background:transparent}.pin-button--outline:not(.pin-button--selected) .pin-button__pin{background:transparent;border:1px solid #96a8c0}.pin-button--primary .pin-button__pin{background:#de3535;color:#fff}.pin-button--primary:not(.pin-button--selected):not(.pin-button--disabled) .pin-button__pin{background:#de3535!important;color:#fff}.pin-button--primary:not(.pin-button--selected):not(.pin-button--disabled):hover .pin-button__pin{background:#e24b4b}.pin-button--secondary .pin-button__pin,.pin-button--secondary:not(.pin-button--selected):not(.pin-button--disabled) .pin-button__pin{background:#2d72dc;color:#fff}.pin-button--secondary:not(.pin-button--selected):not(.pin-button--disabled):hover .pin-button__pin{background:#4381e0}.pin-button--disabled{opacity:.2}.pin-button--disabled:hover{cursor:auto}.pin-button--fill,.pin-button--fill .pin-button__pin{width:100%;height:100%}.pin-button--floating .pin-button__pin{background-color:#fff;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3)}.pin-button--dark .pin-button__pin{color:#f9fafd;background-color:#1c2a3f!important;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3)}.pin-button--square .pin-button__pin{border-radius:4px}.pin-button--circle .pin-button__pin{border-radius:50%}.pin-button--rounded .pin-button__pin,.pin-button__pin{border-radius:20px}.pin-button__pin{--pin-button-pin-color:#1c2a3f;display:flex;font-size:12px;float:left;min-width:40px;height:40px;align-items:center;justify-content:center;position:relative;background-color:#eaeff5;color:#1c2a3f;color:var(--pin-button-pin-color);transition:background-color 125ms}.pin-button__label{font-size:10px;letter-spacing:.25px;line-height:1.4em;color:#1c2a3f;padding:2px 0 4px}.pin-button__image{width:100%;height:100%;background-size:50%;background-repeat:no-repeat;background-position:50%}"],encapsulation:2,changeDetection:0}),e})()},"9U6C":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.WoltersKluwer="wolters_kluwer",e}({})},"9Xeq":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),a=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})()},"A+8E":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Alphabetical="alphabetical",e.Numerical="numerical",e}({})},AIoM:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n("ofXK"),a=n("AcyG"),s=n("PUI9"),o=n("fP/T"),r=n("YLgZ"),c=n("PCNd"),l=n("vvyD"),p=n("3Pt+"),u=n("GMXD"),d=n("aKmd"),g=n("k93M"),h=n("yGOH"),b=n("rGz1"),m=n("Wdmj"),f=n("fXoL");let y=(()=>{class e{}return e.\u0275mod=f.Nb({type:e}),e.\u0275inj=f.Mb({factory:function(t){return new(t||e)},imports:[[a.d.forFeature([s.a,r.a,u.a,g.a,b.a]),m.d,i.c,h.a,l.a,p.l,o.a,c.a,d.a]]}),e})()},AbMW:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("cQmI");function a(e){const{id:t,type:n}=e;if("module"===n&&(e.id=function(e){return e.replace("Condition.content.","").replace(".json","").split(".").join("/")}(t)),e.tour=e.tags.includes("tour"),e.animated=e.tags.includes("animated"),e.quiz=e.tags.includes("quiz"),e.lowDefinition=e.tags.includes("low definition"),!e.viewMode){const t=Object.values(i.a).find(t=>e.tags.includes(t));e.viewMode=null!=t?t:i.a.All}return e}},Assa:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e={center:[0,0,0],edge:[1,1,1],centerBias:1,edgeBias:0,power:1}){const{edge:t,center:n,centerBias:i,edgeBias:a,power:s}=e;this.edge=t,this.center=n,this.centerBias=i,this.edgeBias=a,this.power=s}static toEngine(e){const{center:t,edge:n,centerBias:i,edgeBias:a,power:s}=e;return[[...t],[...n],i,a,s]}}},AytR:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("p345"),a=n("ZR5G"),s=n("wSC8"),o=n("f3gM");const r={production:!0,assetDomain:"assets-human.biodigital.com",supportEmail:"support@biodigital.com",productKey:"ma_qXLcFIrsaG",googleAuthKey:"66261904577-061oin26uo7sor0vrqc8dnn105irq82n.apps.googleusercontent.com",googleAnalyticsId:"UA-1141985-30",linkedinId:"2641938",pendoId:"3a783681-e53b-4ebd-69c0-788bbae48f13",recaptchaKey:"6LdvZvcUAAAAAM0Z1St9WQXwvSYd__hMUY2WZ6um",application:i.a.Studio,deploy:s.a.Production,platform:o.a.Web,exportType:a.a.Bookmark,offline:!1,native:!0,minPasswordLength:8}},C1bs:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("RX1/");class a extends i.a{constructor(e){super(),this.token=e}static toJSON(e){return{id_token:e.token,version:e.version,app_producttype:e.app_producttype,app_productkey:e.app_productkey,group_invite_mode:e.groupInviteMode,group_invite_key:e.groupInviteKey,group_code_mode:e.groupCodeMode,group_code:e.groupCode,group_ovid_mode:e.groupOvidMode,group_ovid_osptok:e.groupOvidOsptok,platform:e.platform,return_to:e.returnTo,brand_id:e.brandId,locale_id:e.localeId,timestamp:e.timestamp,site_verify_response:e.site_verify_response}}}},C6D4:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),a=(n("vXdC"),n("/EfZ"));n.d(t,"b",(function(){return a.a}));var s=n("fXoL");let o=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:t,useClass:t},{provide:a.a,useClass:a.a,deps:[t]}]}}}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})()},CAXj:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{}},CL6y:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return l}));var i=n("ofXK"),a=n("OnMO"),s=n("lR5k"),o=n("fXoL");const r=["strong","sub","sup"];function c(){const e=new a.Renderer;return e.link=(e,t,n)=>{var i;return`<a href="${(i=e).match(/^(?:(?:(?:ht)tps?):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i)?i:""}" target="_blank" rel="noreferrer nofollow">${n}</a>`},e.paragraph=e=>`<p>${e}</p>`,e.image=(e,t,n)=>"",{renderer:e,gfm:!1}}let l=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,s.a.forRoot({markedOptions:{provide:s.d,useFactory:c}})]]}),e})()},CSvP:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u}));var i=n("fXoL"),a=n("ofXK"),s=n("AytR"),o=n("wSC8");const r=new i.s(""),c=new i.s(""),l=s.a.deploy===o.a.Production?"https://human.biodigital.com":window.location.origin,p=s.a.deploy===o.a.Local?"https://localhost:4202":l+"/viewer";let u=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},providers:[{provide:r,useValue:l},{provide:c,useValue:p}],imports:[[a.c]]}),e})()},CpGW:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("AcyG"),a=n("ZDoJ");class s{}var o=n("G0Z9"),r=n("mmXA"),c=n("r/EZ"),l=n("fXoL"),p=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const d={theme:o.a.Light,sidenav:{enabled:!0,open:!1},siteHeader:r.a.Application,siteFooter:c.a.None};let g=(()=>{let e=class{static getTheme(e){return e.theme}static getSidenav(e){return e.sidenav}static getSiteHeader(e){return e.siteHeader}static getSiteFooter(e){return e.siteFooter}setTheme({patchState:e},{theme:t}){e({theme:t})}setHeader(e,t){e.patchState({siteHeader:t.siteHeaderType})}setFooter(e,t){e.patchState({siteFooter:t.siteFooterType})}setSidenav(e,t){e.patchState({sidenav:Object.assign({},t.sidenav)})}toggleSidenav(e,t){const n=e.getState().sidenav;e.patchState({sidenav:Object.assign(Object.assign({},n),{open:t.open})})}resetLayout(e,t){e.setState(d)}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Lb({token:e,factory:e.\u0275fac}),p([Object(i.a)(a.a.SetTheme),u("design:type",Function),u("design:paramtypes",[Object,a.a.SetTheme]),u("design:returntype",void 0)],e.prototype,"setTheme",null),p([Object(i.a)(a.a.SetHeader),u("design:type",Function),u("design:paramtypes",[Object,a.a.SetHeader]),u("design:returntype",void 0)],e.prototype,"setHeader",null),p([Object(i.a)(a.a.SetFooter),u("design:type",Function),u("design:paramtypes",[Object,a.a.SetFooter]),u("design:returntype",void 0)],e.prototype,"setFooter",null),p([Object(i.a)(a.a.SetSidenav),u("design:type",Function),u("design:paramtypes",[Object,a.a.SetSidenav]),u("design:returntype",void 0)],e.prototype,"setSidenav",null),p([Object(i.a)(a.a.ToggleSidenav),u("design:type",Function),u("design:paramtypes",[Object,a.a.ToggleSidenav]),u("design:returntype",void 0)],e.prototype,"toggleSidenav",null),p([Object(i.a)(a.a.ResetLayout),u("design:type",Function),u("design:paramtypes",[Object,a.a.ResetLayout]),u("design:returntype",void 0)],e.prototype,"resetLayout",null),p([Object(i.f)(),u("design:type",Function),u("design:paramtypes",[s]),u("design:returntype",void 0)],e,"getTheme",null),p([Object(i.f)(),u("design:type",Function),u("design:paramtypes",[s]),u("design:returntype",void 0)],e,"getSidenav",null),p([Object(i.f)(),u("design:type",Function),u("design:paramtypes",[s]),u("design:returntype",void 0)],e,"getSiteHeader",null),p([Object(i.f)(),u("design:type",Function),u("design:paramtypes",[s]),u("design:returntype",void 0)],e,"getSiteFooter",null),e=p([Object(i.g)({name:"layout",defaults:d})],e),e})()},D8yp:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("ofXK"),a=n("1y1q"),s=n("PCNd"),o=n("oH02"),r=n("vvyD"),c=n("bv9b"),l=n("fXoL");let p=(()=>{class e{}return e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({factory:function(t){return new(t||e)},imports:[[i.c,s.a,r.a,c.b,o.a,a.c]]}),e})()},DTUA:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u}));var i=n("Texg");class a extends i.a{constructor(){super("HumanDatabase"),this.version(2).stores({keyValue:",value",analytics:"message"}),this.open(),this.keyValue=this.table("keyValue"),this.analytics=this.table("analytics")}}var s=n("fXoL"),o=function(e,t,n,i){return new(n||(n=Promise))((function(a,s){function o(e){try{c(i.next(e))}catch(t){s(t)}}function r(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}c((i=i.apply(e,t||[])).next())}))},r=function(e){return e.WidgetOptions="widgetOptions",e.SnapshotOptions="snapshotOptions",e.Locale="locale",e.GroupRestriction="GroupRestriction",e.UserAppId="userAppId",e.RememberMeEmail="rememberMeEmail",e.LabelConversionSeen="labelConversionSeen",e.DefaultGroupEdit="defaultGroupEdit",e.DefaultCollectionId="defaultCollectionId",e.InternetExplorerWarning="internetExplorerWarning",e.GettingStartedTutorial="gettingStartedTutorial",e.AutoCapture="autoCapture",e.SystemMessage="systemMessage",e.ExploreRedesignMessage="exploreRedesignMessage",e.Iphone12Warning="iphone12Warning",e.RecentRecipes="recentRecipes",e.TeamTrialExpirationSeen="teamTrialExpiredSeen",e.ProExpirationSeen="proExpirationSeen",e.PaintPalettes="paintPalettes",e.RecentSearchConfig="recentSearchConfig",e.CameraDebug="cameraDebug",e}({}),c=function(e){return e.UserMessagesSeen="userMessagesSeen",e.PreviewSize="previewSize",e}({}),l=function(e){return e.PreviewStory="previewStory",e.PreviewBookmark="previewBookmark",e}({});class p{constructor(){this._data={}}get keys(){return Object.keys(this._data)}get length(){return this.keys.length}clear(){this._data={}}getItem(e){return this._data[e]}key(e){return this.keys[e]}removeItem(e){delete this._data[e]}setItem(e,t){this._data[e]=t}}let u=(()=>{class e{constructor(){this._localStorage=this.getStorage("localStorage"),this._sessionStorage=this.getStorage("sessionStorage"),this._indexedStorage=new a}getLocalItem(e){return this._localStorage.getItem(""+e)}getLocalJSON(e){const t=this.getLocalItem(e);return t?JSON.parse(t):null}setLocalItem(e,t){const n="object"==typeof t?JSON.stringify(t):""+t;try{return this._localStorage.setItem(""+e,n),!0}catch(i){return!1}}removeLocalItem(e){this._localStorage.removeItem(""+e)}getSessionItem(e){const t=this._sessionStorage.getItem(""+e);return t?JSON.parse(t):null}setSessionItem(e,t){const n=JSON.stringify(t);try{return this._sessionStorage.setItem(""+e,n),!0}catch(i){return!1}}removeSessionItem(e){this._sessionStorage.removeItem(""+e)}setDatabaseItem(e,t){return this._indexedStorage.keyValue.put(t,e)}setDatabaseAnalyticItem(e){(()=>{o(this,void 0,void 0,(function*(){yield this._indexedStorage.analytics.add({message:e})}))})()}getDatabaseOfflineAnalytics(e){(()=>{o(this,void 0,void 0,(function*(){const t=(yield this._indexedStorage.analytics.toArray()).map(e=>e.message);this._indexedStorage.analytics.clear(),e(t)}))})()}getDatabaseOfflineAnalyticsCount(e){(()=>{o(this,void 0,void 0,(function*(){const t=yield this._indexedStorage.analytics.toArray();e(t.length)}))})()}getDatabaseItem(e){return this._indexedStorage.keyValue.get(e)}clearStorage(){this.clearLocalStorage(),this.clearSessionStorage()}clearLocalStorage(){this._localStorage.clear()}clearSessionStorage(){this._sessionStorage.clear()}getStorage(e){try{return window[e]||new p}catch(t){return new p}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},DuGl:function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var i=n("fXoL"),a=n("3Pt+"),s=n("AcyG"),o=n("XNiG"),r=n("HDdC"),c=n("pLZG"),l=n("1G5W"),p=n("8pBO"),u=n("Kn5L"),d=n("ECVi"),g=n("ZULQ"),h=n("kR+W"),b=n("lMGN"),m=n("+DiI"),f=n("Es8U"),y=n("ofXK"),v=n("zP1m"),O=n("Y8QC"),S=n("kmnG"),x=n("IlST"),C=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},w=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function j(e,t){if(1&e&&(i.Vb(0,"div",7),i.Vb(1,"app-message-toggle",8),i.Pc(2),i.Ub(),i.Ub()),2&e){const e=i.gc(2);i.Db(2),i.Rc(" ",e.sentResponses.length," invite(s) have been sent. Please allow up to a few minutes for invitees to receive their invitations. ")}}function k(e,t){if(1&e&&(i.Tb(0),i.Nc(1,j,3,1,"div",6),i.Sb()),2&e){const e=i.gc();i.Db(1),i.mc("ngIf",e.sentResponses.length>0)}}function P(e,t){if(1&e&&(i.Vb(0,"div"),i.Pc(1),i.Ub()),2&e){const e=t.$implicit;i.Db(1),i.Rc(" ",e," ")}}function _(e,t){if(1&e&&(i.Vb(0,"div",16),i.Vb(1,"app-message-toggle",17),i.Vb(2,"div"),i.Pc(3),i.Ub(),i.Nc(4,P,2,1,"div",18),i.Ub(),i.Ub()),2&e){const e=i.gc(3);i.Db(3),i.Rc("There was an error sending ",e.errorResponses.length," invite(s)."),i.Db(1),i.mc("ngForOf",e.formatResponses(e.errorResponses))}}function M(e,t){if(1&e&&(i.Vb(0,"div",16),i.Vb(1,"app-message-toggle",17),i.Pc(2),i.Ub(),i.Ub()),2&e){const e=i.gc(3);i.Db(2),i.Rc(" ",e.errorMessage," ")}}function I(e,t){if(1&e&&(i.Vb(0,"div",19),i.Vb(1,"mat-error"),i.Pc(2),i.Ub(),i.Ub()),2&e){const e=i.gc().$implicit,t=i.gc(2);i.Db(2),i.Sc(" Please limit your entry to ",t.maxEmailCount,". Current count: ",null==e.errors?null:e.errors.currentEmailCount,". ")}}function T(e,t){if(1&e&&(i.Vb(0,"div",19),i.Vb(1,"mat-error"),i.Pc(2),i.Ub(),i.Ub()),2&e){const e=i.gc().$implicit,t=i.gc(2);i.Db(2),i.Sc(" ",t.formatEmails(null==e.errors?null:e.errors.invalidEmails)," ",1===e.errors.invalidEmails.length?"is not a valid email address.":"are not valid email addresses."," ")}}function U(e,t){if(1&e&&(i.Vb(0,"option",24),i.Pc(1),i.Ub()),2&e){const e=t.$implicit;i.mc("value",e.role_id),i.Db(1),i.Rc(" ",e.role_display_name," ")}}function L(e,t){1&e&&(i.Vb(0,"div",19),i.Vb(1,"mat-error"),i.Pc(2," Please select a valid role. "),i.Ub(),i.Ub())}function z(e,t){if(1&e&&(i.Vb(0,"app-form-field",20),i.Vb(1,"select",21),i.Vb(2,"option",22),i.Pc(3,"--"),i.Ub(),i.Nc(4,U,2,2,"option",23),i.Ub(),i.Nc(5,L,3,0,"div",14),i.Ub()),2&e){const e=t.$implicit,n=i.gc(3);i.Db(4),i.mc("ngForOf",n.availableRoles),i.Db(1),i.mc("ngIf",e.touched&&e.invalid)}}function A(e,t){if(1&e&&(i.Tb(0,10),i.Nc(1,_,5,2,"div",11),i.Nc(2,M,3,1,"div",11),i.Vb(3,"app-form-field",12),i.Vb(4,"textarea",13),i.Pc(5,"          "),i.Ub(),i.Nc(6,I,3,2,"div",14),i.Nc(7,T,3,2,"div",14),i.Ub(),i.Nc(8,z,6,2,"app-form-field",15),i.Sb()),2&e){const e=t.$implicit,n=i.gc(2);i.mc("formGroup",n.form),i.Db(1),i.mc("ngIf",n.errorResponses.length>0),i.Db(1),i.mc("ngIf",n.errorMessage),i.Db(2),i.mc("placeholder","Enter up to "+n.maxEmailCount+" email addresses separated by commas"),i.Db(2),i.mc("ngIf",null==e.errors?null:e.errors.maxEmailsExceeded),i.Db(1),i.mc("ngIf",null==e.errors?null:e.errors.invalidEmails),i.Db(1),i.mc("ngIf",n.form.get("roleId"))}}function F(e,t){if(1&e&&i.Nc(0,A,9,7,"ng-container",9),2&e){const e=i.gc();i.mc("ngIf",e.form.get("emails"))}}function D(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",29),i.cc("click",(function(){return i.Cc(e),i.gc(2).handleCancelClick()})),i.Pc(1),i.Ub()}if(2&e){const e=i.gc(2);i.mc("uppercase","inline"===e.layout),i.Db(1),i.Rc(" ",e.cancelText," ")}}function E(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",30),i.cc("click",(function(){return i.Cc(e),i.gc(2).handleInviteClick()})),i.hc(1,"async"),i.Pc(2),i.Ub()}if(2&e){const e=i.gc(2);i.mc("uppercase","inline"===e.layout)("disabled",e.form.invalid||i.ic(1,3,e.inviting$)),i.Db(2),i.Rc(" ",e.errorResponses.length>0?"Try Again":e.sendText," ")}}function N(e,t){1&e&&i.Rb(0)}function R(e,t){1&e&&i.Rb(0)}function V(e,t){if(1&e&&(i.Tb(0),i.Nc(1,N,1,0,"ng-container",31),i.Nc(2,R,1,0,"ng-container",31),i.Sb()),2&e){i.gc();const e=i.yc(3),t=i.yc(5);i.Db(1),i.mc("ngTemplateOutlet",e),i.Db(1),i.mc("ngTemplateOutlet",t)}}function B(e,t){1&e&&i.Rb(0)}function H(e,t){1&e&&i.Rb(0)}function Q(e,t){if(1&e&&(i.Nc(0,B,1,0,"ng-container",31),i.Nc(1,H,1,0,"ng-container",31)),2&e){i.gc();const e=i.yc(5),t=i.yc(3);i.mc("ngTemplateOutlet",e),i.Db(1),i.mc("ngTemplateOutlet",t)}}function G(e,t){if(1&e&&(i.Vb(0,"div"),i.Vb(1,"div",25),i.Nc(2,D,2,2,"ng-template",null,26,i.Oc),i.Nc(4,E,3,5,"ng-template",null,27,i.Oc),i.Nc(6,V,3,2,"ng-container",2),i.Nc(7,Q,2,2,"ng-template",null,28,i.Oc),i.Ub(),i.Ub()),2&e){const e=i.yc(8),t=i.gc();i.Db(6),i.mc("ngIf","inline"===t.layout)("ngIfElse",e)}}const W=["*"];let q=(()=>{class e{constructor(e,t,n,a){this.store=e,this.actions=t,this.formBuilder=n,this.changeRef=a,this.maxEmailCount=50,this.availableRoles=[],this.layout="inline",this.enableActions=!0,this.sendText="Send invites",this.cancelText="Cancel",this.inviteSent=new i.p,this.inviteCancelled=new i.p,this.ngUnsubscribe=new o.a,this.sent=!1,this.sentResponses=[],this.errorResponses=[]}get valid(){return this.form.valid}ngOnInit(){this.initForm(),this.initInviteListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.store.dispatch(new u.x),this.currentUserRole=this.store.selectSnapshot(d.a.getUserRole),this.userRoles$.pipe(Object(c.a)(e=>e.length>0),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.availableRoles=e.filter(e=>p.d.indexOf(e.role_name)<=p.d.indexOf(this.currentUserRole.role_name)),this.changeRef.markForCheck()}),this.form=this.formBuilder.group({emails:["",a.C.required,Object(m.a)(this.maxEmailCount).bind(this)],roleId:["",a.C.required]})}initInviteListeners(){this.actions.pipe(Object(s.l)(h.q),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.resetState(),this.changeRef.markForCheck()}),this.actions.pipe(Object(s.l)(h.s),Object(l.a)(this.ngUnsubscribe)).subscribe(({responses:e})=>{this.resetState(),this.sentResponses=e.filter(e=>"success"===e.status),this.errorResponses=e.filter(e=>"error"===e.status),this.sent=0===this.errorResponses.length,this.sent&&this.inviteSent.next(e),this.changeRef.markForCheck()}),this.actions.pipe(Object(s.l)(h.r,u.sb),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.resetState(),this.errorMessage=Object(f.a)(e.error)||"There was an error sending the invites, please try again.",this.changeRef.markForCheck()})}handleCancelClick(){this.inviteCancelled.next()}backToFormClick(){this.resetState(),this.changeRef.markForCheck()}handleInviteClick(){const{eid:e}=this.organization,t=g.a.parseEmails(this.form.value.emails).map(e=>({user_email:e,role_id:parseInt(this.form.value.roleId,10)}));this.store.dispatch(new h.q(e,t))}formatEmails(e){return e.join(", ")}formatResponses(e){const t=e.map(e=>e.reason);return[...new Set([...t])].map(t=>{const n=e.filter(e=>e.reason===t).map(e=>e.email),i=this.formatEmails(n);return`"${t}": ${i}`})}resetState(){this.sent=!1,this.sentResponses=[],this.errorResponses=[],this.errorMessage=""}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(s.h),i.Pb(s.b),i.Pb(a.f),i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-team-invite"]],inputs:{organization:"organization",layout:"layout",enableActions:"enableActions",sendText:"sendText",cancelText:"cancelText"},outputs:{inviteSent:"inviteSent",inviteCancelled:"inviteCancelled"},ngContentSelectors:W,decls:8,vars:7,consts:[[1,"invite"],[1,"theme-light"],[4,"ngIf","ngIfElse"],["sendFormTmp",""],[4,"ngIf"],[1,"invite__footer"],["class","mv-1",4,"ngIf"],[1,"mv-1"],["data-test","teamInviteSuccess","type","message"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["class","mb-4",4,"ngIf"],["theme","light","label","Invite via email"],["formControlName","emails","data-test","teamInviteEmails","rows","8",1,"invite__input","input",3,"placeholder"],["class","mt-1",4,"ngIf"],["theme","light","label","Role",4,"ngIf"],[1,"mb-4"],["type","error"],[4,"ngFor","ngForOf"],[1,"mt-1"],["theme","light","label","Role"],["formControlName","roleId",1,"input"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"invite__buttons"],["cancelBtnTmp",""],["sendBtnTmp",""],["blockBtnTmp",""],["app-button","","buttonSize","large","buttonTheme","light","buttonType","default","data-test","skipInvitesButton",1,"invite__button",3,"uppercase","click"],["app-button","","buttonSize","large","buttonType","primary","data-test","sendInvitesButton",1,"invite__button",3,"uppercase","disabled","click"],[4,"ngTemplateOutlet"]],template:function(e,t){if(1&e&&(i.lc(),i.Vb(0,"div",0),i.Vb(1,"div",1),i.Nc(2,k,2,1,"ng-container",2),i.Nc(3,F,1,1,"ng-template",null,3,i.Oc),i.Ub(),i.Nc(5,G,9,2,"div",4),i.Vb(6,"div",5),i.kc(7,0,["[select]","invite - footer"]),i.Ub(),i.Ub()),2&e){const e=i.yc(4);i.Hb("invite--inline","inline"===t.layout)("invite--block","block"===t.layout),i.Db(2),i.mc("ngIf",t.sent)("ngIfElse",e),i.Db(3),i.mc("ngIf",t.enableActions&&!t.sent)}},directives:[y.p,v.a,a.s,a.j,O.a,a.c,a.r,a.i,y.o,S.b,a.B,a.v,a.D,x.a,y.u],pipes:[y.b],styles:[".invite__input[_ngcontent-%COMP%]{resize:vertical}.invite__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.invite__actions--compact[_ngcontent-%COMP%]{justify-content:flex-end}.invite__buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:8px auto}.invite--inline[_ngcontent-%COMP%]   .invite__button[_ngcontent-%COMP%]{margin-left:16px}.invite--inline[_ngcontent-%COMP%]   .invite__buttons[_ngcontent-%COMP%]{justify-content:flex-end}.invite--block[_ngcontent-%COMP%]   .invite__button[_ngcontent-%COMP%]{margin:16px 0}.invite--block[_ngcontent-%COMP%]   .invite__buttons[_ngcontent-%COMP%]{justify-content:flex-end;flex-direction:column}"],changeDetection:0}),C([Object(s.e)(b.a.getInviting),w("design:type",r.a)],e.prototype,"inviting$",void 0),C([Object(s.e)(d.a.getUserRoles),w("design:type",r.a)],e.prototype,"userRoles$",void 0),e})()},DupM:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("R0Ic"),a=n("AcyG"),s=n("J9/X"),o=n("fXoL");let r=(()=>{class e{constructor(e){this.store=e}ngOnInit(){}close(){this.store.dispatch(new s.a.ShowFilters(!1,!0))}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(a.h))},e.\u0275cmp=o.Jb({type:e,selectors:[["app-gallery-drawer"]],decls:8,vars:2,consts:[["appEventFence","","data-test","galleryDrawer",1,"gallery-drawer"],[1,"gallery-drawer__header"],[1,"gallery-drawer__label"],["app-button","","buttonType","ghost","buttonTheme","light","type","button","title","Close","data-test","galleryDrawerClose",3,"click"],["icon","times","size","lg"],[1,"gallery-drawer__body"],["viewMode","expanded"]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Vb(2,"h1",2),o.Pc(3,"Filters"),o.Ub(),o.Vb(4,"button",3),o.cc("click",(function(){return t.close()})),o.Qb(5,"app-icon",4),o.Ub(),o.Ub(),o.Vb(6,"div",5),o.Qb(7,"app-gallery-filters",6),o.Ub(),o.Ub()),2&e&&(o.mc("@expand",void 0),o.Db(4),o.Eb("aria-label","Close"))},styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.gallery-drawer[_ngcontent-%COMP%]{box-shadow:0 11px 15px rgba(0,0,0,.2),0 24px 38px rgba(0,0,0,.14),0 9px 46px rgba(0,0,0,.12);background:#fff;border-radius:16px 16px 0 0;display:block;position:fixed;bottom:0;top:auto;width:100vw}.gallery-drawer__header[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em;font-weight:600;border-bottom:1px solid #eaeff5;height:52px;padding:0 12px 0 20px;display:flex;align-items:center}.gallery-drawer__label[_ngcontent-%COMP%]{flex:1 0 auto}.gallery-drawer__body[_ngcontent-%COMP%]{padding:20px}"],data:{animation:[Object(i.n)("expand",[Object(i.m)(":enter",[Object(i.j)([Object(i.l)({top:"100%"}),Object(i.e)("250ms ease-in-out",Object(i.l)({top:"*"}))])])])]},changeDetection:0}),e})()},"Dz/e":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));let i=(()=>{class e{constructor(e,t){this.storyLoadProgress=e,this.chunkLoadProgress=t}}return e.type="[Engine Progress] Set Progress",e})(),a=(()=>{class e{constructor(){}}return e.type="[Engine Progress] Reset Progress",e})()},"E+WR":function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n("AcyG"),a=n("GmhI"),s=n("eW6i"),o=n("5miH"),r=n("fXoL"),c=function(e){return e[e.Positions=4]="Positions",e[e.Normals=4]="Normals",e[e.UVs=4]="UVs",e}({}),l=function(e){return e[e.Positions=2]="Positions",e[e.Normals=.6666666666666666]="Normals",e[e.UVs=2]="UVs",e}({});let p=(()=>{class e{constructor(){}getBytesPerIndex(e,t){return e.length<Math.pow(2,8)?1:e.length<Math.pow(2,16)?2:e.length<Math.pow(2,32)?4:void 0}getAsset(e){return Human.assets.geometries.geometries[e]}getPositions(e){return this.getAsset(e).geometry._core.arrays.positions}getNormals(e){return this.getAsset(e).geometry._core.arrays.positions}getIndices(e){return this.getAsset(e).geometry._core.arrays.indices}hasUVs(e){return this.getAsset(e).geometry._core.arrays.hasOwnProperty("uvs")}getUVs(e){return this.hasUVs(e)?this.getAsset(e).geometry._core.arrays.uvs[0]:[]}isCompressed(e){return this.getAsset(e).compressed}calculatePositions(e,t){return this.getPositions(e).length*(t?l.Positions:c.Positions)}calculateIndices(e,t){const n=this.getIndices(e),i=this.getBytesPerIndex(n,t);return n.length*i}calculateNormals(e,t){const n=this.getNormals(e);return Math.floor(n.length*(t?l.Normals:c.Normals))}calculateUVs(e,t){return this.getUVs(e).length*(t?l.UVs:c.UVs)}calculateGeometry(e,t){let n=0;return n+=this.calculateIndices(e,t),n+=this.calculatePositions(e,t),n+=this.calculateNormals(e,t),n+=this.calculateUVs(e,t),n}getTris(e){return this.getIndices(e).length/3}getVerts(e){return this.getPositions(e).length/3}getGeometryMemory(e){const t=this.getAsset(e).geometry._core,n=t.vertexBuf.itemByteSize*t.vertexBuf.length,i=t.indexBuf.itemByteSize*t.indexBuf.length,a=t.normalBuf.itemByteSize*t.normalBuf.length;let s=0;if(t.uvBufs)for(let o=0;o<t.uvBufs.length;o++)s+=t.uvBufs[o].itemByteSize*t.uvBufs[o].length;return n+i+a+s}getStat(e){return{id:e,tris:this.getTris(e),verts:this.getVerts(e),memory:this.getGeometryMemory(e)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=function(e){return e[e.Positions=4]="Positions",e[e.Normals=4]="Normals",e}({}),d=function(e){return e[e.Positions=2]="Positions",e[e.Normals=1]="Normals",e}({});let g=(()=>{class e{constructor(){}getAsset(e){return Human.assets.morphs.morphs[e]}getPositions(e){return this.getAsset(e).morphGeometry._core.targets[0].positions}getNormals(e){return this.getAsset(e).morphGeometry._core.targets[0].normals}isCompressed(e){return this.getAsset(e).compressed}calculatePositions(e,t){return this.getPositions(e).length*(t?d.Positions:u.Positions)}calculateNormals(e,t){return this.getNormals(e).length*(t?d.Normals:u.Normals)}calculateMorph(e,t){return this.calculatePositions(e,t)+this.calculateNormals(e,t)}getVerts(e){return this.getAsset(e).morphGeometry._core.targets[0].positions.length/3}getMorphMemory(e){const t=this.getAsset(e),n=t.morphGeometry._core.targets[0],i=t.morphGeometry._core.targets.length;let a=0;return a+=i*(n.normalBuf.itemByteSize*n.normalBuf.length),a+=i*(n.vertexBuf.itemByteSize*n.vertexBuf.length),a}getStat(e){return{id:e,verts:this.getVerts(e),memory:this.getMorphMemory(e)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class h{constructor(e,t,n,i){this.name=e,this.value=t,this.unit=n,this.reports=i}}class b{constructor(){this.geometryDownloadTotal=0,this.textureDownloadTotal=0,this.jsonDownloadTotal=0}}class m{}let f=(()=>{class e{constructor(e,t){this.geometryAssetMemoryService=e,this.morphAssetMemoryService=t}engineSupportsGeometryCompression(){return Human.assets.geometries.hasOwnProperty("getCompressionStats")}engineSupportsTextureCompression(){return Human.assets.materials.hasOwnProperty("getTextureCompressionStats")}getFirstChapterDownloadSize(e){return Human.stats&&Human.stats.trackingDownloadSize?Human.stats.geometryDownloadTotal+Human.stats.textureDownloadTotal+Human.stats.jsonDownloadTotal:0}updateGlobalStats(e,t){const n=new b;let i;return n.memory=this.getTotalMem(e,t),n.textureMemory=this.getTotalTexMem(),n.geometryMemory=this.getTotalGeoMem(e),n.morphMemory=this.getTotalMorphMem(t),Human.stats&&Human.stats.trackingDownloadSize&&(n.downloadSize=Human.stats.geometryDownloadTotal+Human.stats.textureDownloadTotal+Human.stats.jsonDownloadTotal,n.geometryDownloadTotal=Human.stats.geometryDownloadTotal,n.textureDownloadTotal=Human.stats.textureDownloadTotal,n.jsonDownloadTotal=Human.stats.jsonDownloadTotal),n.uncompressedGeos=Object.values(Human.assets.geometries.geometries).reduce((e,t)=>(t.compressed||e++,e),0),n.uncompressedMorphs=Object.values(Human.assets.morphs.morphs).reduce((e,t)=>(i=t.morphGeometry._core,i.compressedNormals&&i.compressedPositions||e++,e),0),n.uncompressedTextures=Object.entries(Human.assets.materials.materials).reduce((e,[t,n])=>(n.textures.forEach(t=>{t._core.compressed||e++}),e),0),n}updateGeoStats(e){return null==e&&(e=new m),Object.keys(Human.assets.geometries.geometries).forEach(t=>{e.hasOwnProperty(t)||(e[t]=this.geometryAssetMemoryService.getStat(t))}),e}updateMorphStats(e){return null==e&&(e=new m),Object.keys(Human.assets.morphs.morphs).forEach(t=>{e.hasOwnProperty(t)||(e[t]=this.morphAssetMemoryService.getStat(t))}),e}getTotalGeoMem(e){return Object.values(e).reduce((e,t)=>e+t.memory,0)}getTotalMorphMem(e){return Object.values(e).reduce((e,t)=>e+t.memory,0)}getTotalTexMem(){return Object.values(Human.renderer.getScene().stats.textures).reduce((e,t)=>e+t.memory,0)}getTotalMem(e,t){return this.getTotalGeoMem(e)+this.getTotalMorphMem(t)+this.getTotalTexMem()}buildSceneGeometryReport(e){const t=Object.keys(e).length;let n=0,i=0,a=0;Object.values(e).forEach(e=>{i+=e.tris,n+=e.verts,a+=e.memory});const s=new h("Shape Count (uninstanced)",t,null),o=new h("Triangle Count (uninstanced)",i,null),r=new h("Vertex Count (uninstanced)",n,null);return new h("Geometry Memory",a,"bytes",[s,o,r])}buildSceneMorphReport(e){const t=Object.keys(e).length;let n=0,i=0;Object.values(e).forEach(e=>{n+=e.verts,i+=e.memory});const a=new h("Morph Count (uninstanced)",t,null),s=new h("Vertex Count (uninstanced)",n,null);return new h("Morph Memory",i,"bytes",[a,s])}buildSceneTextureReport(){const e=Human.renderer.getScene().stats.textures;let t=0;const n={};return Object.entries({baseColor:"diffuse",alpha:"alpha",emit:"emit",normals:"normals",specular:"specular",texture:"texture"}).forEach(([i,a])=>{const s=this.generateTextureSummary(e[i]),o=[...s.reports];n[a]=new h(a,s.submemory,"bytes",o),t+=s.submemory}),new h("Texture Memory",t,"bytes",Object.values(n))}buildSceneDownloadReport(e){if(!e)return null;const t=e.geometryDownloadTotal+e.textureDownloadTotal+e.jsonDownloadTotal,n=new h("Geometry",e.geometryDownloadTotal,"bytes"),i=new h("Textures",e.textureDownloadTotal,"bytes"),a=new h("JSON",e.jsonDownloadTotal,"bytes");return new h("Download Size",t,"bytes",[n,i,a])}toMB(e){return(e/1048576).toFixed(2)}generateTextureSummary(e={}){const t=[];let n=0,i=0;return Object.entries(e).forEach(e=>{const a=e[0],s=e[1];"memory"===a?i=s:(t.push(new h(a,s,null)),n+=s)}),{reports:t,submemory:i,subtotal:n}}}return e.\u0275fac=function(t){return new(t||e)(r.Zb(p),r.Zb(g))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=n("YpC8"),v=n("LvDl"),O=n("Mh2x"),S=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},x=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class C{}const w={compressionSupport:{geometry:!1,morph:!1,texture:!1},morphStats:null,geoStats:null,geoStatsReport:null,morphStatsReport:null,textureStatsReport:null,downloadReport:null,globalStats:{memory:0,textureMemory:0,geometryMemory:0,morphMemory:0,downloadSize:0,uncompressedGeos:0,uncompressedMorphs:0,uncompressedTextures:0,geometryDownloadTotal:0,textureDownloadTotal:0,jsonDownloadTotal:0},firstChapterDownloadSize:0};let j=(()=>{let e=class{constructor(e,t,n){this.engineService=e,this.memoryService=t,this.store=n}static getGlobalStats(e){return e.globalStats}static getFirstChapterDownloadSize(e){return e.firstChapterDownloadSize}reset(e,t){e.setState(Object.assign({},w))}update(e,t){const n=this.memoryService.updateGeoStats(),i=this.memoryService.updateMorphStats(),a=this.memoryService.updateGlobalStats(n,i);t.isFirstChapter&&e.patchState({firstChapterDownloadSize:this.memoryService.getFirstChapterDownloadSize(a)});const s=this.memoryService.buildSceneGeometryReport(n),o=this.memoryService.buildSceneMorphReport(i),r=this.memoryService.buildSceneTextureReport(),c=this.memoryService.buildSceneDownloadReport(a);e.setState(Object.assign(Object.assign({},e.getState()),{geoStats:n,morphStats:i,globalStats:a,geoStatsReport:s,morphStatsReport:o,textureStatsReport:r,downloadReport:c})),t.logToConsole&&this.logMemoryState(e.getState())}ngxsOnInit(e){Human.stats.trackingDownloadSize=!0,this.engineService.getEvent(o.a.GraphAssetAttachFinish).subscribe(()=>{const t=Object(v.get)(this.store.selectSnapshot(y.a),"loadingChunk.chapterId",""),n=Object(v.get)(this.store.selectSnapshot(O.a),"chapters[0].id");e.dispatch(new a.a.Update(t===n))})}makeReportTableFriendly(e){return e.reports.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.value}),{})}logMemoryState(e){console.groupCollapsed("Memory Usage"),console.group("Totals"),console.table({"Total Memory":e.globalStats.memory,"Total Geo Memory":e.globalStats.geometryMemory,"Total Morph Memory":e.globalStats.morphMemory,"Total Texture Memory":e.globalStats.textureMemory}),console.groupEnd(),console.group("Uncompressed Assets"),console.table({"Uncompressed Geos":e.globalStats.uncompressedGeos,"Uncompressed Morphs":e.globalStats.uncompressedMorphs,"Uncompressed Textures":e.globalStats.uncompressedTextures}),console.groupEnd(),console.group("Geometry Stats"),console.table(this.makeReportTableFriendly(e.geoStatsReport)),console.groupEnd(),console.group("Morph Stats"),console.table(this.makeReportTableFriendly(e.morphStatsReport)),console.groupEnd(),console.group("Texture Stats"),console.table(this.makeReportTableFriendly(e.textureStatsReport)),e.textureStatsReport.reports.forEach(e=>{e.reports.length&&(console.group(e.name),console.table(this.makeReportTableFriendly(e)),console.groupEnd())}),console.groupEnd(),console.group("Download Size"),console.table(this.makeReportTableFriendly(e.downloadReport)),console.groupEnd(),console.groupCollapsed()}};return e.\u0275fac=function(t){return new(t||e)(r.Zb(s.a),r.Zb(f),r.Zb(i.h))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac}),S([Object(i.a)(a.a.Reset),x("design:type",Function),x("design:paramtypes",[Object,a.a.Reset]),x("design:returntype",void 0)],e.prototype,"reset",null),S([Object(i.a)(a.a.Update),x("design:type",Function),x("design:paramtypes",[Object,a.a.Update]),x("design:returntype",void 0)],e.prototype,"update",null),S([Object(i.f)(),x("design:type",Function),x("design:paramtypes",[C]),x("design:returntype",void 0)],e,"getGlobalStats",null),S([Object(i.f)(),x("design:type",Function),x("design:paramtypes",[C]),x("design:returntype",void 0)],e,"getFirstChapterDownloadSize",null),e=S([Object(i.g)({name:"memory",defaults:w})],e),e})()},"E/pY":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("AytR"),a=n("fXoL"),s=n("tyNb"),o=n("ofXK"),r=n("IlST"),c=n("yIGu"),l=n("F+jD"),p=n("0njA");function u(e,t){if(1&e&&(a.Vb(0,"app-list-item"),a.Vb(1,"div",11),a.Qb(2,"app-icon",12),a.Vb(3,"div"),a.Pc(4),a.Ub(),a.Ub(),a.Ub()),2&e){const e=t.$implicit;a.Db(4),a.Qc(e)}}function d(e,t){if(1&e&&(a.Tb(0),a.Pc(1," Unlock full access to the BioDigital library: "),a.Vb(2,"div",8),a.Vb(3,"app-list",9),a.Nc(4,u,5,1,"app-list-item",10),a.Ub(),a.Ub(),a.Sb()),2&e){const e=a.gc();a.Db(4),a.mc("ngForOf",e.features)}}function g(e,t){1&e&&(a.Tb(0),a.Pc(1," Create a free account to explore 800+ anatomy, physiology, and treatment models in interactive 3D. "),a.Sb())}function h(e,t){if(1&e){const e=a.Wb();a.Vb(0,"button",13),a.cc("click",(function(){return a.Cc(e),a.gc().handleLearnMoreClick()})),a.Pc(1," Learn More "),a.Ub()}if(2&e){const e=a.gc();a.mc("buttonSize",e.compact?"medium":"large"),a.Eb("aria-label","Learn More")}}function b(e,t){1&e&&(a.Vb(0,"p",14),a.Vb(1,"a",15),a.Pc(2,"Already have an account? Sign in"),a.Ub(),a.Ub())}const m=function(e){return{"signup-messaging--compact":e}};let f=(()=>{class e{constructor(e,t){this.activatedRoute=e,this.router=t,this.features=["Complete male and female anatomy","600+ health condition and treatment 3D models","100+ 3D anatomy quizzes","Animated 3D models and virtual 3D tours"],this.compact=!1}ngOnInit(){}handleSignUpClick(e){this.router.navigate(["/login/create"],{queryParams:{ref:this.activatedRoute.snapshot.queryParams.ref||"share",utm_source:i.a.native?"human_mobile":"human_web",utm_campaign:"share",utm_medium:"PLG"}}),e.stopImmediatePropagation()}handleLearnMoreClick(){window.open(`https://www.biodigital.com?utm_source=${i.a.native?"human_mobile":"human_web"}&utm_medium=PLG&utm_campaign=share&ref=share`)}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(s.a),a.Pb(s.e))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-signup-messaging"]],inputs:{compact:"compact"},decls:9,vars:9,consts:[[1,"signup-messaging","flex","flex-column","items-center",3,"ngClass"],[1,"signup-messaging__content",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"signup-messaging__actions"],["type","button","app-button","","buttonType","primary","buttonTheme","light","title","Sign Up For Free","data-test","signupMessageButton",3,"buttonSize","click"],["type","button","app-button","","buttonType","outline","buttonTheme","light","title","Learn More",3,"buttonSize","click",4,"ngIf"],["class","signup-messaging__footer",4,"ngIf"],[1,"mt-7"],["listType","flat",1,"mt-2"],[4,"ngFor","ngForOf"],[1,"signup-messaging__list-item","mv-1","flex","flex-row"],["icon","check",1,"mr-2"],["type","button","app-button","","buttonType","outline","buttonTheme","light","title","Learn More",3,"buttonSize","click"],[1,"signup-messaging__footer"],["routerLink","/login",1,"signup-messaging__link","link"]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Vb(1,"p",1),a.Nc(2,d,5,1,"ng-container",2),a.Nc(3,g,2,0,"ng-container",3),a.Ub(),a.Vb(4,"div",4),a.Vb(5,"button",5),a.cc("click",(function(e){return t.handleSignUpClick(e)})),a.Pc(6," Sign Up For Free "),a.Ub(),a.Nc(7,h,2,2,"button",6),a.Ub(),a.Nc(8,b,3,0,"p",7),a.Ub()),2&e&&(a.mc("ngClass",a.pc(7,m,t.compact)),a.Db(1),a.mc("ngSwitch",t.compact),a.Db(1),a.mc("ngSwitchCase",!0),a.Db(3),a.mc("buttonSize",t.compact?"medium":"large"),a.Eb("aria-label","Sign Up For Free"),a.Db(2),a.mc("ngIf",!t.compact),a.Db(1),a.mc("ngIf",!t.compact))},directives:[o.m,o.r,o.s,o.t,r.a,o.p,c.a,o.o,l.a,p.a,s.h],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.signup-messaging[_ngcontent-%COMP%]{background-color:#fff}.signup-messaging__content[_ngcontent-%COMP%]{color:#101823;font-size:20px;letter-spacing:.5px;line-height:1.4em;font-weight:600;max-width:632px;text-align:center}.signup-messaging__list-item[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em;font-weight:400;color:#283853}.signup-messaging__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:32px;margin-top:40px}.signup-messaging__footer[_ngcontent-%COMP%]{color:#283853;font-size:14px;letter-spacing:.35px;line-height:1.4em;margin-top:28px}.signup-messaging__link[_ngcontent-%COMP%]{text-decoration:underline;color:#283853}.signup-messaging--compact[_ngcontent-%COMP%]{padding:40px 60px;border-radius:8px}.signup-messaging--compact[_ngcontent-%COMP%]   .signup-messaging__content[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em;text-align:left}.signup-messaging--compact[_ngcontent-%COMP%]   .signup-messaging__actions[_ngcontent-%COMP%]{margin-top:28px}.signup-messaging--compact[_ngcontent-%COMP%]   .signup-messaging__footer[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}@media (max-width:959px){.signup-messaging--compact[_ngcontent-%COMP%]{padding:24px}.signup-messaging--compact[_ngcontent-%COMP%]   .signup-messaging__content[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.signup-messaging--compact[_ngcontent-%COMP%]   .signup-messaging__list-item[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.signup-messaging--compact[_ngcontent-%COMP%]   .signup-messaging__actions[_ngcontent-%COMP%]{margin-top:20px}}@media (max-width:480px){.signup-messaging__content[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.signup-messaging__actions[_ngcontent-%COMP%]{width:80%;flex-direction:column;align-items:stretch;gap:16px;margin-top:28px}}"],changeDetection:0}),e})()},E13e:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n("LRne"),a=n("lJxs"),s=n("MtjB"),o=n("3E0/"),r=n("IzEk"),c=n("b36G"),l=n("zrlG"),p=n("08/d"),u=n("xo8B"),d=n("AbMW"),g=n("Yg7+"),h=n("AytR"),b=n("fXoL"),m=n("tk/3");const f=["live"];let y=(()=>{class e{constructor(e){this.http=e}search(e="",t=[],n="en"){const i=e.split(/[ ]+/).join("+"),s=f.concat(t).filter(e=>""!==e&&null!=e).map(e=>`"${e}"`).join("+");return this.http.get(`/search?k=${i}&t=${s}&il=${n}&ol=${n}&odns=true`).pipe(Object(a.a)(e=>this.resultsToBookmarks(e)))}searchInternal(e="",t=""){return this.http.get(`/ws/search/internal?k=${e}&dir=${t}`).pipe(Object(a.a)(e=>this.resultsToBookmarks(e)))}getAnatomyCategory(e,t,n=[],i){return this.search(e,[t,...n],i)}getConditionModel(e){if(h.a.offline)return Object(i.a)(null);const t=this.toDatabaseContentId(e);return this.http.get("/search/conditions?q="+t).pipe(Object(s.a)(e=>e.pipe(Object(o.a)(1e3),Object(r.a)(3))),Object(a.a)(e=>this.resultsToBookmarks(e)),Object(a.a)(e=>e[0]))}getShowcase(){return this.http.get("/assets/bookmarks/showcase.json").pipe(Object(a.a)(e=>(e.forEach(e=>(e.bookmarks=this.resultsToBookmarks(e.bookmarks),e)),e)))}createMockShowcase(e){return{title:" ",description:" ",url:"",bookmarks:[...e],loading:!0}}createMockShowcases(e,t){return[...Array(e).keys()].map(()=>this.createMockShowcase(t))}resultsToBookmarks(e){return e.forEach(e=>{e=Object(d.a)(e)}),Object(c.plainToClass)(l.a,e)}getBookmarkCategory(e){if(!e.tags)return null;const t=p.a.categories.map(e=>e.id.toLocaleLowerCase());return e.tags.find(e=>t.includes(e.toLocaleLowerCase()))}getStoryCategory(e){if(!e.tags)return null;const t=Object(u.a)().map(e=>e.id.toLocaleLowerCase());return e.tags.find(e=>t.includes(e.toLocaleLowerCase()))}toAppContentId(e){return e.replace("Condition.content.","").replace(".json","").split(".").join("/")}toDatabaseContentId(e){return e.match("Condition.content")?e:`Condition.content.${e.replace(".json","").split("/").join(".")}.json`}getHeroImages(){return Object(i.a)(g.a)}getHeroQuickTags(){return Object(i.a)(g.c)}}return e.\u0275fac=function(t){return new(t||e)(b.Zb(m.b))},e.\u0275prov=b.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},E32s:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("LvDl");function a(e,t,n,a){(function e(t,n){const a=n.objects;return 0===a.length?[]:Object(i.flattenDeep)(a.map(n=>[n.objectId,...e(t,t.scene.objects[n.objectId])]))})(Human,Human.scene.objects[e]).forEach(e=>t[e][n]=a)}},ECVi:function(e,t,n){"use strict";n.d(t,"a",(function(){return X}));var i=n("AcyG"),a=n("k+hL"),s=n("Kn5L"),o=n("qXBG"),r=n("a0wz"),c=n("nYR2"),l=n("5+tZ"),p=n("vkgz"),u=n("pLZG"),d=n("lJxs"),g=n("DTUA"),h=n("INTG"),b=n("Lyqc"),m=n("jjCP"),f=n("11Ye"),y=n("q8pu"),v=n("Vv7R"),O=n("VJvM"),S=n("ZDoJ"),x=n("xybE"),C=n("LRne"),w=n("fXoL"),j=n("tk/3");class k{constructor(e,t,n){this.category=e,this.message=t,this.log=n}}let P=(()=>{class e{constructor(e){this.http=e,this.log={}}logError(e,t=!1){const n=`${e.category}${e.message}`;return t&&this.log[n]?Object(C.a)():(this.log[n]=!0,this.http.post("/ws/human-error",e))}}return e.\u0275fac=function(t){return new(t||e)(w.Zb(j.b))},e.\u0275prov=w.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _,M=n("LvDl"),I=n("J9/X"),T=n("AytR"),U=n("rKJn"),L=n("odcc"),z=n("p345"),A=n("mSC4"),F=n("Oq7/"),D=n("8pBO"),E=n("kTA6"),N=n("L6yT"),R=n("Ie6O"),V=n("VKIe"),B=n("icKS"),H=n("QkH1"),Q=n("WoAB"),G=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},W=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const q=T.a.application===z.a.Studio,$={loading:!1,requestingCode:!1,profileStatus:"ready",auth2:null,googleAuthStatus:"waiting",loggedIn:null,userLocale:null,userRoles:[],contentViews:{limit_reached:!1,inapp_view_limit:0,inapp_view_count:0},developerReferral:!1};let X=(()=>{let e=_=class{constructor(e,t,n,i,a,s,o,r){this.authService=e,this.userMessageService=t,this.storageService=n,this.errorLoggingService=i,this.linkedinInsights=a,this.pendoService=s,this.contentViewService=o,this.productService=r}static getLoggedIn(e){return e.loggedIn}static getEnvironmentSettings(e){return e.environmentSettings}static getUserProfile(e){return e.userProfile}static getUserRole(e){if(!Object(M.isNil)(e.userProfile))return Object(M.get)(e,"userProfile.organizations[0].user_role",D.b)}static getUserRoles(e){return e.userRoles}static getUserType(e){if(!Object(M.isNil)(e.userProfile)){const{premium_account:t,premium_account_type:n}=e.userProfile;if(t)return"group"===n?N.a.Team:N.a.Premium}return N.a.Free}static canInviteUsers(e){if(!Object(M.isNil)(e.userProfile)){const t=_.getUserType(e),n=_.getUserRole(e);return Object(H.k)(n,Q.a.InviteUsers)&&t===N.a.Team}return!1}static getUserAccountSettings(e){return Object(M.get)(e,"userProfile.account_settings",[])}static getAuth2(e){return e.auth2}static getGoogleAuthOnline(e){return e.googleAuthStatus}static getProfileCheck(e){return e.profileCheck}static getLoading(e){return e.loading}static getVerifyingProfile(e){return"verifying"===e.profileStatus}static getProfileUpdating(e){return"updating"===e.profileStatus}static getProfileDeleting(e){return"deleting"===e.profileStatus}static getUserLocale(e){return e.userLocale}static getUserLanguage(e){return Object(M.get)(e,"userLocale.lang",h.b.lang)}static getUserApps(e){return Object(M.get)(e,"userApps",[])}static getSelectedUserApp(e){return(e.userApps||[]).find(t=>t.id===e.selectedAppId)}static getUserFullName(e){var t,n;if(Object(M.isNil)(e.userProfile))return null;const i=null!==(t=e.userProfile.first_name)&&void 0!==t?t:"",a=null!==(n=e.userProfile.last_name)&&void 0!==n?n:"";return Object(M.trim)([i,a].join(" "))}static getUserEmail(e){return Object(M.isNil)(e.userProfile)?null:e.userProfile.email}static isPrivateUser(e){return!Object(M.isNil)(e.userProfile)&&0===Object(M.get)(e,"userProfile.organizations",[]).length}static isPremiumUser(e){return!0===Object(M.get)(e,"userProfile.premium_account_valid")}static isAdmin(e){const t=this.getUserRole(e);return!!t&&t.role_name===V.a.Admin}static isDeveloperReferral(e){return e.developerReferral}static getContentViews(e){return e.contentViews}static getContentViewsReached(e){return!_.isPremiumUser(e)&&e.contentViews.limit_reached}initializeGoogleOAuth(e){e.dispatch(new s.y("loading")),gapi.load("auth2",{callback:()=>{const t=gapi.auth2.init({client_id:T.a.googleAuthKey,scope:"profile"});e.patchState({auth2:t}),t.then(()=>{e.dispatch(new s.y("ready"))},()=>{e.dispatch(new s.y("error"))})},onerror:()=>{e.dispatch(new s.y("error"))},timeout:5e3,ontimeout:()=>{e.dispatch(new s.y("error"))}})}setGoogleAuthOnline(e,t){e.patchState({googleAuthStatus:t.online})}isLoggedIn(e,t){e.patchState({loading:!0}),this.authService.isLoggedIn().pipe(Object(c.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(t.signed_in?new s.C:new s.B)})}isLoggedInSuccess(e,t){e.patchState({loggedIn:!0})}isLoggedInFailure(e,t){e.patchState({loggedIn:!1})}login(e,t){e.patchState({loading:!0}),this.verify("studio_login",t.login.email,e).pipe(Object(l.b)(e=>this.authService.loginWithBiodigital(Object.assign(Object.assign({},t.login),e?{site_verify_response:e}:null))),Object(c.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new s.E("biodigital",t))},n=>{this.logFailure("LOGIN_FAILURE",n),e.dispatch(new s.D("biodigital",n,t.login))})}loginWithGoogle(e,t){e.patchState({loading:!0}),this.authService.loginWithGoogle(t.login).pipe(Object(c.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new s.E("google",t))},n=>{1!==t.login.groupCodeMode&&1!==t.login.groupInviteMode||this.logFailure("GOOGLE_SIGNUP_FAILURE",n),e.dispatch(new s.D("google",n,t.login))})}loginSuccess(e,t){q&&(this.linkedinInsights.track("Sign in"),"google"===t.loginType&&"signup"===t.response.authentication_type?this.pendoService.trackSignUp(t.loginType):this.pendoService.trackSignIn(t.loginType)),e.dispatch(new s.A),e.dispatch(new s.c)}loginFailure(e,t){var n;q&&this.pendoService.track("Sign In - Failure",{type:t.loginType,error:Object(M.get)(t,"error.error.error.message")||"There was an error logging in.",statusCode:null===(n=t.error)||void 0===n?void 0:n.status})}logout(e,t){e.patchState({loading:!0}),this.authService.logout().pipe(Object(c.a)(()=>e.patchState({loading:!1}))).subscribe(()=>e.dispatch(new s.J),()=>e.dispatch(new s.I))}logoutSuccess(e,t){e.setState($),e.dispatch(new s.O),e.dispatch(new L.n),e.dispatch(new b.y),e.dispatch(new m.e),e.dispatch(new f.u),e.dispatch(new y.j),e.dispatch(new S.a.ResetLayout),e.dispatch(new r.v),e.dispatch(new v.l),e.dispatch(new O.o),e.dispatch(new I.a.Reset),this.storageService.clearSessionStorage()}checkProfile(e,t){return e.patchState({loading:!0}),this.authService.checkProfile(t.email).pipe(Object(c.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new s.f(t))},t=>{e.dispatch(new s.e(t))})}checkProfileSuccess(e,t){e.patchState({profileCheck:t.profile})}getUserProfile(e,{hardCheck:t}){return e.patchState({loading:!0}),this.authService.getUserProfile(t).pipe(Object(c.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new s.w(t))},t=>{e.dispatch(new s.v(t))})}getUserProfileSuccess(e,t){e.patchState({userProfile:t.userProfile}),e.dispatch(new r.z(t.userProfile.organizations)),e.dispatch(new s.q),e.dispatch(new s.c)}updateUserProfile(e,{userProfile:t}){e.patchState({profileStatus:"updating"}),this.authService.updaterUserProfile(t).pipe(Object(c.a)(()=>e.patchState({profileStatus:"ready"}))).subscribe(()=>{e.dispatch(new s.rb(t))},t=>{e.dispatch(new s.qb(t))})}updateUserProfileSuccess(e,{userProfile:t}){this.pendoService.updateVisitorData(t)}deleteUserProfile(e,t){e.patchState({profileStatus:"deleting"}),this.authService.deleteUserProfile().pipe(Object(c.a)(()=>e.patchState({profileStatus:"ready"}))).subscribe(t=>{e.dispatch(new s.m(t))},t=>{e.dispatch(new s.l(t))})}getUserRoles(e,t){this.authService.getUserRoles().subscribe(t=>{e.patchState({userRoles:t})})}getUserApps(e,t){this.authService.getUserApps().subscribe(t=>{e.dispatch(new s.Z(t)),e.dispatch(new s.g)},e=>{})}setUserApps(e,{apps:t}){e.patchState({userApps:t})}setSelectedUserApp(e,{appId:t}){e.patchState({selectedAppId:t}),null!==t?this.storageService.setLocalItem(g.b.UserAppId,t):this.storageService.removeLocalItem(g.b.UserAppId)}checkSelectedUserApp(e,t){const n=e.getState().userApps,i=this.storageService.getLocalItem(g.b.UserAppId);if(i){const t=parseInt(i,10);e.dispatch(new s.Y(t))}else if(n&&n.length){const t=n.find(e=>e.app_platform.some(e=>e.type===U.a.Web));e.dispatch(new s.Y(t?t.id:void 0))}}checkSession(e,t){e.patchState({loading:!0}),this.authService.isLoggedIn().pipe(Object(c.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{t.signed_in?(e.dispatch(new s.C),e.dispatch(new s.u),e.dispatch(new s.x)):e.dispatch(new s.B)})}getEnvironmentSettings(e,t){return e.patchState({loading:!0}),this.authService.getEnvironmentSettings().pipe(Object(c.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new s.p(t))},t=>{e.dispatch(new s.o(t))})}GetEnvironmentSettingsSuccess(e,t){e.patchState({environmentSettings:t.environmentSettings})}resetPassword(e,t){e.patchState({loading:!0}),this.authService.resetPassword(t.email).pipe(Object(c.a)(()=>e.patchState({loading:!1}))).subscribe(()=>{e.dispatch(new s.R(t.email))},t=>{e.dispatch(new s.Q(t))})}transferFacebookAccount(e,t){e.patchState({loading:!0}),this.verify("deactivate_facebook",t.email,e).pipe(Object(l.b)(e=>this.authService.deactivateFacebook(Object.assign(Object.assign({version:4,app_productkey:this.productService.productKey,app_producttype:this.productService.productType},e?{site_verify_response:e}:null),{user_email:t.email}))),Object(c.a)(()=>e.patchState({loading:!1}))).subscribe(n=>{console.log(n),e.dispatch(n.conversion_complete&&n.reset_password_email_sent?new s.lb(t.email):new s.kb(new Error("Facebook deactivation failed")))},t=>{e.dispatch(new s.kb(t))})}updatePassword(e,t){const{currentPassword:n,newPassword:i,confirmNewPassword:a}=t;this.authService.updatePassword(n,i,a).subscribe(()=>{e.dispatch(new s.ob)},t=>{e.dispatch(new s.nb(t))})}signUp(e,t){e.patchState({loading:!0}),this.verify("studio_signup",t.value.email,e).pipe(Object(l.b)(e=>this.authService.signUp(Object.assign(Object.assign({},t.value),e?{site_verify_response:e}:null))),Object(c.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new s.ib(t))},t=>{e.dispatch(new s.hb(t))})}signUpSuccess(e,t){q&&this.pendoService.trackSignUp("biodigital")}signUpFailure(e,t){var n;q&&this.pendoService.track("Sign Up - Failure",{error:Object(M.get)(t,"error.error.error.message")||"There was an error signing up.",statusCode:null===(n=t.error)||void 0===n?void 0:n.status}),this.logFailure("BIODIGITAL_SIGNUP_FAILURE",t)}setUserLocale(e,{locale:t}){this.storageService.setLocalItem(g.b.Locale,t.id),e.patchState({userLocale:t}),e.dispatch(new s.bb(t))}checkLocale(e,t){const n=Object(h.c)(),i=h.d.find(e=>e.id===n)||h.b;e.dispatch(new s.ab(i))}sendUserMessage(e,{message:t}){this.userMessageService.sendMessage(t).subscribe(()=>{e.dispatch(new s.U(t))},t=>{e.dispatch(new s.T(t))})}getUserMessage(e,{type:t,mode:n}){this.userMessageService.getUserMessage(t,n).subscribe(t=>{e.dispatch(new s.t(t))},()=>{e.dispatch(new s.s(t))})}setUserMessageViewed(e,{messageSeenId:t}){this.userMessageService.setUserMessageViewed(t).subscribe(()=>e.dispatch(new s.eb),()=>e.dispatch(new s.db))}resetAuth(e,t){e.setState($),e.dispatch(new s.z)}requestVerificationCode(e,{email:t,token:n}){e.patchState({requestingCode:!0}),this.authService.requestVerificationCode({user_email:t,verification_jwt:n}).pipe(Object(c.a)(()=>e.patchState({requestingCode:!1}))).subscribe(t=>{e.dispatch(new s.N(t))},t=>{e.dispatch(new s.M(t))})}verifyProfile(e,{email:t,token:n,code:i}){const a=i.toUpperCase();e.patchState({profileStatus:"verifying"}),this.authService.verifyProfile({user_email:t,verification_code:a,verification_jwt:n}).pipe(Object(c.a)(()=>e.patchState({profileStatus:"ready"}))).subscribe(t=>{e.dispatch(new s.vb(t)),e.dispatch(new s.h)},t=>{e.dispatch(new s.ub(t))})}verifyProfileSuccess(e){this.pendoService.track("Email Verify - Success",{platform:this.productService.productType})}verifyProfileFail(e,t){var n;this.pendoService.track("Email Verify - Failure",{error:Object(M.get)(t,"error.error.error.message")||"There was an error with email verification.",statusCode:null===(n=t.error)||void 0===n?void 0:n.status})}setContentView(e,{contentId:t,contentType:n}){this.contentViewService.trackContentView(t,n).subscribe(()=>{e.dispatch(new s.W),e.dispatch(new s.a)})}checkContentViews(e,t){this.contentViewService.checkContentView().subscribe(t=>{e.patchState({contentViews:t}),e.dispatch(new s.b(t))})}setDeveloperReferral(e,t){e.patchState({developerReferral:t.isDeveloperReferral})}logFailure(e,t){const n=Object(M.get)(t,"message")||"",i=Object(M.get)(t,"error.error.message")||"";this.errorLoggingService.logError(new k(e,n,i)).subscribe()}verify(e,t,n){return this.authService.isReCaptchaWhiteListed(t)?Object(C.a)(null):this.authService.isHuman(e).pipe(Object(p.a)(e=>{e.isHuman||n.dispatch(new s.sb)}),Object(u.a)(e=>e.isHuman),Object(d.a)(e=>e.verification))}ngxsOnInit(e){e.dispatch(new s.h),e.dispatch(new s.c),e.dispatch(new s.g),e.dispatch(new s.z)}};return e.\u0275fac=function(t){return new(t||e)(w.Zb(o.a),w.Zb(x.a),w.Zb(g.d),w.Zb(P),w.Zb(A.a),w.Zb(E.b),w.Zb(R.a),w.Zb(B.a))},e.\u0275prov=w.Lb({token:e,factory:e.\u0275fac}),G([Object(i.a)(s.z),W("design:type",Function),W("design:paramtypes",[Object]),W("design:returntype",void 0)],e.prototype,"initializeGoogleOAuth",null),G([Object(i.a)(s.y),W("design:type",Function),W("design:paramtypes",[Object,s.y]),W("design:returntype",void 0)],e.prototype,"setGoogleAuthOnline",null),G([Object(i.a)(s.A),W("design:type",Function),W("design:paramtypes",[Object,s.A]),W("design:returntype",void 0)],e.prototype,"isLoggedIn",null),G([Object(i.a)(s.C),W("design:type",Function),W("design:paramtypes",[Object,s.C]),W("design:returntype",void 0)],e.prototype,"isLoggedInSuccess",null),G([Object(i.a)(s.B),W("design:type",Function),W("design:paramtypes",[Object,s.B]),W("design:returntype",void 0)],e.prototype,"isLoggedInFailure",null),G([Object(i.a)(s.F),W("design:type",Function),W("design:paramtypes",[Object,s.F]),W("design:returntype",void 0)],e.prototype,"login",null),G([Object(i.a)(s.G),W("design:type",Function),W("design:paramtypes",[Object,s.G]),W("design:returntype",void 0)],e.prototype,"loginWithGoogle",null),G([Object(i.a)(s.E),W("design:type",Function),W("design:paramtypes",[Object,s.E]),W("design:returntype",void 0)],e.prototype,"loginSuccess",null),G([Object(i.a)(s.D),W("design:type",Function),W("design:paramtypes",[Object,s.D]),W("design:returntype",void 0)],e.prototype,"loginFailure",null),G([Object(i.a)(s.H),W("design:type",Function),W("design:paramtypes",[Object,s.H]),W("design:returntype",void 0)],e.prototype,"logout",null),G([Object(i.a)(s.J),W("design:type",Function),W("design:paramtypes",[Object,s.J]),W("design:returntype",void 0)],e.prototype,"logoutSuccess",null),G([Object(i.a)(s.d),W("design:type",Function),W("design:paramtypes",[Object,s.d]),W("design:returntype",void 0)],e.prototype,"checkProfile",null),G([Object(i.a)(s.f),W("design:type",Function),W("design:paramtypes",[Object,s.f]),W("design:returntype",void 0)],e.prototype,"checkProfileSuccess",null),G([Object(i.a)(s.u),W("design:type",Function),W("design:paramtypes",[Object,s.u]),W("design:returntype",void 0)],e.prototype,"getUserProfile",null),G([Object(i.a)(s.w),W("design:type",Function),W("design:paramtypes",[Object,s.w]),W("design:returntype",void 0)],e.prototype,"getUserProfileSuccess",null),G([Object(i.a)(s.pb),W("design:type",Function),W("design:paramtypes",[Object,s.pb]),W("design:returntype",void 0)],e.prototype,"updateUserProfile",null),G([Object(i.a)(s.rb),W("design:type",Function),W("design:paramtypes",[Object,s.pb]),W("design:returntype",void 0)],e.prototype,"updateUserProfileSuccess",null),G([Object(i.a)(s.k),W("design:type",Function),W("design:paramtypes",[Object,s.k]),W("design:returntype",void 0)],e.prototype,"deleteUserProfile",null),G([Object(i.a)(s.x),W("design:type",Function),W("design:paramtypes",[Object,s.x]),W("design:returntype",void 0)],e.prototype,"getUserRoles",null),G([Object(i.a)(s.q),W("design:type",Function),W("design:paramtypes",[Object,s.q]),W("design:returntype",void 0)],e.prototype,"getUserApps",null),G([Object(i.a)(s.Z),W("design:type",Function),W("design:paramtypes",[Object,s.Z]),W("design:returntype",void 0)],e.prototype,"setUserApps",null),G([Object(i.a)(s.Y),W("design:type",Function),W("design:paramtypes",[Object,s.Y]),W("design:returntype",void 0)],e.prototype,"setSelectedUserApp",null),G([Object(i.a)(s.g),W("design:type",Function),W("design:paramtypes",[Object,s.g]),W("design:returntype",void 0)],e.prototype,"checkSelectedUserApp",null),G([Object(i.a)(s.h),W("design:type",Function),W("design:paramtypes",[Object,s.h]),W("design:returntype",void 0)],e.prototype,"checkSession",null),G([Object(i.a)(s.n),W("design:type",Function),W("design:paramtypes",[Object,s.n]),W("design:returntype",void 0)],e.prototype,"getEnvironmentSettings",null),G([Object(i.a)(s.p),W("design:type",Function),W("design:paramtypes",[Object,s.p]),W("design:returntype",void 0)],e.prototype,"GetEnvironmentSettingsSuccess",null),G([Object(i.a)(s.P),W("design:type",Function),W("design:paramtypes",[Object,s.P]),W("design:returntype",void 0)],e.prototype,"resetPassword",null),G([Object(i.a)(s.jb),W("design:type",Function),W("design:paramtypes",[Object,s.jb]),W("design:returntype",void 0)],e.prototype,"transferFacebookAccount",null),G([Object(i.a)(s.mb),W("design:type",Function),W("design:paramtypes",[Object,s.mb]),W("design:returntype",void 0)],e.prototype,"updatePassword",null),G([Object(i.a)(s.gb),W("design:type",Function),W("design:paramtypes",[Object,s.gb]),W("design:returntype",void 0)],e.prototype,"signUp",null),G([Object(i.a)(s.ib),W("design:type",Function),W("design:paramtypes",[Object,s.ib]),W("design:returntype",void 0)],e.prototype,"signUpSuccess",null),G([Object(i.a)(s.hb),W("design:type",Function),W("design:paramtypes",[Object,s.hb]),W("design:returntype",void 0)],e.prototype,"signUpFailure",null),G([Object(i.a)(s.ab),W("design:type",Function),W("design:paramtypes",[Object,s.ab]),W("design:returntype",void 0)],e.prototype,"setUserLocale",null),G([Object(i.a)(s.c),W("design:type",Function),W("design:paramtypes",[Object,s.c]),W("design:returntype",void 0)],e.prototype,"checkLocale",null),G([Object(i.a)(s.S),W("design:type",Function),W("design:paramtypes",[Object,s.S]),W("design:returntype",void 0)],e.prototype,"sendUserMessage",null),G([Object(i.a)(s.r),W("design:type",Function),W("design:paramtypes",[Object,s.r]),W("design:returntype",void 0)],e.prototype,"getUserMessage",null),G([Object(i.a)(s.cb),W("design:type",Function),W("design:paramtypes",[Object,s.cb]),W("design:returntype",void 0)],e.prototype,"setUserMessageViewed",null),G([Object(i.a)(s.O),W("design:type",Function),W("design:paramtypes",[Object,s.O]),W("design:returntype",void 0)],e.prototype,"resetAuth",null),G([Object(i.a)(s.L),W("design:type",Function),W("design:paramtypes",[Object,s.L]),W("design:returntype",void 0)],e.prototype,"requestVerificationCode",null),G([Object(i.a)(s.tb),W("design:type",Function),W("design:paramtypes",[Object,s.tb]),W("design:returntype",void 0)],e.prototype,"verifyProfile",null),G([Object(i.a)(s.vb),W("design:type",Function),W("design:paramtypes",[Object]),W("design:returntype",void 0)],e.prototype,"verifyProfileSuccess",null),G([Object(i.a)(s.ub),W("design:type",Function),W("design:paramtypes",[Object,s.ub]),W("design:returntype",void 0)],e.prototype,"verifyProfileFail",null),G([Object(i.a)(s.V),W("design:type",Function),W("design:paramtypes",[Object,s.V]),W("design:returntype",void 0)],e.prototype,"setContentView",null),G([Object(i.a)(s.a),W("design:type",Function),W("design:paramtypes",[Object,s.a]),W("design:returntype",void 0)],e.prototype,"checkContentViews",null),G([Object(i.a)(s.X),W("design:type",Function),W("design:paramtypes",[Object,s.X]),W("design:returntype",void 0)],e.prototype,"setDeveloperReferral",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getLoggedIn",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getEnvironmentSettings",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getUserProfile",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",F.a)],e,"getUserRole",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",Array)],e,"getUserRoles",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",String)],e,"getUserType",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",Boolean)],e,"canInviteUsers",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",Array)],e,"getUserAccountSettings",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",Object)],e,"getAuth2",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",String)],e,"getGoogleAuthOnline",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getProfileCheck",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getLoading",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getVerifyingProfile",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getProfileUpdating",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getProfileDeleting",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getUserLocale",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",String)],e,"getUserLanguage",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getUserApps",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getSelectedUserApp",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getUserFullName",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getUserEmail",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"isPrivateUser",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"isPremiumUser",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"isAdmin",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"isDeveloperReferral",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getContentViews",null),G([Object(i.f)(),W("design:type",Function),W("design:paramtypes",[a.a]),W("design:returntype",void 0)],e,"getContentViewsReached",null),e=_=G([Object(i.g)({name:"auth",defaults:$})],e),e})()},EETq:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Organization="Organization",e.Collection="Collection",e.Private="Private",e.Category="Category",e.Community="Community",e.Internal="Internal",e.Loft="Loft",e}({})},EF3F:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return b})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return f}));var i=n("0Yvn"),a=n("mXx7");const s=new i.a({label:"Original",tintColor:!1,saturation:!1,contrast:!1,brightness:!1,opacity:!1}),o=new i.a({tintColor:[0,0,0],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),r=new i.a({tintColor:[1,0,0],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),c=new i.a({tintColor:[1,1,0],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),l=new i.a({tintColor:[0,1,0],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),p=new i.a({tintColor:[0,1,1],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),u=new i.a({tintColor:[0,0,1],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),d=new i.a({tintColor:[1,0,1],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),g=new i.a({label:"Grayscale",tintColor:!1,saturation:-100,contrast:!1,brightness:!1,opacity:!1}),h=new i.a({label:"Desaturated",tintColor:!1,saturation:-50,contrast:!1,brightness:!1,opacity:!1}),b=new i.a({label:"Fade",tintColor:[0,0,0],contrast:!1,brightness:55,saturation:-100,opacity:new a.a({edge:1,center:0,edgeBias:0,centerBias:1,power:1})}),m=[s,o,r,c,l,p,u,d],f=[g,h,b]},EFPM:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("fXoL"),a=n("3Pt+"),s=n("LvDl"),o=n("XNiG"),r=n("1G5W"),c=n("mWjH"),l=n("0njA"),p=n("ofXK");function u(e,t){if(1&e&&(i.Vb(0,"option",9),i.Pc(1),i.Ub()),2&e){const e=t.$implicit;i.mc("value",e.value),i.Db(1),i.Rc(" ",e.label.title," ")}}function d(e,t){if(1&e&&(i.Vb(0,"select",6),i.Vb(1,"option",7),i.Pc(2,"Select"),i.Ub(),i.Nc(3,u,2,2,"option",8),i.Ub()),2&e){const e=i.gc();i.Db(3),i.mc("ngForOf",e.options)}}let g=(()=>{class e extends c.a{constructor(e,t){super(),this.formBuilder=e,this.changeRef=t,this.outline=!0,this.valueChange=new i.p,this.ngUnsubscribe=new o.a,this.form=this.formBuilder.group({value:[""]}),this.valueControl=this.form.get("value")}get options(){return this._options}set options(e){const t=Object(s.clone)(e);this._options=t.sort((e,t)=>e.label.title.localeCompare(t.label.title)),this.changeRef.markForCheck()}ngOnInit(){this.initFormListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initFormListeners(){this.form.valueChanges.pipe(Object(r.a)(this.ngUnsubscribe)).subscribe(({value:e})=>{this.writeValue(e),this.valueChange.next(e)})}setDisabledState(e){super.setDisabledState(e),e?this.form.disable():this.form.enable(),this.changeRef.markForCheck()}setFormValues(e){this.valueControl.setValue(e),this.changeRef.markForCheck()}getSelectedOption(){const e=this.valueControl.value;return this.options.find(t=>t.value===e)}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(a.f),i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-quiz-label-anatomy-select"]],inputs:{options:"options",outline:"outline"},outputs:{valueChange:"valueChange"},features:[i.Cb([{provide:a.p,useExisting:Object(i.W)(()=>e),multi:!0}]),i.Ab],decls:7,vars:5,consts:[[1,"label",3,"formGroup"],[1,"label__select-label","flex","text-12"],[1,"flex","justify-between","p-2","flex-auto"],[1,"mr-2"],["icon","caret-down","size","lg"],["class","input label__select","placeholder","Select Option","formControlName","value","data-test","quizLabelSelect",4,"ngIf"],["placeholder","Select Option","formControlName","value","data-test","quizLabelSelect",1,"input","label__select"],["value","","data-test","questionAnswerOption"],["class","label__option","data-test","questionAnswerOption",3,"value",4,"ngFor","ngForOf"],["data-test","questionAnswerOption",1,"label__option",3,"value"]],template:function(e,t){if(1&e&&(i.Vb(0,"div",0),i.Vb(1,"label",1),i.Vb(2,"div",2),i.Vb(3,"div",3),i.Pc(4),i.Ub(),i.Qb(5,"app-icon",4),i.Ub(),i.Nc(6,d,4,1,"select",5),i.Ub(),i.Ub()),2&e){let e=null;i.Hb("label--empty",""===t.valueControl.value),i.mc("formGroup",t.form),i.Db(4),i.Qc((null==(e=t.getSelectedOption())||null==e.label?null:e.label.title)||"Select"),i.Db(2),i.mc("ngIf",!t.disabled)}},directives:[a.s,a.j,l.a,p.p,a.B,a.r,a.i,a.v,a.D,p.o],styles:[".label[_ngcontent-%COMP%]{overflow:hidden}.label__select-label[_ngcontent-%COMP%]{color:#101823;position:relative}.label__select[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;opacity:.01}.label--empty[_ngcontent-%COMP%]   .label__select-label[_ngcontent-%COMP%]{color:#96a8c0}"],changeDetection:0}),e})()},EFcw:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.BookmarkViewThresholdReached=0]="BookmarkViewThresholdReached",e[e.BookmarkViewLimitReached=1]="BookmarkViewLimitReached",e[e.BookmarkSaveThresholdReached=2]="BookmarkSaveThresholdReached",e[e.BookmarkSaveLimitReached=3]="BookmarkSaveLimitReached",e[e.ProAccountPastDue=4]="ProAccountPastDue",e[e.TeamTrailExpired=5]="TeamTrailExpired",e[e.Publish=6]="Publish",e}({})},EWj2:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ofXK"),a=n("+pSP"),s=n("vvyD"),o=n("fXoL");let r=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a]]}),e})()},Es8U:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("LvDl"),a=n("vXBk"),s=n("9U6C");const o=a.a[s.a.WoltersKluwer],r={};function c(e,t){const n=Object(i.get)(e,"error.error.error_id",""),a=Object(i.get)(e,"error.error.message","");return function(e,t){switch(e){case"OPPH01.00122":case"SUH01.00122":case"SIH01.00122":case"FSH01.00122":case"GSH01.00122":return`We were unable to find an account associated with your institution. \n      Please contact your administrator [here](${o}) and provide this error ID: ${e}.`;case"OPPH01.00123":case"SUH01.00123":case"SIH01.00123":case"FSH01.00123":case"GSH01.00123":return`There are multiple team accounts associated with your institution. \n      Please contact your administrator [here](${o}) and provide this error ID: ${e}.`;case"OPPH01.00124":case"OPPH01.00125":case"OPPH01.00110":case"OPPH01.00111":case"OPPH01.00112":case"SUH01.00124":case"SUH01.00110":case"SUH01.00111":case"SUH01.00112":case"SIH01.00124":case"SIH01.00110":case"SIH01.00111":case"SIH01.00112":case"FSH01.00124":case"FSH01.00125":case"FSH01.00110":case"FSH01.00111":case"FSH01.00112":case"GSH01.00124":case"GSH01.00110":case"GSH01.00111":case"GSH01.00112":return`There was an issue with retrieving information from your institution. \n      Please try again or contact your administrator [here](${o}) and provide this error ID: ${e}.`;default:return r[e]||""}}(n)||(a?a.replace(/^\[(.+)\]$/,"$1").replace(/^\'(.+)\'$/,"$1"):"")}},"F+jD":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("fXoL");const a=["*"];let s=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-list-item"]],ngContentSelectors:a,decls:1,vars:0,template:function(e,t){1&e&&(i.lc(),i.kc(0))},styles:[""],encapsulation:2,changeDetection:0}),e})()},FFWI:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return y}));var i,a=n("AcyG"),s=n("7b4e"),o=n("WUhe"),r=n("Xk3F"),c=n("3fyd"),l=n("0UUK"),p=n("fXoL"),u=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(e){return e[e.Learning=0]="Learning",e[e.Assessment=1]="Assessment",e}({});const h={quizModeActive:!1,quizModeLocked:!1,quizQuestionsMode:"all",enableQuizRetake:!0,launchMode:g.Learning,questions:[],activeQuestionId:void 0,activeSubmission:void 0,questionSubmissions:[],quizSettings:{enabled:!0,showSummary:!0,showExplanation:!0,showSubmit:!0,showProgress:!0},pickMode:"single",lifecycle:l.a.Question};function b(e,t){return e.filter(e=>e.chapterId===t)}function m(e,t){const n=t.map(t=>b(e,t));return[].concat(...n)}function f(e){const t=function(e){return[...new Set(e.map(e=>e.chapterId))]}(e);return m(e,t)}let y=(()=>{let e=i=class{static getQuizQuestionsByChapter(e){return Object(a.i)([i],t=>b(t.questions,e))}static getLifecycle(e){return e.lifecycle}static getQuizSettings(e){return e.quizSettings}static getQuizModeActive(e){return e.quizModeActive}static getQuizModeLocked(e){return e.quizModeLocked}static getEnableQuizRetake(e){return e.enableQuizRetake}static getQuizReviewEnabled(e){const{quizModeLocked:t,quizQuestionsMode:n,questions:i,quizSettings:a}=e;return!(t&&!a.showSummary||t&&"restricted"===n&&1===i.length)}static globalSceneConfig(e){return e.sceneConfig}static hasQuiz(e){return e.questions.length>0}static getQuizEnabled(e){return!1!==e.quizSettings.enabled}static getAllQuestions(e){return e.questions}static getAllSubmissions(e){return e.questionSubmissions}static getActiveSubmitted(e){const{questionSubmissions:t,activeQuestionId:n}=e;return t.find(e=>e.questionId===n)}static getActiveSubmission(e){return e.activeSubmission}static getActiveQuestion(e){return e.questions.find(t=>t.id===e.activeQuestionId)}static getActiveQuestionId(e){return e.activeQuestionId}static getActiveQuestionLabels(e){const t=e.questions.find(t=>t.id===e.activeQuestionId);return t&&t.type===c.a.LabelAnatomy?t.data.options:[]}static getActiveQuestionIndex(e){return e.questions.findIndex(t=>t.id===e.activeQuestionId)}static getQuestionIndex(e,t){return Object(a.i)([i],n=>m(n.questions,e).findIndex(e=>e.id===t))}static getQuestionTotal(e){return e.questions.length}static getCorrectAnswerTotal(e){const{questionSubmissions:t,questions:n}=e;return t.filter(e=>{const t=n.find(t=>t.id===e.questionId);return Object(r.h)(t,e.answer)}).length}static getQuestionsRemaining(e){const{questions:t,questionSubmissions:n}=e;return t.length-n.length}static hasQuestionRemaining(e){const{questions:t,questionSubmissions:n}=e;return n.length<t.length}static getPickMode(e){return e.pickMode}resetQuizState(e,t){e.setState(Object.assign({},h))}setQuizState(e,{quizState:t}){e.setState(Object.assign(Object.assign({},h),t))}setQuizSettings(e,{quizSettings:t}){e.patchState({quizSettings:t})}setQuizActive(e,t){e.patchState({quizModeActive:t.active,activeQuestionId:!1===t.active?void 0:e.getState().activeQuestionId})}setQuizEnabled(e,t){const n=e.getState().quizSettings;e.patchState({quizSettings:Object.assign(Object.assign({},n),{enabled:t.enabled})})}setQuizLocked(e,t){e.patchState({quizModeLocked:t.locked})}setEnableQuizRetake(e,t){e.patchState({enableQuizRetake:t.enable})}setQuizQuestionsMode(e,t){e.patchState({quizQuestionsMode:t.mode})}copyQuestions(e,{sourceChapterId:t,targetChapterId:n}){const{questions:i}=e.getState(),a=[...i,...b(e.getState().questions,t).map(e=>Object.assign(Object.assign({},JSON.parse(JSON.stringify(e))),{id:s.a.idWithPrefix("question"),chapterId:n}))];e.patchState({questions:f(a)})}reorderQuestions(e,{chapterIds:t}){e.patchState({questions:m(e.getState().questions,t)})}addQuestion(e,t){const n=[...e.getState().questions,t.question];e.patchState({questions:f(n)})}setQuestions(e,{questions:t}){e.patchState({questions:f(t)})}setQuestion(e,t){const n=e.getState().questions.map(e=>e.id===t.question.id?t.question:e);e.patchState({questions:n})}removeQuestions(e,t){const n=e.getState(),i=null!=t.questionIds?t.questionIds:n.questions.map(e=>e.id),a=n.questions.filter(e=>!i.includes(e.id));e.patchState({questions:f(a)})}submitQuestionAnswer(e,t){const n=[...e.getState().questionSubmissions],i=n.findIndex(e=>e.questionId===t.submission.questionId);i>-1?n[i]=t.submission:n.push(t.submission),e.patchState({questionSubmissions:n})}nextQuestion(e){var t;const{questions:n,activeQuestionId:i}=e.getState(),a=(null===(t=n[e.getState().questions.findIndex(e=>e.id===i)+1])||void 0===t?void 0:t.id)||void 0;void 0!==a&&e.patchState({activeQuestionId:a})}previousQuestion(e){var t;const{questions:n,activeQuestionId:i}=e.getState(),a=(null===(t=n[e.getState().questions.findIndex(e=>e.id===i)-1])||void 0===t?void 0:t.id)||void 0;void 0!==a&&e.patchState({activeQuestionId:a})}clearSubmissions(e){e.patchState({questionSubmissions:[]})}setActiveQuestion(e,t){e.patchState({activeQuestionId:t.questionId})}setQuizPickMode(e,{pickMode:t}){e.patchState({pickMode:t})}setActiveSubmission(e,{submission:t}){e.patchState({activeSubmission:t})}setQuizLifecycle(e,t){e.patchState({lifecycle:t.lifecycle})}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac}),u([Object(a.a)(o.a.ResetQuizState),d("design:type",Function),d("design:paramtypes",[Object,o.a.ResetQuizState]),d("design:returntype",void 0)],e.prototype,"resetQuizState",null),u([Object(a.a)(o.a.SetQuizState),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetQuizState]),d("design:returntype",void 0)],e.prototype,"setQuizState",null),u([Object(a.a)(o.a.SetQuizSettings),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetQuizSettings]),d("design:returntype",void 0)],e.prototype,"setQuizSettings",null),u([Object(a.a)(o.a.SetQuizActive),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetQuizActive]),d("design:returntype",void 0)],e.prototype,"setQuizActive",null),u([Object(a.a)(o.a.SetQuizEnabled),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetQuizEnabled]),d("design:returntype",void 0)],e.prototype,"setQuizEnabled",null),u([Object(a.a)(o.a.SetQuizLocked),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetQuizLocked]),d("design:returntype",void 0)],e.prototype,"setQuizLocked",null),u([Object(a.a)(o.a.SetEnableQuizRetake),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetEnableQuizRetake]),d("design:returntype",void 0)],e.prototype,"setEnableQuizRetake",null),u([Object(a.a)(o.a.SetQuizQuestionsMode),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetQuizQuestionsMode]),d("design:returntype",void 0)],e.prototype,"setQuizQuestionsMode",null),u([Object(a.a)(o.a.CopyQuestions),d("design:type",Function),d("design:paramtypes",[Object,o.a.CopyQuestions]),d("design:returntype",void 0)],e.prototype,"copyQuestions",null),u([Object(a.a)(o.a.ReorderQuestions),d("design:type",Function),d("design:paramtypes",[Object,o.a.ReorderQuestions]),d("design:returntype",void 0)],e.prototype,"reorderQuestions",null),u([Object(a.a)(o.a.AddQuestion),d("design:type",Function),d("design:paramtypes",[Object,o.a.AddQuestion]),d("design:returntype",void 0)],e.prototype,"addQuestion",null),u([Object(a.a)(o.a.SetQuestions),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetQuestions]),d("design:returntype",void 0)],e.prototype,"setQuestions",null),u([Object(a.a)(o.a.SetQuestion),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetQuestion]),d("design:returntype",void 0)],e.prototype,"setQuestion",null),u([Object(a.a)(o.a.RemoveQuestions),d("design:type",Function),d("design:paramtypes",[Object,o.a.RemoveQuestions]),d("design:returntype",void 0)],e.prototype,"removeQuestions",null),u([Object(a.a)(o.a.SubmitQuestionAnswer),d("design:type",Function),d("design:paramtypes",[Object,o.a.SubmitQuestionAnswer]),d("design:returntype",void 0)],e.prototype,"submitQuestionAnswer",null),u([Object(a.a)(o.a.NextQuestion),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e.prototype,"nextQuestion",null),u([Object(a.a)(o.a.PreviousQuestion),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e.prototype,"previousQuestion",null),u([Object(a.a)(o.a.ClearSubmissions),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e.prototype,"clearSubmissions",null),u([Object(a.a)(o.a.SetActiveQuestion),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetActiveQuestion]),d("design:returntype",void 0)],e.prototype,"setActiveQuestion",null),u([Object(a.a)(o.a.SetQuizPickMode),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetQuizPickMode]),d("design:returntype",void 0)],e.prototype,"setQuizPickMode",null),u([Object(a.a)(o.a.SetActiveSubmission),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetActiveSubmission]),d("design:returntype",void 0)],e.prototype,"setActiveSubmission",null),u([Object(a.a)(o.a.SetQuizLifecycle),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetQuizLifecycle]),d("design:returntype",void 0)],e.prototype,"setQuizLifecycle",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getLifecycle",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",Object)],e,"getQuizSettings",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getQuizModeActive",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getQuizModeLocked",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getEnableQuizRetake",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",Boolean)],e,"getQuizReviewEnabled",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"globalSceneConfig",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"hasQuiz",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getQuizEnabled",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getAllQuestions",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getAllSubmissions",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getActiveSubmitted",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getActiveSubmission",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getActiveQuestion",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getActiveQuestionId",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",Array)],e,"getActiveQuestionLabels",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getActiveQuestionIndex",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getQuestionTotal",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getCorrectAnswerTotal",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getQuestionsRemaining",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"hasQuestionRemaining",null),u([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[Object]),d("design:returntype",void 0)],e,"getPickMode",null),e=i=u([Object(a.g)({name:"quiz",defaults:h})],e),e})()},FKtB:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("7b4e");!function(e){function t(e){return e.split("-")[0].replace(/_particle$/,"")}e.getParticleIdRoot=t,e.generateParticleId=function(e,n=a.a.getUuid){return`${t(e)}-${n()}`}}(i||(i={}))},FnMX:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("7HRe"),a=n("qgXg"),s=n("cp0P"),o=n("lJxs"),r=n("0EUg"),c=n("8pBO"),l=n("MCQd"),p=n("fXoL"),u=n("tk/3");let d=(()=>{class e{constructor(e){this.http=e}getOrganizationUsers(e){const t=l.a(e);return this.http.get("/ws/organization/users"+t).pipe(Object(o.a)(e=>e.users),Object(o.a)(e=>e.map(e=>Object.assign(Object.assign({},e),{user_role:Object(c.c)(e.user_role)}))))}getOrganizationInvites(e){const t=l.a(e);return this.http.get("/ws/organization/invite"+t).pipe(Object(o.a)(e=>e.invites),Object(o.a)(e=>e.map(e=>Object.assign(Object.assign({},e),{invite_user:Object.assign(Object.assign({},e.inviter_user),{user_role:Object(c.c)(e.inviter_user.user_role)}),invitee_user:Object.assign(Object.assign({},e.invitee_user),{user_role:Object(c.c)(e.invitee_user.user_role)})}))))}sendOrganizationInvites(e,t,n){return this.http.post("/ws/organization/invite",{version:2,group_eid:e,invite_emails:t,site_verify_response:n}).pipe(Object(o.a)(e=>{const{messages:t}=e.results_summary;return t}))}addUserToOrganization(e){return this.http.post("/ws/organization/user/add",{group_eid:e})}addUserWithGroupCode(e){return this.http.post("/ws/organization/user/add",{group_code:e}).pipe(Object(o.a)(e=>e.organization_name))}updateUserRoles(e,t){return this.batchUsers(t,t=>this.http.post("/ws/organization/users",{group_id:e,update_users:t.map(e=>({user_id:e.userId,role_id:e.roleId}))}))}removeUsers(e,t){return this.batchUsers(t,t=>this.http.post("/ws/organization/users",{group_id:e,remove_users:t.map(e=>this.createTransferRequest(e))}))}transferUserContent(e,t){return this.batchUsers(t,t=>this.http.post("/ws/organization/bookmark/transfer",{group_id:e,transfer_bookmarks:t.map(e=>this.createTransferRequest(e))}))}createUserDisplayModel(e,t){return{name:this.formatUserName(e),initials:this.formatBadgeLabel(e),email:e.user_email,id:e.user_id,role:e.user_role,selected:!1,invitationStatus:t}}batchUsers(e,t){let n=0;const c=[];for(;n<e.length;){const i=e.slice(n,n+50);c.push(t(i)),n+=50}const l=Object(i.a)(c,a.b).pipe(Object(r.a)());return Object(s.a)(l).pipe(Object(o.a)(()=>!0))}createTransferRequest(e){const{sourceUserId:t,targetUserId:n}=e;return"number"==typeof n?{user_id:t,group_bookmarks:{transfer_ownership:1,transfer_user_id:n}}:{user_id:t}}formatUserName(e){const{user_first_name:t,user_last_name:n}=e,i=[t,n].filter(e=>!!e);return i.length>0?i.join(" "):""}formatBadgeLabel(e){const{user_first_name:t,user_last_name:n}=e;return[t,n].filter(e=>!!e).map(e=>e[0]).join("")}}return e.\u0275fac=function(t){return new(t||e)(p.Zb(u.b))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},G0Z9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Light="theme-light",e.Dark="theme-dark",e}({})},GCmh:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var i=n("AcyG"),a=n("l4YF"),s=n("uwj7"),o=n("+8WF"),r=n("J9/X"),c=n("7PKw"),l=n("HDdC"),p=n("MKYd"),u=n("lJxs"),d=n("nYR2"),g=n("E13e"),h=n("XqAe"),b=n("kqJf"),m=n("tgUM"),f=n("EETq"),y=n("Mgbk");class v{}var O=n("ECVi"),S=n("k+hL"),x=n("ZR5G"),C=n("rDax"),w=n("+rOU"),j=n("DupM"),k=n("fXoL");let P=(()=>{class e{constructor(e,t){this.overlay=e,this.store=t}openDrawer(){this.overlayRef||this._createOverlay();const e=new w.c(j.a);this.overlayRef.attach(e)}closeDrawer(){this.overlayRef.detach()}_createOverlay(){const e=new C.d({hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block()});this.overlayRef=this.overlay.create(e),this.overlayRef.backdropClick().subscribe(()=>{this.store.dispatch(new r.a.ShowFilters(!1,!0))})}}return e.\u0275fac=function(t){return new(t||e)(k.Zb(C.c),k.Zb(i.h))},e.\u0275prov=k.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _=n("o6VQ"),M=n("LvDl"),I=n("ihWl"),T=n("AytR"),U=n("esev"),L=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},z=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const A={loading:!0,searchMode:s.a.Query,viewMode:o.b,showFilters:!1,searchResults:{total:0,items:[]},checkedResults:[],searchConfig:null,searchOptions:null,sidenav:{enabled:!0,open:!0,disableClose:!1},bulkActions:{enabled:!0,active:!1,items:[]},cardActions:{enabled:!0}},F=[..._.e.tags,..._.d.tags,..._.c.tags];let D=(()=>{let e=class{constructor(e,t,n,i,a,s){this.organizationsService=e,this.modulesService=t,this.exploreService=n,this.bookmarksService=i,this.galleryService=a,this.store=s}static getLoading(e){return e.loading}static getSearchMode(e){return e.searchMode}static getSearchConfig(e){return e.searchConfig}static getSearchOptions(e){return e.searchOptions}static getAvailableTags(e){const t=[],n=e.searchResults.items,i=T.a.native?U.a.getOfflineModelIDList():[];return n.forEach(e=>{e.tags.forEach(e=>{"quiz"===e&&(e="Quiz"),F.includes(e)&&!t.includes(e)&&t.push(e)}),T.a.native&&i.includes(e.id)&&!t.includes("Downloaded")&&t.push("Downloaded")}),t}static getActiveTags(e){const t={};return e.searchConfig.tags.forEach(e=>{const n=_.a.find(t=>t.tags.some(t=>t===e)),i=Object(M.get)(n,"title","");t[i]=e}),t}static getActiveTagsCount(e){const t=e.searchConfig;return Object(M.compact)(t.tags).length}static getSearchType(e){return e.searchConfig?e.searchConfig.type:null}static getSearchGroup(e){var t;switch(null===(t=e.searchConfig)||void 0===t?void 0:t.type){case f.a.Category:case f.a.Community:case f.a.Internal:case f.a.Loft:return x.a.Module;case f.a.Collection:case f.a.Private:case f.a.Organization:return x.a.Bookmark}}static getViewMode(e){return e.viewMode}static getShowFilters(e){return e.showFilters}static getSort(e){return e.searchOptions.sortBy}static getSortOptions(e){switch(e.searchConfig.type){case f.a.Loft:return[m.f,m.g];case f.a.Category:return[m.e,m.d,m.f,m.g];default:return[m.d,m.f,m.g,m.a,m.b]}}static getSidenav(e){return e.sidenav}static getBulkActions(e){return e.bulkActions}static getBulkActionsAvailable(e){const{enabled:t,items:n}=e.bulkActions;return t&&n.length>0}static getBulkActionsActive(e){return e.bulkActions.active}static getCardActions(e){return e.cardActions}static getFilteredResults(e,t){const{searchResults:n,searchOptions:i}=e,{ascending:a,fields:s}=i.sortBy,{offset:o,pageSize:r}=i,c=Object(b.a)(n.items,s,a).slice(o,o+r);return Object.assign(Object.assign({},n),{items:c})}static getAllResults(e,t){const{searchResults:n,searchOptions:i}=e,{ascending:a,fields:s}=i.sortBy,o=Object(b.a)(n.items,s,a);return{total:n.total,items:o}}static getCheckedResults(e){return e.checkedResults}setSearchMode(e,t){e.patchState({searchMode:t.searchMode})}setViewMode(e,t){e.patchState({viewMode:t.viewMode})}showFilters(e,t){e.patchState({showFilters:t.show}),t.triggerDrawer&&(t.show?this.galleryService.openDrawer():this.galleryService.closeDrawer())}setSearchOptions(e,t){e.patchState({searchOptions:Object.assign({},t.options)})}setActiveTags(e,t){const n=e.getState().searchConfig,i=Object.assign(Object.assign({},n),{tags:Object(M.flatten)(Object.values(t.activeTags))});this.store.dispatch(new r.a.SetSearchConfig(i))}setSearchConfig(e,t){const n=t.config||e.getState().searchConfig,i=t.options||e.getState().searchOptions;null!==n&&e.patchState({searchOptions:Object.assign({},i),searchConfig:Object.assign({},n)})}searchCategory(e,{categoryId:t}){const n="public"===t?new I.c(""):new I.a(t);e.dispatch(new r.a.SetSearchConfig(n))}searchStudio(e,t){const{searchConfig:n,searchOptions:i}=e.getState(),a=new y.a("",m.f),s=this.store.selectSnapshot(O.a.getUserLanguage);e.patchState({loading:!0,searchOptions:Object.assign(Object.assign({},i),{pageSize:a.pageSize,offset:a.offset}),checkedResults:[]});let o=new l.a;switch(n.type){case f.a.Category:o=this.exploreService.getAnatomyCategory(n.query,"all"===n.categoryId?"":n.categoryId,n.tags.filter(e=>!e.startsWith("Downloaded")),s);break;case f.a.Organization:o=this.bookmarksService.getOrganizationContent(n.organizationId,n.query);break;case f.a.Collection:o=this.organizationsService.getCollectionContent(n.organizationId,n.collectionId,n.query);break;case f.a.Community:o=this.bookmarksService.getPublicBookmarks(n.query);break;case f.a.Private:o=this.bookmarksService.getPrivateContent(n.query);break;case f.a.Internal:o=this.exploreService.searchInternal(n.query,n.directory);break;case f.a.Loft:const e=n.query.indexOf(".json")>0;o=this.modulesService.listContents(n.primary,n.secondary,e?n.query:"",!0).pipe(Object(u.a)(t=>e?t:t.filter(e=>e.title.indexOf(n.query)>=0)))}o.pipe(Object(d.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{const i=T.a.native?U.a.getOfflineModelIDList():[],a=n.tags.includes("Downloaded")?t.filter(e=>i.includes(e.id)):t;e.dispatch(new r.a.SearchSuccess(a))})}searchSuccess(e,t){e.patchState({searchResults:{items:t.bookmarks,total:t.bookmarks.length}})}checkItem(e,t){let n=e.getState().checkedResults;const i=n.some(e=>e===t.id);t.checked&&!i?n=[...n,t.id]:t.checked||(n=n.filter(e=>e!==t.id)),e.patchState({checkedResults:n})}checkAll(e,t){const n=e.getState().searchResults.items.map(e=>e.id);e.patchState({checkedResults:n})}uncheckAll(e,t){e.patchState({checkedResults:[]})}setCheckedItems(e,t){e.patchState({checkedResults:t.ids})}setSidenav(e,t){e.patchState({sidenav:Object.assign({},t.sidenav)})}setCardActions(e,t){e.patchState({cardActions:Object.assign({},t.cardActions)})}setBulkActions(e,t){const{bulkActions:n}=e.getState();e.patchState({bulkActions:Object.assign(Object.assign({},n),t.bulkActions)})}clearResults(e,t){e.patchState({searchResults:{items:[],total:0}})}resetGallery(e,t){e.patchState(A)}};return e.\u0275fac=function(t){return new(t||e)(k.Zb(c.a),k.Zb(p.a),k.Zb(g.a),k.Zb(h.a),k.Zb(P),k.Zb(i.h))},e.\u0275prov=k.Lb({token:e,factory:e.\u0275fac}),L([Object(i.a)(r.a.SetSearchMode),z("design:type",Function),z("design:paramtypes",[Object,r.a.SetSearchMode]),z("design:returntype",void 0)],e.prototype,"setSearchMode",null),L([Object(i.a)(r.a.SetViewMode),z("design:type",Function),z("design:paramtypes",[Object,r.a.SetViewMode]),z("design:returntype",void 0)],e.prototype,"setViewMode",null),L([Object(i.a)(r.a.ShowFilters),z("design:type",Function),z("design:paramtypes",[Object,r.a.ShowFilters]),z("design:returntype",void 0)],e.prototype,"showFilters",null),L([Object(i.a)(r.a.SetSearchOptions),z("design:type",Function),z("design:paramtypes",[Object,r.a.SetSearchOptions]),z("design:returntype",void 0)],e.prototype,"setSearchOptions",null),L([Object(i.a)(r.a.SetActiveTags),z("design:type",Function),z("design:paramtypes",[Object,r.a.SetActiveTags]),z("design:returntype",void 0)],e.prototype,"setActiveTags",null),L([Object(i.a)(r.a.SetSearchConfig),z("design:type",Function),z("design:paramtypes",[Object,r.a.SetSearchConfig]),z("design:returntype",void 0)],e.prototype,"setSearchConfig",null),L([Object(i.a)(r.a.SearchCategory),z("design:type",Function),z("design:paramtypes",[Object,r.a.SearchCategory]),z("design:returntype",void 0)],e.prototype,"searchCategory",null),L([Object(i.a)(r.a.SearchStudio),z("design:type",Function),z("design:paramtypes",[Object,r.a.SearchStudio]),z("design:returntype",void 0)],e.prototype,"searchStudio",null),L([Object(i.a)(r.a.SearchSuccess),z("design:type",Function),z("design:paramtypes",[Object,r.a.SearchSuccess]),z("design:returntype",void 0)],e.prototype,"searchSuccess",null),L([Object(i.a)(r.a.CheckItem),z("design:type",Function),z("design:paramtypes",[Object,r.a.CheckItem]),z("design:returntype",void 0)],e.prototype,"checkItem",null),L([Object(i.a)(r.a.CheckAll),z("design:type",Function),z("design:paramtypes",[Object,r.a.CheckAll]),z("design:returntype",void 0)],e.prototype,"checkAll",null),L([Object(i.a)(r.a.UncheckAll),z("design:type",Function),z("design:paramtypes",[Object,r.a.UncheckAll]),z("design:returntype",void 0)],e.prototype,"uncheckAll",null),L([Object(i.a)(r.a.SetCheckedItems),z("design:type",Function),z("design:paramtypes",[Object,r.a.SetCheckedItems]),z("design:returntype",void 0)],e.prototype,"setCheckedItems",null),L([Object(i.a)(r.a.SetSidenav),z("design:type",Function),z("design:paramtypes",[Object,r.a.SetSidenav]),z("design:returntype",void 0)],e.prototype,"setSidenav",null),L([Object(i.a)(r.a.SetCardActions),z("design:type",Function),z("design:paramtypes",[Object,r.a.SetCardActions]),z("design:returntype",void 0)],e.prototype,"setCardActions",null),L([Object(i.a)(r.a.SetBulkActions),z("design:type",Function),z("design:paramtypes",[Object,r.a.SetBulkActions]),z("design:returntype",void 0)],e.prototype,"setBulkActions",null),L([Object(i.a)(r.a.ClearResults),z("design:type",Function),z("design:paramtypes",[Object,r.a.ClearResults]),z("design:returntype",void 0)],e.prototype,"clearResults",null),L([Object(i.a)(r.a.Reset),z("design:type",Function),z("design:paramtypes",[Object,r.a.Reset]),z("design:returntype",void 0)],e.prototype,"resetGallery",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getLoading",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getSearchMode",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getSearchConfig",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getSearchOptions",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getAvailableTags",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getActiveTags",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getActiveTagsCount",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getSearchType",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getSearchGroup",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getViewMode",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getShowFilters",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getSort",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getSortOptions",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getSidenav",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getBulkActions",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getBulkActionsAvailable",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",Boolean)],e,"getBulkActionsActive",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getCardActions",null),L([Object(i.f)([O.a]),z("design:type",Function),z("design:paramtypes",[a.b,S.a]),z("design:returntype",v)],e,"getFilteredResults",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b,S.a]),z("design:returntype",v)],e,"getAllResults",null),L([Object(i.f)(),z("design:type",Function),z("design:paramtypes",[a.b]),z("design:returntype",void 0)],e,"getCheckedResults",null),e=L([Object(i.g)({name:"gallery",defaults:A})],e),e})()},GMXD:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("AcyG");class a{}var s,o=n("gm/O"),r=n("JaAu"),c=n("E32s"),l=n("UsYJ"),p=n("0Yvn"),u=n("fXoL"),d=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const h={activeChapterId:void 0,nodeState:void 0,patches:[],patchesForChapter:{}};let b=(()=>{let e=s=class{constructor(){}static getAllNodeState(e){return e.nodeState}static getActiveChapter(e){return e.activeChapterId}static getPatches(e){return e.patches}static getNodes(e){return void 0===e.activeChapterId||void 0===e.nodeState?{}:e.nodeState[e.activeChapterId]||{}}static getNodePaint(e){return t=>e.nodeState[e.activeChapterId][t].paint}static getNodeIds(e){return Object.keys(s.getNodes(e))}static getCheckedNodeIds(e){return Object.values(s.getNodes(e)).filter(e=>e.checked).map(e=>e.objectId)}static getCheckedNodes(e){return s.getCheckedNodeIds(e).map(t=>e.nodeState[e.activeChapterId][t])}static getUncheckedNodeIds(e){return s.getNodeIds(e).filter(t=>!e.nodeState[e.activeChapterId][t].checked)}static getSelectedNode(e){const t=s.getNodeIds(e).find(t=>e.nodeState[e.activeChapterId][t].selected);return t?e.nodeState[e.activeChapterId][t]:void 0}reset(e,t){e.patchState(immer.produce(e.getState(),e=>{e.activeChapterId=void 0,e.nodeState=void 0,e.patches=[],e.patchesForChapter={}}))}applyPatch(e,t){const n=immer.applyPatches(e.getState(),t.patches),i=immer.produce(n,e=>{e.patchesForChapter[e.activeChapterId].push(...t.patches),e.patches=t.patches});e.patchState(i)}initNodeState(e,t){e.patchState({nodeState:t.nodeState})}setActiveChapter(e,t){const n=e.getState(),i=immer.produce(n,e=>{e.activeChapterId=t.activeChapterId,e.patchesForChapter[t.activeChapterId]=e.patchesForChapter[t.activeChapterId]||[],e.patches=e.patchesForChapter[t.activeChapterId]});e.patchState(i)}duplicateNodeState(e,t){const n=e.getState(),i=immer.produce(n,e=>{e.nodeState[t.copyChapterId]=e.nodeState[t.originalChapterId],e.patchesForChapter[t.copyChapterId]=e.patchesForChapter[t.originalChapterId].map(e=>(e.path[1]=t.copyChapterId,e))});e.patchState(i)}updateNodesShown(e,t){const n=e.getState(),{finalState:i,patches:a,inversePatches:s}=Object(l.a)(n,t);e.patchState(i),t.record&&e.dispatch(new r.a.SavePatches([{forward:a,inverse:s,patchAction:o.a.ApplyPatch}]))}updateNodesSelected(e,t){const n=e.getState();if(!n)return;const i=immer.produce(n,e=>{var n,i;const a=null!==(i=null===(n=e.nodeState)||void 0===n?void 0:n[e.activeChapterId])&&void 0!==i?i:{},s=Object.keys(a);switch(t.objectId){case void 0:s.forEach(e=>a[e].selected=!1);break;default:s.forEach(e=>a[e].selected=!1),a[t.objectId].selected=!0}});e.patchState(i)}updateNodesChecked(e,t){const n=e.getState(),[i,a,s]=immer.produceWithPatches(n,e=>{var n,i;const a=null!==(i=null===(n=e.nodeState)||void 0===n?void 0:n[e.activeChapterId])&&void 0!==i?i:{};switch(t.patch){case void 0:(t.objectIds||Object.keys(a)).forEach(e=>{a[e].checked=t.checked,t.objectIds&&Object(c.a)(e,a,"checked",t.checked)});break;default:Object.entries(t.patch).forEach(([e,t])=>a[e].checked=t)}}),o=immer.produce(i,e=>{e.patches=a});e.patchState(o)}updateNodesPickable(e,t){const n=e.getState(),[i,a,s]=immer.produceWithPatches(n,e=>{var n,i;const a=null!==(i=null===(n=e.nodeState)||void 0===n?void 0:n[e.activeChapterId])&&void 0!==i?i:{};t.patch?Object.entries(t.patch).forEach(([e,t])=>a[e].pickable=t):(t.objectIds||Object.keys(a)).forEach(e=>{a[e].pickable=t.pickable,t.objectIds&&Object(c.a)(e,a,"pickable",t.pickable)})}),l=immer.produce(i,e=>{e.patches=a,e.patchesForChapter[e.activeChapterId].push(...a)});e.patchState(l),e.dispatch(new r.a.SavePatches([{forward:a,inverse:s,patchAction:o.a.ApplyPatch}]))}updateNodesPaint(e,t){const n=e.getState(),[i,a,s]=immer.produceWithPatches(n,e=>{var n,i;const a=null!==(i=null===(n=e.nodeState)||void 0===n?void 0:n[e.activeChapterId])&&void 0!==i?i:{},s=t.objectIds||Object.keys(a);t.patch?Object.entries(t.patch).forEach(([e,t])=>{const n=p.a.mergeRecipes(a[e].paint,t);a[e].paint=n}):s.forEach(e=>{const n=p.a.mergeRecipes(a[e].paint,t.recipe);a[e].paint=n,t.objectIds&&Object(c.a)(e,a,"paint",n)})}),l=immer.produce(i,e=>{e.patches=a,e.patchesForChapter[e.activeChapterId].push(...a)});e.patchState(l),t.record&&e.dispatch(new r.a.SavePatches([{forward:a,inverse:s,patchAction:o.a.ApplyPatch}]))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Lb({token:e,factory:e.\u0275fac}),d([Object(i.a)(o.a.Reset),g("design:type",Function),g("design:paramtypes",[Object,o.a.Reset]),g("design:returntype",void 0)],e.prototype,"reset",null),d([Object(i.a)(o.a.ApplyPatch),g("design:type",Function),g("design:paramtypes",[Object,o.a.ApplyPatch]),g("design:returntype",void 0)],e.prototype,"applyPatch",null),d([Object(i.a)(o.a.InitNodeState),g("design:type",Function),g("design:paramtypes",[Object,o.a.InitNodeState]),g("design:returntype",void 0)],e.prototype,"initNodeState",null),d([Object(i.a)(o.a.SetActiveChapter),g("design:type",Function),g("design:paramtypes",[Object,o.a.SetActiveChapter]),g("design:returntype",void 0)],e.prototype,"setActiveChapter",null),d([Object(i.a)(o.a.DuplicateNodeState),g("design:type",Function),g("design:paramtypes",[Object,o.a.DuplicateNodeState]),g("design:returntype",void 0)],e.prototype,"duplicateNodeState",null),d([Object(i.a)(o.a.UpdateNodesShown),g("design:type",Function),g("design:paramtypes",[Object,o.a.UpdateNodesShown]),g("design:returntype",void 0)],e.prototype,"updateNodesShown",null),d([Object(i.a)(o.a.UpdateNodeSelected),g("design:type",Function),g("design:paramtypes",[Object,o.a.UpdateNodeSelected]),g("design:returntype",void 0)],e.prototype,"updateNodesSelected",null),d([Object(i.a)(o.a.UpdateNodesChecked),g("design:type",Function),g("design:paramtypes",[Object,o.a.UpdateNodesChecked]),g("design:returntype",void 0)],e.prototype,"updateNodesChecked",null),d([Object(i.a)(o.a.UpdateNodesPickable),g("design:type",Function),g("design:paramtypes",[Object,o.a.UpdateNodesPickable]),g("design:returntype",void 0)],e.prototype,"updateNodesPickable",null),d([Object(i.a)(o.a.UpdateNodesPaint),g("design:type",Function),g("design:paramtypes",[Object,o.a.UpdateNodesPaint]),g("design:returntype",void 0)],e.prototype,"updateNodesPaint",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getAllNodeState",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getActiveChapter",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getPatches",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getNodes",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getNodePaint",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getNodeIds",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getCheckedNodeIds",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getCheckedNodes",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getUncheckedNodeIds",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getSelectedNode",null),e=s=d([Object(i.g)({name:"engineNodes",defaults:h})],e),e})()},GUwF:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("LvDl");class a{constructor(e={}){const{tintColor:t,saturation:n,contrast:i,brightness:a,opacity:s}=e;this.tintColor=t,this.saturation=n,this.contrast=i,this.brightness=a,this.opacity=s}static isFresnel(e){return Array.isArray(e)&&5===e.length}static isColor(e){return Array.isArray(e)&&3===e.length}static isEqual(e,t){return!(!e||!t)&&JSON.stringify(e,Object.keys(e).sort())===JSON.stringify(t,Object.keys(t).sort())}static isRealRecipe(e){return!Object(i.isNil)(e)&&(!Object(i.isNil)(e.brightness)&&!1!==e.brightness||!Object(i.isNil)(e.contrast)&&!1!==e.contrast||!Object(i.isNil)(e.opacity)&&!1!==e.opacity||!Object(i.isNil)(e.saturation)&&!1!==e.saturation||!Object(i.isNil)(e.tintColor)&&!1!==e.tintColor)}static compare(e,t){try{const n=a.hue(e),i=a.hue(t),s=!1===e.opacity?1:e.opacity,o=!1===t.opacity?1:t.opacity;return n===i?s===o?e.saturation===t.saturation?e.brightness===t.brightness?e.contrast>t.contrast?n+4:n-4:e.brightness>t.brightness?n+3:n-3:e.saturation>t.saturation?n+2:n-2:s>o?n+1:n-1:n-i}catch(n){return 0}}static hue(e){if(!e.tintColor)return-10;const t=e.tintColor[0],n=e.tintColor[1],i=e.tintColor[2],a=Math.max(t,n,i),s=a-Math.min(t,n,i);let o=0;return o=a===t?(n-i)/s:a===n?2+(i-t)/s:4+(t-n)/s,o*=60,o<0&&(o+=360),o}static generateUniqueRecipes(e){const t=[];return e.forEach(e=>{-1===a.recipeIndexOf(t,e)&&t.push(e)}),t}static recipeIndexOf(e,t){return e.findIndex(e=>a.isEqual(e,t))}}},GmhI:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){class t{constructor(){}}t.type="[Memory] Reset",e.Reset=t;class n{constructor(e,t=!1){this.isFirstChapter=e,this.logToConsole=t}}n.type="[Memory] Update",e.Update=n}(i||(i={}))},H7eZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e,t,n,i,a){this.left=e,this.top=t,this.width=n,this.height=i,this.visibility=a}}},HdmJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Dark="dark",e.Light="light",e.Themed="themed",e}({})},I0z8:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("RX1/");class a extends i.a{constructor(){super(...arguments),this.version=4}static toJSON(e){return{version:e.version,app_producttype:e.app_producttype,app_productkey:e.app_productkey,email:e.email,password:e.password,first_name:e.firstName,last_name:e.lastName,group_invite_mode:e.groupInviteMode,group_invite_key:e.groupInviteKey,group_code_mode:e.groupCodeMode,group_code:e.groupCode,group_ovid_mode:e.groupOvidMode,group_ovid_osptok:e.groupOvidOsptok,platform:e.platform,return_to:e.returnTo,brand_id:e.brandId,locale_id:e.localeId,timestamp:e.timestamp,site_verify_response:e.site_verify_response}}}},INTG:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return O})),n.d(t,"c",(function(){return S})),n.d(t,"a",(function(){return x}));var i=n("fXoL"),a=n("ofXK"),s=n("2Yyj"),o=n.n(s),r=n("Kd/A"),c=n.n(r),l=n("Hfs6"),p=n.n(l),u=n("VLs4"),d=n.n(u),g=n("1IWC"),h=n.n(g),b=n("Paii"),m=n.n(b),f=n("vT00");const y={title:"English",lang:"en",country:"us",id:"en-US"},v=[y,{title:"Espa\xf1ol",lang:"es",country:"es",id:"es-ES"},{title:"\u4e2d\u6587(\u7b80\u4f53)",lang:"zh",country:"cn",id:"zh-CN"},{title:"Fran\xe7ais",lang:"fr",country:"fr",id:"fr-FR"},{title:"Deutsch",lang:"de",country:"de",id:"de-DE"},{title:"Italiano",lang:"it",country:"it",id:"it-IT"},{title:"\u65e5\u672c\u8a9e",lang:"ja",country:"ja",id:"ja"},{title:"Portugu\xeas",lang:"pt",country:"pt",id:"pt-PT"}],O={en:"englishLocaleButton",es:"spanishLocaleButton",zh:"chineseLocaleButton",fr:"frenchLocaleButton",de:"germanLocaleButton",it:"italianLocaleButton",ja:"japaneseLocaleButton",pt:"portugueseLocaleButton"};function S(){let e="";try{e=localStorage.getItem("locale")}catch(t){}return(v.find(t=>t.id===e)||y).id}[o.a,c.a,p.a,d.a,h.a,m.a,n.n(f).a].forEach(e=>{Object(a.D)(e)});let x=(()=>{class e{static forRoot(){return{ngModule:e,providers:[{provide:i.w,useFactory:S}]}}}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e})()},Ie6O:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("icKS"),a=n("fXoL"),s=n("tk/3");let o=(()=>{class e{constructor(e,t){this.http=e,this.productService=t}trackContentPublish(e,t){return this.http.post("/ws/user/analytics/content/inapp/publish",{version:4,app_producttype:this.productService.productType,app_productkey:this.productService.productKey,content_type:t,content_id:e})}trackContentView(e,t){return this.http.post("/ws/user/analytics/content/inapp/view",{version:4,app_producttype:this.productService.productType,app_productkey:this.productService.productKey,content_type:t,content_id:e})}checkContentView(){return this.http.get("/ws/user/content/inapp/view/check")}}return e.\u0275fac=function(t){return new(t||e)(a.Zb(s.b),a.Zb(i.a))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},IlST:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return g}));var i=n("HdmJ"),a=n("fXoL"),s=n("ofXK");const o=["app-button",""],r=function(e,t,n,i,a,s,o,r,c,l,p,u,d,g,h,b,m,f,y,v,O,S,x,C){return{"app-button--xsmall":e,"app-button--small":t,"app-button--medium":n,"app-button--large":i,"app-button--flat":a,"app-button--default":s,"app-button--primary":o,"app-button--white":r,"app-button--info":c,"app-button--outline":l,"app-button--text":p,"app-button--light":u,"app-button--dark":d,"app-button--themed":g,"app-button--circle":h,"app-button--rounded":b,"app-button--square":m,"app-button--selected":f,"app-button--uppercase":y,"app-button--disabled":v,"app-button--no-border":O,"app-button--expanded":S,"app-button--left":x,"app-button--loading":C}},c=["*"];var l=function(e){return e.XSmall="xsmall",e.Small="small",e.Medium="medium",e.Large="large",e}({}),p=function(e){return e.Default="default",e.Flat="flat",e.Primary="primary",e.Info="info",e.Outline="outline",e.Text="text",e.White="white",e}({}),u=function(e){return e.Default="default",e.Circle="circle",e.Rounded="rounded",e.Square="square",e}({}),d=function(e){return e.Left="left",e.Center="center",e}({});let g=(()=>{class e{constructor(){this.buttonSize=l.Medium,this.buttonType=p.Default,this.buttonTheme=i.a.Dark,this.buttonShape=u.Default,this.buttonAlign=d.Center,this.uppercase=!0,this.selected=!1,this.expanded=!1,this.loading=!1,this.bordered=!0}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Jb({type:e,selectors:[["button","app-button",""],["a","app-button",""]],hostVars:1,hostBindings:function(e,t){2&e&&a.Yb("disabled",t.disabled)},inputs:{buttonSize:"buttonSize",buttonType:"buttonType",buttonTheme:"buttonTheme",buttonShape:"buttonShape",buttonAlign:"buttonAlign",uppercase:"uppercase",selected:"selected",expanded:"expanded",loading:"loading",disabled:"disabled",bordered:"bordered"},attrs:o,ngContentSelectors:c,decls:3,vars:26,consts:[[1,"app-button",3,"ngClass"],[1,"app-button__container"]],template:function(e,t){1&e&&(a.lc(),a.Vb(0,"span",0),a.Vb(1,"span",1),a.kc(2),a.Ub(),a.Ub()),2&e&&a.mc("ngClass",a.wc(1,r,["xsmall"==t.buttonSize,"small"==t.buttonSize,"medium"==t.buttonSize,"large"==t.buttonSize,"flat"==t.buttonType,"default"==t.buttonType,"primary"==t.buttonType,"white"==t.buttonType,"info"==t.buttonType,"outline"==t.buttonType,"text"==t.buttonType,"light"==t.buttonTheme,"dark"==t.buttonTheme,"themed"==t.buttonTheme,"circle"==t.buttonShape,"rounded"==t.buttonShape,"square"==t.buttonShape,t.selected,t.uppercase,t.disabled,!t.bordered,t.expanded,"left"===t.buttonAlign,t.loading]))},directives:[s.m],styles:['.text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}a[app-button],button[app-button]{border-color:transparent;background:none;border-width:0;padding:0;margin:0;border-radius:4px;outline:0 none}a[app-button]:not([disabled]):hover,button[app-button]:not([disabled]):hover{cursor:pointer}a[app-button]:focus .app-button,button[app-button]:focus .app-button{outline:2px solid #2d72dc!important}.app-button{font-size:13px;letter-spacing:.325px;line-height:1.4em;align-items:center;border-radius:4px;display:flex;font-family:Inter UI,sans-serif;justify-content:center;padding:0 16px;position:relative;text-align:center;transition:background-color .12s;width:100%}.app-button:after{content:" ";background-color:#283853;border-radius:4px;display:block;position:absolute;left:0;top:0;bottom:0;right:0;opacity:0;z-index:1;transition:opacity .06s}.app-button:not(.app-button--disabled):hover:after{opacity:.7}.app-button__container{position:relative;z-index:2;width:100%}.app-button--uppercase{text-transform:uppercase}.app-button--expanded{display:flex;flex:1}.app-button--xsmall{height:24px;min-width:24px;padding:0 8px;font-size:10px;letter-spacing:.25px;line-height:1.4em}.app-button--small{height:32px;min-width:32px;padding:0 12px}.app-button--medium,.app-button--small{font-size:13px;letter-spacing:.325px;line-height:1.4em}.app-button--medium{height:36px;min-width:36px;padding:0 16px}.app-button--large{height:48px;min-width:48px;padding:0 16px;font-size:14px;letter-spacing:.35px;line-height:1.4em}.app-button--no-border,.app-button--no-border:after{border-radius:0!important}.app-button--left{text-align:left}.app-button--themed{color:#374a68}.app-button--themed:hover{color:#1c2a3f}.app-button--themed:after{background-color:#d7e0ea}.app-button--dark{color:#d7e0ea}.app-button--dark:hover{color:#fff}.app-button--dark:after{background-color:#283853}.app-button--dark.app-button--flat{background:#374a68}.app-button--dark.app-button--default{background:transparent}.app-button--dark.app-button--outline{background:transparent;border:1px solid #374a68;transition:border-color .12s}.app-button--dark.app-button--outline:hover{border-color:#96a8c0}.app-button--dark.app-button--outline:hover:after{background-color:transparent;display:none}.app-button--dark.app-button--text{background:transparent;color:#d7e0ea}.app-button--dark.app-button--text:hover{color:#fff}.app-button--dark.app-button--text:hover:after{display:none}.app-button--dark.app-button--selected{background-color:#2d72dc;color:#fff}.app-button--dark.app-button--selected:hover:after{display:none}.app-button--light{color:#283853}.app-button--light:hover{color:#1c2a3f}.app-button--light:after{background-color:#96a8c0}.app-button--light:not(.app-button--disabled):hover:after{opacity:.6}.app-button--light::-moz-focus-inner{border:0}.app-button--light:not([disabled]):hover{cursor:pointer}.app-button--light[disabled]{pointer-events:none}.app-button--light.app-button--flat{background:#d7e0ea;font-weight:500}.app-button--light.app-button--flat.app-button--selected{background-color:#96a8c0}.app-button--light.app-button--default{background:transparent;color:#131c2a}.app-button--light.app-button--default:not(.app-button--disabled):hover:after{opacity:.2}.app-button--light.app-button--outline{background:transparent;border:1px solid #96a8c0;color:#283853;transition:border-color .12s}.app-button--light.app-button--outline:after{display:none}.app-button--light.app-button--outline:hover{background:rgba(55,74,104,.05);border-color:#374a68;color:#1c2a3f}.app-button--light.app-button--outline:hover:after{background-color:transparent}.app-button--light.app-button--selected{background-color:#eaeff5}.app-button--light.app-button--selected:hover:after{display:none}.app-button--light.app-button--text{color:#283853}.app-button--light.app-button--text:hover{color:#1c2a3f}.app-button--light.app-button--text:hover:after{display:none}.app-button.app-button--primary{background:#de3535;color:#fff}.app-button.app-button--primary:after{background:#f9fafd}.app-button.app-button--primary:hover:after{opacity:.1}.app-button.app-button--white{background:#fff;color:#283853;transition:border-color .12s}.app-button.app-button--white:hover{border-color:#96a8c0}.app-button.app-button--white:hover:after{background-color:#131c2a;display:none}.app-button.app-button--info{background:#2d72dc;color:#fff}.app-button.app-button--info:after{background:#f9fafd}.app-button.app-button--info:hover:after{opacity:.1}.app-button--selected{background-color:#2d72dc}.app-button--disabled:not(.app-button--loading){opacity:.5}.app-button--loading{background-color:#eaeff5!important;color:#61779e!important}.app-button--circle{border-radius:50%}.app-button--circle.app-button--xsmall{width:24px}.app-button--circle.app-button--small{width:32px;padding:0 6px}.app-button--circle.app-button--medium{width:36px;padding:0 8px}.app-button--circle.app-button--large{width:48px}.app-button--circle:after{border-radius:50%}.app-button--square{padding:0}.app-button--square.app-button--xsmall{width:24px;height:24px}.app-button--square.app-button--small{width:32px;height:32px}.app-button--square.app-button--medium{width:36px;height:36px}.app-button--square.app-button--large{width:48px;height:48px}.app-button--rounded,.app-button--rounded:after{border-radius:18px}'],encapsulation:2,changeDetection:0}),e})()},J5ja:function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));var i=n("AcyG"),a=n("LvDl"),s=n("LRne"),o=n("l5mm"),r=n("pLZG"),c=n("eIep"),l=n("lJxs"),p=n("Kn5L"),u=n("0IaG"),d=n("HDdC"),g=n("Ryms"),h=n("j8e5"),b=n("fXoL"),m=n("tyNb"),f=n("L2KA"),y=n("ofXK"),v=n("IlST"),O=n("Y+XQ");function S(e,t){if(1&e&&b.Qb(0,"app-tag",10),2&e){const e=b.gc();b.mc("icon",e.content.tagIcon)("label",e.content.tag)}}function x(e,t){if(1&e&&(b.Vb(0,"div",11),b.Pc(1),b.Ub()),2&e){const e=b.gc();b.Db(1),b.Rc(" ",e.content.description," ")}}function C(e,t){if(1&e){const e=b.Wb();b.Vb(0,"a",12),b.cc("click",(function(){return b.Cc(e),b.gc().handleSecondaryActionClick()})),b.Pc(1),b.Ub()}if(2&e){const e=b.gc();b.Db(1),b.Rc(" ",e.content.secondaryActionText," ")}}function w(e,t){if(1&e&&(b.Vb(0,"div",13),b.Qb(1,"img",14),b.Ub()),2&e){const e=b.gc();b.Db(1),b.mc("src",e.content.image,b.Fc),b.Eb("alt",e.content.title)}}let j=(()=>{class e{constructor(){this.actionClick=new b.p,this.secondaryActionClick=new b.p}ngOnInit(){}handleActionClick(){this.actionClick.emit()}handleSecondaryActionClick(){this.secondaryActionClick.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=b.Jb({type:e,selectors:[["app-callout-content"]],inputs:{content:"content",compact:"compact"},outputs:{actionClick:"actionClick",secondaryActionClick:"secondaryActionClick"},decls:13,vars:8,consts:[["data-test","calloutContent",1,"callout","flex","flex-row","items-center"],[1,"callout__content","flex","flex-column","items-start","ph-4"],[1,"flex","flex-row","items-center",2,"flex-wrap","wrap"],["data-test","calloutContentTitle",1,"callout__title"],["data-test","calloutContentTag",3,"icon","label",4,"ngIf"],["class","callout__description mt-5","data-test","calloutContentDescription",4,"ngIf"],[1,"callout__actions","mt-10"],["type","button","app-button","","buttonTheme","light","buttonType","primary","buttonSize","large","data-test","calloutContentAction",1,"mr-6",3,"click"],["class","text-link text-14 mv-4","data-test","calloutContentSecondaryAction",3,"click",4,"ngIf"],["class","callout__image-container flex flex-row items-start justify-between ph-4",4,"ngIf"],["data-test","calloutContentTag",3,"icon","label"],["data-test","calloutContentDescription",1,"callout__description","mt-5"],["data-test","calloutContentSecondaryAction",1,"text-link","text-14","mv-4",3,"click"],[1,"callout__image-container","flex","flex-row","items-start","justify-between","ph-4"],["data-test","calloutContentImage",1,"callout__image",3,"src"]],template:function(e,t){1&e&&(b.Vb(0,"div",0),b.Vb(1,"div",1),b.Vb(2,"div",2),b.Vb(3,"div",3),b.Pc(4),b.Ub(),b.Vb(5,"div"),b.Nc(6,S,1,2,"app-tag",4),b.Ub(),b.Ub(),b.Nc(7,x,2,1,"div",5),b.Vb(8,"div",6),b.Vb(9,"button",7),b.cc("click",(function(){return t.handleActionClick()})),b.Pc(10),b.Ub(),b.Nc(11,C,2,1,"a",8),b.Ub(),b.Ub(),b.Nc(12,w,2,2,"div",9),b.Ub()),2&e&&(b.Hb("callout--compact",t.compact),b.Db(4),b.Qc(t.content.title),b.Db(2),b.mc("ngIf",t.content.tag),b.Db(1),b.mc("ngIf",t.content.description),b.Db(3),b.Rc(" ",t.content.actionText," "),b.Db(1),b.mc("ngIf",t.content.secondaryActionText),b.Db(1),b.mc("ngIf",t.content.image&&!t.compact))},directives:[y.p,v.a,O.b],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.callout[_ngcontent-%COMP%]{background-color:#fff}.callout__content[_ngcontent-%COMP%]{flex:1 1 auto}.callout__title[_ngcontent-%COMP%]{font-size:26px;letter-spacing:.65px;line-height:1.4em;letter-spacing:inherit;color:#131c2a;font-weight:600;margin-right:20px}.callout__description[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.callout__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-flow:wrap}.callout__image-container[_ngcontent-%COMP%]{flex:1;flex-basis:480px;width:100%}.callout__image[_ngcontent-%COMP%]{max-width:480px}.callout--compact[_ngcontent-%COMP%]   .callout__content[_ngcontent-%COMP%]{flex-basis:100%}.callout--compact[_ngcontent-%COMP%]   .callout__title[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em;margin-bottom:4px}.callout--compact[_ngcontent-%COMP%]   .callout__description[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.callout[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"],changeDetection:0}),e})();var k=n("0njA"),P=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let _=(()=>{class e{constructor(e,t,n,i){this.router=e,this.dialogService=t,this.dialogRef=n,this.breakPoints=g.a,this.data=i}ngOnInit(){}handleCloseClick(){this.dialogRef.close(!0)}handleActionClick(){this.dialogService.openUpgradeDialog(!1)}handleSecondaryActionClick(){this.router.navigate(["/results/bookmarks"]).then(()=>{this.dialogRef.close()})}}return e.\u0275fac=function(t){return new(t||e)(b.Pb(m.e),b.Pb(f.a),b.Pb(u.g),b.Pb(u.a))},e.\u0275cmp=b.Jb({type:e,selectors:[["app-premium-access-dialog"]],decls:8,vars:10,consts:[["role","dialog","aria-modal","true","data-test","premiumAccessDialog",1,"dialog","flex","flex-row","items-start"],[1,"flex","items-center","justify-center","flex-auto"],[1,"dialog__content","flex","flex-row","items-start","justify-center","flex-auto"],[3,"content","compact","actionClick","secondaryActionClick"],["app-button","","buttonType","default","buttonTheme","light","type","button","title","Close",1,"modal__close",3,"click"],["icon","times","size","lg"]],template:function(e,t){1&e&&(b.Vb(0,"div",0),b.hc(1,"async"),b.Vb(2,"div",1),b.Vb(3,"div",2),b.Vb(4,"app-callout-content",3),b.cc("actionClick",(function(){return t.handleActionClick()}))("secondaryActionClick",(function(){return t.handleSecondaryActionClick()})),b.hc(5,"async"),b.Ub(),b.Ub(),b.Ub(),b.Vb(6,"button",4),b.cc("click",(function(){return t.handleCloseClick()})),b.Qb(7,"app-icon",5),b.Ub(),b.Ub()),2&e&&(b.Hb("dialog--compact",b.ic(1,6,t.breakpoint$)<=t.breakPoints.Medium),b.Eb("aria-label","Premium Access"),b.Db(4),b.mc("content",t.data)("compact",b.ic(5,8,t.breakpoint$)<=t.breakPoints.Medium),b.Db(2),b.Eb("aria-label","Close"))},directives:[j,v.a,k.a],pipes:[y.b],styles:[".dialog__content[_ngcontent-%COMP%]{max-width:1140px}.dialog--compact[_ngcontent-%COMP%]   .dialog__content[_ngcontent-%COMP%]{margin:0}"],changeDetection:0}),function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([Object(i.e)(h.a.getBreakpoint),P("design:type",d.a)],e.prototype,"breakpoint$",void 0),e})();var M=n("E/pY");let I=(()=>{class e{constructor(e){this.dialogRef=e}ngOnInit(){}handleDismissClick(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(b.Pb(u.g))},e.\u0275cmp=b.Jb({type:e,selectors:[["app-signup-footer-dialog"]],decls:5,vars:3,consts:[["role","dialog","aria-modal","true","data-test","signupFooterDialog",1,"signup-footer-dialog","flex","flex-column","items-center"],[1,"signup-footer-dialog__message"],[3,"compact"],["app-button","","buttonType","default","buttonTheme","light","type","button","title","Close",1,"signup-footer-dialog__close",3,"click"],["icon","times","size","lg"]],template:function(e,t){1&e&&(b.Vb(0,"div",0),b.Vb(1,"div",1),b.Qb(2,"app-signup-messaging",2),b.Ub(),b.Vb(3,"button",3),b.cc("click",(function(){return t.handleDismissClick()})),b.Qb(4,"app-icon",4),b.Ub(),b.Ub()),2&e&&(b.Eb("aria-label","Sign Up"),b.Db(2),b.mc("compact",!1),b.Db(1),b.Eb("aria-label","Close"))},directives:[M.a,v.a,k.a],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.signup-footer-dialog[_ngcontent-%COMP%]{padding-top:36px;padding-bottom:36px}.signup-footer-dialog__message[_ngcontent-%COMP%]{max-width:632px}.signup-footer-dialog__close[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px}@media (max-width:480px){.signup-footer-dialog[_ngcontent-%COMP%]{padding-top:32px;padding-bottom:32px}.signup-footer-dialog__message[_ngcontent-%COMP%]{max-width:320px}}"],changeDetection:0}),e})();var T=n("DTUA"),U=n("AytR"),L=n("Lnht"),z=n("/LQR");let A=(()=>{class e{constructor(e,t,n){this.dialogService=e,this.storageService=t,this.dialogRef=n,this.supportEmail=U.a.supportEmail,this.upgradeLabel="Your 14-day trial has expired and your account now has limited functionality. To regain access to the full power of the BioDigital Human platform, choose the plan that\u2019s perfect for you and:"}ngOnInit(){}handleCancelClick(){this.storageService.setLocalItem(T.b.TeamTrialExpirationSeen,!0),this.dialogRef.close()}handleChooseClick(){this.storageService.setLocalItem(T.b.TeamTrialExpirationSeen,!0),this.dialogService.openUpgradeDialog()}}return e.\u0275fac=function(t){return new(t||e)(b.Pb(f.a),b.Pb(T.d),b.Pb(u.g))},e.\u0275cmp=b.Jb({type:e,selectors:[["app-trial-expired-dialog"]],decls:15,vars:2,consts:[[1,"dialog"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Close",1,"dialog__close",3,"click"],["icon","times","size","lg"],[1,"dialog__content","flex","flex-column","items-center","justify-center"],[1,"mb-4","text-24","text-semibold","text-center"],["src","assets/images/biodigital-multidevice-graphic.jpg",1,"dialog__image"],["app-button","","buttonType","primary",1,"mv-4",3,"click"],[1,"mv-4"],[3,"label"],[1,"mt-4","text-14"],["role","button","tabindex","0","appSupportLink","",1,"text-underline"]],template:function(e,t){1&e&&(b.Vb(0,"div",0),b.Vb(1,"button",1),b.cc("click",(function(){return t.handleCancelClick()})),b.Qb(2,"app-icon",2),b.Ub(),b.Vb(3,"div",3),b.Vb(4,"div",4),b.Pc(5,"Your free trial has ended"),b.Ub(),b.Qb(6,"img",5),b.Vb(7,"button",6),b.cc("click",(function(){return t.handleChooseClick()})),b.Pc(8," Upgrade Now "),b.Ub(),b.Vb(9,"div",7),b.Qb(10,"app-team-features",8),b.Ub(),b.Vb(11,"div",9),b.Pc(12," Need more time for evaluation? "),b.Vb(13,"span",10),b.Pc(14,"Contact us"),b.Ub(),b.Ub(),b.Ub(),b.Ub()),2&e&&(b.Db(1),b.Eb("aria-label","Close"),b.Db(9),b.mc("label",t.upgradeLabel))},directives:[v.a,k.a,L.a,z.a],styles:[".dialog[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;height:100%;padding:32px;width:90vw;height:90vh}.dialog__close[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px}.dialog__content[_ngcontent-%COMP%]{max-width:520px}.dialog__image[_ngcontent-%COMP%]{width:100%;max-width:360px}@media (max-width:480px){.dialog[_ngcontent-%COMP%]{width:100vw;height:100vh}}"],changeDetection:0}),e})();var F=n("5sb6"),D=n("937/"),E=n("eW6i"),N=n("Mh2x"),R=n("kTA6"),V=n("icKS"),B=n("JkaL"),H=n("q7pw"),Q=n("EFcw");const G={[Q.a.BookmarkViewLimitReached]:"View gate",[Q.a.BookmarkSaveLimitReached]:"Save gate",[Q.a.Publish]:"Publish gate"};let W=(()=>{class e{constructor(e,t,n,i,a,s,o){this.store=e,this.dialog=t,this.pendoService=n,this.productService=i,this.router=a,this.engineService=s,this.cameraService=o}openPastDue(){this.store.dispatch(new p.K(Q.a.ProAccountPastDue,H.a.Notification))}openBookmarkViewWarning(e,t){this.store.dispatch(new p.K(Q.a.BookmarkViewThresholdReached,H.a.Footer,{title:`You've viewed **${e} of ${t}** models this month.`,actionText:"Get Unlimited Acccess"}))}openPublicViewGate(){return this.dialog.open(I,{id:F.a.PublicViewGateDialog,backdropClass:"bd-dialog-backdrop-alt",panelClass:"bg-dialog-docked",disableClose:!0,data:{}}).afterClosed()}closePublicViewGate(){const e=this.dialog.getDialogById(F.a.PublicViewGateDialog);e&&e.close()}openBookmarkViewLimit(){return this.openPremiumAccessDialog(Q.a.BookmarkViewLimitReached,{},!1)}openBookmarkSaveWarning(e,t){this.store.dispatch(new p.K(Q.a.BookmarkSaveThresholdReached,H.a.Footer,{title:`You've saved **${e} of ${t}** free models.`,actionText:"Get Unlimited Storage"}))}openBookmarkSaveLimit(){return this.openPremiumAccessDialog(Q.a.BookmarkSaveLimitReached)}openPublishPaywall(){return this.openPremiumAccessDialog(Q.a.Publish)}openTrialExpired(){return this.dialog.open(A,{id:F.a.TrialExpiredDialog,panelClass:"bg-dialog-responsive"}).afterClosed()}openPremiumAccessDialog(e,t={},n=!0){const i=Object.assign(Object.assign({},B.b[e]),t);if(this.getOpenPremiumDialogType()===Q.a.BookmarkViewLimitReached)return Object(s.a)(void 0);e===Q.a.BookmarkViewLimitReached&&this.clearDialogs(),this.pendoService.track(G[e],{page:this.router.url,platform:this.productService.productKey});const a=this.getPremiumDialogId(e);return this.dialog.open(_,{id:a,backdropClass:n?void 0:"bd-dialog-backdrop-headless",panelClass:"bg-dialog-docked",disableClose:!n,data:i}).afterClosed()}clearDialogs(){this.dialog.closeAll()}clearUserNotifications(...e){this.store.dispatch(new p.i(e))}getPremiumDialogId(e){return`${F.a.PremiumAccessDialog}_${e}`}getOpenPremiumDialogType(){return Object.values(Q.a).find(e=>{const t=this.getPremiumDialogId(e),n=this.dialog.getDialogById(t);return!Object(a.isNil)(n)})}createViewinteractionGate(e,t,n){return this.store.select(N.a.getSelectedChapterModelReady).pipe(Object(r.a)(e=>e)).pipe(Object(c.a)(()=>Object(o.a)(1e3)),Object(l.a)(e=>1e3*e)).pipe(Object(l.a)(t=>t>=e))}}return e.\u0275fac=function(t){return new(t||e)(b.Zb(i.h),b.Zb(u.b),b.Zb(R.b),b.Zb(V.a),b.Zb(m.e),b.Zb(E.a),b.Zb(D.a))},e.\u0275prov=b.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"J9/X":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){class t{constructor(e){this.searchMode=e}}t.type="[Gallery] Set Search Mode",e.SetSearchMode=t;class n{constructor(e){this.viewMode=e}}n.type="[Gallery] Set View Mode",e.SetViewMode=n;class i{constructor(e,t=!1){this.show=e,this.triggerDrawer=t}}i.type="[Gallery] Show Filters",e.ShowFilters=i;class a{constructor(e){this.organizationId=e}}a.type="[Gallery] Get Studio Options",e.GetStudioOptions=a;class s{constructor(e){this.options=e}}s.type="[Gallery] Get Studio Options Success",e.GetStudioOptionsSuccess=s;class o{constructor(e){this.config=e}}o.type="[Gallery] Search Loft",e.SearchLoft=o;class r{constructor(e){this.bookmarks=e}}r.type="[Gallery] Search Loft Success",e.SearchLoftSuccess=r;class c{constructor(e,t){this.config=e,this.options=t}}c.type="[Gallery] Set Search Config",e.SetSearchConfig=c;class l{constructor(e){this.options=e}}l.type="[Gallery] Set Search Options",e.SetSearchOptions=l;class p{constructor(e){this.activeTags=e}}p.type="[Gallery] Set Active Tags",e.SetActiveTags=p;class u{constructor(e){this.categoryId=e}}u.type="[Gallery] Search Category",e.SearchCategory=u;class d{constructor(){}}d.type="[Gallery] Search Studio",e.SearchStudio=d;class g{constructor(e){this.bookmarks=e}}g.type="[Gallery] Search Studio Success",e.SearchStudioSuccess=g;class h{constructor(e){this.bookmarks=e}}h.type="[Gallery] Search Success",e.SearchSuccess=h;class b{constructor(e){this.result=e}}b.type="[Gallery] Select Bookmark",e.SelectBookmark=b;class m{constructor(e){this.sidenav=e}}m.type="[Gallery] Set Sidenav",e.SetSidenav=m;class f{constructor(e){this.bulkActions=e}}f.type="[Gallery] Set Bulk Actions",e.SetBulkActions=f;class y{constructor(e){this.cardActions=e}}y.type="[Gallery] Set Card Actions",e.SetCardActions=y;class v{constructor(){}}v.type="[Gallery] Clear Results",e.ClearResults=v;class O{constructor(e,t){this.id=e,this.checked=t}}O.type="[Gallery] Check Item",e.CheckItem=O;class S{constructor(){}}S.type="[Gallery] Check All",e.CheckAll=S;class x{constructor(){}}x.type="[Gallery] Uncheck All",e.UncheckAll=x;class C{constructor(e){this.ids=e}}C.type="[Gallery] Set Checked Items",e.SetCheckedItems=C;class w{constructor(){}}w.type="[Gallery] Reset",e.Reset=w}(i||(i={}))},JaAu:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){class t{constructor(){}}t.type="[Undo] Reset",e.Reset=t;class n{constructor(e){this.chapterId=e}}n.type="[Undo] Undo",e.Undo=n;class i{constructor(e){this.chapterId=e}}i.type="[Undo] Undo All",e.UndoAll=i;class a{constructor(e){this.chapterId=e}}a.type="[Undo] Redo",e.Redo=a;class s{constructor(e){this.patches=e}}s.type="[Undo] Store Patches",e.SavePatches=s}(i||(i={}))},JggO:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n("1iZL");var i=n("zJoM"),a=n("LvDl"),s=n("fXoL"),o=n("ofXK"),r=n("0IaG"),c=n("9AAO"),l=n("Qu3c"),p=n("XoCC");function u(e,t){1&e&&(s.Vb(0,"div",4),s.Qb(1,"app-spinner",5),s.Ub())}let d=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.data=t,this.changeRef=n,this.config=t}ngOnInit(){}handleCloseClick(){this.dialogRef.close()}handleImageLoaded(){this.imageLoaded=!0,this.changeRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(r.g),s.Pb(r.a),s.Pb(s.i))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-image-dialog"]],decls:4,vars:7,consts:[["role","dialog","aria-modal","true",1,"image-dialog",3,"click","keyup.enter"],["class","image-dialog__loading flex flex-column p-8",4,"ngIf"],[1,"image-dialog__image",3,"src","title","alt","load"],["type","button","app-pin-button","","buttonType","dark","size","large","icon","times","aria-label","Close","matTooltip","Close","matTooltipPosition","left",1,"image-dialog__close"],[1,"image-dialog__loading","flex","flex-column","p-8"],["size","huge"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.cc("click",(function(){return t.handleCloseClick()}))("keyup.enter",(function(){return t.handleCloseClick()})),s.Nc(1,u,2,0,"div",1),s.Vb(2,"img",2),s.cc("load",(function(){return t.handleImageLoaded()})),s.Ub(),s.Qb(3,"button",3),s.Ub()),2&e&&(s.Eb("aria-label",(t.config.title||t.config.alt||"")+" Image Dialog"),s.Db(1),s.mc("ngIf",!t.imageLoaded),s.Db(1),s.mc("src",t.config.src,s.Fc)("title",t.config.title||"")("alt",t.config.alt||""),s.Eb("aria-label",t.config.title||""),s.Db(1),s.Eb("aria-label","Close Dialog"))},directives:[o.p,c.a,l.c,p.a],styles:[".image-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.image-dialog__loading[_ngcontent-%COMP%]{position:absolute}.image-dialog__image[_ngcontent-%COMP%]{max-width:100%;max-height:100vh}.image-dialog__close[_ngcontent-%COMP%]{position:fixed;top:24px;right:24px}"],changeDetection:0}),e})();var g=n("5sb6"),h=n("0njA");const b=["imageView"];let m=(()=>{class e{constructor(e){this.dialog=e,this.fit="normal",this.fullscreenEnabled=!1}handleFullscreen(e){this.dialog.open(d,{id:g.a.ImageDialog,backdropClass:"bd-dialog-backdrop",panelClass:"bd-dialog-panel",disableClose:!1,data:{src:this.fullscreenSrc||this.src,alt:this.alt||""}}),e.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(r.b))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-image-view"]],viewQuery:function(e,t){if(1&e&&s.Jc(b,!0),2&e){let e;s.xc(e=s.dc())&&(t.imageView=e.first)}},inputs:{fit:"fit",fitSize:"fitSize",src:"src",fullscreenSrc:"fullscreenSrc",alt:"alt"},decls:7,vars:8,consts:[["role","button","tabindex","0","matTooltip","Expand",1,"image-view",3,"click","keyup.enter"],["imageView",""],[1,"visually-hidden"],[1,"image-view__image",3,"src"],["aria-hidden","true",1,"image-view__overlay"],["icon","expand-alt",1,"image-view__icon"]],template:function(e,t){1&e&&(s.Vb(0,"div",0,1),s.cc("click",(function(e){return t.handleFullscreen(e)}))("keyup.enter",(function(e){return t.handleFullscreen(e)})),s.Vb(2,"span",2),s.Pc(3,"Click to expand the image"),s.Ub(),s.Qb(4,"img",3),s.Vb(5,"div",4),s.Qb(6,"app-icon",5),s.Ub(),s.Ub()),2&e&&(s.Hb("image-view--auto-fit","auto"===t.fit),s.Db(4),s.Kc("max-width","auto"===t.fit&&t.fitSize?t.fitSize+"px":"100%")("max-height","auto"===t.fit&&t.fitSize?t.fitSize+"px":"100%"),s.mc("src",t.src,s.Fc),s.Eb("alt",t.alt))},directives:[l.c,h.a],styles:[".image-view[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:inherit;min-height:32px;position:relative;background-color:#f9fafd}.image-view__image[_ngcontent-%COMP%]{width:auto;height:auto}.image-view--auto-fit[_ngcontent-%COMP%]   .image-view__image[_ngcontent-%COMP%]{max-width:100%;height:auto}.image-view__overlay[_ngcontent-%COMP%]{background:rgba(28,42,63,.3);color:#fff;display:flex;flex-direction:row;align-items:center;justify-content:center;padding:8px;position:absolute;top:0;bottom:0;left:0;right:0;opacity:0;transition:opacity .25s}.image-view__icon[_ngcontent-%COMP%]{text-shadow:0 0 2px rgba(0,0,0,.6)}.image-view[_ngcontent-%COMP%]:hover{cursor:pointer}.image-view[_ngcontent-%COMP%]:hover   .image-view__overlay[_ngcontent-%COMP%]{opacity:1}.image-view[_ngcontent-%COMP%]:focus{outline:2px solid #2d72dc!important}.image-view[_ngcontent-%COMP%]:focus   .image-view__overlay[_ngcontent-%COMP%]{opacity:1}"],changeDetection:0}),e})();var f=n("7gUy");function y(e,t){if(1&e&&(s.Vb(0,"div",6),s.Qb(1,"app-image-view",7),s.Ub()),2&e){const e=s.gc(2);s.Hb("mb-3",e.currentImage.caption),s.Db(1),s.mc("src",e.currentImage.urls.small)("fullscreenSrc",e.currentImage.urls.default)("alt",e.currentImage.alt)("fit",e.fit)("fitSize",e.fitSize)}}function v(e,t){if(1&e&&s.Qb(0,"app-html",8),2&e){const e=s.gc(2);s.mc("markdownText",e.currentImage.caption)}}function O(e,t){if(1&e){const e=s.Wb();s.Vb(0,"div",9),s.Vb(1,"button",10),s.cc("click",(function(){return s.Cc(e),s.gc(2).handlePrevClick()})),s.Ub(),s.Vb(2,"button",11),s.cc("click",(function(){return s.Cc(e),s.gc(2).handleNextClick()})),s.Ub(),s.Ub()}}function S(e,t){if(1&e&&(s.Vb(0,"div",1),s.Vb(1,"div",2),s.Nc(2,y,2,7,"div",3),s.Nc(3,v,1,1,"app-html",4),s.Nc(4,O,3,0,"div",5),s.Ub(),s.Ub()),2&e){const e=s.gc();s.Hb("images-block--slideshow",e.images&&e.images.length>1),s.Db(2),s.mc("ngIf",e.currentImage.urls),s.Db(1),s.mc("ngIf",e.currentImage.caption),s.Db(1),s.mc("ngIf",e.images.length>1)}}let x=(()=>{class e{constructor(){this.layout=i.a.Normal}get imagesBlock(){return this._imagesBlock}set imagesBlock(e){this._imagesBlock=e;const t=Object(a.get)(e,"images",[]);t.length&&(this.images=t,this.currentImage=this.images[0])}get fit(){return"compact"===this.layout?"auto":"normal"}get fitSize(){return"compact"===this.layout?100:void 0}ngOnInit(){}handlePrevClick(){let e=this.getCurrentImageIndex();e--,e<0&&(e=this.images.length-1),this.currentImage=this.images[e]}handleNextClick(){let e=this.getCurrentImageIndex();e++,e>=this.images.length&&(e=0),this.currentImage=this.images[e]}getCurrentImageIndex(){return this.images.indexOf(this.currentImage)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-images-block"]],inputs:{imagesBlock:"imagesBlock",layout:"layout"},decls:1,vars:1,consts:[["class","images-block",3,"images-block--slideshow",4,"ngIf"],[1,"images-block"],[1,"images-block__content"],["class","images-block__image-container",3,"mb-3",4,"ngIf"],["class","images-block__caption",3,"markdownText",4,"ngIf"],["class","images-block__actions",4,"ngIf"],[1,"images-block__image-container"],[1,"images-block__image-view",3,"src","fullscreenSrc","alt","fit","fitSize"],[1,"images-block__caption",3,"markdownText"],[1,"images-block__actions"],["type","button","app-pin-button","","icon","chevron-left","size","small","buttonType","ghost","matTooltip","Previous Image","aria-label","Previous Image",3,"click"],["type","button","app-pin-button","","icon","chevron-right","size","small","buttonType","ghost","matTooltip","Next Image","aria-label","Next Image",3,"click"]],template:function(e,t){1&e&&s.Nc(0,S,5,5,"div",0),2&e&&s.mc("ngIf",t.currentImage)},directives:[o.p,m,f.a,c.a,l.c],styles:[".images-block__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.images-block__label{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase;color:#374a68;font-weight:600;display:flex;align-items:center;min-height:28px}.images-block__image-container{display:flex;justify-content:center;background-color:#f9fafd}.images-block__image-view{display:flex;height:100%;min-height:32px}.images-block__caption{font-size:12px;margin-top:12px}.images-block__actions{display:flex;justify-content:flex-end;margin-top:14px}.images-block--slideshow .images-block__image-container{height:200px}"],encapsulation:2,changeDetection:0}),e})()},Jk2I:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("tyNb"),a=n("XNiG"),s=n("1G5W"),o=n("fXoL"),r=n("ofXK");const c=function(e){return{"progress__bar--complete":e}},l=function(e){return{width:e}};let p=(()=>{class e{constructor(e,t){this.router=e,this.changeDetector=t,this.total=100,this._value=0,this.percentWidth=0,this.ngUnsubscribe=new a.a}get value(){return this._value}set value(e){this._value=e,this.percentWidth=this.value/this.total*100,this.changeDetector.markForCheck()}ngOnInit(){this.router.events.pipe(Object(s.a)(this.ngUnsubscribe)).subscribe(e=>{e instanceof i.d&&(this.value=0)})}ngOnDestroy(){this.changeDetector.detach(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(i.e),o.Pb(o.i))},e.\u0275cmp=o.Jb({type:e,selectors:[["app-progress"]],inputs:{total:"total",value:"value"},decls:2,vars:7,consts:[[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress__bar",3,"ngClass","ngStyle"]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.Qb(1,"div",1),o.Ub()),2&e&&(o.Db(1),o.mc("ngClass",o.pc(3,c,100===t.percentWidth))("ngStyle",o.pc(5,l,t.percentWidth+"%")),o.Eb("aria-valuenow",t.percentWidth))},directives:[r.m,r.q],styles:["@-webkit-keyframes progressSuccess{0%{width:100%!important;background:#38de38}50%{opacity:1;background:#38de38}to{opacity:0}}@keyframes progressSuccess{0%{width:100%!important;background:#38de38}50%{opacity:1;background:#38de38}to{opacity:0}}.progress[_ngcontent-%COMP%]{border-radius:0 1px 1px 0;display:flex;align-items:center;height:4px;width:100%}.progress__bar[_ngcontent-%COMP%]{background:#de3535;height:100%;width:0}.progress__bar--complete[_ngcontent-%COMP%]{-webkit-animation:progressSuccess 2s linear forwards;animation:progressSuccess 2s linear forwards}"],changeDetection:0}),e})()},JkaL:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n("EFcw");const a="School & Business Plans Only",s={[i.a.BookmarkViewThresholdReached]:{title:"BookmarkViewThresholdReach",actionText:"Upgrade Now"},[i.a.BookmarkViewLimitReached]:{title:"You've reached your 10 free views this month",description:"You can come back next month for another 10 free views or upgrade your plan for unlimited access to over 700+ anatomy, condition, and treatment models.",image:"assets/images/biodigital-human-explore-3d-human-anatomy.jpg",actionText:"Upgrade Now"},[i.a.ProAccountPastDue]:{title:"AccountPastDue",actionText:"Upgrade Now"},[i.a.BookmarkSaveThresholdReached]:{title:"BookmarkSaveThresholdReached",actionText:"Upgrade Now"},[i.a.BookmarkSaveLimitReached]:{title:"You've reached your limit of 5 saved models",description:"In order to save more models on your free plan, you will need to delete models in My Library or upgrade your plan.",image:"assets/images/biodigital-human-3d-model-my-library.jpg",actionText:"Upgrade Now",secondaryActionText:"Go to My Library to delete models"},[i.a.TeamTrailExpired]:{title:"TrailExpired",actionText:"Upgrade Now"},[i.a.Publish]:{title:"Publish your 3D model",description:"Upgrade to publish to your learning management system, website, or application and make your 3D models available for anyone to view and interact.",image:"assets/images/biodigital-human-publish-custom-3D-model.jpg",tag:a,tagIcon:"lock",actionText:"Upgrade Now"}}},KI9D:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return o}));let i=(()=>{class e{constructor(){}}return e.type="[Share] Reset",e})(),a=(()=>{class e{constructor(e){this.shareEmail=e}}return e.type="[Share] Share Email Link",e})(),s=(()=>{class e{constructor(e){this.shareEmail=e}}return e.type="[Share] Share Email Link Success",e})(),o=(()=>{class e{constructor(e){this.error=e}}return e.type="[Share] Share Email Link Fail",e})()},Kn5L:function(e,t,n){"use strict";n.d(t,"A",(function(){return i})),n.d(t,"C",(function(){return a})),n.d(t,"B",(function(){return s})),n.d(t,"F",(function(){return o})),n.d(t,"z",(function(){return r})),n.d(t,"y",(function(){return c})),n.d(t,"G",(function(){return l})),n.d(t,"E",(function(){return p})),n.d(t,"D",(function(){return u})),n.d(t,"H",(function(){return d})),n.d(t,"J",(function(){return g})),n.d(t,"I",(function(){return h})),n.d(t,"n",(function(){return b})),n.d(t,"p",(function(){return m})),n.d(t,"o",(function(){return f})),n.d(t,"u",(function(){return y})),n.d(t,"w",(function(){return v})),n.d(t,"v",(function(){return O})),n.d(t,"pb",(function(){return S})),n.d(t,"rb",(function(){return x})),n.d(t,"qb",(function(){return C})),n.d(t,"k",(function(){return w})),n.d(t,"m",(function(){return j})),n.d(t,"l",(function(){return k})),n.d(t,"d",(function(){return P})),n.d(t,"f",(function(){return _})),n.d(t,"e",(function(){return M})),n.d(t,"x",(function(){return I})),n.d(t,"P",(function(){return T})),n.d(t,"R",(function(){return U})),n.d(t,"Q",(function(){return L})),n.d(t,"jb",(function(){return z})),n.d(t,"lb",(function(){return A})),n.d(t,"kb",(function(){return F})),n.d(t,"mb",(function(){return D})),n.d(t,"ob",(function(){return E})),n.d(t,"nb",(function(){return N})),n.d(t,"h",(function(){return R})),n.d(t,"gb",(function(){return V})),n.d(t,"ib",(function(){return B})),n.d(t,"hb",(function(){return H})),n.d(t,"ab",(function(){return Q})),n.d(t,"bb",(function(){return G})),n.d(t,"c",(function(){return W})),n.d(t,"q",(function(){return q})),n.d(t,"Z",(function(){return $})),n.d(t,"g",(function(){return X})),n.d(t,"Y",(function(){return Z})),n.d(t,"S",(function(){return J})),n.d(t,"U",(function(){return K})),n.d(t,"T",(function(){return Y})),n.d(t,"r",(function(){return ee})),n.d(t,"t",(function(){return te})),n.d(t,"s",(function(){return ne})),n.d(t,"cb",(function(){return ie})),n.d(t,"eb",(function(){return ae})),n.d(t,"db",(function(){return se})),n.d(t,"sb",(function(){return oe})),n.d(t,"O",(function(){return re})),n.d(t,"j",(function(){return ce})),n.d(t,"L",(function(){return le})),n.d(t,"N",(function(){return pe})),n.d(t,"M",(function(){return ue})),n.d(t,"tb",(function(){return de})),n.d(t,"vb",(function(){return ge})),n.d(t,"ub",(function(){return he})),n.d(t,"K",(function(){return be})),n.d(t,"i",(function(){return me})),n.d(t,"V",(function(){return fe})),n.d(t,"W",(function(){return ye})),n.d(t,"a",(function(){return ve})),n.d(t,"b",(function(){return Oe})),n.d(t,"X",(function(){return Se})),n.d(t,"fb",(function(){return xe}));let i=(()=>{class e{constructor(){}}return e.type="[Auth] Is Logged In",e})(),a=(()=>{class e{constructor(){}}return e.type="[Auth] Is Logged In Success",e})(),s=(()=>{class e{constructor(){}}return e.type="[Auth] Is Logged In Failure",e})(),o=(()=>{class e{constructor(e){this.login=e}}return e.type="[Auth] Login With Biodigital",e})(),r=(()=>{class e{}return e.type="[Auth] Load Google Auth",e})(),c=(()=>{class e{constructor(e){this.online=e}}return e.type="[Auth] Google Auth Service Online",e})(),l=(()=>{class e{constructor(e){this.login=e}}return e.type="[Auth] Login With Google",e})(),p=(()=>{class e{constructor(e,t){this.loginType=e,this.response=t}}return e.type="[Auth] Login Success",e})(),u=(()=>{class e{constructor(e,t,n){this.loginType=e,this.error=t,this.login=n}}return e.type="[Auth] Login Failure",e})(),d=(()=>{class e{constructor(){}}return e.type="[Auth] Logout",e})(),g=(()=>{class e{constructor(){}}return e.type="[Auth] Logout Success",e})(),h=(()=>{class e{constructor(){}}return e.type="[Auth] Logout Failure",e})(),b=(()=>{class e{constructor(){}}return e.type="[Auth] Get Environment Settings",e})(),m=(()=>{class e{constructor(e){this.environmentSettings=e}}return e.type="[Auth] Get Environment Settings Success",e})(),f=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Get Environment Settings Failure",e})(),y=(()=>{class e{constructor(e=!1){this.hardCheck=e}}return e.type="[Auth] Get User Profile",e})(),v=(()=>{class e{constructor(e){this.userProfile=e}}return e.type="[Auth] Get User Profile Success",e})(),O=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Get User Profile Failure",e})(),S=(()=>{class e{constructor(e){this.userProfile=e}}return e.type="[Auth] Update User Profile",e})(),x=(()=>{class e{constructor(e){this.userProfile=e}}return e.type="[Auth] Update User Profile Success",e})(),C=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Update User Profile Failure",e})(),w=(()=>{class e{constructor(){}}return e.type="[Auth] Delete User Profile",e})(),j=(()=>{class e{constructor(e){this.userEmail=e}}return e.type="[Auth] Delete User Profile Success",e})(),k=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Delete User Profile Failure",e})(),P=(()=>{class e{constructor(e){this.email=e}}return e.type="[Auth] Check Profile",e})(),_=(()=>{class e{constructor(e){this.profile=e}}return e.type="[Auth] Check Profile Success",e})(),M=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Check Profile Failure",e})(),I=(()=>{class e{constructor(){}}return e.type="[Auth] Get User Roles",e})(),T=(()=>{class e{constructor(e){this.email=e}}return e.type="[Auth] Reset Password",e})(),U=(()=>{class e{constructor(e){this.email=e}}return e.type="[Auth] Reset Password Success",e})(),L=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Reset Password Failure",e})(),z=(()=>{class e{constructor(e){this.email=e}}return e.type="[Auth] Transfer Facebook Account",e})(),A=(()=>{class e{constructor(e){this.email=e}}return e.type="[Auth] Transfer Facebook Account Success",e})(),F=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Transfer Facebook Account Failure",e})(),D=(()=>{class e{constructor(e,t,n){this.currentPassword=e,this.newPassword=t,this.confirmNewPassword=n}}return e.type="[Auth] Update Password",e})(),E=(()=>{class e{constructor(){}}return e.type="[Auth] Update Password Success",e})(),N=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Update Password Failure",e})(),R=(()=>{class e{constructor(){}}return e.type="[Auth] Check Session",e})(),V=(()=>{class e{constructor(e){this.value=e}}return e.type="[Auth] Sign Up",e})(),B=(()=>{class e{constructor(e){this.response=e}}return e.type="[Auth] Sign Up Success",e})(),H=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Sign Up Failure",e})(),Q=(()=>{class e{constructor(e){this.locale=e}}return e.type="[Auth] Set User Locale",e})(),G=(()=>{class e{constructor(e){this.locale=e}}return e.type="[Auth] Set User Locale Success",e})(),W=(()=>{class e{constructor(){}}return e.type="[Auth] Check Locale",e})(),q=(()=>{class e{constructor(){}}return e.type="[Auth] Get User Apps",e})(),$=(()=>{class e{constructor(e){this.apps=e}}return e.type="[Auth] Set User Apps",e})(),X=(()=>{class e{constructor(){}}return e.type="[Auth] Check Selected App",e})(),Z=(()=>{class e{constructor(e){this.appId=e}}return e.type="[Auth] Set Selected User App",e})(),J=(()=>{class e{constructor(e){this.message=e}}return e.type="[Auth] Send User Message",e})(),K=(()=>{class e{constructor(e){this.message=e}}return e.type="[Auth] Send User Message Success",e})(),Y=(()=>{class e{constructor(e){this.err=e}}return e.type="[Auth] Send User Message Fail",e})(),ee=(()=>{class e{constructor(e,t){this.type=e,this.mode=t}}return e.type="[Auth] Get User Message",e})(),te=(()=>{class e{constructor(e){this.message=e}}return e.type="[Auth] Get User Message Success",e})(),ne=(()=>{class e{constructor(e){this.type=e}}return e.type="[Auth] Get User Message Fail",e})(),ie=(()=>{class e{constructor(e){this.messageSeenId=e}}return e.type="[Auth] Set Message Viewed",e})(),ae=(()=>{class e{constructor(){}}return e.type="[Auth] Set Message Viewed Success",e})(),se=(()=>{class e{constructor(){}}return e.type="[Auth] Set Message Viewed Fail",e})(),oe=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Verify Fail",e})(),re=(()=>{class e{constructor(){}}return e.type="[Auth] Reset",e})(),ce=(()=>{class e{constructor(){}}return e.type="[Auth] Delete Stored Data",e})(),le=(()=>{class e{constructor(e,t){this.email=e,this.token=t}}return e.type="[Auth] Request Verification Code",e})(),pe=(()=>{class e{constructor(e){this.response=e}}return e.type="[Auth] Request Verification Code Success",e})(),ue=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Request Verification Code Fail",e})(),de=(()=>{class e{constructor(e,t,n){this.email=e,this.token=t,this.code=n}}return e.type="[Auth] Verify Profile",e})(),ge=(()=>{class e{constructor(e){this.response=e}}return e.type="[Auth] Verify Profile Success",e})(),he=(()=>{class e{constructor(e){this.error=e}}return e.type="[Auth] Verify Profile Fail",e})(),be=(()=>{class e{constructor(e,t,n){this.type=e,this.display=t,this.data=n}}return e.type="[Auth] Notify User Restriction",e})(),me=(()=>{class e{constructor(e){this.displays=e}}return e.type="[Auth] Clear User Restriction",e})(),fe=(()=>{class e{constructor(e,t){this.contentId=e,this.contentType=t}}return e.type="[Auth] Set Content Viewed",e})(),ye=(()=>{class e{constructor(){}}return e.type="[Auth] Set Content Viewed Success",e})(),ve=(()=>{class e{constructor(){}}return e.type="[Auth] Check Content Viewed",e})(),Oe=(()=>{class e{constructor(e){this.contentViews=e}}return e.type="[Auth] Check Content Viewed Success",e})(),Se=(()=>{class e{constructor(e){this.isDeveloperReferral=e}}return e.type="[Auth] Set Developer Referral",e})(),xe=(()=>{class e{constructor(e){this.active=e}}return e.type="[Auth] Set User View Gate Active",e})()},Kzh2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.UserGeneratedTour="user_generated_tour",e.Animated="animated",e.Quiz="quiz",e.ModeQuiz="mode_quiz",e.ModeContent="mode_content",e}({})},L2KA:function(e,t,n){"use strict";n.d(t,"a",(function(){return pe}));var i=n("fXoL"),a=n("0IaG"),s=n("IlST");let o=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-limit-dialog"]],decls:12,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"pt-1","pb-6"],[1,"text-14","pb-3"],[1,"text-14"],["mat-dialog-actions","",1,"pt-2"],["app-button","","buttonTheme","light","cdkFocusInitial","",1,"mr-2",3,"mat-dialog-close"],["app-button","","buttonType","primary",3,"mat-dialog-close"]],template:function(e,t){1&e&&(i.Vb(0,"h1",0),i.Pc(1,"New Bookmark Limit Reached"),i.Ub(),i.Vb(2,"div",1),i.Vb(3,"div",2),i.Pc(4," You've reached your limit of 5 3D models in your Library. You can make changes to this model, but you will not be able to save as a new model. "),i.Ub(),i.Vb(5,"div",3),i.Pc(6,"Upgrade to a Premium Plan to save unlimited 3D models."),i.Ub(),i.Ub(),i.Vb(7,"div",4),i.Vb(8,"button",5),i.Pc(9," OK "),i.Ub(),i.Vb(10,"button",6),i.Pc(11,"Upgrade Now"),i.Ub(),i.Ub()),2&e&&(i.Db(8),i.mc("mat-dialog-close",!1),i.Db(2),i.mc("mat-dialog-close",!0))},directives:[a.h,a.e,a.c,s.a,a.d],styles:[""],changeDetection:0}),e})();var r=n("hQeY"),c=n("nclC");const l=["copyField"];let p=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.data=t,this.clipboardService=n,this.settings={title:"Copy to Clipboard",copyText:""},this.settings=Object.assign(Object.assign({},this.settings),t)}get rowCount(){return this.settings.copyText.split(/\r?\n/).length+1}ngOnInit(){}ngAfterViewInit(){const e=this.copyField.nativeElement;e.focus(),e.select()}handleCopyClick(){const e=this.clipboardService.copyInputFieldValue(this.copyField.nativeElement);this.close(e)}handleCancelClick(){this.close(!1)}close(e){this.dialogRef.close(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(a.g),i.Pb(a.a),i.Pb(c.a))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-clipboard-dialog"]],viewQuery:function(e,t){if(1&e&&i.Jc(l,!0),2&e){let e;i.xc(e=i.dc())&&(t.copyField=e.first)}},decls:11,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"copy","flex"],[1,"copy__input","flex-auto",3,"value","rows"],["copyField",""],["mat-dialog-actions",""],["app-button","","buttonTheme","light",3,"click"],["app-button","","buttonType","primary",3,"click"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Pc(1),i.Ub(),i.Vb(2,"div",1),i.Vb(3,"textarea",2,3),i.Pc(5,"  "),i.Ub(),i.Ub(),i.Vb(6,"div",4),i.Vb(7,"button",5),i.cc("click",(function(){return t.handleCancelClick()})),i.Pc(8,"Cancel"),i.Ub(),i.Vb(9,"button",6),i.cc("click",(function(){return t.handleCopyClick()})),i.Pc(10,"Copy to Clipboard"),i.Ub(),i.Ub()),2&e&&(i.Db(1),i.Rc(" ",t.settings.title,"\n"),i.Db(2),i.mc("value",t.settings.copyText)("rows",t.rowCount))},directives:[a.h,a.e,a.c,s.a],styles:[".copy[_ngcontent-%COMP%]{min-width:480px}"],changeDetection:0}),e})();var u=n("5sb6"),d=n("eW6i"),g=n("5miH"),h=n("AytR"),b=n("kTA6"),m=n("icKS"),f=n("jhN1"),y=n("0njA");const v=["modalContents"];let O=(()=>{class e{constructor(e,t,n,i,a,s){this.dialogRef=e,this.data=t,this.sanitizer=n,this.renderer=i,this.pendoService=a,this.productService=s}onMessage(e){switch(e.data.action){case"close":this.dialogRef.close(e.data);break;case"track":this.pendoService.track(e.data.label,Object.assign(Object.assign({},e.data.metadata),{platform:this.productService.productType}))}}ngOnInit(){this.title=this.data.title,this.url=this.data.url?this.sanitizer.bypassSecurityTrustResourceUrl(this.data.url):"",this.renderer.setStyle(this.modalContents.nativeElement,"background-color",this.data.backgroundColor||"#ffffff")}closeDialog(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(a.g),i.Pb(a.a),i.Pb(f.b),i.Pb(i.H),i.Pb(b.b),i.Pb(m.a))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-iframe-dialog"]],viewQuery:function(e,t){if(1&e&&i.Jc(v,!0),2&e){let e;i.xc(e=i.dc())&&(t.modalContents=e.first)}},hostBindings:function(e,t){1&e&&i.cc("message",(function(e){return t.onMessage(e)}),!1,i.Bc)},decls:6,vars:3,consts:[["role","dialog","aria-modal","true",1,"modal"],[1,"modal__contents"],["modalContents",""],["cdkFocusInitial","",1,"modal__frame",3,"src"],["app-button","","buttonTheme","dark","buttonType","white","buttonShape","circle","type","button","title","Close",1,"modal__close",3,"click"],["icon","times","size","lg"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Vb(1,"div",1,2),i.Qb(3,"iframe",3),i.Ub(),i.Vb(4,"button",4),i.cc("click",(function(){return t.closeDialog()})),i.Qb(5,"app-icon",5),i.Ub(),i.Ub()),2&e&&(i.Eb("aria-label",t.title),i.Db(3),i.mc("src",t.url,i.Ec),i.Db(1),i.Eb("aria-label","Close"))},directives:[s.a,y.a],styles:[".modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;position:relative}.modal__close[_ngcontent-%COMP%]{margin-bottom:4px;align-self:flex-end;cursor:pointer;position:absolute;right:12px;top:12px}.modal__contents[_ngcontent-%COMP%]{flex-grow:1}.modal__frame[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0}),e})();var S=n("LvDl"),x=n("AcyG"),C=n("ECVi"),w=n("eKhQ"),j=n("bKUj"),k=n("2CE2"),P=n("wSC8"),_=n("7PKw"),M=n("XNiG"),I=n("HDdC"),T=n("lMGN"),U=n("f0Cb"),L=n("DuGl"),z=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let A=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.sent=!1,this.sentResponses=[],this.errorResponses=[],this.ngUnsubscribe=new M.a,this.organization=t.organization}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleInviteSent(e){setTimeout(()=>{this.inviteComplete()},5e3)}handleInviteCancelled(){this.inviteComplete()}inviteComplete(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(a.g),i.Pb(a.a))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-team-invite-dialog"]],decls:10,vars:3,consts:[[1,"dialog"],["mat-dialog-title",""],[1,"flex","flex-row","justify-between"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Close",3,"click"],["icon","times","size","lg"],["mat-dialog-content","",1,"theme-light","p-6"],["sentText","Send invites","cancelText","Cancel",3,"organization","layout","inviteSent","inviteCancelled"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Vb(1,"div",1),i.Vb(2,"div",2),i.Vb(3,"h1"),i.Pc(4,"Invite Members"),i.Ub(),i.Vb(5,"button",3),i.cc("click",(function(){return t.handleInviteCancelled()})),i.Qb(6,"app-icon",4),i.Ub(),i.Ub(),i.Ub(),i.Qb(7,"mat-divider"),i.Vb(8,"div",5),i.Vb(9,"app-team-invite",6),i.cc("inviteSent",(function(e){return t.handleInviteSent(e)}))("inviteCancelled",(function(){return t.handleInviteCancelled()})),i.Ub(),i.Ub(),i.Ub()),2&e&&(i.Db(5),i.Eb("aria-label","Close"),i.Db(4),i.mc("organization",t.organization)("layout","inline"))},directives:[a.h,s.a,y.a,U.a,a.e,L.a],styles:[".dialog[_ngcontent-%COMP%]{width:480px;min-height:320px}.dialog__input[_ngcontent-%COMP%]{resize:vertical}.dialog__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.dialog__actions--compact[_ngcontent-%COMP%]{justify-content:flex-end}@media (max-width:480px){.dialog[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0}),function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([Object(x.e)(T.a.getInviting),z("design:type",I.a)],e.prototype,"inviting$",void 0),e})();var F=n("3Pt+"),D=n("1G5W"),E=n("+DiI"),N=n("Es8U"),R=n("ZULQ"),V=n("KI9D"),B=n("rYhz"),H=n("dNgK"),Q=n("ofXK"),G=n("Qu3c"),W=n("zP1m"),q=n("XoCC"),$=n("kmnG"),X=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Z=["emailField"];function J(e,t){1&e&&(i.Tb(0),i.Vb(1,"div",11),i.Vb(2,"app-message-toggle",12),i.Pc(3," Your email was successfully sent. "),i.Ub(),i.Ub(),i.Sb())}function K(e,t){if(1&e&&(i.Vb(0,"div",11),i.Vb(1,"app-message-toggle",20),i.Pc(2),i.Ub(),i.Ub()),2&e){const e=i.gc(2);i.Db(2),i.Rc(" ",e.errorMessage," ")}}function Y(e,t){1&e&&i.Qb(0,"app-spinner",21)}function ee(e,t){1&e&&(i.Vb(0,"div",24),i.Vb(1,"mat-error"),i.Pc(2,"Please enter a valid email address."),i.Ub(),i.Ub())}function te(e,t){if(1&e&&(i.Vb(0,"div",26),i.Vb(1,"mat-error"),i.Pc(2),i.Ub(),i.Ub()),2&e){const e=i.gc(2).$implicit,t=i.gc(2);i.Db(2),i.Sc(" Maximum email addresses excceeded, ",e.currentEmailCount," of ",t.maxEmailCount," max. ")}}function ne(e,t){if(1&e&&i.Nc(0,te,3,2,"div",25),2&e){const e=i.gc().$implicit;i.mc("ngIf",e.maxEmailsExceeded)}}function ie(e,t){if(1&e&&(i.Tb(0),i.Nc(1,ee,3,0,"div",22),i.Nc(2,ne,1,1,"ng-template",null,23,i.Oc),i.Sb()),2&e){const e=t.$implicit,n=i.yc(3);i.Db(1),i.mc("ngIf",e.invalidEmails)("ngIfElse",n)}}function ae(e,t){if(1&e){const e=i.Wb();i.Nc(0,K,3,1,"div",13),i.Vb(1,"form",14),i.cc("submit",(function(){i.Cc(e);const t=i.gc();return t.submitForm(t.config.shareLink)})),i.Vb(2,"textarea",15,16),i.Pc(4,"        "),i.Ub(),i.Vb(5,"button",17),i.hc(6,"async"),i.hc(7,"async"),i.Nc(8,Y,1,0,"app-spinner",18),i.hc(9,"async"),i.Pc(10),i.hc(11,"async"),i.Ub(),i.Ub(),i.Nc(12,ie,4,2,"ng-container",19)}if(2&e){const e=i.gc();i.mc("ngIf",e.errorMessage),i.Db(1),i.mc("formGroup",e.form),i.Db(4),i.mc("disabled",!e.form.valid||i.ic(6,8,e.sharing$))("loading",i.ic(7,10,e.sharing$)),i.Eb("aria-label","Send Email"),i.Db(3),i.mc("ngIf",i.ic(9,12,e.sharing$)),i.Db(2),i.Rc(" ",i.ic(11,14,e.sharing$)?"Sending":"Send Email"," "),i.Db(2),i.mc("ngIf",e.form.get("emails").errors)}}function se(e,t){if(1&e&&(i.Vb(0,"a",27),i.hc(1,"titlecase"),i.hc(2,"titlecase"),i.Qb(3,"img",6),i.Ub()),2&e){const e=t.$implicit;i.mc("href",e.url,i.Fc)("matTooltip","Share via "+i.ic(2,7,e.type)),i.Eb("aria-label","Share via "+i.ic(1,5,e.type))("data-test",e.type+"LinkButton"),i.Db(3),i.mc("src","/assets/images/social/"+e.type+"-share.svg",i.Fc)}}function oe(e,t){if(1&e&&(i.Vb(0,"p",28),i.Pc(1),i.Ub()),2&e){const e=i.gc();i.Db(1),i.Rc(" ",e.config.description," ")}}let re=(()=>{class e{constructor(e,t,n,i,a,s,o,r){this.store=e,this.actions=t,this.dialogRef=n,this.data=i,this.clipboardService=a,this.snackBar=s,this.formBuilder=o,this.changeRef=r,this.maxEmailCount=50,this.config={title:"Share"},this.emailSent=!1,this.errorMessage="",this.formError="",this.ngUnsubscribe=new M.a,this.config=Object.assign(Object.assign({},this.config),i),this.initForm()}ngOnInit(){this.initEmailListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({emails:["",F.C.required,Object(E.a)(this.maxEmailCount).bind(this)]})}initEmailListeners(){this.actions.pipe(Object(x.l)(V.b),Object(D.a)(this.ngUnsubscribe)).subscribe(()=>{this.emailSent=!1,this.errorMessage="",this.changeRef.markForCheck()}),this.actions.pipe(Object(x.l)(V.d),Object(D.a)(this.ngUnsubscribe)).subscribe(()=>{this.emailSent=!0,this.errorMessage="",setTimeout(()=>{this.emailSent=!1,this.form.setValue({emails:""}),this.changeRef.markForCheck(),setTimeout(()=>this.focus())},5e3),this.changeRef.markForCheck()}),this.actions.pipe(Object(x.l)(V.c),Object(D.a)(this.ngUnsubscribe)).subscribe(e=>{this.emailSent=!1,this.errorMessage=Object(N.a)(e.error)||"There was an error sending the email.",setTimeout(()=>this.focus()),this.changeRef.markForCheck()})}focus(){var e;const t=null===(e=this.emailField)||void 0===e?void 0:e.nativeElement;t&&t.focus()}submitForm(e){const{type:t,title:n,relativeUrl:i,thumbUrl:a}=e,s=R.a.parseEmails(this.form.value.emails);this.store.dispatch(new V.b({share_type:t,share_title:n,share_thumbnail_path:a,share_link_path:i,share_emails:s}))}handleCopyClick(e,t){this.clipboardService.copyToClipboard(e,"url").pipe(Object(D.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackBar.open(`Link ${e?"copied":"not copied"}.`)}),t.preventDefault()}handleCloseClick(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(x.h),i.Pb(x.b),i.Pb(a.g),i.Pb(a.a),i.Pb(c.a),i.Pb(H.b),i.Pb(F.f),i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-share-url-dialog"]],viewQuery:function(e,t){if(1&e&&i.Vc(Z,!0),2&e){let e;i.xc(e=i.dc())&&(t.emailField=e.first)}},decls:14,vars:9,consts:[["role","dialog","aria-modal","true","data-test","shareUrlDialog",1,"share-url-dialog"],[1,"share-url-dialog__title","mb-5"],[4,"ngIf","ngIfElse"],["emailFormTmp",""],[1,"share-url-dialog__social"],["target","_blank","aria-label","Copy Link","matTooltip","Copy Link","matTooltipPosition","below","data-test","copyLinkButton",1,"share-url-dialog__social-link",3,"href","click"],[3,"src"],["class","share-url-dialog__social-link","target","_blank","matTooltipPosition","below",3,"href","matTooltip",4,"ngFor","ngForOf"],["class","share-url-dialog__description mv-3",4,"ngIf"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Close",1,"share-url-dialog__close",3,"click"],["icon","times","size","lg"],[1,"mv-2"],["type","message"],["class","mv-2",4,"ngIf"],[1,"share-url-dialog__form",3,"formGroup","submit"],["rows","1","formControlName","emails","placeholder","Email, comma separated","data-test","emailEntryField",1,"share-url-dialog__input","input","theme-light"],["emailField",""],["type","submit","app-button","","buttonType","primary","title","'Send Email'","data-test","emailLinkButton",1,"share-url-dialog__submit",3,"disabled","loading"],["size","small","class","mr-2","render","inline",4,"ngIf"],[4,"ngIf"],["type","error"],["size","small","render","inline",1,"mr-2"],["class","mv-1",4,"ngIf","ngIfElse"],["maxEmailErrorTmp",""],[1,"mv-1"],["class","flex flex-column mv-1",4,"ngIf"],[1,"flex","flex-column","mv-1"],["target","_blank","matTooltipPosition","below",1,"share-url-dialog__social-link",3,"href","matTooltip"],[1,"share-url-dialog__description","mv-3"]],template:function(e,t){if(1&e&&(i.Vb(0,"div",0),i.Vb(1,"h2",1),i.Pc(2),i.Ub(),i.Tb(3),i.Nc(4,J,4,0,"ng-container",2),i.Nc(5,ae,13,16,"ng-template",null,3,i.Oc),i.Sb(),i.Vb(7,"div",4),i.Vb(8,"a",5),i.cc("click",(function(e){return t.handleCopyClick(null==t.config.shareLink?null:t.config.shareLink.fullUrl,e)})),i.Qb(9,"img",6),i.Ub(),i.Nc(10,se,4,9,"a",7),i.Ub(),i.Nc(11,oe,2,1,"p",8),i.Vb(12,"button",9),i.cc("click",(function(){return t.handleCloseClick()})),i.Qb(13,"app-icon",10),i.Ub(),i.Ub()),2&e){const e=i.yc(6);i.Eb("aria-label",t.config.title+" Dialog"),i.Db(2),i.Rc(" ",t.config.title," "),i.Db(2),i.mc("ngIf",t.emailSent)("ngIfElse",e),i.Db(4),i.mc("href",null==t.config.shareLink?null:t.config.shareLink.fullUrl,i.Fc),i.Db(1),i.mc("src","/assets/images/social/link-share.svg",i.Fc),i.Db(1),i.mc("ngForOf",null==t.config.shareLink?null:t.config.shareLink.social),i.Db(1),i.mc("ngIf",t.config.description),i.Db(1),i.Eb("aria-label","Close")}},directives:[Q.p,G.c,Q.o,s.a,y.a,W.a,F.E,F.s,F.j,F.c,F.r,F.i,q.a,$.b],pipes:[Q.b,Q.x],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.share-url-dialog[_ngcontent-%COMP%]{position:relative;max-width:420px}.share-url-dialog__title[_ngcontent-%COMP%]{color:#1c2a3f;font-size:20px;letter-spacing:.5px;line-height:1.4em;font-weight:500}.share-url-dialog__description[_ngcontent-%COMP%]{color:#61779e;font-size:11px;letter-spacing:.275px;line-height:1.4em}.share-url-dialog__form[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:8px}.share-url-dialog__submit[_ngcontent-%COMP%]{flex:1 0 120px}.share-url-dialog__social[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:24px;margin-top:32px;margin-bottom:20px}.share-url-dialog__social-link[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:100%;cursor:pointer}.share-url-dialog__social-link[_ngcontent-%COMP%]:focus{outline:2px solid #2d72dc!important}.share-url-dialog__social-link[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.share-url-dialog__input[_ngcontent-%COMP%], .share-url-dialog__input[_ngcontent-%COMP%]:disabled{background-color:#f9fafd;color:#61779e;font-size:12px;letter-spacing:.3px;line-height:1.4em;opacity:1;resize:vertical;max-height:240px}.share-url-dialog__close[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-12px}@media (max-width:480px){.share-url-dialog__form[_ngcontent-%COMP%]{flex-wrap:wrap}}"],changeDetection:0}),function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([Object(x.e)(B.a.getSharing),X("design:type",I.a)],e.prototype,"sharing$",void 0),e})();var ce=n("tyNb");const le={maxWidth:"100vw",width:"100vw",height:"100vh",panelClass:"full-modal"};let pe=(()=>{class e{constructor(e,t,n,i,a,s,o){this.dialog=e,this.engineService=t,this.router=n,this.store=i,this.pendoService=a,this.productService=s,this.organizationsService=o}get isMobile(){return window.innerWidth<=959}openClipboardDialog(e,t){const n=Object.assign({data:{id:u.a.ClipboardDialog,copyText:e}},t);return this.dialog.open(p,n)}openShareDialog(e,t,n){return this.dialog.open(re,{id:u.a.ShareUrlDialog,disableClose:!0,data:{title:t,description:n,shareLink:e},maxWidth:"90vw"})}openConfirmDialog(e){const t=Object.assign({id:u.a.ConfirmDialog},e);return this.dialog.open(r.a,t)}openLimitDialog(){return this.closeAllDialogs(),this.dialog.open(o,{id:u.a.LimitDialog,width:"480px"})}openUpgradeDialog(e=!0){e&&this.closeAllDialogs();const t=this.store.selectSnapshot(C.a.getUserProfile),n=this.getContactProfileParams(t),i=t.premium_account_valid?t.premium_account_type:"free",a=Object(S.get)(t,"organizations[0].subscription.type","").toLowerCase(),s=this.store.selectSnapshot(w.a.isTrialExpired),o=Object(j.b)(t.account_settings);let r;switch(Object(S.get)(o,"account_purpose.value","")){case k.a.Business:r="business.html";break;case k.a.Education:r="school.html";break;default:r="individual.html"}const c=Object.assign(Object.assign({},n),{accountType:i,subscription:a,expired:s}),l=`${h.a.native?"":{[P.a.Local]:"https://localhost:1234",[P.a.QA]:"https://pricing-qa.biodigital.com",[P.a.Staging]:"https://pricing.biodigital.com",[P.a.Production]:"https://pricing.biodigital.com"}[h.a.deploy]}/${r}?${this.serializeQueryParams(c)}`,p=Object.assign(Object.assign({id:u.a.PricingDialog},le),{data:{title:"Upgrade",url:l,backgroundColor:"#0B1220"}}),d=encodeURIComponent(this.router.url);return this.dialog.open(O,p).afterClosed().subscribe(e=>{if(e){const t=Object.assign({action:"",plan:""},e.metadata),n={business:["starter","premium","enterprise"],education:["class","institution"]};let i="Individual";Object.entries(n).forEach(([e,n])=>{n.indexOf(t.plan)&&(i=e)}),t.action&&this.pendoService.track(`Pricing - ${Object(S.capitalize)(t.action)} - ${Object(S.capitalize)(t.plan)}`,{platform:this.productService.productType,page:i});let a="";switch(t.action){case"buy":if(h.a.native)return void this.engineService.fireEvent(g.a.NativeUpgrade,null);this.router.navigate(["/account/profile"],{queryParams:{section:"subscription",mode:"edit"}});break;case"contact":this.openContactDialog("pricing page");break;case"try":switch(!0){case n.business.includes(t.plan):a="/account/workflow/team/create?purpose=Business&returnTo="+d;break;case n.education.includes(t.plan):a="/account/workflow/team/create?purpose=Education&returnTo="+d;break;default:a="account/workflow"}this.router.navigateByUrl(a)}}else this.pendoService.track("Pricing - Exit")})}openContactDialog(e=""){const t=this.store.selectSnapshot(w.a.getOrganization),n=Object(S.isNil)(t)?"":""+t.id,i=this.store.selectSnapshot(C.a.getUserProfile),a=this.getContactProfileParams(i),s={[P.a.Local]:"http://craft-sandbox.biodigital.local",[P.a.QA]:"http://craft-sandbox.biodigital.local",[P.a.Staging]:"https://www.biodigital.com",[P.a.Production]:"https://www.biodigital.com"},o=h.a.native?s[P.a.Production]:s[h.a.deploy];if(h.a.native){const t=this.serializeQueryParams(Object.assign(Object.assign({},a),{organizationId:n,utm_source:"human-mobile",utm_campaign:e}));return window.open(`${o}/contact?${t}`,"_blank")}{const t=`${o}/headless/contact-us?${this.serializeQueryParams(Object.assign(Object.assign({},a),{organizationId:n,utm_source:"human-web",utm_campaign:e}))}`,i=Object.assign(Object.assign({id:u.a.ContactDialog},le),{data:{title:"Contact Us",url:t}});return this.dialog.open(O,i)}}openPremiumContentDialog(){const e=h.a.native||!this.isMobile;return this.openConfirmDialog({id:u.a.PremiumContentDialog,data:{titleText:"Premium Content",bodyText:e?"This is premium content. Upgrade to a Premium Plan for unlimited access.":"This is premium content. Visit us on desktop to upgrade to a premium plan.",confirmText:"Upgrade Now",confirmEnabled:e,cancelText:"OK",confirmColor:"warn"}})}openAddUserDialog(){const e=this.store.selectSnapshot(w.a.getOrganization);this.dialog.open(A,{id:u.a.AddTeamModelDialog,disableClose:!1,data:{organization:e}})}closeAllDialogs(){this.dialog.closeAll()}getContactProfileParams(e){const{first_name:t,last_name:n,email:i}=e,a=Object(S.get)(e,"organizations[0].name",""),s=Object(S.get)(e,"organizations[0].group_attributes",[]),o=Object(j.b)(e.account_settings),r=Object(S.get)(o,"account_purpose.value",""),c=Object(S.get)(o,"account_field.value",""),l=Object(S.get)(o,"account_field.value",""),p=Object(S.get)(o,"account_role.value",""),u=this.organizationsService.getOrganizationAttribute(s,"account_settings","account_company_size"),d=this.organizationsService.getOrganizationAttribute(s,"account_settings","account_company_website");return{first_name:t,last_name:n,email:i,company:a,website:d?d.value:"",purpose:r,role:p,program_type:l,program_size:u?u.value:"",industry:r===k.a.Education?"Academia":c}}serializeQueryParams(e){return Object.entries(e).map(([e,t])=>{const n="string"!=typeof t?JSON.stringify(t):t;return`${e}=${encodeURIComponent(n)}`}).join("&")}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(a.b),i.Zb(d.a),i.Zb(ce.e),i.Zb(x.h),i.Zb(b.b),i.Zb(m.a),i.Zb(_.a))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},L6yT:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Free="free",e.Premium="premium",e.Team="team",e}({})},Lnht:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("fXoL"),a=n("ofXK"),s=n("yIGu"),o=n("F+jD"),r=n("0njA");function c(e,t){if(1&e&&(i.Vb(0,"div",4),i.Pc(1),i.Ub()),2&e){const e=i.gc();i.Db(1),i.Rc(" ",e.label," ")}}function l(e,t){if(1&e&&(i.Vb(0,"app-list-item"),i.Vb(1,"div",5),i.Qb(2,"app-icon",6),i.Vb(3,"div"),i.Pc(4),i.Ub(),i.Ub(),i.Ub()),2&e){const e=t.$implicit;i.Db(4),i.Qc(e)}}const p=["Gain unlimited access to over 700 anatomy, disease and treatment models","Save unlimited 3D models","Embed models directly into your learning management system, website or application","Improve cross-team collaboration"];let u=(()=>{class e{constructor(){this.label="Team plans are great for schools or businesses looking to create a collaborative\nexperience for their users. With a team plan, you get:",this.features=p}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-team-features"]],inputs:{label:"label",features:"features"},decls:4,vars:2,consts:[[1,"feature","text-14"],["class","mb-4",4,"ngIf"],["listType","flat"],[4,"ngFor","ngForOf"],[1,"mb-4"],[1,"mv-1","flex","flex-row"],["icon","check",1,"mr-2"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Nc(1,c,2,1,"div",1),i.Vb(2,"app-list",2),i.Nc(3,l,5,1,"app-list-item",3),i.Ub(),i.Ub()),2&e&&(i.Db(1),i.mc("ngIf",t.label),i.Db(2),i.mc("ngForOf",t.features))},directives:[a.p,s.a,a.o,o.a,r.a],styles:[""],changeDetection:0}),e})()},Lwol:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var i=n("uDDk");class a{}class s{constructor(){this.type=i.a.Ticker,this.images=[],this.loopImage=!1}}},Lyqc:function(e,t,n){"use strict";n.d(t,"s",(function(){return a})),n.d(t,"v",(function(){return s})),n.d(t,"u",(function(){return o})),n.d(t,"C",(function(){return r})),n.d(t,"D",(function(){return c})),n.d(t,"t",(function(){return l})),n.d(t,"m",(function(){return p})),n.d(t,"o",(function(){return u})),n.d(t,"n",(function(){return d})),n.d(t,"c",(function(){return g})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"z",(function(){return m})),n.d(t,"B",(function(){return f})),n.d(t,"A",(function(){return y})),n.d(t,"g",(function(){return v})),n.d(t,"y",(function(){return O})),n.d(t,"i",(function(){return S})),n.d(t,"I",(function(){return x})),n.d(t,"h",(function(){return C})),n.d(t,"G",(function(){return w})),n.d(t,"p",(function(){return j})),n.d(t,"r",(function(){return k})),n.d(t,"q",(function(){return P})),n.d(t,"J",(function(){return _})),n.d(t,"L",(function(){return M})),n.d(t,"K",(function(){return I})),n.d(t,"b",(function(){return T})),n.d(t,"a",(function(){return U})),n.d(t,"x",(function(){return L})),n.d(t,"w",(function(){return z})),n.d(t,"j",(function(){return A})),n.d(t,"l",(function(){return F})),n.d(t,"k",(function(){return D})),n.d(t,"f",(function(){return E})),n.d(t,"E",(function(){return N})),n.d(t,"F",(function(){return R})),n.d(t,"H",(function(){return V}));var i=n("INTG");let a=(()=>{class e{constructor(e){this.query=e}}return e.type="[Bookmarks] Load",e})(),s=(()=>{class e{constructor(e){this.organizationId=e}}return e.type="[Bookmarks] Load Organization Bookmarks",e})(),o=(()=>{class e{constructor(e,t){this.organizationId=e,this.collectionId=t}}return e.type="[Bookmarks] Load Collection Bookmarks",e})(),r=(()=>{class e{constructor(e,t,n=!1){this.id=e,this.type=t,this.preview=n}}return e.type="[Bookmarks] Select Bookmark",e})(),c=(()=>{class e{constructor(e){this.bookmark=e}}return e.type="[Bookmarks] Select Bookmark Success",e})(),l=(()=>{class e{constructor(e){this.result=e}}return e.type="[Bookmarks] Load Success",e})(),p=(()=>{class e{constructor(e){this.bookmarkId=e}}return e.type="[Bookmarks] Delete Bookmark",e})(),u=(()=>{class e{constructor(e){this.bookmarkId=e}}return e.type="[Bookmarks] Bookmark Delete Success",e})(),d=(()=>{class e{constructor(e,t){this.bookmarkId=e,this.message=t}}return e.type="[Bookmarks] Bookmark Delete Fail",e})(),g=(()=>{class e{constructor(e){this.bookmarkIds=e}}return e.type="[Bookmarks] BulkDelete Bookmark",e})(),h=(()=>{class e{constructor(e){this.bookmarkIds=e}}return e.type="[Bookmarks] Bookmark BulkDelete Success",e})(),b=(()=>{class e{constructor(e,t){this.bookmarkIds=e,this.message=t}}return e.type="[Bookmarks] Bookmark BulkDelete Fail",e})(),m=(()=>{class e{constructor(e,t,n=!0){this.bookmarkEntry=e,this.inplace=t,this.includeIndex=n}}return e.type="[Bookmarks] Save Bookmark",e})(),f=(()=>{class e{constructor(e,t,n){this.bookmark=e,this.story=t,this.method=n}}return e.type="[Bookmarks] Bookmark Saved",e})(),y=(()=>{class e{constructor(e){this.bookmarkEntry=e}}return e.type="[Bookmarks] Bookmark Save Failed",e})(),v=(()=>{class e{constructor(){}}return e.type="[Bookmarks] Cancel Save Bookmark",e})(),O=(()=>{class e{constructor(){}}return e.type="[Bookmarks] Reset",e})(),S=(()=>{class e{constructor(){}}return e.type="[Bookmarks] Clear Bookmarks",e})(),x=(()=>{class e{constructor(e){this.sort=e}}return e.type="[Bookmarks] Sort",e})(),C=(()=>{class e{constructor(e,t){this.id=e,this.checked=t}}return e.type="[Bookmarks] Check Bookmark",e})(),w=(()=>{class e{constructor(e){this.ids=e}}return e.type="[Bookmarks] Set Checked Bookmarks",e})(),j=(()=>{class e{constructor(e,t,n,i,a,s,o,r,c){this.bookmarks=e,this.organizationId=t,this.collections=n,this.widgetURL=i,this.userLanguage=a,this.userApp=s,this.widgetOptions=o,this.offlineEnabled=r,this.productAccountId=c}}return e.type="[Bookmarks] Export Bookmarks",e})(),k=(()=>{class e{constructor(e){this.bookmarks=e}}return e.type="[Bookmarks] Export Bookmarks Success",e})(),P=(()=>{class e{constructor(e){this.bookmarks=e}}return e.type="[Bookmarks] Export Bookmarks Error",e})(),_=(()=>{class e{constructor(e,t=[],n=new Map){this.bookmark=e,this.addCollections=t,this.removeCollections=n}}return e.type="[Bookmarks] Update Bookmark Collections",e})(),M=(()=>{class e{constructor(e,t,n){this.bookmark=e,this.addCollections=t,this.removeCollections=n}}return e.type="[Bookmarks] Update Bookmark Collections Success",e})(),I=(()=>{class e{constructor(e,t,n){this.bookmark=e,this.addCollections=t,this.removeCollections=n}}return e.type="[Bookmarks] Update Bookmark Collections Error",e})(),T=(()=>{class e{constructor(e,t){this.bookmark=e,this.collections=t}}return e.type="[Bookmarks] Add Bookmark Collections Success",e})(),U=(()=>{class e{constructor(e,t){this.bookmark=e,this.collections=t}}return e.type="[Bookmarks] Add Bookmark Collections Error",e})(),L=(()=>{class e{constructor(e,t){this.bookmark=e,this.collections=t}}return e.type="[Bookmarks] Remove Bookmark Collections Success",e})(),z=(()=>{class e{constructor(e,t){this.bookmark=e,this.collections=t}}return e.type="[Bookmarks] Remove Bookmark Collections Error",e})(),A=(()=>{class e{constructor(e,t,n,a=i.b.lang,s,o){this.id=e,this.title=t,this.type=n,this.lang=a,this.groupAccess=s,this.collections=o}}return e.type="[Bookmarks] Copy Bookmark",e})(),F=(()=>{class e{constructor(e){this.newBookmark=e}}return e.type="[Bookmarks] Copy Bookmark Success",e})(),D=(()=>{class e{constructor(e,t){this.id=e,this.error=t}}return e.type="[Bookmarks] Copy Bookmark Failure",e})(),E=(()=>{class e{constructor(){}}return e.type="[Bookmarks] Cancel Copy Bookmark",e})(),N=(()=>{class e{constructor(e){this.title=e}}return e.type="[Bookmarks] Set Bookmark Text",e})(),R=(()=>{class e{constructor(e){this.viewMode=e}}return e.type="[Bookmarks] Set Bookmark View Mode",e})(),V=(()=>{class e{constructor(e){this.category=e}}return e.type="[Bookmarks] Set Selected Category",e})()},MCQd:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("LvDl");function a(e){return"?"+Object.entries(e).filter(([e,t])=>!Object(i.isNil)(t)).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&")}},MKYd:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("tk/3"),a=n("ZJ6O"),s=n("LRne"),o=n("lJxs"),r=n("JIr8"),c=n("SxJt"),l=n("zrlG"),p=n("ZR5G"),u=n("fXoL");const d="cdb/content",g="cdb/copy/content",h={headers:new i.d({"Content-Type":"application/json; charset=utf-8"})},b=["production","client","preview","internal_content","public_preview","demos","social","exports","real_data"];let m=(()=>{class e{constructor(e,t){this.http=e,this.serializeModuleService=t}saveModule(e,t){t=this.formatModulePath(t);const n=[d,"modules",t].join("/"),i=this.JSONStringify(e);return this.http.put(n,i,h).pipe(Object(o.a)(()=>c.a.Success),Object(r.a)(({status:e})=>e>=200&&e<=202?Object(s.a)(c.a.Success):Object(s.a)(c.a.Fail)))}mergeModule(e,t,n="exception"){return this.http.post("/cdb/merge/modules",{loft:e+".json",bridge:t+".json",merge_option:n})}copyState(e,t){const n=[g,"states",t].join("/"),a={headers:new i.d({"Content-Type":"application/json; charset=utf-8","source-state":e})};return this.http.put(n,{},a)}listContents(e,t,n,i=!1){const a=this.generateModulePath(e,t||"",n||"");return this.http.get("/cdb/ls/content/modules/"+a).pipe(Object(o.a)(e=>i?e.contents.map(e=>{const t=e.name.replace("/content/modules/","").replace(".json",""),n=e.name.split("/").pop().replace("/content/modules","").replace(".json",""),i=new l.a;return i.id=t,i.title=n,i.type=p.a.Module,i}):e.contents))}getState(e){return this.http.get("/cdb/ls/content/states/"+e).pipe(Object(o.a)(e=>e.contents))}getClients(){return this.http.get("/search/client").pipe(Object(o.a)(e=>e.clients))}getUsedStates(){const e={};return Object.values(Human.scene.objects).reduce((t,n)=>(["transformId","morphId","geometryId","materialId"].forEach(t=>{const i=this.getPropertyState(n,t);i.length&&(e[i]=!0)}),n.hasOwnProperty("renderables")&&["morphId","geometryId","materialId"].forEach(t=>{n.renderables.forEach(n=>{const i=this.getPropertyState(n,t);i.length&&(e[i]=!0)})}),t),{}),Object.keys(e)}parseScenePath(e){const t=e.split("/");return 1===t.length?null:{fullPath:"https://qa.biodigital.com/content/modules/"+e,relativePath:t.slice(0,t.length-1).join("/"),sceneName:t[t.length-1]}}formatModulePath(e){let t=e;return/\.json$/.test(e)||(t+=".json"),t}getPrimaryCategories(){return Object(s.a)(b)}getSecondaryCategories(e){switch(e){case"production":return Object(s.a)(["maleAdult","femaleAdult"]);case"client":return this.getClients();default:return Object(s.a)([])}}generateSaveModule(e){const t=this.parseScenePath(e),n=t.relativePath.split("/");return{id:e,name:t.sceneName,primaryCategory:n[0]||"",secondaryCategory:n[1]||""}}generateModulePath(e,t,n){const i=[];return e.length&&i.push(e),t.length&&i.push(t),n.length&&(n.indexOf(".json")<0&&(n+=".json"),i.push(n)),i.join("/")}getPropertyState(e,t){return null!=e[t]?e[t].split("/")[0]:""}JSONStringify(e){return JSON.stringify(e).replace(/[\u007f-\uffff]/g,e=>"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4))}}return e.\u0275fac=function(t){return new(t||e)(u.Zb(i.b),u.Zb(a.a))},e.\u0275prov=u.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},Mgbk:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e="",t,n=25,i=0){this.query=e,this.sortBy=t,this.pageSize=n,this.offset=i}}},Mh2x:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i,a=n("AcyG"),s=n("CAXj"),o=n("VJvM"),r=n("3zw+"),c=n("q8pu"),l=n("11Ye"),p=n("LvDl"),u=n("ve2m"),d=n("t15c"),g=n("qz+p"),h=n("eW6i"),b=n("JaAu"),m=n("5+WD"),f=n("gm/O"),y=n("WUhe"),v=n("zKvh"),O=n("uDDk"),S=n("h8op"),x=n("Vrox"),C=n("WFQG"),w=n("fXoL"),j=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},k=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const P={loading:!1,chapters:[],chaptersViewed:[],selectedChapter:null,isChapterAnimated:!1,thumbnails:new Map,patches:[],inversePatches:[]};let _=(()=>{let e=i=class{constructor(e,t,n,i){this.store=e,this.chapterService=t,this.animationService=n,this.engineService=i}static getStoryChapters(e){return e.chapters}static getChaptersViewed(e){return e.chaptersViewed}static getChapter(e){return Object(a.i)([i],t=>t.chapters.find(t=>t.id===e))}static getSelectedChapterId(e){return e.selectedChapter}static getSelectedChapter(e){return e.chapters.find(t=>t.id===e.selectedChapter)||null}static getNextChapter(e){const t=1+i.getSelectedChapterIndex(e);return e.chapters[t]}static getPreviousChapter(e){const t=-1+i.getSelectedChapterIndex(e);return e.chapters[t]}static getSelectedChapterIndex(e){return e.chapters.findIndex(t=>t.id===e.selectedChapter)}static getSelectedChapterTitle(e){return e.chapters.find(t=>t.id===e.selectedChapter).info.displayName}static getChapterCount(e){return e.chapters.length}static getRegisteredThumbnails(e){return e.thumbnails}static getIsChapterAnimated(e){return e.isChapterAnimated}static getSelectedChapterReadyState(e){const{chapters:t,selectedChapter:n}=e,a=i.findChapter(t,n);return Object(p.get)(a,"readyState")}static getChaptersLoaded(e){return{count:e.chapters.length,modelChapters:e.chapters.filter(e=>e.readyState.model),animationChapters:e.chapters.filter(e=>e.readyState.animation)}}static getAllChaptersModelsReady(e){return e.chapters.length>0&&e.chapters.every(e=>e.readyState.model)}static getSelectedChapterModelReady(e){const t=i.getSelectedChapterReadyState(e);return!Object(p.isNil)(t)&&t.model}static getAllChaptersAnimationsReady(e){return e.chapters.length>0&&e.chapters.every(e=>e.readyState.animation)}static getSelectedChapterBackground(e){const{chapters:t,selectedChapter:n}=e,a=i.findChapter(t,n);return Object(p.get)(a,"background")||u.a}static getAllChaptersBackground(e){return e.chapters.map(e=>Object(p.get)(e,"background"))}static getSelectedChapterAllAudio(e){const t=e.chapters.find(t=>t.id===e.selectedChapter);return t&&t.media?Object.values(t.media).filter(({data:e})=>"audio"===e.streamType):[]}static getSelectedChapterAudio(e,t){return this.getSelectedChapterAllAudio(e).find(e=>e.data.lang===t.lang)}static getSelectedChapterLegend(e){const{chapters:t,selectedChapter:n}=e,a=i.findChapter(t,n);return Object(p.get)(a,"legend")||[]}static getSelectedChapterClippingPlanes(e){const{chapters:t,selectedChapter:n}=e,a=i.findChapter(t,n);return Object(p.get)(a,"clippingPlanes")}static getChapterCamera(e){const{chapters:t,selectedChapter:n}=e,a=i.findChapter(t,n);return Object(p.get)(a,"camera.location")}static findChapter(e,t){return e.find(e=>e.id===t)}static getAllChaptersCurrentLayers(e){return e.chapters.map(e=>Object(p.get)(e,"visibilityLayers.current.layers",[]))}static getSelectedChapterSrcLayers(e){const{chapters:t,selectedChapter:n}=e,a=i.findChapter(t,n);return Object(p.get)(a,"visibilityLayers.src.layers",[])}static getSelectedChapterCurrentLayers(e){const{chapters:t,selectedChapter:n}=e,a=i.findChapter(t,n);return Object(p.get)(a,"visibilityLayers.current.layers",[])}static getSelectedChapterCurrentLayersIndex(e){const{chapters:t,selectedChapter:n}=e,a=i.findChapter(t,n);return Object(p.get)(a,"visibilityLayers.current.index")}static getSelectedChapterCurrentLayersPosition(e){const{chapters:t,selectedChapter:n}=e,a=i.findChapter(t,n);return Object(p.get)(a,"visibilityLayers.current.position")}static getSelectedChapterContentBlocks(e){const{chapters:t,selectedChapter:n}=e,a=i.findChapter(t,n);return Object(p.get)(a,"contentBlocks",[])}static getSelectedChapterTimelineMap(e){const{chapters:t,selectedChapter:n}=e,a=i.findChapter(t,n);return Object(p.get)(a,"timelineMap")||[]}setChapters(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters=t.chapters}))}SetChapterCameraAction(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).camera.action=t.cameraAction}))}setChapterUI(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).ui=t.ui}))}setChapterInfo(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).info=t.info}))}setChapterLegend(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).legend=t.legend}))}addToChapterLegend(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).legend.push(t.legend)}))}ReorderChapters(e,t){e.patchState(immer.produce(e.getState(),e=>{Object(m.e)(e.chapters,t.previousIndex,t.currentIndex)}));const n=e.getState().chapters.map(e=>e.id);e.dispatch(new y.a.ReorderQuestions(n))}SetChapterReadyState(e,t){const n=immer.produce(e.getState(),e=>{if(t.chapterId){const n=e.chapters.find(e=>e.id===t.chapterId);n&&(n.readyState=Object.assign(Object.assign({},n.readyState),t.readyState))}});e.patchState(n)}SetChapterPostProcessing(e,t){e.patchState(immer.produce(e.getState(),e=>{const n=e.chapters.find(e=>e.id===t.chapterId),i=n.properties||{};n.customData=Object.assign(Object.assign({},n.customData?n.customData:{}),{postprocess:t.effects}),n.properties=Object.assign(Object.assign({},i),t.properties)}))}SetChapterTransitions(e,t){e.patchState(immer.produce(e.getState(),e=>{const n=e.chapters.find(e=>e.id===t.chapterId);n.transitions=n.transitions||{},n.transitions[t.key]=t.transition}))}setChapterProperties(e,t){const n=t.chapterIds,i=t.properties;e.patchState(immer.produce(e.getState(),e=>{e.chapters.filter(e=>n.includes(e.id)).forEach(e=>{var t;const n=null!==(t=e.properties)&&void 0!==t?t:{};e.properties=Object.assign(Object.assign({},n),i)})}))}removeChapterProperties(e,t){const n=t.chapterIds,i=t.properties;e.patchState(immer.produce(e.getState(),e=>{e.chapters.filter(e=>n.includes(e.id)).forEach(e=>{(null==e?void 0:e.properties)&&i.forEach(t=>{delete e.properties[t]})})}))}SetChapterTransparencyMode(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).transparencyMode=t.transparencyMode}))}applyChapterPatch(e,t){const n=immer.applyPatches(e.getState(),t.patches);e.patchState(immer.produce(n,e=>{e.patches=[],e.inversePatches=[]}))}setChapterClippingPlane(e,t){const[n,i,a]=immer.produceWithPatches(e.getState(),e=>{const n=e.chapters.find(e=>e.id===t.chapterId);n.clippingPlanes.clips=t.clips,n.clippingPlanes.enabled=t.enabled,n.clippingPlanes.boundary=n.clippingPlanes.boundary||JSON.parse(JSON.stringify(this.engineService.getSceneBoundary()))}),s=immer.produce(n,e=>{e.patches.push(...i),e.inversePatches.push(...a)});t.record&&e.dispatch(new b.a.SavePatches([{forward:s.patches,inverse:[...s.inversePatches].reverse(),patchAction:o.c}])),e.patchState(t.record?immer.produce(s,e=>{e.patches=[],e.inversePatches=[]}):s)}setChapterBackground(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).background=t.background}))}setAllChaptersBackground(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.forEach(e=>{e.background=t.background})}))}resetSelectedChapterBackground(e,t){const{selectedChapter:n}=e.getState();this.store.dispatch(new o.s(n,u.a))}setSelectedChapterBackground(e,{background:t}){const n=e.getState().selectedChapter;this.store.dispatch(new o.s(n,t))}selectChapter(e,t){if(!t.chapter)return;this.store.dispatch([new f.a.UpdateNodesChecked(!1),new f.a.UpdateNodeSelected]);const n=this.animationService.isChapterAnimated(t.chapter);this.store.dispatch(new l.P(!!t.chapter));const i=immer.produce(e.getState(),e=>{e.chaptersViewed.some(e=>t.chapter.id===e)||e.chaptersViewed.push(t.chapter.id),e.selectedChapter=t.chapter?t.chapter.id:null,e.isChapterAnimated=n});e.patchState(i)}selectChapterById(e,{chapterId:t}){this.store.dispatch(new l.P(!0)),e.patchState({selectedChapter:t})}duplicateChapter(e,t){const n=t.chapter,a=this.chapterService.copyChapter(n,t.chapterId),s=e.getState().chapters.length,o=this.store.selectSnapshot(i.getSelectedChapterBackground),r=this.store.selectSnapshot(x.a.getRegisteredThumbnails),l=r.get(n.id);n.thumbnails?a.thumbnails=Object(p.cloneDeep)(n.thumbnails):Object(p.isNil)(l)?e.dispatch(new S.b(a.id,o,v.a.JPEG,92,d.a.medium,"square")):r.set(a.id,l);const u=this.chapterService.addChapterToEngine(Object(p.cloneDeep)(a),s);a.timelineMap=Object.values(u.maps).map(e=>this.animationService.fromEngineTimelineMap(e)),e.patchState(immer.produce(e.getState(),e=>{e.chapters.push(a)})),e.dispatch(new y.a.CopyQuestions(n.id,a.id)),e.dispatch(new c.d(n,a))}nextChapter(e,t){const n=e.getState().chapters,i=this.chapterService.getCurrentChapterId();let a=0;a=n.findIndex(e=>e.id===i),a<n.length-1&&a++,e.dispatch(new o.p(n[a]))}previousChapter(e,t){const n=e.getState().chapters,i=this.chapterService.getCurrentChapterId();let a=0;a=n.findIndex(e=>e.id===i),a>0&&a--,e.dispatch(new o.p(n[a]))}lastChapter(e,t){const n=e.getState().chapters;e.dispatch(new o.p(n[n.length-1]))}firstChapter(e,t){const n=e.getState().chapters;e.dispatch(new o.p(n[0]))}removeChapter(e,t){const{chapters:n,selectedChapter:i}=e.getState();if(1===n.length)return;this.chapterService.removeChapterFromEngine(t.chapter);const a=n.findIndex(e=>e.id===t.chapter.id);if(e.patchState(immer.produce(e.getState(),e=>{e.chapters.splice(a,1)})),t.chapter.id===i){const t=e.getState().chapters,n=Math.min(a,t.length-1);e.dispatch(new o.p(t[n]))}e.dispatch(new c.g(t.chapter))}resetStoryChaptersState(e,t){e.setState(P)}RecordCamera(e,t){e.patchState(immer.produce(e.getState(),e=>{const n=e.chapters.find(e=>e.id===t.chapterId);n.camera.location=t.camera,t.rotationCenter&&(n.camera.rotationCenter=t.rotationCenter)}))}setChapterCurrentLayersIndexPosition(e,t){const[n,i,a]=immer.produceWithPatches(e.getState(),e=>{const n=e.chapters.find(e=>e.id===t.chapterId).visibilityLayers.current;n.index=t.index,n.position=t.position}),s=immer.produce(n,e=>{e.patches.push(...i),e.inversePatches.push(...a)});e.patchState(s),t.record&&e.dispatch(new b.a.SavePatches([{forward:s.patches,inverse:s.inversePatches,patchAction:o.c}]))}setChapterMedia(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).media=t.media}))}setChapterContentBlocks(e,t){t.contentBlocks=[...t.contentBlocks.filter(e=>e.type===O.a.Ticker),...t.contentBlocks.filter(e=>e.type!==O.a.Ticker)],e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).contentBlocks=t.contentBlocks}))}addChapterTimelineMap(e,t){e.patchState(immer.produce(e.getState(),e=>{const n=e.chapters.find(e=>e.id===t.chapterId);n.timelineMap.push.apply(n.timelineMap,t.timelineMaps)}))}updateChapterTimelineMap(e,t){e.patchState(immer.produce(e.getState(),e=>{const n=e.chapters.find(e=>e.id===t.chapterId);t.updates.forEach(e=>{const t=n.timelineMap.find(t=>t.id===e.id);Object(p.merge)(t,e)})}))}removeFromChapterTimelineMap(e,t){e.patchState(immer.produce(e.getState(),e=>{const n=e.chapters.find(e=>e.id===t.chapterId);t.timelineMapIds.forEach(e=>{const t=n.timelineMap.findIndex(t=>t.id===e);n.timelineMap.splice(t,1)})}))}SetChapterLights(e,t){e.patchState(immer.produce(e.getState(),e=>{e.chapters.find(e=>e.id===t.chapterId).lights.libraries=[t.lights]})),this.engineService.setBranchLights(t.chapterId,t.lights)}};return e.\u0275fac=function(t){return new(t||e)(w.Zb(a.h),w.Zb(r.a),w.Zb(g.a),w.Zb(h.a))},e.\u0275prov=w.Lb({token:e,factory:e.\u0275fac}),j([Object(a.a)(o.H),k("design:type",Function),k("design:paramtypes",[Object,o.H]),k("design:returntype",void 0)],e.prototype,"setChapters",null),j([Object(a.a)(o.t),k("design:type",Function),k("design:paramtypes",[Object,o.t]),k("design:returntype",void 0)],e.prototype,"SetChapterCameraAction",null),j([Object(a.a)(o.G),k("design:type",Function),k("design:paramtypes",[Object,o.G]),k("design:returntype",void 0)],e.prototype,"setChapterUI",null),j([Object(a.a)(o.x),k("design:type",Function),k("design:paramtypes",[Object,o.x]),k("design:returntype",void 0)],e.prototype,"setChapterInfo",null),j([Object(a.a)(o.y),k("design:type",Function),k("design:paramtypes",[Object,o.y]),k("design:returntype",void 0)],e.prototype,"setChapterLegend",null),j([Object(a.a)(o.a),k("design:type",Function),k("design:paramtypes",[Object,o.a]),k("design:returntype",void 0)],e.prototype,"addToChapterLegend",null),j([Object(a.a)(o.m),k("design:type",Function),k("design:paramtypes",[Object,o.m]),k("design:returntype",void 0)],e.prototype,"ReorderChapters",null),j([Object(a.a)(o.D),k("design:type",Function),k("design:paramtypes",[Object,o.D]),k("design:returntype",void 0)],e.prototype,"SetChapterReadyState",null),j([Object(a.a)(o.B),k("design:type",Function),k("design:paramtypes",[Object,o.B]),k("design:returntype",void 0)],e.prototype,"SetChapterPostProcessing",null),j([Object(a.a)(o.E),k("design:type",Function),k("design:paramtypes",[Object,o.E]),k("design:returntype",void 0)],e.prototype,"SetChapterTransitions",null),j([Object(a.a)(o.C),k("design:type",Function),k("design:paramtypes",[Object,o.C]),k("design:returntype",void 0)],e.prototype,"setChapterProperties",null),j([Object(a.a)(o.k),k("design:type",Function),k("design:paramtypes",[Object,o.k]),k("design:returntype",void 0)],e.prototype,"removeChapterProperties",null),j([Object(a.a)(o.F),k("design:type",Function),k("design:paramtypes",[Object,o.F]),k("design:returntype",void 0)],e.prototype,"SetChapterTransparencyMode",null),j([Object(a.a)(o.c),k("design:type",Function),k("design:paramtypes",[Object,o.c]),k("design:returntype",void 0)],e.prototype,"applyChapterPatch",null),j([Object(a.a)(o.u),k("design:type",Function),k("design:paramtypes",[Object,o.u]),k("design:returntype",void 0)],e.prototype,"setChapterClippingPlane",null),j([Object(a.a)(o.s),k("design:type",Function),k("design:paramtypes",[Object,o.s]),k("design:returntype",void 0)],e.prototype,"setChapterBackground",null),j([Object(a.a)(o.r),k("design:type",Function),k("design:paramtypes",[Object,o.r]),k("design:returntype",void 0)],e.prototype,"setAllChaptersBackground",null),j([Object(a.a)(o.n),k("design:type",Function),k("design:paramtypes",[Object,o.n]),k("design:returntype",void 0)],e.prototype,"resetSelectedChapterBackground",null),j([Object(a.a)(o.I),k("design:type",Function),k("design:paramtypes",[Object,Object]),k("design:returntype",void 0)],e.prototype,"setSelectedChapterBackground",null),j([Object(a.a)(o.p),k("design:type",Function),k("design:paramtypes",[Object,o.p]),k("design:returntype",void 0)],e.prototype,"selectChapter",null),j([Object(a.a)(o.q),k("design:type",Function),k("design:paramtypes",[Object,Object]),k("design:returntype",void 0)],e.prototype,"selectChapterById",null),j([Object(a.a)(o.d),k("design:type",Function),k("design:paramtypes",[Object,o.d]),k("design:returntype",void 0)],e.prototype,"duplicateChapter",null),j([Object(a.a)(o.g),k("design:type",Function),k("design:paramtypes",[Object,o.g]),k("design:returntype",void 0)],e.prototype,"nextChapter",null),j([Object(a.a)(o.h),k("design:type",Function),k("design:paramtypes",[Object,o.h]),k("design:returntype",void 0)],e.prototype,"previousChapter",null),j([Object(a.a)(o.f),k("design:type",Function),k("design:paramtypes",[Object,o.f]),k("design:returntype",void 0)],e.prototype,"lastChapter",null),j([Object(a.a)(o.e),k("design:type",Function),k("design:paramtypes",[Object,o.f]),k("design:returntype",void 0)],e.prototype,"firstChapter",null),j([Object(a.a)(o.j),k("design:type",Function),k("design:paramtypes",[Object,o.j]),k("design:returntype",void 0)],e.prototype,"removeChapter",null),j([Object(a.a)(o.o),k("design:type",Function),k("design:paramtypes",[Object,o.o]),k("design:returntype",void 0)],e.prototype,"resetStoryChaptersState",null),j([Object(a.a)(o.i),k("design:type",Function),k("design:paramtypes",[Object,o.i]),k("design:returntype",void 0)],e.prototype,"RecordCamera",null),j([Object(a.a)(o.w),k("design:type",Function),k("design:paramtypes",[Object,o.w]),k("design:returntype",void 0)],e.prototype,"setChapterCurrentLayersIndexPosition",null),j([Object(a.a)(o.A),k("design:type",Function),k("design:paramtypes",[Object,o.A]),k("design:returntype",void 0)],e.prototype,"setChapterMedia",null),j([Object(a.a)(o.v),k("design:type",Function),k("design:paramtypes",[Object,o.v]),k("design:returntype",void 0)],e.prototype,"setChapterContentBlocks",null),j([Object(a.a)(o.b),k("design:type",Function),k("design:paramtypes",[Object,o.b]),k("design:returntype",void 0)],e.prototype,"addChapterTimelineMap",null),j([Object(a.a)(o.J),k("design:type",Function),k("design:paramtypes",[Object,o.J]),k("design:returntype",void 0)],e.prototype,"updateChapterTimelineMap",null),j([Object(a.a)(o.l),k("design:type",Function),k("design:paramtypes",[Object,o.l]),k("design:returntype",void 0)],e.prototype,"removeFromChapterTimelineMap",null),j([Object(a.a)(o.z),k("design:type",Function),k("design:paramtypes",[Object,o.z]),k("design:returntype",void 0)],e.prototype,"SetChapterLights",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getStoryChapters",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getChaptersViewed",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getSelectedChapterId",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getSelectedChapter",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getNextChapter",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getPreviousChapter",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getSelectedChapterIndex",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getSelectedChapterTitle",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getChapterCount",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getRegisteredThumbnails",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getIsChapterAnimated",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getSelectedChapterReadyState",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getChaptersLoaded",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getAllChaptersModelsReady",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getSelectedChapterModelReady",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getAllChaptersAnimationsReady",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getSelectedChapterBackground",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getAllChaptersBackground",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getSelectedChapterAllAudio",null),j([Object(a.f)([C.a]),k("design:type",Function),k("design:paramtypes",[s.a,C.b]),k("design:returntype",void 0)],e,"getSelectedChapterAudio",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getSelectedChapterLegend",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getSelectedChapterClippingPlanes",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",void 0)],e,"getChapterCamera",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",Array)],e,"getAllChaptersCurrentLayers",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",Array)],e,"getSelectedChapterSrcLayers",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",Array)],e,"getSelectedChapterCurrentLayers",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",Number)],e,"getSelectedChapterCurrentLayersIndex",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",Number)],e,"getSelectedChapterCurrentLayersPosition",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",Array)],e,"getSelectedChapterContentBlocks",null),j([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[s.a]),k("design:returntype",Array)],e,"getSelectedChapterTimelineMap",null),e=i=j([Object(a.g)({name:"storyChapters",defaults:P})],e),e})()},MuXT:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n("HDdC"),a=n("cp0P"),s=n("b36G"),o=n("5+tZ"),r=n("lJxs"),c=n("JIr8"),l=n("YQYg"),p=n("3zw+");class u{}var d=n("ZR5G"),g=n("LvDl"),h=n("eW6i");function b(e,...t){return()=>new Promise(n=>{e(...t,()=>{n()})})}var m=n("7b4e"),f=n("V7wM"),y=n("AytR"),v=(n("vCxQ"),n("uDDk")),O=n("fXoL");let S=(()=>{class e{constructor(){}getOnlyText(e){return e.map(e=>{switch(e.type){case v.a.Markdown:return e.markdown}}).join("")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=O.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=n("3fyd"),C=n("tk/3");const w=["reflections","lights"],j=["material","geometry","transform"],k=["tweens","morph"];let P=(()=>{class e{constructor(e,t,n,i){this.http=e,this.engineService=t,this.chapterService=n,this.contentBlocksService=i}getShownObjectsFromChapter(e){const t=[];return Object.entries(e.synchronization).forEach(([e,n])=>{n.shown&&t.push(e)}),t}getChapterLoadChunks(e,t,n){const i=this.getShownObjectsFromChapter(t),a=new l.a;return a.activate=!1,a.chapterId=t.id,a.objects=i,a.storyId=e,a.assetTypes=[...j,...k,...w],a.readyState={model:!0,animation:!0},[a]}getOnDemandLoadChunks(e,t){let n=[];return Human.timeline.rootTimelines[e]._chapters.forEach(i=>{const a=this.getChapterLoadChunks(e,i,t);n=i.id===t.targetChapterId?[...a,...n]:[...n,...a]}),n}getChapterIndex(e,t){return Human.timeline.rootTimelines[e]?Human.timeline.rootTimelines[e]._chapters.findIndex(e=>e.id===t):-1}getStory(e,t,n="en"){const i=t===d.a.Bookmark?this.getBookmark(e):this.getContent(e);if("en"===n)return i;{let a;return i.pipe(Object(o.a)(i=>(a=i,this.getStoryTranslation(e,t,n)))).pipe(Object(r.a)(e=>this.translateStory(a,e)),Object(c.a)(()=>i))}}getContentRoot(){return!0===y.a.offline?"undefined"==typeof localBaseDirectory?"":localBaseDirectory:"/"}getContent(e){return this.http.get(this.getContentRoot()+`content/modules/${e}.json`).pipe(Object(r.a)(e=>e))}getBookmark(e){return this.http.get("/search/bookmarks/data",{params:{be:e}}).pipe(Object(r.a)(e=>e.bookmark))}getLoadConfig(e,t=0){const n=new l.b;return n.chapterAssetBundle=!0,n.targetChapterId=Human.timeline.rootTimelines[e]._chapters[t].id,n.targetChapterConfig={global:{clipping:!0,graph:!0,camera:!0,properties:!0,transparencyMode:!0,postprocess:!0},static:{labels:!0},dynamic:{timeline:!0,particles:!0}},n.sortBy="chapter",n}buildStory(e,t,n){Human.events.fire("modules.fetch.start",e),Human.modules.moduleData[e]=t;const a=Object.assign({},t);return a.moduleId=e,new i.a(t=>{Human.modules.create(e,a,()=>{Human.modules.load(e,Object.values(Human.scene.rootObjects),[...w],()=>{Human.modules.activate(e,0,{},()=>{t.next(!0),t.complete()})})})})}getStoryChapters(e,t){const n=Human.modules.moduleData[e];return Human.timeline.rootTimelines[e]._chapters.map((e,i)=>this.chapterService.fromHumanChapter(n,t,e,i))}getStoryLoadChunks(e,t){let n=[];return n=this.getOnDemandLoadChunks(e,t),n.map(e=>Object.assign(Object.assign({},e),{chunkId:m.a.idWithPrefix("chunk")}))}loadStoryChunk(e,t){const n=e.objects.map(e=>Human.scene.objects[e]);e.storyId?Human.modules.load(e.storyId,n,e.assetTypes,()=>{t()}):this.engineService.loadGraphObject(e.objects[0]).subscribe(()=>{t()})}unloadStory(e,t=!0){const n=(e?[e]:Object.keys(Human.modules.modules)).map(e=>this.hardDeleteStory(e,t));return new i.a(e=>{n.length?Object(a.a)(n).subscribe(()=>{e.next(!0),e.complete()}):(e.next(!0),e.complete())})}createLoadObjectChunk(e){const t=new l.a;return t.assetTypes=[...j,...k],t.objects=[e],t}hardDeleteStory(e,t=!0){const n=(e in Human.modules.modules?Human.modules.modules[e].sceneGraph:[]).map(e=>Human.scene.objects[e.objectId]).filter(e=>!!e),a=Object(g.flatten)(n.map(e=>e.getLeafObjects())),s=b(Human.modules.deactivate,e,{}),o=b(Human.modules.unload,e,a,["geometries","morphs","reflections","tweens","lights","materials","transforms"]),r=b(Human.modules.destroy,e);return new i.a(n=>{(Human.timeline.activeRoot&&Human.timeline.activeRoot.id===e?s():Promise.resolve({})).then(()=>t?o():Promise.resolve({})).then(()=>r()).then(()=>(n.next(),void n.complete()))})}getStoryTranslation(e,t,n){return this.http.get(t===d.a.Bookmark?`/search/bookmarks/tr/${n}/${e}`:`/tr/${n}/${e}.json`).pipe(Object(r.a)(e=>Object(s.plainToClass)(u,e)))}getStoryType(e){return e.indexOf("/")>=0?d.a.Module:d.a.Bookmark}translateStory(e,t){const n=e.chapters||[],i=e.sceneGraph||[],a=t.objects||{},s=t.chapters||[];return e.displayName=t.displayName||e.displayName,e.description=t.description||e.description,i.forEach(e=>{(e.objects||[]).forEach(e=>{this.translateObject(e,a)})}),n.forEach((e,t)=>{const n=s[t];if(n){this.translateMetaInfo(e,n);const t=n.annotations||[];(e.annotations||[]).forEach((e,n)=>{const i=t[n];i&&this.translateMetaInfo(e,i)});const i=n.hotspots||[];(e.hotspots||[]).forEach((e,t)=>{const n=i[t];n&&this.translateMetaInfo(e,n)});const a=n.quizQuestions||[];(e.quizQuestions||[]).forEach((e,t)=>{const n=a[t];n&&this.translateQuizQuestion(e,n)})}}),e}translateQuizQuestion(e,t){if(t.nextLabel&&(e.nextLabel=t.nextLabel),["questionPrompt","explanation"].forEach(n=>{const i=t[n]||[];(e[n]||[]).forEach((e,t)=>{const n=i[t];n&&(e.markdown=n.markdown)})}),e.data&&t.data){const n=t.data.options||[];(e.data.options||[]).forEach((t,i)=>{const a=n[i];a&&(e.type===x.a.LabelAnatomy?this.translateMetaInfo(t.label,a.label):t.label=a.label)})}}translateMetaInfo(e,t){const{title:n,description:i}=t;e.hasOwnProperty("displayName")&&(e.displayName=n),e.hasOwnProperty("title")&&(e.title=n),e.hasOwnProperty("description")&&(e.description=i)}translateObject(e,t){const n=t[e.objectId];n&&(e.displayName=n);const i=e.objects;i&&i.forEach(e=>{this.translateObject(e,t)})}exportWrittenContent(e,t,n){const i=[];return i.push(`\n${e.displayName}\n    `),t.forEach((e,t)=>{i.push(`\n---\n\n# Chapter ${t+1}: ${e.info.displayName||"-No Title-"}\n\n${e.info.description||"-No Description-"}\n      `),e.legend.length&&(i.push("\n## Legend\n"),e.legend.forEach(e=>{i.push(`\n* ${e.label} (${f.a.rgbToHex(e.colors,!0)})\n`)}));const a=n.filter(t=>t.chapterId===e.id);a.length&&(i.push("\n## Labels\n"),a.forEach(e=>{i.push(`\n* ${e.title}\n`),e.description&&i.push(`\n  > ${e.description}\n`)}))}),i.join("")}exportQuizKey(e){const t=[];return e.forEach((e,n)=>{switch(t.push(`\n# QUESTION ${n+1} (${x.c[e.type]})\n\n## PROMPT\n${this.contentBlocksService.getOnlyText(e.questionPrompt)}\n      `),e.type){case x.a.MultipleChoice:e.data.options.forEach((n,i)=>{t.push(`\n## ANSWER ${i+1} ${e.data.correctAnswer===n.value?"- CORRECT":""}\n${n.label}\n            `)});break;case x.a.SelectAnatomy:t.push("\n## ANSWERS\n          "),e.data.correctAnswer.forEach((e,n)=>{t.push(`\n${e}\n            `)});break;case x.a.LabelAnatomy:e.data.options.forEach((e,n)=>{t.push(`\n## ANSWER ${n+1}\n${e.label.title}\n            `)})}this.contentBlocksService.getOnlyText(e.explanation).length&&t.push(`\n  \n## EXPLANATION\n${this.contentBlocksService.getOnlyText(e.explanation)}\n        `),t.push("\n\n\n      ")}),t.join("")}}return e.\u0275fac=function(t){return new(t||e)(O.Zb(C.b),O.Zb(h.a),O.Zb(p.a),O.Zb(S))},e.\u0275prov=O.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},N0Zw:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i,a=n("AcyG"),s=n("lWeg"),o=n("q8pu"),r=n("7b4e"),c=n("Mh2x"),l=n("CAXj"),p=n("aqTE"),u=n("LvDl"),d=n("4LIl"),g=n("JaAu"),h=n("2o60"),b=n("A+8E"),m=n("fXoL"),f=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const v={enableContextLabel:{enable:!0,enableInfo:!0,enableActions:!0},loading:!1,labelsCollapsed:!1,labelsCollapsedMode:d.a.None,labelScale:null,labels:[],contextLabel:null,selectedLabel:null,draggable:{pin:!0,tag:!0}};let O=(()=>{let e=i=class{constructor(e,t){this.store=e,this.labelsService=t}static getLabels(e){return e.labels}static getLabelsCollapsed(e){return e.labelsCollapsed}static getLabelsCollapsedMode(e){return e.labelsCollapsedMode}static getSelectedLabelId(e){return e.selectedLabel}static getSelectedLabel(e){return e.labels.find(t=>t.id===e.selectedLabel)||null}static getContextLabel(e){return e.contextLabel}static getChapterLabels(e,t){return e.labels.filter(e=>e.chapterId===t.selectedChapter)}static getChapterSequentialLabels(e){return Object(a.i)([i,c.a],(t,n)=>t.labels.filter(t=>t.chapterId===n.selectedChapter&&t.pinType===h.a.Sequential&&t.sequentialType===e))}static getLabelSequence(e){return Object(a.i)([i,i.getChapterSequentialLabels(b.a.Alphabetical),i.getChapterSequentialLabels(b.a.Numerical)],(t,n,i)=>{if(e.pinType!==h.a.Sequential)return null;switch(e.sequentialType){case b.a.Alphabetical:const t=n.findIndex(t=>t.id===e.id);return"ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(t);case b.a.Numerical:return i.findIndex(t=>t.id===e.id)+1}})}static getEnableContextLabel(e){return e.enableContextLabel.enable}static getEnableContextLabelInfo(e){return e.enableContextLabel.enableInfo}static getEnableContextLabelActions(e){return e.enableContextLabel.enableActions}static getLabelsDraggable(e){return e.draggable}static getLabelScale(e){return e.labelScale}PatchLabels(e,t){const n=immer.applyPatches(e.getState(),t.patches);e.patchState(n)}setLabelOffset(e,t){const[n,i,a]=immer.produceWithPatches(e.getState(),e=>{const n=e.labels.find(e=>e.id===t.labelId);n&&(n.offset=t.offset)});e.patchState(n),this.savePatches(i,a)}setLabels(e,t){e.patchState(immer.produce(e.getState(),e=>{e.labels=t.labels}))}setLabel(e,t){const[n,i,a]=immer.produceWithPatches(e.getState(),e=>{e.labels=e.labels.map(e=>e.id===t.label.id?t.label:e)});e.patchState(n),t.record&&this.savePatches(i,a)}setLabelStates(e,t){const[n,i,a]=immer.produceWithPatches(e.getState(),e=>{e.labels.find(e=>e.id===t.id).states=t.states});e.patchState(n),this.savePatches(i,a)}setLabelScale(e,t){e.patchState({labelScale:t.scale})}addLabel(e,t){const[n,i,a]=immer.produceWithPatches(e.getState(),e=>{const n=t.label.id||r.a.idWithPrefix("label"),i=Object.assign(Object.assign({},t.label),{id:n});e.labels.push(i)});e.patchState(n),this.savePatches(i,a)}addContextLabel(e,t){const n=immer.produce(e.getState(),e=>{e.contextLabel=Object.assign(Object.assign({},t.label),{id:s.a})});e.patchState(n)}copyLabels(e,t){const n=e.getState().labels,i=n.filter(e=>e.chapterId===t.sourceChapter.id).map(e=>Object.assign(Object.assign({},Object(u.cloneDeep)(e)),{id:r.a.idWithPrefix("label"),chapterId:t.targetChapter.id}));e.patchState({labels:[...n,...i]})}removeLabel(e,t){const[n,i,a]=immer.produceWithPatches(e.getState(),e=>{e.labels=e.labels.filter(e=>e.id!==t.label.id)});e.patchState(n),Human.scene.markers.delete(t.label.id),this.savePatches(i,a)}removeContextLabel(e,t){const n=immer.produce(e.getState(),e=>{e.contextLabel=void 0});Human.scene.markers.delete(s.a),e.patchState(n)}removeAllChapterLabels(e,t){const[n,i,a]=immer.produceWithPatches(e.getState(),e=>{const[n,i]=Object(u.partition)(e.labels,e=>e.chapterId!==t.chapter.id);i.forEach(e=>Human.scene.markers.delete(e.id)),e.labels=n});e.patchState(n),this.savePatches(i,a)}selectLabel(e,t){e.patchState({selectedLabel:t.label?t.label.id:null})}resetLabels(e,t){const n=e.getState();Human.scene.markers.delete(s.a),n.labels.forEach(e=>{Human.scene.markers.delete(e.id)}),e.setState(immer.produce(e.getState(),e=>{}))}convertLabels(e,t){const[n,i,a]=immer.produceWithPatches(e.getState(),e=>{t.labels.forEach(n=>{const i=e.labels.findIndex(e=>e.id===n.id);e.labels[i]=Object.assign(Object.assign({},e.labels[i]),t.fields)})});e.setState(Object.assign({},n)),this.savePatches(i,a)}enableContextLabel(e,t){e.patchState({enableContextLabel:Object.assign({},t)})}setLabelsShown(e,{labels:t,shown:n}){const i=e.getState().labels.map(e=>{const i=t.some(t=>t.id===e.id);return Object.assign(Object.assign({},e),{shown:i?n:e.shown})});e.patchState({labels:[...i]})}setAllLabelsShown(e,{show:t}){const n=e.getState().labels;e.dispatch(new o.t(n,t))}setLabelsCollapsed(e,{collapsed:t,collapsedMode:n}){e.patchState({labelsCollapsed:t,labelsCollapsedMode:n})}setLabelsDraggable(e,t){e.patchState({draggable:Object.assign({},t.draggable)})}savePatches(e,t){this.store.dispatch(new g.a.SavePatches([{forward:e,inverse:t,patchAction:o.f}]))}};return e.\u0275fac=function(t){return new(t||e)(m.Zb(a.h),m.Zb(p.a))},e.\u0275prov=m.Lb({token:e,factory:e.\u0275fac}),f([Object(a.a)(o.f),y("design:type",Function),y("design:paramtypes",[Object,o.f]),y("design:returntype",void 0)],e.prototype,"PatchLabels",null),f([Object(a.a)(o.n),y("design:type",Function),y("design:paramtypes",[Object,o.n]),y("design:returntype",void 0)],e.prototype,"setLabelOffset",null),f([Object(a.a)(o.q),y("design:type",Function),y("design:paramtypes",[Object,o.q]),y("design:returntype",void 0)],e.prototype,"setLabels",null),f([Object(a.a)(o.m),y("design:type",Function),y("design:paramtypes",[Object,o.m]),y("design:returntype",void 0)],e.prototype,"setLabel",null),f([Object(a.a)(o.p),y("design:type",Function),y("design:paramtypes",[Object,o.p]),y("design:returntype",void 0)],e.prototype,"setLabelStates",null),f([Object(a.a)(o.o),y("design:type",Function),y("design:paramtypes",[Object,o.o]),y("design:returntype",void 0)],e.prototype,"setLabelScale",null),f([Object(a.a)(o.b),y("design:type",Function),y("design:paramtypes",[Object,o.b]),y("design:returntype",void 0)],e.prototype,"addLabel",null),f([Object(a.a)(o.a),y("design:type",Function),y("design:paramtypes",[Object,o.a]),y("design:returntype",void 0)],e.prototype,"addContextLabel",null),f([Object(a.a)(o.d),y("design:type",Function),y("design:paramtypes",[Object,o.d]),y("design:returntype",void 0)],e.prototype,"copyLabels",null),f([Object(a.a)(o.i),y("design:type",Function),y("design:paramtypes",[Object,o.i]),y("design:returntype",void 0)],e.prototype,"removeLabel",null),f([Object(a.a)(o.h),y("design:type",Function),y("design:paramtypes",[Object,o.h]),y("design:returntype",void 0)],e.prototype,"removeContextLabel",null),f([Object(a.a)(o.g),y("design:type",Function),y("design:paramtypes",[Object,o.g]),y("design:returntype",void 0)],e.prototype,"removeAllChapterLabels",null),f([Object(a.a)(o.k),y("design:type",Function),y("design:paramtypes",[Object,o.k]),y("design:returntype",void 0)],e.prototype,"selectLabel",null),f([Object(a.a)(o.j),y("design:type",Function),y("design:paramtypes",[Object,o.j]),y("design:returntype",void 0)],e.prototype,"resetLabels",null),f([Object(a.a)(o.c),y("design:type",Function),y("design:paramtypes",[Object,o.c]),y("design:returntype",void 0)],e.prototype,"convertLabels",null),f([Object(a.a)(o.e),y("design:type",Function),y("design:paramtypes",[Object,o.e]),y("design:returntype",void 0)],e.prototype,"enableContextLabel",null),f([Object(a.a)(o.t),y("design:type",Function),y("design:paramtypes",[Object,o.t]),y("design:returntype",void 0)],e.prototype,"setLabelsShown",null),f([Object(a.a)(o.l),y("design:type",Function),y("design:paramtypes",[Object,o.l]),y("design:returntype",void 0)],e.prototype,"setAllLabelsShown",null),f([Object(a.a)(o.r),y("design:type",Function),y("design:paramtypes",[Object,o.r]),y("design:returntype",void 0)],e.prototype,"setLabelsCollapsed",null),f([Object(a.a)(o.s),y("design:type",Function),y("design:paramtypes",[Object,o.s]),y("design:returntype",void 0)],e.prototype,"setLabelsDraggable",null),f([Object(a.f)(),y("design:type",Function),y("design:paramtypes",[s.b]),y("design:returntype",void 0)],e,"getLabels",null),f([Object(a.f)(),y("design:type",Function),y("design:paramtypes",[s.b]),y("design:returntype",void 0)],e,"getLabelsCollapsed",null),f([Object(a.f)(),y("design:type",Function),y("design:paramtypes",[s.b]),y("design:returntype",void 0)],e,"getLabelsCollapsedMode",null),f([Object(a.f)(),y("design:type",Function),y("design:paramtypes",[s.b]),y("design:returntype",void 0)],e,"getSelectedLabelId",null),f([Object(a.f)(),y("design:type",Function),y("design:paramtypes",[s.b]),y("design:returntype",void 0)],e,"getSelectedLabel",null),f([Object(a.f)(),y("design:type",Function),y("design:paramtypes",[s.b]),y("design:returntype",void 0)],e,"getContextLabel",null),f([Object(a.f)([c.a]),y("design:type",Function),y("design:paramtypes",[s.b,l.a]),y("design:returntype",void 0)],e,"getChapterLabels",null),f([Object(a.f)(),y("design:type",Function),y("design:paramtypes",[s.b]),y("design:returntype",void 0)],e,"getEnableContextLabel",null),f([Object(a.f)(),y("design:type",Function),y("design:paramtypes",[s.b]),y("design:returntype",void 0)],e,"getEnableContextLabelInfo",null),f([Object(a.f)(),y("design:type",Function),y("design:paramtypes",[s.b]),y("design:returntype",void 0)],e,"getEnableContextLabelActions",null),f([Object(a.f)(),y("design:type",Function),y("design:paramtypes",[s.b]),y("design:returntype",void 0)],e,"getLabelsDraggable",null),f([Object(a.f)(),y("design:type",Function),y("design:paramtypes",[s.b]),y("design:returntype",void 0)],e,"getLabelScale",null),e=i=f([Object(a.g)({name:"labels",defaults:v})],e),e})()},N2iv:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.List=0]="List",e[e.Tree=1]="Tree",e}({})},"Oq7/":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{}},Ow1N:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),a=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})()},"P+IX":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("qXBG"),a=n("AcyG"),s=n("ECVi"),o=n("fXoL"),r=n("tyNb");let c=(()=>{class e{constructor(e,t,n){this.router=e,this.authService=t,this.store=n}canActivate(e,t){return this.store.selectSnapshot(s.a.getLoggedIn)||this.authService.isLoggedIn().toPromise().then(e=>!!e.signed_in||(this.router.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1))}}return e.\u0275fac=function(t){return new(t||e)(o.Zb(r.e),o.Zb(i.a),o.Zb(a.h))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},PCNd:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var i=n("ofXK"),a=n("R9Cn"),s=n("e0tp"),o=n("vvyD"),r=n("3Pt+"),c=n("Wqx0"),l=n("vXdC"),p=n("C6D4"),u=n("fXoL");class d extends l.a{constructor(){super(...arguments),this.accountUrl="biodigital.zendesk.com"}beforePageLoad(e){e.setLocale("en"),e.hide()}}let g=(()=>{class e{}return e.\u0275mod=u.Nb({type:e}),e.\u0275inj=u.Mb({factory:function(t){return new(t||e)},imports:[[p.a.forRoot(d)]]}),e})();var h=n("EWj2"),b=n("6n0X"),m=n("Ow1N"),f=n("wf0l"),y=n("yGOH");let v=(()=>{class e{}return e.\u0275mod=u.Nb({type:e}),e.\u0275inj=u.Mb({factory:function(t){return new(t||e)},imports:[[i.c,f.b,o.a,m.a,y.a]]}),e})();var O=n("PXMH"),S=n("9Xeq"),x=n("Wgla"),C=n("+Xsx"),w=n("S+jl"),j=n("+pSP"),k=n("aKmd"),P=n("lR5k"),_=n("izPL"),M=n("tyNb"),I=n("p3zp");let T=(()=>{class e{}return e.\u0275mod=u.Nb({type:e}),e.\u0275inj=u.Mb({factory:function(t){return new(t||e)},imports:[[i.c,s.a,j.a]]}),e})(),U=(()=>{class e{}return e.\u0275mod=u.Nb({type:e}),e.\u0275inj=u.Mb({factory:function(t){return new(t||e)},imports:[[M.i,h.a,v,a.b,w.a,i.c,y.a,j.a,O.a,s.a,o.a,_.a,k.a,x.a,S.a,m.a,r.z,c.a,C.a,I.a,b.a,g,P.a.forChild()],h.a,v,w.a,y.a,O.a,j.a,s.a,_.a,k.a,S.a,x.a,T,m.a,c.a,C.a,I.a,b.a]}),e})()},PUI9:function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var i=n("AcyG");class a{}var s=n("11Ye"),o=n("7u76"),r=n("eW6i"),c=n("e0fF"),l=n("H7eZ"),p=n("1a36"),u=n("YLgZ"),d=n("sTHe"),g=n("jDQD"),h=n("nYR2"),b=n("LRne"),m=n("z6cu"),f=n("lJxs"),y=n("JIr8"),v=n("vkgz"),O=n("AytR"),S=n("gzgB"),x=n("fXoL"),C=n("tk/3");let w=(()=>{class e{constructor(e){this.http=e,this.nodeInfoCache=new Map}queryNodeInfo(e,t,n="en",i=!0){if(O.a.offline)return Object(b.a)(void 0);const a=`/search/descriptions?name=${e}&plan=${t===S.a.Wikipedia?"wiki":t}&ol=${n}`,s=a;if(i&&this.nodeInfoCache.has(s)){const e=this.nodeInfoCache.get(s);return Object(b.a)(e)}return this.http.get(a).pipe(Object(f.a)(t=>({label:e,latinLabel:t.latin_term,description:t.description,source:t.source,sourceLink:t.url})),Object(y.a)(e=>404===e.status?Object(b.a)(void 0):Object(m.a)(e)),Object(v.a)(e=>this.nodeInfoCache.set(s,e)))}}return e.\u0275fac=function(t){return new(t||e)(x.Zb(C.b))},e.\u0275prov=x.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var j,k=n("nS47"),P=n("Mh2x"),_=n("LvDl"),M=n("qz+p"),I=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},T=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const U=new l.a(0,0,0,0,p.a.Hidden);let L=(()=>{let e=j=class{constructor(e,t,n,i,a){this.store=e,this.graphService=t,this.engineService=n,this.contentInfoService=i,this.animationService=a}static getEngine(e){return e.engine}static getReady(e){return e.ready}static getDisplay(e){return e.display}static getScrollMode(e){return e.scrollMode}static getVisible(e){return e.visible}static getViewGraph(e){return e.viewGraph}static getViewGraphNode(e){return t=>e.viewGraph.nodes[t]}static getEnginePosition(e){return e.enginePosition}static getChapter(e){return e.chapter}static getActiveTool(e){return e.activeTool}static getShowCameraBar(e){return e.showCameraBar}static getShowProgressBar(e){return e.showProgressBar}static getShowLabels(e){return e.showLabels}static getChapterInit(e){return e.chapterInit}static getAnimationPlaying(e){return e.animationPlaying}static getPlayAudio(e){return e.playAudio}static getAutoplay(e){return e.autoplay}static getXrayModeEnabled(e){return e.xrayModeEnabled}static getHoveredNode(e){return e.hoveredNode}static getLabelEditNode(e){return e.labelEditNode}static getQuerying(e){return e.queryingAnatomy}static getContextmenu(e){return e.contextmenu}static getPlaybackSpeed(e){return e.playbackSpeed}static getWatermarkEnabled(e){return e.watermarkEnabled}load(e,t){e.dispatch(new s.m("engine"))}loadSuccess({patchState:e},t){e({engine:t.result})}setReady(e,t){e.patchState({ready:t.ready})}setDisplay(e,t){e.patchState({display:t.display})}setZoomViaScrollAllowed(e,t){e.patchState({scrollMode:t.scrollMode})}setVisible(e,t){e.patchState({visible:t.visible})}setEnginePosition(e,t){e.patchState({enginePosition:Object.assign(Object.assign({},t.position),{right:t.position.left+t.position.width,bottom:t.position.top+t.position.height})})}resetEnginePosition(e,t){e.patchState({enginePosition:U})}setChapter(e,t){e.patchState({chapter:t.chapterId})}setChapterInit(e,t){e.patchState({chapterInit:t.chapterInit})}setActiveTool(e,t){e.patchState({activeTool:t.tool})}setGraph(e,t){e.patchState({viewGraph:Object.assign({},t.graph)})}clearGraph(e,t){e.patchState({viewGraph:Object(c.a)()})}setXrayMode(e,t){e.patchState({xrayModeEnabled:t.enabled})}centerCameraOnVisible(e,t){const n=this.engineService.getVisibleLeaves(),i=this.engineService.getBoundaryFromObjects(n),a=this.engineService.getCameraLookAt();a.look={x:(i.xmin+i.xmax)/2,y:(i.ymin+i.ymax)/2,z:(i.zmin+i.zmax)/2},Human.renderer.camera.fly.flyTo(a)}toggleProgressBar(e,t){e.patchState({showProgressBar:t.show})}toggleCameraBar(e,t){e.patchState({showCameraBar:t.show})}toggleLabels(e,t){const n=null!=t.show?t.show:!e.getState().showLabels;e.patchState({showLabels:n})}synchronizeVisibleNodes(e,t){const n=e.getState().viewGraph,i=this.stateMapToNodeIds(n,t.leafVisibilityState),a={};i.forEach(e=>{const n=this.engineService.getLeafObjects(e).reduce((e,n)=>e||t.nodes[n].shown,!1);a[e]={shown:n}}),this.graphService.synchronize(Object.assign({},n),{shown:"trueWins"},a),e.patchState({viewGraph:Object.assign({},n)})}synchronizeRenderableNodes(e,t){const n=e.getState().viewGraph,i=this.stateMapToNodeIds(n,t.leafRenderableState),a={};i.forEach(e=>{a[e]={renderable:!0}}),this.graphService.synchronize(n,{renderable:"falseWins"},a)}synchronizePickableNodes(e,t){const n=e.getState().viewGraph,i=this.stateMapToNodeIds(n,t.leafPickableState),a={};i.forEach(e=>{const t=this.engineService.getLeafObjects(e).reduce((e,t)=>e||Human.scene.objects[t].pickable,!1);a[e]={pickable:t}}),this.graphService.synchronize(n,{pickable:"trueWins"},a),e.patchState({viewGraph:Object.assign({},n)})}playChapterAnimation(e,t){const n=this.store.selectSnapshot(P.a.getSelectedChapter),i=Object(_.get)(n,"ui.play.count",0);this.animationService.play({startChapterId:n.id,loop:-1===i,numChapters:1,queue:!1}),e.getState().animationPlaying||this.animationService.pause()}toggleAnimation(e,t){const n=this.store.selectSnapshot(P.a.getSelectedChapterId);t.play?this.animationService.unpause(n):this.animationService.pause()}setAnimationPlaying(e,t){e.patchState({animationPlaying:t.playing})}setPlaybackSpeed(e,t){e.patchState({playbackSpeed:t.speed})}playAudio(e,t){e.patchState({playAudio:t.play})}setAutoplay(e,t){e.patchState({autoplay:t.enable})}setObjectLayerOrder(e,t){const n=e.getState().viewGraph,i=isNaN(t.layer)?0:t.layer;let a=[];t.nodes.forEach(e=>{const t=this.graphService.getDescendants(n,e.id,!0);a=a.concat(t)}),a.forEach(e=>{this.engineService.setObjectLayer(e,i),this.graphService.setState(n,e,{layer:i})}),e.patchState({viewGraph:Object.assign({},n)})}setObjectDisplayName(e,t){const n=Human.scene.objects[t.nodeId];n&&(n.displayName=t.displayName)}autoSortObjectLayers(e,t){const n=e.getState().viewGraph;let i=0;const a=Human.scene.getEnabledLeaves(),s=this.engineService.getObjectLayerValues(a);Object.keys(s).map(e=>parseInt(e,10)).sort((e,t)=>e-t).forEach(e=>{s[e].sort((e,t)=>t.value-e.value).forEach(e=>{const t=20*i;this.engineService.setObjectLayer(e.nodeId,t),this.graphService.setState(n,e.nodeId,{layer:t}),i++})}),e.patchState({viewGraph:Object.assign({},n)})}resetObjectLayers(e,t){const n=e.getState().viewGraph;Human.scene.getEnabledLeaves().forEach(e=>{this.engineService.setObjectLayer(e,0),this.graphService.setState(n,e,{layer:0})}),e.patchState({viewGraph:Object.assign({},n)})}setPostProcessingEffects(e,{effects:t}){this.engineService.setPostProcessingFeatures(t)}setProperties(e,{properties:t}){this.engineService.setProperties(Object.assign({},t))}setTransparencyMode(e,{mode:t}){this.engineService.setTransparencyMode(t)}expandNode(e,t){const n=this.store.selectSnapshot(j.getViewGraph);k.a.getAncestors(n,t.node.id,!0).forEach(e=>{n.nodes[e].boolState.expanded=!0}),this.store.dispatch(new s.E(n))}collapseNode(e,t){const n=this.store.selectSnapshot(j.getViewGraph);n.nodes[t.node.id].boolState.expanded=!1,this.store.dispatch(new s.E(n))}collapseAllViewTreeNodes(e,t){const n=this.store.selectSnapshot(j.getViewGraph);Object.values(n.nodes).forEach(e=>{e.boolState.expanded=!1}),this.store.dispatch(new s.E(n))}hoverNode(e,t){e.patchState({hoveredNode:t.node})}setLabelEditNode(e,t){e.patchState({labelEditNode:t.node})}queryNodeInfo(e,{node:t,fallback:n,lang:i}){e.patchState({queryingAnatomy:!0}),this.contentInfoService.queryNodeInfo(t.label,n,i).pipe(Object(h.a)(()=>e.patchState({queryingAnatomy:!1}))).subscribe(n=>e.dispatch(new s.s(t,n)),()=>e.dispatch(new s.r(t)))}queryNodeInfoSuccess(e,{node:t,info:n}){e.dispatch(new s.G(t,n))}setNodeInfo(e,{node:t,info:n}){const i=this.store.selectSnapshot(j.getViewGraph),a=i.nodes[t.id];a&&n&&(a.description=n.description,a.info=n,this.store.dispatch(new s.E(i)))}setContextMenu(e,t){e.patchState({contextmenu:{node:t.node,hit:t.hit}})}setWatermarkEnabled(e,{enabled:t}){e.patchState({watermarkEnabled:t})}stateMapToNodeIds(e,t){const n=Object.keys(t).map(t=>this.engineService.getNode(e,t)).filter(e=>!!e).map(e=>e.id);return new Set(n)}};return e.\u0275fac=function(t){return new(t||e)(x.Zb(i.h),x.Zb(o.a),x.Zb(r.a),x.Zb(w),x.Zb(M.a))},e.\u0275prov=x.Lb({token:e,factory:e.\u0275fac}),I([Object(i.a)(s.l),T("design:type",Function),T("design:paramtypes",[Object,s.l]),T("design:returntype",void 0)],e.prototype,"load",null),I([Object(i.a)(s.m),T("design:type",Function),T("design:paramtypes",[Object,s.m]),T("design:returntype",void 0)],e.prototype,"loadSuccess",null),I([Object(i.a)(s.M),T("design:type",Function),T("design:paramtypes",[Object,s.M]),T("design:returntype",void 0)],e.prototype,"setReady",null),I([Object(i.a)(s.A),T("design:type",Function),T("design:paramtypes",[Object,s.A]),T("design:returntype",void 0)],e.prototype,"setDisplay",null),I([Object(i.a)(s.N),T("design:type",Function),T("design:paramtypes",[Object,s.N]),T("design:returntype",void 0)],e.prototype,"setZoomViaScrollAllowed",null),I([Object(i.a)(s.P),T("design:type",Function),T("design:paramtypes",[Object,s.P]),T("design:returntype",void 0)],e.prototype,"setVisible",null),I([Object(i.a)(s.D),T("design:type",Function),T("design:paramtypes",[Object,s.D]),T("design:returntype",void 0)],e.prototype,"setEnginePosition",null),I([Object(i.a)(s.u),T("design:type",Function),T("design:paramtypes",[Object,s.u]),T("design:returntype",void 0)],e.prototype,"resetEnginePosition",null),I([Object(i.a)(s.B),T("design:type",Function),T("design:paramtypes",[Object,s.B]),T("design:returntype",void 0)],e.prototype,"setChapter",null),I([Object(i.a)(s.C),T("design:type",Function),T("design:paramtypes",[Object,s.C]),T("design:returntype",void 0)],e.prototype,"setChapterInit",null),I([Object(i.a)(s.w),T("design:type",Function),T("design:paramtypes",[Object,s.w]),T("design:returntype",void 0)],e.prototype,"setActiveTool",null),I([Object(i.a)(s.E),T("design:type",Function),T("design:paramtypes",[Object,s.E]),T("design:returntype",void 0)],e.prototype,"setGraph",null),I([Object(i.a)(s.c),T("design:type",Function),T("design:paramtypes",[Object,s.E]),T("design:returntype",void 0)],e.prototype,"clearGraph",null),I([Object(i.a)(s.R),T("design:type",Function),T("design:paramtypes",[Object,s.R]),T("design:returntype",void 0)],e.prototype,"setXrayMode",null),I([Object(i.a)(s.b),T("design:type",Function),T("design:paramtypes",[Object,s.b]),T("design:returntype",void 0)],e.prototype,"centerCameraOnVisible",null),I([Object(i.a)(s.Z),T("design:type",Function),T("design:paramtypes",[Object,s.Z]),T("design:returntype",void 0)],e.prototype,"toggleProgressBar",null),I([Object(i.a)(s.X),T("design:type",Function),T("design:paramtypes",[Object,s.X]),T("design:returntype",void 0)],e.prototype,"toggleCameraBar",null),I([Object(i.a)(s.Y),T("design:type",Function),T("design:paramtypes",[Object,s.Y]),T("design:returntype",void 0)],e.prototype,"toggleLabels",null),I([Object(i.a)(s.V),T("design:type",Function),T("design:paramtypes",[Object,s.V]),T("design:returntype",void 0)],e.prototype,"synchronizeVisibleNodes",null),I([Object(i.a)(s.U),T("design:type",Function),T("design:paramtypes",[Object,s.U]),T("design:returntype",void 0)],e.prototype,"synchronizeRenderableNodes",null),I([Object(i.a)(s.T),T("design:type",Function),T("design:paramtypes",[Object,s.T]),T("design:returntype",void 0)],e.prototype,"synchronizePickableNodes",null),I([Object(i.a)(s.o),T("design:type",Function),T("design:paramtypes",[Object,s.o]),T("design:returntype",void 0)],e.prototype,"playChapterAnimation",null),I([Object(i.a)(s.W),T("design:type",Function),T("design:paramtypes",[Object,s.W]),T("design:returntype",void 0)],e.prototype,"toggleAnimation",null),I([Object(i.a)(s.x),T("design:type",Function),T("design:paramtypes",[Object,s.x]),T("design:returntype",void 0)],e.prototype,"setAnimationPlaying",null),I([Object(i.a)(s.J),T("design:type",Function),T("design:paramtypes",[Object,s.J]),T("design:returntype",void 0)],e.prototype,"setPlaybackSpeed",null),I([Object(i.a)(s.n),T("design:type",Function),T("design:paramtypes",[Object,s.n]),T("design:returntype",void 0)],e.prototype,"playAudio",null),I([Object(i.a)(s.y),T("design:type",Function),T("design:paramtypes",[Object,s.y]),T("design:returntype",void 0)],e.prototype,"setAutoplay",null),I([Object(i.a)(s.I),T("design:type",Function),T("design:paramtypes",[Object,s.I]),T("design:returntype",void 0)],e.prototype,"setObjectLayerOrder",null),I([Object(i.a)(s.H),T("design:type",Function),T("design:paramtypes",[Object,s.H]),T("design:returntype",void 0)],e.prototype,"setObjectDisplayName",null),I([Object(i.a)(s.a),T("design:type",Function),T("design:paramtypes",[Object,s.a]),T("design:returntype",void 0)],e.prototype,"autoSortObjectLayers",null),I([Object(i.a)(s.v),T("design:type",Function),T("design:paramtypes",[Object,s.v]),T("design:returntype",void 0)],e.prototype,"resetObjectLayers",null),I([Object(i.a)(s.K),T("design:type",Function),T("design:paramtypes",[Object,s.K]),T("design:returntype",void 0)],e.prototype,"setPostProcessingEffects",null),I([Object(i.a)(s.L),T("design:type",Function),T("design:paramtypes",[Object,s.L]),T("design:returntype",void 0)],e.prototype,"setProperties",null),I([Object(i.a)(s.O),T("design:type",Function),T("design:paramtypes",[Object,s.O]),T("design:returntype",void 0)],e.prototype,"setTransparencyMode",null),I([Object(i.a)(s.g),T("design:type",Function),T("design:paramtypes",[Object,s.g]),T("design:returntype",void 0)],e.prototype,"expandNode",null),I([Object(i.a)(s.f),T("design:type",Function),T("design:paramtypes",[Object,s.f]),T("design:returntype",void 0)],e.prototype,"collapseNode",null),I([Object(i.a)(s.e),T("design:type",Function),T("design:paramtypes",[Object,s.e]),T("design:returntype",void 0)],e.prototype,"collapseAllViewTreeNodes",null),I([Object(i.a)(s.k),T("design:type",Function),T("design:paramtypes",[Object,s.k]),T("design:returntype",void 0)],e.prototype,"hoverNode",null),I([Object(i.a)(s.F),T("design:type",Function),T("design:paramtypes",[Object,s.F]),T("design:returntype",void 0)],e.prototype,"setLabelEditNode",null),I([Object(i.a)(s.q),T("design:type",Function),T("design:paramtypes",[Object,s.q]),T("design:returntype",void 0)],e.prototype,"queryNodeInfo",null),I([Object(i.a)(s.s),T("design:type",Function),T("design:paramtypes",[Object,s.s]),T("design:returntype",void 0)],e.prototype,"queryNodeInfoSuccess",null),I([Object(i.a)(s.G),T("design:type",Function),T("design:paramtypes",[Object,s.G]),T("design:returntype",void 0)],e.prototype,"setNodeInfo",null),I([Object(i.a)(s.z),T("design:type",Function),T("design:paramtypes",[Object,s.z]),T("design:returntype",void 0)],e.prototype,"setContextMenu",null),I([Object(i.a)(s.Q),T("design:type",Function),T("design:paramtypes",[Object,s.Q]),T("design:returntype",void 0)],e.prototype,"setWatermarkEnabled",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getEngine",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getReady",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getDisplay",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getScrollMode",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getVisible",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getViewGraph",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getViewGraphNode",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getEnginePosition",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getChapter",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getActiveTool",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getShowCameraBar",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getShowProgressBar",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getShowLabels",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getChapterInit",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getAnimationPlaying",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getPlayAudio",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getAutoplay",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getXrayModeEnabled",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getHoveredNode",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getLabelEditNode",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getQuerying",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getContextmenu",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getPlaybackSpeed",null),I([Object(i.f)(),T("design:type",Function),T("design:paramtypes",[a]),T("design:returntype",void 0)],e,"getWatermarkEnabled",null),e=j=I([Object(i.g)({name:"engine",defaults:{loading:!1,ready:!1,viewGraph:Object(c.a)(),hoveredNode:void 0,labelEditNode:void 0,queryingAnatomy:!1,engine:"",chapter:"",chapterInit:{id:"",init:!1,camera:!1,annotations:!1,graph:!1,properties:!1,particles:!1,clips:!1,postprocessing:!1,transparency:!1},showProgressBar:!0,showCameraBar:!0,showLabels:!0,activeTool:d.a.Select,animationPlaying:!0,autoplay:!0,playAudio:!1,display:!0,visible:!0,scrollMode:g.a.Capture,playbackSpeed:1,xrayModeEnabled:!1,contextmenu:{node:null,hit:null},watermarkEnabled:!1},children:[u.a]})],e),e})()},PV7u:function(e,t,n){"use strict";n.d(t,"a",(function(){return ut}));var i=n("AcyG"),a=n("/MKm"),s=n("L2KA"),o=n("eKhQ"),r=n("qBAC"),c=n("c8sk"),l=n("ECVi"),p=n("Lyqc"),u=n("5+tZ"),d=n("IzEk"),g=n("0IaG"),h=n("fXoL"),b=n("ofXK"),m=n("IlST"),f=n("0njA"),y=n("k0jR"),v=n("XNiG"),O=n("LRne"),S=n("HDdC"),x=n("3Pt+"),C=n("1G5W"),w=n("Kj3r"),j=n("/uUt"),k=n("DTUA"),P=(n("zrlG"),n("937/")),_=n("l5mm"),M=n("eNwd"),I=n("lJxs"),T=n("pLZG"),U=n("vkgz"),L=n("ewuU"),z=n("RD2w"),A=n("5miH"),F=n("+6Fv"),D=n("jDQD"),E=n("4bFC"),N=n("LvDl"),R=n("jhN1");let V=(()=>{class e{constructor(e,t,n){this.store=e,this.publishService=t,this.sanitizer=n}set model(e){const t=this.store.selectSnapshot(c.a.getWidgetURL),n=this.store.selectSnapshot(l.a.getUserLanguage),i=this.store.selectSnapshot(o.a.getSelectedOrganizationProductAccountId),a=this.publishService.getWidgetURL(e,t,this.params,null,null,n,null,i);this.src=this.sanitizer.bypassSecurityTrustResourceUrl(a)}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(h.Pb(i.h),h.Pb(a.b),h.Pb(R.b))},e.\u0275dir=h.Kb({type:e,selectors:[["iframe","appEmbedSrc",""]],hostVars:1,hostBindings:function(e,t){2&e&&h.Yb("src",t.src,h.Ec)},inputs:{params:"params",model:"model",id:"id"}}),e})();const B=["widgetContainer"],H=["widgetFrame"];let Q=(()=>{class e{constructor(e,t,n){this.elRef=e,this.cameraService=t,this.changeDetectorRef=n,this.scalable=!1,this.labelScale=1,this.allVisibilityLayers=[],this.cameraUpdated=new h.p,this.ngUnsubscribe=new v.a,this.widgetOptionsSubject=new v.a}get options(){return this._options}set options(e){e&&(this._options=e,this.updateWidget(this.options))}get topOffset(){const e=(this.elRef.nativeElement.offsetHeight-this.height)/2;return this.scaleFactor<1?e:Math.max(0,e)}get leftOffset(){const e=(this.elRef.nativeElement.offsetWidth-this.width)/2;return this.scaleFactor<1?e:Math.max(0,e)}get scaleFactor(){if(this.scalable){const{offsetWidth:e,offsetHeight:t}=this.containerRef.nativeElement,n=Math.min(e/this.width,t/this.height,1);return 1===n?1:.95*n}return 1}ngOnInit(){this._apiRef=new HumanAPI({iframeId:this.frameRef.nativeElement.id}),this.initAPIListeners(),this.initQuizAPIListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initAPIListeners(){this.getAPIEvent(A.a.HumanReady).pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(()=>{this.setupCameraTracking(),this.setupCameraRotation(),this.setWidgetUIConfig(this._params),this.getModelBackgroundColor().pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.defaultBackgroundColor=e,this.setWidgetBackground(this.options.backgroundColor||this.defaultBackgroundColor)}),this.getLayers().pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.allVisibilityLayers=e,this.changeDetectorRef.markForCheck()})})}initQuizAPIListeners(){this.widgetOptionsSubject.asObservable().pipe(Object(I.a)(e=>e.uiQuiz),Object(T.a)(e=>!Object(N.isNil)(e))).pipe(Object(j.a)((e,t)=>Object(N.isEqual)(e,t)),Object(T.a)(()=>!Object(N.isNil)(this._apiRef)),Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{const{mode:t,number:n}=e,i=t===E.a.Locked;if(i){const e=parseInt(n,10),t=isNaN(e)?1:e,a=isNaN(e)?void 0:e;this._apiRef.send(z.a.QuizReset),this._apiRef.send(z.a.QuizSet,{locked:i,startNumber:t,endNumber:a}),this._apiRef.send(z.a.QuizEnter)}else this._apiRef.send(z.a.QuizSet,{locked:i}),this._apiRef.send(z.a.QuizExit)})}updateWidget(e){this.width=e.width,this.height=e.height,this.scalable=e.scalable,this.setLabelScale(e.labelScale),this.setWidgetUIConfig(e.options),this.setWidgetBackground(this.options.backgroundColor||this.defaultBackgroundColor)}setWidgetUIConfig(e){if(this._apiRef&&e){const i=this.convertWidgetOptionsToDisplayParams(e);this.setUIDisplay(i);const a=(n=e.initial).button?F.a.Button:n.handHint?F.a.Hand:n.play?F.a.Play:void 0,s=(t=e.disableScroll).alert?D.a.DoNotCaptureShowMessage:t.overlay?D.a.DoNotCapture:D.a.Capture,o={enabled:e.uiTutorial};this._apiRef.send(z.a.UISetOndemand,{enabled:!e.autoLoad}),this._apiRef.send(z.a.UISetLoadingExperience,a),this._apiRef.send(z.a.UISetScrollCaptureMode,s),this._apiRef.send(z.a.UISetTutorial,o),this.widgetOptionsSubject.next(e)}var t,n}takeSnapshot(e="jpeg",t){return this.getAPIData(z.a.UISnapshot,Object.assign({width:this.width,height:this.height,fileType:e},t))}setCameraOrbit(e){this.sendAPIData(z.a.CameraOrbit,{yaw:e})}setWidgetBackground(e){this._apiRef&&e&&this.sendAPIData(z.a.UIPresetBackground,e)}setLabelScale(e){this._apiRef&&this.sendAPIData(z.a.LabelsSetScale,{scale:e})}setupCameraTracking(){this.getCurrentCamera().pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.setDefaultCamera(e),this.getCameraUpdates().pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.setUpdateCamera(e)})})}setupCameraRotation(){let e=performance.now();Object(_.a)(0,M.a).pipe(Object(T.a)(()=>!!this._rotateDegrees),Object(I.a)(()=>this._rotateDegrees*(performance.now()-e)*.001),Object(U.a)(()=>e=performance.now()),Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.setCameraOrbit(e)})}setDefaultCamera(e){this._defaultCamera=e,this.setUpdateCamera(e)}setUpdateCamera(e){this._currentCamera=e;const t=this.cameraService.areCamerasEqual(this.cameraService.roundCamera(this._defaultCamera,3),this.cameraService.roundCamera(this._currentCamera,3));this.cameraUpdated.emit(t?null:this._currentCamera)}getAPIEvent(e){return new S.a(t=>{this._apiRef.on(e,e=>{t.next(e)})})}getAPIData(e,t){return new S.a(n=>{this._apiRef.send(e,t,e=>{n.next(e),n.complete()})})}sendAPIData(e,t){this._apiRef.send(e,t)}getCurrentCamera(){return this.getAPIData(z.a.CameraInfo).pipe(Object(I.a)(e=>({eye:e.position,look:e.target,up:e.up})))}getModelBackgroundColor(){return this.getAPIData(z.a.UIGetBackground).pipe(Object(I.a)(e=>e?new L.a([...[].concat(...e.colors)],e.gradientType,e.colorStops):null))}getCameraUpdates(){return this.getAPIEvent(A.a.CameraUpdated).pipe(Object(I.a)(e=>{const{position:t,target:n,up:i}=e;return{eye:t,look:n,up:i}}))}setUIDisplay(e){this._apiRef.send(z.a.UISetDisplay,e)}getLayers(){return this.getAPIData(z.a.SceneGetLayers)}convertWidgetOptionsToDisplayParams(e){return{info:e.uiInfo,search:e.uiSearch,undo:e.uiUndo,fullscreen:e.uiFullscreen,nav:e.uiNav,tools:e.uiTools,help:e.uiHelp,chapterList:e.uiChapterList,labelList:e.uiLabelList,anatomyDescriptions:e.uiAnatomyDescriptions,legend:e.uiLegend,loader:e.uiLoader,whiteboard:e.uiWhiteboard,visibilityLayers:e.uiVisibilityLayers,anatomyLabels:e.uiAnatomyLabels}}}return e.\u0275fac=function(t){return new(t||e)(h.Pb(h.m),h.Pb(P.a),h.Pb(h.i))},e.\u0275cmp=h.Jb({type:e,selectors:[["app-publish-widget"]],viewQuery:function(e,t){if(1&e&&(h.Jc(B,!0),h.Jc(H,!0)),2&e){let e;h.xc(e=h.dc())&&(t.containerRef=e.first),h.xc(e=h.dc())&&(t.frameRef=e.first)}},inputs:{model:"model",options:"options"},outputs:{cameraUpdated:"cameraUpdated"},decls:5,vars:17,consts:[[1,"widget"],["widgetContainer",""],[1,"widget__container"],["appEmbedSrc","","allowfullscreen","","id","widget-frame",1,"widget__frame",3,"model","width","height"],["widgetFrame",""]],template:function(e,t){1&e&&(h.Vb(0,"div",0,1),h.Vb(2,"div",2),h.Qb(3,"iframe",3,4),h.Ub(),h.Ub()),2&e&&(h.Db(2),h.Kc("width",t.width+"px")("height",t.height+"px")("top",t.topOffset+"px")("left",t.leftOffset+"px")("transform","scale("+t.scaleFactor+")"),h.Db(1),h.Kc("width",t.width+"px")("height",t.height+"px"),h.mc("model",t.model)("width",t.width)("height",t.height))},directives:[V],styles:[".widget[_ngcontent-%COMP%]{display:block;width:100%;height:100%;position:relative}.widget__container[_ngcontent-%COMP%]{position:absolute;padding:8px}.widget__frame[_ngcontent-%COMP%]{display:block;width:100%;height:100%;box-shadow:0 0 0 1px #eaeff5}"],changeDetection:0}),e})();var G=n("zKvh"),W=n("stSV"),q=n("4qFM");class ${constructor(e={width:700,height:550},t="image/jpeg",n=1){this.dimensions=e,this.imageType=t,this.labelScale=n}}var X=n("b36G"),Z=n("gw9s"),J=n("Xk3F"),K=n("Kzh2"),Y=n("ZR5G"),ee=n("QtmD"),te=n("nclC"),ne=n("MuXT"),ie=n("dNgK"),ae=n("UdTj"),se=n("QibW"),oe=n("bSwM"),re=n("Y8QC"),ce=n("awCs"),le=n("STbY"),pe=n("Qu3c"),ue=n("RGY+");class de{constructor(e,t,n,i=1){this.red=e,this.green=t,this.blue=n,this.alpha=i}}var ge=n("V7wM"),he=n("R9Cn");let be=(()=>{class e{constructor(){this.size="normal",this.colorSelected=new h.p,this.colorHexSelected=new h.p}get colorHex(){return this.getHexFromColor(this.color)}get backgroundCSS(){if(this.color){const{red:e,green:t,blue:n,alpha:i}=this.color;return`rgba(${255*e}, ${255*t}, ${255*n}, ${i})`}return""}ngOnInit(){}handleColorPickerChange(e){const t=e?this.getColorFromHex(e):null;this.colorSelected.emit(t),this.colorHexSelected.emit(e)}getColorFromHex(e){const t=ge.a.hexToRgba(e,!0);return new de(t[0],t[1],t[2],t[3])}getHexFromColor(e){if(e){const{red:t,green:n,blue:i,alpha:a}=e;return ge.a.rgbaToHex([t,n,i,a],!0)}return""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Jb({type:e,selectors:[["app-color-picker"]],inputs:{color:"color",size:"size",alphaEnabled:"alphaEnabled"},outputs:{colorSelected:"colorSelected",colorHexSelected:"colorHexSelected"},decls:1,vars:11,consts:[[1,"picker",3,"colorPicker","cpAlphaChannel","cpOutputFormat","colorPickerChange"]],template:function(e,t){1&e&&(h.Vb(0,"div",0),h.cc("colorPickerChange",(function(e){return t.handleColorPickerChange(e)})),h.Ub()),2&e&&(h.Kc("background",t.backgroundCSS),h.Hb("picker--small","small"===t.size)("picker--normal","normal"===t.size)("picker--large","large"===t.size),h.mc("colorPicker",t.colorHex)("cpAlphaChannel",t.alphaEnabled?"always":"disabled")("cpOutputFormat","hex"))},directives:[he.a],styles:[".picker[_ngcontent-%COMP%]{display:inline-block;width:32px;height:32px;border-radius:50%;border:1px solid #61779e;background-color:transparent}.picker--small[_ngcontent-%COMP%]{width:24px;height:24px}.picker--large[_ngcontent-%COMP%]{width:48px;height:48px}"],changeDetection:0}),e})();var me=n("XoCC"),fe=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},ye=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const ve=["imageTabs"];function Oe(e,t){if(1&e&&(h.Vb(0,"fieldset",3),h.Vb(1,"legend",17),h.Pc(2,"3D Embeddable Dimensions"),h.Ub(),h.Vb(3,"app-form-field",52),h.Qb(4,"input",53),h.Vb(5,"div",54),h.Pc(6),h.Ub(),h.Ub(),h.Vb(7,"app-form-field",55),h.Qb(8,"input",56),h.Vb(9,"div",54),h.Pc(10),h.Ub(),h.Ub(),h.Ub()),2&e){const e=t.ngIf;h.Db(3),h.mc("isCompact",!0),h.Db(1),h.mc("min",e.width),h.Eb("aria-label","Width"),h.Db(2),h.Rc("Min. ",e.width,"px"),h.Db(1),h.mc("isCompact",!0),h.Db(1),h.mc("min",e.height),h.Eb("aria-label","Height"),h.Db(2),h.Rc("Min. ",e.height,"px")}}function Se(e,t){if(1&e&&(h.Vb(0,"app-panel",50),h.Nc(1,Oe,11,8,"fieldset",51),h.hc(2,"async"),h.Ub()),2&e){const e=h.gc(2);h.Db(1),h.mc("ngIf",h.ic(2,1,e.minDimensions$))}}function xe(e,t){if(1&e&&(h.Vb(0,"option",67),h.Pc(1),h.Ub()),2&e){const e=t.index;h.mc("value",e+1),h.Db(1),h.Rc(" ",e+1," ")}}function Ce(e,t){if(1&e&&(h.Vb(0,"app-panel",57),h.Vb(1,"div",58),h.Vb(2,"mat-checkbox",59),h.Pc(3,"Assessment Mode"),h.Ub(),h.Vb(4,"div",60),h.Vb(5,"mat-radio-group",61),h.Vb(6,"mat-radio-button",62),h.Pc(7,"All questions"),h.Ub(),h.Vb(8,"div",63),h.Vb(9,"mat-radio-button",64),h.Pc(10,"Single question"),h.Ub(),h.Vb(11,"select",65),h.Nc(12,xe,2,2,"option",66),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub()),2&e){const e=h.gc(2);h.mc("isCompact",!0)("formGroup",e.formQuiz),h.Db(12),h.mc("ngForOf",e.quizQuestions)}}function we(e,t){1&e&&(h.Vb(0,"mat-checkbox",68),h.Pc(1,"Layers"),h.Ub())}function je(e,t){1&e&&(h.Vb(0,"div",69),h.Vb(1,"mat-checkbox",36),h.Pc(2,'Show "Click to Interact" hint'),h.Ub(),h.Vb(3,"div",37),h.Vb(4,"mat-radio-group",38),h.Vb(5,"mat-radio-button",70),h.Pc(6,"Button"),h.Ub(),h.Vb(7,"mat-radio-button",71),h.Pc(8,"Animated hand"),h.Ub(),h.Vb(9,"mat-radio-button",72),h.Pc(10,"Play"),h.Ub(),h.Ub(),h.Ub(),h.Ub())}function ke(e,t){1&e&&(h.Vb(0,"app-form-field",73),h.Qb(1,"input",74),h.Ub()),2&e&&(h.mc("isCompact",!0),h.Db(1),h.Eb("aria-label","Degrees"))}function Pe(e,t){if(1&e&&(h.Tb(0,12),h.Nc(1,Se,3,3,"app-panel",13),h.hc(2,"async"),h.Nc(3,Ce,13,3,"app-panel",14),h.Vb(4,"app-panel",15),h.Vb(5,"fieldset",16),h.Vb(6,"legend",17),h.Pc(7,"Display Options"),h.Ub(),h.Vb(8,"mat-checkbox",18),h.Pc(9,"Information Panel"),h.Ub(),h.Vb(10,"mat-checkbox",19),h.Pc(11,"Anatomy Descriptions"),h.Ub(),h.Vb(12,"mat-checkbox",20),h.Pc(13,"Search"),h.Ub(),h.Vb(14,"mat-checkbox",21),h.Pc(15,"3D Navigation"),h.Ub(),h.Vb(16,"mat-checkbox",22),h.Pc(17,"Explore Toolbar"),h.Ub(),h.Vb(18,"mat-checkbox",23),h.Pc(19,"Undo"),h.Ub(),h.Vb(20,"mat-checkbox",24),h.Pc(21,"Fullscreen"),h.Ub(),h.Vb(22,"mat-checkbox",25),h.Pc(23,"Help"),h.Ub(),h.Vb(24,"mat-checkbox",26),h.Pc(25,"Draw"),h.Ub(),h.Vb(26,"mat-checkbox",27),h.Pc(27,"Anatomy Labels"),h.Ub(),h.Vb(28,"mat-checkbox",28),h.Pc(29,"Label List"),h.Ub(),h.Nc(30,we,2,0,"mat-checkbox",29),h.Ub(),h.Ub(),h.Vb(31,"app-panel",30),h.Vb(32,"fieldset"),h.Vb(33,"legend",31),h.Pc(34,"Pre-Load"),h.Ub(),h.Vb(35,"div"),h.Vb(36,"mat-checkbox",32,33),h.Pc(38,"Auto-load"),h.Ub(),h.Ub(),h.Nc(39,je,11,0,"div",34),h.Vb(40,"div",35),h.Vb(41,"mat-checkbox",36),h.Pc(42,"Loading Progress Indicator"),h.Ub(),h.Vb(43,"div",37),h.Vb(44,"mat-radio-group",38),h.Vb(45,"mat-radio-button",39),h.Pc(46,"Bar"),h.Ub(),h.Vb(47,"mat-radio-button",40),h.Pc(48,"Circle"),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(49,"fieldset"),h.Vb(50,"legend",41),h.Pc(51,"Post-Load"),h.Ub(),h.Vb(52,"div",42),h.Vb(53,"mat-checkbox",36,43),h.Pc(55,"Rotate 3D Model"),h.Ub(),h.Nc(56,ke,2,2,"app-form-field",44),h.Ub(),h.Vb(57,"div",45),h.Vb(58,"mat-checkbox",46),h.Pc(59,"Getting Started Tutorial"),h.Ub(),h.Ub(),h.Vb(60,"div",47),h.Vb(61,"mat-checkbox",36),h.Pc(62,"Disable scroll wheel zooming"),h.Ub(),h.Vb(63,"div",37),h.Vb(64,"mat-radio-group",38),h.Vb(65,"mat-radio-button",48),h.Pc(66,"Show alert"),h.Ub(),h.Vb(67,"mat-radio-button",49),h.Pc(68,"Do not show alert"),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Sb()),2&e){const e=h.yc(37),t=h.yc(54),n=h.gc();h.mc("formGroup",n.formEmbed),h.Db(1),h.mc("ngIf",h.ic(2,6,n.dimensions$)),h.Db(2),h.mc("ngIf",n.quizQuestions.length>0),h.Db(27),h.mc("ngIf",n.hasVisibilityLayers()),h.Db(9),h.mc("ngIf",e.checked),h.Db(17),h.mc("ngIf",t.checked)}}function _e(e,t){if(1&e){const e=h.Wb();h.Vb(0,"button",104),h.cc("click",(function(){h.Cc(e);const n=t.$implicit;return h.gc(2).handleSnapshotSizeClick(n)})),h.Pc(1),h.Ub()}if(2&e){const e=t.$implicit,n=h.gc(2);h.Db(1),h.Rc(" ",n.formatScreenSizeText(e)," ")}}function Me(e,t){if(1&e){const e=h.Wb();h.Tb(0,12),h.Vb(1,"app-panel",75),h.Vb(2,"app-tabs",76,77),h.Vb(4,"app-tab",78),h.Vb(5,"button",79),h.Pc(6),h.Qb(7,"app-icon",80),h.Ub(),h.Vb(8,"mat-menu",null,81),h.Nc(10,_e,2,1,"button",82),h.Ub(),h.Vb(11,"fieldset",83),h.Vb(12,"legend",17),h.Pc(13,"Image Dimensions Pixels"),h.Ub(),h.Vb(14,"app-form-field",52),h.Qb(15,"input",84),h.Vb(16,"div",54),h.Pc(17),h.Ub(),h.Ub(),h.Vb(18,"app-form-field",55),h.Qb(19,"input",85),h.Vb(20,"div",54),h.Pc(21),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(22,"app-tab",86),h.Vb(23,"fieldset",87),h.Vb(24,"legend",17),h.Pc(25,"Image Dimensions Inches"),h.Ub(),h.Vb(26,"app-form-field",52),h.Qb(27,"input",88),h.Vb(28,"div",54),h.Pc(29),h.Ub(),h.Ub(),h.Vb(30,"app-form-field",89),h.Qb(31,"input",90),h.Vb(32,"div",54),h.Pc(33),h.Ub(),h.Ub(),h.Ub(),h.Vb(34,"div",91),h.Pc(35,"Images are published at 300 dpi"),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(36,"app-panel",92),h.Vb(37,"div",3),h.Vb(38,"mat-radio-group",93),h.Vb(39,"mat-radio-button",94),h.Pc(40,"JPEG"),h.Ub(),h.Vb(41,"mat-radio-button",95),h.Pc(42,"PNG"),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(43,"app-panel",96),h.Vb(44,"div",3),h.Qb(45,"app-slider",97),h.Vb(46,"button",98),h.cc("click",(function(){return h.Cc(e),h.gc().handleResetScale()})),h.Pc(47," Reset "),h.Ub(),h.Ub(),h.Ub(),h.Vb(48,"app-panel",99),h.Vb(49,"div",3),h.Vb(50,"app-color-picker",100),h.cc("colorSelected",(function(t){return h.Cc(e),h.gc().handleSnapshotBackgroundSelected(t)})),h.Ub(),h.Vb(51,"button",101),h.cc("click",(function(){return h.Cc(e),h.gc().handleSnapshotBackgroundSelected(null)})),h.Pc(52," Reset "),h.Ub(),h.Ub(),h.Ub(),h.Vb(53,"div",102),h.Vb(54,"a",103),h.Pc(55,"Read about our Terms of Use"),h.Ub(),h.Ub(),h.Sb()}if(2&e){const e=h.yc(9),t=h.gc();h.mc("formGroup",t.formSnapshot),h.Db(5),h.mc("uppercase",!1)("matMenuTriggerFor",e),h.Db(1),h.Rc(" ",t.formatScreenSizeText(t.selectedSnapshotSize)," "),h.Db(4),h.mc("ngForOf",t.snapshotSizes),h.Db(4),h.mc("isCompact",!0),h.Db(1),h.mc("min",t.minSnapshotPixels.width)("max",t.maxSnapshotPixels.width),h.Eb("aria-label","Width"),h.Db(2),h.Sc(" ",t.minSnapshotPixels.width,"px to ",t.maxSnapshotPixels.width,"px "),h.Db(1),h.mc("isCompact",!0),h.Db(1),h.mc("min",t.minSnapshotPixels.height)("max",t.maxSnapshotPixels.height),h.Eb("aria-label","Height"),h.Db(2),h.Sc(" ",t.minSnapshotPixels.height,"px to ",t.maxSnapshotPixels.height,"px "),h.Db(5),h.mc("isCompact",!0),h.Db(1),h.mc("min",t.minSnapshotInches.width)("max",t.maxSnapshotInches.width),h.Eb("aria-label","Width"),h.Db(2),h.Sc(" ",t.minSnapshotInches.width,'" to ',t.maxSnapshotInches.width,'" '),h.Db(1),h.mc("isCompact",!0),h.Db(1),h.mc("min",t.minSnapshotInches.height)("max",t.maxSnapshotInches.height),h.Eb("aria-label","Height"),h.Db(2),h.Sc(" ",t.minSnapshotInches.height,'" to ',t.maxSnapshotInches.height,'" '),h.Db(5),h.Eb("aria-label","Image Type"),h.Db(1),h.mc("value",t.imageTypeEnum.JPEG),h.Db(2),h.mc("value",t.imageTypeEnum.PNG),h.Db(4),h.mc("label","Label scale"),h.Db(1),h.Eb("aria-label","Reset scale"),h.Db(4),h.mc("color",t.snapshotBackgroundColor),h.Db(1),h.Eb("aria-label","Reset background color")}}function Ie(e,t){1&e&&(h.Vb(0,"p",111),h.Pc(1," Make this model available to anyone by publishing it to the web. "),h.Ub())}function Te(e,t){1&e&&(h.Vb(0,"p",111),h.Pc(1," Your content has been saved to "),h.Vb(2,"strong",112),h.Pc(3,"My Library > Private."),h.Ub(),h.Qb(4,"br"),h.Pc(5," Share a direct link or copy the embed code to use on your website. "),h.Ub())}function Ue(e,t){if(1&e){const e=h.Wb();h.Vb(0,"div"),h.Nc(1,Ie,2,0,"p",107),h.Nc(2,Te,6,0,"p",107),h.Vb(3,"div",108),h.Vb(4,"button",109),h.cc("click",(function(){return h.Cc(e),h.gc(2).handleGenerateIFrame()})),h.Pc(5," Copy embed "),h.Ub(),h.Vb(6,"button",110),h.cc("click",(function(){return h.Cc(e),h.gc(2).handleGenerateURL()})),h.Pc(7," Copy URL "),h.Ub(),h.Ub(),h.Ub()}if(2&e){const e=h.gc(2);h.Db(1),h.mc("ngIf",e.model.id===e.modelToPublish.id),h.Db(1),h.mc("ngIf",e.model.id!==e.modelToPublish.id),h.Db(2),h.mc("disabled",!e.formEmbed.valid),h.Db(2),h.mc("disabled",!e.formEmbed.valid)}}function Le(e,t){1&e&&(h.Vb(0,"p",116),h.Pc(1," Save this model to "),h.Vb(2,"strong",112),h.Pc(3,"My Library"),h.Ub(),h.Pc(4," to make it available for anyone, by publishing it to the web. "),h.Ub())}function ze(e,t){1&e&&(h.Vb(0,"p",116),h.Pc(1," You can manage this saved model at anytime in "),h.Qb(2,"br"),h.Vb(3,"strong",112),h.Pc(4,"My Library > Private > All Models."),h.Ub(),h.Ub())}function Ae(e,t){1&e&&h.Qb(0,"app-spinner",117)}function Fe(e,t){if(1&e){const e=h.Wb();h.Nc(0,Le,5,0,"p",113),h.hc(1,"async"),h.Nc(2,ze,5,0,"p",113),h.hc(3,"async"),h.Vb(4,"div",108),h.Vb(5,"button",114),h.cc("click",(function(){return h.Cc(e),h.gc(2).handleSaveClick()})),h.hc(6,"async"),h.Pc(7),h.hc(8,"async"),h.Nc(9,Ae,1,0,"app-spinner",115),h.hc(10,"async"),h.Ub(),h.Ub()}if(2&e){const e=h.gc(2);h.mc("ngIf",!1===h.ic(1,5,e.copying$)),h.Db(2),h.mc("ngIf",!0===h.ic(3,7,e.copying$)),h.Db(3),h.mc("disabled",h.ic(6,9,e.copying$)),h.Db(2),h.Rc(" ",!0===h.ic(8,11,e.copying$)?"Saving to My Library":"Save & Publish"," "),h.Db(2),h.mc("ngIf",h.ic(10,13,e.copying$))}}function De(e,t){if(1&e&&(h.Tb(0),h.Nc(1,Ue,8,4,"div",105),h.Nc(2,Fe,11,15,"ng-template",null,106,h.Oc),h.Sb()),2&e){const e=h.yc(3),t=h.gc();h.Db(1),h.mc("ngIf",!t.requiresSave)("ngIfElse",e)}}function Ee(e,t){if(1&e){const e=h.Wb();h.Tb(0),h.Vb(1,"p",111),h.Pc(2," Download this image or make it available to anyone by publishing it to the web. "),h.Ub(),h.Vb(3,"div",108),h.Vb(4,"button",118),h.cc("click",(function(){return h.Cc(e),h.gc().handleDownloadSnapClick()})),h.Pc(5," Download "),h.Ub(),h.Vb(6,"button",119),h.cc("click",(function(){return h.Cc(e),h.gc().handleCopyImageURL()})),h.Pc(7," Copy URL "),h.Ub(),h.Vb(8,"button",120),h.cc("click",(function(){return h.Cc(e),h.gc().handleGenerateImage()})),h.Pc(9," Copy Embed "),h.Ub(),h.Ub(),h.Sb()}if(2&e){const e=h.gc();h.Db(4),h.mc("disabled",!e.formSnapshot.valid),h.Db(2),h.mc("disabled",!e.formSnapshot.valid),h.Db(2),h.mc("disabled",!e.formSnapshot.valid)}}const Ne={title:"Small",type:"desktop",dimensions:{width:480,height:320},orientation:"horizontal"},Re={title:"Medium",type:"desktop",dimensions:{width:700,height:550},orientation:"horizontal"},Ve={title:"Large",type:"desktop",dimensions:{width:1920,height:1200},orientation:"horizontal"},Be={title:"Extra Large",type:"desktop",dimensions:{width:2560,height:1440},orientation:"horizontal"},He={title:"Maximum",type:"desktop",dimensions:{width:5120,height:2880},orientation:"horizontal"};let Qe=(()=>{class e{constructor(e,t,n,i,a,s,o,c,l,p){this.store=e,this.actions=t,this.publishService=n,this.storageService=i,this.clipboardService=a,this.dialogService=s,this.storyService=o,this.snackBar=c,this.formBuilder=l,this.changeDetectorRef=p,this.minSnapshotPixels={width:300,height:300},this.maxSnapshotPixels={width:5120,height:2880},this.minSnapshotInches={width:this.pixelsToInches(this.minSnapshotPixels.width),height:this.pixelsToInches(this.minSnapshotPixels.height)},this.maxSnapshotInches={width:this.pixelsToInches(this.maxSnapshotPixels.width),height:this.pixelsToInches(this.maxSnapshotPixels.height)},this.imageTypeEnum=G.a,this.snapshotSizes=[Ne,Re,Ve,Be,He],this.selectedSnapshotSize=Re,this.quizQuestions=[],this.submit=new v.a,this.requiresSave=!1,this.ngUnsubscribe=new v.a,this.defaultWidgetOptions=Object.assign(Object.assign({},new r.a),{loadRotate:10}),this.initFormGroupMode(),this.initSnapshotForm(),this.initEmbedForm()}get rotateEnabled(){return this.formEmbed.get("rotate").value.enabled}get mode(){return this.formModeGroup.get("mode").value}get widgetBackgroundColor(){return"2d"===this.mode?this.snapshotBackgroundColor:this.embedBackgroundColor}get widgetScalable(){return"2d"===this.mode}get imageType(){return this.formSnapshot.get("imageType").value}get publishWidgetOptions(){if(this.formEmbed&&this.formSnapshot)switch(this.mode){case"3d":return this.widgetEmbedSettings;case"2d":return this.widgetSnapshotSettings}return null}get widgetEmbedSettings(){const e=this.formEmbed.get("dimensions"),t=this.formEmbed.value.options||{};return{width:e.get("width").value,height:e.get("height").value,labelScale:1,scalable:!1,backgroundColor:this.embedBackgroundColor,options:t}}get widgetSnapshotSettings(){const e=this.formSnapshot.get("dimensions"),t=this.formSnapshot.get("labelScale"),n=new r.a;return n.uiTools=!1,n.uiInfo=!1,n.uiNav=!1,n.uiMenu=!1,n.uiAudio=!1,n.uiUndo=!1,n.uiSearch=!1,n.uiWhiteboard=!1,n.uiFullscreen=!1,{width:e.get("width").value,height:e.get("height").value,labelScale:t.value,scalable:!0,backgroundColor:this.snapshotBackgroundColor,options:n}}ngOnInit(){this.model.type===Y.a.Module&&Object(N.isNil)(this.model.module_accessor_level)&&(this.requiresSave=!0),this.initColors(),this.initQuizForm(),this.initQuizFormListeners(),this.initActionListeners(),this.setupEmbedForm(),this.setupSnapshotForm(),this.initCopy(),this.store.dispatch(new y.p(!0))}ngOnDestroy(){this.store.dispatch(new y.p(!1)),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initCopy(){this.actions.pipe(Object(i.l)(p.l),Object(C.a)(this.ngUnsubscribe)).subscribe(e=>this.handleCopySuccess(e)),this.actions.pipe(Object(i.l)(p.k),Object(C.a)(this.ngUnsubscribe)).subscribe(e=>this.handleCopyFailure(e)),this.submit.pipe(Object(w.a)(100),Object(C.a)(this.ngUnsubscribe)).subscribe(()=>this.onDebouncedSubmit()),this.modelToPublish=this.model}initFormGroupMode(){this.formModeGroup=this.formBuilder.group({mode:["3d",x.C.required]})}initSnapshotForm(){const e=this.readSnapshotOptions();this.formSnapshot=this.formBuilder.group({dimensions:this.formBuilder.group({width:[e.dimensions.width,[x.C.required,x.C.min(this.minSnapshotPixels.width),x.C.max(this.maxSnapshotPixels.width)]],height:[e.dimensions.height,[x.C.required,x.C.min(this.minSnapshotPixels.height),x.C.max(this.maxSnapshotPixels.height)]]}),inches:this.formBuilder.group({width:[this.pixelsToInches(e.dimensions.width),[x.C.required,x.C.min(this.minSnapshotInches.width),x.C.max(this.maxSnapshotInches.width)]],height:[this.pixelsToInches(e.dimensions.height),[x.C.required,x.C.min(this.minSnapshotInches.height),x.C.max(this.maxSnapshotInches.height)]]}),imageType:[e.imageType,[x.C.required]],labelScale:[e.labelScale||1,[x.C.required]]}),this.updateSnapshotPreset()}initEmbedForm(){const e=this.getWidgetOptions(),t=this.store.selectSnapshot(c.a.getDimensions),n=this.store.selectSnapshot(c.a.getMinDimensions),{button:i,handHint:a,play:s}=e.initial,{alert:o,overlay:r}=e.disableScroll;this.formEmbed=this.formBuilder.group({dimensions:this.formBuilder.group({width:[t.width,[x.C.min(n.width)]],height:[t.height,[x.C.min(n.height)]]}),options:this.formBuilder.group(e),loader:this.formBuilder.group({enabled:e.uiLoader!==W.a.None,mode:e.uiLoader}),rotate:this.formBuilder.group({enabled:null!==e.loadRotate,value:e.loadRotate}),autoLoad:this.formBuilder.control(e.autoLoad),initial:this.formBuilder.group({enabled:e.autoLoad&&(i||a||s),mode:i?"button":a?s:""}),disableScroll:this.formBuilder.group({enabled:o||r,mode:o?"alert":r?"overlay":""})})}initColors(){const e=this.getWidgetOptions(),t=Object(N.get)(e,"background.colors");t&&(this.embedBackgroundColor=this.getBackgroundFromColor({red:t[0],green:t[1],blue:t[2],alpha:t.length>3?t[3]:1}))}initQuizForm(){if(this.formQuiz=this.formBuilder.group({locked:[!1],options:this.formBuilder.group({mode:["all"],number:[1]})}),(this.model.tags||[]).includes(K.a.Quiz)){const{id:e,type:t}=this.model;this.storyService.getStory(e,t).pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.quizQuestions=Object(J.b)(e.chapters),this.changeDetectorRef.markForCheck()})}}initQuizFormListeners(){const e=this.formEmbed.get("options"),t=this.formQuiz.get("locked"),n=this.formQuiz.get("options"),i=n.get("mode"),a=n.get("number");this.formQuiz.valueChanges.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(t=>{let n,i;const{locked:a,options:s}=t;if(a){const{mode:e,number:t}=s;n=E.a.Locked,i="single"===e?t:void 0}e.patchValue({uiQuiz:{mode:n,number:i}})}),t.valueChanges.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{e?n.enable():n.disable()}),a.valueChanges.pipe(Object(j.a)(),Object(C.a)(this.ngUnsubscribe)).subscribe(()=>{!0===t.value&&"single"!==i.value&&i.setValue("single")}),t.setValue(!1)}initActionListeners(){this.actions.pipe(Object(i.l)(y.i),Object(u.a)(e=>this.copyToClipboard(e.url,"url")),Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackBar.open(e?"Successfully copied link to clipboard.":"Unable to copy link to clipboard.")}),this.actions.pipe(Object(i.l)(y.c),Object(u.a)(e=>this.copyToClipboard(e.embed,"embed")),Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackBar.open(e?"Successfully copied embed code to clipboard.":"Unable to copy embed code to clipboard.")}),this.actions.pipe(Object(i.l)(y.b),Object(C.a)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("Unable to generate embed code.")}),this.actions.pipe(Object(i.l)(y.m),Object(u.a)(e=>this.copyToClipboard(e.imageURL,"url")),Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackBar.open(e?"Successfully copied image URL to clipboard.":"Unable to copy image URL to clipboard.")}),this.actions.pipe(Object(i.l)(y.l),Object(C.a)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("Unable to generate image URL.")}),this.actions.pipe(Object(i.l)(y.f),Object(u.a)(e=>this.copyToClipboard(e.embed,"embed")),Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackBar.open(e?"Successfully copied image embed code to clipboard.":"Unable to copy image embed code to clipboard.")}),this.actions.pipe(Object(i.l)(y.e),Object(C.a)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("Unable to generate embed code.")})}setupEmbedForm(){const e=this.formEmbed.get("options"),t=this.formEmbed.get("dimensions"),n=this.formEmbed.get("loader"),i=this.formEmbed.get("rotate"),a=this.formEmbed.get("initial"),s=this.formEmbed.get("disableScroll"),o=this.formEmbed.get("autoLoad"),r=n.get("enabled"),c=n.get("mode");r.valueChanges.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{c.patchValue(e?W.c:W.a.None)}),c.valueChanges.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(t=>{e.patchValue({uiLoader:t}),t!==W.a.None&&r.patchValue(!0,{emitEvent:!1})});const l=i.get("enabled"),p=i.get("value");l.valueChanges.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(t=>{t?p.patchValue("number"==typeof p.value?p.value:this.defaultWidgetOptions.loadRotate):e.patchValue({loadRotate:null})}),p.valueChanges.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(t=>{e.patchValue({loadRotate:t})}),o.valueChanges.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(t=>{e.patchValue({autoLoad:t}),t||a.patchValue({enabled:!1})}),a.get("enabled").valueChanges.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{a.patchValue({mode:e?"button":""})}),a.get("mode").valueChanges.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(t=>{a.patchValue({enabled:!!t},{emitEvent:!1}),e.patchValue({initial:{button:"button"===t,handHint:"handHint"===t,play:"play"===t}})}),s.get("enabled").valueChanges.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{s.patchValue({mode:e?"alert":""})}),s.get("mode").valueChanges.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(t=>{s.patchValue({enabled:!!t},{emitEvent:!1}),e.patchValue({disableScroll:{alert:"alert"===t,overlay:"overlay"===t}})}),t.valueChanges.pipe(Object(w.a)(300),Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.setScreenDimensions(e)}),this.dimensions$.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{t.setValue(e,{emitEvent:!1})}),e.valueChanges.pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.writeEmbedOptions(e)})}setupSnapshotForm(){const e=this.formSnapshot.get("dimensions"),t=this.formSnapshot.get("inches"),n=this.formSnapshot.get("labelScale");this.formSnapshot.valueChanges.pipe(Object(C.a)(this.ngUnsubscribe),Object(w.a)(50)).subscribe(e=>{this.labelScale=n.value;const t=Object(X.plainToClass)($,e);this.writeSnapshotOptions(t),this.updateSnapshotPreset(),this.changeDetectorRef.markForCheck()}),t.valueChanges.pipe(Object(w.a)(500),Object(C.a)(this.ngUnsubscribe)).subscribe(()=>{const{width:n,height:i}=t.value;t.valid&&e.patchValue({width:this.inchesToPixels(n),height:this.inchesToPixels(i)})})}setScreenDimensions(e){this.store.dispatch(new y.n(e))}handleGenerateIFrame(){this.generateIFrameCode()}handleGenerateURL(){this.generateURL()}handleCopyImageURL(){this.generateImageURL()}handleGenerateImage(){this.generateImageCode()}handleResetScale(){this.formSnapshot.get("labelScale").setValue(1)}generateIFrameCode(){this.store.dispatch(new y.a(this.modelToPublish,this.formEmbed.value.options))}generateURL(){this.store.dispatch(new y.g(this.modelToPublish,this.formEmbed.value.options))}generateImageURL(){const e=this.imageType===G.a.PNG?"png":"jpeg";this.publishWidget.takeSnapshot(e).pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(t=>{this.store.dispatch(new y.k(t,e))})}generateImageCode(){const e=this.imageType===G.a.PNG?"png":"jpeg";this.publishWidget.takeSnapshot(e).pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(t=>{const n=new r.a;this.store.dispatch(new y.d(this.model,t,e,n))})}handleSnapshotBackgroundSelected(e){this.snapshotBackgroundColor=this.getBackgroundFromColor(e),this.changeDetectorRef.markForCheck()}handleSnapshotSizeClick(e){this.selectedSnapshotSize=Object.assign({},e),this.formSnapshot.patchValue({dimensions:{width:e.dimensions.width,height:e.dimensions.height},inches:{width:this.pixelsToInches(e.dimensions.width),height:this.pixelsToInches(e.dimensions.height)}},{emitEvent:!1})}handleDownloadSnapClick(){const e="Inches"===this.imageTabs.tabItems[this.imageTabs.activeTab].label?300:null;this.publishWidget.takeSnapshot(this.imageType===G.a.PNG?"png":"jpeg").pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(t=>{this.downloadImage(t,e)})}handleCopySuccess(e){this.snackBar.open(`"${e.newBookmark.title}" saved to your library.`),this.requiresSave=!1,this.modelToPublish=e.newBookmark}handleCopyFailure(e){this.snackBar.open("There was an error adding to your library")}handleSaveClick(){this.submit.next()}copyToClipboard(e,t){return this.clipboardService.copyToClipboard(e,t).pipe(Object(u.a)(t=>t?Object(O.a)(t):this.dialogService.openClipboardDialog(e).afterClosed()))}formatScreenSizeText(e){const{title:t,dimensions:n}=e;return`${t} (${n.width} x ${n.height})`}hasVisibilityLayers(){return this.publishWidget.allVisibilityLayers.some(e=>Array.isArray(e)&&e.length>0)}onDebouncedSubmit(){const e=this.model,t={isOwner:!0,id:e?e.id:null,title:e.title},n=this.store.selectSnapshot(l.a.getUserLanguage);this.store.dispatch(new p.j(t.id,t.title,e.type,n))}updateSnapshotPreset(){const e=this.formSnapshot.get("dimensions"),{width:t,height:n}=e.value;if(e.valid){const e=this.snapshotSizes.find(e=>e.dimensions.width===t&&e.dimensions.height===n);this.selectedSnapshotSize=Object.assign(Object.assign({},this.selectedSnapshotSize),{title:e?e.title:"Custom",dimensions:{width:t,height:n}}),this.changeDetectorRef.markForCheck()}}getBackgroundFromColor(e){const t=e?[e.red,e.green,e.blue,e.alpha]:null;return t?new L.a([...t,...t],"radial",[0,100]):null}getWidgetOptions(){const e=this.readEmbedOptions(),t=this.store.selectSnapshot(o.a.getWidgetOptions);if(e){const n=this.publishService.extendWidgetOptions(new r.a,e);return Object.assign(Object.assign({},n),{background:t?t.background:null})}return t||new r.a}readEmbedOptions(){!function(e,t){const n=localStorage.getItem(k.b.WidgetOptions);if(null===n)return;const i=JSON.parse(n);if(void 0!==i[e]&&(i[e].timestamp||0)<1573675067505){delete i[e];try{localStorage.setItem(k.b.WidgetOptions,JSON.stringify(i))}catch(a){}}}(this.getStorageKey());const e=this.storageService.getLocalJSON(k.b.WidgetOptions);return e?e[this.getStorageKey()]:null}writeEmbedOptions(e){const t=Object.assign({},e);delete t.uiQuiz;const n=Object.assign(Object.assign({},t),{timestamp:Date.now()}),i=this.storageService.getLocalJSON(k.b.WidgetOptions)||{};i[this.getStorageKey()]=n,this.storageService.setLocalItem(k.b.WidgetOptions,i)}writeSnapshotOptions(e){const t=this.storageService.getLocalJSON(k.b.SnapshotOptions)||{};t[this.getStorageKey()]=e,this.storageService.setLocalItem(k.b.SnapshotOptions,t)}readSnapshotOptions(){let e=this.storageService.getLocalJSON(k.b.SnapshotOptions);e=e?e[this.getStorageKey()]:{};const t=new $;return Object.assign(Object.assign({},t),e)}getStorageKey(){return this.store.selectSnapshot(l.a.getUserProfile).eid}downloadImage(e,t){const n=(this.model.title||"snapshot").replace(/ /g,"_").replace(/\W/g,"");Z.a.exportImage(e,this.imageType,`${n}.${this.imageType===G.a.PNG?"png":"jpg"}`,t).pipe(Object(C.a)(this.ngUnsubscribe)).subscribe(e=>{this.snackBar.open(e?"Successfuly downloaded image":"Unable to download image.")})}pixelsToInches(e){return parseFloat((e/300).toFixed(2))}inchesToPixels(e){return 300*e}}return e.\u0275fac=function(t){return new(t||e)(h.Pb(i.h),h.Pb(i.b),h.Pb(a.b),h.Pb(k.d),h.Pb(te.a),h.Pb(s.a),h.Pb(ne.a),h.Pb(ie.b),h.Pb(x.f),h.Pb(h.i))},e.\u0275cmp=h.Jb({type:e,selectors:[["app-publish"]],viewQuery:function(e,t){if(1&e&&(h.Vc(ve,!0,q.a),h.Jc(Q,!0)),2&e){let e;h.xc(e=h.dc())&&(t.imageTabs=e.first),h.xc(e=h.dc())&&(t.publishWidget=e.first)}},inputs:{model:"model"},decls:16,vars:9,consts:[[1,"publish","theme-light",3,"ngSwitch"],["data-test","publishOptions",1,"publish__options","text-12"],["label","Select a format to publish:",3,"formGroup"],[1,"publish__flex-group"],["formControlName","mode"],["value","3d",1,"mr-2"],["value","2d"],[3,"formGroup",4,"ngSwitchCase"],["data-test","publishActions",1,"publish__actions"],[4,"ngSwitchCase"],[1,"publish__embed",3,"model","options"],["publishWidget",""],[3,"formGroup"],["formGroupName","dimensions","label","Size",4,"ngIf"],["label","Quiz",3,"isCompact","formGroup",4,"ngIf"],["formGroupName","options","label","Display Options"],[1,"publish__group"],[1,"visually-hidden"],["formControlName","uiInfo"],["formControlName","uiAnatomyDescriptions"],["formControlName","uiSearch"],["formControlName","uiNav"],["formControlName","uiTools"],["formControlName","uiUndo"],["formControlName","uiFullscreen"],["formControlName","uiHelp"],["formControlName","uiWhiteboard"],["formControlName","uiAnatomyLabels"],["formControlName","uiLabelList"],["formControlName","uiVisibilityLayers",4,"ngIf"],["label","Loading Experience"],[1,"text-10","text-uppercase","text-dim","mb-2"],["formControlName","autoLoad"],["autoLoad",""],["formGroupName","initial","class","mb-2 ml-5",4,"ngIf"],["formGroupName","loader",1,"mb-2"],["formControlName","enabled"],[1,"m-1","ml-5"],["formControlName","mode",1,"publish__group"],["value","bar",1,"mv-1"],["value","circle",1,"mv-1"],[1,"text-10","text-uppercase","text-dim","mt-4","mb-2"],["formGroupName","rotate",1,"mb-1"],["rotate",""],["label","Degrees","theme","light",3,"isCompact",4,"ngIf"],["formGroupName","options"],["formControlName","uiTutorial"],["formGroupName","disableScroll"],["value","alert",1,"mv-1"],["value","overlay",1,"mv-1"],["formGroupName","dimensions","label","Size"],["class","publish__flex-group",4,"ngIf"],["label","Width","theme","light","display","block",1,"mr-6",3,"isCompact"],["type","number","formControlName","width",1,"publish__input","input","input--small",3,"min"],["form-field-help","",1,"mt-1"],["label","Height","theme","light","display","block",3,"isCompact"],["type","number","formControlName","height",1,"publish__input","input","input--small",3,"min"],["label","Quiz",3,"isCompact","formGroup"],[1,"mb-2"],["formControlName","locked","data-test","quizLocked"],["formGroupName","options","data-test","quizOptions",1,"m-1","ml-5"],["formControlName","mode",1,"flex","flex-column"],["value","all","data-test","quizOptionsAll"],[1,"flex","items-center"],["value","single","data-test","quizOptionsSingle"],["formControlName","number","data-test","quizOptionsNumber",1,"input","ml-3"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","uiVisibilityLayers"],["formGroupName","initial",1,"mb-2","ml-5"],["value","button",1,"mv-1"],["value","handHint",1,"mv-1"],["value","play",1,"mv-1"],["label","Degrees","theme","light",3,"isCompact"],["type","number","formControlName","value",1,"publish__input","input"],["label","Size"],["tabSize","medium","tabTheme","light"],["imageTabs",""],["label","Pixels"],["app-button","","buttonType","outline","buttonTheme","light",1,"mt-2",3,"uppercase","matMenuTriggerFor"],["icon","caret-down",1,"ml-1"],["imageSizes","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["formGroupName","dimensions",1,"publish__flex-group","mt-2"],["type","number","formControlName","width",1,"publish__input","input","input--small",3,"min","max"],["type","number","formControlName","height",1,"publish__input","input","input--small",3,"min","max"],["label","Inches"],["formGroupName","inches",1,"publish__flex-group","mt-2"],["type","number","formControlName","width","step",".01",1,"publish__input","input","input--small",3,"min","max"],["label","Height","theme","light","display","block",1,"mr-6",3,"isCompact"],["type","number","formControlName","height","step",".01",1,"publish__input","input","input--small",3,"min","max"],[1,"pt-2","text-small","text-dim"],["label","Image Type"],["formControlName","imageType"],["matTooltip","Smallest file size, best for most uses.",1,"mr-2",3,"value"],["matTooltip","Highest quality, best for print and offline use.",3,"value"],["label","Label Scale"],["theme","light","formControlName","labelScale","min","1","max","5","step","0.1",1,"flex-grow",3,"label"],["app-button","","buttonType","outline","buttonTheme","light",1,"ml-1",3,"click"],["label","Background Color"],["size","normal","alphaEnabled","false",1,"publish__picker",3,"color","colorSelected"],["app-button","","buttonType","outline","buttonTheme","light",3,"click"],[1,"mt-4"],["href","https://www.biodigital.com/terms","target","_blank",1,"text-link","text-underline"],["mat-menu-item","",3,"click"],[4,"ngIf","ngIfElse"],["saveTemplate",""],["class","text-12 p-2 mt-2 mb-2",4,"ngIf"],[1,"publish__actions-content"],["app-button","","buttonType","flat","buttonTheme","light","data-test","copyEmbed3D",1,"mb-2","w-100",3,"disabled","click"],["app-button","","buttonType","flat","buttonTheme","light","data-test","copyURL3D",1,"w-100",3,"disabled","click"],[1,"text-12","p-2","mt-2","mb-2"],[1,"text-semibold"],["class","text-12 p-2 mt-2 mb-2 text-light",4,"ngIf"],["app-button","","buttonType","primary","buttonTheme","light","data-test","saveToMyLibrary",1,"mb-2","w-100",3,"disabled","click"],["size","medium","class","ml-2","render","inline",4,"ngIf"],[1,"text-12","p-2","mt-2","mb-2","text-light"],["size","medium","render","inline",1,"ml-2"],["app-button","","buttonType","flat","buttonTheme","light","data-test","download2D",1,"mb-2","w-100",3,"disabled","click"],["app-button","","buttonType","flat","buttonTheme","light","data-test","copyURL2D",1,"mb-2","w-100",3,"disabled","click"],["app-button","","buttonType","flat","buttonTheme","light","data-test","copyEmbed2D",1,"w-100",3,"disabled","click"]],template:function(e,t){1&e&&(h.Vb(0,"div",0),h.Vb(1,"div",1),h.Vb(2,"app-panel",2),h.Vb(3,"div",3),h.Vb(4,"mat-radio-group",4),h.Vb(5,"mat-radio-button",5),h.Pc(6,"3D Embeddable"),h.Ub(),h.Vb(7,"mat-radio-button",6),h.Pc(8,"Image"),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Nc(9,Pe,69,8,"ng-container",7),h.Nc(10,Me,56,36,"ng-container",7),h.Ub(),h.Vb(11,"div",8),h.Nc(12,De,4,2,"ng-container",9),h.Nc(13,Ee,10,3,"ng-container",9),h.Ub(),h.Qb(14,"app-publish-widget",10,11),h.Ub()),2&e&&(h.mc("ngSwitch",t.mode),h.Db(2),h.mc("formGroup",t.formModeGroup),h.Db(2),h.Eb("aria-label","Publish Format"),h.Db(5),h.mc("ngSwitchCase","3d"),h.Db(1),h.mc("ngSwitchCase","2d"),h.Db(2),h.mc("ngSwitchCase","3d"),h.Db(1),h.mc("ngSwitchCase","2d"),h.Db(1),h.mc("model",t.model)("options",t.publishWidgetOptions))},directives:[b.r,ae.a,x.s,x.j,se.b,x.r,x.i,se.a,b.s,Q,b.p,x.k,oe.a,re.a,x.w,x.c,x.B,b.o,x.v,x.D,q.a,ce.a,m.a,le.d,f.a,le.a,pe.c,ue.a,be,le.b,me.a],pipes:[b.b],styles:['.publish[_ngcontent-%COMP%]{display:grid;grid-template-columns:320px auto;grid-template-rows:1fr auto;height:100%;grid-template-areas:"options embed" "actions embed"}.publish__options[_ngcontent-%COMP%]{grid-area:options;overflow-y:scroll}.publish__screens[_ngcontent-%COMP%]{grid-area:screens;text-align:center}.publish__embed[_ngcontent-%COMP%]{grid-area:embed;background-color:#fff;border-left:1px solid #eaeff5;overflow:auto}.publish__actions[_ngcontent-%COMP%]{grid-area:actions}.publish__actions[_ngcontent-%COMP%]:before{content:" ";display:block;background-color:#fff;height:12px;box-shadow:inset 0 -12px 8px -10px rgba(150,168,192,.4)}.publish__actions-content[_ngcontent-%COMP%]{padding:0 20px 0 8px}.publish__group[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;-moz-column-gap:8px;column-gap:8px;align-items:center}.publish__flex-group[_ngcontent-%COMP%]{display:flex}.publish__input[_ngcontent-%COMP%]{width:100px;min-height:28px;padding:6px 8px}.publish__picker[_ngcontent-%COMP%]{width:60px}'],changeDetection:0}),fe([Object(i.e)(c.a.getDimensions),ye("design:type",S.a)],e.prototype,"dimensions$",void 0),fe([Object(i.e)(c.a.getMinDimensions),ye("design:type",S.a)],e.prototype,"minDimensions$",void 0),fe([Object(i.e)(ee.a.getCopying),ye("design:type",S.a)],e.prototype,"copying$",void 0),e})();function Ge(e,t){if(1&e&&h.Qb(0,"app-publish",6),2&e){const e=h.gc();h.mc("model",e.bookmark)}}let We=(()=>{class e{constructor(e,t){this.dialogRef=e,this.bookmark=t.bookmark}closeDialog(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(h.Pb(g.g),h.Pb(g.a))},e.\u0275cmp=h.Jb({type:e,selectors:[["app-publish-dialog"]],decls:7,vars:3,consts:[["data-test","publishDialog","role","dialog","aria-modal","true",1,"publish"],[1,"publish__heading","text-20","text-medium"],[1,"publish__contents"],[3,"model",4,"ngIf"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Close",1,"publish__close",3,"click"],["icon","times","size","lg"],[3,"model"]],template:function(e,t){1&e&&(h.Vb(0,"div",0),h.Vb(1,"h2",1),h.Pc(2,"Publish"),h.Ub(),h.Vb(3,"div",2),h.Nc(4,Ge,1,1,"app-publish",3),h.Ub(),h.Vb(5,"button",4),h.cc("click",(function(){return t.closeDialog()})),h.Qb(6,"app-icon",5),h.Ub(),h.Ub()),2&e&&(h.Eb("aria-label","Publish"),h.Db(4),h.mc("ngIf",t.bookmark),h.Db(1),h.Eb("aria-label","Close"))},directives:[b.p,m.a,f.a,Qe],styles:["a[_ngcontent-%COMP%]{color:#de3535}a[_ngcontent-%COMP%]:hover{color:#c11f1f}.publish[_ngcontent-%COMP%]{position:relative}.publish__contents[_ngcontent-%COMP%]{height:calc(90vh - 80px);border-top:1px solid #eaeff5;margin-top:12px}.publish__close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;color:#283853}.publish__close[_ngcontent-%COMP%]:hover{color:#1c2a3f}"],changeDetection:0}),e})();var qe=n("WkFQ"),$e=n("XqAe"),Xe=n("AytR"),Ze=n("f3gM"),Je=n("p345"),Ke=n("+/zV"),Ye=n("5sb6"),et=n("QkH1"),tt=n("J5ja"),nt=n("1mir"),it=n("cQmI"),at=n("kTA6"),st=n("8mU5"),ot=n("tyNb"),rt=n("0MNC");const ct=[qe.a.View,qe.a.Edit],lt=[qe.a.Edit,qe.a.Publish],pt=Object.entries(qe.c).filter(([e,t],n)=>!!t).map(([e,t])=>e);let ut=(()=>{class e{constructor(e,t,n,i,a,s,o,r,c,l,p,u){this.store=e,this.publishService=t,this.dialogService=n,this.dialog=i,this.snackbar=a,this.router=s,this.bookmarksService=o,this.breakpointObserver=r,this.clipboardService=c,this.userAccessService=l,this.pendoService=p,this.shareService=u}getBookmarkActions(e,t,n,i,a){if(Object(N.isNil)(t))return[];const s=t.tags||[],o=et.e(e,t),r=s.includes("public")&&!o?Y.a.Module:t.type,c=this.getBookmarkShareActions(t,r);let l=[];switch(r){case Y.a.Module:l=[qe.a.View,qe.a.AddToMyLibrary,qe.a.Edit,...c],et.l(t)&&l.push(qe.a.Divider,qe.a.Manage);break;case Y.a.Bookmark:l=[qe.a.View,qe.a.Edit,...c,qe.a.Divider,qe.a.Duplicate,qe.a.Manage,qe.a.Delete]}l=l.filter(s=>{if(Xe.a.application===Je.a.Loft&&!ct.includes(s))return!1;if(a&&a.excludeActions&&a.excludeActions.includes(s))return!1;if(a&&a.includeActions&&!a.includeActions.includes(s))return!1;switch(s){case qe.a.View:return et.j();case qe.a.Edit:return et.f(e);case qe.a.Delete:return et.c(e,t);case qe.a.Duplicate:return et.d(e,t);case qe.a.AddToMyLibrary:return et.a(e,t);case qe.a.Manage:return et.h(e,t);case qe.a.CopyURL:return et.b(e,t,n,i);case qe.a.Share:return t.type===Y.a.Module;case qe.a.Publish:return et.i(e);default:return!0}});const p=this.breakpointObserver.isMatched("(max-width: 959px)"),u=[qe.a.Edit,qe.a.Publish,qe.a.Manage];return(p||Xe.a.platform!==Ze.a.Web)&&(l=l.filter(e=>!u.includes(e)&&e!==qe.a.Divider)),Xe.a.native&&(l=l.filter(e=>!lt.includes(e))),this.removeDuplicateDividers(l)}getBookmarkPrimaryActionLabel(e,t){var n;let i="Select";if(t===nt.a.Select)i="Select";else if(t===nt.a.Import)i="Import";else{const t=null!==(n=e.viewMode)&&void 0!==n?n:it.a.All;let a=e.tour?"View Tour":"View",s=e.quiz?"Take Quiz":"";switch(t){case it.a.Content:s="";break;case it.a.Quiz:e.quiz&&(a="")}i=a||s}return i}handleBookmarkAction(e){const t=e.bookmark;switch(e.name){case qe.a.View:this.view(t);break;case qe.a.Edit:this.router.navigate(["/edit"],{queryParams:{id:t.id}});break;case qe.a.Manage:this.manage(t);break;case qe.a.Delete:this.delete(t);break;case qe.a.CopyURL:let e;this.generateBookmarkLink(t).pipe(Object(u.a)(t=>(e=t,this.clipboardService.copyToClipboard(t,"url")))).subscribe(t=>{t?this.snackbar.open("Successfully copied link to clipboard."):this.dialogService.openClipboardDialog(e),this.pendoService.track("Publish - Success",{type:"url",source:"bookmark-action"})});break;case qe.a.Duplicate:this.duplicate(t);break;case qe.a.AddToMyLibrary:this.addToMyLibrary(t);break;case qe.a.Share:this.shareBookmark(t);break;case qe.a.Publish:this.publish(t)}}generateBookmarkLink(e){const t=this.store.selectSnapshot(o.a.getWidgetOptions)||new r.a,n=this.store.selectSnapshot(c.a.getWidgetURL),i=this.store.selectSnapshot(l.a.getUserLanguage),s=this.store.selectSnapshot(l.a.getSelectedUserApp),p=this.store.selectSnapshot(o.a.getSelectedOrganizationProductAccountId);return this.publishService.generateWidgetURL(e,n,t,null,a.a.Single,i,s,p)}delete(e){this.dialogService.openConfirmDialog({data:{titleText:"Delete 3D model",bodyText:"Are you sure you want to delete this 3D model?",confirmText:"Delete",confirmColor:"warn"}}).afterClosed().pipe(Object(d.a)(1)).subscribe(t=>{t&&this.store.dispatch(new p.m(e.id))})}manage(e,t=Ke.b.Manage){const n={id:Ye.a.SaveBookmarkDialog,data:{bookmark:e,mode:t}};return this.dialog.closeAll(),this.dialog.open(Ke.a,n)}view(e,t={}){const{id:n,title:i}=e,a=this.store.selectSnapshot(l.a.getUserLocale).lang,s=this.publishService.isCustomWidget(e.embed_url_path);if(e.unavailable)this.snackbar.open(`Error opening "${i}", it is unavailable.`);else if(s){const t=this.publishService.getWidgetURL(e,e.embed_url,new r.a),n=window.open(t);this.snackbar.open(n?`"${i}" loaded in a new tab.`:`Error launching "${i}" in a new tab.`)}else this.router.navigate(["/view"],{queryParams:Object.assign({id:n,lang:a},t)})}viewQuiz(e){this.view(e,{quiz:!0})}shareBookmark(e){const t=this.store.selectSnapshot(l.a.getUserLanguage),n=this.shareService.generateShareLink(e,t);return!0===Xe.a.native||Xe.a.platform===Ze.a.SDK?(this.clipboardService.copyToClipboard(n.fullUrl,"url").toPromise(),Object(O.a)(void 0)):this.dialogService.openShareDialog(n,"Share","Anyone with the link can view this 3D model. They will need to create an account for full acccess.").afterClosed()}publish(e){this.isPremiumRestrictedAction(qe.a.Publish)?this.userAccessService.openPublishPaywall():this.dialog.open(We,{width:"90vw",height:"95vh",data:{bookmark:e}})}isPremiumRestrictedAction(e){const t=this.store.selectSnapshot(l.a.isPremiumUser),n=this.store.selectSnapshot(o.a.hasOrganization),i=t&&n;switch(e){case qe.a.Publish:return!i;default:return!1}}duplicate(e){this.checkBookmarkLimit().subscribe(t=>{t.limit_reached?this.userAccessService.openBookmarkSaveLimit():this.manage(e,Ke.b.Duplicate)})}addToMyLibrary(e){this.checkBookmarkLimit().subscribe(t=>{t.limit_reached?this.userAccessService.openBookmarkSaveLimit():this.manage(e,Ke.b.Copy)})}checkBookmarkLimit(){return this.store.selectSnapshot(l.a.isPremiumUser)?Object(O.a)({limit_reached:!1}):this.bookmarksService.atMaxFreeBookmarkCount()}getBookmarkShareActions(e,t){if(t===Y.a.Module){const t=!Object(N.isNil)(e.module_accessor_level),n=!0===e.collection_content;if(t)return[qe.a.Publish];if(!t&&!n)return[qe.a.Share,qe.a.Publish]}const n=this.store.selectSnapshot(l.a.getUserRole),i=this.store.selectSnapshot(l.a.isPremiumUser),a=this.store.selectSnapshot(o.a.hasOrganization),s=[];return et.i(n)&&s.push(qe.a.Publish),et.b(n,e,i,a)&&s.push(qe.a.CopyURL),s.length>0?[qe.a.Divider,...s]:[]}removeDividerers(e){return e.filter(e=>e!==qe.a.Divider)}removeDuplicateDividers(e){let t=[...e];for(;t[0]===qe.a.Divider;)t.splice(0,1);for(t=t.filter((e,n)=>e!==qe.a.Divider||t[n-1]!==qe.a.Divider);t[t.length-1]===qe.a.Divider;)t.pop();return t}getBookmarkActionsGrouping(e,t){const n=t?1:3,i=e.filter(e=>pt.includes(e)),a=e.filter(e=>!i.includes(e));return this.createBookmarkActionsGrouping(i,a,n)}createBookmarkActionsGrouping(e,t,n){const i=this.removeDividerers(t).length>0||this.removeDividerers(e).length>n,a=[...e.splice(i?n-1:n),...t];return{mainActions:e,moreActions:this.removeDuplicateDividers(a)}}openLimitDialog(){this.dialogService.openLimitDialog().afterClosed().subscribe(e=>{e&&this.dialogService.openUpgradeDialog()})}}return e.\u0275fac=function(t){return new(t||e)(h.Zb(i.h),h.Zb(a.b),h.Zb(s.a),h.Zb(g.b),h.Zb(ie.b),h.Zb(ot.e),h.Zb($e.a),h.Zb(rt.a),h.Zb(te.a),h.Zb(tt.a),h.Zb(at.b),h.Zb(st.a))},e.\u0275prov=h.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},PWQe:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("HDdC"),a=n("P6Fj");function s(e,t,n=!0){const s=new a.a,o=[];return n&&o.push(t.map(e=>e.label)),e.forEach(e=>{const n=t.map(t=>e[t.field]);o.push(n)}),new i.a(e=>{const t=s.unparse(o,{quotes:!0,header:!1});e.next(t),e.complete()})}},PXMH:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),a=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})()},PlCH:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var i=n("zJoM"),a=n("fXoL"),s=n("ofXK"),o=n("XNiG"),r=(n("Lwol"),n("AcyG")),c=n("VRyK"),l=n("HDdC"),p=n("pLZG"),u=n("1G5W"),d=n("5miH"),g=n("PUI9"),h=n("Mh2x"),b=n("eW6i"),m=n("qz+p"),f=n("lR5k"),y=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},v=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const O=["image"],S=["imagePre"],x=["imagePost"],C=["imageContainer"];function w(e,t){if(1&e&&(a.Qb(0,"span",8),a.hc(1,"markdown")),2&e){const e=a.gc();a.mc("innerHTML",a.ic(1,1,e.label),a.Dc)}}function j(e,t){if(1&e&&a.Qb(0,"img",9,10),2&e){const e=a.gc();a.mc("src",e.imageUrl,a.Fc)}}function k(e,t){if(1&e&&a.Qb(0,"img",11,12),2&e){const e=a.gc();a.mc("src",e.imageUrl,a.Fc)}}let P=(()=>{class e{constructor(e,t,n){this.renderer=e,this.engineService=t,this.animationService=n,this.ngUnsubscribe=new o.a,this.loopImage=!1}ngOnInit(){this.initChapterListener(),this.initTimelineListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initChapterListener(){this.selectedChapterId$.pipe(Object(p.a)(e=>null!=e),Object(u.a)(this.ngUnsubscribe)).subscribe(e=>{this.timerange=this.animationService.getChapterLocalTimerange(e)})}initTimelineListener(){Object(c.a)(this.engineService.getEvent(d.a.TimelineScrubbed),this.engineService.getEvent(d.a.TimelinePlaying)).pipe(Object(u.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.getChapterPercent(e.time);this.moveImage(t)})}moveImage(e){const t=this.image.nativeElement.getBoundingClientRect().width;this.renderer.setStyle(this.imageContainer.nativeElement,"transform",`translate(${e/100*-t}px, 0)`),this.loopImage&&(this.renderer.setStyle(this.imagePre.nativeElement,"transform",`translate(${-t}px, 0)`),this.renderer.setStyle(this.imagePost.nativeElement,"transform",`translate(${t}px, 0)`))}getChapterPercent(e){const{firstTime:t,lastTime:n}=this.timerange,i=this.animationService.mapGlobalTimeToLocal(e).time;return Math.max(t,Math.min(i,n))/n*100}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(a.H),a.Pb(b.a),a.Pb(m.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-ticker-block-item"]],viewQuery:function(e,t){if(1&e&&(a.Jc(O,!0),a.Vc(S,!0),a.Vc(x,!0),a.Jc(C,!0)),2&e){let e;a.xc(e=a.dc())&&(t.image=e.first),a.xc(e=a.dc())&&(t.imagePre=e.first),a.xc(e=a.dc())&&(t.imagePost=e.first),a.xc(e=a.dc())&&(t.imageContainer=e.first)}},inputs:{label:"label",imageUrl:"imageUrl",loopImage:"loopImage"},decls:8,vars:4,consts:[[1,"ticker-block-item"],["class","ticker-block-item__label html",3,"innerHTML",4,"ngIf"],[1,"ticker-block__image-container"],["imageContainer",""],["class","ticker-block-item__image ticker-block-item__image--pre",3,"src",4,"ngIf"],["class","ticker-block-item__image ticker-block-item__image--post",3,"src",4,"ngIf"],[1,"ticker-block-item__image",3,"src"],["image",""],[1,"ticker-block-item__label","html",3,"innerHTML"],[1,"ticker-block-item__image","ticker-block-item__image--pre",3,"src"],["imagePre",""],[1,"ticker-block-item__image","ticker-block-item__image--post",3,"src"],["imagePost",""]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Nc(1,w,2,3,"span",1),a.Vb(2,"div",2,3),a.Nc(4,j,2,1,"img",4),a.Nc(5,k,2,1,"img",5),a.Qb(6,"img",6,7),a.Ub(),a.Ub()),2&e&&(a.Db(1),a.mc("ngIf",t.label),a.Db(3),a.mc("ngIf",t.loopImage),a.Db(1),a.mc("ngIf",t.loopImage),a.Db(1),a.mc("src",t.imageUrl,a.Fc))},directives:[s.p],pipes:[f.b],styles:['.ticker-block-item[_ngcontent-%COMP%]{background:#f9fafd;background:linear-gradient(90deg,#f9fafd 20%,hsla(0,0%,100%,0) 40%,#fff 60%,#f9fafd 80%);overflow:hidden;padding-left:50%;position:relative}.ticker-block-item[_ngcontent-%COMP%]:hover   .ticker-block-item__label[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.9)}.ticker-block-item[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:50%;top:0;height:100%;width:1px;background:red;box-shadow:0 0 0 4px rgba(255,0,0,.2);z-index:10}.ticker-block-item__label[_ngcontent-%COMP%]{position:absolute;z-index:10;left:4px;top:4px;border-radius:8px;padding:2px 6px;font-size:12px;border:1px solid rgba(16,24,35,.5);background:hsla(0,0%,100%,.55)}.ticker-block-item__image-container[_ngcontent-%COMP%]{position:relative}.ticker-block-item__image[_ngcontent-%COMP%]{display:block}.ticker-block-item__image--post[_ngcontent-%COMP%], .ticker-block-item__image--pre[_ngcontent-%COMP%]{position:absolute;top:0;left:0}'],changeDetection:0}),y([Object(r.e)(g.a.getAnimationPlaying),v("design:type",l.a)],e.prototype,"animationPlaying$",void 0),y([Object(r.e)(h.a.getSelectedChapterId),v("design:type",l.a)],e.prototype,"selectedChapterId$",void 0),e})();function _(e,t){if(1&e&&a.Qb(0,"app-ticker-block-item",3),2&e){const e=t.$implicit,n=a.gc(2);a.mc("imageUrl",e.urls.default)("label",e.caption)("loopImage",n.tickerBlock.loopImage)}}function M(e,t){if(1&e&&(a.Vb(0,"div",1),a.Nc(1,_,1,3,"app-ticker-block-item",2),a.Ub()),2&e){const e=a.gc();a.Db(1),a.mc("ngForOf",e.tickerBlock.images)}}let I=(()=>{class e{constructor(){this.ngUnsubscribe=new o.a}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Jb({type:e,selectors:[["app-ticker-block"]],inputs:{tickerBlock:"tickerBlock"},decls:1,vars:1,consts:[["class","ticker-block",4,"ngIf"],[1,"ticker-block"],[3,"imageUrl","label","loopImage",4,"ngFor","ngForOf"],[3,"imageUrl","label","loopImage"]],template:function(e,t){1&e&&a.Nc(0,M,2,1,"div",0),2&e&&a.mc("ngIf",t.tickerBlock)},directives:[s.p,s.o,P],styles:[""],changeDetection:0}),e})();n("uDDk");var T=n("7gUy");let U=(()=>{class e{constructor(){this.layout=i.a.Normal}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Jb({type:e,selectors:[["app-markdown-block"]],inputs:{markdownBlock:"markdownBlock",layout:"layout"},decls:2,vars:1,consts:[[1,"markdown-block"],[3,"markdownText"]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Qb(1,"app-html",1),a.Ub()),2&e&&(a.Db(1),a.mc("markdownText",t.markdownBlock.markdown))},directives:[T.a],styles:[""],encapsulation:2,changeDetection:0}),e})();var L=n("JggO");function z(e,t){if(1&e&&a.Qb(0,"app-ticker-block",6),2&e){const e=a.gc().$implicit;a.mc("tickerBlock",e)}}function A(e,t){if(1&e&&a.Qb(0,"app-markdown-block",7),2&e){const e=a.gc().$implicit,t=a.gc(2);a.mc("markdownBlock",e)("layout",t.layout)}}function F(e,t){if(1&e&&a.Qb(0,"app-images-block",8),2&e){const e=a.gc().$implicit,t=a.gc(2);a.mc("imagesBlock",e)("layout",t.layout)}}function D(e,t){if(1&e&&(a.Vb(0,"div"),a.Tb(1,2),a.Nc(2,z,1,1,"app-ticker-block",3),a.Nc(3,A,1,2,"app-markdown-block",4),a.Nc(4,F,1,2,"app-images-block",5),a.Sb(),a.Ub()),2&e){const e=t.$implicit;a.Hb("mv-2",t.index>0),a.Db(1),a.mc("ngSwitch",e.type),a.Db(1),a.mc("ngSwitchCase","ticker"),a.Db(1),a.mc("ngSwitchCase","markdown"),a.Db(1),a.mc("ngSwitchCase","images")}}function E(e,t){if(1&e&&(a.Tb(0),a.Nc(1,D,5,6,"div",1),a.Sb()),2&e){const e=a.gc();a.Db(1),a.mc("ngForOf",e.contentBlocks)}}let N=(()=>{class e{constructor(){this._contentBlocks=[],this.layout=i.a.Normal,this.include=[],this.exclude=[]}get contentBlocks(){return this._contentBlocks.filter(e=>!this.include.length||this.include.includes(e.type)).filter(e=>!this.exclude.length||!this.exclude.includes(e.type))}set contentBlocks(e){this._contentBlocks=e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Jb({type:e,selectors:[["app-content-blocks"]],inputs:{contentBlocks:"contentBlocks",layout:"layout",include:"include",exclude:"exclude"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"mv-2",4,"ngFor","ngForOf"],[3,"ngSwitch"],[3,"tickerBlock",4,"ngSwitchCase"],[3,"markdownBlock","layout",4,"ngSwitchCase"],[3,"imagesBlock","layout",4,"ngSwitchCase"],[3,"tickerBlock"],[3,"markdownBlock","layout"],[3,"imagesBlock","layout"]],template:function(e,t){1&e&&a.Nc(0,E,2,1,"ng-container",0),2&e&&a.mc("ngIf",t.contentBlocks.length>0)},directives:[s.p,s.o,s.r,s.s,I,U,L.a],styles:[""],encapsulation:2,changeDetection:0}),e})()},PmOP:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL");let a=(()=>{class e{constructor(){}onClick(e){e.stopPropagation(),e.stopImmediatePropagation()}onEnterUp(e){e.stopPropagation(),e.stopImmediatePropagation()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.Kb({type:e,selectors:[["","appEventFence",""]],hostBindings:function(e,t){1&e&&i.cc("click",(function(e){return t.onClick(e,e.target)}))("keyup.enter",(function(e){return t.onEnterUp(e,e.target)}))}}),e})()},"Poh+":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Default=0]="Default",e.DrawerOnly="drawer",e.ColumnOnly="column",e}({})},QkH1:function(e,t,n){"use strict";n.d(t,"k",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"j",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"h",(function(){return g})),n.d(t,"b",(function(){return b})),n.d(t,"i",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return y})),n.d(t,"g",(function(){return v})),n.d(t,"l",(function(){return O}));var i=n("LvDl"),a=n("ZR5G"),s=n("WoAB"),o=n("AytR"),r=function(e){return e.User="user",e.Group="group",e}({});function c(e,t){return Object(i.get)(e,"permissions",[]).includes(t)}function l(e){return c(e,s.a.EditBookmarks)&&!o.a.native}function p(e,t){const n=c(e,s.a.EditBookmarks);return!!n&&(t.type===a.a.Module?n:!(!0!==t.is_owner)||!!S(t)&&h(e,t))}function u(){return!0}function d(e,t){return!0===t.is_owner}function g(e,t){return!!c(e,s.a.EditBookmarks)&&(!(!0!==t.is_owner&&!O(t))||!!S(t)&&h(e,t))}function h(e,t){if(c(e,s.a.EditAllTeamBookmarks))return!0;const n=c(e,s.a.EditTeamBookmarks),i=S(t)&&t.group_access[0].member_edit;return n&&i}function b(e,t,n,i){return!(!n||!i)&&c(e,s.a.CopyUrl)}function m(e){return c(e,s.a.PublishBookmarks)}function f(e,t){const n=!0===t.is_owner,i=c(e,s.a.DuplicateTeamBookmarks);return!(!n&&!i)}function y(e,t){return!!Object(i.isNil)(t.module_accessor_level)}function v(e,t){return!!t&&c(e,s.a.ExportCSV)}function O(e){return e.type==a.a.Module&&e.module_accessor_level===r.Group}function S(e){return Array.isArray(e.group_access)&&e.group_access.length>0}},QkOQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("RX1/");class a extends i.a{constructor(e,t,n){super(),this.email=e,this.password=t,this.rememberMe=n}static toJSON(e){return{id_token:e.token,version:e.version,app_producttype:e.app_producttype,app_productkey:e.app_productkey,group_invite_mode:e.groupInviteMode,group_invite_key:e.groupInviteKey,group_code_mode:e.groupCodeMode,group_code:e.groupCode,group_ovid_mode:e.groupOvidMode,group_ovid_osptok:e.groupOvidOsptok,email:e.email,password:e.password,email_remember_me:e.rememberMe,platform:e.platform,return_to:e.returnTo,brand_id:e.brandId,locale_id:e.localeId,timestamp:e.timestamp,site_verify_response:e.site_verify_response}}}},QtmD:function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var i=n("AcyG");class a{}var s=n("Lyqc"),o=n("nYR2"),r=n("5+tZ"),c=n("IzEk"),l=n("lJxs"),p=n("eIep"),u=n("vkgz"),d=n("XqAe"),g=n("Mh2x"),h=n("Cfvw"),b=n("cp0P"),m=n("LRne"),f=n("tgUM"),y=n("/MKm"),v=n("qBAC"),O=n("7PKw"),S=n("E13e"),x=n("LvDl"),C=n("kqJf"),w=n("g408"),j=n("0E12");class k{}var P=n("MuXT"),_=n("kTA6"),M=n("yG3n"),I=n("Vrox"),T=n("h8op"),U=n("vm16"),L=n("4FHB"),z=n("cQmI"),A=n("AbMW"),F=n("DTUA"),D=n("ZR5G"),E=n("fXoL"),N=n("dNgK"),R=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},V=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function B(e,t,n,i,a,s){return s?Object(h.a)(n.getDatabaseItem(F.a.PreviewBookmark)):a===D.a.Bookmark?e.getBookmarkModel(i):t.getConditionModel(i)}const H={loading:!0,exporting:!1,copying:!1,saving:!1,bookmarks:[],selectedBookmark:null,sort:f.d,checkedBookmarks:[],selectedCategory:null};let Q=(()=>{let e=class{constructor(e,t,n,i,a,s,o,r,c,l,p){this.store=e,this.actions=t,this.bookmarksService=n,this.imagesService=i,this.storyService=a,this.exploreService=s,this.publishService=o,this.organizationsService=r,this.snackbar=c,this.pendoService=l,this.storageService=p}static getBookmarks(e){const{bookmarks:t,sort:n}=e,{ascending:i,fields:a}=n;return Object(C.a)(t,a,i)}static getCheckedBookmarks(e){return e.checkedBookmarks}static getSelectedBookmark(e){return e.selectedBookmark}static getSelectedBookmarkViewMode(e){return e.selectedBookmark.viewMode||z.a.All}static getLoading(e){return e.loading}static getExporting(e){return e.exporting}static getSaving(e){return e.saving}static getCopying(e){return e.copying}static getSort(e){return e.sort}static getSelectedCategory(e){return e.selectedCategory}loadBookmarks(e,t){e.patchState({loading:!0,bookmarks:[],checkedBookmarks:[]}),Object(b.a)(this.bookmarksService.getPrivateBookmarks(t.query),this.bookmarksService.getPrivateConditions(t.query)).pipe(Object(o.a)(()=>e.patchState({loading:!1}))).subscribe(([t,n])=>{e.dispatch(new s.t([...t,...n]))})}loadOrganizationBookmarks(e,{organizationId:t}){e.patchState({loading:!0,bookmarks:[],checkedBookmarks:[]}),this.bookmarksService.getOrganizationContent(t).pipe(Object(o.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new s.t(t))})}loadCollectionBookmarks(e,t){e.patchState({loading:!0,bookmarks:[],checkedBookmarks:[]}),this.organizationsService.getCollectionContent(t.organizationId,t.collectionId).pipe(Object(o.a)(()=>e.patchState({loading:!1}))).subscribe(t=>{e.dispatch(new s.t(t))})}loadSuccess({patchState:e},t){e({bookmarks:t.result})}selectBookmark(e,t){const{id:n,type:i,preview:a}=t;B(this.bookmarksService,this.exploreService,this.storageService,n,i,a).subscribe(t=>{e.dispatch(new s.D(t))})}selectBookmarkSuccess(e,t){let{bookmark:n}=t;n&&(n=Object(A.a)(n)),e.patchState({selectedBookmark:n})}saveBookmark(e,t){return n=this,void 0,o=function*(){let n;e.patchState({saving:!0});const a=t.bookmarkEntry,o=this.store.selectSnapshot(g.a.getStoryChapters),l=!1===t.inplace,p=w.a.makeChapterIdMap(o,l);l&&(yield this.store.dispatch(new j.a.UpdateTweenParticleLookupChapters(p)).toPromise()),t.includeIndex&&(n=this.bookmarksService.createBookmarkStory(p),a.index=n.story);let u=Object(m.a)([]);if(t.includeIndex){const e=this.store.selectSnapshot(I.a.getRegisteredThumbnails),t=this.imagesService.saveChapterThumbnails(a.index.chapters,e,Object(x.invert)(p));t.length&&(u=Object(b.a)(t))}u.pipe(Object(r.b)(t=>{const n=this.store.selectSnapshot(I.a.getRegisteredThumbnails);return t.forEach(e=>{const t=new M.a;t.storyId=a.id,t.chapterId=e.chapterId,t.urls={small:e.uris.small,large:e.uris.large},n.set(e.chapterId,t);const i=a.index.chapters.findIndex(t=>t.id===e.chapterId);i>=0&&(a.index.chapters[i].thumbnails=Object.assign({},e.uris))}),e.dispatch(new T.a(n)),this.bookmarksService.saveBookmark(a)})).subscribe(t=>{e.patchState({saving:!1});const o=n?n.story:null,r=a.id?"update":"save",l=Array.isArray(a.addCollections)&&a.addCollections.length>0,p=a.removeCollections&&Array.from(a.removeCollections.keys()).length>0;l||p?(this.actions.pipe(Object(i.l)(s.L,s.K),Object(c.a)(1)).subscribe(()=>{e.dispatch(new s.B(t,o,r))}),e.dispatch(new s.J(t,a.addCollections,a.removeCollections))):e.dispatch(new s.B(t,o,r))},()=>{e.dispatch(new s.A(a))}),this.pendoService.track("Bookmark Save - Start")},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{r(o.next(e))}catch(n){t(n)}}function s(e){try{r(o.throw(e))}catch(n){t(n)}}function r(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(i,s)}r((o=o.apply(n,[])).next())}));var n,a,o}saveBookmarkSuccess(e,t){const n=t.bookmark,i=e.getState().bookmarks,a=i.findIndex(e=>e.id===n.id);-1!==a&&(i[a]=n,e.patchState({bookmarks:[...i]})),"save"===t.method&&e.patchState({selectedBookmark:t.bookmark}),this.pendoService.track("Bookmark Save - Success")}saveBookmarkFail(e,t){this.pendoService.track("Bookmark Save - Failure")}deleteBookmark(e,t){const n=t.bookmarkId;this.bookmarksService.deleteBookmark(n).subscribe(()=>{e.dispatch(new s.o(n))},t=>{e.dispatch(new s.n(n,t))})}deleteBookmarkSuccess(e,t){const n=e.getState().bookmarks.filter(e=>e.id!==t.bookmarkId);e.patchState({bookmarks:[...n]}),this.snackbar.open("Successfully deleted 3D model")}bulkDeleteBookmark(e,t){const n=t.bookmarkIds,i=t.bookmarkIds.map(e=>this.bookmarksService.deleteBookmark(e));Object(b.a)(i).subscribe(()=>{e.dispatch(new s.e(n))},t=>{e.dispatch(new s.d(n,t))})}bulkDeleteBookmarkSuccess(e,t){const n=e.getState().bookmarks.filter(e=>!t.bookmarkIds.some(t=>t===e.id));e.patchState({bookmarks:[...n]}),this.snackbar.open("Successfully deleted 3D models")}sortBookmarks(e,t){const n=e.getState().bookmarks;e.patchState({sort:t.sort,bookmarks:[...n]})}clearBookmarks(e,t){e.patchState({bookmarks:[],checkedBookmarks:[]})}resetBookmarks(e,t){e.setState(H)}checkBookmark(e,t){let n=e.getState().checkedBookmarks;const i=n.some(e=>e===t.id);t.checked&&!i?n=[...n,t.id]:t.checked||(n=n.filter(e=>e!==t.id)),e.patchState({checkedBookmarks:n})}setCheckedBookmarks(e,t){e.patchState({checkedBookmarks:t.ids})}exportBookmarks(e,t){const{bookmarks:n,organizationId:i,collections:a,widgetURL:r,widgetOptions:c,offlineEnabled:l,productAccountId:p}=t,u=c||new v.a;e.patchState({exporting:!0}),this.publishService.exportBookmarks(n,i,a,r,u,null,t.userLanguage,t.userApp,l,p).pipe(Object(o.a)(()=>{e.patchState({exporting:!1})})).subscribe(t=>{e.dispatch(t?new s.r(n):new s.q(n))})}updateBookmarkCollections(e,t){const n=t.addCollections,i=n.map(e=>({collection_id:e.collection_id,content_list:[{content_type:t.bookmark.type,content_id:t.bookmark.id}]})),a=Array.from(t.removeCollections.keys()),o=a.map(e=>({collection_id:e.collection_id,collection_content_id_list:[t.removeCollections.get(e)]})),r=n.concat(a)[0].group_id;this.organizationsService.updateCollectionContent(r,i,o).subscribe(()=>{n.length>0&&e.dispatch(new s.b(t.bookmark,n)),a.length>0&&e.dispatch(new s.x(t.bookmark,a)),e.dispatch(new s.L(t.bookmark,n,a))},()=>{n.length>0&&e.dispatch(new s.a(t.bookmark,n)),a.length>0&&e.dispatch(new s.w(t.bookmark,a)),e.dispatch(new s.K(t.bookmark,n,a))})}removeBookmarkCollectionSuccess(e,t){const{bookmarks:n,selectedCategory:i}=e.getState();if("collection"===i){const i=t.bookmark.id,a=n.filter(e=>e.id!==i);e.patchState({bookmarks:[...a]})}}copyBookmark(e,t){this.pendoService.track("Bookmark Copy - Start");const{groupAccess:n,collections:i}=t;let a,r,c,d,g;e.patchState({copying:!0,saving:!0});const h=B(this.bookmarksService,this.exploreService,this.storageService,t.id,t.type,!1),f=this.storyService.getStory(t.id,t.type,t.lang);Object(b.a)([h,f]).pipe(Object(l.a)(([e,t])=>{r=Object(x.cloneDeep)(t),c=Object(x.cloneDeep)(t),d=w.a.makeChapterIdMap(r.chapters,!0),c.chapters.forEach(e=>{e.id=d[e.id]}),c.tweenParticleLookup&&(c.tweenParticleLookup=L.a.updateChapterIds(c.tweenParticleLookup,d)),g=e.viewMode}),Object(p.a)(()=>this.imagesService.generateFreshChapterImages(r.chapters,t.id)),Object(p.a)(e=>{const t=e.map(e=>this.imagesService.saveNewChapterImage(e.chapterId,e.snapshot));return t.length?Object(b.a)(t):Object(m.a)([])}),Object(l.a)(e=>{e.forEach(e=>{e.chapterId=d[e.chapterId]}),c.chapters.forEach(t=>{const n=e.find(e=>e.chapterId===t.id);n&&(t.thumbnails=Object.assign({},n.uris))})}),Object(p.a)(()=>{const e=new k;return e.title=t.title,e.isOwner=!0,e.index=c,e.viewMode=g,e.is_content_copy=!0,n&&(e.add_group_access=[n]),this.bookmarksService.saveBookmark(e)}),Object(u.a)(e=>{a=e}),Object(p.a)(()=>{if(n&&i&&i.length>0){const e=i[0].group_id,t=i.map(e=>({collection_id:e.collection_id,content_list:[{content_type:a.type,content_id:a.id}]}));return this.organizationsService.updateCollectionContent(e,t,[])}return Object(m.a)(!0)}),Object(o.a)(()=>{e.patchState({copying:!1,saving:!1})})).subscribe(()=>{this.pendoService.track("Bookmark Copy - Success"),e.dispatch(new s.l(a))},n=>{this.pendoService.track("Bookmark Copy - Failure"),e.dispatch(new s.k(t.id,n))})}setBookmarkText(e,t){const n=e.getState().selectedBookmark;e.patchState({selectedBookmark:Object.assign(Object.assign({},n),{title:t.title})})}setBookmarkViewMode(e,t){const n=e.getState().selectedBookmark;e.patchState({selectedBookmark:Object.assign(Object.assign({},n),{viewMode:t.viewMode})})}setSelectedCategory(e,{category:t}){e.patchState({selectedCategory:t||null})}cancelSaveBookmark(e,t){e.patchState({saving:!1})}cancelCopyBookmark(e,t){e.patchState({copying:!1})}};return e.\u0275fac=function(t){return new(t||e)(E.Zb(i.h),E.Zb(i.b),E.Zb(d.a),E.Zb(U.a),E.Zb(P.a),E.Zb(S.a),E.Zb(y.b),E.Zb(O.a),E.Zb(N.b),E.Zb(_.b),E.Zb(F.d))},e.\u0275prov=E.Lb({token:e,factory:e.\u0275fac}),R([Object(i.a)(s.s),V("design:type",Function),V("design:paramtypes",[Object,s.s]),V("design:returntype",void 0)],e.prototype,"loadBookmarks",null),R([Object(i.a)(s.v),V("design:type",Function),V("design:paramtypes",[Object,s.v]),V("design:returntype",void 0)],e.prototype,"loadOrganizationBookmarks",null),R([Object(i.a)(s.u),V("design:type",Function),V("design:paramtypes",[Object,s.u]),V("design:returntype",void 0)],e.prototype,"loadCollectionBookmarks",null),R([Object(i.a)(s.t),V("design:type",Function),V("design:paramtypes",[Object,s.t]),V("design:returntype",void 0)],e.prototype,"loadSuccess",null),R([Object(i.a)(s.C),V("design:type",Function),V("design:paramtypes",[Object,s.C]),V("design:returntype",void 0)],e.prototype,"selectBookmark",null),R([Object(i.a)(s.D),V("design:type",Function),V("design:paramtypes",[Object,s.D]),V("design:returntype",void 0)],e.prototype,"selectBookmarkSuccess",null),R([Object(i.a)(s.z),V("design:type",Function),V("design:paramtypes",[Object,s.z]),V("design:returntype",Promise)],e.prototype,"saveBookmark",null),R([Object(i.a)(s.B),V("design:type",Function),V("design:paramtypes",[Object,s.B]),V("design:returntype",void 0)],e.prototype,"saveBookmarkSuccess",null),R([Object(i.a)(s.A),V("design:type",Function),V("design:paramtypes",[Object,s.A]),V("design:returntype",void 0)],e.prototype,"saveBookmarkFail",null),R([Object(i.a)(s.m),V("design:type",Function),V("design:paramtypes",[Object,s.m]),V("design:returntype",void 0)],e.prototype,"deleteBookmark",null),R([Object(i.a)(s.o),V("design:type",Function),V("design:paramtypes",[Object,s.o]),V("design:returntype",void 0)],e.prototype,"deleteBookmarkSuccess",null),R([Object(i.a)(s.c),V("design:type",Function),V("design:paramtypes",[Object,s.c]),V("design:returntype",void 0)],e.prototype,"bulkDeleteBookmark",null),R([Object(i.a)(s.e),V("design:type",Function),V("design:paramtypes",[Object,s.e]),V("design:returntype",void 0)],e.prototype,"bulkDeleteBookmarkSuccess",null),R([Object(i.a)(s.I),V("design:type",Function),V("design:paramtypes",[Object,s.I]),V("design:returntype",void 0)],e.prototype,"sortBookmarks",null),R([Object(i.a)(s.i),V("design:type",Function),V("design:paramtypes",[Object,s.i]),V("design:returntype",void 0)],e.prototype,"clearBookmarks",null),R([Object(i.a)(s.y),V("design:type",Function),V("design:paramtypes",[Object,s.y]),V("design:returntype",void 0)],e.prototype,"resetBookmarks",null),R([Object(i.a)(s.h),V("design:type",Function),V("design:paramtypes",[Object,s.h]),V("design:returntype",void 0)],e.prototype,"checkBookmark",null),R([Object(i.a)(s.G),V("design:type",Function),V("design:paramtypes",[Object,s.G]),V("design:returntype",void 0)],e.prototype,"setCheckedBookmarks",null),R([Object(i.a)(s.p),V("design:type",Function),V("design:paramtypes",[Object,s.p]),V("design:returntype",void 0)],e.prototype,"exportBookmarks",null),R([Object(i.a)(s.J),V("design:type",Function),V("design:paramtypes",[Object,s.J]),V("design:returntype",void 0)],e.prototype,"updateBookmarkCollections",null),R([Object(i.a)(s.x),V("design:type",Function),V("design:paramtypes",[Object,s.x]),V("design:returntype",void 0)],e.prototype,"removeBookmarkCollectionSuccess",null),R([Object(i.a)(s.j),V("design:type",Function),V("design:paramtypes",[Object,s.j]),V("design:returntype",void 0)],e.prototype,"copyBookmark",null),R([Object(i.a)(s.E),V("design:type",Function),V("design:paramtypes",[Object,s.E]),V("design:returntype",void 0)],e.prototype,"setBookmarkText",null),R([Object(i.a)(s.F),V("design:type",Function),V("design:paramtypes",[Object,s.F]),V("design:returntype",void 0)],e.prototype,"setBookmarkViewMode",null),R([Object(i.a)(s.H),V("design:type",Function),V("design:paramtypes",[Object,s.H]),V("design:returntype",void 0)],e.prototype,"setSelectedCategory",null),R([Object(i.a)(s.g),V("design:type",Function),V("design:paramtypes",[Object,s.g]),V("design:returntype",void 0)],e.prototype,"cancelSaveBookmark",null),R([Object(i.a)(s.f),V("design:type",Function),V("design:paramtypes",[Object,s.f]),V("design:returntype",void 0)],e.prototype,"cancelCopyBookmark",null),R([Object(i.f)(),V("design:type",Function),V("design:paramtypes",[a]),V("design:returntype",void 0)],e,"getBookmarks",null),R([Object(i.f)(),V("design:type",Function),V("design:paramtypes",[a]),V("design:returntype",void 0)],e,"getCheckedBookmarks",null),R([Object(i.f)(),V("design:type",Function),V("design:paramtypes",[a]),V("design:returntype",void 0)],e,"getSelectedBookmark",null),R([Object(i.f)(),V("design:type",Function),V("design:paramtypes",[a]),V("design:returntype",void 0)],e,"getSelectedBookmarkViewMode",null),R([Object(i.f)(),V("design:type",Function),V("design:paramtypes",[a]),V("design:returntype",void 0)],e,"getLoading",null),R([Object(i.f)(),V("design:type",Function),V("design:paramtypes",[a]),V("design:returntype",void 0)],e,"getExporting",null),R([Object(i.f)(),V("design:type",Function),V("design:paramtypes",[a]),V("design:returntype",void 0)],e,"getSaving",null),R([Object(i.f)(),V("design:type",Function),V("design:paramtypes",[a]),V("design:returntype",void 0)],e,"getCopying",null),R([Object(i.f)(),V("design:type",Function),V("design:paramtypes",[a]),V("design:returntype",void 0)],e,"getSort",null),R([Object(i.f)(),V("design:type",Function),V("design:paramtypes",[a]),V("design:returntype",void 0)],e,"getSelectedCategory",null),e=R([Object(i.g)({name:"bookmarks",defaults:H})],e),e})()},R6Q1:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{static toArray(e){return[e.x,e.y,e.z]}static fromArray(e){return{x:e[0],y:e[1],z:e[2]}}}},RD2w:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.AnnotationsCreate="annotations.create",e.AnnotationsDestroy="annotations.destroy",e.AnnotationsInfo="annotations.info",e.AnnotationsSetDescription="annotations.setDescription",e.AnnotationsSetLabelsShown="annotations.setLabelsShown",e.AnnotationsSetTitle="annotations.setTitle",e.AnnotationsUpdate="annotations.update",e.AnnotationsSetEnabled="annotations.setEnabled",e.CameraInfo="camera.info",e.CameraOrbit="camera.orbit",e.CameraPan="camera.pan",e.CameraReset="camera.reset",e.CameraSet="camera.set",e.CameraZoom="camera.zoom",e.setCameraMode="camera.setCameraMode",e.CameraDisableChapterCamera="camera.disableChapterCamera",e.CameraEnableChapterCamera="camera.enableChapterCamera",e.GetAnnotationInfo="annotations.info",e.HideAnnotations="annotations.hide",e.HotspotsCreate="hotspots.create",e.HotspotsDestroy="hotspots.destroy",e.HotspotsHide="hotspots.hide",e.HotspotsInfo="hotspots.info",e.HotspotsShow="hotspots.show",e.HotspotsTypes="hotspots.types",e.HotspotsUpdate="hotspots.update",e.HumanInfo="human.info",e.HumanCanvasInfo="human.canvasInfo",e.InputDisable="input.disable",e.InputEnable="input.enable",e.LabelsCreate="labels.create",e.LabelsDestroy="labels.destroy",e.LabelsInfo="labels.info",e.LabelsHide="labels.hide",e.LabelsSetEnabled="labels.setEnabled",e.LabelsShow="labels.show",e.LabelsUpdate="labels.update",e.LabelsCanvasUpdate="labels.canvasUpdate",e.LabelsSetScale="labels.setScale",e.NativeErrorMessage="native.errorMessage",e.NativeSetSdkOffline="native.setSdkOffline",e.NativeSetAppVersion="native.setAppVersion",e.NativeRedirect="native.redirect",e.NativeReload="native.reload",e.NativeOfflineModelIds="native.offlineModelIDs",e.QuizInfo="quiz.info",e.QuizEnter="quiz.enter",e.QuizExit="quiz.exit",e.QuizQuestion="quiz.currentQuestion",e.QuizSubmit="quiz.submit",e.QuizNextQuestion="quiz.next",e.QuizPreviousQuestion="quiz.previous",e.QuizSelectQuestion="quiz.select",e.QuizSet="quiz.set",e.QuizReset="quiz.reset",e.SceneMetaData="scene.metadata",e.SceneSetHighlightColor="scene.setHighlightColor",e.SceneColorObject="scene.colorObject",e.SceneDisableHighlight="scene.disableHighlight",e.SceneEnableHighlight="scene.enableHighlight",e.SceneGetColor="scene.getColor",e.SceneInfo="scene.info",e.SceneLoad="scene.load",e.ScenePick="scene.pick",e.SceneReset="scene.reset",e.SceneSelectObjects="scene.selectObjects",e.SceneShowObjects="scene.showObjects",e.SceneTransformObject="scene.transformObject",e.SceneUncolorObject="scene.uncolorObject",e.SceneSnapshot="scene.snapshot",e.SceneCapture="scene.capture",e.SceneRestore="scene.restore",e.SceneEnableXrayMode="scene.enableXray",e.SceneDisableXrayMode="scene.disableXray",e.SceneSetLayersSliderPosition="scene.setLayersSliderPosition",e.SceneGetLayers="scene.getLayers",e.SceneSetBaseDirectory="scene.setBaseDirectory",e.ShowAnnotations="annotations.show",e.SetAnnotationsShown="annotations.setShown",e.TimelineInfo="timeline.info",e.TimelineQuery="timeline.query",e.TimelineNext="timeline.nextChapter",e.TimelinePause="timeline.pause",e.TimelinePlay="timeline.play",e.TimelinePrev="timeline.previousChapter",e.TimelineSet="timeline.set",e.UIGetBackground="ui.getBackground",e.UIGetDisplay="ui.getDisplay",e.UIGetWorldPosition="ui.getWorldPosition",e.UISetBackground="ui.setBackground",e.UIPresetBackground="ui.presetBackground",e.UISetDisplay="ui.setDisplay",e.UIResetDisplay="ui.resetDisplay",e.UISnapshot="ui.snapshot",e.focusObject="focus.focusObject",e.dissectSetEnabled="dissect.setEnabled",e.pickSingleSetEnabled="pick.single.setEnabled",e.pickMultiSetEnabled="pick.multi.setEnabled",e.getCanvasPos="scene.getCanvasPos",e.sceneSetClickMode="scene.setClickMode",e.sceneGetClickMode="scene.getClickMode",e.IsolateObject="scene.isolateObject",e.UISetOndemand="ui.setOndemand",e.UISetLoadingExperience="ui.setLoadingExperience",e.UISetScrollCaptureMode="ui.setScrollCaptureMode",e.UISetTutorial="ui.setTutorial",e.UISetQuizLock="ui.setQuizLock",e}({})},"RGY+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("fXoL"),a=n("3Pt+");let s=(()=>{class e{constructor(){this.theme="dark",this.min=0,this.max=100,this.step=1,this.label="",this._value=0,this.disabled=!1,this.blurred=new i.p,this.mouseUp=new i.p,this.onChange=()=>{},this.onTouched=()=>{},this.propagateChange=e=>{}}get value(){return this._value}set value(e){null!=e&&(null==this._initialValue&&(this._initialValue=e),this._value=e,this.propagateChange(this.value))}ngOnInit(){}handleMouseUp(){this.mouseUp.emit()}handleBlur(){this.blurred.emit()}handleRangeDoubleClick(){this.value=this._initialValue}writeValue(e){this.value=e}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-slider"]],inputs:{theme:"theme",min:"min",max:"max",step:"step",value:"value",label:"label"},outputs:{blurred:"blurred",mouseUp:"mouseUp"},features:[i.Cb([{provide:a.p,useExisting:Object(i.W)(()=>e),multi:!0}])],decls:5,vars:16,consts:[[1,"slider"],[1,"slider__range"],["type","range",1,"range",3,"ngModel","min","max","step","disabled","ngModelChange","dblclick","mouseup"],[1,"slider__input"],["type","number",1,"input",3,"ngModel","min","max","step","disabled","ngModelChange","blur"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Vb(1,"div",1),i.Vb(2,"input",2),i.cc("ngModelChange",(function(e){return t.value=e}))("dblclick",(function(){return t.handleRangeDoubleClick()}))("mouseup",(function(){return t.handleMouseUp()})),i.Ub(),i.Ub(),i.Vb(3,"div",3),i.Vb(4,"input",4),i.cc("ngModelChange",(function(e){return t.value=e}))("blur",(function(){return t.handleBlur()})),i.Ub(),i.Ub(),i.Ub()),2&e&&(i.Db(2),i.Hb("light","light"===t.theme)("dark","dark"===t.theme),i.mc("ngModel",t.value)("min",t.min)("max",t.max)("step",t.step)("disabled",t.disabled),i.Eb("aria-label",t.label),i.Db(2),i.mc("ngModel",t.value)("min",t.min)("max",t.max)("step",t.step)("disabled",t.disabled),i.Eb("aria-label",t.label))},directives:[a.y,a.c,a.r,a.u,a.w],styles:[".slider[_ngcontent-%COMP%]{align-items:center;display:flex}.slider__range[_ngcontent-%COMP%]{flex:1 1 100%}.slider__input[_ngcontent-%COMP%]{flex:0 0 80px;margin-left:8px}"]}),e})()},"RX1/":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(){this.version=4,this.groupInviteMode=0,this.groupCodeMode=0}}},"Rc+H":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("ofXK"),a=n("AcyG"),s=n("FFWI"),o=n("3Pt+"),r=n("+pSP"),c=n("fXoL");let l=(()=>{class e{}return e.\u0275mod=c.Nb({type:e}),e.\u0275inj=c.Mb({factory:function(t){return new(t||e)},imports:[[a.d.forFeature([s.b]),i.c,r.a,o.z]]}),e})()},Ryms:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.XSmall=0]="XSmall",e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Large=3]="Large",e[e.XLarge=4]="XLarge",e}({})},"S+jl":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),a=n("Ow1N"),s=n("fXoL");let o=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a]]}),e})()},"S/GR":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("e0fF"),a=n("b36G"),s=n("LvDl"),o=n("aqTE"),r=n("nS47"),c=n("f5j2"),l=n("AcyG"),p=n("GMXD"),u=n("0Yvn"),d=n("7u76"),g=n("gQBz"),h=n("rGz1"),b=n("FFWI"),m=n("Vrox"),f=n("fXoL");class y{constructor(e){this.shown="majorityWins",this.selected="majorityWins",this.pickable="majorityWins",e.forEach(e=>{this[e]="majorityWins"})}}let v=(()=>{class e{constructor(e,t,n){this.store=e,this.labelService=t,this.graphService=n}getMinimumGraphSync(e,t,n){const a=Human.scene.colorRecipes.getRecipes(),o=Object.keys(new i.d(a)),l=function(e,t,n){const i={},a={};return r.a.depthFirst(e,s=>{a[s]=r.a.isRoot(e,s)?Object.assign(Object.assign({},r.a.getState(e,s,n)),t[s]||{}):Object.assign(Object.assign({},a[e.predecessors[s]]),t[s]||{}),r.a.isLeaf(e,s)&&(i[s]=a[s])}),i}(e,t,o),p=function(e,t,n){const i=Object.keys(t),a=c.a.getInitialVoterState(n,i),o=c.a.getInitialElectionDepth(n,e),r=Object(s.range)(o,-1).reduce((n,i)=>{const a=c.a.getEligibleElections(e,Object.keys(n.remainingVoters),i),o=c.a.getElectionResults(e,n.remainingVoters,a,t),r=function(e){return e.reduce((e,t)=>{const n=Object.keys(t).map(e=>function(e,t,n,i){const a=i.reduce((t,i)=>(t[i]={[e]:!n},t),{});return a[t]={[e]:n},a}(e,t[e].id,t[e].result,t[e].dissenters)).reduce((e,t)=>Object(s.merge)(e,t),{});return Object.keys(n).forEach(t=>{e[t]=n[t]}),e},{})}(o.results);return Object.keys(r).forEach(e=>{n.syncGraph[e]=r[e]}),n.remainingVoters=o.remainingVoters,n},{syncGraph:{},remainingVoters:a}).syncGraph;return function(e,t,n,i){const a=t.reduce((t,a)=>{const s=e[a],o=e[i.predecessors[a]];for(const e of n)s[e]===o[e]&&t.push({successorId:a,prop:e});return t},[]);for(const s of a)delete e[s.successorId][s.prop],0===Object.keys(e[s.successorId]).length&&delete e[s.successorId];return e}(r,Object.keys(r).filter(t=>!e.roots[t]&&!!e.successors[t]),i,e)}(e,JSON.parse(JSON.stringify(new y(a))),l);Object.entries(t).forEach(([e,t])=>{const n=Object(s.omit)(t,o);Object(s.isEmpty)(n)||(p[e]=Object.assign(Object.assign({},p[e]||{}),n))});const u=new i.c;return Object.entries(p).forEach(([e,t])=>{u[this.switchNamespace(e,n)]=t},this),u}convertGraphSync(e){const t={},n={},i={},a={};return Object.entries(e).forEach(([e,s])=>{Object.entries(s).forEach(([s,o])=>{"shown"===s?t[e]=o:"selected"===s?n[e]=o:"pickable"===s?i[e]=!o:a[e]=Object.assign(Object.assign({},a[e]||{}),{[s]:o})},this)},this),{showObjects:t,selectObjects:n,pickThroughObjects:i,synchronization:a}}switchNamespace(e,t){return t[e]||e}serializeProperties(e){const t=Object.assign({},e.properties),n=Human.properties.properties["annotations.layout.type"];return"draggable"!==n&&(t["annotations.layout.type"]=n),t}serializeHotspots(e,t){let n=[...e.hotspots],i={};return t.filter(t=>t.chapterId===e.id).forEach(e=>{const t=this.labelService.serializeLabel(e,n.length);n=[...n,...t.hotspots],i=Object.assign(Object.assign({},i),t.data)}),{customData:i,hotspots:n}}serializeMedia(e){return e.media?Object.entries(e.media).reduce((e,[t,n])=>(e[t]=Object.assign({},n.data),e),{}):null}serializeBackground(e){return e?Object(a.classToClass)(e):{}}serializeUI(e,t){return Object(s.isEmpty)(t)?{play:{count:1}}:t}calcMinimumPaintState(e,t){return Object.keys(e.roots).reduce((n,i)=>Object.assign(Object.assign({},n),function n(i,a=!0){const o=(e.successors[i]||[]).reduce((e,a)=>{const o=!Object(s.isEqual)(t[i],t[a]);return Object.assign(Object.assign({},e),n(a,o))},{});return a?Object.assign({[i]:t[i]},o):o}(i)),{})}serializeVisibilityLayers(e,t){const n=Object.assign({},e);return Array.isArray(e.layers)&&(n.layers=e.layers.map(e=>Object.assign(Object.assign({},e),{objectIds:e.objectIds.filter(e=>Object.prototype.hasOwnProperty.call(t.nodes,e))})).filter(e=>e.objectIds.length>0)),n}serializeTimelineMap(e){return e?e.map(e=>{const t=Object(s.cloneDeep)(e);return delete t.id,t}):[]}serializeChapter(e,t,n,i,a){var o,r;const c=this.serializeHotspots(t,i),l=this.store.selectSnapshot(h.a.particleSystemsForChapter(t.id)),d=Object(s.pickBy)(t.customData,(e,t)=>!t.startsWith("errand")),f=Object.assign(Object.assign(Object.assign({},d),c.customData),{particleSystems:l.map(e=>e.id)}),y=this.store.selectSnapshot(b.b.getQuizQuestionsByChapter(t.id)).map(e=>{const t=Object.assign({},e);return delete t.chapterId,t}),v=a[t.id],O=this.store.selectSnapshot(m.a.getRegisteredThumbnails),S=(null===(o=O.get(v))||void 0===o?void 0:o.urls)||(null===(r=O.get(t.id))||void 0===r?void 0:r.urls)||null,x={id:v,displayName:t.info.displayName,description:t.info.description,[t.camera.action]:t.camera.location,cameraRotationCenter:t.camera.rotationCenter,background:this.serializeBackground(t.background),hotspots:c.hotspots,clippingPlanes:{clips:t.clippingPlanes.clips,boundary:t.clippingPlanes.boundary},ui:this.serializeUI(t,t.ui),media:this.serializeMedia(t),graph:t.graph||{},timelineMap:this.serializeTimelineMap(t.timelineMap),customData:f,viewModes:t.viewModes,lights:t.lights,recipes:t.recipes||{},transparencyMode:t.transparencyMode||"",fallbackTransparency:t.fallbackTransparency||"",properties:this.serializeProperties(t),effects:t.effects||{},options:t.options,transitions:t.transitions,environment:t.environment||{},legend:t.legend||[],visibilityLayers:this.serializeVisibilityLayers(t.visibilityLayers.src,e),colorRecipeObjects:t.colorRecipeObjects,contentBlocks:t.contentBlocks||[],thumbnails:S,quizQuestions:y},C=this.store.selectSnapshot(p.a.getAllNodeState)[t.id],w=Object.keys(C).reduce((n,i)=>{const a=C[i],s=a.shownSetByTween?Object(g.b)(e,i,t.showObjects)||Object(g.c)(e,i,t.showObjects):a.shown;return n.boolState[i]={shown:s,pickable:a.pickable},n.paintState[i]=u.a.toEngine(a.paint),n},{boolState:{},paintState:{}}),j=this.getMinimumGraphSync(e,w.boolState,n);return Object.entries(this.convertGraphSync(j)).forEach(([e,t])=>{x[e]=t}),x.synchronization=this.calcMinimumPaintState(e,w.paintState),x}}return e.\u0275fac=function(t){return new(t||e)(f.Zb(l.h),f.Zb(o.a),f.Zb(d.a))},e.\u0275prov=f.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},S6v9:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("ofXK"),a=n("AcyG"),s=n("QtmD"),o=n("3Pt+"),r=n("PCNd"),c=n("vvyD"),l=n("tyNb"),p=n("hQIT"),u=n("Wdmj"),d=n("fXoL");let g=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[a.d.forFeature([s.a]),i.c,c.a,o.z,r.a,l.i,p.a,u.d]]}),e})()},"SJ0+":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));var i=function(e){return e[e.LeftClip=0]="LeftClip",e[e.RightClip=1]="RightClip",e[e.BottomClip=2]="BottomClip",e[e.TopClip=3]="TopClip",e[e.FrontClip=4]="FrontClip",e[e.BackClip=5]="BackClip",e}({});const a={left:i.LeftClip,right:i.RightClip,bottom:i.BottomClip,top:i.TopClip,front:i.FrontClip,back:i.BackClip},s={0:"left",1:"right",2:"bottom",3:"top",4:"front",5:"back"}},SxJt:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Success="success",e.Fail="fail",e}({})},TATr:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"r",(function(){return a})),n.d(t,"l",(function(){return s})),n.d(t,"o",(function(){return o})),n.d(t,"p",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"s",(function(){return p})),n.d(t,"t",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return g})),n.d(t,"e",(function(){return h})),n.d(t,"j",(function(){return b})),n.d(t,"k",(function(){return m})),n.d(t,"i",(function(){return f})),n.d(t,"n",(function(){return y})),n.d(t,"q",(function(){return v})),n.d(t,"c",(function(){return O})),n.d(t,"m",(function(){return S})),n.d(t,"a",(function(){return x}));let i=(()=>{class e{constructor(e){this.id=e}}return e.type="[Engine Camera] Clear Camera",e})(),a=(()=>{class e{constructor(e,t){this.id=e,this.camera=t}}return e.type="[Engine Camera] Store Camera",e})(),s=(()=>{class e{constructor(e,t=!0,n,i){this.camera=e,this.animate=t,this.animationDuration=n,this.rotationCenter=i}}return e.type="[Engine Camera] Set Camera",e})(),o=(()=>{class e{constructor(){}}return e.type="[Engine Camera] Set Camera Success",e})(),r=(()=>{class e{constructor(e){this.enabled=e}}return e.type="[Engine Camera] Set Chapter Camera Enabled",e})(),c=(()=>{class e{constructor(e){this.cameraMotion=e}}return e.type="[Engine Camera] Move Camera",e})(),l=(()=>{class e{constructor(){}}return e.type="[Engine Camera] Reset Camera",e})(),p=(()=>{class e{constructor(e){this.value=e}}return e.type="[Engine Camera] Zoom Camera",e})(),u=(()=>{class e{constructor(e){this.value=e}}return e.type="[Engine Camera] Zoom Camera Static",e})(),d=(()=>{class e{constructor(e){this.value=e}}return e.type="[Engine Camera] Pan Camera X",e})(),g=(()=>{class e{constructor(e){this.value=e}}return e.type="[Engine Camera] Pan Camera Y",e})(),h=(()=>{class e{constructor(e,t,n){this.x=e,this.y=t,this.z=n}}return e.type="[Engine Camera] Pan Camera Static",e})(),b=(()=>{class e{constructor(e){this.value=e}}return e.type="[Engine Camera] Rotate Camera X",e})(),m=(()=>{class e{constructor(e){this.value=e}}return e.type="[Engine Camera] Rotate Camera Y",e})(),f=(()=>{class e{constructor(e,t){this.x=e,this.y=t}}return e.type="[Engine Camera] Rotate Camera Static",e})(),y=(()=>{class e{constructor(e){this.mode=e}}return e.type="[Engine Camera] Set Camera Mode",e})(),v=(()=>{class e{constructor(e){this.zoomed=e}}return e.type="[Engine Camera] Set Zoomed",e})(),O=(()=>{class e{constructor(e){this.lock=e}}return e.type="[Engine Camera] Lock camera",e})(),S=(()=>{class e{constructor(e){this.camera=e}}return e.type="[Engine Camera] Set Camera Fly To",e})(),x=(()=>{class e{constructor(e){this.patches=e}}return e.type="[Engine Camera] Patch Camera State",e})()},TEF2:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var i=n("AcyG");class a{}var s,o=n("lz5t"),r=n("odcc"),c=n("nYR2"),l=n("vkgz"),p=n("pLZG"),u=n("5+tZ"),d=n("qXBG"),g=n("AytR"),h=n("wSC8"),b=n("Kn5L"),m=n("LvDl"),f=n("ECVi"),y=n("k+hL"),v=n("kTA6"),O=n("fXoL"),S=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},x=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const C={buying:!1,updating:!1,cancelling:!1,checkingCode:!1,plans:[],selectedPlan:void 0};let w=(()=>{let e=s=class{constructor(e,t,n,i){this.authService=e,this.subscriptionService=t,this.pendoService=n,this.store=i}static getBuying(e){return e.buying}static getUpdating(e){return e.updating}static getCancelling(e){return e.cancelling}static getSubscription(e,t){return Object(m.get)(t,"userProfile.subscription")}static getPlans(e){return e.plans}static getSelectedPlan(e){return e.selectedPlan}static getCheckingCode(e){return e.checkingCode}static isFreeTrial(e,t){return"Free Trial"===Object(m.get)(t,"userProfile.subscription.subscription_type")}static isCanceled(e,t){return"canceled"===Object(m.get)(t,"userProfile.subscription.subscription_status")}resetSubscriptionState(e,t){e.setState(C)}getPremiumPlans(e,t){this.subscriptionService.getBraintreePlans().subscribe(t=>{e.dispatch(new r.l(t))},t=>{e.dispatch(new r.k(t))})}getPremiumPlansSuccess(e,{plans:t}){e.patchState({plans:t})}setPremiumPlan(e,{plan:t}){e.patchState({selectedPlan:t})}buySubscription(e,{request:t}){e.patchState({buying:!0}),g.a.deploy===h.a.Local?this.subscriptionService.buyProfessionalSubscription(t).pipe(Object(c.a)(()=>e.patchState({buying:!1}))).subscribe(()=>{e.dispatch(new r.c(t))},t=>{e.dispatch(new r.b(t))}):this.authService.isHuman("subscription_checkout").pipe(Object(l.a)(t=>{t.isHuman||e.dispatch(new b.sb)}),Object(p.a)(e=>e.isHuman),Object(u.a)(()=>this.subscriptionService.buyProfessionalSubscription(t)),Object(c.a)(()=>e.patchState({buying:!1}))).subscribe(()=>{e.dispatch(new r.c(t))},t=>{e.dispatch(new r.b(t))})}buySubscriptionSuccess(e,{}){const t=this.store.selectSnapshot(s.isFreeTrial);this.pendoService.track("Account Upgrade - "+(t?"Free Trial to Premium Individual":"Free Individual to Premium Individual"))}updateSubscription(e,{request:t}){e.patchState({updating:!0}),this.subscriptionService.updateProfessionalSubscription(t).pipe(Object(c.a)(()=>e.patchState({updating:!1}))).subscribe(()=>{e.dispatch(new r.r)},t=>{e.dispatch(new r.q(t))})}cancelSubscription(e,t){e.patchState({cancelling:!0}),this.subscriptionService.cancelSubscription().pipe(Object(c.a)(()=>e.patchState({cancelling:!1}))).subscribe(()=>{e.dispatch(new r.f)},t=>{e.dispatch(new r.e(t))})}checkPromoCode(e,{planId:t,code:n}){e.patchState({checkingCode:!0}),this.subscriptionService.getBraintreePlan(t,n).pipe(Object(c.a)(()=>e.patchState({checkingCode:!1}))).subscribe(t=>{e.dispatch(new r.i(n,t))},t=>{e.dispatch(new r.h(t))})}checkPromoCodeSuccess(e,{plan:t}){e.patchState({selectedPlan:t})}removePromoCode(e,t){const{plans:n,selectedPlan:i}=e.getState();if(!Object(m.isNil)(i)){const t=i.plan_id;e.patchState({selectedPlan:n.find(e=>e.plan_id===t)})}}ngxsOnInit(e){}};return e.\u0275fac=function(t){return new(t||e)(O.Zb(d.a),O.Zb(o.a),O.Zb(v.b),O.Zb(i.h))},e.\u0275prov=O.Lb({token:e,factory:e.\u0275fac}),S([Object(i.a)(r.n),x("design:type",Function),x("design:paramtypes",[Object,r.n]),x("design:returntype",void 0)],e.prototype,"resetSubscriptionState",null),S([Object(i.a)(r.j),x("design:type",Function),x("design:paramtypes",[Object,r.j]),x("design:returntype",void 0)],e.prototype,"getPremiumPlans",null),S([Object(i.a)(r.l),x("design:type",Function),x("design:paramtypes",[Object,r.l]),x("design:returntype",void 0)],e.prototype,"getPremiumPlansSuccess",null),S([Object(i.a)(r.o),x("design:type",Function),x("design:paramtypes",[Object,r.o]),x("design:returntype",void 0)],e.prototype,"setPremiumPlan",null),S([Object(i.a)(r.a),x("design:type",Function),x("design:paramtypes",[Object,r.a]),x("design:returntype",void 0)],e.prototype,"buySubscription",null),S([Object(i.a)(r.c),x("design:type",Function),x("design:paramtypes",[Object,r.c]),x("design:returntype",void 0)],e.prototype,"buySubscriptionSuccess",null),S([Object(i.a)(r.p),x("design:type",Function),x("design:paramtypes",[Object,r.p]),x("design:returntype",void 0)],e.prototype,"updateSubscription",null),S([Object(i.a)(r.d),x("design:type",Function),x("design:paramtypes",[Object,r.d]),x("design:returntype",void 0)],e.prototype,"cancelSubscription",null),S([Object(i.a)(r.g),x("design:type",Function),x("design:paramtypes",[Object,r.g]),x("design:returntype",void 0)],e.prototype,"checkPromoCode",null),S([Object(i.a)(r.i),x("design:type",Function),x("design:paramtypes",[Object,r.i]),x("design:returntype",void 0)],e.prototype,"checkPromoCodeSuccess",null),S([Object(i.a)(r.m),x("design:type",Function),x("design:paramtypes",[Object,r.m]),x("design:returntype",void 0)],e.prototype,"removePromoCode",null),S([Object(i.f)(),x("design:type",Function),x("design:paramtypes",[a]),x("design:returntype",void 0)],e,"getBuying",null),S([Object(i.f)(),x("design:type",Function),x("design:paramtypes",[a]),x("design:returntype",void 0)],e,"getUpdating",null),S([Object(i.f)(),x("design:type",Function),x("design:paramtypes",[a]),x("design:returntype",void 0)],e,"getCancelling",null),S([Object(i.f)([f.a]),x("design:type",Function),x("design:paramtypes",[a,y.a]),x("design:returntype",void 0)],e,"getSubscription",null),S([Object(i.f)(),x("design:type",Function),x("design:paramtypes",[a]),x("design:returntype",void 0)],e,"getPlans",null),S([Object(i.f)(),x("design:type",Function),x("design:paramtypes",[a]),x("design:returntype",void 0)],e,"getSelectedPlan",null),S([Object(i.f)(),x("design:type",Function),x("design:paramtypes",[a]),x("design:returntype",void 0)],e,"getCheckingCode",null),S([Object(i.f)([f.a]),x("design:type",Function),x("design:paramtypes",[a,y.a]),x("design:returntype",void 0)],e,"isFreeTrial",null),S([Object(i.f)([f.a]),x("design:type",Function),x("design:paramtypes",[a,y.a]),x("design:returntype",void 0)],e,"isCanceled",null),e=s=S([Object(i.g)({name:"subscription",defaults:C})],e),e})()},TWoc:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("HlzF"),a=n("fXoL");const s=new RegExp("^/media/audio/(.*)/.*$");let o=(()=>{class e{constructor(){this.audioPlayers=new Map}createAudioUploadEvent(e){return{type:"uploadFile",url:"/ws/media/audio/upload",method:"POST",file:e}}getAudioClips(e){return Object.values(e).filter(e=>"audio"===e.data.streamType)}createAudioClip(e,t,n){const i=Human.timeline.branchTimelines[e.id],a=this.getAudioUUID(t);return[a,{data:{clipId:a,streamType:"audio",fullUrl:t,time1:i.timeRange.firstTime,time2:i.timeRange.lastTime,lang:n}}]}getAudioSrc(e){return e.match("/media/audio")||(e="/content/states/"+e),e}getAudioPlayer(e){return this.audioPlayers.get(e)}addAudioPlayer(e){this.removeAudioPlayer(e),e=this.getAudioSrc(e);const t=new i.Howl({src:[e]});return this.audioPlayers.set(e,t),t}removeAudioPlayer(e){const t=this.audioPlayers.get(e);t&&(t.unload(),this.audioPlayers.delete(e))}stopAudio(){this.audioPlayers.forEach(e=>{e.stop()})}getAudioUUID(e){return e.match(s)[1]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},ThaW:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("ZR5G");function a(e){return e.split("/").length>1?i.a.Module:i.a.Bookmark}},"Tx//":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("ofXK"),a=n("tyNb"),s=n("AcyG"),o=n("CpGW"),r=n("vvyD"),c=n("PCNd"),l=n("INTG"),p=n("3Pt+"),u=n("izPL"),d=n("S6v9"),g=n("3ros"),h=n("ejx4"),b=n("fXoL");let m=(()=>{class e{}return e.\u0275mod=b.Nb({type:e}),e.\u0275inj=b.Mb({factory:function(t){return new(t||e)},imports:[[c.a,r.a,i.c,a.i,u.a,l.a,p.z,d.a,g.a,h.a,s.d.forFeature([o.a])]]}),e})()},UEjg:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("ufUH");!function(e){class t{constructor(e){this.canHover=e}}t.type="[View] Set Can Hover",e.SetCanHover=t;class n{constructor(e){this.canTouch=e}}n.type="[View] Set Can Touch",e.SetCanTouch=n;class i{constructor(e){this.canFullscreen=e}}i.type="[View] Set Can Fullscreen",e.SetCanFullscreen=i;class s{constructor(e){this.ui=e}}s.type="[View] Set UI",e.SetUI=s;class o{constructor(e){this.ui=e}}o.type="[View] Set Initial UI",e.SetInitialUI=o;class r{constructor(e){this.enabled=e}}r.type="[View] Set Input Enabled",e.SetInputEnabled=r;class c{constructor(e){this.mode=e}}c.type="[View] Set Search Display Mode",e.SetSearchDisplayMode=c;class l{constructor(e){this.active=e}}l.type="[View] Toggle Presentation",e.TogglePresentation=l;class p{constructor(e){this.interactType=e}}p.type="[View] Set Interact Type",e.SetInteractType=p;class u{constructor(e){this.onDemand=e}}u.type="[View] Set On Demand",e.SetOnDemand=u;class d{constructor(e){this.layout=e}}d.type="[View] Set Layout",e.SetLayout=d;class g{constructor(e=a.a.Basics){this.tab=e}}g.type="[View] Toggle Help Tab",e.ToggleHelpTab=g;class h{constructor(e){this.inputMode=e}}h.type="[View] Set Input Mode",e.SetInputMode=h;class b{constructor(e){this.tutorial=e}}b.type="[View] Set Tutorial",e.SetTutorial=b;class m{constructor(e){this.intro=e}}m.type="[View] Start Tutorial",e.StartTutorial=m;class f{constructor(e){this.seen=e}}f.type="[View] Tutorial Seen",e.TutorialSeen=f;class y{constructor(){}}y.type="[View] Tutorial Next",e.TutorialNext=y;class v{constructor(){}}v.type="[View] Tutorial Previous",e.TutorialPrevious=v;class O{constructor(e){this.show=e}}O.type="[View] Toggle Node Info",e.ToggleNodeInfo=O;class S{constructor(e){this.lang=e}}S.type="[View] Set View Language",e.SetViewLanguage=S;class x{constructor(e){this.fallback=e}}x.type="[View] Set Node Info Config",e.SetNodeInfoConfig=x;class C{constructor(e){this.enabled=e}}C.type="[View] Set multi pick mode enabled",e.SetMultiPickModeEnabled=C;class w{constructor(e){this.labelsBreakpoint=e}}w.type="[View] Set Label Breakpoint",e.SetLabelBreakpoint=w;class j{constructor(e){this.usePrintImage=e}}j.type="[View] Set Use Print Image",e.SetUsePrintImage=j;class k{constructor(e){this.windows=e}}k.type="[View] Set Windows",e.SetWindows=k;class P{constructor(e){this.window=e}}P.type="[View] Open Window",e.OpenWindow=P;class _{constructor(e){this.window=e}}_.type="[View] Close Window",e.CloseWindow=_;class M{constructor(e,t){this.window=e,this.show=t}}M.type="[View] Toggle Window",e.ToggleWindow=M;class I{constructor(e){this.open=e}}I.type="[View] Toggle Menu",e.ToggleMenu=I;class T{constructor(e){this.enabled=e}}T.type="[View] Whiteboard Enabled",e.SetWhiteboardEnabled=T;class U{constructor(e){this.brushSize=e}}U.type="[View] Whiteboard Brush Size",e.SetWhiteboardBrushSize=U;class L{constructor(e){this.brushColor=e}}L.type="[View] Whiteboard Brush Color",e.SetWhiteboardBrushColor=L;class z{constructor(e){this.size=e}}z.type="[View] Whiteboard Text Size",e.SetWhiteboardTextSize=z;class A{constructor(e){this.eraserSize=e}}A.type="[View] Whiteboard Eraser Size",e.SetWhiteboardEraserSize=A;class F{constructor(e){this.mode=e}}F.type="[View] Whiteboard Annotate Mode",e.SetWhiteboardAnnotateMode=F;class D{constructor(e){this.hasPaint=e}}D.type="[View] Whiteboard Has Paint",e.SetWhiteboardHasPaint=D;class E{constructor(e){this.hasText=e}}E.type="[View] Whiteboard Has Text",e.SetWhiteboardHasText=E;class N{constructor(e,t){this.showSpinner=e,this.label=t}}N.type="[View] Show Scrim",e.ShowScrim=N;class R{constructor(){}}R.type="[View] Hide Scrim",e.HideScrim=R}(i||(i={}))},UdTj:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n("fXoL"),a=n("3Pt+"),s=n("ofXK"),o=n("PmOP"),r=n("0njA"),c=n("bSwM"),l=n("lR5k");function p(e,t){if(1&e&&(i.Qb(0,"span",10),i.hc(1,"markdown")),2&e){const e=i.gc();i.mc("innerHTML",i.ic(1,1,e.label),i.Dc)}}function u(e,t){1&e&&i.kc(0,3)}const d=function(e,t){return{"rotate-90":e,"rotate-0":t}};function g(e,t){if(1&e&&(i.Vb(0,"div",14),i.Qb(1,"app-icon",15),i.Ub()),2&e){const e=i.gc(2);i.mc("ngClass",i.qc(1,d,e.open,!e.open))}}function h(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",16),i.Vb(1,"mat-checkbox",17),i.cc("change",(function(t){return i.Cc(e),i.gc(2).open=t.checked})),i.Ub(),i.Ub()}if(2&e){const e=i.gc(2);i.Db(1),i.mc("disabled",e.disabled)("checked",e.open)}}function b(e,t){if(1&e&&(i.Tb(0,11),i.Nc(1,g,2,4,"div",12),i.Nc(2,h,2,2,"div",13),i.Sb()),2&e){const e=i.gc();i.mc("ngSwitch",e.toggleType),i.Db(1),i.mc("ngSwitchCase","arrow"),i.Db(1),i.mc("ngSwitchCase","checkbox")}}function m(e,t){if(1&e&&(i.Vb(0,"div",18),i.Pc(1),i.Ub()),2&e){const e=i.gc();i.Db(1),i.Rc(" ",e.hint," ")}}const f=[[["","panel-prefix",""]],[["","panel-actions",""]],"*",[["","panel-label",""]]],y=function(e,t,n,i,a,s,o){return{"panel--static":e,"panel--disabled":t,"panel--open":n,"panel--closed":i,"panel--compact":a,"panel--no-padding":s,"panel--inactive":o}},v=["[panel-prefix]","[panel-actions]","*","[panel-label]"];let O=(()=>{class e{constructor(e){this.changeRef=e,this.toggleType="none",this.toggleable=!0,this.isCompact=!1,this.noPadding=!1,this.active=!0,this.opened=new i.p,this.disabled=!1,this.onChange=()=>{},this.onTouched=()=>{},this.propagateChange=e=>{}}get open(){return this._open}set open(e){e!==this.open&&(this._open=e,this.value=e)}get value(){return this._value}set value(e){e!==this.value&&(this._value=e,this.open=e,this.propagateChange(this.value),this.changeRef.markForCheck())}ngOnInit(){}handleClickHeader(){"none"!==this.toggleType&&!this.disabled&&this.toggleable&&(this.open=!this.open,this.opened.emit(this.open))}writeValue(e){this.value=e}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-panel"]],inputs:{label:"label",hint:"hint",open:"open",value:"value",toggleType:"toggleType",toggleable:"toggleable",dataTestAttributeVal:"dataTestAttributeVal",isCompact:"isCompact",noPadding:"noPadding",active:"active"},outputs:{opened:"opened"},features:[i.Cb([{provide:a.p,useExisting:Object(i.W)(()=>e),multi:!0}])],ngContentSelectors:v,decls:14,vars:13,consts:[[1,"panel",3,"ngClass"],[1,"panel__header",3,"click"],[1,"panel__prefix"],[1,"panel__label"],["class","html",3,"innerHTML",4,"ngIf","ngIfElse"],["labelContent",""],["appEventFence","",1,"panel__actions"],[3,"ngSwitch",4,"ngIf"],["class","panel__hint text-11",4,"ngIf"],[1,"panel__body"],[1,"html",3,"innerHTML"],[3,"ngSwitch"],["class","panel__toggle panel__toggle--arrow rotate--animate",3,"ngClass",4,"ngSwitchCase"],["appEventFence","","class","panel__toggle panel__toggle--checkbox",4,"ngSwitchCase"],[1,"panel__toggle","panel__toggle--arrow","rotate--animate",3,"ngClass"],["icon","angle-right"],["appEventFence","",1,"panel__toggle","panel__toggle--checkbox"],[3,"disabled","checked","change"],[1,"panel__hint","text-11"]],template:function(e,t){if(1&e&&(i.lc(f),i.Vb(0,"div",0),i.Vb(1,"div",1),i.cc("click",(function(){return t.handleClickHeader()})),i.Vb(2,"div",2),i.kc(3),i.Ub(),i.Vb(4,"div",3),i.Nc(5,p,2,3,"span",4),i.Nc(6,u,1,0,"ng-template",null,5,i.Oc),i.Ub(),i.Vb(8,"div",6),i.kc(9,1),i.Ub(),i.Nc(10,b,3,3,"ng-container",7),i.Ub(),i.Nc(11,m,2,1,"div",8),i.Vb(12,"div",9),i.kc(13,2),i.Ub(),i.Ub()),2&e){const e=i.yc(7);i.mc("ngClass",i.vc(5,y,"none"===t.toggleType,t.disabled,t.open,!1===t.open,t.isCompact,t.noPadding,!t.active)),i.Db(5),i.mc("ngIf",t.label)("ngIfElse",e),i.Db(5),i.mc("ngIf","none"!==t.toggleType),i.Db(1),i.mc("ngIf",t.hint&&!t.open)}},directives:[s.m,s.p,o.a,s.r,s.s,r.a,c.a],pipes:[l.b],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.panel[_ngcontent-%COMP%]{border-top:1px solid #1c2a3f}.theme-light[_nghost-%COMP%]   .panel[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{border-top:1px solid #eaeff5}.panel--static[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%]:hover{cursor:default}.theme-light[_nghost-%COMP%]   .panel--open[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel--open[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%]{background-color:#fff}.panel--open[_ngcontent-%COMP%]   .panel__label[_ngcontent-%COMP%]{color:#fff}.theme-light[_nghost-%COMP%]   .panel--open[_ngcontent-%COMP%]   .panel__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel--open[_ngcontent-%COMP%]   .panel__label[_ngcontent-%COMP%]{color:#101823}.panel--open[_ngcontent-%COMP%]   .panel__body[_ngcontent-%COMP%]{display:block}.panel--closed[_ngcontent-%COMP%]   .panel__body[_ngcontent-%COMP%]{display:none}.panel--compact[_ngcontent-%COMP%]   .panel__body[_ngcontent-%COMP%]{padding:4px 8px 12px}.panel--compact[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%]{padding:8px}.panel--compact[_ngcontent-%COMP%]   .panel__hint[_ngcontent-%COMP%]{padding:0 8px 4px}.panel--no-padding[_ngcontent-%COMP%]   .panel__body[_ngcontent-%COMP%], .panel--no-padding[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%], .panel--no-padding[_ngcontent-%COMP%]   .panel__hint[_ngcontent-%COMP%]{padding:0}.panel--inactive[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%], .panel--inactive[_ngcontent-%COMP%]   .panel__label[_ngcontent-%COMP%]{color:#61779e}.panel__header[_ngcontent-%COMP%]{align-items:center;display:flex;word-break:break-word;padding:12px 16px;justify-content:space-between;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.panel__header[_ngcontent-%COMP%]:hover{cursor:pointer}.panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__label[_ngcontent-%COMP%]{color:#fff}.theme-light[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__label[_ngcontent-%COMP%]{color:#101823}.panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__actions[_ngcontent-%COMP%], .panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__toggle--arrow[_ngcontent-%COMP%]{visibility:visible}.panel__actions[_ngcontent-%COMP%]{flex:0 1 auto;white-space:nowrap;visibility:hidden}.panel__actions[_ngcontent-%COMP%] + .panel__toggle[_ngcontent-%COMP%]{margin-left:8px}.panel__label[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em;flex:1 1 auto;color:#d7e0ea;align-items:center}.theme-light[_nghost-%COMP%]   .panel__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel__label[_ngcontent-%COMP%]{color:#283853;font-weight:700}.panel__prefix[_ngcontent-%COMP%]{align-self:flex-start;flex:0 1}.panel__hint[_ngcontent-%COMP%]{padding:0 16px 8px;color:#61779e}.panel__body[_ngcontent-%COMP%]{display:block;padding:12px 12px 32px}.panel__toggle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex:0 0 16px}.panel__toggle--arrow[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0}),e})()},UsYJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("E32s");function a(e,t){if(void 0===e.activeChapterId||void 0===e.nodeState)return;const[n,a,s]=immer.produceWithPatches(e,e=>{const n=e.nodeState[e.activeChapterId],a=t.objectIds||Object.keys(n);t.patch?Object.entries(t.patch).forEach(([e,t])=>{n[e].shown=t}):a.forEach(e=>{n[e].shown=t.show,n[e].shownSetByTween=t.setByTween,t.objectIds&&(Object(i.a)(e,n,"shown",t.show),!0===t.setByTween&&Object(i.a)(e,n,"shownSetByTween",t.setByTween))})});return{finalState:immer.produce(n,e=>{e.patches=a,e.patchesForChapter[e.activeChapterId].push(...a)}),patches:a,inversePatches:s}}},V7wM:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){const t=/(\s*[\d\.]+\s*,){2,15}\s*[\d\.]+\s*/g;function n(e){for(let t=0;t<3;t++)if(parseFloat(""+e[t])>1)return!0;return!1}function i(e){const t=document.createElement("div");t.style.backgroundColor=e,document.documentElement.appendChild(t);const n=window.getComputedStyle(t).backgroundColor.replace(/\s/g,"");return window.document.documentElement.removeChild(t),n}function a(e){const t=e.slice(0,4);3===t.length&&t.push(1);for(let n=0;n<4;n++)t[n]=parseFloat(""+t[n]),t[n]<0&&(t[n]=0),t[n]>255&&(t[n]=255);return t[3]>1&&(t[3]=1),t}function s(e){let n;if(Array.isArray(e))n=a(e);else if("string"==typeof e){let s=e.match(t);s?n=a(s[0].split(",")):(s=i(e).match(t),s&&(n=a(s[0].split(","))))}return n}function o(e){const t=s(e);if(!t)throw new TypeError("Invalid color input.");const i=r(t);return{1:n(t)?i:t,255:n(t)?t:i}}function r(e){const t=n(e),i=[];for(let n=0;n<3;n++){let a=t?e[n]/255:255*e[n];a=t?Math.round(100*a)/100:Math.round(a),i.push(a)}return 4===e.length&&i.push(e[3]),i}function c(e,t=!1){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,i)=>[t,t,n,n,i,i].join("")).replace(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,(e,t,n,i)=>[t,n,i,"ff"].join(""));const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),i=parseInt(n[1],16),a=parseInt(n[2],16),s=parseInt(n[3],16),o=parseInt(n[4],16)/255;if(t){const e=p([i,a,s]);return[e[0],e[1],e[2],o]}return[i,a,s,o]}function l(e){const[t,n,i]=e;return Math.sqrt(t*t*.299+n*n*.587+i*i*.114)}function p(e){return e.map(e=>e/255)}function u(e){return e.map(e=>Math.round(255*e))}function d(e){return"#"+e.map(e=>{const t=e.toString(16);return t.length%2?"0"+t:t}).join("")}e.is255=n,e.isLight=function(e,t){return t||(t=[...e]),(l(e)+l(t))/2>140.25},e.getComputedColor=i,e.convertChannels=a,e.convert=s,e.getColor=o,e.getColors=function(e){let n=[];if("string"==typeof e){const n=e.match(t);n&&(e=n.join(",")),e=e.split(",")}if(Array.isArray(e))if(Array.isArray(e[0])&&Array.isArray(e[1]))n=e;else if(e.length<=2)n=1===e.length?e.concat(e):e;else{const t=Math.floor(e.length/2);n=e.length>4?[e.slice(0,t),e.slice(t)]:[e,e]}return n.map(e=>o(e))},e.scaleColor=r,e.hexToRgba=c,e.hexToRgb=function(e,t=!1){const n=c(e,t);return[n[0],n[1],n[2]]},e.rgbToHex=function(e,t=!1){return d(t?u(e):e)},e.rgbToHSP=l,e.rgbaToHex=function(e,t=!1){const n=e[0],i=e[1],a=e[2],s=255*e[3];return d(t?[...u([n,i,a]),s]:[n,i,a,s])},e.rgbToDecimal=p,e.rgbFromDecimal=u}(i||(i={}))},VJvM:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"p",(function(){return c})),n.d(t,"q",(function(){return l})),n.d(t,"H",(function(){return p})),n.d(t,"t",(function(){return u})),n.d(t,"G",(function(){return d})),n.d(t,"x",(function(){return g})),n.d(t,"y",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"m",(function(){return m})),n.d(t,"D",(function(){return f})),n.d(t,"B",(function(){return y})),n.d(t,"E",(function(){return v})),n.d(t,"C",(function(){return O})),n.d(t,"k",(function(){return S})),n.d(t,"F",(function(){return x})),n.d(t,"u",(function(){return C})),n.d(t,"s",(function(){return w})),n.d(t,"r",(function(){return j})),n.d(t,"n",(function(){return k})),n.d(t,"I",(function(){return P})),n.d(t,"d",(function(){return _})),n.d(t,"j",(function(){return M})),n.d(t,"o",(function(){return I})),n.d(t,"i",(function(){return T})),n.d(t,"w",(function(){return U})),n.d(t,"A",(function(){return L})),n.d(t,"v",(function(){return z})),n.d(t,"b",(function(){return A})),n.d(t,"J",(function(){return F})),n.d(t,"l",(function(){return D})),n.d(t,"z",(function(){return E}));let i=(()=>{class e{constructor(e){this.patches=e}}return e.type="[Story Chapter] Apply Patch",e})(),a=(()=>{class e{constructor(){}}return e.type="[Story Chapter] Next Chapter",e})(),s=(()=>{class e{constructor(){}}return e.type="[Story Chapter] Previous Chapter",e})(),o=(()=>{class e{constructor(){}}return e.type="[Story Chapter] First Chapter",e})(),r=(()=>{class e{constructor(){}}return e.type="[Story Chapter] Last Chapter",e})(),c=(()=>{class e{constructor(e){this.chapter=e}}return e.type="[Story Chapter] Select Chapter",e})(),l=(()=>{class e{constructor(e){this.chapterId=e}}return e.type="[Story Chapter] Select Chapter by chapter id",e})(),p=(()=>{class e{constructor(e){this.chapters=e}}return e.type="[Story Chapter] Set Chapters",e})(),u=(()=>{class e{constructor(e,t){this.chapterId=e,this.cameraAction=t}}return e.type="[Story Chapter] Set Chapter Camera Action",e})(),d=(()=>{class e{constructor(e,t){this.chapterId=e,this.ui=t}}return e.type="[Story Chapter] Set Chapter UI",e})(),g=(()=>{class e{constructor(e,t){this.chapterId=e,this.info=t}}return e.type="[Story Chapter] Set Chapter Info",e})(),h=(()=>{class e{constructor(e,t){this.chapterId=e,this.legend=t}}return e.type="[Story Chapter] Set Chapter Legend",e})(),b=(()=>{class e{constructor(e,t){this.chapterId=e,this.legend=t}}return e.type="[Story Chapter] Add To Chapter Legend",e})(),m=(()=>{class e{constructor(e,t){this.previousIndex=e,this.currentIndex=t}}return e.type="[Story Chapter] Reorder Chapters",e})(),f=(()=>{class e{constructor(e,t){this.chapterId=e,this.readyState=t}}return e.type="[Story Chapter] Set Readystate",e})(),y=(()=>{class e{constructor(e,t,n){this.chapterId=e,this.effects=t,this.properties=n}}return e.type="[Story Chapter] Set Chapter PostProcessing",e})(),v=(()=>{class e{constructor(e,t,n){this.chapterId=e,this.transition=t,this.key=n}}return e.type="[Story Chapter] Set Chapter Transitions",e})(),O=(()=>{class e{constructor(e,t){this.chapterIds=e,this.properties=t}}return e.type="[Story Chapter] Set Chapter Properties",e})(),S=(()=>{class e{constructor(e,t){this.chapterIds=e,this.properties=t}}return e.type="[Story Chapter] Remove Chapter Properties",e})(),x=(()=>{class e{constructor(e,t){this.chapterId=e,this.transparencyMode=t}}return e.type="[Story Chapter] Set Chapter Transparency Mode",e})(),C=(()=>{class e{constructor(e,t,n,i){this.chapterId=e,this.clips=t,this.enabled=n,this.record=i}}return e.type="[Story Chapter] Set Chapter Clipping Planes",e})(),w=(()=>{class e{constructor(e,t){this.chapterId=e,this.background=t}}return e.type="[Story Chapter] Set Chapter Background",e})(),j=(()=>{class e{constructor(e){this.background=e}}return e.type="[Story Chapter] Set All Chapters Background",e})(),k=(()=>{class e{constructor(){}}return e.type="[Story Chapter] Reset Selected Chapter Background",e})(),P=(()=>{class e{constructor(e){this.background=e}}return e.type="[Story Chapter] Set Selected Chapter Background",e})(),_=(()=>{class e{constructor(e,t){this.chapter=e,this.chapterId=t}}return e.type="[Story Chapter] Duplicate An Existing Chapter",e})(),M=(()=>{class e{constructor(e){this.chapter=e}}return e.type="[Story Chapter] Remove Chapter",e})(),I=(()=>{class e{constructor(){}}return e.type="[Story Chapter] Reset",e})(),T=(()=>{class e{constructor(e,t,n){this.chapterId=e,this.camera=t,this.rotationCenter=n}}return e.type="[Story Chapters] Record Camera",e})(),U=(()=>{class e{constructor(e,t,n,i){this.chapterId=e,this.index=t,this.position=n,this.record=i}}return e.type="[Story Chapters] Set the current visibility layers index and position",e})(),L=(()=>{class e{constructor(e,t){this.chapterId=e,this.media=t}}return e.type="[Story Chapters] Set the media object",e})(),z=(()=>{class e{constructor(e,t){this.chapterId=e,this.contentBlocks=t}}return e.type="[Story Chapters] Set the content blocks",e})(),A=(()=>{class e{constructor(e,t){this.chapterId=e,this.timelineMaps=t}}return e.type="[Story Chapters] Add to timelineMap array",e})(),F=(()=>{class e{constructor(e,t){this.chapterId=e,this.updates=t}}return e.type="[Story Chapters] Update timelineMap array",e})(),D=(()=>{class e{constructor(e,t){this.chapterId=e,this.timelineMapIds=t}}return e.type="[Story Chapters] Remove from timelineMap array",e})(),E=(()=>{class e{constructor(e,t){this.chapterId=e,this.lights=t}}return e.type="[Story Chapters] Set the lights",e})()},VKIe:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Admin="admin",e.Creator="creator",e.Viewer="viewer",e}({})},Vec5:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{}},Vrox:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var i=n("AcyG");class a{}var s=n("h8op"),o=n("ve2m"),r=n("ewuU"),c=n("V7wM"),l=n("zKvh"),p=n("t15c"),u=n("yG3n"),d=n("eW6i"),g=n("HDdC"),h=n("LRne"),b=n("GyhO"),m=n("11Ye"),f=n("lJxs"),y=n("5+tZ"),v=n("7wxJ"),O=n("JIr8"),S=n("aqTE"),x=n("gw9s"),C=n("fXoL");let w=(()=>{class e{constructor(e,t,n){this.engineService=e,this.labelsService=t,this.store=n}localResize(e,t){const n=Human.renderer.canvas.canvas,i=Human.renderer.canvas.annotationCanvas,a=n.parentNode,s=a.clientWidth,o=a.clientHeight;return a.width=e,a.height=t,n.width=e,n.height=t,i.width=e,i.height=t,a.style.width=e+"px",a.style.height=t+"px",Human.renderer.canvas.init(),Human.renderer.viewportDirty=!0,Human.renderer.camera.updateCanvas(),Human.renderer.postprocess.updateCanvas(),Human.renderer.draw.updateCanvas(),Human.renderer.viewportDirty=!0,Human.renderer.prepareFrame(),Human.renderer.forceRenderFrame(),[s,o]}canvasToImage(e,t="original"){const n=e.width/e.height,i=this.engineService.getCanvas();let{width:a,height:s}=i,o=.5*(i.width-a),r=0;switch(t){case"square":s>a?s=a:a=s,o=.5*(i.width-a),r=.5*(i.height-s);break;case"original":a=n*s}return new g.a(t=>{const n=e.getContext("2d");Human.renderer.forceRenderFrame(),n.drawImage(i,o,r,a,s,0,0,e.width,e.height),t.next(),t.complete()})}canvasToImageWithResize(e){const t=this.engineService.getCanvas();t.style.opacity="0",this.store.dispatch(new m.Y(!1));const[n,i]=this.localResize(e.width,e.height),a=e.getContext("2d");return new g.a(e=>{setTimeout(()=>{Human.renderer.viewportDirty=!0,Human.renderer.prepareFrame(),Human.renderer.forceRenderFrame(),a.drawImage(t,0,0,t.width,t.height),this.localResize(n,i),document.getElementById("theCanvas").style.opacity="",this.store.dispatch(new m.Y(!0)),e.next(),e.complete()},10)})}drawRadialGradient(e,t){const n=t.colors,[i,a]=t.colorStops.map(t=>((e,t,n)=>{const[i,a]=[Math.pow(t/2,2),Math.pow(n/2,2)];return e/100*Math.pow(i+a,.5)})(t,e.width,e.height)),s=e.getContext("2d"),[o,r]=[e.width/2,e.height/2],c=s.createRadialGradient(o,r,i,o,r,a);c.addColorStop(t.colorStops[0]/100,`rgba(${n.slice(0,4).join(",")})`),c.addColorStop(t.colorStops[1]/100,`rgba(${n.slice(4,8).join(",")})`),s.fillStyle=c,s.fillRect(0,0,e.width,e.height)}drawLinearGradient(e,t){const n=t.colors,i=e.getContext("2d"),[a,s]=[e.width/2,e.height/2],o=i.createLinearGradient(a,s,a,e.height);o.addColorStop(t.colorStops[0]/100,`rgba(${n.slice(0,4).join(",")})`),o.addColorStop(t.colorStops[1]/100,`rgba(${n.slice(4,8).join(",")})`),i.fillStyle=o,i.fillRect(0,0,e.width,e.height)}takeSnapshot(e,t,n,i,a,s){const{imageType:o,imageQuality:r,copyrightEnabled:c,crop:l}=s,p=document.createElement("canvas");p.width=e,p.height=t,"radial"===n.gradientType?this.drawRadialGradient(p,n):"linear"===n.gradientType&&this.drawLinearGradient(p,n);const u=this.engineService.getCanvas(),d=[],g=(p.height>u.height||p.width>u.width?this.canvasToImageWithResize(p):this.canvasToImage(p,l)).pipe(Object(f.a)(()=>p));d.push(g);const m=[],O=this.labelsService.getLabelContainer();return a&&O&&m.push(O.nativeElement),m.push(...i),d.push(...m.map(n=>(n instanceof HTMLCanvasElement?Object(h.a)(n):x.a.elementToCanvas(n,!0)).pipe(Object(y.a)(n=>x.a.fitCanvas(n,{width:e,height:t}))))),Object(b.a)(d).pipe(Object(v.a)(),Object(f.a)(e=>x.a.combineCanvasElements(e)),Object(y.a)(e=>c?this.writeLogoToCanvas(e,s):Object(h.a)(e)),Object(y.a)(e=>x.a.canvasToBlob(e,o,r)))}writeLogoToCanvas(e,t){return this.getLogoImage(t.copyrightImagePath).pipe(Object(f.a)(n=>{let{width:i,height:a}=n;const{width:s,height:o}=e;if(.1*s>i){const e=a/i;i=.1*s,a=e*i}const{xOffset:r,yOffset:c}=this.getLogoPosition(s,o,i,a,t);return e.getContext("2d").drawImage(n,r,c,i,a),e}),Object(O.a)(()=>Object(h.a)(e)))}getLogoImage(e){return new g.a(t=>{const n=new Image;n.onload=()=>{t.next(n),t.complete()},n.onerror=()=>t.error(),n.src=e})}getLogoPosition(e,t,n,i,a){const{copyrightPosition:s,copyrightOffset:o}=a;let r,c;switch(s.x){case"right":r=e-n;break;case"center":r=e/2-n/2;break;default:r=0}switch(s.y){case"bottom":c=t-i;break;case"center":c=t/2-i/2;break;default:c=0}return{xOffset:r+o.x,yOffset:c+o.y}}}return e.\u0275fac=function(t){return new(t||e)(C.Zb(d.a),C.Zb(S.a),C.Zb(i.h))},e.\u0275prov=C.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var j=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},k=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const P={imageType:l.a.JPEG,crop:"original",copyrightEnabled:!1,copyrightImagePath:"assets/images/powered-by-biodigital-color.svg",copyrightPosition:{x:"left",y:"bottom"},copyrightOffset:{x:12,y:-12},imageQuality:1},_={thumbnails:new Map};let M=(()=>{let e=class{constructor(e,t){this.snapshotService=e,this.store=t}static getRegisteredThumbnails(e){return e.thumbnails}registerChapterThumbnails(e,t){e.patchState(immer.produce(e.getState(),e=>{e.thumbnails=new Map(t.thumbnails)}))}takeChapterPicture(e,t){const{chapterId:n,includeLabels:i,includeCopyright:a,dimensions:u,imageType:d,imageQuality:g,crop:h,layers:b}=t,m=u||p.a.large,{width:f,height:y}=m,v=t.background;let O;switch(d){case l.a.PNG:O=v||o.a;break;case l.a.JPEG:default:O=v&&!r.a.isTransparent(v)?v:o.a}const S=v.colors.slice(0,3),x=c.a.isLight(S),C=Object.assign(Object.assign({},P),{crop:h,imageType:d,imageQuality:g,copyrightEnabled:a,copyrightImagePath:x?"assets/images/powered-by-biodigital-color.svg":"assets/images/powered-by-biodigital-white.svg"});setTimeout(()=>{this.snapshotService.takeSnapshot(f,y,O,b,i,C).subscribe(t=>{e.dispatch(new s.c(n,t,m))})})}takeChapterPictureSuccess(e,t){e.patchState(immer.produce(e.getState(),e=>{const n=e.thumbnails.get(t.chapterId)||new u.a;n.snapshot=URL.createObjectURL(t.blob),e.thumbnails.set(t.chapterId,n)}))}};return e.\u0275fac=function(t){return new(t||e)(C.Zb(w),C.Zb(i.h))},e.\u0275prov=C.Lb({token:e,factory:e.\u0275fac}),j([Object(i.a)(s.a),k("design:type",Function),k("design:paramtypes",[Object,s.a]),k("design:returntype",void 0)],e.prototype,"registerChapterThumbnails",null),j([Object(i.a)(s.b),k("design:type",Function),k("design:paramtypes",[Object,s.b]),k("design:returntype",void 0)],e.prototype,"takeChapterPicture",null),j([Object(i.a)(s.c),k("design:type",Function),k("design:paramtypes",[Object,s.c]),k("design:returntype",void 0)],e.prototype,"takeChapterPictureSuccess",null),j([Object(i.f)(),k("design:type",Function),k("design:paramtypes",[a]),k("design:returntype",void 0)],e,"getRegisteredThumbnails",null),e=j([Object(i.g)({name:"storyThumbnails",defaults:_})],e),e})()},Vv7R:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"n",(function(){return s})),n.d(t,"o",(function(){return o})),n.d(t,"r",(function(){return r})),n.d(t,"q",(function(){return c})),n.d(t,"p",(function(){return l})),n.d(t,"m",(function(){return p})),n.d(t,"f",(function(){return u})),n.d(t,"k",(function(){return d})),n.d(t,"g",(function(){return g})),n.d(t,"a",(function(){return h})),n.d(t,"i",(function(){return b})),n.d(t,"h",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return y})),n.d(t,"l",(function(){return v})),n.d(t,"s",(function(){return O})),n.d(t,"b",(function(){return S})),n.d(t,"j",(function(){return x}));var i=n("INTG");let a=(()=>{class e{constructor(e,t,n=i.b.lang,a=!1){this.id=e,this.type=t,this.lang=n,this.preview=a}}return e.type="[Story] Load Current Story",e})(),s=(()=>{class e{constructor(e){this.story=e}}return e.type="[Story] Replace the Story",e})(),o=(()=>{class e{constructor(e){this.id=e}}return e.type="[Story] Set the Story ID",e})(),r=(()=>{class e{constructor(e){this.displayName=e}}return e.type="[Story] Set Story Text",e})(),c=(()=>{class e{constructor(e){this.tags=e}}return e.type="[Story] Set Story Tags",e})(),l=(()=>{class e{constructor(e){this.lightLibs=e}}return e.type="[Story] Set Story Light Libs",e})(),p=(()=>{class e{constructor(e,t,n){this.id=e,this.type=t,this.reset=n}}return e.type="[Story] Set Incoming Story Id",e})(),u=(()=>{class e{constructor(){}}return e.type="[Story] Load Story Chunk",e})(),d=(()=>{class e{constructor(e){this.chapterId=e}}return e.type="[Story] Reorder Load Chunks",e})(),g=(()=>{class e{constructor(e){this.chunk=e}}return e.type="[Story] Load Story Chunk Success",e})(),h=(()=>{class e{constructor(e,t,n,i){this.id=e,this.story=t,this.type=n,this.chapterIdx=i}}return e.type="[Story] Build Story In Engine From Story Model",e})(),b=(()=>{class e{constructor(e,t,n){this.story=e,this.id=t,this.type=n}}return e.type="[Story] Load Success",e})(),m=(()=>{class e{constructor(e,t){this.id=e,this.type=t}}return e.type="[Story] Load Fail",e})(),f=(()=>{class e{constructor(e,t,n=i.b.lang){this.id=e,this.type=t,this.lang=n}}return e.type="[Story] Import",e})(),y=(()=>{class e{constructor(e,t,n){this.story=e,this.id=t,this.type=n}}return e.type="[Story] Import Success",e})(),v=(()=>{class e{constructor(){}}return e.type="[Story] Clear",e})(),O=(()=>{class e{constructor(){}}return e.type="[Story] Synchronize Chapters",e})(),S=(()=>{class e{constructor(){}}return e.type="[Story] Human Ready (SDK)",e})(),x=(()=>{class e{constructor(e){this.story=e}}return e.type="[Story] Merge Bridge Module Success",e})()},WFQG:function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return k})),n.d(t,"a",(function(){return P}));var i=n("AcyG"),a=n("UEjg"),s=n("yCjD"),o=n("mtgE"),r=n("stSV");class c{constructor(e=s.a.Hide,t=!0){this.status=e,this.enable=t}}var l,p=n("Yl/Z"),u=n("+6Fv"),d=n("cAYK"),g=n("ufUH"),h=n("nj9G"),b=n("pZol"),m=n("fnuH"),f=n("Poh+"),y=n("DTUA"),v=n("gzgB"),O=n("N2iv"),S=n("fXoL"),x=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},C=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class w{}const j={audio:new c,camera:new c(s.a.Show,!0),chapterList:new c(s.a.Show,!1),column:new c,description:new c,drawer:new class extends c{constructor(e=!1){super(),this.isExpandedInitially=e}},fullscreen:new c,help:new c,labels:new class extends c{constructor(e=!0){super(),this.shown=e}},labelInfo:new c,labelList:new c(s.a.Show,!1),loader:new class extends c{constructor(e=r.b){super(),this.template=e}},logo:new class extends c{constructor(e=!0){super(),this.isHyperLink=e}},media:new class extends c{constructor(e=o.a.Small){super(),this.template=e}},menu:new c,nodeInfo:new c(s.a.Hide,!1),pagination:new c,presenter:new c(s.a.Hide,!1),reset:new c,search:new c,quiz:new c,titleOnly:new c,toolbar:new c,tools:new c,anatomyLabels:new c,tutorial:new c(s.a.Hide,!1),internetExplorerWarning:new c,legend:new c,undo:new c,whiteboard:new c,visibilityLayers:new c,contextActions:new c,toggleLabels:new c},k={lang:"en",canFullscreen:!1,canHover:!1,canTouch:!1,drawerCoversContent:!1,fullscreenActive:!1,help:{tab:g.a.Basics},initialUI:j,inputEnabled:!0,inputMode:m.a.Mouse,interactType:u.a.Play,onDemand:!1,layout:f.a.Default,labelsBreakpoint:480,menuOpen:!1,multiPickModeEnabled:!1,openWindows:[d.a.Loader],presentationActive:!1,searchDisplayMode:O.a.Tree,nodeInfo:{show:!1,fallback:v.a.Wikipedia},tutorial:{pageSize:0,pageIndex:-1},tutorialSeen:!0,ui:j,usePrintImage:!1,whiteboard:{enabled:!1,hasPaint:!1,hasText:!1,brushSize:b.c.size,brushColor:b.d.color,textSize:b.f.size,eraserSize:b.e.size,annotateMode:h.a.Paint},scrim:{show:!1,label:""}};let P=(()=>{let e=l=class{constructor(e){this.storageService=e}static getUI(e){return e.ui}static getInitialUI(e){return e.initialUI}static getLabelsBreakpoint(e){return e.labelsBreakpoint}static getInputEnabled(e){return e.inputEnabled}static getFullscreenActive(e){return e.fullscreenActive}static getPresentationActive(e){return e.presentationActive}static getDrawerCoversContent(e){return e.drawerCoversContent}static getShowNodeInfo(e){return e.nodeInfo.show}static getNodeInfoFallback(e){return e.nodeInfo.fallback}static getViewLanguage(e){return e.lang}static getInteractType(e){return e.interactType}static getOnDemand(e){return e.onDemand}static getLayout(e){return e.layout}static getInputMode(e){return e.inputMode}static getShowHelpTab(e){return e.help.tab}static getTutorial(e){return e.tutorial}static getTutorialSeen(e){return e.tutorialSeen}static getWhiteboardEnabled(e){return e.whiteboard.enabled}static getWhiteboardBrushSize(e){return e.whiteboard.brushSize}static getWhiteboardTextSize(e){return e.whiteboard.textSize}static getWhiteboardEraserSize(e){return e.whiteboard.eraserSize}static getWhiteboardAnnotateMode(e){return e.whiteboard.annotateMode}static getWhiteboardBrushColor(e){return e.whiteboard.brushColor}static getWhiteboardHasPaint(e){return e.whiteboard.hasPaint}static getWhiteboardHasText(e){return e.whiteboard.hasText}static getCanTouch(e){return e.canTouch}static getCanHover(e){return e.canHover}static getMultiPickModeEnabled(e){return e.multiPickModeEnabled}static getSearchDisplayMode(e){return e.searchDisplayMode}static getUsePrintImage(e){return e.usePrintImage}static getOpenWindow(e){return e.openWindows.length>0?e.openWindows.sort()[0]:null}static getMenuOpen(e){return e.menuOpen}static getScrim(e){return e.scrim}static shouldWindowOpen(e){return Object(i.i)([l],t=>t.openWindows.indexOf(e)>=0)}setUI(e,t){const n=e.getState().ui;e.patchState({ui:Object.assign(Object.assign({},n),t.ui)})}setInitialUI(e,t){e.patchState({initialUI:t.ui})}setInputEnabled(e,t){e.patchState({inputEnabled:t.enabled})}setCanHover(e,t){e.patchState({canHover:t.canHover})}setCanTouch(e,t){e.patchState({canTouch:t.canTouch})}setCanFullscreen(e,t){e.patchState({canFullscreen:t.canFullscreen})}setSearchDisplayMode(e,t){e.patchState({searchDisplayMode:t.mode})}setViewLanguage(e,{lang:t}){e.patchState({lang:t})}toggleNodeInfo(e,{show:t}){e.patchState({nodeInfo:Object.assign(Object.assign({},e.getState().nodeInfo),{show:t})})}setNodeInfoConfig(e,{fallback:t}){e.patchState({nodeInfo:Object.assign(Object.assign({},e.getState().nodeInfo),{fallback:t})})}togglePresentation(e,t){e.patchState({presentationActive:t.active})}toggleHelp(e,t){e.patchState({help:{tab:t.tab}})}setLoaderType(e,t){e.patchState({interactType:t.interactType})}setOnDemand(e,t){e.patchState({onDemand:t.onDemand})}setInputMode(e,{inputMode:t}){e.patchState({inputMode:t})}SetLayout(e,t){e.patchState({layout:t.layout})}setTutorial(e,t){const n=e.getState().tutorial;e.patchState({tutorial:Object.assign(Object.assign({},n),t.tutorial)})}startTutorial(e,t){e.patchState({tutorial:Object.assign(Object.assign({},e.getState().tutorial),{pageIndex:t.intro?-1:0})}),e.dispatch(new a.a.TutorialSeen(!0))}tutorialSeen(e,t){this.storageService.setLocalItem(y.b.GettingStartedTutorial,t.seen),e.patchState({tutorialSeen:t.seen})}tutorialPrevious(e,t){const n=e.getState().tutorial,i=Math.max(n.pageIndex-1,0);e.dispatch(new a.a.SetTutorial(Object.assign(Object.assign({},n),{pageIndex:i})))}tutorialNext(e,t){const n=e.getState().tutorial,i=Math.min(n.pageIndex+1,n.pageSize-1);e.dispatch(new a.a.SetTutorial(Object.assign(Object.assign({},n),{pageIndex:i})))}setWhiteboardEnabled(e,{enabled:t}){e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{enabled:t})})}setWhiteboardBrushSize(e,{brushSize:t}){e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{brushSize:t})})}setWhiteboardTextSize(e,{size:t}){e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{textSize:t})})}setWhiteboardEraserSize(e,{eraserSize:t}){e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{eraserSize:t})})}setWhiteboardAnnotateMode(e,{mode:t}){e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{annotateMode:t})})}setWhiteboardBrushColor(e,{brushColor:t}){e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{brushColor:t})})}setWhiteboardHasPaint(e,{hasPaint:t}){e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{hasPaint:t})})}setWhiteboardHasText(e,{hasText:t}){e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{hasText:t})})}setMultiPickModeEnabled(e,t){e.patchState({multiPickModeEnabled:t.enabled})}setLabelBreakpoint(e,t){e.patchState({labelsBreakpoint:t.labelsBreakpoint})}setUsePrintImage(e,t){e.patchState({usePrintImage:t.usePrintImage})}setWindows(e,t){e.patchState({openWindows:t.windows})}openWindow(e,t){const n=e.getState().openWindows;n.indexOf(t.window)<0&&e.patchState({openWindows:[t.window,...n]})}closeWindow(e,t){let n=e.getState().openWindows;null!=t.window?n=n.filter(e=>e!==t.window):n.shift(),e.patchState({openWindows:[...n]})}toggleWindow(e,t){const n=e.getState().openWindows.indexOf(t.window)>=0;e.dispatch((null!=t.show?t.show:!n)?new a.a.OpenWindow(t.window):new a.a.CloseWindow(t.window))}toggleMenu(e,t){e.patchState({menuOpen:t.open})}showScrim(e,t){e.patchState({scrim:{show:!0,label:t.label}})}hideScrim(e,t){e.patchState({scrim:{show:!1,label:""}})}ngxsOnInit(e){p.a.onFullscreenChange().subscribe(t=>{e.patchState({fullscreenActive:p.a.isFullscreen()})}),e.patchState({tutorialSeen:this.storageService.getLocalJSON(y.b.GettingStartedTutorial)||!1})}};return e.\u0275fac=function(t){return new(t||e)(S.Zb(y.d))},e.\u0275prov=S.Lb({token:e,factory:e.\u0275fac}),x([Object(i.a)(a.a.SetUI),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetUI]),C("design:returntype",void 0)],e.prototype,"setUI",null),x([Object(i.a)(a.a.SetInitialUI),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetInitialUI]),C("design:returntype",void 0)],e.prototype,"setInitialUI",null),x([Object(i.a)(a.a.SetInputEnabled),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetInputEnabled]),C("design:returntype",void 0)],e.prototype,"setInputEnabled",null),x([Object(i.a)(a.a.SetCanHover),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetCanHover]),C("design:returntype",void 0)],e.prototype,"setCanHover",null),x([Object(i.a)(a.a.SetCanTouch),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetCanTouch]),C("design:returntype",void 0)],e.prototype,"setCanTouch",null),x([Object(i.a)(a.a.SetCanFullscreen),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetCanFullscreen]),C("design:returntype",void 0)],e.prototype,"setCanFullscreen",null),x([Object(i.a)(a.a.SetSearchDisplayMode),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetSearchDisplayMode]),C("design:returntype",void 0)],e.prototype,"setSearchDisplayMode",null),x([Object(i.a)(a.a.SetViewLanguage),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetViewLanguage]),C("design:returntype",void 0)],e.prototype,"setViewLanguage",null),x([Object(i.a)(a.a.ToggleNodeInfo),C("design:type",Function),C("design:paramtypes",[Object,a.a.ToggleNodeInfo]),C("design:returntype",void 0)],e.prototype,"toggleNodeInfo",null),x([Object(i.a)(a.a.SetNodeInfoConfig),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetNodeInfoConfig]),C("design:returntype",void 0)],e.prototype,"setNodeInfoConfig",null),x([Object(i.a)(a.a.TogglePresentation),C("design:type",Function),C("design:paramtypes",[Object,a.a.TogglePresentation]),C("design:returntype",void 0)],e.prototype,"togglePresentation",null),x([Object(i.a)(a.a.ToggleHelpTab),C("design:type",Function),C("design:paramtypes",[Object,a.a.ToggleHelpTab]),C("design:returntype",void 0)],e.prototype,"toggleHelp",null),x([Object(i.a)(a.a.SetInteractType),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetInteractType]),C("design:returntype",void 0)],e.prototype,"setLoaderType",null),x([Object(i.a)(a.a.SetOnDemand),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetOnDemand]),C("design:returntype",void 0)],e.prototype,"setOnDemand",null),x([Object(i.a)(a.a.SetInputMode),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetInputMode]),C("design:returntype",void 0)],e.prototype,"setInputMode",null),x([Object(i.a)(a.a.SetLayout),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetLayout]),C("design:returntype",void 0)],e.prototype,"SetLayout",null),x([Object(i.a)(a.a.SetTutorial),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetTutorial]),C("design:returntype",void 0)],e.prototype,"setTutorial",null),x([Object(i.a)(a.a.StartTutorial),C("design:type",Function),C("design:paramtypes",[Object,a.a.StartTutorial]),C("design:returntype",void 0)],e.prototype,"startTutorial",null),x([Object(i.a)(a.a.TutorialSeen),C("design:type",Function),C("design:paramtypes",[Object,a.a.TutorialSeen]),C("design:returntype",void 0)],e.prototype,"tutorialSeen",null),x([Object(i.a)(a.a.TutorialPrevious),C("design:type",Function),C("design:paramtypes",[Object,a.a.TutorialPrevious]),C("design:returntype",void 0)],e.prototype,"tutorialPrevious",null),x([Object(i.a)(a.a.TutorialNext),C("design:type",Function),C("design:paramtypes",[Object,a.a.TutorialNext]),C("design:returntype",void 0)],e.prototype,"tutorialNext",null),x([Object(i.a)(a.a.SetWhiteboardEnabled),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetWhiteboardEnabled]),C("design:returntype",void 0)],e.prototype,"setWhiteboardEnabled",null),x([Object(i.a)(a.a.SetWhiteboardBrushSize),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetWhiteboardBrushSize]),C("design:returntype",void 0)],e.prototype,"setWhiteboardBrushSize",null),x([Object(i.a)(a.a.SetWhiteboardTextSize),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetWhiteboardTextSize]),C("design:returntype",void 0)],e.prototype,"setWhiteboardTextSize",null),x([Object(i.a)(a.a.SetWhiteboardEraserSize),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetWhiteboardEraserSize]),C("design:returntype",void 0)],e.prototype,"setWhiteboardEraserSize",null),x([Object(i.a)(a.a.SetWhiteboardAnnotateMode),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetWhiteboardAnnotateMode]),C("design:returntype",void 0)],e.prototype,"setWhiteboardAnnotateMode",null),x([Object(i.a)(a.a.SetWhiteboardBrushColor),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetWhiteboardBrushColor]),C("design:returntype",void 0)],e.prototype,"setWhiteboardBrushColor",null),x([Object(i.a)(a.a.SetWhiteboardHasPaint),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetWhiteboardHasPaint]),C("design:returntype",void 0)],e.prototype,"setWhiteboardHasPaint",null),x([Object(i.a)(a.a.SetWhiteboardHasText),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetWhiteboardHasText]),C("design:returntype",void 0)],e.prototype,"setWhiteboardHasText",null),x([Object(i.a)(a.a.SetMultiPickModeEnabled),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetMultiPickModeEnabled]),C("design:returntype",void 0)],e.prototype,"setMultiPickModeEnabled",null),x([Object(i.a)(a.a.SetLabelBreakpoint),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetLabelBreakpoint]),C("design:returntype",void 0)],e.prototype,"setLabelBreakpoint",null),x([Object(i.a)(a.a.SetUsePrintImage),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetUsePrintImage]),C("design:returntype",void 0)],e.prototype,"setUsePrintImage",null),x([Object(i.a)(a.a.SetWindows),C("design:type",Function),C("design:paramtypes",[Object,a.a.SetWindows]),C("design:returntype",void 0)],e.prototype,"setWindows",null),x([Object(i.a)(a.a.OpenWindow),C("design:type",Function),C("design:paramtypes",[Object,a.a.OpenWindow]),C("design:returntype",void 0)],e.prototype,"openWindow",null),x([Object(i.a)(a.a.CloseWindow),C("design:type",Function),C("design:paramtypes",[Object,a.a.CloseWindow]),C("design:returntype",void 0)],e.prototype,"closeWindow",null),x([Object(i.a)(a.a.ToggleWindow),C("design:type",Function),C("design:paramtypes",[Object,a.a.ToggleWindow]),C("design:returntype",void 0)],e.prototype,"toggleWindow",null),x([Object(i.a)(a.a.ToggleMenu),C("design:type",Function),C("design:paramtypes",[Object,a.a.ToggleMenu]),C("design:returntype",void 0)],e.prototype,"toggleMenu",null),x([Object(i.a)(a.a.ShowScrim),C("design:type",Function),C("design:paramtypes",[Object,a.a.ShowScrim]),C("design:returntype",void 0)],e.prototype,"showScrim",null),x([Object(i.a)(a.a.HideScrim),C("design:type",Function),C("design:paramtypes",[Object,a.a.HideScrim]),C("design:returntype",void 0)],e.prototype,"hideScrim",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getUI",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getInitialUI",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getLabelsBreakpoint",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getInputEnabled",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getFullscreenActive",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getPresentationActive",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getDrawerCoversContent",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getShowNodeInfo",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getNodeInfoFallback",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getViewLanguage",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getInteractType",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getOnDemand",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getLayout",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getInputMode",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getShowHelpTab",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getTutorial",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getTutorialSeen",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getWhiteboardEnabled",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getWhiteboardBrushSize",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getWhiteboardTextSize",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getWhiteboardEraserSize",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getWhiteboardAnnotateMode",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getWhiteboardBrushColor",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getWhiteboardHasPaint",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getWhiteboardHasText",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getCanTouch",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getCanHover",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getMultiPickModeEnabled",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getSearchDisplayMode",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getUsePrintImage",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getOpenWindow",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getMenuOpen",null),x([Object(i.f)(),C("design:type",Function),C("design:paramtypes",[w]),C("design:returntype",void 0)],e,"getScrim",null),e=l=x([Object(i.g)({name:"view",defaults:k})],e),e})()},WLCt:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n("AcyG"),a=n("WFQG"),s=n("yCjD"),o=n("snBo"),r=n("N0Zw"),c=n("Mh2x"),l=n("LvDl"),p=n("AytR"),u=n("p345"),d=n("Ryms"),g=n("j8e5"),h=n("cAYK"),b=n("stSV"),m=n("3zw+"),f=n("Poh+"),y=n("FFWI"),v=n("Y7Bv"),O=n("k93M"),S=n("mtgE"),x=n("fXoL");let C=(()=>{class e{constructor(e,t){this.store=e,this.chapterService=t,this.ui=null,this.breakpoint=null}getBase(){return{ui:this.store.selectSnapshot(a.a.getUI),layout:this.store.selectSnapshot(a.a.getLayout),breakpoint:this.store.selectSnapshot(g.a.getBreakpoint),hideUI:this.isUIHidden()}}isUIHidden(){const e=this.store.selectSnapshot(a.a.getOpenWindow),t=this.store.selectSnapshot(c.a.getSelectedChapterIndex),n=this.store.selectSnapshot(a.a.getUI),i=e===h.a.Loader&&t<=0&&n.loader.template===b.a.Circle,s=this.store.selectSnapshot(O.a.getStoryLoadProgress);return i||0===s||e===h.a.OnDemand||e===h.a.Interact||e===h.a.Tutorial||e===h.a.Whiteboard}isDrawerVisible(){const{hideUI:e,ui:t,layout:n}=this.getBase();return!e&&this.getViewLayout(n)===v.a.Drawer&&(t.drawer.enable&&"none"!==this.getVisibleContent()||t.nodeInfo.status===s.a.Show||t.labelInfo.status===s.a.Show)}isColumnVisible(){const{hideUI:e,layout:t,ui:n}=this.getBase();return!e&&n.column.status!==s.a.Collapse&&this.getViewLayout(t)===v.a.Column&&n.column.enable&&"full"===this.getVisibleContent()}isColumnToggleVisible(){const{hideUI:e,layout:t,ui:n}=this.getBase();return!e&&!this.store.selectSnapshot(y.b.getQuizModeActive)&&this.getViewLayout(t)===v.a.Column&&n.column.enable&&"full"===this.getVisibleContent()}isTitleOnlyVisible(){const{hideUI:e,ui:t,breakpoint:n}=this.getBase();return!e&&!(n<d.a.Large)&&t.titleOnly.enable&&"titleOnly"===this.getVisibleContent()}isToolsVisible(){const{hideUI:e}=this.getBase();return!e&&this.isUIVisible(o.a.Tools)}isToolbarVisible(){const{hideUI:e,ui:t}=this.getBase();return!e&&t.toolbar.enable}isLogoVisible(){const{ui:e}=this.getBase();return this.store.selectSnapshot(a.a.getOpenWindow)!==h.a.OnDemand&&e.logo.enable}isCameraVisible(){const{hideUI:e,ui:t}=this.getBase();return!e&&t.camera.enable}isPaginationVisible(){const{hideUI:e,ui:t}=this.getBase();return!e&&!(this.store.selectSnapshot(c.a.getChapterCount)<=1)&&t.pagination.enable}isMediaVisible(){const{hideUI:e,ui:t}=this.getBase();return!e&&this.store.selectSnapshot(c.a.getIsChapterAnimated)&&t.media.enable}isMediabarVisible(){const{hideUI:e}=this.getBase();if(e)return!1;const t=this.isMediaVisible(),n=this.isAudioVisible();return t||n}isScrubberVisible(e){const{hideUI:t,ui:n,breakpoint:i}=this.getBase();if(t)return!1;const a=this.isMediaVisible&&n.media.template===S.a.Full;switch(e){case o.a.ScrubberButton:return a&&i>d.a.Small;case o.a.ScrubberItem:return a&&i<=d.a.Small}}isMenuVisible(){const{hideUI:e,ui:t}=this.getBase();return!e&&(t.fullscreen.enable||t.help.enable||t.search.enable||t.tools.enable||t.whiteboard.enable||t.tutorial.enable)&&t.menu.enable}isNodeInfoColumnVisible(){const{hideUI:e,ui:t,breakpoint:n}=this.getBase();return!e&&(!!(n>=d.a.Large&&this.isUIVisible(o.a.NodeInfo))||(n<d.a.Large?!t.drawer.enable&&this.isUIVisible(o.a.NodeInfo):void 0))}isNodeInfoVisible(e){const{hideUI:t,breakpoint:n}=this.getBase();return!t&&(n>=d.a.Large&&e===v.a.Column||n<d.a.Large&&e===v.a.Drawer)&&this.isUIVisible(o.a.NodeInfo)}isAudioVisible(){const{hideUI:e,ui:t}=this.getBase();if(e)return!1;const n=null!=this.store.selectSnapshot(c.a.getSelectedChapterAudio);return t.audio.enable&&n}isSearchColumnVisible(){const{hideUI:e}=this.getBase();return!e&&this.isUIVisible(o.a.Search)}isUndoVisible(){const{hideUI:e,ui:t}=this.getBase();return!e&&t.undo.enable}isVisibilityLayersVisible(){const{hideUI:e,ui:t}=this.getBase();if(e)return!1;const n=t.visibilityLayers.enable,i=this.store.selectSnapshot(c.a.getSelectedChapterCurrentLayers);return n&&this.chapterService.hasVisibilityLayers(i)}isVisible(e){switch(e){case o.a.Audio:return this.isAudioVisible();case o.a.Camera:return this.isCameraVisible();case o.a.Column:return this.isColumnVisible();case o.a.ColumnToggle:return this.isColumnToggleVisible();case o.a.Drawer:return this.isDrawerVisible();case o.a.Logo:return this.isLogoVisible();case o.a.Media:return this.isMediaVisible();case o.a.Mediabar:return this.isMediabarVisible();case o.a.Menu:return this.isMenuVisible();case o.a.Pagination:return this.isPaginationVisible();case o.a.Search:return this.isSearchColumnVisible();case o.a.ScrubberButton:return this.isScrubberVisible(o.a.ScrubberButton);case o.a.ScrubberItem:return this.isScrubberVisible(o.a.ScrubberItem);case o.a.TitleOnly:return this.isTitleOnlyVisible();case o.a.Tools:return this.isToolsVisible();case o.a.Toolbar:return this.isToolbarVisible();case o.a.Undo:return this.isUndoVisible();case o.a.VisibilityLayers:return this.isVisibilityLayersVisible();default:return this.isUIVisible(e)}}isUIVisible(e){const{hideUI:t,ui:n}=this.getBase();return n[e]?!t&&n[e].enable&&n[e].status!==s.a.Hide:(console.warn("Attempting to check visibility of a non-existent element: ${element}"),!1)}isUIEnabled(e){const{ui:t}=this.getBase();return t[e].enable}getVisibleContent(){const{ui:e}=this.getBase(),t=this.store.selectSnapshot(r.a.getChapterLabels),n=this.store.selectSnapshot(c.a.getSelectedChapter),i=Object(l.get)(n,"info.description"),a=Object(l.get)(n,"info.displayName"),s=Object(l.get)(n,"legend",[]),o=Object(l.get)(n,"contentBlocks",[]).length,p=e.labelList.enable&&t.length>0,u=null!=i&&Object(l.trim)(i).length>0,d=null!=a&&Object(l.trim)(a).length>0,g=e.legend.enable&&s.length>0,h=this.store.selectSnapshot(y.b.getQuizModeActive);return p||u||g||h||o?"full":d?"titleOnly":"none"}getViewLayout(e){const{width:t,height:n}=document.body.getBoundingClientRect(),i=t/n>=1?"landscape":"portrait",{breakpoint:a}=this.getBase(),s=384+(p.a.application===u.a.Viewer?0:56);switch(e){case f.a.ColumnOnly:return v.a.Column;case f.a.DrawerOnly:return v.a.Drawer;default:return"portrait"===i?v.a.Drawer:a>=d.a.Large||n<=s&&t>=708?v.a.Column:v.a.Drawer}}}return e.\u0275fac=function(t){return new(t||e)(x.Zb(i.h),x.Zb(m.a))},e.\u0275prov=x.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},WRwD:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(){this.title=null,this.description=null,this.errands=[]}}},WUhe:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){class t{constructor(e){this.quizState=e}}t.type="[Quiz] Set Quiz State",e.SetQuizState=t;class n{constructor(){}}n.type="[Quiz] Reset Quiz State",e.ResetQuizState=n;class i{constructor(e){this.quizSettings=e}}i.type="[Quiz] Set Quiz Settings",e.SetQuizSettings=i;class a{constructor(e){this.active=e}}a.type="[Quiz] Set Quiz Active",e.SetQuizActive=a;class s{constructor(e){this.enabled=e}}s.type="[Quiz] Set Quiz Enabled",e.SetQuizEnabled=s;class o{constructor(e){this.locked=e}}o.type="[Quiz] Set Quiz Locked",e.SetQuizLocked=o;class r{constructor(e){this.enable=e}}r.type="[Quiz] Set Enable Quiz Retake",e.SetEnableQuizRetake=r;class c{constructor(e){this.mode=e}}c.type="[Quiz] Set Quiz Questions Mode",e.SetQuizQuestionsMode=c;class l{constructor(e,t){this.sourceChapterId=e,this.targetChapterId=t}}l.type="[Quiz] Copy Quiz Questions",e.CopyQuestions=l;class p{constructor(e){this.chapterIds=e}}p.type="[Quiz] Reoder Quiz Questions",e.ReorderQuestions=p;class u{constructor(e){this.question=e}}u.type="[Quiz] Add Quiz Question",e.AddQuestion=u;class d{constructor(e){this.questions=e}}d.type="[Quiz] Set Quiz Questions",e.SetQuestions=d;class g{constructor(e){this.questionIds=e}}g.type="[Quiz] Remove Quiz Questions",e.RemoveQuestions=g;class h{constructor(e){this.question=e}}h.type="[Quiz] Set Quiz Question",e.SetQuestion=h;class b{constructor(e){this.submission=e}}b.type="[Quiz] Submit Question Answer",e.SubmitQuestionAnswer=b;class m{constructor(){}}m.type="[Quiz] Advance Question",e.NextQuestion=m;class f{constructor(){}}f.type="[Quiz] Previous Question",e.PreviousQuestion=f;class y{constructor(){}}y.type="[Quiz] Clear Submissions",e.ClearSubmissions=y;class v{constructor(e){this.questionId=e}}v.type="[Quiz] Set Active Question",e.SetActiveQuestion=v;class O{constructor(e){this.pickMode=e}}O.type="[Quiz] Set Pick Mode",e.SetQuizPickMode=O;class S{constructor(e){this.submission=e}}S.type="[Quiz] Set Active QuestionAnswer",e.SetActiveSubmission=S;class x{constructor(e){this.lifecycle=e}}x.type="[Quiz] Set Quiz Lifecycle",e.SetQuizLifecycle=x}(i||(i={}))},Wd1f:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("LvDl"),s=n("pLZG"),o=n("lJxs"),r=n("6d61"),c=n("ZR5G"),l=n("yG3n"),p=n("ThaW");!function(e){function t(e,t){const n=new l.a;if(e.thumbnails)n.legacy=!1,n.storyId=t,n.chapterId=e.id,n.urls=Object.assign({},e.thumbnails);else{const i=`/thumbs/${c.a.Bookmark===Object(p.a)(t)?"bookmarks":"modules"}/${t.replace(".json","")}`;n.legacy=!0,n.storyId=t,n.chapterId=e.id,n.urls={small:`${i}/small/chapters/${e.id}.jpg`,large:`${i}/large/chapters/${e.id}.jpg`}}return n}e.generateLegacyThumbnail=function(e,t){const n=`/thumbs/${c.a.Bookmark===Object(p.a)(e)?"bookmarks":"modules"}/${e.replace(".json","")}`;return{small:`${n}/small/chapters/${t}.jpg`,large:`${n}/large/chapters/${t}.jpg`}},e.generateThumbnails=function(e){return e.reduce((e,{originalChapterId:t,newChapterId:n,originalStoryId:i})=>{const a=c.a.Bookmark===Object(p.a)(i),s=new l.a;s.storyId=i,s.chapterId=t;const o=`/thumbs/${a?"bookmarks":"modules"}/${i.replace(".json","")}`;return s.urls={small:`${o}/small/chapters/${t}.jpg`,large:`${o}/large/chapters/${t}.jpg`},e.set(n,s),e},new Map)},e.getChapterThumbnail=t,e.getChapterThumbnails=function(e,n){return n.reduce((n,i)=>{const a=t(i,e);return n.set(i.id,a),n},new Map)},e.makeFreshThumbnail=function(e,t,n){return Object(r.a)(n).pipe(Object(s.a)(e=>!Object(a.isNil)(e)),Object(o.a)(n=>{const i=new l.a;return i.snapshot=URL.createObjectURL(n),i.chapterId=t,i.storyId=e,i}))}}(i||(i={}))},Wgla:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ofXK"),a=n("EWj2"),s=n("vvyD"),o=n("Wdmj"),r=n("fXoL");let c=(()=>{class e{}return e.\u0275mod=r.Nb({type:e}),e.\u0275inj=r.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,o.d]]}),e})()},WkFQ:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o}));class i{}var a=function(e){return e.View="View",e.Edit="Customize in Studio",e.Duplicate="Duplicate",e.Manage="Manage",e.Publish="Publish",e.Delete="Delete",e.CopyURL="Copy URL",e.Share="Share",e.AddToMyLibrary="Add to My Library",e.Divider="",e}({});const s={[a.View]:"",[a.AddToMyLibrary]:"plus",[a.Edit]:"pen",[a.Share]:"share-alt",[a.Publish]:"code",[a.CopyURL]:"link",[a.Duplicate]:"",[a.Manage]:"",[a.Delete]:"",[a.Divider]:""};function o(e){const t=e.substring(0,1).toUpperCase()+e.substring(1);return Object.values(a).reduce((e,n)=>(e[n]=n===a.Edit?"Customize in "+t:n,e),{})}},WoAB:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.AssignRole="assignRole",e.RemoveUser="removeUser",e.TransferContent="transferContent",e.CreateCollection="createCollection",e.DeleteCollection="deleteCollection",e.EditTeamAccount="editTeamAccount",e.EditTeamBookmarks="editTeamBookmarks",e.EditAllTeamBookmarks="editAllTeamBookmarks",e.AddTeamBookmarks="addTeamBookmarks",e.RemoveTeamBookmarks="removeTeamBookmarks",e.EditBookmarks="editBookmarks",e.PublishBookmarks="publishBookmarks",e.SavePrivateBookmarks="savePrivateBookmarks",e.CopyUrl="copyURL",e.ViewBookmarks="viewBookmarks",e.InviteUsers="inviteUsers",e.ExportCSV="exportCSV",e.DuplicateTeamBookmarks="duplicateTeamBookmarks",e}({})},Wqx0:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),a=n("3Pt+"),s=n("fXoL");let o=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.l]]}),e})()},WwWM:function(e,t,n){"use strict";n.d(t,"a",(function(){return oe}));var i=n("AcyG"),a=n("Vv7R"),s=n("PUI9"),o=n("YpC8"),r=n("itXk"),c=n("pLZG"),l=n("IzEk"),p=n("VJvM"),u=n("GMXD"),d=n("sTHe"),g=n("11Ye"),h=n("WFQG"),b=n("yCjD"),m=n("UEjg"),f=n("EF3F"),y=n("q8pu"),v=n("Mh2x"),O=n("TATr"),S=n("zlNa");function x(e){const{id:t,s:n,m:i,be:a,b:s}=e;let o="";if(t)o=t;else if(a)o=a;else if(s){const e=parseInt(s,10);o=Number.isNaN(e)?"":function(e){const t=[];let n,i=e;for(;i>0;)[i,n]=(a=i,62,[Math.floor(a/62),a%62]),t.unshift("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"[n]);var a;return t.join("")}(e)}else i&&(o=function(e,t="male"){return e.includes("/")?e:`production/${t}Adult/${e}`}(i,"female"===n?"female":"male"));return o.replace(/\.json$/,"")}n("ewuU"),n("V7wM");var C=n("eW6i"),w=n("LvDl"),j=n("fXoL");let k=(()=>{class e{constructor(e){this.store=e}chapterHasTransition(e,t){const n=t?"transitions.pre":"transitions.post",i=Object(w.get)(e,n);return!!i&&(t?i.onPrevious:i.onNext)}searchChapterTransitions(e,t,n){let i=[...n],a=i.findIndex(t=>t.id===e),s=i.findIndex(e=>e.id===t);const o=s<a;if(o&&(i=i.reverse(),a=i.findIndex(t=>t.id===e),s=i.findIndex(e=>e.id===t)),a<0||s<0||a===s)return null;const r=i.slice(a,s).find(e=>this.chapterHasTransition(e,o));return r?o?r.transitions.pre:r.transitions.post:null}}return e.\u0275fac=function(t){return new(t||e)(j.Zb(i.h))},e.\u0275prov=j.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var P=n("cAOT"),_=n("j8e5"),M=n("cAYK"),I=n("gm/O"),T=n("JaAu"),U=n("ufUH"),L=n("WLCt"),z=n("Lyqc"),A=n("+1W3"),F=n("kTA6"),D=n("FFWI"),E=n("N2iv"),N=n("0IaG"),R=n("XNiG"),V=n("HDdC"),B=n("CpGW"),H=n("0kAG"),Q=n("0njA"),G=n("4qFM"),W=n("awCs"),q=n("ofXK");function $(e,t){if(1&e&&(j.Vb(0,"label",11),j.Pc(1),j.Ub()),2&e){const e=j.gc().$implicit;j.Db(1),j.Qc(e.pronunciation)}}function X(e,t){if(1&e&&(j.Vb(0,"span"),j.Vb(1,"kbd",9),j.Pc(2),j.Ub(),j.Nc(3,$,2,1,"label",10),j.Ub()),2&e){const e=t.$implicit;j.Db(1),j.Eb("aria-hidden",e.hasOwnProperty("pronunciation")),j.Db(1),j.Rc(" ",e.shortcut," "),j.Db(1),j.mc("ngIf",e.hasOwnProperty("pronunciation"))}}function Z(e,t){if(1&e&&(j.Vb(0,"tr"),j.Vb(1,"th",7),j.Pc(2),j.Ub(),j.Vb(3,"td",8),j.Nc(4,X,4,3,"span",6),j.Ub(),j.Ub()),2&e){const e=t.$implicit;j.Db(2),j.Qc(e.label),j.Db(2),j.mc("ngForOf",e.keys)}}function J(e,t){if(1&e&&(j.Vb(0,"div",2),j.Vb(1,"h2",3),j.Pc(2),j.Ub(),j.Vb(3,"table",4),j.Vb(4,"tr"),j.Qb(5,"th"),j.Vb(6,"th",5),j.Pc(7,"Keyboard Shortcut"),j.Ub(),j.Ub(),j.Nc(8,Z,5,2,"tr",6),j.Ub(),j.Ub()),2&e){const e=t.$implicit;j.Db(2),j.Qc(e.label),j.Db(6),j.mc("ngForOf",e.shortcuts)}}var K=function(e){return e.Left="\u2190",e.Right="\u2192",e.Up="\u2191",e.Down="\u2193",e.Command="\u2318",e}({});let Y=(()=>{class e{constructor(){this.shortcutGroups=[{label:"Navigation",shortcuts:[{keys:[{shortcut:",",pronunciation:"Comma."},{shortcut:"Pg-Up",pronunciation:"page-up"}],label:"Previous chapter"},{keys:[{shortcut:".",pronunciation:"Period."},{shortcut:"Pg-Down",pronunciation:"Page-down."}],label:"Next chapter"},{keys:[{shortcut:"/",pronunciation:"Forward slash."}],label:"Open Search"},{keys:[{shortcut:"Ctrl + Enter"}],label:"Enter Fullscreen"},{keys:[{shortcut:"Ctrl/Cmd + ,",pronunciation:"Control or command plus comma."}],label:"Toggle Description"},{keys:[{shortcut:"Shift + /"}],label:"Open Help"}]},{label:"Tools",shortcuts:[{keys:[{shortcut:"1"}],label:'Use "Select" tool'},{keys:[{shortcut:"2"}],label:'Use "Hide" tool'},{keys:[{shortcut:"3"}],label:'Use "Fade" tool'},{keys:[{shortcut:"del",pronunciation:"Delete."},{shortcut:"backspace"}],label:"Hide selected structure"},{keys:[{shortcut:"Shift + R"}],label:"Reset chapter"},{keys:[{shortcut:"Ctrl/Cmd + Z",pronunciation:"Control or command plus z."}],label:"Undo"},{keys:[{shortcut:"Ctrl/Cmd + Shift + Z",pronunciation:"Control or command plus shift pluz z."},{shortcut:"Ctrl/Cmd + Y",pronunciation:"Control or command plus y."}],label:"Redo"}]},{label:"Pan",shortcuts:[{keys:[{shortcut:"W"}],label:"Pan up"},{keys:[{shortcut:"S"}],label:"Pan down"},{keys:[{shortcut:"A"}],label:"Pan left"},{keys:[{shortcut:"D"}],label:"Pan right"},{keys:[{shortcut:"Shift + W"}],label:"Slow pan up"},{keys:[{shortcut:"Shift + S"}],label:"Slow pan down"},{keys:[{shortcut:"Shift + A"}],label:"Slow pan left"},{keys:[{shortcut:"Shift + D"}],label:"Slow pan right"}]},{label:"Rotate",shortcuts:[{keys:[{shortcut:K.Up}],label:"Rotate up"},{keys:[{shortcut:K.Down}],label:"Rotate down"},{keys:[{shortcut:K.Left}],label:"Rotate left"},{keys:[{shortcut:K.Right}],label:"Rotate right"},{keys:[{shortcut:"Shift + "+K.Up}],label:"Slow rotate up"},{keys:[{shortcut:"Shift + "+K.Down}],label:"Slow rotate down"},{keys:[{shortcut:"Shift + "+K.Left}],label:"Slow rotate left"},{keys:[{shortcut:"Shift + "+K.Right}],label:"Slow rotate right"}]},{label:"Zoom",shortcuts:[{keys:[{shortcut:"E"},{shortcut:"=",pronunciation:"Equals."}],label:"Zoom in"},{keys:[{shortcut:"C"},{shortcut:"-",pronunciation:"Hyphen."}],label:"Zoom out"},{keys:[{shortcut:"Shift + E"},{shortcut:"Shift + =",pronunciation:"Shift plus equals."}],label:"Slow zoom in"},{keys:[{shortcut:"Shift + C"},{shortcut:"Shift + -",pronunciation:"Shift plus hyphen."}],label:"Slow zoom out"}]}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=j.Jb({type:e,selectors:[["app-view-shortcuts"]],decls:2,vars:1,consts:[[1,"view-shortcuts"],["class","view-shortcuts__group",4,"ngFor","ngForOf"],[1,"view-shortcuts__group"],[1,"view-shortcuts__label","text-bold"],[1,"view-shortcuts__table"],["scope","col",1,"view-shortcuts__cell-header"],[4,"ngFor","ngForOf"],["scope","row",1,"view-shortcuts__cell-header"],[1,"view-shortcuts__cell","view-shortcuts__cell--key"],[1,"view-shortcuts__key"],["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"]],template:function(e,t){1&e&&(j.Vb(0,"div",0),j.Nc(1,J,9,2,"div",1),j.Ub()),2&e&&(j.Db(1),j.mc("ngForOf",t.shortcutGroups))},directives:[q.o,q.p],styles:[".view-shortcuts[_ngcontent-%COMP%]{display:flex;flex-direction:column}.view-shortcuts__group[_ngcontent-%COMP%]{width:100%;padding-bottom:32px;margin-top:32px}.view-shortcuts__label[_ngcontent-%COMP%]{padding:8px 0 12px}.view-shortcuts__table[_ngcontent-%COMP%]{width:100%}.view-shortcuts__cell[_ngcontent-%COMP%], .view-shortcuts__cell-header[_ngcontent-%COMP%]{padding:8px;border-bottom:1px solid hsla(0,0%,100%,.3);width:50%}.view-shortcuts__cell-header[_ngcontent-%COMP%]{text-align:left}.view-shortcuts__key[_ngcontent-%COMP%]{border-radius:4px;display:inline-flex;padding:4px;margin-right:4px;background:#000;color:#fff;justify-content:center;align-items:center;font-family:monospace;font-size:16px}"],changeDetection:0}),e})();var ee=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const te=["viewHelp"];let ne=(()=>{class e{constructor(e,t,n,i){this.dialogRef=e,this.renderer=t,this.store=n,this.data=i,this.helpTypeEnum=U.a,this.activeTab=U.a.Basics,this.ngUnsubscribe=new R.a,this.activeTab=i.tab}ngOnInit(){this.initWindowSizeObserver()}ngAfterViewInit(){this.updateViewHeight()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initWindowSizeObserver(){this.renderer.listen("window","resize",()=>{this.updateViewHeight()})}updateViewHeight(){const e=this.store.selectSnapshot(B.a.getSiteHeader),t=Object(H.a)(e,!1);this.viewHelp.nativeElement.style.setProperty("--vh",t+"px")}handleCloseClick(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(j.Pb(N.g),j.Pb(j.H),j.Pb(i.h),j.Pb(N.a))},e.\u0275cmp=j.Jb({type:e,selectors:[["app-help-dialog"]],viewQuery:function(e,t){if(1&e&&j.Jc(te,!0),2&e){let e;j.xc(e=j.dc())&&(t.viewHelp=e.first)}},decls:126,vars:1,consts:[["role","dialog","aria-labelledby","helpTitle",1,"view-help"],["viewHelp",""],["id","helpTitle",1,"view-help__header"],["type","button",1,"view-help__close",3,"click"],["icon","times","aria-hidden","true"],[1,"visually-hidden"],[1,"view-help__inner"],["tabSize","medium","tabAlign","center","cdkFocusInitial","",3,"activeTab"],["label","Navigation Basics","id","helpBasics","aria-controls","basicsPanel"],["role","tabpanel","aria-labelledby","helpBasics","tabindex","0","id","basicsPanel"],[1,"view-help__group"],[1,"view-help__item"],[1,"view-help__image"],["src","assets/images/widget/help-rotate.svg","alt","A heart with an arrow wrapped around it, which symbolises objects being rotated withing the 3D viewport."],[1,"view-help__label"],["src","assets/images/widget/help-pan.svg","alt","A heart with left and right arrows pointing away from it, which symbolises objects being panned within the 3D viewport"],["src","assets/images/widget/help-zoom.svg","alt","A heart with a magnifying glass over it, which symbolises zooming into and out from an object within the 3D viewport."],["src","assets/images/widget/help-learn.svg","alt","A heart with a smaller region colored in blue and a popup window specifying that the Right Ventricle is selected."],["label","All Controls","id","helpAll","aria-controls","allPanel"],["role","tabpanel","aria-labelledby","helpAll","tabindex","0","id","allPanel"],[1,"view-help__section-header"],["src","assets/images/widget/help-mouse-hold-left.svg","alt","A mouse with the left button being held in."],["src","assets/images/widget/help-mouse-hold-right.svg","alt","A mouse with the right button being held in."],["src","assets/images/widget/help-mouse-single-click-left.svg","alt","A mouse with the left button being clicked."],["src","assets/images/widget/help-mouse-double-click-left.svg","alt","A mouse with the left button being double clicked."],["src","assets/images/widget/help-mouse-long-press-left.svg","alt","A mouse with the left button being held in for a long duration."],["src","assets/images/widget/help-keyboard-rotate.svg","alt","The arrow keys."],["src","assets/images/widget/help-keyboard-pan.svg","alt","The W, A, S and D keys."],["src","assets/images/widget/help-keyboard-zoom.svg","alt","The plus and minus keys grouped together or the E and C keys grouped together."],["src","assets/images/widget/help-keyboard-slow-motion.svg","alt","The shift key."],["src","assets/images/widget/help-trackpad-single-tap.svg","alt","A finger clicking the trackpad once."],["src","assets/images/widget/help-trackpad-double-tap.svg","alt","A finger clicking the trackpad twice."],["src","assets/images/widget/help-trackpad-long-press.svg","alt","A finger pressing for a long duration on the trackpad."],["src","assets/images/widget/help-trackpad-scroll.svg","alt","Two fingers pressing the trackpad while moving vertically."],["icon","plus","aria-hidden","true",1,"view-help__icon"],["icon","minus","aria-hidden","true",1,"view-help__icon"],["icon","location","aria-hidden","true",1,"view-help__icon"],["icon","arrows","aria-hidden","true",1,"view-help__icon"],["label","Keyboard Shortcuts","id","helpShortcuts","aria-controls","shortcutsPanel"],["role","tabpanel","aria-labelledby","helpShortcuts","tabindex","0","id","shortcutsPanel"]],template:function(e,t){1&e&&(j.Vb(0,"div",0,1),j.Vb(2,"h2",2),j.Pc(3,"Help"),j.Ub(),j.Vb(4,"button",3),j.cc("click",(function(){return t.handleCloseClick()})),j.Qb(5,"app-icon",4),j.Vb(6,"span",5),j.Pc(7,"Close help modal"),j.Ub(),j.Ub(),j.Vb(8,"div",6),j.Vb(9,"app-tabs",7),j.Vb(10,"app-tab",8),j.Vb(11,"div",9),j.Vb(12,"ul",10),j.Vb(13,"li",11),j.Vb(14,"div",12),j.Qb(15,"img",13),j.Ub(),j.Vb(16,"div",14),j.Pc(17,"Rotate"),j.Ub(),j.Pc(18," Click and drag or use one finger to change the viewing angle. "),j.Ub(),j.Vb(19,"li",11),j.Vb(20,"div",12),j.Qb(21,"img",15),j.Ub(),j.Vb(22,"div",14),j.Pc(23,"Pan"),j.Ub(),j.Pc(24," Hold the shift key and drag or use two fingers to move the model's position. "),j.Ub(),j.Vb(25,"li",11),j.Vb(26,"div",12),j.Qb(27,"img",16),j.Ub(),j.Vb(28,"div",14),j.Pc(29,"Zoom"),j.Ub(),j.Pc(30," Scroll up and down or pinch with two fingers to zoom in or out. "),j.Ub(),j.Vb(31,"li",11),j.Vb(32,"div",12),j.Qb(33,"img",17),j.Ub(),j.Vb(34,"div",14),j.Pc(35,"Explore the Anatomy"),j.Ub(),j.Pc(36," Click or tap an anatomic structure or label to learn more. "),j.Ub(),j.Ub(),j.Ub(),j.Ub(),j.Vb(37,"app-tab",18),j.Vb(38,"div",19),j.Vb(39,"h3",20),j.Pc(40,"Mouse"),j.Ub(),j.Vb(41,"ul",10),j.Vb(42,"li",11),j.Vb(43,"div",12),j.Qb(44,"img",21),j.Ub(),j.Pc(45," Hold left button to rotate "),j.Ub(),j.Vb(46,"li",11),j.Vb(47,"div",12),j.Qb(48,"img",22),j.Ub(),j.Pc(49," Hold right button to pan "),j.Ub(),j.Vb(50,"li",11),j.Vb(51,"div",12),j.Qb(52,"img",23),j.Ub(),j.Pc(53," Single-click left button to select a structure "),j.Ub(),j.Vb(54,"li",11),j.Vb(55,"div",12),j.Qb(56,"img",24),j.Ub(),j.Pc(57," Double-click left button to auto-focus on a structure "),j.Ub(),j.Vb(58,"li",11),j.Vb(59,"div",12),j.Qb(60,"img",25),j.Ub(),j.Pc(61," Long-click to fly to a structure "),j.Ub(),j.Ub(),j.Vb(62,"h3",20),j.Pc(63,"Keyboard"),j.Ub(),j.Vb(64,"ul",10),j.Vb(65,"li",11),j.Vb(66,"div",12),j.Qb(67,"img",26),j.Ub(),j.Pc(68," Rotate with arrows "),j.Ub(),j.Vb(69,"li",11),j.Vb(70,"div",12),j.Qb(71,"img",27),j.Ub(),j.Pc(72," Pan up (W), left (A), down (S), right(D) "),j.Ub(),j.Vb(73,"li",11),j.Vb(74,"div",12),j.Qb(75,"img",28),j.Ub(),j.Pc(76," Zoom out (-, C) and zoom in (+, E) "),j.Ub(),j.Vb(77,"li",11),j.Vb(78,"div",12),j.Qb(79,"img",29),j.Ub(),j.Pc(80," Hold with any previous key to slow down motion "),j.Ub(),j.Ub(),j.Vb(81,"h3",20),j.Pc(82,"Trackpad"),j.Ub(),j.Vb(83,"ul",10),j.Vb(84,"li",11),j.Vb(85,"div",12),j.Qb(86,"img",30),j.Ub(),j.Pc(87," Single-tap to auto-focus a structure "),j.Ub(),j.Vb(88,"li",11),j.Vb(89,"div",12),j.Qb(90,"img",31),j.Ub(),j.Pc(91," Double-tap to select a structure "),j.Ub(),j.Vb(92,"li",11),j.Vb(93,"div",12),j.Qb(94,"img",32),j.Ub(),j.Pc(95," Long-press to fly to a structure "),j.Ub(),j.Vb(96,"li",11),j.Vb(97,"div",12),j.Qb(98,"img",33),j.Ub(),j.Pc(99," Scroll up and down to zoom "),j.Ub(),j.Ub(),j.Vb(100,"h3",20),j.Pc(101,"In-App"),j.Ub(),j.Vb(102,"ul",10),j.Vb(103,"li",11),j.Qb(104,"app-icon",34),j.Vb(105,"span",5),j.Pc(106," The plus symbol, which represents zooming in in the camera control menu. "),j.Ub(),j.Pc(107," Zoom in "),j.Ub(),j.Vb(108,"li",11),j.Qb(109,"app-icon",35),j.Vb(110,"span",5),j.Pc(111," The minus symbol, which represents zooming out in the camera control menu. "),j.Ub(),j.Pc(112," Zoom out "),j.Ub(),j.Vb(113,"li",11),j.Qb(114,"app-icon",36),j.Vb(115,"span",5),j.Pc(116," The map pin symbol, which resets the camera in the camera control menu. "),j.Ub(),j.Pc(117," Recenter 3D Model "),j.Ub(),j.Vb(118,"li",11),j.Qb(119,"app-icon",37),j.Vb(120,"span",5),j.Pc(121," Arrows pointing in four directions, which represents panning in the camera control menu. "),j.Ub(),j.Pc(122," Pan "),j.Ub(),j.Ub(),j.Ub(),j.Ub(),j.Vb(123,"app-tab",38),j.Vb(124,"div",39),j.Qb(125,"app-view-shortcuts"),j.Ub(),j.Ub(),j.Ub(),j.Ub(),j.Ub()),2&e&&(j.Db(9),j.mc("activeTab",t.activeTab))},directives:[Q.a,G.a,W.a,Y],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-help{background-color:rgba(16,24,35,.9);color:#fff;display:flex;align-items:center;flex-direction:column;position:fixed;top:0;left:0;right:0;z-index:10000;height:100vh;height:calc(var(--vh, 1vh) * 100);max-height:100vh;overflow:auto}.view-help__inner{width:100%;max-width:1140px;height:99vh;height:calc(var(--vh, 1vh) * 99);padding:32px;position:relative}.view-help__close{color:#fff;width:40px;height:40px;display:flex;align-items:center;justify-content:center;position:fixed;right:8px;top:8px;z-index:10;border:none;background:none}.view-help__header{font-size:14px;letter-spacing:.84px}.view-help__header,.view-help__section-header{line-height:1.25em;text-transform:uppercase;font-weight:600;padding-bottom:12px;margin-top:32px}.view-help__section-header{font-size:12px;letter-spacing:.72px;border-bottom:1px solid hsla(0,0%,100%,.3)}.view-help__label{font-size:14px;letter-spacing:.35px;line-height:1.4em;font-weight:600;margin-bottom:12px}.view-help__group{display:flex;justify-content:space-around;flex-wrap:wrap}.view-help__item{font-size:12px;letter-spacing:.3px;line-height:1.4em;display:flex;flex-flow:column;text-align:center;padding:20px;flex:0 1 180px}.view-help__image{justify-content:center;margin-bottom:16px;width:160px;height:100px}.view-help__icon{font-size:24px;margin-bottom:16px}"],encapsulation:2,changeDetection:0}),function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([Object(i.e)(h.a.getCanTouch),ee("design:type",V.a)],e.prototype,"canTouch$",void 0),e})();var ie=n("YLgZ"),ae=n("u47x"),se=function(e,t,n,i){return new(n||(n=Promise))((function(a,s){function o(e){try{c(i.next(e))}catch(t){s(t)}}function r(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}c((i=i.apply(e,t||[])).next())}))};let oe=(()=>{class e{constructor(e,t,n,i,a,s,o,r){this.dialog=e,this.store=t,this.location=n,this.transitionService=i,this.engineService=a,this.layoutService=s,this.pendoService=o,this.liveAnnouncer=r}initStory(e,t,n){const i="preview"===e;this.store.dispatch(new z.C(e,t,i)),this.store.dispatch(new a.m(e,t,!0));const u=this.store.select(s.a.getReady),d=this.store.select(o.a.getIncomingStoryInfo);Object(r.b)([u,d]).pipe(Object(c.a)(([e,t])=>e&&!!t.id),Object(l.a)(1)).subscribe(()=>{this.store.dispatch(new p.p),this.store.dispatch(new a.e(e,t,n,i))})}nextChapter(e){const t=this.store.selectSnapshot(v.a.getSelectedChapterIndex),n=this.store.selectSnapshot(v.a.getStoryChapters);this.pendoService.trackOncePerSession(F.a.DiscoveredChapterNav,{source:e,breakpoint:this.store.selectSnapshot(_.a.getBreakpointLabel)});const i=n[t+1];i&&this.selectChapter(i)}previousChapter(e){const t=this.store.selectSnapshot(v.a.getSelectedChapterIndex),n=this.store.selectSnapshot(v.a.getStoryChapters);this.pendoService.trackOncePerSession(F.a.DiscoveredChapterNav,{source:e,breakpoint:this.store.selectSnapshot(_.a.getBreakpointLabel)});const i=n[t-1];i&&this.selectChapter(i)}selectChapter(e){return se(this,void 0,void 0,(function*(){if(!this.store.selectSnapshot(D.b.getQuizModeActive)){const t=this.store.selectSnapshot(v.a.getSelectedChapterId),n=e.id,i=this.store.selectSnapshot(v.a.getStoryChapters),s=this.transitionService.searchChapterTransitions(t,n,i);this.pendoService.trackOncePerSession(F.a.DiscoveredChapterNav,{source:"Chapter List",breakpoint:this.store.selectSnapshot(_.a.getBreakpointLabel)}),s&&(yield this.chapterTransition(s)),this.store.dispatch([new a.k(e.id),new p.p(e)])}}))}chapterTransition(e){return new Promise(t=>{e.camera&&this.store.dispatch(new O.l(e.camera,!0,e.duration)),e.fadeColor&&this.store.dispatch(new g.h(e.fadeColor,e.duration)),setTimeout(()=>{t(!0)},1e3*e.duration)})}hideSelectedStructures(){const e=this.store.selectSnapshot(u.a.getCheckedNodeIds);this.store.dispatch(new I.a.UpdateNodesShown(!1,e))}selectTool(e){this.store.selectSnapshot(D.b.getQuizModeActive)&&e===d.a.Select&&(e=d.a.Quiz),this.store.dispatch(new g.w(e))}toggleColumn(e){const t=this.store.selectSnapshot(h.a.getUI);t.column.status=(e=null==e?!(t.column.status===b.a.Show):e)?b.a.Show:b.a.Collapse,this.store.dispatch(new m.a.SetUI(t))}togglePresentation(){this.store.selectSnapshot(h.a.getPresentationActive)?this.stopPresentation():this.startPresentation()}startPresentation(){this.store.dispatch(new m.a.TogglePresentation(!0))}stopPresentation(){this.store.dispatch(new m.a.TogglePresentation(!1))}toggleHelp(e=U.a.Basics){0===this.dialog.openDialogs.length&&this.dialog.open(ne,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{tab:e}})}toggleInteract(e){this.store.dispatch(new m.a.ToggleWindow(M.a.Interact,e))}toggleOnDemand(e){this.store.dispatch(new m.a.SetOnDemand(e)),this.store.dispatch(new m.a.ToggleWindow(M.a.OnDemand,e))}toggleTutorial(e){this.store.dispatch(new m.a.ToggleWindow(M.a.Tutorial,e)),e&&this.store.dispatch(new m.a.StartTutorial(!0))}toggleWhiteboard(e){this.store.dispatch(new m.a.ToggleWindow(M.a.Whiteboard,e)),e&&(this.store.dispatch(new g.W(!1)),this.store.dispatch(new m.a.SetWhiteboardEnabled(!0)))}showLabels(e){const t=this.store.selectSnapshot(h.a.getUI);e=Object(w.isNil)(e)?!t.labels.shown:e,t.labels.shown=e,this.store.dispatch(new m.a.SetUI(t))}toggleLabels(e){this.store.dispatch(new g.Y(e))}toggleSearch(e=E.a.List,t){this.store.selectSnapshot(_.a.getBreakpoint);const n=this.store.selectSnapshot(h.a.getUI);n.search.status=(t=null==t?!(n.search.status===b.a.Show):t)?b.a.Show:b.a.Hide,t&&(n.nodeInfo.status=b.a.Hide),this.store.dispatch(new m.a.SetSearchDisplayMode(e)),this.store.dispatch(new m.a.SetUI(n))}toggleNodeInfo(e){this.toggleInfoLayout("nodeInfo",e)}toggleLabelInfo(e){this.toggleInfoLayout("labelInfo",e)}toggleInfoLayout(e,t){const n=this.store.selectSnapshot(h.a.getUI);(t=null==t?n[e].status===b.a.Hide:t)?(n[e].status=b.a.Show,["nodeInfo","labelInfo"].filter(t=>t!==e).forEach(e=>n[e].status=b.a.Hide)):n[e].status=b.a.Hide,this.store.dispatch(new m.a.SetUI(n))}delegateNodeClick(e,t){if(this.clearSelectedLabel(),e||t.srcEvent.shiftKey)if(t.srcEvent.shiftKey||this.store.selectSnapshot(h.a.getMultiPickModeEnabled))this.checkNode(e);else switch(this.store.selectSnapshot(s.a.getActiveTool)){case d.a.Hide:this.hideNode(e);break;case d.a.Select:this.selectNode(e);break;case d.a.Isolate:this.isolateNode(e);break;case d.a.Fade:this.fadeNode(e)}else this.clearSelectedNodes()}clearSelectedLabel(){this.store.dispatch(new y.k)}clearSelectedNodes(){this.store.dispatch(new I.a.UpdateNodeSelected),this.store.dispatch(new I.a.UpdateNodesChecked(!1))}clearFadedNodes(){const e=this.store.selectSnapshot(v.a.getSelectedChapterId);this.store.dispatch(new T.a.UndoAll(e))}checkNode(e,t){void 0!==e&&(null==t&&(t=this.store.selectSnapshot(u.a.getNodes)[e.id].checked),this.store.dispatch(new I.a.UpdateNodesChecked(!t,[e.id])),this.store.dispatch(new I.a.UpdateNodeSelected(e.id)))}fadeNode(e){this.store.dispatch(new I.a.UpdateNodesPaint(f.b,[e.id]))}isolateNode(e){this.store.dispatch(new I.a.UpdateNodesShown(!1)),this.store.dispatch(new I.a.UpdateNodesShown(!0,[e.id]))}selectNode(e){const t=!this.store.selectSnapshot(u.a.getNodes)[e.id].checked;this.store.dispatch(new I.a.UpdateNodesChecked(!1)),t&&(this.store.dispatch(new I.a.UpdateNodesChecked(!0,[e.id])),this.store.dispatch(new I.a.UpdateNodeSelected(e.id))),this.store.dispatch(new g.g(e));const n=this.store.selectSnapshot(h.a.getNodeInfoFallback),i=this.store.selectSnapshot(h.a.getViewLanguage);this.store.dispatch(new g.q(e,n,i))}hideNode(e){this.store.dispatch(new I.a.UpdateNodesShown(!1,[e.id])),this.store.dispatch(new I.a.UpdateNodesChecked(!1))}selectLabel(e,t=!1){const{objectId:n,states:i}=e;this.store.dispatch(new y.k(e)),t&&n&&0===i.length&&this.store.dispatch(new g.j(n,!0))}initChapter(e){return se(this,void 0,void 0,(function*(){const t=this.engineService.createViewGraph({},!1);this.store.dispatch(new g.E(t)),this.store.selectSnapshot(ie.a.getChapterCameraEnabled)&&this.store.dispatch(new O.l(e.camera.location,e.camera.action===P.a.FlyTo,void 0,e.camera.rotationCenter))}))}playChapterFromStart(){this.store.dispatch(new g.p)}resetCamera(){const e=this.store.selectSnapshot(v.a.getSelectedChapter);e&&this.store.dispatch(new O.l(e.camera.location))}resetChapter(){this.resetCamera();const e=this.store.selectSnapshot(v.a.getSelectedChapterId);this.store.dispatch(new T.a.UndoAll(e)).subscribe(()=>{this.liveAnnouncer.announce("reset complete")}),this.store.dispatch(new I.a.UpdateNodesChecked(!1)),this.store.dispatch(new y.h)}resetLayout(){const{ui:e}=this.store.selectSnapshot(h.a);this.layoutService.isUIHidden()?Object.keys(e).forEach(t=>{e[t].status=b.a.Hide}):(Object.keys(e).forEach(t=>{e[t].status=b.a.Show}),e.search.status=b.a.Hide,e.tools.status=b.a.Hide,e.nodeInfo.status=b.a.Hide,e.labelInfo.status=b.a.Hide,e.media.status=b.a.Hide,e.visibilityLayers.status=b.a.Hide),this.store.dispatch(new m.a.SetUI(e))}undo(){this.store.dispatch(new T.a.Undo(this.store.selectSnapshot(v.a.getSelectedChapterId))).subscribe(()=>{this.liveAnnouncer.announce("undo complete")})}redo(){this.store.dispatch(new T.a.Redo(this.store.selectSnapshot(v.a.getSelectedChapterId))).subscribe(()=>{this.liveAnnouncer.announce("redo complete")})}toggleAnimation(){const e=!this.store.selectSnapshot(s.a.getAnimationPlaying);this.store.dispatch(new g.W(e))}toggleAudio(){const e=this.store.selectSnapshot(s.a.getPlayAudio);this.store.dispatch(new g.n(!e))}toggleToolbar(e){const t=this.store.selectSnapshot(h.a.getUI);t.media.status=b.a.Hide,t.tools.status=b.a.Hide,t.toolbar.status=b.a.Hide,t.visibilityLayers.status=b.a.Hide,"none"!==e?t[e].status=b.a.Show:this.selectTool(d.a.Select),this.store.dispatch(new m.a.SetUI(t))}closeToolbar(){const e=this.store.selectSnapshot(h.a.getUI);e.media.status=b.a.Hide,e.tools.status=b.a.Hide,e.visibilityLayers.status=b.a.Hide,this.selectTool(d.a.Select),this.store.dispatch(new m.a.SetUI(e))}normalizeQueryParams(e){const t=Object.assign({},e);return{id:x(t),type:(n=t,x(n).includes("/")?"module":"bookmark"),lang:e.lang};var n}sanitizeRouteId(e){return e=e.replace(/\.json$/,""),this.location.replaceState("view","?id="+e),e}openInNewTab(){const e=window.document.location.href;window.open(e)}getComputedTransform(e){const t=getComputedStyle(e).transform.replace("matrix3d","").replace("matrix","").replace("(","").replace(")","").split(",").map(e=>e.trim()).map(e=>parseInt(e,10)),n=16===t.length?t[12]:t[4],i=16===t.length?t[13]:t[5];return Number.isNaN(n)||Number.isNaN(i)?null:{x:n,y:i}}inferDrawerMode(e){let t=S.a.Content;return e.nodeInfo.status===b.a.Show?t=S.a.NodeInfo:e.labelInfo.status===b.a.Show&&(t=S.a.LabelInfo),t}setUI(e){var t;let n=null!==(t=e.baseUIConfig)&&void 0!==t?t:new A.a;n=Object(A.h)(n,e.apiUIConfig),n=Object(A.h)(n,e.urlUIConfig),n=Object(A.h)(n,e.chapterUIConfig),e.quizUIConfig&&(n=Object(A.h)(n,e.quizUIConfig,!0));const i=this.store.selectSnapshot(h.a.getUI),a=Object(A.d)(i,n);this.store.dispatch(new m.a.SetUI(a))}setViewLanguage(e="en"){this.store.dispatch(new m.a.SetViewLanguage(e))}setAnatomyDescriptionFallback(e){this.store.dispatch(new m.a.SetNodeInfoConfig(e))}}return e.\u0275fac=function(t){return new(t||e)(j.Zb(N.b),j.Zb(i.h),j.Zb(q.k),j.Zb(k),j.Zb(C.a),j.Zb(L.a),j.Zb(F.b),j.Zb(ae.i))},e.\u0275prov=j.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},XAAL:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e=0,t=0,n=0,i=0,a=0,s=!1){this.zoom=e,this.panX=t,this.panY=n,this.rotateX=i,this.rotateY=a,this.applyFriction=s}}},Xk3F:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return h})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return f})),n.d(t,"g",(function(){return y}));var i=n("LvDl"),a=n("qA9Q"),s=n("7b4e"),o=n("2o60"),r=n("6L7E"),c=n("3fyd");const l="Next Question";function p(e){const t=e.map(e=>(e.quizQuestions||[]).map(t=>Object.assign(Object.assign({},t),{chapterId:t.chapterId||e.id})));return[].concat(...t)}function u(e){const t={id:s.a.idWithPrefix("question"),chapterId:"",type:e,questionPrompt:[Object(a.a)("")],data:{},explanation:[Object(a.a)("")],nextLabel:"",showChapterLabels:!1,sceneConfig:{}};switch(e){case c.a.MultipleChoice:const e=[d(),d()];return Object.assign(Object.assign({},t),{data:{correctAnswer:e[0].value,options:e}});case c.a.SelectAnatomy:return Object.assign(Object.assign({},t),{data:{showAnswerList:!0,selectType:"all",correctAnswer:[]}});case c.a.LabelAnatomy:return Object.assign(Object.assign({},t),{data:{correctAnswer:[],options:[]}});case c.a.Instructions:return Object.assign({},t)}}function d(e=""){return{value:s.a.idWithPrefix("question-option"),label:e}}function g(e){return{value:s.a.idWithPrefix("question-option"),label:e}}function h(e,t,n){const a=new r.a(e.label);a.id=s.a.idWithPrefix("quiz-label");const c=a.hideWire?20:32;return a.title=Object(i.trim)(e.label),a.offset=[c,0],a.objectId=t.objectId,a.barycentric=[t.barycentric[0],t.barycentric[1],t.barycentric[2]],a.pos=[t.worldPos[0],t.worldPos[1],t.worldPos[2]],a.primitiveIndex=t.primitiveIndex,a.renderableIndex=t.renderableIndex||0,a.dir=n,a.occludable=!0,a.shown=!0,a.pinType=o.a.Sequential,a}function b(e){return"string"==typeof e.data.correctAnswer?[e.data.correctAnswer]:e.data.correctAnswer}function m(e,t){const n=b(e);switch(e.type){case c.a.LabelAnatomy:return Object(i.isEqual)(n,t);case c.a.MultipleChoice:return Object(i.isEqual)(n.sort(),t.sort());case c.a.SelectAnatomy:if(void 0===e.data.selectType||"all"===e.data.selectType)return Object(i.isEqual)(n.sort(),t.sort());if("any"===e.data.selectType)return 0===Object(i.difference)(t,n).length&&t.length>0}}function f(e,t){const n=e.filter(e=>e.type!==c.a.Instructions),i=e.reduce((e,n)=>(e[n.id]=function(e,t){const n=e.find(e=>e.questionId===t);return n?n.answer:void 0}(t,n.id),e),{}),a=e.reduce((e,t)=>(e[t.id]=b(t),e),{}),s=n.filter(e=>{const t=i[e.id];return m(e,void 0===t?[]:"string"==typeof t?[t]:t)}),o=e.length,r=n.length,l=s.length,p=o-l;return{score:o>0?Math.round(l/r*100):0,total:o,scorableTotal:r,correctTotal:l,incorrectTotal:p,questionAnswers:i,correctQuestionAnswers:a}}function y(e){switch(Object(i.get)(e,"type","")){case c.a.MultipleChoice:const t=Object(i.get)(e,"data.correctAnswer","");return t&&""!==t;case c.a.SelectAnatomy:case c.a.LabelAnatomy:return Object(i.get)(e,"data.correctAnswer",[]).length>0;default:return!0}}},XoCC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("fXoL"),a=n("ofXK");function s(e,t){if(1&e&&(i.Vb(0,"div",3),i.Pc(1),i.Ub()),2&e){const e=i.gc();i.Db(1),i.Rc(" ",e.label," ")}}const o=function(e,t,n){return[e,t,n]};var r=function(e){return e.Small="small",e.Medium="medium",e.Large="large",e.Huge="huge",e}({}),c=function(e){return e.Horizontal="horizontal",e.Vertical="vertical",e}({}),l=function(e){return e.Inline="inline",e.Block="block",e.Fill="fill",e}({});let p=(()=>{class e{constructor(){this.size=r.Medium,this.label="",this.direction=c.Horizontal,this.render=l.Fill}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-spinner"]],inputs:{size:"size",label:"label",direction:"direction",render:"render"},decls:3,vars:6,consts:[[1,"spinner","spinner--horizontal",3,"ngClass"],[1,"spinner__circle"],["class","spinner__label",4,"ngIf"],[1,"spinner__label"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Qb(1,"div",1),i.Nc(2,s,2,1,"div",2),i.Ub()),2&e&&(i.mc("ngClass",i.rc(2,o,"spinner--"+t.size,"spinner--"+t.render,"spinner--"+t.direction)),i.Db(2),i.mc("ngIf",t.label.length))},directives:[a.m,a.p],styles:['@-webkit-keyframes spinner{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spinner{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.spinner[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center}.spinner--small[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%], .spinner--small[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%]:after{width:11px;height:11px}.spinner--small[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{font-size:10px}.spinner--medium[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%], .spinner--medium[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%]:after{width:14px;height:14px}.spinner--medium[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{font-size:10px}.spinner--large[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%], .spinner--large[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%]:after{width:28px;height:28px}.spinner--large[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{font-size:14px}.spinner--huge[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%], .spinner--huge[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%]:after{width:44px;height:44px}.spinner--huge[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{font-size:16px}.spinner--horizontal[_ngcontent-%COMP%]{flex-direction:row}.spinner--vertical[_ngcontent-%COMP%]{align-items:center;flex-direction:column}.spinner--vertical[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{padding:8px 0 0}.spinner--inline[_ngcontent-%COMP%]{display:inline-flex}.spinner--block[_ngcontent-%COMP%]{display:flex}.spinner--fill[_ngcontent-%COMP%]{display:flex;height:100%}.spinner__circle[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:50%;border:2px solid rgba(16,24,35,.1);position:relative}.spinner__circle[_ngcontent-%COMP%]:after{-webkit-animation:spinner .4s linear infinite;animation:spinner .4s linear infinite;content:" ";border-radius:50%;border-color:hsla(0,0%,100%,.2) rgba(16,24,35,.2) transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;position:absolute;display:block;width:14px;height:14px;top:-2px;left:-2px}.spinner__label[_ngcontent-%COMP%]{padding-left:8px;font-size:14px;text-transform:uppercase}.theme-dark[_nghost-%COMP%]   .spinner__label[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .spinner__label[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.2)}.theme-light[_nghost-%COMP%]   .spinner__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .spinner__label[_ngcontent-%COMP%]{color:rgba(16,24,35,.6)}'],changeDetection:0}),e})()},XoIW:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));class i{}var a=function(e){return e.DomainAlert="join_group_through_domain_alert",e.WelcomeTour="welcome_tour_alert",e.CompleteProfileAlert="complete_profile_alert",e}({})},XoU3:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fqos");class a{constructor(e){this.type=i.a.flyToObject,this.value=e}}},XqAe:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var i=n("tk/3"),a=n("MtjB"),s=n("3E0/"),o=n("IzEk"),r=n("lJxs"),c=n("5+tZ"),l=n("JIr8"),p=n("b36G"),u=n("zrlG"),d=n("cp0P"),g=n("z6cu"),h=n("LRne"),b=n("eNUT"),m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let f=(()=>{class e{}return function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([Object(p.Type)(()=>b.b),m("design:type",String)],e.prototype,"objectId",void 0),e})();class y{}var v=n("uA5T"),O=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let S=(()=>{class e{}return function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([Object(p.Type)(()=>f),Object(p.Type)(()=>v.a),Object(p.Type)(()=>y),O("design:type",String)],e.prototype,"moduleId",void 0),e})();var x=n("ZJ6O"),C=n("0FUJ"),w=n("ZR5G"),j=n("LvDl"),k=n("AcyG"),P=n("YpC8"),_=n("Mh2x"),M=n("MuXT"),I=n("Kzh2"),T=function(e){return e.Private="private",e.Group="enterprise",e.Public="public",e}({}),U=n("cQmI"),L=n("AbMW"),z=n("icKS"),A=n("ECVi"),F=n("QkH1"),D=n("fXoL");const E={headers:new i.d({"Content-Type":"application/json; charset=utf-8"})};let N=(()=>{class e{constructor(e,t,n,i,a){this.store=e,this.http=t,this.serializeModuleService=n,this.storyService=i,this.productService=a}getBookmarkData(e){return this.http.get("/search/bookmarks/data?be="+e).pipe(Object(a.a)(e=>e.pipe(Object(s.a)(1e3),Object(o.a)(3))),Object(r.a)(e=>((e=e.bookmark).moduleId=e.customData?e.customData.moduleId:e.modules.activeModules[0],Object(p.plainToClass)(S,e))))}getBookmarkModel(e){return this.http.get("/ws/search/bookmarks?eid="+e).pipe(Object(a.a)(e=>e.pipe(Object(s.a)(1e3),Object(o.a)(3))),Object(r.a)(e=>Object(p.plainToClass)(u.a,e.bookmark_info)),Object(r.a)(e=>Object(L.a)(e)))}getUserBookmarks(e,t="",n=1e4,i){const c={q:t,page_size:""+n};return Object(j.isNil)(i)||(c.is_owner=""+(i?1:0)),this.http.get("/ws/search/bookmarks/"+e,{params:c}).pipe(Object(a.a)(e=>e.pipe(Object(s.a)(1e3),Object(o.a)(3))),Object(r.a)(e=>e.map(e=>Object(p.plainToClass)(u.a,e)).map(e=>Object(L.a)(e))))}getUserConditions(e,t="",n,i=1e4){let a="";switch(e){case T.Private:a="user";break;case T.Group:a="group"}return this.http.get(`/ws/search/conditions/private?q=${t}&page_size=${i}`).pipe(Object(r.a)(e=>e.filter(e=>e.module_accessor_level===a&&(!n||e.module_accessor_id===n))),Object(r.a)(e=>Object(p.plainToClass)(u.a,e)),Object(r.a)(e=>e.map(e=>Object(L.a)(e))))}getPrivateBookmarks(e="",t=1e4){return this.getUserBookmarks(T.Private,e,t,!0)}getPrivateConditions(e=""){return this.getUserConditions(T.Private)}getOrganizationBookmarks(e,t="",n=1e4){return this.getUserBookmarks(T.Private,t,n).pipe(Object(r.a)(t=>t.filter(e=>e.tags.includes("enterprise")).filter(t=>t.group_access.some(t=>t.group_id===e))))}getOrganizationConditions(e,t=""){return this.getUserConditions(T.Group,t,e)}getOrganizationContent(e,t=""){return Object(d.a)([this.getOrganizationBookmarks(e,t),this.getOrganizationConditions(e,t)]).pipe(Object(r.a)(([e,t])=>[...e,...t]))}getPrivateContent(e=""){return Object(d.a)([this.getPrivateBookmarks(e),this.getPrivateConditions(e)]).pipe(Object(r.a)(([e,t])=>[...e,...t]))}createBookmarkStory(e){return this.serializeModuleService.serialize({},new C.a,!1,this.store.selectSnapshot(P.a.getStory),this.store.selectSnapshot(_.a.getStoryChapters),e)}getPublicBookmarks(e=""){return this.getUserBookmarks(T.Public,e)}saveBookmark(e){const t=this.getNormalizedBookmarkEntry(e);let n;return n=this.http.post(e.id?"/ws/user/bookmark/v4/update":"/ws/user/bookmark/v4/save",t,E),n.pipe(Object(c.a)(e=>this.getBookmarkModel(e.id)))}deleteBookmark(e){return this.http.delete(`/ws/user/bookmark/v4/delete?eid=${e}&app_producttype=${this.productService.productType}&app_productkey=${this.productService.productKey}`).pipe(Object(l.a)(e=>{const{error:t}=e.error,n=t?t.message:"";return Object(g.a)(n)}))}atMaxFreeBookmarkCount(){return this.http.get("/ws/user/content/limit/check?version=2").pipe(Object(l.a)(e=>Object(h.a)({limit_reached:!1})))}filterByTags(e,t,n=!1){return e.filter(e=>n?t.every(t=>e.tags.includes(t)):t.some(t=>e.tags.includes(t)))}getGalleryTags(e){if(e){const t=[],n=this.store.selectSnapshot(A.a.getUserRole),i=F.e(n,e);return e.type===w.a.Bookmark&&!i&&t.push("View Only"),e.animated&&t.push("Animated"),e.tour&&t.push("Tour"),e.quiz&&t.push("Quiz"),t}return[]}getShowcase(e){const t=[],n=this.getPrivateBookmarks("",10).pipe(Object(r.a)(e=>this.createPrivateShowcase(e)));if(t.push(n),!Object(j.isNil)(e)){const n=this.getOrganizationBookmarks(e.id,"",10).pipe(Object(r.a)(t=>this.createOrganizationShowcase(t,e)));t.push(n)}return Object(d.a)(t)}createMockBookmark(e){return Object.assign({author:"",author_first_name:"",author_last_name:"",cost:0,create_date_time:new Date,description:"",id:"",is_owner:!0,last_editor:"",last_editor_first_name:"",last_editor_last_name:"",tags:[],thumbnail_url:"",title:"",update_date_time:new Date,type:w.a.Bookmark},e?{animated:!0,tour:!0}:{})}createMockBookmarks(e){return[...Array(e).keys()].map(e=>this.createMockBookmark(e%2==0))}createPrivateShowcase(e){return{title:"Pick up where you left off",description:"",url:"/results/bookmarks?type=Private",bookmarks:e}}createOrganizationShowcase(e,t){return{title:"Recently added to "+t.name,description:"Recently added models to your Team library.",url:`/results/bookmarks?organizationId=${t.id}&type=Organization`,bookmarks:e}}translateBookmark(e,t,n,i){const a=n===w.a.Module||n===w.a.Internal?t.replace(".json",""):t;return Object(d.a)([this.storyService.getStory(e,w.a.Bookmark),this.storyService.getStoryTranslation(a,n,i)]).pipe(Object(r.a)(([e,t])=>this.storyService.translateStory(e,t)),Object(c.a)(t=>this.saveBookmark({isOwner:!0,title:t.displayName.substr(0,60),id:e,index:t})),Object(r.a)(e=>e.id),Object(l.a)(t=>404===t.status?Object(h.a)(e):Object(g.a)(t)))}getNormalizedBookmarkEntry(e){let t,n,i,a;if(e.isOwner){if(t=e.add_group_access?this.getGroupAccess(e.add_group_access):[],e.remove_group_access&&e.remove_group_access.forEach(e=>{const n=this.getNormalizeGroupAccess({group_id:e.group_id,remove:!0});t.push(n)}),n=this.getNormalizedBool(e.public_access),e.index){i={},e.index.chapters&&(i[I.a.UserGeneratedTour]=this.getNormalizedBool(e.index.chapters.length>1));const t=(e.index.tags||[]).includes("animated");i[I.a.Animated]=this.getNormalizedBool(t),i[I.a.ModeQuiz]=this.getNormalizedBool(e.viewMode===U.a.Quiz),i[I.a.ModeContent]=this.getNormalizedBool(e.viewMode===U.a.Content);const n=Object(j.get)(e.index,"quizSettings.enabled",!1);i[I.a.Quiz]=this.getNormalizedBool(n)}a=this.getNormalizedBool(e.is_content_copy)}return{eid:e.id,name:e.title,description:e.description,index:e.index,group_access:t,public_access:n,flags:i,is_content_copy:a,app_producttype:this.productService.productType,app_productkey:this.productService.productKey}}getGroupAccess(e){return e.map(e=>this.getNormalizeGroupAccess(e))}getNormalizeGroupAccess(e){const{group_id:t,group_name:n,member_edit:i,visible:a,remove:s}=e;return{group_id:t,group_name:n,member_edit:this.getNormalizedBool(i),visibility:this.getNormalizedBool(a),remove:this.getNormalizedBool(s)}}getNormalizedBool(e){return!0===e?"1":!1===e?"0":""}}return e.\u0275fac=function(t){return new(t||e)(D.Zb(k.h),D.Zb(i.b),D.Zb(x.a),D.Zb(M.a),D.Zb(z.a))},e.\u0275prov=D.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"Y+XQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var i=n("fXoL"),a=n("ofXK"),s=n("0njA");function o(e,t){if(1&e&&i.Qb(0,"app-icon",3),2&e){const e=i.gc();i.mc("icon",e.icon)}}var r=function(e){return e.Blue="blue",e.Purple="purple",e.Green="green",e.Gray="gray",e}({});let c=(()=>{class e{constructor(){this.label="",this.icon="",this.color=r.Blue}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-tag"]],inputs:{label:"label",icon:"icon",color:"color"},decls:4,vars:3,consts:[[1,"tag",3,"ngClass"],["class","mr-2",3,"icon",4,"ngIf"],[1,"text-nowrap"],[1,"mr-2",3,"icon"]],template:function(e,t){1&e&&(i.Vb(0,"span",0),i.Nc(1,o,1,1,"app-icon",1),i.Vb(2,"span",2),i.Pc(3),i.Ub(),i.Ub()),2&e&&(i.mc("ngClass","tag--"+t.color),i.Db(1),i.mc("ngIf",t.icon),i.Db(2),i.Qc(t.label))},directives:[a.m,a.p,s.a],styles:[".tag[_ngcontent-%COMP%]{align-items:center;border-radius:10px;color:#fff;display:inline-flex;font-size:10px;height:20px;padding:0 8px;text-transform:uppercase}.tag[_ngcontent-%COMP%], .tag--blue[_ngcontent-%COMP%]{background-color:#2d72dc}.tag--gray[_ngcontent-%COMP%]{background-color:#374a68}.tag--green[_ngcontent-%COMP%]{background-color:#3f7d84}.tag--purple[_ngcontent-%COMP%]{background-color:#925bc3}"],changeDetection:0}),e})()},Y7Bv:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Drawer="drawer",e.Column="column",e}({})},Y8QC:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("XNiG"),a=n("xgIS"),s=n("1G5W"),o=n("fXoL"),r=n("ofXK");const c=["labelEl"];function l(e,t){if(1&e&&(o.Vb(0,"div",5),o.Pc(1),o.Ub()),2&e){const e=o.gc();o.Hb("text-uppercase",e.uppercase),o.Db(1),o.Rc(" ",e.label," ")}}const p=["*",[["","form-field-help",""]]],u=function(e,t,n,i){return{"field--light":e,"field--dark":t,"field--inline":n,"field--compact":i}},d=["*","[form-field-help]"];let g=(()=>{class e{constructor(){this.display="block",this.theme="dark",this.uppercase=!0,this.isCompact=!1,this.ngUnsubscribe=new i.a}ngOnInit(){}ngAfterViewInit(){this.labelEl.nativeElement.querySelectorAll("[contenteditable]").length>0&&Object(a.a)(this.labelEl.nativeElement,"click").pipe(Object(s.a)(this.ngUnsubscribe)).subscribe(e=>{e.preventDefault()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["app-form-field"]],viewQuery:function(e,t){if(1&e&&o.Jc(c,!0),2&e){let e;o.xc(e=o.dc())&&(t.labelEl=e.first)}},inputs:{label:"label",display:"display",theme:"theme",uppercase:"uppercase",isCompact:"isCompact"},ngContentSelectors:d,decls:8,vars:8,consts:[["data-test","formField",1,"field",3,"ngClass"],["labelEl",""],["class","field__label text-10","data-test","formFieldLabel",3,"text-uppercase",4,"ngIf"],[1,"field__input"],[1,"field__help","text-dim","text-11"],["data-test","formFieldLabel",1,"field__label","text-10"]],template:function(e,t){1&e&&(o.lc(p),o.Vb(0,"div",0),o.Vb(1,"label",null,1),o.Nc(3,l,2,3,"div",2),o.Vb(4,"div",3),o.kc(5),o.Vb(6,"div",4),o.kc(7,1),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&e&&(o.mc("ngClass",o.sc(3,u,"light"===t.theme,"dark"===t.theme,"inline"===t.display,t.isCompact)),o.Db(1),o.Eb("aria-label",t.label),o.Db(2),o.mc("ngIf",t.label))},directives:[r.m,r.p],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.field[_ngcontent-%COMP%]{padding-bottom:16px;display:block;width:100%}.field__input[_ngcontent-%COMP%]{margin-top:4px}.field--light[_ngcontent-%COMP%]   .field__label[_ngcontent-%COMP%]{color:#374a68}.field--dark[_ngcontent-%COMP%]   .field__label[_ngcontent-%COMP%]{color:#96a8c0}.field--inline[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:auto}.field--inline[_ngcontent-%COMP%]   .field__label[_ngcontent-%COMP%]{margin-right:8px}.field--inline[_ngcontent-%COMP%]   .field__input[_ngcontent-%COMP%]{margin-top:auto}.field--compact[_ngcontent-%COMP%]{padding-bottom:0}.field__help[_ngcontent-%COMP%]:not(:empty){padding-top:8px}"],changeDetection:0}),e})()},YLgZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("AcyG");class a{}var s,o=n("TATr"),r=n("937/"),c=n("XAAL"),l=n("vkgz"),p=n("Mh2x"),u=n("fXoL"),d=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const h={storedCameras:{},cameraMotion:new c.a,panMode:"rotate",zoomed:!1,lockCamera:!1,cameraFlyTo:void 0,chapterCameraEnabled:!0};let b=(()=>{let e=s=class{constructor(e,t){this.cameraService=e,this.store=t}static getStoredCamera(e){return Object(i.i)([s],t=>t.storedCameras[e]||null)}static getCameraMotion(e){return e.cameraMotion}static getPanMode(e){return e.panMode}static getZoomed(e){return e.zoomed}static getLockCamera(e){return e.lockCamera}static getChapterCameraEnabled(e){return e.chapterCameraEnabled}storeCamera(e,t){const n=t.camera||this.cameraService.getCamera(),i=e.getState().storedCameras;i[t.id]=Object.assign({},n),e.patchState({storedCameras:Object.assign({},i)})}clearCamera(e,t){const n=e.getState().storedCameras;delete n[t.id],e.patchState({storedCameras:Object.assign({},n)})}setCameraFlyTo(e,t){e.patchState(immer.produce(e.getState(),e=>{e.cameraFlyTo=t.camera}))}applyCameraPatch(e,t){const n=immer.applyPatches(e.getState(),t.patches);e.patchState(n);const i=void 0===n.cameraFlyTo?this.store.selectSnapshot(p.a.getChapterCamera):n.cameraFlyTo;e.dispatch(new o.l(i,!0,1))}moveCamera(e,t){e.patchState({cameraMotion:Object.assign({},t.cameraMotion)})}resetCamera(e,t){return this.cameraService.resetCamera().pipe(Object(l.a)(()=>{e.patchState({cameraMotion:new c.a})}))}zoomCamera(e,t){const{cameraMotion:n}=e.getState();n.zoom=t.value,e.patchState({cameraMotion:Object.assign({},n)})}panCameraX(e,t){const{cameraMotion:n}=e.getState();n.panX=t.value,e.patchState({cameraMotion:Object.assign({},n)})}panCameraY(e,t){const{cameraMotion:n}=e.getState();n.panY=t.value,e.patchState({cameraMotion:Object.assign({},n)})}rotateCameraX(e,t){const{cameraMotion:n}=e.getState();e.patchState({cameraMotion:Object.assign(Object.assign({},n),{rotateX:t.value})})}rotateCameraY(e,t){const{cameraMotion:n}=e.getState();n.rotateY=t.value,e.patchState({cameraMotion:Object.assign({},n)})}SetCameraMode(e,t){e.patchState({panMode:t.mode})}setZoomed(e,t){e.patchState({zoomed:t.zoomed})}lockCamera(e,t){e.patchState({lockCamera:t.lock})}setChapterCameraEnabled(e,t){this.cameraService.setChapterCameraEnabled(t.enabled),e.patchState({chapterCameraEnabled:t.enabled})}};return e.\u0275fac=function(t){return new(t||e)(u.Zb(r.a),u.Zb(i.h))},e.\u0275prov=u.Lb({token:e,factory:e.\u0275fac}),d([Object(i.a)(o.r),g("design:type",Function),g("design:paramtypes",[Object,o.r]),g("design:returntype",void 0)],e.prototype,"storeCamera",null),d([Object(i.a)(o.b),g("design:type",Function),g("design:paramtypes",[Object,o.b]),g("design:returntype",void 0)],e.prototype,"clearCamera",null),d([Object(i.a)(o.m),g("design:type",Function),g("design:paramtypes",[Object,o.m]),g("design:returntype",void 0)],e.prototype,"setCameraFlyTo",null),d([Object(i.a)(o.a),g("design:type",Function),g("design:paramtypes",[Object,o.a]),g("design:returntype",void 0)],e.prototype,"applyCameraPatch",null),d([Object(i.a)(o.d),g("design:type",Function),g("design:paramtypes",[Object,o.d]),g("design:returntype",void 0)],e.prototype,"moveCamera",null),d([Object(i.a)(o.h),g("design:type",Function),g("design:paramtypes",[Object,o.h]),g("design:returntype",void 0)],e.prototype,"resetCamera",null),d([Object(i.a)(o.s),g("design:type",Function),g("design:paramtypes",[Object,o.s]),g("design:returntype",void 0)],e.prototype,"zoomCamera",null),d([Object(i.a)(o.f),g("design:type",Function),g("design:paramtypes",[Object,o.f]),g("design:returntype",void 0)],e.prototype,"panCameraX",null),d([Object(i.a)(o.g),g("design:type",Function),g("design:paramtypes",[Object,o.g]),g("design:returntype",void 0)],e.prototype,"panCameraY",null),d([Object(i.a)(o.j),g("design:type",Function),g("design:paramtypes",[Object,o.j]),g("design:returntype",void 0)],e.prototype,"rotateCameraX",null),d([Object(i.a)(o.k),g("design:type",Function),g("design:paramtypes",[Object,o.k]),g("design:returntype",void 0)],e.prototype,"rotateCameraY",null),d([Object(i.a)(o.n),g("design:type",Function),g("design:paramtypes",[Object,o.n]),g("design:returntype",void 0)],e.prototype,"SetCameraMode",null),d([Object(i.a)(o.q),g("design:type",Function),g("design:paramtypes",[Object,o.q]),g("design:returntype",void 0)],e.prototype,"setZoomed",null),d([Object(i.a)(o.c),g("design:type",Function),g("design:paramtypes",[Object,o.c]),g("design:returntype",void 0)],e.prototype,"lockCamera",null),d([Object(i.a)(o.p),g("design:type",Function),g("design:paramtypes",[Object,o.p]),g("design:returntype",void 0)],e.prototype,"setChapterCameraEnabled",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getCameraMotion",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getPanMode",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getZoomed",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getLockCamera",null),d([Object(i.f)(),g("design:type",Function),g("design:paramtypes",[a]),g("design:returntype",void 0)],e,"getChapterCameraEnabled",null),e=s=d([Object(i.g)({name:"engineCamera",defaults:h})],e),e})()},YQYg:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));class i{}class a{}class s{}},"Yg7+":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));const i=[{icon:"search",tag:"Heart",params:{categoryId:"all",query:"Heart",type:"Category"}},{icon:"search",tag:"Brain",params:{categoryId:"all",query:"Brain",type:"Category"}},{icon:"search",tag:"Cardiology",params:{categoryId:"Cardiology",type:"Category"}},{icon:"search",tag:"COVID-19",params:{categoryId:"all",query:"COVID-19",type:"Category"}},{icon:"search",tag:"Treatments",params:{categoryId:"all",query:"Treatments",type:"Category"}},{icon:"search",tag:"Eye",params:{categoryId:"all",query:"Eye",type:"Category"}},{icon:"search",tag:"Skull",params:{categoryId:"all",query:"Skull",type:"Category"}},{icon:"search",tag:"Nervous System",params:{categoryId:"all",query:"Nervous System",type:"Category"}},{icon:"search",tag:"Muscles",params:{categoryId:"all",query:"Muscles",type:"Category"}},{icon:"search",tag:"Skeleton",params:{categoryId:"all",query:"Skeleton",type:"Category"}},{icon:"search",tag:"Digestive System",params:{categoryId:"all",query:"Digestive System",type:"Category"}}],a=["assets/images/hero/biodigital-human-muscular-system.jpg","assets/images/hero/biodigital-human-cardiovascular-system.jpg","assets/images/hero/biodigital-human-nervous-system.jpg","assets/images/hero/biodigital-human-multiple-systems.jpg"],s=6e3},"Yl/Z":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("qpAl"),s=n.n(a),o=n("xgIS"),r=n("VRyK");!function(e){function t(e){a()&&(e||(e=document.body),s.a.prefixed("requestFullscreen",e)())}function n(){a()&&s.a.prefixed("exitFullscreen",document)()}function i(){return s.a.fullscreen&&s.a.prefixed("fullscreenEnabled",document)}function a(){return!!i()||(console.warn("Fullscreen is not enabled"),!1)}function c(){return s.a.prefixed("fullscreenElement",document)}e.toggleFullscreen=function(e){null===c()?t(e):n()},e.requestFullscreen=t,e.exitFullscreen=n,e.canFullscreen=i,e.checkFullscreenSupport=a,e.getFullscreenElement=c,e.isFullscreen=function(){return null!=c()},e.onFullscreenChange=function(){const e="mozfullscreenchange webkitfullscreenchange MSFullscreenChange fullscreenchange".split(" ").map(e=>Object(o.a)(document.body,e));return Object(r.a)(...e)}}(i||(i={}))},YpC8:function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var i=n("AcyG"),a=n("YQYg"),s=n("Vv7R"),o=n("MuXT"),r=n("Mh2x"),c=n("q8pu"),l=n("LvDl"),p=n("7b4e");function u(e,t,n){const i=function(e,t){const n={};for(const i of e){const e=Object.keys(t[i]);for(const t of e)n[t]=!1}return n}(t,n);return e.map(e=>Object.assign(Object.assign({},e),{showObjects:Object.assign(Object.assign({},e.showObjects),i),selectObjects:Object.assign(Object.assign({},e.selectObjects),i),pickThroughObjects:Object.assign(Object.assign({},e.pickThroughObjects),i)}))}var d=n("ZR5G"),g=n("ThaW");function h(e,t){return e.map(e=>{if(!Object(l.isEmpty)(e.lights))return e;const n={libraries:[...t],lights:[]};return Object.assign(Object.assign({},e),{lights:n})})}var b=n("FKtB");function m(e){return e.customData&&e.customData.particleSystems?e.customData.particleSystems.reduce((e,t)=>(e[b.a.getParticleIdRoot(t.id)]=t.id,e),{}):{}}function f(e,t){return e.customData&&e.customData.particleSystems?e.customData.particleSystems.map(e=>{const n=b.a.getParticleIdRoot(e.id);return Object.assign(Object.assign({},e),{id:t[n]})}):[]}function y(e,t){return e.map(e=>(e.customData&&e.customData.particleSystems&&(e.customData.particleSystems=e.customData.particleSystems.map(e=>t[b.a.getParticleIdRoot(e)])),e))}function v(e,t){return e.map(e=>e.id).reduce((n,i)=>(e.some(e=>e.id===i&&Object(l.get)(e,"customData.particleSystems",[]).length>0)&&(n[i]=t),n),{})}function O(e,t,n,i,a=d.a.Bookmark,s=p.a.idWithPrefix){const{sceneGraph:o,graphsMerged:r,objectIdsUniqueToNew:c,objectIdsUniqueToOriginal:O}=function(e,t){const n=e=>void 0!==e.objectId,[i,a]=Object(l.partition)(e,n),[s,o]=Object(l.partition)(t,n),r=function(e,t){return t.reduce((t,n)=>{for(const i of e)Object(l.isEqual)(i,n)||t.push(n);return t},e)}(a,o),{newSceneGraph:c,graphsMerged:p,objectIdsUniqueToNew:u,objectIdsUniqueToOriginal:d}=function(e,t){const n=e.reduce((e,t)=>(e[t.objectId]=t,e),{}),i=t.reduce((e,t)=>{if(void 0===e.nodes[t.objectId])return e.nodes[t.objectId]=t,e;if(!Object(l.isEqual)(t,e.nodes[t.objectId])){const n=function(e,t){const n={},i={};return{root:function e(t,a){if(t.objectId!==a.objectId)return n[a.objectId]=!0,[t,a];if(void 0===t.objects&&a.objects){for(const e of a.objects)n[e.objectId]=!0;return[Object.assign({},a)]}if(t.objects&&void 0===a.objects){for(const e of t.objects)i[e.objectId]=!0;return[Object.assign({},t)]}if(void 0===t.objects&&void 0===a.objects)return[Object.assign({},t)];const s=[];for(const n of t.objects){const t=a.objects.find(e=>e.objectId===n.objectId);t?s.push(e(n,t)):(i[n.objectId]=!0,s.push(n))}for(const i of a.objects)t.objects.find(e=>e.objectId===i.objectId)||(n[i.objectId]=!0,s.push(i));const o=Object.assign({},t);return o.objects=Object(l.flatten)(s),[o]}(e,t),objectIdsUniqueToNew:n,objectIdsUniqueToOriginal:i}}(e.nodes[t.objectId],t);e.nodes[t.objectId]=n.root[0],e.graphsMerged.push(t.objectId),e.objectIdsUniqueToNew[t.objectId]=n.objectIdsUniqueToNew,e.objectIdsUniqueToOriginal[t.objectId]=n.objectIdsUniqueToOriginal}return e},{nodes:n,graphsMerged:[],objectIdsUniqueToNew:{},objectIdsUniqueToOriginal:{}});return{newSceneGraph:Object.keys(i.nodes).reduce((e,t)=>(e.push(i.nodes[t]),e),[]),graphsMerged:i.graphsMerged,objectIdsUniqueToNew:i.objectIdsUniqueToNew,objectIdsUniqueToOriginal:i.objectIdsUniqueToOriginal}}(i,s);return{sceneGraph:[...r,...c],graphsMerged:p,objectIdsUniqueToNew:u,objectIdsUniqueToOriginal:d}}(e.sceneGraph,n.sceneGraph),S=function(e,t){const n=(e,t)=>Object(l.uniq)([...e,...t]);return{lights:n(e.lights,t.lights),tweens:n(e.tweens,t.tweens),reflections:n(e.reflections,t.reflections)}}(e.assetLibraries,n.assetLibraries),x=function(e,t,n,i){e=e||{},t=t||{};const a=(e,t)=>t.includes("/")?t:`${function(e){return Object(g.a)(e)===d.a.Bookmark?e:e.split("/").pop()}(e)}/${t}`;return Object.assign(Object.assign({},Object(l.mapKeys)(e,(e,t)=>a(n,t))),Object(l.mapKeys)(t,(e,t)=>a(i,t)))}(e.reflections,n.reflections,t,i),{colorRecipes:C,newColorRecipeIds:w}=function(e,t,n){e=e||{},t=t||{};const i=Object.keys(t).reduce((e,i)=>{const a=n("color-recipe-"+i);return e.newColorRecipeIds[i]=a,e.colorRecipes[a]=t[i],e},{colorRecipes:{},newColorRecipeIds:{}});return{colorRecipes:Object.assign(Object.assign({},e),i.colorRecipes),newColorRecipeIds:i.newColorRecipeIds}}(e.colorRecipes,n.colorRecipes,s),j=h(e.chapters,e.assetLibraries.lights),k=h(n.chapters,n.assetLibraries.lights),P=function(e,t,n,i,a){const s=m(e),o=Object.values(s),r=m(t);for(const l in r)if(r.hasOwnProperty(l)&&o.includes(r[l])){const e=b.a.generateParticleId(l,a);r[l]=e}const c=[...f(e,s),...f(t,r)],p=y(n,s),u=y(i,r),d=Object.assign(Object.assign({},v(p,s)),v(u,r));return{mergedParticles:c,currentChapters:p,importedChapters:u,tweenParticleLookup:Object(l.pickBy)(d,(e,t)=>!Object(l.isEmpty)(e))}}(e,n,u(j,r,c),u(k,r,O).map(e=>Object.assign(Object.assign({},e),{id:s("chapter")})),s),_=function(e,t){return e.map(e=>{if(Object(l.isEmpty)(e.colorRecipeObjects))return e;const n=Object.keys(e.colorRecipeObjects).reduce((n,i)=>(n[t[i]]=e.colorRecipeObjects[i],n),{});return e.colorRecipeObjects=n,e})}(P.importedChapters,w),M=[...P.currentChapters,..._],I=Object.assign(Object.assign({},e.customData),{particleSystems:P.mergedParticles}),T="module"===a?e.tags:[];return Object.assign(Object.assign({},e),{assetLibraries:S,chapters:M,sceneGraph:o,customData:I,tags:T,reflections:x,colorRecipes:C,stateId:Object(l.uniq)([...e.stateId,...n.stateId]),tweenParticleLookup:P.tweenParticleLookup})}var S,x=n("Wd1f"),C=n("AytR"),w=n("ZJ6O"),j=n("0FUJ"),k=n("gm/O"),P=n("eW6i"),_=n("gQBz"),M=n("g408"),I=n("0E12"),T=n("WUhe"),U=n("Cfvw"),L=n("cp0P"),z=n("DTUA"),A=n("3E0/"),F=n("Xk3F"),D=n("Vrox"),E=n("VJvM"),N=n("h8op"),R=n("fXoL"),V=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},B=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const H={loading:!1,incoming:{id:void 0,type:void 0},storyId:void 0,storyType:void 0,loadingChunk:null,loadChunks:[],loadChunksRemaining:[],thumbnailLookup:[]};let Q=(()=>{let e=S=class{constructor(e,t,n,i,a){this.store=e,this.storyService=t,this.engineService=n,this.serializeModuleService=i,this.storageService=a,this.reload=C.a.native}static getStory(e){return e.story}static getStoryId(e){return e.storyId}static getLoadingChunk(e){return e.loadingChunk}static getLoadChunks(e){return e.loadChunks}static getLoadChunksRemaining(e){return e.loadChunksRemaining}static getStoryInfo(e){return{id:e.storyId,type:e.storyType}}static getIncomingStoryInfo(e){return e.incoming}static getStoryTags(e){return Object(l.get)(e,"story.tags",[])}setStoryText(e,t){const n=e.getState().story;n&&e.patchState({story:Object.assign(Object.assign({},n),{displayName:t.displayName})})}setStoryTags(e,{tags:t}){const n=e.getState().story;n&&e.patchState({story:Object.assign(Object.assign({},n),{tags:t})})}setStoryLightLibs(e,t){const n=e.getState().story;n&&e.patchState({story:Object.assign(Object.assign({},n),{assetLibraries:Object.assign(Object.assign({},n.assetLibraries),{lights:t.lightLibs})})})}setStory(e,t){e.patchState({story:t.story})}SetStoryId(e,t){e.patchState({storyId:t.id})}setIncomingStory(e,t){const n=e.getState(),{id:i,type:a,reset:o}=t;i!==n.storyId||o?e.patchState({incoming:{id:i,type:a}}):o&&e.dispatch(new s.a(t.id,n.story,t.type))}loadStory(e,t){(t.preview?Object(U.a)(this.storageService.getDatabaseItem(z.a.PreviewStory)):this.storyService.getStory(t.id,t.type,t.lang)).subscribe(n=>{e.dispatch(new s.i(n,t.id,t.type))},()=>{!0===this.reload?(this.reload=!1,this.loadStory(e,t)):e.dispatch(new s.h(t.id,t.type))})}loadStorySuccess(e,t){this.storyService.unloadStory(null).pipe(Object(A.a)(0)).subscribe(()=>{e.dispatch(new s.a(t.id,t.story,t.type))})}buildStoryWorkflow(e,t,n,i,a=0,o=new Map){this.storyService.buildStory(t,n,!0).subscribe(r=>{const p=this.storyService.getStoryChapters(t,i);let u=[];p.forEach(e=>{u=[...u,...e.labels]});const d=this.storyService.getLoadConfig(t,a),g=this.storyService.getStoryLoadChunks(t,d);e.patchState({storyId:t,story:n,loadChunks:g,loadChunksRemaining:g,incoming:{id:void 0,type:void 0}});const h=this.engineService.getSceneGraph(Human.scene.rootObjects),b=p.reduce((e,t)=>(e[t.id]=Object(_.a)(h,t.showObjects,t.pickThroughObjects,t.synchronization),e),{});e.dispatch(new k.a.InitNodeState(b)),e.dispatch(new k.a.SetActiveChapter(p[a].id)),e.dispatch(new E.H(p)),e.dispatch(new N.a(o)),e.dispatch(new c.q(u)),e.dispatch(new E.p(p[a]));const m=Object(l.get)(n,"tweenParticleLookup",{}),f=Object(l.get)(n,"customData.particleSystems",[]),y=p.reduce((e,t)=>(e[t.id]=Object(l.get)(t,"customData.particleSystems",[]),e),{});e.dispatch(new I.a.SetParticleState(f,y,m)),e.dispatch(new T.a.ResetQuizState),n.quizSettings&&e.dispatch(new T.a.SetQuizSettings(n.quizSettings));const v=Object(F.b)(p);e.dispatch(new T.a.SetQuestions(v)),e.dispatch(new s.b),e.dispatch(new s.f)})}importStorySuccess(e,t){const n=e.getState(),i=n.storyType,a=n.storyId,s=new j.a,o=this.store.selectSnapshot(S.getStory),c=this.store.selectSnapshot(r.a.getStoryChapters),l=M.a.makeChapterIdMap(c,!1),p=this.serializeModuleService.serialize({},s,!1,o,c,l).story,u=O(p,a,t.story,t.id,C.a.exportType),d=u.chapters.slice(p.chapters.length).reduce((e,n,i)=>(e[t.story.chapters[i].id]=n.id,e),{}),g=t.story.chapters.reduce((e,n)=>{const i=n.thumbnails?n.thumbnails.large:x.a.generateLegacyThumbnail(t.id,n.id).large,s=x.a.makeFreshThumbnail(a,d[n.id],i);return e.push(s),e},[]);Object(L.a)(g).subscribe(t=>{const n=this.store.selectSnapshot(D.a.getRegisteredThumbnails);t.forEach(e=>{n.set(e.chapterId,e)}),this.storyService.unloadStory(null,!0).subscribe(()=>{this.buildStoryWorkflow(e,a,u,i,u.chapters.length-1,n)})})}buildStory(e,t){t.story.chapters.map((e,n)=>({newChapterId:e.id,originalChapterId:e.id,originalStoryId:t.id}));const n=x.a.getChapterThumbnails(t.id,t.story.chapters);this.buildStoryWorkflow(e,t.id,t.story,t.type,t.chapterIdx||0,n)}loadStoryChunk(e){const t=e.getState().loadChunksRemaining[0];t&&(e.patchState({loadingChunk:t}),this.storyService.loadStoryChunk(t,()=>{e.dispatch([new s.g(t),new s.f])}))}reorderLoadChunks(e,t){const{loadChunksRemaining:n}=e.getState(),[i,a]=Object(l.partition)(n,e=>e.chapterId===t.chapterId);e.patchState({loadChunksRemaining:[...i,...a]})}loadStoryChunkSuccess(e,t){const n=e.getState().loadChunksRemaining.filter(e=>e.chunkId!==t.chunk.chunkId);e.patchState({loadingChunk:null,loadChunksRemaining:n}),e.dispatch(new E.D(t.chunk.chapterId,t.chunk.readyState))}synchronizeChapters(e){const t=this.store.selectSnapshot(r.a.getStoryChapters),{story:n}=e.getState();e.patchState({story:Object.assign(Object.assign({},n),{chapters:[...t]})})}importStory(e,t){this.storyService.getStory(t.id,t.type,t.lang).subscribe(n=>{e.dispatch(new s.d(n,t.id,t.type))})}resetStory(e){e.setState(H)}mergeBridgeModuleSuccess(e,{story:t}){const n=e.getState(),i=this.store.selectSnapshot(r.a.getSelectedChapterIndex),a=x.a.getChapterThumbnails(n.storyId,t.chapters);this.storyService.unloadStory(null,!0).subscribe(()=>{this.buildStoryWorkflow(e,n.storyId,t,d.a.Module,i,a)})}};return e.\u0275fac=function(t){return new(t||e)(R.Zb(i.h),R.Zb(o.a),R.Zb(P.a),R.Zb(w.a),R.Zb(z.d))},e.\u0275prov=R.Lb({token:e,factory:e.\u0275fac}),V([Object(i.a)(s.r),B("design:type",Function),B("design:paramtypes",[Object,s.r]),B("design:returntype",void 0)],e.prototype,"setStoryText",null),V([Object(i.a)(s.q),B("design:type",Function),B("design:paramtypes",[Object,s.q]),B("design:returntype",void 0)],e.prototype,"setStoryTags",null),V([Object(i.a)(s.p),B("design:type",Function),B("design:paramtypes",[Object,s.p]),B("design:returntype",void 0)],e.prototype,"setStoryLightLibs",null),V([Object(i.a)(s.n),B("design:type",Function),B("design:paramtypes",[Object,s.n]),B("design:returntype",void 0)],e.prototype,"setStory",null),V([Object(i.a)(s.o),B("design:type",Function),B("design:paramtypes",[Object,s.o]),B("design:returntype",void 0)],e.prototype,"SetStoryId",null),V([Object(i.a)(s.m),B("design:type",Function),B("design:paramtypes",[Object,s.m]),B("design:returntype",void 0)],e.prototype,"setIncomingStory",null),V([Object(i.a)(s.e),B("design:type",Function),B("design:paramtypes",[Object,s.e]),B("design:returntype",void 0)],e.prototype,"loadStory",null),V([Object(i.a)(s.i),B("design:type",Function),B("design:paramtypes",[Object,s.i]),B("design:returntype",void 0)],e.prototype,"loadStorySuccess",null),V([Object(i.a)(s.d),B("design:type",Function),B("design:paramtypes",[Object,s.d]),B("design:returntype",void 0)],e.prototype,"importStorySuccess",null),V([Object(i.a)(s.a),B("design:type",Function),B("design:paramtypes",[Object,s.a]),B("design:returntype",void 0)],e.prototype,"buildStory",null),V([Object(i.a)(s.f),B("design:type",Function),B("design:paramtypes",[Object]),B("design:returntype",void 0)],e.prototype,"loadStoryChunk",null),V([Object(i.a)(s.k),B("design:type",Function),B("design:paramtypes",[Object,s.k]),B("design:returntype",void 0)],e.prototype,"reorderLoadChunks",null),V([Object(i.a)(s.g),B("design:type",Function),B("design:paramtypes",[Object,s.g]),B("design:returntype",void 0)],e.prototype,"loadStoryChunkSuccess",null),V([Object(i.a)(s.s),B("design:type",Function),B("design:paramtypes",[Object]),B("design:returntype",void 0)],e.prototype,"synchronizeChapters",null),V([Object(i.a)(s.c),B("design:type",Function),B("design:paramtypes",[Object,s.c]),B("design:returntype",void 0)],e.prototype,"importStory",null),V([Object(i.a)(s.l),B("design:type",Function),B("design:paramtypes",[Object]),B("design:returntype",void 0)],e.prototype,"resetStory",null),V([Object(i.a)(s.j),B("design:type",Function),B("design:paramtypes",[Object,Object]),B("design:returntype",void 0)],e.prototype,"mergeBridgeModuleSuccess",null),V([Object(i.f)(),B("design:type",Function),B("design:paramtypes",[a.c]),B("design:returntype",void 0)],e,"getStory",null),V([Object(i.f)(),B("design:type",Function),B("design:paramtypes",[a.c]),B("design:returntype",void 0)],e,"getStoryId",null),V([Object(i.f)(),B("design:type",Function),B("design:paramtypes",[a.c]),B("design:returntype",void 0)],e,"getLoadingChunk",null),V([Object(i.f)(),B("design:type",Function),B("design:paramtypes",[a.c]),B("design:returntype",void 0)],e,"getLoadChunks",null),V([Object(i.f)(),B("design:type",Function),B("design:paramtypes",[a.c]),B("design:returntype",void 0)],e,"getLoadChunksRemaining",null),V([Object(i.f)(),B("design:type",Function),B("design:paramtypes",[a.c]),B("design:returntype",void 0)],e,"getStoryInfo",null),V([Object(i.f)(),B("design:type",Function),B("design:paramtypes",[a.c]),B("design:returntype",void 0)],e,"getIncomingStoryInfo",null),V([Object(i.f)(),B("design:type",Function),B("design:paramtypes",[a.c]),B("design:returntype",void 0)],e,"getStoryTags",null),e=S=V([Object(i.g)({name:"story",defaults:H})],e),e})()},YsyH:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ofXK"),a=n("vvyD"),s=n("PCNd"),o=n("3Pt+"),r=n("fXoL");let c=(()=>{class e{}return e.\u0275mod=r.Nb({type:e}),e.\u0275inj=r.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,o.z]]}),e})()},Z48A:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var i=n("R0Ic"),a=n("fXoL"),s=n("AcyG"),o=n("LvDl"),r=n("XNiG"),c=n("HDdC"),l=n("1G5W"),p=n("o6VQ"),u=n("AytR"),d=n("J9/X"),g=n("GCmh"),h=n("tyNb"),b=n("ofXK");const m=["app-pill-button",""],f=function(e){return{"pill-button--selected":e}},y=["*"];let v=(()=>{class e{constructor(){this.selected=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Jb({type:e,selectors:[["button","app-pill-button",""],["a","app-pill-button",""]],inputs:{selected:"selected"},attrs:m,ngContentSelectors:y,decls:2,vars:3,consts:[[1,"pill-button",3,"ngClass"]],template:function(e,t){1&e&&(a.lc(),a.Vb(0,"span",0),a.kc(1),a.Ub()),2&e&&a.mc("ngClass",a.pc(1,f,t.selected))},directives:[b.m],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}[_nghost-%COMP%]{border-color:transparent;background:none;border-width:0;padding:0;margin:0;border-radius:4px;outline:0 none}[_nghost-%COMP%]:not([disabled]):hover{cursor:pointer}[_nghost-%COMP%]:focus   .pill-button[_ngcontent-%COMP%]{outline:2px solid #2d72dc!important}[_nghost-%COMP%]:disabled   .pill-button[_ngcontent-%COMP%], [_nghost-%COMP%]:disabled:hover   .pill-button[_ngcontent-%COMP%]{background-color:#f9fafd;color:#96a8c0}.pill-button[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em;font-family:Inter UI,sans-serif;font-weight:500;color:#374a68;display:flex;align-items:center;justify-content:center;background-color:#eaeff5;border-radius:100px;padding:8px 16px;transition:background-color .12s,color .12s;width:100%}.pill-button[_ngcontent-%COMP%]:hover{background-color:#d7e0ea}.pill-button--selected[_ngcontent-%COMP%], .pill-button--selected[_ngcontent-%COMP%]:hover{background-color:#2d72dc;color:#fff}"],changeDetection:0}),e})();var O=n("0njA"),S=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function x(e,t){if(1&e){const e=a.Wb();a.Vb(0,"li",9),a.Vb(1,"button",10),a.cc("click",(function(){a.Cc(e);const n=t.$implicit,i=a.gc().$implicit,s=a.gc(2);return s.setTag(i.title,s.activeTags[i.title]===n?"":n)})),a.hc(2,"async"),a.Pc(3),a.hc(4,"titlecase"),a.Ub(),a.Ub()}if(2&e){const e=t.$implicit,n=a.gc().$implicit,i=a.gc(2);let s=null;a.Db(1),a.mc("disabled",!(null!=(s=a.ic(2,3,i.availableTags$))&&s.includes(e)))("selected",i.activeTags[n.title]===e),a.Db(2),a.Rc(" ",a.ic(4,5,e)," ")}}function C(e,t){if(1&e&&(a.Vb(0,"div",5),a.Vb(1,"h2",6),a.Pc(2),a.Ub(),a.Vb(3,"ul",7),a.Nc(4,x,5,7,"li",8),a.Ub(),a.Ub()),2&e){const e=t.$implicit;a.Db(2),a.Qc(e.title),a.Db(2),a.mc("ngForOf",e.tags)}}function w(e,t){if(1&e&&(a.Vb(0,"div",3),a.Nc(1,C,5,2,"div",4),a.Ub()),2&e){const e=a.gc();a.mc("@show",void 0),a.Db(1),a.mc("ngForOf",e.tagGroups)}}function j(e,t){if(1&e){const e=a.Wb();a.Vb(0,"li",9),a.Vb(1,"button",14),a.cc("click",(function(){a.Cc(e);const t=a.gc(2).$implicit;return a.gc(2).setTag(t.title,"")})),a.Vb(2,"span",15),a.Pc(3),a.hc(4,"titlecase"),a.Ub(),a.Qb(5,"app-icon",16),a.Ub(),a.Ub()}if(2&e){const e=a.gc().$implicit;a.Db(3),a.Qc(a.ic(4,1,e))}}function k(e,t){if(1&e&&(a.Tb(0),a.Nc(1,j,6,3,"li",13),a.Sb()),2&e){const e=t.$implicit,n=a.gc().$implicit,i=a.gc(2);a.Db(1),a.mc("ngIf",i.activeTags[n.title]===e)}}function P(e,t){if(1&e&&(a.Tb(0),a.Nc(1,k,2,1,"ng-container",12),a.Sb()),2&e){const e=t.$implicit;a.Db(1),a.mc("ngForOf",e.tags)}}function _(e,t){if(1&e&&(a.Vb(0,"ul",11),a.Nc(1,P,2,1,"ng-container",12),a.Ub()),2&e){const e=a.gc();a.Db(1),a.mc("ngForOf",e.tagGroups)}}let M=(()=>{class e{constructor(e,t,n){this.changeDetectorRef=e,this.store=t,this.router=n,this.activeTagList=[],this.ngUnsubscribe=new r.a,this._viewMode="expanded",this.tagGroups=[],this._activeTags={},this.selectedTagChange=new a.p}get viewMode(){return this._viewMode}set viewMode(e){this._viewMode=e}get activeTags(){return this._activeTags}set activeTags(e){null==e&&(e={}),this._activeTags=e,this.activeTagList=Object.values(this.activeTags).reduce((e,t)=>(""!=t&&e.push(t),e),[]),this.changeDetectorRef.markForCheck()}ngOnInit(){this.store.select(g.a.getActiveTags).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.activeTags=e}),this.tagGroups=[],u.a.native&&this.tagGroups.push(p.b),this.isExplore()&&(this.tagGroups=this.tagGroups.concat([p.e,p.d,Object.assign(Object.assign({},p.c),{tags:Object(o.without)(p.c.tags,"Quiz")})]))}isExplore(){return this.router.url.indexOf("/results/modules")>=0}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setTag(e,t){const n=this.store.selectSnapshot(g.a.getActiveTags);n[e]=t,this.store.dispatch(new d.a.SetActiveTags(n))}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(a.i),a.Pb(s.h),a.Pb(h.e))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-gallery-filters"]],inputs:{viewMode:"viewMode"},outputs:{selectedTagChange:"selectedTagChange"},decls:3,vars:2,consts:[["data-test","galleryFilters",1,"gallery-filters"],["class","gallery-filters__expanded","data-test","galleryFiltersExpanded",4,"ngIf"],["class","gallery-filters__tags","data-test","galleryFiltersSummary",4,"ngIf"],["data-test","galleryFiltersExpanded",1,"gallery-filters__expanded"],["class","gallery-filters__group",4,"ngFor","ngForOf"],[1,"gallery-filters__group"],[1,"gallery-filters__header"],[1,"gallery-filters__tags"],["class","gallery-filters__tag",4,"ngFor","ngForOf"],[1,"gallery-filters__tag"],["app-pill-button","","data-test","galleryFiltersTag",3,"disabled","selected","click"],["data-test","galleryFiltersSummary",1,"gallery-filters__tags"],[4,"ngFor","ngForOf"],["class","gallery-filters__tag",4,"ngIf"],["app-pill-button","","data-test","galleryFiltersTag",3,"click"],[1,"mr-2"],["icon","times"]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Nc(1,w,2,2,"div",1),a.Nc(2,_,2,1,"ul",2),a.Ub()),2&e&&(a.Db(1),a.mc("ngIf","expanded"===t.viewMode),a.Db(1),a.mc("ngIf","summary"===t.viewMode))},directives:[b.p,b.o,v,O.a],pipes:[b.b,b.x],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.gallery-filters__expanded[_ngcontent-%COMP%]{display:grid;grid-template-columns:33% 33% 33%;grid-gap:16px}.gallery-filters__header[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em;font-weight:600;padding-bottom:12px}.gallery-filters__tag[_ngcontent-%COMP%]{display:inline-block;margin:0 12px 12px 0}@media (max-width:1179px){.gallery-filters__expanded[_ngcontent-%COMP%]{grid-template-columns:100%}}@media (max-width:540px){.gallery-filters__group[_ngcontent-%COMP%]{padding:0 0 24px}}"],data:{animation:[Object(i.n)("show",[Object(i.m)(":enter",[Object(i.l)({height:"0"}),Object(i.e)("250ms ease-out",Object(i.l)({height:"*"}))])])]},changeDetection:0}),function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([Object(s.e)(g.a.getAvailableTags),S("design:type",c.a)],e.prototype,"availableTags$",void 0),e})()},ZDoJ:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){class t{constructor(e){this.theme=e}}t.type="[Layout] Set Theme",e.SetTheme=t;class n{constructor(e){this.sidenav=e}}n.type="[Layout] Set Sidenav",e.SetSidenav=n;class i{constructor(e){this.open=e}}i.type="[Layout] Toggle Sidenav",e.ToggleSidenav=i;class a{constructor(e){this.siteHeaderType=e}}a.type="[Layout] Set Header",e.SetHeader=a;class s{constructor(e){this.siteFooterType=e}}s.type="[Layout] Set Footer",e.SetFooter=s;class o{constructor(){}}o.type="[Layout] Reset",e.ResetLayout=o}(i||(i={}))},ZJ6O:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var i,a=n("AcyG"),s=n("S/GR"),o=n("eNUT");!function(e){function t(e,t=0){["x","y","z"].forEach(n=>{void 0!==e[n]&&Math.abs(e[n]-t)<1e-4&&delete e[n]})}function n(e){["translate","rotate","pivot"].forEach(n=>{void 0!==e[n]&&(t(e[n]),0===Object.keys(e[n]).length&&delete e[n])}),void 0!==e.scale&&(t(e.scale,1),0===Object.keys(e.scale).length&&delete e.scale)}function i(e,t){["backfaces","displayName","layer"].forEach(n=>{e[n]&&(t[n]=e[n])})}function a(e,t){const i=new o.b;i.translate=JSON.parse(JSON.stringify(e.translate)),i.rotate=JSON.parse(JSON.stringify(e.rotate)),i.scale=JSON.parse(JSON.stringify(e.scale)),i.pivot=JSON.parse(JSON.stringify(e.pivot)),n(i),Object.entries(i).forEach(([e,n])=>{t[e]=JSON.parse(JSON.stringify(n))}),t.transformId&&delete t.transformId}function s(e,t){const n=["geometryId","morphId","materialId"],i=[];return e.renderables&&e.renderables.forEach(e=>{const t=new o.a;n.forEach(n=>{e[n]&&(t[n]=e[n])}),e.layer&&(t.layer=e.layer),i.push(t)}),1===i.length?t=Object.assign(Object.assign({},t),i[0]):i.length>1&&(t.renderables=i),t}e.filterTransformProperties=n,e.serializeObjectProperties=i,e.serializeTransformData=a,e.serializeRenderables=s,e.serializeHumanObject=function e(t,n){if(n[t.objectId])return null;let r=new o.c;return r.objectId=t.objectId,i(t,r),t.transformId?r.transformId=t.transformId:a(t,r),r=s(t,r),t.objects&&t.objects.length&&(r.objects=[]),t.objects.forEach(t=>{const i=e(t,n);null!==i&&r.objects.push(i)},this),r}}(i||(i={}));var r,c=n("LvDl"),l=n("eW6i"),p=n("e0fF"),u=n("qz+p");!function(e){function t(e,t){const n=Object.entries(t);return n.sort((e,t)=>e[0].length===t[0].length?0:e[0].length<t[0].length?1:-1),n.reduce((e,[t,n])=>{if(e.startsWith(t)){const i=new RegExp("^"+t);e=e.replace(i,n)}return e},e||"")}e.renamespaceValue=t,e.renamespaceKeys=function(e,n){return Object.entries(e).reduce((e,[i,a])=>(e[t(i,n)]=a,e),{})},e.renamespaceAssetLibrary=function(e,n,i){if(!i)return e;const a=e.tweens.map(e=>t(e,n)),s=e.reflections.map(e=>t(e,n));return Object.assign(Object.assign({},e),{tweens:a,reflections:s})},e.renamespaceReflections=function(e,n,i){return i?Object(c.mapValues)(e,e=>t(e,n)):e}}(r||(r={}));var d=n("fqos");function g(e,t){return{showObjects:Object(c.mapKeys)(e.showObjects,(e,n)=>r.renamespaceValue(n,t)),selectObjects:Object(c.mapKeys)(e.selectObjects,(e,n)=>r.renamespaceValue(n,t)),pickThroughObjects:Object(c.mapKeys)(e.pickThroughObjects,(e,n)=>r.renamespaceValue(n,t)),synchronization:Object(c.mapKeys)(e.synchronization,(e,n)=>r.renamespaceValue(n,t))}}function h(e,t){return(e||[]).map(e=>Object.assign(Object.assign({},e),{objectId:r.renamespaceValue(e.objectId,t),states:e.states.map(e=>{return Object.assign(Object.assign({},e),{errands:(n=e.errands,n.map(e=>e.type===d.a.flyToChapter||e.type===d.a.flyToObject?Object.assign(Object.assign({},e),{value:r.renamespaceValue(e.value,t)}):e))});var n})}))}function b(e,t){return(e||[]).map(e=>(e.data.timeline=t[e.data.timeline]||e.data.timeline,e))}function m(e,t){return(e||[]).map(e=>(e.objectId&&(e.objectId=r.renamespaceValue(e.objectId,t)),e))}function f(e,t){return e?{xray:Object(c.mapKeys)(e.xray,(e,n)=>r.renamespaceValue(n,t)),highlight:Object(c.mapKeys)(e.highlight,(e,n)=>r.renamespaceValue(n,t))}:{}}function y(e,t){const n=Object.assign({},e);return Array.isArray(e.layers)&&(n.layers=e.layers.map(e=>Object.assign(Object.assign({},e),{objectIds:e.objectIds.map(e=>r.renamespaceValue(e,t))}))),n}function v(e,t){function n(e=[]){return e.map(e=>Object.assign(Object.assign({},e),{src:r.renamespaceValue(e.src,t)}))}let i=[];return e&&Array.isArray(e.particleSystems)&&(i=e.particleSystems.map((function(e){return Object.assign(Object.assign({},e),{textures:n(e.textures)})}))),i}function O(e,t){const n=function(e,t){return"string"==typeof e?[t[e]||e]:e.map(e=>t[e]||e)}(e.stateId,t),i=e.assetLibraries.tweens.map(e=>r.renamespaceValue(e,t)),a=e.assetLibraries.reflections.map(e=>r.renamespaceValue(e,t)),s=Object(c.mapValues)(e.reflections,(e,n)=>r.renamespaceValue(e,t)),o=function(e,t){return e.map(e=>Object.assign(Object.assign(Object.assign({},e),g(e,t)),{colorRecipeObjects:f(e.colorRecipeObjects,t),timelineMap:b(e.timelineMap,t),labels:h(e.labels,t),hotspots:m(e.hotspots,t),visibilityLayers:y(e.visibilityLayers,t)}))}(e.chapters,t),l=function e(t,n){for(const i of t)["objectId","displayName","geometryId","morphId","materialId","transformId"].forEach(e=>{i[e]&&(i[e]=r.renamespaceValue(i[e],n))}),e(i.objects||[],n);return t}(e.sceneGraph,t),p=Object.assign(Object.assign({},e.customData),{particleSystems:v(e.customData,t)});return Object.assign(Object.assign(Object.assign(Object.assign({},e),{stateId:n}),g(e,t)),{assetLibraries:Object.assign(Object.assign({},e.assetLibraries),{tweens:i,reflections:a}),reflections:s,chapters:o,sceneGraph:l,customData:p})}var S=n("N0Zw"),x=n("rGz1"),C=n("FFWI"),w=n("nS47"),j=n("3zw+"),k=n("GMXD"),P=n("Vrox"),_=n("fXoL");let M=(()=>{class e{constructor(e,t,n,i,a){this.store=e,this.engineService=t,this.chapterSerializer=n,this.animationService=i,this.chapterService=a}serializeUI(e){const t=Object.assign({},e.ui);return e.chapters.length>1&&(t.scrubber=!1,t.playPause=!1,t.tour={chapters:!0}),t}serializeAnimation(e){return this.animationService.isChapterAnimated(e)?{startTime:e.timelineMap[0].start,loop:!1!==e.loop,numChapters:1}:{}}getClippedObjects(){return 0===Human.renderer.clip.getActiveClips().length?{}:Human.scene.getLeaves().reduce((e,t)=>(Human.scene.objects[t].culledByClip&&(e[t]=!0),e),{})}generateTrimObjectMap(e){const t={};if(e.graph.hidden){const e=this.store.selectSnapshot(k.a.getAllNodeState);Object.values(e).forEach(e=>{Object.entries(e).forEach(([e,n])=>{!1!==t[e]&&(t[e]=!(n.shown||n.shownSetByTween))})})}const n=e.graph.clipped?this.getClippedObjects():{};return Object.assign(Object.assign({},t),n)}serialize(e,t,n=!1,a,s,o){const r=Object(c.cloneDeep)(a),l=this.generateTrimObjectMap(t);r.sceneGraph=function(e,t){const n=[];return Object.entries(e).forEach(([e,a])=>{const s=i.serializeHumanObject(a,t);null!==s&&n.push(s)},this),n}(Human.scene.rootObjects,l);const u=w.a.createGraphFromSrc(r.sceneGraph,"objectId","objects",new p.d(Human.scene.colorRecipes.getRecipes())),d=this.store.selectSnapshot(S.a.getLabels);this.store.selectSnapshot(P.a.getRegisteredThumbnails),r.chapters=s.map(t=>this.chapterSerializer.serializeChapter(u,t,e,d,o)),r.ui=this.serializeUI(r),r.animation=this.serializeAnimation(s[0]),r.customData=Object.assign(Object.assign({},r.customData),{particleSystems:this.store.selectSnapshot(x.a.getParticleSystemsList)});const g=this.store.selectSnapshot(C.b.getAllQuestions),h=this.store.selectSnapshot(C.b.getQuizSettings);h&&g.length>0?r.quizSettings=h:delete r.quizSettings,r.tweenParticleLookup=this.store.selectSnapshot(x.a.getTweenParticleLookup);const b=s.reduce((e,t)=>e.concat(this.chapterService.getChapterLightLibraries(t)),[]);r.assetLibraries.lights=Array.from(new Set(b));const m=this.getReflectionLibraries(r.reflections),f=s.reduce((e,t)=>e.concat(this.chapterService.getChapterReflectionLibraries(t)),[]);r.assetLibraries.reflections=Array.from(new Set(m.concat(f)));const y=[].concat.apply([],Object.values(r.assetLibraries)),v=this.getSceneGraphStateIds(r.sceneGraph);return r.stateId=Array.from(new Set(y.map(this.getStateId).concat(v))),{story:n?O(r,e):r}}getReflectionLibraries(e){return e=e||{},Object.values(e).map(e=>{const t=e.split(".");return[t[0],t[1]].join("/")})}getSceneGraphStateIds(e){return e.map(e=>e.objectId.split("-")[0])}getStateId(e){return e.split("/")[0]}}return e.\u0275fac=function(t){return new(t||e)(_.Zb(a.h),_.Zb(l.a),_.Zb(s.a),_.Zb(u.a),_.Zb(j.a))},e.\u0275prov=_.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},ZR5G:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Bookmark="bookmark",e.Module="module",e.Internal="internal",e}({})},ZULQ:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.normalize=function(e){return(""+(e||"")).replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(t)).replace(/(&.+;)/gi,(e,t)=>String.fromCharCode(e.charCodeAt(0)))},e.prettyPrint=function(e){return(""+(e||"")).trim().replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()},e.parseEmails=function(e){return e.split(",").map(e=>e.trim()).filter(e=>!!e)},e.validateEmail=function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)},e.toTitleCase=function(e){return e.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())}}(i||(i={}))},ZriC:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.SSAO="sao",e.Blur="blur",e.RadialBlur="radialBlur",e.DOF="dof",e.FXAA="fxaa",e.GroundShadow="groundShadow",e}({})},a0wz:function(e,t,n){"use strict";n.d(t,"z",(function(){return i})),n.d(t,"x",(function(){return a})),n.d(t,"w",(function(){return s})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"m",(function(){return u})),n.d(t,"o",(function(){return d})),n.d(t,"n",(function(){return g})),n.d(t,"y",(function(){return h})),n.d(t,"p",(function(){return b})),n.d(t,"r",(function(){return m})),n.d(t,"q",(function(){return f})),n.d(t,"s",(function(){return y})),n.d(t,"u",(function(){return v})),n.d(t,"t",(function(){return O})),n.d(t,"v",(function(){return S})),n.d(t,"e",(function(){return x})),n.d(t,"g",(function(){return C})),n.d(t,"f",(function(){return w})),n.d(t,"A",(function(){return j})),n.d(t,"C",(function(){return k})),n.d(t,"B",(function(){return P})),n.d(t,"j",(function(){return _})),n.d(t,"l",(function(){return M})),n.d(t,"k",(function(){return I})),n.d(t,"d",(function(){return T}));let i=(()=>{class e{constructor(e){this.organizations=e}}return e.type="[Organizations] Set Organizations",e})(),a=(()=>{class e{constructor(e){this.organization=e}}return e.type="[Organizations] Select Organization",e})(),s=(()=>{class e{constructor(e){this.collection=e}}return e.type="[Organizations] Select Collection",e})(),o=(()=>{class e{constructor(e){this.organizationId=e}}return e.type="[Organizations] Get Collections",e})(),r=(()=>{class e{constructor(e){this.collections=e}}return e.type="[Organizations] Get Collections Success",e})(),c=(()=>{class e{constructor(e,t){this.organizationId=e,this.collectionName=t}}return e.type="[Organizations] Add Collection",e})(),l=(()=>{class e{constructor(e,t){this.organizationId=e,this.collectionName=t}}return e.type="[Organizations] Add Collection Success",e})(),p=(()=>{class e{constructor(e){this.error=e}}return e.type="[Organizations] Add Collection Error",e})(),u=(()=>{class e{constructor(e){this.collection=e}}return e.type="[Organizations] Remove Collection",e})(),d=(()=>{class e{constructor(e){this.collection=e}}return e.type="[Organizations] Remove Collection Success",e})(),g=(()=>{class e{constructor(e){this.error=e}}return e.type="[Organizations] Remove Collection Error",e})(),h=(()=>{class e{constructor(e){this.collection=e}}return e.type="[Organizations] Set Collection Rename Mode",e})(),b=(()=>{class e{constructor(e,t){this.collection=e,this.collectionName=t}}return e.type="[Organizations] Rename Collection",e})(),m=(()=>{class e{constructor(e,t){this.collection=e,this.collectionName=t}}return e.type="[Organizations] Rename Collection Success",e})(),f=(()=>{class e{constructor(e){this.error=e}}return e.type="[Organizations] Rename Collection Error",e})(),y=(()=>{class e{constructor(e,t){this.organizationId=e,this.collections=t}}return e.type="[Organizations] Reorder Collections",e})(),v=(()=>{class e{constructor(e,t){this.organizationId=e,this.collections=t}}return e.type="[Organizations] Reorder Collections Success",e})(),O=(()=>{class e{constructor(e){this.error=e}}return e.type="[Organizations] Reorder Collections Error",e})(),S=(()=>{class e{constructor(){}}return e.type="[Organizations] Reset",e})(),x=(()=>{class e{constructor(e){this.organization=e}}return e.type="[Organizations] Create Organization",e})(),C=(()=>{class e{constructor(){}}return e.type="[Organizations] Create Organization Success",e})(),w=(()=>{class e{constructor(e){this.error=e}}return e.type="[Organizations] Create Organization Fail",e})(),j=(()=>{class e{constructor(e){this.organization=e}}return e.type="[Organizations] Update Organization",e})(),k=(()=>{class e{constructor(){}}return e.type="[Organizations] Update Organization Success",e})(),P=(()=>{class e{constructor(e){this.error=e}}return e.type="[Organizations] Update Organization Fail",e})(),_=(()=>{class e{constructor(e){this.request=e}}return e.type="[Organizations] Get Organization Profile",e})(),M=(()=>{class e{constructor(e){this.organizationProfile=e}}return e.type="[Organizations] Get Organization Profile Success",e})(),I=(()=>{class e{constructor(e){this.error=e}}return e.type="[Organizations] Get Organization Profile Fail",e})(),T=(()=>{class e{constructor(){}}return e.type="[Organizations] Clear Organization Profile",e})()},aKmd:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("ofXK"),a=n("vvyD"),s=n("+pSP"),o=n("EWj2"),r=n("yGOH"),c=n("Wdmj"),l=n("fXoL");let p=(()=>{class e{}return e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({factory:function(t){return new(t||e)},imports:[[i.c,r.a,a.a,o.a,s.a,c.d]]}),e})()},aWUR:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.InvalidUAID="analytic id does not exist",e.InvalidDeveloperId="Client id invalid",e.InvalidProductKey="app product key",e.MissingUAID="analytic id missing",e.WebOnlyAPI="Api key only compatible with Web Widget",e.AndroidOnlyAPI="Api key only compatible with Mobile Widget SDK for Android",e.IOSOnlyAPI="Api key only compatible with Mobile Widget SDK for iOS",e.MixedAPIKeys="Use of both an app product key and an app api key not allowed",e.ProductKeyNotRegistered='App product key "xxx" has not been registered or is incorrect.  Ensure it has been registered by the system admin',e.ProductKeyInvalidAppBundleID='The app product key "xxx" has not been authorized to be used for app bundle id "yyy".  Confirm the correct values are being used from the system admin',e.ProductKeyBundleIDWhitelist='Use of app product key "xxx" requires the affiliated app bundle id (app_domain) to be white-listed.  Ensure the system admin has white-listed "yyy"',e.ImproperProductKeyUsage='Improper use of app product key "xxx" detected. Contact the system admin if issue continues',e.InvalidPlatformSource="Invalid platform source",e.MissingSource="Missing source",e.MissingPlatform="Missing platform",e.MissingAppDomain="Missing app domain",e.APIKeyMissing="Api key missing",e.APIKeyInvalid="Api key invalid",e.DeveloperDeactivated="Developer account for api key is deactivated",e.BundleIDNotAllowed="App bundle id not allowed",e.BundleIDUnregistered="App bundle id unregistered",e}({})},aqTE:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("6L7E"),a=n("7b4e"),s=n("2o60"),o=n("l57l");class r{}var c=n("yonH"),l=n("WRwD"),p=n("XoU3"),u=n("qplK"),d=n("b36G"),g=n("fMqy"),h=n("eW6i"),b=n("fqos"),m=n("x1jL"),f=n("A+8E"),y=n("LvDl"),v=n("fXoL");const O={flyToCamera:"flyTo",flyToChapter:"flyTo"};let S=(()=>{class e{constructor(e){this.engineService=e,this.convertActionToErrand=(e,t,n)=>{const i=new RegExp("^flyTo(Async)?"),a=new RegExp("^flyToObject(Async)?"),s=new RegExp("^flyTo[w.:]+currentChapter.[flyTo|jumpTo]"),o=n.split(":").slice(0,2),r=e;let c=o[1];/currentChapter/.test(c)&&(c=c.replace("currentChapter",`chapters[${t}]`));let l=null;return a.test(o[0])?l=new p.a(Object(y.get)(r,c)):i.test(o[0])?l=new u.a(Object(y.get)(r,c)):s.test(o[0])&&(l=new m.a),l},this.convertErrandToAction=(e,t)=>{const n=a.a.idWithPrefix("errand").replace(/-/g,"_"),i={};let s="";const o=function(e){return O[e]||e}(t.type);return t.type===b.a.flyToChapter?s=`${o}Async:currentChapter.${this.engineService.getChapter(e.chapterId).camera.action}`:(s=`${o}Async:currentChapter.customData.${n}`,i[n]=t.value),{action:s,data:i}}}filterHotspot(e,t,n){const i=new RegExp("^(flyTo|flyToObject|hideHotspot|showHotspot|resetHotspots)"),a=this.getHotspotAction(e,n),s=a.filter(e=>i.test(e));return a.length===s.length}deserializeAnnotation(e,t,n){const r=new i.a(e.title||"");return r.id=e.annotationId||a.a.idWithPrefix("label"),r.chapterId=t.id,r.expandTag=!0,r.showDescription=!0,r.collapseDescription=!1,r.pinGlow=!1,r.hideWire=!1,r.hideTag=!1,n===o.a.Annotation?(r.theme=o.a.Annotation,r.pinType=s.a.Default,r.flyTo=!1,r.states=[]):(r.theme=o.a.StudioNext,r.pinType=s.a.PlusMinus,r.flyTo=!0,r.states=[new l.a,new l.a],r.states[0].errands=[new m.a],r.states[1].errands=[new p.a(e.objectId)]),r.occludable=!1!==e.occludable,r.renderableIndex=e.renderableIndex||0,e.objectId&&Object.prototype.hasOwnProperty.call(e,"barycentric")?(r.objectId=e.objectId,r.primitiveIndex=e.primitiveIndex,r.barycentric=e.barycentric):Object.prototype.hasOwnProperty.call(e,"pos")&&(Object.prototype.hasOwnProperty.call(e,"objectId")&&(r.objectId=e.objectId),r.pos=e.pos),e.dir&&Array.isArray(e.dir)?r.dir=e.dir:e.dir&&e.dir instanceof Object&&(r.dir=Object.values(e.dir)),r.description=e.description||"",r.offset=e.labelOffset||[40,40],r.shown=!1!==e.shown,r.labelShown=!1!==e.labelShown,r}deserializeHotspots(e,t,n,...r){const[p,u]=r,d=new i.a(p.title||"");switch(d.id=a.a.idWithPrefix("hotspot"),d.objectId=p.objectId,d.chapterId=t.id,d.description=p.description||"",d.pinType=/plus|minus/.test(p.className)?s.a.PlusMinus:/sequential/.test(p.className)?s.a.Sequential:/none/.test(p.className)?s.a.None:s.a.Default,/alphabetical/.test(p.className)?d.sequentialType=f.a.Alphabetical:/numerical/.test(p.className)&&(d.sequentialType=f.a.Numerical),d.pinGlow=/pulse/.test(p.className),d.occludable=!0,d.shown=p.shown,d.offset=p.labelOffset?p.labelOffset:[22,-17],(/left/.test(p.className)&&d.offset[0]>0||/right/.test(p.className)&&d.offset[0]<0)&&(d.offset[0]*=-1),Object.prototype.hasOwnProperty.call(p,"barycentric")?(d.renderableIndex=p.renderableIndex||0,d.barycentric=p.barycentric,d.primitiveIndex=p.primitiveIndex):d.pos=p.pos,d.dir=p.dir,p.theme=p.theme?p.theme:c.a.classicHotspot,p.theme){case c.a.classicAnnotation:d.theme=o.a.Annotation,d.showDescription=!0,d.collapseDescription=/collapsible/g.test(p.className),d.expandTag=!0,d.hideTag=!1,d.hideWire=!/leader-line/.test(p.className);break;case c.a.classicHotspot:d.theme=o.a.Classic,d.showDescription=/label/.test(p.className),d.expandTag=/label/.test(p.className),d.hideTag=!d.expandTag,d.collapseDescription=!1,d.hideWire=!/leader-line/.test(p.className);break;case c.a.studioNext:d.theme=o.a.StudioNext,d.showDescription=this.hasContent(p),d.collapseDescription=/collapsible/g.test(p.className),d.hideTag=!p.title,d.hideWire=!/leader-line/.test(p.className)}d.flyTo=!1,d.flyToTarget=null,d.states=[];const g=this.filterHotspotActions(this.getHotspotAction(e,p)),h=u?this.filterHotspotActions(this.getHotspotAction(e,u)):[],m=new l.a,y=new l.a;g.length&&(m.errands=g.map(t=>this.convertActionToErrand(e,n,t))),h.length&&(y.errands=h.map(t=>this.convertActionToErrand(e,n,t))),d.states=[y,m],m.errands.length>0&&(d.flyTo=!0,d.flyToTarget=m.errands[0].type,m.errands[0].type===b.a.flyToCamera&&(d.cameraPosition=m.errands[0].value));const v=p.contentBlocks;return v&&(d.contentBlocks=JSON.parse(JSON.stringify(v))),d}makeDefaultStudioLabel(e){const t=e?Object.assign({},e):new i.a("");return t.pinType=s.a.PlusMinus,t.theme=o.a.StudioNext,t.expandTag=!0,t.showDescription=!0,t.collapseDescription=!1,t.pinGlow=!1,t.hideWire=!1,t.hideTag=!1,t.occludable=!0,t.flyTo=!0,t.description="",t.shown=!0,t.states=[new l.a,new l.a],t}makeAnnotationLabel(e){const t=e?Object.assign({},e):new i.a("");return t.pinType=s.a.Default,t.theme=o.a.Annotation,t.expandTag=!0,t.showDescription=!0,t.collapseDescription=!1,t.pinGlow=!1,t.hideWire=!1,t.hideTag=!1,t.states=[],t}serializeLabel(e,t){const n=new r,i=Object(d.classToClass)(e),a=["circle","draggable"];n.shown=!0,e.objectId&&(n.objectId=i.objectId);try{e.primitiveIndex&&e.barycentric&&e.objectId?(n.renderableIndex=e.renderableIndex||0,n.primitiveIndex=e.primitiveIndex,n.barycentric=e.barycentric,n.pos=this.engineService.barycentricToWorld(e.objectId,e.primitiveIndex,e.barycentric)):n.pos=i.pos}catch(b){return{data:{},hotspots:[]}}switch((Array.isArray(e.dir)||ArrayBuffer.isView(e.dir))&&(n.dir=Array.prototype.slice.call(e.dir)),n.labelOffset=e.offset,e.theme){case o.a.Annotation:n.theme=c.a.classicAnnotation;break;case o.a.Classic:n.theme=c.a.classicHotspot;break;default:n.theme=c.a.studioNext}""!==i.title?(n.title=i.title,n.description=i.description,n.type=g.a.CircleLabel):n.type=g.a.Circle,e.pinGlow&&a.push("pulse"),e.pinType===s.a.PlusMinus&&a.push("plus"),e.pinType===s.a.Sequential&&(a.push("sequential"),a.push(e.sequentialType===f.a.Alphabetical?"alphabetical":"numerical")),e.pinType===s.a.None&&a.push("none"),e.hideWire||a.push("leader-line"),e.hideTag||a.push("label"),e.collapseDescription&&a.push("collapsible collapsed"),n.className=a.join(" ");let l={};n.actions=[];const p=[n],u=e.states.length;e.states.forEach((t,i)=>{if(i===u-1)p[0].actions.push("resetHotspots"),t.errands.forEach(t=>{const n=this.convertErrandToAction(e,t);p[0].actions.push(n.action),l=Object.assign(Object.assign({},l),n.data)});else{const i=Object(d.classToClass)(n);i.actions=[],i.className=i.className.replace("plus","minus"),t.errands.forEach(t=>{const n=this.convertErrandToAction(e,t);i.actions.push(n.action),l=Object.assign(Object.assign({},l),n.data)}),p.push(i)}}),2===p.length&&(p[0].actions.push(`hideHotspots:currentChapter.hotspots[${t}]`),p[0].actions.push(`showHotspots:currentChapter.hotspots[${t+1}]`),p[1].actions.push(`hideHotspots:currentChapter.hotspots[${t+1}]`),p[1].actions.push(`showHotspots:currentChapter.hotspots[${t}]`),p[0].shown=!0,p[1].shown=!1),2===p.length&&e.collapseDescription&&(p[1].className+=p[1].className.replace("collapsed","")),p.forEach(e=>{n.labelOffset[0]<0?e.className=e.className.replace("right","")+" left":n.labelOffset[0]>0&&(e.className=e.className.replace("left","")+" right")});const h=e.contentBlocks;return h&&(n.contentBlocks=JSON.parse(JSON.stringify(h))),{data:l,hotspots:p}}setLabelContainer(e){this._labelContainer=e}getLabelContainer(){return this._labelContainer}hasContent(e){const{description:t,contentBlocks:n}=e;return!!t||!Object(y.isNil)(n)&&n.length>0}getHotspotAction(e,t){const n=t.actionSrc?Object(y.get)(e,t.actionSrc):t.actions?t.actions:[];return Array.isArray(n)?n:[]}filterHotspotActions(e){const t=new RegExp("^(flyTo|flyToObject)");return e.filter(e=>t.test(e))}}return e.\u0275fac=function(t){return new(t||e)(v.Zb(h.a))},e.\u0275prov=v.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},awCs:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),a=n("ofXK");function s(e,t){1&e&&(i.Vb(0,"div"),i.kc(1),i.Ub())}const o=["*"];let r=(()=>{class e{constructor(e){this.changeDetector=e,this.hide=!1,this._isActive=!1}get isActive(){return this._isActive}set isActive(e){this._isActive=e,this.changeDetector.markForCheck()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-tab"]],inputs:{label:"label",hide:"hide"},ngContentSelectors:o,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(i.lc(),i.Nc(0,s,2,0,"div",0)),2&e&&i.mc("ngIf",t.isActive)},directives:[a.p],styles:[""],changeDetection:0}),e})()},bKUj:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var i=n("LvDl");function a(e,t=!1){return(t?o(e):e).reduce((e,t)=>Object.assign(Object.assign({},e),t),{})}function s(e,t=!1){const n=Object.entries(e).map(([e,t])=>({[e]:t}));return t?o(n):n}function o(e){return e.filter(e=>Object.values(e).some(e=>!Object(i.isNil)(e.value)&&""!==e.value))}},bjoO:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("itXk"),a=n("HDdC"),s=n("pLZG"),o=n("AcyG"),r=n("LvDl"),c=n("Mh2x"),l=n("VJvM"),p=n("gm/O"),u=n("GMXD"),d=n("0Yvn"),g=n("fXoL"),h=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},b=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let m=(()=>{class e{constructor(e){this.store=e,this.currentLayers=[],this.nodesLayerIndex=0,this.objectsLayerIndex=0,this.nodeChapterOpacities={}}initObservables(){this.selectedChapterId$.pipe(Object(s.a)(e=>!Object(r.isNil)(e))).subscribe(e=>{this.selectedChapterId=e,this.updateNodeChapterOpacities()}),this.selectedChapterCurrentLayers$.subscribe(e=>{this.currentLayers=e,this.nodesLayerIndex=this.objectsLayerIndex=this.store.selectSnapshot(c.a.getSelectedChapterCurrentLayersIndex)}),Object(i.b)([this.selectedChapterCurrentLayersIndex$,this.selectedChapterCurrentLayersPosition$]).pipe(Object(s.a)(([e,t])=>!Object(r.isNil)(e)&&!Object(r.isNil)(t))).subscribe(([e,t])=>{this.synchronizeScene(e,t,!0)})}recordLayerIndexPosition(e,t){this.store.dispatch(new l.w(this.selectedChapterId,e,t,!0))}synchronizeScene(e,t,n){this.updateLayerIndex(e,this.currentLayers,n),this.updateLayerPosition(t,this.currentLayers,n)}fractionToIndex(e){const t=this.getThreshold(),n=Math.floor(e/t);return Math.min(this.currentLayers.length-2,n)}fractionToPosition(e,t){const n=this.getThreshold();return Math.max(0,Math.min((e-n*t)/n,1))}indexPositionToFraction(e,t){const n=this.getThreshold();return e*n+t*n}getThreshold(){return this.currentLayers.length>1?1/(this.currentLayers.length-1):1}getCurrentLayerIndexProp(e){return e?"nodesLayerIndex":"objectsLayerIndex"}updateLayerIndex(e,t,n){const i=this.getCurrentLayerIndexProp(n);e!==this[i]&&(this.restoreLayers(e,this[i],t,n),n&&(this.nodesLayerIndex=e),this.objectsLayerIndex=e)}updateLayerPosition(e,t,n){const i=this.getCurrentLayerIndexProp(n);this.setObjectsOpacity(t[this[i]].objectIds,1-e)}restoreLayers(e,t,n,i){const a=(e-t)/Math.abs(e-t);let s=[],o=t;for(;o!==e;)s=s.concat(n[o].objectIds),o+=a;const r=-1===a;this.setObjectsOpacity(s,1===a?0:1),i?this.setNodesShown(s,r):this.setObjectsShown(s,r),-1===a&&(i?this.setNodesShown(n[e].objectIds,!0):this.setObjectsShown(n[e].objectIds,!0))}setObjectsOpacity(e,t){for(let n=0;n<e.length;n++){const i=e[n],a=this.nodeChapterOpacities[i];let s;this.isFresnelOpacity(a)?(s=a.slice(),s[0]=t*a[0],s[1]=t*a[1]):s=t*a,Human.scene.objects[i].setOpacity(s)}}updateNodeChapterOpacities(){const e=this.store.selectSnapshot(u.a.getAllNodeState)[this.selectedChapterId];this.nodeChapterOpacities={},Object.entries(e).forEach(([e,t])=>{if(this.nodeChapterOpacities[e]=1,t.paint&&t.paint.hasOwnProperty("opacity")){const n=d.a.toEngine(t.paint);(this.isFresnelOpacity(n.opacity)||this.isScalarOpacity(n.opacity))&&(this.nodeChapterOpacities[e]=n.opacity)}})}isScalarOpacity(e){return"number"==typeof e}isFresnelOpacity(e){return Array.isArray(e)}setObjectsShown(e,t){const n={};for(let i=0;i<e.length;i++)n[e[i]]=t;Human.scene.setEnabledObjects({objects:n})}setNodesShown(e,t){this.store.dispatch(new p.a.UpdateNodesShown(t,e,void 0,!1))}}return e.\u0275fac=function(t){return new(t||e)(g.Zb(o.h))},e.\u0275prov=g.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),h([Object(o.e)(c.a.getSelectedChapterCurrentLayers),b("design:type",a.a)],e.prototype,"selectedChapterCurrentLayers$",void 0),h([Object(o.e)(c.a.getSelectedChapterCurrentLayersIndex),b("design:type",a.a)],e.prototype,"selectedChapterCurrentLayersIndex$",void 0),h([Object(o.e)(c.a.getSelectedChapterCurrentLayersPosition),b("design:type",a.a)],e.prototype,"selectedChapterCurrentLayersPosition$",void 0),h([Object(o.e)(c.a.getSelectedChapterId),b("design:type",a.a)],e.prototype,"selectedChapterId$",void 0),e})()},c8sk:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("AcyG");class a{}var s=n("k0jR"),o=n("/MKm"),r=n("lZmj"),c=n("ECVi"),l=n("cp0P"),p=n("eKhQ"),u=n("kTA6"),d=n("fXoL"),g=n("dNgK"),h=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},b=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const m={publishing:!1,widgetURL:"/viewer",dimensions:r.a.dimensions,minDimensions:{width:300,height:400}};let f=(()=>{let e=class{constructor(e,t,n,i){this.publishService=e,this.store=t,this.snackbar=n,this.pendoService=i}static getDimensions(e){return e.dimensions}static getMinDimensions(e){return e.minDimensions}static getWidgetURL(e){return e.widgetURL}static getPublishing(e){return e.publishing}setPublishWidgetURL(e,t){e.patchState({widgetURL:t.widgetURL||"/viewer"})}setPublishDimensions(e,t){e.patchState({dimensions:t.dimensions})}getPublishURL(e,t){const{model:n,camera:i,widgetOptions:a}=t,{widgetURL:r}=e.getState(),l=this.store.selectSnapshot(c.a.getUserLanguage),u=this.store.selectSnapshot(c.a.getSelectedUserApp),d=this.store.selectSnapshot(p.a.getSelectedOrganizationProductAccountId);this.publishService.generateWidgetURL(n,r,a,i,o.a.Single,l,u,d).subscribe(t=>{e.dispatch(new s.i(n,t))},()=>{e.dispatch(new s.h(n))})}getPublishURLSuccess(e,t){this.pendoService.track("Publish - Success",{type:"url",source:"publish"})}getPublishURLFail(e,t){this.snackbar.open("Unable to generate URL.")}getPublishIFrame(e,t){const{model:n,camera:i,widgetOptions:a}=t,{widgetURL:r,dimensions:l}=e.getState(),u=this.store.selectSnapshot(c.a.getUserLanguage),d=this.store.selectSnapshot(c.a.getSelectedUserApp),g=this.store.selectSnapshot(p.a.getSelectedOrganizationProductAccountId);this.publishService.generateWidgetEmbed(n,r,a,l,i,o.a.Single,u,d,g).subscribe(t=>{e.dispatch(new s.c(t))},()=>{e.dispatch(new s.b)})}setPublishIFrameSuccess(e,t){this.pendoService.track("Publish - Success",{type:"iframe",source:"publish"})}savePublishImage(e,{imageData:t,imageType:n}){this.publishService.saveUserImage(t,n).subscribe(t=>{e.dispatch(new s.m(t))},()=>{e.dispatch(new s.l)})}savePublishImageSuccess(e,t){this.pendoService.track("Publish - Success",{type:"image",source:"publish"})}getPublishImage(e,t){const{model:n,camera:i,widgetOptions:a,imageData:r,fileType:p}=t,{widgetURL:u}=e.getState(),d=this.store.selectSnapshot(c.a.getUserLanguage),g=this.store.selectSnapshot(c.a.getSelectedUserApp);Object(l.a)(this.publishService.generateWidgetURL(n,u,a,i,o.a.Single,d,g),this.publishService.saveUserImage(r,p)).subscribe(([t,i])=>{const a=this.publishService.getImageEmbed(n.title,t,i);e.dispatch(new s.f(a))},()=>{e.dispatch(new s.e)})}setPublishing(e,{publishing:t}){e.patchState({publishing:t})}resetPublish(e,t){e.setState(m)}};return e.\u0275fac=function(t){return new(t||e)(d.Zb(o.b),d.Zb(i.h),d.Zb(g.b),d.Zb(u.b))},e.\u0275prov=d.Lb({token:e,factory:e.\u0275fac}),h([Object(i.a)(s.o),b("design:type",Function),b("design:paramtypes",[Object,s.o]),b("design:returntype",void 0)],e.prototype,"setPublishWidgetURL",null),h([Object(i.a)(s.n),b("design:type",Function),b("design:paramtypes",[Object,s.n]),b("design:returntype",void 0)],e.prototype,"setPublishDimensions",null),h([Object(i.a)(s.g),b("design:type",Function),b("design:paramtypes",[Object,s.g]),b("design:returntype",void 0)],e.prototype,"getPublishURL",null),h([Object(i.a)(s.i),b("design:type",Function),b("design:paramtypes",[Object,s.i]),b("design:returntype",void 0)],e.prototype,"getPublishURLSuccess",null),h([Object(i.a)(s.h),b("design:type",Function),b("design:paramtypes",[Object,s.h]),b("design:returntype",void 0)],e.prototype,"getPublishURLFail",null),h([Object(i.a)(s.a),b("design:type",Function),b("design:paramtypes",[Object,s.a]),b("design:returntype",void 0)],e.prototype,"getPublishIFrame",null),h([Object(i.a)(s.c),b("design:type",Function),b("design:paramtypes",[Object,s.c]),b("design:returntype",void 0)],e.prototype,"setPublishIFrameSuccess",null),h([Object(i.a)(s.k),b("design:type",Function),b("design:paramtypes",[Object,s.k]),b("design:returntype",void 0)],e.prototype,"savePublishImage",null),h([Object(i.a)(s.m),b("design:type",Function),b("design:paramtypes",[Object,s.m]),b("design:returntype",void 0)],e.prototype,"savePublishImageSuccess",null),h([Object(i.a)(s.d),b("design:type",Function),b("design:paramtypes",[Object,s.d]),b("design:returntype",void 0)],e.prototype,"getPublishImage",null),h([Object(i.a)(s.p),b("design:type",Function),b("design:paramtypes",[Object,s.p]),b("design:returntype",void 0)],e.prototype,"setPublishing",null),h([Object(i.a)(s.j),b("design:type",Function),b("design:paramtypes",[Object,s.j]),b("design:returntype",void 0)],e.prototype,"resetPublish",null),h([Object(i.f)(),b("design:type",Function),b("design:paramtypes",[a]),b("design:returntype",void 0)],e,"getDimensions",null),h([Object(i.f)(),b("design:type",Function),b("design:paramtypes",[a]),b("design:returntype",void 0)],e,"getMinDimensions",null),h([Object(i.f)(),b("design:type",Function),b("design:paramtypes",[a]),b("design:returntype",void 0)],e,"getWidgetURL",null),h([Object(i.f)(),b("design:type",Function),b("design:paramtypes",[a]),b("design:returntype",void 0)],e,"getPublishing",null),e=h([Object(i.g)({name:"publish",defaults:m})],e),e})()},cAOT:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.JumpTo="jumpTo",e.FlyTo="flyTo",e}({})},cAYK:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.OnDemand=0]="OnDemand",e[e.Interact=1]="Interact",e[e.Loader=2]="Loader",e[e.Tutorial=3]="Tutorial",e[e.Whiteboard=4]="Whiteboard",e[e.Help=5]="Help",e}({})},cQmI:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.All="",e.Quiz="mode-quiz",e.Content="mode-content",e}({})},dMmY:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL");let a=(()=>{class e{constructor(){}roundModel(e,t){const n=Object.assign({},e);return Object.keys(e).filter(t=>"number"==typeof e[t]).forEach(i=>{n[i]=this.roundNumber(e[i],t)}),n}roundNumber(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},e0fF:function(e,t,n){"use strict";function i(e){return{id:e,depth:0,boolState:{},numState:{}}}function a(){return{nodes:{},successors:{},predecessors:{},roots:{}}}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o}));class s{}class o{constructor(e){this.shown=e=>!1,this.selected=e=>!1,this.pickable=e=>!0,e.forEach(e=>{this[e]=e=>!1})}}},e0tp:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ofXK"),a=n("3Pt+"),s=n("vvyD"),o=n("+pSP"),r=n("fXoL");let c=(()=>{class e{}return e.\u0275mod=r.Nb({type:e}),e.\u0275inj=r.Mb({factory:function(t){return new(t||e)},imports:[[s.a,a.l,i.c,o.a]]}),e})()},eKhQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n("AcyG");class a{}var s=n("a0wz"),o=n("7PKw"),r=n("qBAC"),c=n("/MKm"),l=n("k0jR"),p=n("nYR2"),u=n("kTA6"),d=n("LvDl"),g=n("icKS"),h=n("fXoL"),b=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const f={creating:!1,updating:!1,loadingCollections:!1,addingCollection:!1,reorderingCollections:!1,removingCollection:!1,updatingCollection:!1,collectionRenaming:null};let y=(()=>{let e=class{constructor(e,t,n,i){this.organizationsService=e,this.publishService=t,this.pendoService=n,this.productService=i}static getOrganizations(e){return e.organizations}static getOrganization(e){return e.organization}static getOrganizationLogo(e){return e.organization?e.organization.group_logos.default:""}static getSelectedOrganization(e){return e.selectedOrganization}static getSelectedOrganizationProductAccountId(e){return Object(d.get)(e,"organization.product_acctid")}static getOrganizationProfile(e){return e.organizationProfile}static getOrganizationAccountSettings(e){return Object(d.get)(e,"organization.group_attributes",[]).filter(e=>"account_settings"===e.type).map(e=>{const{name:t,value:n}=e;return{[t]:{value:n}}})}static getCollections(e){return e.collections}static getSelectedCollection(e){return e.selectedCollection}static getReorderingCollections(e){return e.reorderingCollections}static getAddingCollection(e){return e.addingCollection}static getRemovingCollection(e){return e.removingCollection}static getUpdatingCollection(e){return e.updatingCollection}static getCollectionRenaming(e){return e.collectionRenaming}static getWidgetURL(e){return e.widgetURL}static getWidgetOptions(e){return e.widgetOptions}static getAppFeatures(e){return e.appFeatures}static getCreating(e){return e.creating}static getUpdating(e){return e.updating}static getCollectionsLoading(e){return e.loadingCollections}static hasOrganization(e){return!Object(d.isNil)(e.organization)}static isTrial(e){return Object(d.get)(e,"organization.subscription.type","").includes("Trial")}static isTrialExpired(e){return!0===Object(d.get)(e,"organization.subscription.expired",!1)}static getSubscriptionEndDate(e){const t=Object(d.get)(e,"organization.subscription.paid_through_date_time");return Object(d.isNil)(t)?void 0:new Date(t)}static getExternalAccount({organization:e}){return null==e?void 0:e.external_account}selectOrganization(e,t){const n=t.organization;e.patchState({selectedOrganization:n,selectedCollection:null}),n&&e.dispatch(new s.h(n.id))}setOrganizations(e,t){const n=t.organizations||[],i=n[0];let a,s=null,o=Object.assign({},e.getState().appFeatures);if(i&&i.group_attributes){const e=i.group_attributes,t=this.organizationsService.getOrganizationAttribute(e,"widget_settings","widget_custom_url_path");t&&t.value&&(a=t.value);const n=this.organizationsService.getOrganizationAttribute(e,"widget_settings","widget_url_params");n&&n.value&&(s=this.publishService.extendWidgetOptions(new r.a,n.value));const c=this.organizationsService.getOrganizationAttribute(e,"app_settings","web_app_features");c&&(o=Object.assign(Object.assign({},o),c.value))}e.patchState({organization:i,organizations:n,widgetURL:a,widgetOptions:s,appFeatures:o}),e.dispatch(new l.o(a))}getCollections(e,t){e.patchState({loadingCollections:!0}),this.organizationsService.getCollections({group_id:t.organizationId}).pipe(Object(p.a)(()=>e.patchState({loadingCollections:!1}))).subscribe(t=>{e.dispatch(new s.i(t))})}getCollectionsSuccess(e,t){e.patchState({collections:t.collections})}selectCollection(e,t){const{organization:n,selectedOrganization:i}=e.getState();e.patchState({selectedOrganization:i||n,selectedCollection:t.collection})}addCollection(e,t){e.patchState({addingCollection:!0}),this.organizationsService.addCollection(t.organizationId,t.collectionName).pipe(Object(p.a)(()=>{e.patchState({addingCollection:!1})})).subscribe(()=>{e.dispatch(new s.c(t.organizationId,t.collectionName))},t=>{e.dispatch(new s.b(t))})}addCollectionSuccess(e,t){this.pendoService.track("Add Collection - Success",{platform:this.productService.productType})}addCollectionError(e,t){this.pendoService.track("Add Collection - Failure",{error:Object(d.get)(t,"error.error.error.message")||"There was an error with collection creation."})}removeCollection(e,t){e.patchState({removingCollection:!0}),this.organizationsService.removeCollection(t.collection).pipe(Object(p.a)(()=>{e.patchState({removingCollection:!1})})).subscribe(()=>{e.dispatch(new s.o(t.collection))},t=>{e.dispatch(new s.n(t))})}removeCollectionSuccess(e,t){this.pendoService.track("Remove Collection - Success",{platform:this.productService.productType})}removeCollectionError(e,t){this.pendoService.track("Remove Collection - Failure",{error:Object(d.get)(t,"error.error.error.message")||"There was an error with collection removal."})}setCollectionRenameMode(e,t){e.patchState({collectionRenaming:t.collection})}renameCollection(e,t){e.patchState({updatingCollection:!0}),this.organizationsService.renameCollection(t.collection,t.collectionName).pipe(Object(p.a)(()=>{e.patchState({updatingCollection:!1})})).subscribe(()=>{e.dispatch(new s.r(t.collection,t.collectionName))},t=>{e.dispatch(new s.q(t))})}renameCollectionSuccess(e,t){this.pendoService.track("Rename Collection - Success",{platform:this.productService.productType})}renameCollectionError(e,t){this.pendoService.track("Rename Collection - Failure",{error:Object(d.get)(t,"error.error.error.message")||"There was an error with collection renaming."})}reorderCollections(e,t){e.patchState({reorderingCollections:!0}),this.organizationsService.reorderCollections(t.organizationId,t.collections).pipe(Object(p.a)(()=>{e.patchState({reorderingCollections:!1})})).subscribe(()=>{e.dispatch(new s.u(t.organizationId,t.collections))},t=>{e.dispatch(new s.t(t))})}reorderCollectionsSuccess(e,t){e.patchState({collections:[...t.collections]})}resetOrganizations(e,t){e.setState(f)}createOrganization(e,{organization:t}){e.patchState({creating:!0}),this.organizationsService.createOrganization(t).pipe(Object(p.a)(()=>e.patchState({creating:!1}))).subscribe(()=>e.dispatch(new s.g),t=>e.dispatch(new s.f(t)))}createOrganizationSuccess(e){this.pendoService.track("Team Creation - Success",{platform:this.productService.productType})}createOrganizationFail(e,t){this.pendoService.track("Team Creation - Failure",{error:Object(d.get)(t,"error.error.error.message")||"There was an error with team creation."})}updateOrganization(e,{organization:t}){e.patchState({updating:!0}),this.organizationsService.updateOrganization(t).pipe(Object(p.a)(()=>e.patchState({updating:!1}))).subscribe(()=>e.dispatch(new s.C),t=>e.dispatch(new s.B(t)))}getOrganizationProfile(e,{request:t}){e.patchState({updating:!0}),this.organizationsService.getPublicProfile(t).pipe().subscribe(t=>e.dispatch(new s.l(t)),t=>e.dispatch(new s.k(t)))}getOrganizationProfileSuccess(e,{organizationProfile:t}){e.patchState({organizationProfile:t})}clearOrganizationProfile(e,t){e.patchState({organizationProfile:void 0})}};return e.\u0275fac=function(t){return new(t||e)(h.Zb(o.a),h.Zb(c.b),h.Zb(u.b),h.Zb(g.a))},e.\u0275prov=h.Lb({token:e,factory:e.\u0275fac}),b([Object(i.a)(s.x),m("design:type",Function),m("design:paramtypes",[Object,s.x]),m("design:returntype",void 0)],e.prototype,"selectOrganization",null),b([Object(i.a)(s.z),m("design:type",Function),m("design:paramtypes",[Object,s.z]),m("design:returntype",void 0)],e.prototype,"setOrganizations",null),b([Object(i.a)(s.h),m("design:type",Function),m("design:paramtypes",[Object,s.h]),m("design:returntype",void 0)],e.prototype,"getCollections",null),b([Object(i.a)(s.i),m("design:type",Function),m("design:paramtypes",[Object,s.i]),m("design:returntype",void 0)],e.prototype,"getCollectionsSuccess",null),b([Object(i.a)(s.w),m("design:type",Function),m("design:paramtypes",[Object,s.w]),m("design:returntype",void 0)],e.prototype,"selectCollection",null),b([Object(i.a)(s.a),m("design:type",Function),m("design:paramtypes",[Object,s.a]),m("design:returntype",void 0)],e.prototype,"addCollection",null),b([Object(i.a)(s.c),m("design:type",Function),m("design:paramtypes",[Object,s.c]),m("design:returntype",void 0)],e.prototype,"addCollectionSuccess",null),b([Object(i.a)(s.b),m("design:type",Function),m("design:paramtypes",[Object,s.b]),m("design:returntype",void 0)],e.prototype,"addCollectionError",null),b([Object(i.a)(s.m),m("design:type",Function),m("design:paramtypes",[Object,s.m]),m("design:returntype",void 0)],e.prototype,"removeCollection",null),b([Object(i.a)(s.o),m("design:type",Function),m("design:paramtypes",[Object,s.o]),m("design:returntype",void 0)],e.prototype,"removeCollectionSuccess",null),b([Object(i.a)(s.n),m("design:type",Function),m("design:paramtypes",[Object,s.n]),m("design:returntype",void 0)],e.prototype,"removeCollectionError",null),b([Object(i.a)(s.y),m("design:type",Function),m("design:paramtypes",[Object,s.y]),m("design:returntype",void 0)],e.prototype,"setCollectionRenameMode",null),b([Object(i.a)(s.p),m("design:type",Function),m("design:paramtypes",[Object,s.p]),m("design:returntype",void 0)],e.prototype,"renameCollection",null),b([Object(i.a)(s.r),m("design:type",Function),m("design:paramtypes",[Object,s.r]),m("design:returntype",void 0)],e.prototype,"renameCollectionSuccess",null),b([Object(i.a)(s.q),m("design:type",Function),m("design:paramtypes",[Object,s.q]),m("design:returntype",void 0)],e.prototype,"renameCollectionError",null),b([Object(i.a)(s.s),m("design:type",Function),m("design:paramtypes",[Object,s.s]),m("design:returntype",void 0)],e.prototype,"reorderCollections",null),b([Object(i.a)(s.u),m("design:type",Function),m("design:paramtypes",[Object,s.u]),m("design:returntype",void 0)],e.prototype,"reorderCollectionsSuccess",null),b([Object(i.a)(s.v),m("design:type",Function),m("design:paramtypes",[Object,s.v]),m("design:returntype",void 0)],e.prototype,"resetOrganizations",null),b([Object(i.a)(s.e),m("design:type",Function),m("design:paramtypes",[Object,s.e]),m("design:returntype",void 0)],e.prototype,"createOrganization",null),b([Object(i.a)(s.g),m("design:type",Function),m("design:paramtypes",[Object]),m("design:returntype",void 0)],e.prototype,"createOrganizationSuccess",null),b([Object(i.a)(s.f),m("design:type",Function),m("design:paramtypes",[Object,s.f]),m("design:returntype",void 0)],e.prototype,"createOrganizationFail",null),b([Object(i.a)(s.A),m("design:type",Function),m("design:paramtypes",[Object,s.A]),m("design:returntype",void 0)],e.prototype,"updateOrganization",null),b([Object(i.a)(s.j),m("design:type",Function),m("design:paramtypes",[Object,s.j]),m("design:returntype",void 0)],e.prototype,"getOrganizationProfile",null),b([Object(i.a)(s.l),m("design:type",Function),m("design:paramtypes",[Object,s.l]),m("design:returntype",void 0)],e.prototype,"getOrganizationProfileSuccess",null),b([Object(i.a)(s.d),m("design:type",Function),m("design:paramtypes",[Object,s.d]),m("design:returntype",void 0)],e.prototype,"clearOrganizationProfile",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getOrganizations",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getOrganization",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",String)],e,"getOrganizationLogo",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getSelectedOrganization",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",String)],e,"getSelectedOrganizationProductAccountId",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getOrganizationProfile",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",Array)],e,"getOrganizationAccountSettings",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getCollections",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getSelectedCollection",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getReorderingCollections",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getAddingCollection",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getRemovingCollection",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getUpdatingCollection",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getCollectionRenaming",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getWidgetURL",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getWidgetOptions",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getAppFeatures",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getCreating",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getUpdating",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getCollectionsLoading",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"hasOrganization",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"isTrial",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"isTrialExpired",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",void 0)],e,"getSubscriptionEndDate",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[a]),m("design:returntype",Object)],e,"getExternalAccount",null),e=b([Object(i.g)({name:"organizations",defaults:f})],e),e})()},eNUT:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));class i{}class a{}class s{}},eW6i:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("HDdC");n("e0fF");var a=n("7u76"),s=n("uA5T"),o=n("b36G"),r=n("nS47"),c=n("5miH"),l=n("ZriC"),p=n("LvDl"),u=n("fXoL");const d={shown:"shown",renderable:e=>Human.scene.objects[e].isRenderable(),pickable:"pickable",label:e=>Human.scene.objects[e].displayName,expanded:e=>!1,layer:"layer"},g={shown:"trueWins",renderable:"falseWins",pickable:"trueWins"},h={trim:!0};class b{constructor(e){this.trim=e.trim||!1,this.terminal=e.terminal||[],this.root=e.root||{children:[],replace:!1},this.connect=e.connect||{},this.nodes=e.nodes||[]}}let m=(()=>{class e{constructor(e){this.graphService=e,this.objectToNodeMap={},this.nodeToObjectMap={},this.events={},this.events=Object.values(c.a).reduce((e,t)=>(e[t]=this.makeObservable(t),e),{})}makeObservable(e){return new i.a(t=>{Human.events.on(e,e=>{t.next(e)})})}getCanvas(){return Human.renderer.canvas.canvas}getEvent(e){return this.events[e]}fireEvent(e,t){Human.events.fire(e,t)}getSceneBoundary(){return Human.scene.getBoundary()}getObjectBoundary(e){return Human.scene.objects[e].getBoundary()}getObjectLoaded(e){const t=this.getObjectBoundary(e);return!Object(p.isNil)(t)&&Object.values(t).every(e=>isFinite(e))}pickScene(e){return Human.renderer.pick.pick(e.x,e.y,{rayPick:e.rayPick})}transformObject(e,t){const n=Human.scene.objects[e];n?n.setTransform(t):console.error(`Scene object not found: '${e}'`)}toggleNodes(e,t){const n={replace:!1,objects:{},fetchAssets:t};e.forEach(e=>{this.getObjects(e).forEach(e=>{n.objects[e]=t})}),Human.scene.setEnabledObjects(n)}setNodesVisible(e,t=!1){const n={replace:t,objects:Object.assign({},e),fetchAssets:!0};Human.scene.setEnabledObjects(n)}setNodesPickable(e){Object.keys(e).forEach(t=>{(Human.scene.objects[t].isLeaf()?[t]:this.getLeafObjects(t)).forEach(n=>{Human.scene.objects[n].setPickable(e[t])})})}filterObjects(e,t){let n=e.length;for(;n--;)switch(!0){case e[n]instanceof Human.scene.Group:e[n].objects=this.filterObjects(e[n].objects,t),0===e[n].objects.length&&e.splice(n,1);break;case e[n]instanceof Human.scene.Object:-1===e[n].displayName.toLowerCase().indexOf(t)&&e.splice(n,1)}return e}setObjectLayer(e,t){const n=Human.scene.objects[e];if(n.layer=t,n.renderables)for(let i=0;i<n.renderables.length;++i)n.renderables[i].setLayer(t);else n.hasOwnProperty("_layerNode")?n._layerNode.setPriority(t):n.hasOwnProperty("_propertiesNode")&&n._propertiesNode.setProperties({layer:t})}getObjectLayerValues(e){const t={},n=Human.scene.getBoundary();return e.forEach(e=>{const i=Human.scene.objects[e],a=i.getBoundary(),s=Math.min(a.xmin-n.xmin,n.xmax-a.xmax),o=2*Math.min(a.ymin-n.ymin,n.ymax-a.ymax),r=Math.min(a.zmin-n.zmin,n.zmax-a.zmax),c=i.layer;t[c]=t[c]||[],t[c].push({nodeId:e,value:Math.min(s,o,r)})}),t}getSceneGraph(e){const t=r.a.createGraphFromSrc(e,"objectId","objects",d);return this.graphService.synchronize(t,g),t}createViewGraph(e,t=!0,n=!1){const i=t?r.a.pruneHiddenObjects(Human.scene.rootObjects,e):Human.scene.rootObjects,a=i.reduce((e,t)=>{const i=!n&&t.objectId.includes("-root");return e[t.objectId]=!0!==i,i&&t.objects.forEach(t=>{e[t.objectId]=!0}),e},{}),s=this.getSceneGraph(r.a.pruneHiddenObjects(i,a));return this.graphService.resetDepth(s),s}getNode(e,t){return this.graphService.nodeExists(e,t)?r.a.getNode(e,t):this.objectToNodeMap[t]?r.a.getNode(e,this.objectToNodeMap[t]):null}getChapterGraphConfig(){const e=Human.timeline.activeRoot._nowBranch;return new b(Object.assign(Object.assign({},h),e.graph||{}))}getRootObjects(){return Human.scene.rootObjects}getAllSceneObjects(){return Human.scene.objects}getObjects(e){return this.nodeToObjectMap[e]?this.nodeToObjectMap[e]:[Human.scene.objects[e].objectId]||!1}getLeafObjects(e){if(e in this.nodeToObjectMap){const t={};return this.nodeToObjectMap[e].forEach(e=>{Human.scene.objects[e].isLeaf()?t[e]=!0:Human.scene.getLeaves(e).forEach(e=>{t[e]=!0})}),Object.keys(t)}return e in Human.scene.objects?Human.scene.getLeaves(e):[]}getChapter(e){return Human.timeline.branchTimelines[e]||null}getActiveChapters(){return Human.timeline.activeRoot?Human.timeline.activeRoot._chapters:[]}getBoundaryFromObjects(e){return e=e.filter(e=>Human.scene.objects[e].isLeaf()),Human.scene.getBoundary({objectIds:e,clipped:!0})}getLeaves(e){return Human.scene.getLeaves(e)}getVisibleLeaves(){return Human.scene.getEnabledLeaves()}getCameraLookAt(){return Object(o.plainToClass)(s.a,Human.renderer.camera.getLookAt())}barycentricToWorld(e,t,n,i=0){const a=new Float32Array([0,0,0]);return Human.scene.objects[e].barycentricToWorldSpace(i,t,n,a),isNaN(a[0])?[0,0,0]:[...Array.from(a)]}setGraphState(e){Human.scene.setObjectProperties(e)}getAssetNamespaces(){const e={};return Object.keys(Human.assets.loadedAssets).map(e=>e.split("/")[0]).forEach(t=>{e[t]=!0}),Object.keys(e)}loadGraphObject(e){const t=this.getObjects(e).map(e=>Human.scene.objects[e]);return new i.a(e=>{Human.scene.graph.attachAssetSetsToSubtree(t,null,()=>{e.next(!0),e.complete()})})}setProperties(e){Human.properties.set(e)}getDefaultProperties(){return Human.properties.getDefaults()}setTransparencyMode(e){Human.renderer.setTransparencyMode(e)}setPostProcessingEnabled(e){e?Human.renderer.postprocess.enable():Human.renderer.postprocess.disable()}setPostProcessingFeatures(e){const t=e.filter(e=>e.effect!==l.a.GroundShadow);Human.renderer.postprocess.parse(t);const n=e.find(e=>e.effect===l.a.GroundShadow);n?(Human.renderer.groundShadow.init(),Human.renderer.groundShadow.update({blurAmount:n.blur,opacity:n.opacity,translation:[n.xPos,n.yPos,n.zPos],scale:n.size})):Human.renderer.groundShadow.destroy()}enableAnimation(){Human.timeline.enableAnimation()}enableRender(){Human.renderer.enableRender()}canIRender(){return Human.renderer.canIRender()}enableLightLib(e){const t=Human.assets.lights.lightIds[e];if(Array.isArray(t)){const e={};t.forEach(t=>{e[t]=!0}),Human.renderer.lights.clearEnabled(),Human.renderer.lights.setEnabled(e)}}setBranchLights(e,t){const n=Human.timeline.branchTimelines[e];n.lights.libraries[0]!==t&&(n.lights.libraries[0]=t,this.enableLightLib(t))}loadLightLib(e){return new Promise((t,n)=>{Human.assets.getAssetLibrary("light","lights",e,"outline",{},()=>{const i=Human.assets.lights.lightIds;Array.isArray(i[e])?t(e):n()})})}}return e.\u0275fac=function(t){return new(t||e)(u.Zb(a.a))},e.\u0275prov=u.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},ejx4:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ofXK"),a=n("vvyD"),s=n("PCNd"),o=n("tyNb"),r=n("fXoL");let c=(()=>{class e{}return e.\u0275mod=r.Nb({type:e}),e.\u0275inj=r.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,o.i,s.a]]}),e})()},esev:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("5miH"),a=n("RD2w"),s=n("2Vo4");let o=(()=>{class e{static getOfflineModelIDs(){return e._offlineModelIDs$}static setOfflineModelIDs(t){e._offlineModelIDs.next(t)}static getOfflineModelIDList(){return this._offlineModelIDs.getValue()}static setStore(t){e.store=t}static setSnackBar(t){e.snackBar=t}static setRouter(t){e.router=t}static debug(e){"undefined"!=typeof Human&&void 0!==Human.events&&Human.events.fire(i.a.NativeDebugMessage,e)}static fire(e,t){Human.events.fire(e,t)}on(e,t){Human.events.on(e,t)}send(t,n){let s=null,o={};switch(t){case a.a.NativeErrorMessage:s=e.snackBar.open(n,"OK",{duration:6e3,verticalPosition:"top"}),s.onAction().subscribe(()=>{s.dismiss()});break;case a.a.NativeSetAppVersion:e.appVersion=n.appVersion;break;case a.a.NativeRedirect:o=JSON.parse(n.queryItems),e.router.navigate([n.url],{queryParams:o});break;case a.a.NativeReload:window.location.href=n.url;break;case a.a.NativeOfflineModelIds:e.setOfflineModelIDs(n.modelIds);break;default:Human.events.fire(i.a.NativeDebugMessage,"unprocessed HumanWindowAPI send "+t)}}}return e.store=null,e.snackBar=null,e.router=null,e.appVersion="",e._offlineModelIDs=new s.a([]),e._offlineModelIDs$=e._offlineModelIDs.asObservable(),e})()},ewuU:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("V7wM");const a=(e,t)=>{const n=[...e];return t.forEach(e=>{n.push(void 0!==e?Number(e):1)}),n},s=e=>{const t=/rgba?\((\d{1,3})\,\s*(\d{1,3})\,\s*(\d{1,3})\,?\s*(\d+\.\d{0,5})?\)/g;let n=[];const i=t.exec(e),s=t.exec(e);return n=a(n,i.slice(1,5)),n=a(n,s.slice(1,5)),n};class o{constructor(e,t,n){this.colors=e,this.gradientType=t,this.colorStops=n}static equals(e,t){return e.gradientType===t.gradientType&&e.colors.length===t.colors.length&&e.colors.every((e,n)=>e===t.colors[n])&&e.colorStops.length===t.colorStops.length&&e.colorStops.every((e,n)=>e===t.colorStops[n])}static deserialize(e){if(!Object.keys(e).length)return null;let t=[];"string"==typeof e.colors?t=s(e.colors):Array.isArray(e.colors)&&8===e.colors.length&&(t=e.colors.map((e,t)=>(t+1)%4&&e<=1?Math.round(255*e):e));const n=/radial|linear/.test(e.gradientType)?e.gradientType:"radial",i=e.colorStops,a=Array.isArray(i)&&2===i.length?[i[0],i[1]]:[0,100];return new o(t,n,a)}static toCSS(e){const t=e.colors,n=`rgba(${t[0]},${t[1]}, ${t[2]}, ${t[3]}) ${e.colorStops[0]}%`,i=`rgba(${t[4]},${t[5]}, ${t[6]}, ${t[7]}) ${e.colorStops[1]}%`;return"radial"===e.gradientType?`radial-gradient(circle, ${n}, ${i})`:`linear-gradient(180deg, ${n}, ${i})`}static fromCSS(e){const t=/radial-gradient/.test(e)?"radial":"linear",n=s(e),i=/([0-9]+)\%/g,a=[0,100];return a[0]=Number(i.exec(e)[1]),a[1]=Number(i.exec(e)[1]),new o(n,t,a)}static isTransparent(e){if(!e||!e.colors)return!1;const t=e.colors,n=t[3];return t.length<=4?0===n:0===n&&0===t[7]}static isLight(e){const t=null==e?void 0:e.colors;if(Array.isArray(t)){const e=t.slice(0,3);return i.a.isLight(e)}return!1}}},f3gM:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Web="web",e.SDK="sdk",e}({})},f5j2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("nS47");!function(e){function t(e,t){return e.reduce((e,n)=>(e[n]=t[n]||!1,e),{})}e.createVoter=t,e.getInitialVoterState=function(e,n){return Object.keys(e).reduce((i,a)=>(i[a]=t(n,e[a]),i),{})},e.getInitialElectionDepth=function(e,t){return Object.keys(e).reduce((e,n)=>Math.max(e,a.a.getNode(t,n).depth),0)-1},e.getEligibleElections=function(e,t,n){return a.a.getAllAncestorsFromList(e,t).filter(t=>t&&a.a.getNode(e,t).depth===n)};const n={trueWins:e=>({result:e.votesFor.length>0,dissenters:[...e.votesAgainst]}),falseWins:e=>({result:e.votesAgainst.length>0,dissenters:[...e.votesFor]}),majorityWins:e=>{const t=e.votesFor.length>e.votesAgainst.length;return{result:t,dissenters:t?[...e.votesAgainst]:[...e.votesFor]}}};function i(e,t,i){return Object.keys(t).reduce((a,s)=>{const o=t[s],r=i[s]||"majorityWins",{result:c,dissenters:l}=n[r](o);return a[s]={id:e,result:c,dissenters:l,voters:[...o.votesFor,...o.votesAgainst]},a},{})}e.buildElectionResult=i,e.getElectionResults=function(e,n,s,o){const r=n,c=Object.keys(o);return{results:s.reduce((s,l)=>{const p=a.a.getSuccessors(e,l),u=p.map(i=>({[i]:n[i]||t(c,a.a.getState(e,i,c))}));p.forEach(e=>{delete r[e]});const d=i(l,function(e,t){return Object.keys(e).reduce((e,n)=>{const i=t.reduce((e,t)=>{const i=Object.keys(t)[0];return t[i][n]?e.votesFor.push(i):e.votesAgainst.push(i),e},{votesFor:[],votesAgainst:[]});return e[n]=i,e},{})}(o,u),o);return r[l]=Object.entries(d).reduce((e,[t,n])=>(e[t]=n.result,e),{}),s.results.push(d),s},{results:[]}).results,remainingVoters:r}}}(i||(i={}))},fMqy:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Circle="circle",e.CirclePlus="circle-plus",e.CircleMinus="circle-minus",e.Label="label",e.CircleLabel="circle-label",e}({})},"fP/T":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("ofXK"),a=n("AcyG"),s=n("YpC8"),o=n("N0Zw"),r=n("PCNd"),c=n("Mh2x"),l=n("vvyD"),p=n("aKmd"),u=n("lR5k"),d=n("oH02"),g=n("3Pt+"),h=n("Rc+H"),b=n("Vrox"),m=n("fXoL");let f=(()=>{class e{}return e.\u0275mod=m.Nb({type:e}),e.\u0275inj=m.Mb({factory:function(t){return new(t||e)},imports:[[a.d.forFeature([s.a,c.a,o.a,b.a]),i.c,r.a,l.a,p.a,d.a,g.z,u.a.forChild(),h.a]]}),e})()},fnuH:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Mouse="mouse",e.Touch="touch",e}({})},fqos:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.flyToChapter="flyToChapter",e.flyToObject="flyToObject",e.flyToCamera="flyToCamera",e}({})},g408:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("7b4e");!function(e){e.makeChapterIdMap=function(e,t){return e.reduce((e,n)=>(e[n.id]=!0===t?a.a.idWithPrefix("chapter"):n.id,e),{})}}(i||(i={}))},gQBz:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var i=n("EF3F"),a=n("0Yvn"),s=n("GUwF"),o=n("nS47");function r(e,t,n){const i=o.a.getSuccessors(e,t);if(0===i.length)return!1;for(const a of i)if(!0===n[a])return!0;return i.some(t=>r(e,t,n))}function c(e,t,n){switch(n[t]){case!0:return!0;case!1:return!1;case void 0:{const i=o.a.getAncestor(e,t);return!!i&&c(e,i,n)}}}function l(e,t,n,l){return Object.keys(e.nodes).reduce((p,u)=>(p[u]=function(p){const u=c(e,p,t)||r(e,p,t),d=function e(t,n,i){switch(i[n]){case!0:return!1;case!1:return!0;case void 0:{const a=o.a.getAncestor(t,n);return!a||e(t,a,i)}}}(e,p,n);return{objectId:p,checked:!1,selected:!1,paint:function e(t,n,r){if(r&&r[n]&&("tintColor"in(c=r[n])||"opacity"in c||"brightness"in c||"saturation"in c||"contrast"in c))return a.a.fromEngine(new s.a(r[n]));var c;const l=o.a.getAncestor(t,n);return l?e(t,l,r):i.c}(e,p,l),pickable:d,shown:u,shownSetByTween:!1}}(u),p),{})}},"gm/O":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){class t{constructor(){}}t.type="[Engine Nodes] Reset",e.Reset=t;class n{constructor(e){this.nodeState=e}}n.type="[Engine Nodes] init nodes",e.InitNodeState=n;class i{constructor(e){this.patches=e}}i.type="[Engine Nodes] patch nodes",e.ApplyPatch=i;class a{constructor(e){this.activeChapterId=e}}a.type="[Engine Nodes] set active chapter",e.SetActiveChapter=a;class s{constructor(e,t){this.originalChapterId=e,this.copyChapterId=t}}s.type="[Engine Nodes] Duplicate node state",e.DuplicateNodeState=s;class o{constructor(e,t,n,i=!0,a=!1){this.show=e,this.objectIds=t,this.patch=n,this.record=i,this.setByTween=a}}o.type="[Engine Nodes] update nodes shown",e.UpdateNodesShown=o;class r{constructor(e){this.objectId=e}}r.type="[Engine Nodes] update nodes selected",e.UpdateNodeSelected=r;class c{constructor(e,t,n){this.checked=e,this.objectIds=t,this.patch=n}}c.type="[Engine Nodes] update nodes checked",e.UpdateNodesChecked=c;class l{constructor(e,t,n){this.pickable=e,this.objectIds=t,this.patch=n}}l.type="[Engine Nodes] update nodes pickable",e.UpdateNodesPickable=l;class p{constructor(e,t,n,i=!0){this.recipe=e,this.objectIds=t,this.patch=n,this.record=i}}p.type="[Engine Nodes] update nodes paint",e.UpdateNodesPaint=p}(i||(i={}))},gw9s:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("wOnQ"),s=n.n(a),o=(n("INDF"),n("LRne")),r=n("HDdC"),c=n("Cfvw"),l=n("Iab2"),p=n("VUv2");!function(e){e.exportImage=function(t,n,i,a){const s="string"==typeof t?e.base64ToBlob(t,n):t;return a?Object(p.changeDpiBlob)(s,a).then((function(e){Object(l.saveAs)(e,i)})):Object(l.saveAs)(s,i),Object(o.a)(!0)},e.canvasToBlob=function(e,t,n){return new r.a(i=>{e.toBlob(e=>{i.next(e),i.complete()},t,n)})},e.fitCanvas=function(e,{width:t,height:n}){const i=document.createElement("canvas");i.width=t,i.height=n;const a=i.getContext("2d"),s=Math.max(.5*(e.width-i.width/i.height*e.height),0);return new r.a(t=>{a.drawImage(e,s,0,i.width,i.height),t.next(i),t.complete()})},e.elementToCanvas=function(e,t=!1){const n=t?{backgroundColor:"transparent"}:{};return Object(c.a)(s()(e,Object.assign({scale:1},n)))},e.combineCanvasElements=function(e){const t=Math.max(0,...e.map(e=>e.width)),n=Math.max(0,...e.map(e=>e.height)),i=document.createElement("canvas");i.width=t,i.height=n;const a=i.getContext("2d");return e.forEach(e=>{a.drawImage(e,0,0)}),i},e.base64ToBlob=function(e,t){const n=atob(e.split(",")[1]),i=new ArrayBuffer(n.length),a=new Uint8Array(i);for(let s=0;s<n.length;s++)a[s]=n.charCodeAt(s);return new Blob([i],{type:t})},e.blobToBase64=function(e){return new r.a(t=>{const n=new FileReader;n.addEventListener("load",()=>{t.next(n.result),t.complete()}),n.readAsDataURL(e)})},e.blobToCanvas=function(e,{width:t,height:n}){return new r.a(i=>{const a=document.createElement("canvas");a.width=t,a.height=n;const s=a.getContext("2d"),o=new Image;o.addEventListener("load",()=>{s.drawImage(o,0,0),i.next(a),i.complete()}),o.src=URL.createObjectURL(e)})}}(i||(i={}))},gzgB:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.BioDigital="biodigital",e.Wikipedia="wikipedia",e.NCIT="ncit",e}({})},h8op:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}));var i=n("ve2m"),a=n("zKvh");let s=(()=>{class e{constructor(e){this.thumbnails=e}}return e.type="[Story Chapters] Register thumbnail URLs from story",e})(),o=(()=>{class e{constructor(e,t=i.a,n=a.a.JPEG,s=.92,o,r="original",c,l,p=[]){this.chapterId=e,this.background=t,this.imageType=n,this.imageQuality=s,this.dimensions=o,this.crop=r,this.includeLabels=c,this.includeCopyright=l,this.layers=p}}return e.type="[Story Chapters] Take picture",e})(),r=(()=>{class e{constructor(e,t,n){this.chapterId=e,this.blob=t,this.dimensions=n}}return e.type="[Story Chapters] Take picture success",e})()},hQIT:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("ofXK"),a=n("AcyG"),s=n("vvyD"),o=n("PCNd"),r=n("3Pt+"),c=n("c8sk"),l=n("R9Cn"),p=n("fXoL");let u=(()=>{class e{}return e.\u0275mod=p.Nb({type:e}),e.\u0275inj=p.Mb({factory:function(t){return new(t||e)},imports:[[i.c,s.a,r.z,o.a,l.b,a.d.forFeature([c.a])]]}),e})()},hQeY:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("0IaG"),a=n("fXoL"),s=n("ofXK"),o=n("IlST");function r(e,t){if(1&e&&(a.Vb(0,"button",7),a.Pc(1),a.Ub()),2&e){const e=a.gc();a.Db(1),a.Rc(" ",e.settings.miscText," ")}}function c(e,t){if(1&e&&(a.Vb(0,"button",8),a.Pc(1),a.Ub()),2&e){const e=a.gc();a.mc("mat-dialog-close",!1),a.Db(1),a.Rc(" ",e.settings.cancelText," ")}}function l(e,t){if(1&e&&(a.Vb(0,"button",9),a.Pc(1),a.Ub()),2&e){const e=a.gc();a.mc("mat-dialog-close",!0),a.Db(1),a.Rc(" ",e.settings.confirmText," ")}}let p=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.settings={titleText:"Confirm Action",bodyText:"",confirmText:"Confirm",confirmColor:"primary",cancelText:"Cancel",confirmEnabled:!0,cancelEnabled:!0,miscText:""},t&&(this.settings=Object.assign(Object.assign({},this.settings),t))}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(i.g),a.Pb(i.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-confirm-dialog"]],decls:10,vars:8,consts:[["data-test","confirmDialog","role","alertdialog","aria-modal","true"],["mat-dialog-title",""],["mat-dialog-content","",1,"pt-4","pb-6","text-14"],["mat-dialog-actions","",1,"dialog__actions","pt-2"],["app-button","","buttonTheme","light",3,"mat-dialog-close",4,"ngIf"],["type","button","class","mr-1","app-button","","buttonTheme","light","data-test","confirmDialogCancelButton",3,"mat-dialog-close",4,"ngIf"],["type","button","app-button","","buttonType","primary","data-test","confirmDialogConfirmButton","cdkFocusInitial","",3,"mat-dialog-close",4,"ngIf"],["app-button","","buttonTheme","light",3,"mat-dialog-close"],["type","button","app-button","","buttonTheme","light","data-test","confirmDialogCancelButton",1,"mr-1",3,"mat-dialog-close"],["type","button","app-button","","buttonType","primary","data-test","confirmDialogConfirmButton","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Vb(1,"h1",1),a.Pc(2),a.Ub(),a.Vb(3,"p",2),a.Pc(4),a.Ub(),a.Vb(5,"div",3),a.Nc(6,r,2,1,"button",4),a.Vb(7,"div"),a.Nc(8,c,2,2,"button",5),a.Nc(9,l,2,2,"button",6),a.Ub(),a.Ub(),a.Ub()),2&e&&(a.Eb("aria-label",t.settings.titleText),a.Db(2),a.Rc(" ",t.settings.titleText," "),a.Db(2),a.Rc(" ",t.settings.bodyText," "),a.Db(1),a.Hb("dialog__actions--compact",!t.settings.miscText),a.Db(1),a.mc("ngIf",t.settings.miscText),a.Db(2),a.mc("ngIf",t.settings.cancelEnabled),a.Db(1),a.mc("ngIf",t.settings.confirmEnabled))},directives:[i.h,i.e,i.c,s.p,o.a,i.d],styles:["[_nghost-%COMP%]{display:block}.dialog__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.dialog__actions--compact[_ngcontent-%COMP%]{justify-content:flex-end}@media (min-width:480px){[_nghost-%COMP%]{min-width:320px}}"],changeDetection:0}),e})()},icKS:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("AytR"),a=n("fXoL"),s=n("nLfN"),o=function(e){return e.Web="web",e.Android="mobile_android",e.iOS="mobile_ios",e}({});let r=(()=>{class e{constructor(e){this.platform=e}get productKey(){return i.a.productKey}get productType(){if(i.a.native){if(this.platform.ANDROID)return o.Android;if(this.platform.IOS)return o.iOS}return o.Web}}return e.\u0275fac=function(t){return new(t||e)(a.Zb(s.a))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},ihWl:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return p}));var i=n("EETq");class a{constructor(e,t=[],n=""){this.categoryId=e,this.tags=t,this.query=n,this.type=i.a.Category}}class s{constructor(e,t="",n=[]){this.organizationId=e,this.query=t,this.tags=n,this.type=i.a.Organization}}class o{constructor(e,t,n="",a=[]){this.organizationId=e,this.collectionId=t,this.query=n,this.tags=a,this.type=i.a.Collection}}class r{constructor(e="",t=[]){this.query=e,this.tags=t,this.categoryId="public",this.type=i.a.Community}}class c{constructor(e="",t=[]){this.query=e,this.tags=t,this.type=i.a.Private}}class l{constructor(e="",t="",n=[]){this.query=e,this.directory=t,this.tags=n,this.type=i.a.Internal}}class p{constructor(e,t="",n="",a=[]){this.primary=e,this.secondary=t,this.query=n,this.tags=a,this.type=i.a.Loft}}},izPL:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),a=n("+pSP"),s=n("fXoL");let o=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a]]}),e})()},j8e5:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i,a=n("AcyG");!function(e){class t{constructor(e){this.breakpoint=e}}t.type="[View] Set Breakpoint",e.SetBreakpoint=t}(i||(i={}));var s=n("Ryms"),o=n("itXk"),r=n("lJxs"),c=n("/uUt"),l=n("pLZG"),p=n("fXoL"),u=n("0MNC"),d=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class h{}let b=(()=>{let e=class{constructor(e,t){this.breakpointObserver=e,this.store=t}static getBreakpoint(e){return e.breakpoint}static getBreakpointLabel(e){return["(max-width: 374px)","(max-width: 599px)","(max-width: 959px)","(max-width: 1439px)","(min-width: 1440px)"][e.breakpoint]}setBreakpoint(e,t){e.patchState({breakpoint:t.breakpoint})}ngxsOnInit(e){const t=this.breakpointObserver.observe(["(max-width: 374px)"]),n=this.breakpointObserver.observe(["(max-width: 599px)"]),a=this.breakpointObserver.observe(["(max-width: 959px)"]),p=this.breakpointObserver.observe(["(max-width: 1439px)"]),u=this.breakpointObserver.observe(["(min-width: 1440px)"]);Object(o.b)(t,n,a,p,u).pipe(Object(r.a)(([e,t,n,i,a])=>e.matches?s.a.XSmall:t.matches?s.a.Small:n.matches?s.a.Medium:i.matches?s.a.Large:a.matches?s.a.XLarge:null),Object(c.a)(),Object(l.a)(e=>null!=e)).subscribe(t=>{e.dispatch(new i.SetBreakpoint(t))})}};return e.\u0275fac=function(t){return new(t||e)(p.Zb(u.a),p.Zb(a.h))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac}),d([Object(a.a)(i.SetBreakpoint),g("design:type",Function),g("design:paramtypes",[Object,i.SetBreakpoint]),g("design:returntype",void 0)],e.prototype,"setBreakpoint",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[h]),g("design:returntype",void 0)],e,"getBreakpoint",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[h]),g("design:returntype",void 0)],e,"getBreakpointLabel",null),e=d([Object(a.g)({name:"breakpoint",defaults:{breakpoint:null}})],e),e})()},jDQD:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Capture="capture",e.DoNotCaptureShowMessage="do_not_capture_show_message",e.DoNotCapture="do_not_capture",e}({})},jjCP:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"j",(function(){return r})),n.d(t,"i",(function(){return c})),n.d(t,"l",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"g",(function(){return u})),n.d(t,"m",(function(){return d})),n.d(t,"k",(function(){return g})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return b}));let i=(()=>{class e{constructor(e){this.view=e}}return e.type="[Edit] Set view",e})(),a=(()=>{class e{constructor(){}}return e.type="[Edit] Next view",e})(),s=(()=>{class e{constructor(e=!1,t){this.quizLocked=e,this.quizQuestion=t}}return e.type="[Edit] Preview",e})(),o=(()=>{class e{constructor(){}}return e.type="[Edit] Previous view",e})(),r=(()=>{class e{constructor(e){this.show=e}}return e.type="[Edit] Show columns",e})(),c=(()=>{class e{constructor(e,t){this.column=e,this.show=t}}return e.type="[Edit] Show column",e})(),l=(()=>{class e{constructor(e){this.show=e}}return e.type="[Edit] Show Timeline Editor",e})(),p=(()=>{class e{constructor(){}}return e.type="[Edit] Reset",e})(),u=(()=>{class e{constructor(e){this.layerOrderMode=e}}return e.type="[Edit] Set Layer Order Mode",e})(),d=(()=>{class e{constructor(e){this.show=e}}return e.type="[Edit] Show Tree Node Ids",e})(),g=(()=>{class e{constructor(e){this.show=e}}return e.type="[Edit] Show Root Nodess",e})(),h=(()=>{class e{constructor(e){this.size=e}}return e.type="[Edit] Set Canvas Size",e})(),b=(()=>{class e{constructor(e){this.enable=e}}return e.type="[Edit] Auto Capture",e})()},"k+hL":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{}},k0jR:function(e,t,n){"use strict";n.d(t,"o",(function(){return i})),n.d(t,"n",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return p})),n.d(t,"p",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return g})),n.d(t,"m",(function(){return h})),n.d(t,"l",(function(){return b})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return y}));let i=(()=>{class e{constructor(e){this.widgetURL=e}}return e.type="[Publish] Set Widget URL",e})(),a=(()=>{class e{constructor(e){this.dimensions=e}}return e.type="[Publish] Set Dimensions",e})(),s=(()=>{class e{constructor(e,t,n){this.model=e,this.widgetOptions=t,this.camera=n}}return e.type="[Publish] Get iFrame",e})(),o=(()=>{class e{constructor(e){this.embed=e}}return e.type="[Publish] Get iFrame Success",e})(),r=(()=>{class e{constructor(){}}return e.type="[Publish] Get iFrame Fail",e})(),c=(()=>{class e{constructor(e,t,n){this.model=e,this.widgetOptions=t,this.camera=n}}return e.type="[Publish] Get URL",e})(),l=(()=>{class e{constructor(e,t){this.model=e,this.url=t}}return e.type="[Publish] Get URL Success",e})(),p=(()=>{class e{constructor(e){this.model=e}}return e.type="[Publish] Get URL Fail",e})(),u=(()=>{class e{constructor(e){this.publishing=e}}return e.type="[Publish] Set Publishing",e})(),d=(()=>{class e{constructor(){}}return e.type="[Publish] Reset Publishing",e})(),g=(()=>{class e{constructor(e,t="jpeg"){this.imageData=e,this.imageType=t}}return e.type="[Publish] Save Publish Image",e})(),h=(()=>{class e{constructor(e){this.imageURL=e}}return e.type="[Publish] Save Publish Image Success",e})(),b=(()=>{class e{constructor(){}}return e.type="[Publish] Save Publish Image Fail",e})(),m=(()=>{class e{constructor(e,t,n,i,a){this.model=e,this.imageData=t,this.fileType=n,this.widgetOptions=i,this.camera=a}}return e.type="[Publish] Get Publish Image Code",e})(),f=(()=>{class e{constructor(e){this.embed=e}}return e.type="[Publish] Get Publish Image Code Success",e})(),y=(()=>{class e{constructor(){}}return e.type="[Publish] Get Publish Image Code Fail",e})()},k93M:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("AcyG"),a=n("Dz/e"),s=n("fXoL"),o=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},r=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const c={storyLoadProgress:0,chunkLoadProgress:0};let l=(()=>{let e=class{constructor(){}static getStoryLoadProgress(e){return e.storyLoadProgress}static getChunkLoadProgress(e){return e.chunkLoadProgress}setProgress(e,t){e.patchState({storyLoadProgress:t.storyLoadProgress,chunkLoadProgress:t.chunkLoadProgress})}resetProgress(e,t){e.setState(Object.assign({},c))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac}),o([Object(i.a)(a.b),r("design:type",Function),r("design:paramtypes",[Object,a.b]),r("design:returntype",void 0)],e.prototype,"setProgress",null),o([Object(i.a)(a.a),r("design:type",Function),r("design:paramtypes",[Object,a.a]),r("design:returntype",void 0)],e.prototype,"resetProgress",null),o([Object(i.f)(),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],e,"getStoryLoadProgress",null),o([Object(i.f)(),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],e,"getChunkLoadProgress",null),e=o([Object(i.g)({name:"engineProgress",defaults:c})],e),e})()},"kR+W":function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"i",(function(){return a})),n.d(t,"h",(function(){return s})),n.d(t,"j",(function(){return o})),n.d(t,"l",(function(){return r})),n.d(t,"k",(function(){return c})),n.d(t,"q",(function(){return l})),n.d(t,"s",(function(){return p})),n.d(t,"r",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"p",(function(){return y})),n.d(t,"w",(function(){return v})),n.d(t,"y",(function(){return O})),n.d(t,"x",(function(){return S})),n.d(t,"m",(function(){return x})),n.d(t,"o",(function(){return C})),n.d(t,"n",(function(){return w})),n.d(t,"t",(function(){return j})),n.d(t,"v",(function(){return k})),n.d(t,"u",(function(){return P}));let i=(()=>{class e{constructor(e){this.organization=e}}return e.type="[Users] Join Organization",e})(),a=(()=>{class e{constructor(e){this.organization=e}}return e.type="[Users] Join Organization Success",e})(),s=(()=>{class e{constructor(e){this.organization=e}}return e.type="[Users] Join Organization Fail",e})(),o=(()=>{class e{constructor(e){this.code=e}}return e.type="[Users] Join Organization With Code",e})(),r=(()=>{class e{constructor(e){this.organizationName=e}}return e.type="[Users] Join Organization With Code Success",e})(),c=(()=>{class e{constructor(e){this.error=e}}return e.type="[Users] Join Organization With Code Fail",e})(),l=(()=>{class e{constructor(e,t){this.groupEID=e,this.invites=t}}return e.type="[Users] Send Organization Invite",e})(),p=(()=>{class e{constructor(e){this.responses=e}}return e.type="[Users] Send Organization Invite Success",e})(),u=(()=>{class e{constructor(e){this.error=e}}return e.type="[Users] Send Organization Invite Fail",e})(),d=(()=>{class e{constructor(e){this.groupId=e}}return e.type="[Users] Get Organization Users",e})(),g=(()=>{class e{constructor(e){this.users=e}}return e.type="[Users] Get Organization Users Success",e})(),h=(()=>{class e{constructor(e){this.error=e}}return e.type="[Users] Get Organization Users Fail",e})(),b=(()=>{class e{constructor(e){this.groupId=e}}return e.type="[Users] Get Organization Invited Users",e})(),m=(()=>{class e{constructor(e){this.invites=e}}return e.type="[Users] Get Organization Invited Users Success",e})(),f=(()=>{class e{constructor(e){this.error=e}}return e.type="[Users] Get Organization Invited Users Fail",e})(),y=(()=>{class e{}return e.type="[Users] Reset",e})(),v=(()=>{class e{constructor(e,t){this.groupId=e,this.users=t}}return e.type="[Users] Update User Roles",e})(),O=(()=>{class e{constructor(e,t){this.groupId=e,this.users=t}}return e.type="[Users] Update User Roles Success",e})(),S=(()=>{class e{}return e.type="[Users] Update User Roles Fail",e})(),x=(()=>{class e{constructor(e,t){this.groupId=e,this.users=t}}return e.type="[Users] Remove Organization User",e})(),C=(()=>{class e{constructor(e,t){this.groupId=e,this.users=t}}return e.type="[Users] Remove Organization User Success",e})(),w=(()=>{class e{}return e.type="[Users] Remove Organization User Fail",e})(),j=(()=>{class e{constructor(e,t){this.groupId=e,this.users=t}}return e.type="[Users] Transfer Organization Content",e})(),k=(()=>{class e{constructor(e,t){this.groupId=e,this.users=t}}return e.type="[Users] Transfer Organization Content Success",e})(),P=(()=>{class e{}return e.type="[Users] Transfer Organization Content Fail",e})()},kTA6:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return u}));var i=n("tyNb"),a=n("LvDl"),s=n("pLZG"),o=n("AytR"),r=n("bKUj"),c=n("7PKw"),l=n("fXoL"),p=function(e){return e.DiscoveredChapterNav="Discovered Chapter Nav",e}({});let u=(()=>{class e{constructor(e,t,n,i){this.config=e,this.router=t,this.route=n,this.organizationsService=i,this.appended=!1,this.initialized=!1,this.sessionEvents={},this.pageEvents={},this.queuedEvents=[],this.initRouteListener()}appendScript(){if(!this.config.enabled||this.appended)return;const e=`\n      (function(apiKey){\n        (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];\n        v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){\n            o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);\n            y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';\n            z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');\n      })('${this.config.pendoId}');\n    `,t=document.createElement("script");t.textContent=e,document.body.appendChild(t),this.appended=!0}initialize(e){if(!this.pendoEnabled())return;const t=Object.assign({},e);t.visitor.id&&this.setIds(t),pendo.initialize(t),this.initialized=!0,this.flushQueuedEvents()}identify(e){if(!this.pendoEnabled())return;const t=Object.assign({},e);this.setIds(t),pendo.identify(t)}createVisitorData(e){const t={},n=Object(r.b)(e.account_settings),i=Object(a.get)(e,"organizations[0].user_role.role_display_name",null);return e.hasOwnProperty("id")&&(t.id=e.id.toString()),e.hasOwnProperty("email")&&(t.email=e.email),e.hasOwnProperty("first_name")&&e.hasOwnProperty("last_name")&&(t.full_name=`${e.first_name} ${e.last_name}`),e.hasOwnProperty("registration_date")&&(t.registration_date=e.registration_date),e.hasOwnProperty("premium_account")&&(t.premium=e.premium_account),e.hasOwnProperty("user_is_developer")&&(t.developer=e.user_is_developer),e.hasOwnProperty("subscription")&&(t.subscriptionType=e.subscription?e.subscription.subscription_type:null),e.hasOwnProperty("is_third_party")&&(t.thirdParty=e.is_third_party),n.hasOwnProperty("account_purpose")&&(t.purpose=n.account_purpose?n.account_purpose.value:null),n.hasOwnProperty("account_role")&&(t.role=n.account_role?n.account_role.value:null),n.hasOwnProperty("account_field")&&(t.field=n.account_field?n.account_field.value:null),i&&(t.teamRole=i),t}updateVisitorData(e){this.pendoEnabled()&&pendo.updateOptions({visitor:this.createVisitorData(e)})}createAccountData(e){const t=Object(a.get)(e,"group_attributes",null);return{id:Object(a.get)(e,"id",null),name:Object(a.get)(e,"name",null),subscriptionType:Object(a.get)(e,"subscription.type",null),subscriptionEndDate:Object(a.get)(e,"subscription.paid_through_date",null),usersCount:Object(a.get)(e,"users_count",null),purpose:this.getGroupAttributeValue(t,"account_purpose"),field:this.getGroupAttributeValue(t,"account_field"),companyWebsite:this.getGroupAttributeValue(t,"account_company_website"),companySize:this.getGroupAttributeValue(t,"account_company_size")}}flushQueuedEvents(){this.queuedEvents.forEach(e=>{this.track(e.trackType,e.metadata)})}track(e,t){this.pendoEnabled()&&(this.initialized?pendo.track(e,t):this.queuedEvents.push({trackType:e,metadata:t}))}trackOncePerSession(e,t){this.sessionEvents[e]||this.pendoEnabled()&&(this.track(e,t),this.sessionEvents[e]=!0)}trackOncePerPage(e,t){this.pageEvents[e]||this.pendoEnabled()&&(this.track(e,t),this.pageEvents[e]=!0)}trackSignIn(e){this.trackSignInSignUp("Sign In - Success",e)}trackSignUp(e){this.trackSignInSignUp("Sign Up - Success",e)}trackSignInSignUp(e,t){const n=this.route.snapshot.queryParams;this.track(e,{type:t,referrer:document.referrer,refParam:n.ref||null,groupInvite:n.hasOwnProperty("group_invite"),groupCode:n.hasOwnProperty("group")&&n.hasOwnProperty("code")})}initRouteListener(){this.router.events.pipe(Object(s.a)(e=>e instanceof i.c)).subscribe(()=>{this.pageEvents={}})}pendoEnabled(){if(!this.config.enabled)return!1;const e=Object(a.get)(this.config,`whitelist[${o.a.application}]`,null);if(!Object(a.isNil)(e)){const t=new URLSearchParams(window.location.search),n=t.get("id")||t.get("be")||t.get("m");return e.includes(n)}return!0}setIds(e){const t=Object(a.get)(this.config,`idPrefixes[${o.a.deploy}]`,"");e.visitor.id=`${t}${e.visitor.id}`,e.account.id&&(e.account.id=`${t}${e.account.id}`)}getGroupAttributeValue(e,t){if(!e)return null;const n=this.organizationsService.getOrganizationAttribute(e,"account_settings",t);return n?n.value:null}}return e.\u0275fac=function(t){return new(t||e)(l.Zb("pendoConfig"),l.Zb(i.e),l.Zb(i.a),l.Zb(c.a))},e.\u0275prov=l.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},kqJf:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("LvDl");function a(e,t,n){const a=t.map(t=>e[t]).filter(e=>!Object(i.isNil)(e));return n?a.sort().shift():a.sort().pop()}function s(e,t,n){if(0===t.length)return e;const i=new Intl.Collator("en-US",{sensitivity:"base"});return e.sort((e,s)=>{const o=a(e,t,n)||"",r=a(s,t,n)||"";return(n?1:-1)*i.compare(o.toString(),r.toString())})}},l4YF:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));class i{}class a{}},l57l:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Annotation="annotation",e.Classic="classic",e.StudioNext="studioNext",e.Context="context",e}({})},lMGN:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("AcyG"),a=n("kR+W"),s=n("nYR2"),o=n("vkgz"),r=n("pLZG"),c=n("5+tZ"),l=n("kTA6"),p=n("FnMX");class u{}var d=n("icKS"),g=n("qXBG"),h=n("Kn5L"),b=n("fXoL"),m=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const y={joining:!1,inviting:!1,loadingUsers:!1,loadingInvites:!1,users:[],invites:[]};let v=(()=>{let e=class{constructor(e,t,n,i){this.usersService=e,this.pendoService=t,this.productService=n,this.authService=i}static getUsers(e){return e.users}static getInvites(e){return e.invites}static getUsersLoading(e){return e.loadingUsers}static getJoining(e){return e.joining}static getInviting(e){return e.inviting}joinOrganization(e,{organization:t}){e.patchState({joining:!0}),this.usersService.addUserToOrganization(t.eid).pipe(Object(s.a)(()=>e.patchState({joining:!1}))).subscribe(()=>e.dispatch(new a.i(t)),()=>e.dispatch(new a.h(t)))}joinOrganizationWithCode(e,{code:t}){e.patchState({joining:!0}),this.usersService.addUserWithGroupCode(t).pipe(Object(s.a)(()=>e.patchState({joining:!1}))).subscribe(t=>e.dispatch(new a.l(t)),t=>e.dispatch(new a.k(t)))}joinOrganizationWithCodeSuccess(){this.pendoService.track("Account Upgrade - Free Individual to Team")}sendOrganizationInvite(e,{groupEID:t,invites:n}){e.patchState({inviting:!0}),this.authService.isHuman("invites",!0).pipe(Object(o.a)(t=>{t.isHuman||e.dispatch(new h.sb(new Error("reCAPTCHA error. Refresh the page and try again.")))}),Object(r.a)(e=>e.isHuman),Object(c.b)(e=>this.usersService.sendOrganizationInvites(t,n,e.verification)),Object(s.a)(()=>e.patchState({inviting:!1}))).subscribe(t=>e.dispatch(new a.s(t)),t=>e.dispatch(new a.r(t)))}getOrganizationUsers(e,{groupId:t}){e.patchState({loadingUsers:!0}),this.usersService.getOrganizationUsers({group_id:t}).pipe(Object(s.a)(()=>e.patchState({loadingUsers:!1}))).subscribe(t=>e.dispatch(new a.c(t)),t=>e.dispatch(new a.b(t)))}getOrganizationUsersSuccess(e,{users:t}){e.patchState({users:t})}getOrganizationUserInvites(e,{groupId:t}){e.patchState({loadingInvites:!0}),this.usersService.getOrganizationInvites({group_id:t,version:1,app_productkey:this.productService.productKey,app_producttype:this.productService.productType}).pipe(Object(s.a)(()=>e.patchState({loadingInvites:!1}))).subscribe(t=>e.dispatch(new a.f(t)),t=>e.dispatch(new a.e(t)))}getOrganizationUserInvitesSuccess(e,{invites:t}){e.patchState({invites:t})}resetOrganizations(e){e.setState(y)}updateUserRoles(e,{groupId:t,users:n}){this.usersService.updateUserRoles(t,n).subscribe(()=>e.dispatch(new a.y(t,n)),()=>e.dispatch(new a.x))}removeOrganizationUser(e,{groupId:t,users:n}){this.usersService.removeUsers(t,n).subscribe(()=>e.dispatch(new a.o(t,n)),()=>e.dispatch(new a.n))}transferOrganizationContent(e,{groupId:t,users:n}){this.usersService.transferUserContent(t,n).subscribe(()=>e.dispatch(new a.v(t,n)),()=>e.dispatch(new a.u))}};return e.\u0275fac=function(t){return new(t||e)(b.Zb(p.a),b.Zb(l.b),b.Zb(d.a),b.Zb(g.a))},e.\u0275prov=b.Lb({token:e,factory:e.\u0275fac}),m([Object(i.a)(a.g),f("design:type",Function),f("design:paramtypes",[Object,a.g]),f("design:returntype",void 0)],e.prototype,"joinOrganization",null),m([Object(i.a)(a.j),f("design:type",Function),f("design:paramtypes",[Object,a.j]),f("design:returntype",void 0)],e.prototype,"joinOrganizationWithCode",null),m([Object(i.a)(a.l),f("design:type",Function),f("design:paramtypes",[]),f("design:returntype",void 0)],e.prototype,"joinOrganizationWithCodeSuccess",null),m([Object(i.a)(a.q),f("design:type",Function),f("design:paramtypes",[Object,a.q]),f("design:returntype",void 0)],e.prototype,"sendOrganizationInvite",null),m([Object(i.a)(a.a),f("design:type",Function),f("design:paramtypes",[Object,a.a]),f("design:returntype",void 0)],e.prototype,"getOrganizationUsers",null),m([Object(i.a)(a.c),f("design:type",Function),f("design:paramtypes",[Object,a.c]),f("design:returntype",void 0)],e.prototype,"getOrganizationUsersSuccess",null),m([Object(i.a)(a.d),f("design:type",Function),f("design:paramtypes",[Object,a.d]),f("design:returntype",void 0)],e.prototype,"getOrganizationUserInvites",null),m([Object(i.a)(a.f),f("design:type",Function),f("design:paramtypes",[Object,a.f]),f("design:returntype",void 0)],e.prototype,"getOrganizationUserInvitesSuccess",null),m([Object(i.a)(a.p),f("design:type",Function),f("design:paramtypes",[Object]),f("design:returntype",void 0)],e.prototype,"resetOrganizations",null),m([Object(i.a)(a.w),f("design:type",Function),f("design:paramtypes",[Object,a.w]),f("design:returntype",void 0)],e.prototype,"updateUserRoles",null),m([Object(i.a)(a.m),f("design:type",Function),f("design:paramtypes",[Object,a.m]),f("design:returntype",void 0)],e.prototype,"removeOrganizationUser",null),m([Object(i.a)(a.t),f("design:type",Function),f("design:paramtypes",[Object,a.t]),f("design:returntype",void 0)],e.prototype,"transferOrganizationContent",null),m([Object(i.f)(),f("design:type",Function),f("design:paramtypes",[u]),f("design:returntype",void 0)],e,"getUsers",null),m([Object(i.f)(),f("design:type",Function),f("design:paramtypes",[u]),f("design:returntype",void 0)],e,"getInvites",null),m([Object(i.f)(),f("design:type",Function),f("design:paramtypes",[u]),f("design:returntype",void 0)],e,"getUsersLoading",null),m([Object(i.f)(),f("design:type",Function),f("design:paramtypes",[u]),f("design:returntype",void 0)],e,"getJoining",null),m([Object(i.f)(),f("design:type",Function),f("design:paramtypes",[u]),f("design:returntype",void 0)],e,"getInviting",null),e=m([Object(i.g)({name:"users",defaults:y})],e),e})()},lWeg:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));const i="context-label";class a{}},lZmj:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i={title:"Desktop",type:"desktop",dimensions:{width:700,height:550},orientation:"vertical"}},lz5t:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("lJxs"),a=n("fXoL"),s=n("tk/3");let o=(()=>{class e{constructor(e){this.http=e}getBraintreePlans(){return this.http.get("/ws/professional/plan").pipe(Object(i.a)(e=>e.plans))}getBraintreePlan(e,t){return this.http.get(`/ws/professional/plan?plan_id=${e}&discountcode=${t}`).pipe(Object(i.a)(e=>e.plan))}getBraintreeClientToken(){return this.http.get("/ws/professional/customer").pipe(Object(i.a)(e=>e.client_token))}getProfessionalSubscription(){return this.http.get("/ws/user/profile?version=2&subscription_hard_check=1").pipe(Object(i.a)(e=>e.subscription))}buyProfessionalSubscription(e){return this.http.post("/ws/professional/subscribe",Object.assign(Object.assign({},e),{subscription_intent:"buy"}))}updateProfessionalSubscription(e){const{nonce:t,device_data:n}=e;return this.http.post("/ws/professional/subscribe",{payment_method_nonce:t,device_data:n,subscription_intent:"update"})}cancelSubscription(){return this.http.post("/ws/professional/cancel",{})}}return e.\u0275fac=function(t){return new(t||e)(a.Zb(s.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},mSC4:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("fXoL");const a={"Sign in":"3971305","Sign up":"3971297"};let s=(()=>{class e{constructor(e){this.config=e,this.initialized=!1}initialize(){if(!this.config.enabled||this.initialized)return;const e=`\n      _linkedin_partner_id = "${this.config.linkedinId}"; \n      window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || []; \n      window._linkedin_data_partner_ids.push(_linkedin_partner_id);\n      (function(){var s = document.getElementsByTagName("script")[0]; var b = document.createElement("script"); b.type = "text/javascript";b.async = true; b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js"; s.parentNode.insertBefore(b, s);})();\n    `,t=document.createElement("script");t.textContent=e,document.body.appendChild(t),this.initialized=!0}track(e){const t=a[e];if(t){const e=document.createElement("img");e.height=1,e.width=1,e.style.display="none",e.alt="",e.src=`https://px.ads.linkedin.com/collect/?pid=${this.config.linkedinId}&conversionId=${t}&fmt=gif`,document.body.appendChild(e)}}}return e.\u0275fac=function(t){return new(t||e)(i.Zb("linkedinConfig"))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},mWjH:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var i=n("3Pt+"),a=n("LvDl"),s=n("fXoL");let o=(()=>{class e{constructor(e){this.controlContainer=e}get control(){return this.formControl||this.controlContainer.control.get(this.formControlName)}registerOnTouched(e){this.formControlDirective.valueAccessor.registerOnTouched(e)}registerOnChange(e){this.formControlDirective.valueAccessor.registerOnChange(e)}writeValue(e){this.formControlDirective.valueAccessor.writeValue(e)}setDisabledState(e){this.formControlDirective.valueAccessor.setDisabledState(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(i.b))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-base-accessor-control"]],viewQuery:function(e,t){if(1&e&&s.Jc(i.h,!0),2&e){let e;s.xc(e=s.dc())&&(t.formControlDirective=e.first)}},inputs:{formControl:"formControl",formControlName:"formControlName"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),r=(()=>{class e{constructor(){}get value(){return this._value}set value(e){Object(a.isEqual)(this._value,e)||(this._value=e,this.setFormValues(e),this.onChange(e))}onChange(e){}onTouched(){}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}writeValue(e){this.value=e}setDisabledState(e){this.disabled=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-abstract-input-control"]],inputs:{value:"value",disabled:"disabled"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})()},mXx7:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e={center:0,edge:1,centerBias:1,edgeBias:0,power:1}){const{edge:t,center:n,centerBias:i,edgeBias:a,power:s}=e;this.edge=t,this.center=n,this.centerBias=i,this.edgeBias=a,this.power=s}static toEngine(e){const{center:t,edge:n,centerBias:i,edgeBias:a,power:s}=e;return[t,n,i,a,s]}static isFresnelObject(e){let t=!1;return e&&(t="center,centerBias,edge,edgeBias,power"==Object.keys(e).sort().toString()),t}}},mmXA:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Application=0]="Application",e[e.Search=1]="Search",e[e.View=2]="View",e[e.Hide=3]="Hide",e[e.Share=4]="Share",e}({})},mtgE:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.None="none",e.Small="small",e.Full="full",e}({})},nRae:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("uA5T"),a=n("6L7E"),s=n("b36G");class o{}class r{}var c,l=n("ewuU"),p=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let d=class{constructor(){this[c]=!0}};c=immer.immerable,p([Object(s.Type)(()=>a.a),Object(s.Type)(()=>o),Object(s.Type)(()=>i.a),Object(s.Type)(()=>r),Object(s.Expose)(),u("design:type",String)],d.prototype,"id",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"info",void 0),p([Object(s.Expose)(),u("design:type",Array)],d.prototype,"labels",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"colorRecipeObjects",void 0),p([Object(s.Expose)(),u("design:type",Array)],d.prototype,"hotspots",void 0),p([Object(s.Expose)(),u("design:type",o)],d.prototype,"synchronization",void 0),p([Object(s.Expose)(),u("design:type",l.a)],d.prototype,"background",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"lights",void 0),p([Object(s.Expose)(),u("design:type",Array)],d.prototype,"timelineMap",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"camera",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"transitions",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"properties",void 0),p([Object(s.Expose)(),u("design:type",Boolean)],d.prototype,"loop",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"customData",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"clippingPlanes",void 0),p([Object(s.Expose)(),u("design:type",class{})],d.prototype,"ui",void 0),p([Object(s.Expose)(),u("design:type",r)],d.prototype,"graph",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"viewModes",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"recipes",void 0),p([Object(s.Expose)(),u("design:type",String)],d.prototype,"transparencyMode",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"fallbackTransparency",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"effects",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"environment",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"pickThroughObjects",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"showObjects",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"options",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"media",void 0),p([Object(s.Expose)(),u("design:type",Array)],d.prototype,"legend",void 0),p([Object(s.Expose)(),u("design:type",class{})],d.prototype,"visibilityLayers",void 0),p([Object(s.Expose)(),u("design:type",Array)],d.prototype,"contentBlocks",void 0),p([Object(s.Expose)(),u("design:type",Array)],d.prototype,"quizQuestions",void 0),p([Object(s.Expose)(),u("design:type",Object)],d.prototype,"thumbnails",void 0),d=p([Object(s.Exclude)()],d)},nS47:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("e0fF");!function(e){function t(e,t){e.nodes[t.id]||(e.nodes[t.id]=t)}function n(e,t){return e.nodes[t]||null}function i(e,t){return e.predecessors[t]||null}function s(e,t){return[...e.successors[t]||[]]}function o(e){return Object.keys(e.roots)}e.addRootNode=function(e,i){t(e,i);const a=n(e,i.id);e.roots[a.id]=a},e.getNodes=function(e,t){const n=[];return t.forEach(t=>{e.nodes[t]&&n.push(e.nodes[t])}),n},e.getAncestors=function(e,t,n=!1,i="ascending"){const a=n?[t]:[];let s=e.predecessors[t];for(;s;)a.push(s),s=e.predecessors[s];return"descending"===i&&a.reverse(),a},e.addNode=t,e.getNode=n,e.getAncestor=i,e.getAllAncestorsFromList=function(e,t){const n={};let a;return t.forEach(t=>{a=i(e,t),a&&!n[a]&&(n[a]=!0)}),Object.keys(n)},e.getSuccessors=s,e.getState=function(e,t,i){const a={},s=n(e,t);return Object.entries(s.boolState).forEach(([e,t])=>{i&&i.includes(e)&&(a[e]=t)}),Object.entries(s.numState).forEach(([e,t])=>{i&&i.includes(e)&&(a[e]=t)}),a},e.isLeaf=function(e,t){return!!e.nodes[t]&&void 0===e.successors[t]},e.isRoot=function(e,t){return e.roots.hasOwnProperty(t)||!1},e.getRoots=o,e.depthFirst=function e(t,n,i){i?(n(i),s(t,i).forEach(i=>{e(t,n,i)})):o(t).forEach(i=>{n(i),e(t,n,i)})},e.createGraphFromSrc=function(e,t="objectId",n="objects",i={}){const s=Object(a.a)();return e.forEach(e=>{!function e(t,n,i,s,o,r,c){const l=Object(a.b)(i[s]);l.depth=c,function(e,t,n,i="id"){Object.entries(n).forEach(([n,a])=>{let s;"string"==typeof a?s=t[a]:"function"==typeof a&&(s=a(t[i])),"boolean"==typeof s?e.boolState[n]=s:"number"==typeof s?e.numState[n]=s:e[n]=s})}(l,i,r,s),t.nodes[l.id]=l,n?(t.successors[n]=[...t.successors[n]||[],l.id],t.predecessors[l.id]=n):t.roots[l.id]=l,c+=1,(i[o]||[]).forEach(n=>{e(t,l.id,n,s,o,r,c)})}(s,null,e,t,n,i,0)}),s},e.pruneHiddenObjects=function e(t,n,i){const a=[];for(const s of t){const t=n[s.objectId],o=!0===t||!1!==t&&i,r=e(s.objects||[],n,o);if(o){const e=Object.assign({},s);e.objects=r,a.push(e)}else r.forEach(e=>a.push(e))}return a}}(i||(i={}))},nclC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("HDdC"),a=n("LRne"),s=n("AytR"),o=n("f3gM"),r=n("eW6i"),c=n("5miH"),l=n("fXoL");let p=(()=>{class e{constructor(e){this.engineService=e}getClipboardAPISupport(){return"clipboard"in navigator}getClipboardAPI(){return navigator.clipboard}copyToClipboard(e,t){if(!0===s.a.native||s.a.platform===o.a.SDK)return new i.a(n=>{this.engineService.fireEvent(c.a.NativeShare,{type:t,value:e}),n.next(!0),n.complete()});if(this.getClipboardAPISupport()){const t=this.getClipboardAPI();return new i.a(n=>{t.writeText(e).then(()=>{n.next(!0),n.complete()}).catch(e=>{n.next(!1),n.complete()})})}return Object(a.a)(!1)}copyInputFieldValue(e){e.select();let t=!1;try{t=document.execCommand("copy")}catch(n){t=!1}return t}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(r.a))},e.\u0275prov=l.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},nj9G:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Text=0]="Text",e[e.Paint=1]="Paint",e[e.Erase=2]="Erase",e}({})},o6VQ:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));const i={title:"Tags",tags:["Animated","Tour","Quiz","featured","new"]},a={title:"Type",tags:["Anatomy","Disease","Pharmacology","Physiology","Procedure"]},s={title:"Level of Detail",tags:["Gross Anatomy","Tissue","Cellular","Molecular"]},o={title:"Downloaded",tags:["Downloaded"]},r=[{title:"Status",tags:["Live","obsolete"]},{title:"Paywall",tags:["Premium","Basic"]},{title:"Platform",tags:["web platform","ios platform","android platform"]},i,{title:"Flags",tags:["animated","tour","Audio","low definition"]},{title:"Gender",tags:["male","female"]},a,s,{title:"Anatomy Categories",tags:["complete anatomy","system","regional","Bony Landmarks","Cross Section","Cross Section and Micro Anatomy","Micro Anatomy","Origins and Insertions"]},{title:"Clinical Specialty",tags:["Allergy and Immunology","Cardiology","Dentistry","Dermatology","Endocrinology","Gastroenterology and Hepatology","Gynecology","Infectious Disease","Nephrology","Neurology and Psychiatry","Obstetrics","Oncology and Hematology","Ophthalmology","Orthopedics","Otolaryngology","Pediatrics","Physical Therapy","Pulmonology and Respiratory","Rheumatology","Urology"]},{title:"Health Conditions",tags:["Blood, Heart and Circulation","Brain and Nerves","Ear, Nose and Throat","Eyes and Vision","Immune System","Lungs and Breathing","Mouth and Teeth","Bones, Joints and Muscles","Digestive System","Endocrine System","Female Reproductive System","Male Reproductive System","Skin, Hair and Nail"]},o]},oH02:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("ofXK"),a=n("PCNd"),s=n("vvyD"),o=n("lR5k"),r=n("fXoL");let c=(()=>{class e{}return e.\u0275mod=r.Nb({type:e}),e.\u0275inj=r.Mb({factory:function(t){return new(t||e)},imports:[[i.c,o.a.forChild()]]}),e})(),l=(()=>{class e{}return e.\u0275mod=r.Nb({type:e}),e.\u0275inj=r.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,c]]}),e})()},oOZS:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("XNiG"),a=n("xgIS"),s=n("1G5W"),o=n("fXoL"),r=n("ofXK");function c(e,t){if(1&e&&(o.Vb(0,"span",4),o.Pc(1),o.Ub()),2&e){const e=o.gc(2);o.Db(1),o.Sc("",e.remainingCount," ",1===e.remainingCount?"character":"characters"," remaining")}}function l(e,t){if(1&e&&(o.Vb(0,"span",4),o.Pc(1),o.Ub()),2&e){const e=o.gc(2);o.Db(1),o.Sc("",e.count,"/",e.max,"")}}function p(e,t){if(1&e&&(o.Vb(0,"div",1),o.Nc(1,c,2,2,"span",2),o.Nc(2,l,2,2,"span",3),o.Ub()),2&e){const e=o.gc();o.Hb("counter--inline","inline"===e.display),o.mc("ngSwitch",e.mode),o.Db(1),o.mc("ngSwitchCase","remaining")}}let u=(()=>{class e{constructor(e){this.ref=e,this.ngUnsubscribe=new i.a,this.display="block",this.mode="count"}get remainingCount(){return this.max-this.count}ngOnInit(){this.count=0,this.max=this.field.maxLength||0}ngAfterViewInit(){this.getValueChanges().pipe(Object(s.a)(this.ngUnsubscribe)).subscribe(()=>{this.updateCount()})}ngAfterContentChecked(){this.updateCount()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}updateCount(){const e=this.getValue().length;this.count!==e&&(this.count=e,this.ref.markForCheck())}getValueChanges(){return this.field.getValueChanges?this.field.getValueChanges():Object(a.a)(this.field,"input")}getValue(){return void 0!==this.field.textValue?this.field.textValue:this.field.value}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(o.i))},e.\u0275cmp=o.Jb({type:e,selectors:[["app-character-counter"]],inputs:{field:"field",display:"display",mode:"mode"},decls:1,vars:1,consts:[["class","counter text-10 pt-1 pb-1",3,"counter--inline","ngSwitch",4,"ngIf"],[1,"counter","text-10","pt-1","pb-1",3,"ngSwitch"],["class","counter__label",4,"ngSwitchCase"],["class","counter__label",4,"ngSwitchDefault"],[1,"counter__label"]],template:function(e,t){1&e&&o.Nc(0,p,3,4,"div",0),2&e&&o.mc("ngIf",t.max)},directives:[r.p,r.r,r.s,r.t],styles:[".theme-light[_nghost-%COMP%]   .counter__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .counter__label[_ngcontent-%COMP%]{color:#1c2a3f}.theme-dark[_nghost-%COMP%]   .counter__label[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .counter__label[_ngcontent-%COMP%]{color:#96a8c0}.counter[_ngcontent-%COMP%]{display:block;width:100%;float:right;text-align:right}.counter--inline[_ngcontent-%COMP%]{display:inline-block;width:auto}"]}),e})()},odcc:function(e,t,n){"use strict";n.d(t,"n",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"p",(function(){return r})),n.d(t,"r",(function(){return c})),n.d(t,"q",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"g",(function(){return g})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return b})),n.d(t,"m",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"l",(function(){return y})),n.d(t,"k",(function(){return v})),n.d(t,"o",(function(){return O}));let i=(()=>{class e{constructor(){}}return e.type="[Subscription] Reset Subscription State",e})(),a=(()=>{class e{constructor(e){this.request=e}}return e.type="[Subscription] Buy Subscription",e})(),s=(()=>{class e{constructor(e){this.request=e}}return e.type="[Subscription] Buy Subscription Success",e})(),o=(()=>{class e{constructor(e){this.error=e}}return e.type="[Subscription] Buy Subscription Failure",e})(),r=(()=>{class e{constructor(e){this.request=e}}return e.type="[Subscription] Update Subscription",e})(),c=(()=>{class e{constructor(){}}return e.type="[Subscription] Update Subscription Success",e})(),l=(()=>{class e{constructor(e){this.error=e}}return e.type="[Subscription] Update Subscription Failure",e})(),p=(()=>{class e{constructor(){}}return e.type="[Subscription] Cancel Subscription",e})(),u=(()=>{class e{constructor(){}}return e.type="[Subscription] Cancel Subscription Success",e})(),d=(()=>{class e{constructor(e){this.error=e}}return e.type="[Subscription] Cancel Subscription Failure",e})(),g=(()=>{class e{constructor(e,t){this.planId=e,this.code=t}}return e.type="[Subscription] Check Promo Code",e})(),h=(()=>{class e{constructor(e,t){this.code=e,this.plan=t}}return e.type="[Subscription] Check Promo Code Success",e})(),b=(()=>{class e{constructor(e){this.err=e}}return e.type="[Subscription] Check Promo Code Failure",e})(),m=(()=>{class e{constructor(){}}return e.type="[Subscription] Remove Promo Code",e})(),f=(()=>{class e{constructor(){}}return e.type="[Subscription] Get Premium Plans",e})(),y=(()=>{class e{constructor(e){this.plans=e}}return e.type="[Subscription] Get Premium Plans Success ",e})(),v=(()=>{class e{constructor(e){}}return e.type="[Subscription] Get Premium Plans Failure",e})(),O=(()=>{class e{constructor(e){this.plan=e}}return e.type="[Subscription] Set Premium Plan",e})()},p345:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Loft="loft",e.Studio="studio",e.Viewer="viewer",e.All="",e}({})},p3zp:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),a=n("+pSP"),s=n("fXoL");let o=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a]]}),e})()},pZol:function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"j",(function(){return o})),n.d(t,"i",(function(){return r})),n.d(t,"h",(function(){return p})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));const i=[4,8,12,16,24,32],a=e=>e.slice(0).reverse().map(e=>({label:""+e,size:e})),s=a(i),o=a([8,12,16,20,24,32]),r=a(i),c={label:"Black",color:"#000000"},l={label:"White",color:"#ffffff"},p=[c,{label:"Red",color:"#ff0000"},{label:"Yellow",color:"#ffff00"},{label:"Green",color:"#00ff00"},{label:"Cyan",color:"#00ffff"},{label:"Blue",color:"#0000ff"},{label:"Pink",color:"#ff00ff"},l],u=s[4],d=p[0],g=o[3],h=r[4],b=c,m=l},q7pw:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Modal="Modal",e.Footer="Footer",e.Notification="Notification",e}({})},q8pu:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"n",(function(){return s})),n.d(t,"q",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"i",(function(){return p})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"m",(function(){return g})),n.d(t,"p",(function(){return h})),n.d(t,"o",(function(){return b})),n.d(t,"k",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return v})),n.d(t,"t",(function(){return O})),n.d(t,"l",(function(){return S})),n.d(t,"r",(function(){return x})),n.d(t,"s",(function(){return C}));var i=n("4LIl");let a=(()=>{class e{constructor(e){this.patches=e}}return e.type="[Story Labels] Patch Labels",e})(),s=(()=>{class e{constructor(e,t){this.labelId=e,this.offset=t}}return e.type="[Story Labels] Set label Offset",e})(),o=(()=>{class e{constructor(e){this.labels=e}}return e.type="[Story Labels] Set Labels",e})(),r=(()=>{class e{constructor(e){this.label=e}}return e.type="[Story Labels] Add Label",e})(),c=(()=>{class e{constructor(e){this.label=e}}return e.type="[Story Labels] Set Contexdt Label",e})(),l=(()=>{class e{constructor(e,t){this.sourceChapter=e,this.targetChapter=t}}return e.type="[Story Labels] Copy Labels",e})(),p=(()=>{class e{constructor(e){this.label=e}}return e.type="[Story Labels] Remove Label",e})(),u=(()=>{class e{constructor(){}}return e.type="[Story Labels] Remove Context Label",e})(),d=(()=>{class e{constructor(e){this.chapter=e}}return e.type="[Story Labels] Remove All Chapter Labels",e})(),g=(()=>{class e{constructor(e,t=!1){this.label=e,this.record=t}}return e.type="[Story Labels] Set Label",e})(),h=(()=>{class e{constructor(e,t){this.id=e,this.states=t}}return e.type="[Story Labels] Set Label States",e})(),b=(()=>{class e{constructor(e){this.scale=e}}return e.type="[Story Labels] Set Label Scale",e})(),m=(()=>{class e{constructor(e){this.label=e}}return e.type="[Story Labels] Select Label",e})(),f=(()=>{class e{constructor(){}}return e.type="[Story Labels] Reset",e})(),y=(()=>{class e{constructor(e,t){this.labels=e,this.fields=t}}return e.type="[Story Labels] Convert",e})(),v=(()=>{class e{constructor(e,t=!0,n=!0){this.enable=e,this.enableInfo=t,this.enableActions=n}}return e.type="[Story Labels] Enable Context Label",e})(),O=(()=>{class e{constructor(e,t){this.labels=e,this.shown=t}}return e.type="[Story Labels] Set Labels Shown",e})(),S=(()=>{class e{constructor(e){this.show=e}}return e.type="[Story Labels] Set All Labels Shown",e})(),x=(()=>{class e{constructor(e,t=i.a.None){this.collapsed=e,this.collapsedMode=t}}return e.type="[Story Labels] Set Labels Collapsed",e})(),C=(()=>{class e{constructor(e){this.draggable=e}}return e.type="[Story Labels] Set Draggable",e})()},qA9Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n("uDDk");function a(e=""){return{type:i.a.Markdown,markdown:e}}function s(e){return e?e.filter(e=>e.type===i.a.Markdown).map(e=>e.markdown).join("\n"):""}},qBAC:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("stSV"),a=n("4bFC");class s{constructor(){this.background={colors:null},this.uiAnnotations=!1,this.uiAudio=!1,this.uiInfo=!0,this.uiFullscreen=!0,this.uiScrubber=!1,this.uiHelp=!0,this.uiBd="",this.loadRotate=null,this.initial={button:!1,handHint:!1,play:!1},this.disableScroll={alert:!1,overlay:!1},this.uiQuiz={mode:a.a.Enabled,number:void 0},this.autoLoad=!0,this.uiTour=!1,this.uiNav=!0,this.uiSearch=!0,this.uiTools=!0,this.uiUndo=!0,this.uiLabelList=!0,this.uiChapterList=!1,this.all=!1,this.collapseLabel=null,this.uiMenu=!0,this.uiAnatomyDescriptions=!1,this.uiTutorial=!1,this.uiLegend=!0,this.uiLoader=i.b,this.uiWhiteboard=!0,this.uiVisibilityLayers=!0,this.uiAnatomyLabels=!0}}},qXBG:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n("lJxs"),a=n("5+tZ"),s=n("JIr8"),o=n("LRne"),r=n("uAsG"),c=n("b36G");class l{static fromJSON(e){const t=new l;return t.email=e.user_email,t.credentials=e.credentials,t.isUser=e.is_user,t.isThirdParty=e.user_is_third_party,t.thirdPartyProvider=e.user_third_party_provider,t.isDeveloper=e.user_is_developer,t.isDeveloperActive=e.user_is_developer_active,t.isDeveloperVerified=e.user_is_developer_verified,t.firstName=e.user_first_name,t.lastName=e.user_last_name,t.name=`${e.firstName} ${e.lastName}`,t}}class p{static fromJSON(e){const t=new p;return t.google=e.google_api_key,t}}var u=n("I0z8"),d=n("C1bs"),g=n("QkOQ"),h=n("jCJ1"),b=function(e){return e.Zendesk="zendesk",e}({}),m=n("Oq7/"),f=n("LvDl"),y=n("8pBO");class v{}class O{}var S=n("xybE"),x=n("XoIW"),C=n("icKS"),w=n("fXoL"),j=n("tk/3");const k=["harvard.edu","liberty.edu"];let P=(()=>{class e{constructor(e,t,n,i,a){this.http=e,this.reCaptchaV3Service=t,this.userMessageService=n,this.productService=i,this.RECAPTCHA_V3_SITE_KEY=a}loginWithBiodigital(e){return this.http.post("/ws/user/sign/in",g.a.toJSON(e))}loginWithGoogle(e){return this.http.post("/ws/user/sign/in/google",d.a.toJSON(e))}logout(){return this.http.get("/ws/user/sign/out")}checkProfile(e){return this.http.post("/ws/user/profile/check",{version:2,email:e}).pipe(Object(i.a)(e=>{const t=l.fromJSON(e);return t.isThirdParty=""!==t.thirdPartyProvider,t}))}getUserProfile(e){return this.http.get(e?"/ws/user/profile?version=2&subscription_hard_check=1":"/ws/user/profile?version=2").pipe(Object(i.a)(e=>{const t=Object(c.plainToClass)(r.a,e);return t.organizations.forEach(e=>{const t=Object(f.get)(e,"user_role",y.b);e.user_role=Object(y.c)(t)}),t}))}getUserRoles(){return this.http.get("/ws/organization/user/roles").pipe(Object(i.a)(e=>e.user_roles.map(e=>{const t=Object(c.plainToClass)(m.a,e);return Object(y.c)(t)})))}updaterUserProfile(e){return this.http.post("/ws/user/profile?version=2",e)}deleteUserProfile(){return this.http.post("/ws/user/profile/delete",{}).pipe(Object(i.a)(e=>e.deleted_user_email))}getEnvironmentSettings(){return this.http.get("/ws/environment/settings?version=2").pipe(Object(i.a)(e=>p.fromJSON(e)))}getUserApps(){return this.http.get("/ws/developer/apps/profile").pipe(Object(i.a)(e=>e&&e.apps?JSON.parse(e.apps):[]))}getGroupConfigFromRoute(e){const t=e.queryParams.code||"",n=e.queryParams.group_invite||"",i=e.queryParams.osptok||"";return{group:e.queryParams.group||"",groupCode:t,groupCodeMode:t?1:0,groupInviteMode:n?1:0,groupInviteKey:n,groupOvidMode:i?1:0,groupOvidOsptok:i}}getPlatformConfigFromRoute(e){const{zendesk_signin:t,return_to:n,brand_id:i,locale_id:a,timestamp:s}=e.queryParams;return"1"===t?{platform:b.Zendesk,returnTo:n,brandId:i,localeId:a,timestamp:s}:void 0}isLoggedIn(){return this.http.get(`/ws/user/is/signed-in?version=4&app_producttype=${this.productService.productType}&app_productkey=${this.productService.productKey}`)}getProfileRestrictions(e){let t=!1,n=!1,i="";return e.organizations.forEach(e=>{t||n||(i=e.name,t=e.user_is_subscribed&&e.email_domain_restriction&&!e.user_has_email_domain_access,n=e.user_is_subscribed&&e.ip_address_restriction&&!e.user_has_domain_access)}),{organizationName:i,email:t,ip:n}}resetPassword(e){return this.http.post("/ws/user/password/forgot",{email:e})}deactivateFacebook(e){return this.http.post("/ws/user/sign/in/facebook/deactivate",e)}updatePassword(e,t,n){return this.http.post("/ws/user/password/change",{current_password:e,new_password:t,confirm_new_password:n})}signUp(e){return this.http.post("/ws/user/sign/up",u.a.toJSON(e))}verifyToken(e){return this.http.post("/ws/recaptcha/siteverify",{recaptcha_reponse_token:e,recaptcha_version:"v3"}).pipe(Object(i.a)(e=>e))}isHuman(e,t=!1){return t&&grecaptcha.reset(this.RECAPTCHA_V3_SITE_KEY),this.reCaptchaV3Service.execute(e).pipe(Object(a.b)(e=>this.verifyToken(e)),Object(i.a)(t=>({isHuman:t.action===e&&t.score>.2,verification:t})))}isReCaptchaWhiteListed(e){return k.some(t=>new RegExp(t+"$","i").test(e))}requestVerificationCode(e){const t=Object.assign(Object.assign({},e),{version:4,app_producttype:this.productService.productType,app_productkey:this.productService.productKey});return this.http.post("/ws/user/verification/request",t).pipe(Object(i.a)(e=>Object(c.plainToClass)(v,e)))}verifyProfile(e){const t=Object.assign(Object.assign({},e),{version:4,app_producttype:this.productService.productType,app_productkey:this.productService.productKey});return this.http.post("/ws/user/verification/confirm",t).pipe(Object(i.a)(e=>Object(c.plainToClass)(O,e)))}checkProfileIncomplete(){return this.userMessageService.getUserMessage(x.a.CompleteProfileAlert,"v2",!1).pipe(Object(s.a)(()=>Object(o.a)({messageType:x.a.CompleteProfileAlert,messageData:{},showUserAlert:!1})))}}return e.\u0275fac=function(t){return new(t||e)(w.Zb(j.b),w.Zb(h.c),w.Zb(S.a),w.Zb(C.a),w.Zb(h.b))},e.\u0275prov=w.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qpAl:function(e,t){!function(t){var n="Modernizr"in t,i=t.Modernizr;!function(e,t,n,i){function a(e,t){return typeof e===t}function s(e,t){return!!~(""+e).indexOf(t)}function o(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):v?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function r(e,t,i,a){var s,r,c,l,p="modernizr",u=o("div"),d=function(){var e=n.body;return e||((e=o(v?"svg":"body")).fake=!0),e}();if(parseInt(i,10))for(;i--;)(c=o("div")).id=a?a[i]:p+(i+1),u.appendChild(c);return(s=o("style")).type="text/css",s.id="s"+p,(d.fake?d:u).appendChild(s),d.appendChild(u),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(n.createTextNode(e)),u.id=p,d.fake&&(d.style.background="",d.style.overflow="hidden",l=y.style.overflow,y.style.overflow="hidden",y.appendChild(d)),r=t(u,e),d.fake&&d.parentNode?(d.parentNode.removeChild(d),y.style.overflow=l):u.parentNode.removeChild(u),!!r}function c(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()})).replace(/^ms-/,"-ms-")}function l(e,n){var a=e.length;if("CSS"in t&&"supports"in t.CSS){for(;a--;)if(t.CSS.supports(c(e[a]),n))return!0;return!1}if("CSSSupportsRule"in t){for(var s=[];a--;)s.push("("+c(e[a])+":"+n+")");return r("@supports ("+(s=s.join(" or "))+") { #modernizr { position: absolute; } }",(function(e){return"absolute"===function(e,n,i){var a;if("getComputedStyle"in t){a=getComputedStyle.call(t,e,null);var s=t.console;null!==a?a=a.getPropertyValue(i):s&&s[s.error?"error":"log"].call(s,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else a=e.currentStyle&&e.currentStyle[i];return a}(e,0,"position")}))}return i}function p(e){return e.replace(/([a-z])-([a-z])/g,(function(e,t,n){return t+n.toUpperCase()})).replace(/^-/,"")}function u(e,t,n,r){function c(){d&&(delete C.style,delete C.modElem)}if(r=!a(r,"undefined")&&r,!a(n,"undefined")){var u=l(e,n);if(!a(u,"undefined"))return u}for(var d,g,h,b,m,f=["modernizr","tspan","samp"];!C.style&&f.length;)d=!0,C.modElem=o(f.shift()),C.style=C.modElem.style;for(h=e.length,g=0;g<h;g++)if(m=C.style[b=e[g]],s(b,"-")&&(b=p(b)),C.style[b]!==i){if(r||a(n,"undefined"))return c(),"pfx"!==t||b;try{C.style[b]=n}catch(e){}if(C.style[b]!==m)return c(),"pfx"!==t||b}return c(),!1}function d(e,t){return function(){return e.apply(t,arguments)}}function g(e,t,n,i,s){var o=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+S.join(o+" ")+o).split(" ");return a(t,"string")||a(t,"undefined")?u(r,t,i,s):function(e,t,n){var i;for(var s in e)if(e[s]in t)return!1===n?e[s]:a(i=t[e[s]],"function")?d(i,n||t):i;return!1}(r=(e+" "+w.join(o+" ")+o).split(" "),t,n)}var h=[],b={_version:"3.11.8",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){h.push({name:e,fn:t,options:n})},addAsyncTest:function(e){h.push({name:null,fn:e})}},m=function(){};m.prototype=b,m=new m;var f=[],y=n.documentElement,v="svg"===y.nodeName.toLowerCase(),O="Moz O ms Webkit",S=b._config.usePrefixes?O.split(" "):[];b._cssomPrefixes=S;var x={elem:o("modernizr")};m._q.push((function(){delete x.elem}));var C={style:x.elem.style};m._q.unshift((function(){delete C.style}));var w=b._config.usePrefixes?O.toLowerCase().split(" "):[];b._domPrefixes=w,b.testAllProps=g;var j=function(e){var n,a=prefixes.length,s=t.CSSRule;if(void 0===s)return i;if(!e)return!1;if((n=(e=e.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in s)return"@"+e;for(var o=0;o<a;o++){var r=prefixes[o];if(r.toUpperCase()+"_"+n in s)return"@-"+r.toLowerCase()+"-"+e}return!1};b.atRule=j;var k=b.prefixed=function(e,t,n){return 0===e.indexOf("@")?j(e):(-1!==e.indexOf("-")&&(e=p(e)),t?g(e,t,n):g(e,"pfx"))};m.addTest("fullscreen",!(!k("exitFullscreen",n,!1)&&!k("cancelFullScreen",n,!1))),function(){var e,t,n,i,s,o;for(var r in h)if(h.hasOwnProperty(r)){if(e=[],(t=h[r]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=a(t.fn,"function")?t.fn():t.fn,s=0;s<e.length;s++)1===(o=e[s].split(".")).length?m[o[0]]=i:(m[o[0]]&&(!m[o[0]]||m[o[0]]instanceof Boolean)||(m[o[0]]=new Boolean(m[o[0]])),m[o[0]][o[1]]=i),f.push((i?"":"no-")+o.join("-"))}}(),function(e){var t=y.className,n=m._config.classPrefix||"";if(v&&(t=t.baseVal),m._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}m._config.enableClasses&&(e.length>0&&(t+=" "+n+e.join(" "+n)),v?y.className.baseVal=t:y.className=t)}(f),delete b.addTest,delete b.addAsyncTest;for(var P=0;P<m._q.length;P++)m._q[P]();e.Modernizr=m}(t,t,document),e.exports=t.Modernizr,n?t.Modernizr=i:delete t.Modernizr}(window)},qplK:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fqos");class a{constructor(e){this.type=i.a.flyToCamera,this.value=e}}},"qz+p":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("rvu2"),a=n("b36G"),s=n("LvDl"),o=n("fXoL");let r=(()=>{class e{constructor(){this.fps=30,this.epsilon=.001}getChapterLocalTimerange(e){const t=Human.timeline.activeRoot._chapters.find(t=>t.id===e);return Object(a.plainToClass)(i.a,t.timeRange)}mapGlobalTimeToLocal(e,t={}){const n=Human.timeline.activeRoot.mapGlobalTime(e,t);return n.time<0&&(n.time=0),n}mapLocalTimeToGlobal(e,t){const n=Human.timeline.activeRoot._chapters.find(t=>t.id===e);return Human.timeline.activeRoot.mapBranchTime(n,t)}getLocalTime(e){const t=Human.timeline.activeRoot._nowBranch,n=this.mapLocalTimeToGlobal(t.id,t.timeRange.firstTime);return this.mapGlobalTimeToLocal(e,{tie:e===n?"later":"earlier"}).time}isChapterAnimated(e){return e.timelineMap.filter(e=>"dummy"!==Object(s.get)(e,"data.timeline")&&"dummy"!==Object(s.get)(e,"data.timeline.id")&&"dummy"!==Object(s.get)(e,"data.timeline.id.id")).length>0}isChapterLooped(e){return!0===Object(s.get)(e,"loop")||-1===Object(s.get)(e,"ui.play.count")}scrub(e){Human.timeline.scrub({time:e.time,borderCondition:{which:e.which?e.which:"first",direction:"forwards"}})}scrubFrame(e){const t="next"===e?1:-1,n=this.getTime(),i=this.secondsToFrames(n),a=this.framesToSeconds(i+t),s=Human.timeline.activeRoot._nowBranch,o=s.timeRange,r=this.mapLocalTimeToGlobal(s.id,o.firstTime),c=this.mapLocalTimeToGlobal(s.id,o.lastTime);let l;l=a<=r?{time:r,which:"second"}:a>=c?{time:c,which:"first"}:{time:a},this.scrub(l)}fromEngineTimelineMap(e){return{id:e.id,name:e.name,start:e.start,end:e.end,data:{timeline:e.leafTimeline.id,start:e.dataStart,end:e.dataEnd,fit:e.fit,onEnd:e.onEnd}}}secondsToFrames(e){return Math.round(e*this.fps)}framesToSeconds(e){return e/this.fps}toNearestFrame(e){return this.framesToSeconds(this.secondsToFrames(e))}formatTime(e){const t=t=>{const n=e<0?Math.ceil:Math.floor;return Math.abs(n(t)).toString().padStart(2,"0")},n=t(e/60),i=t(e%60),a=(e=>Math.abs(this.secondsToFrames(e%1)).toString().padStart(2,"0"))(e%1);return`${e<0?"-":""}${n}:${i}:${a}`}parseFormattedTime(e){const t=/^-/,n=t.test(e)?-1:1;-1===n&&(e=e.replace(t,""));const i=e.split(":").reverse();let a=parseInt(i[0],10),s=parseInt(i[1],10),o=parseInt(i[2],10);return isNaN(a)&&(a=0),isNaN(s)&&(s=0),isNaN(o)&&(o=0),(60*o+s+this.framesToSeconds(a))*n}constrainLocalTime(e){const t=Human.timeline.activeRoot._nowBranch.timeRange;return e<t.firstTime&&(e=t.firstTime),e>t.lastTime&&(e=t.lastTime),e}addTimelineMap(e,t){const n=e.getTimeFrame(),i=e.createTimelineMap(t);t.id=i;const a=e.getTimeFrame();return n.lastTime!==a.lastTime&&Human.timeline.activeRoot.build(),t}updateTimelineMaps(e,t){const n=e.getTimeFrame();t.forEach(t=>{e.updateTimelineMap(t.id,t)});const i=e.getTimeFrame();n.lastTime!==i.lastTime&&Human.timeline.activeRoot.build()}deleteTimelineMaps(e,t){const n=e.getTimeFrame();t.forEach(t=>{e.deleteTimelineMap(t)});const i=e.getTimeFrame();n.lastTime!==i.lastTime&&Human.timeline.activeRoot.build()}getLeafTimelines(){return Human.timeline.leafTimelines}getTimeFrame(){return Human.timeline.getTimeFrame()}getTime(){return Human.timeline.time}isPlaying(){return Human.timeline.playing}hasChapterFinished(e){const t=this.getChapterLocalTimerange(e),n=this.mapGlobalTimeToLocal(Human.timeline.time);return Math.abs(n.time-t.lastTime)<this.epsilon}play(e){this.playParams=Object.keys(e).reduce((e,t)=>(void 0===e[t]&&delete e[t],e),Object.assign({},e)),Human.timeline.play(this.playParams)}rewind(e){const t=this.mapLocalTimeToGlobal(e,0);this.scrub({time:t,which:"second"})}unpause(e){this.hasChapterFinished(e)&&this.rewind(e),Human.timeline.unpause()}pause(){Human.timeline.pause()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"r/EZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Mobile=0]="Mobile",e[e.None=1]="None",e}({})},rGz1:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i,a=n("AcyG"),s=n("0E12"),o=n("4FHB"),r=n("FKtB"),c=n("fXoL"),l=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let u=(()=>{let e=i=class{constructor(){}static particleSystemIdExists(e){return Object(a.i)([i],t=>void 0!==t.particleSystems[e])}static particleSystemsForChapter(e){return Object(a.i)([i],t=>(t.assignedParticles[e]||[]).map(e=>t.particleSystems[e]))}static getVisibleParticleSystesmForChapter(e){return Object(a.i)([i],t=>{const n=t.visibleParticleSystems[e]||{};return(t.assignedParticles[e]||[]).filter(e=>!1!==n[e])})}static getTweenParticleLookup(e){return e.tweenParticleLookup}static getParticleSystems(e){return e.particleSystems}static getVisisbleParticleSystems(e){return e.visibleParticleSystems}static getParticleSystemsList(e){return Object.values(e.particleSystems)}static getAssignedParticleSystems(e){return e.assignedParticles}static getSelectedParticleSystemId(e){return e.particleSelection.selectedParticle}static getSelectedParticleSystem(e){const{particleSystems:t,particleSelection:n}=e;return t[n.selectedParticle]}static getSelectedParticleConstraintIndex(e){return e.particleSelection.selectedConstraint}static getSelectedParticleConstraint(e){const t=i.getSelectedParticleSystem(e);return t?t.constraints[e.particleSelection.selectedConstraint]:null}static getSelectedParticleCreatorIndex(e){return e.particleSelection.selectedCreator}static getSelectedParticleCreator(e){const t=i.getSelectedParticleSystem(e);return t?t.creators[e.particleSelection.selectedCreator]:null}static getSelectedParticleUpdaterIndex(e){return e.particleSelection.selectedUpdater}static getSelectedParticleUpdater(e){const t=i.getSelectedParticleSystem(e);return t?t.updaters[e.particleSelection.selectedUpdater]:null}applyPatch(e,t){const n=immer.applyPatches(e.getState(),t.patches);e.patchState(n)}setParticleState(e,t){e.patchState(immer.produce(e.getState(),e=>{e.particleSystems=t.particleSystems.reduce((e,t)=>(e[t.id]=t,e),{}),e.assignedParticles=t.assignedParticles,e.tweenParticleLookup=t.tweenParticleLookup,e.visibleParticleSystems={}}))}setParticlesVisible(e,{visible:t,chapterId:n}){e.patchState(immer.produce(e.getState(),e=>{const i=(e.assignedParticles[n]||[]).reduce((e,n)=>(e[n]=t,e),{});e.visibleParticleSystems=Object.assign(Object.assign({},e.visibleParticleSystems),{[n]:i})}))}setParticleVisible(e,{id:t,visible:n,chapterId:i}){e.patchState(immer.produce(e.getState(),e=>{e.visibleParticleSystems[i]=Object.assign(Object.assign({},e.visibleParticleSystems[i]||{}),{[t]:n})}))}newParticleSystem(e,t){const{particleSystem:n,chapterId:i}=t,a=n.id,[s,o,r]=immer.produceWithPatches(e.getState(),e=>{e.particleSystems[a]=n,e.assignedParticles[i]=[...e.assignedParticles[i]||[],a]});e.patchState(s)}duplicateParticleSystem(e,t){const{id:n,targetChapterId:i}=t,a=r.a.generateParticleId(n);e.patchState(immer.produce(e.getState(),e=>{e.particleSystems[a]=JSON.parse(JSON.stringify(e.particleSystems[n])),e.particleSystems[a].id=a,e.assignedParticles[i].push(a);const t=r.a.getParticleIdRoot(n);e.tweenParticleLookup[i]&&e.tweenParticleLookup[i][t]&&(e.tweenParticleLookup=o.a.addEntryForChapter(i,{[t]:a},e.tweenParticleLookup))})),e.dispatch(new s.a.DuplicateParticleSystemSuccess(a,i))}updateParticleSystem(e,t){const n=immer.produce(e.getState(),e=>{e.particleSystems[t.id]=t.particleSystem});e.patchState(Object.assign(Object.assign({},n),{particleSystems:Object.assign({},n.particleSystems)}))}deleteChapterLookup(e,t){e.patchState(immer.produce(e.getState(),e=>{delete e.tweenParticleLookup[t.chapterId]}))}setLookupForChapter(e,t){e.patchState(immer.produce(e.getState(),e=>{e.tweenParticleLookup[t.chapterId]=t.lookup}))}assignParticle(e,t){e.patchState(immer.produce(e.getState(),e=>{const n=e.assignedParticles[t.chapterId]||[],i=r.a.getParticleIdRoot(t.id);e.assignedParticles[t.chapterId]=n.concat(t.id),e.tweenParticleLookup=o.a.addEntryForChapter(t.chapterId,{[i]:t.id},e.tweenParticleLookup),e.particleSystems=Object.assign({},e.particleSystems)}))}unassignParticle(e,t){e.patchState(immer.produce(e.getState(),e=>{const n=e.assignedParticles[t.chapterId]||[],i=r.a.getParticleIdRoot(t.id);e.assignedParticles[t.chapterId]=n.filter(e=>e!==t.id),e.tweenParticleLookup[t.chapterId]&&delete e.tweenParticleLookup[t.chapterId][i],e.particleSystems=Object.assign({},e.particleSystems)}))}deleteParticleSystem(e,t){e.patchState(immer.produce(e.getState(),e=>{delete e.particleSystems[t.id],Object.keys(e.assignedParticles).forEach(n=>{e.assignedParticles[n]=e.assignedParticles[n].filter(e=>e!==t.id)}),Object.keys(e.tweenParticleLookup).forEach(n=>{delete e.tweenParticleLookup[n][r.a.getParticleIdRoot(t.id)]})}))}selectParticleSystem(e,t){e.patchState(immer.produce(e.getState(),e=>{e.particleSelection={selectedParticle:t.id}}))}selectParticleConstraint(e,t){const n=e.getState().particleSelection;e.patchState(immer.produce(e.getState(),e=>{e.particleSelection=Object.assign(Object.assign({},n),{selectedConstraint:t.index})}))}selectParticleCreator(e,t){const n=e.getState().particleSelection;e.patchState(immer.produce(e.getState(),e=>{e.particleSelection=Object.assign(Object.assign({},n),{selectedCreator:t.index})}))}selectParticleUpdater(e,t){const n=e.getState().particleSelection;e.patchState(immer.produce(e.getState(),e=>{e.particleSelection=Object.assign(Object.assign({},n),{selectedUpdater:t.index})}))}updateTweenParticleLookupChapters(e,t){e.patchState(immer.produce(e.getState(),e=>{e.tweenParticleLookup=o.a.updateChapterIds(e.tweenParticleLookup,t.chapterMap)}))}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac}),l([Object(a.a)(s.a.ApplyPatch),p("design:type",Function),p("design:paramtypes",[Object,s.a.ApplyPatch]),p("design:returntype",void 0)],e.prototype,"applyPatch",null),l([Object(a.a)(s.a.SetParticleState),p("design:type",Function),p("design:paramtypes",[Object,s.a.SetParticleState]),p("design:returntype",void 0)],e.prototype,"setParticleState",null),l([Object(a.a)(s.a.SetParticleSystemsVisible),p("design:type",Function),p("design:paramtypes",[Object,s.a.SetParticleSystemsVisible]),p("design:returntype",void 0)],e.prototype,"setParticlesVisible",null),l([Object(a.a)(s.a.SetParticleSystemVisible),p("design:type",Function),p("design:paramtypes",[Object,s.a.SetParticleSystemVisible]),p("design:returntype",void 0)],e.prototype,"setParticleVisible",null),l([Object(a.a)(s.a.NewParticleSystem),p("design:type",Function),p("design:paramtypes",[Object,s.a.NewParticleSystem]),p("design:returntype",void 0)],e.prototype,"newParticleSystem",null),l([Object(a.a)(s.a.DuplicateParticleSystem),p("design:type",Function),p("design:paramtypes",[Object,s.a.DuplicateParticleSystem]),p("design:returntype",void 0)],e.prototype,"duplicateParticleSystem",null),l([Object(a.a)(s.a.UpdateParticleSystem),p("design:type",Function),p("design:paramtypes",[Object,s.a.UpdateParticleSystem]),p("design:returntype",void 0)],e.prototype,"updateParticleSystem",null),l([Object(a.a)(s.a.DeleteChapterLookup),p("design:type",Function),p("design:paramtypes",[Object,s.a.DeleteChapterLookup]),p("design:returntype",void 0)],e.prototype,"deleteChapterLookup",null),l([Object(a.a)(s.a.SetLookupForChapter),p("design:type",Function),p("design:paramtypes",[Object,s.a.SetLookupForChapter]),p("design:returntype",void 0)],e.prototype,"setLookupForChapter",null),l([Object(a.a)(s.a.AssignParticle),p("design:type",Function),p("design:paramtypes",[Object,s.a.AssignParticle]),p("design:returntype",void 0)],e.prototype,"assignParticle",null),l([Object(a.a)(s.a.UnassignParticle),p("design:type",Function),p("design:paramtypes",[Object,s.a.UnassignParticle]),p("design:returntype",void 0)],e.prototype,"unassignParticle",null),l([Object(a.a)(s.a.DeleteParticleSystem),p("design:type",Function),p("design:paramtypes",[Object,s.a.DeleteParticleSystem]),p("design:returntype",void 0)],e.prototype,"deleteParticleSystem",null),l([Object(a.a)(s.a.SelectParticleSystem),p("design:type",Function),p("design:paramtypes",[Object,s.a.SelectParticleSystem]),p("design:returntype",void 0)],e.prototype,"selectParticleSystem",null),l([Object(a.a)(s.a.SelectParticleConstraint),p("design:type",Function),p("design:paramtypes",[Object,s.a.SelectParticleConstraint]),p("design:returntype",void 0)],e.prototype,"selectParticleConstraint",null),l([Object(a.a)(s.a.SelectParticleCreator),p("design:type",Function),p("design:paramtypes",[Object,s.a.SelectParticleCreator]),p("design:returntype",void 0)],e.prototype,"selectParticleCreator",null),l([Object(a.a)(s.a.SelectParticleUpdater),p("design:type",Function),p("design:paramtypes",[Object,s.a.SelectParticleUpdater]),p("design:returntype",void 0)],e.prototype,"selectParticleUpdater",null),l([Object(a.a)(s.a.UpdateTweenParticleLookupChapters),p("design:type",Function),p("design:paramtypes",[Object,s.a.UpdateTweenParticleLookupChapters]),p("design:returntype",void 0)],e.prototype,"updateTweenParticleLookupChapters",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getTweenParticleLookup",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getParticleSystems",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getVisisbleParticleSystems",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getParticleSystemsList",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getAssignedParticleSystems",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getSelectedParticleSystemId",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getSelectedParticleSystem",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getSelectedParticleConstraintIndex",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getSelectedParticleConstraint",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getSelectedParticleCreatorIndex",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getSelectedParticleCreator",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getSelectedParticleUpdaterIndex",null),l([Object(a.f)(),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e,"getSelectedParticleUpdater",null),e=i=l([Object(a.g)({name:"engineParticles",defaults:{particleSelection:{},particleSystems:{},visibleParticleSystems:{},assignedParticles:{},tweenParticleLookup:{}}})],e),e})()},rKJn:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Web="web",e.Mobile="mobilesdk",e}({})},rYhz:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n("AcyG"),a=n("qXBG"),s=n("vkgz"),o=n("pLZG"),r=n("5+tZ"),c=n("nYR2"),l=n("Kn5L"),p=n("icKS");class u{}var d=n("KI9D"),g=n("8mU5"),h=n("fXoL"),b=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const f={sharing:!1};let y=(()=>{let e=class{constructor(e,t,n){this.shareService=e,this.productService=t,this.authService=n}static getSharing(e){return e.sharing}resetShare(e,t){e.setState(f)}sendEmail(e,{shareEmail:t}){e.patchState({sharing:!0}),this.authService.isHuman("share_email",!0).pipe(Object(s.a)(t=>{t.isHuman||e.dispatch(new l.sb(new Error("reCAPTCHA error. Refresh the page and try again.")))}),Object(o.a)(e=>e.isHuman),Object(r.b)(e=>this.shareService.shareEmailLink(Object.assign({version:4,app_productkey:this.productService.productKey,app_producttype:this.productService.productType,site_verify_response:e.verification},t))),Object(c.a)(()=>e.patchState({sharing:!1}))).subscribe(()=>e.dispatch(new d.d(t)),t=>e.dispatch(new d.c(t)))}};return e.\u0275fac=function(t){return new(t||e)(h.Zb(g.a),h.Zb(p.a),h.Zb(a.a))},e.\u0275prov=h.Lb({token:e,factory:e.\u0275fac}),b([Object(i.a)(d.a),m("design:type",Function),m("design:paramtypes",[Object,d.a]),m("design:returntype",void 0)],e.prototype,"resetShare",null),b([Object(i.a)(d.b),m("design:type",Function),m("design:paramtypes",[Object,d.b]),m("design:returntype",void 0)],e.prototype,"sendEmail",null),b([Object(i.f)(),m("design:type",Function),m("design:paramtypes",[u]),m("design:returntype",void 0)],e,"getSharing",null),e=b([Object(i.g)({name:"share",defaults:f})],e),e})()},rvu2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(){this.firstTime=0,this.lastTime=1}}},sTHe:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Select="Select",e.Hide="Hide",e.Paint="Paint",e.Eyedropper="Eyedropper",e.Label="Label",e.Isolate="Isolate",e.Fade="Fade",e.Position="Position",e.Quiz="Quiz",e}({})},snBo:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.AnatomyLabels="anatomyLabels",e.Audio="audio",e.Camera="camera",e.Column="column",e.ColumnToggle="column-toggle",e.ContextActions="contextActions",e.Description="description",e.Drawer="drawer",e.Fullscreen="fullscreen",e.Help="help",e.InternetExplorerWarning="internetExplorerWarning",e.LabelList="labelList",e.Labels="labels",e.Layout="layout",e.Legend="legend",e.Loader="loader",e.Logo="logo",e.Media="media",e.Mediabar="mediabar",e.Menu="menu",e.NodeInfo="nodeInfo",e.Pagination="pagination",e.Presenter="presenter",e.Reset="reset",e.Search="search",e.ScrubberButton="scrubberButton",e.ScrubberItem="scrubberItem",e.TitleOnly="title-only",e.ToggleLabels="toggleLabels",e.Toolbar="toolbar",e.Tools="tools",e.Tutorial="tutorial",e.Undo="undo",e.VisibilityLayers="visibilityLayers",e.Whiteboard="whiteboard",e}({})},stSV:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n("AytR"),a=n("p345"),s=function(e){return e.None="none",e.Circle="circle",e.Bar="bar",e}({});const o=s.Bar,r=i.a.application===a.a.Viewer?o:s.Circle},t15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i={small:{width:256,height:256},medium:{width:512,height:512},large:{width:1024,height:1024}}},tgUM:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}));const i={label:"Relevance",fields:[],ascending:!0},a={label:"Most Recent",fields:["collection_content_createdate","update_date_time","create_date_time"],ascending:!1},s={label:"Title (A-Z)",fields:["title"],ascending:!0},o={label:"Title (Z-A)",fields:["title"],ascending:!1},r={label:"Author (A-Z)",fields:["author"],ascending:!0},c={label:"Author (Z-A)",fields:["author"],ascending:!1},l=[i,a,s,o,r,c]},u9Xo:function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var i=n("ofXK"),a=n("vvyD"),s=n("PCNd"),o=n("fXoL");let r=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a]]}),e})(),c=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a]]}),e})();var l=n("3Pt+");let p=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z]]}),e})(),u=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a]]}),e})(),d=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a]]}),e})(),g=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a]]}),e})(),h=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a]]}),e})();var b=n("EWj2");let m=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,b.a]]}),e})(),f=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z]]}),e})();var y=n("YsyH");let v=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a]]}),e})();var O=n("AcyG");class S{}var x=n("0Zsz"),C=n("L2KA"),w=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},j=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let k=(()=>{let e=class{constructor(e){this.dialogService=e}static getOpenDialog(e){return e.openDialog}openLimit(e,t){this.dialogService.openLimitDialog().afterClosed().subscribe(t=>{e.dispatch(new x.a.CloseLimit(t))})}closeLimit(e,t){t.upgrade&&this.dialogService.openUpgradeDialog()}openPremiumContent(e,t){this.dialogService.openPremiumContentDialog().afterClosed().subscribe(t=>{e.dispatch(new x.a.ClosePremiumContent(t))})}closePremiumContent(e,t){t.confirmed&&e.dispatch(new x.a.OpenUpgrade)}openUpgrade(e,t){this.dialogService.openUpgradeDialog()}};return e.\u0275fac=function(t){return new(t||e)(o.Zb(C.a))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),w([Object(O.a)(x.a.OpenLimit),j("design:type",Function),j("design:paramtypes",[Object,x.a.OpenLimit]),j("design:returntype",void 0)],e.prototype,"openLimit",null),w([Object(O.a)(x.a.CloseLimit),j("design:type",Function),j("design:paramtypes",[Object,x.a.CloseLimit]),j("design:returntype",void 0)],e.prototype,"closeLimit",null),w([Object(O.a)(x.a.OpenPremiumContent),j("design:type",Function),j("design:paramtypes",[Object,x.a.OpenPremiumContent]),j("design:returntype",void 0)],e.prototype,"openPremiumContent",null),w([Object(O.a)(x.a.ClosePremiumContent),j("design:type",Function),j("design:paramtypes",[Object,x.a.ClosePremiumContent]),j("design:returntype",void 0)],e.prototype,"closePremiumContent",null),w([Object(O.a)(x.a.OpenUpgrade),j("design:type",Function),j("design:paramtypes",[Object,x.a.OpenUpgrade]),j("design:returntype",void 0)],e.prototype,"openUpgrade",null),w([Object(O.f)(),j("design:type",Function),j("design:paramtypes",[S]),j("design:returntype",void 0)],e,"getOpenDialog",null),e=w([Object(O.g)({name:"dialog",defaults:{openDialog:null}})],e),e})(),P=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z]]}),e})(),_=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z]]}),e})(),M=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z]]}),e})(),I=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a]]}),e})(),T=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,l.l,l.z,s.a]]}),e})();var U=n("+Xsx"),L=n("PXMH");let z=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z]]}),e})(),A=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z]]}),e})();var F=n("+pSP");let D=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,F.a,b.a]]}),e})();var E=n("vRHm");let N=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z,E.a]]}),e})(),R=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z]]}),e})(),V=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z]]}),e})(),B=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z]]}),e})(),H=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z]]}),e})(),Q=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.z]]}),e})();var G=n("ejx4");let W=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,s.a,l.l,l.z]]}),e})(),q=(()=>{class e{}return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[O.d.forFeature([k]),r,c,p,u,d,Q,g,h,D,m,f,y.a,v,P,_,M,I,T,z,A,N,B,H,U.a,L.a,s.a],r,c,p,u,d,Q,g,h,D,m,f,y.a,v,P,N,_,M,I,T,z,A,R,V,B,H,G.a,W]}),e})()},uA5T:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{}},uAsG:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n("b36G"),a=n("Vec5"),s=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let o=(()=>{class e{}return function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([Object(i.Type)(()=>a.a),s("design:type",Array)],e.prototype,"organizations",void 0),e})();function r(e){return e.email.endsWith("@biodigital.com")}},uDDk:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Markdown="markdown",e.Images="images",e.Ticker="ticker",e}({})},ufUH:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Basics=0]="Basics",e[e.All=1]="All",e[e.Shortcuts=2]="Shortcuts",e}({})},uwj7:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Query=0]="Query",e[e.Path=1]="Path",e}({})},vCxQ:function(e,t,n){"use strict";n("qA9Q"),n("3fyd")},vRHm:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("ofXK"),a=n("3Pt+"),s=n("D8yp"),o=n("PXMH"),r=n("Ow1N"),c=n("EWj2"),l=n("vvyD"),p=n("+Xsx"),u=n("fXoL");let d=(()=>{class e{}return e.\u0275mod=u.Nb({type:e}),e.\u0275inj=u.Mb({factory:function(t){return new(t||e)},imports:[[i.c,l.a,a.l,o.a,a.z,r.a,c.a,s.a,p.a]]}),e})()},vXBk:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return r}));const i={[n("9U6C").a.WoltersKluwer]:"https://tools.ovid.com/support/index_inner.html"};function a(e){return"https://support.biodigital.com/hc/en-us"}function s(e){return!0===(null==e?void 0:e.premium_account_valid)||"group"===(null==e?void 0:e.premium_account_type)}function o(e){var t,n;return!(null===(n=null===(t=null==e?void 0:e.organizations[0])||void 0===t?void 0:t.external_account)||void 0===n?void 0:n.is_external_account)&&s(e)}function r(e){var t,n;const a=null===(n=null===(t=null==e?void 0:e.organizations[0])||void 0===t?void 0:t.external_account)||void 0===n?void 0:n.external_account_provider;return i[a]}},vXdC:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{}},ve2m:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o}));const i={colors:[245,245,245,1,245,245,245,1],gradientType:"radial",colorStops:[0,100]},a={colors:[255,255,255,0,255,255,255,0],gradientType:"linear",colorStops:[0,100]},s=[{colors:[0,0,0,1,0,0,0,1],gradientType:"linear",colorStops:[0,100]},{colors:[38,38,38,1,38,38,38,1],gradientType:"linear",colorStops:[0,100]},{colors:[77,77,77,1,77,77,77,1],gradientType:"linear",colorStops:[0,100]},{colors:[115,115,115,1,115,115,115,1],gradientType:"linear",colorStops:[0,100]},{colors:[153,153,153,1,153,153,153,1],gradientType:"linear",colorStops:[0,100]},{colors:[191,191,191,1,191,191,191,1],gradientType:"linear",colorStops:[0,100]},{colors:[230,230,230,1,230,230,230,1],gradientType:"linear",colorStops:[0,100]},{colors:[255,255,255,1,255,255,255,1],gradientType:"linear",colorStops:[0,100]},{colors:[128,128,128,1,0,0,0,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,38,38,38,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,77,77,77,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,115,115,115,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,153,153,153,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,191,191,191,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,230,230,230,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,255,255,255,1],gradientType:"radial",colorStops:[0,100]},{colors:[245,208,208,1,245,208,208,1],gradientType:"linear",colorStops:[0,100]},{colors:[253,236,219,1,253,236,219,1],gradientType:"linear",colorStops:[0,100]},{colors:[255,246,219,1,255,246,219,1],gradientType:"linear",colorStops:[0,100]},{colors:[220,236,213,1,220,236,213,1],gradientType:"linear",colorStops:[0,100]},{colors:[212,229,245,1,212,229,245,1],gradientType:"linear",colorStops:[0,100]},{colors:[219,212,235,1,219,212,235,1],gradientType:"linear",colorStops:[0,100]},{colors:[164,194,244,1,164,194,244,1],gradientType:"linear",colorStops:[0,100]},{colors:[118,165,175,1,118,165,175,1],gradientType:"linear",colorStops:[0,100]},{colors:[245,208,208,1,245,208,208,1],gradientType:"radial",colorStops:[0,100]},{colors:[253,236,219,1,240,169,99,1],gradientType:"radial",colorStops:[0,100]},{colors:[255,246,219,1,250,210,92,1],gradientType:"radial",colorStops:[0,100]},{colors:[220,236,213,1,147,188,129,1],gradientType:"radial",colorStops:[0,100]},{colors:[212,229,245,1,112,164,213,1],gradientType:"radial",colorStops:[0,100]},{colors:[219,212,235,1,145,128,187,1],gradientType:"radial",colorStops:[0,100]},{colors:[164,194,244,1,112,164,213,1],gradientType:"radial",colorStops:[0,100]},{colors:[211,211,211,1,118,165,175,1],gradientType:"radial",colorStops:[0,100]}],o=[...s,{colors:[10,132,130,255,5,43,51,255],gradientType:"radial",colorStops:[0,68]},{colors:[0,28,84,1,0,0,0,1],gradientType:"radial",colorStops:[12,100]}]},vm16:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("LvDl"),a=n("cp0P"),s=n("LRne"),o=n("HDdC"),r=n("eIep"),c=n("lJxs"),l=n("Wd1f"),p=n("6d61"),u=n("fXoL"),d=n("tk/3");let g=(()=>{class e{constructor(e){this.http=e}generateFreshChapterImages(e,t,n=!1){const i=[];return e.forEach(e=>{const a=l.a.getChapterThumbnail(e,t);(a.legacy||n)&&i.push(l.a.makeFreshThumbnail(a.storyId,a.chapterId,a.urls.large))}),i.length?Object(a.a)(i):Object(s.a)([])}saveChapterThumbnails(e,t,n){return e.reduce((e,a)=>{const s=t.get(n[a.id]),o=Object(i.get)(s,"snapshot");return o&&e.push(this.saveNewChapterImage(a.id,o)),e},[])}saveNewChapterImage(e,t){return new o.a(n=>{Object(p.a)(t).pipe(Object(r.a)(e=>this.saveImageBlob(e)),Object(c.a)(t=>Object.assign({chapterId:e},t))).subscribe(e=>{n.next(e),n.complete()},()=>{n.next(null),n.complete()})})}getIndexThumbnail(e,t="large"){return`${"undefined"==typeof localBaseDirectory?"":localBaseDirectory}thumbs/modules/${e}/${t}/index.jpg`}saveImageBlob(e){const t=new File([e],"image.jpg",{type:"image/jpeg"}),n=new FormData;return n.append("file",t),this.http.post("/ws/media/images/upload",n)}}return e.\u0275fac=function(t){return new(t||e)(u.Zb(d.b))},e.\u0275prov=u.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},vvyD:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n("f6nW"),a=n("FvrZ"),s=n("bSwM"),o=n("FKr1"),r=n("bTqV"),c=n("QibW"),l=n("d3UM"),p=n("STbY"),u=n("/t3+"),d=n("jaxi"),g=n("0IaG"),h=n("Qu3c"),b=n("dNgK"),m=n("f0Cb"),f=n("XhcP"),y=n("bv9b"),v=(n("yLV6"),n("vxfF")),O=n("5+WD"),S=n("rDax"),x=n("+rOU"),C=n("fXoL");const w={disabled:!0,animation:{enterDuration:0,exitDuration:0}},j=Object.assign(Object.assign({},Object(h.b)()),{touchGestures:"off"});let k=(()=>{class e{}return e.\u0275mod=C.Nb({type:e}),e.\u0275inj=C.Mb({factory:function(t){return new(t||e)},providers:[{provide:b.a,useValue:{duration:3e3}},{provide:o.d,useValue:w},{provide:h.a,useValue:j}],imports:[[O.d,i.a,s.b,s.b,r.b,c.c,l.a,p.c,u.a,d.c,g.f,h.d,b.c,m.b,f.d,v.g,S.f,x.f],O.d,i.a,a.a,s.b,s.b,r.b,c.c,l.a,p.c,u.a,d.c,g.f,h.d,b.c,m.b,f.d,v.g,S.f,x.f,y.b]}),e})()},wSC8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Local="Local",e.QA="QA",e.Staging="Staging",e.Production="Production",e}({})},"x/dY":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Chapter="chapter",e.Label="label",e.Paint="paint",e.Position="position",e.Quiz="quiz",e}({})},x1jL:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fqos");class a{constructor(){this.type=i.a.flyToChapter,this.value=null}}},xo8B:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return p}));var i=n("LvDl"),a=n("08/d");function s(){return[...a.a.main,...a.a.categories,...a.a.specialties,...a.a.community]}function o(e){return{all:r(a.a.main,e),anatomy:r(a.a.categories,e),specialties:r(a.a.specialties,e),community:r(a.a.community,e)}}function r(e,t){return e.map(e=>{const n={id:e.id,title:e.title,type:e.type};return t&&(n.title=Object(i.get)(e,`translations.${t}.title`,n.title)),n})}function c(e,t){if(null==e)return null;const n=Object(i.cloneDeep)(s().find(t=>t.id===e));return null==n?null:(t&&(n.title=Object(i.get)(n,`translations.${t}.title`,n.title)),n)}function l(e){return a.a.specialties.find(t=>e.tags.some(e=>e===t.id))}function p(e){return a.a.categories.find(t=>e.tags.some(e=>e===t.id))}},xybE:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("XoIW"),a=n("LRne"),s=n("lJxs"),o=n("vkgz"),r=n("b36G"),c=n("Vec5"),l=n("DTUA"),p=n("fXoL"),u=n("tk/3");let d=(()=>{class e{constructor(e,t){this.http=e,this.storageService=t}getUserMessage(e,t="",n=!0){const l=this.getCachedMessage(e);return n&&l?Object(a.a)(l):this.http.get(`/ws/user/message?version=2&type=${e}&mode=${t}`).pipe(Object(s.a)(t=>{const{message_seen_id:n,show_alert:a}=t;let s;switch(e){case i.a.DomainAlert:s=Object(r.plainToClass)(c.a,t.join_organization);break;case i.a.WelcomeTour:s=""+t.tour_version;break;case i.a.CompleteProfileAlert:const{is_new_user:e,is_team_user:n}=t||{};s=Object(r.plainToClass)(i.b,{is_new_user:e,is_team_user:n})}return{messageSeenId:n,messageType:e,showUserAlert:a,messageData:s}}),Object(o.a)(e=>{e.showUserAlert||this.addCachedMessage(e)}))}setUserMessageViewed(e){return this.http.post("/ws/user/message",{version:2,message_seen_id:e})}sendMessage(e){return this.http.post("/ws/user/message",e)}getCachedMessage(e){return this.getCachedMessages().find(t=>t.messageType===e)}getCachedMessages(){return this.storageService.getSessionItem(l.c.UserMessagesSeen)||[]}addCachedMessage(e){if(!this.getCachedMessage(e.messageType)){const t=this.getCachedMessages();this.storageService.setSessionItem(l.c.UserMessagesSeen,[...t,e])}}}return e.\u0275fac=function(t){return new(t||e)(p.Zb(u.b),p.Zb(l.d))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},yCjD:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Hide="hide",e.Show="show",e.Collapse="collapse",e}({})},yG3n:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return a}));class a{constructor(){this[i]=!0}}i=immer.immerable},yGOH:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),a=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})()},yIGu:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("fXoL"),a=n("ofXK");const s=[[["app-list-item"]]],o=["app-list-item"];var r=function(e){return e.Default="default",e.Commafied="commafied",e.flat="flat",e.inline="inline",e}({});let c=(()=>{class e{constructor(){this.listType=r.Default}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-list"]],inputs:{listType:"listType"},ngContentSelectors:o,decls:2,vars:1,consts:[[1,"list",3,"ngClass"]],template:function(e,t){1&e&&(i.lc(s),i.Vb(0,"div",0),i.kc(1),i.Ub()),2&e&&i.mc("ngClass","list--"+t.listType)},directives:[a.m],styles:['.list{display:flex;flex-direction:column}.list--default app-list-item{display:list-item;margin-left:16px;list-style-type:disc}.list--commafied{align-items:center;display:flex;flex-direction:row;flex-wrap:wrap;padding:0 4px 4px 0}.list--commafied app-list-item:not(:last-child):after{content:", ";float:right;padding-right:4px}.list--flat app-list-item:not(:last-child){margin-bottom:4px}.list--inline{display:inline-flex;align-items:center;display:flex;flex-direction:row;flex-wrap:wrap}.list--inline app-list-item{margin:0 8px 4px 0}.list__item{display:block}'],encapsulation:2,changeDetection:0}),e})()},yonH:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.classicAnnotation="classic-annotation",e.classicHotspot="classic-hotspot",e.studioNext="studio-light",e}({})},zJoM:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Normal="normal",e.Compact="compact",e}({})},zKvh:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.JPEG="image/jpeg",e.PNG="image/png",e}({})},zP1m:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("R0Ic"),a=n("XNiG"),s=n("pLZG"),o=n("Kj3r"),r=n("1G5W"),c=n("5nh7"),l=n("fXoL"),p=n("ofXK"),u=n("0njA");function d(e,t){if(1&e&&(l.Vb(0,"div",7),l.Vb(1,"div",8),l.Qb(2,"app-icon",9),l.Ub(),l.Ub()),2&e){const e=l.gc(2);l.Db(2),l.mc("icon",e.icon)}}function g(e,t){if(1&e&&(l.Vb(0,"h3",10),l.Pc(1),l.Ub()),2&e){const e=l.gc(2);l.Db(1),l.Qc(e.title)}}function h(e,t){if(1&e){const e=l.Wb();l.Vb(0,"button",11),l.cc("click",(function(){return l.Cc(e),l.gc(2).handleDismissClicked()})),l.Qb(1,"app-icon",12),l.Ub()}}function b(e,t){if(1&e&&(l.Vb(0,"div",1),l.Vb(1,"div",2),l.Nc(2,d,3,1,"div",3),l.Vb(3,"div",4),l.Nc(4,g,2,1,"h3",5),l.Vb(5,"p"),l.kc(6),l.Ub(),l.Ub(),l.Ub(),l.Nc(7,h,2,0,"button",6),l.Ub()),2&e){const e=l.gc();l.Hb("toggle--message","message"===e.type)("toggle--error","error"===e.type)("toggle--notification","notification"===e.type)("toggle--warning","warning"===e.type)("toggle--rounded","rounded"===e.toggleStyle)("toggle--light","light"===e.theme)("toggle--dark","dark"===e.theme)("toggle--left","left"===e.toggleAlign)("toggle--center","center"===e.toggleAlign),l.mc("@show",void 0),l.Db(2),l.mc("ngIf",e.icon),l.Db(2),l.mc("ngIf",e.title),l.Db(3),l.mc("ngIf",e.dismiss)}}const m=["*"];let f=(()=>{class e{constructor(e){this.changeRef=e,this.type="message",this.theme="light",this.toggleAlign="left",this.showDelay=0,this.hideDelay=5e3,this.dismiss=!1,this.toggleStyle="rounded",this.handleDismiss=new a.a,this._shown=!0,this.shownSubject=new a.a,this.ngUnsubscribe=new a.a}get shown(){return this._shown}set shown(e){this._shown!==e&&(this._shown=e,this.shownSubject.next(e),this.changeRef.markForCheck())}ngOnInit(){this.initViewShownListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleDismissClicked(){this.handleDismiss.next()}initViewShownListeners(){this.shownSubject.pipe(Object(s.a)(()=>this.hideDelay>0),Object(o.a)(this.hideDelay),Object(s.a)(e=>e),Object(r.a)(this.ngUnsubscribe)).subscribe(()=>{this._shown=!1,this.changeRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(l.Pb(l.i))},e.\u0275cmp=l.Jb({type:e,selectors:[["app-message-toggle"]],inputs:{type:"type",theme:"theme",toggleAlign:"toggleAlign",icon:"icon",title:"title",showDelay:"showDelay",hideDelay:"hideDelay",dismiss:"dismiss",toggleStyle:"toggleStyle",shown:"shown"},outputs:{handleDismiss:"handleDismiss"},ngContentSelectors:m,decls:1,vars:1,consts:[["class","toggle flex flex-row items-start justify-between",3,"toggle--message","toggle--error","toggle--notification","toggle--warning","toggle--rounded","toggle--light","toggle--dark","toggle--left","toggle--center",4,"ngIf"],[1,"toggle","flex","flex-row","items-start","justify-between"],[1,"toggle__wrapper","flex","flex-row","flex-auto"],["class","mr-3",4,"ngIf"],[1,"toggle__content"],["class","text-semibold mb-1",4,"ngIf"],["class","toggle__icon toggle__dismiss",3,"click",4,"ngIf"],[1,"mr-3"],[1,"toggle__icon"],[3,"icon"],[1,"text-semibold","mb-1"],[1,"toggle__icon","toggle__dismiss",3,"click"],["icon","times"]],template:function(e,t){1&e&&(l.lc(),l.Nc(0,b,8,22,"div",0)),2&e&&l.mc("ngIf",t.shown)},directives:[p.p,u.a],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}:root{--message-toggle-color:#1c2a3f;--message-toggle-background-color:#f0f8ff;--message-toggle-icon-color:#2d72dc}.toggle{padding:16px;box-sizing:border-box;font-size:13px;line-height:20px;color:var(--message-toggle-color);background-color:var(--message-toggle-background-color)}.toggle--rounded{border-radius:4px}.toggle__icon{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:1px;color:#fff;font-size:16px;background:none;border:none;color:var(--message-toggle-icon-color)}.toggle__content{padding:0 2px;word-break:break-word}.toggle__dismiss{font-size:14px;color:var(--message-toggle-color)}.toggle--left .toggle__content{flex:1 1 auto}.toggle--center .toggle__wrapper{justify-content:center}.toggle.toggle--message{--message-toggle-color:#1c2a3f;--message-toggle-background-color:#f0fff0;--message-toggle-icon-color:#33cd54}.toggle.toggle--notification{--message-toggle-color:#1c2a3f;--message-toggle-background-color:#f0f8ff;--message-toggle-icon-color:#2d72dc}.toggle.toggle--warning{--message-toggle-color:#1c2a3f;--message-toggle-background-color:#fffcf0;--message-toggle-icon-color:#ffb92e}.toggle.toggle--error{--message-toggle-color:#1c2a3f;--message-toggle-background-color:#fff3f0;--message-toggle-icon-color:#f44336}.toggle--dark.toggle--message{--message-toggle-background-color:#e3ffe5}.toggle--dark.toggle--notification{--message-toggle-background-color:#d6ecff}.toggle--dark.toggle--warning{--message-toggle-background-color:#fff6d1}.toggle--dark.toggle--error{--message-toggle-background-color:#ffe2db}"],encapsulation:2,data:{animation:[Object(i.n)("show",[Object(i.m)(":enter",[Object(i.o)(c.a.fadeIn,{params:{duration:300}})]),Object(i.m)(":leave",[Object(i.o)(c.a.fadeOut,{params:{duration:300}})])])]},changeDetection:0}),e})()},zUnb:function(e,t,n){"use strict";n.r(t);var i=n("fXoL"),a=n("AytR"),s=n("jhN1"),o=n("R1ws"),r=n("tyNb"),c=n("P+IX"),l=n("1G5W"),p=n("XNiG"),u=n("ofXK");function d(e,t){1&e&&(i.Tb(0),i.Vb(1,"div",5),i.Vb(2,"div"),i.Pc(3,"Our apologies."),i.Ub(),i.Vb(4,"div"),i.Pc(5,"We're unable to find the model you are looking for."),i.Ub(),i.Ub(),i.Vb(6,"p",6),i.Pc(7,"404 Error. Content not found."),i.Ub(),i.Sb())}function g(e,t){1&e&&(i.Tb(0),i.Vb(1,"div",5),i.Vb(2,"div"),i.Pc(3,"Our apologies."),i.Ub(),i.Vb(4,"div"),i.Pc(5,"We're unable to find the page you are looking for."),i.Ub(),i.Ub(),i.Vb(6,"p",6),i.Pc(7,"404 Error. Page not found."),i.Ub(),i.Sb())}const h=function(){return["/explore"]};let b=(()=>{class e{constructor(e){this.route=e,this.ngUnsubscribe=new p.a}ngOnInit(){this.route.queryParams.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.errorType=e.errorType})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(r.a))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-not-found"]],decls:6,vars:4,consts:[[1,"error",3,"ngSwitch"],["src","assets/images/biodigital-logo.svg",1,"error__logo"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"error__button",3,"routerLink"],[1,"error__text"],[1,"error__subtext"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Qb(1,"img",1),i.Nc(2,d,8,0,"ng-container",2),i.Nc(3,g,8,0,"ng-container",3),i.Vb(4,"button",4),i.Pc(5,"Go to our home page"),i.Ub(),i.Ub()),2&e&&(i.mc("ngSwitch",t.errorType),i.Db(2),i.mc("ngSwitchCase","content"),i.Db(2),i.mc("routerLink",i.oc(3,h)))},directives:[u.r,u.s,u.t,r.f],styles:["body[_ngcontent-%COMP%]{background-color:#fff}.error[_ngcontent-%COMP%]{padding:160px;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;color:#283853;font-size:16px}.error__logo[_ngcontent-%COMP%]{width:240px}.error__text[_ngcontent-%COMP%]{margin-top:32px;font-size:32px;line-height:48px;font-weight:500;letter-spacing:.025em}.error__subtext[_ngcontent-%COMP%]{font-size:20px;margin-top:32px}.error__button[_ngcontent-%COMP%]{margin-top:48px;padding:16px 24px;border-radius:4px;border:1px solid #96a8c0;font-size:16px;font-weight:500;letter-spacing:.075em;color:#374a68;text-transform:uppercase;outline:0;cursor:pointer}.error__button[_ngcontent-%COMP%]:hover{background:#eaeff5;color:#1c2a3f;border-color:#1c2a3f}@media (max-width:1024px){.error[_ngcontent-%COMP%]{padding:10%}.error__text[_ngcontent-%COMP%]{font-size:24px;line-height:32px;letter-spacing:normal}.error__subtext[_ngcontent-%COMP%]{font-size:18px;line-height:26px}.error__button[_ngcontent-%COMP%]{font-size:14px}}@media (max-width:768px){.error__logo[_ngcontent-%COMP%]{width:200px}.error__text[_ngcontent-%COMP%]{font-size:20px;line-height:28px}.error__subtext[_ngcontent-%COMP%]{font-size:16px;line-height:24px;margin-top:24px}.error__button[_ngcontent-%COMP%]{font-size:12px;padding:12px 20px;margin-top:32px}}"],changeDetection:0}),e})();var m=n("p345");const f=[{canActivate:[c.a],path:"",pathMatch:"full",redirectTo:a.a.application===m.a.Studio?"/explore":"/results/modules"},{path:"dashboard",pathMatch:"full",redirectTo:a.a.application===m.a.Studio?"/results/bookmarks":"/results/modules"},{path:"explore/search",redirectTo:"results/modules"},{path:"account",loadChildren:()=>Promise.all([n.e(0),n.e(3),n.e(1),n.e(7)]).then(n.bind(null,"jcJX")).then(e=>e.AccountModule)},{path:"login",loadChildren:()=>Promise.all([n.e(1),n.e(16)]).then(n.bind(null,"X3zk")).then(e=>e.LoginModule)},{path:"results",loadChildren:()=>Promise.all([n.e(0),n.e(4),n.e(6),n.e(18)]).then(n.bind(null,"RmqX")).then(e=>e.SearchModule)},{path:"explore",loadChildren:()=>Promise.all([n.e(0),n.e(4),n.e(17)]).then(n.bind(null,"vwuq")).then(e=>e.ExploreModule)},{path:"view",loadChildren:()=>Promise.all([n.e(0),n.e(5),n.e(14)]).then(n.bind(null,"mn0Z")).then(e=>e.ViewInternalModule)},{path:"edit",loadChildren:()=>Promise.all([n.e(0),n.e(4),n.e(6),n.e(5),n.e(3),n.e(1),n.e(15)]).then(n.bind(null,"zFnc")).then(e=>e.EditModule)},{path:"account",loadChildren:()=>Promise.all([n.e(0),n.e(3),n.e(1),n.e(7)]).then(n.bind(null,"jcJX")).then(e=>e.AccountModule)},{path:"**",component:b}];let y=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[r.i.forRoot(f,{relativeLinkResolution:"legacy"})],r.i]}),e})();n("mNvP");var v=n("pLZG"),O=n("IzEk"),S=n("lJxs"),x=n("JX91"),C=n("Kj3r"),w=n("xgIS"),j=n("HDdC"),k=n("DTUA"),P=n("LvDl"),_=n("AcyG"),M=n("ECVi"),I=n("0IaG"),T=n("IlST");function U(e,t){if(1&e&&(i.Vb(0,"div",6),i.Pc(1),i.Vb(2,"a",7),i.Pc(3,"Contact us"),i.Ub(),i.Pc(4," if you have any questions regarding your group account. "),i.Ub()),2&e){const e=i.gc();i.Db(1),i.Rc(" You must be within the ",e.organizationName," network to access this group account. "),i.Db(1),i.mc("href","mailto:"+e.supportEmail,i.Fc)}}function L(e,t){if(1&e&&(i.Vb(0,"div",6),i.Pc(1),i.Vb(2,"a",7),i.Pc(3,"Contact us"),i.Ub(),i.Pc(4," if you have any questions regarding your group account. "),i.Ub()),2&e){const e=i.gc();i.Db(1),i.Rc(" You must be within the ",e.organizationName," network to access this group account. "),i.Db(1),i.mc("href","mailto:"+e.supportEmail,i.Fc)}}let z=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.data=t,this.storageService=n,this.email=!1,this.ip=!1,this.supportEmail=a.a.supportEmail,this.organizationName=t.organizationName,this.email=t.email,this.ip=t.ip}ngOnInit(){}handleDontShowClick(){const e=this.storageService.getLocalJSON(k.b.GroupRestriction)||{};e.dontShowDialog=!0,this.storageService.setLocalItem(k.b.GroupRestriction,e),this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(I.g),i.Pb(I.a),i.Pb(k.d))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-group-restriction-dialog"]],decls:12,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"pt-4","pb-6"],["class","text-14",4,"ngIf"],["mat-dialog-actions","",1,"pt-2"],["app-button","","buttonTheme","light","buttonType","outline",3,"click"],["app-button","","buttonType","primary","cdkFocusInitial","",3,"mat-dialog-close"],[1,"text-14"],[3,"href"]],template:function(e,t){1&e&&(i.Vb(0,"h1",0),i.Pc(1,"Oh no, you have no access to the "),i.Qb(2,"br"),i.Pc(3),i.Ub(),i.Vb(4,"div",1),i.Nc(5,U,5,2,"div",2),i.Nc(6,L,5,2,"div",2),i.Ub(),i.Vb(7,"div",3),i.Vb(8,"button",4),i.cc("click",(function(){return t.handleDontShowClick()})),i.Pc(9," Don't show me this again "),i.Ub(),i.Vb(10,"button",5),i.Pc(11,"Close"),i.Ub(),i.Ub()),2&e&&(i.Db(3),i.Rc("",t.organizationName," group!"),i.Db(2),i.mc("ngIf",t.ip),i.Db(1),i.mc("ngIf",t.email),i.Db(4),i.mc("mat-dialog-close",!0))},directives:[I.h,I.e,u.p,I.c,T.a,I.d],styles:[""],changeDetection:0}),e})();var A,F=n("5sb6"),D=n("5miH"),E=n("Kn5L"),N=n("esev"),R=n("7XdW"),V=n("Wdmj"),B=n("qXBG"),H=n("0ul3"),Q=n("mSC4"),G=n("kTA6"),W=n("937/"),q=n("eW6i"),$=n("PUI9"),X=n("7u76");(A||(A={})).getColorRecipe=function(e,t){const n=e.scene.objects[t];if(n instanceof e.scene.Object){const e=n.getProperties();return{tintColor:Object(P.get)(e,"tintColor")?e.tintColor:[1,1,1],brightness:e.brightness,saturation:e.saturation,contrast:e.contrast,opacity:e.opacity}}return null};var Z=n("0Yvn");let J=(()=>{class e{constructor(e,t,n){this.store=e,this.graphService=t,this.engineService=n,this.highlightDisabled=!1}colorObject(e,t){const{tintColor:n,saturation:i,brightness:a,contrast:s,opacity:o}=t,r=Human.scene.objects[e];r instanceof Human.scene.Object&&(Object(P.isNil)(n)||r.setTintColor(n),Object(P.isNil)(i)||r.setSaturation(i),Object(P.isNil)(a)||r.setBrightness(a),Object(P.isNil)(s)||r.setContrast(s),Object(P.isNil)(o)||r.setOpacity(o))}getColor(e){return A.getColorRecipe(Human,e)}uncolorObject(e){const t=Human.scene.objects[e];t instanceof Human.scene.Object&&(t.clearColorModifiers(),t.clearOpacityModifiers())}unpaint(e){const t=this.store.selectSnapshot($.a.getViewGraph);this.graphService.getLeafDescendants(t,e.id).forEach(e=>{this.engineService.getObjects(e).forEach(e=>{const t=Human.scene.objects[e];t instanceof Human.scene.Object&&(t.clearColorModProperties(),t.clearOpacityModProperties())})})}paint(e,t){const n=this.store.selectSnapshot($.a.getViewGraph),i=Z.a.toEngine(t);this.graphService.getLeafDescendants(n,e).forEach(e=>{this.engineService.getObjects(e).forEach(e=>{this.colorObject(e,i)})})}highlight(e,t){if(!1===this.highlightDisabled||!1===t){const n=this.store.selectSnapshot($.a.getViewGraph);this.graphService.getLeafDescendants(n,e).forEach(e=>{this.engineService.getObjects(e).forEach(e=>{const n=Human.scene.objects[e];n instanceof Human.scene.Object&&n.setHighlight(t)})})}}xRay(e,t){Human.scene.objects[e.id].setXRay(t)}paintAll(e,t){e.forEach(e=>this.paint(e,t))}unpaintAll(e){e.forEach(e=>{this.unpaint(e)})}highlightAll(e,t){e.forEach(e=>this.highlight(e,t))}disableHighlight(){this.highlightDisabled=!0}enableHighlight(){this.highlightDisabled=!1}setHighlightColor(e){Human.renderer.highlightColor=[...e]}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(_.h),i.Zb(X.a),i.Zb(q.a))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function K(e,t){const{procName:n,actionFn:i,aliases:a=[],mapFnIn:s,mapFnOut:o,hideDefinition:r=!1}=t,c=function(e){const t=this,n=s?s(e):e,a=i(n);if(void 0!==a)if(a instanceof j.a)a.subscribe(e=>{const n=o?o(e):e;t.setResult(n)});else{const e=o?o(a):a;t.setResult(e)}};[n,...a].forEach(t=>{const n=()=>e.rpc.define(t,c);r?e.rpc.hideDefinitions(()=>n()):n()})}var Y=n("RD2w"),ee=n("TATr"),te=n("11Ye");function ne(e){const t=e.captureCamera();return{position:t.lookAt.eye,target:t.lookAt.look,up:t.lookAt.up,zoom:t.zoom}}var ie,ae=n("ZR5G"),se=n("Vv7R"),oe=n("YpC8"),re=n("N0Zw"),ce=n("q8pu"),le=n("SxV6"),pe=n("Mh2x"),ue=n("VJvM"),de=n("UEjg"),ge=n("sTHe"),he=n("WFQG"),be=n("IOcx");(ie||(ie={})).getCanvasPos=function(e,t,n,i,a){n&&be.a.add(t,n,t);const s=e.renderer.getViewMat(),o=e.renderer.getProjMat(),r=be.b.create();be.a.transformMat4(r,t,s),r[3]=1,be.b.transformMat4(r,r,o);const c=r[1],l=r[3];return[Math.round((1+r[0]/l)*i/2),Math.round((1-c/l)*a/2)]};var me,fe=n("ve2m");function ye(e,t){return e.dispatch(new te.R(!1)),t.fireEvent(D.a.SceneXrayDisabled,void 0),!0}!function(e){e.isLegacyCaptureFormat=function(e){return void 0!==e.engineVersion},e.convertCaptureFormat=function(e){const t=Object.keys(e.objects).reduce((e,t)=>(e.push({objectId:t,selected:!1,hidden:!1}),e),[]);return{storyId:e.timeline.rootName.replace(".json",""),camera:{lookAt:e.camera,zoom:void 0},labels:[],objects:t,background:[],activeChapterId:e.timeline.scrub?e.timeline.scrub.chapterId:void 0}},e.convertMediaFormat=function(e){const t={};return Object.entries(e).forEach(([e,n])=>{t[e]={fullUrl:n.data.fullUrl,lang:n.data.lang,streamType:n.data.streamType}}),t}}(me||(me={}));var ve=n("gm/O"),Oe=n("GMXD"),Se=n("EF3F");let xe=(()=>{class e{}return e.type="[Analytics] Reset First Interaction",e})();var Ce=n("uDDk");function we(e){if(!e)return null;const{objectId:t,canvasPos:n,worldPos:i}=e;return{objectId:t||void 0,canvasPosition:n?{x:n[0],y:n[1]}:void 0,mode:"query",position:i?{x:i[0],y:i[1],z:i[2]}:void 0}}function je(e,t,n){const i=e.scene.objects[n].parent;return null!==i&&(t[i.objectId].checked||je(e,t,i.objectId))}function ke(e,t){const n=t.includes("/")?ae.a.Module:ae.a.Bookmark;e.dispatch(new se.e(t,n))}function Pe(e,t){return e.dispatch(new te.R(!0)),t.fireEvent(D.a.SceneXrayEnabled,void 0),!0}function _e(e){var t,n;const i=e.find(e=>e.type==Ce.a.Images);return null!==(n=null===(t=null==i?void 0:i.images)||void 0===t?void 0:t.filter(e=>{var t;return null!=(null===(t=e.urls)||void 0===t?void 0:t.default)}).map(e=>e.urls.default))&&void 0!==n?n:[]}function Me(e,t,n,i){e.rpc.defineEvent(t,{events:n||[t],map:i||(e=>e)})}var Ie=n("qz+p");let Te=(()=>{class e{constructor(e,t,n){this.hostingURL=e,this.embedded=t,this.widgetConfig=n}}return e.type="[Widget] Setup Widget",e})(),Ue=(()=>{class e{}return e.type="[Widget] Reset",e})(),Le=(()=>{class e{constructor(e){this.enabled=e}}return e.type="[Widget] Set Input Enabled",e})(),ze=(()=>{class e{constructor(e){this.config=e}}return e.type="[Widget] Set API Config",e})(),Ae=(()=>{class e{constructor(e){this.productAccountId=e}}return e.type="[Widget] Get Widget Product Settings",e})(),Fe=(()=>{class e{constructor(e){this.widgetSettings=e}}return e.type="[Widget] Set Widget Product Settings",e})();var De=n("5+tZ"),Ee=n("vkgz"),Ne=n("JIr8"),Re=n("I65S"),Ve=n("ewuU"),Be=n("V7wM"),He=n("+1W3"),Qe=n("cAYK"),Ge=n("gw9s"),We=n("zKvh"),qe=n("WUhe"),$e=n("h8op"),Xe=n("2Vo4"),Ze=n("f3gM");function Je(e){return Be.a.getColors(e).map(e=>e[255])}function Ke(e,t){const n=e.selectSnapshot(pe.a.getSelectedChapterBackground),{colors:i,colorStops:a,gradientType:s}=n,o=t.colors?[].concat(...t.colors):i;return new Ve.a(o,t.gradientType||s,t.colorStops||a)}var Ye=n("l57l");function et(e){return e.selectSnapshot(re.a.getChapterLabels)}function tt(e,t){return function(e,t){return e.find(e=>t===e.id)}(et(e),t)}function nt(e,t){const n=function(e,t){return e.scene.markers.markers[t]}(e,t.id);return{annotationId:t.id,objectId:t.objectId||null,title:t.title,description:t.description,shown:t.shown,occludable:t.occludable,position:n?{x:n.pos[0],y:n.pos[1],z:n.pos[2]}:null,canvasPosition:n?{x:n.canvasPos[0],y:n.canvasPos[1]}:null}}function it(e,t){const n=tt(e,t.annotationId);return n?Object.assign(Object.assign({},n),t):null}function at(e,t){return t&&e.dispatch(new ce.m(t)),!0}function st(e,t){return e.dispatch(new ce.l(t)),!0}function ot(e,t){return e.reduce((e,n)=>Object.assign(Object.assign({},e),{[""+n]:t}),{})}function rt(e,t){return function(e,n){return Object.entries(e).filter(([e,n])=>((e,n)=>n===t)(0,n)).reduce((e,[t,n])=>Object.assign(Object.assign({},e),{[""+t]:n}),{})}(e)}function ct(e,t){return Object.keys(rt(e,t))}function lt(e,t,n){return function(e,t){return e.filter(e=>t.includes(e.id))}(e,ct(t,n))}function pt(e,t,n){const i=ct(t,n).map(t=>function(e,...t){const n=t.map(t=>e.filter(e=>t===e.objectId));return function(e){const t=new Set(e);return Array.from(t.values())}([].concat(...n))}(e,t)).map(e=>e.map(e=>e.id));return ot([].concat(...i),n)}function ut(e,t){return[{eventName:D.a.AnnotationsCreated,aliasEvents:[D.a.LabelsCreated],mapFn:t=>nt(e,t)},{eventName:D.a.AnnotationsDestroyed,aliasEvents:[D.a.LabelsDestroyed],mapFn:e=>({annotationId:e.id})},{eventName:D.a.AnnotationsShown,aliasEvents:[D.a.LabelsEnabled],mapFn:()=>!0},{eventName:D.a.AnnotationsHidden,aliasEvents:[D.a.LabelsDisabled],mapFn:()=>!0}]}function dt(e,t,n){return[{procName:Y.a.AnnotationsInfo,actionFn:()=>et(t),mapFnOut:t=>function(e,t){return t.reduce((t,n)=>(t[n.id]=nt(e,n),t),{})}(e,t)},{procName:Y.a.AnnotationsCreate,mapFnIn:i=>function(e,t,n,i){const a=t.selectSnapshot(pe.a.getSelectedChapter),s={annotationId:i.annotationId,title:i.title,description:i.description,objectId:e.scene.objects[i.objectId]?i.objectId:void 0,pos:i.position,occludable:i.occludable,labelOffset:i.labelOffset,shown:i.shown,labelShown:i.shown};return s.objectId&&void 0===s.pos&&(s.pos=e.scene.objects[s.objectId].center),n.deserializeAnnotation(s,a,Ye.a.Annotation)}(e,t,n,i),actionFn:e=>function(e,t){return t.objectId||t.pos?(e.dispatch(new ce.b(t)),t):null}(t,e),mapFnOut:t=>t?nt(e,t):null},{procName:Y.a.AnnotationsUpdate,mapFnIn:e=>it(t,e),actionFn:e=>at(t,e)},{procName:Y.a.AnnotationsSetTitle,mapFnIn:e=>it(t,e),actionFn:e=>at(t,e),hideDefinition:!0},{procName:Y.a.AnnotationsSetDescription,mapFnIn:e=>it(t,e),actionFn:e=>at(t,e),hideDefinition:!0},{procName:Y.a.AnnotationsDestroy,mapFnIn:e=>tt(t,e),actionFn:e=>function(e,t){return t&&e.dispatch(new ce.i(t)),!0}(t,e)},{procName:Y.a.ShowAnnotations,actionFn:()=>st(t,!0)},{procName:Y.a.SetAnnotationsShown,actionFn:()=>st(t,!0),hideDefinition:!0},{procName:Y.a.HideAnnotations,actionFn:()=>st(t,!1)},{procName:Y.a.AnnotationsSetLabelsShown,mapFnIn:e=>function(e,t){const{annotations:n,objects:i,replace:a}=t,s=n||{},o=i||{},r=et(e),c=Object.assign(Object.assign(Object.assign(Object.assign({},rt(s,!0)),rt(s,!1)),pt(r,o,!0)),pt(r,o,!1));return a?Object.assign(Object.assign({},ot(r.map(e=>e.id),!1)),c):c}(t,e),actionFn:e=>function(e,t){const n=et(e),i=lt(n,t,!1),a=lt(n,t,!0);e.dispatch(new ce.t(a,!0)),e.dispatch(new ce.t(i,!1))}(t,e),hideDefinition:!0}]}var gt=n("fMqy"),ht=n("2o60");const bt={};function mt(e,t){t.hasOwnProperty("data")&&(t[e]=t.data)}const ft={hotspotSeedId:0,hotspotIdMap:new Map,getHotspotMap:e=>{const{hotspotIdMap:t,createHotspotId:n}=ft;return e.selectSnapshot(re.a.getLabels).forEach(e=>{const i=e.id;void 0===t.get(i)&&n(i)}),t},createHotspotId:e=>(ft.hotspotSeedId++,ft.hotspotIdMap.set(e,ft.hotspotSeedId),ft.hotspotSeedId),getHotspotIdByLabel:(e,t,n)=>{const{getHotspotMap:i,createHotspotId:a}=ft,s=i(e).get(t);return n&&void 0===s?a(t):s},getLabelIdByHotspotId:(e,t)=>{const n=ft.getHotspotMap(e),i=Array.from(n).find(([e,n])=>n===t);return i?i[0]:null}};function yt(e,t){const n=e.selectSnapshot(re.a.getLabels);return void 0!==t?n.filter(e=>e.chapterId===t):n}function vt(e,t){const n=yt(e),i=ft.getLabelIdByHotspotId(e,t);return n.find(e=>e.id===i)}function Ot(e){return e===gt.a.CirclePlus?ht.a.Plus:e===gt.a.CircleMinus?ht.a.Minus:ht.a.Default}function St(e,t){return ft.getHotspotIdByLabel(e,t)}function xt(e,t){return Object.assign(Object.assign({},t),{id:St(e,t.id)})}function Ct(e,t,n){const i=t.selectSnapshot(pe.a.getStoryChapters);return n.map(n=>function(e,t,n,i){const{id:a,chapterId:s,title:o,objectId:r}=i,c=n.findIndex(e=>s===e.id),l=ft.getHotspotIdByLabel(t,a,!0),p=function(e,t){return e.scene.markers.markers[t]}(e,a);return{id:l,title:o,objectId:r,position:p?wt(p.pos):null,direction:p?wt(p.dir):null,canvasPosition:p?(u=p.canvasPos,{x:u[0],y:u[1]}):null,chapterScope:c,type:i.pinType===ht.a.PlusMinus?gt.a.CirclePlus:gt.a.Circle,shown:i.shown,data:bt[i.id]};var u}(e,t,i,n))}function wt(e){return{x:e[0],y:e[1],z:e[2]}}function jt(e){return[e.x,e.y,e.z]}function kt(e,t,n){return e.dispatch(new ce.t(t,n)),!0}function Pt(e,t){if("number"==typeof t){const n=vt(e,t);return n?[n]:[]}return yt(e)}function _t(e,t){return[{eventName:D.a.HotspotsEntered,mapFn:e=>xt(t,e)},{eventName:D.a.HotspotsLeft,mapFn:e=>xt(t,e)},{eventName:D.a.HotspotsPicked,mapFn:e=>xt(t,e)},{eventName:D.a.HotspotsDisplayUpdated,mapFn:e=>xt(t,e)},{eventName:D.a.HotspotsPositionUpdated,mapFn:e=>function(e,t){const{id:n,canvasPos:i}=t,{x:a,y:s}=i;return{id:St(e,n),canvasPosition:{x:a,y:s,0:a,1:s},occluded:t.occluded}}(t,e)}]}function Mt(e,t,n){return[{procName:Y.a.HotspotsInfo,actionFn:n=>{const i="number"==typeof n?n:void 0;if(void 0!==i){const n=vt(t,i);return Ct(e,t,[n])[0]}{const n=Pt(t,i);return Ct(e,t,n)}}},{procName:Y.a.HotspotsTypes,mapFnIn:()=>Object.values(gt.a).map(e=>""+e),actionFn:e=>e},{procName:Y.a.HotspotsCreate,mapFnIn:e=>function(e,t,n){const{title:i,objectId:a,position:s,direction:o,chapterScope:r,type:c}=n,l=e.selectSnapshot(pe.a.getStoryChapters),p=e.selectSnapshot(pe.a.getSelectedChapter),u=e.selectSnapshot(pe.a.getSelectedChapterIndex),d="number"==typeof r?r:u,g=l[d]||p,h=!1!==n.shown,b=h&&!!i,m={title:i,type:c||gt.a.CircleLabel,objectId:a,pos:s?jt(s):null,dir:o?jt(o):null,shown:h,symbol:"",className:""},f=t.deserializeHotspots({},g,d,m);return f.title=i,f.expandTag=!0,f.flyTo=!1,f.flyToTarget=null,f.occludable=!0,f.pinGlow=!1,f.pinType=ht.a.PlusMinus,f.shown=h,f.hideTag=!b,f.hideWire=!0,f.theme=Ye.a.StudioNext,f.pinType=Ot(c),mt(f.id,n),f}(t,n,e),actionFn:e=>function(e,t){return t.objectId||t.pos?(e.dispatch(new ce.b(t)),t):null}(t,e),mapFnOut:e=>e?St(t,e.id):null},{procName:Y.a.HotspotsUpdate,mapFnIn:e=>function(e,t){const n=vt(e,t.id);return n?function(e,t){const{title:n,objectId:i,direction:a,position:s,shown:o,type:r}=e,c=Object.assign(Object.assign({},t),{title:n,objectId:i,shown:o,pos:s?jt(s):null,dir:a?jt(a):null,pinType:r?Ot(r):null});return mt(t.id,e),Object.assign(Object.assign({},t),Object(P.omitBy)(c,P.isNil))}(t,n):null}(t,e),actionFn:e=>e?function(e,t){return e.dispatch(new ce.m(t)),t}(t,e):null},{procName:Y.a.HotspotsDestroy,mapFnIn:e=>vt(t,e),actionFn:e=>e?function(e,t){return e.dispatch(new ce.i(t)),t}(t,e):null},{procName:Y.a.HotspotsShow,mapFnIn:e=>Pt(t,e),actionFn:e=>kt(t,e,!0)},{procName:Y.a.HotspotsHide,mapFnIn:e=>Pt(t,e),actionFn:e=>kt(t,e,!1)}]}var It=n("XoU3"),Tt=n("x1jL"),Ut=n("7b4e"),Lt=n("WRwD"),zt=n("qplK");function At(e){return e.selectSnapshot(re.a.getChapterLabels)}function Ft(e,t){return e.dispatch(new ce.l(t)),!0}function Dt(e,t){return At(e).find(e=>t===e.id)}function Et(e,t){return At(e).filter(e=>t.includes(e.id))}function Nt(e,t,n){return t&&t.objectId?(e.dispatch(n?new ce.b(t):new ce.m(t)),t):null}function Rt(e,t){const n=document.createElement("span");return n.innerHTML=e,Object(P.trim)(n.textContent).length<=t}function Vt(e,t,n){const i=e;return i.title=t.title&&Rt(t.title,100)?t.title:i.title,i.description=t.description&&Rt(t.description,300)?t.description:i.description,i.theme=t.theme||i.theme,i.pinType=t.pinType||i.pinType,i.sequentialType=t.sequentialType||i.sequentialType,i.offset=function(e,t){return t||[-(e.hideWire?20:32),0]}(i,t.labelOffset),i.pinGlow=void 0!==t.pinGlow?t.pinGlow:i.pinGlow,i.hideWire=void 0!==t.hideWire?t.hideWire:i.hideWire,i.hideTag=void 0!==t.hideTag?t.hideTag:i.hideTag,i.collapseDescription=void 0!==t.collapseDescription?t.collapseDescription:i.collapseDescription,i.occludable=void 0!==t.occludable?t.occludable:i.occludable,i.cameraPosition=t.flyToCamera||i.cameraPosition,i.flyTo=function(e,t){return!1!==t&&(t||e.flyTo)}(i,t.flyTo),i.states=function(e){if(!e.flyTo)return[];const t=[new Lt.a,new Lt.a];t[0].errands=[new Tt.a],t[1].errands=e.cameraPosition?[new zt.a(e.cameraPosition)]:[new It.a(e.objectId)]}(i),i}function Bt(e,t){if(t){const n=e.scene.markers.markers[t.id];return{labelId:t.id,objectId:t.objectId,title:t.title,description:t.description,theme:t.theme,pinType:t.pinType,labelOffset:t.offset,hideWire:t.hideWire,pinGlow:t.pinGlow,occludable:t.occludable,sequentialType:t.sequentialType,shown:t.shown,collapseDescription:t.collapseDescription,hideTag:t.hideTag,flyTo:!0===t.flyTo,flyToCamera:t.cameraPosition,position:n?[n.pos[0],n.pos[1],n.pos[2]]:t.pos,canvasPosition:n?[n.canvasPos[0],n.canvasPos[1]]:[-1,-1],occluded:!n||n.occluded}}return null}function Ht(e,t){return t.reduce((t,n)=>(t[n.id]=Bt(e,n),t),{})}var Qt=n("aqTE"),Gt=n("WwWM"),Wt=function(e){return e.Widget="widget",e.WidgetAPI="widgetapi",e}({}),qt=n("bjoO"),$t=n("0UUK"),Xt=n("3fyd"),Zt=n("FFWI"),Jt=n("Xk3F");function Kt(e){return e.selectSnapshot(Zt.b.getAllQuestions)}function Yt(e,t){return Kt(e).find(e=>e.id===t)}function en(e){return Yt(e,on(e))}function tn(e){return{enabled:e.selectSnapshot(Zt.b.getQuizEnabled),active:e.selectSnapshot(Zt.b.getQuizModeActive),questions:pn(Kt(e)),questionId:on(e),submissions:nn(e,sn(e))}}function nn(e,t){return t.map(t=>an(e,t))}function an(e,t){const n=en(e);return{questionId:t.questionId,answerIds:n.data.correctAnswer,correctAnswerIds:un(n),correct:Object(Jt.h)(n,t.answer)}}function sn(e){return e.selectSnapshot(Zt.b.getAllSubmissions)}function on(e){return e.selectSnapshot(Zt.b.getActiveQuestionId)}function rn(e){const t=en(e),n=function(e){return sn(e).find(t=>t.questionId===on(e))}(e);return{question:ln(t),submission:n?an(e,n):void 0}}function cn(e){return e.map(e=>function(e){const t=e.type;switch(t){case Ce.a.Markdown:const{markdown:n}=e;return{type:t,content:n};case Ce.a.Images:const{images:i}=e;return{type:t,content:i.map(e=>e.urls.default)};default:return{type:t,content:""}}}(e))}function ln(e){let t=[],n="";switch(e.type){case Xt.a.MultipleChoice:const i=e.data;t=i.options.map(e=>function(e){return{answerId:e.value,displayText:e.label}}(e)),n=i.correctAnswer;break;case Xt.a.SelectAnatomy:t=e.data.correctAnswer.map(e=>({answerId:e,displayText:e})),n="";break;case Xt.a.LabelAnatomy:t=e.data.options.map(e=>({answerId:e.value,displayText:e.label.title})),n=""}return{questionId:e.id,questionType:e.type,questionPrompt:cn(e.questionPrompt),answerExplanation:cn(e.explanation),answers:t,answerId:n}}function pn(e,t){const n=e.map(e=>ln(e));return void 0!==t?n.filter(e=>t.includes(e.questionId)):n}function un(e){const t=ln(e);switch(t.questionType){case Xt.a.LabelAnatomy:case Xt.a.SelectAnatomy:return t.answers.map(({answerId:e})=>e);case Xt.a.Instructions:return["-"];default:return[t.answerId]}}var dn=n("zp9f"),gn=n("tk/3"),hn=n("b36G"),bn=n("LRne"),mn=n("Qyje"),fn=n("aWUR");class yn{}class vn{}class On{}class Sn{}var xn=function(e){return e[e.User=0]="User",e[e.Developer=1]="Developer",e}({});let Cn=(()=>{class e{constructor(e){this.http=e}getWidgetSettings(e){return this.http.get("/ws/product/account/settings?product_acctid="+e)}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(gn.b))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var wn=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},jn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const kn={userType:xn.User,authenticating:!1,authenticated:!1,widgetUrlConfig:{id:"",type:""},widgetApiConfig:null,parentUrl:{full:"",domain:""},embedded:!1,engineVersion:"",engineAPIVersion:"",inputEnabled:!0,widgetSettings:void 0};let Pn=(()=>{let e=class{constructor(e){this.widgetConfigService=e}static getWidgetState(e){return e}static getUserType(e){return e.userType}static getWidgetAuthenticating(e){return e.authenticating}static getWidgetAuthenticated(e){return e.authenticated}static getInputEnabled(e){return e.inputEnabled}static getEmbedded(e){return e.embedded}static getBypassAnalytics(e){return e.widgetUrlConfig["bypass-analytics"]}static getParentURL(e){return e.parentUrl.full}static getWidgetUrlConfig(e){return e.widgetUrlConfig}static getWidgetApiUIConfig(e){return e.widgetApiConfig}static getWidgetSettings(e){return e.widgetSettings}setupWidget(e,{hostingURL:t,embedded:n,widgetConfig:i}){const a=t.match(/:\/\/(.[^/]+)/);e.patchState({userType:i.uaid?xn.User:xn.Developer,embedded:n,widgetUrlConfig:i,parentUrl:{full:t,domain:a&&a[1]?a[1]:t}})}getWidgetProductSettings(e,{productAccountId:t}){this.widgetConfigService.getWidgetSettings(t).subscribe(({settings:t})=>{e.dispatch(new Fe(t))})}setWidgetProductSettings(e,{widgetSettings:t}){e.patchState({widgetSettings:t})}resetWidget(e){e.setState(kn)}setInputEnabled(e,t){e.patchState({inputEnabled:t.enabled})}setWidgetApiConfig(e,t){e.patchState({widgetApiConfig:t.config})}ngxsOnInit(e){e.patchState({engineVersion:Human.VERSION,engineAPIVersion:Human.API_VERSION})}};return e.\u0275fac=function(t){return new(t||e)(i.Zb(Cn))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac}),wn([Object(_.a)(Te),jn("design:type",Function),jn("design:paramtypes",[Object,Te]),jn("design:returntype",void 0)],e.prototype,"setupWidget",null),wn([Object(_.a)(Ae),jn("design:type",Function),jn("design:paramtypes",[Object,Ae]),jn("design:returntype",void 0)],e.prototype,"getWidgetProductSettings",null),wn([Object(_.a)(Fe),jn("design:type",Function),jn("design:paramtypes",[Object,Fe]),jn("design:returntype",void 0)],e.prototype,"setWidgetProductSettings",null),wn([Object(_.a)(Ue),jn("design:type",Function),jn("design:paramtypes",[Object]),jn("design:returntype",void 0)],e.prototype,"resetWidget",null),wn([Object(_.a)(Le),jn("design:type",Function),jn("design:paramtypes",[Object,Le]),jn("design:returntype",void 0)],e.prototype,"setInputEnabled",null),wn([Object(_.a)(ze),jn("design:type",Function),jn("design:paramtypes",[Object,ze]),jn("design:returntype",void 0)],e.prototype,"setWidgetApiConfig",null),wn([Object(_.f)(),jn("design:type",Function),jn("design:paramtypes",[Sn]),jn("design:returntype",void 0)],e,"getWidgetState",null),wn([Object(_.f)(),jn("design:type",Function),jn("design:paramtypes",[Sn]),jn("design:returntype",void 0)],e,"getUserType",null),wn([Object(_.f)(),jn("design:type",Function),jn("design:paramtypes",[Sn]),jn("design:returntype",void 0)],e,"getWidgetAuthenticating",null),wn([Object(_.f)(),jn("design:type",Function),jn("design:paramtypes",[Sn]),jn("design:returntype",void 0)],e,"getWidgetAuthenticated",null),wn([Object(_.f)(),jn("design:type",Function),jn("design:paramtypes",[Sn]),jn("design:returntype",void 0)],e,"getInputEnabled",null),wn([Object(_.f)(),jn("design:type",Function),jn("design:paramtypes",[Sn]),jn("design:returntype",void 0)],e,"getEmbedded",null),wn([Object(_.f)(),jn("design:type",Function),jn("design:paramtypes",[Sn]),jn("design:returntype",void 0)],e,"getBypassAnalytics",null),wn([Object(_.f)(),jn("design:type",Function),jn("design:paramtypes",[Sn]),jn("design:returntype",void 0)],e,"getParentURL",null),wn([Object(_.f)(),jn("design:type",Function),jn("design:paramtypes",[Sn]),jn("design:returntype",void 0)],e,"getWidgetUrlConfig",null),wn([Object(_.f)(),jn("design:type",Function),jn("design:paramtypes",[Sn]),jn("design:returntype",void 0)],e,"getWidgetApiUIConfig",null),wn([Object(_.f)(),jn("design:type",Function),jn("design:paramtypes",[Sn]),jn("design:returntype",Array)],e,"getWidgetSettings",null),e=wn([Object(_.g)({name:"widget",defaults:kn})],e),e})();const _n={headers:new gn.d({"Content-Type":"application/json; charset=utf-8"})};let Mn=(()=>{class e{constructor(e,t,n){this.http=e,this.storageService=t,this.store=n}getAnalytic(e){return a.a.offline?(fetch("https://human.biodigital.com/ws/user/analytics?analytic_id="+e,{method:"GET",mode:"no-cors"}),Object(bn.a)({success:!0})):this.http.get("/ws/user/analytics?analytic_id="+e).pipe(Object(S.a)(()=>({success:!0})),Object(Ne.a)(e=>Object(bn.a)(this.parseError(e))))}sendAnalytic(e){if(a.a.offline){const t=e instanceof yn?"https://human.biodigital.com/ws/user/analytics":"https://human.biodigital.com/ws/developer/apps/access/key",n=Object(mn.stringify)(e);if(navigator.onLine)this.sendOfflineAnalytic(t,n),this.sendSavedOfflineMessages(t);else{const e=(new Date).toISOString().substring(0,19);this.storageService.setDatabaseAnalyticItem("offline_event=1&event_timestamp="+e+"&"+n)}return Object(bn.a)({success:!0})}return this.http.post(e instanceof yn?"/ws/user/analytics":"/ws/developer/apps/access/key",e,_n).pipe(Object(S.a)(()=>({success:!0})),Object(Ne.a)(e=>Object(bn.a)(this.parseError(e))))}sendOfflineAnalytic(e,t){return n=this,void 0,a=function*(){fetch(e,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",mode:"no-cors",body:t}).catch(()=>{navigator.onLine?setTimeout(()=>{fetch(e,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",mode:"no-cors",body:t})},300):this.storageService.setDatabaseAnalyticItem(t)})},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{r(a.next(e))}catch(n){t(n)}}function o(e){try{r(a.throw(e))}catch(n){t(n)}}function r(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(s,o)}r((a=a.apply(n,[])).next())}));var n,i,a}sendSavedOfflineMessages(e){this.storageService.getDatabaseOfflineAnalytics(t=>{t.forEach(t=>{this.sendOfflineAnalytic(e,t)})})}buildUserAnalytic(e,t){const n=this.store.selectSnapshot(Pn.getWidgetState),{widgetUrlConfig:i,parentUrl:a}=n,s=i.uaid,o=a.domain,r=Object.assign(Object.assign({},this.buildAppActivityData()),{parent_analytic_identifier:s,referer_domain:o,[e+"_source"]:t}),c={analytic_platform:Wt.Widget,analytic_type:e,analytic_data:r};return Object(hn.plainToClass)(yn,c)}buildDeveloperAnalytic(e,t=Wt.Widget,n){const i=this.store.selectSnapshot(Pn.getWidgetState),{widgetUrlConfig:a,parentUrl:s,embedded:o}=i,r={platform:t,app_activity:e,app_productkey:a["app-productkey"],app_userid:a["app-userid"],app_apikey:a.dk,app_domain:s.full,app_activity_data:n,widget_is_fullscreen:!o};return Object(hn.plainToClass)(vn,r)}buildAppActivityData(){const e=this.store.selectSnapshot(Pn.getWidgetState),{engineVersion:t,engineAPIVersion:n,widgetUrlConfig:i}=e,a={engine_version:t,api_version:n};return Object.entries(i).filter(([e])=>"dk"!==e).forEach(([e,t])=>{a["url_param_"+e]=t}),Object(hn.plainToClass)(On,a)}parseError(e){if(a.a.offline)return{success:!0,message:"",errorCode:null};const t=e.error.error,n=e.status,i=t&&t.message?t.message:"";return{success:n>=500&&n<=504,message:i,errorCode:Object.values(fn.a).includes(i)?i:null}}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(gn.b),i.Zb(k.d),i.Zb(_.h))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var In=function(e){return e.Init="init",e.View="view",e.ChanceInteraction="interactionc",e.FirstInteraction="interactionf",e.Call="call",e}({});let Tn=(()=>{class e{constructor(e,t,n,i,a,s,o,r,c,l,p,u){this.store=e,this.actions=t,this.cameraService=n,this.engineService=i,this.animationService=a,this.paintService=s,this.labelsService=o,this.graphService=r,this.viewService=c,this.analyticsService=l,this.visibilityLayersService=p,this.quizService=u,this.webGLInfo=SceneJS.WEBGL_INFO}listen(e){this.initProcedures(),this.initEvents(),e&&this.logAPIUsage()}logAPIUsage(){setInterval(()=>{const e=Human.rpc.getLog(),t=Object(P.uniqBy)(e,e=>e.identifier);if(t.length>0){const e=JSON.stringify(t),n=this.analyticsService.buildDeveloperAnalytic(In.Call,Wt.WidgetAPI,e);this.analyticsService.sendAnalytic(n).subscribe({next:e=>{},error:e=>{throw new Error(e)}}),Human.rpc.resetLog()}},1e4)}initEvents(){var e,t;Me(Human,D.a.HumanProgress,void 0,e=>e),(e=this.store,[{eventName:D.a.HumanReady,aliasEvents:[D.a.HumanStarted]},{eventName:D.a.Error,aliasEvents:[D.a.HumanError],mapFn:e=>e},{eventName:D.a.HumanCanvasResized,aliasEvents:[D.a.CanvasResized],mapFn:()=>e.selectSnapshot($.a.getEnginePosition)}]).forEach(e=>{Me(Human,e.eventName,e.aliasEvents,e.mapFn)}),[{eventName:D.a.SceneLoaded,mapFn:e=>e},{eventName:D.a.ScenePicked,aliasEvents:[D.a.PickPicked],mapFn:we},{eventName:D.a.SceneObjectsSelected,mapFn:e=>e.selectedObjectsUpdate},{eventName:D.a.SceneObjectsShown,mapFn:e=>e.enabledObjectsUpdate},{eventName:D.a.SceneReady,aliasEvents:[D.a.Started]},{eventName:D.a.SceneRestored,mapFn:()=>!0},{eventName:D.a.SceneXrayEnabled,mapFn:()=>!0},{eventName:D.a.SceneXrayDisabled,mapFn:()=>!0},{eventName:D.a.NativeShare,mapFn:e=>e},{eventName:D.a.NativeDebugMessage,mapFn:e=>e}].forEach(e=>{Me(Human,e.eventName,e.aliasEvents,e.mapFn)}),(t=this.cameraService,[{eventName:D.a.CameraUpdated,aliasEvents:[D.a.CameraRested],mapFn:()=>ne(t)}]).forEach(e=>{Me(Human,e.eventName,e.aliasEvents,e.mapFn)}),[{eventName:D.a.TimelinePlaying,mapFn:e=>e},{eventName:D.a.TimelineCompleted,mapFn:e=>!0},{eventName:D.a.TimelineChapterTransition,aliasEvents:[D.a.TimelineChaptersActivated],mapFn:e=>({previousChapter:e.oldChapterIndex,currentChapter:e.newChapterIndex,time:e.time})}].forEach(e=>{Me(Human,e.eventName,e.aliasEvents,e.mapFn)}),[].forEach(e=>{Me(Human,e.eventName,e.aliasEvents,e.mapFn)}),[].forEach(e=>{Me(Human,e.eventName,e.aliasEvents,e.mapFn)}),function(e,t){return[...ut(e),..._t(0,t),{eventName:D.a.LabelsChapterInfo,mapFn:t=>Ht(e,t)},{eventName:D.a.LabelsCreated,mapFn:t=>Bt(e,t)},{eventName:D.a.LabelsUpdated,mapFn:t=>Bt(e,t)},{eventName:D.a.LabelsDestroyed,mapFn:e=>({labelId:e.id})},{eventName:D.a.LabelsEntered,mapFn:e=>e},{eventName:D.a.LabelsLeft,mapFn:e=>e},{eventName:D.a.LabelsPicked,mapFn:e=>e},{eventName:D.a.LabelsMoved,mapFn:e=>e},{eventName:D.a.LabelsEnabled,mapFn:()=>!0},{eventName:D.a.LabelsDisabled,mapFn:()=>!0},{eventName:D.a.LabelsShown,mapFn:e=>e},{eventName:D.a.LabelsHidden,mapFn:e=>e}]}(Human,this.store).forEach(e=>{Me(Human,e.eventName,e.aliasEvents,e.mapFn)}),function(e){return[{eventName:D.a.QuizEntered,mapFn:()=>tn(e)},{eventName:D.a.QuizExited,mapFn:()=>!0},{eventName:D.a.QuizQuestionLoaded,mapFn:e=>e},{eventName:D.a.QuizAnswerSelected,mapFn:t=>{const{questionId:n,answerId:i}=t;return{questionId:n,answerId:i,correctAnswerIds:un(Yt(e,t.questionId))}}},{eventName:D.a.QuizAnswerSubmitted,mapFn:t=>{const n=Yt(e,t.questionId),i=un(n);return{questionId:t.questionId,answerIds:t.answer,correctAnswerIds:i,correct:Object(Jt.h)(n,t.answer)}}},{eventName:D.a.QuizCompleted,mapFn:()=>{const t=Kt(e),n=sn(e);return Object(Jt.i)(t,n)}}]}(this.store).forEach(e=>{Me(Human,e.eventName,e.aliasEvents,e.mapFn)})}initProcedures(){var e,t,n;(e=Human,t=this.webGLInfo,n=this.store,[{procName:Y.a.HumanInfo,actionFn:()=>({version:e.VERSION,webglInfo:t,apiFunctions:e.rpc.getProcedures().sort(),apiEvents:e.rpc.getEvents().sort()})},{procName:Y.a.HumanCanvasInfo,actionFn:()=>n.selectSnapshot($.a.getEnginePosition)}]).forEach(e=>{K(Human,e)}),function(e,t,n,i,a,s,o,r,c){return[{procName:Y.a.SceneMetaData,actionFn:()=>{const e=t.selectSnapshot(oe.a.getStory),n=t.selectSnapshot(pe.a.getStoryChapters);return{title:e.displayName,description:e.description,chapters:n.map(e=>({id:e.id,title:e.info.displayName,description:e.info.description,isAnimated:o.isChapterAnimated(e),loops:o.isChapterLooped(e),duration:o.getChapterLocalTimerange(e.id),media:me.convertMediaFormat(e.media),images:e.contentBlocks?_e(e.contentBlocks):[],thumbnail:e.thumbnails?e.thumbnails.default:""}))}}},{procName:Y.a.focusObject,actionFn:e=>(function(e,t,n){e.select&&e.xray?Pe(t,n):ye(t,n),e.select&&t.dispatch(new ve.a.UpdateNodesChecked(!0,[e.objectId])),t.dispatch(new te.j(e.objectId,!0,1))}(e,t,n),!0),hideDefinition:!0},{procName:Y.a.dissectSetEnabled,actionFn:e=>(t.dispatch(new te.w(e.enable?ge.a.Hide:ge.a.Select)),!0),hideDefinition:!0},{procName:Y.a.sceneSetClickMode,actionFn:e=>(t.dispatch(new te.w("select"===e?ge.a.Select:"hide"===e?ge.a.Hide:"fade"===e?ge.a.Fade:ge.a.Select)),!0)},{procName:Y.a.sceneGetClickMode,actionFn:()=>t.selectSnapshot($.a.getActiveTool)},{procName:Y.a.pickSingleSetEnabled,actionFn:e=>{const n=(()=>{switch(e.enable){case void 0:return!t.selectSnapshot(he.a.getMultiPickModeEnabled);case!0:return!1;case!1:return!0}})();return t.dispatch(new de.a.SetMultiPickModeEnabled(n)),!0},hideDefinition:!0},{procName:Y.a.pickMultiSetEnabled,actionFn:e=>{const n=(()=>{switch(e.enable){case void 0:return!t.selectSnapshot(he.a.getMultiPickModeEnabled);default:return e.enable}})();return t.dispatch(new de.a.SetMultiPickModeEnabled(n)),!0},hideDefinition:!0},{procName:Y.a.getCanvasPos,actionFn:t=>{const i=n.getCanvas();return ie.getCanvasPos(e,t.worldPos,t.offset,i.width,i.height)},hideDefinition:!0},{procName:Y.a.SceneCapture,actionFn:()=>function(e,t,n){const i=n.captureCamera(),a=t.selectSnapshot(Oe.a.getNodes),s=Object.keys(a).map(t=>({objectId:t,selected:a[t].checked||je(e,a,t),hidden:!a[t].shown})),o=t.selectSnapshot(pe.a.getStoryChapters).map(e=>({chapterId:e.id,background:e.background||fe.a})),r=t.selectSnapshot(oe.a.getStoryId);return{camera:i,labels:t.selectSnapshot(re.a.getLabels),storyId:r,objects:s,background:o,activeChapterId:t.selectSnapshot(pe.a.getSelectedChapterId)}}(e,t,a)},{procName:Y.a.SceneRestore,actionFn:i=>{const a=me.isLegacyCaptureFormat(i),s=a?me.convertCaptureFormat(i):i;return function(e,t,n,i,a){return new j.a(s=>{i.getEvent(D.a.HumanStarted).pipe(Object(le.a)()).subscribe(()=>{(function(e,t,n,i=!1){return new Promise(a=>{n.selectSnapshot($.a.getViewGraph);const s=t.objects.filter(e=>!0===e.selected).map(e=>e.objectId),o=i?e.scene.getLeaves().filter(e=>void 0===t.objects.find(t=>t.objectId===e)):t.objects.filter(e=>!0===e.hidden).map(e=>e.objectId),r=t.background.map(e=>new ue.s(e.chapterId,e.background)),c=t.activeChapterId?[new ue.q(t.activeChapterId)]:[],l=void 0!==t.camera.zoom?[new ee.t(t.camera.zoom)]:[];setTimeout(()=>{n.dispatch([new ee.l(t.camera.lookAt,!1),new ce.q(t.labels),new ve.a.UpdateNodesShown(!1,o),new ve.a.UpdateNodesChecked(!0,s),...l,...c,...r]),a(void 0)})})})(e,t,n,a).then(()=>{i.fireEvent(D.a.SceneRestored,void 0),s.next(!0),s.complete()})}),ke(n,t.storyId)})}(e,s,t,n,a)}},{procName:Y.a.SceneEnableXrayMode,actionFn:()=>Pe(t,n)},{procName:Y.a.SceneDisableXrayMode,actionFn:()=>ye(t,n)},{procName:Y.a.SceneLoad,actionFn:e=>(ke(t,e),t.dispatch(new xe),!0)},{procName:Y.a.SceneSetBaseDirectory,actionFn:t=>(e.events.fire("scene.setBaseDirectory",t),!0)},{procName:Y.a.NativeSetSdkOffline,actionFn:t=>(e.events.fire("native.setSdkOffline",t),!0)},{procName:Y.a.SceneReset,actionFn:()=>(r.resetChapter(),!0)},{procName:Y.a.SceneInfo,actionFn:n=>{const i=n&&n.objectId?[n.objectId]:Object.keys(e.scene.objects),a=t.selectSnapshot(oe.a.getStory).displayName;return function(e,t,n,i){const a=i.selectSnapshot(Oe.a.getNodes);return{name:t,objects:n.reduce((t,n)=>(t[n]=(t=>{const n=e.scene.objects[t],i=n.isLeaf()?a[t].checked||je(e,a,t):void 0;return{objectId:n.objectId,name:n.displayName,description:n.description||"",shown:n.shown,selected:i,children:n.objects.map(e=>e.objectId),parent:n.parent?n.parent.objectId:null}})(n),t),{})}}(e,a,i,t)}},{procName:Y.a.ScenePick,actionFn:e=>we(n.pickScene({x:e.x,y:e.y,rayPick:!0}))},{procName:Y.a.SceneSelectObjects,actionFn:e=>{const n=!0===e.replace,i=e;return delete i.replace,n&&t.dispatch(new ve.a.UpdateNodesChecked(!1)),t.dispatch(new ve.a.UpdateNodesChecked(!1,[],i)),!0}},{procName:Y.a.SceneShowObjects,actionFn:n=>{delete n.replace;const i=(t,a)=>{const s=e.scene.objects[t].objects;let o={[t]:a};for(const e of s)void 0!==n[e.objectId]||(o[e.objectId]=a,o=Object.assign(Object.assign({},o),i(e.objectId,a)));return o},a=Object.entries(n).reduce((e,[t,n])=>Object.assign(Object.assign({},e),i(t,n)),{});return t.dispatch(new ve.a.UpdateNodesShown(!1,[],a)),!0}},{procName:Y.a.IsolateObject,actionFn:e=>{const n="string"==typeof e?[e]:e,i=t.selectSnapshot($.a.getViewGraph),a=s.getInverseSelection(i,n),o=s.getNodes(i,a);return t.dispatch(new ve.a.UpdateNodesShown(!1,o.map(e=>e.id))),!0}},{procName:Y.a.SceneTransformObject,actionFn:e=>(n.transformObject(e.objectId,e),!0)},{procName:Y.a.SceneColorObject,actionFn:e=>{const{objectId:n,tintColor:i,saturation:a,contrast:s,brightness:o,opacity:r}=e;return t.dispatch(new ve.a.UpdateNodesPaint(Z.a.fromEngine({tintColor:i,saturation:a,contrast:s,brightness:o,opacity:r}),[n])),!0}},{procName:Y.a.SceneGetColor,actionFn:e=>{const n=t.selectSnapshot(Oe.a.getNodePaint)(e.objectId);return Z.a.toEngine(n)}},{procName:Y.a.SceneUncolorObject,actionFn:e=>(t.dispatch(new ve.a.UpdateNodesPaint(Se.c,[e.objectId])),!0)},{procName:Y.a.SceneDisableHighlight,actionFn:()=>(i.disableHighlight(),!0)},{procName:Y.a.SceneEnableHighlight,actionFn:()=>(i.enableHighlight(),!0)},{procName:Y.a.SceneSetHighlightColor,actionFn:e=>(i.setHighlightColor(e),!0)},{procName:Y.a.SceneSetLayersSliderPosition,actionFn:e=>{const t=Math.min(1,Math.max(e.position,0)),n=c.fractionToIndex(t),i=c.fractionToPosition(t,n);return e.record?c.recordLayerIndexPosition(n,i):c.synchronizeScene(n,i,!1),!0}},{procName:Y.a.SceneGetLayers,actionFn:()=>t.selectSnapshot(pe.a.getAllChaptersCurrentLayers)}]}(Human,this.store,this.engineService,this.paintService,this.cameraService,this.graphService,this.animationService,this.viewService,this.visibilityLayersService).forEach(e=>{K(Human,e)}),function(e,t){return[{procName:Y.a.CameraInfo,actionFn:()=>ne(t)},{procName:Y.a.CameraOrbit,actionFn:t=>(e.dispatch(new ee.i(void 0===t.pitch?0:t.pitch,void 0===t.yaw?0:t.yaw)),!0)},{procName:Y.a.CameraPan,actionFn:t=>(e.dispatch(new ee.e(void 0===t.x?0:t.x,void 0===t.y?0:t.y,void 0===t.z?0:t.z)),!0)},{procName:Y.a.CameraReset,actionFn:()=>e.dispatch(new ee.h)},{procName:Y.a.CameraSet,actionFn:n=>{const i=n.animate||!1;if(n.objectId)return e.dispatch(new te.j(n.objectId,i,n.animationDuration)),!0;const a=ne(t);return e.dispatch(new ee.l({eye:n.position||a.position,look:n.target||a.target,up:n.up||a.up},i)),!0}},{procName:Y.a.CameraZoom,actionFn:t=>(e.dispatch(new ee.t(t||0)),!0)},{procName:Y.a.setCameraMode,actionFn:t=>(e.dispatch(new ee.n("pan"===t?"pan":"rotate")),!0)},{procName:Y.a.CameraDisableChapterCamera,actionFn:()=>(e.dispatch(new ee.p(!1)),!0)},{procName:Y.a.CameraEnableChapterCamera,actionFn:()=>(e.dispatch(new ee.p(!0)),!0)}]}(this.store,this.cameraService).forEach(e=>{K(Human,e)}),function(e,t,n,i){return[{procName:Y.a.TimelineQuery,actionFn:()=>({chapters:e.selectSnapshot(pe.a.getStoryChapters).map(e=>{const{description:t,displayName:n}=e.info;return{description:t,displayName:n,annotations:e.labels.map(e=>({title:e.title,description:e.description}))}})}),hideDefinition:!0},{procName:Y.a.TimelineInfo,actionFn:()=>function(e,t){const n=t.getTimeFrame();return{time:t.getTime(),startTime:n.firstTime,endTime:n.lastTime,chapters:e.selectSnapshot(pe.a.getStoryChapters).map(e=>e.id),playing:t.isPlaying()}}(e,n)},{procName:Y.a.TimelinePlay,actionFn:i=>{const a=i.loop||!1;if(void 0===i.time&&void 0===i.chapterId){const t=e.selectSnapshot(pe.a.getSelectedChapterId);return n.play({numChapters:1,loop:a,queue:!1,startChapterId:t}),!0}const s=Math.max(0,i.time),o=n.getTimeFrame().lastTime,r=Math.min(s,o-.001);return new j.a(s=>{t.pipe(Object(_.k)(ue.q),Object(O.a)(1)).subscribe(()=>{n.play(Object.assign(Object.assign({},{numChapters:1,queue:!1,loop:a}),void 0!==i.time?{startTime:r}:{startChapterId:i.chapterId})),s.next(!0),s.complete()});const o=i.chapterId?i.chapterId:n.mapGlobalTimeToLocal(r,{tie:"later"}).branch.id;e.dispatch(new ue.q(o))})}},{procName:Y.a.TimelinePause,actionFn:()=>(n.pause(),!0)},{procName:Y.a.TimelineSet,actionFn:i=>{if(void 0===i.time&&void 0===i.chapterId)return!0;if(void 0!==i.chapterId)return e.dispatch(new ue.q(i.chapterId)),!0;const a=Math.max(0,i.time),s=n.getTimeFrame().lastTime,o=Math.min(a,s);return new j.a(i=>{t.pipe(Object(_.k)(ue.q),Object(O.a)(1)).subscribe(()=>{n.scrub({time:o,which:0===o?"second":"first"}),i.next(!0),i.complete()});const a=n.mapGlobalTimeToLocal(o,0===o?{tie:"later"}:{});e.dispatch(new ue.q(a.branch.id))})}},{procName:Y.a.TimelineNext,actionFn:()=>(i.nextChapter("API"),!0)},{procName:Y.a.TimelinePrev,actionFn:()=>(i.previousChapter("API"),!0)}]}(this.store,this.actions,this.animationService,this.viewService).forEach(e=>{K(Human,e)}),function(e){return[{procName:Y.a.InputEnable,actionFn:()=>(e.dispatch(new Le(!0)),!0)},{procName:Y.a.InputDisable,actionFn:()=>(e.dispatch(new Le(!1)),!0)}]}(this.store).forEach(e=>{K(Human,e)}),function(e,t,n,i,s){const o=new Xe.a(!1);return n.pipe(Object(_.k)(ue.H)).subscribe(()=>{o.next(!0)}),[{procName:Y.a.UIGetBackground,actionFn:()=>function(e){const{colors:t,gradientType:n,colorStops:i}=e;return{colors:[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]]],gradientType:n,colorStops:i}}(t.selectSnapshot(pe.a.getSelectedChapterBackground))},{procName:Y.a.UISetBackground,mapFnIn:e=>{const{colors:t,colorStops:n,gradientType:i}=e;return{colors:t?Je(t):t,gradientType:i,colorStops:n}},actionFn:e=>{if(e){const n=Ke(t,e);t.dispatch(new ue.I(n))}return!0}},{procName:Y.a.UIPresetBackground,mapFnIn:e=>{const{colors:t,colorStops:n,gradientType:i}=e;return{colors:t?Je(t):t,gradientType:i,colorStops:n}},actionFn:e=>{if(e){const n=Ke(t,e);a.a.platform===Ze.a.SDK&&o.next(!1),o.pipe(Object(v.a)(e=>!!e),Object(O.a)(1)).subscribe(()=>{t.dispatch(new ue.r(n))})}return!0}},{procName:Y.a.UIGetWorldPosition,actionFn:t=>{const{worldPos:n}=e.renderer.pick.pick(t.x,t.y,{rayPick:!0});if(n){const{0:e,1:t,2:i}=n;return{x:e,y:t,z:i}}return null}},{procName:Y.a.UISetOndemand,actionFn:e=>(t.dispatch([new de.a.ToggleWindow(Qe.a.OnDemand,e.enabled)]),!0)},{procName:Y.a.UISetLoadingExperience,actionFn:e=>(Object(P.isEmpty)(e)?t.dispatch(new de.a.CloseWindow(Qe.a.Interact)):t.dispatch([new de.a.SetInteractType(e),new de.a.OpenWindow(Qe.a.Interact)]),!0)},{procName:Y.a.UISetScrollCaptureMode,actionFn:e=>(t.dispatch(new te.N(e)),!0)},{procName:Y.a.UISetTutorial,actionFn:e=>(t.dispatch([new de.a.ToggleWindow(Qe.a.Tutorial,e.enabled),new de.a.StartTutorial(e.enabled)]),!0)},{procName:Y.a.UIGetDisplay,actionFn:()=>{const e=t.selectSnapshot(he.a.getUI);return{audio:e.audio.enable,fullscreen:e.fullscreen.enable,help:e.help.enable,nav:e.camera.enable,cameraMode:e.camera.enable,center:e.camera.enable,zoomIn:e.camera.enable,zoomOut:e.camera.enable,info:e.column.enable||e.drawer.enable,playPause:e.media.enable,scrubber:e.media.enable,"scrubber.chapters":e.media.enable,tools:e.tools.enable,"tools-display":e.tools.enable,tour:e.pagination.enable,"tour.chapters":e.pagination.enable,objectTree:e.search.enable,anatomyLabels:e.anatomyLabels.enable,share:!1,dissect:!1,xray:!1,annotations:!1,crossSection:!1,isolate:!1}}},{procName:Y.a.UISetDisplay,actionFn:e=>{const n=Object(He.c)(e);return t.dispatch(new ze(n)),e}},{procName:Y.a.UIResetDisplay,actionFn:()=>{const e=t.selectSnapshot(he.a.getInitialUI);t.dispatch(new de.a.SetUI(e))}},{procName:Y.a.UISetQuizLock,actionFn:e=>(n.pipe(Object(_.l)(se.b),Object(O.a)(1)).subscribe(()=>{t.dispatch(new qe.a.SetQuizLocked(e)),t.dispatch(new qe.a.SetEnableQuizRetake(e)),!0===e&&s.startQuiz()}),!0)},{procName:Y.a.UISnapshot,aliases:[Y.a.SceneSnapshot],mapFnIn:e=>{const{width:t,height:n}=i.getCanvas();return Object.assign({width:t,height:n,openInTab:!1,fileType:"jpeg",quality:.92},e)},actionFn:e=>{const{width:i,height:a,openInTab:s,fileType:o}=e,r=t.selectSnapshot(pe.a.getSelectedChapterId),c={width:i,height:a},l="jpeg"===o?We.a.JPEG:We.a.PNG,p=t.selectSnapshot(pe.a.getSelectedChapterBackground);return t.dispatch(new $e.b(r,p,l,.92,c,"original",!0,!0)).pipe(Object(De.a)(()=>n.pipe(Object(_.l)($e.c),Object(O.a)(1))),Object(De.a)(e=>Ge.a.blobToBase64(e.blob)),Object(Ee.a)(e=>{s&&e&&function(e){const t=window.open("","_blank");if(t){const n=t.document.createElement("img");n.src=e,t.document.body.appendChild(n)}}(e)}),Object(Ne.a)(()=>Object(Re.of)(null)))}}]}(Human,this.store,this.actions,this.engineService,this.quizService).forEach(e=>{K(Human,e)}),function(e,t,n,i){return[...dt(e,t,n),...Mt(e,t,n),{procName:Y.a.LabelsInfo,actionFn:e=>e.length>0?Et(t,e):t.selectSnapshot(re.a.getChapterLabels),mapFnOut:t=>Ht(e,t)},{procName:Y.a.LabelsCreate,mapFnIn:e=>e.labelId&&Dt(t,e.labelId)?null:e.objectId&&e.position?function(e,t,n,i){const a=n.makeDefaultStudioLabel();a.id=i.labelId||Ut.a.idWithPrefix("label"),a.objectId=i.objectId,a.pos=i.position,a.renderableIndex=0,a.occludable=!0,a.flyTo=!0,a.description="",a.shown=!0;const s=t.selectSnapshot(pe.a.getSelectedChapter);return a.chapterId=s.id,Vt(a,i)}(0,t,n,e):(console.log("attempt to create a label with no objectId and position"),null),actionFn:e=>Nt(t,e,!0),mapFnOut:t=>Bt(e,t)},{procName:Y.a.LabelsUpdate,mapFnIn:e=>Dt(t,e.labelId)?function(e,t){return Vt(Dt(e,t.labelId),t,e.selectSnapshot(pe.a.getSelectedChapter))}(t,e):null,actionFn:e=>Nt(t,e,!1),mapFnOut:t=>Bt(e,t)},{procName:Y.a.LabelsCanvasUpdate,mapFnIn:e=>Dt(t,e.labelId)?function(e,t,n){const i=Dt(e,n.labelId),a=n.canvasPosition,s=t.pickScene({x:a[0],y:a[1],rayPick:!0});return s&&s.objectId?(i.objectId=s.objectId,i.pos=[s.worldPos[0],s.worldPos[1],s.worldPos[2]],i.offset=[i.hideWire?20:32,0],i.barycentric=[s.barycentric[0],s.barycentric[1],s.barycentric[2]],i.primitiveIndex=s.primitiveIndex,i.renderableIndex=s.renderableIndex||0,i):null}(t,i,e):null,actionFn:e=>Nt(t,e,!1),mapFnOut:t=>Bt(e,t)},{procName:Y.a.LabelsDestroy,mapFnIn:e=>Dt(t,e),actionFn:e=>e?(t.dispatch(new ce.i(e)),{labelId:e.id}):null},{procName:Y.a.LabelsShow,actionFn:e=>(e.length>0?t.dispatch(new ce.t(Et(t,e),!0)):Ft(t,!0),!0)},{procName:Y.a.LabelsHide,actionFn:e=>(e.length>0?t.dispatch(new ce.t(Et(t,e),!1)):Ft(t,!1),!0)},{procName:Y.a.LabelsSetEnabled,aliases:[Y.a.AnnotationsSetEnabled],actionFn:e=>{t.dispatch(new te.Y(e.enable))},hideDefinition:!0},{procName:Y.a.LabelsSetScale,actionFn:e=>{t.dispatch(new ce.o(e.scale))}}]}(Human,this.store,this.labelsService,this.engineService).forEach(e=>{K(Human,e)}),function(e,t){function n(t){return e.selectSnapshot(Zt.b.getQuizModeActive)?t():{error:"quiz mode is not active"}}return[{procName:Y.a.QuizInfo,actionFn:()=>e.selectSnapshot(Zt.b.hasQuiz)?tn(e):null},{procName:Y.a.QuizSubmit,actionFn:i=>n(()=>(t.submitQuestion(i.questionId,i.answerIds),tn(e)))},{procName:Y.a.QuizQuestion,actionFn:()=>n(()=>rn(e))},{procName:Y.a.QuizEnter,actionFn:()=>e.selectSnapshot(Zt.b.hasQuiz)?(t.startQuiz(),!0):{error:"quiz not found"}},{procName:Y.a.QuizExit,actionFn:()=>(t.exitQuiz(),!0)},{procName:Y.a.QuizSelectQuestion,actionFn:t=>n(()=>(e.dispatch(new qe.a.SetActiveQuestion(t)),tn(e)))},{procName:Y.a.QuizNextQuestion,actionFn:()=>n(()=>(t.nextQuestion(),rn(e)))},{procName:Y.a.QuizPreviousQuestion,actionFn:()=>n(()=>(e.dispatch(new qe.a.SetQuizLifecycle($t.a.Question)),e.dispatch(new qe.a.PreviousQuestion),rn(e)))},{procName:Y.a.QuizReset,actionFn:()=>(t.resetQuiz(),tn(e))},{procName:Y.a.QuizSet,actionFn:t=>{const{settings:n,startNumber:i,endNumber:a,locked:s}=t;if(!Object(P.isNil)(n)){const t=e.selectSnapshot(Zt.b.getQuizSettings);e.dispatch(new qe.a.SetQuizSettings(Object.assign(Object.assign({},t),n)))}if("number"==typeof i||"number"==typeof a){const t=e.selectSnapshot(pe.a.getStoryChapters),n=Object(Jt.b)(t),s=n.slice("number"==typeof i?i-1:0,"number"==typeof a?a:n.length);e.dispatch(new qe.a.SetQuestions(s))}return"boolean"==typeof s&&e.dispatch(new qe.a.SetQuizLocked(s)),e.dispatch(new qe.a.SetQuizQuestionsMode("number"==typeof i&&"number"==typeof a?"restricted":"all")),tn(e)}}]}(this.store,this.quizService).forEach(e=>{K(Human,e)})}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(_.h),i.Zb(_.b),i.Zb(W.a),i.Zb(q.a),i.Zb(Ie.a),i.Zb(J),i.Zb(Qt.a),i.Zb(X.a),i.Zb(Gt.a),i.Zb(Mn),i.Zb(qt.a),i.Zb(dn.a))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Un=n("/EfZ"),Ln=n("dNgK");let zn=(()=>{class e{constructor(e){this.viewService=e}initialize(){window.BDGlobalActions={toggleTutorial:e=>this.viewService.toggleTutorial(e)}}}return e.\u0275fac=function(t){return new(t||e)(i.Zb(Gt.a))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var An=n("R0Ic"),Fn=n("VRyK"),Dn=n("itXk"),En=n("/uUt"),Nn=n("Zy1z"),Rn=n("zp1y"),Vn=n("zP0r"),Bn=n("L6yT"),Hn=n("Lyqc"),Qn=n("Ryms"),Gn=n("j8e5"),Wn=n("eKhQ"),qn=n("q7pw"),$n=n("EFcw"),Xn=n("J5ja"),Zn=n("PV7u"),Jn=n("L2KA"),Kn=n("0njA");const Yn=["*"];let ei=(()=>{class e{constructor(){this.type="message",this.dismissClick=new i.p}ngOnInit(){}handleDismissClicked(){this.dismissClick.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-header-notification"]],inputs:{type:"type"},outputs:{dismissClick:"dismissClick"},ngContentSelectors:Yn,decls:8,vars:10,consts:[[1,"header-notification","flex","flex-row","justify-center"],[1,"text-14","flex","flex-row","justify-center","items-center","flex-auto"],[1,"mr-3"],["icon","exclamation-triangle"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Dismiss",3,"click"],["icon","times","size","lg"]],template:function(e,t){1&e&&(i.lc(),i.Vb(0,"div",0),i.Vb(1,"div",1),i.Vb(2,"div",2),i.Qb(3,"app-icon",3),i.Ub(),i.Vb(4,"div"),i.kc(5),i.Ub(),i.Ub(),i.Vb(6,"button",4),i.cc("click",(function(){return t.handleDismissClicked()})),i.Qb(7,"app-icon",5),i.Ub(),i.Ub()),2&e&&(i.Hb("header-notification--message","message"===t.type)("header-notification--error","error"===t.type)("header-notification--notification","notification"===t.type)("header-notification--warning","warning"===t.type),i.mc("@inFromTop",void 0),i.Db(6),i.Eb("aria-label","Dismiss"))},directives:[Kn.a,T.a],styles:[".header-notification[_ngcontent-%COMP%]{position:fixed;z-index:10000;width:100vw;color:#fff;padding:8px}.header-notification--message[_ngcontent-%COMP%]{background-color:#138032}.header-notification--error[_ngcontent-%COMP%]{background-color:#a81914}.header-notification--notification[_ngcontent-%COMP%]{background-color:#1c5ab9}.header-notification--warning[_ngcontent-%COMP%]{color:#1c2a3f;background-color:#ffb92e}"],data:{animation:[Object(An.n)("inFromTop",[Object(An.m)(":enter",[Object(An.l)({transform:"translateY(-100%)"}),Object(An.e)("250ms ease-out",Object(An.l)({transform:"*"}))])])]},changeDetection:0}),e})();var ti=n("lR5k");function ni(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",6),i.cc("click",(function(){return i.Cc(e),i.gc().handleActionClick()})),i.Pc(1),i.Ub()}if(2&e){const e=i.gc();i.Db(1),i.Rc(" ",e.buttonLabel," ")}}let ii=(()=>{class e{constructor(){this.dismissClick=new i.p,this.actionClick=new i.p}ngOnInit(){}handleActionClick(){this.actionClick.emit()}handleDismissClick(){this.dismissClick.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-footer-notification"]],inputs:{label:"label",buttonLabel:"buttonLabel",compact:"compact"},outputs:{dismissClick:"dismissClick",actionClick:"actionClick"},decls:7,vars:7,consts:[["data-test","footerNotification",1,"footer-notification","flex","flex-row","items-start","justify-center"],[1,"footer-notification__wrapper"],["data-test","footerNotificationTitle",1,"footer-notification__title","text-16","html",3,"innerHTML"],["app-button","","buttonType","primary","data-test","footerNotificationAction",3,"click",4,"ngIf"],["app-button","","buttonType","default","buttonTheme","light","type","button","title","Close","data-test","footerNotificationDismiss",1,"footer-notification__close",3,"click"],["icon","times","size","lg"],["app-button","","buttonType","primary","data-test","footerNotificationAction",3,"click"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Vb(1,"div",1),i.Qb(2,"div",2),i.hc(3,"markdown"),i.Nc(4,ni,2,1,"button",3),i.Ub(),i.Vb(5,"button",4),i.cc("click",(function(){return t.handleDismissClick()})),i.Qb(6,"app-icon",5),i.Ub(),i.Ub()),2&e&&(i.Hb("footer-notification--compact",t.compact),i.Db(2),i.mc("innerHTML",i.ic(3,5,t.label),i.Dc),i.Db(2),i.mc("ngIf",t.buttonLabel),i.Db(1),i.Eb("aria-label","Close"))},directives:[u.p,T.a,Kn.a],pipes:[ti.b],styles:[".footer-notification[_ngcontent-%COMP%]{padding:16px 40px;background-color:#fff;box-shadow:0 11px 15px rgba(0,0,0,.2),0 24px 38px rgba(0,0,0,.14),0 9px 46px rgba(0,0,0,.12)}.footer-notification__wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex:1 1 auto}.footer-notification__title[_ngcontent-%COMP%]{margin-right:40px}.footer-notification--compact[_ngcontent-%COMP%]   .footer-notification__wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;justify-content:flex-start}.footer-notification--compact[_ngcontent-%COMP%]   .footer-notification__title[_ngcontent-%COMP%]{margin-right:auto;margin-bottom:20px}"],changeDetection:0}),e})();var ai=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},si=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const oi=function(){return["/account/profile"]},ri=function(){return{section:"subscription",mode:"edit"}};function ci(e,t){if(1&e){const e=i.Wb();i.Vb(0,"app-header-notification",6),i.cc("dismissClick",(function(){i.Cc(e);const t=i.gc(3);return t.handleHeaderDismissClick(t.headerNotification)})),i.Vb(1,"div",7),i.Pc(2," Your Personal Pro subscription has expired. Please update your "),i.Vb(3,"span",8),i.Pc(4," payment information "),i.Ub(),i.Pc(5," to keep enjoying full access. "),i.Ub(),i.Ub()}2&e&&(i.Db(3),i.mc("routerLink",i.oc(2,oi))("queryParams",i.oc(3,ri)))}function li(e,t){if(1&e&&(i.Vb(0,"div",4),i.Nc(1,ci,6,4,"app-header-notification",5),i.Ub()),2&e){const e=i.gc(2);i.mc("ngSwitch",e.headerNotification.type),i.Db(1),i.mc("ngSwitchCase",e.gateTypes.ProAccountPastDue)}}function pi(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",9),i.Vb(1,"app-footer-notification",10),i.cc("actionClick",(function(){i.Cc(e);const t=i.gc(2);return t.handleActionClick(t.footerNotification.type)}))("dismissClick",(function(){i.Cc(e);const t=i.gc(2);return t.handleFooterDismissClick(t.footerNotification)})),i.hc(2,"async"),i.Ub(),i.Ub()}if(2&e){const e=i.gc(2);i.mc("@inFromBottom",void 0),i.Db(1),i.mc("label",e.footerNotification.data.title)("compact",i.ic(2,4,e.breakpoint$)<e.breakPoints.Medium)("buttonLabel",e.footerNotification.data.actionText)}}function ui(e,t){if(1&e&&(i.Vb(0,"div",1),i.Nc(1,li,2,2,"div",2),i.Nc(2,pi,3,6,"div",3),i.Ub()),2&e){const e=i.gc();i.Db(1),i.mc("ngIf",e.headerNotification),i.Db(1),i.mc("ngIf",e.footerNotification)}}let di=(()=>{class e{constructor(e,t,n,i,a,s,o,r,c){this.store=e,this.actions=t,this.router=n,this.activatedRoute=i,this.userAccessService=a,this.bookmarkActionService=s,this.storageService=o,this.dialogService=r,this.changeRef=c,this.breakPoints=Qn.a,this.displayTypes=qn.a,this.gateTypes=$n.a,this.ngUnsubscribe=new p.a,this.initUtilityStates()}ngOnInit(){this.initNotificationListeners(),this.initContentViews(),this.initContentSaves(),this.initFreeTrial(),this.initPastDue(),this.initContentViewsCheck()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initContentViewsCheck(){this.store.select(M.a.getUserProfile).pipe(Object(S.a)(e=>!Object(P.isNil)(e)),Object(En.a)(),Object(v.a)(e=>e),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new E.a)})}initUtilityStates(){this.pageNavigation$=Object(Fn.a)(this.activatedRoute.url,this.router.events.pipe(Object(v.a)(e=>e instanceof r.c))).pipe(Object(S.a)(()=>this.router.url))}initNotificationListeners(){const e=this.store.select(M.a.getLoggedIn).pipe(Object(Nn.a)(),Object(S.a)(([e,t])=>e===t?"unchanged":!e&&t?"loggingIn":"loggingOut"),Object(En.a)());this.actions.pipe(Object(_.l)(E.K),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{const{display:t}=e;switch(t){case qn.a.Notification:this.headerNotification=e;break;case qn.a.Footer:this.footerNotification=e}this.changeRef.markForCheck()}),this.actions.pipe(Object(_.l)(E.i),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{e.displays.forEach(e=>{switch(e){case qn.a.Notification:this.headerNotification=void 0;break;case qn.a.Footer:this.footerNotification=void 0}}),this.changeRef.markForCheck()}),this.pageNavigation$.pipe(Object(Rn.a)(e),Object(v.a)(([,e])=>"loggingIn"!==e),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.userAccessService.clearDialogs();const e=this.isEditPage(this.router.url);this.clearNotifications(e,!0)}),this.actions.pipe(Object(_.l)(E.H),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.clearNotifications(!0,!0),this.changeRef.markForCheck()})}initContentViews(){const e=this.pageNavigation$.pipe(Object(S.a)(()=>this.isContentViewPage(this.router.url)),Object(En.a)((e,t)=>e===t),Object(v.a)(e=>e));let t;this.pageNavigation$.pipe(Object(S.a)(()=>this.router.url),Object(Nn.a)(),Object(l.a)(this.ngUnsubscribe)).subscribe(([e,n])=>{t=e});const n=this.contentViews$.pipe(Object(S.a)(e=>e.limit_reached),Object(En.a)());e.pipe(Object(v.a)(()=>!this.store.selectSnapshot(M.a.isPremiumUser)),Object(De.b)(()=>n),Object(v.a)(e=>e),Object(De.b)(()=>this.userAccessService.openBookmarkViewLimit()),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{if(!e)return;const n=this.router.url,i=this.isContentViewPage(t),a=this.isLoginPage(t),s=this.isAccountPage(t);this.isAccountPage(n)||(Object(P.isNil)(t)||s||a||i?this.router.navigate(["/results/bookmarks"]):this.router.navigateByUrl(t))});const i=this.pageNavigation$.pipe(Object(Vn.a)(1),Object(De.b)(e=>this.isContentViewPage(e)?this.store.select(pe.a.getSelectedChapterReadyState).pipe(Object(v.a)(e=>!Object(P.isNil)(e)&&e.model)):Object(bn.a)(!0)));Object(Dn.b)([i,this.contentViews$]).pipe(Object(En.a)((e,t)=>e[1].inapp_view_count===t[1].inapp_view_count),Object(C.a)(2500),Object(l.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{const{inapp_view_count:n,inapp_view_limit:i}=t,a=n/i;a>.7&&a<1&&(this.userAccessService.openBookmarkViewWarning(n,i),setTimeout(()=>{this.userAccessService.clearUserNotifications(qn.a.Footer)},2e4))})}initContentSaves(){this.actions.pipe(Object(_.l)(Hn.l,Hn.B),Object(v.a)(()=>!this.store.selectSnapshot(M.a.isPremiumUser)),Object(De.b)(()=>this.bookmarkActionService.checkBookmarkLimit()),Object(C.a)(2500),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{const{inapp_content_limit:t,inapp_content_count:n}=e,i=n/t;i>.6&&i<1&&(this.userAccessService.openBookmarkSaveWarning(n,t),setTimeout(()=>{this.userAccessService.clearUserNotifications(qn.a.Footer)},2e4))})}initFreeTrial(){const e=this.store.select(Wn.a.isTrialExpired);Object(Dn.b)([e,this.pageNavigation$]).pipe(Object(v.a)(([e])=>e),Object(v.a)(()=>"true"!==this.storageService.getLocalItem(k.b.TeamTrialExpirationSeen)),Object(O.a)(1),Object(C.a)(1e3),Object(l.a)(this.ngUnsubscribe)).subscribe(([e])=>{e&&this.userAccessService.openTrialExpired()})}initPastDue(){this.store.select(M.a.getUserProfile).pipe(Object(v.a)(e=>!Object(P.isNil)(e)),Object(v.a)(()=>"true"!==this.storageService.getLocalItem(k.b.ProExpirationSeen)),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.store.selectSnapshot(M.a.getUserType)!==Bn.a.Team&&e.subscription&&"past due"===e.subscription.subscription_status&&this.userAccessService.openPastDue()})}handleActionClick(e){switch(e){case $n.a.BookmarkViewThresholdReached:case $n.a.BookmarkSaveThresholdReached:case $n.a.BookmarkViewLimitReached:case $n.a.BookmarkSaveLimitReached:this.dialogService.openUpgradeDialog()}this.clearNotifications(!1,!0)}handleHeaderDismissClick(e){switch(e.type){case $n.a.ProAccountPastDue:this.storageService.setLocalItem(k.b.ProExpirationSeen,!0)}this.clearNotifications(!0,!1),this.changeRef.markForCheck()}handleFooterDismissClick(e){this.clearNotifications(!1,!0),this.changeRef.markForCheck()}clearNotifications(e,t){const n=[];e&&(n.push(qn.a.Notification),this.headerNotification=void 0),t&&n.push(qn.a.Footer),this.userAccessService.clearUserNotifications(...n)}isViewPage(e){return e.startsWith("/view")}isEditPage(e){return e.startsWith("/edit")}isAccountPage(e){return e.startsWith("/account")}isLoginPage(e){return e.startsWith("/login")}isContentViewPage(e){const t=this.isEditPage(e);return this.isViewPage(e)||t}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(_.h),i.Pb(_.b),i.Pb(r.e),i.Pb(r.a),i.Pb(Xn.a),i.Pb(Zn.a),i.Pb(k.d),i.Pb(Jn.a),i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-user-access"]],decls:1,vars:1,consts:[["class","user-access",4,"ngIf"],[1,"user-access"],["class","user-access__header",3,"ngSwitch",4,"ngIf"],["class","user-access__footer",4,"ngIf"],[1,"user-access__header",3,"ngSwitch"],["type","warning",3,"dismissClick",4,"ngSwitchCase"],["type","warning",3,"dismissClick"],[1,"text-13","text-medium"],[1,"text-link","text-underline",3,"routerLink","queryParams"],[1,"user-access__footer"],[3,"label","compact","buttonLabel","actionClick","dismissClick"]],template:function(e,t){1&e&&i.Nc(0,ui,3,2,"div",0),2&e&&i.mc("ngIf",t.headerNotification||t.footerNotification)},directives:[u.p,u.r,u.s,ei,r.f,ii],pipes:[u.b],styles:[".user-access__footer[_ngcontent-%COMP%]{position:fixed;z-index:100;left:0;right:0;bottom:0}"],data:{animation:[Object(An.n)("inFromBottom",[Object(An.m)(":enter",[Object(An.l)({transform:"translateY(100%)"}),Object(An.e)("250ms ease-out",Object(An.l)({transform:"*"}))])])]},changeDetection:0}),ai([Object(_.e)(Gn.a.getBreakpoint),si("design:type",j.a)],e.prototype,"breakpoint$",void 0),ai([Object(_.e)(M.a.getContentViews),si("design:type",j.a)],e.prototype,"contentViews$",void 0),e})();function gi(e,t){if(1&e){const e=i.Wb();i.Vb(0,"app-header-notification",1),i.cc("dismissClick",(function(){return i.Cc(e),i.gc().handleHeaderDismissClick()})),i.Vb(1,"div",2),i.Pc(2,"You are offline. Check your data or wifi connection."),i.Ub(),i.Ub()}}let hi=(()=>{class e{constructor(e){this.changeRef=e,this.enabled=!a.a.native,this.offline=!1,this.seen=!1,this.ngUnsubscribe=new p.a}ngOnInit(){this.offline=!window.navigator.onLine;const e=Object(w.a)(window,"online"),t=Object(w.a)(window,"offline");Object(Fn.a)(e,t).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.offline=!window.navigator.onLine,this.offline&&(this.seen=!1),this.changeRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleHeaderDismissClick(){this.seen=!0}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-offline-message"]],decls:1,vars:1,consts:[["type","warning",3,"dismissClick",4,"ngIf"],["type","warning",3,"dismissClick"],[1,"text-13","text-medium"]],template:function(e,t){1&e&&i.Nc(0,gi,3,0,"app-header-notification",0),2&e&&i.mc("ngIf",t.enabled&&t.offline&&!t.seen)},directives:[u.p,ei],styles:[""],changeDetection:0}),e})();var bi=n("OsX3"),mi=n("3UWI"),fi=n("1a36"),yi=n("XAAL"),vi=n("YLgZ"),Oi=n("Dz/e"),Si=n("jDQD"),xi=n("yLV6"),Ci=n("rGz1"),wi=n("4FHB");class ji{constructor(e){this.ngUnsubsribe=new p.a,this.store=e,this.listenForParticleChanges(),this.listenForLookupChanges()}destroy(){this.ngUnsubsribe.next(),this.ngUnsubsribe.complete()}listenForLookupChanges(){this.store.select(Ci.a.getTweenParticleLookup).pipe(Object(l.a)(this.ngUnsubsribe)).subscribe(e=>{Object(P.isEmpty)(e)||wi.a.refreshEngineLookup(this.store.selectSnapshot(oe.a.getStoryId),e)})}listenForParticleChanges(){const e=this.store.select(Ci.a.getParticleSystems),t=this.store.select(Ci.a.getVisisbleParticleSystems);Object(Fn.a)(e,t).pipe(Object(l.a)(this.ngUnsubsribe)).subscribe(()=>{const e=this.store.selectSnapshot(pe.a.getSelectedChapterId),t=this.store.selectSnapshot(Ci.a.particleSystemsForChapter(e)),n=this.store.selectSnapshot(Ci.a.getVisibleParticleSystesmForChapter(e)),i=t.filter(e=>n.includes(e.id));this.setEngineParticles(i)})}setEngineParticles(e=[]){Human.particles.disableAll(),Human.particles.resetAll();const t=JSON.parse(JSON.stringify(e));Human.particles.parse(t,()=>{e.forEach(e=>{Human.particles.enable(e.id)}),null!=Human.timeline.activeRoot&&(Human.timeline.activeRoot._nowBranch.particleSystems=e.map(e=>e.id))})}}var ki=n("3zw+"),Pi=n("TWoc"),_i=n("fqos"),Mi=n("A+8E"),Ii=n("lWeg"),Ti=n("2he+"),Ui=n("PmOP"),Li=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},zi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Ai=["labelContainerEl"],Fi=["labelEl"],Di=["wire"],Ei=["tag"],Ni=["pin"],Ri=["title"];function Vi(e,t){1&e&&(i.Vb(0,"div",18),i.Qb(1,"app-icon",19),i.Ub())}const Bi=function(e){return{"label__body--collapse":e}};function Hi(e,t){if(1&e&&(i.Vb(0,"div",20),i.kc(1,3),i.Ub()),2&e){const e=i.gc();i.mc("ngClass",i.pc(1,Bi,e.isCollapsed||e.descriptionCollapsed))}}const Qi=[[["","label-header",""]],[["","label-actions",""]],[["","label-more",""]],[["","label-body",""]]],Gi=function(e,t,n,i,a,s,o,r,c){return{"label--selected":e,"label--glow":t,"label--annotation":n,"label--invert":i,"label--studio":a,"label--context":s,"label--screenshot-mode":o,"label--auto-fit":r,"label--opaque":c}},Wi=function(e){return{"label__wire--collapse":e}},qi=function(e,t,n,i){return{"label__tag--collapse":e,"label__tag--collapsible":t,"label__tag--floating":n,"label__tag--draggable":i}},$i=["[label-header]","[label-actions]","[label-more]","[label-body]"];let Xi=(()=>{class e{constructor(e,t,n,a,s,o,r){this.renderer=e,this.labelsService=t,this.engineService=n,this.cameraService=a,this.store=s,this.actions=o,this.changeDetection=r,this.labelPinType=ht.a,this.labelSequentialType=Mi.a,this.labelUpdated=new i.p,this.offsetUpdated=new i.p,this.pinClicked=new i.p,this.tagClicked=new i.p,this.displayUpdated=new i.p,this.positionUpdated=new i.p,this.hoverStart=new i.p,this.hoverEnd=new i.p,this.labelOffsetUpdated=new i.p,this.fit="fixed",this.opaque=!1,this.fixedScale=0,this.isCollapsed=!1,this.tagCollapsed=!1,this.theme="classic",this.pinDraggable=!0,this.tagDraggable=!0,this._selected=!1,this.enginePosition=null,this.isBackgroundDark=!1,this.pinDragging=!1,this.screenshotMode=!1,this.hammerManagers=[],this.displayUpdated$=new p.a,this.positionUpdated$=new p.a,this.ngUnsubscribe=new p.a}get label(){return this._label}set label(e){const t=Object(P.isEmpty)(e),n=Object(P.isEmpty)(this.label);t&&!n?(this._label=Object.assign({},e),this.destroyLabel()):t||(this._label=Object.assign({},e),this.initLabel(this.label))}set selected(e){e&&this.tagRef.nativeElement.focus(),this._selected=e}get selected(){return this._selected}ngOnInit(){this.initListeners()}ngAfterViewInit(){this.bindTagEvents(),this.bindPinEvents(),this.bindHoverEvents()}ngOnDestroy(){this.destroyLabel(),this.emitDisplayUpdated({id:this.label.id,inView:!1,shown:!1,objectShown:this.objectShown}),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}destroyLabel(){this.hammerManagers.forEach(e=>e.destroy),this.hammerManagers=[],this.deleteMarker(this.marker)}initListeners(){this.enginePosition$.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.enginePosition=e}),this.engineService.getEvent(D.a.SceneMarkersUpdated).pipe(Object(v.a)(()=>null!=this.label&&null!=this.enginePosition),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.setCanvasPos()}),this.displayUpdated$.pipe(Object(En.a)((e,t)=>Object(P.isEqual)(e,t)),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.displayUpdated.next(e)}),this.positionUpdated$.pipe(Object(En.a)((e,t)=>Object(P.isEqual)(e,t)),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.positionUpdated.next({positionUpdate:e,onCanvas:this.isOnCanvas()})}),this.background$.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{const t=e.colors.slice(0,3),n=e.colors.slice(4,7);this.isBackgroundDark=!Be.a.isLight(t,n),this.changeDetection.markForCheck()}),this.actions.pipe(Object(_.l)($e.b),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.screenshotMode=!0,this.changeDetection.detectChanges()}),this.actions.pipe(Object(_.k)($e.c),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.screenshotMode=!1,this.changeDetection.markForCheck()})}bindTagEvents(){const e=new xi(this.tagRef.nativeElement,{domEvents:!0});e.get("pan").set({direction:xi.DIRECTION_ALL,threshold:3}),e.on("pan",e=>{if(!this.tagDraggable)return;e.srcEvent.stopPropagation(),this.cachedTagOffset||(this.cachedTagOffset=this.label.offset);const t=[this.cachedTagOffset[0]+e.deltaX,this.cachedTagOffset[1]+e.deltaY];this.label.offset=t,e.isFinal&&(this.cachedTagOffset=null,this.offsetUpdated.next({labelId:this.label.id,offset:t}))}),e.on("tap",e=>{e.srcEvent.preventDefault(),e.srcEvent.stopPropagation(),this.tagClicked.next(e)}),this.hammerManagers.push(e)}bindPinEvents(){const e=new xi(this.pinRef.nativeElement);e.get("pan").set({direction:xi.DIRECTION_ALL,threshold:4}),e.on("pan",e=>{if(!this.pinDraggable)return;e.srcEvent.stopPropagation(),this.pinDragging=!0;let{layerX:t,layerY:n}=e.changedPointers[0];if(t-=16,n-=16,this.marker&&this.deleteMarker(this.marker),this.renderer.setStyle(this.labelContainerRef.nativeElement,"transform",`translate(${t}px, ${n}px)`),e.isFinal){this.pinDragging=!1;const e=Object.assign({},this.label),i=Human.renderer.pick.pick(t,n,{rayPick:!0}),a="string"==typeof i.objectId;a&&(e.dir=this.cameraService.getDirection(i),e.objectId=i.objectId,e.barycentric=[i.barycentric[0],i.barycentric[1],i.barycentric[2]],e.pos=[i.worldPos[0],i.worldPos[1],i.worldPos[2]],e.primitiveIndex=i.primitiveIndex),this.labelUpdated.next({label:e,shouldPreserve:a})}}),e.on("tap",e=>{e.srcEvent.preventDefault(),e.srcEvent.stopImmediatePropagation(),this.pinClicked.next(e)}),this.hammerManagers.push(e)}bindHoverEvents(){const e=this.labelRef.nativeElement;this.renderer.listen(e,"mouseenter",()=>{this.hoverStart.next({labelId:this.label.id})}),this.renderer.listen(e,"mouseleave",()=>{this.hoverEnd.next({labelId:this.label.id})})}initLabel(e){this.initMarker(e),this.ensureObjectId(e),this.initObjectSubscription(e)}initMarker(e){this.marker&&this.deleteMarker(this.marker),this.marker=Human.scene.markers.create({id:e.id,pos:e.pos,dir:e.dir,objectId:e.objectId,primitiveIndex:e.primitiveIndex,barycentric:e.barycentric,renderableIndex:e.renderableIndex||0})}checkLabelDisplay(){return{id:this.label.id,shown:this.label.shown,inView:this.isOnCanvas(),objectShown:!0}}ensureObjectId(e){if(!e.objectId){const[t,n]=this.marker.canvasPos,i=Human.renderer.pick.pick(t,n,{rayPick:!0});i.objectId&&(e.objectId=i.objectId,e.states.forEach(e=>{e.errands.forEach(e=>{e.type===_i.a.flyToObject&&(e.value=i.objectId)})}),this.labelUpdated.next({label:e,shouldPreserve:void 0}))}}initObjectSubscription(e){this.object$&&this.object$.unsubscribe(),e.objectId&&(this.object$=this.store.select($.a.getViewGraphNode).pipe(Object(S.a)(t=>t(e.objectId)),Object(v.a)(e=>!!e),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.objectShown=e.boolState.shown}))}deleteMarker(e){Human.scene.markers.delete(e.id),this.marker=null}setCanvasPos(){if(this.pinDragging||!this.marker)return;this.depth=-this.marker.viewPos[2];const e=this.isOccluded(),t=this.isOcclusionIgnored(),n=this.isOnCanvas(),i=e&&!t,a=void 0===this.objectShown?n&&!i:n&&this.objectShown&&!i;a!==this.shown&&(this.shown=a,this.setDisplay(a)),this.setElementPosition(),this.setElementScale(),this.setTagPosition(),this.setWirePosition();const{0:s,1:o}=this.marker.canvasPos;this.positionUpdated$.next({id:this.label.id,canvasPos:{x:s,y:o},occluded:i})}isOcclusionIgnored(){return this.selected||!this.label.occludable}isOccluded(){return this.depth<0||this.marker.occluded}isOnCanvas(){const{offsetWidth:e,offsetHeight:t}=this.labelsService.getLabelContainer().nativeElement,[n,i]=this.marker.canvasPos;return n>0&&i>0&&n<e&&i<t}setDisplay(e){this.renderer.setStyle(this.labelRef.nativeElement,"visibility",e?"visible":"hidden"),this.emitDisplayUpdated({id:this.label.id,inView:this.isOnCanvas(),shown:e,objectShown:this.objectShown})}setOpacity(e){let t=1;e?(this.marker.viewAngle>=80&&(t=Math.max(1-(this.marker.viewAngle-80)/20*1,0)),this.renderer.setStyle(this.labelContainerRef.nativeElement,"opacity",t)):this.renderer.setStyle(this.labelContainerRef.nativeElement,"opacity",1)}setElementPosition(){const e=this.marker.canvasPos;this.renderer.setStyle(this.labelContainerRef.nativeElement,"transform",`translate(${e[0]}px, ${e[1]}px)`)}setElementScale(){let e;if(this.fixedScale)e=this.fixedScale;else{const t=this.store.selectSnapshot($.a.getEnginePosition).width;e=t>1440?t/1440:1}const t=32*e-32;this.renderer.setStyle(this.labelRef.nativeElement,"transform-origin","top left"),this.renderer.setStyle(this.labelRef.nativeElement,"transform",`translate(-${t/2}px, -${t/2}px) scale(${e}, ${e})`)}setTagPosition(){const e=this.label.offset,t=this.tagRef.nativeElement.offsetWidth;switch(this.label.offset[0]>0?"left":"right"){case"left":this.renderer.setStyle(this.tagRef.nativeElement,"transform",`translate(${16+e[0]}px, ${e[1]}px)`);break;case"right":this.renderer.setStyle(this.tagRef.nativeElement,"transform",`translate(${16+e[0]-t}px, ${e[1]}px)`)}}setWirePosition(){let[e,t]=this.label.offset;switch(this.label.theme){case Ye.a.Annotation:case Ye.a.Classic:t+=this.titleRef.nativeElement.offsetHeight-16-2}const n=Math.sqrt(e*e+t*t);this.renderer.setStyle(this.wireRef.nativeElement,"width",n+"px"),this.renderer.setStyle(this.wireRef.nativeElement,"transform",`rotate(${Math.atan2(t,e)}rad)`)}emitDisplayUpdated(e){this.label.id!==Ii.a&&null!=e.inView&&null!=e.shown&&this.displayUpdated$.next(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.H),i.Pb(Qt.a),i.Pb(q.a),i.Pb(W.a),i.Pb(_.h),i.Pb(_.b),i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-generic-label"]],viewQuery:function(e,t){if(1&e&&(i.Jc(Ai,!0),i.Jc(Fi,!0),i.Jc(Di,!0),i.Jc(Ei,!0),i.Jc(Ni,!0),i.Jc(Ri,!0)),2&e){let e;i.xc(e=i.dc())&&(t.labelContainerRef=e.first),i.xc(e=i.dc())&&(t.labelRef=e.first),i.xc(e=i.dc())&&(t.wireRef=e.first),i.xc(e=i.dc())&&(t.tagRef=e.first),i.xc(e=i.dc())&&(t.pinRef=e.first),i.xc(e=i.dc())&&(t.titleRef=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&i.Hb("selected",t.selected)},inputs:{fit:"fit",opaque:"opaque",fixedScale:"fixedScale",sequence:"sequence",hasContent:"hasContent",label:"label",isCollapsed:"isCollapsed",descriptionCollapsed:"descriptionCollapsed",tagCollapsed:"tagCollapsed",selected:"selected",theme:"theme",pinDraggable:"pinDraggable",tagDraggable:"tagDraggable"},outputs:{labelUpdated:"labelUpdated",offsetUpdated:"offsetUpdated",pinClicked:"pinClicked",tagClicked:"tagClicked",displayUpdated:"displayUpdated",positionUpdated:"positionUpdated",hoverStart:"hoverStart",hoverEnd:"hoverEnd",labelOffsetUpdated:"labelOffsetUpdated"},ngContentSelectors:$i,decls:21,vars:26,consts:[["data-test","labelContainer",1,"label-container"],["labelContainerEl",""],["data-test","labelElement",1,"label",3,"ngClass"],["labelEl",""],[1,"label__pin"],["pin",""],[3,"label","labelTheme","selected","sequence"],[1,"label__glow"],[1,"label__wire",3,"ngClass"],["wire",""],["tabindex","0",1,"label__tag",3,"ngClass"],["tag",""],[1,"label__header"],["data-test","labelTitle",1,"label__title"],["title",""],["class","label__more",4,"ngIf"],["appEventFence","",1,"label__actions"],["class","label__body",3,"ngClass",4,"ngIf"],[1,"label__more"],["icon","caret-right"],[1,"label__body",3,"ngClass"]],template:function(e,t){1&e&&(i.lc(Qi),i.Vb(0,"div",0,1),i.Vb(2,"div",2,3),i.Vb(4,"div",4,5),i.Qb(6,"app-label-pin",6),i.Qb(7,"div",7),i.Ub(),i.Qb(8,"div",8,9),i.Vb(10,"div",10,11),i.Vb(12,"div",12),i.Vb(13,"div",13,14),i.kc(15),i.Ub(),i.Nc(16,Vi,2,0,"div",15),i.Vb(17,"div",16),i.kc(18,1),i.Ub(),i.Ub(),i.Nc(19,Hi,2,3,"div",17),i.kc(20,2),i.Ub(),i.Ub(),i.Ub()),2&e&&(i.Db(2),i.mc("ngClass",i.wc(9,Gi,[t.selected,t.label.pinGlow,"annotation"===t.label.theme||"classic"===t.label.theme,t.isBackgroundDark,"studioNext"===t.label.theme,"context"===t.label.theme,t.screenshotMode,"auto"===t.fit,t.opaque])),i.Db(4),i.mc("label",t.label)("labelTheme",t.label.theme)("selected",t.selected)("sequence",t.sequence),i.Db(2),i.mc("ngClass",i.pc(19,Wi,t.isCollapsed||t.tagCollapsed||t.label.hideWire)),i.Db(2),i.mc("ngClass",i.sc(21,qi,t.isCollapsed||t.tagCollapsed,t.label.collapseDescription,t.label.hideWire,t.tagDraggable)),i.Db(6),i.mc("ngIf",t.hasContent&&t.label.collapseDescription),i.Db(3),i.mc("ngIf",t.hasContent))},directives:[u.m,Ti.a,u.p,Ui.a,Kn.a],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}@-webkit-keyframes fadeIn{0%{display:none;opacity:0}1%{display:block;opacity:0}to{opacity:1;display:block}}@keyframes fadeIn{0%{display:none;opacity:0}1%{display:block;opacity:0}to{opacity:1;display:block}}@-webkit-keyframes fadeOut{0%{display:block;opacity:1}99%{opacity:0}to{opacity:0;display:none}}@keyframes fadeOut{0%{display:block;opacity:1}99%{opacity:0}to{opacity:0;display:none}}@-webkit-keyframes glow{0%{box-shadow:0 0 0 hsla(0,0%,100%,.5)}50%{box-shadow:0 0 8px 2px hsla(0,0%,100%,.5)}to{box-shadow:0 0 0 hsla(0,0%,100%,.5)}}@keyframes glow{0%{box-shadow:0 0 0 hsla(0,0%,100%,.5)}50%{box-shadow:0 0 8px 2px hsla(0,0%,100%,.5)}to{box-shadow:0 0 0 hsla(0,0%,100%,.5)}}@-webkit-keyframes classic-glow{0%{transform:scale(.5)}10%{transform:scale(.5)}50%{transform:scale(1)}90%{transform:scale(.5)}to{transform:scale(.5)}}@keyframes classic-glow{0%{transform:scale(.5)}10%{transform:scale(.5)}50%{transform:scale(1)}90%{transform:scale(.5)}to{transform:scale(.5)}}.label-container[_ngcontent-%COMP%], [_nghost-%COMP%]{display:block;position:absolute;z-index:10;width:160px;pointer-events:all;pointer-events:none}.label-container[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]:hover{z-index:12}.selected[_nghost-%COMP%]{z-index:11}.label-container[_ngcontent-%COMP%]{left:-16px;top:-16px}.label[_ngcontent-%COMP%]{display:block;overflow:visible;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;justify-content:center;align-items:center;height:32px}.label--screenshot-mode[_ngcontent-%COMP%]{text-shadow:none!important}.label--screenshot-mode[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]:after, .label--screenshot-mode[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]:before{box-shadow:none!important}.label--screenshot-mode[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{box-shadow:none!important;text-shadow:none!important}.label--screenshot-mode[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{display:none!important}.label--auto-fit[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;padding:0!important}.label--auto-fit[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{padding:0!important}.label__glow[_ngcontent-%COMP%]{display:none;position:absolute;width:32px;height:32px;border-radius:50%;z-index:0;top:0;left:0}.label--selected[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{transform:rotate(45deg)}.label__more[_ngcontent-%COMP%]{color:#374a68;display:none;flex:0 0 16px;height:16px;transition:transform .15s ease-in-out}.label__more[_ngcontent-%COMP%], .label__pin[_ngcontent-%COMP%]{align-items:center;justify-content:center}.label__pin[_ngcontent-%COMP%]{display:flex;width:32px;height:32px;border-radius:50%;position:absolute;pointer-events:all;transition:background-color .12s;z-index:10}.label__pin[_ngcontent-%COMP%]:hover{cursor:pointer}.label__pin--draggable[_ngcontent-%COMP%]:hover{cursor:-webkit-grab;cursor:grab}.label__pin--draggable[_ngcontent-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}.label__wire[_ngcontent-%COMP%]{position:absolute;top:16px;left:16px;height:0;transform-origin:0 100%;pointer-events:none;z-index:1}.label__wire--collapse[_ngcontent-%COMP%]{display:none}.label__tag[_ngcontent-%COMP%]{display:inline-block;left:16px;top:0;z-index:10;max-width:160px;pointer-events:all}.label__tag[_ngcontent-%COMP%]:hover{cursor:pointer}.label__tag--draggable[_ngcontent-%COMP%]:hover{cursor:-webkit-grab;cursor:grab}.label__tag--draggable[_ngcontent-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}.label__tag--collapse[_ngcontent-%COMP%]{display:none}.label__tag[_ngcontent-%COMP%]:focus{outline:2px solid #2d72dc!important;border-radius:4px}.label__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.label__title[_ngcontent-%COMP%]{line-height:1.4em;line-height:140%;align-self:center}.label__body[_ngcontent-%COMP%], .label__title[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;letter-spacing:0}.label__body[_ngcontent-%COMP%]{line-height:1.4em}.label__body--collapse[_ngcontent-%COMP%]{display:none}.label__icon[_ngcontent-%COMP%]{margin:0 -4px 0 4px}.label__actions[_ngcontent-%COMP%]{padding-left:4px}.label--studio.label--glow[_ngcontent-%COMP%]   .label__glow[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.3);display:block;-webkit-animation:classic-glow 4s infinite;animation:classic-glow 4s infinite}.label--studio.label--opaque[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.85)!important}.label--studio.label.label--selected[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-color:#2d72dc}.label--studio.label.label--selected[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{background-color:#fff;border-color:#2d72dc;box-shadow:0 0 0 1px rgba(45,114,220,.7)}.label--studio.label.label--selected[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{font-weight:600}.label--studio.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-top:1px solid rgba(16,24,35,.5)}.label--studio.label[_ngcontent-%COMP%]   .label__wire--collapse[_ngcontent-%COMP%]{display:none}.label--studio.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.55);border:1px solid rgba(16,24,35,.5);box-shadow:0 0 24px rgba(16,24,35,.1);padding:4px 8px;border-radius:4px}.label--studio.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]:hover{background:hsla(0,0%,100%,.8)}.label--studio.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{color:#101823;flex:1 1 auto}.label--studio.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{color:#374a68;overflow-x:hidden;padding-top:4px}.label--studio.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.label--studio.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic}.label--studio.label[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{display:flex}.label--studio.label.label--invert[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.5)}.label--annotation.label--glow[_ngcontent-%COMP%]   .label__glow[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.25);display:block;-webkit-animation:classic-glow 4s infinite;animation:classic-glow 4s infinite;top:-1px;left:-1px}.label--annotation.label--none[_ngcontent-%COMP%]{display:none}.label--annotation.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-top:1px solid #666}.label--annotation.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{min-width:10px;color:#eee}.label--annotation.label[_ngcontent-%COMP%]   .label__tag--collapsible[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{display:flex;color:#000}.label--annotation.label[_ngcontent-%COMP%]   .label__tag--floating[_ngcontent-%COMP%]   .label__header[_ngcontent-%COMP%]{border-bottom:none}.label--annotation.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]:focus{outline-offset:4px}.label--annotation.label[_ngcontent-%COMP%]   .label__header[_ngcontent-%COMP%]{border-bottom:1px solid #666}.label--annotation.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{font-weight:600;min-height:18px;width:100%;padding-bottom:4px;margin-bottom:-2px;color:#000}.label--annotation.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{padding-top:4px;color:#333}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-color:#eee}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__tag--collapsible[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{display:flex;color:#fff}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{color:#fff}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__header[_ngcontent-%COMP%]{border-color:#eee}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{color:#eee}.label--context.label[_ngcontent-%COMP%]{pointer-events:none}.label--context.label--glow[_ngcontent-%COMP%]   .label__glow[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.3);display:block;-webkit-animation:classic-glow 4s infinite;animation:classic-glow 4s infinite}.label--context.label[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%], .label--context.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{display:none}.label--context.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.7);border:1px solid rgba(16,24,35,.5);box-shadow:0 0 24px rgba(16,24,35,.1);padding:4px 8px;border-radius:4px}.label--context.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]:hover{background:hsla(0,0%,100%,.8);cursor:-webkit-grab;cursor:grab}.label--context.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{font-weight:600;color:#101823}.label--context.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{margin-top:8px;border-top:1px solid #eaeff5;color:#101823;overflow-x:hidden;padding-top:8px}.label--context.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.label--context.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic}"],changeDetection:0}),Li([Object(_.e)($.a.getEnginePosition),zi("design:type",j.a)],e.prototype,"enginePosition$",void 0),Li([Object(_.e)(pe.a.getSelectedChapterBackground),zi("design:type",j.a)],e.prototype,"background$",void 0),e})();var Zi=n("51ZA"),Ji=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function Ki(e,t){if(1&e&&i.Qb(0,"app-node-actions",9),2&e){const e=i.gc(2);i.mc("node",e.node)}}function Yi(e,t){if(1&e&&(i.Vb(0,"div",7),i.kc(1),i.Nc(2,Ki,1,1,"app-node-actions",8),i.Ub()),2&e){const e=i.gc();i.Db(2),i.mc("ngIf",e.enableActions)}}function ea(e,t){if(1&e&&(i.Vb(0,"i",10),i.Pc(1),i.Ub()),2&e){const e=i.gc();i.Db(1),i.Rc(" ",e.node.info.latinLabel," ")}}function ta(e,t){if(1&e){const e=i.Wb();i.Vb(0,"button",11),i.cc("click",(function(){return i.Cc(e),i.gc().handleReadMoreClick()})),i.Pc(1," Read More "),i.Ub()}2&e&&i.mc("@show",void 0)}const na=["*"];let ia=(()=>{class e{constructor(e,t,n,i,a){this.store=e,this.actions=t,this.engineService=n,this.viewService=i,this.changeDetectorRef=a,this.ngUnsubscribe=new p.a}set label(e){this._label=e,this.setLabelNode()}get label(){return this._label}ngOnInit(){this.initInfoListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setLabelNode(){const e=Object(P.get)(this.label,"objectId");if(e){const t=this.store.selectSnapshot($.a.getViewGraph);this.node=this.engineService.getNode(t,e)}else this.node=null;this.changeDetectorRef.markForCheck()}initInfoListeners(){this.actions.pipe(Object(_.k)(te.G),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.setLabelNode()})}handleReadMoreClick(){this.node&&this.viewService.toggleNodeInfo(!0)}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(_.h),i.Pb(_.b),i.Pb(q.a),i.Pb(Gt.a),i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-context-label"]],inputs:{label:"label",enableInfo:"enableInfo",enableActions:"enableActions"},ngContentSelectors:na,decls:8,vars:9,consts:[[1,"context-label",3,"label"],["label-header","",1,"context-label__header","html",3,"innerHTML"],["title",""],["class","context-label__actions","label-actions","",4,"ngIf"],["label-more",""],["class","context-label__latin",4,"ngIf"],["type","button","app-button","","buttonTheme","light","buttonSize","xsmall","class","context-label__more",3,"click",4,"ngIf"],["label-actions","",1,"context-label__actions"],["eventCategory","Context Node","theme","light",3,"node",4,"ngIf"],["eventCategory","Context Node","theme","light",3,"node"],[1,"context-label__latin"],["type","button","app-button","","buttonTheme","light","buttonSize","xsmall",1,"context-label__more",3,"click"]],template:function(e,t){1&e&&(i.lc(),i.Vb(0,"app-generic-label",0),i.Qb(1,"div",1,2),i.hc(3,"markdown"),i.Nc(4,Yi,3,1,"div",3),i.Tb(5,4),i.Nc(6,ea,2,1,"i",5),i.Nc(7,ta,2,1,"button",6),i.Sb(),i.Ub()),2&e&&(i.Hb("context-label--more",t.enableInfo&&t.node&&t.node.info),i.mc("label",t.label),i.Db(1),i.mc("innerHTML",i.ic(3,7,t.label.title),i.Dc),i.Db(3),i.mc("ngIf",t.node),i.Db(2),i.mc("ngIf",t.node&&(null==t.node.info?null:t.node.info.latinLabel)),i.Db(1),i.mc("ngIf",t.enableInfo&&t.node&&t.node.info))},directives:[Xi,u.p,Zi.a,T.a],pipes:[ti.b],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.context-label__latin[_ngcontent-%COMP%], .text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.context-label[_ngcontent-%COMP%]{z-index:12}.context-label__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.context-label__action[_ngcontent-%COMP%]{cursor:pointer}.context-label__action--selected[_ngcontent-%COMP%]{color:#2d72dc}.context-label__header[_ngcontent-%COMP%]{margin-left:4px}.context-label__latin[_ngcontent-%COMP%]{display:block;margin-left:4px}.context-label__latin[_ngcontent-%COMP%], .context-label__more[_ngcontent-%COMP%]{margin-bottom:4px;font-size:10px;letter-spacing:.25px;line-height:1.4em}.context-label__more[_ngcontent-%COMP%]{margin-left:-4px;margin-top:4px}.context-label--more[_ngcontent-%COMP%]   .context-label__actions[_ngcontent-%COMP%], .context-label--more[_ngcontent-%COMP%]   .context-label__header[_ngcontent-%COMP%]{margin-top:4px}"],data:{animation:[Object(An.n)("show",[Object(An.m)(":enter",[Object(An.j)([Object(An.l)({height:"0"}),Object(An.e)("125ms ease-in-out",Object(An.l)({height:"*"}))])])])]},changeDetection:0}),function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([Object(_.e)($.a.getQuerying),Ji("design:type",j.a)],e.prototype,"querying$",void 0),e})();var aa=n("4LIl"),sa=n("PlCH"),oa=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},ra=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function ca(e,t){if(1&e&&(i.Vb(0,"div",6),i.Qb(1,"app-content-blocks",7),i.Ub()),2&e){const e=i.gc();i.Db(1),i.mc("contentBlocks",e.label.contentBlocks)("layout","compact")}}function la(e,t){if(1&e&&(i.Qb(0,"div",8),i.hc(1,"markdown")),2&e){const e=i.gc();i.mc("innerHTML",i.ic(1,1,e.label.description),i.Dc)}}let pa=(()=>{class e{constructor(e,t,n,i){this.store=e,this.labelsService=t,this.engineService=n,this.changeDetectorRef=i,this.emitEvents=!0,this.collapsedMode=aa.a.None,this.collapsed=!1,this.pinDraggable=!1,this.tagDraggable=!1,this.descriptionCollapsed=!1,this.tagCollapsed=!1,this.ngUnsubscribe=new p.a}get isCollapsed(){if(this.collapsedMode===aa.a.Toggle){const e=this.store.selectSnapshot(re.a.getSelectedLabelId)===this.label.id;return this.collapsed&&!e}return this.collapsed}get hasContent(){return this.labelsService.hasContent(this.label)}ngOnInit(){this.selectedLabel$.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>this.handleLabelSelected(e)),this.store.select(re.a.getChapterLabels).pipe(Object(l.a)(this.ngUnsubscribe),Object(C.a)(100)).subscribe(()=>{this.sequence=this.store.selectSnapshot(re.a.getLabelSequence(this.label)),this.changeDetectorRef.markForCheck()}),this.descriptionCollapsed=this.label.collapseDescription,this.tagCollapsed=this.label.hideTag}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleLabelUpdated(e){const{label:t,shouldPreserve:n}=e;this.store.dispatch(new ce.m(t,n))}handleOffsetUpdated(e){const{labelId:t,offset:n}=e;this.store.dispatch(new ce.n(t,n))}handlePinClicked(e){this.selectLabel()}handleTagClicked(e){this.selectLabel()}selectLabel(){const e=this.store.selectSnapshot(re.a.getSelectedLabel);this.store.dispatch(new ce.k(e&&e.id===this.label.id?null:this.label)),this.emitEngineEvent(D.a.HotspotsPicked,{id:this.label.id}),this.emitEngineEvent(D.a.LabelsPicked,{labelId:this.label.id})}emitEngineEvent(e,t){this.emitEvents&&this.engineService.fireEvent(e,t)}handleDisplayUpdated(e){this.emitEngineEvent(D.a.HotspotsDisplayUpdated,e)}handlePositionUpdated(e){this.emitEngineEvent(D.a.HotspotsPositionUpdated,e.positionUpdate),this.emitEngineEvent(D.a.LabelsMoved,{labelId:e.positionUpdate.id,canvasPosition:[e.positionUpdate.canvasPos.x,e.positionUpdate.canvasPos.y],occluded:e.positionUpdate.occluded||!e.onCanvas})}handleHoverStart(e){this.emitEngineEvent(D.a.HotspotsEntered,{id:e.labelId}),this.emitEngineEvent(D.a.LabelsEntered,{labelId:e.labelId})}handleHoverEnd(e){this.emitEngineEvent(D.a.HotspotsLeft,{id:e.labelId}),this.emitEngineEvent(D.a.LabelsLeft,{labelId:e.labelId})}handleLabelSelected(e){const t=e&&e.id===this.label.id,n=Object(P.get)(e,"states[1].errands"),i=this.store.selectSnapshot(vi.a.getLockCamera);t&&n&&!i&&n.forEach(e=>{switch(e.type){case _i.a.flyToObject:this.store.dispatch(new te.j(e.value));break;case _i.a.flyToCamera:this.store.dispatch(new ee.l(e.value))}this.store.dispatch(new ee.q(!0))}),this.tagCollapsed=!(this.label.title||this.hasContent)||(this.label.expandTag&&this.label.hideTag?!t:this.label.hideTag),this.descriptionCollapsed=this.label.showDescription&&this.label.collapseDescription?!t:this.label.collapseDescription}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(_.h),i.Pb(Qt.a),i.Pb(q.a),i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-story-label"]],inputs:{label:"label",emitEvents:"emitEvents",collapsedMode:"collapsedMode",collapsed:"collapsed",pinDraggable:"pinDraggable",tagDraggable:"tagDraggable"},decls:9,vars:18,consts:[[3,"label","selected","fixedScale","sequence","isCollapsed","tagCollapsed","pinDraggable","tagDraggable","descriptionCollapsed","hasContent","labelUpdated","offsetUpdated","tagClicked","pinClicked","keydown.enter","displayUpdated","positionUpdated","hoverStart","hoverEnd"],["label-header","",1,"html",3,"innerHTML"],["title",""],["label-body","",1,"html"],["class","mv-1","appEventFence","",4,"ngIf"],["data-test","labelDescription",3,"innerHTML",4,"ngIf"],["appEventFence","",1,"mv-1"],[3,"contentBlocks","layout"],["data-test","labelDescription",3,"innerHTML"]],template:function(e,t){if(1&e&&(i.Vb(0,"app-generic-label",0),i.cc("labelUpdated",(function(e){return t.handleLabelUpdated(e)}))("offsetUpdated",(function(e){return t.handleOffsetUpdated(e)}))("tagClicked",(function(e){return t.handleTagClicked(e)}))("pinClicked",(function(e){return t.handlePinClicked(e)}))("keydown.enter",(function(e){return t.handleTagClicked(e)}))("displayUpdated",(function(e){return t.handleDisplayUpdated(e)}))("positionUpdated",(function(e){return t.handlePositionUpdated(e)}))("hoverStart",(function(e){return t.handleHoverStart(e)}))("hoverEnd",(function(e){return t.handleHoverEnd(e)})),i.hc(1,"async"),i.hc(2,"async"),i.Qb(3,"div",1,2),i.hc(5,"markdown"),i.Vb(6,"div",3),i.Nc(7,ca,2,2,"div",4),i.Nc(8,la,2,3,"div",5),i.Ub(),i.Ub()),2&e){let e=null;i.mc("label",t.label)("selected",(null==(e=i.ic(1,12,t.selectedLabel$))?null:e.id)===t.label.id)("fixedScale",i.ic(2,14,t.labelScale$))("sequence",t.sequence)("isCollapsed",t.isCollapsed)("tagCollapsed",t.tagCollapsed)("pinDraggable",t.pinDraggable)("descriptionCollapsed",t.descriptionCollapsed)("hasContent",t.hasContent),i.Db(3),i.mc("innerHTML",i.ic(5,16,t.label.title),i.Dc),i.Db(4),i.mc("ngIf",t.label.contentBlocks),i.Db(1),i.mc("ngIf",t.label.description)}},directives:[Xi,u.p,Ui.a,sa.a],pipes:[u.b,ti.b],styles:[""],changeDetection:0}),oa([Object(_.e)(re.a.getLabelScale),ra("design:type",j.a)],e.prototype,"labelScale$",void 0),oa([Object(_.e)(re.a.getSelectedLabel),ra("design:type",j.a)],e.prototype,"selectedLabel$",void 0),e})();var ua=n("3Pt+"),da=n("mWjH"),ga=n("EFPM");function ha(e,t){1&e&&i.Qb(0,"app-icon",8)}function ba(e,t){1&e&&i.Qb(0,"app-icon",9)}function ma(e,t){if(1&e&&(i.Vb(0,"div",10),i.Vb(1,"em",11),i.Pc(2),i.Ub(),i.Pc(3,". "),i.Ub()),2&e){const e=i.gc(2);i.Db(2),i.Qc(e.option.label.title)}}function fa(e,t){if(1&e&&(i.Vb(0,"div",10),i.Vb(1,"p",12),i.Pc(2," You selected "),i.Vb(3,"em",11),i.Pc(4),i.Ub(),i.Pc(5,". "),i.Ub(),i.Vb(6,"p"),i.Pc(7," This is the "),i.Vb(8,"em",11),i.Pc(9),i.Ub(),i.Pc(10,". "),i.Ub(),i.Ub()),2&e){const e=i.gc(2);let t=null;i.Db(4),i.Qc(null==(t=e.getSelectedLabel(e.options,e.control.value))?null:t.title.trim()),i.Db(5),i.Qc(e.option.label.title.trim())}}function ya(e,t){if(1&e&&(i.Vb(0,"div",4),i.Nc(1,ha,1,0,"app-icon",5),i.Nc(2,ba,1,0,"app-icon",6),i.Nc(3,ma,4,1,"div",7),i.Nc(4,fa,11,2,"div",7),i.Ub()),2&e){const e=i.gc();i.mc("ngSwitch",e.correct),i.Db(1),i.mc("ngSwitchCase",!0),i.Db(1),i.mc("ngSwitchCase",!1),i.Db(1),i.mc("ngSwitchCase",!0),i.Db(1),i.mc("ngSwitchCase",!1)}}let va=(()=>{class e extends da.b{constructor(){super(...arguments),this.sequence=0,this.labelUpdated=new i.p}ngOnInit(){}handleLabelUpdated(e){this.labelUpdated.next(e.label)}handleOffsetUpdated(e){this.labelUpdated.next(Object.assign(Object.assign({},this.option.label),{offset:e.offset}))}getSelectedLabel(e,t){const n=this.options.find(e=>e.value===t);return n?n.label:void 0}}return e.\u0275fac=function(t){return Oa(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-quiz-label"]],inputs:{sequence:"sequence",collapsed:"collapsed",options:"options",option:"option",correct:"correct",mode:"mode"},outputs:{labelUpdated:"labelUpdated"},features:[i.Cb([{provide:ua.p,useExisting:Object(i.W)(()=>e),multi:!0}]),i.Ab],decls:4,vars:14,consts:[[1,"label","theme-light",3,"label","fit","opaque","pinDraggable","tagDraggable","isCollapsed","descriptionCollapsed","hasContent","sequence","labelUpdated","offsetUpdated"],["label-body","",1,"label__body"],[3,"outline","hidden","options","formControl"],["class","label__summary flex items-start",3,"ngSwitch",4,"ngIf"],[1,"label__summary","flex","items-start",3,"ngSwitch"],["class","label__icon label__icon--correct","style","font-size: 16px","icon","check-circle",4,"ngSwitchCase"],["class","label__icon label__icon--incorrect","style","font-size: 16px","icon","times-circle",4,"ngSwitchCase"],["class","label__text pl-2",4,"ngSwitchCase"],["icon","check-circle",1,"label__icon","label__icon--correct",2,"font-size","16px"],["icon","times-circle",1,"label__icon","label__icon--incorrect",2,"font-size","16px"],[1,"label__text","pl-2"],[1,"text-semibold"],[1,"pb-2"]],template:function(e,t){1&e&&(i.Vb(0,"app-generic-label",0),i.cc("labelUpdated",(function(e){return t.handleLabelUpdated(e)}))("offsetUpdated",(function(e){return t.handleOffsetUpdated(e)})),i.Vb(1,"div",1),i.Qb(2,"app-quiz-label-anatomy-select",2),i.Nc(3,ya,5,5,"div",3),i.Ub(),i.Ub()),2&e&&(i.mc("label",t.option.label)("fit","summary"===t.mode?"fixed":"auto")("opaque",!0)("pinDraggable","edit"===t.mode)("tagDraggable","edit"===t.mode)("isCollapsed",t.collapsed)("descriptionCollapsed",!1)("hasContent",!0)("sequence",t.sequence),i.Db(2),i.mc("outline",!1)("hidden","summary"===t.mode)("options",t.options)("formControl",t.control),i.Db(1),i.mc("ngIf","summary"===t.mode))},directives:[Xi,ga.a,ua.r,ua.h,u.p,u.r,u.s,Kn.a],styles:[".label__body[_ngcontent-%COMP%]{color:#101823;min-width:142px;max-width:200px}.label__icon[_ngcontent-%COMP%]{position:relative;flex-basis:0 0 20px;justify-content:center}.label__icon--correct[_ngcontent-%COMP%]{color:#83e692}.label__icon--incorrect[_ngcontent-%COMP%]{color:#f44336}.label__text[_ngcontent-%COMP%]{flex-wrap:wrap}"],changeDetection:0}),e})();const Oa=i.Xb(va);var Sa=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},xa=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function Ca(e,t){if(1&e){const e=i.Wb();i.Tb(0),i.Vb(1,"app-quiz-label",3),i.cc("labelUpdated",(function(n){i.Cc(e);const a=t.index;return i.gc().handleLabelUpdated(n,a)})),i.hc(2,"async"),i.hc(3,"async"),i.hc(4,"async"),i.hc(5,"async"),i.hc(6,"async"),i.Ub(),i.Sb()}if(2&e){const e=t.$implicit,n=t.index,a=i.gc();i.Db(1),i.mc("mode",a.mode)("formControl",e)("option",i.ic(2,7,a.quizLabels$)[n])("options",i.ic(3,9,a.quizLabels$))("sequence",n+1)("correct",a.isCorrect(i.ic(4,11,a.quizLabels$)[n],i.ic(5,13,a.activeSubmitted$),n))("collapsed",i.ic(6,15,a.labelsCollapsed$))}}let wa=(()=>{class e{constructor(e,t,n,i){this.store=e,this.formBuilder=t,this.changeRef=n,this.router=i,this.ngUnsubscribe=new p.a,this.mode="edit",this.form=this.formBuilder.group({options:this.formBuilder.array([])}),this.optionsArray=this.form.get("options")}ngOnInit(){this.initFormListeners(),this.initQuizSubmissionListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initFormListeners(){this.quizLabels$.pipe(Object(En.a)((e,t)=>{const n=e.map(e=>e.value),i=t.map(e=>e.value);return Object(P.isEqual)(n,i)}),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.store.selectSnapshot(Zt.b.getQuizModeActive);this.buildFormOptions(e,t),this.changeRef.markForCheck()}),Object(Dn.b)([this.quizModeActive$,this.quizLabels$]).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(([e])=>{this.setFormEnabled(e),this.changeRef.markForCheck()})}initQuizSubmissionListeners(){this.activeSubmission$.pipe(Object(v.a)(e=>!Object(P.isNil)(e)&&!Object(P.isNil)(e.answer)&&Array.isArray(e.answer)),Object(En.a)((e,t)=>Object(P.isEqual)(e,t)),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.form.value.options,n=e.answer;Object(P.isEqual)(t,n)||(this.form.patchValue({options:n},{emitEvent:!1,onlySelf:!0}),this.changeRef.markForCheck())}),this.form.valueChanges.pipe(Object(En.a)((e,t)=>Object(P.isEqual)(e,t)),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.store.selectSnapshot(Zt.b.getActiveQuestionId),n=this.store.selectSnapshot(Zt.b.getActiveSubmitted),i=this.store.selectSnapshot(Zt.b.getActiveSubmission),a=Object(P.isNil)(i)?[]:i.answer,s=e.options;Object(P.isNil)(n)&&(Object(P.isEqual)(s,a)||this.store.dispatch(new qe.a.SetActiveSubmission({questionId:t,answer:s})),this.changeRef.markForCheck())}),Object(Dn.b)([this.quizModeActive$,this.activeSubmitted$]).subscribe(([e,t])=>{const n=this.router.url.includes("/edit");this.mode=n?"edit":e&&!Object(P.isNil)(t)?"summary":"view",this.changeRef.markForCheck()})}isCorrect(e,t,n){if(!Object(P.isNil)(t))return t.answer[n]===e.value}handleLabelUpdated(e,t){const n=this.store.selectSnapshot(Zt.b.getActiveQuestion);n.data.options[t].label=e,this.store.dispatch(new qe.a.SetQuestion(n))}buildFormOptions(e,t){this.optionsArray.clear(),e.forEach(e=>{this.optionsArray.push(this.formBuilder.control(t?"":e.value))})}setFormEnabled(e){e?this.optionsArray.enable():this.optionsArray.disable()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(_.h),i.Pb(ua.f),i.Pb(i.i),i.Pb(r.e))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-quiz-labels"]],decls:3,vars:2,consts:[["data-test","quizLabelsElement",3,"formGroup"],["formArrayName","options"],[4,"ngFor","ngForOf"],["data-test","appQuizLabel",3,"mode","formControl","option","options","sequence","correct","collapsed","labelUpdated"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Vb(1,"div",1),i.Nc(2,Ca,7,17,"ng-container",2),i.Ub(),i.Ub()),2&e&&(i.mc("formGroup",t.form),i.Db(2),i.mc("ngForOf",t.optionsArray.controls))},directives:[ua.s,ua.j,ua.e,u.o,va,ua.r,ua.h],pipes:[u.b],styles:[""],changeDetection:0}),Sa([Object(_.e)(re.a.getLabelsCollapsed),xa("design:type",j.a)],e.prototype,"labelsCollapsed$",void 0),Sa([Object(_.e)(Zt.b.getActiveQuestionLabels),xa("design:type",j.a)],e.prototype,"quizLabels$",void 0),Sa([Object(_.e)(Zt.b.getQuizModeActive),xa("design:type",j.a)],e.prototype,"quizModeActive$",void 0),Sa([Object(_.e)(Zt.b.getAllSubmissions),xa("design:type",j.a)],e.prototype,"allSubmissions$",void 0),Sa([Object(_.e)(Zt.b.getActiveSubmission),xa("design:type",j.a)],e.prototype,"activeSubmission$",void 0),Sa([Object(_.e)(Zt.b.getActiveSubmitted),xa("design:type",j.a)],e.prototype,"activeSubmitted$",void 0),e})();var ja=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},ka=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function Pa(e,t){if(1&e&&(i.Qb(0,"app-context-label",5),i.hc(1,"async"),i.hc(2,"async"),i.hc(3,"async"),i.hc(4,"async"),i.hc(5,"async")),2&e){const e=i.gc(3);let t=null,n=null;i.mc("label",i.ic(1,3,e.contextLabel$))("enableInfo",i.ic(2,5,e.enableContextLabelInfo$)&&(null==(t=i.ic(3,7,e.layout$))?null:t.nodeInfo.enable))("enableActions",i.ic(4,9,e.enableContextLabelActions$)&&(null==(n=i.ic(5,11,e.layout$))?null:n.contextActions.enable))}}function _a(e,t){if(1&e&&(i.Tb(0),i.Qb(1,"app-story-label",6),i.hc(2,"async"),i.hc(3,"async"),i.hc(4,"async"),i.hc(5,"async"),i.Sb()),2&e){const e=t.$implicit,n=i.gc(3);let a=null,s=null;i.Db(1),i.Hb("labels__label--hidden",!e.shown),i.mc("pinDraggable",null==(a=i.ic(2,7,n.draggable$))?null:a.pin)("tagDraggable",null==(s=i.ic(3,9,n.draggable$))?null:s.tag)("label",e)("collapsed",i.ic(4,11,n.labelsCollapsed$))("collapsedMode",i.ic(5,13,n.labelsCollapsedMode$))}}function Ma(e,t){if(1&e&&(i.Tb(0),i.Nc(1,Pa,6,13,"app-context-label",3),i.hc(2,"async"),i.hc(3,"async"),i.Nc(4,_a,6,15,"ng-container",4),i.hc(5,"async"),i.Sb()),2&e){const e=i.gc(2);i.Db(1),i.mc("ngIf",i.ic(2,3,e.enableContextLabel$)&&i.ic(3,5,e.contextLabel$)),i.Db(3),i.mc("ngForOf",i.ic(5,7,e.labels$))("ngForTrackBy",e.trackLabel)}}function Ia(e,t){1&e&&(i.Tb(0),i.Qb(1,"app-quiz-labels"),i.Sb())}function Ta(e,t){if(1&e&&(i.Vb(0,"div",1),i.Nc(1,Ma,6,9,"ng-container",2),i.Nc(2,Ia,2,0,"ng-container",2),i.Ub()),2&e){const e=i.gc();i.Db(1),i.mc("ngIf",e.showAnatomyLabels),i.Db(1),i.mc("ngIf",e.showQuizLabels)}}let Ua=(()=>{class e{constructor(e,t,n,i,a,s,o,r){this.store=e,this.action$=t,this.router=n,this.engineService=i,this.cameraService=a,this.changeDetector=s,this.labelsService=o,this.elRef=r,this.interactive=!1,this.showAnatomyLabels=!1,this.showQuizLabels=!1,this.ngUnsubscribe=new p.a}ngOnInit(){this.bindEngineEvents(),this.bindApplicationEvents(),this.labelsService.setLabelContainer(this.elRef)}ngOnDestroy(){this.labelsService.setLabelContainer(null),this.changeDetector.detach(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}bindApplicationEvents(){this.action$.pipe(Object(_.l)(te.d),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.handleClickNode(e)}),this.labels$.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.changeDetector.markForCheck()}),this.selectedLabel$.pipe(Object(v.a)(e=>null==e),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{const e=this.store.selectSnapshot(vi.a.getZoomed),t=this.store.selectSnapshot(vi.a.getLockCamera);e&&!t&&this.resetCamera()});const e=Object(Dn.b)([this.activeTool$,this.activeQuestion$]).pipe(Object(l.a)(this.ngUnsubscribe),Object(S.a)(([e,t])=>{const n=this.router.url.indexOf("/edit")>=0,i=Object(P.get)(t,"type")===Xt.a.LabelAnatomy;return n?e===ge.a.Quiz:i}));Object(Dn.b)([this.showLabels$,e,this.activeQuestion$]).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(([e,t,n])=>{const i=Object(P.get)(n,"showChapterLabels");this.showQuizLabels=t,this.showAnatomyLabels=!this.showQuizLabels&&e||i,this.changeDetector.markForCheck()}),this.store.select(pe.a.getSelectedChapterReadyState).pipe(Object(v.a)(e=>null!=e),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.interactive=e.model,this.changeDetector.markForCheck()})}bindEngineEvents(){this.action$.pipe(Object(_.l)(te.Y,ce.l),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.engineService.fireEvent(e.show?D.a.LabelsEnabled:D.a.LabelsDisabled,null)}),this.action$.pipe(Object(_.l)(ce.b),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.engineService.fireEvent(D.a.LabelsCreated,e.label)}),this.action$.pipe(Object(_.l)(ce.m),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.engineService.fireEvent(D.a.LabelsUpdated,e.label)}),this.action$.pipe(Object(_.l)(ce.t),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{e.labels.forEach(t=>{this.engineService.fireEvent(e.shown?D.a.LabelsShown:D.a.LabelsHidden,{labelId:t.id})})}),this.action$.pipe(Object(_.l)(ce.i),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.engineService.fireEvent(D.a.LabelsDestroyed,e.label)})}handleClickNode(e){const t=this.store.selectSnapshot($.a.getActiveTool);null!=e.node?t===ge.a.Label?this.addLabel(e.hit,e.node):setTimeout(()=>{this.toggleContextLabel(e.hit,e.node)}):(this.store.dispatch(new ce.k(null)),this.store.dispatch(new ce.h))}addLabel(e,t){const n=this.cameraService.getDirection(e),i=this.getLabelDefaults(e.objectId),a=i.hideWire?20:32;i.title=t.label,i.offset=[a,0],i.objectId=e.objectId,i.barycentric=[e.barycentric[0],e.barycentric[1],e.barycentric[2]],i.pos=[e.worldPos[0],e.worldPos[1],e.worldPos[2]],i.primitiveIndex=e.primitiveIndex,i.renderableIndex=e.renderableIndex||0,i.dir=n,i.chapterId=this.store.selectSnapshot(pe.a.getSelectedChapter).id,i.occludable=!0,i.shown=!0,this.store.dispatch(new ce.b(i)),this.store.dispatch(new ce.k(i))}toggleContextLabel(e,t){if(this.store.selectSnapshot(Oe.a.getCheckedNodeIds).some(e=>e===t.id)){const n=this.cameraService.getDirection(e),i=this.labelsService.makeDefaultStudioLabel();i.theme=Ye.a.Context,i.title=t.label,i.offset=[32,0],i.objectId=e.objectId,i.barycentric=[e.barycentric[0],e.barycentric[1],e.barycentric[2]],i.pos=[e.worldPos[0],e.worldPos[1],e.worldPos[2]],i.primitiveIndex=e.primitiveIndex,i.dir=n,i.occludable=!1,this.store.dispatch(new ce.a(i))}else this.store.dispatch(new ce.h)}getLabelDefaults(e){let t=this.store.selectSnapshot(re.a.getSelectedLabel);if(null==t){let e=this.store.selectSnapshot(re.a.getChapterLabels);e&&0!==e.length||(e=this.store.selectSnapshot(re.a.getLabels)),e.length&&(t=Object(P.cloneDeep)(e[e.length-1]))}if(null!=t){const n=this.labelsService.makeDefaultStudioLabel();switch(n.hideWire=t.hideWire,n.pinGlow=t.pinGlow,n.pinType=t.pinType,n.theme=t.theme,n.sequentialType=t.sequentialType,n.states[0].errands[0]=new Tt.a,Object(P.get)(t,"states[1].errands[0].type")){case _i.a.flyToObject:case _i.a.flyToCamera:n.states[1].errands[0]=new It.a(e)}return n}{const t=this.labelsService.makeDefaultStudioLabel();return t.states[0].errands[0]=new Tt.a,t.states[1].errands[0]=new It.a(e),t}}trackLabel(e,t){const{id:n,shown:i,theme:a}=t;return`${n}${i}${a}`}resetCamera(){const e=this.store.selectSnapshot(pe.a.getSelectedChapter);Object(P.get)(e,"camera.location")&&this.store.dispatch(new ee.l(e.camera.location))}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(_.h),i.Pb(_.b),i.Pb(r.e),i.Pb(q.a),i.Pb(W.a),i.Pb(i.i),i.Pb(Qt.a),i.Pb(i.m))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-labels"]],decls:1,vars:1,consts:[["class","labels","data-test","labelsElement",4,"ngIf"],["data-test","labelsElement",1,"labels"],[4,"ngIf"],[3,"label","enableInfo","enableActions",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"label","enableInfo","enableActions"],["data-test","appStoryLabel",1,"labels__label",3,"pinDraggable","tagDraggable","label","collapsed","collapsedMode"]],template:function(e,t){1&e&&i.Nc(0,Ta,3,2,"div",0),2&e&&i.mc("ngIf",t.interactive)},directives:[u.p,u.o,ia,pa,wa],pipes:[u.b],styles:["[_nghost-%COMP%]{position:relative}.labels[_ngcontent-%COMP%], [_nghost-%COMP%]{width:100%;height:100%;display:block}.labels[_ngcontent-%COMP%]{position:absolute;left:0;top:0;z-index:2;pointer-events:none}.labels__label--hidden[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),ja([Object(_.e)(he.a.getUI),ka("design:type",j.a)],e.prototype,"layout$",void 0),ja([Object(_.e)(re.a.getChapterLabels),ka("design:type",j.a)],e.prototype,"labels$",void 0),ja([Object(_.e)(Zt.b.getQuizModeActive),ka("design:type",j.a)],e.prototype,"quizModeActive$",void 0),ja([Object(_.e)($.a.getActiveTool),ka("design:type",j.a)],e.prototype,"activeTool$",void 0),ja([Object(_.e)(Zt.b.getActiveQuestion),ka("design:type",j.a)],e.prototype,"activeQuestion$",void 0),ja([Object(_.e)(pe.a.getSelectedChapter),ka("design:type",j.a)],e.prototype,"selectedChapter$",void 0),ja([Object(_.e)(re.a.getSelectedLabel),ka("design:type",j.a)],e.prototype,"selectedLabel$",void 0),ja([Object(_.e)(re.a.getLabelsCollapsed),ka("design:type",j.a)],e.prototype,"labelsCollapsed$",void 0),ja([Object(_.e)(re.a.getLabelsCollapsedMode),ka("design:type",j.a)],e.prototype,"labelsCollapsedMode$",void 0),ja([Object(_.e)(re.a.getContextLabel),ka("design:type",j.a)],e.prototype,"contextLabel$",void 0),ja([Object(_.e)($.a.getShowLabels),ka("design:type",j.a)],e.prototype,"showLabels$",void 0),ja([Object(_.e)(vi.a.getZoomed),ka("design:type",j.a)],e.prototype,"zoomed$",void 0),ja([Object(_.e)(re.a.getEnableContextLabel),ka("design:type",j.a)],e.prototype,"enableContextLabel$",void 0),ja([Object(_.e)(re.a.getEnableContextLabelInfo),ka("design:type",j.a)],e.prototype,"enableContextLabelInfo$",void 0),ja([Object(_.e)(re.a.getEnableContextLabelActions),ka("design:type",j.a)],e.prototype,"enableContextLabelActions$",void 0),ja([Object(_.e)(re.a.getLabelsDraggable),ka("design:type",j.a)],e.prototype,"draggable$",void 0),e})();function La(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",1),i.cc("@show.done",(function(){return i.Cc(e),i.gc().onShowDone()})),i.Vb(1,"div",2),i.Pc(2,"Use control + scroll to zoom"),i.Ub(),i.Ub()}2&e&&i.mc("@show",void 0)}let za=(()=>{class e{constructor(e,t){this.actions=e,this.changeDetectorRef=t,this.ngUnsubscribe=new p.a,this.show=!1}ngOnInit(){this.actions.pipe(Object(_.l)(te.S),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.show=!0,this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onShowDone(){this.show=!1}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(_.b),i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-engine-scroll"]],decls:1,vars:1,consts:[["class","engine-scroll","data-test","engineScroll",4,"ngIf"],["data-test","engineScroll",1,"engine-scroll"],[1,"engine-scroll__label"]],template:function(e,t){1&e&&i.Nc(0,La,3,1,"div",0),2&e&&i.mc("ngIf",t.show)},directives:[u.p],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.engine-scroll[_ngcontent-%COMP%]{display:flex;position:absolute;justify-content:center;align-items:center;top:0;bottom:0;left:0;right:0;z-index:10000;opacity:0;pointer-events:none}.engine-scroll__label[_ngcontent-%COMP%]{background:rgba(16,24,35,.5);font-size:16px;letter-spacing:.4px;line-height:1.4em;color:#fff;font-weight:600;padding:24px 32px;border-radius:40px}"],data:{animation:[Object(An.n)("show",[Object(An.m)(":enter",[Object(An.j)([Object(An.l)({opacity:"*"}),Object(An.e)("500ms ease-in-out",Object(An.l)({opacity:1})),Object(An.e)("500ms 2000ms ease-in-out",Object(An.l)({opacity:0}))])])])]},changeDetection:0}),e})();const Aa=function(e,t){return{backgroundColor:e,duration:t}},Fa=function(e,t){return{value:e,params:t}},Da=Object(An.g)([Object(An.l)({opacity:"0",backgroundColor:"*"}),Object(An.j)([Object(An.e)("{{ duration }}ms {{ easing }}",Object(An.l)({opacity:1,backgroundColor:"{{ backgroundColor }}"})),Object(An.e)("250ms 500ms ease-in",Object(An.l)({opacity:0}))])],{params:{duration:2e3,backgroundColor:"#ffffff",easing:"ease-out"}});let Ea=(()=>{class e{constructor(e,t,n){this.actions=e,this.changeDetectorRef=t,this.store=n,this.color="#FFFFFF",this.duration=2e3,this.isVisible=!1,this.ngUnsubscribe=new p.a}ngOnInit(){this.initFadeListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initFadeListener(){this.actions.pipe(Object(_.l)(te.h),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.fadeIn(e.color,e.duration)})}handleFadeComplete(){this.store.dispatch(new te.i),this.isVisible=!1,this.changeDetectorRef.markForCheck()}fadeIn(e,t){this.isVisible=!0,this.color=e,this.duration=1e3*t,this.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(_.b),i.Pb(i.i),i.Pb(_.h))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-engine-fade"]],decls:1,vars:7,consts:[[1,"engine-fade"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.cc("@fade.done",(function(){return t.handleFadeComplete()})),i.Ub()),2&e&&i.mc("@fade",i.qc(4,Fa,t.isVisible,i.qc(1,Aa,t.color,t.duration)))},styles:[".engine-fade{pointer-events:none;display:block;position:absolute;left:0;right:0;top:0;bottom:0;z-index:10000}"],encapsulation:2,data:{animation:[Object(An.n)("fade",[Object(An.m)("* => true",Object(An.o)(Da))])]},changeDetection:0}),e})(),Na=(()=>{class e{constructor(e){this.store=e}ngOnInit(){}ngAfterViewInit(){this.nodeActionsComponent.nodeActionsTrigger.openMenu()}onNodeActionsClosed(){this.store.dispatch(new te.z(null,null))}getNodeActionsStyles(){return{"left.px":this.hit?this.hit.canvasPos[0]:0,"top.px":this.hit?this.hit.canvasPos[1]:0}}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(_.h))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-engine-contextmenu"]],viewQuery:function(e,t){if(1&e&&i.Jc(Zi.a,!0),2&e){let e;i.xc(e=i.dc())&&(t.nodeActionsComponent=e.first)}},inputs:{node:"node",hit:"hit"},decls:2,vars:2,consts:[[1,"contextmenu"],["eventCategory","Context Node","theme","light",1,"contextmenu__node-actions",3,"ngStyle","node","nodeActionsClosed"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Vb(1,"app-node-actions",1),i.cc("nodeActionsClosed",(function(){return t.onNodeActionsClosed()})),i.Ub(),i.Ub()),2&e&&(i.Db(1),i.mc("ngStyle",t.getNodeActionsStyles())("node",t.node))},directives:[Zi.a,u.q],styles:[".contextmenu[_ngcontent-%COMP%]{left:0;top:0;width:100%;height:100%;display:block;z-index:2}.contextmenu[_ngcontent-%COMP%], .contextmenu__node-actions[_ngcontent-%COMP%]{position:absolute}"]}),e})();var Ra=n("k93M"),Va=n("Jk2I");let Ba=(()=>{class e{constructor(e,t){this.store=e,this.changeDetectorRef=t,this.ngUnsubscribe=new p.a,this.storyLoadProgress=0}ngOnInit(){const e=this.store.select(Ra.a.getChunkLoadProgress),t=this.store.select(oe.a.getLoadingChunk);Object(Dn.b)(e,t).pipe(Object(v.a)(()=>{const e=this.store.selectSnapshot(oe.a.getLoadChunks);return null!==e&&e.length>0}),Object(l.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{const n=null!==t&&t.chapterId===this.store.selectSnapshot(pe.a.getSelectedChapterId);this.storyLoadProgress=n?e:1,this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(_.h),i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-engine-progress"]],decls:1,vars:2,consts:[["data-test","engineProgress",1,"engine-progress",3,"value","total"]],template:function(e,t){1&e&&i.Qb(0,"app-progress",0),2&e&&i.mc("value",t.storyLoadProgress)("total",1)},directives:[Va.a],styles:[".engine-progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;z-index:2;pointer-events:none}"],changeDetection:0}),e})(),Ha=(()=>{class e{constructor(e,t){this.engineService=e,this.changeDetectionRef=t,this.camera={x:0,y:0,z:0,zoom:0,dist:0}}ngOnInit(){this.initCameraListener()}initCameraListener(){this.engineService.getEvent(D.a.CameraUpdated).pipe(Object(mi.a)(50)).subscribe(e=>{this.camera={x:e.eye.x.toFixed(0),y:e.eye.y.toFixed(0),z:e.eye.z.toFixed(0),zoom:Math.floor(100*Human.renderer.camera.getZoom()),dist:e.dist.toFixed(0)},this.changeDetectionRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(q.a),i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-engine-camera-position"]],decls:2,vars:5,consts:[[1,"engine-camera-position"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Pc(1),i.Ub()),2&e&&(i.Db(1),i.Uc(" X:",null==t.camera?null:t.camera.x," Y:",null==t.camera?null:t.camera.y," Z:",null==t.camera?null:t.camera.z," Dist:",null==t.camera?null:t.camera.dist," Zoom:",null==t.camera?null:t.camera.zoom,"\n"))},styles:[".engine-camera-position[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;color:#fff;font-size:10px;text-shadow:0 0 2px rgba(0,0,0,.8);z-index:10}"],changeDetection:0}),e})();var Qa=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},Ga=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Wa=["engine"],qa=["engineCanvas"],$a=["engineAnnotations"];function Xa(e,t){1&e&&i.Qb(0,"div",11)}function Za(e,t){if(1&e&&i.Qb(0,"app-engine-contextmenu",12),2&e){const e=i.gc();i.mc("node",e.contextmenuNode)("hit",e.contextmenuHit)}}function Ja(e,t){1&e&&i.Qb(0,"div",13)}function Ka(e,t){1&e&&i.Qb(0,"app-engine-progress",14)}function Ya(e,t){1&e&&(i.Tb(0),i.Qb(1,"app-engine-camera-position"),i.Sb())}var es=function(e){return e[e.Pan=.4]="Pan",e[e.PanSlow=.04]="PanSlow",e[e.Zoom=5]="Zoom",e[e.ZoomSlow=1]="ZoomSlow",e[e.Rotate=.3]="Rotate",e[e.RotateSlow=.03]="RotateSlow",e}({}),ts=function(e){return e[e.Rotate=6]="Rotate",e[e.Pan=1.75]="Pan",e[e.Zoom=2.5]="Zoom",e}({}),ns=function(e){return e[e.Zoom=-6]="Zoom",e[e.TrackZoom=.5]="TrackZoom",e[e.Pan=1.25]="Pan",e[e.Rotate=1.5]="Rotate",e[e.Friction=.85]="Friction",e[e.ZoomFriction=.85]="ZoomFriction",e[e.FrictionThreshold=.002]="FrictionThreshold",e}({}),is=function(e){return e.Hide="engine--cursor-hide",e.Label="engine--cursor-label",e.Paint="engine--cursor-paint",e.Eyedropper="engine--cursor-eyedropper",e.Crosshair="engine--cursor-crosshair",e.Default="",e}({}),as=function(e){return e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.LeftAndRight=4]="LeftAndRight",e}({});let ss=(()=>{class e{constructor(e,t,i,s,o,r,c,l,u,d,g,h){this.actions=e,this.cameraService=t,this.chapterService=i,this.changeDetecton=s,this.engineService=o,this.paintService=r,this.visibilityLayersService=c,this.mediaService=l,this.storageService=u,this.renderer=d,this.store=g,this.matDialog=h,this.flyCamera=!0,this.chapterActivating=!1,this.visible=!1,this.application=m.a,this.cursorClass=is.Default,this.showDebug=a.a.application===m.a.Loft||this.storageService.getLocalItem(k.b.CameraDebug),this.ngUnsubscribe=new p.a,this.display=!1,this.engineVisible=!0,this.background=new Xe.a(null),this.ctrlPressed=!1,this.scrollType=null,this.scrollTimeout=null,this.pinchTicks=0,this.progress="0",this.deltaTime=window.performance.now(),this.pinchMode="",this.cameraAnimating=!1,this.inputEnabled=!0,a.a.application===m.a.Loft&&n.e(13).then(n.t.bind(null,"16wW",7)).then(e=>{window.pako=e})}wheel(e){const t=this.store.selectSnapshot($.a.getScrollMode),n=e.ctrlKey;t!==Si.a.DoNotCaptureShowMessage||n||this.store.dispatch(new te.S(!0)),(t===Si.a.Capture||n)&&(e.preventDefault(),this.handleWheel(e))}contextmenu(e){this.handleContextMenu(e)}mouseout(){this.handleMouseOut()}convertToLeafStateMap(e,t){const n={};return Object.entries(t).forEach(([t,i])=>{n[t]={},n[t][e]=i}),n}ngOnInit(){this.particleStateListener=new ji(this.store),this.bindEngineEvents(),this.bindApplicationEvents(),this.bindChapterChangeEvents(),this.bindCameraEvents(),this.bindToolEvents(),this.bindMouseEvents(),this.bindKeyEvents(),this.bindHumanInteractions(),this.initChangeListener(),this.initChapterAudio(),this.initBackgroundListener(),this.initPlaybackSpeedListener(),Human.properties.set({assetDomain:a.a.assetDomain}),Human.init.init()}ngOnDestroy(){this.changeDetecton.detach(),this.particleStateListener.destroy(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}bindEngineEvents(){this.engineService.getEvent(D.a.Loaded).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new te.M(!0))}),this.engineService.getEvent(D.a.TimelineChaptersActivateStart).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.chapterActivating=!0}),this.engineService.getEvent(D.a.TimelineChaptersActivateFinish).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.chapterActivating=!1;const t=Human.timeline.activeRoot._nowBranch,n={id:t.id,init:!0,camera:t.initializedCamera,annotations:t.initializedAnnotations,graph:t.initializedGraph,properties:t.initializedProperties,particles:t.initializedParticles,clips:t.initializedClippingPlanes,postprocessing:t.initializedPostprocess,transparency:t.initializedTransparencyMode};this.store.dispatch(new te.B(e.chapterId)),this.store.dispatch(new te.C(n))}),this.engineService.getEvent(D.a.TimelineChaptersActivated).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.engineService.fireEvent(D.a.LabelsChapterInfo,this.store.selectSnapshot(re.a.getChapterLabels))}),Object(Fn.a)(this.engineService.getEvent(D.a.TimelinePlayed),this.engineService.getEvent(D.a.TimelinePaused)).pipe(Object(l.a)(this.ngUnsubscribe),Object(v.a)(()=>null!=this.store.selectSnapshot(pe.a.getSelectedChapterId)),Object(C.a)(50),Object(S.a)(()=>Human.timeline.playing)).subscribe(e=>{this.store.dispatch(new te.x(e))}),this.engineService.getEvent(D.a.Tick).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.visible&&(this.inputEnabled&&this.handleMouseInputEngineTick(),this.handleCameraTick(),this.deltaTime=window.performance.now())}),this.engineService.getEvent(D.a.TweenVisibilityUpdate).pipe(Object(En.a)((e,t)=>JSON.stringify(e)===JSON.stringify(t)),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{const t=Object.keys(e).filter(t=>!0===e[t]),n=Object.keys(e).filter(t=>!1===e[t]);t.length>0&&this.store.dispatch(new ve.a.UpdateNodesShown(!0,t,void 0,!1,!0)),n.length>0&&this.store.dispatch(new ve.a.UpdateNodesShown(!1,n,void 0,!1,!0))}),this.engineService.getEvent(D.a.SceneObjectRenderable).pipe(Object(bi.a)(1e3),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{if(e.length){const t={};e.forEach(e=>{t[e.objectId]={renderable:!0}}),this.store.dispatch(new te.U(t))}}),this.engineService.getEvent(D.a.AssetsLoadProgress).pipe(Object(mi.a)(33),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{const t=Math.max(1,this.store.selectSnapshot(oe.a.getLoadChunks).length),n=this.store.selectSnapshot(oe.a.getLoadChunksRemaining).length,i=t-n,{receivedAssets:a,requestedAssets:s}=e,o=a/s,r=1/t,c=0===n?1:o*r+i*r;this.progress=c.toFixed(2),this.changeDetecton.markForCheck(),this.store.dispatch(new Oi.b(c,o))}),this.actions.pipe(Object(_.k)(se.g),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{0===this.store.selectSnapshot(oe.a.getLoadChunksRemaining).length&&(this.store.dispatch(new Oi.b(1,1)),this.engineService.enableRender())}),this.engineService.getEvent(D.a.CameraUpdated).pipe(Object(v.a)(()=>!this.cameraAnimating),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.cameraAnimating=!0,this.changeDetecton.markForCheck()}),this.engineService.getEvent(D.a.CameraRested).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.cameraAnimating=!1,this.changeDetecton.markForCheck()})}bindApplicationEvents(){this.enginePosition$.pipe(Object(v.a)(e=>null!=e),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.repositionEngine(e)}),this.store.select($.a.getXrayModeEnabled).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{const t=this.store.selectSnapshot(Oe.a.getCheckedNodes),n=this.store.selectSnapshot(Oe.a.getNodes);!1===e?(Object.keys(n||[]).forEach(e=>{this.paintService.paint(e,n[e].paint)}),t.forEach(e=>this.paintService.highlight(e.objectId,!0))):(this.paintService.paintAll(Object.keys(n),Se.b),this.paintService.paintAll(t.map(e=>e.objectId),Se.c))}),this.actions.pipe(Object(_.l)(te.p),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.playChapterFromStart()}),this.engineDisplay$.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.display=e,this.changeDetecton.markForCheck()}),this.engineVisible$.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.engineVisible=e,this.changeDetecton.markForCheck()}),this.visibilityLayersService.initObservables(),this.contextmenu$.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.contextmenuNode=e.node,this.contextmenuHit=e.hit,this.changeDetecton.markForCheck()})}bindChapterChangeEvents(){this.selectedChapter$.pipe(Object(v.a)(e=>!Object(P.isNil)(e)),Object(Nn.a)(),Object(l.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{const n=this.chapterService.getCurrentChapterId(),i=t.id;e.id===i&&n===i||(this.store.dispatch(new ve.a.SetActiveChapter(i)),ye(this.store,this.engineService),Human.timeline.scrub({chapterId:i}),this.store.dispatch(new ee.m(void 0)))}),this.clippingPlanes$.pipe(Object(v.a)(e=>void 0!==e),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{const t=Object.values(e.clips).filter(e=>e.enabled);Human.renderer.clip.reset(),t.forEach(t=>Human.renderer.clip.setClip(Object.assign({boundary:e.boundary},t)))}),Object(Dn.b)(this.selectedChapterId$,this.readyState$,this.autoplay$).pipe(Object(v.a)(([e,t,n])=>!Object(P.isNil)(e)&&!Object(P.isNil)(t)&&!Object(P.isNil)(n)),Object(l.a)(this.ngUnsubscribe)).subscribe(([,e,t])=>{const n=Object(P.get)(e,"animation",!1),i=this.store.selectSnapshot(pe.a.getSelectedChapter),a=Object(P.get)(i,"ui.play.autoplay",!0),s=n&&t&&a;this.store.dispatch(new te.o(i,!s)),this.store.dispatch(new te.W(s))})}bindCameraEvents(){this.actions.pipe(Object(_.l)(ee.l),Object(v.a)(e=>!Object(P.isNil)(e.camera)),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{(e.animate?this.flyToPoint(e.camera,e.animationDuration):this.jumpToPoint(e.camera)).then(()=>{this.store.dispatch(new ee.o),e.rotationCenter&&this.cameraService.setCameraRotationCenter(e.rotationCenter)})}),this.actions.pipe(Object(_.l)(ee.e),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.cameraService.panCameraStatic(e.x,e.y,e.z)}),this.actions.pipe(Object(_.l)(ee.i),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.cameraService.rotateCameraStatic(e.x,e.y)}),this.actions.pipe(Object(_.l)(ee.t),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.cameraService.setHumanZoomFactor(e.value)}),this.actions.pipe(Object(_.l)(te.j),Object(v.a)(e=>!!e.objectId),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{e.animate?this.flyToObject(e.objectId,e.animationDuration):this.jumpToObject(e.objectId)})}bindToolEvents(){this.activeTool$.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{switch(Object.values(is).forEach(e=>{e&&this.renderer.removeClass(this.engineElement.nativeElement,e)}),e){case ge.a.Hide:this.renderer.addClass(this.engineElement.nativeElement,is.Hide);break;case ge.a.Label:this.renderer.addClass(this.engineElement.nativeElement,is.Label);break;case ge.a.Paint:this.renderer.addClass(this.engineElement.nativeElement,is.Paint);break;case ge.a.Eyedropper:this.renderer.addClass(this.engineElement.nativeElement,is.Eyedropper);break;case ge.a.Quiz:this.renderer.addClass(this.engineElement.nativeElement,is.Crosshair)}})}bindMouseEvents(){this.mouseMove$=Object(w.a)(this.engineElement.nativeElement,"mousemove"),this.mouseMove$.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.handleMousePan(e)}),this.mouseMove$.pipe(Object(C.a)(10),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.handleMouseHover(e)}),this.mouseLeave$=Object(w.a)(this.engineElement.nativeElement,"mouseleave"),this.mouseLeave$.pipe(Object(C.a)(10),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.handleMouseLeave()})}bindWindowKeyEvent(e){return Object(w.a)(window,e).pipe(Object(v.a)(e=>Object(P.isEmpty)(this.matDialog.openDialogs)))}bindKeyEvents(){const e=["w","a","s","d","e","c","=","-","+","_","arrowleft","arrowright","arrowup","arrowdown","shiftKey"].reduce((e,t)=>(e[t]=!1,e),{}),t=new Xe.a(e);let n;this.bindWindowKeyEvent("keydown").pipe(Object(v.a)(e=>!(e.repeat||e.metaKey||e.ctrlKey)),Object(v.a)(e=>{const t=e.target.nodeName.toLowerCase();return!(["input","textarea","select","option"].indexOf(t)>=0)}),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{t.next(Object.assign(Object.assign({},t.value),{[e.key.toLowerCase()]:!0,shiftKey:e.shiftKey,hasMomentum:!1}))}),this.bindWindowKeyEvent("keyup").pipe(Object(v.a)(e=>!!e.key),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{1===Object.values(n).filter(e=>!0===e).length?(this.applyMotion(n,!0),t.next(Object.assign(Object.assign({},t.value),{[e.key.toLowerCase()]:!1,shiftKey:e.shiftKey,hasMomentum:!1===n.shiftKey}))):t.next(Object.assign(Object.assign({},t.value),{[e.key.toLowerCase()]:!1,shiftKey:e.shiftKey,hasMomentum:!1}))}),t.pipe(Object(v.a)(()=>this.inputEnabled),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{n=e,!1===e.hasMomentum&&this.applyMotion(e,!1)}),this.bindWindowKeyEvent("keydown").pipe(Object(v.a)(e=>"Control"===e.key),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.ctrlPressed=!0}),this.bindWindowKeyEvent("keyup").pipe(Object(v.a)(e=>"Control"===e.key),Object(l.a)(this.ngUnsubscribe)).subscribe(()=>{this.ctrlPressed=!1})}applyMotion(e,t){const n=new yi.a,i=e.shiftKey?es.ZoomSlow:es.Zoom,a=e.shiftKey?es.PanSlow:es.Pan,s=e.shiftKey?es.RotateSlow:es.Rotate;n.zoom+=e.c||e["-"]||e._?i:0,n.zoom-=e.e||e["="]||e["+"]?i:0,n.panX-=e.d?a:0,n.panX+=e.a?a:0,n.panY+=e.w?a:0,n.panY-=e.s?a:0,n.rotateX-=e.arrowright?s:0,n.rotateX+=e.arrowleft?s:0,n.rotateY+=e.arrowup?s:0,n.rotateY-=e.arrowdown?s:0,n.applyFriction=t,this.store.dispatch(new ee.d(n))}initChangeListener(){this.store.select(Oe.a.getPatches).pipe(Object(v.a)(e=>e.length>0),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{const t=e.reduce((e,t)=>{const n=t.path[t.path.length-1];return void 0!==e[n]&&e[n].push(t),e},{shown:[],checked:[],paint:[],pickable:[]}),n=e=>t[e].reduce((e,t)=>(e[t.path[2]]=t.value,e),{}),i=n("checked"),a=n("shown"),s=n("paint"),o=n("pickable");if(!Object(P.isEmpty)(a)){const e=this.store.selectSnapshot(Oe.a.getNodes),t=Object.values(e).reduce((e,t)=>(e[t.objectId]=t.shown,e),{});this.engineService.setNodesVisible(t);const n=this.convertToLeafStateMap("shown",t);this.store.dispatch(new te.V(n,e))}if(!Object(P.isEmpty)(i)){this.engineService.fireEvent(D.a.SceneObjectsSelected,{selectedObjectsUpdate:i});const e=this.store.selectSnapshot($.a.getXrayModeEnabled)?(e,t)=>this.paintService.paint(e,!0===t?Se.c:Se.b):(e,t)=>this.paintService.highlight(e,t);Object.entries(i).forEach(([t,n])=>{e(t,n)})}if(!Object(P.isEmpty)(s))for(const[r,c]of Object.entries(s))this.paintService.colorObject(r,Z.a.toEngine(c));if(!Object(P.isEmpty)(o)){const e=this.store.selectSnapshot(Oe.a.getNodes),t=Object.values(e).reduce((e,t)=>(e[t.objectId]=t.pickable,e),{});this.engineService.setNodesPickable(t),this.store.dispatch(new te.T(this.convertToLeafStateMap("pickable",t),e))}})}initChapterAudio(){Object(Dn.b)([this.selectedChapterId$,this.playAudio$]).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.playAudio(t)})}initBackgroundListener(){Object(Dn.b)([this.background$,this.engineDisplay$,this.engineVisible$]).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(([e,t,n])=>{this.renderer.setStyle(this.engineElement.nativeElement,"background-image",Ve.a.toCSS(e)),this.isBackgroundCheckered(e)?this.renderer.addClass(this.engineElement.nativeElement,"engine--checkered"):this.renderer.removeClass(this.engineElement.nativeElement,"engine--checkered"),this.renderer.setStyle(this.engineElement.nativeElement,"display",t?"block":"none"),this.renderer.setStyle(this.engineElement.nativeElement,"opacity",n?1:0)})}initPlaybackSpeedListener(){this.store.select($.a.getPlaybackSpeed).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{Human.timeline.scale=e})}repositionEngine(e){this.renderer.setStyle(this.engineElement.nativeElement,"left",e.left+"px"),this.renderer.setStyle(this.engineElement.nativeElement,"top",e.top+"px"),this.renderer.setStyle(this.engineElement.nativeElement,"width",e.width+"px"),this.renderer.setStyle(this.engineElement.nativeElement,"height",e.height+"px"),this.renderer.setStyle(this.engineElement.nativeElement,"zIndex",""+e.visibility),this.renderer.setStyle(this.engineElement.nativeElement,"visibility",e.visibility===fi.a.Shown?"visible":"hidden"),this.visible=e.visibility===fi.a.Shown,Human.renderer.resize()}bindHumanInteractions(){const e=new xi.Manager(this.engineCanvasElement.nativeElement);e.add(new xi.Tap({event:"doubletap",taps:2,posThreshold:50})),e.add(new xi.Tap({event:"singletap"})),e.add(new xi.Pan({event:"pan",pointers:0})),e.add(new xi.Pinch({event:"pinch"})),e.add(new xi.Press({time:500})),e.on("singletap",e=>{this.handleTap(e)}),e.on("doubletap",e=>{this.handleDoubleTap(e)}),e.on("press",e=>{e.preventDefault(),e.srcEvent.stopImmediatePropagation(),this.handlePress(e)}),e.on("pan",e=>{e.preventDefault(),this.handlePan(e)}),e.on("panend",e=>{this.handlePanEnd(e)}),e.on("pinchend",e=>{this.handlePinchEnd(e)});let t=0,n=0;e.on("pinchstart",e=>{t=e.scale,this.pinchMode=""}),e.on("pinchmove",e=>{if(this.pinchTicks>0)return;const i=Math.abs(e.deltaX)>60||Math.abs(e.deltaY)>60,a=e.scale>1.25||e.scale<.75;this.pinchMode?("pan"===this.pinchMode&&a&&!i&&(this.pinchMode="pinch"),"pinch"===this.pinchMode&&i&&!a&&(this.pinchMode="pan")):this.pinchMode=a?"pinch":"pan";const s=e.scale-t;t=e.scale;const o=n;n=0===s?0:s>0?1:-1,this.cameraService.setCameraPan(e.velocityX*ns.Pan,e.velocityY*ns.Pan),n+o!==0&&this.cameraService.setHumanZoom(s*ns.Zoom)})}handleMouseHover(e){if(e.buttons!==as.None)return;const{offsetX:t,offsetY:n}=e,i=Human.renderer.pick.pick(t,n);if(i.objectId){const e=this.store.selectSnapshot($.a.getViewGraph),t=this.engineService.getNode(e,i.objectId),n=this.store.selectSnapshot($.a.getHoveredNode);n&&n.id===t.id||this.store.dispatch(new te.k(t,i))}else null!=this.store.selectSnapshot($.a.getHoveredNode)&&this.store.dispatch(new te.k(null))}handleMouseLeave(){this.store.dispatch(new te.k(null))}handleMousePan(e){if(2===e.buttons||4===e.buttons){let{movementX:t,movementY:n}=e;t/=16,n/=16,this.cameraService.setCameraPan(t,n)}}handleMouseOut(){this.store.dispatch(new te.k(null))}handleWheel(e){let t=0;switch(e.deltaMode){case 0:null===this.scrollType&&(this.scrollType=Math.abs(e.deltaY)<10?"trackpad":"wheel"),t="trackpad"===this.scrollType?e.deltaY*ns.TrackZoom:Math.sign(e.deltaY)*ts.Zoom;break;default:this.scrollType="wheel",t=e.deltaY*ts.Zoom}clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.scrollType=null},500),Math.abs(t)>40&&(t=40*Math.sign(t)),"trackpad"===this.scrollType?this.cameraService.setCameraZoom(t):this.zoomWithVelocity(t)}zoomWithVelocity(e){this.cameraService.setCameraZoom(e),requestAnimationFrame(()=>{e*=.85,Math.abs(e)>1&&this.zoomWithVelocity(e)})}handleContextMenu(e){e.preventDefault();const{offsetX:t,offsetY:n}=e,i=this.getHit(t,n),a=this.getNodeFromHit(i);this.store.dispatch(new te.z(a,i))}handlePanEnd(e){const t=this.store.selectSnapshot(vi.a.getCameraMotion);if(this.pinchTicks>0||t.panX===e.velocityX&&t.panY===e.velocityY)return;const n=this.store.selectSnapshot(vi.a.getPanMode);e.srcEvent.shiftKey||"pan"===n?(t.panX=e.velocityX*ns.Pan,t.panY=e.velocityY*ns.Pan):(t.rotateX=e.velocityX*ns.Rotate,t.rotateY=e.velocityY*ns.Rotate),t.applyFriction=!0,this.store.dispatch(new ee.d(t))}handlePinchEnd(e){const t=this.store.selectSnapshot(vi.a.getCameraMotion);if("pan"===this.pinchMode)t.panX=e.velocityX*ns.Pan,t.panY=e.velocityY*ns.Pan;else{const n=e.velocity>0?1:-1;t.zoom=Math.sqrt(e.velocityX*e.velocityX+e.velocityY*e.velocityY)*-n*ns.Zoom}t.applyFriction=!0,this.store.dispatch(new ee.d(t)),this.pinchTicks=10}handleTap(e){const{offsetX:t,offsetY:n}=this.getOffset(e),i=this.getHit(t,n),a=this.getNodeFromHit(i);this.store.dispatch(new te.d(a,e,i))}handleDoubleTap(e){const{offsetX:t,offsetY:n}=this.getOffset(e),i=this.getHit(t,n),a=this.getNodeFromHit(i);a&&this.store.dispatch(new te.j(a.id))}handlePress(e){const{offsetX:t,offsetY:n}=this.getOffset(e),i=this.getHit(t,n),a=this.getNodeFromHit(i);a&&this.store.dispatch(new te.j(a.id))}handlePan(e){if(this.pinchTicks>0)return;const t=this.store.selectSnapshot(vi.a.getPanMode),{velocityX:n,velocityY:i}=e;e.srcEvent.shiftKey||"pan"===t?this.cameraService.setCameraPan(n*ns.Pan,i*ns.Pan):this.cameraService.setCameraRotation(n*ns.Rotate,i*ns.Rotate)}handleMouseInputEngineTick(){const e=this.cameraService.tickCameraRotation(),t=this.cameraService.tickCameraPan(),n=this.cameraService.tickCameraZoom(),i=Math.min(15,(window.performance.now()-this.deltaTime)/16.666666666666668);if((e.vx||e.vy)&&this.cameraService.rotateCameraStatic(0!==e.vx?i*e.vx*ts.Rotate:0,0!==e.vy?i*e.vy*ts.Rotate:0),t.x||t.y){const e=Math.max(Human.renderer.camera.lookDistance/80,.01);this.cameraService.panCameraStatic(i*t.x*e*ts.Pan,i*t.y*e*ts.Pan,i*t.z*e*ts.Pan)}0!==n&&this.cameraService.setHumanZoom(i*n*ts.Zoom)}handleCameraTick(){this.pinchTicks>0&&this.pinchTicks--,this.applyFriction();const e=this.store.selectSnapshot(vi.a.getCameraMotion);this.cameraService.setCameraPan(e.panX,e.panY),this.cameraService.setCameraRotation(e.rotateX,e.rotateY),this.cameraService.setCameraZoom(e.zoom)}getFriction(e){if(0===e)return 0;const t=(window.performance.now()-this.deltaTime)/16.666666666666668;let n=e*Math.max(0,ns.Friction+.1*(1-t));return Math.abs(n)<ns.FrictionThreshold&&(n=0),n}applyFriction(){const e=this.store.selectSnapshot(vi.a.getCameraMotion);!0===e.applyFriction&&(e.rotateX=this.getFriction(e.rotateX),e.rotateY=this.getFriction(e.rotateY),e.panX=this.getFriction(e.panX),e.panY=this.getFriction(e.panY),e.zoom=this.getFriction(e.zoom),0===e.rotateX&&0===e.rotateY&&0===e.panX&&0===e.panY&&0===e.zoom&&(e.applyFriction=!1),this.store.dispatch(new ee.d(e)))}flyToObject(e,t){Human.renderer.camera.fly.flyTo({objectId:e,animationDuration:t})}jumpToObject(e){Human.renderer.camera.fly.jumpTo({objectId:e})}flyToPoint(e,t){return new Promise(n=>{Human.renderer.camera.fly.flyTo(Object.assign(Object.assign({},e),{animationDuration:t}),n)})}jumpToPoint(e){return new Promise(t=>{Human.renderer.camera.fly.jumpTo(e,t)})}getNodeFromHit(e){let t;if(e.objectId){const n=this.store.selectSnapshot($.a.getViewGraph);t=this.engineService.getNode(n,e.objectId)}return t}getHit(e,t){return Human.renderer.pick.pick(e,t,{rayPick:!0})}getOffset(e){let t=0,n=0;e.center?(t=e.center.x,n=e.center.y):(t=e.clientX,n=e.clientY);const i=this.engineElement.nativeElement.getBoundingClientRect();return{offsetX:t-i.left,offsetY:n-i.top}}playAudio(e){e=Object(P.isNil)(e)?this.store.selectSnapshot($.a.getPlayAudio):e,this.mediaService.stopAudio();const t=this.store.selectSnapshot(pe.a.getSelectedChapterAudio),n=Object(P.get)(t,"data.fullUrl");if(n){let t=this.mediaService.getAudioPlayer(n);t||(t=this.mediaService.addAudioPlayer(n)),e?t.play():t.stop()}}playChapterFromStart(){const e=this.store.selectSnapshot(pe.a.getSelectedChapter);this.playAudio(),this.store.dispatch(new te.o(e)),this.store.dispatch(new te.W(!0))}isTransparentBackground(e){return!!e&&Ve.a.isTransparent(this.background.getValue())}isBackgroundCheckered(e){return a.a.application!==m.a.Viewer&&this.isTransparentBackground(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(_.b),i.Pb(W.a),i.Pb(ki.a),i.Pb(i.i),i.Pb(q.a),i.Pb(J),i.Pb(qt.a),i.Pb(Pi.a),i.Pb(k.d),i.Pb(i.H),i.Pb(_.h),i.Pb(I.b))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-engine"]],viewQuery:function(e,t){if(1&e&&(i.Jc(Wa,!0),i.Jc(qa,!0),i.Jc($a,!0)),2&e){let e;i.xc(e=i.dc())&&(t.engineElement=e.first),i.xc(e=i.dc())&&(t.engineCanvasElement=e.first),i.xc(e=i.dc())&&(t.engineAnnotationsElement=e.first)}},hostBindings:function(e,t){1&e&&i.cc("wheel",(function(e){return t.wheel(e)}))("contextmenu",(function(e){return t.contextmenu(e)}))("mouseout",(function(e){return t.mouseout(e)}))},inputs:{inputEnabled:"inputEnabled"},decls:16,vars:11,consts:[["id","container","data-test","engine","role","complementary",1,"engine"],["engine",""],["class","engine__watermark","role","img","aria-label","watermark","data-test","engineWatermark",4,"ngIf"],["id","theCanvas","data-test","engineCanvas",1,"engine__canvas"],["engineCanvas",""],["id","annotationCanvas",1,"engine__annotations"],["engineAnnotations",""],[3,"node","hit",4,"ngIf"],["data-test","engineInputBlocker","class","engine__input-blocking",4,"ngIf"],["data-test","engineProgressBar",4,"ngIf"],[4,"ngIf"],["role","img","aria-label","watermark","data-test","engineWatermark",1,"engine__watermark"],[3,"node","hit"],["data-test","engineInputBlocker",1,"engine__input-blocking"],["data-test","engineProgressBar"]],template:function(e,t){1&e&&(i.Vb(0,"div",0,1),i.Nc(2,Xa,1,0,"div",2),i.hc(3,"async"),i.Qb(4,"canvas",3,4),i.Qb(6,"canvas",5,6),i.Qb(8,"app-labels"),i.Nc(9,Za,1,2,"app-engine-contextmenu",7),i.Nc(10,Ja,1,0,"div",8),i.Nc(11,Ka,1,0,"app-engine-progress",9),i.hc(12,"async"),i.Qb(13,"app-engine-scroll"),i.Qb(14,"app-engine-fade"),i.Nc(15,Ya,2,0,"ng-container",10),i.Ub()),2&e&&(i.Eb("data-progress",t.progress)("data-camera-animating",t.cameraAnimating),i.Db(2),i.mc("ngIf",i.ic(3,7,t.watermarkEnabled$)),i.Db(7),i.mc("ngIf",t.contextmenuNode),i.Db(1),i.mc("ngIf",!t.inputEnabled),i.Db(1),i.mc("ngIf",i.ic(12,9,t.showProgressBar$)),i.Db(4),i.mc("ngIf",t.showDebug))},directives:[u.p,Ua,za,Ea,Na,Ba,Ha],pipes:[u.b],styles:[".engine[_ngcontent-%COMP%]{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;position:fixed;width:100vw;height:100vh;overflow:hidden;visibility:hidden;z-index:-1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.engine__canvas[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%;z-index:1}.engine__annotations[_ngcontent-%COMP%]{display:none}.engine--cursor-eyedropper[_ngcontent-%COMP%]:hover{cursor:url(/assets/images/cursors/cursor-eyedropper.png) 7 20,pointer}.engine--cursor-paint[_ngcontent-%COMP%]:hover{cursor:url(/assets/images/cursors/cursor-paint.png) 7 20,pointer}.engine--cursor-hide[_ngcontent-%COMP%]:hover{cursor:url(/assets/images/cursors/cursor-hide.png) 7 20,pointer}.engine--cursor-label[_ngcontent-%COMP%]:hover{cursor:url(/assets/images/cursors/cursor-label.png) 7 20,pointer}.engine--cursor-crosshair[_ngcontent-%COMP%]:hover{cursor:crosshair}.engine--checkered[_ngcontent-%COMP%]{background-color:#fff;background-size:24px 24px;background-position:0 0,12px 12px;background-image:linear-gradient(45deg,#d7e0ea 25%,transparent 0,transparent 75%,#d7e0ea 0,#d7e0ea),linear-gradient(45deg,#d7e0ea 25%,transparent 0,transparent 75%,#d7e0ea 0,#d7e0ea)}.engine__controls[_ngcontent-%COMP%]{position:absolute;right:16px;bottom:16px;z-index:2}.engine__progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:2}.engine__progress--hide[_ngcontent-%COMP%]{display:none}.engine__input-blocking[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:3}.engine__watermark[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:101;pointer-events:none;background-image:url(/assets/images/BioDigital_watermark_1024x768.svg);background-repeat:no-repeat;background-position:50%;background-size:auto}@media (max-width:768px){.engine__controls[_ngcontent-%COMP%]{bottom:96px}}@media (max-width:959px){.engine__watermark[_ngcontent-%COMP%]{background-image:url(/assets/images/BioDigital_watermark_959x100.svg);background-size:contain}}"],changeDetection:0}),Qa([Object(_.e)($.a.getReady),Ga("design:type",j.a)],e.prototype,"ready$",void 0),Qa([Object(_.e)($.a.getViewGraph),Ga("design:type",j.a)],e.prototype,"viewGraph$",void 0),Qa([Object(_.e)($.a.getEnginePosition),Ga("design:type",j.a)],e.prototype,"enginePosition$",void 0),Qa([Object(_.e)($.a.getHoveredNode),Ga("design:type",j.a)],e.prototype,"hoveredNode$",void 0),Qa([Object(_.e)($.a.getChapter),Ga("design:type",j.a)],e.prototype,"chapter$",void 0),Qa([Object(_.e)($.a.getChapterInit),Ga("design:type",j.a)],e.prototype,"chapterInit$",void 0),Qa([Object(_.e)(Oe.a.getCheckedNodes),Ga("design:type",j.a)],e.prototype,"checkedNodes$",void 0),Qa([Object(_.e)($.a.getActiveTool),Ga("design:type",j.a)],e.prototype,"activeTool$",void 0),Qa([Object(_.e)($.a.getAnimationPlaying),Ga("design:type",j.a)],e.prototype,"animationPlaying$",void 0),Qa([Object(_.e)($.a.getAutoplay),Ga("design:type",j.a)],e.prototype,"autoplay$",void 0),Qa([Object(_.e)($.a.getPlayAudio),Ga("design:type",j.a)],e.prototype,"playAudio$",void 0),Qa([Object(_.e)($.a.getDisplay),Ga("design:type",j.a)],e.prototype,"engineDisplay$",void 0),Qa([Object(_.e)($.a.getVisible),Ga("design:type",j.a)],e.prototype,"engineVisible$",void 0),Qa([Object(_.e)($.a.getShowProgressBar),Ga("design:type",j.a)],e.prototype,"showProgressBar$",void 0),Qa([Object(_.e)($.a.getContextmenu),Ga("design:type",j.a)],e.prototype,"contextmenu$",void 0),Qa([Object(_.e)(pe.a.getSelectedChapter),Ga("design:type",j.a)],e.prototype,"selectedChapter$",void 0),Qa([Object(_.e)(pe.a.getSelectedChapterId),Ga("design:type",j.a)],e.prototype,"selectedChapterId$",void 0),Qa([Object(_.e)(pe.a.getSelectedChapterReadyState),Ga("design:type",j.a)],e.prototype,"readyState$",void 0),Qa([Object(_.e)(pe.a.getSelectedChapterClippingPlanes),Ga("design:type",j.a)],e.prototype,"clippingPlanes$",void 0),Qa([Object(_.e)(vi.a.getCameraMotion),Ga("design:type",j.a)],e.prototype,"cameraMotion$",void 0),Qa([Object(_.e)(pe.a.getSelectedChapterBackground),Ga("design:type",j.a)],e.prototype,"background$",void 0),Qa([Object(_.e)($.a.getWatermarkEnabled),Ga("design:type",j.a)],e.prototype,"watermarkEnabled$",void 0),e})();var os=function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},rs=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let cs=(()=>{class e{constructor(e,t,n,i,a,s,o,r,c,l,u,d,g,h,b,m,f,y,v,O){this.ga=t,this.authService=n,this.storageService=i,this.compatibilityService=a,this.dialog=s,this.router=o,this.activatedRoute=r,this.viewContainerRef=c,this.linkedinInsights=l,this.pendoService=u,this.widgetAPIHandler=d,this.engineService=g,this.store=h,this.actions=b,this.zendeskService=m,this.viewService=f,this.snackBar=y,this.titleService=v,this.globalActionsService=O,this.title="human-studio-next",this.ngUnsubscribe=new p.a,e.loadRouting(),this.initPageTitle()}ngOnInit(){this.initPageAnalytics(),a.a.native&&this.initNativeAPIHooks(),this.userProfile$.pipe(Object(v.a)(e=>null!=e),Object(O.a)(1),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.checkProfileAccess(e)}),this.initZendesk(),this.initPendo(),this.globalActionsService.initialize()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initPageTitle(){const e=this.titleService.getTitle();this.router.events.pipe(Object(v.a)(e=>e instanceof r.c),Object(S.a)(()=>{let e="",t=this.activatedRoute;for(;t.firstChild;){const n=t.firstChild.snapshot.data.title;Object(P.isNil)(n)||(e=n),t=t.firstChild}return e}),Object(S.a)(t=>t.length?t+" | BioDigital Human Platform":e)).subscribe(e=>{this.titleService.setTitle(e)})}initPageAnalytics(){this.linkedinInsights.initialize(),this.router.events.pipe(Object(v.a)(e=>e instanceof r.c),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.ga.pageView(e.urlAfterRedirects)})}initZendesk(){this.zendeskService.updateFromProfile(),Object(w.a)(window,"resize").pipe(Object(x.a)(this.compatibilityService.isHoverSupported()),Object(C.a)(100),Object(S.a)(()=>this.compatibilityService.isHoverSupported()),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.zendeskService.setHelpCenterSuggestions({labels:[e?"webhelp":"mobilehelp"]})}),this.userProfile$.pipe(Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.zendeskService.identify(e),this.zendeskService.updateFromProfile(e)}),this.userLocale$.pipe(Object(v.a)(e=>!Object(P.isNil)(e)),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.zendeskService.setLocale(e.lang)})}initPendo(){this.pendoService.appendScript(),this.pendoService.initialize({visitor:{},account:{}}),this.userProfile$.pipe(Object(v.a)(e=>null!=e),Object(O.a)(1),Object(l.a)(this.ngUnsubscribe)).subscribe(e=>{this.setPendoVisitorData(e)})}setPendoVisitorData(e){this.pendoService.identify({visitor:this.pendoService.createVisitorData(e),account:this.pendoService.createAccountData(e.organizations[0])})}checkProfileAccess(e){const t=this.authService.getProfileRestrictions(e),n=this.storageService.getLocalJSON(k.b.GroupRestriction);!0!==Object(P.get)(n,"dontShowDialog")&&(t.email||t.ip)&&setTimeout(()=>{const e={id:F.a.GroupRestrictionDialog,width:"480px",height:"auto",data:Object.assign({},t)};this.dialog.open(z,e)})}initNativeAPIHooks(){window.HumanWindowAPI=N.a,N.a.setStore(this.store),N.a.setSnackBar(this.snackBar),N.a.setRouter(this.router),this.widgetAPIHandler.listen(!1),this.engineService.fireEvent(D.a.HumanStarted,null),this.actions.pipe(Object(_.l)(E.j)).subscribe(()=>{this.engineService.fireEvent(D.a.NativeDeleteData,null)})}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(R.a),i.Pb(V.c),i.Pb(B.a),i.Pb(k.d),i.Pb(H.a),i.Pb(I.b),i.Pb(r.e),i.Pb(r.a),i.Pb(i.S),i.Pb(Q.a),i.Pb(G.b),i.Pb(Tn),i.Pb(q.a),i.Pb(_.h),i.Pb(_.b),i.Pb(Un.a),i.Pb(Gt.a),i.Pb(Ln.b),i.Pb(s.c),i.Pb(zn))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-root"]],decls:4,vars:0,template:function(e,t){1&e&&(i.Qb(0,"app-user-access"),i.Qb(1,"app-offline-message"),i.Qb(2,"app-engine"),i.Qb(3,"router-outlet"))},directives:[di,hi,ss,r.j],styles:[""],changeDetection:0}),os([Object(_.e)(M.a.getUserProfile),rs("design:type",j.a)],e.prototype,"userProfile$",void 0),os([Object(_.e)(M.a.getUserLocale),rs("design:type",j.a)],e.prototype,"userLocale$",void 0),e})();var ls=n("xuHu"),ps=n("Tx//");let us=(()=>{class e{intercept(e,t){return t.handle(e).pipe(Object(S.a)(e=>(e instanceof gn.e&&e.body&&e.body.hasOwnProperty("results")&&(e=e.clone({body:e.body.results})),e)))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac}),e})();var ds=n("S6v9"),gs=n("AIoM"),hs=n("fP/T"),bs=n("vvyD"),ms=n("PCNd"),fs=n("hQIT");let ys=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[u.c,bs.a,ms.a,fs.a,_.d.forFeature([Wn.a])]]}),e})();var vs=n("u9Xo"),Os=n("TEF2"),Ss=n("INTG"),xs=n("jCJ1");let Cs=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},providers:[{provide:xs.b,useValue:a.a.recaptchaKey}],imports:[[_.d.forFeature([M.a,Os.a]),u.c,Ss.a,xs.d]]}),e})(),ws=(()=>{class e{parse(e){e=e.replace(/&amp;/g,"&");const t=(new r.b).parse(e);return this.ensureQueryParam(t.queryParams,"dk",e),this.ensureQueryParam(t.queryParams,"uaid",e),t}serialize(e){return(new r.b).serialize(e).replace(/%2F/g,"/")}ensureQueryParam(e,t,n){if(e.hasOwnProperty(t))return e;const i=this.getParameterByName(t,n);return null!==i&&(e[t]=i),e}getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac}),e})(),js=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[_.d.forFeature([Gn.a]),u.c]]}),e})();var ks=n("/75k");let Ps=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[_.d.forFeature([ks.a]),u.c]]}),e})();var _s=n("E+WR");let Ms=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[_.d.forFeature([_s.a]),u.c]]}),e})();var Is=n("CL6y");let Ts=(()=>{class e{constructor(){}static forRoot(t){return{ngModule:e,providers:[G.b,{provide:"pendoConfig",useValue:t}]}}}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[]]}),e})(),Us=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[Q.a,{provide:"linkedinConfig",useValue:t}]}}}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[]]}),e})();var Ls=n("wSC8");let zs=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[u.c,r.i,ms.a,ti.a.forChild()]]}),e})();var As=n("CSvP"),Fs=n("lMGN");let Ds=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[u.c,_.d.forFeature([Fs.a])]]}),e})();var Es=n("rYhz");let Ns=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[u.c,_.d.forFeature([Es.a])]]}),e})();immer.enableAllPlugins(),immer.enableES5();const Rs=a.a.application===m.a.Studio,Vs=[{provide:gn.a,useClass:us,multi:!0},{provide:r.k,useClass:ws},{provide:xs.a,useValue:"https://recaptcha.net/recaptcha/api.js"}];let Bs=(()=>{class e{}return e.\u0275mod=i.Nb({type:e,bootstrap:[cs]}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},providers:Vs,imports:[[_.d.forRoot(),V.d.forRoot(a.a.googleAnalyticsId),Us.forRoot({enabled:Rs,linkedinId:a.a.linkedinId}),Ts.forRoot({enabled:Rs,pendoId:a.a.pendoId,idPrefixes:{[Ls.a.Local]:"local-",[Ls.a.QA]:"qa-",[Ls.a.Staging]:"staging-",[Ls.a.Production]:""}}),Ss.a.forRoot(),Is.a,o.b,s.a,gn.c,Cs,gs.a,js,ds.a,ps.a,ys,Ds,hs.a,ms.a,Ps,a.a.application===m.a.Loft?Ms:[],vs.a,y,ls.a.forRoot({disabled:a.a.production}),zs,Ns,As.b]]}),e})();a.a.production&&Object(i.V)(),s.d().bootstrapModule(Bs).catch(e=>console.error(e))},zlNa:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Content=0]="Content",e[e.Label=1]="Label",e[e.Tools=2]="Tools",e[e.Search=3]="Search",e[e.Help=4]="Help",e[e.NodeInfo=5]="NodeInfo",e[e.LabelInfo=6]="LabelInfo",e}({})},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"},zp9f:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("AcyG"),a=n("eW6i"),s=n("5miH"),o=n("TATr"),r=n("0UUK"),c=n("3fyd"),l=n("WUhe"),p=n("FFWI"),u=n("Mh2x"),d=n("WwWM"),g=n("fXoL");let h=(()=>{class e{constructor(e,t,n){this.store=e,this.engineService=t,this.viewService=n}startQuiz(){this.viewService.toggleColumn(!0),this.store.dispatch(new l.a.SetQuizActive(!0));const e=this.store.selectSnapshot(p.b.getAllQuestions)[0].id;this.store.dispatch(new l.a.SetActiveQuestion(e))}resetQuiz(){this.viewService.clearFadedNodes(),this.viewService.clearSelectedNodes(),this.store.dispatch(new l.a.SetQuizActive(!1)),this.store.dispatch(new l.a.SetActiveSubmission(void 0)),this.store.dispatch(new l.a.ClearSubmissions),this.store.dispatch(new l.a.SetQuizLifecycle(r.a.Question))}exitQuiz(){this.resetQuiz(),setTimeout(()=>{this.store.dispatch(new o.l(this.store.selectSnapshot(u.a.getChapterCamera),!1))})}submitQuestion(e,t){const n=this.store.selectSnapshot(p.b.getAllQuestions).find(t=>t.id===e),{launchMode:i,quizSettings:a}=this.store.selectSnapshot(p.b);this.store.dispatch(new l.a.SubmitQuestionAnswer({questionId:n.id,answer:t})),this.store.dispatch(new l.a.SetActiveSubmission({questionId:n.id,answer:t})),this.engineService.fireEvent(s.a.QuizAnswerSubmitted,{questionId:n.id,answer:t}),i===p.a.Learning&&n.type!==c.a.Instructions&&!1!==a.showExplanation?this.store.dispatch(new l.a.SetQuizLifecycle(r.a.Explanation)):this.nextQuestion()}nextQuestion(){this.store.selectSnapshot(p.b.hasQuestionRemaining)?(this.store.dispatch(new l.a.SetQuizLifecycle(r.a.Question)),this.viewService.clearFadedNodes(),this.viewService.clearSelectedNodes(),this.store.dispatch(new l.a.NextQuestion)):(this.store.dispatch(new l.a.SetQuizLifecycle(r.a.Review)),this.engineService.fireEvent(s.a.QuizCompleted,!0))}}return e.\u0275fac=function(t){return new(t||e)(g.Zb(i.h),g.Zb(a.a),g.Zb(d.a))},e.\u0275prov=g.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},zrlG:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("b36G");class a{}var s=n("ZR5G"),o=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let r=(()=>{class e{constructor(){this.type=s.a.Bookmark,this.favorite=!1,this.unavailable=!1}}return function(e,t,n,i){var a,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([Object(i.Type)(()=>a),o("design:type",Array)],e.prototype,"group_access",void 0),e})()}},[[0,2,12]]]);