!function(){function e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function t(){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=n(e,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}}).apply(this,arguments)}function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,a,o=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);r=!0);}catch(c){s=!0,a=c}finally{try{r||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+/zV":function(e,t,n){"use strict";n.d(t,"b",(function(){return Z})),n.d(t,"a",(function(){return J}));var i=n("0IaG"),a=n("AcyG"),o=n("eKhQ"),r=n("XNiG"),s=n("LRne"),c=n("itXk"),u=n("HDdC"),l=n("3Pt+"),d=n("Lyqc"),g=n("Kj3r"),f=n("pLZG"),m=n("IzEk"),y=n("1G5W"),v=n("a0wz"),k=n("QtmD"),O=n("LvDl"),S=n("ECVi"),x=n("0Zsz"),C=n("QkH1"),w=n("WoAB"),j=n("J9/X"),P=n("fXoL"),_=n("dNgK"),M=n("7PKw"),I=n("MuXT"),T=n("ofXK"),U=n("Y8QC"),L=n("oOZS"),z=n("IlST"),A=n("kmnG"),F=n("QibW"),D=n("bSwM"),E=n("XoCC"),N=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},R=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function V(e,t){if(1&e&&(P.Vb(0,"p",15),P.Pc(1),P.Ub()),2&e){var n=P.gc();P.Db(1),P.Rc(" ",n.settings.message," ")}}function B(e,t){1&e&&(P.Vb(0,"mat-error"),P.Pc(1,"Please enter a valid title."),P.Ub())}function H(e,t){1&e&&(P.Vb(0,"app-form-field",18),P.Vb(1,"mat-radio-group",19),P.Vb(2,"mat-radio-button",20),P.Pc(3,"Private "),P.Ub(),P.Vb(4,"mat-radio-button",21),P.Pc(5,"Team - View Only "),P.Ub(),P.Vb(6,"mat-radio-button",22),P.Pc(7,"Team - View & Edit "),P.Ub(),P.Ub(),P.Ub())}function Q(e,t){if(1&e&&(P.Vb(0,"div",25),P.Vb(1,"mat-checkbox",26),P.Pc(2),P.Ub(),P.Ub()),2&e){var n=t.$implicit;P.mc("formGroupName",t.index),P.Db(2),P.Rc(" ",n.get("title").value," ")}}function G(e,t){if(1&e&&(P.Vb(0,"app-form-field",23),P.Nc(1,Q,3,2,"div",24),P.Ub()),2&e){var n=P.gc(2);P.Db(1),P.mc("ngForOf",n.collectionsArray.controls)}}function W(e,t){if(1&e&&(P.Vb(0,"div"),P.Nc(1,H,8,0,"app-form-field",16),P.Nc(2,G,2,1,"app-form-field",17),P.hc(3,"async"),P.Ub()),2&e){var n,i=P.gc();P.Db(1),P.mc("ngIf",i.isNew||i.isOwner),P.Db(1),P.mc("ngIf",(null==(n=P.ic(3,2,i.collections$))?null:n.length)>0)}}function q(e,t){1&e&&(P.Vb(0,"div"),P.Vb(1,"app-form-field",27),P.Vb(2,"mat-checkbox",28),P.Vb(3,"span",29),P.Pc(4,"With the BioDigital Community"),P.Ub(),P.Ub(),P.Ub(),P.Ub())}function X(e,t){1&e&&P.Qb(0,"app-spinner",30)}var Z=function(e){return e[e.SaveStory=0]="SaveStory",e[e.Manage=1]="Manage",e[e.Copy=2]="Copy",e[e.Duplicate=3]="Duplicate",e}({}),J=function(){var e=function(){function e(t,n,i,o,s,c,u,p,f){var b=this;h(this,e),this.store=t,this.fb=n,this.dialogRef=i,this.data=o,this.snackbar=s,this.actions=c,this.organizationsService=u,this.storyService=p,this.changeRef=f,this.disablePristine=!1,this.collectionsDirty=!1,this.nameAccessDirty=!1,this.collectionsLoading=!1,this.collectionsEnabled=!1,this.collectionsMap=new Map,this.contentCollections=new Map,this.submit=new r.a,this.settings={mode:Z.SaveStory},this.saveBookmarkDialogMode=Z,this.canAddTeamBookmarks=!1,this.ngUnsubscribe=new r.a,this.settings=Object.assign(Object.assign({},this.settings),o);var m=this.settings.bookmark;this.groupModule=!!m&&C.l(m),this.form=this.fb.group({title:[{value:"",disabled:this.groupModule},[l.C.required,l.C.maxLength(60)]],collections:new l.d([]),groupAccess:[{value:null,disabled:this.groupModule}],publicAccess:[!1]}),this.collectionsArray=this.form.get("collections"),this.actions.pipe(Object(a.l)(d.B),Object(y.a)(this.ngUnsubscribe)).subscribe((function(e){return b.handleSaveSuccess(e)})),this.actions.pipe(Object(a.l)(d.A),Object(y.a)(this.ngUnsubscribe)).subscribe((function(e){return b.handleSaveFailure(e.bookmarkEntry.title)})),this.actions.pipe(Object(a.l)(d.l),Object(y.a)(this.ngUnsubscribe)).subscribe((function(e){return b.handleCopySuccess(e)})),this.actions.pipe(Object(a.l)(d.k),Object(y.a)(this.ngUnsubscribe)).subscribe((function(e){return b.handleCopyFailure(e)})),this.groupModule&&(this.actions.pipe(Object(a.l)(d.L),Object(y.a)(this.ngUnsubscribe)).subscribe((function(e){b.handleSaveSuccess(e),b.store.dispatch(new j.a.SearchStudio)})),this.actions.pipe(Object(a.l)(d.K),Object(y.a)(this.ngUnsubscribe)).subscribe((function(e){return b.handleSaveFailure(e.bookmark.title)}))),this.submit.pipe(Object(g.a)(100),Object(y.a)(this.ngUnsubscribe)).subscribe((function(){return b.onDebouncedSubmit()}))}return b(e,[{key:"saving$",get:function(){return this.settings.mode===Z.Copy?this.bookmarkCopying$:this.bookmarkSaving$}},{key:"dialogTitle",get:function(){if(this.settings.title)return this.settings.title;switch(this.settings.mode){case Z.Manage:return"Manage";case Z.SaveStory:return"Save";case Z.Copy:return"Add to My Library";case Z.Duplicate:return"Duplicate"}}},{key:"ngOnInit",value:function(){var e=this,t=this.store.selectSnapshot(o.a.getOrganization);t&&!this.store.selectSnapshot(o.a.getCollections)&&this.store.dispatch(new v.h(t.id));var n=this.settings.bookmark,i=n?n.title:this.settings.bookmarkTitle?this.settings.bookmarkTitle:"";this.settings.mode===Z.Duplicate&&(i=("Copy of "+i).slice(0,60));var a=!1,r=!1,s=n?this.getGroupAccess(n):null;this.groupModule?(a=!1,r=!0):s?r=!(a=s.member_edit)&&s.visible:!n&&t&&(a=!1,r=!0);var c=!this.isGroupUser()&&n&&n.tags.includes("public");if(this.form.patchValue({title:i,groupAccess:a?"edit":r?"view":"",publicAccess:c}),this.trackNameAccessDirty(),this.isNew=!0,this.isOwner=!0,n){var u=this.store.selectSnapshot(S.a.getUserRole);C.e(u,n)?(this.isNew=!1,this.isOwner=!0):(this.isNew=!0,this.isOwner=this.isNew)}this.initGroupAccess(),this.initCollections(),this.toggleGroupAccess(r,a),this.initPermissions(),this.dialogRef.beforeClosed().pipe(Object(y.a)(this.ngUnsubscribe)).subscribe((function(){e.checkCanceSave()}))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initGroupAccess",value:function(){var e=this;this.form.get("groupAccess").valueChanges.pipe(Object(y.a)(this.ngUnsubscribe)).subscribe((function(t){e.toggleGroupAccess("view"===t,"edit"===t)}))}},{key:"initCollections",value:function(){var e=this,t=this.settings.bookmark,n=this.store.selectSnapshot(o.a.getOrganization),i=Object(s.a)([]);n&&t&&(this.collectionsLoading=!0,i=this.organizationsService.getCollections({group_id:n.id,content_type:t.type,content_id:t.id,include_content:1})),Object(c.b)([this.collections$,i]).pipe(Object(f.a)((function(e){var t=p(e,1)[0];return!Object(O.isNil)(t)})),Object(y.a)(this.ngUnsubscribe)).subscribe((function(t){var n=p(t,2),i=n[0];n[1].forEach((function(t){e.contentCollections.set(t.collection_id,Object(O.get)(t,"collection_content[0].collection_content_id",null))})),e.collectionsArray.clear(),i.forEach((function(t){e.collectionsMap.set(t.collection_id,t);var n=e.contentCollections.get(t.collection_id);e.collectionsArray.push(e.fb.group({title:t.collection_name,id:t.collection_id,checked:[{value:!Object(O.isNil)(n),disabled:!e.collectionsEnabled}]}))})),e.trackCollectionsDirty(),e.collectionsLoading=!1,e.changeRef.markForCheck()}))}},{key:"trackNameAccessDirty",value:function(){var e=this,t={title:this.form.value.title,groupAccess:this.form.value.groupAccess,publicAccess:this.form.value.publicAccess};this.form.valueChanges.pipe(Object(y.a)(this.ngUnsubscribe)).subscribe((function(n){var i={title:n.title,groupAccess:n.groupAccess,publicAccess:n.publicAccess};e.nameAccessDirty=!Object(O.isEqual)(t,i),e.setDisablePristine()}))}},{key:"trackCollectionsDirty",value:function(){var e=this,t=this.collectionsArray.value;this.collectionsArray.valueChanges.pipe(Object(y.a)(this.ngUnsubscribe)).subscribe((function(n){e.collectionsDirty=!Object(O.isEqual)(t,n),e.setDisablePristine()}))}},{key:"initPermissions",value:function(){var e=this;Object(c.b)([this.userRole$,this.organization$]).pipe(Object(y.a)(this.ngUnsubscribe)).subscribe((function(t){var n=p(t,2),i=n[0],a=n[1];e.canAddTeamBookmarks=!Object(O.isNil)(a)&&C.k(i,w.a.AddTeamBookmarks),e.changeRef.markForCheck()}))}},{key:"toggleGroupAccess",value:function(e,t){this.setCollectionsEnabled((this.isOwner||this.isNew)&&(e||t))}},{key:"handleSubmit",value:function(){this.form.valid&&this.submit.next()}},{key:"onDebouncedSubmit",value:function(){var e=this.settings.bookmark,t=this.getBookmarkEntry();switch(this.settings.mode){case Z.Duplicate:case Z.Copy:var n=this.store.selectSnapshot(S.a.getUserLanguage),i=this.canAddTeamBookmarks?Object(O.get)(t,"add_group_access[0]"):void 0;this.store.dispatch(new d.j(t.id,t.title,e.type,n,i,this.canAddTeamBookmarks?t.addCollections:void 0));break;case Z.SaveStory:case Z.Manage:this.groupModule?this.store.dispatch(new d.J(e,t.addCollections,t.removeCollections)):this.saveBookmark(e,t)}}},{key:"saveBookmark",value:function(e,t){var n=this,i=this.settings.mode===Z.SaveStory;(e&&e.id&&this.settings.mode===Z.Manage?this.storyService.getStory(e.id,e.type):Object(s.a)(void 0)).pipe(Object(m.a)(1),Object(y.a)(this.ngUnsubscribe)).subscribe((function(e){e&&e.displayName!==t.title&&(t.index=Object.assign(Object.assign({},e),{displayName:t.title})),n.store.dispatch(new d.z(t,!1,i))}))}},{key:"handleCancelClick",value:function(){this.dialogRef.close()}},{key:"handleSaveSuccess",value:function(e){var t=e.bookmark;this.snackbar.open(this.settings.mode===Z.Manage?'Your updates to "'.concat(t.title,'" have been saved to your library.'):'"'.concat(t.title,'" saved to your library.')),this.dialogRef.close(t)}},{key:"handleSaveFailure",value:function(e){this.snackbar.open('Unable to save bookmark "'.concat(e,'". Please try again.'))}},{key:"handleCopySuccess",value:function(e){this.snackbar.open('"'.concat(e.newBookmark.title,'" saved to your library.')),this.dialogRef.close(e.newBookmark)}},{key:"handleCopyFailure",value:function(e){switch(Object(O.get)(e.error,"error.error.message")){case"Action forbidden. Your account content limit has been reached":this.store.dispatch(new x.a.OpenLimit);break;default:this.snackbar.open("There was an error adding to your library")}}},{key:"getBookmarkEntry",value:function(){var e=this,t=this.settings,n=t.bookmark,i=t.viewMode,a=this.form.value,o=a.title,r=a.groupAccess,s=a.publicAccess,c="view"===r,u="edit"===r,l=this.isGroupUser()?null:s,p=[],d=[],g=[],h=new Map;if(this.isOwner){var f=this.createGroupAccess(c,u);f?p=[f]:d=n?n.group_access:[],this.collectionsArray.value.forEach((function(t){var n=e.collectionsMap.get(t.id),i=e.contentCollections.get(t.id);e.collectionsEnabled?(Object(O.isNil)(i)||e.settings.mode===Z.Duplicate)&&t.checked?g.push(n):Object(O.isNil)(i)||t.checked||h.set(n,i):Object(O.isNil)(i)||h.set(n,i)}))}return{isOwner:!n||this.isOwner,id:n?n.id:null,title:o,viewMode:i,add_group_access:p,remove_group_access:d,addCollections:g,removeCollections:h,public_access:l}}},{key:"getGroupAccess",value:function(e){var t=this.store.selectSnapshot(o.a.getOrganization),n=null;if(t&&e.group_access){var i=t.id;n=e.group_access.find((function(e){return e.group_id===i}))}return n}},{key:"createGroupAccess",value:function(e,t){var n=this.store.selectSnapshot(o.a.getOrganization);return n&&(e||t)?{group_id:n.id,member_edit:t,visible:e||t}:null}},{key:"isGroupUser",value:function(){return!!this.store.selectSnapshot(o.a.getOrganization)}},{key:"checkCanceSave",value:function(){this.store.selectSnapshot(this.settings.mode===Z.Copy?k.a.getCopying:k.a.getSaving)&&this.store.dispatch(this.settings.mode===Z.Copy?new d.f:new d.g)}},{key:"setCollectionsEnabled",value:function(e){this.collectionsEnabled=e,this.collectionsArray.controls.forEach((function(t){e?t.enable():t.disable()}))}},{key:"setDisablePristine",value:function(){this.disablePristine=this.settings.mode===Z.Manage&&!this.collectionsDirty&&!this.nameAccessDirty,this.changeRef.markForCheck()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(P.Pb(a.h),P.Pb(l.f),P.Pb(i.g),P.Pb(i.a),P.Pb(_.b),P.Pb(a.b),P.Pb(M.a),P.Pb(I.a),P.Pb(P.i))},e.\u0275cmp=P.Jb({type:e,selectors:[["app-save-bookmark-dialog"]],decls:24,vars:19,consts:[["data-test","saveDialog","role","dialog","aria-modal","true",1,"save"],[3,"formGroup","submit"],["mat-dialog-title",""],["class","save__message",4,"ngIf"],["mat-dialog-content",""],[1,"theme-light"],["theme","light","label","Title"],["type","text","name","title","maxlength","60","autocomplete","off","formControlName","title","required","","aria-label","Title","data-test","bookmarkTitleInput",1,"input"],["title",""],[3,"field"],[4,"ngIf"],["mat-dialog-actions",""],["type","button","app-button","","buttonTheme","light",1,"mr-2",3,"click"],["type","submit","app-button","","buttonType","primary","data-test","saveButton",3,"disabled"],["size","medium","class","ml-2","render","inline",4,"ngIf"],[1,"save__message"],["theme","light","label","Permissions",4,"ngIf"],["theme","light","label","Collection (Optional)","aria-label","Collection (Optional)","data-test","saveCollection","formArrayName","collections",4,"ngIf"],["theme","light","label","Permissions"],["formControlName","groupAccess","aria-label","Permission",1,"save__radio-group","text-12","mt-2"],["value","","data-test","groupAccessPrivateButton",1,"mb-2"],["value","view","data-test","groupAccessViewButton",1,"mb-2"],["value","edit","data-test","groupAccessEditButton"],["theme","light","label","Collection (Optional)","aria-label","Collection (Optional)","data-test","saveCollection","formArrayName","collections"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["data-test","saveCollectionCheckbox","formControlName","checked",1,"save__collection","text-12"],["theme","light","label","Share"],["formControlName","publicAccess",1,"save__permission"],[1,"text-12"],["size","medium","render","inline",1,"ml-2"]],template:function(e,t){if(1&e&&(P.Vb(0,"div",0),P.Vb(1,"form",1),P.cc("submit",(function(){return t.handleSubmit()})),P.Vb(2,"h1",2),P.Pc(3),P.Ub(),P.Nc(4,V,2,1,"p",3),P.Vb(5,"div",4),P.Vb(6,"div",5),P.Vb(7,"app-form-field",6),P.Qb(8,"input",7,8),P.Qb(10,"app-character-counter",9),P.Nc(11,B,2,0,"mat-error",10),P.Ub(),P.Nc(12,W,4,4,"div",10),P.Nc(13,q,5,0,"div",10),P.hc(14,"async"),P.Ub(),P.Ub(),P.Vb(15,"div",11),P.Vb(16,"button",12),P.cc("click",(function(){return t.handleCancelClick()})),P.Pc(17," Cancel "),P.Ub(),P.Vb(18,"button",13),P.hc(19,"async"),P.Pc(20),P.hc(21,"async"),P.Nc(22,X,1,0,"app-spinner",14),P.hc(23,"async"),P.Ub(),P.Ub(),P.Ub(),P.Ub()),2&e){var n=P.yc(9);P.Eb("aria-label",t.dialogTitle),P.Db(1),P.mc("formGroup",t.form),P.Db(2),P.Rc(" ",t.dialogTitle," "),P.Db(1),P.mc("ngIf",t.settings.message),P.Db(6),P.mc("field",n),P.Db(1),P.mc("ngIf",t.form.get("title").invalid),P.Db(1),P.mc("ngIf",t.canAddTeamBookmarks),P.Db(1),P.mc("ngIf",!P.ic(14,11,t.organization$)&&t.settings.mode!==t.saveBookmarkDialogMode.Copy),P.Db(5),P.mc("disabled",t.disablePristine||t.collectionsLoading||P.ic(19,13,t.saving$)),P.Db(2),P.Rc(" ",P.ic(21,15,t.saving$)?"Saving":"Save"," "),P.Db(2),P.mc("ngIf",P.ic(23,17,t.saving$))}},directives:[l.E,l.s,l.j,i.h,T.p,i.e,U.a,l.c,l.m,l.r,l.i,l.A,L.a,i.c,z.a,A.b,F.b,F.a,l.e,T.o,l.k,D.a,E.a],pipes:[T.b],styles:[".save__message[_ngcontent-%COMP%]{color:#61779e;margin:12px auto;font-size:12px}.save__radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.save__permission[_ngcontent-%COMP%]{display:block;margin:4px auto}.save__collection.mat-checkbox-disabled[_ngcontent-%COMP%]{opacity:.5}@media (min-width:768px){.save[_ngcontent-%COMP%]{min-width:380px}}@media (max-width:767px){.save[_ngcontent-%COMP%]{min-width:65vw}}"],changeDetection:0}),N([Object(a.e)(S.a.getUserRole),R("design:type",u.a)],e.prototype,"userRole$",void 0),N([Object(a.e)(o.a.getOrganization),R("design:type",u.a)],e.prototype,"organization$",void 0),N([Object(a.e)(o.a.getCollections),R("design:type",u.a)],e.prototype,"collections$",void 0),N([Object(a.e)(k.a.getSaving),R("design:type",u.a)],e.prototype,"bookmarkSaving$",void 0),N([Object(a.e)(k.a.getCopying),R("design:type",u.a)],e.prototype,"bookmarkCopying$",void 0),e}()},"+1W3":function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return y})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return k})),n.d(t,"h",(function(){return O})),n.d(t,"d",(function(){return S}));var i=n("WFQG"),a=n("snBo"),o=(n("jDQD"),n("+6Fv"),n("LvDl")),r=n("mtgE"),s=n("stSV"),c=i.c.ui,p=function e(){h(this,e)},d=function(e,t){return void 0===e?t:e};function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!!t.some((function(e){return!0===e}))||!t.some((function(e){return!1===e}))&&void 0}function f(e,t,n){return Object.values(r.a).indexOf(n)>=0?n:!1===e?r.a.None:null!=t?t?r.a.Full:r.a.Small:null}function b(e){return Object.values(s.a).includes(e)?e:null}function m(e){var t,n=null!=e.all?v(e.all):new p;return O((l(t={all:e.all},a.a.Loader,b(e.loader)),l(t,a.a.Help,g(e.help,e.help)),l(t,a.a.Tools,g(e.tools,e.tools)),l(t,a.a.Layout,e.layout),l(t,a.a.Toolbar,e.toolbar),l(t,a.a.Fullscreen,g(e.fullscreen,e.fullscreen)),l(t,a.a.Search,g(e.objectTree,e.search)),l(t,a.a.Audio,e.audio),l(t,a.a.Media,f(e.playPause,g(e.scrubber,e["scrubber.chapters"]),e.media)),l(t,a.a.Camera,g(e.nav,e.cameraMode,e.center,e.zoomIn,e.zoomOut,e.nav)),l(t,a.a.Pagination,g(e.tour,e["tour.chapters"])),l(t,a.a.Column,g(e.info,e.info)),l(t,a.a.Drawer,g(e.info,e.info)),l(t,a.a.TitleOnly,g(e.info,e.info)),l(t,a.a.LabelList,g(e.labelList,e.labelList)),l(t,a.a.NodeInfo,e.anatomyDescriptions),l(t,a.a.Legend,e.legend),l(t,a.a.Menu,e.menu),l(t,a.a.InternetExplorerWarning,void 0),l(t,a.a.Logo,e.logo),l(t,a.a.Labels,void 0),l(t,a.a.Presenter,void 0),l(t,"logoIsHyperLink",void 0),l(t,"drawerExpandedInitially",void 0),l(t,a.a.Tutorial,void 0),l(t,a.a.AnatomyLabels,g(e.anatomyLabels,e.anatomyLabels)),l(t,a.a.Undo,g(e.reset,e.undo)),l(t,a.a.Whiteboard,e.whiteboard),l(t,a.a.VisibilityLayers,e.visibilityLayers),l(t,a.a.ContextActions,e.contextActions),l(t,a.a.ToggleLabels,void 0),t),n)}function y(e){if(!e||!e.config)return null;var t=new p;return t[a.a.Column]=e.config.info,t[a.a.Drawer]=e.config.info,t[a.a.Fullscreen]=e.config.fullscreen,t[a.a.Search]=e.config.objectTree,t[a.a.Camera]=e.config.nav,t[a.a.Loader]=b(e.config.loader),t[a.a.Whiteboard]=e.config.whiteboard,t[a.a.VisibilityLayers]=e.config.visibilityLayers,t[a.a.ContextActions]=e.config.contextActions,t[a.a.Media]=f(e.config.playPause,e.config.scrubber,e.config.mediaControls),t}function v(e){var t;return l(t={},a.a.Loader,e?s.b:s.a.None),l(t,a.a.Column,e),l(t,a.a.Drawer,e),l(t,a.a.Tools,e),l(t,a.a.Toolbar,e),l(t,a.a.Fullscreen,e),l(t,a.a.Help,e),l(t,a.a.Camera,e),l(t,a.a.Search,e),l(t,a.a.Presenter,e),l(t,a.a.Menu,e),l(t,a.a.Audio,e),l(t,a.a.Pagination,e),l(t,a.a.NodeInfo,e),l(t,a.a.Labels,null),l(t,a.a.LabelList,e),l(t,a.a.Media,null),l(t,a.a.TitleOnly,e),l(t,a.a.Undo,e),l(t,"all",e),l(t,"drawerExpandedInitially",null),l(t,"logoIsHyperLink",null),l(t,a.a.AnatomyLabels,null),l(t,a.a.Logo,!0),l(t,a.a.Tutorial,null),l(t,a.a.InternetExplorerWarning,!0),l(t,a.a.Legend,!0),l(t,a.a.Whiteboard,e),l(t,a.a.VisibilityLayers,e),l(t,a.a.ContextActions,e),l(t,a.a.ToggleLabels,!0),t}function k(){var e=new p;return e.search=!1,e.pagination=!1,e.labelList=!1,e.labels=!1,e.anatomyLabels=!1,e.nodeInfo=!1,e.toggleLabels=!1,e.legend=!1,e}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null==t?e:Object(o.uniq)([].concat(u(Object.keys(e)),u(Object.keys(t)))).reduce((function(i,a){return i[a]=null==e[a]||n&&null!=t[a]?t[a]:e[a],i}),new p)}function S(e,t){var n=JSON.parse(JSON.stringify(e));return n.loader.enable=d(t[a.a.Loader]!==s.a.None,c.loader.enable),null!=t[a.a.Loader]&&(n.loader.template=t[a.a.Loader]),n.nodeInfo.enable=d(t[a.a.NodeInfo],c.nodeInfo.enable),n.pagination.enable=d(t[a.a.Pagination],c.pagination.enable),n.drawer.isExpandedInitially=d(t.drawerExpandedInitially,c.drawer.isExpandedInitially),n.tools.enable=d(t[a.a.Tools],c.tools.enable),n.toolbar.enable=d(t[a.a.Toolbar],c.toolbar.enable),n.media.enable=d(t[a.a.Media]!==r.a.None,c.media.enable),n.media.template=t[a.a.Media],n.fullscreen.enable=d(t[a.a.Fullscreen],c.fullscreen.enable),n.help.enable=d(t[a.a.Help],c.help.enable),n.description.enable=d(t[a.a.Description],c.description.enable),n.titleOnly.enable=d(t[a.a.TitleOnly],c.titleOnly.enable),n.camera.enable=d(t[a.a.Camera],c.camera.enable),n.search.enable=d(t[a.a.Search],c.search.enable),n.presenter.enable=d(t[a.a.Presenter],c.presenter.enable),n.menu.enable=d(t[a.a.Menu],c.menu.enable),n.logo.enable=d(t[a.a.Logo],c.logo.enable),n.logo.isHyperLink=d(t.logoIsHyperLink,c.logo.isHyperLink),n.internetExplorerWarning.enable=d(t.internetExplorerWarning,c.internetExplorerWarning.enable),n.undo.enable=d(t[a.a.Undo],c.undo.enable),n.labels.enable=d(t[a.a.Labels],c.labels.enable),n.labelList.enable=d(t[a.a.LabelList],c.labelList.enable),n.audio.enable=d(t[a.a.Audio],c.audio.enable),n.reset.enable=d(t[a.a.Reset],c.reset.enable),n.column.enable=d(t[a.a.Column],c.column.enable),n.drawer.enable=d(t[a.a.Drawer],c.drawer.enable),n.anatomyLabels.enable=d(t[a.a.AnatomyLabels],c.anatomyLabels.enable),n.tutorial.enable=d(t[a.a.Tutorial],c.tutorial.enable),n.whiteboard.enable=d(t[a.a.Whiteboard],c.whiteboard.enable),n.visibilityLayers.enable=d(t[a.a.VisibilityLayers],c.visibilityLayers.enable),n.contextActions.enable=d(t[a.a.ContextActions],c.contextActions.enable),n.toggleLabels.enable=d(t[a.a.ToggleLabels],c.toggleLabels.enable),n}},"+6Fv":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Play="play",e.Button="button",e.Hand="hand",e}({})},"+8WF":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n("AytR"),a=n("p345"),o=function(e){return e[e.List=0]="List",e[e.Card=1]="Card",e}({}),r=i.a.application===a.a.Loft?o.List:o.Card},"+DiI":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("LRne"),a=n("ZULQ");function o(e){return function(t){var n=a.a.parseEmails(t.value),o=n.filter((function(e){return!a.a.validateEmail(e)})),r=n.length,s="number"==typeof e&&r>e,c={};return s&&(c=Object.assign(Object.assign({},c),{maxEmailsExceeded:s,currentEmailCount:r})),o.length>0&&(c=Object.assign(Object.assign({},c),{invalidEmails:o})),Object.keys(c).length>0?Object(i.a)(c):Object(i.a)(null)}}},"+QY/":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("ofXK"),a=n("+rOU"),o=n("S+jl"),r=n("+pSP"),s=n("EWj2"),c=n("PCNd"),u=n("fXoL"),l=function(){var e=function e(){h(this,e)};return e.\u0275mod=u.Nb({type:e}),e.\u0275inj=u.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.f,o.a,r.a,s.a,c.a]]}),e}()},"+Xsx":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),a=n("fXoL"),o=function(){var e=function e(){h(this,e)};return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e}()},"+pSP":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),a=n("fXoL"),o=function(){var e=function e(){h(this,e)};return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e}()},"/75k":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("AcyG"),a=n("JaAu"),o=n("Mh2x"),r=n("CAXj"),s=n("LvDl"),c=n("fXoL"),l=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d={stacksForChapter:{}},g=function(){var e=function(){function e(t){h(this,e),this.store=t}return b(e,[{key:"reset",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.stacksForChapter={}})))}},{key:"undoAll",value:function(e,t){var n=e.getState();if(void 0!==n.stacksForChapter[t.chapterId]){var i=u(n.stacksForChapter[t.chapterId].undoStack).reverse(),a=i.flat().reduce((function(e,t){return void 0===e[t.patchAction]&&(e[t.patchAction]={action:t.patchAction,patches:[]}),e[t.patchAction].patches=[].concat(u(e[t.patchAction].patches),u(t.inverse)),e}),{});Object.keys(a).forEach((function(t){e.dispatch(new a[t].action(a[t].patches))}));var o=immer.produce(n,(function(e){e.stacksForChapter[t.chapterId].undoStack=[],e.stacksForChapter[t.chapterId].redoStack=i}));e.patchState(o)}}},{key:"preserveState",value:function(e,t){var n=this.store.selectSnapshot(o.a.getSelectedChapterId),i=immer.produce(e.getState(),(function(e){0!==t.patches.length&&(t.patches.some((function(e){return 0===e.forward.length}))&&t.patches.some((function(e){return 0===e.inverse.length}))||(void 0===e.stacksForChapter[n]&&(e.stacksForChapter[n]={redoStack:[],undoStack:[]}),e.stacksForChapter[n].redoStack=[],e.stacksForChapter[n].undoStack.push(t.patches)))}));e.patchState(i)}},{key:"redo",value:function(e,t){var n=e.getState(),i=Object(s.get)(n.stacksForChapter[t.chapterId],"redoStack",[]);if(0!==i.length){var a=i[i.length-1],o=immer.produce(n,(function(e){e.stacksForChapter[t.chapterId].redoStack.pop(),e.stacksForChapter[t.chapterId].undoStack.push(a)}));e.patchState(o),a.forEach((function(t){e.dispatch(new t.patchAction(t.forward))}))}}},{key:"undo",value:function(e,t){var n=e.getState(),i=Object(s.get)(n.stacksForChapter[t.chapterId],"undoStack",[]);if(0!==i.length){var a=i[i.length-1],o=immer.produce(n,(function(e){e.stacksForChapter[t.chapterId].undoStack.pop(),e.stacksForChapter[t.chapterId].redoStack.push(a)}));e.patchState(o),a.forEach((function(t){e.dispatch(new t.patchAction(t.inverse))}))}}}],[{key:"canUndo",value:function(e,t){return e.stacksForChapter[t.selectedChapter].undoStack.length>0}},{key:"canRedo",value:function(e,t){return e.stacksForChapter[t.selectedChapter].redoStack.length>0}},{key:"getUndoCount",value:function(e,t){return e.stacksForChapter[t.selectedChapter].undoStack.length||0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Zb(i.h))},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac}),l([Object(i.a)(a.a.Reset),p("design:type",Function),p("design:paramtypes",[Object,a.a.Reset]),p("design:returntype",void 0)],e.prototype,"reset",null),l([Object(i.a)(a.a.UndoAll),p("design:type",Function),p("design:paramtypes",[Object,a.a.UndoAll]),p("design:returntype",void 0)],e.prototype,"undoAll",null),l([Object(i.a)(a.a.SavePatches),p("design:type",Function),p("design:paramtypes",[Object,a.a.SavePatches]),p("design:returntype",void 0)],e.prototype,"preserveState",null),l([Object(i.a)(a.a.Redo),p("design:type",Function),p("design:paramtypes",[Object,a.a.Redo]),p("design:returntype",void 0)],e.prototype,"redo",null),l([Object(i.a)(a.a.Undo),p("design:type",Function),p("design:paramtypes",[Object,a.a.Undo]),p("design:returntype",void 0)],e.prototype,"undo",null),l([Object(i.f)([o.a]),p("design:type",Function),p("design:paramtypes",[Object,r.a]),p("design:returntype",Boolean)],e,"canUndo",null),l([Object(i.f)([o.a]),p("design:type",Function),p("design:paramtypes",[Object,r.a]),p("design:returntype",Boolean)],e,"canRedo",null),l([Object(i.f)([o.a]),p("design:type",Function),p("design:paramtypes",[Object,r.a]),p("design:returntype",Number)],e,"getUndoCount",null),e=l([Object(i.g)({name:"undo",defaults:d})],e)}()},"/EfZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("vXdC"),a=n("LvDl"),o=n("vXBk"),r=n("fXoL");function s(){return window}var c=function(){var e=function(){function e(t){var n=this;if(h(this,e),!t.accountUrl)throw new Error("Missing accountUrl. Please set in app config via ZendeskWidgetProvider");this.window=s();var i=this.window;i.zEmbed||function(e,n){var a,o,r,s,c=[],u=document.createElement("iframe");i.zEmbed=function(){c.push(arguments)},i.zE=i.zE||i.zEmbed,u.src="javascript:false",u.title="",u.style.cssText="display: none",(r=(r=document.getElementsByTagName("script"))[r.length-1]).parentNode.insertBefore(u,r),s=u.contentWindow.document;try{o=s}catch(e){a=document.domain,u.src='javascript:var d=document.open();d.domain="'+a+'";void(0);',o=s}o.open()._l=function(){var e=this.createElement("script");a&&(this.domain=a),e.id="js-iframe-async",e.src="https://assets.zendesk.com/embeddable_framework/main.js",this.t=+new Date,this.zendeskHost=t.accountUrl,this.zEQueue=c,this.body.appendChild(e)},o.write('<body onload="document._l();">'),o.close()}(),this.window.zE((function(){t.beforePageLoad(n.window.zE)}))}return b(e,[{key:"setLocale",value:function(e){var t=this;this.window.zE((function(){t.window.zE.setLocale(e)}))}},{key:"identify",value:function(e){var t=this;this.window.zE((function(){Object(a.isNil)(e)?t.window.zE("webWidget","clear"):t.window.zE.identify({name:t.getUserFullName(e),email:e.email})}))}},{key:"hide",value:function(){var e=this;this.window.zE((function(){e.window.zE.hide()}))}},{key:"show",value:function(){var e=this;this.window.zE((function(){e.window.zE.show()}))}},{key:"activate",value:function(e){var t=this;this.window.zE((function(){t.window.zE.activate(e)}))}},{key:"showWidget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"help";this.hide(),this.setSettings({webWidget:{helpCenter:{suppress:"contact"===e}}}),this.activate({hideOnClose:!0})}},{key:"setHelpCenterSuggestions",value:function(e){var t=this;this.window.zE((function(){t.window.zE.setHelpCenterSuggestions(e)}))}},{key:"setSettings",value:function(e){var t=this;this.window.zE((function(){t.window.zE("webWidget","updateSettings",e)}))}},{key:"updateFromProfile",value:function(e){var t=[];if(null!=e){var n=e.premium_account,i=e.premium_account_type,a=e.developer_account,r=e.subscription;n?(t.push("premium_account_"+i),r&&t.push("subscription_"+r.subscription_provider)):t.push("free_account"),a&&t.push("developer_account")}var s=Object(o.b)(e);this.setSettings({webWidget:{position:{horizontal:"right",vertical:"bottom"},offset:{horizontal:"0px",vertical:"0px"},contactForm:{suppress:!s,tags:t,fields:[{id:"name",prefill:{"*":this.getUserFullName(e)}}]}}})}},{key:"getUserFullName",value:function(e){if(e){var t=e.first_name,n=e.last_name;return"".concat(t," ").concat(n)}return""}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Zb(i.a))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"/LQR":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("L2KA"),a=n("fXoL"),o=function(){var e=function(){function e(t){h(this,e),this.dialogService=t}return b(e,[{key:"onClick",value:function(e){this.dialogService.openContactDialog()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Pb(i.a))},e.\u0275dir=a.Kb({type:e,selectors:[["","appSupportLink",""]],hostBindings:function(e,t){1&e&&a.cc("click",(function(e){return t.onClick(e)}))("keydown.enter",(function(e){return t.onClick(e)}))}}),e}()},"/MKm":function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return U}));var i=n("LRne"),a=n("cp0P"),o=n("937/"),r=n("dMmY"),s=n("qBAC"),c=n("lJxs"),u=n("eIep"),l=n("JIr8"),d=n("Iab2"),g=n("tk/3"),f=n("lZmj"),m=n("LvDl"),y=n("AytR"),v=n("wSC8"),k=n("PWQe"),O=n("4bFC"),S=n("ofXK"),x=n("7PKw"),C=n("CSvP"),w=n("Ie6O"),j=n("fXoL"),P=n("dNgK"),_=function(e){return e.Single="share.widget.link",e.Bulk="share.widget.export",e}({}),M={headers:new g.d({"Content-Type":"application/json; charset=utf-8"})},I=new s.a,T={id:"embedded-human",dimensions:f.a.dimensions,fullScreen:!0},U=function(){var e=function(){function e(t,n,i,a,o,r,s,c){h(this,e),this.http=t,this.cameraService=n,this.numberService=i,this.orgnanizationService=a,this.contentViewService=o,this.matSnackbar=r,this.APP_BASE_URL=s,this.VIEWER_BASE_URL=c}return b(e,[{key:"exportBookmarks",value:function(e,t,n,o,r,s,l,g){var h=this,f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],b=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"";this.matSnackbar.open("Exporting ".concat(e.length," models to CSV..."));var m=[{label:"Title",field:"title"},{label:"ID",field:"id"},{label:"Collection",field:"collection"},{label:"URL",field:"url"},{label:"iFrame",field:"iFrame"},{label:"Author",field:"author"},{label:"Thumbnail URL",field:"thumbnail_url"},{label:"Created Date",field:"create_date_time"},{label:"Updated Date",field:"update_date_time"}];f&&m.push({label:"Offline Package URL",field:"offline_url"});var y=g?Object(i.a)(null):this.getUAID(_.Bulk),v=f?this.getDownloadURLs(e):Object(i.a)([]),O=new Map,x=n.length?Object(a.a)(n.map((function(e){return h.orgnanizationService.getCollectionContent(t,e.collection_id).pipe(Object(c.a)((function(t){t.forEach((function(t){O.set(t.id,e)}))})))}))):Object(i.a)(!0);return Object(a.a)([y,v,x]).pipe(Object(c.a)((function(t){var n=p(t,2),i=n[0],a=n[1];return e.map((function(e,t){var n,c,u=e.id,p=e.title,d=e.author,f=e.thumbnail_url,m=e.create_date_time,y=e.update_date_time,v=null!==(c=null===(n=O.get(e.id))||void 0===n?void 0:n.collection_name)&&void 0!==c?c:"",k=h.getWidgetURL(e,o,r,null,i,l,g,b),x=h.getWidgetEmbed(k,s),C=h.buildThumbnailURL(f),w=a[t]||"";return{title:p,id:u,collection:v,url:k,iFrame:x,author:d,thumbnail_url:C,create_date_time:Object(S.A)(new Date(m),"shortDate","en"),update_date_time:Object(S.A)(new Date(y),"shortDate","en"),offline_url:w}}))})),Object(u.a)((function(e){return Object(k.a)(e,m)})),Object(u.a)((function(e){var t="BioDigital-Widgets-".concat((new Date).toISOString().split("T")[0],"-export.csv"),n=new Blob([e],{type:"text/csv;charset=utf-8"});return Object(d.saveAs)(n,t),Object(i.a)(!0)})))}},{key:"generateWidgetURL",value:function(e,t,n,o,r,s,u,l){var d=this,g=u||!r?Object(i.a)(null):this.getUAID(r);return Object(a.a)([g,this.contentViewService.trackContentPublish(e.id,e.type)]).pipe(Object(c.a)((function(i){var a=p(i,1)[0];return d.getWidgetURL(e,t,n,o,a,s,u,l)})))}},{key:"getWidgetURL",value:function(e,t,n,i,a){var o=this,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"en",s=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0;n=n||I;var u="bookmark"===e.type,l={};l[u?"id":"m"]=""+(u?e.id:e.module_name);var p=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l),this.getParamsForUIOptions(n||I)),this.getParamsForLoadingExperience(n||I)),this.getParamsForScrollMode(n||I)),this.getParamsForLoadRotate(n||I)),this.getParamsForLabelScale(n||I)),d=Object(m.get)(n,"background.colors");if(Array.isArray(d)&&d.length>=3){var g=d.slice(0,4).map((function(e){return o.numberService.roundNumber(e,3)}));p["background.colors"]=""+g}if(i){var h=this.cameraService.roundCamera(i,3),f=h.eye,b=h.look,y=h.up;p.camera=""+[f.x,f.y,f.z,b.x,b.y,b.z,y.x,y.y,y.z]}s?p.dk=s.app_apikey:a&&(p.uaid=a),r&&"en"!==r&&(p.lang=r),c&&(p.paid=c);var v=this.isCustomWidget(e.embed_url_path)?e.embed_url_path:t;return this.buildWidgetURL(v,p)}},{key:"generateWidgetEmbed",value:function(e,t,n,i,a,o,r,s,u){var l=this;return this.generateWidgetURL(e,t,n,a,o,r,s,u).pipe(Object(c.a)((function(e){return l.getWidgetEmbed(e,i)})))}},{key:"getWidgetEmbed",value:function(e,t){var n=t||T.dimensions,i=n.width,a=n.height;return'<iframe id="'.concat(T.id,'" frameBorder="0" width="').concat(i,'" height="').concat(a,'" allowFullScreen="').concat(T.fullScreen,'" loading="lazy" src="').concat(e,'"></iframe>')}},{key:"getImageEmbed",value:function(e,t,n){var i=("BioDigital Human: "+e).replace(/"/g,"&quot;");return'<a href="'.concat(t,'" target="_blank"><img src="').concat(n,'" alt="').concat(i,'" title="').concat(i,'" /></a>')}},{key:"getUAID",value:function(e){return this.http.post("/ws/user/analytics",{analytic_type:""+e,analytic_platform:"app"},M).pipe(Object(c.a)((function(e){return e.id})))}},{key:"getDownloadURLs",value:function(e){var t=this,n=e.filter((function(e){return!e.favorite&&!e.unavailable})).map((function(e){return{type:e.type,id:"module"===e.type?e.module_name:e.id}}));return this.http.post("/ws/download/reserve",{content:n},{headers:{"Content-Type":"application/json"}}).pipe(Object(c.a)((function(n){var i=n.tokens;return e.map((function(e){var n=e.type,a="module"===e.type?e.module_name:e.id,o=i.find((function(e){return e.type===n&&e.id===a}));return o&&o.token?t.buildDownloadURL(o.token):""}))})),Object(l.a)((function(){return Object(i.a)(e.map((function(){return""})))})))}},{key:"extendWidgetOptions",value:function(e,t){var n=this.expandWidgetOptions(t);return this.deepExtendWidgetOptions(e,n),e}},{key:"getWidgetConfig",value:function(e){var t=this,n={};return Object.keys(e).forEach((function(i){var a=e[i];if(null!==a){var o=t.getConfigName(i);n[o]=a}})),n}},{key:"getConfigName",value:function(e){var t=this.camelToDashCase(e).replace(/^ui-/g,"");return this.dashCaseToCamelCase(t)}},{key:"getParamsForLoadingExperience",value:function(e){return e.autoLoad?e.initial.button?{"initial.button":!0}:e.initial.handHint?{"initial.hand":!0}:e.initial.play?{"initial.play":!0}:{}:{"auto-load":!1}}},{key:"getParamsForScrollMode",value:function(e){return e.disableScroll.alert?{"disable-scroll.alert":!0}:e.disableScroll.overlay?{"disable-scroll":!0}:{"disable-scroll":!1}}},{key:"getParamsForLoadRotate",value:function(e){return"number"==typeof e.loadRotate?{"load-rotate":e.loadRotate}:{}}},{key:"getParamsForLabelScale",value:function(e){return{}}},{key:"getParamsForUIOptions",value:function(e){return Object.assign({"ui-info":e.uiInfo,"ui-search":e.uiSearch,"ui-undo":e.uiUndo,"ui-fullscreen":e.uiFullscreen,"ui-nav":e.uiNav,"ui-tools":e.uiTools,"ui-help":e.uiHelp,"ui-chapter-list":e.uiChapterList,"ui-label-list":e.uiLabelList,"ui-anatomy-descriptions":e.uiAnatomyDescriptions,"ui-tutorial":e.uiTutorial,"ui-loader":e.uiLoader,"ui-whiteboard":e.uiWhiteboard,"ui-layers":e.uiVisibilityLayers,"ui-anatomy-labels":e.uiAnatomyLabels},this.getParamsForUIQuiz(e))}},{key:"getParamsForUIQuiz",value:function(e){var t={},n=Object(m.get)(e,"uiQuiz.mode"),i=Object(m.get)(e,"uiQuiz.number");return n===O.a.Disabled&&(t["ui-quiz"]=!1),n===O.a.Locked&&(t["ui-quiz-locked"]=!0),Object(m.isNil)(i)||(t["ui-quiz-start"]=i,t["ui-quiz-end"]=i),t}},{key:"camelToDashCase",value:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},{key:"dashCaseToCamelCase",value:function(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}},{key:"isCustomWidget",value:function(e){return/widgets\/([^\/]+)\//.test(e)}},{key:"saveUserImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jpeg";return this.http.post("/ws/user/image/v1-0",{image_src:e,image_type:t},M).pipe(Object(c.a)((function(e){return e.url})))}},{key:"buildWidgetURL",value:function(e,t){var n=Object.entries(t).map((function(e){var t=p(e,2),n=t[0],i=t[1];return"".concat(n,"=").concat(i)})).join("&"),i="",a=e.replace(/^\/|\/$/g,"");return!1===t["auto-load"]&&"viewer"===a&&(a="tiny-viewer",i="/tiny-viewer"),y.a.deploy===v.a.Local?"".concat(this.VIEWER_BASE_URL).concat(i,"/?").concat(n):"".concat(this.APP_BASE_URL,"/").concat(a,"/?").concat(n)}},{key:"buildThumbnailURL",value:function(e){return"".concat(this.APP_BASE_URL).concat(e)}},{key:"buildDownloadURL",value:function(e){return"".concat(this.APP_BASE_URL,"/download?t=").concat(e)}},{key:"deepExtendWidgetOptions",value:function(e,t){var n=this;Object.entries(e).forEach((function(i){var a=p(i,2),o=a[0],r=a[1],s=typeof r;[o,n.camelToDashCase(o),n.getConfigName(o)].forEach((function(i){if(t.hasOwnProperty(i)&&null!==t[i]){var a=t[i],c=typeof a;null===r?e[o]=a:s===c&&("object"===s?n.deepExtendWidgetOptions(r,a):e[o]=a)}}))}))}},{key:"expandWidgetOptions",value:function(e){var t={};return Object.entries(e).forEach((function(n){var i=p(n,2),a=i[0],o=i[1],r=a.split(".");if(r.length>1){var s=r[0],c=r.slice(1).join(".");null!==t[s]&&"object"==typeof t[s]||(t[s]={}),t[s][c]=o}else t[a]=e[a]})),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(j.Zb(g.b),j.Zb(o.a),j.Zb(r.a),j.Zb(x.a),j.Zb(w.a),j.Zb(P.b),j.Zb(C.a),j.Zb(C.c))},e.\u0275prov=j.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},0:function(e,t,n){e.exports=n("zUnb")},"08/d":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={main:[{title:"All Models",id:"all",type:"Category",translations:{es:{title:"Todas las Categor\xedas"},zh:{title:"\u6240\u6709\u7c7b\u522b"},fr:{title:"Toutes les cat\xe9gories"},de:{title:"Alle Kategorien"},it:{title:"Tutte le categorie"},ja:{title:"\u3059\u3079\u3066\u306e\u30ab\u30c6\u30b4\u30ea"},pt:{title:"Todas as categorias"}}}],categories:[{title:"Anatomy by Regions",id:"regional",type:"Category",translations:{es:{title:"Anatom\xeda por Regiones"},zh:{title:"\u5c40\u90e8\u89e3\u5256"},fr:{title:"Anatomie par r\xe9gions"},de:{title:"Anatomie nach Regionen"},it:{title:"Anatomia per regioni"},ja:{title:"\u5404\u90e8\u4f4d\u306e\u69cb\u9020"},pt:{title:"Anatomia por Regi\xf5es"}}},{title:"Anatomy by Systems",id:"system",type:"Category",translations:{es:{title:"Anatom\xeda por Sistemas"},zh:{title:"\u7cfb\u7edf\u89e3\u5256"},fr:{title:"Anatomie par syst\xe8mes"},de:{title:"Anatomie nach Systemen"},it:{title:"Anatomia per sistemi"},ja:{title:"\u5404\u5668\u5b98\u7cfb\u306e\u69cb\u9020"},pt:{title:"Anatomia por Sistemas"}}},{title:"Complete Anatomy",id:"complete anatomy",type:"Category",translations:{de:{title:"Komplette Anatomie"},es:{title:"Anatom\xeda completa"},fr:{title:"Anatomie compl\xe8te"},it:{title:"Anatomia completa"},ja:{title:"\u4eba\u4f53\u306e\u5168\u4f53\u69cb\u9020"},pt:{title:"Anatomia Completa"},zh:{title:"\u5b8c\u6574\u89e3\u5256"}}},{title:"Bony Landmarks",id:"Bony Landmarks",type:"Category",translations:{de:{title:"Knochenmarksteine"},es:{title:"Hitos huesudos"},fr:{title:"Points de rep\xe8re osseux"},it:{title:"Punti di riferimento ossei"},ja:{title:"\u9aa8\u306e\u30e9\u30f3\u30c9\u30de\u30fc\u30af"},pt:{title:"Marcos \xf3sseos"},zh:{title:"\u9aa8\u6027\u6807\u5fd7"}}},{title:"Cross Sections & Micro Anatomy",id:"Cross Section and Micro Anatomy",type:"Category",translations:{de:{title:"Querschnitte & Mikro-Anatomie"},es:{title:"Secciones transversales y Micro Anatom\xeda"},fr:{title:"Sections transversales et micro anatomie"},it:{title:"Sezioni trasversali & Micro Anatomia"},ja:{title:"\u65ad\u9762\u56f3\u30fb\u30de\u30a4\u30af\u30ed\u89e3\u5256\u5b66"},pt:{title:"Se\xe7\xf5es Transversais e Micro Anatomia"},zh:{title:"\u6a2a\u65ad\u9762&\u663e\u5fae\u89e3\u5256"}}},{title:"Origins & Insertions",id:"Origins and Insertions",type:"Category",translations:{de:{title:"Urspr\xfcnge und Einf\xfcgungen"},es:{title:"Or\xedgenes e inserciones"},fr:{title:"Origines et insertions"},it:{title:"Origini e Inserzioni"},ja:{title:"\u8d77\u6e90\u3068\u633f\u5165"},pt:{title:"Origens e Inser\xe7\xf5es"},zh:{title:"\u808c\u8089\u8d77\u6b62\u70b9"}}},{title:"Anatomy Quizzes",id:"quiz",type:"Category",translations:{de:{title:"Anatomie-Quiz"},es:{title:"Cuestionarios de anatom\xeda"},fr:{title:"Quiz d'anatomie"},it:{title:"Quiz di anatomia"},ja:{title:"\u89e3\u5256\u5b66\u30af\u30a4\u30ba"},pt:{title:"Quizzes de anatomia"},zh:{title:"\u89e3\u5256\u6d4b\u9a8c"}}}],specialties:[{title:"Allergy & Immunology",id:"Allergy and Immunology",type:"Category",translations:{de:{title:"Allergie und Immunologie"},es:{title:"Alergia e Inmunolog\xeda"},fr:{title:"Allergie et Immunologie"},it:{title:"Allergia e Immunologia"},ja:{title:"\u30a2\u30ec\u30eb\u30ae\u30fc\u3068\u514d\u75ab\u5b66"},pt:{title:"Alergia e Imunologia"},zh:{title:"\u8fc7\u654f\u4e0e\u514d\u75ab\u5b66"}}},{title:"Cardiology",id:"Cardiology",type:"Category",translations:{de:{title:"Kardiologie"},es:{title:"Cardiolog\xeda"},fr:{title:"Cardiologie"},it:{title:"Cardiologia"},ja:{title:"\u5fc3\u81d3\u75c5\u5b66"},pt:{title:"Cardiologia"},zh:{title:"\u5fc3\u810f\u79d1"}}},{title:"Dentistry",id:"Dentistry",type:"Category",translations:{de:{title:"Zahnmedizin"},es:{title:"Odontolog\xeda"},fr:{title:"Dentisterie"},it:{title:"Odontoiatria"},ja:{title:"\u6b6f\u5b66"},pt:{title:"Odontologia"},zh:{title:"\u7259\u79d1"}}},{title:"Dermatology",id:"Dermatology",type:"Category",translations:{de:{title:"Dermatologie"},es:{title:"Dermatolog\xeda"},fr:{title:"Dermatologie"},it:{title:"Dermatologia"},ja:{title:"\u76ae\u819a\u5b66"},pt:{title:"Dermatologia"},zh:{title:"\u76ae\u80a4\u79d1"}}},{title:"Endocrinology",id:"Endocrinology",type:"Category",translations:{de:{title:"Endokrinologie"},es:{title:"Endocrinolog\xeda"},fr:{title:"Endocrinologie"},it:{title:"Endocrinologia"},ja:{title:"\u5185\u5206\u6ccc\u5b66"},pt:{title:"Endocrinologia"},zh:{title:"\u5185\u5206\u6ccc\u79d1"}}},{title:"Gastroenterology",id:"Gastroenterology and Hepatology",type:"Category",translations:{de:{title:"Gastroenterologie"},es:{title:"Gastroenterolog\xeda"},fr:{title:"Gastroent\xe9rologie"},it:{title:"Gastroenterologia"},ja:{title:"\u80c3\u8178\u5b66\u30fb\u809d\u81d3\u5b66"},pt:{title:"Gastroenterologia"},zh:{title:"\u80c3\u80a0\u79d1&\u809d\u810f\u79d1"}}},{title:"Gynecology",id:"Gynecology",type:"Category",translations:{de:{title:"Gyn\xe4kologie"},es:{title:"Ginecolog\xeda"},fr:{title:"Gyn\xe9cologie"},it:{title:"Ginecologia"},ja:{title:"\u5a66\u4eba\u79d1"},pt:{title:"Ginecologia"},zh:{title:"\u5987\u79d1"}}},{title:"Hematology & Oncology",id:"Oncology and Hematology",type:"Category",translations:{de:{title:"H\xe4matologie/Onkologie"},es:{title:"Hematolog\xeda/Oncolog\xeda"},fr:{title:"H\xe9matologie/Oncologie"},it:{title:"Ematologia/Oncologia"},ja:{title:"\u816b\u760d\u5b66\u30fb\u8840\u6db2\u5b66"},pt:{title:"Hematologia/Oncologia"},zh:{title:"\u80bf\u7624\u79d1/\u8840\u6db2\u79d1"}}},{title:"Infectious Disease",id:"Infectious Disease",type:"Category",translations:{de:{title:"Infektionskrankheit"},es:{title:"Enfermedades Infecciosas"},fr:{title:"Maladies infectieuses"},it:{title:"Malattie Infettive"},ja:{title:"\u611f\u67d3\u75c7"},pt:{title:"Doen\xe7a Infecciosa"},zh:{title:"\u4f20\u67d3\u75c5"}}},{title:"Nephrology",id:"Nephrology",type:"Category",translations:{de:{title:"Nephrologie"},es:{title:"Nefrolog\xeda"},fr:{title:"N\xe9phrologie"},it:{title:"Nefrologia"},ja:{title:"\u814e\u81d3\u5b66"},pt:{title:"Nefrologia"},zh:{title:"\u80be\u79d1"}}},{title:"Neurology & Psychiatry",id:"Neurology and Psychiatry",type:"Category",translations:{de:{title:"Neurologie & Psychiatrie"},es:{title:"Neurolog\xeda y Psiquiatr\xeda"},fr:{title:"Neurologie & Psychiatrie"},it:{title:"Neurologia & Psichiatria"},ja:{title:"\u795e\u7d4c\u5b66\u30fb\u7cbe\u795e\u533b\u5b66"},pt:{title:"Neurologia e Psiquiatria"},zh:{title:"\u795e\u7ecf\u79d1&\u7cbe\u795e\u79d1"}}},{title:"Obstetrics",id:"Obstetrics",type:"Category",translations:{de:{title:"Geburtshilfe"},es:{title:"Obstetricia "},fr:{title:"Obst\xe9trique"},it:{title:"Ostetricia"},ja:{title:"\u7523\u79d1"},pt:{title:"Obstetr\xedcia"},zh:{title:"\u4ea7\u79d1"}}},{title:"Ophthalmology",id:"Ophthalmology",type:"Category",translations:{de:{title:"Ophthalmologie"},es:{title:"Oftalmolog\xeda"},fr:{title:"Ophtalmologie"},it:{title:"Oftalmologia"},ja:{title:"\u773c\u79d1\u5b66"},pt:{title:"Oftalmologia"},zh:{title:"\u773c\u79d1"}}},{title:"Orthopedics",id:"Orthopedics",type:"Category",translations:{de:{title:"Orthop\xe4die"},es:{title:"Ortopedia"},fr:{title:"Orthop\xe9die"},it:{title:"Ortopedia"},ja:{title:"\u6574\u5f62\u5916\u79d1\u5b66"},pt:{title:"Ortopedia"},zh:{title:"\u9aa8\u79d1"}}},{title:"Otolaryngology",id:"Otolaryngology",type:"Category",translations:{de:{title:"HNO-Heilkunde"},es:{title:"Otorrinolaringolog\xeda"},fr:{title:"Otorhinolaryngologie"},it:{title:"Otorinolaringoiatria"},ja:{title:"\u8033\u9f3b\u79d1\u5b66"},pt:{title:"Otorrinolaringologia"},zh:{title:"\u8033\u9f3b\u5589\u79d1"}}},{title:"Pediatrics",id:"Pediatrics",type:"Category",translations:{de:{title:"P\xe4diatrie"},es:{title:"Pediatr\xeda"},fr:{title:"P\xe9diatrie"},it:{title:"Pediatria"},ja:{title:"\u5c0f\u5150\u79d1\u5b66"},pt:{title:"Pediatria"},zh:{title:"\u513f\u79d1"}}},{title:"Physical Therapy",id:"Physical Therapy",type:"Category",translations:{de:{title:"Physikalische Therapie"},es:{title:"Fisioterapia"},fr:{title:"Physioth\xe9rapie"},it:{title:"Terapia fisica"},ja:{title:"\u7406\u5b66\u7642\u6cd5"},pt:{title:"Fisioterapia"},zh:{title:"\u7269\u7406\u7597\u6cd5"}}},{title:"Pulmonology",id:"Pulmonology and Respiratory",type:"Category",translations:{de:{title:"Pulmonologie"},es:{title:"Neumolog\xeda"},fr:{title:"Pneumologie"},it:{title:"Pneumologia"},ja:{title:"\u547c\u5438\u5668\u5b66"},pt:{title:"Pneumologia"},zh:{title:"\u80ba\u75c5\u79d1/\u547c\u5438\u79d1"}}},{title:"Rheumatology",id:"Rheumatology",type:"Category",translations:{de:{title:"Rheumatologie"},es:{title:"Reumatolog\xeda"},fr:{title:"Rhumatologie"},it:{title:"Reumatologia"},ja:{title:"\u30ea\u30a6\u30de\u30c1\u5b66"},pt:{title:"Reumatologia"},zh:{title:"\u98ce\u6e7f\u79d1"}}},{title:"Urology",id:"Urology",type:"Category",translations:{de:{title:"Urologie"},es:{title:"Urolog\xeda"},fr:{title:"Urologie"},it:{title:"Urologia"},ja:{title:"\u6ccc\u5c3f\u5668\u79d1\u5b66"},pt:{title:"Urologia"},zh:{title:"\u6ccc\u5c3f\u5916\u79d1"}}}],community:[{title:"Community Bookmarks",id:"public",type:"Community",translations:{de:{title:"Community-Lesezeichen"},es:{title:"Marcadores de la comunidad"},fr:{title:"Signets communautaires"},it:{title:"Segnalibri della community"},ja:{title:"\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u30d6\u30c3\u30af\u30de\u30fc\u30af"},pt:{title:"Favoritos da comunidade"},zh:{title:"\u793e\u533a\u4e66\u7b7e"}}}]}},"0E12":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){var t=function e(t,n,i){h(this,e),this.particleSystems=t,this.assignedParticles=n,this.tweenParticleLookup=i};t.type="[Engine Particles] Set Particle State",e.SetParticleState=t;var n=function e(t,n){h(this,e),this.particleSystem=t,this.chapterId=n};n.type="[Engine Particles] New Particle System",e.NewParticleSystem=n;var i=function e(t,n){h(this,e),this.id=t,this.targetChapterId=n};i.type="[Engine Particles] Duplicate Particle System",e.DuplicateParticleSystem=i;var a=function e(t,n){h(this,e),this.id=t,this.targetChapterId=n};a.type="[Engine Particles] Duplicate Particle System Success",e.DuplicateParticleSystemSuccess=a;var o=function e(t,n){h(this,e),this.id=t,this.particleSystem=n};o.type="[Engine Particles] Update Particle System",e.UpdateParticleSystem=o;var r=function e(t,n){h(this,e),this.visible=t,this.chapterId=n};r.type="[Engine Particles] Set Particle Systems Visible",e.SetParticleSystemsVisible=r;var s=function e(t,n,i){h(this,e),this.id=t,this.visible=n,this.chapterId=i};s.type="[Engine Particles] Set Particle System Visible",e.SetParticleSystemVisible=s;var c=function e(t,n){h(this,e),this.id=t,this.chapterId=n};c.type="[Engine Particles] Assign Particle",e.AssignParticle=c;var u=function e(t,n){h(this,e),this.id=t,this.chapterId=n};u.type="[Engine Particles] Unassign Particle",e.UnassignParticle=u;var l=function e(t){h(this,e),this.id=t};l.type="[Engine Partiles] Delete Particle System",e.DeleteParticleSystem=l;var p=function e(t){h(this,e),this.id=t};p.type="[Engine Partiles] Select Particle System",e.SelectParticleSystem=p;var d=function e(t){h(this,e),this.index=t};d.type="[Engine Partiles] Select Particle Constraint",e.SelectParticleConstraint=d;var g=function e(t){h(this,e),this.index=t};g.type="[Engine Partiles] Select Particle Creator",e.SelectParticleCreator=g;var f=function e(t){h(this,e),this.index=t};f.type="[Engine Partiles] Select Particle Updater",e.SelectParticleUpdater=f;var b=function e(t){h(this,e),this.chapterMap=t};b.type="[Engine Particles] Update Lookup Chapters",e.UpdateTweenParticleLookupChapters=b;var m=function e(t,n){h(this,e),this.chapterId=t,this.lookup=n};m.type="[Engine Particles] Set Lookup for chapter",e.SetLookupForChapter=m;var y=function e(t){h(this,e),this.chapterId=t};y.type="[Engine Particles] Delete chapter lookup",e.DeleteChapterLookup=y;var v=function e(t){h(this,e),this.patches=t};v.type="[Engine Particles] Apply Patch",e.ApplyPatch=v}(i||(i={}))},"0FUJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){h(this,e),this.graph={hidden:!1,clipped:!1,disabled:!1,transparent:!1}}},"0UUK":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Question=0]="Question",e[e.Explanation=1]="Explanation",e[e.Review=2]="Review",e}({})},"0Yvn":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("Assa"),a=n("mXx7");function o(e,t){switch(!0){case void 0===e[t]:return;case!1===e[t]:return!1;case"number"==typeof e[t]:return 100*e[t];default:return new a.a({center:e[t][0],edge:e[t][1],centerBias:e[t][2],edgeBias:e[t][3],power:e[t][4]})}}var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e);var n=t.tintColor,i=t.saturation,a=t.contrast,o=t.brightness,r=t.opacity,s=t.label;this.tintColor=n,this.saturation=i,this.contrast=a,this.brightness=o,this.opacity=r,this.label=s}return b(e,null,[{key:"isRealRecipe",value:function(e){return!1!==e.brightness||!1!==e.contrast||!1!==e.opacity||!1!==e.saturation||!1!==e.tintColor}},{key:"isFresnel",value:function(e){return void 0!==e&&e.hasOwnProperty("edge")&&e.hasOwnProperty("edgeBias")&&e.hasOwnProperty("center")&&e.hasOwnProperty("centerBias")&&e.hasOwnProperty("power")}},{key:"isColor",value:function(e){return Array.isArray(e)&&3===e.length}},{key:"fromEngine",value:function(t){return new e({tintColor:function(){switch(!0){case void 0===t.tintColor:return;case!1===t.tintColor:return!1;case Array.isArray(t.tintColor):return 3===t.tintColor.length?u(t.tintColor):new i.a({center:t.tintColor[0],edge:t.tintColor[1],centerBias:t.tintColor[2],edgeBias:t.tintColor[3],power:t.tintColor[4]})}}(),saturation:o(t,"saturation"),brightness:o(t,"brightness"),contrast:o(t,"contrast"),opacity:o(t,"opacity")})}},{key:"toEngine",value:function(t){var n=!1!==t.tintColor&&void 0,o=!1!==t.saturation&&void 0,r=!1!==t.brightness&&void 0,s=!1!==t.contrast&&void 0,c=!1!==t.opacity&&void 0;return Array.isArray(t.tintColor)?n=u(t.tintColor):e.isFresnel(t.tintColor)&&(n=i.a.toEngine(t.tintColor)),"number"==typeof t.saturation?o=t.saturation/100:e.isFresnel(t.saturation)&&(o=a.a.toEngine(t.saturation)),"number"==typeof t.brightness?r=t.brightness/100:e.isFresnel(t.brightness)&&(r=a.a.toEngine(t.brightness)),"number"==typeof t.contrast?s=t.contrast/100:e.isFresnel(t.contrast)&&(s=a.a.toEngine(t.contrast)),"number"==typeof t.opacity?c=t.opacity/100:e.isFresnel(t.opacity)&&(c=a.a.toEngine(t.opacity)),{tintColor:n,saturation:o,brightness:r,contrast:s,opacity:c}}},{key:"mergeRecipes",value:function(e,t){for(var n=Object.assign({},e),i=0,a=Object.entries(t);i<a.length;i++){var o=p(a[i],2),r=o[0],s=o[1];void 0!==s&&(n[r]=s)}return n}},{key:"modifiesSaturation",value:function(t){return"number"==typeof t.saturation&&0!==t.saturation||e.isFresnel(t.saturation)}},{key:"modifiesContrast",value:function(t){return"number"==typeof t.contrast&&0!==t.contrast||e.isFresnel(t.contrast)}},{key:"modifiesBrightness",value:function(t){return"number"==typeof t.brightness&&0!==t.brightness||e.isFresnel(t.brightness)}},{key:"modifiesOpacity",value:function(t){return"number"==typeof t.opacity||e.isFresnel(t.opacity)}}]),e}()},"0Zsz":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){var t=function e(){h(this,e)};t.type="[Dialog] Open Limit",e.OpenLimit=t;var n=function e(t){h(this,e),this.upgrade=t};n.type="[Dialog] Close Limit",e.CloseLimit=n;var i=function e(){h(this,e)};i.type="[Dialog] Open Premium Content",e.OpenPremiumContent=i;var a=function e(t){h(this,e),this.confirmed=t};a.type="[Dialog] Close Premium Content",e.ClosePremiumContent=a;var o=function e(){h(this,e)};o.type="[Dialog] Open Upgrade",e.OpenUpgrade=o;var r=function e(){h(this,e)};r.type="[Dialog] Close Upgrade",e.CloseUpgrade=r}(i||(i={}))},"0kAG":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("mmXA");function a(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return.01*(window.innerHeight-(t&&e!==i.a.Hide?56:0))}},"0njA":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("fXoL"),a=n("ofXK"),o=function(){var e=function(){function e(){h(this,e)}return b(e,[{key:"iconClass",get:function(){var e="fas fa-"+this.icon;return this.size&&(e+=" fa-"+this.size),e}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-icon"]],inputs:{icon:"icon",size:"size"},decls:1,vars:1,consts:[[3,"ngClass"]],template:function(e,t){1&e&&i.Qb(0,"i",0),2&e&&i.mc("ngClass",t.iconClass)},directives:[a.m],styles:[""],encapsulation:2,changeDetection:0}),e}()},"0ul3":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL"),a=function(){var e=function(){function e(){h(this,e)}return b(e,[{key:"supportsWebGl",value:function(){var e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return t&&t instanceof WebGLRenderingContext}},{key:"isHoverSupported",value:function(){return window.matchMedia("(hover: hover)").matches}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},1:function(e,t){},"11Ye":function(e,t,n){"use strict";n.d(t,"l",(function(){return i})),n.d(t,"m",(function(){return a})),n.d(t,"M",(function(){return o})),n.d(t,"A",(function(){return r})),n.d(t,"N",(function(){return s})),n.d(t,"S",(function(){return c})),n.d(t,"P",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return p})),n.d(t,"E",(function(){return d})),n.d(t,"c",(function(){return g})),n.d(t,"R",(function(){return f})),n.d(t,"B",(function(){return b})),n.d(t,"C",(function(){return m})),n.d(t,"d",(function(){return y})),n.d(t,"z",(function(){return v})),n.d(t,"j",(function(){return k})),n.d(t,"b",(function(){return O})),n.d(t,"V",(function(){return S})),n.d(t,"U",(function(){return x})),n.d(t,"T",(function(){return C})),n.d(t,"X",(function(){return w})),n.d(t,"Z",(function(){return j})),n.d(t,"Y",(function(){return P})),n.d(t,"w",(function(){return _})),n.d(t,"o",(function(){return M})),n.d(t,"W",(function(){return I})),n.d(t,"x",(function(){return T})),n.d(t,"J",(function(){return U})),n.d(t,"n",(function(){return L})),n.d(t,"p",(function(){return z})),n.d(t,"y",(function(){return A})),n.d(t,"I",(function(){return F})),n.d(t,"H",(function(){return D})),n.d(t,"a",(function(){return E})),n.d(t,"v",(function(){return N})),n.d(t,"D",(function(){return R})),n.d(t,"u",(function(){return V})),n.d(t,"t",(function(){return B})),n.d(t,"K",(function(){return H})),n.d(t,"L",(function(){return Q})),n.d(t,"O",(function(){return G})),n.d(t,"g",(function(){return W})),n.d(t,"f",(function(){return q})),n.d(t,"e",(function(){return X})),n.d(t,"k",(function(){return Z})),n.d(t,"F",(function(){return J})),n.d(t,"G",(function(){return K})),n.d(t,"q",(function(){return $})),n.d(t,"s",(function(){return Y})),n.d(t,"r",(function(){return ee})),n.d(t,"Q",(function(){return te}));var i=function(){var e=function e(){h(this,e)};return e.type="[Engine] Load",e}(),a=function(){var e=function e(t){h(this,e),this.result=t};return e.type="[Engine] Load Success",e}(),o=function(){var e=function e(t){h(this,e),this.ready=t};return e.type="[Engine] Set Ready",e}(),r=function(){var e=function e(t){h(this,e),this.display=t};return e.type="[Engine] Set Display of 3D Scene",e}(),s=function(){var e=function e(t){h(this,e),this.scrollMode=t};return e.type="[Engine] Set Zoom via scroll Allowed",e}(),c=function(){var e=function e(t){h(this,e),this.shown=t};return e.type="[Engine] Set Scroll Alert Shwon",e}(),u=function(){var e=function e(t){h(this,e),this.visible=t};return e.type="[Engine] Set Visibility of 3D Scene",e}(),l=function(){var e=function e(t,n){h(this,e),this.color=t,this.duration=n};return e.type="[Engine] Fade",e}(),p=function(){var e=function e(){h(this,e)};return e.type="[Engine] Fade Complete",e}(),d=function(){var e=function e(t){h(this,e),this.graph=t};return e.type="[Engine] Set Graph",e}(),g=function(){var e=function e(){h(this,e)};return e.type="[Engine] Clear Graph",e}(),f=function(){var e=function e(t){h(this,e),this.enabled=t};return e.type="[Engine] Set Xray Mode",e}(),b=function(){var e=function e(t){h(this,e),this.chapterId=t};return e.type="[Engine] Set Engine Chapter",e}(),m=function(){var e=function e(t){h(this,e),this.chapterInit=t};return e.type="[Eninge] Set Chapter Init",e}(),y=function(){var e=function e(t,n,i){h(this,e),this.node=t,this.event=n,this.hit=i};return e.type="[Engine] Click Node",e}(),v=function(){var e=function e(t,n){h(this,e),this.node=t,this.hit=n};return e.type="[Engine] Set Contextmenu",e}(),k=function(){var e=function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;h(this,e),this.objectId=t,this.animate=n,this.animationDuration=i};return e.type="[Engine] Fly To Object",e}(),O=function(){var e=function e(){h(this,e)};return e.type="[Engine] Center Camera on Visible Nodes",e}(),S=function(){var e=function e(t,n){h(this,e),this.leafVisibilityState=t,this.nodes=n};return e.type="[Engine] Synchronize Visible Nodes On Tree",e}(),x=function(){var e=function e(t){h(this,e),this.leafRenderableState=t};return e.type="[Engine] Synchronize Renderable State of Nodes On Tree",e}(),C=function(){var e=function e(t,n){h(this,e),this.leafPickableState=t,this.nodes=n};return e.type="[Engine] Synchronize Pickable State of Nodes On Tree",e}(),w=function(){var e=function e(t){h(this,e),this.show=t};return e.type="[Engine] Toggle Camera Bar",e}(),j=function(){var e=function e(t){h(this,e),this.show=t};return e.type="[Engine] Toggle Progress Bar",e}(),P=function(){var e=function e(t){h(this,e),this.show=t};return e.type="[Engine] Toggle Labels",e}(),_=function(){var e=function e(t){h(this,e),this.tool=t};return e.type="[Engine] Set active tool",e}(),M=function(){var e=function e(t,n){h(this,e),this.chapter=t,this.pause=n};return e.type="[Engine] Play chapter animation",e}(),I=function(){var e=function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];h(this,e),this.play=t};return e.type="[Engine] Play animation",e}(),T=function(){var e=function e(t){h(this,e),this.playing=t};return e.type="[Engine] Set animation playing",e}(),U=function(){var e=function e(t){h(this,e),this.speed=t};return e.type="[Engine] Set playback speed",e}(),L=function(){var e=function e(t){h(this,e),this.play=t};return e.type="[Engine] Play audio",e}(),z=function(){var e=function e(){h(this,e)};return e.type="[Engine] Play chapter from start",e}(),A=function(){var e=function e(t){h(this,e),this.enable=t};return e.type="[Engine] Set autoplay",e}(),F=function(){var e=function e(t,n){h(this,e),this.nodes=t,this.layer=n};return e.type="[Engine] Set object layer order",e}(),D=function(){var e=function e(t,n){h(this,e),this.nodeId=t,this.displayName=n};return e.type="[Engine] Set object display name",e}(),E=function(){var e=function e(){h(this,e)};return e.type="[Engine] Auto Sort object layer orders",e}(),N=function(){var e=function e(){h(this,e)};return e.type="[Engine] Reset object layer orders",e}(),R=function(){var e=function e(t){h(this,e),this.position=t};return e.type="[Engine] Set Engine Position",e}(),V=function(){var e=function e(){h(this,e)};return e.type="[Engine] Reset Engine Position",e}(),B=function(){var e=function e(){h(this,e)};return e.type="[Engine] Reset Interactions",e}(),H=function(){var e=function e(t){h(this,e),this.effects=t};return e.type="[Engine] Set Post Processing Effects",e}(),Q=function(){var e=function e(t){h(this,e),this.properties=t};return e.type="[Engine] Set Properties",e}(),G=function(){var e=function e(t){h(this,e),this.mode=t};return e.type="[Engine] Set Transparency Mode",e}(),W=function(){var e=function e(t){h(this,e),this.node=t};return e.type="[Engine] Expand ViewTree Node",e}(),q=function(){var e=function e(t){h(this,e),this.node=t};return e.type="[Engine] Collapse ViewTree Node",e}(),X=function(){var e=function e(){h(this,e)};return e.type="[Engine] Collapse All ViewTree Nodes",e}(),Z=function(){var e=function e(t,n){h(this,e),this.node=t,this.hit=n};return e.type="[Engine] Hover Node",e}(),J=function(){var e=function e(t){h(this,e),this.node=t};return e.type="[Engine] Set Label Edit Node",e}(),K=function(){var e=function e(t,n){h(this,e),this.node=t,this.info=n};return e.type="[Engine] Set Node Info",e}(),$=function(){var e=function e(t,n,i){h(this,e),this.node=t,this.fallback=n,this.lang=i};return e.type="[Engine] Query Node Info",e}(),Y=function(){var e=function e(t,n){h(this,e),this.node=t,this.info=n};return e.type="[Engine] Query Node Info Success",e}(),ee=function(){var e=function e(t){h(this,e),this.node=t};return e.type="[Engine Nodes] Query Node Info Failure",e}(),te=function(){var e=function e(t){h(this,e),this.enabled=t};return e.type="[Engine] Set Watermark Enabled",e}()},"1a36":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Hidden=-1]="Hidden",e[e.Shown=1]="Shown",e}({})},"1iZL":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var i=n("uDDk"),a=function e(){h(this,e)},o=function e(){h(this,e),this.type=i.a.Images,this.images=[]}},"1mir":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Select=0]="Select",e[e.Import=1]="Import",e[e.Explore=2]="Explore",e}({})},"1w2z":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("AytR"),a=n("8qIY"),o=n("fXoL"),r=n("tyNb"),s=function(){var e=function(){function e(t,n,i){h(this,e),this.templateRef=t,this.viewContainer=n,this.router=i,this._appFlagApplicationMode="include"}return b(e,[{key:"appFlagApplication",get:function(){return this._appFlagApplication},set:function(e){this._appFlagApplication=e}},{key:"appFlagApplicationMode",get:function(){return this._appFlagApplicationMode},set:function(e){this._appFlagApplicationMode=e}},{key:"appFlagApplicationPage",get:function(){return this._appFlagApplicationPage},set:function(e){this._appFlagApplicationPage=e}},{key:"appFlagApplicationPlatform",get:function(){return this._appFlagApplicationPlatform},set:function(e){this._appFlagApplicationPlatform=e}},{key:"appFlagApplicationNative",get:function(){return this._appFlagApplicationNative},set:function(e){this._appFlagApplicationNative=e}},{key:"ngOnInit",value:function(){this.update()}},{key:"update",value:function(){var e,t=!1,n=!1,o=!1,r=!1;if(""===this.appFlagApplication?t=!0:Array.isArray(this.appFlagApplication)?t=this.appFlagApplication.some((function(e){return e===i.a.application})):"string"==typeof this.appFlagApplication&&(t=this.appFlagApplication===i.a.application),null==this.appFlagApplicationPage)n=!0;else{var s=this.router.url;Array.isArray(this.appFlagApplicationPage)?n=this.appFlagApplicationPage.some((function(e){return s.indexOf(e)>=0})):"string"==typeof this.appFlagApplicationPage&&(n=s.indexOf(this.appFlagApplicationPage)>=0)}if(null==this.appFlagApplicationPlatform)o=!0;else{var c=i.a.platform;Array.isArray(this.appFlagApplicationPlatform)?o=this.appFlagApplicationPlatform.some((function(e){return c.indexOf(e)>=0})):"string"==typeof this.appFlagApplicationPlatform&&(o=c.indexOf(this.appFlagApplicationPlatform)>=0)}null==this.appFlagApplicationNative?r=!0:(r=i.a.native,(Array.isArray(this.appFlagApplicationNative)?this.appFlagApplicationNative:[this.appFlagApplicationNative]).includes(a.a.iOS)&&(r=i.a.native&&void 0!==window.webkit)),(e=t&&n&&o&&r)&&"include"===this.appFlagApplicationMode||!e&&"exclude"===this.appFlagApplicationMode?this.viewContainer.createEmbeddedView(this.templateRef):this.viewContainer.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Pb(o.O),o.Pb(o.S),o.Pb(r.e))},e.\u0275dir=o.Kb({type:e,selectors:[["","appFlagApplication",""]],inputs:{appFlagApplication:"appFlagApplication",appFlagApplicationMode:"appFlagApplicationMode",appFlagApplicationPage:"appFlagApplicationPage",appFlagApplicationPlatform:"appFlagApplicationPlatform",appFlagApplicationNative:"appFlagApplicationNative"}}),e}()},"2CE2":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.PersonalUse="Personal Use",e.Education="Education",e.Business="Business",e}({})},"2he+":function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n("2o60"),a=n("l57l"),o=(n("6L7E"),n("fXoL")),r=n("ofXK");function s(e,t){1&e&&o.Qb(0,"img",9)}function c(e,t){1&e&&o.Qb(0,"img",9)}function u(e,t){1&e&&o.Qb(0,"img",10)}function l(e,t){1&e&&o.Qb(0,"img",11)}function p(e,t){if(1&e&&(o.Tb(0),o.Nc(1,s,1,0,"img",6),o.Nc(2,c,1,0,"img",6),o.Nc(3,u,1,0,"img",7),o.Nc(4,l,1,0,"img",8),o.Sb()),2&e){var n=o.gc();o.Db(1),o.mc("ngIf",n.label.pinType==n.labelPinType.Default),o.Db(1),o.mc("ngIf",n.label.pinType==n.labelPinType.Sequential),o.Db(1),o.mc("ngIf",n.label.pinType===n.labelPinType.Plus||n.label.pinType===n.labelPinType.PlusMinus&&!n.selected),o.Db(1),o.mc("ngIf",n.label.pinType===n.labelPinType.Minus||n.label.pinType===n.labelPinType.PlusMinus&&n.selected)}}function d(e,t){1&e&&o.Qb(0,"img",15)}function g(e,t){1&e&&o.Qb(0,"img",15)}function f(e,t){1&e&&o.Qb(0,"img",16)}function b(e,t){1&e&&o.Qb(0,"img",17)}function m(e,t){if(1&e&&(o.Nc(0,d,1,0,"img",12),o.Nc(1,g,1,0,"img",12),o.Nc(2,f,1,0,"img",13),o.Nc(3,b,1,0,"img",14)),2&e){var n=o.gc();o.mc("ngIf",n.label.pinType==n.labelPinType.Default),o.Db(1),o.mc("ngIf",n.label.pinType==n.labelPinType.Sequential),o.Db(1),o.mc("ngIf",n.label.pinType===n.labelPinType.Plus||n.label.pinType===n.labelPinType.PlusMinus&&!n.selected),o.Db(1),o.mc("ngIf",n.label.pinType===n.labelPinType.Minus||n.label.pinType===n.labelPinType.PlusMinus&&n.selected)}}var y=function(e,t){return{"label-pin__text--white":e,"label-pin__text--black":t}};function v(e,t){if(1&e&&(o.Tb(0),o.Vb(1,"div",18),o.Pc(2),o.Ub(),o.Sb()),2&e){var n=o.gc();o.Db(1),o.mc("ngClass",o.qc(2,y,n.labelTheme===n.labelThemeEnum.StudioNext,n.labelTheme===n.labelThemeEnum.Annotation)),o.Db(1),o.Rc(" ",n.sequence," ")}}var k=function(e,t,n,i){return{"label-pin--light":e,"label-pin--dark":t,"label-pin--none":n,"label-pin--selected":i}},O=function(){var e=function e(){h(this,e),this.labelPinType=i.a,this.labelThemeEnum=a.a,this.labelTheme=a.a.StudioNext,this.selected=!1};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["app-label-pin"]],inputs:{label:"label",labelTheme:"labelTheme",selected:"selected",sequence:"sequence"},decls:7,vars:9,consts:[[1,"label-pin",3,"ngClass"],["pin",""],[4,"ngIf","ngIfElse"],["lightPins",""],[4,"ngIf"],[1,"label__glow"],["draggable","false","alt","","src","./assets/images/labels/circle-dark.svg","class","label-pin__image",4,"ngIf"],["draggable","false","alt","","src","./assets/images/labels/circle-plus-dark.svg","class","label-pin__image",4,"ngIf"],["draggable","false","alt","","src","./assets/images/labels/circle-minus-dark.svg","class","label-pin__image",4,"ngIf"],["draggable","false","alt","","src","./assets/images/labels/circle-dark.svg",1,"label-pin__image"],["draggable","false","alt","","src","./assets/images/labels/circle-plus-dark.svg",1,"label-pin__image"],["draggable","false","alt","","src","./assets/images/labels/circle-minus-dark.svg",1,"label-pin__image"],["draggable","false","alt","","src","./assets/images/labels/circle.svg","class","label-pin__image",4,"ngIf"],["draggable","false","alt","","src","./assets/images/labels/circle-plus.svg","class","label-pin__image",4,"ngIf"],["draggable","false","alt","","src","./assets/images/labels/circle-minus.svg","class","label-pin__image",4,"ngIf"],["draggable","false","alt","","src","./assets/images/labels/circle.svg",1,"label-pin__image"],["draggable","false","alt","","src","./assets/images/labels/circle-plus.svg",1,"label-pin__image"],["draggable","false","alt","","src","./assets/images/labels/circle-minus.svg",1,"label-pin__image"],[1,"label-pin__text",3,"ngClass"]],template:function(e,t){if(1&e&&(o.Vb(0,"div",0,1),o.Nc(2,p,5,4,"ng-container",2),o.Nc(3,m,4,4,"ng-template",null,3,o.Oc),o.Nc(5,v,3,5,"ng-container",4),o.Qb(6,"div",5),o.Ub()),2&e){var n=o.yc(4);o.mc("ngClass",o.sc(4,k,t.labelTheme===t.labelThemeEnum.StudioNext,t.labelTheme===t.labelThemeEnum.Annotation,t.label.pinType===t.labelPinType.None,t.selected)),o.Db(2),o.mc("ngIf",t.labelTheme===t.labelThemeEnum.Annotation)("ngIfElse",n),o.Db(3),o.mc("ngIf",t.label.pinType===t.labelPinType.Sequential)}},directives:[r.m,r.p],styles:['.label-pin[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;position:relative;transition:background-color .12s;z-index:10}.label-pin__text[_ngcontent-%COMP%]{display:flex;z-index:10;justify-content:center;align-items:center;font-size:10px!important;color:#101823}.label-pin[_ngcontent-%COMP%]:before, .label-pin__text[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%}.label-pin[_ngcontent-%COMP%]:before{content:" ";background-color:transparent;border:2px solid transparent;border-radius:50%;box-sizing:border-box;display:block;z-index:-2}.label-pin--light.label-pin--selected[_ngcontent-%COMP%]:before{background-color:#fff;border-color:#2d72dc;box-shadow:0 0 0 1px rgba(45,114,220,.7)}.label-pin--light.label-pin[_ngcontent-%COMP%]   .label-pin__text[_ngcontent-%COMP%]{color:#101823}.label-pin--dark.label-pin[_ngcontent-%COMP%]:before{background-color:rgba(0,0,0,.75)}.label-pin--dark.label-pin--selected[_ngcontent-%COMP%]:after, .label-pin--dark.label-pin--selected[_ngcontent-%COMP%]:before{background-color:#2d72dc}.label-pin--dark.label-pin[_ngcontent-%COMP%]   .label-pin__text[_ngcontent-%COMP%]{color:#fff}.label-pin--none.label-pin[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),e}()},"2o60":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Default="default",e.Plus="plus",e.Minus="minus",e.PlusMinus="plusMinus",e.Sequential="sequential",e.None="None",e}({})},"3fyd":function(e,t,n){"use strict";var i,a;n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s}));var o=function(e){return e.MultipleChoice="multiple-choice",e.SelectAnatomy="select-anatomy",e.LabelAnatomy="label-anatomy",e.Instructions="text-only",e}({}),r=(l(i={},o.MultipleChoice,"Multiple Choice"),l(i,o.SelectAnatomy,"Select Anatomy in 3D"),l(i,o.LabelAnatomy,"Label Anatomy"),l(i,o.Instructions,"Instructions"),i),s=(l(a={},o.MultipleChoice,"Identify the correct answer from a list of options."),l(a,o.SelectAnatomy,"Identify the correct structure(s) in the 3D model"),l(a,o.LabelAnatomy,"Correctly label each structure from a list of options"),l(a,o.Instructions,"Use descriptive text to provide context between questions"),a)},"3ros":function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n("ofXK"),a=n("EWj2"),o=n("3Pt+"),r=n("AcyG"),s=n("GCmh"),c=n("S6v9"),u=n("yGOH"),l=n("Ow1N"),p=n("e0tp"),d=n("wf0l"),g=n("PCNd"),f=n("bSwM"),b=n("vvyD"),m=n("tyNb"),y=n("izPL"),v=n("Z48A"),k=n("DupM"),O=n("+QY/"),S=n("fXoL"),x=n("PmOP"),C=n("IlST"),w=n("0njA"),j=function(){var e=function e(){h(this,e)};return e.\u0275mod=S.Nb({type:e}),e.\u0275inj=S.Mb({factory:function(t){return new(t||e)},imports:[[r.d.forFeature([s.a]),d.b,m.i,a.a,i.c,o.z,c.a,u.a,p.a,b.a,y.a,l.a,g.a,f.b,O.a]]}),e}();S.Gc(k.a,[x.a,C.a,w.a,v.a],[])},"3zw+":function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i,a=n("nRae"),o=n("b36G"),r=n("7b4e"),s=n("S/GR"),c=n("ewuU"),l=n("aqTE"),p=n("LvDl"),d=n("l57l"),g=n("yonH"),f=n("g408"),m=n("SJ0+"),y={enabled:!1,clips:{left:{clipId:m.a.LeftClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},right:{clipId:m.a.RightClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},back:{clipId:m.a.BackClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},front:{clipId:m.a.FrontClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},top:{clipId:m.a.TopClip,enabled:!1,fade:!1,fadeDistance:0,progress:0},bottom:{clipId:m.a.BottomClip,enabled:!1,fade:!1,fadeDistance:0,progress:0}}},v=n("eW6i"),k=n("gQBz"),O=n("e0fF"),S=n("nS47"),x=n("qz+p"),C=n("R6Q1"),w=n("fXoL"),j=((i=function(){function e(t,n,i,a){h(this,e),this.engineService=t,this.serializeChapterService=n,this.labelService=i,this.animationService=a}return b(e,[{key:"addChapterToEngine",value:function(e,t){var n=f.a.makeChapterIdMap([e],!1),i=S.a.createGraphFromSrc(Object.values(Human.scene.rootObjects),"objectId","objects",new O.d(Human.scene.colorRecipes.getRecipes())),a=this.serializeChapterService.serializeChapter(i,e,{},[],n);a.synchronization=JSON.parse(JSON.stringify(e.synchronization));var o=new Human.timeline.BranchTimeline(a);return Human.timeline.activeRoot.addChapter(o,{rebuild:!0,position:t}),o}},{key:"removeChapterFromEngine",value:function(e){Human.timeline.activeRoot._chapters=Human.timeline.activeRoot._chapters.filter((function(t){return t.id!==e.id})),Human.timeline.activeRoot.build()}},{key:"copyChapter",value:function(e,t){var n=Object(o.classToClass)(e);return n.id=t,n.labels.forEach((function(e){e.id=r.a.idWithPrefix("label"),e.chapterId=n.id})),n.readyState={model:!0,animation:!0},n}},{key:"getCurrentChapterId",value:function(){return Human.timeline.activeRoot._nowBranch.id}},{key:"fromHumanChapter",value:function(e,t,n,i){var s=this,l=Object.assign({},n),h=e.chapters[i];l.environment=Object.assign({},h.environment),l.transitions=Object.assign({},h.transitions),h.transparencyMode&&(l.transparencyMode=h.transparencyMode),l.showObjects=Object.assign({},e.chapters[i].showObjects),l.pickThroughObjects=Object.assign({},e.chapters[i].pickThroughObjects),l.camera=Object(p.cloneDeep)(n.camera),h.cameraRotationCenter&&(l.camera.rotationCenter=h.cameraRotationCenter),Array.isArray(l.camera.rotationCenter)&&(l.camera.rotationCenter=C.a.fromArray(l.camera.rotationCenter));var f=l.camera.location;f.rotationCenter&&delete f.rotationCenter,l.id||(l.id=r.a.idWithPrefix("chapter"));var b=!1;l.timelineMap=Object.values(n.maps).map((function(e){return"dummy"!==e.leafTimeline.id&&(b=!0),s.animationService.fromEngineTimelineMap(e)})),delete l.maps;var m=0,v=!!n.animation&&n.animation.loop;b&&v?m=-1:b&&!v&&(m=1),l.ui=n.ui&&!Object(p.isEmpty)(n.ui)?n.ui:{play:{count:m}};var k=d.a.Annotation,O=u(l.annotations||[]).map((function(e){return s.labelService.deserializeAnnotation(e,l,k)})),S=[],x=this.groupHotspots(u(l.hotspots||[]).filter((function(i){var a=s.labelService.filterHotspot(e,n,i);return a?i.theme||(i.theme="module"===t?g.a.studioNext:g.a.classicHotspot):S.push(i),a}))).map((function(t){var a;return(a=s.labelService).deserializeHotspots.apply(a,[e,n,i].concat(u(t)))}));l.labels=[].concat(u(O),u(x)),delete l.annotations,l.background=c.a.deserialize(n.background);var w=Object(o.plainToClass)(a.a,l);w.hotspots=S,w.readyState={model:!1,animation:!1},w.clippingPlanes=Object(p.isEmpty)(w.clippingPlanes)?y:this.sanitizeClippingPlanes(w.clippingPlanes),w.legend=u(h.legend||[]),w.visibilityLayers=this.buildVisibilityLayers(h.visibilityLayers,w.showObjects),w.colorRecipeObjects=h.colorRecipeObjects,w.contentBlocks=u(h.contentBlocks||[]),w.quizQuestions=(h.quizQuestions||[]).map((function(e){return Object.assign(Object.assign({},e),{chapterId:l.id})}));var j=n.media||{};return Object.values(j).forEach((function(e){e.data.hasOwnProperty("lang")||(e.data.lang="en")})),w.media=j,w.thumbnails=h.thumbnails,w}},{key:"getChapterTweenStates",value:function(e){var t=e.timelineMap.filter((function(e){return"dummy"!==e.data.timeline})).map((function(e){return e.data.timeline}));return Array.from(new Set(t))}},{key:"getChapterLightLibraries",value:function(e){return(e.lights&&e.lights.libraries||[]).filter((function(e){return"default"!==e}))}},{key:"getChapterReflectionLibraries",value:function(e){var t=e.environment&&e.environment.reflectionMap||[],n=function(e){return e.split(".")[0]},i=(e.environment&&e.environment.lightMap||[]).map(n).concat(t.map(n));return Array.from(new Set(i))}},{key:"hasVisibilityLayers",value:function(e){return Array.isArray(e)&&e.length>0}},{key:"buildVisibilityLayers",value:function(e,t){var n={src:{},current:{}};if(e&&this.hasVisibilityLayers(e.layers)){var i=e.initIndex||0,a=this.unpackLayers(e.layers),o=this.buildShownObjectsSet(t),r=this.buildCurrentLayers(a,o);n.src={layers:e.layers,initIndex:i},n.current={layers:r,index:i,position:0}}return n}},{key:"buildShownObjectsSet",value:function(e){var t=this.engineService.getSceneGraph(Human.scene.rootObjects),n=Object.keys(t.nodes).filter((function(n){return Object(k.b)(t,n,e)||Object(k.c)(t,n,e)}));return new Set(n)}},{key:"unpackLayers",value:function(e){var t=[];return e.forEach((function(e){var n=[];e.objectIds.forEach((function(e){var t=Human.scene.objects[e].getLeafObjects();n=n.concat(t.map((function(e){return e.objectId})))})),t.push({name:e.name,objectIds:n})})),t}},{key:"buildCurrentLayers",value:function(e,t){var n=[];return e.forEach((function(i,a){var o=!1;i.objectIds.forEach((function(i){t.has(i)&&(o?n[n.length-1].objectIds.push(i):(n.push({name:e[a].name,objectIds:[i]}),o=!0))}))})),n}},{key:"sanitizeClippingPlanes",value:function(e){var t=Object.values(e.clips).some((function(e){return e.progress>0})),n=Object(p.mapKeys)(e.clips,(function(e,t){return m.c[t]||t}));return Object.assign(Object.assign({},e),{clips:n,enabled:t})}},{key:"groupHotspots",value:function(e){var t={},n=function(e){return e.primitiveIndex?e.primitiveIndex.toFixed(0):e.pos?e.pos.map((function(e){return e.toFixed(3)})).join(":"):Math.random().toFixed(3)};return e.forEach((function(e){var i,a=[(i=e.type,RegExp("^circle-(plus|minus)").test(i)?"pair":"single"),e.objectId,n(e)].join("|");a in t?t[a].push(e):t[a]=[e]})),Object.values(t)}}]),e}()).\u0275fac=function(e){return new(e||i)(w.Zb(v.a),w.Zb(s.a),w.Zb(l.a),w.Zb(x.a))},i.\u0275prov=w.Lb({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},"4FHB":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.updateChapterIds=function(e,t){return Object.keys(e).reduce((function(n,i){return n[t[i]]=e[i],n}),{})},e.duplicateChapter=function(e,t,n){return Object.assign(Object.assign({},n),l({},t,n[e]))},e.deleteChapter=function(e,t){var n=Object.assign({},t);return delete n[e],n},e.addEntryForChapter=function(e,t,n){return n[e]=Object.assign(Object.assign({},n[e]),t),n},e.refreshEngineLookup=function(e,t){Human.modules.moduleData[e].tweenParticleLookup=t}}(i||(i={}))},"4LIl":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Toggle="toggle",e.None="none",e}({})},"4bFC":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Enabled="enabled",e.Disabled="disabled",e.Locked="locked",e}({})},"4qFM":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("fXoL"),a=n("awCs"),o=n("2Vo4"),r=n("XNiG"),s=n("1G5W"),c=n("Zy1z"),u=n("pLZG"),l=n("ofXK"),d=["tabButton"],g=function(e,t,n,i){return{"tabs__label--dark":e,"tabs__label--light":t,"tabs__label--dark-active":n,"tabs__label--light-active":i}};function f(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",5,6),i.cc("click",(function(){i.Cc(n);var e=t.$implicit;return i.gc().handleTabSelect(e)})),i.Pc(2),i.Ub()}if(2&e){var a=t.$implicit,o=i.gc();i.mc("ngClass",i.sc(4,g,"dark"==o.tabTheme,"light"==o.tabTheme,"dark"==o.tabTheme&&o.isTabActive(a),"light"==o.tabTheme&&o.isTabActive(a))),i.Eb("aria-selected",o.isTabActive(a))("tabIndex",o.isTabActive(a)?0:-1),i.Db(2),i.Rc(" ",a.label," ")}}var m=function(e,t){return{"tabs--small":e,"tabs--medium":t}},y=["*"],v=function(){var e=function(){function e(t){h(this,e),this.changeDetector=t,this.display="normal",this.tabTheme="dark",this.activeTabChange=new i.p,this._activeTab=new o.a(0),this.tabSize="small",this.tabAlign="default",this.ngUnsubscribe=new r.a}return b(e,[{key:"activeTab",get:function(){return this._activeTab.value},set:function(e){null!=e&&("string"==typeof e&&(e=e.toUpperCase()),this._activeTab.next(e))}},{key:"tabItems",get:function(){return this._tabItems},set:function(e){this._tabItems=e}},{key:"ngOnInit",value:function(){}},{key:"ngAfterContentInit",value:function(){var e=this;this._tabs.changes.pipe(Object(s.a)(this.ngUnsubscribe)).subscribe((function(t){e.mapTabs(),e.changeDetector.markForCheck()})),this.mapTabs(),this._activeTab.pipe(Object(s.a)(this.ngUnsubscribe)).subscribe((function(t){e.showTab(t)})),this._activeTab.pipe(Object(c.a)(),Object(u.a)((function(e){var t=p(e,2);return t[0]!==t[1]})),Object(s.a)(this.ngUnsubscribe)).subscribe((function(t){var n=p(t,2),i=(n[0],n[1]);e.activeTabChange.next(i)}))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"handleTabSelect",value:function(e){this._activeTab.next(e.index)}},{key:"mapTabs",value:function(){this.tabItems=this._tabs.map((function(e,t){return{index:t,label:e.label||"Item "+t,tab:e}}))}},{key:"showTab",value:function(e){this._tabs.forEach((function(t,n){switch(typeof e){case"number":t.isActive=e===n;break;case"string":t.isActive=e.toString().toUpperCase()===t.label.toUpperCase()}})),this.changeDetector.markForCheck()}},{key:"isTabActive",value:function(e){return("string"==typeof this._activeTab.value?e.label.toUpperCase():e.index)===this._activeTab.value}},{key:"shiftTab",value:function(e){var t=this,n=(this.tabItems.find((function(e){return t.isTabActive(e)})).index+e+this.tabItems.length)%this.tabItems.length;this._activeTab.next(n),this._buttonRefs.toArray()[n].nativeElement.focus()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-tabs"]],contentQueries:function(e,t,n){var o;(1&e&&i.Ib(n,a.a,!1),2&e)&&(i.xc(o=i.dc())&&(t._tabs=o))},viewQuery:function(e,t){var n;(1&e&&i.Vc(d,!0),2&e)&&(i.xc(n=i.dc())&&(t._buttonRefs=n))},inputs:{display:"display",tabTheme:"tabTheme",activeTab:"activeTab",tabSize:"tabSize",tabAlign:"tabAlign"},outputs:{activeTabChange:"activeTabChange"},ngContentSelectors:y,decls:6,vars:7,consts:[[1,"tabs",3,"ngClass"],["role","tablist",1,"tabs__labels",3,"keyup.arrowright","keyup.arrowleft"],["tabElements",""],["class","tabs__label","role","tab","type","button","data-test","tabButton",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"tabs__content"],["role","tab","type","button","data-test","tabButton",1,"tabs__label",3,"ngClass","click"],["tabButton",""]],template:function(e,t){1&e&&(i.lc(),i.Vb(0,"div",0),i.Vb(1,"div",1,2),i.cc("keyup.arrowright",(function(){return t.shiftTab(1)}))("keyup.arrowleft",(function(){return t.shiftTab(-1)})),i.Nc(3,f,3,9,"button",3),i.Ub(),i.Vb(4,"div",4),i.kc(5),i.Ub(),i.Ub()),2&e&&(i.mc("ngClass",i.qc(4,m,"small"==t.tabSize,"medium"==t.tabSize)),i.Db(1),i.Hb("tabs__labels--center","center"===t.tabAlign),i.Db(2),i.mc("ngForOf",t.tabItems))},directives:[l.m,l.o],styles:['.text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.tabs__labels[_ngcontent-%COMP%]{margin-bottom:8px}.tabs__labels--center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.tabs__label[_ngcontent-%COMP%]{padding:2px 4px 4px;margin-right:8px;font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase;font-weight:500;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;background:none;border:none}.tabs__label[_ngcontent-%COMP%]:after{content:"";display:block;border-bottom:3px solid;margin-top:4px;width:0;transition:.25s ease;position:absolute;bottom:0;left:0}.tabs__label[_ngcontent-%COMP%]:hover{cursor:pointer}.tabs__label--dark[_ngcontent-%COMP%]{color:#96a8c0}.tabs__label--dark[_ngcontent-%COMP%]:after{border-color:#2d72dc}.tabs__label--dark-active[_ngcontent-%COMP%], .tabs__label--dark[_ngcontent-%COMP%]:hover{color:#fff}.tabs__label--dark-active[_ngcontent-%COMP%]:after{width:100%}.tabs__label--light[_ngcontent-%COMP%]{color:#374a68}.tabs__label--light[_ngcontent-%COMP%]:after{border-color:#2d72dc}.tabs__label--light-active[_ngcontent-%COMP%], .tabs__label--light[_ngcontent-%COMP%]:hover{color:#283853}.tabs__label--light-active[_ngcontent-%COMP%]:after{width:100%}.tabs--medium[_ngcontent-%COMP%]   .tabs__label[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}'],changeDetection:0}),e}()},"51ZA":function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var i=n("fXoL"),a=n("AcyG"),o=n("11Ye"),r=n("PUI9"),s=n("GMXD"),c=n("p345"),u=n("7u76"),l=n("EF3F"),d=n("gm/O"),g=n("nclC"),f=n("937/"),m=n("JaAu"),y=n("TATr"),v=n("YLgZ"),k=n("UsYJ"),O=n("eW6i"),S=n("0Yvn"),x=n("GUwF"),C=n("82LM"),w=n("sTHe"),j=n("jjCP"),P=n("x/dY"),_=n("dNgK"),M=n("u47x"),I=n("IlST"),T=n("STbY"),U=n("0njA"),L=n("1w2z"),z=n("f0Cb"),A=n("ofXK"),F=["nodeActionsTrigger"];function D(e,t){if(1&e&&(i.Tb(0),i.Vb(1,"button",30),i.Pc(2,"Select"),i.Ub(),i.Qb(3,"mat-divider"),i.Sb()),2&e){i.gc();var n=i.yc(24);i.Db(1),i.mc("matMenuTriggerFor",n)}}function E(e,t){if(1&e&&(i.Tb(0),i.Qb(1,"mat-divider"),i.Vb(2,"button",31),i.Pc(3," Selectable / Unselectable "),i.Ub(),i.Sb()),2&e){i.gc();var n=i.yc(43);i.Db(2),i.mc("matMenuTriggerFor",n)}}function N(e,t){if(1&e){var n=i.Wb();i.Tb(0),i.Qb(1,"mat-divider"),i.Vb(2,"button",32),i.cc("click",(function(){i.Cc(n);var e=i.gc();return e.editNodeLabel(e.node)})),i.Pc(3," Edit Object Name "),i.Ub(),i.Sb()}}function R(e,t){if(1&e&&(i.Tb(0),i.Qb(1,"mat-divider"),i.Vb(2,"button",33),i.Pc(3," Copy "),i.Ub(),i.Sb()),2&e){i.gc();var n=i.yc(50);i.Db(2),i.mc("matMenuTriggerFor",n)}}function V(e,t){if(1&e){var n=i.Wb();i.Tb(0),i.Qb(1,"mat-divider"),i.Vb(2,"button",34),i.cc("click",(function(){i.Cc(n);var e=i.gc();return e.samplePaint(e.node)})),i.Pc(3," Sample Paint "),i.Ub(),i.Sb()}}function B(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",35),i.cc("click",(function(){i.Cc(n);var e=i.gc();return e.toggleVisible(e.node,!0)})),i.Pc(1," Show This "),i.Ub()}}function H(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",36),i.cc("click",(function(){i.Cc(n);var e=i.gc();return e.toggleVisible(e.node,!1)})),i.Pc(1," Hide This "),i.Ub()}}function Q(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",37),i.cc("click",(function(){i.Cc(n);var e=i.gc();return e.togglePickable(e.node,!1)})),i.Pc(1," Make Unselectable "),i.Ub()}}function G(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",38),i.cc("click",(function(){i.Cc(n);var e=i.gc();return e.togglePickable(e.node,!0)})),i.Pc(1," Make Selectable "),i.Ub()}}var W,q=((W=function(){function e(t,n,a,o,r,s,u,l){h(this,e),this.store=t,this.graphService=n,this.changeDetectorRef=a,this.clipboardService=o,this.snackbar=r,this.cameraService=s,this.engineService=u,this.liveAnnouncer=l,this.application=c.a,this.shortId="",this.theme="dark",this.eventCategory="",this.nodeActionsClosed=new i.p}return b(e,[{key:"node",get:function(){return this._node},set:function(e){this._node=e;var t=this.node.id.split("-");this.shortId=2===t.length?t[1]:t[0]}},{key:"isNodeChecked",value:function(e){return this.store.selectSnapshot(s.a.getNodes)[e].checked}},{key:"isNodeShown",value:function(e){return this.store.selectSnapshot(s.a.getNodes)[e].shown}},{key:"checkNode",value:function(e,t){var n=void 0===t?!this.isNodeChecked(e.id):t;this.store.dispatch(new d.a.UpdateNodesChecked(n,[e.id]))}},{key:"checkInverse",value:function(e){this.store.dispatch(new d.a.UpdateNodesChecked(!0)),this.store.dispatch(new d.a.UpdateNodesChecked(!1,[e.id]))}},{key:"setCheckedNodes",value:function(e,t){this.store.dispatch(new d.a.UpdateNodesChecked(!1));var n=void 0===t?!this.isNodeChecked(e.id):t;this.store.dispatch(new d.a.UpdateNodesChecked(n,[e.id]))}},{key:"flyToNode",value:function(e){var t=this;this.store.dispatch(new o.j(e.id)).subscribe((function(){t.liveAnnouncer.announce("Fly to complete")}))}},{key:"hideNode",value:function(e){this.store.dispatch(new d.a.UpdateNodesShown(!1,[e.id]))}},{key:"hideInverse",value:function(e){var t=this,n=this.store.selectSnapshot(r.a.getViewGraph),i=this.graphService.getAllLeafDescendants(n,[e.id]),a=this.graphService.getInverseSelection(n,[e.id]),o={};i.forEach((function(e){o[e]=!0})),a.forEach((function(e){o[e]=!1}));var c=new d.a.UpdateNodesShown(void 0,void 0,o),u=Object(k.a)(this.store.selectSnapshot(s.a),c);this.store.dispatch(new d.a.ApplyPatch(u.patches));var l,g,h,f=this.engineService.getObjectBoundary(e.id),b=this.cameraService.cameraAfterFlyTo(f),O=new y.m(b),S=(l=this.store.selectSnapshot(v.a),g=O,{nextState:(h=p(immer.produceWithPatches(l,(function(e){e.cameraFlyTo=g.camera})),3))[0],patches:h[1],inversePatches:h[2]});this.store.dispatch(new y.a(S.patches)).subscribe((function(){t.liveAnnouncer.announce("Isolate complete")})),this.store.dispatch(new d.a.UpdateNodeSelected),this.store.dispatch(new d.a.UpdateNodesChecked(!1)),this.store.dispatch(new m.a.SavePatches([{forward:u.patches,inverse:u.inversePatches,patchAction:d.a.ApplyPatch},{forward:S.patches,inverse:S.inversePatches,patchAction:y.a}]))}},{key:"showNode",value:function(e){this.store.dispatch(new d.a.UpdateNodesShown(!0,[e.id])),this.changeDetectorRef.markForCheck()}},{key:"toggleVisible",value:function(e,t){var n=this,i=void 0===t?this.isNodeShown(e.id):t;this.store.dispatch(new d.a.UpdateNodesShown(i,[e.id])).subscribe((function(){n.liveAnnouncer.announce("Object "+(i?"shown":"hidden"))})),this.changeDetectorRef.markForCheck()}},{key:"togglePickable",value:function(e,t){this.store.dispatch(new d.a.UpdateNodesPickable(t,[e.id])),this.changeDetectorRef.markForCheck()}},{key:"makeEverythingElseUnpickale",value:function(e){this.store.dispatch(new d.a.UpdateNodesPickable(!1)),this.store.dispatch(new d.a.UpdateNodesPickable(!0,[e.id]))}},{key:"fadeInverseNodes",value:function(e){var t=this.store.selectSnapshot(r.a.getViewGraph),n=this.graphService.getInverseSelection(t,[e.id]),i=this.graphService.getNodes(t,n);this.store.dispatch(new d.a.UpdateNodesPaint(l.b,i.map((function(e){return e.id})))).subscribe((function(){}))}},{key:"fadeNode",value:function(e){var t=this;this.store.dispatch(new d.a.UpdateNodesPaint(l.b,[e.id])).subscribe((function(){t.liveAnnouncer.announce("Fade complete")}))}},{key:"editNodeLabel",value:function(e){this.store.dispatch(new o.F(e))}},{key:"copy",value:function(e){var t=this;this.clipboardService.copyToClipboard(e,"text").subscribe((function(){t.snackbar.open("Copied ".concat(e," to clipboard."))}))}},{key:"onMenuClosed",value:function(){this.nodeActionsClosed.emit()}},{key:"samplePaint",value:function(e){var t=this.store.selectSnapshot(s.a.getNodePaint)(e.id),n=S.a.toEngine(t);x.a.isRealRecipe(n)?this.store.dispatch(new C.h(t)):this.store.dispatch(new C.d),this.store.dispatch(new o.w(w.a.Paint)),this.store.dispatch(new j.h(P.a.Paint))}}]),e}()).\u0275fac=function(e){return new(e||W)(i.Pb(a.h),i.Pb(u.a),i.Pb(i.i),i.Pb(g.a),i.Pb(_.b),i.Pb(f.a),i.Pb(O.a),i.Pb(M.i))},W.\u0275cmp=i.Jb({type:W,selectors:[["app-node-actions"]],viewQuery:function(e,t){var n;1&e&&i.Jc(F,!0),2&e&&i.xc(n=i.dc())&&(t.nodeActionsTrigger=n.first)},inputs:{node:"node",theme:"theme",eventCategory:"eventCategory"},outputs:{nodeActionsClosed:"nodeActionsClosed"},decls:58,vars:25,consts:[["app-button","","data-test","nodeActionsTrigger","buttonSize","xsmall",3,"buttonTheme","matMenuTriggerFor","menuClosed"],["nodeActionsTrigger","matMenuTrigger"],["icon","ellipsis-v","aria-hidden","true"],[1,"visually-hidden"],[3,"overlapTrigger"],["nodeActions","matMenu"],[4,"appFlagApplication","appFlagApplicationPage","appFlagApplicationMode"],["mat-menu-item","","data-test","nodeActionsHideShow",3,"click"],["mat-menu-item","","data-test","nodeActionsIsolate",3,"click"],["data-test","nodeActionsFadeTrigger","mat-menu-item","",3,"matMenuTriggerFor"],[4,"appFlagApplication","appFlagApplicationMode","appFlagApplicationPage"],["mat-menu-item","","data-test","nodeActionsFlyTo",3,"click"],["selectActions","matMenu"],["mat-menu-item","","data-test","nodeActionsSelectThis",3,"click"],["mat-menu-item","","data-test","nodeActionsSelectEverythingElse",3,"click"],["fadeActions","matMenu"],["mat-menu-item","","data-test","nodeActionsFadeThis",3,"click"],["mat-menu-item","","data-test","nodeActionsFadeEverythingElse",3,"click"],["showHideActions","matMenu"],["mat-menu-item","","data-test","nodeActionsShowThis",3,"click",4,"ngIf"],["mat-menu-item","","data-test","nodeActionsShowEverythingElse",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["pickableActions","matMenu"],["mat-menu-item","","data-test","nodeActionsPickable",3,"click",4,"ngIf"],["mat-menu-item","","data-test","nodeActionsUnpickable",3,"click",4,"ngIf"],["mat-menu-item","","data-test","nodeActionsEverythingElseUnpickable",3,"click"],["copyActions","matMenu"],["mat-menu-item","","data-test","nodeActionsCopyShortID",3,"click"],["mat-menu-item","","data-test","nodeActionsCopyFullID",3,"click"],["mat-menu-item","","data-test","nodeActionsCopyDisplayName",3,"click"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","","data-test","nodeActionsPickableTrigger",3,"matMenuTriggerFor"],["mat-menu-item","","data-test","nodeActionsEditName",3,"click"],["mat-menu-item","","data-test","nodeActionsCopyTrigger",3,"matMenuTriggerFor"],["mat-menu-item","","data-test","nodeActionsSamplePaint",3,"click"],["mat-menu-item","","data-test","nodeActionsShowThis",3,"click"],["mat-menu-item","","data-test","nodeActionsShowEverythingElse",3,"click"],["mat-menu-item","","data-test","nodeActionsPickable",3,"click"],["mat-menu-item","","data-test","nodeActionsUnpickable",3,"click"]],template:function(e,t){if(1&e&&(i.Tb(0),i.Vb(1,"button",0,1),i.cc("menuClosed",(function(){return t.onMenuClosed()})),i.Qb(3,"app-icon",2),i.Vb(4,"span",3),i.Pc(5),i.Ub(),i.Ub(),i.Vb(6,"mat-menu",4,5),i.Nc(8,D,4,1,"ng-container",6),i.Vb(9,"button",7),i.cc("click",(function(){return t.toggleVisible(t.node,!t.node.boolState.shown)})),i.Pc(10),i.Ub(),i.Vb(11,"button",8),i.cc("click",(function(){return t.hideInverse(t.node)})),i.Pc(12," Isolate "),i.Ub(),i.Qb(13,"mat-divider"),i.Vb(14,"button",9),i.Pc(15," Fade "),i.Ub(),i.Nc(16,E,4,1,"ng-container",10),i.Qb(17,"mat-divider"),i.Vb(18,"button",11),i.cc("click",(function(){return t.flyToNode(t.node)})),i.Pc(19,"Fly To"),i.Ub(),i.Nc(20,N,4,0,"ng-container",6),i.Nc(21,R,4,1,"ng-container",6),i.Nc(22,V,4,0,"ng-container",6),i.Ub(),i.Vb(23,"mat-menu",null,12),i.Vb(25,"button",13),i.cc("click",(function(){return t.checkNode(t.node,!0)})),i.Pc(26," Select This "),i.Ub(),i.Vb(27,"button",14),i.cc("click",(function(){return t.checkInverse(t.node)})),i.Pc(28," Select Everything Else "),i.Ub(),i.Ub(),i.Vb(29,"mat-menu",null,15),i.Vb(31,"button",16),i.cc("click",(function(){return t.fadeNode(t.node)})),i.Pc(32," Fade This "),i.Ub(),i.Vb(33,"button",17),i.cc("click",(function(){return t.fadeInverseNodes(t.node)})),i.Pc(34," Fade Everything Else "),i.Ub(),i.Ub(),i.Vb(35,"mat-menu",null,18),i.Nc(37,B,2,0,"button",19),i.Nc(38,H,2,0,"button",20),i.Qb(39,"mat-divider"),i.Vb(40,"button",21),i.cc("click",(function(){return t.hideInverse(t.node)})),i.Pc(41,"Hide Everything Else"),i.Ub(),i.Ub(),i.Vb(42,"mat-menu",null,22),i.Nc(44,Q,2,0,"button",23),i.Nc(45,G,2,0,"button",24),i.Qb(46,"mat-divider"),i.Vb(47,"button",25),i.cc("click",(function(){return t.makeEverythingElseUnpickale(t.node)})),i.Pc(48," Make Everything Else Unselectable "),i.Ub(),i.Ub(),i.Vb(49,"mat-menu",null,26),i.Vb(51,"button",27),i.cc("click",(function(){return t.copy(t.shortId)})),i.Pc(52," Copy Short ID "),i.Ub(),i.Vb(53,"button",28),i.cc("click",(function(){return t.copy(t.node.id)})),i.Pc(54," Copy Full ID "),i.Ub(),i.Qb(55,"mat-divider"),i.Vb(56,"button",29),i.cc("click",(function(){return t.copy(t.node.label)})),i.Pc(57," Copy Display Name "),i.Ub(),i.Ub(),i.Sb()),2&e){var n=i.yc(7),a=i.yc(30);i.Db(1),i.mc("buttonTheme",t.theme)("matMenuTriggerFor",n),i.Db(4),i.Rc("",t.node.label," menu"),i.Db(1),i.mc("overlapTrigger",!0),i.Db(2),i.mc("appFlagApplication",t.application.All)("appFlagApplicationPage","/edit")("appFlagApplicationMode","include"),i.Db(2),i.Rc(" ",t.node.boolState.shown?"Hide":"Show"," "),i.Db(4),i.mc("matMenuTriggerFor",a),i.Db(2),i.mc("appFlagApplication",t.application.All)("appFlagApplicationMode","include")("appFlagApplicationPage","/edit"),i.Db(4),i.mc("appFlagApplication",t.application.Loft)("appFlagApplicationPage","/edit")("appFlagApplicationMode","include"),i.Db(1),i.mc("appFlagApplication",t.application.Loft)("appFlagApplicationPage","/edit")("appFlagApplicationMode","include"),i.Db(1),i.mc("appFlagApplication",t.application.All)("appFlagApplicationPage","/edit")("appFlagApplicationMode","include"),i.Db(15),i.mc("ngIf",!t.node.boolState.shown),i.Db(1),i.mc("ngIf",t.node.boolState.shown),i.Db(6),i.mc("ngIf",t.node.boolState.pickable),i.Db(1),i.mc("ngIf",!t.node.boolState.pickable)}},directives:[I.a,T.d,U.a,T.a,L.a,T.b,z.a,A.p],styles:[""],changeDetection:0}),W)},"5miH":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Started="started",e.Loaded="loaded",e.Tick="tick",e.HumanReady="human.ready",e.HumanStarted="started",e.Error="error",e.HumanError="human.error",e.CanvasResized="canvas.resized",e.HumanCanvasResized="human.canvasResized",e.LogDebug="_log.debug",e.LogError="_log.error",e.LogInfo="_log.info",e.LogWarn="_log.warn",e.SceneLoaded="scene.loaded",e.HumanProgress="human.progress",e.AnnotationsCreated="annotations.created",e.AnnotationsDestroyed="annotations.destroyed",e.AnnotationsHidden="annotations.hidden",e.AnnotationsShown="annotations.shown",e.AssetsLoadFinish="assets.load.finish",e.AssetsLoadProgress="assets.load.progress",e.AssetsLoadStart="assets.load.start",e.CameraRested="camera.rested",e.CameraUpdated="camera.updated",e.HotspotsDisplayUpdated="hotspots.displayUpdated",e.HotspotsEntered="hotspots.entered",e.HotspotsLeft="hotspots.left",e.HotspotsPicked="hotspots.picked",e.HotspotsPositionUpdated="hotspots.positionUpdated",e.LabelsCreated="labels.created",e.LabelsUpdated="labels.updated",e.LabelsMoved="labels.moved",e.LabelsDestroyed="labels.destroyed",e.LabelsChapterInfo="labels.chapterInfo",e.LabelsShown="labels.shown",e.LabelsHidden="labels.hidden",e.LabelsEnabled="labels.enabled",e.LabelsDisabled="labels.disabled",e.LabelsEntered="labels.entered",e.LabelsLeft="labels.left",e.LabelsPicked="labels.picked",e.ModuleInteractive="module.interactive",e.ModulesActivateFinish="modules.activate.finish",e.ModulesCreateFinish="modules.create.finish",e.ModulesDestroyFinish="modules.destroy.finish",e.PickPicked="pick.picked",e.QuizEntered="quiz.entered",e.QuizExited="quiz.exited",e.QuizQuestionLoaded="quiz.questionLoaded",e.QuizAnswerSelected="quiz.answerSelected",e.QuizAnswerSubmitted="quiz.answerSubmitted",e.QuizCompleted="quiz.completed",e.SceneMarkersUpdated="scene.markers.updated",e.SceneObjectRenderable="scene.objectRenderable",e.SceneObjectsSelected="scene.objectsSelected",e.SceneObjectsShown="scene.objectsShown",e.ScenePicked="scene.picked",e.SceneRestored="scene.restored",e.SceneXrayEnabled="scene.xrayEnabled",e.SceneXrayDisabled="scene.xrayDisabled",e.SceneReady="scene.ready",e.TimelineChaptersActivated="timeline.chapters.activated",e.TimelineChaptersActivateFinish="timeline.chapters.activate.finish",e.TimelineChaptersActivateStart="timeline.chapters.activate.start",e.TimelineChapterTransition="timeline.chapterTransition",e.TimelinePlaying="timeline.playing",e.TimelineScrubbed="timeline.scrubbed",e.TimelinePlayed="timeline.played",e.TimelineStopped="timeline.stopped",e.TimelinePaused="timeline.paused",e.TimelineUnpaused="timeline.unpaused",e.TimelineCompleted="timeline.completed",e.TimelineTimeFrameUpdated="timeline.timeFrame.updated",e.GraphAssetAttachFinish="graph.assetAttach.finish",e.TweenVisibilityUpdate="TweenVisibilityUpdate",e.NativeDeleteData="native.deleteData",e.NativeUpgrade="native.upgrade",e.NativeRestore="native.restore",e.NativeShare="native.share",e.NativeGoogleSignUp="native.googleSignUp",e.NativeDebugMessage="native.debugMessage",e}({})},"5nh7":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("R0Ic");!function(e){e.slideTransition=Object(a.g)([Object(a.l)({transform:"translateY({{ from }}%)",opacity:0}),Object(a.e)("{{ duration }}ms ease-out",Object(a.l)({transform:"translateY({{ to }})",opacity:1}))]),e.fadeIn=Object(a.g)([Object(a.l)({opacity:0}),Object(a.e)("{{ duration }}ms ease-out",Object(a.l)({opacity:1}))]),e.fadeOut=Object(a.g)([Object(a.l)({opacity:"*"}),Object(a.e)("{{ duration }}ms ease-in",Object(a.l)({opacity:0}))])}(i||(i={}))},"5sb6":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.AboutDialog="AboutDialog",e.AddTeamModelDialog="AddTeamModelDialog",e.AssignUserRoleDialog="AssignUserRoleDialog",e.BookmarkAccessDialog="BookmarkAccessDialog",e.ClipboardDialog="ClipboardDialog",e.ShareUrlDialog="ShareUrlDialog",e.ConfirmDialog="ConfirmDialog",e.ContactDialog="ContactDialog",e.GroupRestrictionDialog="GroupRestrictionDialog",e.ImageDialog="ImageDialog",e.ImportDialog="ImportDialog",e.JoinDomainDialog="JoinDomainDialog",e.LimitDialog="LimitDialog",e.ManageDialog="ManageDialog",e.PremiumContentDialog="PremiumContentDialog",e.PricingDialog="PricingDialog",e.ProfileDialog="ProfileDialog",e.QuizSettingsDialog="QuizSettingsDialog",e.SaveAsBookmarkDialog="SaveAsBookmarkDialog",e.SaveBookmarkDialog="SaveBookmarkDialog",e.SaveModuleDialog="SaveModuleDialog",e.TransferUserContentDialog="TransferUserContentDialog",e.RemoveUserDialog="RemoveUserDialog",e.MergeModuleDialog="MergeModuleDialog",e.MergeConflictDialog="MergeConflictDialog",e.WelcomeTourDialog="WelcomeTourDialog",e.TrialExpiredDialog="TrialExpiredDialog",e.PremiumAccessDialog="PremiumAccessDialog",e.ConfirmRoleDialog="ConfirmRoleDialog",e.CollectionNameDialog="CollectionNameDialog",e.PublicViewGateDialog="PublicViewGateDialog",e}({})},"6L7E":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("2o60"),a=n("l57l"),o=n("A+8E"),r=function e(t){h(this,e),this.pinType=i.a.PlusMinus,this.sequentialType=o.a.Alphabetical,this.theme=a.a.StudioNext,this.expandTag=!0,this.showDescription=!0,this.collapseDescription=!1,this.pinGlow=!1,this.hideWire=!1,this.hideTag=!1,this.title=t}},"6d61":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("LvDl"),a=n("HDdC"),o=n("pLZG"),r=n("eIep");function s(e){return function(e){return new a.a((function(t){var n=new Image;n.onload=function(){var e=function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.naturalWidth,t.height=e.naturalHeight,n.drawImage(e,0,0),t}(n);t.next(e),t.complete()},n.onerror=function(){var e=document.createElement("canvas");t.next(e),t.complete()},n.src=e}))}(e).pipe(Object(o.a)((function(e){return!Object(i.isNil)(e)})),Object(r.a)((function(e){return new a.a((function(t){e.toBlob((function(e){t.next(e),t.complete()}),"image/jpeg",100)}))})))}},"6n0X":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("ofXK"),a=n("vvyD"),o=n("yGOH"),r=n("+pSP"),s=n("aKmd"),c=n("Wdmj"),u=n("EWj2"),l=n("fXoL"),p=function(){var e=function e(){h(this,e)};return e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({factory:function(t){return new(t||e)},imports:[[i.c,r.a,a.a,u.a,s.a,o.a,c.d]]}),e}()},"7PKw":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i,a=function e(){h(this,e)},o=n("lJxs"),r=n("b36G"),s=n("zrlG"),c=n("AbMW"),u=function(e){return e.IdAsc="+collection_id",e.IdDesc="-collection_id",e.NameAsc="+collection_name",e.NameDesc="-collection_name",e.UpdateDateAsc="+collection_updatedate",e.UpdateDateDesc="-collection_updatedate",e.CreateDateAsc="+collection_createdate",e.CreateDateDesc="-collection_createdate",e.CustomAsc="+custom_sort_order",e.CustomDesc="-custom_sort_order",e}({}),l=n("MCQd"),p=n("fXoL"),d=n("tk/3"),g="/ws/organization/collection",f=((i=function(){function e(t){h(this,e),this.http=t}return b(e,[{key:"createOrganization",value:function(e){return this.http.post("/ws/organization/create",e)}},{key:"updateOrganization",value:function(e){return this.http.post("/ws/organization/update",e)}},{key:"getCollections",value:function(e){var t=this;e.sort_order||(e.sort_order=[u.CustomAsc,u.NameDesc]);var n=l.a(e);return this.http.get("".concat(g).concat(n)).pipe(Object(o.a)((function(e){return Object(r.plainToClass)(a,e).map((function(e){return t.normalizeCollectionModel(e)}))})))}},{key:"getCollectionContent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=n.toLocaleLowerCase().split(" ");return this.getCollections({group_id:e,collection_id:t,include_content:1}).pipe(Object(o.a)((function(e){return e[0].collection_content.map((function(e){return Object(r.plainToClass)(s.a,e)})).filter((function(e){var t=!0;return i.length&&e.title&&i.forEach((function(n){t=t&&e.title.toLocaleLowerCase().indexOf(n)>=0})),t=t&&!0!==e.unavailable}))})))}},{key:"addCollection",value:function(e,t){return this.http.post(g,{group_id:e,collection_name:t})}},{key:"removeCollection",value:function(e){return this.http.request("DELETE",g,{body:{group_id:e.group_id,collection_id:e.collection_id}})}},{key:"renameCollection",value:function(e,t){return this.http.post(g,{group_id:e.group_id,collection_id:e.collection_id,collection_name:t})}},{key:"reorderCollections",value:function(e,t){return this.http.post(g+"/sort-order",{group_id:e,collection_id_sort_list:t.map((function(e){return e.collection_id}))})}},{key:"updateCollectionContent",value:function(e,t,n){return this.http.post(g+"/content",{group_id:e,add_content:t,remove_content:n})}},{key:"getOrganizationAttribute",value:function(e,t,n){return e.find((function(e){return e.type===t&&e.name===n}))}},{key:"getPublicProfile",value:function(e){return this.http.get("/ws/organization/public/profile",{params:Object.assign({},e)}).pipe(Object(o.a)((function(e){return e})))}},{key:"normalizeCollectionModel",value:function(e){return e.collection_content&&e.collection_content.forEach((function(e){Object(c.a)(e)})),e}}]),e}()).\u0275fac=function(e){return new(e||i)(p.Zb(d.b))},i.\u0275prov=p.Lb({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},"7XdW":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("tyNb"),a=n("pLZG"),o=n("fXoL"),r=function(){var e=function(){function e(t){h(this,e),this.router=t,this.history=[]}return b(e,[{key:"loadRouting",value:function(){var e=this;this.router.events.pipe(Object(a.a)((function(e){return e instanceof i.c}))).subscribe((function(t){var n=t.urlAfterRedirects;e.history=[].concat(u(e.history),[n])}))}},{key:"getHistory",value:function(){return this.history}},{key:"getPreviousUrl",value:function(){return this.history[this.history.length-2]||"/"}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Zb(i.e))},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"7b4e":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}e.getUuid=t,e.idWithPrefix=function(e){return e?"".concat(e,"-").concat(t()):t()}}(i||(i={}))},"7gUy":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),a=n("jhN1"),o=n("lR5k"),r=function(){var e=function(){function e(t,n){h(this,e),this.domSanitizer=t,this.markdownService=n}return b(e,[{key:"html",set:function(e){this.safeHTML=this.domSanitizer.bypassSecurityTrustHtml(e||"")}},{key:"markdownText",set:function(e){this.html=this.markdownService.compile(e,!0)}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Pb(a.b),i.Pb(o.c))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-html"]],inputs:{html:"html",markdownText:"markdownText"},decls:1,vars:1,consts:[[1,"html",3,"innerHTML"]],template:function(e,t){1&e&&i.Qb(0,"div",0),2&e&&i.mc("innerHTML",t.safeHTML,i.Dc)},styles:[""],encapsulation:2,changeDetection:0}),e}()},"7u76":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n("e0fF");var a,r=n("f5j2"),c=n("nS47"),l=n("fXoL"),d=((a=function(){function e(){h(this,e)}return b(e,[{key:"serializeNode",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return!0},o={};return o.id=t.id,Object.entries(t.boolState).forEach((function(e){var t=p(e,2),n=t[0],a=t[1];i.hasOwnProperty(n)&&(o[n]=a)})),Object.entries(t.numState).forEach((function(e){var t=p(e,2),n=t[0],a=t[1];i.hasOwnProperty(n)&&(o[n]=a)})),e.successors[t.id]&&(o.children=[],e.successors[t.id].forEach((function(t){a(t)&&o.children.push(n.serializeNode(e,e.nodes[t],i,a))}),this)),o}},{key:"getAllSiblingsFromList",value:function(e,t,n){var i,a=[];for(i=0;i<t.length;i++)this.getSiblings(e,t[i],n).forEach((function(e){a.includes(e)||a.push(e)}));return a}},{key:"getElectionResults",value:function(e,t,n,a){var u,l,d=this,g=function(e){i(n,e);var t=o(n);function n(e,i){var a;return h(this,n),a=t.call(this),Object.entries(e).forEach((function(e){var t=p(e,2),n=t[0];t[1],a[n]={votesFor:[],votesAgainst:[]},Object.entries(i).forEach((function(e){var t=p(e,2),i=t[0];t[1][n]?a[n].votesFor.push(i):a[n].votesAgainst.push(i)}),s(a))}),s(a)),a}return n}(function(){return function e(){h(this,e)}}()),f=Object.keys(a),b=[];return n.forEach((function(n){l={},c.a.getSuccessors(e,n).forEach((function(n){l[n]=t[n]||r.a.createVoter(f,c.a.getState(e,n,f)),delete t[n]}),d),u=new g(a,l);var i=r.a.buildElectionResult(n,u,a);b.push(i);var o={};Object.entries(i).forEach((function(e){var t=p(e,2),n=t[0],i=t[1];o[n]=i.result})),t[n]=o}),this),b}},{key:"updateGraphStateRecord",value:function(e,t,n,i){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];n.forEach((function(n){var o=n[i[0]].id,r=c.a.getState(e,o,i),s={},u=!1;i.forEach((function(e){(a||n[e].result!==r[e])&&(s[e]=n[e].result,u=!0)})),u&&(t[o]=s)}),this)}},{key:"nodeExists",value:function(e,t){return!!e.nodes[t]}},{key:"getLeaves",value:function(e){var t=[];return Object.entries(e.nodes).forEach((function(n){var i=p(n,2),a=i[0];i[1],e.successors[a]||t.push(a)})),t}},{key:"getDescendants",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];return function t(n){c.a.getSuccessors(e,n).forEach((function(e){i.push(e),t(e)}))}(t),n&&i.push(t),i}},{key:"getLeafDescendants",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.getDescendants(e,t,n).filter((function(t){return c.a.isLeaf(e,t)}));return(c.a.isLeaf(e,t)||n)&&i.push(t),i}},{key:"getAllLeafDescendants",value:function(e,t){var n=this,i=[];return t.forEach((function(t){i=c.a.isLeaf(e,t)?[].concat(u(i),[t]):[].concat(u(i),u(n.getLeafDescendants(e,t,!1)))})),i.sort().reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[])}},{key:"getInverseSelection",value:function(e,t){var n=this.getAllLeafDescendants(e,t);return this.getLeaves(e).filter((function(e){return n.indexOf(e)<0}))}},{key:"getSiblings",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.predecessors[t],a=[];if(a=i?c.a.getSuccessors(e,i):c.a.getRoots(e),!n){var o=a.indexOf(t);o>=0&&a.splice(o,1)}return a}},{key:"getNodes",value:function(e,t){var n=[];return t.forEach((function(t){e.nodes[t]&&n.push(e.nodes[t])})),n}},{key:"setState",value:function(e,t,n){var i=c.a.getNode(e,t),a={};return Object.entries(n).forEach((function(e){var t=p(e,2),n=t[0],o=t[1];"boolean"==typeof o&&i.boolState[n]!==o?(i.boolState[n]=o,a[n]=o):"number"==typeof o&&i.numState[n]!==o&&(i.numState[n]=o,a[n]=o)})),a}},{key:"synchronize",value:function(e,t,n){var i=this,a=this.calculateGraphStateMap(e,t,n);return Object.entries(a).forEach((function(t){var n=p(t,2),a=n[0],o=n[1];i.setState(e,a,o)}),this),a}},{key:"calculateGraphStateMap",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!n,a=[],o={},s=[],u={},l=Object.keys(t),d=0;for(n?Object.entries(n).forEach((function(t){var i=p(t,2),a=i[0];i[1],o[a]=r.a.createVoter(l,n[a]),u[a]=Object.assign({},o[a]),d=Math.max(d,c.a.getNode(e,a).depth)}),this):this.getLeaves(e).forEach((function(t){o[t]=r.a.createVoter(l,c.a.getNode(e,t).boolState),u[t]=Object.assign({},o[t]),d=Math.max(d,c.a.getNode(e,t).depth)}),this),d-=1,a=r.a.getEligibleElections(e,Object.keys(o),d);d>=0;)s=this.getElectionResults(e,o,a,t),this.updateGraphStateRecord(e,u,s,l,i),d-=1,a=r.a.getEligibleElections(e,Object.keys(o),d);return u}},{key:"filterGraphAccessors",value:function(e,t){var n=this,i=this.getNodes(e,t).sort((function(e,t){return e.depth-t.depth})),a=new Map;return i.filter((function(t){return!a.has(t.id)&&(n.getDescendants(e,t.id,!0).forEach((function(e){return a.set(e,!0)})),!0)})).map((function(e){return e.id}))}},{key:"resetDepth",value:function(e){c.a.depthFirst(e,(function(t){var n=0;e.predecessors[t]&&(n=c.a.getNode(e,e.predecessors[t]).depth+1),c.a.getNode(e,t).depth=n}))}},{key:"deleteNode",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.nodeExists(e,t)){delete e.nodes[t];var a=e.predecessors[t];a&&(delete e.predecessors[t],e.successors[a]&&(e.successors[a]=e.successors[a].filter((function(e){return e!==t}))));var o=e.successors[t];o&&(delete e.successors[t],i&&o.forEach((function(t){n.deleteNode(e,t)}),this)),e.roots[t]&&delete e.roots[t]}}},{key:"sanitizeNodeID",value:function(e){var t=new RegExp(/\|:/,"gi");return e.replace(t,"_")}},{key:"resetAsLeaf",value:function(e,t){var n=[];return e.nodes[t]&&!c.a.isLeaf(e,t)&&(n=this.getDescendants(e,t),delete e.successors[t],n.forEach((function(t){delete e.nodes[t],delete e.successors[t],delete e.predecessors[t]}))),n}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275prov=l.Lb({token:a,factory:a.\u0275fac,providedIn:"root"}),a)},"82LM":function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"i",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"k",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"l",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return d})),n.d(t,"n",(function(){return g})),n.d(t,"j",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"m",(function(){return m}));var i=function(){var e=function e(t){h(this,e),this.colorRecipe=t};return e.type="[Edit Paint] Set Color Recipe",e}(),a=function(){var e=function e(t){h(this,e),this.brushMode=t};return e.type="[Edit Paint] Set Paint Brush Mode",e}(),o=function(){var e=function e(){h(this,e)};return e.type="[Edit Paint] Clear Current Recipe",e}(),r=function(){var e=function e(){h(this,e)};return e.type="[Edit Paint] Reset Paint",e}(),s=function(){var e=function e(t){h(this,e),this.recipe=t};return e.type="[Edit Paint] Add Recent Recipe",e}(),c=function(){var e=function e(t){h(this,e),this.recipes=t};return e.type="[Edit Paint] Set Recent Recipes",e}(),u=function(){var e=function e(){h(this,e)};return e.type="[Edit Paint] Reset Story Recipes",e}(),l=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.recipes=n};return e.type="[Edit Paint] Set Story Recipes For Chapter",e}(),p=function(){var e=function e(t){h(this,e),this.palette=t};return e.type="[Edit Paint] Add Palette",e}(),d=function(){var e=function e(t){h(this,e),this.paletteId=t};return e.type="[Edit Paint] Remove Palette",e}(),g=function(){var e=function e(t){h(this,e),this.palette=t};return e.type="[Edit Paint] Update Palette",e}(),f=function(){var e=function e(t){h(this,e),this.palettes=t};return e.type="[Edit Paint] Set Palettes",e}(),b=function(){var e=function e(t,n){h(this,e),this.recipe=t,this.paletteId=n};return e.type="[Edit Paint] Add Recipe to Palette",e}(),m=function(){var e=function e(t,n){h(this,e),this.paletteId=t,this.open=n};return e.type="[Edit Paint] Toggle Palette",e}()},"8mU5":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i,a=function(e){return e.Facebook="facebook",e.LinkedIn="linkedin",e.Twitter="twitter",e}({}),o=n("CSvP"),r=function(e){return e.Model="model",e.Quiz="quiz",e}({}),s=n("fXoL"),c=n("tk/3"),u=((i=function(){function e(t,n){h(this,e),this.http=t,this.APP_BASE_URL=n}return b(e,[{key:"shareEmailLink",value:function(e){return this.http.post("/ws/user/share/email",e)}},{key:"generateShareLink",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=e.thumbnail_url.replace("/small/","/large/");return{type:e.quiz?r.Quiz:r.Model,title:e.title,relativeUrl:this.createShareUrl(e,"share",t,!1,!1),fullUrl:this.createShareUrl(e,"share",t,!0,!1),thumbUrl:n,social:[{type:a.Facebook,url:"https://www.facebook.com/sharer/sharer.php?u="+this.createShareUrl(e,a.Facebook,t,!0,!0)},{type:a.LinkedIn,url:"https://www.linkedin.com/sharing/share-offsite/?url="+this.createShareUrl(e,a.LinkedIn,t,!0,!0)},{type:a.Twitter,url:"http://twitter.com/share?url="+this.createShareUrl(e,a.Twitter,t,!0,!0)}]}}},{key:"createShareUrl",value:function(e,t,n,i,o){var r=e.id.replace(".json",""),s=Object.values(a).includes(t),c="/view?id=".concat(r,"&lang=").concat(n,"&ref=").concat(t),u=i||s?"".concat(s?"https://human.biodigital.com":this.APP_BASE_URL).concat(c):c;return o?encodeURIComponent(u):u}}]),e}()).\u0275fac=function(e){return new(e||i)(s.Zb(c.b),s.Zb(o.a))},i.\u0275prov=s.Lb({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},"8pBO":function(e,t,n){"use strict";var i,a;n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return y}));var o=n("LvDl"),r=n("WoAB"),s=n("VKIe"),c=[r.a.ViewBookmarks,r.a.CopyUrl,r.a.SavePrivateBookmarks,r.a.ExportCSV],p=[].concat(c,[r.a.InviteUsers,r.a.PublishBookmarks,r.a.EditBookmarks,r.a.EditTeamBookmarks,r.a.RemoveTeamBookmarks,r.a.AddTeamBookmarks,r.a.DuplicateTeamBookmarks]),d=[].concat(u(p),[r.a.InviteUsers,r.a.EditTeamAccount,r.a.EditAllTeamBookmarks,r.a.CreateCollection,r.a.TransferContent,r.a.RemoveUser,r.a.AssignRole]),g=[s.a.Viewer,s.a.Creator,s.a.Admin],h={role_id:void 0,role_name:s.a.Creator,role_display_name:"",role_description:"",permissions:u(p)},f=(l(i={},s.a.Viewer,c),l(i,s.a.Creator,p),l(i,s.a.Admin,d),i),b=(l(a={},s.a.Viewer,"Can view team content and edit personal content"),l(a,s.a.Creator,"Can edit and view team content"),l(a,s.a.Admin,"Can manage team settings and edit all content"),a);function m(e){var t,n=Object(o.get)(e,"role_name",h.role_name),i=Object(o.get)(e,"role_description",b[n]),a=Object(o.get)(e,"permissions",void 0);return Object.assign(Object.assign({},e),{role_description:i,permissions:Object(o.isNil)(a)?(t=n,f[t]||[]):a})}function y(e,t){return g.indexOf(e)-g.indexOf(t)}},"8qIY":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.All="all",e.iOS="ios",e.Android="android",e}({})},"937/":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("R6Q1"),a=n("dMmY"),o=n("HDdC"),r=n("IOcx"),s=n("fXoL"),c=function(){var e=function(){function e(t){h(this,e),this.numberService=t,this.rotation={vx:0,vy:0},this.pan={x:0,y:0,z:0},this.zoom=0}return b(e,[{key:"getEye",value:function(){return Human.renderer.camera.eye}},{key:"setEye",value:function(e){Human.renderer.camera.setLookAt({eye:e})}},{key:"getCamera",value:function(){return Human.renderer.camera.getLookAt()}},{key:"getLookDirection",value:function(){var e=r.a.create();return Human.renderer.camera.getLookDir(e),e}},{key:"setCamera",value:function(e){return Human.renderer.camera.setLookAt(e)}},{key:"getCameraZoom",value:function(){return Human.renderer.camera.getZoom()}},{key:"captureCamera",value:function(){return{lookAt:Human.renderer.camera.getLookAt(),zoom:Human.renderer.camera.getZoom()}}},{key:"resetCamera",value:function(){return new o.a((function(e){Human.init.resetCamera((function(){e.next(),e.complete()}))}))}},{key:"getDirection",value:function(e){var t=this.getEye(),n=r.a.create();return n[0]=t.x-e.worldPos[0],n[1]=t.y-e.worldPos[1],n[2]=t.z-e.worldPos[2],r.a.normalize(n,n),n}},{key:"rotateCameraStatic",value:function(e,t){Human.renderer.camera.rotateX(e),Human.renderer.camera.rotateY(t)}},{key:"panCameraStatic",value:function(e,t,n){Human.renderer.camera.pan({x:e,y:t,z:n})}},{key:"setHumanZoom",value:function(e){Human.renderer.camera.zoom(e)}},{key:"setHumanZoomFactor",value:function(e){Human.renderer.camera.setZoom(e)}},{key:"getCameraRotationCenter",value:function(){return i.a.fromArray(Human.renderer.camera.rotationCenter)}},{key:"setCameraRotationCenter",value:function(e){var t;(t=Human.renderer.camera).setRotationCenter.apply(t,u(i.a.toArray(e)))}},{key:"setCameraRotation",value:function(e,t){this.rotation.vx=t,this.rotation.vy=-e}},{key:"setCameraPan",value:function(e,t){this.pan.x=e,this.pan.y=t}},{key:"setCameraZoom",value:function(e){this.zoom=.03*e}},{key:"setCameraZoomWithVelocity",value:function(e){var t=this;this.setCameraZoom(e),requestAnimationFrame((function(){e*=.85,Math.abs(e)>1&&t.setCameraZoomWithVelocity(e)}))}},{key:"tickCameraRotation",value:function(){return this.rotation.vx=this.checkEpsilon(this.rotation.vx),this.rotation.vy=this.checkEpsilon(this.rotation.vy),this.rotation}},{key:"tickCameraPan",value:function(){return this.pan.x=this.checkEpsilon(this.pan.x),this.pan.y=this.checkEpsilon(this.pan.y),this.pan.z=this.checkEpsilon(this.pan.z),this.pan}},{key:"tickCameraZoom",value:function(){return this.zoom=this.checkEpsilon(this.zoom),this.zoom}},{key:"areCamerasEqual",value:function(e,t){return this.compareXYZ(e.eye,t.eye)&&this.compareXYZ(e.look,t.look)&&this.compareXYZ(e.up,t.up)}},{key:"compareXYZ",value:function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}},{key:"roundCamera",value:function(e,t){var n=e.eye,i=e.look,a=e.up;return{eye:this.numberService.roundModel(n,t),look:this.numberService.roundModel(i,t),up:this.numberService.roundModel(a,t)}}},{key:"cameraAfterFlyTo",value:function(e){var t=this.getCamera(),n=i.a.toArray(t.look),a=i.a.toArray(t.eye),o=r.a.create();r.a.subtract(o,a,n);var s=r.a.create();r.a.normalize(s,o);var c=Math.abs(r.a.length(s)),u=Human.math.getBoundaryDiag(e),l=Math.abs(u/1.8/Math.tan(27.5))/c*2.5,p=Human.math.getBoundaryCenter(e);r.a.scale(o,s,l);var d=r.a.add(r.a.create(),p,o);return{eye:i.a.fromArray(d),look:i.a.fromArray(p),up:{x:0,y:1,z:0}}}},{key:"setChapterCameraEnabled",value:function(e){this.initCamera||(this.initCamera=Human.timeline.BranchTimeline.prototype.initCamera),Human.timeline.BranchTimeline.prototype.initCamera=e?this.initCamera:function(){}}},{key:"checkEpsilon",value:function(e){return Math.abs(e)<.001?0:e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Zb(a.a))},e.\u0275prov=s.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"9AAO":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("fXoL"),a=n("ofXK"),o=n("0njA");function r(e,t){if(1&e&&i.Qb(0,"app-icon",5),2&e){var n=i.gc();i.mc("icon",n.icon)}}function s(e,t){if(1&e&&i.Qb(0,"span",6),2&e){var n=i.gc();i.Kc("background-image","url("+n.src+")")}}function c(e,t){if(1&e&&(i.Vb(0,"span",7),i.Pc(1),i.Ub()),2&e){var n=i.gc();i.Db(1),i.Rc(" ",n.label," ")}}var u=function(e,t,n,i,a,o,r,s,c,u,l,p,d,g,h,f,b){return{"pin-button--selected":e,"pin-button--disabled":t,"pin-button--small":n,"pin-button--medium":i,"pin-button--large":a,"pin-button--ghost":o,"pin-button--primary":r,"pin-button--secondary":s,"pin-button--outline":c,"pin-button--floating":u,"pin-button--dark":l,"pin-button--row":p,"pin-button--circle":d,"pin-button--square":g,"pin-button--rounded":h,"pin-button--fill":f,"pin-button--left":b}},l=["*"],p=function(e){return e.Circle="circle",e.Rounded="rounded",e.Square="square",e}({}),d=function(e){return e.Left="left",e.Center="center",e}({}),g=function(){var e=function(){function e(t){h(this,e),this.elRef=t,this.selectable=!1,this.size="medium",this.buttonType="default",this.buttonShape=p.Circle,this.buttonAlign=d.Center,this.direction="column",this.fill=!1,this._selected=!1,this.disabled=!1,this.selectedChange=new i.p}return b(e,[{key:"selected",get:function(){return this._selected},set:function(e){this._selected=e,this.selectedChange=new i.p}},{key:"ngOnInit",value:function(){}},{key:"handleClick",value:function(){this.disabled||this.selectable&&(this.selected=!this.selected)}},{key:"focus",value:function(e){this.elRef&&this.elRef.nativeElement.focus()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.m))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-pin-button"],["button","app-pin-button",""]],inputs:{icon:"icon",src:"src",description:"description",label:"label",selectable:"selectable",size:"size",buttonType:"buttonType",buttonShape:"buttonShape",buttonAlign:"buttonAlign",direction:"direction",fill:"fill",selected:"selected",disabled:"disabled"},outputs:{selectedChange:"selectedChange"},ngContentSelectors:l,decls:6,vars:22,consts:[[1,"pin-button",3,"ngClass","click"],[1,"pin-button__pin"],["style","font-size: 14px !important",3,"icon",4,"ngIf"],["class","pin-button__image",3,"backgroundImage",4,"ngIf"],["class","pin-button__label",4,"ngIf"],[2,"font-size","14px !important",3,"icon"],[1,"pin-button__image"],[1,"pin-button__label"]],template:function(e,t){1&e&&(i.lc(),i.Vb(0,"span",0),i.cc("click",(function(){return t.handleClick()})),i.Vb(1,"span",1),i.Nc(2,r,1,1,"app-icon",2),i.Nc(3,s,1,2,"span",3),i.kc(4),i.Ub(),i.Nc(5,c,2,1,"span",4),i.Ub()),2&e&&(i.mc("ngClass",i.wc(4,u,[t.selected,t.disabled,"small"===t.size,"medium"===t.size,"large"===t.size,"ghost"===t.buttonType,"primary"===t.buttonType,"secondary"===t.buttonType,"outline"===t.buttonType,"floating"===t.buttonType,"dark"===t.buttonType,"row"===t.direction,"circle"==t.buttonShape,"square"==t.buttonShape,"rounded"==t.buttonShape,t.fill,"left"===t.buttonAlign])),i.Db(2),i.mc("ngIf",t.icon),i.Db(1),i.mc("ngIf",t.src),i.Db(2),i.mc("ngIf",t.label))},directives:[a.m,a.p,o.a],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}button[app-pin-button]{border-color:transparent;background:none;border-width:0;padding:0;outline:none;margin:0;pointer-events:all}button[app-pin-button]::-moz-focus-inner{border:0}button[app-pin-button]:not([disabled]):hover{cursor:pointer}button[app-pin-button]:focus .pin-button__pin{outline:2px solid #fff;outline-offset:-4px}button[app-pin-button]:focus :not(.pin-button--selected) .pin-button__pin{outline:2px solid #2d72dc!important;outline-offset:-2px}button[app-pin-button]:focus :not(.pin-button--selected).pin-button--dark .pin-button__pin{background-color:#61779e!important}button[app-pin-button]:focus .pin-button--secondary .pin-button__pin{outline:2px solid #fff;outline-offset:-4px}button[app-pin-button][disabled]{pointer-events:none}.pin-button{display:inline-flex;flex-flow:column;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.pin-button:hover{cursor:pointer}.pin-button:hover:not(.pin-button--selected):not(.pin-button--disabled) .pin-button__pin{background:rgba(215,224,234,.6)}.pin-button:not(.pin-button--selected):active:hover .pin-button__pin{background:#d7e0ea}.pin-button--selected .pin-button__pin{background-color:#2d72dc;color:#fff}.pin-button--selected .pin-button__label{color:#2d72dc;font-weight:600}.pin-button--small .pin-button__pin{border-radius:14px;min-width:28px;height:28px}.pin-button--small .pin-button__label{margin-top:0}.pin-button--large .pin-button__pin{font-size:20px;letter-spacing:.5px;line-height:1.4em}.pin-button--left .pin-button__pin{justify-content:flex-start}.pin-button--row{flex-direction:row}.pin-button--row .pin-button__label{margin:0 0 0 4px}.pin-button--ghost:not(.pin-button--selected) .pin-button__pin{background:transparent}.pin-button--outline:not(.pin-button--selected) .pin-button__pin{background:transparent;border:1px solid #96a8c0}.pin-button--primary .pin-button__pin{background:#de3535;color:#fff}.pin-button--primary:not(.pin-button--selected):not(.pin-button--disabled) .pin-button__pin{background:#de3535!important;color:#fff}.pin-button--primary:not(.pin-button--selected):not(.pin-button--disabled):hover .pin-button__pin{background:#e24b4b}.pin-button--secondary .pin-button__pin,.pin-button--secondary:not(.pin-button--selected):not(.pin-button--disabled) .pin-button__pin{background:#2d72dc;color:#fff}.pin-button--secondary:not(.pin-button--selected):not(.pin-button--disabled):hover .pin-button__pin{background:#4381e0}.pin-button--disabled{opacity:.2}.pin-button--disabled:hover{cursor:auto}.pin-button--fill,.pin-button--fill .pin-button__pin{width:100%;height:100%}.pin-button--floating .pin-button__pin{background-color:#fff;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3)}.pin-button--dark .pin-button__pin{color:#f9fafd;background-color:#1c2a3f!important;box-shadow:1px -1px 2px 0 rgba(28,42,63,.1),0 1px 2px 0 rgba(28,42,63,.3)}.pin-button--square .pin-button__pin{border-radius:4px}.pin-button--circle .pin-button__pin{border-radius:50%}.pin-button--rounded .pin-button__pin,.pin-button__pin{border-radius:20px}.pin-button__pin{--pin-button-pin-color:#1c2a3f;display:flex;font-size:12px;float:left;min-width:40px;height:40px;align-items:center;justify-content:center;position:relative;background-color:#eaeff5;color:#1c2a3f;color:var(--pin-button-pin-color);transition:background-color 125ms}.pin-button__label{font-size:10px;letter-spacing:.25px;line-height:1.4em;color:#1c2a3f;padding:2px 0 4px}.pin-button__image{width:100%;height:100%;background-size:50%;background-repeat:no-repeat;background-position:50%}"],encapsulation:2,changeDetection:0}),e}()},"9U6C":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.WoltersKluwer="wolters_kluwer",e}({})},"9Xeq":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),a=n("fXoL"),o=function(){var e=function e(){h(this,e)};return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e}()},"A+8E":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Alphabetical="alphabetical",e.Numerical="numerical",e}({})},AIoM:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("ofXK"),a=n("AcyG"),o=n("PUI9"),r=n("fP/T"),s=n("YLgZ"),c=n("PCNd"),u=n("vvyD"),l=n("3Pt+"),p=n("GMXD"),d=n("aKmd"),g=n("k93M"),f=n("yGOH"),b=n("rGz1"),m=n("Wdmj"),y=n("fXoL"),v=function(){var e=function e(){h(this,e)};return e.\u0275mod=y.Nb({type:e}),e.\u0275inj=y.Mb({factory:function(t){return new(t||e)},imports:[[a.d.forFeature([o.a,s.a,p.a,g.a,b.a]),m.d,i.c,f.a,u.a,l.l,r.a,c.a,d.a]]}),e}()},AbMW:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("cQmI");function a(e){var t=e.id;if("module"===e.type&&(e.id=function(e){return e.replace("Condition.content.","").replace(".json","").split(".").join("/")}(t)),e.tour=e.tags.includes("tour"),e.animated=e.tags.includes("animated"),e.quiz=e.tags.includes("quiz"),e.lowDefinition=e.tags.includes("low definition"),!e.viewMode){var n=Object.values(i.a).find((function(t){return e.tags.includes(t)}));e.viewMode=null!=n?n:i.a.All}return e}},Assa:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{center:[0,0,0],edge:[1,1,1],centerBias:1,edgeBias:0,power:1};h(this,e);var n=t.edge,i=t.center,a=t.centerBias,o=t.edgeBias,r=t.power;this.edge=n,this.center=i,this.centerBias=a,this.edgeBias=o,this.power=r}return b(e,null,[{key:"toEngine",value:function(e){var t=e.center,n=e.edge,i=e.centerBias,a=e.edgeBias,o=e.power;return[u(t),u(n),i,a,o]}}]),e}()},AytR:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("p345"),a=n("ZR5G"),o=n("wSC8"),r=n("f3gM"),s={production:!0,assetDomain:"assets-human.biodigital.com",supportEmail:"support@biodigital.com",productKey:"ma_qXLcFIrsaG",googleAuthKey:"66261904577-061oin26uo7sor0vrqc8dnn105irq82n.apps.googleusercontent.com",googleAnalyticsId:"UA-1141985-30",linkedinId:"2641938",pendoId:"3a783681-e53b-4ebd-69c0-788bbae48f13",recaptchaKey:"6LdvZvcUAAAAAM0Z1St9WQXwvSYd__hMUY2WZ6um",application:i.a.Studio,deploy:o.a.Production,platform:r.a.Web,exportType:a.a.Bookmark,offline:!1,native:!0,minPasswordLength:8}},C1bs:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){i(n,e);var t=o(n);function n(e){var i;return h(this,n),(i=t.call(this)).token=e,i}return b(n,null,[{key:"toJSON",value:function(e){return{id_token:e.token,version:e.version,app_producttype:e.app_producttype,app_productkey:e.app_productkey,group_invite_mode:e.groupInviteMode,group_invite_key:e.groupInviteKey,group_code_mode:e.groupCodeMode,group_code:e.groupCode,group_ovid_mode:e.groupOvidMode,group_ovid_osptok:e.groupOvidOsptok,platform:e.platform,return_to:e.returnTo,brand_id:e.brandId,locale_id:e.localeId,timestamp:e.timestamp,site_verify_response:e.site_verify_response}}}]),n}(n("RX1/").a)},C6D4:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ofXK"),a=(n("vXdC"),n("/EfZ"));n.d(t,"b",(function(){return a.a}));var o=n("fXoL"),r=function(){var e=function(){function e(){h(this,e)}return b(e,null,[{key:"forRoot",value:function(t){return{ngModule:e,providers:[{provide:t,useClass:t},{provide:a.a,useClass:a.a,deps:[t]}]}}}]),e}();return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e}()},CAXj:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){h(this,e)}},CL6y:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var i=n("ofXK"),a=n("OnMO"),o=n("lR5k"),r=n("fXoL"),s=["strong","sub","sup"];function c(){var e=new a.Renderer;return e.link=function(e,t,n){var i;return'<a href="'.concat((i=e).match(/^(?:(?:(?:ht)tps?):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i)?i:"",'" target="_blank" rel="noreferrer nofollow">').concat(n,"</a>")},e.paragraph=function(e){return"<p>".concat(e,"</p>")},e.image=function(e,t,n){return""},{renderer:e,gfm:!1}}var u=function(){var e=function e(){h(this,e)};return e.\u0275mod=r.Nb({type:e}),e.\u0275inj=r.Mb({factory:function(t){return new(t||e)},imports:[[i.c,o.a.forRoot({markedOptions:{provide:o.d,useFactory:c}})]]}),e}()},CSvP:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return p}));var i=n("fXoL"),a=n("ofXK"),o=n("AytR"),r=n("wSC8"),s=new i.s(""),c=new i.s(""),u=o.a.deploy===r.a.Production?"https://human.biodigital.com":window.location.origin,l=o.a.deploy===r.a.Local?"https://localhost:4202":u+"/viewer",p=function(){var e=function e(){h(this,e)};return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},providers:[{provide:s,useValue:u},{provide:c,useValue:l}],imports:[[a.c]]}),e}()},CpGW:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i,a=n("AcyG"),o=n("ZDoJ"),r=function e(){h(this,e)},s=n("G0Z9"),c=n("mmXA"),u=n("r/EZ"),l=n("fXoL"),p=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g={theme:s.a.Light,sidenav:{enabled:!0,open:!1},siteHeader:c.a.Application,siteFooter:u.a.None},f=((i=function(){function e(){h(this,e)}return b(e,[{key:"setTheme",value:function(e,t){(0,e.patchState)({theme:t.theme})}},{key:"setHeader",value:function(e,t){e.patchState({siteHeader:t.siteHeaderType})}},{key:"setFooter",value:function(e,t){e.patchState({siteFooter:t.siteFooterType})}},{key:"setSidenav",value:function(e,t){e.patchState({sidenav:Object.assign({},t.sidenav)})}},{key:"toggleSidenav",value:function(e,t){var n=e.getState().sidenav;e.patchState({sidenav:Object.assign(Object.assign({},n),{open:t.open})})}},{key:"resetLayout",value:function(e,t){e.setState(g)}}],[{key:"getTheme",value:function(e){return e.theme}},{key:"getSidenav",value:function(e){return e.sidenav}},{key:"getSiteHeader",value:function(e){return e.siteHeader}},{key:"getSiteFooter",value:function(e){return e.siteFooter}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275prov=l.Lb({token:i,factory:i.\u0275fac}),p([Object(a.a)(o.a.SetTheme),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetTheme]),d("design:returntype",void 0)],i.prototype,"setTheme",null),p([Object(a.a)(o.a.SetHeader),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetHeader]),d("design:returntype",void 0)],i.prototype,"setHeader",null),p([Object(a.a)(o.a.SetFooter),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetFooter]),d("design:returntype",void 0)],i.prototype,"setFooter",null),p([Object(a.a)(o.a.SetSidenav),d("design:type",Function),d("design:paramtypes",[Object,o.a.SetSidenav]),d("design:returntype",void 0)],i.prototype,"setSidenav",null),p([Object(a.a)(o.a.ToggleSidenav),d("design:type",Function),d("design:paramtypes",[Object,o.a.ToggleSidenav]),d("design:returntype",void 0)],i.prototype,"toggleSidenav",null),p([Object(a.a)(o.a.ResetLayout),d("design:type",Function),d("design:paramtypes",[Object,o.a.ResetLayout]),d("design:returntype",void 0)],i.prototype,"resetLayout",null),p([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[r]),d("design:returntype",void 0)],i,"getTheme",null),p([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[r]),d("design:returntype",void 0)],i,"getSidenav",null),p([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[r]),d("design:returntype",void 0)],i,"getSiteHeader",null),p([Object(a.f)(),d("design:type",Function),d("design:paramtypes",[r]),d("design:returntype",void 0)],i,"getSiteFooter",null),i=p([Object(a.g)({name:"layout",defaults:g})],i))},D8yp:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("ofXK"),a=n("1y1q"),o=n("PCNd"),r=n("oH02"),s=n("vvyD"),c=n("bv9b"),u=n("fXoL"),l=function(){var e=function e(){h(this,e)};return e.\u0275mod=u.Nb({type:e}),e.\u0275inj=u.Mb({factory:function(t){return new(t||e)},imports:[[i.c,o.a,s.a,c.b,r.a,a.c]]}),e}()},DTUA:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return g}));var a,r=function(e){i(n,e);var t=o(n);function n(){var e;return h(this,n),(e=t.call(this,"HumanDatabase")).version(2).stores({keyValue:",value",analytics:"message"}),e.open(),e.keyValue=e.table("keyValue"),e.analytics=e.table("analytics"),e}return n}(n("Texg").a),s=n("fXoL"),c=function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{c(i.next(e))}catch(t){o(t)}}function s(e){try{c(i.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((i=i.apply(e,t||[])).next())}))},u=function(e){return e.WidgetOptions="widgetOptions",e.SnapshotOptions="snapshotOptions",e.Locale="locale",e.GroupRestriction="GroupRestriction",e.UserAppId="userAppId",e.RememberMeEmail="rememberMeEmail",e.LabelConversionSeen="labelConversionSeen",e.DefaultGroupEdit="defaultGroupEdit",e.DefaultCollectionId="defaultCollectionId",e.InternetExplorerWarning="internetExplorerWarning",e.GettingStartedTutorial="gettingStartedTutorial",e.AutoCapture="autoCapture",e.SystemMessage="systemMessage",e.ExploreRedesignMessage="exploreRedesignMessage",e.Iphone12Warning="iphone12Warning",e.RecentRecipes="recentRecipes",e.TeamTrialExpirationSeen="teamTrialExpiredSeen",e.ProExpirationSeen="proExpirationSeen",e.PaintPalettes="paintPalettes",e.RecentSearchConfig="recentSearchConfig",e.CameraDebug="cameraDebug",e}({}),l=function(e){return e.UserMessagesSeen="userMessagesSeen",e.PreviewSize="previewSize",e}({}),p=function(e){return e.PreviewStory="previewStory",e.PreviewBookmark="previewBookmark",e}({}),d=function(){function e(){h(this,e),this._data={}}return b(e,[{key:"keys",get:function(){return Object.keys(this._data)}},{key:"length",get:function(){return this.keys.length}},{key:"clear",value:function(){this._data={}}},{key:"getItem",value:function(e){return this._data[e]}},{key:"key",value:function(e){return this.keys[e]}},{key:"removeItem",value:function(e){delete this._data[e]}},{key:"setItem",value:function(e,t){this._data[e]=t}}]),e}(),g=((a=function(){function e(){h(this,e),this._localStorage=this.getStorage("localStorage"),this._sessionStorage=this.getStorage("sessionStorage"),this._indexedStorage=new r}return b(e,[{key:"getLocalItem",value:function(e){return this._localStorage.getItem(""+e)}},{key:"getLocalJSON",value:function(e){var t=this.getLocalItem(e);return t?JSON.parse(t):null}},{key:"setLocalItem",value:function(e,t){var n="object"==typeof t?JSON.stringify(t):""+t;try{return this._localStorage.setItem(""+e,n),!0}catch(i){return!1}}},{key:"removeLocalItem",value:function(e){this._localStorage.removeItem(""+e)}},{key:"getSessionItem",value:function(e){var t=this._sessionStorage.getItem(""+e);return t?JSON.parse(t):null}},{key:"setSessionItem",value:function(e,t){var n=JSON.stringify(t);try{return this._sessionStorage.setItem(""+e,n),!0}catch(i){return!1}}},{key:"removeSessionItem",value:function(e){this._sessionStorage.removeItem(""+e)}},{key:"setDatabaseItem",value:function(e,t){return this._indexedStorage.keyValue.put(t,e)}},{key:"setDatabaseAnalyticItem",value:function(e){c(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._indexedStorage.analytics.add({message:e});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getDatabaseOfflineAnalytics",value:function(e){c(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._indexedStorage.analytics.toArray();case 2:n=t.sent.map((function(e){return e.message})),this._indexedStorage.analytics.clear(),e(n);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getDatabaseOfflineAnalyticsCount",value:function(e){c(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._indexedStorage.analytics.toArray();case 2:n=t.sent,e(n.length);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getDatabaseItem",value:function(e){return this._indexedStorage.keyValue.get(e)}},{key:"clearStorage",value:function(){this.clearLocalStorage(),this.clearSessionStorage()}},{key:"clearLocalStorage",value:function(){this._localStorage.clear()}},{key:"clearSessionStorage",value:function(){this._sessionStorage.clear()}},{key:"getStorage",value:function(e){try{return window[e]||new d}catch(t){return new d}}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275prov=s.Lb({token:a,factory:a.\u0275fac,providedIn:"root"}),a)},DuGl:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var i=n("fXoL"),a=n("3Pt+"),o=n("AcyG"),r=n("XNiG"),s=n("HDdC"),c=n("pLZG"),l=n("1G5W"),p=n("8pBO"),d=n("Kn5L"),g=n("ECVi"),f=n("ZULQ"),m=n("kR+W"),y=n("lMGN"),v=n("+DiI"),k=n("Es8U"),O=n("ofXK"),S=n("zP1m"),x=n("Y8QC"),C=n("kmnG"),w=n("IlST"),j=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},P=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function _(e,t){if(1&e&&(i.Vb(0,"div",7),i.Vb(1,"app-message-toggle",8),i.Pc(2),i.Ub(),i.Ub()),2&e){var n=i.gc(2);i.Db(2),i.Rc(" ",n.sentResponses.length," invite(s) have been sent. Please allow up to a few minutes for invitees to receive their invitations. ")}}function M(e,t){if(1&e&&(i.Tb(0),i.Nc(1,_,3,1,"div",6),i.Sb()),2&e){var n=i.gc();i.Db(1),i.mc("ngIf",n.sentResponses.length>0)}}function I(e,t){if(1&e&&(i.Vb(0,"div"),i.Pc(1),i.Ub()),2&e){var n=t.$implicit;i.Db(1),i.Rc(" ",n," ")}}function T(e,t){if(1&e&&(i.Vb(0,"div",16),i.Vb(1,"app-message-toggle",17),i.Vb(2,"div"),i.Pc(3),i.Ub(),i.Nc(4,I,2,1,"div",18),i.Ub(),i.Ub()),2&e){var n=i.gc(3);i.Db(3),i.Rc("There was an error sending ",n.errorResponses.length," invite(s)."),i.Db(1),i.mc("ngForOf",n.formatResponses(n.errorResponses))}}function U(e,t){if(1&e&&(i.Vb(0,"div",16),i.Vb(1,"app-message-toggle",17),i.Pc(2),i.Ub(),i.Ub()),2&e){var n=i.gc(3);i.Db(2),i.Rc(" ",n.errorMessage," ")}}function L(e,t){if(1&e&&(i.Vb(0,"div",19),i.Vb(1,"mat-error"),i.Pc(2),i.Ub(),i.Ub()),2&e){var n=i.gc().$implicit,a=i.gc(2);i.Db(2),i.Sc(" Please limit your entry to ",a.maxEmailCount,". Current count: ",null==n.errors?null:n.errors.currentEmailCount,". ")}}function z(e,t){if(1&e&&(i.Vb(0,"div",19),i.Vb(1,"mat-error"),i.Pc(2),i.Ub(),i.Ub()),2&e){var n=i.gc().$implicit,a=i.gc(2);i.Db(2),i.Sc(" ",a.formatEmails(null==n.errors?null:n.errors.invalidEmails)," ",1===n.errors.invalidEmails.length?"is not a valid email address.":"are not valid email addresses."," ")}}function A(e,t){if(1&e&&(i.Vb(0,"option",24),i.Pc(1),i.Ub()),2&e){var n=t.$implicit;i.mc("value",n.role_id),i.Db(1),i.Rc(" ",n.role_display_name," ")}}function F(e,t){1&e&&(i.Vb(0,"div",19),i.Vb(1,"mat-error"),i.Pc(2," Please select a valid role. "),i.Ub(),i.Ub())}function D(e,t){if(1&e&&(i.Vb(0,"app-form-field",20),i.Vb(1,"select",21),i.Vb(2,"option",22),i.Pc(3,"--"),i.Ub(),i.Nc(4,A,2,2,"option",23),i.Ub(),i.Nc(5,F,3,0,"div",14),i.Ub()),2&e){var n=t.$implicit,a=i.gc(3);i.Db(4),i.mc("ngForOf",a.availableRoles),i.Db(1),i.mc("ngIf",n.touched&&n.invalid)}}function E(e,t){if(1&e&&(i.Tb(0,10),i.Nc(1,T,5,2,"div",11),i.Nc(2,U,3,1,"div",11),i.Vb(3,"app-form-field",12),i.Vb(4,"textarea",13),i.Pc(5,"          "),i.Ub(),i.Nc(6,L,3,2,"div",14),i.Nc(7,z,3,2,"div",14),i.Ub(),i.Nc(8,D,6,2,"app-form-field",15),i.Sb()),2&e){var n=t.$implicit,a=i.gc(2);i.mc("formGroup",a.form),i.Db(1),i.mc("ngIf",a.errorResponses.length>0),i.Db(1),i.mc("ngIf",a.errorMessage),i.Db(2),i.mc("placeholder","Enter up to "+a.maxEmailCount+" email addresses separated by commas"),i.Db(2),i.mc("ngIf",null==n.errors?null:n.errors.maxEmailsExceeded),i.Db(1),i.mc("ngIf",null==n.errors?null:n.errors.invalidEmails),i.Db(1),i.mc("ngIf",a.form.get("roleId"))}}function N(e,t){if(1&e&&i.Nc(0,E,9,7,"ng-container",9),2&e){var n=i.gc();i.mc("ngIf",n.form.get("emails"))}}function R(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",29),i.cc("click",(function(){return i.Cc(n),i.gc(2).handleCancelClick()})),i.Pc(1),i.Ub()}if(2&e){var a=i.gc(2);i.mc("uppercase","inline"===a.layout),i.Db(1),i.Rc(" ",a.cancelText," ")}}function V(e,t){if(1&e){var n=i.Wb();i.Vb(0,"button",30),i.cc("click",(function(){return i.Cc(n),i.gc(2).handleInviteClick()})),i.hc(1,"async"),i.Pc(2),i.Ub()}if(2&e){var a=i.gc(2);i.mc("uppercase","inline"===a.layout)("disabled",a.form.invalid||i.ic(1,3,a.inviting$)),i.Db(2),i.Rc(" ",a.errorResponses.length>0?"Try Again":a.sendText," ")}}function B(e,t){1&e&&i.Rb(0)}function H(e,t){1&e&&i.Rb(0)}function Q(e,t){if(1&e&&(i.Tb(0),i.Nc(1,B,1,0,"ng-container",31),i.Nc(2,H,1,0,"ng-container",31),i.Sb()),2&e){i.gc();var n=i.yc(3),a=i.yc(5);i.Db(1),i.mc("ngTemplateOutlet",n),i.Db(1),i.mc("ngTemplateOutlet",a)}}function G(e,t){1&e&&i.Rb(0)}function W(e,t){1&e&&i.Rb(0)}function q(e,t){if(1&e&&(i.Nc(0,G,1,0,"ng-container",31),i.Nc(1,W,1,0,"ng-container",31)),2&e){i.gc();var n=i.yc(5),a=i.yc(3);i.mc("ngTemplateOutlet",n),i.Db(1),i.mc("ngTemplateOutlet",a)}}function X(e,t){if(1&e&&(i.Vb(0,"div"),i.Vb(1,"div",25),i.Nc(2,R,2,2,"ng-template",null,26,i.Oc),i.Nc(4,V,3,5,"ng-template",null,27,i.Oc),i.Nc(6,Q,3,2,"ng-container",2),i.Nc(7,q,2,2,"ng-template",null,28,i.Oc),i.Ub(),i.Ub()),2&e){var n=i.yc(8),a=i.gc();i.Db(6),i.mc("ngIf","inline"===a.layout)("ngIfElse",n)}}var Z=["*"],J=function(){var e=function(){function e(t,n,a,o){h(this,e),this.store=t,this.actions=n,this.formBuilder=a,this.changeRef=o,this.maxEmailCount=50,this.availableRoles=[],this.layout="inline",this.enableActions=!0,this.sendText="Send invites",this.cancelText="Cancel",this.inviteSent=new i.p,this.inviteCancelled=new i.p,this.ngUnsubscribe=new r.a,this.sent=!1,this.sentResponses=[],this.errorResponses=[]}return b(e,[{key:"valid",get:function(){return this.form.valid}},{key:"ngOnInit",value:function(){this.initForm(),this.initInviteListeners()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initForm",value:function(){var e=this;this.store.dispatch(new d.x),this.currentUserRole=this.store.selectSnapshot(g.a.getUserRole),this.userRoles$.pipe(Object(c.a)((function(e){return e.length>0})),Object(l.a)(this.ngUnsubscribe)).subscribe((function(t){e.availableRoles=t.filter((function(t){return p.d.indexOf(t.role_name)<=p.d.indexOf(e.currentUserRole.role_name)})),e.changeRef.markForCheck()})),this.form=this.formBuilder.group({emails:["",a.C.required,Object(v.a)(this.maxEmailCount).bind(this)],roleId:["",a.C.required]})}},{key:"initInviteListeners",value:function(){var e=this;this.actions.pipe(Object(o.l)(m.q),Object(l.a)(this.ngUnsubscribe)).subscribe((function(){e.resetState(),e.changeRef.markForCheck()})),this.actions.pipe(Object(o.l)(m.s),Object(l.a)(this.ngUnsubscribe)).subscribe((function(t){var n=t.responses;e.resetState(),e.sentResponses=n.filter((function(e){return"success"===e.status})),e.errorResponses=n.filter((function(e){return"error"===e.status})),e.sent=0===e.errorResponses.length,e.sent&&e.inviteSent.next(n),e.changeRef.markForCheck()})),this.actions.pipe(Object(o.l)(m.r,d.sb),Object(l.a)(this.ngUnsubscribe)).subscribe((function(t){e.resetState(),e.errorMessage=Object(k.a)(t.error)||"There was an error sending the invites, please try again.",e.changeRef.markForCheck()}))}},{key:"handleCancelClick",value:function(){this.inviteCancelled.next()}},{key:"backToFormClick",value:function(){this.resetState(),this.changeRef.markForCheck()}},{key:"handleInviteClick",value:function(){var e=this,t=this.organization.eid,n=f.a.parseEmails(this.form.value.emails).map((function(t){return{user_email:t,role_id:parseInt(e.form.value.roleId,10)}}));this.store.dispatch(new m.q(t,n))}},{key:"formatEmails",value:function(e){return e.join(", ")}},{key:"formatResponses",value:function(e){var t=this,n=e.map((function(e){return e.reason}));return u(new Set(u(n))).map((function(n){var i=e.filter((function(e){return e.reason===n})).map((function(e){return e.email})),a=t.formatEmails(i);return'"'.concat(n,'": ').concat(a)}))}},{key:"resetState",value:function(){this.sent=!1,this.sentResponses=[],this.errorResponses=[],this.errorMessage=""}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Pb(o.h),i.Pb(o.b),i.Pb(a.f),i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-team-invite"]],inputs:{organization:"organization",layout:"layout",enableActions:"enableActions",sendText:"sendText",cancelText:"cancelText"},outputs:{inviteSent:"inviteSent",inviteCancelled:"inviteCancelled"},ngContentSelectors:Z,decls:8,vars:7,consts:[[1,"invite"],[1,"theme-light"],[4,"ngIf","ngIfElse"],["sendFormTmp",""],[4,"ngIf"],[1,"invite__footer"],["class","mv-1",4,"ngIf"],[1,"mv-1"],["data-test","teamInviteSuccess","type","message"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["class","mb-4",4,"ngIf"],["theme","light","label","Invite via email"],["formControlName","emails","data-test","teamInviteEmails","rows","8",1,"invite__input","input",3,"placeholder"],["class","mt-1",4,"ngIf"],["theme","light","label","Role",4,"ngIf"],[1,"mb-4"],["type","error"],[4,"ngFor","ngForOf"],[1,"mt-1"],["theme","light","label","Role"],["formControlName","roleId",1,"input"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"invite__buttons"],["cancelBtnTmp",""],["sendBtnTmp",""],["blockBtnTmp",""],["app-button","","buttonSize","large","buttonTheme","light","buttonType","default","data-test","skipInvitesButton",1,"invite__button",3,"uppercase","click"],["app-button","","buttonSize","large","buttonType","primary","data-test","sendInvitesButton",1,"invite__button",3,"uppercase","disabled","click"],[4,"ngTemplateOutlet"]],template:function(e,t){if(1&e&&(i.lc(),i.Vb(0,"div",0),i.Vb(1,"div",1),i.Nc(2,M,2,1,"ng-container",2),i.Nc(3,N,1,1,"ng-template",null,3,i.Oc),i.Ub(),i.Nc(5,X,9,2,"div",4),i.Vb(6,"div",5),i.kc(7,0,["[select]","invite - footer"]),i.Ub(),i.Ub()),2&e){var n=i.yc(4);i.Hb("invite--inline","inline"===t.layout)("invite--block","block"===t.layout),i.Db(2),i.mc("ngIf",t.sent)("ngIfElse",n),i.Db(3),i.mc("ngIf",t.enableActions&&!t.sent)}},directives:[O.p,S.a,a.s,a.j,x.a,a.c,a.r,a.i,O.o,C.b,a.B,a.v,a.D,w.a,O.u],pipes:[O.b],styles:[".invite__input[_ngcontent-%COMP%]{resize:vertical}.invite__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.invite__actions--compact[_ngcontent-%COMP%]{justify-content:flex-end}.invite__buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:8px auto}.invite--inline[_ngcontent-%COMP%]   .invite__button[_ngcontent-%COMP%]{margin-left:16px}.invite--inline[_ngcontent-%COMP%]   .invite__buttons[_ngcontent-%COMP%]{justify-content:flex-end}.invite--block[_ngcontent-%COMP%]   .invite__button[_ngcontent-%COMP%]{margin:16px 0}.invite--block[_ngcontent-%COMP%]   .invite__buttons[_ngcontent-%COMP%]{justify-content:flex-end;flex-direction:column}"],changeDetection:0}),j([Object(o.e)(y.a.getInviting),P("design:type",s.a)],e.prototype,"inviting$",void 0),j([Object(o.e)(g.a.getUserRoles),P("design:type",s.a)],e.prototype,"userRoles$",void 0),e}()},DupM:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("R0Ic"),a=n("AcyG"),o=n("J9/X"),r=n("fXoL"),s=function(){var e=function(){function e(t){h(this,e),this.store=t}return b(e,[{key:"ngOnInit",value:function(){}},{key:"close",value:function(){this.store.dispatch(new o.a.ShowFilters(!1,!0))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Pb(a.h))},e.\u0275cmp=r.Jb({type:e,selectors:[["app-gallery-drawer"]],decls:8,vars:2,consts:[["appEventFence","","data-test","galleryDrawer",1,"gallery-drawer"],[1,"gallery-drawer__header"],[1,"gallery-drawer__label"],["app-button","","buttonType","ghost","buttonTheme","light","type","button","title","Close","data-test","galleryDrawerClose",3,"click"],["icon","times","size","lg"],[1,"gallery-drawer__body"],["viewMode","expanded"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"h1",2),r.Pc(3,"Filters"),r.Ub(),r.Vb(4,"button",3),r.cc("click",(function(){return t.close()})),r.Qb(5,"app-icon",4),r.Ub(),r.Ub(),r.Vb(6,"div",5),r.Qb(7,"app-gallery-filters",6),r.Ub(),r.Ub()),2&e&&(r.mc("@expand",void 0),r.Db(4),r.Eb("aria-label","Close"))},styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.gallery-drawer[_ngcontent-%COMP%]{box-shadow:0 11px 15px rgba(0,0,0,.2),0 24px 38px rgba(0,0,0,.14),0 9px 46px rgba(0,0,0,.12);background:#fff;border-radius:16px 16px 0 0;display:block;position:fixed;bottom:0;top:auto;width:100vw}.gallery-drawer__header[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em;font-weight:600;border-bottom:1px solid #eaeff5;height:52px;padding:0 12px 0 20px;display:flex;align-items:center}.gallery-drawer__label[_ngcontent-%COMP%]{flex:1 0 auto}.gallery-drawer__body[_ngcontent-%COMP%]{padding:20px}"],data:{animation:[Object(i.n)("expand",[Object(i.m)(":enter",[Object(i.j)([Object(i.l)({top:"100%"}),Object(i.e)("250ms ease-in-out",Object(i.l)({top:"*"}))])])])]},changeDetection:0}),e}()},"Dz/e":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var i=function(){var e=function e(t,n){h(this,e),this.storyLoadProgress=t,this.chunkLoadProgress=n};return e.type="[Engine Progress] Set Progress",e}(),a=function(){var e=function e(){h(this,e)};return e.type="[Engine Progress] Reset Progress",e}()},"E+WR":function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var i,a,o,r,s=n("AcyG"),c=n("GmhI"),d=n("eW6i"),g=n("5miH"),f=n("fXoL"),m=function(e){return e[e.Positions=4]="Positions",e[e.Normals=4]="Normals",e[e.UVs=4]="UVs",e}({}),y=function(e){return e[e.Positions=2]="Positions",e[e.Normals=.6666666666666666]="Normals",e[e.UVs=2]="UVs",e}({}),v=((i=function(){function e(){h(this,e)}return b(e,[{key:"getBytesPerIndex",value:function(e,t){return e.length<Math.pow(2,8)?1:e.length<Math.pow(2,16)?2:e.length<Math.pow(2,32)?4:void 0}},{key:"getAsset",value:function(e){return Human.assets.geometries.geometries[e]}},{key:"getPositions",value:function(e){return this.getAsset(e).geometry._core.arrays.positions}},{key:"getNormals",value:function(e){return this.getAsset(e).geometry._core.arrays.positions}},{key:"getIndices",value:function(e){return this.getAsset(e).geometry._core.arrays.indices}},{key:"hasUVs",value:function(e){return this.getAsset(e).geometry._core.arrays.hasOwnProperty("uvs")}},{key:"getUVs",value:function(e){return this.hasUVs(e)?this.getAsset(e).geometry._core.arrays.uvs[0]:[]}},{key:"isCompressed",value:function(e){return this.getAsset(e).compressed}},{key:"calculatePositions",value:function(e,t){return this.getPositions(e).length*(t?y.Positions:m.Positions)}},{key:"calculateIndices",value:function(e,t){var n=this.getIndices(e),i=this.getBytesPerIndex(n,t);return n.length*i}},{key:"calculateNormals",value:function(e,t){var n=this.getNormals(e);return Math.floor(n.length*(t?y.Normals:m.Normals))}},{key:"calculateUVs",value:function(e,t){return this.getUVs(e).length*(t?y.UVs:m.UVs)}},{key:"calculateGeometry",value:function(e,t){var n=0;return n+=this.calculateIndices(e,t),n+=this.calculatePositions(e,t),n+=this.calculateNormals(e,t),n+=this.calculateUVs(e,t)}},{key:"getTris",value:function(e){return this.getIndices(e).length/3}},{key:"getVerts",value:function(e){return this.getPositions(e).length/3}},{key:"getGeometryMemory",value:function(e){var t=this.getAsset(e).geometry._core,n=t.vertexBuf.itemByteSize*t.vertexBuf.length,i=t.indexBuf.itemByteSize*t.indexBuf.length,a=t.normalBuf.itemByteSize*t.normalBuf.length,o=0;if(t.uvBufs)for(var r=0;r<t.uvBufs.length;r++)o+=t.uvBufs[r].itemByteSize*t.uvBufs[r].length;return n+i+a+o}},{key:"getStat",value:function(e){return{id:e,tris:this.getTris(e),verts:this.getVerts(e),memory:this.getGeometryMemory(e)}}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275prov=f.Lb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),k=function(e){return e[e.Positions=4]="Positions",e[e.Normals=4]="Normals",e}({}),O=function(e){return e[e.Positions=2]="Positions",e[e.Normals=1]="Normals",e}({}),S=((a=function(){function e(){h(this,e)}return b(e,[{key:"getAsset",value:function(e){return Human.assets.morphs.morphs[e]}},{key:"getPositions",value:function(e){return this.getAsset(e).morphGeometry._core.targets[0].positions}},{key:"getNormals",value:function(e){return this.getAsset(e).morphGeometry._core.targets[0].normals}},{key:"isCompressed",value:function(e){return this.getAsset(e).compressed}},{key:"calculatePositions",value:function(e,t){return this.getPositions(e).length*(t?O.Positions:k.Positions)}},{key:"calculateNormals",value:function(e,t){return this.getNormals(e).length*(t?O.Normals:k.Normals)}},{key:"calculateMorph",value:function(e,t){return this.calculatePositions(e,t)+this.calculateNormals(e,t)}},{key:"getVerts",value:function(e){return this.getAsset(e).morphGeometry._core.targets[0].positions.length/3}},{key:"getMorphMemory",value:function(e){var t=this.getAsset(e),n=t.morphGeometry._core.targets[0],i=t.morphGeometry._core.targets.length,a=0;return a+=i*(n.normalBuf.itemByteSize*n.normalBuf.length),a+=i*(n.vertexBuf.itemByteSize*n.vertexBuf.length)}},{key:"getStat",value:function(e){return{id:e,verts:this.getVerts(e),memory:this.getMorphMemory(e)}}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275prov=f.Lb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),x=function e(t,n,i,a){h(this,e),this.name=t,this.value=n,this.unit=i,this.reports=a},C=function e(){h(this,e),this.geometryDownloadTotal=0,this.textureDownloadTotal=0,this.jsonDownloadTotal=0},w=function e(){h(this,e)},j=((o=function(){function e(t,n){h(this,e),this.geometryAssetMemoryService=t,this.morphAssetMemoryService=n}return b(e,[{key:"engineSupportsGeometryCompression",value:function(){return Human.assets.geometries.hasOwnProperty("getCompressionStats")}},{key:"engineSupportsTextureCompression",value:function(){return Human.assets.materials.hasOwnProperty("getTextureCompressionStats")}},{key:"getFirstChapterDownloadSize",value:function(e){return Human.stats&&Human.stats.trackingDownloadSize?Human.stats.geometryDownloadTotal+Human.stats.textureDownloadTotal+Human.stats.jsonDownloadTotal:0}},{key:"updateGlobalStats",value:function(e,t){var n,i=new C;return i.memory=this.getTotalMem(e,t),i.textureMemory=this.getTotalTexMem(),i.geometryMemory=this.getTotalGeoMem(e),i.morphMemory=this.getTotalMorphMem(t),Human.stats&&Human.stats.trackingDownloadSize&&(i.downloadSize=Human.stats.geometryDownloadTotal+Human.stats.textureDownloadTotal+Human.stats.jsonDownloadTotal,i.geometryDownloadTotal=Human.stats.geometryDownloadTotal,i.textureDownloadTotal=Human.stats.textureDownloadTotal,i.jsonDownloadTotal=Human.stats.jsonDownloadTotal),i.uncompressedGeos=Object.values(Human.assets.geometries.geometries).reduce((function(e,t){return t.compressed||e++,e}),0),i.uncompressedMorphs=Object.values(Human.assets.morphs.morphs).reduce((function(e,t){return(n=t.morphGeometry._core).compressedNormals&&n.compressedPositions||e++,e}),0),i.uncompressedTextures=Object.entries(Human.assets.materials.materials).reduce((function(e,t){var n=p(t,2);return n[0],n[1].textures.forEach((function(t){t._core.compressed||e++})),e}),0),i}},{key:"updateGeoStats",value:function(e){var t=this;return null==e&&(e=new w),Object.keys(Human.assets.geometries.geometries).forEach((function(n){e.hasOwnProperty(n)||(e[n]=t.geometryAssetMemoryService.getStat(n))})),e}},{key:"updateMorphStats",value:function(e){var t=this;return null==e&&(e=new w),Object.keys(Human.assets.morphs.morphs).forEach((function(n){e.hasOwnProperty(n)||(e[n]=t.morphAssetMemoryService.getStat(n))})),e}},{key:"getTotalGeoMem",value:function(e){return Object.values(e).reduce((function(e,t){return e+t.memory}),0)}},{key:"getTotalMorphMem",value:function(e){return Object.values(e).reduce((function(e,t){return e+t.memory}),0)}},{key:"getTotalTexMem",value:function(){return Object.values(Human.renderer.getScene().stats.textures).reduce((function(e,t){return e+t.memory}),0)}},{key:"getTotalMem",value:function(e,t){return this.getTotalGeoMem(e)+this.getTotalMorphMem(t)+this.getTotalTexMem()}},{key:"buildSceneGeometryReport",value:function(e){var t=Object.keys(e).length,n=0,i=0,a=0;Object.values(e).forEach((function(e){i+=e.tris,n+=e.verts,a+=e.memory}));var o=new x("Shape Count (uninstanced)",t,null),r=new x("Triangle Count (uninstanced)",i,null),s=new x("Vertex Count (uninstanced)",n,null);return new x("Geometry Memory",a,"bytes",[o,r,s])}},{key:"buildSceneMorphReport",value:function(e){var t=Object.keys(e).length,n=0,i=0;Object.values(e).forEach((function(e){n+=e.verts,i+=e.memory}));var a=new x("Morph Count (uninstanced)",t,null),o=new x("Vertex Count (uninstanced)",n,null);return new x("Morph Memory",i,"bytes",[a,o])}},{key:"buildSceneTextureReport",value:function(){var e=this,t=Human.renderer.getScene().stats.textures,n=0,i={};return Object.entries({baseColor:"diffuse",alpha:"alpha",emit:"emit",normals:"normals",specular:"specular",texture:"texture"}).forEach((function(a){var o=p(a,2),r=o[0],s=o[1],c=e.generateTextureSummary(t[r]),l=u(c.reports);i[s]=new x(s,c.submemory,"bytes",l),n+=c.submemory})),new x("Texture Memory",n,"bytes",Object.values(i))}},{key:"buildSceneDownloadReport",value:function(e){if(!e)return null;var t=e.geometryDownloadTotal+e.textureDownloadTotal+e.jsonDownloadTotal,n=new x("Geometry",e.geometryDownloadTotal,"bytes"),i=new x("Textures",e.textureDownloadTotal,"bytes"),a=new x("JSON",e.jsonDownloadTotal,"bytes");return new x("Download Size",t,"bytes",[n,i,a])}},{key:"toMB",value:function(e){return(e/1048576).toFixed(2)}},{key:"generateTextureSummary",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=0,i=0;return Object.entries(e).forEach((function(e){var a=e[0],o=e[1];"memory"===a?i=o:(t.push(new x(a,o,null)),n+=o)})),{reports:t,submemory:i,subtotal:n}}}]),e}()).\u0275fac=function(e){return new(e||o)(f.Zb(v),f.Zb(S))},o.\u0275prov=f.Lb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),P=n("YpC8"),_=n("LvDl"),M=n("Mh2x"),I=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},T=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},U=function e(){h(this,e)},L={compressionSupport:{geometry:!1,morph:!1,texture:!1},morphStats:null,geoStats:null,geoStatsReport:null,morphStatsReport:null,textureStatsReport:null,downloadReport:null,globalStats:{memory:0,textureMemory:0,geometryMemory:0,morphMemory:0,downloadSize:0,uncompressedGeos:0,uncompressedMorphs:0,uncompressedTextures:0,geometryDownloadTotal:0,textureDownloadTotal:0,jsonDownloadTotal:0},firstChapterDownloadSize:0},z=((r=function(){function e(t,n,i){h(this,e),this.engineService=t,this.memoryService=n,this.store=i}return b(e,[{key:"reset",value:function(e,t){e.setState(Object.assign({},L))}},{key:"update",value:function(e,t){var n=this.memoryService.updateGeoStats(),i=this.memoryService.updateMorphStats(),a=this.memoryService.updateGlobalStats(n,i);t.isFirstChapter&&e.patchState({firstChapterDownloadSize:this.memoryService.getFirstChapterDownloadSize(a)});var o=this.memoryService.buildSceneGeometryReport(n),r=this.memoryService.buildSceneMorphReport(i),s=this.memoryService.buildSceneTextureReport(),c=this.memoryService.buildSceneDownloadReport(a);e.setState(Object.assign(Object.assign({},e.getState()),{geoStats:n,morphStats:i,globalStats:a,geoStatsReport:o,morphStatsReport:r,textureStatsReport:s,downloadReport:c})),t.logToConsole&&this.logMemoryState(e.getState())}},{key:"ngxsOnInit",value:function(e){var t=this;Human.stats.trackingDownloadSize=!0,this.engineService.getEvent(g.a.GraphAssetAttachFinish).subscribe((function(){var n=Object(_.get)(t.store.selectSnapshot(P.a),"loadingChunk.chapterId",""),i=Object(_.get)(t.store.selectSnapshot(M.a),"chapters[0].id");e.dispatch(new c.a.Update(n===i))}))}},{key:"makeReportTableFriendly",value:function(e){return e.reports.reduce((function(e,t){return Object.assign(Object.assign({},e),l({},t.name,t.value))}),{})}},{key:"logMemoryState",value:function(e){var t=this;console.groupCollapsed("Memory Usage"),console.group("Totals"),console.table({"Total Memory":e.globalStats.memory,"Total Geo Memory":e.globalStats.geometryMemory,"Total Morph Memory":e.globalStats.morphMemory,"Total Texture Memory":e.globalStats.textureMemory}),console.groupEnd(),console.group("Uncompressed Assets"),console.table({"Uncompressed Geos":e.globalStats.uncompressedGeos,"Uncompressed Morphs":e.globalStats.uncompressedMorphs,"Uncompressed Textures":e.globalStats.uncompressedTextures}),console.groupEnd(),console.group("Geometry Stats"),console.table(this.makeReportTableFriendly(e.geoStatsReport)),console.groupEnd(),console.group("Morph Stats"),console.table(this.makeReportTableFriendly(e.morphStatsReport)),console.groupEnd(),console.group("Texture Stats"),console.table(this.makeReportTableFriendly(e.textureStatsReport)),e.textureStatsReport.reports.forEach((function(e){e.reports.length&&(console.group(e.name),console.table(t.makeReportTableFriendly(e)),console.groupEnd())})),console.groupEnd(),console.group("Download Size"),console.table(this.makeReportTableFriendly(e.downloadReport)),console.groupEnd(),console.groupCollapsed()}}],[{key:"getGlobalStats",value:function(e){return e.globalStats}},{key:"getFirstChapterDownloadSize",value:function(e){return e.firstChapterDownloadSize}}]),e}()).\u0275fac=function(e){return new(e||r)(f.Zb(d.a),f.Zb(j),f.Zb(s.h))},r.\u0275prov=f.Lb({token:r,factory:r.\u0275fac}),I([Object(s.a)(c.a.Reset),T("design:type",Function),T("design:paramtypes",[Object,c.a.Reset]),T("design:returntype",void 0)],r.prototype,"reset",null),I([Object(s.a)(c.a.Update),T("design:type",Function),T("design:paramtypes",[Object,c.a.Update]),T("design:returntype",void 0)],r.prototype,"update",null),I([Object(s.f)(),T("design:type",Function),T("design:paramtypes",[U]),T("design:returntype",void 0)],r,"getGlobalStats",null),I([Object(s.f)(),T("design:type",Function),T("design:paramtypes",[U]),T("design:returntype",void 0)],r,"getFirstChapterDownloadSize",null),r=I([Object(s.g)({name:"memory",defaults:L})],r))},"E/pY":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("AytR"),a=n("fXoL"),o=n("tyNb"),r=n("ofXK"),s=n("IlST"),c=n("yIGu"),u=n("F+jD"),l=n("0njA");function p(e,t){if(1&e&&(a.Vb(0,"app-list-item"),a.Vb(1,"div",11),a.Qb(2,"app-icon",12),a.Vb(3,"div"),a.Pc(4),a.Ub(),a.Ub(),a.Ub()),2&e){var n=t.$implicit;a.Db(4),a.Qc(n)}}function d(e,t){if(1&e&&(a.Tb(0),a.Pc(1," Unlock full access to the BioDigital library: "),a.Vb(2,"div",8),a.Vb(3,"app-list",9),a.Nc(4,p,5,1,"app-list-item",10),a.Ub(),a.Ub(),a.Sb()),2&e){var n=a.gc();a.Db(4),a.mc("ngForOf",n.features)}}function g(e,t){1&e&&(a.Tb(0),a.Pc(1," Create a free account to explore 800+ anatomy, physiology, and treatment models in interactive 3D. "),a.Sb())}function f(e,t){if(1&e){var n=a.Wb();a.Vb(0,"button",13),a.cc("click",(function(){return a.Cc(n),a.gc().handleLearnMoreClick()})),a.Pc(1," Learn More "),a.Ub()}if(2&e){var i=a.gc();a.mc("buttonSize",i.compact?"medium":"large"),a.Eb("aria-label","Learn More")}}function m(e,t){1&e&&(a.Vb(0,"p",14),a.Vb(1,"a",15),a.Pc(2,"Already have an account? Sign in"),a.Ub(),a.Ub())}var y=function(e){return{"signup-messaging--compact":e}},v=function(){var e=function(){function e(t,n){h(this,e),this.activatedRoute=t,this.router=n,this.features=["Complete male and female anatomy","600+ health condition and treatment 3D models","100+ 3D anatomy quizzes","Animated 3D models and virtual 3D tours"],this.compact=!1}return b(e,[{key:"ngOnInit",value:function(){}},{key:"handleSignUpClick",value:function(e){this.router.navigate(["/login/create"],{queryParams:{ref:this.activatedRoute.snapshot.queryParams.ref||"share",utm_source:i.a.native?"human_mobile":"human_web",utm_campaign:"share",utm_medium:"PLG"}}),e.stopImmediatePropagation()}},{key:"handleLearnMoreClick",value:function(){window.open("https://www.biodigital.com?utm_source=".concat(i.a.native?"human_mobile":"human_web","&utm_medium=PLG&utm_campaign=share&ref=share"))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Pb(o.a),a.Pb(o.e))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-signup-messaging"]],inputs:{compact:"compact"},decls:9,vars:9,consts:[[1,"signup-messaging","flex","flex-column","items-center",3,"ngClass"],[1,"signup-messaging__content",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"signup-messaging__actions"],["type","button","app-button","","buttonType","primary","buttonTheme","light","title","Sign Up For Free","data-test","signupMessageButton",3,"buttonSize","click"],["type","button","app-button","","buttonType","outline","buttonTheme","light","title","Learn More",3,"buttonSize","click",4,"ngIf"],["class","signup-messaging__footer",4,"ngIf"],[1,"mt-7"],["listType","flat",1,"mt-2"],[4,"ngFor","ngForOf"],[1,"signup-messaging__list-item","mv-1","flex","flex-row"],["icon","check",1,"mr-2"],["type","button","app-button","","buttonType","outline","buttonTheme","light","title","Learn More",3,"buttonSize","click"],[1,"signup-messaging__footer"],["routerLink","/login",1,"signup-messaging__link","link"]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Vb(1,"p",1),a.Nc(2,d,5,1,"ng-container",2),a.Nc(3,g,2,0,"ng-container",3),a.Ub(),a.Vb(4,"div",4),a.Vb(5,"button",5),a.cc("click",(function(e){return t.handleSignUpClick(e)})),a.Pc(6," Sign Up For Free "),a.Ub(),a.Nc(7,f,2,2,"button",6),a.Ub(),a.Nc(8,m,3,0,"p",7),a.Ub()),2&e&&(a.mc("ngClass",a.pc(7,y,t.compact)),a.Db(1),a.mc("ngSwitch",t.compact),a.Db(1),a.mc("ngSwitchCase",!0),a.Db(3),a.mc("buttonSize",t.compact?"medium":"large"),a.Eb("aria-label","Sign Up For Free"),a.Db(2),a.mc("ngIf",!t.compact),a.Db(1),a.mc("ngIf",!t.compact))},directives:[r.m,r.r,r.s,r.t,s.a,r.p,c.a,r.o,u.a,l.a,o.h],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.signup-messaging[_ngcontent-%COMP%]{background-color:#fff}.signup-messaging__content[_ngcontent-%COMP%]{color:#101823;font-size:20px;letter-spacing:.5px;line-height:1.4em;font-weight:600;max-width:632px;text-align:center}.signup-messaging__list-item[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em;font-weight:400;color:#283853}.signup-messaging__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:32px;margin-top:40px}.signup-messaging__footer[_ngcontent-%COMP%]{color:#283853;font-size:14px;letter-spacing:.35px;line-height:1.4em;margin-top:28px}.signup-messaging__link[_ngcontent-%COMP%]{text-decoration:underline;color:#283853}.signup-messaging--compact[_ngcontent-%COMP%]{padding:40px 60px;border-radius:8px}.signup-messaging--compact[_ngcontent-%COMP%]   .signup-messaging__content[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em;text-align:left}.signup-messaging--compact[_ngcontent-%COMP%]   .signup-messaging__actions[_ngcontent-%COMP%]{margin-top:28px}.signup-messaging--compact[_ngcontent-%COMP%]   .signup-messaging__footer[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}@media (max-width:959px){.signup-messaging--compact[_ngcontent-%COMP%]{padding:24px}.signup-messaging--compact[_ngcontent-%COMP%]   .signup-messaging__content[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.signup-messaging--compact[_ngcontent-%COMP%]   .signup-messaging__list-item[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.signup-messaging--compact[_ngcontent-%COMP%]   .signup-messaging__actions[_ngcontent-%COMP%]{margin-top:20px}}@media (max-width:480px){.signup-messaging__content[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.signup-messaging__actions[_ngcontent-%COMP%]{width:80%;flex-direction:column;align-items:stretch;gap:16px;margin-top:28px}}"],changeDetection:0}),e}()},E13e:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n("LRne"),a=n("lJxs"),o=n("MtjB"),r=n("3E0/"),s=n("IzEk"),c=n("b36G"),l=n("zrlG"),p=n("08/d"),d=n("xo8B"),g=n("AbMW"),f=n("Yg7+"),m=n("AytR"),y=n("fXoL"),v=n("tk/3"),k=["live"],O=function(){var e=function(){function e(t){h(this,e),this.http=t}return b(e,[{key:"search",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",o=t.split(/[ ]+/).join("+"),r=k.concat(n).filter((function(e){return""!==e&&null!=e})).map((function(e){return'"'.concat(e,'"')})).join("+");return this.http.get("/search?k=".concat(o,"&t=").concat(r,"&il=").concat(i,"&ol=").concat(i,"&odns=true")).pipe(Object(a.a)((function(t){return e.resultsToBookmarks(t)})))}},{key:"searchInternal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.http.get("/ws/search/internal?k=".concat(t,"&dir=").concat(n)).pipe(Object(a.a)((function(t){return e.resultsToBookmarks(t)})))}},{key:"getAnatomyCategory",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0;return this.search(e,[t].concat(u(n)),i)}},{key:"getConditionModel",value:function(e){var t=this;if(m.a.offline)return Object(i.a)(null);var n=this.toDatabaseContentId(e);return this.http.get("/search/conditions?q="+n).pipe(Object(o.a)((function(e){return e.pipe(Object(r.a)(1e3),Object(s.a)(3))})),Object(a.a)((function(e){return t.resultsToBookmarks(e)})),Object(a.a)((function(e){return e[0]})))}},{key:"getShowcase",value:function(){var e=this;return this.http.get("/assets/bookmarks/showcase.json").pipe(Object(a.a)((function(t){return t.forEach((function(t){return t.bookmarks=e.resultsToBookmarks(t.bookmarks),t})),t})))}},{key:"createMockShowcase",value:function(e){return{title:" ",description:" ",url:"",bookmarks:u(e),loading:!0}}},{key:"createMockShowcases",value:function(e,t){var n=this;return u(Array(e).keys()).map((function(){return n.createMockShowcase(t)}))}},{key:"resultsToBookmarks",value:function(e){return e.forEach((function(e){e=Object(g.a)(e)})),Object(c.plainToClass)(l.a,e)}},{key:"getBookmarkCategory",value:function(e){if(!e.tags)return null;var t=p.a.categories.map((function(e){return e.id.toLocaleLowerCase()}));return e.tags.find((function(e){return t.includes(e.toLocaleLowerCase())}))}},{key:"getStoryCategory",value:function(e){if(!e.tags)return null;var t=Object(d.a)().map((function(e){return e.id.toLocaleLowerCase()}));return e.tags.find((function(e){return t.includes(e.toLocaleLowerCase())}))}},{key:"toAppContentId",value:function(e){return e.replace("Condition.content.","").replace(".json","").split(".").join("/")}},{key:"toDatabaseContentId",value:function(e){return e.match("Condition.content")?e:"Condition.content.".concat(e.replace(".json","").split("/").join("."),".json")}},{key:"getHeroImages",value:function(){return Object(i.a)(f.a)}},{key:"getHeroQuickTags",value:function(){return Object(i.a)(f.c)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(y.Zb(v.b))},e.\u0275prov=y.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},E32s:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("LvDl");function a(e,t,n,a){(function e(t,n){var a=n.objects;return 0===a.length?[]:Object(i.flattenDeep)(a.map((function(n){return[n.objectId].concat(u(e(t,t.scene.objects[n.objectId])))})))})(Human,Human.scene.objects[e]).forEach((function(e){return t[e][n]=a}))}},ECVi:function(e,t,n){"use strict";n.d(t,"a",(function(){return Y}));var i,a,o,r=n("AcyG"),s=n("k+hL"),c=n("Kn5L"),u=n("qXBG"),l=n("a0wz"),p=n("nYR2"),d=n("5+tZ"),g=n("vkgz"),f=n("pLZG"),m=n("lJxs"),y=n("DTUA"),v=n("INTG"),k=n("Lyqc"),O=n("jjCP"),S=n("11Ye"),x=n("q8pu"),C=n("Vv7R"),w=n("VJvM"),j=n("ZDoJ"),P=n("xybE"),_=n("LRne"),M=n("fXoL"),I=n("tk/3"),T=function e(t,n,i){h(this,e),this.category=t,this.message=n,this.log=i},U=((i=function(){function e(t){h(this,e),this.http=t,this.log={}}return b(e,[{key:"logError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="".concat(e.category).concat(e.message);return t&&this.log[n]?Object(_.a)():(this.log[n]=!0,this.http.post("/ws/human-error",e))}}]),e}()).\u0275fac=function(e){return new(e||i)(M.Zb(I.b))},i.\u0275prov=M.Lb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),L=n("LvDl"),z=n("J9/X"),A=n("AytR"),F=n("rKJn"),D=n("odcc"),E=n("p345"),N=n("mSC4"),R=n("Oq7/"),V=n("8pBO"),B=n("kTA6"),H=n("L6yT"),Q=n("Ie6O"),G=n("VKIe"),W=n("icKS"),q=n("QkH1"),X=n("WoAB"),Z=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},J=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},K=A.a.application===E.a.Studio,$={loading:!1,requestingCode:!1,profileStatus:"ready",auth2:null,googleAuthStatus:"waiting",loggedIn:null,userLocale:null,userRoles:[],contentViews:{limit_reached:!1,inapp_view_limit:0,inapp_view_count:0},developerReferral:!1},Y=((o=a=function(){function e(t,n,i,a,o,r,s,c){h(this,e),this.authService=t,this.userMessageService=n,this.storageService=i,this.errorLoggingService=a,this.linkedinInsights=o,this.pendoService=r,this.contentViewService=s,this.productService=c}return b(e,[{key:"initializeGoogleOAuth",value:function(e){e.dispatch(new c.y("loading")),gapi.load("auth2",{callback:function(){var t=gapi.auth2.init({client_id:A.a.googleAuthKey,scope:"profile"});e.patchState({auth2:t}),t.then((function(){e.dispatch(new c.y("ready"))}),(function(){e.dispatch(new c.y("error"))}))},onerror:function(){e.dispatch(new c.y("error"))},timeout:5e3,ontimeout:function(){e.dispatch(new c.y("error"))}})}},{key:"setGoogleAuthOnline",value:function(e,t){e.patchState({googleAuthStatus:t.online})}},{key:"isLoggedIn",value:function(e,t){e.patchState({loading:!0}),this.authService.isLoggedIn().pipe(Object(p.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(t){e.dispatch(t.signed_in?new c.C:new c.B)}))}},{key:"isLoggedInSuccess",value:function(e,t){e.patchState({loggedIn:!0})}},{key:"isLoggedInFailure",value:function(e,t){e.patchState({loggedIn:!1})}},{key:"login",value:function(e,t){var n=this;e.patchState({loading:!0}),this.verify("studio_login",t.login.email,e).pipe(Object(d.b)((function(e){return n.authService.loginWithBiodigital(Object.assign(Object.assign({},t.login),e?{site_verify_response:e}:null))})),Object(p.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(t){e.dispatch(new c.E("biodigital",t))}),(function(i){n.logFailure("LOGIN_FAILURE",i),e.dispatch(new c.D("biodigital",i,t.login))}))}},{key:"loginWithGoogle",value:function(e,t){var n=this;e.patchState({loading:!0}),this.authService.loginWithGoogle(t.login).pipe(Object(p.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(t){e.dispatch(new c.E("google",t))}),(function(i){1!==t.login.groupCodeMode&&1!==t.login.groupInviteMode||n.logFailure("GOOGLE_SIGNUP_FAILURE",i),e.dispatch(new c.D("google",i,t.login))}))}},{key:"loginSuccess",value:function(e,t){K&&(this.linkedinInsights.track("Sign in"),"google"===t.loginType&&"signup"===t.response.authentication_type?this.pendoService.trackSignUp(t.loginType):this.pendoService.trackSignIn(t.loginType)),e.dispatch(new c.A),e.dispatch(new c.c)}},{key:"loginFailure",value:function(e,t){var n;K&&this.pendoService.track("Sign In - Failure",{type:t.loginType,error:Object(L.get)(t,"error.error.error.message")||"There was an error logging in.",statusCode:null===(n=t.error)||void 0===n?void 0:n.status})}},{key:"logout",value:function(e,t){e.patchState({loading:!0}),this.authService.logout().pipe(Object(p.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(){return e.dispatch(new c.J)}),(function(){return e.dispatch(new c.I)}))}},{key:"logoutSuccess",value:function(e,t){e.setState($),e.dispatch(new c.O),e.dispatch(new D.n),e.dispatch(new k.y),e.dispatch(new O.e),e.dispatch(new S.u),e.dispatch(new x.j),e.dispatch(new j.a.ResetLayout),e.dispatch(new l.v),e.dispatch(new C.l),e.dispatch(new w.o),e.dispatch(new z.a.Reset),this.storageService.clearSessionStorage()}},{key:"checkProfile",value:function(e,t){return e.patchState({loading:!0}),this.authService.checkProfile(t.email).pipe(Object(p.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(t){e.dispatch(new c.f(t))}),(function(t){e.dispatch(new c.e(t))}))}},{key:"checkProfileSuccess",value:function(e,t){e.patchState({profileCheck:t.profile})}},{key:"getUserProfile",value:function(e,t){var n=t.hardCheck;return e.patchState({loading:!0}),this.authService.getUserProfile(n).pipe(Object(p.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(t){e.dispatch(new c.w(t))}),(function(t){e.dispatch(new c.v(t))}))}},{key:"getUserProfileSuccess",value:function(e,t){e.patchState({userProfile:t.userProfile}),e.dispatch(new l.z(t.userProfile.organizations)),e.dispatch(new c.q),e.dispatch(new c.c)}},{key:"updateUserProfile",value:function(e,t){var n=t.userProfile;e.patchState({profileStatus:"updating"}),this.authService.updaterUserProfile(n).pipe(Object(p.a)((function(){return e.patchState({profileStatus:"ready"})}))).subscribe((function(){e.dispatch(new c.rb(n))}),(function(t){e.dispatch(new c.qb(t))}))}},{key:"updateUserProfileSuccess",value:function(e,t){var n=t.userProfile;this.pendoService.updateVisitorData(n)}},{key:"deleteUserProfile",value:function(e,t){e.patchState({profileStatus:"deleting"}),this.authService.deleteUserProfile().pipe(Object(p.a)((function(){return e.patchState({profileStatus:"ready"})}))).subscribe((function(t){e.dispatch(new c.m(t))}),(function(t){e.dispatch(new c.l(t))}))}},{key:"getUserRoles",value:function(e,t){this.authService.getUserRoles().subscribe((function(t){e.patchState({userRoles:t})}))}},{key:"getUserApps",value:function(e,t){this.authService.getUserApps().subscribe((function(t){e.dispatch(new c.Z(t)),e.dispatch(new c.g)}),(function(e){}))}},{key:"setUserApps",value:function(e,t){var n=t.apps;e.patchState({userApps:n})}},{key:"setSelectedUserApp",value:function(e,t){var n=t.appId;e.patchState({selectedAppId:n}),null!==n?this.storageService.setLocalItem(y.b.UserAppId,n):this.storageService.removeLocalItem(y.b.UserAppId)}},{key:"checkSelectedUserApp",value:function(e,t){var n=e.getState().userApps,i=this.storageService.getLocalItem(y.b.UserAppId);if(i){var a=parseInt(i,10);e.dispatch(new c.Y(a))}else if(n&&n.length){var o=n.find((function(e){return e.app_platform.some((function(e){return e.type===F.a.Web}))}));e.dispatch(new c.Y(o?o.id:void 0))}}},{key:"checkSession",value:function(e,t){e.patchState({loading:!0}),this.authService.isLoggedIn().pipe(Object(p.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(t){t.signed_in?(e.dispatch(new c.C),e.dispatch(new c.u),e.dispatch(new c.x)):e.dispatch(new c.B)}))}},{key:"getEnvironmentSettings",value:function(e,t){return e.patchState({loading:!0}),this.authService.getEnvironmentSettings().pipe(Object(p.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(t){e.dispatch(new c.p(t))}),(function(t){e.dispatch(new c.o(t))}))}},{key:"GetEnvironmentSettingsSuccess",value:function(e,t){e.patchState({environmentSettings:t.environmentSettings})}},{key:"resetPassword",value:function(e,t){e.patchState({loading:!0}),this.authService.resetPassword(t.email).pipe(Object(p.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(){e.dispatch(new c.R(t.email))}),(function(t){e.dispatch(new c.Q(t))}))}},{key:"transferFacebookAccount",value:function(e,t){var n=this;e.patchState({loading:!0}),this.verify("deactivate_facebook",t.email,e).pipe(Object(d.b)((function(e){return n.authService.deactivateFacebook(Object.assign(Object.assign({version:4,app_productkey:n.productService.productKey,app_producttype:n.productService.productType},e?{site_verify_response:e}:null),{user_email:t.email}))})),Object(p.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(n){console.log(n),e.dispatch(n.conversion_complete&&n.reset_password_email_sent?new c.lb(t.email):new c.kb(new Error("Facebook deactivation failed")))}),(function(t){e.dispatch(new c.kb(t))}))}},{key:"updatePassword",value:function(e,t){var n=t.currentPassword,i=t.newPassword,a=t.confirmNewPassword;this.authService.updatePassword(n,i,a).subscribe((function(){e.dispatch(new c.ob)}),(function(t){e.dispatch(new c.nb(t))}))}},{key:"signUp",value:function(e,t){var n=this;e.patchState({loading:!0}),this.verify("studio_signup",t.value.email,e).pipe(Object(d.b)((function(e){return n.authService.signUp(Object.assign(Object.assign({},t.value),e?{site_verify_response:e}:null))})),Object(p.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(t){e.dispatch(new c.ib(t))}),(function(t){e.dispatch(new c.hb(t))}))}},{key:"signUpSuccess",value:function(e,t){K&&this.pendoService.trackSignUp("biodigital")}},{key:"signUpFailure",value:function(e,t){var n;K&&this.pendoService.track("Sign Up - Failure",{error:Object(L.get)(t,"error.error.error.message")||"There was an error signing up.",statusCode:null===(n=t.error)||void 0===n?void 0:n.status}),this.logFailure("BIODIGITAL_SIGNUP_FAILURE",t)}},{key:"setUserLocale",value:function(e,t){var n=t.locale;this.storageService.setLocalItem(y.b.Locale,n.id),e.patchState({userLocale:n}),e.dispatch(new c.bb(n))}},{key:"checkLocale",value:function(e,t){var n=Object(v.c)(),i=v.d.find((function(e){return e.id===n}))||v.b;e.dispatch(new c.ab(i))}},{key:"sendUserMessage",value:function(e,t){var n=t.message;this.userMessageService.sendMessage(n).subscribe((function(){e.dispatch(new c.U(n))}),(function(t){e.dispatch(new c.T(t))}))}},{key:"getUserMessage",value:function(e,t){var n=t.type,i=t.mode;this.userMessageService.getUserMessage(n,i).subscribe((function(t){e.dispatch(new c.t(t))}),(function(){e.dispatch(new c.s(n))}))}},{key:"setUserMessageViewed",value:function(e,t){var n=t.messageSeenId;this.userMessageService.setUserMessageViewed(n).subscribe((function(){return e.dispatch(new c.eb)}),(function(){return e.dispatch(new c.db)}))}},{key:"resetAuth",value:function(e,t){e.setState($),e.dispatch(new c.z)}},{key:"requestVerificationCode",value:function(e,t){var n=t.email,i=t.token;e.patchState({requestingCode:!0}),this.authService.requestVerificationCode({user_email:n,verification_jwt:i}).pipe(Object(p.a)((function(){return e.patchState({requestingCode:!1})}))).subscribe((function(t){e.dispatch(new c.N(t))}),(function(t){e.dispatch(new c.M(t))}))}},{key:"verifyProfile",value:function(e,t){var n=t.email,i=t.token,a=t.code.toUpperCase();e.patchState({profileStatus:"verifying"}),this.authService.verifyProfile({user_email:n,verification_code:a,verification_jwt:i}).pipe(Object(p.a)((function(){return e.patchState({profileStatus:"ready"})}))).subscribe((function(t){e.dispatch(new c.vb(t)),e.dispatch(new c.h)}),(function(t){e.dispatch(new c.ub(t))}))}},{key:"verifyProfileSuccess",value:function(e){this.pendoService.track("Email Verify - Success",{platform:this.productService.productType})}},{key:"verifyProfileFail",value:function(e,t){var n;this.pendoService.track("Email Verify - Failure",{error:Object(L.get)(t,"error.error.error.message")||"There was an error with email verification.",statusCode:null===(n=t.error)||void 0===n?void 0:n.status})}},{key:"setContentView",value:function(e,t){var n=t.contentId,i=t.contentType;this.contentViewService.trackContentView(n,i).subscribe((function(){e.dispatch(new c.W),e.dispatch(new c.a)}))}},{key:"checkContentViews",value:function(e,t){this.contentViewService.checkContentView().subscribe((function(t){e.patchState({contentViews:t}),e.dispatch(new c.b(t))}))}},{key:"setDeveloperReferral",value:function(e,t){e.patchState({developerReferral:t.isDeveloperReferral})}},{key:"logFailure",value:function(e,t){var n=Object(L.get)(t,"message")||"",i=Object(L.get)(t,"error.error.message")||"";this.errorLoggingService.logError(new T(e,n,i)).subscribe()}},{key:"verify",value:function(e,t,n){return this.authService.isReCaptchaWhiteListed(t)?Object(_.a)(null):this.authService.isHuman(e).pipe(Object(g.a)((function(e){e.isHuman||n.dispatch(new c.sb)})),Object(f.a)((function(e){return e.isHuman})),Object(m.a)((function(e){return e.verification})))}},{key:"ngxsOnInit",value:function(e){e.dispatch(new c.h),e.dispatch(new c.c),e.dispatch(new c.g),e.dispatch(new c.z)}}],[{key:"getLoggedIn",value:function(e){return e.loggedIn}},{key:"getEnvironmentSettings",value:function(e){return e.environmentSettings}},{key:"getUserProfile",value:function(e){return e.userProfile}},{key:"getUserRole",value:function(e){if(!Object(L.isNil)(e.userProfile))return Object(L.get)(e,"userProfile.organizations[0].user_role",V.b)}},{key:"getUserRoles",value:function(e){return e.userRoles}},{key:"getUserType",value:function(e){if(!Object(L.isNil)(e.userProfile)){var t=e.userProfile,n=t.premium_account,i=t.premium_account_type;if(n)return"group"===i?H.a.Team:H.a.Premium}return H.a.Free}},{key:"canInviteUsers",value:function(e){if(!Object(L.isNil)(e.userProfile)){var t=a.getUserType(e),n=a.getUserRole(e);return Object(q.k)(n,X.a.InviteUsers)&&t===H.a.Team}return!1}},{key:"getUserAccountSettings",value:function(e){return Object(L.get)(e,"userProfile.account_settings",[])}},{key:"getAuth2",value:function(e){return e.auth2}},{key:"getGoogleAuthOnline",value:function(e){return e.googleAuthStatus}},{key:"getProfileCheck",value:function(e){return e.profileCheck}},{key:"getLoading",value:function(e){return e.loading}},{key:"getVerifyingProfile",value:function(e){return"verifying"===e.profileStatus}},{key:"getProfileUpdating",value:function(e){return"updating"===e.profileStatus}},{key:"getProfileDeleting",value:function(e){return"deleting"===e.profileStatus}},{key:"getUserLocale",value:function(e){return e.userLocale}},{key:"getUserLanguage",value:function(e){return Object(L.get)(e,"userLocale.lang",v.b.lang)}},{key:"getUserApps",value:function(e){return Object(L.get)(e,"userApps",[])}},{key:"getSelectedUserApp",value:function(e){return(e.userApps||[]).find((function(t){return t.id===e.selectedAppId}))}},{key:"getUserFullName",value:function(e){var t,n;if(Object(L.isNil)(e.userProfile))return null;var i=null!==(t=e.userProfile.first_name)&&void 0!==t?t:"",a=null!==(n=e.userProfile.last_name)&&void 0!==n?n:"";return Object(L.trim)([i,a].join(" "))}},{key:"getUserEmail",value:function(e){return Object(L.isNil)(e.userProfile)?null:e.userProfile.email}},{key:"isPrivateUser",value:function(e){return!Object(L.isNil)(e.userProfile)&&0===Object(L.get)(e,"userProfile.organizations",[]).length}},{key:"isPremiumUser",value:function(e){return!0===Object(L.get)(e,"userProfile.premium_account_valid")}},{key:"isAdmin",value:function(e){var t=this.getUserRole(e);return!!t&&t.role_name===G.a.Admin}},{key:"isDeveloperReferral",value:function(e){return e.developerReferral}},{key:"getContentViews",value:function(e){return e.contentViews}},{key:"getContentViewsReached",value:function(e){return!a.isPremiumUser(e)&&e.contentViews.limit_reached}}]),e}()).\u0275fac=function(e){return new(e||o)(M.Zb(u.a),M.Zb(P.a),M.Zb(y.d),M.Zb(U),M.Zb(N.a),M.Zb(B.b),M.Zb(Q.a),M.Zb(W.a))},o.\u0275prov=M.Lb({token:o,factory:o.\u0275fac}),Z([Object(r.a)(c.z),J("design:type",Function),J("design:paramtypes",[Object]),J("design:returntype",void 0)],o.prototype,"initializeGoogleOAuth",null),Z([Object(r.a)(c.y),J("design:type",Function),J("design:paramtypes",[Object,c.y]),J("design:returntype",void 0)],o.prototype,"setGoogleAuthOnline",null),Z([Object(r.a)(c.A),J("design:type",Function),J("design:paramtypes",[Object,c.A]),J("design:returntype",void 0)],o.prototype,"isLoggedIn",null),Z([Object(r.a)(c.C),J("design:type",Function),J("design:paramtypes",[Object,c.C]),J("design:returntype",void 0)],o.prototype,"isLoggedInSuccess",null),Z([Object(r.a)(c.B),J("design:type",Function),J("design:paramtypes",[Object,c.B]),J("design:returntype",void 0)],o.prototype,"isLoggedInFailure",null),Z([Object(r.a)(c.F),J("design:type",Function),J("design:paramtypes",[Object,c.F]),J("design:returntype",void 0)],o.prototype,"login",null),Z([Object(r.a)(c.G),J("design:type",Function),J("design:paramtypes",[Object,c.G]),J("design:returntype",void 0)],o.prototype,"loginWithGoogle",null),Z([Object(r.a)(c.E),J("design:type",Function),J("design:paramtypes",[Object,c.E]),J("design:returntype",void 0)],o.prototype,"loginSuccess",null),Z([Object(r.a)(c.D),J("design:type",Function),J("design:paramtypes",[Object,c.D]),J("design:returntype",void 0)],o.prototype,"loginFailure",null),Z([Object(r.a)(c.H),J("design:type",Function),J("design:paramtypes",[Object,c.H]),J("design:returntype",void 0)],o.prototype,"logout",null),Z([Object(r.a)(c.J),J("design:type",Function),J("design:paramtypes",[Object,c.J]),J("design:returntype",void 0)],o.prototype,"logoutSuccess",null),Z([Object(r.a)(c.d),J("design:type",Function),J("design:paramtypes",[Object,c.d]),J("design:returntype",void 0)],o.prototype,"checkProfile",null),Z([Object(r.a)(c.f),J("design:type",Function),J("design:paramtypes",[Object,c.f]),J("design:returntype",void 0)],o.prototype,"checkProfileSuccess",null),Z([Object(r.a)(c.u),J("design:type",Function),J("design:paramtypes",[Object,c.u]),J("design:returntype",void 0)],o.prototype,"getUserProfile",null),Z([Object(r.a)(c.w),J("design:type",Function),J("design:paramtypes",[Object,c.w]),J("design:returntype",void 0)],o.prototype,"getUserProfileSuccess",null),Z([Object(r.a)(c.pb),J("design:type",Function),J("design:paramtypes",[Object,c.pb]),J("design:returntype",void 0)],o.prototype,"updateUserProfile",null),Z([Object(r.a)(c.rb),J("design:type",Function),J("design:paramtypes",[Object,c.pb]),J("design:returntype",void 0)],o.prototype,"updateUserProfileSuccess",null),Z([Object(r.a)(c.k),J("design:type",Function),J("design:paramtypes",[Object,c.k]),J("design:returntype",void 0)],o.prototype,"deleteUserProfile",null),Z([Object(r.a)(c.x),J("design:type",Function),J("design:paramtypes",[Object,c.x]),J("design:returntype",void 0)],o.prototype,"getUserRoles",null),Z([Object(r.a)(c.q),J("design:type",Function),J("design:paramtypes",[Object,c.q]),J("design:returntype",void 0)],o.prototype,"getUserApps",null),Z([Object(r.a)(c.Z),J("design:type",Function),J("design:paramtypes",[Object,c.Z]),J("design:returntype",void 0)],o.prototype,"setUserApps",null),Z([Object(r.a)(c.Y),J("design:type",Function),J("design:paramtypes",[Object,c.Y]),J("design:returntype",void 0)],o.prototype,"setSelectedUserApp",null),Z([Object(r.a)(c.g),J("design:type",Function),J("design:paramtypes",[Object,c.g]),J("design:returntype",void 0)],o.prototype,"checkSelectedUserApp",null),Z([Object(r.a)(c.h),J("design:type",Function),J("design:paramtypes",[Object,c.h]),J("design:returntype",void 0)],o.prototype,"checkSession",null),Z([Object(r.a)(c.n),J("design:type",Function),J("design:paramtypes",[Object,c.n]),J("design:returntype",void 0)],o.prototype,"getEnvironmentSettings",null),Z([Object(r.a)(c.p),J("design:type",Function),J("design:paramtypes",[Object,c.p]),J("design:returntype",void 0)],o.prototype,"GetEnvironmentSettingsSuccess",null),Z([Object(r.a)(c.P),J("design:type",Function),J("design:paramtypes",[Object,c.P]),J("design:returntype",void 0)],o.prototype,"resetPassword",null),Z([Object(r.a)(c.jb),J("design:type",Function),J("design:paramtypes",[Object,c.jb]),J("design:returntype",void 0)],o.prototype,"transferFacebookAccount",null),Z([Object(r.a)(c.mb),J("design:type",Function),J("design:paramtypes",[Object,c.mb]),J("design:returntype",void 0)],o.prototype,"updatePassword",null),Z([Object(r.a)(c.gb),J("design:type",Function),J("design:paramtypes",[Object,c.gb]),J("design:returntype",void 0)],o.prototype,"signUp",null),Z([Object(r.a)(c.ib),J("design:type",Function),J("design:paramtypes",[Object,c.ib]),J("design:returntype",void 0)],o.prototype,"signUpSuccess",null),Z([Object(r.a)(c.hb),J("design:type",Function),J("design:paramtypes",[Object,c.hb]),J("design:returntype",void 0)],o.prototype,"signUpFailure",null),Z([Object(r.a)(c.ab),J("design:type",Function),J("design:paramtypes",[Object,c.ab]),J("design:returntype",void 0)],o.prototype,"setUserLocale",null),Z([Object(r.a)(c.c),J("design:type",Function),J("design:paramtypes",[Object,c.c]),J("design:returntype",void 0)],o.prototype,"checkLocale",null),Z([Object(r.a)(c.S),J("design:type",Function),J("design:paramtypes",[Object,c.S]),J("design:returntype",void 0)],o.prototype,"sendUserMessage",null),Z([Object(r.a)(c.r),J("design:type",Function),J("design:paramtypes",[Object,c.r]),J("design:returntype",void 0)],o.prototype,"getUserMessage",null),Z([Object(r.a)(c.cb),J("design:type",Function),J("design:paramtypes",[Object,c.cb]),J("design:returntype",void 0)],o.prototype,"setUserMessageViewed",null),Z([Object(r.a)(c.O),J("design:type",Function),J("design:paramtypes",[Object,c.O]),J("design:returntype",void 0)],o.prototype,"resetAuth",null),Z([Object(r.a)(c.L),J("design:type",Function),J("design:paramtypes",[Object,c.L]),J("design:returntype",void 0)],o.prototype,"requestVerificationCode",null),Z([Object(r.a)(c.tb),J("design:type",Function),J("design:paramtypes",[Object,c.tb]),J("design:returntype",void 0)],o.prototype,"verifyProfile",null),Z([Object(r.a)(c.vb),J("design:type",Function),J("design:paramtypes",[Object]),J("design:returntype",void 0)],o.prototype,"verifyProfileSuccess",null),Z([Object(r.a)(c.ub),J("design:type",Function),J("design:paramtypes",[Object,c.ub]),J("design:returntype",void 0)],o.prototype,"verifyProfileFail",null),Z([Object(r.a)(c.V),J("design:type",Function),J("design:paramtypes",[Object,c.V]),J("design:returntype",void 0)],o.prototype,"setContentView",null),Z([Object(r.a)(c.a),J("design:type",Function),J("design:paramtypes",[Object,c.a]),J("design:returntype",void 0)],o.prototype,"checkContentViews",null),Z([Object(r.a)(c.X),J("design:type",Function),J("design:paramtypes",[Object,c.X]),J("design:returntype",void 0)],o.prototype,"setDeveloperReferral",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getLoggedIn",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getEnvironmentSettings",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getUserProfile",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",R.a)],o,"getUserRole",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",Array)],o,"getUserRoles",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",String)],o,"getUserType",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",Boolean)],o,"canInviteUsers",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",Array)],o,"getUserAccountSettings",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",Object)],o,"getAuth2",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",String)],o,"getGoogleAuthOnline",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getProfileCheck",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getLoading",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getVerifyingProfile",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getProfileUpdating",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getProfileDeleting",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getUserLocale",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",String)],o,"getUserLanguage",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getUserApps",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getSelectedUserApp",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getUserFullName",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getUserEmail",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"isPrivateUser",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"isPremiumUser",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"isAdmin",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"isDeveloperReferral",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getContentViews",null),Z([Object(r.f)(),J("design:type",Function),J("design:paramtypes",[s.a]),J("design:returntype",void 0)],o,"getContentViewsReached",null),o=a=Z([Object(r.g)({name:"auth",defaults:$})],o))},EETq:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Organization="Organization",e.Collection="Collection",e.Private="Private",e.Category="Category",e.Community="Community",e.Internal="Internal",e.Loft="Loft",e}({})},EF3F:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"a",(function(){return m}));var i=n("0Yvn"),a=n("mXx7"),o=new i.a({label:"Original",tintColor:!1,saturation:!1,contrast:!1,brightness:!1,opacity:!1}),r=new i.a({tintColor:[0,0,0],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),s=new i.a({tintColor:[1,0,0],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),c=new i.a({tintColor:[1,1,0],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),u=new i.a({tintColor:[0,1,0],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),l=new i.a({tintColor:[0,1,1],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),p=new i.a({tintColor:[0,0,1],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),d=new i.a({tintColor:[1,0,1],saturation:!1,contrast:!1,brightness:!1,opacity:!1}),g=new i.a({label:"Grayscale",tintColor:!1,saturation:-100,contrast:!1,brightness:!1,opacity:!1}),h=new i.a({label:"Desaturated",tintColor:!1,saturation:-50,contrast:!1,brightness:!1,opacity:!1}),f=new i.a({label:"Fade",tintColor:[0,0,0],contrast:!1,brightness:55,saturation:-100,opacity:new a.a({edge:1,center:0,edgeBias:0,centerBias:1,power:1})}),b=[o,r,s,c,u,l,p,d],m=[g,h,f]},EFPM:function(e,n,a){"use strict";a.d(n,"a",(function(){return v}));var r=a("fXoL"),s=a("3Pt+"),u=a("LvDl"),l=a("XNiG"),p=a("1G5W"),d=a("mWjH"),g=a("0njA"),f=a("ofXK");function m(e,t){if(1&e&&(r.Vb(0,"option",9),r.Pc(1),r.Ub()),2&e){var n=t.$implicit;r.mc("value",n.value),r.Db(1),r.Rc(" ",n.label.title," ")}}function y(e,t){if(1&e&&(r.Vb(0,"select",6),r.Vb(1,"option",7),r.Pc(2,"Select"),r.Ub(),r.Nc(3,m,2,2,"option",8),r.Ub()),2&e){var n=r.gc();r.Db(3),r.mc("ngForOf",n.options)}}var v=function(){var e=function(e){i(a,e);var n=o(a);function a(e,t){var i;return h(this,a),(i=n.call(this)).formBuilder=e,i.changeRef=t,i.outline=!0,i.valueChange=new r.p,i.ngUnsubscribe=new l.a,i.form=i.formBuilder.group({value:[""]}),i.valueControl=i.form.get("value"),i}return b(a,[{key:"options",get:function(){return this._options},set:function(e){var t=Object(u.clone)(e);this._options=t.sort((function(e,t){return e.label.title.localeCompare(t.label.title)})),this.changeRef.markForCheck()}},{key:"ngOnInit",value:function(){this.initFormListeners()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initFormListeners",value:function(){var e=this;this.form.valueChanges.pipe(Object(p.a)(this.ngUnsubscribe)).subscribe((function(t){var n=t.value;e.writeValue(n),e.valueChange.next(n)}))}},{key:"setDisabledState",value:function(e){t(c(a.prototype),"setDisabledState",this).call(this,e),e?this.form.disable():this.form.enable(),this.changeRef.markForCheck()}},{key:"setFormValues",value:function(e){this.valueControl.setValue(e),this.changeRef.markForCheck()}},{key:"getSelectedOption",value:function(){var e=this.valueControl.value;return this.options.find((function(t){return t.value===e}))}}]),a}(d.a);return e.\u0275fac=function(t){return new(t||e)(r.Pb(s.f),r.Pb(r.i))},e.\u0275cmp=r.Jb({type:e,selectors:[["app-quiz-label-anatomy-select"]],inputs:{options:"options",outline:"outline"},outputs:{valueChange:"valueChange"},features:[r.Cb([{provide:s.p,useExisting:Object(r.W)((function(){return e})),multi:!0}]),r.Ab],decls:7,vars:5,consts:[[1,"label",3,"formGroup"],[1,"label__select-label","flex","text-12"],[1,"flex","justify-between","p-2","flex-auto"],[1,"mr-2"],["icon","caret-down","size","lg"],["class","input label__select","placeholder","Select Option","formControlName","value","data-test","quizLabelSelect",4,"ngIf"],["placeholder","Select Option","formControlName","value","data-test","quizLabelSelect",1,"input","label__select"],["value","","data-test","questionAnswerOption"],["class","label__option","data-test","questionAnswerOption",3,"value",4,"ngFor","ngForOf"],["data-test","questionAnswerOption",1,"label__option",3,"value"]],template:function(e,t){if(1&e&&(r.Vb(0,"div",0),r.Vb(1,"label",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Pc(4),r.Ub(),r.Qb(5,"app-icon",4),r.Ub(),r.Nc(6,y,4,1,"select",5),r.Ub(),r.Ub()),2&e){var n;r.Hb("label--empty",""===t.valueControl.value),r.mc("formGroup",t.form),r.Db(4),r.Qc((null==(n=t.getSelectedOption())||null==n.label?null:n.label.title)||"Select"),r.Db(2),r.mc("ngIf",!t.disabled)}},directives:[s.s,s.j,g.a,f.p,s.B,s.r,s.i,s.v,s.D,f.o],styles:[".label[_ngcontent-%COMP%]{overflow:hidden}.label__select-label[_ngcontent-%COMP%]{color:#101823;position:relative}.label__select[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;opacity:.01}.label--empty[_ngcontent-%COMP%]   .label__select-label[_ngcontent-%COMP%]{color:#96a8c0}"],changeDetection:0}),e}()},EFcw:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.BookmarkViewThresholdReached=0]="BookmarkViewThresholdReached",e[e.BookmarkViewLimitReached=1]="BookmarkViewLimitReached",e[e.BookmarkSaveThresholdReached=2]="BookmarkSaveThresholdReached",e[e.BookmarkSaveLimitReached=3]="BookmarkSaveLimitReached",e[e.ProAccountPastDue=4]="ProAccountPastDue",e[e.TeamTrailExpired=5]="TeamTrailExpired",e[e.Publish=6]="Publish",e}({})},EWj2:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),a=n("+pSP"),o=n("vvyD"),r=n("fXoL"),s=function(){var e=function e(){h(this,e)};return e.\u0275mod=r.Nb({type:e}),e.\u0275inj=r.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,o.a]]}),e}()},Es8U:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("LvDl"),a=n("vXBk"),o=n("9U6C"),r=a.a[o.a.WoltersKluwer],s={};function c(e,t){var n=Object(i.get)(e,"error.error.error_id",""),a=Object(i.get)(e,"error.error.message","");return function(e,t){switch(e){case"OPPH01.00122":case"SUH01.00122":case"SIH01.00122":case"FSH01.00122":case"GSH01.00122":return"We were unable to find an account associated with your institution. \n      Please contact your administrator [here](".concat(r,") and provide this error ID: ").concat(e,".");case"OPPH01.00123":case"SUH01.00123":case"SIH01.00123":case"FSH01.00123":case"GSH01.00123":return"There are multiple team accounts associated with your institution. \n      Please contact your administrator [here](".concat(r,") and provide this error ID: ").concat(e,".");case"OPPH01.00124":case"OPPH01.00125":case"OPPH01.00110":case"OPPH01.00111":case"OPPH01.00112":case"SUH01.00124":case"SUH01.00110":case"SUH01.00111":case"SUH01.00112":case"SIH01.00124":case"SIH01.00110":case"SIH01.00111":case"SIH01.00112":case"FSH01.00124":case"FSH01.00125":case"FSH01.00110":case"FSH01.00111":case"FSH01.00112":case"GSH01.00124":case"GSH01.00110":case"GSH01.00111":case"GSH01.00112":return"There was an issue with retrieving information from your institution. \n      Please try again or contact your administrator [here](".concat(r,") and provide this error ID: ").concat(e,".");default:return s[e]||""}}(n)||(a?a.replace(/^\[(.+)\]$/,"$1").replace(/^\'(.+)\'$/,"$1"):"")}},"F+jD":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("fXoL"),a=["*"],o=function(){var e=function(){function e(){h(this,e)}return b(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-list-item"]],ngContentSelectors:a,decls:1,vars:0,template:function(e,t){1&e&&(i.lc(),i.kc(0))},styles:[""],encapsulation:2,changeDetection:0}),e}()},FFWI:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return O}));var i,a=n("AcyG"),o=n("7b4e"),r=n("WUhe"),s=n("Xk3F"),c=n("3fyd"),l=n("0UUK"),p=n("fXoL"),d=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e){return e[e.Learning=0]="Learning",e[e.Assessment=1]="Assessment",e}({}),m={quizModeActive:!1,quizModeLocked:!1,quizQuestionsMode:"all",enableQuizRetake:!0,launchMode:f.Learning,questions:[],activeQuestionId:void 0,activeSubmission:void 0,questionSubmissions:[],quizSettings:{enabled:!0,showSummary:!0,showExplanation:!0,showSubmit:!0,showProgress:!0},pickMode:"single",lifecycle:l.a.Question};function y(e,t){return e.filter((function(e){return e.chapterId===t}))}function v(e,t){var n,i=t.map((function(t){return y(e,t)}));return(n=[]).concat.apply(n,u(i))}function k(e){var t=function(e){return u(new Set(e.map((function(e){return e.chapterId}))))}(e);return v(e,t)}var O=function(){var e=i=function(){function e(){h(this,e)}return b(e,[{key:"resetQuizState",value:function(e,t){e.setState(Object.assign({},m))}},{key:"setQuizState",value:function(e,t){var n=t.quizState;e.setState(Object.assign(Object.assign({},m),n))}},{key:"setQuizSettings",value:function(e,t){var n=t.quizSettings;e.patchState({quizSettings:n})}},{key:"setQuizActive",value:function(e,t){e.patchState({quizModeActive:t.active,activeQuestionId:!1===t.active?void 0:e.getState().activeQuestionId})}},{key:"setQuizEnabled",value:function(e,t){var n=e.getState().quizSettings;e.patchState({quizSettings:Object.assign(Object.assign({},n),{enabled:t.enabled})})}},{key:"setQuizLocked",value:function(e,t){e.patchState({quizModeLocked:t.locked})}},{key:"setEnableQuizRetake",value:function(e,t){e.patchState({enableQuizRetake:t.enable})}},{key:"setQuizQuestionsMode",value:function(e,t){e.patchState({quizQuestionsMode:t.mode})}},{key:"copyQuestions",value:function(e,t){var n=t.sourceChapterId,i=t.targetChapterId,a=e.getState().questions,r=[].concat(u(a),u(y(e.getState().questions,n).map((function(e){return Object.assign(Object.assign({},JSON.parse(JSON.stringify(e))),{id:o.a.idWithPrefix("question"),chapterId:i})}))));e.patchState({questions:k(r)})}},{key:"reorderQuestions",value:function(e,t){var n=t.chapterIds;e.patchState({questions:v(e.getState().questions,n)})}},{key:"addQuestion",value:function(e,t){var n=[].concat(u(e.getState().questions),[t.question]);e.patchState({questions:k(n)})}},{key:"setQuestions",value:function(e,t){var n=t.questions;e.patchState({questions:k(n)})}},{key:"setQuestion",value:function(e,t){var n=e.getState().questions.map((function(e){return e.id===t.question.id?t.question:e}));e.patchState({questions:n})}},{key:"removeQuestions",value:function(e,t){var n=e.getState(),i=null!=t.questionIds?t.questionIds:n.questions.map((function(e){return e.id})),a=n.questions.filter((function(e){return!i.includes(e.id)}));e.patchState({questions:k(a)})}},{key:"submitQuestionAnswer",value:function(e,t){var n=u(e.getState().questionSubmissions),i=n.findIndex((function(e){return e.questionId===t.submission.questionId}));i>-1?n[i]=t.submission:n.push(t.submission),e.patchState({questionSubmissions:n})}},{key:"nextQuestion",value:function(e){var t,n=e.getState(),i=n.questions,a=n.activeQuestionId,o=(null===(t=i[e.getState().questions.findIndex((function(e){return e.id===a}))+1])||void 0===t?void 0:t.id)||void 0;void 0!==o&&e.patchState({activeQuestionId:o})}},{key:"previousQuestion",value:function(e){var t,n=e.getState(),i=n.questions,a=n.activeQuestionId,o=(null===(t=i[e.getState().questions.findIndex((function(e){return e.id===a}))-1])||void 0===t?void 0:t.id)||void 0;void 0!==o&&e.patchState({activeQuestionId:o})}},{key:"clearSubmissions",value:function(e){e.patchState({questionSubmissions:[]})}},{key:"setActiveQuestion",value:function(e,t){e.patchState({activeQuestionId:t.questionId})}},{key:"setQuizPickMode",value:function(e,t){var n=t.pickMode;e.patchState({pickMode:n})}},{key:"setActiveSubmission",value:function(e,t){var n=t.submission;e.patchState({activeSubmission:n})}},{key:"setQuizLifecycle",value:function(e,t){e.patchState({lifecycle:t.lifecycle})}}],[{key:"getQuizQuestionsByChapter",value:function(e){return Object(a.i)([i],(function(t){return y(t.questions,e)}))}},{key:"getLifecycle",value:function(e){return e.lifecycle}},{key:"getQuizSettings",value:function(e){return e.quizSettings}},{key:"getQuizModeActive",value:function(e){return e.quizModeActive}},{key:"getQuizModeLocked",value:function(e){return e.quizModeLocked}},{key:"getEnableQuizRetake",value:function(e){return e.enableQuizRetake}},{key:"getQuizReviewEnabled",value:function(e){var t=e.quizModeLocked,n=e.quizQuestionsMode,i=e.questions,a=e.quizSettings;return!(t&&!a.showSummary||t&&"restricted"===n&&1===i.length)}},{key:"globalSceneConfig",value:function(e){return e.sceneConfig}},{key:"hasQuiz",value:function(e){return e.questions.length>0}},{key:"getQuizEnabled",value:function(e){return!1!==e.quizSettings.enabled}},{key:"getAllQuestions",value:function(e){return e.questions}},{key:"getAllSubmissions",value:function(e){return e.questionSubmissions}},{key:"getActiveSubmitted",value:function(e){var t=e.questionSubmissions,n=e.activeQuestionId;return t.find((function(e){return e.questionId===n}))}},{key:"getActiveSubmission",value:function(e){return e.activeSubmission}},{key:"getActiveQuestion",value:function(e){return e.questions.find((function(t){return t.id===e.activeQuestionId}))}},{key:"getActiveQuestionId",value:function(e){return e.activeQuestionId}},{key:"getActiveQuestionLabels",value:function(e){var t=e.questions.find((function(t){return t.id===e.activeQuestionId}));return t&&t.type===c.a.LabelAnatomy?t.data.options:[]}},{key:"getActiveQuestionIndex",value:function(e){return e.questions.findIndex((function(t){return t.id===e.activeQuestionId}))}},{key:"getQuestionIndex",value:function(e,t){return Object(a.i)([i],(function(n){return v(n.questions,e).findIndex((function(e){return e.id===t}))}))}},{key:"getQuestionTotal",value:function(e){return e.questions.length}},{key:"getCorrectAnswerTotal",value:function(e){var t=e.questionSubmissions,n=e.questions;return t.filter((function(e){var t=n.find((function(t){return t.id===e.questionId}));return Object(s.h)(t,e.answer)})).length}},{key:"getQuestionsRemaining",value:function(e){var t=e.questions,n=e.questionSubmissions;return t.length-n.length}},{key:"hasQuestionRemaining",value:function(e){var t=e.questions;return e.questionSubmissions.length<t.length}},{key:"getPickMode",value:function(e){return e.pickMode}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac}),d([Object(a.a)(r.a.ResetQuizState),g("design:type",Function),g("design:paramtypes",[Object,r.a.ResetQuizState]),g("design:returntype",void 0)],e.prototype,"resetQuizState",null),d([Object(a.a)(r.a.SetQuizState),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetQuizState]),g("design:returntype",void 0)],e.prototype,"setQuizState",null),d([Object(a.a)(r.a.SetQuizSettings),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetQuizSettings]),g("design:returntype",void 0)],e.prototype,"setQuizSettings",null),d([Object(a.a)(r.a.SetQuizActive),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetQuizActive]),g("design:returntype",void 0)],e.prototype,"setQuizActive",null),d([Object(a.a)(r.a.SetQuizEnabled),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetQuizEnabled]),g("design:returntype",void 0)],e.prototype,"setQuizEnabled",null),d([Object(a.a)(r.a.SetQuizLocked),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetQuizLocked]),g("design:returntype",void 0)],e.prototype,"setQuizLocked",null),d([Object(a.a)(r.a.SetEnableQuizRetake),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetEnableQuizRetake]),g("design:returntype",void 0)],e.prototype,"setEnableQuizRetake",null),d([Object(a.a)(r.a.SetQuizQuestionsMode),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetQuizQuestionsMode]),g("design:returntype",void 0)],e.prototype,"setQuizQuestionsMode",null),d([Object(a.a)(r.a.CopyQuestions),g("design:type",Function),g("design:paramtypes",[Object,r.a.CopyQuestions]),g("design:returntype",void 0)],e.prototype,"copyQuestions",null),d([Object(a.a)(r.a.ReorderQuestions),g("design:type",Function),g("design:paramtypes",[Object,r.a.ReorderQuestions]),g("design:returntype",void 0)],e.prototype,"reorderQuestions",null),d([Object(a.a)(r.a.AddQuestion),g("design:type",Function),g("design:paramtypes",[Object,r.a.AddQuestion]),g("design:returntype",void 0)],e.prototype,"addQuestion",null),d([Object(a.a)(r.a.SetQuestions),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetQuestions]),g("design:returntype",void 0)],e.prototype,"setQuestions",null),d([Object(a.a)(r.a.SetQuestion),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetQuestion]),g("design:returntype",void 0)],e.prototype,"setQuestion",null),d([Object(a.a)(r.a.RemoveQuestions),g("design:type",Function),g("design:paramtypes",[Object,r.a.RemoveQuestions]),g("design:returntype",void 0)],e.prototype,"removeQuestions",null),d([Object(a.a)(r.a.SubmitQuestionAnswer),g("design:type",Function),g("design:paramtypes",[Object,r.a.SubmitQuestionAnswer]),g("design:returntype",void 0)],e.prototype,"submitQuestionAnswer",null),d([Object(a.a)(r.a.NextQuestion),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e.prototype,"nextQuestion",null),d([Object(a.a)(r.a.PreviousQuestion),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e.prototype,"previousQuestion",null),d([Object(a.a)(r.a.ClearSubmissions),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e.prototype,"clearSubmissions",null),d([Object(a.a)(r.a.SetActiveQuestion),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetActiveQuestion]),g("design:returntype",void 0)],e.prototype,"setActiveQuestion",null),d([Object(a.a)(r.a.SetQuizPickMode),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetQuizPickMode]),g("design:returntype",void 0)],e.prototype,"setQuizPickMode",null),d([Object(a.a)(r.a.SetActiveSubmission),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetActiveSubmission]),g("design:returntype",void 0)],e.prototype,"setActiveSubmission",null),d([Object(a.a)(r.a.SetQuizLifecycle),g("design:type",Function),g("design:paramtypes",[Object,r.a.SetQuizLifecycle]),g("design:returntype",void 0)],e.prototype,"setQuizLifecycle",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getLifecycle",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",Object)],e,"getQuizSettings",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getQuizModeActive",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getQuizModeLocked",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getEnableQuizRetake",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",Boolean)],e,"getQuizReviewEnabled",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"globalSceneConfig",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"hasQuiz",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getQuizEnabled",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getAllQuestions",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getAllSubmissions",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getActiveSubmitted",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getActiveSubmission",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getActiveQuestion",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getActiveQuestionId",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",Array)],e,"getActiveQuestionLabels",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getActiveQuestionIndex",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getQuestionTotal",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getCorrectAnswerTotal",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getQuestionsRemaining",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"hasQuestionRemaining",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getPickMode",null),e=i=d([Object(a.g)({name:"quiz",defaults:m})],e)}()},FKtB:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("7b4e");!function(e){function t(e){return e.split("-")[0].replace(/_particle$/,"")}e.getParticleIdRoot=t,e.generateParticleId=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a.getUuid;return"".concat(t(e),"-").concat(n())}}(i||(i={}))},FnMX:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("7HRe"),a=n("qgXg"),o=n("cp0P"),r=n("lJxs"),s=n("0EUg"),c=n("8pBO"),u=n("MCQd"),l=n("fXoL"),p=n("tk/3"),d=function(){var e=function(){function e(t){h(this,e),this.http=t}return b(e,[{key:"getOrganizationUsers",value:function(e){var t=u.a(e);return this.http.get("/ws/organization/users"+t).pipe(Object(r.a)((function(e){return e.users})),Object(r.a)((function(e){return e.map((function(e){return Object.assign(Object.assign({},e),{user_role:Object(c.c)(e.user_role)})}))})))}},{key:"getOrganizationInvites",value:function(e){var t=u.a(e);return this.http.get("/ws/organization/invite"+t).pipe(Object(r.a)((function(e){return e.invites})),Object(r.a)((function(e){return e.map((function(e){return Object.assign(Object.assign({},e),{invite_user:Object.assign(Object.assign({},e.inviter_user),{user_role:Object(c.c)(e.inviter_user.user_role)}),invitee_user:Object.assign(Object.assign({},e.invitee_user),{user_role:Object(c.c)(e.invitee_user.user_role)})})}))})))}},{key:"sendOrganizationInvites",value:function(e,t,n){return this.http.post("/ws/organization/invite",{version:2,group_eid:e,invite_emails:t,site_verify_response:n}).pipe(Object(r.a)((function(e){return e.results_summary.messages})))}},{key:"addUserToOrganization",value:function(e){return this.http.post("/ws/organization/user/add",{group_eid:e})}},{key:"addUserWithGroupCode",value:function(e){return this.http.post("/ws/organization/user/add",{group_code:e}).pipe(Object(r.a)((function(e){return e.organization_name})))}},{key:"updateUserRoles",value:function(e,t){var n=this;return this.batchUsers(t,(function(t){return n.http.post("/ws/organization/users",{group_id:e,update_users:t.map((function(e){return{user_id:e.userId,role_id:e.roleId}}))})}))}},{key:"removeUsers",value:function(e,t){var n=this;return this.batchUsers(t,(function(t){return n.http.post("/ws/organization/users",{group_id:e,remove_users:t.map((function(e){return n.createTransferRequest(e)}))})}))}},{key:"transferUserContent",value:function(e,t){var n=this;return this.batchUsers(t,(function(t){return n.http.post("/ws/organization/bookmark/transfer",{group_id:e,transfer_bookmarks:t.map((function(e){return n.createTransferRequest(e)}))})}))}},{key:"createUserDisplayModel",value:function(e,t){return{name:this.formatUserName(e),initials:this.formatBadgeLabel(e),email:e.user_email,id:e.user_id,role:e.user_role,selected:!1,invitationStatus:t}}},{key:"batchUsers",value:function(e,t){for(var n=0,c=[];n<e.length;){var u=e.slice(n,n+50);c.push(t(u)),n+=50}var l=Object(i.a)(c,a.b).pipe(Object(s.a)());return Object(o.a)(l).pipe(Object(r.a)((function(){return!0})))}},{key:"createTransferRequest",value:function(e){var t=e.sourceUserId,n=e.targetUserId;return"number"==typeof n?{user_id:t,group_bookmarks:{transfer_ownership:1,transfer_user_id:n}}:{user_id:t}}},{key:"formatUserName",value:function(e){var t=[e.user_first_name,e.user_last_name].filter((function(e){return!!e}));return t.length>0?t.join(" "):""}},{key:"formatBadgeLabel",value:function(e){return[e.user_first_name,e.user_last_name].filter((function(e){return!!e})).map((function(e){return e[0]})).join("")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Zb(p.b))},e.\u0275prov=l.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},G0Z9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Light="theme-light",e.Dark="theme-dark",e}({})},GCmh:function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var i,a,o=n("AcyG"),r=n("l4YF"),s=n("uwj7"),c=n("+8WF"),l=n("J9/X"),p=n("7PKw"),d=n("HDdC"),g=n("MKYd"),f=n("lJxs"),m=n("nYR2"),y=n("E13e"),v=n("XqAe"),k=n("kqJf"),O=n("tgUM"),S=n("EETq"),x=n("Mgbk"),C=function e(){h(this,e)},w=n("ECVi"),j=n("k+hL"),P=n("ZR5G"),_=n("rDax"),M=n("+rOU"),I=n("DupM"),T=n("fXoL"),U=((i=function(){function e(t,n){h(this,e),this.overlay=t,this.store=n}return b(e,[{key:"openDrawer",value:function(){this.overlayRef||this._createOverlay();var e=new M.c(I.a);this.overlayRef.attach(e)}},{key:"closeDrawer",value:function(){this.overlayRef.detach()}},{key:"_createOverlay",value:function(){var e=this,t=new _.d({hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block()});this.overlayRef=this.overlay.create(t),this.overlayRef.backdropClick().subscribe((function(){e.store.dispatch(new l.a.ShowFilters(!1,!0))}))}}]),e}()).\u0275fac=function(e){return new(e||i)(T.Zb(_.c),T.Zb(o.h))},i.\u0275prov=T.Lb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),L=n("o6VQ"),z=n("LvDl"),A=n("ihWl"),F=n("AytR"),D=n("esev"),E=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},N=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},R={loading:!0,searchMode:s.a.Query,viewMode:c.b,showFilters:!1,searchResults:{total:0,items:[]},checkedResults:[],searchConfig:null,searchOptions:null,sidenav:{enabled:!0,open:!0,disableClose:!1},bulkActions:{enabled:!0,active:!1,items:[]},cardActions:{enabled:!0}},V=[].concat(u(L.e.tags),u(L.d.tags),u(L.c.tags)),B=((a=function(){function e(t,n,i,a,o,r){h(this,e),this.organizationsService=t,this.modulesService=n,this.exploreService=i,this.bookmarksService=a,this.galleryService=o,this.store=r}return b(e,[{key:"setSearchMode",value:function(e,t){e.patchState({searchMode:t.searchMode})}},{key:"setViewMode",value:function(e,t){e.patchState({viewMode:t.viewMode})}},{key:"showFilters",value:function(e,t){e.patchState({showFilters:t.show}),t.triggerDrawer&&(t.show?this.galleryService.openDrawer():this.galleryService.closeDrawer())}},{key:"setSearchOptions",value:function(e,t){e.patchState({searchOptions:Object.assign({},t.options)})}},{key:"setActiveTags",value:function(e,t){var n=e.getState().searchConfig,i=Object.assign(Object.assign({},n),{tags:Object(z.flatten)(Object.values(t.activeTags))});this.store.dispatch(new l.a.SetSearchConfig(i))}},{key:"setSearchConfig",value:function(e,t){var n=t.config||e.getState().searchConfig,i=t.options||e.getState().searchOptions;null!==n&&e.patchState({searchOptions:Object.assign({},i),searchConfig:Object.assign({},n)})}},{key:"searchCategory",value:function(e,t){var n=t.categoryId,i="public"===n?new A.c(""):new A.a(n);e.dispatch(new l.a.SetSearchConfig(i))}},{key:"searchStudio",value:function(e,t){var n=e.getState(),i=n.searchConfig,a=n.searchOptions,o=new x.a("",O.f),r=this.store.selectSnapshot(w.a.getUserLanguage);e.patchState({loading:!0,searchOptions:Object.assign(Object.assign({},a),{pageSize:o.pageSize,offset:o.offset}),checkedResults:[]});var s=new d.a;switch(i.type){case S.a.Category:s=this.exploreService.getAnatomyCategory(i.query,"all"===i.categoryId?"":i.categoryId,i.tags.filter((function(e){return!e.startsWith("Downloaded")})),r);break;case S.a.Organization:s=this.bookmarksService.getOrganizationContent(i.organizationId,i.query);break;case S.a.Collection:s=this.organizationsService.getCollectionContent(i.organizationId,i.collectionId,i.query);break;case S.a.Community:s=this.bookmarksService.getPublicBookmarks(i.query);break;case S.a.Private:s=this.bookmarksService.getPrivateContent(i.query);break;case S.a.Internal:s=this.exploreService.searchInternal(i.query,i.directory);break;case S.a.Loft:var c=i.query.indexOf(".json")>0;s=this.modulesService.listContents(i.primary,i.secondary,c?i.query:"",!0).pipe(Object(f.a)((function(e){return c?e:e.filter((function(e){return e.title.indexOf(i.query)>=0}))})))}s.pipe(Object(m.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(t){var n=F.a.native?D.a.getOfflineModelIDList():[],a=i.tags.includes("Downloaded")?t.filter((function(e){return n.includes(e.id)})):t;e.dispatch(new l.a.SearchSuccess(a))}))}},{key:"searchSuccess",value:function(e,t){e.patchState({searchResults:{items:t.bookmarks,total:t.bookmarks.length}})}},{key:"checkItem",value:function(e,t){var n=e.getState().checkedResults,i=n.some((function(e){return e===t.id}));t.checked&&!i?n=[].concat(u(n),[t.id]):t.checked||(n=n.filter((function(e){return e!==t.id}))),e.patchState({checkedResults:n})}},{key:"checkAll",value:function(e,t){var n=e.getState().searchResults.items.map((function(e){return e.id}));e.patchState({checkedResults:n})}},{key:"uncheckAll",value:function(e,t){e.patchState({checkedResults:[]})}},{key:"setCheckedItems",value:function(e,t){e.patchState({checkedResults:t.ids})}},{key:"setSidenav",value:function(e,t){e.patchState({sidenav:Object.assign({},t.sidenav)})}},{key:"setCardActions",value:function(e,t){e.patchState({cardActions:Object.assign({},t.cardActions)})}},{key:"setBulkActions",value:function(e,t){var n=e.getState().bulkActions;e.patchState({bulkActions:Object.assign(Object.assign({},n),t.bulkActions)})}},{key:"clearResults",value:function(e,t){e.patchState({searchResults:{items:[],total:0}})}},{key:"resetGallery",value:function(e,t){e.patchState(R)}}],[{key:"getLoading",value:function(e){return e.loading}},{key:"getSearchMode",value:function(e){return e.searchMode}},{key:"getSearchConfig",value:function(e){return e.searchConfig}},{key:"getSearchOptions",value:function(e){return e.searchOptions}},{key:"getAvailableTags",value:function(e){var t=[],n=e.searchResults.items,i=F.a.native?D.a.getOfflineModelIDList():[];return n.forEach((function(e){e.tags.forEach((function(e){"quiz"===e&&(e="Quiz"),V.includes(e)&&!t.includes(e)&&t.push(e)})),F.a.native&&i.includes(e.id)&&!t.includes("Downloaded")&&t.push("Downloaded")})),t}},{key:"getActiveTags",value:function(e){var t={};return e.searchConfig.tags.forEach((function(e){var n=L.a.find((function(t){return t.tags.some((function(t){return t===e}))})),i=Object(z.get)(n,"title","");t[i]=e})),t}},{key:"getActiveTagsCount",value:function(e){var t=e.searchConfig;return Object(z.compact)(t.tags).length}},{key:"getSearchType",value:function(e){return e.searchConfig?e.searchConfig.type:null}},{key:"getSearchGroup",value:function(e){var t;switch(null===(t=e.searchConfig)||void 0===t?void 0:t.type){case S.a.Category:case S.a.Community:case S.a.Internal:case S.a.Loft:return P.a.Module;case S.a.Collection:case S.a.Private:case S.a.Organization:return P.a.Bookmark}}},{key:"getViewMode",value:function(e){return e.viewMode}},{key:"getShowFilters",value:function(e){return e.showFilters}},{key:"getSort",value:function(e){return e.searchOptions.sortBy}},{key:"getSortOptions",value:function(e){switch(e.searchConfig.type){case S.a.Loft:return[O.f,O.g];case S.a.Category:return[O.e,O.d,O.f,O.g];default:return[O.d,O.f,O.g,O.a,O.b]}}},{key:"getSidenav",value:function(e){return e.sidenav}},{key:"getBulkActions",value:function(e){return e.bulkActions}},{key:"getBulkActionsAvailable",value:function(e){var t=e.bulkActions,n=t.enabled,i=t.items;return n&&i.length>0}},{key:"getBulkActionsActive",value:function(e){return e.bulkActions.active}},{key:"getCardActions",value:function(e){return e.cardActions}},{key:"getFilteredResults",value:function(e,t){var n=e.searchResults,i=e.searchOptions,a=i.sortBy,o=a.ascending,r=a.fields,s=i.offset,c=i.pageSize,u=Object(k.a)(n.items,r,o).slice(s,s+c);return Object.assign(Object.assign({},n),{items:u})}},{key:"getAllResults",value:function(e,t){var n=e.searchResults,i=e.searchOptions.sortBy,a=i.ascending,o=i.fields,r=Object(k.a)(n.items,o,a);return{total:n.total,items:r}}},{key:"getCheckedResults",value:function(e){return e.checkedResults}}]),e}()).\u0275fac=function(e){return new(e||a)(T.Zb(p.a),T.Zb(g.a),T.Zb(y.a),T.Zb(v.a),T.Zb(U),T.Zb(o.h))},a.\u0275prov=T.Lb({token:a,factory:a.\u0275fac}),E([Object(o.a)(l.a.SetSearchMode),N("design:type",Function),N("design:paramtypes",[Object,l.a.SetSearchMode]),N("design:returntype",void 0)],a.prototype,"setSearchMode",null),E([Object(o.a)(l.a.SetViewMode),N("design:type",Function),N("design:paramtypes",[Object,l.a.SetViewMode]),N("design:returntype",void 0)],a.prototype,"setViewMode",null),E([Object(o.a)(l.a.ShowFilters),N("design:type",Function),N("design:paramtypes",[Object,l.a.ShowFilters]),N("design:returntype",void 0)],a.prototype,"showFilters",null),E([Object(o.a)(l.a.SetSearchOptions),N("design:type",Function),N("design:paramtypes",[Object,l.a.SetSearchOptions]),N("design:returntype",void 0)],a.prototype,"setSearchOptions",null),E([Object(o.a)(l.a.SetActiveTags),N("design:type",Function),N("design:paramtypes",[Object,l.a.SetActiveTags]),N("design:returntype",void 0)],a.prototype,"setActiveTags",null),E([Object(o.a)(l.a.SetSearchConfig),N("design:type",Function),N("design:paramtypes",[Object,l.a.SetSearchConfig]),N("design:returntype",void 0)],a.prototype,"setSearchConfig",null),E([Object(o.a)(l.a.SearchCategory),N("design:type",Function),N("design:paramtypes",[Object,l.a.SearchCategory]),N("design:returntype",void 0)],a.prototype,"searchCategory",null),E([Object(o.a)(l.a.SearchStudio),N("design:type",Function),N("design:paramtypes",[Object,l.a.SearchStudio]),N("design:returntype",void 0)],a.prototype,"searchStudio",null),E([Object(o.a)(l.a.SearchSuccess),N("design:type",Function),N("design:paramtypes",[Object,l.a.SearchSuccess]),N("design:returntype",void 0)],a.prototype,"searchSuccess",null),E([Object(o.a)(l.a.CheckItem),N("design:type",Function),N("design:paramtypes",[Object,l.a.CheckItem]),N("design:returntype",void 0)],a.prototype,"checkItem",null),E([Object(o.a)(l.a.CheckAll),N("design:type",Function),N("design:paramtypes",[Object,l.a.CheckAll]),N("design:returntype",void 0)],a.prototype,"checkAll",null),E([Object(o.a)(l.a.UncheckAll),N("design:type",Function),N("design:paramtypes",[Object,l.a.UncheckAll]),N("design:returntype",void 0)],a.prototype,"uncheckAll",null),E([Object(o.a)(l.a.SetCheckedItems),N("design:type",Function),N("design:paramtypes",[Object,l.a.SetCheckedItems]),N("design:returntype",void 0)],a.prototype,"setCheckedItems",null),E([Object(o.a)(l.a.SetSidenav),N("design:type",Function),N("design:paramtypes",[Object,l.a.SetSidenav]),N("design:returntype",void 0)],a.prototype,"setSidenav",null),E([Object(o.a)(l.a.SetCardActions),N("design:type",Function),N("design:paramtypes",[Object,l.a.SetCardActions]),N("design:returntype",void 0)],a.prototype,"setCardActions",null),E([Object(o.a)(l.a.SetBulkActions),N("design:type",Function),N("design:paramtypes",[Object,l.a.SetBulkActions]),N("design:returntype",void 0)],a.prototype,"setBulkActions",null),E([Object(o.a)(l.a.ClearResults),N("design:type",Function),N("design:paramtypes",[Object,l.a.ClearResults]),N("design:returntype",void 0)],a.prototype,"clearResults",null),E([Object(o.a)(l.a.Reset),N("design:type",Function),N("design:paramtypes",[Object,l.a.Reset]),N("design:returntype",void 0)],a.prototype,"resetGallery",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getLoading",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getSearchMode",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getSearchConfig",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getSearchOptions",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getAvailableTags",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getActiveTags",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getActiveTagsCount",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getSearchType",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getSearchGroup",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getViewMode",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getShowFilters",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getSort",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getSortOptions",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getSidenav",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getBulkActions",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getBulkActionsAvailable",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",Boolean)],a,"getBulkActionsActive",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getCardActions",null),E([Object(o.f)([w.a]),N("design:type",Function),N("design:paramtypes",[r.b,j.a]),N("design:returntype",C)],a,"getFilteredResults",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b,j.a]),N("design:returntype",C)],a,"getAllResults",null),E([Object(o.f)(),N("design:type",Function),N("design:paramtypes",[r.b]),N("design:returntype",void 0)],a,"getCheckedResults",null),a=E([Object(o.g)({name:"gallery",defaults:R})],a))},GMXD:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i,a,o=n("AcyG"),r=function e(){h(this,e)},s=n("gm/O"),c=n("JaAu"),l=n("E32s"),d=n("UsYJ"),g=n("0Yvn"),f=n("fXoL"),m=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v={activeChapterId:void 0,nodeState:void 0,patches:[],patchesForChapter:{}},k=((a=i=function(){function e(){h(this,e)}return b(e,[{key:"reset",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.activeChapterId=void 0,e.nodeState=void 0,e.patches=[],e.patchesForChapter={}})))}},{key:"applyPatch",value:function(e,t){var n=immer.applyPatches(e.getState(),t.patches),i=immer.produce(n,(function(e){var n;(n=e.patchesForChapter[e.activeChapterId]).push.apply(n,u(t.patches)),e.patches=t.patches}));e.patchState(i)}},{key:"initNodeState",value:function(e,t){e.patchState({nodeState:t.nodeState})}},{key:"setActiveChapter",value:function(e,t){var n=e.getState(),i=immer.produce(n,(function(e){e.activeChapterId=t.activeChapterId,e.patchesForChapter[t.activeChapterId]=e.patchesForChapter[t.activeChapterId]||[],e.patches=e.patchesForChapter[t.activeChapterId]}));e.patchState(i)}},{key:"duplicateNodeState",value:function(e,t){var n=e.getState(),i=immer.produce(n,(function(e){e.nodeState[t.copyChapterId]=e.nodeState[t.originalChapterId],e.patchesForChapter[t.copyChapterId]=e.patchesForChapter[t.originalChapterId].map((function(e){return e.path[1]=t.copyChapterId,e}))}));e.patchState(i)}},{key:"updateNodesShown",value:function(e,t){var n=e.getState(),i=Object(d.a)(n,t),a=i.finalState,o=i.patches,r=i.inversePatches;e.patchState(a),t.record&&e.dispatch(new c.a.SavePatches([{forward:o,inverse:r,patchAction:s.a.ApplyPatch}]))}},{key:"updateNodesSelected",value:function(e,t){var n=e.getState();if(n){var i=immer.produce(n,(function(e){var n,i,a=null!==(i=null===(n=e.nodeState)||void 0===n?void 0:n[e.activeChapterId])&&void 0!==i?i:{},o=Object.keys(a);switch(t.objectId){case void 0:o.forEach((function(e){return a[e].selected=!1}));break;default:o.forEach((function(e){return a[e].selected=!1})),a[t.objectId].selected=!0}}));e.patchState(i)}}},{key:"updateNodesChecked",value:function(e,t){var n=e.getState(),i=immer.produceWithPatches(n,(function(e){var n,i,a=null!==(i=null===(n=e.nodeState)||void 0===n?void 0:n[e.activeChapterId])&&void 0!==i?i:{};switch(t.patch){case void 0:(t.objectIds||Object.keys(a)).forEach((function(e){a[e].checked=t.checked,t.objectIds&&Object(l.a)(e,a,"checked",t.checked)}));break;default:Object.entries(t.patch).forEach((function(e){var t=p(e,2),n=t[0],i=t[1];return a[n].checked=i}))}})),a=p(i,3),o=a[0],r=a[1],s=(a[2],immer.produce(o,(function(e){e.patches=r})));e.patchState(s)}},{key:"updateNodesPickable",value:function(e,t){var n=e.getState(),i=immer.produceWithPatches(n,(function(e){var n,i,a=null!==(i=null===(n=e.nodeState)||void 0===n?void 0:n[e.activeChapterId])&&void 0!==i?i:{};t.patch?Object.entries(t.patch).forEach((function(e){var t=p(e,2),n=t[0],i=t[1];return a[n].pickable=i})):(t.objectIds||Object.keys(a)).forEach((function(e){a[e].pickable=t.pickable,t.objectIds&&Object(l.a)(e,a,"pickable",t.pickable)}))})),a=p(i,3),o=a[0],r=a[1],d=a[2],g=immer.produce(o,(function(e){var t;e.patches=r,(t=e.patchesForChapter[e.activeChapterId]).push.apply(t,u(r))}));e.patchState(g),e.dispatch(new c.a.SavePatches([{forward:r,inverse:d,patchAction:s.a.ApplyPatch}]))}},{key:"updateNodesPaint",value:function(e,t){var n=e.getState(),i=immer.produceWithPatches(n,(function(e){var n,i,a=null!==(i=null===(n=e.nodeState)||void 0===n?void 0:n[e.activeChapterId])&&void 0!==i?i:{},o=t.objectIds||Object.keys(a);t.patch?Object.entries(t.patch).forEach((function(e){var t=p(e,2),n=t[0],i=t[1],o=g.a.mergeRecipes(a[n].paint,i);a[n].paint=o})):o.forEach((function(e){var n=g.a.mergeRecipes(a[e].paint,t.recipe);a[e].paint=n,t.objectIds&&Object(l.a)(e,a,"paint",n)}))})),a=p(i,3),o=a[0],r=a[1],d=a[2],h=immer.produce(o,(function(e){var t;e.patches=r,(t=e.patchesForChapter[e.activeChapterId]).push.apply(t,u(r))}));e.patchState(h),t.record&&e.dispatch(new c.a.SavePatches([{forward:r,inverse:d,patchAction:s.a.ApplyPatch}]))}}],[{key:"getAllNodeState",value:function(e){return e.nodeState}},{key:"getActiveChapter",value:function(e){return e.activeChapterId}},{key:"getPatches",value:function(e){return e.patches}},{key:"getNodes",value:function(e){return void 0===e.activeChapterId||void 0===e.nodeState?{}:e.nodeState[e.activeChapterId]||{}}},{key:"getNodePaint",value:function(e){return function(t){return e.nodeState[e.activeChapterId][t].paint}}},{key:"getNodeIds",value:function(e){return Object.keys(i.getNodes(e))}},{key:"getCheckedNodeIds",value:function(e){return Object.values(i.getNodes(e)).filter((function(e){return e.checked})).map((function(e){return e.objectId}))}},{key:"getCheckedNodes",value:function(e){return i.getCheckedNodeIds(e).map((function(t){return e.nodeState[e.activeChapterId][t]}))}},{key:"getUncheckedNodeIds",value:function(e){return i.getNodeIds(e).filter((function(t){return!e.nodeState[e.activeChapterId][t].checked}))}},{key:"getSelectedNode",value:function(e){var t=i.getNodeIds(e).find((function(t){return e.nodeState[e.activeChapterId][t].selected}));return t?e.nodeState[e.activeChapterId][t]:void 0}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275prov=f.Lb({token:a,factory:a.\u0275fac}),m([Object(o.a)(s.a.Reset),y("design:type",Function),y("design:paramtypes",[Object,s.a.Reset]),y("design:returntype",void 0)],a.prototype,"reset",null),m([Object(o.a)(s.a.ApplyPatch),y("design:type",Function),y("design:paramtypes",[Object,s.a.ApplyPatch]),y("design:returntype",void 0)],a.prototype,"applyPatch",null),m([Object(o.a)(s.a.InitNodeState),y("design:type",Function),y("design:paramtypes",[Object,s.a.InitNodeState]),y("design:returntype",void 0)],a.prototype,"initNodeState",null),m([Object(o.a)(s.a.SetActiveChapter),y("design:type",Function),y("design:paramtypes",[Object,s.a.SetActiveChapter]),y("design:returntype",void 0)],a.prototype,"setActiveChapter",null),m([Object(o.a)(s.a.DuplicateNodeState),y("design:type",Function),y("design:paramtypes",[Object,s.a.DuplicateNodeState]),y("design:returntype",void 0)],a.prototype,"duplicateNodeState",null),m([Object(o.a)(s.a.UpdateNodesShown),y("design:type",Function),y("design:paramtypes",[Object,s.a.UpdateNodesShown]),y("design:returntype",void 0)],a.prototype,"updateNodesShown",null),m([Object(o.a)(s.a.UpdateNodeSelected),y("design:type",Function),y("design:paramtypes",[Object,s.a.UpdateNodeSelected]),y("design:returntype",void 0)],a.prototype,"updateNodesSelected",null),m([Object(o.a)(s.a.UpdateNodesChecked),y("design:type",Function),y("design:paramtypes",[Object,s.a.UpdateNodesChecked]),y("design:returntype",void 0)],a.prototype,"updateNodesChecked",null),m([Object(o.a)(s.a.UpdateNodesPickable),y("design:type",Function),y("design:paramtypes",[Object,s.a.UpdateNodesPickable]),y("design:returntype",void 0)],a.prototype,"updateNodesPickable",null),m([Object(o.a)(s.a.UpdateNodesPaint),y("design:type",Function),y("design:paramtypes",[Object,s.a.UpdateNodesPaint]),y("design:returntype",void 0)],a.prototype,"updateNodesPaint",null),m([Object(o.f)(),y("design:type",Function),y("design:paramtypes",[r]),y("design:returntype",void 0)],a,"getAllNodeState",null),m([Object(o.f)(),y("design:type",Function),y("design:paramtypes",[r]),y("design:returntype",void 0)],a,"getActiveChapter",null),m([Object(o.f)(),y("design:type",Function),y("design:paramtypes",[r]),y("design:returntype",void 0)],a,"getPatches",null),m([Object(o.f)(),y("design:type",Function),y("design:paramtypes",[r]),y("design:returntype",void 0)],a,"getNodes",null),m([Object(o.f)(),y("design:type",Function),y("design:paramtypes",[r]),y("design:returntype",void 0)],a,"getNodePaint",null),m([Object(o.f)(),y("design:type",Function),y("design:paramtypes",[r]),y("design:returntype",void 0)],a,"getNodeIds",null),m([Object(o.f)(),y("design:type",Function),y("design:paramtypes",[r]),y("design:returntype",void 0)],a,"getCheckedNodeIds",null),m([Object(o.f)(),y("design:type",Function),y("design:paramtypes",[r]),y("design:returntype",void 0)],a,"getCheckedNodes",null),m([Object(o.f)(),y("design:type",Function),y("design:paramtypes",[r]),y("design:returntype",void 0)],a,"getUncheckedNodeIds",null),m([Object(o.f)(),y("design:type",Function),y("design:paramtypes",[r]),y("design:returntype",void 0)],a,"getSelectedNode",null),a=i=m([Object(o.g)({name:"engineNodes",defaults:v})],a))},GUwF:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("LvDl"),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e);var n=t.tintColor,i=t.saturation,a=t.contrast,o=t.brightness,r=t.opacity;this.tintColor=n,this.saturation=i,this.contrast=a,this.brightness=o,this.opacity=r}return b(e,null,[{key:"isFresnel",value:function(e){return Array.isArray(e)&&5===e.length}},{key:"isColor",value:function(e){return Array.isArray(e)&&3===e.length}},{key:"isEqual",value:function(e,t){return!(!e||!t)&&JSON.stringify(e,Object.keys(e).sort())===JSON.stringify(t,Object.keys(t).sort())}},{key:"isRealRecipe",value:function(e){return!Object(i.isNil)(e)&&(!Object(i.isNil)(e.brightness)&&!1!==e.brightness||!Object(i.isNil)(e.contrast)&&!1!==e.contrast||!Object(i.isNil)(e.opacity)&&!1!==e.opacity||!Object(i.isNil)(e.saturation)&&!1!==e.saturation||!Object(i.isNil)(e.tintColor)&&!1!==e.tintColor)}},{key:"compare",value:function(t,n){try{var i=e.hue(t),a=e.hue(n),o=!1===t.opacity?1:t.opacity,r=!1===n.opacity?1:n.opacity;return i===a?o===r?t.saturation===n.saturation?t.brightness===n.brightness?t.contrast>n.contrast?i+4:i-4:t.brightness>n.brightness?i+3:i-3:t.saturation>n.saturation?i+2:i-2:o>r?i+1:i-1:i-a}catch(s){return 0}}},{key:"hue",value:function(e){if(!e.tintColor)return-10;var t=e.tintColor[0],n=e.tintColor[1],i=e.tintColor[2],a=Math.max(t,n,i),o=a-Math.min(t,n,i),r=0;return r=a===t?(n-i)/o:a===n?2+(i-t)/o:4+(t-n)/o,r*=60,r<0&&(r+=360),r}},{key:"generateUniqueRecipes",value:function(t){var n=[];return t.forEach((function(t){-1===e.recipeIndexOf(n,t)&&n.push(t)})),n}},{key:"recipeIndexOf",value:function(t,n){return t.findIndex((function(t){return e.isEqual(t,n)}))}}]),e}()},GmhI:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){var t=function e(){h(this,e)};t.type="[Memory] Reset",e.Reset=t;var n=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h(this,e),this.isFirstChapter=t,this.logToConsole=n};n.type="[Memory] Update",e.Update=n}(i||(i={}))},H7eZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(t,n,i,a,o){h(this,e),this.left=t,this.top=n,this.width=i,this.height=a,this.visibility=o}},HdmJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Dark="dark",e.Light="light",e.Themed="themed",e}({})},I0z8:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){i(n,e);var t=o(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).version=4,e}return b(n,null,[{key:"toJSON",value:function(e){return{version:e.version,app_producttype:e.app_producttype,app_productkey:e.app_productkey,email:e.email,password:e.password,first_name:e.firstName,last_name:e.lastName,group_invite_mode:e.groupInviteMode,group_invite_key:e.groupInviteKey,group_code_mode:e.groupCodeMode,group_code:e.groupCode,group_ovid_mode:e.groupOvidMode,group_ovid_osptok:e.groupOvidOsptok,platform:e.platform,return_to:e.returnTo,brand_id:e.brandId,locale_id:e.localeId,timestamp:e.timestamp,site_verify_response:e.site_verify_response}}}]),n}(n("RX1/").a)},INTG:function(e,t,n){"use strict";n.d(t,"b",(function(){return k})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return S})),n.d(t,"c",(function(){return x})),n.d(t,"a",(function(){return C}));var i=n("fXoL"),a=n("ofXK"),o=n("2Yyj"),r=n.n(o),s=n("Kd/A"),c=n.n(s),u=n("Hfs6"),l=n.n(u),p=n("VLs4"),d=n.n(p),g=n("1IWC"),f=n.n(g),m=n("Paii"),y=n.n(m),v=n("vT00"),k={title:"English",lang:"en",country:"us",id:"en-US"},O=[k,{title:"Espa\xf1ol",lang:"es",country:"es",id:"es-ES"},{title:"\u4e2d\u6587(\u7b80\u4f53)",lang:"zh",country:"cn",id:"zh-CN"},{title:"Fran\xe7ais",lang:"fr",country:"fr",id:"fr-FR"},{title:"Deutsch",lang:"de",country:"de",id:"de-DE"},{title:"Italiano",lang:"it",country:"it",id:"it-IT"},{title:"\u65e5\u672c\u8a9e",lang:"ja",country:"ja",id:"ja"},{title:"Portugu\xeas",lang:"pt",country:"pt",id:"pt-PT"}],S={en:"englishLocaleButton",es:"spanishLocaleButton",zh:"chineseLocaleButton",fr:"frenchLocaleButton",de:"germanLocaleButton",it:"italianLocaleButton",ja:"japaneseLocaleButton",pt:"portugueseLocaleButton"};function x(){var e="";try{e=localStorage.getItem("locale")}catch(t){}return(O.find((function(t){return t.id===e}))||k).id}[r.a,c.a,l.a,d.a,f.a,y.a,n.n(v).a].forEach((function(e){Object(a.D)(e)}));var C=function(){var e=function(){function e(){h(this,e)}return b(e,null,[{key:"forRoot",value:function(){return{ngModule:e,providers:[{provide:i.w,useFactory:x}]}}}]),e}();return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[a.c]]}),e}()},Ie6O:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("icKS"),a=n("fXoL"),o=n("tk/3"),r=function(){var e=function(){function e(t,n){h(this,e),this.http=t,this.productService=n}return b(e,[{key:"trackContentPublish",value:function(e,t){return this.http.post("/ws/user/analytics/content/inapp/publish",{version:4,app_producttype:this.productService.productType,app_productkey:this.productService.productKey,content_type:t,content_id:e})}},{key:"trackContentView",value:function(e,t){return this.http.post("/ws/user/analytics/content/inapp/view",{version:4,app_producttype:this.productService.productType,app_productkey:this.productService.productKey,content_type:t,content_id:e})}},{key:"checkContentView",value:function(){return this.http.get("/ws/user/content/inapp/view/check")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Zb(o.b),a.Zb(i.a))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},IlST:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return g}));var i=n("HdmJ"),a=n("fXoL"),o=n("ofXK"),r=["app-button",""],s=function(e,t,n,i,a,o,r,s,c,u,l,p,d,g,h,f,b,m,y,v,k,O,S,x){return{"app-button--xsmall":e,"app-button--small":t,"app-button--medium":n,"app-button--large":i,"app-button--flat":a,"app-button--default":o,"app-button--primary":r,"app-button--white":s,"app-button--info":c,"app-button--outline":u,"app-button--text":l,"app-button--light":p,"app-button--dark":d,"app-button--themed":g,"app-button--circle":h,"app-button--rounded":f,"app-button--square":b,"app-button--selected":m,"app-button--uppercase":y,"app-button--disabled":v,"app-button--no-border":k,"app-button--expanded":O,"app-button--left":S,"app-button--loading":x}},c=["*"],u=function(e){return e.XSmall="xsmall",e.Small="small",e.Medium="medium",e.Large="large",e}({}),l=function(e){return e.Default="default",e.Flat="flat",e.Primary="primary",e.Info="info",e.Outline="outline",e.Text="text",e.White="white",e}({}),p=function(e){return e.Default="default",e.Circle="circle",e.Rounded="rounded",e.Square="square",e}({}),d=function(e){return e.Left="left",e.Center="center",e}({}),g=function(){var e=function(){function e(){h(this,e),this.buttonSize=u.Medium,this.buttonType=l.Default,this.buttonTheme=i.a.Dark,this.buttonShape=p.Default,this.buttonAlign=d.Center,this.uppercase=!0,this.selected=!1,this.expanded=!1,this.loading=!1,this.bordered=!0}return b(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Jb({type:e,selectors:[["button","app-button",""],["a","app-button",""]],hostVars:1,hostBindings:function(e,t){2&e&&a.Yb("disabled",t.disabled)},inputs:{buttonSize:"buttonSize",buttonType:"buttonType",buttonTheme:"buttonTheme",buttonShape:"buttonShape",buttonAlign:"buttonAlign",uppercase:"uppercase",selected:"selected",expanded:"expanded",loading:"loading",disabled:"disabled",bordered:"bordered"},attrs:r,ngContentSelectors:c,decls:3,vars:26,consts:[[1,"app-button",3,"ngClass"],[1,"app-button__container"]],template:function(e,t){1&e&&(a.lc(),a.Vb(0,"span",0),a.Vb(1,"span",1),a.kc(2),a.Ub(),a.Ub()),2&e&&a.mc("ngClass",a.wc(1,s,["xsmall"==t.buttonSize,"small"==t.buttonSize,"medium"==t.buttonSize,"large"==t.buttonSize,"flat"==t.buttonType,"default"==t.buttonType,"primary"==t.buttonType,"white"==t.buttonType,"info"==t.buttonType,"outline"==t.buttonType,"text"==t.buttonType,"light"==t.buttonTheme,"dark"==t.buttonTheme,"themed"==t.buttonTheme,"circle"==t.buttonShape,"rounded"==t.buttonShape,"square"==t.buttonShape,t.selected,t.uppercase,t.disabled,!t.bordered,t.expanded,"left"===t.buttonAlign,t.loading]))},directives:[o.m],styles:['.text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}a[app-button],button[app-button]{border-color:transparent;background:none;border-width:0;padding:0;margin:0;border-radius:4px;outline:0 none}a[app-button]:not([disabled]):hover,button[app-button]:not([disabled]):hover{cursor:pointer}a[app-button]:focus .app-button,button[app-button]:focus .app-button{outline:2px solid #2d72dc!important}.app-button{font-size:13px;letter-spacing:.325px;line-height:1.4em;align-items:center;border-radius:4px;display:flex;font-family:Inter UI,sans-serif;justify-content:center;padding:0 16px;position:relative;text-align:center;transition:background-color .12s;width:100%}.app-button:after{content:" ";background-color:#283853;border-radius:4px;display:block;position:absolute;left:0;top:0;bottom:0;right:0;opacity:0;z-index:1;transition:opacity .06s}.app-button:not(.app-button--disabled):hover:after{opacity:.7}.app-button__container{position:relative;z-index:2;width:100%}.app-button--uppercase{text-transform:uppercase}.app-button--expanded{display:flex;flex:1}.app-button--xsmall{height:24px;min-width:24px;padding:0 8px;font-size:10px;letter-spacing:.25px;line-height:1.4em}.app-button--small{height:32px;min-width:32px;padding:0 12px}.app-button--medium,.app-button--small{font-size:13px;letter-spacing:.325px;line-height:1.4em}.app-button--medium{height:36px;min-width:36px;padding:0 16px}.app-button--large{height:48px;min-width:48px;padding:0 16px;font-size:14px;letter-spacing:.35px;line-height:1.4em}.app-button--no-border,.app-button--no-border:after{border-radius:0!important}.app-button--left{text-align:left}.app-button--themed{color:#374a68}.app-button--themed:hover{color:#1c2a3f}.app-button--themed:after{background-color:#d7e0ea}.app-button--dark{color:#d7e0ea}.app-button--dark:hover{color:#fff}.app-button--dark:after{background-color:#283853}.app-button--dark.app-button--flat{background:#374a68}.app-button--dark.app-button--default{background:transparent}.app-button--dark.app-button--outline{background:transparent;border:1px solid #374a68;transition:border-color .12s}.app-button--dark.app-button--outline:hover{border-color:#96a8c0}.app-button--dark.app-button--outline:hover:after{background-color:transparent;display:none}.app-button--dark.app-button--text{background:transparent;color:#d7e0ea}.app-button--dark.app-button--text:hover{color:#fff}.app-button--dark.app-button--text:hover:after{display:none}.app-button--dark.app-button--selected{background-color:#2d72dc;color:#fff}.app-button--dark.app-button--selected:hover:after{display:none}.app-button--light{color:#283853}.app-button--light:hover{color:#1c2a3f}.app-button--light:after{background-color:#96a8c0}.app-button--light:not(.app-button--disabled):hover:after{opacity:.6}.app-button--light::-moz-focus-inner{border:0}.app-button--light:not([disabled]):hover{cursor:pointer}.app-button--light[disabled]{pointer-events:none}.app-button--light.app-button--flat{background:#d7e0ea;font-weight:500}.app-button--light.app-button--flat.app-button--selected{background-color:#96a8c0}.app-button--light.app-button--default{background:transparent;color:#131c2a}.app-button--light.app-button--default:not(.app-button--disabled):hover:after{opacity:.2}.app-button--light.app-button--outline{background:transparent;border:1px solid #96a8c0;color:#283853;transition:border-color .12s}.app-button--light.app-button--outline:after{display:none}.app-button--light.app-button--outline:hover{background:rgba(55,74,104,.05);border-color:#374a68;color:#1c2a3f}.app-button--light.app-button--outline:hover:after{background-color:transparent}.app-button--light.app-button--selected{background-color:#eaeff5}.app-button--light.app-button--selected:hover:after{display:none}.app-button--light.app-button--text{color:#283853}.app-button--light.app-button--text:hover{color:#1c2a3f}.app-button--light.app-button--text:hover:after{display:none}.app-button.app-button--primary{background:#de3535;color:#fff}.app-button.app-button--primary:after{background:#f9fafd}.app-button.app-button--primary:hover:after{opacity:.1}.app-button.app-button--white{background:#fff;color:#283853;transition:border-color .12s}.app-button.app-button--white:hover{border-color:#96a8c0}.app-button.app-button--white:hover:after{background-color:#131c2a;display:none}.app-button.app-button--info{background:#2d72dc;color:#fff}.app-button.app-button--info:after{background:#f9fafd}.app-button.app-button--info:hover:after{opacity:.1}.app-button--selected{background-color:#2d72dc}.app-button--disabled:not(.app-button--loading){opacity:.5}.app-button--loading{background-color:#eaeff5!important;color:#61779e!important}.app-button--circle{border-radius:50%}.app-button--circle.app-button--xsmall{width:24px}.app-button--circle.app-button--small{width:32px;padding:0 6px}.app-button--circle.app-button--medium{width:36px;padding:0 8px}.app-button--circle.app-button--large{width:48px}.app-button--circle:after{border-radius:50%}.app-button--square{padding:0}.app-button--square.app-button--xsmall{width:24px;height:24px}.app-button--square.app-button--small{width:32px;height:32px}.app-button--square.app-button--medium{width:36px;height:36px}.app-button--square.app-button--large{width:48px;height:48px}.app-button--rounded,.app-button--rounded:after{border-radius:18px}'],encapsulation:2,changeDetection:0}),e}()},J5ja:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return te}));var a=n("AcyG"),o=n("LvDl"),r=n("LRne"),s=n("l5mm"),c=n("pLZG"),u=n("eIep"),p=n("lJxs"),d=n("Kn5L"),g=n("0IaG"),f=n("HDdC"),m=n("Ryms"),y=n("j8e5"),v=n("fXoL"),k=n("tyNb"),O=n("L2KA"),S=n("ofXK"),x=n("IlST"),C=n("Y+XQ");function w(e,t){if(1&e&&v.Qb(0,"app-tag",10),2&e){var n=v.gc();v.mc("icon",n.content.tagIcon)("label",n.content.tag)}}function j(e,t){if(1&e&&(v.Vb(0,"div",11),v.Pc(1),v.Ub()),2&e){var n=v.gc();v.Db(1),v.Rc(" ",n.content.description," ")}}function P(e,t){if(1&e){var n=v.Wb();v.Vb(0,"a",12),v.cc("click",(function(){return v.Cc(n),v.gc().handleSecondaryActionClick()})),v.Pc(1),v.Ub()}if(2&e){var i=v.gc();v.Db(1),v.Rc(" ",i.content.secondaryActionText," ")}}function _(e,t){if(1&e&&(v.Vb(0,"div",13),v.Qb(1,"img",14),v.Ub()),2&e){var n=v.gc();v.Db(1),v.mc("src",n.content.image,v.Fc),v.Eb("alt",n.content.title)}}var M,I,T,U,L,z=((M=function(){function e(){h(this,e),this.actionClick=new v.p,this.secondaryActionClick=new v.p}return b(e,[{key:"ngOnInit",value:function(){}},{key:"handleActionClick",value:function(){this.actionClick.emit()}},{key:"handleSecondaryActionClick",value:function(){this.secondaryActionClick.emit()}}]),e}()).\u0275fac=function(e){return new(e||M)},M.\u0275cmp=v.Jb({type:M,selectors:[["app-callout-content"]],inputs:{content:"content",compact:"compact"},outputs:{actionClick:"actionClick",secondaryActionClick:"secondaryActionClick"},decls:13,vars:8,consts:[["data-test","calloutContent",1,"callout","flex","flex-row","items-center"],[1,"callout__content","flex","flex-column","items-start","ph-4"],[1,"flex","flex-row","items-center",2,"flex-wrap","wrap"],["data-test","calloutContentTitle",1,"callout__title"],["data-test","calloutContentTag",3,"icon","label",4,"ngIf"],["class","callout__description mt-5","data-test","calloutContentDescription",4,"ngIf"],[1,"callout__actions","mt-10"],["type","button","app-button","","buttonTheme","light","buttonType","primary","buttonSize","large","data-test","calloutContentAction",1,"mr-6",3,"click"],["class","text-link text-14 mv-4","data-test","calloutContentSecondaryAction",3,"click",4,"ngIf"],["class","callout__image-container flex flex-row items-start justify-between ph-4",4,"ngIf"],["data-test","calloutContentTag",3,"icon","label"],["data-test","calloutContentDescription",1,"callout__description","mt-5"],["data-test","calloutContentSecondaryAction",1,"text-link","text-14","mv-4",3,"click"],[1,"callout__image-container","flex","flex-row","items-start","justify-between","ph-4"],["data-test","calloutContentImage",1,"callout__image",3,"src"]],template:function(e,t){1&e&&(v.Vb(0,"div",0),v.Vb(1,"div",1),v.Vb(2,"div",2),v.Vb(3,"div",3),v.Pc(4),v.Ub(),v.Vb(5,"div"),v.Nc(6,w,1,2,"app-tag",4),v.Ub(),v.Ub(),v.Nc(7,j,2,1,"div",5),v.Vb(8,"div",6),v.Vb(9,"button",7),v.cc("click",(function(){return t.handleActionClick()})),v.Pc(10),v.Ub(),v.Nc(11,P,2,1,"a",8),v.Ub(),v.Ub(),v.Nc(12,_,2,2,"div",9),v.Ub()),2&e&&(v.Hb("callout--compact",t.compact),v.Db(4),v.Qc(t.content.title),v.Db(2),v.mc("ngIf",t.content.tag),v.Db(1),v.mc("ngIf",t.content.description),v.Db(3),v.Rc(" ",t.content.actionText," "),v.Db(1),v.mc("ngIf",t.content.secondaryActionText),v.Db(1),v.mc("ngIf",t.content.image&&!t.compact))},directives:[S.p,x.a,C.b],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.callout[_ngcontent-%COMP%]{background-color:#fff}.callout__content[_ngcontent-%COMP%]{flex:1 1 auto}.callout__title[_ngcontent-%COMP%]{font-size:26px;letter-spacing:.65px;line-height:1.4em;letter-spacing:inherit;color:#131c2a;font-weight:600;margin-right:20px}.callout__description[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.callout__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-flow:wrap}.callout__image-container[_ngcontent-%COMP%]{flex:1;flex-basis:480px;width:100%}.callout__image[_ngcontent-%COMP%]{max-width:480px}.callout--compact[_ngcontent-%COMP%]   .callout__content[_ngcontent-%COMP%]{flex-basis:100%}.callout--compact[_ngcontent-%COMP%]   .callout__title[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em;margin-bottom:4px}.callout--compact[_ngcontent-%COMP%]   .callout__description[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.callout[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"],changeDetection:0}),M),A=n("0njA"),F=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},D=((I=function(){function e(t,n,i,a){h(this,e),this.router=t,this.dialogService=n,this.dialogRef=i,this.breakPoints=m.a,this.data=a}return b(e,[{key:"ngOnInit",value:function(){}},{key:"handleCloseClick",value:function(){this.dialogRef.close(!0)}},{key:"handleActionClick",value:function(){this.dialogService.openUpgradeDialog(!1)}},{key:"handleSecondaryActionClick",value:function(){var e=this;this.router.navigate(["/results/bookmarks"]).then((function(){e.dialogRef.close()}))}}]),e}()).\u0275fac=function(e){return new(e||I)(v.Pb(k.e),v.Pb(O.a),v.Pb(g.g),v.Pb(g.a))},I.\u0275cmp=v.Jb({type:I,selectors:[["app-premium-access-dialog"]],decls:8,vars:10,consts:[["role","dialog","aria-modal","true","data-test","premiumAccessDialog",1,"dialog","flex","flex-row","items-start"],[1,"flex","items-center","justify-center","flex-auto"],[1,"dialog__content","flex","flex-row","items-start","justify-center","flex-auto"],[3,"content","compact","actionClick","secondaryActionClick"],["app-button","","buttonType","default","buttonTheme","light","type","button","title","Close",1,"modal__close",3,"click"],["icon","times","size","lg"]],template:function(e,t){1&e&&(v.Vb(0,"div",0),v.hc(1,"async"),v.Vb(2,"div",1),v.Vb(3,"div",2),v.Vb(4,"app-callout-content",3),v.cc("actionClick",(function(){return t.handleActionClick()}))("secondaryActionClick",(function(){return t.handleSecondaryActionClick()})),v.hc(5,"async"),v.Ub(),v.Ub(),v.Ub(),v.Vb(6,"button",4),v.cc("click",(function(){return t.handleCloseClick()})),v.Qb(7,"app-icon",5),v.Ub(),v.Ub()),2&e&&(v.Hb("dialog--compact",v.ic(1,6,t.breakpoint$)<=t.breakPoints.Medium),v.Eb("aria-label","Premium Access"),v.Db(4),v.mc("content",t.data)("compact",v.ic(5,8,t.breakpoint$)<=t.breakPoints.Medium),v.Db(2),v.Eb("aria-label","Close"))},directives:[z,x.a,A.a],pipes:[S.b],styles:[".dialog__content[_ngcontent-%COMP%]{max-width:1140px}.dialog--compact[_ngcontent-%COMP%]   .dialog__content[_ngcontent-%COMP%]{margin:0}"],changeDetection:0}),function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);o>3&&r&&Object.defineProperty(t,n,r)}([Object(a.e)(y.a.getBreakpoint),F("design:type",f.a)],I.prototype,"breakpoint$",void 0),I),E=n("E/pY"),N=((T=function(){function e(t){h(this,e),this.dialogRef=t}return b(e,[{key:"ngOnInit",value:function(){}},{key:"handleDismissClick",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||T)(v.Pb(g.g))},T.\u0275cmp=v.Jb({type:T,selectors:[["app-signup-footer-dialog"]],decls:5,vars:3,consts:[["role","dialog","aria-modal","true","data-test","signupFooterDialog",1,"signup-footer-dialog","flex","flex-column","items-center"],[1,"signup-footer-dialog__message"],[3,"compact"],["app-button","","buttonType","default","buttonTheme","light","type","button","title","Close",1,"signup-footer-dialog__close",3,"click"],["icon","times","size","lg"]],template:function(e,t){1&e&&(v.Vb(0,"div",0),v.Vb(1,"div",1),v.Qb(2,"app-signup-messaging",2),v.Ub(),v.Vb(3,"button",3),v.cc("click",(function(){return t.handleDismissClick()})),v.Qb(4,"app-icon",4),v.Ub(),v.Ub()),2&e&&(v.Eb("aria-label","Sign Up"),v.Db(2),v.mc("compact",!1),v.Db(1),v.Eb("aria-label","Close"))},directives:[E.a,x.a,A.a],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.signup-footer-dialog[_ngcontent-%COMP%]{padding-top:36px;padding-bottom:36px}.signup-footer-dialog__message[_ngcontent-%COMP%]{max-width:632px}.signup-footer-dialog__close[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px}@media (max-width:480px){.signup-footer-dialog[_ngcontent-%COMP%]{padding-top:32px;padding-bottom:32px}.signup-footer-dialog__message[_ngcontent-%COMP%]{max-width:320px}}"],changeDetection:0}),T),R=n("DTUA"),V=n("AytR"),B=n("Lnht"),H=n("/LQR"),Q=((U=function(){function e(t,n,i){h(this,e),this.dialogService=t,this.storageService=n,this.dialogRef=i,this.supportEmail=V.a.supportEmail,this.upgradeLabel="Your 14-day trial has expired and your account now has limited functionality. To regain access to the full power of the BioDigital Human platform, choose the plan that\u2019s perfect for you and:"}return b(e,[{key:"ngOnInit",value:function(){}},{key:"handleCancelClick",value:function(){this.storageService.setLocalItem(R.b.TeamTrialExpirationSeen,!0),this.dialogRef.close()}},{key:"handleChooseClick",value:function(){this.storageService.setLocalItem(R.b.TeamTrialExpirationSeen,!0),this.dialogService.openUpgradeDialog()}}]),e}()).\u0275fac=function(e){return new(e||U)(v.Pb(O.a),v.Pb(R.d),v.Pb(g.g))},U.\u0275cmp=v.Jb({type:U,selectors:[["app-trial-expired-dialog"]],decls:15,vars:2,consts:[[1,"dialog"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Close",1,"dialog__close",3,"click"],["icon","times","size","lg"],[1,"dialog__content","flex","flex-column","items-center","justify-center"],[1,"mb-4","text-24","text-semibold","text-center"],["src","assets/images/biodigital-multidevice-graphic.jpg",1,"dialog__image"],["app-button","","buttonType","primary",1,"mv-4",3,"click"],[1,"mv-4"],[3,"label"],[1,"mt-4","text-14"],["role","button","tabindex","0","appSupportLink","",1,"text-underline"]],template:function(e,t){1&e&&(v.Vb(0,"div",0),v.Vb(1,"button",1),v.cc("click",(function(){return t.handleCancelClick()})),v.Qb(2,"app-icon",2),v.Ub(),v.Vb(3,"div",3),v.Vb(4,"div",4),v.Pc(5,"Your free trial has ended"),v.Ub(),v.Qb(6,"img",5),v.Vb(7,"button",6),v.cc("click",(function(){return t.handleChooseClick()})),v.Pc(8," Upgrade Now "),v.Ub(),v.Vb(9,"div",7),v.Qb(10,"app-team-features",8),v.Ub(),v.Vb(11,"div",9),v.Pc(12," Need more time for evaluation? "),v.Vb(13,"span",10),v.Pc(14,"Contact us"),v.Ub(),v.Ub(),v.Ub(),v.Ub()),2&e&&(v.Db(1),v.Eb("aria-label","Close"),v.Db(9),v.mc("label",t.upgradeLabel))},directives:[x.a,A.a,B.a,H.a],styles:[".dialog[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;height:100%;padding:32px;width:90vw;height:90vh}.dialog__close[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px}.dialog__content[_ngcontent-%COMP%]{max-width:520px}.dialog__image[_ngcontent-%COMP%]{width:100%;max-width:360px}@media (max-width:480px){.dialog[_ngcontent-%COMP%]{width:100vw;height:100vh}}"],changeDetection:0}),U),G=n("5sb6"),W=n("937/"),q=n("eW6i"),X=n("Mh2x"),Z=n("kTA6"),J=n("icKS"),K=n("JkaL"),$=n("q7pw"),Y=n("EFcw"),ee=(l(i={},Y.a.BookmarkViewLimitReached,"View gate"),l(i,Y.a.BookmarkSaveLimitReached,"Save gate"),l(i,Y.a.Publish,"Publish gate"),i),te=((L=function(){function e(t,n,i,a,o,r,s){h(this,e),this.store=t,this.dialog=n,this.pendoService=i,this.productService=a,this.router=o,this.engineService=r,this.cameraService=s}return b(e,[{key:"openPastDue",value:function(){this.store.dispatch(new d.K(Y.a.ProAccountPastDue,$.a.Notification))}},{key:"openBookmarkViewWarning",value:function(e,t){this.store.dispatch(new d.K(Y.a.BookmarkViewThresholdReached,$.a.Footer,{title:"You've viewed **".concat(e," of ").concat(t,"** models this month."),actionText:"Get Unlimited Acccess"}))}},{key:"openPublicViewGate",value:function(){return this.dialog.open(N,{id:G.a.PublicViewGateDialog,backdropClass:"bd-dialog-backdrop-alt",panelClass:"bg-dialog-docked",disableClose:!0,data:{}}).afterClosed()}},{key:"closePublicViewGate",value:function(){var e=this.dialog.getDialogById(G.a.PublicViewGateDialog);e&&e.close()}},{key:"openBookmarkViewLimit",value:function(){return this.openPremiumAccessDialog(Y.a.BookmarkViewLimitReached,{},!1)}},{key:"openBookmarkSaveWarning",value:function(e,t){this.store.dispatch(new d.K(Y.a.BookmarkSaveThresholdReached,$.a.Footer,{title:"You've saved **".concat(e," of ").concat(t,"** free models."),actionText:"Get Unlimited Storage"}))}},{key:"openBookmarkSaveLimit",value:function(){return this.openPremiumAccessDialog(Y.a.BookmarkSaveLimitReached)}},{key:"openPublishPaywall",value:function(){return this.openPremiumAccessDialog(Y.a.Publish)}},{key:"openTrialExpired",value:function(){return this.dialog.open(Q,{id:G.a.TrialExpiredDialog,panelClass:"bg-dialog-responsive"}).afterClosed()}},{key:"openPremiumAccessDialog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Object.assign(Object.assign({},K.b[e]),t);if(this.getOpenPremiumDialogType()===Y.a.BookmarkViewLimitReached)return Object(r.a)(void 0);e===Y.a.BookmarkViewLimitReached&&this.clearDialogs(),this.pendoService.track(ee[e],{page:this.router.url,platform:this.productService.productKey});var a=this.getPremiumDialogId(e);return this.dialog.open(D,{id:a,backdropClass:n?void 0:"bd-dialog-backdrop-headless",panelClass:"bg-dialog-docked",disableClose:!n,data:i}).afterClosed()}},{key:"clearDialogs",value:function(){this.dialog.closeAll()}},{key:"clearUserNotifications",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.store.dispatch(new d.i(t))}},{key:"getPremiumDialogId",value:function(e){return"".concat(G.a.PremiumAccessDialog,"_").concat(e)}},{key:"getOpenPremiumDialogType",value:function(){var e=this;return Object.values(Y.a).find((function(t){var n=e.getPremiumDialogId(t),i=e.dialog.getDialogById(n);return!Object(o.isNil)(i)}))}},{key:"createViewinteractionGate",value:function(e,t,n){return this.store.select(X.a.getSelectedChapterModelReady).pipe(Object(c.a)((function(e){return e}))).pipe(Object(u.a)((function(){return Object(s.a)(1e3)})),Object(p.a)((function(e){return 1e3*e}))).pipe(Object(p.a)((function(t){return t>=e})))}}]),e}()).\u0275fac=function(e){return new(e||L)(v.Zb(a.h),v.Zb(g.b),v.Zb(Z.b),v.Zb(J.a),v.Zb(k.e),v.Zb(q.a),v.Zb(W.a))},L.\u0275prov=v.Lb({token:L,factory:L.\u0275fac,providedIn:"root"}),L)},"J9/X":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){var t=function e(t){h(this,e),this.searchMode=t};t.type="[Gallery] Set Search Mode",e.SetSearchMode=t;var n=function e(t){h(this,e),this.viewMode=t};n.type="[Gallery] Set View Mode",e.SetViewMode=n;var i=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h(this,e),this.show=t,this.triggerDrawer=n};i.type="[Gallery] Show Filters",e.ShowFilters=i;var a=function e(t){h(this,e),this.organizationId=t};a.type="[Gallery] Get Studio Options",e.GetStudioOptions=a;var o=function e(t){h(this,e),this.options=t};o.type="[Gallery] Get Studio Options Success",e.GetStudioOptionsSuccess=o;var r=function e(t){h(this,e),this.config=t};r.type="[Gallery] Search Loft",e.SearchLoft=r;var s=function e(t){h(this,e),this.bookmarks=t};s.type="[Gallery] Search Loft Success",e.SearchLoftSuccess=s;var c=function e(t,n){h(this,e),this.config=t,this.options=n};c.type="[Gallery] Set Search Config",e.SetSearchConfig=c;var u=function e(t){h(this,e),this.options=t};u.type="[Gallery] Set Search Options",e.SetSearchOptions=u;var l=function e(t){h(this,e),this.activeTags=t};l.type="[Gallery] Set Active Tags",e.SetActiveTags=l;var p=function e(t){h(this,e),this.categoryId=t};p.type="[Gallery] Search Category",e.SearchCategory=p;var d=function e(){h(this,e)};d.type="[Gallery] Search Studio",e.SearchStudio=d;var g=function e(t){h(this,e),this.bookmarks=t};g.type="[Gallery] Search Studio Success",e.SearchStudioSuccess=g;var f=function e(t){h(this,e),this.bookmarks=t};f.type="[Gallery] Search Success",e.SearchSuccess=f;var b=function e(t){h(this,e),this.result=t};b.type="[Gallery] Select Bookmark",e.SelectBookmark=b;var m=function e(t){h(this,e),this.sidenav=t};m.type="[Gallery] Set Sidenav",e.SetSidenav=m;var y=function e(t){h(this,e),this.bulkActions=t};y.type="[Gallery] Set Bulk Actions",e.SetBulkActions=y;var v=function e(t){h(this,e),this.cardActions=t};v.type="[Gallery] Set Card Actions",e.SetCardActions=v;var k=function e(){h(this,e)};k.type="[Gallery] Clear Results",e.ClearResults=k;var O=function e(t,n){h(this,e),this.id=t,this.checked=n};O.type="[Gallery] Check Item",e.CheckItem=O;var S=function e(){h(this,e)};S.type="[Gallery] Check All",e.CheckAll=S;var x=function e(){h(this,e)};x.type="[Gallery] Uncheck All",e.UncheckAll=x;var C=function e(t){h(this,e),this.ids=t};C.type="[Gallery] Set Checked Items",e.SetCheckedItems=C;var w=function e(){h(this,e)};w.type="[Gallery] Reset",e.Reset=w}(i||(i={}))},JaAu:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){var t=function e(){h(this,e)};t.type="[Undo] Reset",e.Reset=t;var n=function e(t){h(this,e),this.chapterId=t};n.type="[Undo] Undo",e.Undo=n;var i=function e(t){h(this,e),this.chapterId=t};i.type="[Undo] Undo All",e.UndoAll=i;var a=function e(t){h(this,e),this.chapterId=t};a.type="[Undo] Redo",e.Redo=a;var o=function e(t){h(this,e),this.patches=t};o.type="[Undo] Store Patches",e.SavePatches=o}(i||(i={}))},JggO:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n("1iZL");var i=n("zJoM"),a=n("LvDl"),o=n("fXoL"),r=n("ofXK"),s=n("0IaG"),c=n("9AAO"),u=n("Qu3c"),l=n("XoCC");function p(e,t){1&e&&(o.Vb(0,"div",4),o.Qb(1,"app-spinner",5),o.Ub())}var d,g,f=((d=function(){function e(t,n,i){h(this,e),this.dialogRef=t,this.data=n,this.changeRef=i,this.config=n}return b(e,[{key:"ngOnInit",value:function(){}},{key:"handleCloseClick",value:function(){this.dialogRef.close()}},{key:"handleImageLoaded",value:function(){this.imageLoaded=!0,this.changeRef.markForCheck()}}]),e}()).\u0275fac=function(e){return new(e||d)(o.Pb(s.g),o.Pb(s.a),o.Pb(o.i))},d.\u0275cmp=o.Jb({type:d,selectors:[["app-image-dialog"]],decls:4,vars:7,consts:[["role","dialog","aria-modal","true",1,"image-dialog",3,"click","keyup.enter"],["class","image-dialog__loading flex flex-column p-8",4,"ngIf"],[1,"image-dialog__image",3,"src","title","alt","load"],["type","button","app-pin-button","","buttonType","dark","size","large","icon","times","aria-label","Close","matTooltip","Close","matTooltipPosition","left",1,"image-dialog__close"],[1,"image-dialog__loading","flex","flex-column","p-8"],["size","huge"]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.cc("click",(function(){return t.handleCloseClick()}))("keyup.enter",(function(){return t.handleCloseClick()})),o.Nc(1,p,2,0,"div",1),o.Vb(2,"img",2),o.cc("load",(function(){return t.handleImageLoaded()})),o.Ub(),o.Qb(3,"button",3),o.Ub()),2&e&&(o.Eb("aria-label",(t.config.title||t.config.alt||"")+" Image Dialog"),o.Db(1),o.mc("ngIf",!t.imageLoaded),o.Db(1),o.mc("src",t.config.src,o.Fc)("title",t.config.title||"")("alt",t.config.alt||""),o.Eb("aria-label",t.config.title||""),o.Db(1),o.Eb("aria-label","Close Dialog"))},directives:[r.p,c.a,u.c,l.a],styles:[".image-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.image-dialog__loading[_ngcontent-%COMP%]{position:absolute}.image-dialog__image[_ngcontent-%COMP%]{max-width:100%;max-height:100vh}.image-dialog__close[_ngcontent-%COMP%]{position:fixed;top:24px;right:24px}"],changeDetection:0}),d),m=n("5sb6"),y=n("0njA"),v=["imageView"],k=((g=function(){function e(t){h(this,e),this.dialog=t,this.fit="normal",this.fullscreenEnabled=!1}return b(e,[{key:"handleFullscreen",value:function(e){this.dialog.open(f,{id:m.a.ImageDialog,backdropClass:"bd-dialog-backdrop",panelClass:"bd-dialog-panel",disableClose:!1,data:{src:this.fullscreenSrc||this.src,alt:this.alt||""}}),e.stopPropagation()}}]),e}()).\u0275fac=function(e){return new(e||g)(o.Pb(s.b))},g.\u0275cmp=o.Jb({type:g,selectors:[["app-image-view"]],viewQuery:function(e,t){var n;1&e&&o.Jc(v,!0),2&e&&o.xc(n=o.dc())&&(t.imageView=n.first)},inputs:{fit:"fit",fitSize:"fitSize",src:"src",fullscreenSrc:"fullscreenSrc",alt:"alt"},decls:7,vars:8,consts:[["role","button","tabindex","0","matTooltip","Expand",1,"image-view",3,"click","keyup.enter"],["imageView",""],[1,"visually-hidden"],[1,"image-view__image",3,"src"],["aria-hidden","true",1,"image-view__overlay"],["icon","expand-alt",1,"image-view__icon"]],template:function(e,t){1&e&&(o.Vb(0,"div",0,1),o.cc("click",(function(e){return t.handleFullscreen(e)}))("keyup.enter",(function(e){return t.handleFullscreen(e)})),o.Vb(2,"span",2),o.Pc(3,"Click to expand the image"),o.Ub(),o.Qb(4,"img",3),o.Vb(5,"div",4),o.Qb(6,"app-icon",5),o.Ub(),o.Ub()),2&e&&(o.Hb("image-view--auto-fit","auto"===t.fit),o.Db(4),o.Kc("max-width","auto"===t.fit&&t.fitSize?t.fitSize+"px":"100%")("max-height","auto"===t.fit&&t.fitSize?t.fitSize+"px":"100%"),o.mc("src",t.src,o.Fc),o.Eb("alt",t.alt))},directives:[u.c,y.a],styles:[".image-view[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:inherit;min-height:32px;position:relative;background-color:#f9fafd}.image-view__image[_ngcontent-%COMP%]{width:auto;height:auto}.image-view--auto-fit[_ngcontent-%COMP%]   .image-view__image[_ngcontent-%COMP%]{max-width:100%;height:auto}.image-view__overlay[_ngcontent-%COMP%]{background:rgba(28,42,63,.3);color:#fff;display:flex;flex-direction:row;align-items:center;justify-content:center;padding:8px;position:absolute;top:0;bottom:0;left:0;right:0;opacity:0;transition:opacity .25s}.image-view__icon[_ngcontent-%COMP%]{text-shadow:0 0 2px rgba(0,0,0,.6)}.image-view[_ngcontent-%COMP%]:hover{cursor:pointer}.image-view[_ngcontent-%COMP%]:hover   .image-view__overlay[_ngcontent-%COMP%]{opacity:1}.image-view[_ngcontent-%COMP%]:focus{outline:2px solid #2d72dc!important}.image-view[_ngcontent-%COMP%]:focus   .image-view__overlay[_ngcontent-%COMP%]{opacity:1}"],changeDetection:0}),g),O=n("7gUy");function S(e,t){if(1&e&&(o.Vb(0,"div",6),o.Qb(1,"app-image-view",7),o.Ub()),2&e){var n=o.gc(2);o.Hb("mb-3",n.currentImage.caption),o.Db(1),o.mc("src",n.currentImage.urls.small)("fullscreenSrc",n.currentImage.urls.default)("alt",n.currentImage.alt)("fit",n.fit)("fitSize",n.fitSize)}}function x(e,t){if(1&e&&o.Qb(0,"app-html",8),2&e){var n=o.gc(2);o.mc("markdownText",n.currentImage.caption)}}function C(e,t){if(1&e){var n=o.Wb();o.Vb(0,"div",9),o.Vb(1,"button",10),o.cc("click",(function(){return o.Cc(n),o.gc(2).handlePrevClick()})),o.Ub(),o.Vb(2,"button",11),o.cc("click",(function(){return o.Cc(n),o.gc(2).handleNextClick()})),o.Ub(),o.Ub()}}function w(e,t){if(1&e&&(o.Vb(0,"div",1),o.Vb(1,"div",2),o.Nc(2,S,2,7,"div",3),o.Nc(3,x,1,1,"app-html",4),o.Nc(4,C,3,0,"div",5),o.Ub(),o.Ub()),2&e){var n=o.gc();o.Hb("images-block--slideshow",n.images&&n.images.length>1),o.Db(2),o.mc("ngIf",n.currentImage.urls),o.Db(1),o.mc("ngIf",n.currentImage.caption),o.Db(1),o.mc("ngIf",n.images.length>1)}}var j,P=((j=function(){function e(){h(this,e),this.layout=i.a.Normal}return b(e,[{key:"imagesBlock",get:function(){return this._imagesBlock},set:function(e){this._imagesBlock=e;var t=Object(a.get)(e,"images",[]);t.length&&(this.images=t,this.currentImage=this.images[0])}},{key:"fit",get:function(){return"compact"===this.layout?"auto":"normal"}},{key:"fitSize",get:function(){return"compact"===this.layout?100:void 0}},{key:"ngOnInit",value:function(){}},{key:"handlePrevClick",value:function(){var e=this.getCurrentImageIndex();--e<0&&(e=this.images.length-1),this.currentImage=this.images[e]}},{key:"handleNextClick",value:function(){var e=this.getCurrentImageIndex();++e>=this.images.length&&(e=0),this.currentImage=this.images[e]}},{key:"getCurrentImageIndex",value:function(){return this.images.indexOf(this.currentImage)}}]),e}()).\u0275fac=function(e){return new(e||j)},j.\u0275cmp=o.Jb({type:j,selectors:[["app-images-block"]],inputs:{imagesBlock:"imagesBlock",layout:"layout"},decls:1,vars:1,consts:[["class","images-block",3,"images-block--slideshow",4,"ngIf"],[1,"images-block"],[1,"images-block__content"],["class","images-block__image-container",3,"mb-3",4,"ngIf"],["class","images-block__caption",3,"markdownText",4,"ngIf"],["class","images-block__actions",4,"ngIf"],[1,"images-block__image-container"],[1,"images-block__image-view",3,"src","fullscreenSrc","alt","fit","fitSize"],[1,"images-block__caption",3,"markdownText"],[1,"images-block__actions"],["type","button","app-pin-button","","icon","chevron-left","size","small","buttonType","ghost","matTooltip","Previous Image","aria-label","Previous Image",3,"click"],["type","button","app-pin-button","","icon","chevron-right","size","small","buttonType","ghost","matTooltip","Next Image","aria-label","Next Image",3,"click"]],template:function(e,t){1&e&&o.Nc(0,w,5,5,"div",0),2&e&&o.mc("ngIf",t.currentImage)},directives:[r.p,k,O.a,c.a,u.c],styles:[".images-block__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.images-block__label{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase;color:#374a68;font-weight:600;display:flex;align-items:center;min-height:28px}.images-block__image-container{display:flex;justify-content:center;background-color:#f9fafd}.images-block__image-view{display:flex;height:100%;min-height:32px}.images-block__caption{font-size:12px;margin-top:12px}.images-block__actions{display:flex;justify-content:flex-end;margin-top:14px}.images-block--slideshow .images-block__image-container{height:200px}"],encapsulation:2,changeDetection:0}),j)},Jk2I:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("tyNb"),a=n("XNiG"),o=n("1G5W"),r=n("fXoL"),s=n("ofXK"),c=function(e){return{"progress__bar--complete":e}},u=function(e){return{width:e}},l=function(){var e=function(){function e(t,n){h(this,e),this.router=t,this.changeDetector=n,this.total=100,this._value=0,this.percentWidth=0,this.ngUnsubscribe=new a.a}return b(e,[{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.percentWidth=this.value/this.total*100,this.changeDetector.markForCheck()}},{key:"ngOnInit",value:function(){var e=this;this.router.events.pipe(Object(o.a)(this.ngUnsubscribe)).subscribe((function(t){t instanceof i.d&&(e.value=0)}))}},{key:"ngOnDestroy",value:function(){this.changeDetector.detach(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Pb(i.e),r.Pb(r.i))},e.\u0275cmp=r.Jb({type:e,selectors:[["app-progress"]],inputs:{total:"total",value:"value"},decls:2,vars:7,consts:[[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress__bar",3,"ngClass","ngStyle"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Qb(1,"div",1),r.Ub()),2&e&&(r.Db(1),r.mc("ngClass",r.pc(3,c,100===t.percentWidth))("ngStyle",r.pc(5,u,t.percentWidth+"%")),r.Eb("aria-valuenow",t.percentWidth))},directives:[s.m,s.q],styles:["@-webkit-keyframes progressSuccess{0%{width:100%!important;background:#38de38}50%{opacity:1;background:#38de38}to{opacity:0}}@keyframes progressSuccess{0%{width:100%!important;background:#38de38}50%{opacity:1;background:#38de38}to{opacity:0}}.progress[_ngcontent-%COMP%]{border-radius:0 1px 1px 0;display:flex;align-items:center;height:4px;width:100%}.progress__bar[_ngcontent-%COMP%]{background:#de3535;height:100%;width:0}.progress__bar--complete[_ngcontent-%COMP%]{-webkit-animation:progressSuccess 2s linear forwards;animation:progressSuccess 2s linear forwards}"],changeDetection:0}),e}()},JkaL:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var a=n("EFcw"),o="School & Business Plans Only",r=(l(i={},a.a.BookmarkViewThresholdReached,{title:"BookmarkViewThresholdReach",actionText:"Upgrade Now"}),l(i,a.a.BookmarkViewLimitReached,{title:"You've reached your 10 free views this month",description:"You can come back next month for another 10 free views or upgrade your plan for unlimited access to over 700+ anatomy, condition, and treatment models.",image:"assets/images/biodigital-human-explore-3d-human-anatomy.jpg",actionText:"Upgrade Now"}),l(i,a.a.ProAccountPastDue,{title:"AccountPastDue",actionText:"Upgrade Now"}),l(i,a.a.BookmarkSaveThresholdReached,{title:"BookmarkSaveThresholdReached",actionText:"Upgrade Now"}),l(i,a.a.BookmarkSaveLimitReached,{title:"You've reached your limit of 5 saved models",description:"In order to save more models on your free plan, you will need to delete models in My Library or upgrade your plan.",image:"assets/images/biodigital-human-3d-model-my-library.jpg",actionText:"Upgrade Now",secondaryActionText:"Go to My Library to delete models"}),l(i,a.a.TeamTrailExpired,{title:"TrailExpired",actionText:"Upgrade Now"}),l(i,a.a.Publish,{title:"Publish your 3D model",description:"Upgrade to publish to your learning management system, website, or application and make your 3D models available for anyone to view and interact.",image:"assets/images/biodigital-human-publish-custom-3D-model.jpg",tag:o,tagIcon:"lock",actionText:"Upgrade Now"}),i)},KI9D:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return r}));var i=function(){var e=function e(){h(this,e)};return e.type="[Share] Reset",e}(),a=function(){var e=function e(t){h(this,e),this.shareEmail=t};return e.type="[Share] Share Email Link",e}(),o=function(){var e=function e(t){h(this,e),this.shareEmail=t};return e.type="[Share] Share Email Link Success",e}(),r=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Share] Share Email Link Fail",e}()},Kn5L:function(e,t,n){"use strict";n.d(t,"A",(function(){return i})),n.d(t,"C",(function(){return a})),n.d(t,"B",(function(){return o})),n.d(t,"F",(function(){return r})),n.d(t,"z",(function(){return s})),n.d(t,"y",(function(){return c})),n.d(t,"G",(function(){return u})),n.d(t,"E",(function(){return l})),n.d(t,"D",(function(){return p})),n.d(t,"H",(function(){return d})),n.d(t,"J",(function(){return g})),n.d(t,"I",(function(){return f})),n.d(t,"n",(function(){return b})),n.d(t,"p",(function(){return m})),n.d(t,"o",(function(){return y})),n.d(t,"u",(function(){return v})),n.d(t,"w",(function(){return k})),n.d(t,"v",(function(){return O})),n.d(t,"pb",(function(){return S})),n.d(t,"rb",(function(){return x})),n.d(t,"qb",(function(){return C})),n.d(t,"k",(function(){return w})),n.d(t,"m",(function(){return j})),n.d(t,"l",(function(){return P})),n.d(t,"d",(function(){return _})),n.d(t,"f",(function(){return M})),n.d(t,"e",(function(){return I})),n.d(t,"x",(function(){return T})),n.d(t,"P",(function(){return U})),n.d(t,"R",(function(){return L})),n.d(t,"Q",(function(){return z})),n.d(t,"jb",(function(){return A})),n.d(t,"lb",(function(){return F})),n.d(t,"kb",(function(){return D})),n.d(t,"mb",(function(){return E})),n.d(t,"ob",(function(){return N})),n.d(t,"nb",(function(){return R})),n.d(t,"h",(function(){return V})),n.d(t,"gb",(function(){return B})),n.d(t,"ib",(function(){return H})),n.d(t,"hb",(function(){return Q})),n.d(t,"ab",(function(){return G})),n.d(t,"bb",(function(){return W})),n.d(t,"c",(function(){return q})),n.d(t,"q",(function(){return X})),n.d(t,"Z",(function(){return Z})),n.d(t,"g",(function(){return J})),n.d(t,"Y",(function(){return K})),n.d(t,"S",(function(){return $})),n.d(t,"U",(function(){return Y})),n.d(t,"T",(function(){return ee})),n.d(t,"r",(function(){return te})),n.d(t,"t",(function(){return ne})),n.d(t,"s",(function(){return ie})),n.d(t,"cb",(function(){return ae})),n.d(t,"eb",(function(){return oe})),n.d(t,"db",(function(){return re})),n.d(t,"sb",(function(){return se})),n.d(t,"O",(function(){return ce})),n.d(t,"j",(function(){return ue})),n.d(t,"L",(function(){return le})),n.d(t,"N",(function(){return pe})),n.d(t,"M",(function(){return de})),n.d(t,"tb",(function(){return ge})),n.d(t,"vb",(function(){return he})),n.d(t,"ub",(function(){return fe})),n.d(t,"K",(function(){return be})),n.d(t,"i",(function(){return me})),n.d(t,"V",(function(){return ye})),n.d(t,"W",(function(){return ve})),n.d(t,"a",(function(){return ke})),n.d(t,"b",(function(){return Oe})),n.d(t,"X",(function(){return Se})),n.d(t,"fb",(function(){return xe}));var i=function(){var e=function e(){h(this,e)};return e.type="[Auth] Is Logged In",e}(),a=function(){var e=function e(){h(this,e)};return e.type="[Auth] Is Logged In Success",e}(),o=function(){var e=function e(){h(this,e)};return e.type="[Auth] Is Logged In Failure",e}(),r=function(){var e=function e(t){h(this,e),this.login=t};return e.type="[Auth] Login With Biodigital",e}(),s=function(){var e=function e(){h(this,e)};return e.type="[Auth] Load Google Auth",e}(),c=function(){var e=function e(t){h(this,e),this.online=t};return e.type="[Auth] Google Auth Service Online",e}(),u=function(){var e=function e(t){h(this,e),this.login=t};return e.type="[Auth] Login With Google",e}(),l=function(){var e=function e(t,n){h(this,e),this.loginType=t,this.response=n};return e.type="[Auth] Login Success",e}(),p=function(){var e=function e(t,n,i){h(this,e),this.loginType=t,this.error=n,this.login=i};return e.type="[Auth] Login Failure",e}(),d=function(){var e=function e(){h(this,e)};return e.type="[Auth] Logout",e}(),g=function(){var e=function e(){h(this,e)};return e.type="[Auth] Logout Success",e}(),f=function(){var e=function e(){h(this,e)};return e.type="[Auth] Logout Failure",e}(),b=function(){var e=function e(){h(this,e)};return e.type="[Auth] Get Environment Settings",e}(),m=function(){var e=function e(t){h(this,e),this.environmentSettings=t};return e.type="[Auth] Get Environment Settings Success",e}(),y=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Auth] Get Environment Settings Failure",e}(),v=function(){var e=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h(this,e),this.hardCheck=t};return e.type="[Auth] Get User Profile",e}(),k=function(){var e=function e(t){h(this,e),this.userProfile=t};return e.type="[Auth] Get User Profile Success",e}(),O=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Auth] Get User Profile Failure",e}(),S=function(){var e=function e(t){h(this,e),this.userProfile=t};return e.type="[Auth] Update User Profile",e}(),x=function(){var e=function e(t){h(this,e),this.userProfile=t};return e.type="[Auth] Update User Profile Success",e}(),C=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Auth] Update User Profile Failure",e}(),w=function(){var e=function e(){h(this,e)};return e.type="[Auth] Delete User Profile",e}(),j=function(){var e=function e(t){h(this,e),this.userEmail=t};return e.type="[Auth] Delete User Profile Success",e}(),P=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Auth] Delete User Profile Failure",e}(),_=function(){var e=function e(t){h(this,e),this.email=t};return e.type="[Auth] Check Profile",e}(),M=function(){var e=function e(t){h(this,e),this.profile=t};return e.type="[Auth] Check Profile Success",e}(),I=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Auth] Check Profile Failure",e}(),T=function(){var e=function e(){h(this,e)};return e.type="[Auth] Get User Roles",e}(),U=function(){var e=function e(t){h(this,e),this.email=t};return e.type="[Auth] Reset Password",e}(),L=function(){var e=function e(t){h(this,e),this.email=t};return e.type="[Auth] Reset Password Success",e}(),z=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Auth] Reset Password Failure",e}(),A=function(){var e=function e(t){h(this,e),this.email=t};return e.type="[Auth] Transfer Facebook Account",e}(),F=function(){var e=function e(t){h(this,e),this.email=t};return e.type="[Auth] Transfer Facebook Account Success",e}(),D=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Auth] Transfer Facebook Account Failure",e}(),E=function(){var e=function e(t,n,i){h(this,e),this.currentPassword=t,this.newPassword=n,this.confirmNewPassword=i};return e.type="[Auth] Update Password",e}(),N=function(){var e=function e(){h(this,e)};return e.type="[Auth] Update Password Success",e}(),R=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Auth] Update Password Failure",e}(),V=function(){var e=function e(){h(this,e)};return e.type="[Auth] Check Session",e}(),B=function(){var e=function e(t){h(this,e),this.value=t};return e.type="[Auth] Sign Up",e}(),H=function(){var e=function e(t){h(this,e),this.response=t};return e.type="[Auth] Sign Up Success",e}(),Q=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Auth] Sign Up Failure",e}(),G=function(){var e=function e(t){h(this,e),this.locale=t};return e.type="[Auth] Set User Locale",e}(),W=function(){var e=function e(t){h(this,e),this.locale=t};return e.type="[Auth] Set User Locale Success",e}(),q=function(){var e=function e(){h(this,e)};return e.type="[Auth] Check Locale",e}(),X=function(){var e=function e(){h(this,e)};return e.type="[Auth] Get User Apps",e}(),Z=function(){var e=function e(t){h(this,e),this.apps=t};return e.type="[Auth] Set User Apps",e}(),J=function(){var e=function e(){h(this,e)};return e.type="[Auth] Check Selected App",e}(),K=function(){var e=function e(t){h(this,e),this.appId=t};return e.type="[Auth] Set Selected User App",e}(),$=function(){var e=function e(t){h(this,e),this.message=t};return e.type="[Auth] Send User Message",e}(),Y=function(){var e=function e(t){h(this,e),this.message=t};return e.type="[Auth] Send User Message Success",e}(),ee=function(){var e=function e(t){h(this,e),this.err=t};return e.type="[Auth] Send User Message Fail",e}(),te=function(){var e=function e(t,n){h(this,e),this.type=t,this.mode=n};return e.type="[Auth] Get User Message",e}(),ne=function(){var e=function e(t){h(this,e),this.message=t};return e.type="[Auth] Get User Message Success",e}(),ie=function(){var e=function e(t){h(this,e),this.type=t};return e.type="[Auth] Get User Message Fail",e}(),ae=function(){var e=function e(t){h(this,e),this.messageSeenId=t};return e.type="[Auth] Set Message Viewed",e}(),oe=function(){var e=function e(){h(this,e)};return e.type="[Auth] Set Message Viewed Success",e}(),re=function(){var e=function e(){h(this,e)};return e.type="[Auth] Set Message Viewed Fail",e}(),se=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Auth] Verify Fail",e}(),ce=function(){var e=function e(){h(this,e)};return e.type="[Auth] Reset",e}(),ue=function(){var e=function e(){h(this,e)};return e.type="[Auth] Delete Stored Data",e}(),le=function(){var e=function e(t,n){h(this,e),this.email=t,this.token=n};return e.type="[Auth] Request Verification Code",e}(),pe=function(){var e=function e(t){h(this,e),this.response=t};return e.type="[Auth] Request Verification Code Success",e}(),de=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Auth] Request Verification Code Fail",e}(),ge=function(){var e=function e(t,n,i){h(this,e),this.email=t,this.token=n,this.code=i};return e.type="[Auth] Verify Profile",e}(),he=function(){var e=function e(t){h(this,e),this.response=t};return e.type="[Auth] Verify Profile Success",e}(),fe=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Auth] Verify Profile Fail",e}(),be=function(){var e=function e(t,n,i){h(this,e),this.type=t,this.display=n,this.data=i};return e.type="[Auth] Notify User Restriction",e}(),me=function(){var e=function e(t){h(this,e),this.displays=t};return e.type="[Auth] Clear User Restriction",e}(),ye=function(){var e=function e(t,n){h(this,e),this.contentId=t,this.contentType=n};return e.type="[Auth] Set Content Viewed",e}(),ve=function(){var e=function e(){h(this,e)};return e.type="[Auth] Set Content Viewed Success",e}(),ke=function(){var e=function e(){h(this,e)};return e.type="[Auth] Check Content Viewed",e}(),Oe=function(){var e=function e(t){h(this,e),this.contentViews=t};return e.type="[Auth] Check Content Viewed Success",e}(),Se=function(){var e=function e(t){h(this,e),this.isDeveloperReferral=t};return e.type="[Auth] Set Developer Referral",e}(),xe=function(){var e=function e(t){h(this,e),this.active=t};return e.type="[Auth] Set User View Gate Active",e}()},Kzh2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.UserGeneratedTour="user_generated_tour",e.Animated="animated",e.Quiz="quiz",e.ModeQuiz="mode_quiz",e.ModeContent="mode_content",e}({})},L2KA:function(e,t,n){"use strict";n.d(t,"a",(function(){return ke}));var i,a,o,r,s=n("fXoL"),c=n("0IaG"),u=n("IlST"),d=((i=function(){function e(){h(this,e)}return b(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=s.Jb({type:i,selectors:[["app-limit-dialog"]],decls:12,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"pt-1","pb-6"],[1,"text-14","pb-3"],[1,"text-14"],["mat-dialog-actions","",1,"pt-2"],["app-button","","buttonTheme","light","cdkFocusInitial","",1,"mr-2",3,"mat-dialog-close"],["app-button","","buttonType","primary",3,"mat-dialog-close"]],template:function(e,t){1&e&&(s.Vb(0,"h1",0),s.Pc(1,"New Bookmark Limit Reached"),s.Ub(),s.Vb(2,"div",1),s.Vb(3,"div",2),s.Pc(4," You've reached your limit of 5 3D models in your Library. You can make changes to this model, but you will not be able to save as a new model. "),s.Ub(),s.Vb(5,"div",3),s.Pc(6,"Upgrade to a Premium Plan to save unlimited 3D models."),s.Ub(),s.Ub(),s.Vb(7,"div",4),s.Vb(8,"button",5),s.Pc(9," OK "),s.Ub(),s.Vb(10,"button",6),s.Pc(11,"Upgrade Now"),s.Ub(),s.Ub()),2&e&&(s.Db(8),s.mc("mat-dialog-close",!1),s.Db(2),s.mc("mat-dialog-close",!0))},directives:[c.h,c.e,c.c,u.a,c.d],styles:[""],changeDetection:0}),i),g=n("hQeY"),f=n("nclC"),m=["copyField"],y=((a=function(){function e(t,n,i){h(this,e),this.dialogRef=t,this.data=n,this.clipboardService=i,this.settings={title:"Copy to Clipboard",copyText:""},this.settings=Object.assign(Object.assign({},this.settings),n)}return b(e,[{key:"rowCount",get:function(){return this.settings.copyText.split(/\r?\n/).length+1}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this.copyField.nativeElement;e.focus(),e.select()}},{key:"handleCopyClick",value:function(){var e=this.clipboardService.copyInputFieldValue(this.copyField.nativeElement);this.close(e)}},{key:"handleCancelClick",value:function(){this.close(!1)}},{key:"close",value:function(e){this.dialogRef.close(e)}}]),e}()).\u0275fac=function(e){return new(e||a)(s.Pb(c.g),s.Pb(c.a),s.Pb(f.a))},a.\u0275cmp=s.Jb({type:a,selectors:[["app-clipboard-dialog"]],viewQuery:function(e,t){var n;1&e&&s.Jc(m,!0),2&e&&s.xc(n=s.dc())&&(t.copyField=n.first)},decls:11,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"copy","flex"],[1,"copy__input","flex-auto",3,"value","rows"],["copyField",""],["mat-dialog-actions",""],["app-button","","buttonTheme","light",3,"click"],["app-button","","buttonType","primary",3,"click"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Pc(1),s.Ub(),s.Vb(2,"div",1),s.Vb(3,"textarea",2,3),s.Pc(5,"  "),s.Ub(),s.Ub(),s.Vb(6,"div",4),s.Vb(7,"button",5),s.cc("click",(function(){return t.handleCancelClick()})),s.Pc(8,"Cancel"),s.Ub(),s.Vb(9,"button",6),s.cc("click",(function(){return t.handleCopyClick()})),s.Pc(10,"Copy to Clipboard"),s.Ub(),s.Ub()),2&e&&(s.Db(1),s.Rc(" ",t.settings.title,"\n"),s.Db(2),s.mc("value",t.settings.copyText)("rows",t.rowCount))},directives:[c.h,c.e,c.c,u.a],styles:[".copy[_ngcontent-%COMP%]{min-width:480px}"],changeDetection:0}),a),v=n("5sb6"),k=n("eW6i"),O=n("5miH"),S=n("AytR"),x=n("kTA6"),C=n("icKS"),w=n("jhN1"),j=n("0njA"),P=["modalContents"],_=((o=function(){function e(t,n,i,a,o,r){h(this,e),this.dialogRef=t,this.data=n,this.sanitizer=i,this.renderer=a,this.pendoService=o,this.productService=r}return b(e,[{key:"onMessage",value:function(e){switch(e.data.action){case"close":this.dialogRef.close(e.data);break;case"track":this.pendoService.track(e.data.label,Object.assign(Object.assign({},e.data.metadata),{platform:this.productService.productType}))}}},{key:"ngOnInit",value:function(){this.title=this.data.title,this.url=this.data.url?this.sanitizer.bypassSecurityTrustResourceUrl(this.data.url):"",this.renderer.setStyle(this.modalContents.nativeElement,"background-color",this.data.backgroundColor||"#ffffff")}},{key:"closeDialog",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||o)(s.Pb(c.g),s.Pb(c.a),s.Pb(w.b),s.Pb(s.H),s.Pb(x.b),s.Pb(C.a))},o.\u0275cmp=s.Jb({type:o,selectors:[["app-iframe-dialog"]],viewQuery:function(e,t){var n;1&e&&s.Jc(P,!0),2&e&&s.xc(n=s.dc())&&(t.modalContents=n.first)},hostBindings:function(e,t){1&e&&s.cc("message",(function(e){return t.onMessage(e)}),!1,s.Bc)},decls:6,vars:3,consts:[["role","dialog","aria-modal","true",1,"modal"],[1,"modal__contents"],["modalContents",""],["cdkFocusInitial","",1,"modal__frame",3,"src"],["app-button","","buttonTheme","dark","buttonType","white","buttonShape","circle","type","button","title","Close",1,"modal__close",3,"click"],["icon","times","size","lg"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"div",1,2),s.Qb(3,"iframe",3),s.Ub(),s.Vb(4,"button",4),s.cc("click",(function(){return t.closeDialog()})),s.Qb(5,"app-icon",5),s.Ub(),s.Ub()),2&e&&(s.Eb("aria-label",t.title),s.Db(3),s.mc("src",t.url,s.Ec),s.Db(1),s.Eb("aria-label","Close"))},directives:[u.a,j.a],styles:[".modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;position:relative}.modal__close[_ngcontent-%COMP%]{margin-bottom:4px;align-self:flex-end;cursor:pointer;position:absolute;right:12px;top:12px}.modal__contents[_ngcontent-%COMP%]{flex-grow:1}.modal__frame[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0}),o),M=n("LvDl"),I=n("AcyG"),T=n("ECVi"),U=n("eKhQ"),L=n("bKUj"),z=n("2CE2"),A=n("wSC8"),F=n("7PKw"),D=n("XNiG"),E=n("HDdC"),N=n("lMGN"),R=n("f0Cb"),V=n("DuGl"),B=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},H=((r=function(){function e(t,n){h(this,e),this.dialogRef=t,this.data=n,this.sent=!1,this.sentResponses=[],this.errorResponses=[],this.ngUnsubscribe=new D.a,this.organization=n.organization}return b(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"handleInviteSent",value:function(e){var t=this;setTimeout((function(){t.inviteComplete()}),5e3)}},{key:"handleInviteCancelled",value:function(){this.inviteComplete()}},{key:"inviteComplete",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||r)(s.Pb(c.g),s.Pb(c.a))},r.\u0275cmp=s.Jb({type:r,selectors:[["app-team-invite-dialog"]],decls:10,vars:3,consts:[[1,"dialog"],["mat-dialog-title",""],[1,"flex","flex-row","justify-between"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Close",3,"click"],["icon","times","size","lg"],["mat-dialog-content","",1,"theme-light","p-6"],["sentText","Send invites","cancelText","Cancel",3,"organization","layout","inviteSent","inviteCancelled"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Vb(2,"div",2),s.Vb(3,"h1"),s.Pc(4,"Invite Members"),s.Ub(),s.Vb(5,"button",3),s.cc("click",(function(){return t.handleInviteCancelled()})),s.Qb(6,"app-icon",4),s.Ub(),s.Ub(),s.Ub(),s.Qb(7,"mat-divider"),s.Vb(8,"div",5),s.Vb(9,"app-team-invite",6),s.cc("inviteSent",(function(e){return t.handleInviteSent(e)}))("inviteCancelled",(function(){return t.handleInviteCancelled()})),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Db(5),s.Eb("aria-label","Close"),s.Db(4),s.mc("organization",t.organization)("layout","inline"))},directives:[c.h,u.a,j.a,R.a,c.e,V.a],styles:[".dialog[_ngcontent-%COMP%]{width:480px;min-height:320px}.dialog__input[_ngcontent-%COMP%]{resize:vertical}.dialog__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.dialog__actions--compact[_ngcontent-%COMP%]{justify-content:flex-end}@media (max-width:480px){.dialog[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0}),function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);o>3&&r&&Object.defineProperty(t,n,r)}([Object(I.e)(N.a.getInviting),B("design:type",E.a)],r.prototype,"inviting$",void 0),r),Q=n("3Pt+"),G=n("1G5W"),W=n("+DiI"),q=n("Es8U"),X=n("ZULQ"),Z=n("KI9D"),J=n("rYhz"),K=n("dNgK"),$=n("ofXK"),Y=n("Qu3c"),ee=n("zP1m"),te=n("XoCC"),ne=n("kmnG"),ie=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ae=["emailField"];function oe(e,t){1&e&&(s.Tb(0),s.Vb(1,"div",11),s.Vb(2,"app-message-toggle",12),s.Pc(3," Your email was successfully sent. "),s.Ub(),s.Ub(),s.Sb())}function re(e,t){if(1&e&&(s.Vb(0,"div",11),s.Vb(1,"app-message-toggle",20),s.Pc(2),s.Ub(),s.Ub()),2&e){var n=s.gc(2);s.Db(2),s.Rc(" ",n.errorMessage," ")}}function se(e,t){1&e&&s.Qb(0,"app-spinner",21)}function ce(e,t){1&e&&(s.Vb(0,"div",24),s.Vb(1,"mat-error"),s.Pc(2,"Please enter a valid email address."),s.Ub(),s.Ub())}function ue(e,t){if(1&e&&(s.Vb(0,"div",26),s.Vb(1,"mat-error"),s.Pc(2),s.Ub(),s.Ub()),2&e){var n=s.gc(2).$implicit,i=s.gc(2);s.Db(2),s.Sc(" Maximum email addresses excceeded, ",n.currentEmailCount," of ",i.maxEmailCount," max. ")}}function le(e,t){if(1&e&&s.Nc(0,ue,3,2,"div",25),2&e){var n=s.gc().$implicit;s.mc("ngIf",n.maxEmailsExceeded)}}function pe(e,t){if(1&e&&(s.Tb(0),s.Nc(1,ce,3,0,"div",22),s.Nc(2,le,1,1,"ng-template",null,23,s.Oc),s.Sb()),2&e){var n=t.$implicit,i=s.yc(3);s.Db(1),s.mc("ngIf",n.invalidEmails)("ngIfElse",i)}}function de(e,t){if(1&e){var n=s.Wb();s.Nc(0,re,3,1,"div",13),s.Vb(1,"form",14),s.cc("submit",(function(){s.Cc(n);var e=s.gc();return e.submitForm(e.config.shareLink)})),s.Vb(2,"textarea",15,16),s.Pc(4,"        "),s.Ub(),s.Vb(5,"button",17),s.hc(6,"async"),s.hc(7,"async"),s.Nc(8,se,1,0,"app-spinner",18),s.hc(9,"async"),s.Pc(10),s.hc(11,"async"),s.Ub(),s.Ub(),s.Nc(12,pe,4,2,"ng-container",19)}if(2&e){var i=s.gc();s.mc("ngIf",i.errorMessage),s.Db(1),s.mc("formGroup",i.form),s.Db(4),s.mc("disabled",!i.form.valid||s.ic(6,8,i.sharing$))("loading",s.ic(7,10,i.sharing$)),s.Eb("aria-label","Send Email"),s.Db(3),s.mc("ngIf",s.ic(9,12,i.sharing$)),s.Db(2),s.Rc(" ",s.ic(11,14,i.sharing$)?"Sending":"Send Email"," "),s.Db(2),s.mc("ngIf",i.form.get("emails").errors)}}function ge(e,t){if(1&e&&(s.Vb(0,"a",27),s.hc(1,"titlecase"),s.hc(2,"titlecase"),s.Qb(3,"img",6),s.Ub()),2&e){var n=t.$implicit;s.mc("href",n.url,s.Fc)("matTooltip","Share via "+s.ic(2,7,n.type)),s.Eb("aria-label","Share via "+s.ic(1,5,n.type))("data-test",n.type+"LinkButton"),s.Db(3),s.mc("src","/assets/images/social/"+n.type+"-share.svg",s.Fc)}}function he(e,t){if(1&e&&(s.Vb(0,"p",28),s.Pc(1),s.Ub()),2&e){var n=s.gc();s.Db(1),s.Rc(" ",n.config.description," ")}}var fe,be,me=((fe=function(){function e(t,n,i,a,o,r,s,c){h(this,e),this.store=t,this.actions=n,this.dialogRef=i,this.data=a,this.clipboardService=o,this.snackBar=r,this.formBuilder=s,this.changeRef=c,this.maxEmailCount=50,this.config={title:"Share"},this.emailSent=!1,this.errorMessage="",this.formError="",this.ngUnsubscribe=new D.a,this.config=Object.assign(Object.assign({},this.config),a),this.initForm()}return b(e,[{key:"ngOnInit",value:function(){this.initEmailListeners()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initForm",value:function(){this.form=this.formBuilder.group({emails:["",Q.C.required,Object(W.a)(this.maxEmailCount).bind(this)]})}},{key:"initEmailListeners",value:function(){var e=this;this.actions.pipe(Object(I.l)(Z.b),Object(G.a)(this.ngUnsubscribe)).subscribe((function(){e.emailSent=!1,e.errorMessage="",e.changeRef.markForCheck()})),this.actions.pipe(Object(I.l)(Z.d),Object(G.a)(this.ngUnsubscribe)).subscribe((function(){e.emailSent=!0,e.errorMessage="",setTimeout((function(){e.emailSent=!1,e.form.setValue({emails:""}),e.changeRef.markForCheck(),setTimeout((function(){return e.focus()}))}),5e3),e.changeRef.markForCheck()})),this.actions.pipe(Object(I.l)(Z.c),Object(G.a)(this.ngUnsubscribe)).subscribe((function(t){e.emailSent=!1,e.errorMessage=Object(q.a)(t.error)||"There was an error sending the email.",setTimeout((function(){return e.focus()})),e.changeRef.markForCheck()}))}},{key:"focus",value:function(){var e,t=null===(e=this.emailField)||void 0===e?void 0:e.nativeElement;t&&t.focus()}},{key:"submitForm",value:function(e){var t=e.type,n=e.title,i=e.relativeUrl,a=e.thumbUrl,o=X.a.parseEmails(this.form.value.emails);this.store.dispatch(new Z.b({share_type:t,share_title:n,share_thumbnail_path:a,share_link_path:i,share_emails:o}))}},{key:"handleCopyClick",value:function(e,t){var n=this;this.clipboardService.copyToClipboard(e,"url").pipe(Object(G.a)(this.ngUnsubscribe)).subscribe((function(e){n.snackBar.open("Link ".concat(e?"copied":"not copied","."))})),t.preventDefault()}},{key:"handleCloseClick",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||fe)(s.Pb(I.h),s.Pb(I.b),s.Pb(c.g),s.Pb(c.a),s.Pb(f.a),s.Pb(K.b),s.Pb(Q.f),s.Pb(s.i))},fe.\u0275cmp=s.Jb({type:fe,selectors:[["app-share-url-dialog"]],viewQuery:function(e,t){var n;1&e&&s.Vc(ae,!0),2&e&&s.xc(n=s.dc())&&(t.emailField=n.first)},decls:14,vars:9,consts:[["role","dialog","aria-modal","true","data-test","shareUrlDialog",1,"share-url-dialog"],[1,"share-url-dialog__title","mb-5"],[4,"ngIf","ngIfElse"],["emailFormTmp",""],[1,"share-url-dialog__social"],["target","_blank","aria-label","Copy Link","matTooltip","Copy Link","matTooltipPosition","below","data-test","copyLinkButton",1,"share-url-dialog__social-link",3,"href","click"],[3,"src"],["class","share-url-dialog__social-link","target","_blank","matTooltipPosition","below",3,"href","matTooltip",4,"ngFor","ngForOf"],["class","share-url-dialog__description mv-3",4,"ngIf"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Close",1,"share-url-dialog__close",3,"click"],["icon","times","size","lg"],[1,"mv-2"],["type","message"],["class","mv-2",4,"ngIf"],[1,"share-url-dialog__form",3,"formGroup","submit"],["rows","1","formControlName","emails","placeholder","Email, comma separated","data-test","emailEntryField",1,"share-url-dialog__input","input","theme-light"],["emailField",""],["type","submit","app-button","","buttonType","primary","title","'Send Email'","data-test","emailLinkButton",1,"share-url-dialog__submit",3,"disabled","loading"],["size","small","class","mr-2","render","inline",4,"ngIf"],[4,"ngIf"],["type","error"],["size","small","render","inline",1,"mr-2"],["class","mv-1",4,"ngIf","ngIfElse"],["maxEmailErrorTmp",""],[1,"mv-1"],["class","flex flex-column mv-1",4,"ngIf"],[1,"flex","flex-column","mv-1"],["target","_blank","matTooltipPosition","below",1,"share-url-dialog__social-link",3,"href","matTooltip"],[1,"share-url-dialog__description","mv-3"]],template:function(e,t){if(1&e&&(s.Vb(0,"div",0),s.Vb(1,"h2",1),s.Pc(2),s.Ub(),s.Tb(3),s.Nc(4,oe,4,0,"ng-container",2),s.Nc(5,de,13,16,"ng-template",null,3,s.Oc),s.Sb(),s.Vb(7,"div",4),s.Vb(8,"a",5),s.cc("click",(function(e){return t.handleCopyClick(null==t.config.shareLink?null:t.config.shareLink.fullUrl,e)})),s.Qb(9,"img",6),s.Ub(),s.Nc(10,ge,4,9,"a",7),s.Ub(),s.Nc(11,he,2,1,"p",8),s.Vb(12,"button",9),s.cc("click",(function(){return t.handleCloseClick()})),s.Qb(13,"app-icon",10),s.Ub(),s.Ub()),2&e){var n=s.yc(6);s.Eb("aria-label",t.config.title+" Dialog"),s.Db(2),s.Rc(" ",t.config.title," "),s.Db(2),s.mc("ngIf",t.emailSent)("ngIfElse",n),s.Db(4),s.mc("href",null==t.config.shareLink?null:t.config.shareLink.fullUrl,s.Fc),s.Db(1),s.mc("src","/assets/images/social/link-share.svg",s.Fc),s.Db(1),s.mc("ngForOf",null==t.config.shareLink?null:t.config.shareLink.social),s.Db(1),s.mc("ngIf",t.config.description),s.Db(1),s.Eb("aria-label","Close")}},directives:[$.p,Y.c,$.o,u.a,j.a,ee.a,Q.E,Q.s,Q.j,Q.c,Q.r,Q.i,te.a,ne.b],pipes:[$.b,$.x],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.share-url-dialog[_ngcontent-%COMP%]{position:relative;max-width:420px}.share-url-dialog__title[_ngcontent-%COMP%]{color:#1c2a3f;font-size:20px;letter-spacing:.5px;line-height:1.4em;font-weight:500}.share-url-dialog__description[_ngcontent-%COMP%]{color:#61779e;font-size:11px;letter-spacing:.275px;line-height:1.4em}.share-url-dialog__form[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:8px}.share-url-dialog__submit[_ngcontent-%COMP%]{flex:1 0 120px}.share-url-dialog__social[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:24px;margin-top:32px;margin-bottom:20px}.share-url-dialog__social-link[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:100%;cursor:pointer}.share-url-dialog__social-link[_ngcontent-%COMP%]:focus{outline:2px solid #2d72dc!important}.share-url-dialog__social-link[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.share-url-dialog__input[_ngcontent-%COMP%], .share-url-dialog__input[_ngcontent-%COMP%]:disabled{background-color:#f9fafd;color:#61779e;font-size:12px;letter-spacing:.3px;line-height:1.4em;opacity:1;resize:vertical;max-height:240px}.share-url-dialog__close[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-12px}@media (max-width:480px){.share-url-dialog__form[_ngcontent-%COMP%]{flex-wrap:wrap}}"],changeDetection:0}),function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);o>3&&r&&Object.defineProperty(t,n,r)}([Object(I.e)(J.a.getSharing),ie("design:type",E.a)],fe.prototype,"sharing$",void 0),fe),ye=n("tyNb"),ve={maxWidth:"100vw",width:"100vw",height:"100vh",panelClass:"full-modal"},ke=((be=function(){function e(t,n,i,a,o,r,s){h(this,e),this.dialog=t,this.engineService=n,this.router=i,this.store=a,this.pendoService=o,this.productService=r,this.organizationsService=s}return b(e,[{key:"isMobile",get:function(){return window.innerWidth<=959}},{key:"openClipboardDialog",value:function(e,t){var n=Object.assign({data:{id:v.a.ClipboardDialog,copyText:e}},t);return this.dialog.open(y,n)}},{key:"openShareDialog",value:function(e,t,n){return this.dialog.open(me,{id:v.a.ShareUrlDialog,disableClose:!0,data:{title:t,description:n,shareLink:e},maxWidth:"90vw"})}},{key:"openConfirmDialog",value:function(e){var t=Object.assign({id:v.a.ConfirmDialog},e);return this.dialog.open(g.a,t)}},{key:"openLimitDialog",value:function(){return this.closeAllDialogs(),this.dialog.open(d,{id:v.a.LimitDialog,width:"480px"})}},{key:"openUpgradeDialog",value:function(){var e,t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n&&this.closeAllDialogs();var i,a=this.store.selectSnapshot(T.a.getUserProfile),o=this.getContactProfileParams(a),r=a.premium_account_valid?a.premium_account_type:"free",s=Object(M.get)(a,"organizations[0].subscription.type","").toLowerCase(),c=this.store.selectSnapshot(U.a.isTrialExpired),u=Object(L.b)(a.account_settings);switch(Object(M.get)(u,"account_purpose.value","")){case z.a.Business:i="business.html";break;case z.a.Education:i="school.html";break;default:i="individual.html"}var d=Object.assign(Object.assign({},o),{accountType:r,subscription:s,expired:c}),g="".concat(S.a.native?"":(e={},l(e,A.a.Local,"https://localhost:1234"),l(e,A.a.QA,"https://pricing-qa.biodigital.com"),l(e,A.a.Staging,"https://pricing.biodigital.com"),l(e,A.a.Production,"https://pricing.biodigital.com"),e)[S.a.deploy],"/").concat(i,"?").concat(this.serializeQueryParams(d)),h=Object.assign(Object.assign({id:v.a.PricingDialog},ve),{data:{title:"Upgrade",url:g,backgroundColor:"#0B1220"}}),f=encodeURIComponent(this.router.url);return this.dialog.open(_,h).afterClosed().subscribe((function(e){if(e){var n=Object.assign({action:"",plan:""},e.metadata),i={business:["starter","premium","enterprise"],education:["class","institution"]},a="Individual";Object.entries(i).forEach((function(e){var t=p(e,2),i=t[0];t[1].indexOf(n.plan)&&(a=i)})),n.action&&t.pendoService.track("Pricing - ".concat(Object(M.capitalize)(n.action)," - ").concat(Object(M.capitalize)(n.plan)),{platform:t.productService.productType,page:a});var o="";switch(n.action){case"buy":if(S.a.native)return void t.engineService.fireEvent(O.a.NativeUpgrade,null);t.router.navigate(["/account/profile"],{queryParams:{section:"subscription",mode:"edit"}});break;case"contact":t.openContactDialog("pricing page");break;case"try":switch(!0){case i.business.includes(n.plan):o="/account/workflow/team/create?purpose=Business&returnTo="+f;break;case i.education.includes(n.plan):o="/account/workflow/team/create?purpose=Education&returnTo="+f;break;default:o="account/workflow"}t.router.navigateByUrl(o)}}else t.pendoService.track("Pricing - Exit")}))}},{key:"openContactDialog",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.store.selectSnapshot(U.a.getOrganization),i=Object(M.isNil)(n)?"":""+n.id,a=this.store.selectSnapshot(T.a.getUserProfile),o=this.getContactProfileParams(a),r=(l(e={},A.a.Local,"http://craft-sandbox.biodigital.local"),l(e,A.a.QA,"http://craft-sandbox.biodigital.local"),l(e,A.a.Staging,"https://www.biodigital.com"),l(e,A.a.Production,"https://www.biodigital.com"),e),s=S.a.native?r[A.a.Production]:r[S.a.deploy];if(S.a.native){var c=this.serializeQueryParams(Object.assign(Object.assign({},o),{organizationId:i,utm_source:"human-mobile",utm_campaign:t}));return window.open("".concat(s,"/contact?").concat(c),"_blank")}var u="".concat(s,"/headless/contact-us?").concat(this.serializeQueryParams(Object.assign(Object.assign({},o),{organizationId:i,utm_source:"human-web",utm_campaign:t}))),p=Object.assign(Object.assign({id:v.a.ContactDialog},ve),{data:{title:"Contact Us",url:u}});return this.dialog.open(_,p)}},{key:"openPremiumContentDialog",value:function(){var e=S.a.native||!this.isMobile;return this.openConfirmDialog({id:v.a.PremiumContentDialog,data:{titleText:"Premium Content",bodyText:e?"This is premium content. Upgrade to a Premium Plan for unlimited access.":"This is premium content. Visit us on desktop to upgrade to a premium plan.",confirmText:"Upgrade Now",confirmEnabled:e,cancelText:"OK",confirmColor:"warn"}})}},{key:"openAddUserDialog",value:function(){var e=this.store.selectSnapshot(U.a.getOrganization);this.dialog.open(H,{id:v.a.AddTeamModelDialog,disableClose:!1,data:{organization:e}})}},{key:"closeAllDialogs",value:function(){this.dialog.closeAll()}},{key:"getContactProfileParams",value:function(e){var t=e.first_name,n=e.last_name,i=e.email,a=Object(M.get)(e,"organizations[0].name",""),o=Object(M.get)(e,"organizations[0].group_attributes",[]),r=Object(L.b)(e.account_settings),s=Object(M.get)(r,"account_purpose.value",""),c=Object(M.get)(r,"account_field.value",""),u=Object(M.get)(r,"account_field.value",""),l=Object(M.get)(r,"account_role.value",""),p=this.organizationsService.getOrganizationAttribute(o,"account_settings","account_company_size"),d=this.organizationsService.getOrganizationAttribute(o,"account_settings","account_company_website");return{first_name:t,last_name:n,email:i,company:a,website:d?d.value:"",purpose:s,role:l,program_type:u,program_size:p?p.value:"",industry:s===z.a.Education?"Academia":c}}},{key:"serializeQueryParams",value:function(e){return Object.entries(e).map((function(e){var t=p(e,2),n=t[0],i=t[1],a="string"!=typeof i?JSON.stringify(i):i;return"".concat(n,"=").concat(encodeURIComponent(a))})).join("&")}}]),e}()).\u0275fac=function(e){return new(e||be)(s.Zb(c.b),s.Zb(k.a),s.Zb(ye.e),s.Zb(I.h),s.Zb(x.b),s.Zb(C.a),s.Zb(F.a))},be.\u0275prov=s.Lb({token:be,factory:be.\u0275fac,providedIn:"root"}),be)},L6yT:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Free="free",e.Premium="premium",e.Team="team",e}({})},Lnht:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("fXoL"),a=n("ofXK"),o=n("yIGu"),r=n("F+jD"),s=n("0njA");function c(e,t){if(1&e&&(i.Vb(0,"div",4),i.Pc(1),i.Ub()),2&e){var n=i.gc();i.Db(1),i.Rc(" ",n.label," ")}}function u(e,t){if(1&e&&(i.Vb(0,"app-list-item"),i.Vb(1,"div",5),i.Qb(2,"app-icon",6),i.Vb(3,"div"),i.Pc(4),i.Ub(),i.Ub(),i.Ub()),2&e){var n=t.$implicit;i.Db(4),i.Qc(n)}}var l=["Gain unlimited access to over 700 anatomy, disease and treatment models","Save unlimited 3D models","Embed models directly into your learning management system, website or application","Improve cross-team collaboration"],p=function(){var e=function(){function e(){h(this,e),this.label="Team plans are great for schools or businesses looking to create a collaborative\nexperience for their users. With a team plan, you get:",this.features=l}return b(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-team-features"]],inputs:{label:"label",features:"features"},decls:4,vars:2,consts:[[1,"feature","text-14"],["class","mb-4",4,"ngIf"],["listType","flat"],[4,"ngFor","ngForOf"],[1,"mb-4"],[1,"mv-1","flex","flex-row"],["icon","check",1,"mr-2"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Nc(1,c,2,1,"div",1),i.Vb(2,"app-list",2),i.Nc(3,u,5,1,"app-list-item",3),i.Ub(),i.Ub()),2&e&&(i.Db(1),i.mc("ngIf",t.label),i.Db(2),i.mc("ngForOf",t.features))},directives:[a.p,o.a,a.o,r.a,s.a],styles:[""],changeDetection:0}),e}()},Lwol:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var i=n("uDDk"),a=function e(){h(this,e)},o=function e(){h(this,e),this.type=i.a.Ticker,this.images=[],this.loopImage=!1}},Lyqc:function(e,t,n){"use strict";n.d(t,"s",(function(){return a})),n.d(t,"v",(function(){return o})),n.d(t,"u",(function(){return r})),n.d(t,"C",(function(){return s})),n.d(t,"D",(function(){return c})),n.d(t,"t",(function(){return u})),n.d(t,"m",(function(){return l})),n.d(t,"o",(function(){return p})),n.d(t,"n",(function(){return d})),n.d(t,"c",(function(){return g})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"z",(function(){return m})),n.d(t,"B",(function(){return y})),n.d(t,"A",(function(){return v})),n.d(t,"g",(function(){return k})),n.d(t,"y",(function(){return O})),n.d(t,"i",(function(){return S})),n.d(t,"I",(function(){return x})),n.d(t,"h",(function(){return C})),n.d(t,"G",(function(){return w})),n.d(t,"p",(function(){return j})),n.d(t,"r",(function(){return P})),n.d(t,"q",(function(){return _})),n.d(t,"J",(function(){return M})),n.d(t,"L",(function(){return I})),n.d(t,"K",(function(){return T})),n.d(t,"b",(function(){return U})),n.d(t,"a",(function(){return L})),n.d(t,"x",(function(){return z})),n.d(t,"w",(function(){return A})),n.d(t,"j",(function(){return F})),n.d(t,"l",(function(){return D})),n.d(t,"k",(function(){return E})),n.d(t,"f",(function(){return N})),n.d(t,"E",(function(){return R})),n.d(t,"F",(function(){return V})),n.d(t,"H",(function(){return B}));var i=n("INTG"),a=function(){var e=function e(t){h(this,e),this.query=t};return e.type="[Bookmarks] Load",e}(),o=function(){var e=function e(t){h(this,e),this.organizationId=t};return e.type="[Bookmarks] Load Organization Bookmarks",e}(),r=function(){var e=function e(t,n){h(this,e),this.organizationId=t,this.collectionId=n};return e.type="[Bookmarks] Load Collection Bookmarks",e}(),s=function(){var e=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h(this,e),this.id=t,this.type=n,this.preview=i};return e.type="[Bookmarks] Select Bookmark",e}(),c=function(){var e=function e(t){h(this,e),this.bookmark=t};return e.type="[Bookmarks] Select Bookmark Success",e}(),u=function(){var e=function e(t){h(this,e),this.result=t};return e.type="[Bookmarks] Load Success",e}(),l=function(){var e=function e(t){h(this,e),this.bookmarkId=t};return e.type="[Bookmarks] Delete Bookmark",e}(),p=function(){var e=function e(t){h(this,e),this.bookmarkId=t};return e.type="[Bookmarks] Bookmark Delete Success",e}(),d=function(){var e=function e(t,n){h(this,e),this.bookmarkId=t,this.message=n};return e.type="[Bookmarks] Bookmark Delete Fail",e}(),g=function(){var e=function e(t){h(this,e),this.bookmarkIds=t};return e.type="[Bookmarks] BulkDelete Bookmark",e}(),f=function(){var e=function e(t){h(this,e),this.bookmarkIds=t};return e.type="[Bookmarks] Bookmark BulkDelete Success",e}(),b=function(){var e=function e(t,n){h(this,e),this.bookmarkIds=t,this.message=n};return e.type="[Bookmarks] Bookmark BulkDelete Fail",e}(),m=function(){var e=function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];h(this,e),this.bookmarkEntry=t,this.inplace=n,this.includeIndex=i};return e.type="[Bookmarks] Save Bookmark",e}(),y=function(){var e=function e(t,n,i){h(this,e),this.bookmark=t,this.story=n,this.method=i};return e.type="[Bookmarks] Bookmark Saved",e}(),v=function(){var e=function e(t){h(this,e),this.bookmarkEntry=t};return e.type="[Bookmarks] Bookmark Save Failed",e}(),k=function(){var e=function e(){h(this,e)};return e.type="[Bookmarks] Cancel Save Bookmark",e}(),O=function(){var e=function e(){h(this,e)};return e.type="[Bookmarks] Reset",e}(),S=function(){var e=function e(){h(this,e)};return e.type="[Bookmarks] Clear Bookmarks",e}(),x=function(){var e=function e(t){h(this,e),this.sort=t};return e.type="[Bookmarks] Sort",e}(),C=function(){var e=function e(t,n){h(this,e),this.id=t,this.checked=n};return e.type="[Bookmarks] Check Bookmark",e}(),w=function(){var e=function e(t){h(this,e),this.ids=t};return e.type="[Bookmarks] Set Checked Bookmarks",e}(),j=function(){var e=function e(t,n,i,a,o,r,s,c,u){h(this,e),this.bookmarks=t,this.organizationId=n,this.collections=i,this.widgetURL=a,this.userLanguage=o,this.userApp=r,this.widgetOptions=s,this.offlineEnabled=c,this.productAccountId=u};return e.type="[Bookmarks] Export Bookmarks",e}(),P=function(){var e=function e(t){h(this,e),this.bookmarks=t};return e.type="[Bookmarks] Export Bookmarks Success",e}(),_=function(){var e=function e(t){h(this,e),this.bookmarks=t};return e.type="[Bookmarks] Export Bookmarks Error",e}(),M=function(){var e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;h(this,e),this.bookmark=t,this.addCollections=n,this.removeCollections=i};return e.type="[Bookmarks] Update Bookmark Collections",e}(),I=function(){var e=function e(t,n,i){h(this,e),this.bookmark=t,this.addCollections=n,this.removeCollections=i};return e.type="[Bookmarks] Update Bookmark Collections Success",e}(),T=function(){var e=function e(t,n,i){h(this,e),this.bookmark=t,this.addCollections=n,this.removeCollections=i};return e.type="[Bookmarks] Update Bookmark Collections Error",e}(),U=function(){var e=function e(t,n){h(this,e),this.bookmark=t,this.collections=n};return e.type="[Bookmarks] Add Bookmark Collections Success",e}(),L=function(){var e=function e(t,n){h(this,e),this.bookmark=t,this.collections=n};return e.type="[Bookmarks] Add Bookmark Collections Error",e}(),z=function(){var e=function e(t,n){h(this,e),this.bookmark=t,this.collections=n};return e.type="[Bookmarks] Remove Bookmark Collections Success",e}(),A=function(){var e=function e(t,n){h(this,e),this.bookmark=t,this.collections=n};return e.type="[Bookmarks] Remove Bookmark Collections Error",e}(),F=function(){var e=function e(t,n,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.b.lang,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;h(this,e),this.id=t,this.title=n,this.type=a,this.lang=o,this.groupAccess=r,this.collections=s};return e.type="[Bookmarks] Copy Bookmark",e}(),D=function(){var e=function e(t){h(this,e),this.newBookmark=t};return e.type="[Bookmarks] Copy Bookmark Success",e}(),E=function(){var e=function e(t,n){h(this,e),this.id=t,this.error=n};return e.type="[Bookmarks] Copy Bookmark Failure",e}(),N=function(){var e=function e(){h(this,e)};return e.type="[Bookmarks] Cancel Copy Bookmark",e}(),R=function(){var e=function e(t){h(this,e),this.title=t};return e.type="[Bookmarks] Set Bookmark Text",e}(),V=function(){var e=function e(t){h(this,e),this.viewMode=t};return e.type="[Bookmarks] Set Bookmark View Mode",e}(),B=function(){var e=function e(t){h(this,e),this.category=t};return e.type="[Bookmarks] Set Selected Category",e}()},MCQd:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("LvDl");function a(e){return"?"+Object.entries(e).filter((function(e){var t=p(e,2),n=(t[0],t[1]);return!Object(i.isNil)(n)})).map((function(e){var t=p(e,2),n=t[0],i=t[1];return"".concat(n,"=").concat(encodeURIComponent(i))})).join("&")}},MKYd:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n("tk/3"),a=n("ZJ6O"),o=n("LRne"),r=n("lJxs"),s=n("JIr8"),c=n("SxJt"),u=n("zrlG"),l=n("ZR5G"),p=n("fXoL"),d="cdb/content",g="cdb/copy/content",f={headers:new i.d({"Content-Type":"application/json; charset=utf-8"})},m=["production","client","preview","internal_content","public_preview","demos","social","exports","real_data"],y=function(){var e=function(){function e(t,n){h(this,e),this.http=t,this.serializeModuleService=n}return b(e,[{key:"saveModule",value:function(e,t){t=this.formatModulePath(t);var n=[d,"modules",t].join("/"),i=this.JSONStringify(e);return this.http.put(n,i,f).pipe(Object(r.a)((function(){return c.a.Success})),Object(s.a)((function(e){var t=e.status;return t>=200&&t<=202?Object(o.a)(c.a.Success):Object(o.a)(c.a.Fail)})))}},{key:"mergeModule",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"exception";return this.http.post("/cdb/merge/modules",{loft:e+".json",bridge:t+".json",merge_option:n})}},{key:"copyState",value:function(e,t){var n=[g,"states",t].join("/"),a={headers:new i.d({"Content-Type":"application/json; charset=utf-8","source-state":e})};return this.http.put(n,{},a)}},{key:"listContents",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.generateModulePath(e,t||"",n||"");return this.http.get("/cdb/ls/content/modules/"+a).pipe(Object(r.a)((function(e){return i?e.contents.map((function(e){var t=e.name.replace("/content/modules/","").replace(".json",""),n=e.name.split("/").pop().replace("/content/modules","").replace(".json",""),i=new u.a;return i.id=t,i.title=n,i.type=l.a.Module,i})):e.contents})))}},{key:"getState",value:function(e){return this.http.get("/cdb/ls/content/states/"+e).pipe(Object(r.a)((function(e){return e.contents})))}},{key:"getClients",value:function(){return this.http.get("/search/client").pipe(Object(r.a)((function(e){return e.clients})))}},{key:"getUsedStates",value:function(){var e=this,t={};return Object.values(Human.scene.objects).reduce((function(n,i){return["transformId","morphId","geometryId","materialId"].forEach((function(n){var a=e.getPropertyState(i,n);a.length&&(t[a]=!0)})),i.hasOwnProperty("renderables")&&["morphId","geometryId","materialId"].forEach((function(n){i.renderables.forEach((function(i){var a=e.getPropertyState(i,n);a.length&&(t[a]=!0)}))})),n}),{}),Object.keys(t)}},{key:"parseScenePath",value:function(e){var t=e.split("/");return 1===t.length?null:{fullPath:"https://qa.biodigital.com/content/modules/"+e,relativePath:t.slice(0,t.length-1).join("/"),sceneName:t[t.length-1]}}},{key:"formatModulePath",value:function(e){var t=e;return/\.json$/.test(e)||(t+=".json"),t}},{key:"getPrimaryCategories",value:function(){return Object(o.a)(m)}},{key:"getSecondaryCategories",value:function(e){switch(e){case"production":return Object(o.a)(["maleAdult","femaleAdult"]);case"client":return this.getClients();default:return Object(o.a)([])}}},{key:"generateSaveModule",value:function(e){var t=this.parseScenePath(e),n=t.relativePath.split("/");return{id:e,name:t.sceneName,primaryCategory:n[0]||"",secondaryCategory:n[1]||""}}},{key:"generateModulePath",value:function(e,t,n){var i=[];return e.length&&i.push(e),t.length&&i.push(t),n.length&&(n.indexOf(".json")<0&&(n+=".json"),i.push(n)),i.join("/")}},{key:"getPropertyState",value:function(e,t){return null!=e[t]?e[t].split("/")[0]:""}},{key:"JSONStringify",value:function(e){return JSON.stringify(e).replace(/[\u007f-\uffff]/g,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Zb(i.b),p.Zb(a.a))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Mgbk:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;h(this,e),this.query=t,this.sortBy=n,this.pageSize=i,this.offset=a}},Mh2x:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var i,a=n("AcyG"),o=n("CAXj"),r=n("VJvM"),s=n("3zw+"),c=n("q8pu"),l=n("11Ye"),d=n("LvDl"),g=n("ve2m"),f=n("t15c"),m=n("qz+p"),y=n("eW6i"),v=n("JaAu"),k=n("5+WD"),O=n("gm/O"),S=n("WUhe"),x=n("zKvh"),C=n("uDDk"),w=n("h8op"),j=n("Vrox"),P=n("WFQG"),_=n("fXoL"),M=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},I=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},T={loading:!1,chapters:[],chaptersViewed:[],selectedChapter:null,isChapterAnimated:!1,thumbnails:new Map,patches:[],inversePatches:[]},U=function(){var e=i=function(){function e(t,n,i,a){h(this,e),this.store=t,this.chapterService=n,this.animationService=i,this.engineService=a}return b(e,[{key:"setChapters",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.chapters=t.chapters})))}},{key:"SetChapterCameraAction",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.chapters.find((function(e){return e.id===t.chapterId})).camera.action=t.cameraAction})))}},{key:"setChapterUI",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.chapters.find((function(e){return e.id===t.chapterId})).ui=t.ui})))}},{key:"setChapterInfo",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.chapters.find((function(e){return e.id===t.chapterId})).info=t.info})))}},{key:"setChapterLegend",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.chapters.find((function(e){return e.id===t.chapterId})).legend=t.legend})))}},{key:"addToChapterLegend",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.chapters.find((function(e){return e.id===t.chapterId})).legend.push(t.legend)})))}},{key:"ReorderChapters",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){Object(k.e)(e.chapters,t.previousIndex,t.currentIndex)})));var n=e.getState().chapters.map((function(e){return e.id}));e.dispatch(new S.a.ReorderQuestions(n))}},{key:"SetChapterReadyState",value:function(e,t){var n=immer.produce(e.getState(),(function(e){if(t.chapterId){var n=e.chapters.find((function(e){return e.id===t.chapterId}));n&&(n.readyState=Object.assign(Object.assign({},n.readyState),t.readyState))}}));e.patchState(n)}},{key:"SetChapterPostProcessing",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){var n=e.chapters.find((function(e){return e.id===t.chapterId})),i=n.properties||{};n.customData=Object.assign(Object.assign({},n.customData?n.customData:{}),{postprocess:t.effects}),n.properties=Object.assign(Object.assign({},i),t.properties)})))}},{key:"SetChapterTransitions",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){var n=e.chapters.find((function(e){return e.id===t.chapterId}));n.transitions=n.transitions||{},n.transitions[t.key]=t.transition})))}},{key:"setChapterProperties",value:function(e,t){var n=t.chapterIds,i=t.properties;e.patchState(immer.produce(e.getState(),(function(e){e.chapters.filter((function(e){return n.includes(e.id)})).forEach((function(e){var t,n=null!==(t=e.properties)&&void 0!==t?t:{};e.properties=Object.assign(Object.assign({},n),i)}))})))}},{key:"removeChapterProperties",value:function(e,t){var n=t.chapterIds,i=t.properties;e.patchState(immer.produce(e.getState(),(function(e){e.chapters.filter((function(e){return n.includes(e.id)})).forEach((function(e){(null==e?void 0:e.properties)&&i.forEach((function(t){delete e.properties[t]}))}))})))}},{key:"SetChapterTransparencyMode",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.chapters.find((function(e){return e.id===t.chapterId})).transparencyMode=t.transparencyMode})))}},{key:"applyChapterPatch",value:function(e,t){var n=immer.applyPatches(e.getState(),t.patches);e.patchState(immer.produce(n,(function(e){e.patches=[],e.inversePatches=[]})))}},{key:"setChapterClippingPlane",value:function(e,t){var n=this,i=p(immer.produceWithPatches(e.getState(),(function(e){var i=e.chapters.find((function(e){return e.id===t.chapterId}));i.clippingPlanes.clips=t.clips,i.clippingPlanes.enabled=t.enabled,i.clippingPlanes.boundary=i.clippingPlanes.boundary||JSON.parse(JSON.stringify(n.engineService.getSceneBoundary()))})),3),a=i[0],o=i[1],s=i[2],c=immer.produce(a,(function(e){var t,n;(t=e.patches).push.apply(t,u(o)),(n=e.inversePatches).push.apply(n,u(s))}));t.record&&e.dispatch(new v.a.SavePatches([{forward:c.patches,inverse:u(c.inversePatches).reverse(),patchAction:r.c}])),e.patchState(t.record?immer.produce(c,(function(e){e.patches=[],e.inversePatches=[]})):c)}},{key:"setChapterBackground",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.chapters.find((function(e){return e.id===t.chapterId})).background=t.background})))}},{key:"setAllChaptersBackground",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.chapters.forEach((function(e){e.background=t.background}))})))}},{key:"resetSelectedChapterBackground",value:function(e,t){var n=e.getState().selectedChapter;this.store.dispatch(new r.s(n,g.a))}},{key:"setSelectedChapterBackground",value:function(e,t){var n=t.background,i=e.getState().selectedChapter;this.store.dispatch(new r.s(i,n))}},{key:"selectChapter",value:function(e,t){if(t.chapter){this.store.dispatch([new O.a.UpdateNodesChecked(!1),new O.a.UpdateNodeSelected]);var n=this.animationService.isChapterAnimated(t.chapter);this.store.dispatch(new l.P(!!t.chapter));var i=immer.produce(e.getState(),(function(e){e.chaptersViewed.some((function(e){return t.chapter.id===e}))||e.chaptersViewed.push(t.chapter.id),e.selectedChapter=t.chapter?t.chapter.id:null,e.isChapterAnimated=n}));e.patchState(i)}}},{key:"selectChapterById",value:function(e,t){var n=t.chapterId;this.store.dispatch(new l.P(!0)),e.patchState({selectedChapter:n})}},{key:"duplicateChapter",value:function(e,t){var n=this,a=t.chapter,o=this.chapterService.copyChapter(a,t.chapterId),r=e.getState().chapters.length,s=this.store.selectSnapshot(i.getSelectedChapterBackground),u=this.store.selectSnapshot(j.a.getRegisteredThumbnails),l=u.get(a.id);a.thumbnails?o.thumbnails=Object(d.cloneDeep)(a.thumbnails):Object(d.isNil)(l)?e.dispatch(new w.b(o.id,s,x.a.JPEG,92,f.a.medium,"square")):u.set(o.id,l);var p=this.chapterService.addChapterToEngine(Object(d.cloneDeep)(o),r);o.timelineMap=Object.values(p.maps).map((function(e){return n.animationService.fromEngineTimelineMap(e)})),e.patchState(immer.produce(e.getState(),(function(e){e.chapters.push(o)}))),e.dispatch(new S.a.CopyQuestions(a.id,o.id)),e.dispatch(new c.d(a,o))}},{key:"nextChapter",value:function(e,t){var n=e.getState().chapters,i=this.chapterService.getCurrentChapterId(),a=0;(a=n.findIndex((function(e){return e.id===i})))<n.length-1&&a++,e.dispatch(new r.p(n[a]))}},{key:"previousChapter",value:function(e,t){var n=e.getState().chapters,i=this.chapterService.getCurrentChapterId(),a=0;(a=n.findIndex((function(e){return e.id===i})))>0&&a--,e.dispatch(new r.p(n[a]))}},{key:"lastChapter",value:function(e,t){var n=e.getState().chapters;e.dispatch(new r.p(n[n.length-1]))}},{key:"firstChapter",value:function(e,t){var n=e.getState().chapters;e.dispatch(new r.p(n[0]))}},{key:"removeChapter",value:function(e,t){var n=e.getState(),i=n.chapters,a=n.selectedChapter;if(1!==i.length){this.chapterService.removeChapterFromEngine(t.chapter);var o=i.findIndex((function(e){return e.id===t.chapter.id}));if(e.patchState(immer.produce(e.getState(),(function(e){e.chapters.splice(o,1)}))),t.chapter.id===a){var s=e.getState().chapters,u=Math.min(o,s.length-1);e.dispatch(new r.p(s[u]))}e.dispatch(new c.g(t.chapter))}}},{key:"resetStoryChaptersState",value:function(e,t){e.setState(T)}},{key:"RecordCamera",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){var n=e.chapters.find((function(e){return e.id===t.chapterId}));n.camera.location=t.camera,t.rotationCenter&&(n.camera.rotationCenter=t.rotationCenter)})))}},{key:"setChapterCurrentLayersIndexPosition",value:function(e,t){var n=p(immer.produceWithPatches(e.getState(),(function(e){var n=e.chapters.find((function(e){return e.id===t.chapterId})).visibilityLayers.current;n.index=t.index,n.position=t.position})),3),i=n[0],a=n[1],o=n[2],s=immer.produce(i,(function(e){var t,n;(t=e.patches).push.apply(t,u(a)),(n=e.inversePatches).push.apply(n,u(o))}));e.patchState(s),t.record&&e.dispatch(new v.a.SavePatches([{forward:s.patches,inverse:s.inversePatches,patchAction:r.c}]))}},{key:"setChapterMedia",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.chapters.find((function(e){return e.id===t.chapterId})).media=t.media})))}},{key:"setChapterContentBlocks",value:function(e,t){t.contentBlocks=[].concat(u(t.contentBlocks.filter((function(e){return e.type===C.a.Ticker}))),u(t.contentBlocks.filter((function(e){return e.type!==C.a.Ticker})))),e.patchState(immer.produce(e.getState(),(function(e){e.chapters.find((function(e){return e.id===t.chapterId})).contentBlocks=t.contentBlocks})))}},{key:"addChapterTimelineMap",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){var n=e.chapters.find((function(e){return e.id===t.chapterId}));n.timelineMap.push.apply(n.timelineMap,t.timelineMaps)})))}},{key:"updateChapterTimelineMap",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){var n=e.chapters.find((function(e){return e.id===t.chapterId}));t.updates.forEach((function(e){var t=n.timelineMap.find((function(t){return t.id===e.id}));Object(d.merge)(t,e)}))})))}},{key:"removeFromChapterTimelineMap",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){var n=e.chapters.find((function(e){return e.id===t.chapterId}));t.timelineMapIds.forEach((function(e){var t=n.timelineMap.findIndex((function(t){return t.id===e}));n.timelineMap.splice(t,1)}))})))}},{key:"SetChapterLights",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.chapters.find((function(e){return e.id===t.chapterId})).lights.libraries=[t.lights]}))),this.engineService.setBranchLights(t.chapterId,t.lights)}}],[{key:"getStoryChapters",value:function(e){return e.chapters}},{key:"getChaptersViewed",value:function(e){return e.chaptersViewed}},{key:"getChapter",value:function(e){return Object(a.i)([i],(function(t){return t.chapters.find((function(t){return t.id===e}))}))}},{key:"getSelectedChapterId",value:function(e){return e.selectedChapter}},{key:"getSelectedChapter",value:function(e){return e.chapters.find((function(t){return t.id===e.selectedChapter}))||null}},{key:"getNextChapter",value:function(e){var t=1+i.getSelectedChapterIndex(e);return e.chapters[t]}},{key:"getPreviousChapter",value:function(e){var t=-1+i.getSelectedChapterIndex(e);return e.chapters[t]}},{key:"getSelectedChapterIndex",value:function(e){return e.chapters.findIndex((function(t){return t.id===e.selectedChapter}))}},{key:"getSelectedChapterTitle",value:function(e){return e.chapters.find((function(t){return t.id===e.selectedChapter})).info.displayName}},{key:"getChapterCount",value:function(e){return e.chapters.length}},{key:"getRegisteredThumbnails",value:function(e){return e.thumbnails}},{key:"getIsChapterAnimated",value:function(e){return e.isChapterAnimated}},{key:"getSelectedChapterReadyState",value:function(e){var t=e.chapters,n=e.selectedChapter,a=i.findChapter(t,n);return Object(d.get)(a,"readyState")}},{key:"getChaptersLoaded",value:function(e){return{count:e.chapters.length,modelChapters:e.chapters.filter((function(e){return e.readyState.model})),animationChapters:e.chapters.filter((function(e){return e.readyState.animation}))}}},{key:"getAllChaptersModelsReady",value:function(e){return e.chapters.length>0&&e.chapters.every((function(e){return e.readyState.model}))}},{key:"getSelectedChapterModelReady",value:function(e){var t=i.getSelectedChapterReadyState(e);return!Object(d.isNil)(t)&&t.model}},{key:"getAllChaptersAnimationsReady",value:function(e){return e.chapters.length>0&&e.chapters.every((function(e){return e.readyState.animation}))}},{key:"getSelectedChapterBackground",value:function(e){var t=e.chapters,n=e.selectedChapter,a=i.findChapter(t,n);return Object(d.get)(a,"background")||g.a}},{key:"getAllChaptersBackground",value:function(e){return e.chapters.map((function(e){return Object(d.get)(e,"background")}))}},{key:"getSelectedChapterAllAudio",value:function(e){var t=e.chapters.find((function(t){return t.id===e.selectedChapter}));return t&&t.media?Object.values(t.media).filter((function(e){return"audio"===e.data.streamType})):[]}},{key:"getSelectedChapterAudio",value:function(e,t){return this.getSelectedChapterAllAudio(e).find((function(e){return e.data.lang===t.lang}))}},{key:"getSelectedChapterLegend",value:function(e){var t=e.chapters,n=e.selectedChapter,a=i.findChapter(t,n);return Object(d.get)(a,"legend")||[]}},{key:"getSelectedChapterClippingPlanes",value:function(e){var t=e.chapters,n=e.selectedChapter,a=i.findChapter(t,n);return Object(d.get)(a,"clippingPlanes")}},{key:"getChapterCamera",value:function(e){var t=e.chapters,n=e.selectedChapter,a=i.findChapter(t,n);return Object(d.get)(a,"camera.location")}},{key:"findChapter",value:function(e,t){return e.find((function(e){return e.id===t}))}},{key:"getAllChaptersCurrentLayers",value:function(e){return e.chapters.map((function(e){return Object(d.get)(e,"visibilityLayers.current.layers",[])}))}},{key:"getSelectedChapterSrcLayers",value:function(e){var t=e.chapters,n=e.selectedChapter,a=i.findChapter(t,n);return Object(d.get)(a,"visibilityLayers.src.layers",[])}},{key:"getSelectedChapterCurrentLayers",value:function(e){var t=e.chapters,n=e.selectedChapter,a=i.findChapter(t,n);return Object(d.get)(a,"visibilityLayers.current.layers",[])}},{key:"getSelectedChapterCurrentLayersIndex",value:function(e){var t=e.chapters,n=e.selectedChapter,a=i.findChapter(t,n);return Object(d.get)(a,"visibilityLayers.current.index")}},{key:"getSelectedChapterCurrentLayersPosition",value:function(e){var t=e.chapters,n=e.selectedChapter,a=i.findChapter(t,n);return Object(d.get)(a,"visibilityLayers.current.position")}},{key:"getSelectedChapterContentBlocks",value:function(e){var t=e.chapters,n=e.selectedChapter,a=i.findChapter(t,n);return Object(d.get)(a,"contentBlocks",[])}},{key:"getSelectedChapterTimelineMap",value:function(e){var t=e.chapters,n=e.selectedChapter,a=i.findChapter(t,n);return Object(d.get)(a,"timelineMap")||[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(_.Zb(a.h),_.Zb(s.a),_.Zb(m.a),_.Zb(y.a))},e.\u0275prov=_.Lb({token:e,factory:e.\u0275fac}),M([Object(a.a)(r.H),I("design:type",Function),I("design:paramtypes",[Object,r.H]),I("design:returntype",void 0)],e.prototype,"setChapters",null),M([Object(a.a)(r.t),I("design:type",Function),I("design:paramtypes",[Object,r.t]),I("design:returntype",void 0)],e.prototype,"SetChapterCameraAction",null),M([Object(a.a)(r.G),I("design:type",Function),I("design:paramtypes",[Object,r.G]),I("design:returntype",void 0)],e.prototype,"setChapterUI",null),M([Object(a.a)(r.x),I("design:type",Function),I("design:paramtypes",[Object,r.x]),I("design:returntype",void 0)],e.prototype,"setChapterInfo",null),M([Object(a.a)(r.y),I("design:type",Function),I("design:paramtypes",[Object,r.y]),I("design:returntype",void 0)],e.prototype,"setChapterLegend",null),M([Object(a.a)(r.a),I("design:type",Function),I("design:paramtypes",[Object,r.a]),I("design:returntype",void 0)],e.prototype,"addToChapterLegend",null),M([Object(a.a)(r.m),I("design:type",Function),I("design:paramtypes",[Object,r.m]),I("design:returntype",void 0)],e.prototype,"ReorderChapters",null),M([Object(a.a)(r.D),I("design:type",Function),I("design:paramtypes",[Object,r.D]),I("design:returntype",void 0)],e.prototype,"SetChapterReadyState",null),M([Object(a.a)(r.B),I("design:type",Function),I("design:paramtypes",[Object,r.B]),I("design:returntype",void 0)],e.prototype,"SetChapterPostProcessing",null),M([Object(a.a)(r.E),I("design:type",Function),I("design:paramtypes",[Object,r.E]),I("design:returntype",void 0)],e.prototype,"SetChapterTransitions",null),M([Object(a.a)(r.C),I("design:type",Function),I("design:paramtypes",[Object,r.C]),I("design:returntype",void 0)],e.prototype,"setChapterProperties",null),M([Object(a.a)(r.k),I("design:type",Function),I("design:paramtypes",[Object,r.k]),I("design:returntype",void 0)],e.prototype,"removeChapterProperties",null),M([Object(a.a)(r.F),I("design:type",Function),I("design:paramtypes",[Object,r.F]),I("design:returntype",void 0)],e.prototype,"SetChapterTransparencyMode",null),M([Object(a.a)(r.c),I("design:type",Function),I("design:paramtypes",[Object,r.c]),I("design:returntype",void 0)],e.prototype,"applyChapterPatch",null),M([Object(a.a)(r.u),I("design:type",Function),I("design:paramtypes",[Object,r.u]),I("design:returntype",void 0)],e.prototype,"setChapterClippingPlane",null),M([Object(a.a)(r.s),I("design:type",Function),I("design:paramtypes",[Object,r.s]),I("design:returntype",void 0)],e.prototype,"setChapterBackground",null),M([Object(a.a)(r.r),I("design:type",Function),I("design:paramtypes",[Object,r.r]),I("design:returntype",void 0)],e.prototype,"setAllChaptersBackground",null),M([Object(a.a)(r.n),I("design:type",Function),I("design:paramtypes",[Object,r.n]),I("design:returntype",void 0)],e.prototype,"resetSelectedChapterBackground",null),M([Object(a.a)(r.I),I("design:type",Function),I("design:paramtypes",[Object,Object]),I("design:returntype",void 0)],e.prototype,"setSelectedChapterBackground",null),M([Object(a.a)(r.p),I("design:type",Function),I("design:paramtypes",[Object,r.p]),I("design:returntype",void 0)],e.prototype,"selectChapter",null),M([Object(a.a)(r.q),I("design:type",Function),I("design:paramtypes",[Object,Object]),I("design:returntype",void 0)],e.prototype,"selectChapterById",null),M([Object(a.a)(r.d),I("design:type",Function),I("design:paramtypes",[Object,r.d]),I("design:returntype",void 0)],e.prototype,"duplicateChapter",null),M([Object(a.a)(r.g),I("design:type",Function),I("design:paramtypes",[Object,r.g]),I("design:returntype",void 0)],e.prototype,"nextChapter",null),M([Object(a.a)(r.h),I("design:type",Function),I("design:paramtypes",[Object,r.h]),I("design:returntype",void 0)],e.prototype,"previousChapter",null),M([Object(a.a)(r.f),I("design:type",Function),I("design:paramtypes",[Object,r.f]),I("design:returntype",void 0)],e.prototype,"lastChapter",null),M([Object(a.a)(r.e),I("design:type",Function),I("design:paramtypes",[Object,r.f]),I("design:returntype",void 0)],e.prototype,"firstChapter",null),M([Object(a.a)(r.j),I("design:type",Function),I("design:paramtypes",[Object,r.j]),I("design:returntype",void 0)],e.prototype,"removeChapter",null),M([Object(a.a)(r.o),I("design:type",Function),I("design:paramtypes",[Object,r.o]),I("design:returntype",void 0)],e.prototype,"resetStoryChaptersState",null),M([Object(a.a)(r.i),I("design:type",Function),I("design:paramtypes",[Object,r.i]),I("design:returntype",void 0)],e.prototype,"RecordCamera",null),M([Object(a.a)(r.w),I("design:type",Function),I("design:paramtypes",[Object,r.w]),I("design:returntype",void 0)],e.prototype,"setChapterCurrentLayersIndexPosition",null),M([Object(a.a)(r.A),I("design:type",Function),I("design:paramtypes",[Object,r.A]),I("design:returntype",void 0)],e.prototype,"setChapterMedia",null),M([Object(a.a)(r.v),I("design:type",Function),I("design:paramtypes",[Object,r.v]),I("design:returntype",void 0)],e.prototype,"setChapterContentBlocks",null),M([Object(a.a)(r.b),I("design:type",Function),I("design:paramtypes",[Object,r.b]),I("design:returntype",void 0)],e.prototype,"addChapterTimelineMap",null),M([Object(a.a)(r.J),I("design:type",Function),I("design:paramtypes",[Object,r.J]),I("design:returntype",void 0)],e.prototype,"updateChapterTimelineMap",null),M([Object(a.a)(r.l),I("design:type",Function),I("design:paramtypes",[Object,r.l]),I("design:returntype",void 0)],e.prototype,"removeFromChapterTimelineMap",null),M([Object(a.a)(r.z),I("design:type",Function),I("design:paramtypes",[Object,r.z]),I("design:returntype",void 0)],e.prototype,"SetChapterLights",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getStoryChapters",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getChaptersViewed",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getSelectedChapterId",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getSelectedChapter",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getNextChapter",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getPreviousChapter",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getSelectedChapterIndex",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getSelectedChapterTitle",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getChapterCount",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getRegisteredThumbnails",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getIsChapterAnimated",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getSelectedChapterReadyState",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getChaptersLoaded",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getAllChaptersModelsReady",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getSelectedChapterModelReady",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getAllChaptersAnimationsReady",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getSelectedChapterBackground",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getAllChaptersBackground",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getSelectedChapterAllAudio",null),M([Object(a.f)([P.a]),I("design:type",Function),I("design:paramtypes",[o.a,P.b]),I("design:returntype",void 0)],e,"getSelectedChapterAudio",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getSelectedChapterLegend",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getSelectedChapterClippingPlanes",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",void 0)],e,"getChapterCamera",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",Array)],e,"getAllChaptersCurrentLayers",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",Array)],e,"getSelectedChapterSrcLayers",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",Array)],e,"getSelectedChapterCurrentLayers",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",Number)],e,"getSelectedChapterCurrentLayersIndex",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",Number)],e,"getSelectedChapterCurrentLayersPosition",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",Array)],e,"getSelectedChapterContentBlocks",null),M([Object(a.f)(),I("design:type",Function),I("design:paramtypes",[o.a]),I("design:returntype",Array)],e,"getSelectedChapterTimelineMap",null),e=i=M([Object(a.g)({name:"storyChapters",defaults:T})],e)}()},MuXT:function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var i=n("HDdC"),a=n("cp0P"),o=n("b36G"),r=n("5+tZ"),s=n("lJxs"),c=n("JIr8"),l=n("YQYg"),d=n("3zw+"),g=function e(){h(this,e)},f=n("ZR5G"),m=n("LvDl"),y=n("eW6i");function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function(){return new Promise((function(t){e.apply(void 0,n.concat([function(){t()}]))}))}}var k,O,S=n("7b4e"),x=n("V7wM"),C=n("AytR"),w=(n("vCxQ"),n("uDDk")),j=n("fXoL"),P=((k=function(){function e(){h(this,e)}return b(e,[{key:"getOnlyText",value:function(e){return e.map((function(e){switch(e.type){case w.a.Markdown:return e.markdown}})).join("")}}]),e}()).\u0275fac=function(e){return new(e||k)},k.\u0275prov=j.Lb({token:k,factory:k.\u0275fac,providedIn:"root"}),k),_=n("3fyd"),M=n("tk/3"),I=["reflections","lights"],T=["material","geometry","transform"],U=["tweens","morph"],L=((O=function(){function e(t,n,i,a){h(this,e),this.http=t,this.engineService=n,this.chapterService=i,this.contentBlocksService=a}return b(e,[{key:"getShownObjectsFromChapter",value:function(e){var t=[];return Object.entries(e.synchronization).forEach((function(e){var n=p(e,2),i=n[0];n[1].shown&&t.push(i)})),t}},{key:"getChapterLoadChunks",value:function(e,t,n){var i=this.getShownObjectsFromChapter(t),a=new l.a;return a.activate=!1,a.chapterId=t.id,a.objects=i,a.storyId=e,a.assetTypes=[].concat(T,U,I),a.readyState={model:!0,animation:!0},[a]}},{key:"getOnDemandLoadChunks",value:function(e,t){var n=this,i=[];return Human.timeline.rootTimelines[e]._chapters.forEach((function(a){var o=n.getChapterLoadChunks(e,a,t);i=a.id===t.targetChapterId?[].concat(u(o),u(i)):[].concat(u(i),u(o))})),i}},{key:"getChapterIndex",value:function(e,t){return Human.timeline.rootTimelines[e]?Human.timeline.rootTimelines[e]._chapters.findIndex((function(e){return e.id===t})):-1}},{key:"getStory",value:function(e,t){var n,i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",o=t===f.a.Bookmark?this.getBookmark(e):this.getContent(e);return"en"===a?o:o.pipe(Object(r.a)((function(o){return n=o,i.getStoryTranslation(e,t,a)}))).pipe(Object(s.a)((function(e){return i.translateStory(n,e)})),Object(c.a)((function(){return o})))}},{key:"getContentRoot",value:function(){return!0===C.a.offline?"undefined"==typeof localBaseDirectory?"":localBaseDirectory:"/"}},{key:"getContent",value:function(e){return this.http.get(this.getContentRoot()+"content/modules/".concat(e,".json")).pipe(Object(s.a)((function(e){return e})))}},{key:"getBookmark",value:function(e){return this.http.get("/search/bookmarks/data",{params:{be:e}}).pipe(Object(s.a)((function(e){return e.bookmark})))}},{key:"getLoadConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new l.b;return n.chapterAssetBundle=!0,n.targetChapterId=Human.timeline.rootTimelines[e]._chapters[t].id,n.targetChapterConfig={global:{clipping:!0,graph:!0,camera:!0,properties:!0,transparencyMode:!0,postprocess:!0},static:{labels:!0},dynamic:{timeline:!0,particles:!0}},n.sortBy="chapter",n}},{key:"buildStory",value:function(e,t,n){Human.events.fire("modules.fetch.start",e),Human.modules.moduleData[e]=t;var a=Object.assign({},t);return a.moduleId=e,new i.a((function(t){Human.modules.create(e,a,(function(){Human.modules.load(e,Object.values(Human.scene.rootObjects),[].concat(I),(function(){Human.modules.activate(e,0,{},(function(){t.next(!0),t.complete()}))}))}))}))}},{key:"getStoryChapters",value:function(e,t){var n=this,i=Human.modules.moduleData[e];return Human.timeline.rootTimelines[e]._chapters.map((function(e,a){return n.chapterService.fromHumanChapter(i,t,e,a)}))}},{key:"getStoryLoadChunks",value:function(e,t){return this.getOnDemandLoadChunks(e,t).map((function(e){return Object.assign(Object.assign({},e),{chunkId:S.a.idWithPrefix("chunk")})}))}},{key:"loadStoryChunk",value:function(e,t){var n=e.objects.map((function(e){return Human.scene.objects[e]}));e.storyId?Human.modules.load(e.storyId,n,e.assetTypes,(function(){t()})):this.engineService.loadGraphObject(e.objects[0]).subscribe((function(){t()}))}},{key:"unloadStory",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=(e?[e]:Object.keys(Human.modules.modules)).map((function(e){return t.hardDeleteStory(e,n)}));return new i.a((function(e){o.length?Object(a.a)(o).subscribe((function(){e.next(!0),e.complete()})):(e.next(!0),e.complete())}))}},{key:"createLoadObjectChunk",value:function(e){var t=new l.a;return t.assetTypes=[].concat(T,U),t.objects=[e],t}},{key:"hardDeleteStory",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(e in Human.modules.modules?Human.modules.modules[e].sceneGraph:[]).map((function(e){return Human.scene.objects[e.objectId]})).filter((function(e){return!!e})),a=Object(m.flatten)(n.map((function(e){return e.getLeafObjects()}))),o=v(Human.modules.deactivate,e,{}),r=v(Human.modules.unload,e,a,["geometries","morphs","reflections","tweens","lights","materials","transforms"]),s=v(Human.modules.destroy,e);return new i.a((function(n){(Human.timeline.activeRoot&&Human.timeline.activeRoot.id===e?o():Promise.resolve({})).then((function(){return t?r():Promise.resolve({})})).then((function(){return s()})).then((function(){return n.next(),void n.complete()}))}))}},{key:"getStoryTranslation",value:function(e,t,n){return this.http.get(t===f.a.Bookmark?"/search/bookmarks/tr/".concat(n,"/").concat(e):"/tr/".concat(n,"/").concat(e,".json")).pipe(Object(s.a)((function(e){return Object(o.plainToClass)(g,e)})))}},{key:"getStoryType",value:function(e){return e.indexOf("/")>=0?f.a.Module:f.a.Bookmark}},{key:"translateStory",value:function(e,t){var n=this,i=e.chapters||[],a=e.sceneGraph||[],o=t.objects||{},r=t.chapters||[];return e.displayName=t.displayName||e.displayName,e.description=t.description||e.description,a.forEach((function(e){(e.objects||[]).forEach((function(e){n.translateObject(e,o)}))})),i.forEach((function(e,t){var i=r[t];if(i){n.translateMetaInfo(e,i);var a=i.annotations||[];(e.annotations||[]).forEach((function(e,t){var i=a[t];i&&n.translateMetaInfo(e,i)}));var o=i.hotspots||[];(e.hotspots||[]).forEach((function(e,t){var i=o[t];i&&n.translateMetaInfo(e,i)}));var s=i.quizQuestions||[];(e.quizQuestions||[]).forEach((function(e,t){var i=s[t];i&&n.translateQuizQuestion(e,i)}))}})),e}},{key:"translateQuizQuestion",value:function(e,t){var n=this;if(t.nextLabel&&(e.nextLabel=t.nextLabel),["questionPrompt","explanation"].forEach((function(n){var i=t[n]||[];(e[n]||[]).forEach((function(e,t){var n=i[t];n&&(e.markdown=n.markdown)}))})),e.data&&t.data){var i=t.data.options||[];(e.data.options||[]).forEach((function(t,a){var o=i[a];o&&(e.type===_.a.LabelAnatomy?n.translateMetaInfo(t.label,o.label):t.label=o.label)}))}}},{key:"translateMetaInfo",value:function(e,t){var n=t.title,i=t.description;e.hasOwnProperty("displayName")&&(e.displayName=n),e.hasOwnProperty("title")&&(e.title=n),e.hasOwnProperty("description")&&(e.description=i)}},{key:"translateObject",value:function(e,t){var n=this,i=t[e.objectId];i&&(e.displayName=i);var a=e.objects;a&&a.forEach((function(e){n.translateObject(e,t)}))}},{key:"exportWrittenContent",value:function(e,t,n){var i=[];return i.push("\n".concat(e.displayName,"\n    ")),t.forEach((function(e,t){i.push("\n---\n\n# Chapter ".concat(t+1,": ").concat(e.info.displayName||"-No Title-","\n\n").concat(e.info.description||"-No Description-","\n      ")),e.legend.length&&(i.push("\n## Legend\n"),e.legend.forEach((function(e){i.push("\n* ".concat(e.label," (").concat(x.a.rgbToHex(e.colors,!0),")\n"))})));var a=n.filter((function(t){return t.chapterId===e.id}));a.length&&(i.push("\n## Labels\n"),a.forEach((function(e){i.push("\n* ".concat(e.title,"\n")),e.description&&i.push("\n  > ".concat(e.description,"\n"))})))})),i.join("")}},{key:"exportQuizKey",value:function(e){var t=this,n=[];return e.forEach((function(e,i){switch(n.push("\n# QUESTION ".concat(i+1," (").concat(_.c[e.type],")\n\n## PROMPT\n").concat(t.contentBlocksService.getOnlyText(e.questionPrompt),"\n      ")),e.type){case _.a.MultipleChoice:e.data.options.forEach((function(t,i){n.push("\n## ANSWER ".concat(i+1," ").concat(e.data.correctAnswer===t.value?"- CORRECT":"","\n").concat(t.label,"\n            "))}));break;case _.a.SelectAnatomy:n.push("\n## ANSWERS\n          "),e.data.correctAnswer.forEach((function(e,t){n.push("\n".concat(e,"\n            "))}));break;case _.a.LabelAnatomy:e.data.options.forEach((function(e,t){n.push("\n## ANSWER ".concat(t+1,"\n").concat(e.label.title,"\n            "))}))}t.contentBlocksService.getOnlyText(e.explanation).length&&n.push("\n  \n## EXPLANATION\n".concat(t.contentBlocksService.getOnlyText(e.explanation),"\n        ")),n.push("\n\n\n      ")})),n.join("")}}]),e}()).\u0275fac=function(e){return new(e||O)(j.Zb(M.b),j.Zb(y.a),j.Zb(d.a),j.Zb(P))},O.\u0275prov=j.Lb({token:O,factory:O.\u0275fac,providedIn:"root"}),O)},N0Zw:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i,a=n("AcyG"),o=n("lWeg"),r=n("q8pu"),s=n("7b4e"),c=n("Mh2x"),l=n("CAXj"),d=n("aqTE"),g=n("LvDl"),f=n("4LIl"),m=n("JaAu"),y=n("2o60"),v=n("A+8E"),k=n("fXoL"),O=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},S=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},x={enableContextLabel:{enable:!0,enableInfo:!0,enableActions:!0},loading:!1,labelsCollapsed:!1,labelsCollapsedMode:f.a.None,labelScale:null,labels:[],contextLabel:null,selectedLabel:null,draggable:{pin:!0,tag:!0}},C=function(){var e=i=function(){function e(t,n){h(this,e),this.store=t,this.labelsService=n}return b(e,[{key:"PatchLabels",value:function(e,t){var n=immer.applyPatches(e.getState(),t.patches);e.patchState(n)}},{key:"setLabelOffset",value:function(e,t){var n=p(immer.produceWithPatches(e.getState(),(function(e){var n=e.labels.find((function(e){return e.id===t.labelId}));n&&(n.offset=t.offset)})),3),i=n[0],a=n[1],o=n[2];e.patchState(i),this.savePatches(a,o)}},{key:"setLabels",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.labels=t.labels})))}},{key:"setLabel",value:function(e,t){var n=p(immer.produceWithPatches(e.getState(),(function(e){e.labels=e.labels.map((function(e){return e.id===t.label.id?t.label:e}))})),3),i=n[0],a=n[1],o=n[2];e.patchState(i),t.record&&this.savePatches(a,o)}},{key:"setLabelStates",value:function(e,t){var n=p(immer.produceWithPatches(e.getState(),(function(e){e.labels.find((function(e){return e.id===t.id})).states=t.states})),3),i=n[0],a=n[1],o=n[2];e.patchState(i),this.savePatches(a,o)}},{key:"setLabelScale",value:function(e,t){e.patchState({labelScale:t.scale})}},{key:"addLabel",value:function(e,t){var n=p(immer.produceWithPatches(e.getState(),(function(e){var n=t.label.id||s.a.idWithPrefix("label"),i=Object.assign(Object.assign({},t.label),{id:n});e.labels.push(i)})),3),i=n[0],a=n[1],o=n[2];e.patchState(i),this.savePatches(a,o)}},{key:"addContextLabel",value:function(e,t){var n=immer.produce(e.getState(),(function(e){e.contextLabel=Object.assign(Object.assign({},t.label),{id:o.a})}));e.patchState(n)}},{key:"copyLabels",value:function(e,t){var n=e.getState().labels,i=n.filter((function(e){return e.chapterId===t.sourceChapter.id})).map((function(e){return Object.assign(Object.assign({},Object(g.cloneDeep)(e)),{id:s.a.idWithPrefix("label"),chapterId:t.targetChapter.id})}));e.patchState({labels:[].concat(u(n),u(i))})}},{key:"removeLabel",value:function(e,t){var n=p(immer.produceWithPatches(e.getState(),(function(e){e.labels=e.labels.filter((function(e){return e.id!==t.label.id}))})),3),i=n[0],a=n[1],o=n[2];e.patchState(i),Human.scene.markers.delete(t.label.id),this.savePatches(a,o)}},{key:"removeContextLabel",value:function(e,t){var n=immer.produce(e.getState(),(function(e){e.contextLabel=void 0}));Human.scene.markers.delete(o.a),e.patchState(n)}},{key:"removeAllChapterLabels",value:function(e,t){var n=immer.produceWithPatches(e.getState(),(function(e){var n=p(Object(g.partition)(e.labels,(function(e){return e.chapterId!==t.chapter.id})),2),i=n[0];n[1].forEach((function(e){return Human.scene.markers.delete(e.id)})),e.labels=i})),i=p(n,3),a=i[0],o=i[1],r=i[2];e.patchState(a),this.savePatches(o,r)}},{key:"selectLabel",value:function(e,t){e.patchState({selectedLabel:t.label?t.label.id:null})}},{key:"resetLabels",value:function(e,t){var n=e.getState();Human.scene.markers.delete(o.a),n.labels.forEach((function(e){Human.scene.markers.delete(e.id)})),e.setState(immer.produce(e.getState(),(function(e){})))}},{key:"convertLabels",value:function(e,t){var n=p(immer.produceWithPatches(e.getState(),(function(e){t.labels.forEach((function(n){var i=e.labels.findIndex((function(e){return e.id===n.id}));e.labels[i]=Object.assign(Object.assign({},e.labels[i]),t.fields)}))})),3),i=n[0],a=n[1],o=n[2];e.setState(Object.assign({},i)),this.savePatches(a,o)}},{key:"enableContextLabel",value:function(e,t){e.patchState({enableContextLabel:Object.assign({},t)})}},{key:"setLabelsShown",value:function(e,t){var n=t.labels,i=t.shown,a=e.getState().labels.map((function(e){var t=n.some((function(t){return t.id===e.id}));return Object.assign(Object.assign({},e),{shown:t?i:e.shown})}));e.patchState({labels:u(a)})}},{key:"setAllLabelsShown",value:function(e,t){var n=t.show,i=e.getState().labels;e.dispatch(new r.t(i,n))}},{key:"setLabelsCollapsed",value:function(e,t){var n=t.collapsed,i=t.collapsedMode;e.patchState({labelsCollapsed:n,labelsCollapsedMode:i})}},{key:"setLabelsDraggable",value:function(e,t){e.patchState({draggable:Object.assign({},t.draggable)})}},{key:"savePatches",value:function(e,t){this.store.dispatch(new m.a.SavePatches([{forward:e,inverse:t,patchAction:r.f}]))}}],[{key:"getLabels",value:function(e){return e.labels}},{key:"getLabelsCollapsed",value:function(e){return e.labelsCollapsed}},{key:"getLabelsCollapsedMode",value:function(e){return e.labelsCollapsedMode}},{key:"getSelectedLabelId",value:function(e){return e.selectedLabel}},{key:"getSelectedLabel",value:function(e){return e.labels.find((function(t){return t.id===e.selectedLabel}))||null}},{key:"getContextLabel",value:function(e){return e.contextLabel}},{key:"getChapterLabels",value:function(e,t){return e.labels.filter((function(e){return e.chapterId===t.selectedChapter}))}},{key:"getChapterSequentialLabels",value:function(e){return Object(a.i)([i,c.a],(function(t,n){return t.labels.filter((function(t){return t.chapterId===n.selectedChapter&&t.pinType===y.a.Sequential&&t.sequentialType===e}))}))}},{key:"getLabelSequence",value:function(e){return Object(a.i)([i,i.getChapterSequentialLabels(v.a.Alphabetical),i.getChapterSequentialLabels(v.a.Numerical)],(function(t,n,i){if(e.pinType!==y.a.Sequential)return null;switch(e.sequentialType){case v.a.Alphabetical:var a=n.findIndex((function(t){return t.id===e.id}));return"ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(a);case v.a.Numerical:return i.findIndex((function(t){return t.id===e.id}))+1}}))}},{key:"getEnableContextLabel",value:function(e){return e.enableContextLabel.enable}},{key:"getEnableContextLabelInfo",value:function(e){return e.enableContextLabel.enableInfo}},{key:"getEnableContextLabelActions",value:function(e){return e.enableContextLabel.enableActions}},{key:"getLabelsDraggable",value:function(e){return e.draggable}},{key:"getLabelScale",value:function(e){return e.labelScale}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.Zb(a.h),k.Zb(d.a))},e.\u0275prov=k.Lb({token:e,factory:e.\u0275fac}),O([Object(a.a)(r.f),S("design:type",Function),S("design:paramtypes",[Object,r.f]),S("design:returntype",void 0)],e.prototype,"PatchLabels",null),O([Object(a.a)(r.n),S("design:type",Function),S("design:paramtypes",[Object,r.n]),S("design:returntype",void 0)],e.prototype,"setLabelOffset",null),O([Object(a.a)(r.q),S("design:type",Function),S("design:paramtypes",[Object,r.q]),S("design:returntype",void 0)],e.prototype,"setLabels",null),O([Object(a.a)(r.m),S("design:type",Function),S("design:paramtypes",[Object,r.m]),S("design:returntype",void 0)],e.prototype,"setLabel",null),O([Object(a.a)(r.p),S("design:type",Function),S("design:paramtypes",[Object,r.p]),S("design:returntype",void 0)],e.prototype,"setLabelStates",null),O([Object(a.a)(r.o),S("design:type",Function),S("design:paramtypes",[Object,r.o]),S("design:returntype",void 0)],e.prototype,"setLabelScale",null),O([Object(a.a)(r.b),S("design:type",Function),S("design:paramtypes",[Object,r.b]),S("design:returntype",void 0)],e.prototype,"addLabel",null),O([Object(a.a)(r.a),S("design:type",Function),S("design:paramtypes",[Object,r.a]),S("design:returntype",void 0)],e.prototype,"addContextLabel",null),O([Object(a.a)(r.d),S("design:type",Function),S("design:paramtypes",[Object,r.d]),S("design:returntype",void 0)],e.prototype,"copyLabels",null),O([Object(a.a)(r.i),S("design:type",Function),S("design:paramtypes",[Object,r.i]),S("design:returntype",void 0)],e.prototype,"removeLabel",null),O([Object(a.a)(r.h),S("design:type",Function),S("design:paramtypes",[Object,r.h]),S("design:returntype",void 0)],e.prototype,"removeContextLabel",null),O([Object(a.a)(r.g),S("design:type",Function),S("design:paramtypes",[Object,r.g]),S("design:returntype",void 0)],e.prototype,"removeAllChapterLabels",null),O([Object(a.a)(r.k),S("design:type",Function),S("design:paramtypes",[Object,r.k]),S("design:returntype",void 0)],e.prototype,"selectLabel",null),O([Object(a.a)(r.j),S("design:type",Function),S("design:paramtypes",[Object,r.j]),S("design:returntype",void 0)],e.prototype,"resetLabels",null),O([Object(a.a)(r.c),S("design:type",Function),S("design:paramtypes",[Object,r.c]),S("design:returntype",void 0)],e.prototype,"convertLabels",null),O([Object(a.a)(r.e),S("design:type",Function),S("design:paramtypes",[Object,r.e]),S("design:returntype",void 0)],e.prototype,"enableContextLabel",null),O([Object(a.a)(r.t),S("design:type",Function),S("design:paramtypes",[Object,r.t]),S("design:returntype",void 0)],e.prototype,"setLabelsShown",null),O([Object(a.a)(r.l),S("design:type",Function),S("design:paramtypes",[Object,r.l]),S("design:returntype",void 0)],e.prototype,"setAllLabelsShown",null),O([Object(a.a)(r.r),S("design:type",Function),S("design:paramtypes",[Object,r.r]),S("design:returntype",void 0)],e.prototype,"setLabelsCollapsed",null),O([Object(a.a)(r.s),S("design:type",Function),S("design:paramtypes",[Object,r.s]),S("design:returntype",void 0)],e.prototype,"setLabelsDraggable",null),O([Object(a.f)(),S("design:type",Function),S("design:paramtypes",[o.b]),S("design:returntype",void 0)],e,"getLabels",null),O([Object(a.f)(),S("design:type",Function),S("design:paramtypes",[o.b]),S("design:returntype",void 0)],e,"getLabelsCollapsed",null),O([Object(a.f)(),S("design:type",Function),S("design:paramtypes",[o.b]),S("design:returntype",void 0)],e,"getLabelsCollapsedMode",null),O([Object(a.f)(),S("design:type",Function),S("design:paramtypes",[o.b]),S("design:returntype",void 0)],e,"getSelectedLabelId",null),O([Object(a.f)(),S("design:type",Function),S("design:paramtypes",[o.b]),S("design:returntype",void 0)],e,"getSelectedLabel",null),O([Object(a.f)(),S("design:type",Function),S("design:paramtypes",[o.b]),S("design:returntype",void 0)],e,"getContextLabel",null),O([Object(a.f)([c.a]),S("design:type",Function),S("design:paramtypes",[o.b,l.a]),S("design:returntype",void 0)],e,"getChapterLabels",null),O([Object(a.f)(),S("design:type",Function),S("design:paramtypes",[o.b]),S("design:returntype",void 0)],e,"getEnableContextLabel",null),O([Object(a.f)(),S("design:type",Function),S("design:paramtypes",[o.b]),S("design:returntype",void 0)],e,"getEnableContextLabelInfo",null),O([Object(a.f)(),S("design:type",Function),S("design:paramtypes",[o.b]),S("design:returntype",void 0)],e,"getEnableContextLabelActions",null),O([Object(a.f)(),S("design:type",Function),S("design:paramtypes",[o.b]),S("design:returntype",void 0)],e,"getLabelsDraggable",null),O([Object(a.f)(),S("design:type",Function),S("design:paramtypes",[o.b]),S("design:returntype",void 0)],e,"getLabelScale",null),e=i=O([Object(a.g)({name:"labels",defaults:x})],e)}()},N2iv:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.List=0]="List",e[e.Tree=1]="Tree",e}({})},"Oq7/":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){h(this,e)}},Ow1N:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),a=n("fXoL"),o=function(){var e=function e(){h(this,e)};return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e}()},"P+IX":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("qXBG"),a=n("AcyG"),o=n("ECVi"),r=n("fXoL"),s=n("tyNb"),c=function(){var e=function(){function e(t,n,i){h(this,e),this.router=t,this.authService=n,this.store=i}return b(e,[{key:"canActivate",value:function(e,t){var n=this;return this.store.selectSnapshot(o.a.getLoggedIn)||this.authService.isLoggedIn().toPromise().then((function(e){return!!e.signed_in||(n.router.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Zb(s.e),r.Zb(i.a),r.Zb(a.h))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},PCNd:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var a,r,s,c,u=n("ofXK"),l=n("R9Cn"),p=n("e0tp"),d=n("vvyD"),g=n("3Pt+"),f=n("Wqx0"),m=n("vXdC"),y=n("C6D4"),v=n("fXoL"),k=function(e){i(n,e);var t=o(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).accountUrl="biodigital.zendesk.com",e}return b(n,[{key:"beforePageLoad",value:function(e){e.setLocale("en"),e.hide()}}]),n}(m.a),O=((a=function e(){h(this,e)}).\u0275mod=v.Nb({type:a}),a.\u0275inj=v.Mb({factory:function(e){return new(e||a)},imports:[[y.a.forRoot(k)]]}),a),S=n("EWj2"),x=n("6n0X"),C=n("Ow1N"),w=n("wf0l"),j=n("yGOH"),P=((r=function e(){h(this,e)}).\u0275mod=v.Nb({type:r}),r.\u0275inj=v.Mb({factory:function(e){return new(e||r)},imports:[[u.c,w.b,d.a,C.a,j.a]]}),r),_=n("PXMH"),M=n("9Xeq"),I=n("Wgla"),T=n("+Xsx"),U=n("S+jl"),L=n("+pSP"),z=n("aKmd"),A=n("lR5k"),F=n("izPL"),D=n("tyNb"),E=n("p3zp"),N=((c=function e(){h(this,e)}).\u0275mod=v.Nb({type:c}),c.\u0275inj=v.Mb({factory:function(e){return new(e||c)},imports:[[u.c,p.a,L.a]]}),c),R=((s=function e(){h(this,e)}).\u0275mod=v.Nb({type:s}),s.\u0275inj=v.Mb({factory:function(e){return new(e||s)},imports:[[D.i,S.a,P,l.b,U.a,u.c,j.a,L.a,_.a,p.a,d.a,F.a,z.a,I.a,M.a,C.a,g.z,f.a,T.a,E.a,x.a,O,A.a.forChild()],S.a,P,U.a,j.a,_.a,L.a,p.a,F.a,z.a,M.a,I.a,N,C.a,f.a,T.a,E.a,x.a]}),s)},PUI9:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var i,a,o,r=n("AcyG"),s=function e(){h(this,e)},c=n("11Ye"),u=n("7u76"),l=n("eW6i"),p=n("e0fF"),d=n("H7eZ"),g=n("1a36"),f=n("YLgZ"),m=n("sTHe"),y=n("jDQD"),v=n("nYR2"),k=n("LRne"),O=n("z6cu"),S=n("lJxs"),x=n("JIr8"),C=n("vkgz"),w=n("AytR"),j=n("gzgB"),P=n("fXoL"),_=n("tk/3"),M=((i=function(){function e(t){h(this,e),this.http=t,this.nodeInfoCache=new Map}return b(e,[{key:"queryNodeInfo",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(w.a.offline)return Object(k.a)(void 0);var o="/search/descriptions?name=".concat(e,"&plan=").concat(t===j.a.Wikipedia?"wiki":t,"&ol=").concat(i),r=o;if(a&&this.nodeInfoCache.has(r)){var s=this.nodeInfoCache.get(r);return Object(k.a)(s)}return this.http.get(o).pipe(Object(S.a)((function(t){return{label:e,latinLabel:t.latin_term,description:t.description,source:t.source,sourceLink:t.url}})),Object(x.a)((function(e){return 404===e.status?Object(k.a)(void 0):Object(O.a)(e)})),Object(C.a)((function(e){return n.nodeInfoCache.set(r,e)})))}}]),e}()).\u0275fac=function(e){return new(e||i)(P.Zb(_.b))},i.\u0275prov=P.Lb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),I=n("nS47"),T=n("Mh2x"),U=n("LvDl"),L=n("qz+p"),z=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},A=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},F=new d.a(0,0,0,0,g.a.Hidden),D=((o=a=function(){function e(t,n,i,a,o){h(this,e),this.store=t,this.graphService=n,this.engineService=i,this.contentInfoService=a,this.animationService=o}return b(e,[{key:"load",value:function(e,t){e.dispatch(new c.m("engine"))}},{key:"loadSuccess",value:function(e,t){(0,e.patchState)({engine:t.result})}},{key:"setReady",value:function(e,t){e.patchState({ready:t.ready})}},{key:"setDisplay",value:function(e,t){e.patchState({display:t.display})}},{key:"setZoomViaScrollAllowed",value:function(e,t){e.patchState({scrollMode:t.scrollMode})}},{key:"setVisible",value:function(e,t){e.patchState({visible:t.visible})}},{key:"setEnginePosition",value:function(e,t){e.patchState({enginePosition:Object.assign(Object.assign({},t.position),{right:t.position.left+t.position.width,bottom:t.position.top+t.position.height})})}},{key:"resetEnginePosition",value:function(e,t){e.patchState({enginePosition:F})}},{key:"setChapter",value:function(e,t){e.patchState({chapter:t.chapterId})}},{key:"setChapterInit",value:function(e,t){e.patchState({chapterInit:t.chapterInit})}},{key:"setActiveTool",value:function(e,t){e.patchState({activeTool:t.tool})}},{key:"setGraph",value:function(e,t){e.patchState({viewGraph:Object.assign({},t.graph)})}},{key:"clearGraph",value:function(e,t){e.patchState({viewGraph:Object(p.a)()})}},{key:"setXrayMode",value:function(e,t){e.patchState({xrayModeEnabled:t.enabled})}},{key:"centerCameraOnVisible",value:function(e,t){var n=this.engineService.getVisibleLeaves(),i=this.engineService.getBoundaryFromObjects(n),a=this.engineService.getCameraLookAt();a.look={x:(i.xmin+i.xmax)/2,y:(i.ymin+i.ymax)/2,z:(i.zmin+i.zmax)/2},Human.renderer.camera.fly.flyTo(a)}},{key:"toggleProgressBar",value:function(e,t){e.patchState({showProgressBar:t.show})}},{key:"toggleCameraBar",value:function(e,t){e.patchState({showCameraBar:t.show})}},{key:"toggleLabels",value:function(e,t){var n=null!=t.show?t.show:!e.getState().showLabels;e.patchState({showLabels:n})}},{key:"synchronizeVisibleNodes",value:function(e,t){var n=this,i=e.getState().viewGraph,a=this.stateMapToNodeIds(i,t.leafVisibilityState),o={};a.forEach((function(e){var i=n.engineService.getLeafObjects(e).reduce((function(e,n){return e||t.nodes[n].shown}),!1);o[e]={shown:i}})),this.graphService.synchronize(Object.assign({},i),{shown:"trueWins"},o),e.patchState({viewGraph:Object.assign({},i)})}},{key:"synchronizeRenderableNodes",value:function(e,t){var n=e.getState().viewGraph,i=this.stateMapToNodeIds(n,t.leafRenderableState),a={};i.forEach((function(e){a[e]={renderable:!0}})),this.graphService.synchronize(n,{renderable:"falseWins"},a)}},{key:"synchronizePickableNodes",value:function(e,t){var n=this,i=e.getState().viewGraph,a=this.stateMapToNodeIds(i,t.leafPickableState),o={};a.forEach((function(e){var t=n.engineService.getLeafObjects(e).reduce((function(e,t){return e||Human.scene.objects[t].pickable}),!1);o[e]={pickable:t}})),this.graphService.synchronize(i,{pickable:"trueWins"},o),e.patchState({viewGraph:Object.assign({},i)})}},{key:"playChapterAnimation",value:function(e,t){var n=this.store.selectSnapshot(T.a.getSelectedChapter),i=Object(U.get)(n,"ui.play.count",0);this.animationService.play({startChapterId:n.id,loop:-1===i,numChapters:1,queue:!1}),e.getState().animationPlaying||this.animationService.pause()}},{key:"toggleAnimation",value:function(e,t){var n=this.store.selectSnapshot(T.a.getSelectedChapterId);t.play?this.animationService.unpause(n):this.animationService.pause()}},{key:"setAnimationPlaying",value:function(e,t){e.patchState({animationPlaying:t.playing})}},{key:"setPlaybackSpeed",value:function(e,t){e.patchState({playbackSpeed:t.speed})}},{key:"playAudio",value:function(e,t){e.patchState({playAudio:t.play})}},{key:"setAutoplay",value:function(e,t){e.patchState({autoplay:t.enable})}},{key:"setObjectLayerOrder",value:function(e,t){var n=this,i=e.getState().viewGraph,a=isNaN(t.layer)?0:t.layer,o=[];t.nodes.forEach((function(e){var t=n.graphService.getDescendants(i,e.id,!0);o=o.concat(t)})),o.forEach((function(e){n.engineService.setObjectLayer(e,a),n.graphService.setState(i,e,{layer:a})})),e.patchState({viewGraph:Object.assign({},i)})}},{key:"setObjectDisplayName",value:function(e,t){var n=Human.scene.objects[t.nodeId];n&&(n.displayName=t.displayName)}},{key:"autoSortObjectLayers",value:function(e,t){var n=this,i=e.getState().viewGraph,a=0,o=Human.scene.getEnabledLeaves(),r=this.engineService.getObjectLayerValues(o);Object.keys(r).map((function(e){return parseInt(e,10)})).sort((function(e,t){return e-t})).forEach((function(e){r[e].sort((function(e,t){return t.value-e.value})).forEach((function(e){var t=20*a;n.engineService.setObjectLayer(e.nodeId,t),n.graphService.setState(i,e.nodeId,{layer:t}),a++}))})),e.patchState({viewGraph:Object.assign({},i)})}},{key:"resetObjectLayers",value:function(e,t){var n=this,i=e.getState().viewGraph;Human.scene.getEnabledLeaves().forEach((function(e){n.engineService.setObjectLayer(e,0),n.graphService.setState(i,e,{layer:0})})),e.patchState({viewGraph:Object.assign({},i)})}},{key:"setPostProcessingEffects",value:function(e,t){var n=t.effects;this.engineService.setPostProcessingFeatures(n)}},{key:"setProperties",value:function(e,t){var n=t.properties;this.engineService.setProperties(Object.assign({},n))}},{key:"setTransparencyMode",value:function(e,t){var n=t.mode;this.engineService.setTransparencyMode(n)}},{key:"expandNode",value:function(e,t){var n=this.store.selectSnapshot(a.getViewGraph);I.a.getAncestors(n,t.node.id,!0).forEach((function(e){n.nodes[e].boolState.expanded=!0})),this.store.dispatch(new c.E(n))}},{key:"collapseNode",value:function(e,t){var n=this.store.selectSnapshot(a.getViewGraph);n.nodes[t.node.id].boolState.expanded=!1,this.store.dispatch(new c.E(n))}},{key:"collapseAllViewTreeNodes",value:function(e,t){var n=this.store.selectSnapshot(a.getViewGraph);Object.values(n.nodes).forEach((function(e){e.boolState.expanded=!1})),this.store.dispatch(new c.E(n))}},{key:"hoverNode",value:function(e,t){e.patchState({hoveredNode:t.node})}},{key:"setLabelEditNode",value:function(e,t){e.patchState({labelEditNode:t.node})}},{key:"queryNodeInfo",value:function(e,t){var n=t.node,i=t.fallback,a=t.lang;e.patchState({queryingAnatomy:!0}),this.contentInfoService.queryNodeInfo(n.label,i,a).pipe(Object(v.a)((function(){return e.patchState({queryingAnatomy:!1})}))).subscribe((function(t){return e.dispatch(new c.s(n,t))}),(function(){return e.dispatch(new c.r(n))}))}},{key:"queryNodeInfoSuccess",value:function(e,t){var n=t.node,i=t.info;e.dispatch(new c.G(n,i))}},{key:"setNodeInfo",value:function(e,t){var n=t.node,i=t.info,o=this.store.selectSnapshot(a.getViewGraph),r=o.nodes[n.id];r&&i&&(r.description=i.description,r.info=i,this.store.dispatch(new c.E(o)))}},{key:"setContextMenu",value:function(e,t){e.patchState({contextmenu:{node:t.node,hit:t.hit}})}},{key:"setWatermarkEnabled",value:function(e,t){var n=t.enabled;e.patchState({watermarkEnabled:n})}},{key:"stateMapToNodeIds",value:function(e,t){var n=this,i=Object.keys(t).map((function(t){return n.engineService.getNode(e,t)})).filter((function(e){return!!e})).map((function(e){return e.id}));return new Set(i)}}],[{key:"getEngine",value:function(e){return e.engine}},{key:"getReady",value:function(e){return e.ready}},{key:"getDisplay",value:function(e){return e.display}},{key:"getScrollMode",value:function(e){return e.scrollMode}},{key:"getVisible",value:function(e){return e.visible}},{key:"getViewGraph",value:function(e){return e.viewGraph}},{key:"getViewGraphNode",value:function(e){return function(t){return e.viewGraph.nodes[t]}}},{key:"getEnginePosition",value:function(e){return e.enginePosition}},{key:"getChapter",value:function(e){return e.chapter}},{key:"getActiveTool",value:function(e){return e.activeTool}},{key:"getShowCameraBar",value:function(e){return e.showCameraBar}},{key:"getShowProgressBar",value:function(e){return e.showProgressBar}},{key:"getShowLabels",value:function(e){return e.showLabels}},{key:"getChapterInit",value:function(e){return e.chapterInit}},{key:"getAnimationPlaying",value:function(e){return e.animationPlaying}},{key:"getPlayAudio",value:function(e){return e.playAudio}},{key:"getAutoplay",value:function(e){return e.autoplay}},{key:"getXrayModeEnabled",value:function(e){return e.xrayModeEnabled}},{key:"getHoveredNode",value:function(e){return e.hoveredNode}},{key:"getLabelEditNode",value:function(e){return e.labelEditNode}},{key:"getQuerying",value:function(e){return e.queryingAnatomy}},{key:"getContextmenu",value:function(e){return e.contextmenu}},{key:"getPlaybackSpeed",value:function(e){return e.playbackSpeed}},{key:"getWatermarkEnabled",value:function(e){return e.watermarkEnabled}}]),e}()).\u0275fac=function(e){return new(e||o)(P.Zb(r.h),P.Zb(u.a),P.Zb(l.a),P.Zb(M),P.Zb(L.a))},o.\u0275prov=P.Lb({token:o,factory:o.\u0275fac}),z([Object(r.a)(c.l),A("design:type",Function),A("design:paramtypes",[Object,c.l]),A("design:returntype",void 0)],o.prototype,"load",null),z([Object(r.a)(c.m),A("design:type",Function),A("design:paramtypes",[Object,c.m]),A("design:returntype",void 0)],o.prototype,"loadSuccess",null),z([Object(r.a)(c.M),A("design:type",Function),A("design:paramtypes",[Object,c.M]),A("design:returntype",void 0)],o.prototype,"setReady",null),z([Object(r.a)(c.A),A("design:type",Function),A("design:paramtypes",[Object,c.A]),A("design:returntype",void 0)],o.prototype,"setDisplay",null),z([Object(r.a)(c.N),A("design:type",Function),A("design:paramtypes",[Object,c.N]),A("design:returntype",void 0)],o.prototype,"setZoomViaScrollAllowed",null),z([Object(r.a)(c.P),A("design:type",Function),A("design:paramtypes",[Object,c.P]),A("design:returntype",void 0)],o.prototype,"setVisible",null),z([Object(r.a)(c.D),A("design:type",Function),A("design:paramtypes",[Object,c.D]),A("design:returntype",void 0)],o.prototype,"setEnginePosition",null),z([Object(r.a)(c.u),A("design:type",Function),A("design:paramtypes",[Object,c.u]),A("design:returntype",void 0)],o.prototype,"resetEnginePosition",null),z([Object(r.a)(c.B),A("design:type",Function),A("design:paramtypes",[Object,c.B]),A("design:returntype",void 0)],o.prototype,"setChapter",null),z([Object(r.a)(c.C),A("design:type",Function),A("design:paramtypes",[Object,c.C]),A("design:returntype",void 0)],o.prototype,"setChapterInit",null),z([Object(r.a)(c.w),A("design:type",Function),A("design:paramtypes",[Object,c.w]),A("design:returntype",void 0)],o.prototype,"setActiveTool",null),z([Object(r.a)(c.E),A("design:type",Function),A("design:paramtypes",[Object,c.E]),A("design:returntype",void 0)],o.prototype,"setGraph",null),z([Object(r.a)(c.c),A("design:type",Function),A("design:paramtypes",[Object,c.E]),A("design:returntype",void 0)],o.prototype,"clearGraph",null),z([Object(r.a)(c.R),A("design:type",Function),A("design:paramtypes",[Object,c.R]),A("design:returntype",void 0)],o.prototype,"setXrayMode",null),z([Object(r.a)(c.b),A("design:type",Function),A("design:paramtypes",[Object,c.b]),A("design:returntype",void 0)],o.prototype,"centerCameraOnVisible",null),z([Object(r.a)(c.Z),A("design:type",Function),A("design:paramtypes",[Object,c.Z]),A("design:returntype",void 0)],o.prototype,"toggleProgressBar",null),z([Object(r.a)(c.X),A("design:type",Function),A("design:paramtypes",[Object,c.X]),A("design:returntype",void 0)],o.prototype,"toggleCameraBar",null),z([Object(r.a)(c.Y),A("design:type",Function),A("design:paramtypes",[Object,c.Y]),A("design:returntype",void 0)],o.prototype,"toggleLabels",null),z([Object(r.a)(c.V),A("design:type",Function),A("design:paramtypes",[Object,c.V]),A("design:returntype",void 0)],o.prototype,"synchronizeVisibleNodes",null),z([Object(r.a)(c.U),A("design:type",Function),A("design:paramtypes",[Object,c.U]),A("design:returntype",void 0)],o.prototype,"synchronizeRenderableNodes",null),z([Object(r.a)(c.T),A("design:type",Function),A("design:paramtypes",[Object,c.T]),A("design:returntype",void 0)],o.prototype,"synchronizePickableNodes",null),z([Object(r.a)(c.o),A("design:type",Function),A("design:paramtypes",[Object,c.o]),A("design:returntype",void 0)],o.prototype,"playChapterAnimation",null),z([Object(r.a)(c.W),A("design:type",Function),A("design:paramtypes",[Object,c.W]),A("design:returntype",void 0)],o.prototype,"toggleAnimation",null),z([Object(r.a)(c.x),A("design:type",Function),A("design:paramtypes",[Object,c.x]),A("design:returntype",void 0)],o.prototype,"setAnimationPlaying",null),z([Object(r.a)(c.J),A("design:type",Function),A("design:paramtypes",[Object,c.J]),A("design:returntype",void 0)],o.prototype,"setPlaybackSpeed",null),z([Object(r.a)(c.n),A("design:type",Function),A("design:paramtypes",[Object,c.n]),A("design:returntype",void 0)],o.prototype,"playAudio",null),z([Object(r.a)(c.y),A("design:type",Function),A("design:paramtypes",[Object,c.y]),A("design:returntype",void 0)],o.prototype,"setAutoplay",null),z([Object(r.a)(c.I),A("design:type",Function),A("design:paramtypes",[Object,c.I]),A("design:returntype",void 0)],o.prototype,"setObjectLayerOrder",null),z([Object(r.a)(c.H),A("design:type",Function),A("design:paramtypes",[Object,c.H]),A("design:returntype",void 0)],o.prototype,"setObjectDisplayName",null),z([Object(r.a)(c.a),A("design:type",Function),A("design:paramtypes",[Object,c.a]),A("design:returntype",void 0)],o.prototype,"autoSortObjectLayers",null),z([Object(r.a)(c.v),A("design:type",Function),A("design:paramtypes",[Object,c.v]),A("design:returntype",void 0)],o.prototype,"resetObjectLayers",null),z([Object(r.a)(c.K),A("design:type",Function),A("design:paramtypes",[Object,c.K]),A("design:returntype",void 0)],o.prototype,"setPostProcessingEffects",null),z([Object(r.a)(c.L),A("design:type",Function),A("design:paramtypes",[Object,c.L]),A("design:returntype",void 0)],o.prototype,"setProperties",null),z([Object(r.a)(c.O),A("design:type",Function),A("design:paramtypes",[Object,c.O]),A("design:returntype",void 0)],o.prototype,"setTransparencyMode",null),z([Object(r.a)(c.g),A("design:type",Function),A("design:paramtypes",[Object,c.g]),A("design:returntype",void 0)],o.prototype,"expandNode",null),z([Object(r.a)(c.f),A("design:type",Function),A("design:paramtypes",[Object,c.f]),A("design:returntype",void 0)],o.prototype,"collapseNode",null),z([Object(r.a)(c.e),A("design:type",Function),A("design:paramtypes",[Object,c.e]),A("design:returntype",void 0)],o.prototype,"collapseAllViewTreeNodes",null),z([Object(r.a)(c.k),A("design:type",Function),A("design:paramtypes",[Object,c.k]),A("design:returntype",void 0)],o.prototype,"hoverNode",null),z([Object(r.a)(c.F),A("design:type",Function),A("design:paramtypes",[Object,c.F]),A("design:returntype",void 0)],o.prototype,"setLabelEditNode",null),z([Object(r.a)(c.q),A("design:type",Function),A("design:paramtypes",[Object,c.q]),A("design:returntype",void 0)],o.prototype,"queryNodeInfo",null),z([Object(r.a)(c.s),A("design:type",Function),A("design:paramtypes",[Object,c.s]),A("design:returntype",void 0)],o.prototype,"queryNodeInfoSuccess",null),z([Object(r.a)(c.G),A("design:type",Function),A("design:paramtypes",[Object,c.G]),A("design:returntype",void 0)],o.prototype,"setNodeInfo",null),z([Object(r.a)(c.z),A("design:type",Function),A("design:paramtypes",[Object,c.z]),A("design:returntype",void 0)],o.prototype,"setContextMenu",null),z([Object(r.a)(c.Q),A("design:type",Function),A("design:paramtypes",[Object,c.Q]),A("design:returntype",void 0)],o.prototype,"setWatermarkEnabled",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getEngine",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getReady",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getDisplay",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getScrollMode",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getVisible",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getViewGraph",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getViewGraphNode",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getEnginePosition",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getChapter",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getActiveTool",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getShowCameraBar",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getShowProgressBar",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getShowLabels",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getChapterInit",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getAnimationPlaying",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getPlayAudio",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getAutoplay",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getXrayModeEnabled",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getHoveredNode",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getLabelEditNode",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getQuerying",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getContextmenu",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getPlaybackSpeed",null),z([Object(r.f)(),A("design:type",Function),A("design:paramtypes",[s]),A("design:returntype",void 0)],o,"getWatermarkEnabled",null),o=a=z([Object(r.g)({name:"engine",defaults:{loading:!1,ready:!1,viewGraph:Object(p.a)(),hoveredNode:void 0,labelEditNode:void 0,queryingAnatomy:!1,engine:"",chapter:"",chapterInit:{id:"",init:!1,camera:!1,annotations:!1,graph:!1,properties:!1,particles:!1,clips:!1,postprocessing:!1,transparency:!1},showProgressBar:!0,showCameraBar:!0,showLabels:!0,activeTool:m.a.Select,animationPlaying:!0,autoplay:!0,playAudio:!1,display:!0,visible:!0,scrollMode:y.a.Capture,playbackSpeed:1,xrayModeEnabled:!1,contextmenu:{node:null,hit:null},watermarkEnabled:!1},children:[f.a]})],o))},PV7u:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ot}));var i,a,o,r=n("AcyG"),s=n("/MKm"),c=n("L2KA"),l=n("eKhQ"),d=n("qBAC"),g=n("c8sk"),f=n("ECVi"),m=n("Lyqc"),y=n("5+tZ"),v=n("IzEk"),k=n("0IaG"),O=n("fXoL"),S=n("ofXK"),x=n("IlST"),C=n("0njA"),w=n("k0jR"),j=n("XNiG"),P=n("LRne"),_=n("HDdC"),M=n("3Pt+"),I=n("1G5W"),T=n("Kj3r"),U=n("/uUt"),L=n("DTUA"),z=(n("zrlG"),n("937/")),A=n("l5mm"),F=n("eNwd"),D=n("lJxs"),E=n("pLZG"),N=n("vkgz"),R=n("ewuU"),V=n("RD2w"),B=n("5miH"),H=n("+6Fv"),Q=n("jDQD"),G=n("4bFC"),W=n("LvDl"),q=n("jhN1"),X=((i=function(){function e(t,n,i){h(this,e),this.store=t,this.publishService=n,this.sanitizer=i}return b(e,[{key:"model",set:function(e){var t=this.store.selectSnapshot(g.a.getWidgetURL),n=this.store.selectSnapshot(f.a.getUserLanguage),i=this.store.selectSnapshot(l.a.getSelectedOrganizationProductAccountId),a=this.publishService.getWidgetURL(e,t,this.params,null,null,n,null,i);this.src=this.sanitizer.bypassSecurityTrustResourceUrl(a)}},{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||i)(O.Pb(r.h),O.Pb(s.b),O.Pb(q.b))},i.\u0275dir=O.Kb({type:i,selectors:[["iframe","appEmbedSrc",""]],hostVars:1,hostBindings:function(e,t){2&e&&O.Yb("src",t.src,O.Ec)},inputs:{params:"params",model:"model",id:"id"}}),i),Z=["widgetContainer"],J=["widgetFrame"],K=((a=function(){function e(t,n,i){h(this,e),this.elRef=t,this.cameraService=n,this.changeDetectorRef=i,this.scalable=!1,this.labelScale=1,this.allVisibilityLayers=[],this.cameraUpdated=new O.p,this.ngUnsubscribe=new j.a,this.widgetOptionsSubject=new j.a}return b(e,[{key:"options",get:function(){return this._options},set:function(e){e&&(this._options=e,this.updateWidget(this.options))}},{key:"topOffset",get:function(){var e=(this.elRef.nativeElement.offsetHeight-this.height)/2;return this.scaleFactor<1?e:Math.max(0,e)}},{key:"leftOffset",get:function(){var e=(this.elRef.nativeElement.offsetWidth-this.width)/2;return this.scaleFactor<1?e:Math.max(0,e)}},{key:"scaleFactor",get:function(){if(this.scalable){var e=this.containerRef.nativeElement,t=e.offsetWidth,n=e.offsetHeight,i=Math.min(t/this.width,n/this.height,1);return 1===i?1:.95*i}return 1}},{key:"ngOnInit",value:function(){this._apiRef=new HumanAPI({iframeId:this.frameRef.nativeElement.id}),this.initAPIListeners(),this.initQuizAPIListeners()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initAPIListeners",value:function(){var e=this;this.getAPIEvent(B.a.HumanReady).pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(){e.setupCameraTracking(),e.setupCameraRotation(),e.setWidgetUIConfig(e._params),e.getModelBackgroundColor().pipe(Object(I.a)(e.ngUnsubscribe)).subscribe((function(t){e.defaultBackgroundColor=t,e.setWidgetBackground(e.options.backgroundColor||e.defaultBackgroundColor)})),e.getLayers().pipe(Object(I.a)(e.ngUnsubscribe)).subscribe((function(t){e.allVisibilityLayers=t,e.changeDetectorRef.markForCheck()}))}))}},{key:"initQuizAPIListeners",value:function(){var e=this;this.widgetOptionsSubject.asObservable().pipe(Object(D.a)((function(e){return e.uiQuiz})),Object(E.a)((function(e){return!Object(W.isNil)(e)}))).pipe(Object(U.a)((function(e,t){return Object(W.isEqual)(e,t)})),Object(E.a)((function(){return!Object(W.isNil)(e._apiRef)})),Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){var n=t.mode,i=t.number,a=n===G.a.Locked;if(a){var o=parseInt(i,10),r=isNaN(o)?1:o,s=isNaN(o)?void 0:o;e._apiRef.send(V.a.QuizReset),e._apiRef.send(V.a.QuizSet,{locked:a,startNumber:r,endNumber:s}),e._apiRef.send(V.a.QuizEnter)}else e._apiRef.send(V.a.QuizSet,{locked:a}),e._apiRef.send(V.a.QuizExit)}))}},{key:"updateWidget",value:function(e){this.width=e.width,this.height=e.height,this.scalable=e.scalable,this.setLabelScale(e.labelScale),this.setWidgetUIConfig(e.options),this.setWidgetBackground(this.options.backgroundColor||this.defaultBackgroundColor)}},{key:"setWidgetUIConfig",value:function(e){if(this._apiRef&&e){var t=this.convertWidgetOptionsToDisplayParams(e);this.setUIDisplay(t);var n=(r=e.initial).button?H.a.Button:r.handHint?H.a.Hand:r.play?H.a.Play:void 0,i=(o=e.disableScroll).alert?Q.a.DoNotCaptureShowMessage:o.overlay?Q.a.DoNotCapture:Q.a.Capture,a={enabled:e.uiTutorial};this._apiRef.send(V.a.UISetOndemand,{enabled:!e.autoLoad}),this._apiRef.send(V.a.UISetLoadingExperience,n),this._apiRef.send(V.a.UISetScrollCaptureMode,i),this._apiRef.send(V.a.UISetTutorial,a),this.widgetOptionsSubject.next(e)}var o,r}},{key:"takeSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"jpeg",t=arguments.length>1?arguments[1]:void 0;return this.getAPIData(V.a.UISnapshot,Object.assign({width:this.width,height:this.height,fileType:e},t))}},{key:"setCameraOrbit",value:function(e){this.sendAPIData(V.a.CameraOrbit,{yaw:e})}},{key:"setWidgetBackground",value:function(e){this._apiRef&&e&&this.sendAPIData(V.a.UIPresetBackground,e)}},{key:"setLabelScale",value:function(e){this._apiRef&&this.sendAPIData(V.a.LabelsSetScale,{scale:e})}},{key:"setupCameraTracking",value:function(){var e=this;this.getCurrentCamera().pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){e.setDefaultCamera(t),e.getCameraUpdates().pipe(Object(I.a)(e.ngUnsubscribe)).subscribe((function(t){e.setUpdateCamera(t)}))}))}},{key:"setupCameraRotation",value:function(){var e=this,t=performance.now();Object(A.a)(0,F.a).pipe(Object(E.a)((function(){return!!e._rotateDegrees})),Object(D.a)((function(){return e._rotateDegrees*(performance.now()-t)*.001})),Object(N.a)((function(){return t=performance.now()})),Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){e.setCameraOrbit(t)}))}},{key:"setDefaultCamera",value:function(e){this._defaultCamera=e,this.setUpdateCamera(e)}},{key:"setUpdateCamera",value:function(e){this._currentCamera=e;var t=this.cameraService.areCamerasEqual(this.cameraService.roundCamera(this._defaultCamera,3),this.cameraService.roundCamera(this._currentCamera,3));this.cameraUpdated.emit(t?null:this._currentCamera)}},{key:"getAPIEvent",value:function(e){var t=this;return new _.a((function(n){t._apiRef.on(e,(function(e){n.next(e)}))}))}},{key:"getAPIData",value:function(e,t){var n=this;return new _.a((function(i){n._apiRef.send(e,t,(function(e){i.next(e),i.complete()}))}))}},{key:"sendAPIData",value:function(e,t){this._apiRef.send(e,t)}},{key:"getCurrentCamera",value:function(){return this.getAPIData(V.a.CameraInfo).pipe(Object(D.a)((function(e){return{eye:e.position,look:e.target,up:e.up}})))}},{key:"getModelBackgroundColor",value:function(){return this.getAPIData(V.a.UIGetBackground).pipe(Object(D.a)((function(e){var t;return e?new R.a(u((t=[]).concat.apply(t,u(e.colors))),e.gradientType,e.colorStops):null})))}},{key:"getCameraUpdates",value:function(){return this.getAPIEvent(B.a.CameraUpdated).pipe(Object(D.a)((function(e){return{eye:e.position,look:e.target,up:e.up}})))}},{key:"setUIDisplay",value:function(e){this._apiRef.send(V.a.UISetDisplay,e)}},{key:"getLayers",value:function(){return this.getAPIData(V.a.SceneGetLayers)}},{key:"convertWidgetOptionsToDisplayParams",value:function(e){return{info:e.uiInfo,search:e.uiSearch,undo:e.uiUndo,fullscreen:e.uiFullscreen,nav:e.uiNav,tools:e.uiTools,help:e.uiHelp,chapterList:e.uiChapterList,labelList:e.uiLabelList,anatomyDescriptions:e.uiAnatomyDescriptions,legend:e.uiLegend,loader:e.uiLoader,whiteboard:e.uiWhiteboard,visibilityLayers:e.uiVisibilityLayers,anatomyLabels:e.uiAnatomyLabels}}}]),e}()).\u0275fac=function(e){return new(e||a)(O.Pb(O.m),O.Pb(z.a),O.Pb(O.i))},a.\u0275cmp=O.Jb({type:a,selectors:[["app-publish-widget"]],viewQuery:function(e,t){var n;1&e&&(O.Jc(Z,!0),O.Jc(J,!0)),2&e&&(O.xc(n=O.dc())&&(t.containerRef=n.first),O.xc(n=O.dc())&&(t.frameRef=n.first))},inputs:{model:"model",options:"options"},outputs:{cameraUpdated:"cameraUpdated"},decls:5,vars:17,consts:[[1,"widget"],["widgetContainer",""],[1,"widget__container"],["appEmbedSrc","","allowfullscreen","","id","widget-frame",1,"widget__frame",3,"model","width","height"],["widgetFrame",""]],template:function(e,t){1&e&&(O.Vb(0,"div",0,1),O.Vb(2,"div",2),O.Qb(3,"iframe",3,4),O.Ub(),O.Ub()),2&e&&(O.Db(2),O.Kc("width",t.width+"px")("height",t.height+"px")("top",t.topOffset+"px")("left",t.leftOffset+"px")("transform","scale("+t.scaleFactor+")"),O.Db(1),O.Kc("width",t.width+"px")("height",t.height+"px"),O.mc("model",t.model)("width",t.width)("height",t.height))},directives:[X],styles:[".widget[_ngcontent-%COMP%]{display:block;width:100%;height:100%;position:relative}.widget__container[_ngcontent-%COMP%]{position:absolute;padding:8px}.widget__frame[_ngcontent-%COMP%]{display:block;width:100%;height:100%;box-shadow:0 0 0 1px #eaeff5}"],changeDetection:0}),a),$=n("zKvh"),Y=n("stSV"),ee=n("4qFM"),te=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:700,height:550},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;h(this,e),this.dimensions=t,this.imageType=n,this.labelScale=i},ne=n("b36G"),ie=n("gw9s"),ae=n("Xk3F"),oe=n("Kzh2"),re=n("ZR5G"),se=n("QtmD"),ce=n("nclC"),ue=n("MuXT"),le=n("dNgK"),pe=n("UdTj"),de=n("QibW"),ge=n("bSwM"),he=n("Y8QC"),fe=n("awCs"),be=n("STbY"),me=n("Qu3c"),ye=n("RGY+"),ve=function e(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;h(this,e),this.red=t,this.green=n,this.blue=i,this.alpha=a},ke=n("V7wM"),Oe=n("R9Cn"),Se=((o=function(){function e(){h(this,e),this.size="normal",this.colorSelected=new O.p,this.colorHexSelected=new O.p}return b(e,[{key:"colorHex",get:function(){return this.getHexFromColor(this.color)}},{key:"backgroundCSS",get:function(){if(this.color){var e=this.color,t=e.red,n=e.green,i=e.blue,a=e.alpha;return"rgba(".concat(255*t,", ").concat(255*n,", ").concat(255*i,", ").concat(a,")")}return""}},{key:"ngOnInit",value:function(){}},{key:"handleColorPickerChange",value:function(e){var t=e?this.getColorFromHex(e):null;this.colorSelected.emit(t),this.colorHexSelected.emit(e)}},{key:"getColorFromHex",value:function(e){var t=ke.a.hexToRgba(e,!0);return new ve(t[0],t[1],t[2],t[3])}},{key:"getHexFromColor",value:function(e){if(e){var t=e.red,n=e.green,i=e.blue,a=e.alpha;return ke.a.rgbaToHex([t,n,i,a],!0)}return""}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=O.Jb({type:o,selectors:[["app-color-picker"]],inputs:{color:"color",size:"size",alphaEnabled:"alphaEnabled"},outputs:{colorSelected:"colorSelected",colorHexSelected:"colorHexSelected"},decls:1,vars:11,consts:[[1,"picker",3,"colorPicker","cpAlphaChannel","cpOutputFormat","colorPickerChange"]],template:function(e,t){1&e&&(O.Vb(0,"div",0),O.cc("colorPickerChange",(function(e){return t.handleColorPickerChange(e)})),O.Ub()),2&e&&(O.Kc("background",t.backgroundCSS),O.Hb("picker--small","small"===t.size)("picker--normal","normal"===t.size)("picker--large","large"===t.size),O.mc("colorPicker",t.colorHex)("cpAlphaChannel",t.alphaEnabled?"always":"disabled")("cpOutputFormat","hex"))},directives:[Oe.a],styles:[".picker[_ngcontent-%COMP%]{display:inline-block;width:32px;height:32px;border-radius:50%;border:1px solid #61779e;background-color:transparent}.picker--small[_ngcontent-%COMP%]{width:24px;height:24px}.picker--large[_ngcontent-%COMP%]{width:48px;height:48px}"],changeDetection:0}),o),xe=n("XoCC"),Ce=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},we=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},je=["imageTabs"];function Pe(e,t){if(1&e&&(O.Vb(0,"fieldset",3),O.Vb(1,"legend",17),O.Pc(2,"3D Embeddable Dimensions"),O.Ub(),O.Vb(3,"app-form-field",52),O.Qb(4,"input",53),O.Vb(5,"div",54),O.Pc(6),O.Ub(),O.Ub(),O.Vb(7,"app-form-field",55),O.Qb(8,"input",56),O.Vb(9,"div",54),O.Pc(10),O.Ub(),O.Ub(),O.Ub()),2&e){var n=t.ngIf;O.Db(3),O.mc("isCompact",!0),O.Db(1),O.mc("min",n.width),O.Eb("aria-label","Width"),O.Db(2),O.Rc("Min. ",n.width,"px"),O.Db(1),O.mc("isCompact",!0),O.Db(1),O.mc("min",n.height),O.Eb("aria-label","Height"),O.Db(2),O.Rc("Min. ",n.height,"px")}}function _e(e,t){if(1&e&&(O.Vb(0,"app-panel",50),O.Nc(1,Pe,11,8,"fieldset",51),O.hc(2,"async"),O.Ub()),2&e){var n=O.gc(2);O.Db(1),O.mc("ngIf",O.ic(2,1,n.minDimensions$))}}function Me(e,t){if(1&e&&(O.Vb(0,"option",67),O.Pc(1),O.Ub()),2&e){var n=t.index;O.mc("value",n+1),O.Db(1),O.Rc(" ",n+1," ")}}function Ie(e,t){if(1&e&&(O.Vb(0,"app-panel",57),O.Vb(1,"div",58),O.Vb(2,"mat-checkbox",59),O.Pc(3,"Assessment Mode"),O.Ub(),O.Vb(4,"div",60),O.Vb(5,"mat-radio-group",61),O.Vb(6,"mat-radio-button",62),O.Pc(7,"All questions"),O.Ub(),O.Vb(8,"div",63),O.Vb(9,"mat-radio-button",64),O.Pc(10,"Single question"),O.Ub(),O.Vb(11,"select",65),O.Nc(12,Me,2,2,"option",66),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub()),2&e){var n=O.gc(2);O.mc("isCompact",!0)("formGroup",n.formQuiz),O.Db(12),O.mc("ngForOf",n.quizQuestions)}}function Te(e,t){1&e&&(O.Vb(0,"mat-checkbox",68),O.Pc(1,"Layers"),O.Ub())}function Ue(e,t){1&e&&(O.Vb(0,"div",69),O.Vb(1,"mat-checkbox",36),O.Pc(2,'Show "Click to Interact" hint'),O.Ub(),O.Vb(3,"div",37),O.Vb(4,"mat-radio-group",38),O.Vb(5,"mat-radio-button",70),O.Pc(6,"Button"),O.Ub(),O.Vb(7,"mat-radio-button",71),O.Pc(8,"Animated hand"),O.Ub(),O.Vb(9,"mat-radio-button",72),O.Pc(10,"Play"),O.Ub(),O.Ub(),O.Ub(),O.Ub())}function Le(e,t){1&e&&(O.Vb(0,"app-form-field",73),O.Qb(1,"input",74),O.Ub()),2&e&&(O.mc("isCompact",!0),O.Db(1),O.Eb("aria-label","Degrees"))}function ze(e,t){if(1&e&&(O.Tb(0,12),O.Nc(1,_e,3,3,"app-panel",13),O.hc(2,"async"),O.Nc(3,Ie,13,3,"app-panel",14),O.Vb(4,"app-panel",15),O.Vb(5,"fieldset",16),O.Vb(6,"legend",17),O.Pc(7,"Display Options"),O.Ub(),O.Vb(8,"mat-checkbox",18),O.Pc(9,"Information Panel"),O.Ub(),O.Vb(10,"mat-checkbox",19),O.Pc(11,"Anatomy Descriptions"),O.Ub(),O.Vb(12,"mat-checkbox",20),O.Pc(13,"Search"),O.Ub(),O.Vb(14,"mat-checkbox",21),O.Pc(15,"3D Navigation"),O.Ub(),O.Vb(16,"mat-checkbox",22),O.Pc(17,"Explore Toolbar"),O.Ub(),O.Vb(18,"mat-checkbox",23),O.Pc(19,"Undo"),O.Ub(),O.Vb(20,"mat-checkbox",24),O.Pc(21,"Fullscreen"),O.Ub(),O.Vb(22,"mat-checkbox",25),O.Pc(23,"Help"),O.Ub(),O.Vb(24,"mat-checkbox",26),O.Pc(25,"Draw"),O.Ub(),O.Vb(26,"mat-checkbox",27),O.Pc(27,"Anatomy Labels"),O.Ub(),O.Vb(28,"mat-checkbox",28),O.Pc(29,"Label List"),O.Ub(),O.Nc(30,Te,2,0,"mat-checkbox",29),O.Ub(),O.Ub(),O.Vb(31,"app-panel",30),O.Vb(32,"fieldset"),O.Vb(33,"legend",31),O.Pc(34,"Pre-Load"),O.Ub(),O.Vb(35,"div"),O.Vb(36,"mat-checkbox",32,33),O.Pc(38,"Auto-load"),O.Ub(),O.Ub(),O.Nc(39,Ue,11,0,"div",34),O.Vb(40,"div",35),O.Vb(41,"mat-checkbox",36),O.Pc(42,"Loading Progress Indicator"),O.Ub(),O.Vb(43,"div",37),O.Vb(44,"mat-radio-group",38),O.Vb(45,"mat-radio-button",39),O.Pc(46,"Bar"),O.Ub(),O.Vb(47,"mat-radio-button",40),O.Pc(48,"Circle"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(49,"fieldset"),O.Vb(50,"legend",41),O.Pc(51,"Post-Load"),O.Ub(),O.Vb(52,"div",42),O.Vb(53,"mat-checkbox",36,43),O.Pc(55,"Rotate 3D Model"),O.Ub(),O.Nc(56,Le,2,2,"app-form-field",44),O.Ub(),O.Vb(57,"div",45),O.Vb(58,"mat-checkbox",46),O.Pc(59,"Getting Started Tutorial"),O.Ub(),O.Ub(),O.Vb(60,"div",47),O.Vb(61,"mat-checkbox",36),O.Pc(62,"Disable scroll wheel zooming"),O.Ub(),O.Vb(63,"div",37),O.Vb(64,"mat-radio-group",38),O.Vb(65,"mat-radio-button",48),O.Pc(66,"Show alert"),O.Ub(),O.Vb(67,"mat-radio-button",49),O.Pc(68,"Do not show alert"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Sb()),2&e){var n=O.yc(37),i=O.yc(54),a=O.gc();O.mc("formGroup",a.formEmbed),O.Db(1),O.mc("ngIf",O.ic(2,6,a.dimensions$)),O.Db(2),O.mc("ngIf",a.quizQuestions.length>0),O.Db(27),O.mc("ngIf",a.hasVisibilityLayers()),O.Db(9),O.mc("ngIf",n.checked),O.Db(17),O.mc("ngIf",i.checked)}}function Ae(e,t){if(1&e){var n=O.Wb();O.Vb(0,"button",104),O.cc("click",(function(){O.Cc(n);var e=t.$implicit;return O.gc(2).handleSnapshotSizeClick(e)})),O.Pc(1),O.Ub()}if(2&e){var i=t.$implicit,a=O.gc(2);O.Db(1),O.Rc(" ",a.formatScreenSizeText(i)," ")}}function Fe(e,t){if(1&e){var n=O.Wb();O.Tb(0,12),O.Vb(1,"app-panel",75),O.Vb(2,"app-tabs",76,77),O.Vb(4,"app-tab",78),O.Vb(5,"button",79),O.Pc(6),O.Qb(7,"app-icon",80),O.Ub(),O.Vb(8,"mat-menu",null,81),O.Nc(10,Ae,2,1,"button",82),O.Ub(),O.Vb(11,"fieldset",83),O.Vb(12,"legend",17),O.Pc(13,"Image Dimensions Pixels"),O.Ub(),O.Vb(14,"app-form-field",52),O.Qb(15,"input",84),O.Vb(16,"div",54),O.Pc(17),O.Ub(),O.Ub(),O.Vb(18,"app-form-field",55),O.Qb(19,"input",85),O.Vb(20,"div",54),O.Pc(21),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(22,"app-tab",86),O.Vb(23,"fieldset",87),O.Vb(24,"legend",17),O.Pc(25,"Image Dimensions Inches"),O.Ub(),O.Vb(26,"app-form-field",52),O.Qb(27,"input",88),O.Vb(28,"div",54),O.Pc(29),O.Ub(),O.Ub(),O.Vb(30,"app-form-field",89),O.Qb(31,"input",90),O.Vb(32,"div",54),O.Pc(33),O.Ub(),O.Ub(),O.Ub(),O.Vb(34,"div",91),O.Pc(35,"Images are published at 300 dpi"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(36,"app-panel",92),O.Vb(37,"div",3),O.Vb(38,"mat-radio-group",93),O.Vb(39,"mat-radio-button",94),O.Pc(40,"JPEG"),O.Ub(),O.Vb(41,"mat-radio-button",95),O.Pc(42,"PNG"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Vb(43,"app-panel",96),O.Vb(44,"div",3),O.Qb(45,"app-slider",97),O.Vb(46,"button",98),O.cc("click",(function(){return O.Cc(n),O.gc().handleResetScale()})),O.Pc(47," Reset "),O.Ub(),O.Ub(),O.Ub(),O.Vb(48,"app-panel",99),O.Vb(49,"div",3),O.Vb(50,"app-color-picker",100),O.cc("colorSelected",(function(e){return O.Cc(n),O.gc().handleSnapshotBackgroundSelected(e)})),O.Ub(),O.Vb(51,"button",101),O.cc("click",(function(){return O.Cc(n),O.gc().handleSnapshotBackgroundSelected(null)})),O.Pc(52," Reset "),O.Ub(),O.Ub(),O.Ub(),O.Vb(53,"div",102),O.Vb(54,"a",103),O.Pc(55,"Read about our Terms of Use"),O.Ub(),O.Ub(),O.Sb()}if(2&e){var i=O.yc(9),a=O.gc();O.mc("formGroup",a.formSnapshot),O.Db(5),O.mc("uppercase",!1)("matMenuTriggerFor",i),O.Db(1),O.Rc(" ",a.formatScreenSizeText(a.selectedSnapshotSize)," "),O.Db(4),O.mc("ngForOf",a.snapshotSizes),O.Db(4),O.mc("isCompact",!0),O.Db(1),O.mc("min",a.minSnapshotPixels.width)("max",a.maxSnapshotPixels.width),O.Eb("aria-label","Width"),O.Db(2),O.Sc(" ",a.minSnapshotPixels.width,"px to ",a.maxSnapshotPixels.width,"px "),O.Db(1),O.mc("isCompact",!0),O.Db(1),O.mc("min",a.minSnapshotPixels.height)("max",a.maxSnapshotPixels.height),O.Eb("aria-label","Height"),O.Db(2),O.Sc(" ",a.minSnapshotPixels.height,"px to ",a.maxSnapshotPixels.height,"px "),O.Db(5),O.mc("isCompact",!0),O.Db(1),O.mc("min",a.minSnapshotInches.width)("max",a.maxSnapshotInches.width),O.Eb("aria-label","Width"),O.Db(2),O.Sc(" ",a.minSnapshotInches.width,'" to ',a.maxSnapshotInches.width,'" '),O.Db(1),O.mc("isCompact",!0),O.Db(1),O.mc("min",a.minSnapshotInches.height)("max",a.maxSnapshotInches.height),O.Eb("aria-label","Height"),O.Db(2),O.Sc(" ",a.minSnapshotInches.height,'" to ',a.maxSnapshotInches.height,'" '),O.Db(5),O.Eb("aria-label","Image Type"),O.Db(1),O.mc("value",a.imageTypeEnum.JPEG),O.Db(2),O.mc("value",a.imageTypeEnum.PNG),O.Db(4),O.mc("label","Label scale"),O.Db(1),O.Eb("aria-label","Reset scale"),O.Db(4),O.mc("color",a.snapshotBackgroundColor),O.Db(1),O.Eb("aria-label","Reset background color")}}function De(e,t){1&e&&(O.Vb(0,"p",111),O.Pc(1," Make this model available to anyone by publishing it to the web. "),O.Ub())}function Ee(e,t){1&e&&(O.Vb(0,"p",111),O.Pc(1," Your content has been saved to "),O.Vb(2,"strong",112),O.Pc(3,"My Library > Private."),O.Ub(),O.Qb(4,"br"),O.Pc(5," Share a direct link or copy the embed code to use on your website. "),O.Ub())}function Ne(e,t){if(1&e){var n=O.Wb();O.Vb(0,"div"),O.Nc(1,De,2,0,"p",107),O.Nc(2,Ee,6,0,"p",107),O.Vb(3,"div",108),O.Vb(4,"button",109),O.cc("click",(function(){return O.Cc(n),O.gc(2).handleGenerateIFrame()})),O.Pc(5," Copy embed "),O.Ub(),O.Vb(6,"button",110),O.cc("click",(function(){return O.Cc(n),O.gc(2).handleGenerateURL()})),O.Pc(7," Copy URL "),O.Ub(),O.Ub(),O.Ub()}if(2&e){var i=O.gc(2);O.Db(1),O.mc("ngIf",i.model.id===i.modelToPublish.id),O.Db(1),O.mc("ngIf",i.model.id!==i.modelToPublish.id),O.Db(2),O.mc("disabled",!i.formEmbed.valid),O.Db(2),O.mc("disabled",!i.formEmbed.valid)}}function Re(e,t){1&e&&(O.Vb(0,"p",116),O.Pc(1," Save this model to "),O.Vb(2,"strong",112),O.Pc(3,"My Library"),O.Ub(),O.Pc(4," to make it available for anyone, by publishing it to the web. "),O.Ub())}function Ve(e,t){1&e&&(O.Vb(0,"p",116),O.Pc(1," You can manage this saved model at anytime in "),O.Qb(2,"br"),O.Vb(3,"strong",112),O.Pc(4,"My Library > Private > All Models."),O.Ub(),O.Ub())}function Be(e,t){1&e&&O.Qb(0,"app-spinner",117)}function He(e,t){if(1&e){var n=O.Wb();O.Nc(0,Re,5,0,"p",113),O.hc(1,"async"),O.Nc(2,Ve,5,0,"p",113),O.hc(3,"async"),O.Vb(4,"div",108),O.Vb(5,"button",114),O.cc("click",(function(){return O.Cc(n),O.gc(2).handleSaveClick()})),O.hc(6,"async"),O.Pc(7),O.hc(8,"async"),O.Nc(9,Be,1,0,"app-spinner",115),O.hc(10,"async"),O.Ub(),O.Ub()}if(2&e){var i=O.gc(2);O.mc("ngIf",!1===O.ic(1,5,i.copying$)),O.Db(2),O.mc("ngIf",!0===O.ic(3,7,i.copying$)),O.Db(3),O.mc("disabled",O.ic(6,9,i.copying$)),O.Db(2),O.Rc(" ",!0===O.ic(8,11,i.copying$)?"Saving to My Library":"Save & Publish"," "),O.Db(2),O.mc("ngIf",O.ic(10,13,i.copying$))}}function Qe(e,t){if(1&e&&(O.Tb(0),O.Nc(1,Ne,8,4,"div",105),O.Nc(2,He,11,15,"ng-template",null,106,O.Oc),O.Sb()),2&e){var n=O.yc(3),i=O.gc();O.Db(1),O.mc("ngIf",!i.requiresSave)("ngIfElse",n)}}function Ge(e,t){if(1&e){var n=O.Wb();O.Tb(0),O.Vb(1,"p",111),O.Pc(2," Download this image or make it available to anyone by publishing it to the web. "),O.Ub(),O.Vb(3,"div",108),O.Vb(4,"button",118),O.cc("click",(function(){return O.Cc(n),O.gc().handleDownloadSnapClick()})),O.Pc(5," Download "),O.Ub(),O.Vb(6,"button",119),O.cc("click",(function(){return O.Cc(n),O.gc().handleCopyImageURL()})),O.Pc(7," Copy URL "),O.Ub(),O.Vb(8,"button",120),O.cc("click",(function(){return O.Cc(n),O.gc().handleGenerateImage()})),O.Pc(9," Copy Embed "),O.Ub(),O.Ub(),O.Sb()}if(2&e){var i=O.gc();O.Db(4),O.mc("disabled",!i.formSnapshot.valid),O.Db(2),O.mc("disabled",!i.formSnapshot.valid),O.Db(2),O.mc("disabled",!i.formSnapshot.valid)}}var We,qe={title:"Small",type:"desktop",dimensions:{width:480,height:320},orientation:"horizontal"},Xe={title:"Medium",type:"desktop",dimensions:{width:700,height:550},orientation:"horizontal"},Ze={title:"Large",type:"desktop",dimensions:{width:1920,height:1200},orientation:"horizontal"},Je={title:"Extra Large",type:"desktop",dimensions:{width:2560,height:1440},orientation:"horizontal"},Ke={title:"Maximum",type:"desktop",dimensions:{width:5120,height:2880},orientation:"horizontal"},$e=((We=function(){function e(t,n,i,a,o,r,s,c,u,l){h(this,e),this.store=t,this.actions=n,this.publishService=i,this.storageService=a,this.clipboardService=o,this.dialogService=r,this.storyService=s,this.snackBar=c,this.formBuilder=u,this.changeDetectorRef=l,this.minSnapshotPixels={width:300,height:300},this.maxSnapshotPixels={width:5120,height:2880},this.minSnapshotInches={width:this.pixelsToInches(this.minSnapshotPixels.width),height:this.pixelsToInches(this.minSnapshotPixels.height)},this.maxSnapshotInches={width:this.pixelsToInches(this.maxSnapshotPixels.width),height:this.pixelsToInches(this.maxSnapshotPixels.height)},this.imageTypeEnum=$.a,this.snapshotSizes=[qe,Xe,Ze,Je,Ke],this.selectedSnapshotSize=Xe,this.quizQuestions=[],this.submit=new j.a,this.requiresSave=!1,this.ngUnsubscribe=new j.a,this.defaultWidgetOptions=Object.assign(Object.assign({},new d.a),{loadRotate:10}),this.initFormGroupMode(),this.initSnapshotForm(),this.initEmbedForm()}return b(e,[{key:"rotateEnabled",get:function(){return this.formEmbed.get("rotate").value.enabled}},{key:"mode",get:function(){return this.formModeGroup.get("mode").value}},{key:"widgetBackgroundColor",get:function(){return"2d"===this.mode?this.snapshotBackgroundColor:this.embedBackgroundColor}},{key:"widgetScalable",get:function(){return"2d"===this.mode}},{key:"imageType",get:function(){return this.formSnapshot.get("imageType").value}},{key:"publishWidgetOptions",get:function(){if(this.formEmbed&&this.formSnapshot)switch(this.mode){case"3d":return this.widgetEmbedSettings;case"2d":return this.widgetSnapshotSettings}return null}},{key:"widgetEmbedSettings",get:function(){var e=this.formEmbed.get("dimensions"),t=this.formEmbed.value.options||{};return{width:e.get("width").value,height:e.get("height").value,labelScale:1,scalable:!1,backgroundColor:this.embedBackgroundColor,options:t}}},{key:"widgetSnapshotSettings",get:function(){var e=this.formSnapshot.get("dimensions"),t=this.formSnapshot.get("labelScale"),n=new d.a;return n.uiTools=!1,n.uiInfo=!1,n.uiNav=!1,n.uiMenu=!1,n.uiAudio=!1,n.uiUndo=!1,n.uiSearch=!1,n.uiWhiteboard=!1,n.uiFullscreen=!1,{width:e.get("width").value,height:e.get("height").value,labelScale:t.value,scalable:!0,backgroundColor:this.snapshotBackgroundColor,options:n}}},{key:"ngOnInit",value:function(){this.model.type===re.a.Module&&Object(W.isNil)(this.model.module_accessor_level)&&(this.requiresSave=!0),this.initColors(),this.initQuizForm(),this.initQuizFormListeners(),this.initActionListeners(),this.setupEmbedForm(),this.setupSnapshotForm(),this.initCopy(),this.store.dispatch(new w.p(!0))}},{key:"ngOnDestroy",value:function(){this.store.dispatch(new w.p(!1)),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initCopy",value:function(){var e=this;this.actions.pipe(Object(r.l)(m.l),Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){return e.handleCopySuccess(t)})),this.actions.pipe(Object(r.l)(m.k),Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){return e.handleCopyFailure(t)})),this.submit.pipe(Object(T.a)(100),Object(I.a)(this.ngUnsubscribe)).subscribe((function(){return e.onDebouncedSubmit()})),this.modelToPublish=this.model}},{key:"initFormGroupMode",value:function(){this.formModeGroup=this.formBuilder.group({mode:["3d",M.C.required]})}},{key:"initSnapshotForm",value:function(){var e=this.readSnapshotOptions();this.formSnapshot=this.formBuilder.group({dimensions:this.formBuilder.group({width:[e.dimensions.width,[M.C.required,M.C.min(this.minSnapshotPixels.width),M.C.max(this.maxSnapshotPixels.width)]],height:[e.dimensions.height,[M.C.required,M.C.min(this.minSnapshotPixels.height),M.C.max(this.maxSnapshotPixels.height)]]}),inches:this.formBuilder.group({width:[this.pixelsToInches(e.dimensions.width),[M.C.required,M.C.min(this.minSnapshotInches.width),M.C.max(this.maxSnapshotInches.width)]],height:[this.pixelsToInches(e.dimensions.height),[M.C.required,M.C.min(this.minSnapshotInches.height),M.C.max(this.maxSnapshotInches.height)]]}),imageType:[e.imageType,[M.C.required]],labelScale:[e.labelScale||1,[M.C.required]]}),this.updateSnapshotPreset()}},{key:"initEmbedForm",value:function(){var e=this.getWidgetOptions(),t=this.store.selectSnapshot(g.a.getDimensions),n=this.store.selectSnapshot(g.a.getMinDimensions),i=e.initial,a=i.button,o=i.handHint,r=i.play,s=e.disableScroll,c=s.alert,u=s.overlay;this.formEmbed=this.formBuilder.group({dimensions:this.formBuilder.group({width:[t.width,[M.C.min(n.width)]],height:[t.height,[M.C.min(n.height)]]}),options:this.formBuilder.group(e),loader:this.formBuilder.group({enabled:e.uiLoader!==Y.a.None,mode:e.uiLoader}),rotate:this.formBuilder.group({enabled:null!==e.loadRotate,value:e.loadRotate}),autoLoad:this.formBuilder.control(e.autoLoad),initial:this.formBuilder.group({enabled:e.autoLoad&&(a||o||r),mode:a?"button":o?r:""}),disableScroll:this.formBuilder.group({enabled:c||u,mode:c?"alert":u?"overlay":""})})}},{key:"initColors",value:function(){var e=this.getWidgetOptions(),t=Object(W.get)(e,"background.colors");t&&(this.embedBackgroundColor=this.getBackgroundFromColor({red:t[0],green:t[1],blue:t[2],alpha:t.length>3?t[3]:1}))}},{key:"initQuizForm",value:function(){var e=this;if(this.formQuiz=this.formBuilder.group({locked:[!1],options:this.formBuilder.group({mode:["all"],number:[1]})}),(this.model.tags||[]).includes(oe.a.Quiz)){var t=this.model,n=t.id,i=t.type;this.storyService.getStory(n,i).pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){e.quizQuestions=Object(ae.b)(t.chapters),e.changeDetectorRef.markForCheck()}))}}},{key:"initQuizFormListeners",value:function(){var e=this.formEmbed.get("options"),t=this.formQuiz.get("locked"),n=this.formQuiz.get("options"),i=n.get("mode"),a=n.get("number");this.formQuiz.valueChanges.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){var n,i,a=t.locked,o=t.options;if(a){var r=o.mode,s=o.number;n=G.a.Locked,i="single"===r?s:void 0}e.patchValue({uiQuiz:{mode:n,number:i}})})),t.valueChanges.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(e){e?n.enable():n.disable()})),a.valueChanges.pipe(Object(U.a)(),Object(I.a)(this.ngUnsubscribe)).subscribe((function(){!0===t.value&&"single"!==i.value&&i.setValue("single")})),t.setValue(!1)}},{key:"initActionListeners",value:function(){var e=this;this.actions.pipe(Object(r.l)(w.i),Object(y.a)((function(t){return e.copyToClipboard(t.url,"url")})),Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){e.snackBar.open(t?"Successfully copied link to clipboard.":"Unable to copy link to clipboard.")})),this.actions.pipe(Object(r.l)(w.c),Object(y.a)((function(t){return e.copyToClipboard(t.embed,"embed")})),Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){e.snackBar.open(t?"Successfully copied embed code to clipboard.":"Unable to copy embed code to clipboard.")})),this.actions.pipe(Object(r.l)(w.b),Object(I.a)(this.ngUnsubscribe)).subscribe((function(){e.snackBar.open("Unable to generate embed code.")})),this.actions.pipe(Object(r.l)(w.m),Object(y.a)((function(t){return e.copyToClipboard(t.imageURL,"url")})),Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){e.snackBar.open(t?"Successfully copied image URL to clipboard.":"Unable to copy image URL to clipboard.")})),this.actions.pipe(Object(r.l)(w.l),Object(I.a)(this.ngUnsubscribe)).subscribe((function(){e.snackBar.open("Unable to generate image URL.")})),this.actions.pipe(Object(r.l)(w.f),Object(y.a)((function(t){return e.copyToClipboard(t.embed,"embed")})),Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){e.snackBar.open(t?"Successfully copied image embed code to clipboard.":"Unable to copy image embed code to clipboard.")})),this.actions.pipe(Object(r.l)(w.e),Object(I.a)(this.ngUnsubscribe)).subscribe((function(){e.snackBar.open("Unable to generate embed code.")}))}},{key:"setupEmbedForm",value:function(){var e=this,t=this.formEmbed.get("options"),n=this.formEmbed.get("dimensions"),i=this.formEmbed.get("loader"),a=this.formEmbed.get("rotate"),o=this.formEmbed.get("initial"),r=this.formEmbed.get("disableScroll"),s=this.formEmbed.get("autoLoad"),c=i.get("enabled"),u=i.get("mode");c.valueChanges.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(e){u.patchValue(e?Y.c:Y.a.None)})),u.valueChanges.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(e){t.patchValue({uiLoader:e}),e!==Y.a.None&&c.patchValue(!0,{emitEvent:!1})}));var l=a.get("enabled"),p=a.get("value");l.valueChanges.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(n){n?p.patchValue("number"==typeof p.value?p.value:e.defaultWidgetOptions.loadRotate):t.patchValue({loadRotate:null})})),p.valueChanges.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(e){t.patchValue({loadRotate:e})})),s.valueChanges.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(e){t.patchValue({autoLoad:e}),e||o.patchValue({enabled:!1})})),o.get("enabled").valueChanges.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(e){o.patchValue({mode:e?"button":""})})),o.get("mode").valueChanges.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(e){o.patchValue({enabled:!!e},{emitEvent:!1}),t.patchValue({initial:{button:"button"===e,handHint:"handHint"===e,play:"play"===e}})})),r.get("enabled").valueChanges.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(e){r.patchValue({mode:e?"alert":""})})),r.get("mode").valueChanges.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(e){r.patchValue({enabled:!!e},{emitEvent:!1}),t.patchValue({disableScroll:{alert:"alert"===e,overlay:"overlay"===e}})})),n.valueChanges.pipe(Object(T.a)(300),Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){e.setScreenDimensions(t)})),this.dimensions$.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(e){n.setValue(e,{emitEvent:!1})})),t.valueChanges.pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(t){e.writeEmbedOptions(t)}))}},{key:"setupSnapshotForm",value:function(){var e=this,t=this.formSnapshot.get("dimensions"),n=this.formSnapshot.get("inches"),i=this.formSnapshot.get("labelScale");this.formSnapshot.valueChanges.pipe(Object(I.a)(this.ngUnsubscribe),Object(T.a)(50)).subscribe((function(t){e.labelScale=i.value;var n=Object(ne.plainToClass)(te,t);e.writeSnapshotOptions(n),e.updateSnapshotPreset(),e.changeDetectorRef.markForCheck()})),n.valueChanges.pipe(Object(T.a)(500),Object(I.a)(this.ngUnsubscribe)).subscribe((function(){var i=n.value,a=i.width,o=i.height;n.valid&&t.patchValue({width:e.inchesToPixels(a),height:e.inchesToPixels(o)})}))}},{key:"setScreenDimensions",value:function(e){this.store.dispatch(new w.n(e))}},{key:"handleGenerateIFrame",value:function(){this.generateIFrameCode()}},{key:"handleGenerateURL",value:function(){this.generateURL()}},{key:"handleCopyImageURL",value:function(){this.generateImageURL()}},{key:"handleGenerateImage",value:function(){this.generateImageCode()}},{key:"handleResetScale",value:function(){this.formSnapshot.get("labelScale").setValue(1)}},{key:"generateIFrameCode",value:function(){this.store.dispatch(new w.a(this.modelToPublish,this.formEmbed.value.options))}},{key:"generateURL",value:function(){this.store.dispatch(new w.g(this.modelToPublish,this.formEmbed.value.options))}},{key:"generateImageURL",value:function(){var e=this,t=this.imageType===$.a.PNG?"png":"jpeg";this.publishWidget.takeSnapshot(t).pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(n){e.store.dispatch(new w.k(n,t))}))}},{key:"generateImageCode",value:function(){var e=this,t=this.imageType===$.a.PNG?"png":"jpeg";this.publishWidget.takeSnapshot(t).pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(n){var i=new d.a;e.store.dispatch(new w.d(e.model,n,t,i))}))}},{key:"handleSnapshotBackgroundSelected",value:function(e){this.snapshotBackgroundColor=this.getBackgroundFromColor(e),this.changeDetectorRef.markForCheck()}},{key:"handleSnapshotSizeClick",value:function(e){this.selectedSnapshotSize=Object.assign({},e),this.formSnapshot.patchValue({dimensions:{width:e.dimensions.width,height:e.dimensions.height},inches:{width:this.pixelsToInches(e.dimensions.width),height:this.pixelsToInches(e.dimensions.height)}},{emitEvent:!1})}},{key:"handleDownloadSnapClick",value:function(){var e=this,t="Inches"===this.imageTabs.tabItems[this.imageTabs.activeTab].label?300:null;this.publishWidget.takeSnapshot(this.imageType===$.a.PNG?"png":"jpeg").pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(n){e.downloadImage(n,t)}))}},{key:"handleCopySuccess",value:function(e){this.snackBar.open('"'.concat(e.newBookmark.title,'" saved to your library.')),this.requiresSave=!1,this.modelToPublish=e.newBookmark}},{key:"handleCopyFailure",value:function(e){this.snackBar.open("There was an error adding to your library")}},{key:"handleSaveClick",value:function(){this.submit.next()}},{key:"copyToClipboard",value:function(e,t){var n=this;return this.clipboardService.copyToClipboard(e,t).pipe(Object(y.a)((function(t){return t?Object(P.a)(t):n.dialogService.openClipboardDialog(e).afterClosed()})))}},{key:"formatScreenSizeText",value:function(e){var t=e.title,n=e.dimensions;return"".concat(t," (").concat(n.width," x ").concat(n.height,")")}},{key:"hasVisibilityLayers",value:function(){return this.publishWidget.allVisibilityLayers.some((function(e){return Array.isArray(e)&&e.length>0}))}},{key:"onDebouncedSubmit",value:function(){var e=this.model,t={isOwner:!0,id:e?e.id:null,title:e.title},n=this.store.selectSnapshot(f.a.getUserLanguage);this.store.dispatch(new m.j(t.id,t.title,e.type,n))}},{key:"updateSnapshotPreset",value:function(){var e=this.formSnapshot.get("dimensions"),t=e.value,n=t.width,i=t.height;if(e.valid){var a=this.snapshotSizes.find((function(e){return e.dimensions.width===n&&e.dimensions.height===i}));this.selectedSnapshotSize=Object.assign(Object.assign({},this.selectedSnapshotSize),{title:a?a.title:"Custom",dimensions:{width:n,height:i}}),this.changeDetectorRef.markForCheck()}}},{key:"getBackgroundFromColor",value:function(e){var t=e?[e.red,e.green,e.blue,e.alpha]:null;return t?new R.a([].concat(u(t),u(t)),"radial",[0,100]):null}},{key:"getWidgetOptions",value:function(){var e=this.readEmbedOptions(),t=this.store.selectSnapshot(l.a.getWidgetOptions);if(e){var n=this.publishService.extendWidgetOptions(new d.a,e);return Object.assign(Object.assign({},n),{background:t?t.background:null})}return t||new d.a}},{key:"readEmbedOptions",value:function(){!function(e,t){var n=localStorage.getItem(L.b.WidgetOptions);if(null!==n){var i=JSON.parse(n);if(void 0!==i[e]&&(i[e].timestamp||0)<1573675067505){delete i[e];try{localStorage.setItem(L.b.WidgetOptions,JSON.stringify(i))}catch(a){}}}}(this.getStorageKey());var e=this.storageService.getLocalJSON(L.b.WidgetOptions);return e?e[this.getStorageKey()]:null}},{key:"writeEmbedOptions",value:function(e){var t=Object.assign({},e);delete t.uiQuiz;var n=Object.assign(Object.assign({},t),{timestamp:Date.now()}),i=this.storageService.getLocalJSON(L.b.WidgetOptions)||{};i[this.getStorageKey()]=n,this.storageService.setLocalItem(L.b.WidgetOptions,i)}},{key:"writeSnapshotOptions",value:function(e){var t=this.storageService.getLocalJSON(L.b.SnapshotOptions)||{};t[this.getStorageKey()]=e,this.storageService.setLocalItem(L.b.SnapshotOptions,t)}},{key:"readSnapshotOptions",value:function(){var e=this.storageService.getLocalJSON(L.b.SnapshotOptions);e=e?e[this.getStorageKey()]:{};var t=new te;return Object.assign(Object.assign({},t),e)}},{key:"getStorageKey",value:function(){return this.store.selectSnapshot(f.a.getUserProfile).eid}},{key:"downloadImage",value:function(e,t){var n=this,i=(this.model.title||"snapshot").replace(/ /g,"_").replace(/\W/g,"");ie.a.exportImage(e,this.imageType,"".concat(i,".").concat(this.imageType===$.a.PNG?"png":"jpg"),t).pipe(Object(I.a)(this.ngUnsubscribe)).subscribe((function(e){n.snackBar.open(e?"Successfuly downloaded image":"Unable to download image.")}))}},{key:"pixelsToInches",value:function(e){return parseFloat((e/300).toFixed(2))}},{key:"inchesToPixels",value:function(e){return 300*e}}]),e}()).\u0275fac=function(e){return new(e||We)(O.Pb(r.h),O.Pb(r.b),O.Pb(s.b),O.Pb(L.d),O.Pb(ce.a),O.Pb(c.a),O.Pb(ue.a),O.Pb(le.b),O.Pb(M.f),O.Pb(O.i))},We.\u0275cmp=O.Jb({type:We,selectors:[["app-publish"]],viewQuery:function(e,t){var n;1&e&&(O.Vc(je,!0,ee.a),O.Jc(K,!0)),2&e&&(O.xc(n=O.dc())&&(t.imageTabs=n.first),O.xc(n=O.dc())&&(t.publishWidget=n.first))},inputs:{model:"model"},decls:16,vars:9,consts:[[1,"publish","theme-light",3,"ngSwitch"],["data-test","publishOptions",1,"publish__options","text-12"],["label","Select a format to publish:",3,"formGroup"],[1,"publish__flex-group"],["formControlName","mode"],["value","3d",1,"mr-2"],["value","2d"],[3,"formGroup",4,"ngSwitchCase"],["data-test","publishActions",1,"publish__actions"],[4,"ngSwitchCase"],[1,"publish__embed",3,"model","options"],["publishWidget",""],[3,"formGroup"],["formGroupName","dimensions","label","Size",4,"ngIf"],["label","Quiz",3,"isCompact","formGroup",4,"ngIf"],["formGroupName","options","label","Display Options"],[1,"publish__group"],[1,"visually-hidden"],["formControlName","uiInfo"],["formControlName","uiAnatomyDescriptions"],["formControlName","uiSearch"],["formControlName","uiNav"],["formControlName","uiTools"],["formControlName","uiUndo"],["formControlName","uiFullscreen"],["formControlName","uiHelp"],["formControlName","uiWhiteboard"],["formControlName","uiAnatomyLabels"],["formControlName","uiLabelList"],["formControlName","uiVisibilityLayers",4,"ngIf"],["label","Loading Experience"],[1,"text-10","text-uppercase","text-dim","mb-2"],["formControlName","autoLoad"],["autoLoad",""],["formGroupName","initial","class","mb-2 ml-5",4,"ngIf"],["formGroupName","loader",1,"mb-2"],["formControlName","enabled"],[1,"m-1","ml-5"],["formControlName","mode",1,"publish__group"],["value","bar",1,"mv-1"],["value","circle",1,"mv-1"],[1,"text-10","text-uppercase","text-dim","mt-4","mb-2"],["formGroupName","rotate",1,"mb-1"],["rotate",""],["label","Degrees","theme","light",3,"isCompact",4,"ngIf"],["formGroupName","options"],["formControlName","uiTutorial"],["formGroupName","disableScroll"],["value","alert",1,"mv-1"],["value","overlay",1,"mv-1"],["formGroupName","dimensions","label","Size"],["class","publish__flex-group",4,"ngIf"],["label","Width","theme","light","display","block",1,"mr-6",3,"isCompact"],["type","number","formControlName","width",1,"publish__input","input","input--small",3,"min"],["form-field-help","",1,"mt-1"],["label","Height","theme","light","display","block",3,"isCompact"],["type","number","formControlName","height",1,"publish__input","input","input--small",3,"min"],["label","Quiz",3,"isCompact","formGroup"],[1,"mb-2"],["formControlName","locked","data-test","quizLocked"],["formGroupName","options","data-test","quizOptions",1,"m-1","ml-5"],["formControlName","mode",1,"flex","flex-column"],["value","all","data-test","quizOptionsAll"],[1,"flex","items-center"],["value","single","data-test","quizOptionsSingle"],["formControlName","number","data-test","quizOptionsNumber",1,"input","ml-3"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","uiVisibilityLayers"],["formGroupName","initial",1,"mb-2","ml-5"],["value","button",1,"mv-1"],["value","handHint",1,"mv-1"],["value","play",1,"mv-1"],["label","Degrees","theme","light",3,"isCompact"],["type","number","formControlName","value",1,"publish__input","input"],["label","Size"],["tabSize","medium","tabTheme","light"],["imageTabs",""],["label","Pixels"],["app-button","","buttonType","outline","buttonTheme","light",1,"mt-2",3,"uppercase","matMenuTriggerFor"],["icon","caret-down",1,"ml-1"],["imageSizes","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["formGroupName","dimensions",1,"publish__flex-group","mt-2"],["type","number","formControlName","width",1,"publish__input","input","input--small",3,"min","max"],["type","number","formControlName","height",1,"publish__input","input","input--small",3,"min","max"],["label","Inches"],["formGroupName","inches",1,"publish__flex-group","mt-2"],["type","number","formControlName","width","step",".01",1,"publish__input","input","input--small",3,"min","max"],["label","Height","theme","light","display","block",1,"mr-6",3,"isCompact"],["type","number","formControlName","height","step",".01",1,"publish__input","input","input--small",3,"min","max"],[1,"pt-2","text-small","text-dim"],["label","Image Type"],["formControlName","imageType"],["matTooltip","Smallest file size, best for most uses.",1,"mr-2",3,"value"],["matTooltip","Highest quality, best for print and offline use.",3,"value"],["label","Label Scale"],["theme","light","formControlName","labelScale","min","1","max","5","step","0.1",1,"flex-grow",3,"label"],["app-button","","buttonType","outline","buttonTheme","light",1,"ml-1",3,"click"],["label","Background Color"],["size","normal","alphaEnabled","false",1,"publish__picker",3,"color","colorSelected"],["app-button","","buttonType","outline","buttonTheme","light",3,"click"],[1,"mt-4"],["href","https://www.biodigital.com/terms","target","_blank",1,"text-link","text-underline"],["mat-menu-item","",3,"click"],[4,"ngIf","ngIfElse"],["saveTemplate",""],["class","text-12 p-2 mt-2 mb-2",4,"ngIf"],[1,"publish__actions-content"],["app-button","","buttonType","flat","buttonTheme","light","data-test","copyEmbed3D",1,"mb-2","w-100",3,"disabled","click"],["app-button","","buttonType","flat","buttonTheme","light","data-test","copyURL3D",1,"w-100",3,"disabled","click"],[1,"text-12","p-2","mt-2","mb-2"],[1,"text-semibold"],["class","text-12 p-2 mt-2 mb-2 text-light",4,"ngIf"],["app-button","","buttonType","primary","buttonTheme","light","data-test","saveToMyLibrary",1,"mb-2","w-100",3,"disabled","click"],["size","medium","class","ml-2","render","inline",4,"ngIf"],[1,"text-12","p-2","mt-2","mb-2","text-light"],["size","medium","render","inline",1,"ml-2"],["app-button","","buttonType","flat","buttonTheme","light","data-test","download2D",1,"mb-2","w-100",3,"disabled","click"],["app-button","","buttonType","flat","buttonTheme","light","data-test","copyURL2D",1,"mb-2","w-100",3,"disabled","click"],["app-button","","buttonType","flat","buttonTheme","light","data-test","copyEmbed2D",1,"w-100",3,"disabled","click"]],template:function(e,t){1&e&&(O.Vb(0,"div",0),O.Vb(1,"div",1),O.Vb(2,"app-panel",2),O.Vb(3,"div",3),O.Vb(4,"mat-radio-group",4),O.Vb(5,"mat-radio-button",5),O.Pc(6,"3D Embeddable"),O.Ub(),O.Vb(7,"mat-radio-button",6),O.Pc(8,"Image"),O.Ub(),O.Ub(),O.Ub(),O.Ub(),O.Nc(9,ze,69,8,"ng-container",7),O.Nc(10,Fe,56,36,"ng-container",7),O.Ub(),O.Vb(11,"div",8),O.Nc(12,Qe,4,2,"ng-container",9),O.Nc(13,Ge,10,3,"ng-container",9),O.Ub(),O.Qb(14,"app-publish-widget",10,11),O.Ub()),2&e&&(O.mc("ngSwitch",t.mode),O.Db(2),O.mc("formGroup",t.formModeGroup),O.Db(2),O.Eb("aria-label","Publish Format"),O.Db(5),O.mc("ngSwitchCase","3d"),O.Db(1),O.mc("ngSwitchCase","2d"),O.Db(2),O.mc("ngSwitchCase","3d"),O.Db(1),O.mc("ngSwitchCase","2d"),O.Db(1),O.mc("model",t.model)("options",t.publishWidgetOptions))},directives:[S.r,pe.a,M.s,M.j,de.b,M.r,M.i,de.a,S.s,K,S.p,M.k,ge.a,he.a,M.w,M.c,M.B,S.o,M.v,M.D,ee.a,fe.a,x.a,be.d,C.a,be.a,me.c,ye.a,Se,be.b,xe.a],pipes:[S.b],styles:['.publish[_ngcontent-%COMP%]{display:grid;grid-template-columns:320px auto;grid-template-rows:1fr auto;height:100%;grid-template-areas:"options embed" "actions embed"}.publish__options[_ngcontent-%COMP%]{grid-area:options;overflow-y:scroll}.publish__screens[_ngcontent-%COMP%]{grid-area:screens;text-align:center}.publish__embed[_ngcontent-%COMP%]{grid-area:embed;background-color:#fff;border-left:1px solid #eaeff5;overflow:auto}.publish__actions[_ngcontent-%COMP%]{grid-area:actions}.publish__actions[_ngcontent-%COMP%]:before{content:" ";display:block;background-color:#fff;height:12px;box-shadow:inset 0 -12px 8px -10px rgba(150,168,192,.4)}.publish__actions-content[_ngcontent-%COMP%]{padding:0 20px 0 8px}.publish__group[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;-moz-column-gap:8px;column-gap:8px;align-items:center}.publish__flex-group[_ngcontent-%COMP%]{display:flex}.publish__input[_ngcontent-%COMP%]{width:100px;min-height:28px;padding:6px 8px}.publish__picker[_ngcontent-%COMP%]{width:60px}'],changeDetection:0}),Ce([Object(r.e)(g.a.getDimensions),we("design:type",_.a)],We.prototype,"dimensions$",void 0),Ce([Object(r.e)(g.a.getMinDimensions),we("design:type",_.a)],We.prototype,"minDimensions$",void 0),Ce([Object(r.e)(se.a.getCopying),we("design:type",_.a)],We.prototype,"copying$",void 0),We);function Ye(e,t){if(1&e&&O.Qb(0,"app-publish",6),2&e){var n=O.gc();O.mc("model",n.bookmark)}}var et,tt,nt=((et=function(){function e(t,n){h(this,e),this.dialogRef=t,this.bookmark=n.bookmark}return b(e,[{key:"closeDialog",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||et)(O.Pb(k.g),O.Pb(k.a))},et.\u0275cmp=O.Jb({type:et,selectors:[["app-publish-dialog"]],decls:7,vars:3,consts:[["data-test","publishDialog","role","dialog","aria-modal","true",1,"publish"],[1,"publish__heading","text-20","text-medium"],[1,"publish__contents"],[3,"model",4,"ngIf"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Close",1,"publish__close",3,"click"],["icon","times","size","lg"],[3,"model"]],template:function(e,t){1&e&&(O.Vb(0,"div",0),O.Vb(1,"h2",1),O.Pc(2,"Publish"),O.Ub(),O.Vb(3,"div",2),O.Nc(4,Ye,1,1,"app-publish",3),O.Ub(),O.Vb(5,"button",4),O.cc("click",(function(){return t.closeDialog()})),O.Qb(6,"app-icon",5),O.Ub(),O.Ub()),2&e&&(O.Eb("aria-label","Publish"),O.Db(4),O.mc("ngIf",t.bookmark),O.Db(1),O.Eb("aria-label","Close"))},directives:[S.p,x.a,C.a,$e],styles:["a[_ngcontent-%COMP%]{color:#de3535}a[_ngcontent-%COMP%]:hover{color:#c11f1f}.publish[_ngcontent-%COMP%]{position:relative}.publish__contents[_ngcontent-%COMP%]{height:calc(90vh - 80px);border-top:1px solid #eaeff5;margin-top:12px}.publish__close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;color:#283853}.publish__close[_ngcontent-%COMP%]:hover{color:#1c2a3f}"],changeDetection:0}),et),it=n("WkFQ"),at=n("XqAe"),ot=n("AytR"),rt=n("f3gM"),st=n("p345"),ct=n("+/zV"),ut=n("5sb6"),lt=n("QkH1"),pt=n("J5ja"),dt=n("1mir"),gt=n("cQmI"),ht=n("kTA6"),ft=n("8mU5"),bt=n("tyNb"),mt=n("0MNC"),yt=[it.a.View,it.a.Edit],vt=[it.a.Edit,it.a.Publish],kt=Object.entries(it.c).filter((function(e,t){var n=p(e,2);n[0];return!!n[1]})).map((function(e){var t=p(e,2),n=t[0];t[1];return n})),Ot=((tt=function(){function e(t,n,i,a,o,r,s,c,u,l,p,d){h(this,e),this.store=t,this.publishService=n,this.dialogService=i,this.dialog=a,this.snackbar=o,this.router=r,this.bookmarksService=s,this.breakpointObserver=c,this.clipboardService=u,this.userAccessService=l,this.pendoService=p,this.shareService=d}return b(e,[{key:"getBookmarkActions",value:function(e,t,n,i,a){if(Object(W.isNil)(t))return[];var o=t.tags||[],r=lt.e(e,t),s=o.includes("public")&&!r?re.a.Module:t.type,c=this.getBookmarkShareActions(t,s),l=[];switch(s){case re.a.Module:l=[it.a.View,it.a.AddToMyLibrary,it.a.Edit].concat(u(c)),lt.l(t)&&l.push(it.a.Divider,it.a.Manage);break;case re.a.Bookmark:l=[it.a.View,it.a.Edit].concat(u(c),[it.a.Divider,it.a.Duplicate,it.a.Manage,it.a.Delete])}l=l.filter((function(o){if(ot.a.application===st.a.Loft&&!yt.includes(o))return!1;if(a&&a.excludeActions&&a.excludeActions.includes(o))return!1;if(a&&a.includeActions&&!a.includeActions.includes(o))return!1;switch(o){case it.a.View:return lt.j();case it.a.Edit:return lt.f(e);case it.a.Delete:return lt.c(e,t);case it.a.Duplicate:return lt.d(e,t);case it.a.AddToMyLibrary:return lt.a(e,t);case it.a.Manage:return lt.h(e,t);case it.a.CopyURL:return lt.b(e,t,n,i);case it.a.Share:return t.type===re.a.Module;case it.a.Publish:return lt.i(e);default:return!0}}));var p=this.breakpointObserver.isMatched("(max-width: 959px)"),d=[it.a.Edit,it.a.Publish,it.a.Manage];return(p||ot.a.platform!==rt.a.Web)&&(l=l.filter((function(e){return!d.includes(e)&&e!==it.a.Divider}))),ot.a.native&&(l=l.filter((function(e){return!vt.includes(e)}))),this.removeDuplicateDividers(l)}},{key:"getBookmarkPrimaryActionLabel",value:function(e,t){var n,i="Select";if(t===dt.a.Select)i="Select";else if(t===dt.a.Import)i="Import";else{var a=null!==(n=e.viewMode)&&void 0!==n?n:gt.a.All,o=e.tour?"View Tour":"View",r=e.quiz?"Take Quiz":"";switch(a){case gt.a.Content:r="";break;case gt.a.Quiz:e.quiz&&(o="")}i=o||r}return i}},{key:"handleBookmarkAction",value:function(e){var t=this,n=e.bookmark;switch(e.name){case it.a.View:this.view(n);break;case it.a.Edit:this.router.navigate(["/edit"],{queryParams:{id:n.id}});break;case it.a.Manage:this.manage(n);break;case it.a.Delete:this.delete(n);break;case it.a.CopyURL:var i;this.generateBookmarkLink(n).pipe(Object(y.a)((function(e){return i=e,t.clipboardService.copyToClipboard(e,"url")}))).subscribe((function(e){e?t.snackbar.open("Successfully copied link to clipboard."):t.dialogService.openClipboardDialog(i),t.pendoService.track("Publish - Success",{type:"url",source:"bookmark-action"})}));break;case it.a.Duplicate:this.duplicate(n);break;case it.a.AddToMyLibrary:this.addToMyLibrary(n);break;case it.a.Share:this.shareBookmark(n);break;case it.a.Publish:this.publish(n)}}},{key:"generateBookmarkLink",value:function(e){var t=this.store.selectSnapshot(l.a.getWidgetOptions)||new d.a,n=this.store.selectSnapshot(g.a.getWidgetURL),i=this.store.selectSnapshot(f.a.getUserLanguage),a=this.store.selectSnapshot(f.a.getSelectedUserApp),o=this.store.selectSnapshot(l.a.getSelectedOrganizationProductAccountId);return this.publishService.generateWidgetURL(e,n,t,null,s.a.Single,i,a,o)}},{key:"delete",value:function(e){var t=this;this.dialogService.openConfirmDialog({data:{titleText:"Delete 3D model",bodyText:"Are you sure you want to delete this 3D model?",confirmText:"Delete",confirmColor:"warn"}}).afterClosed().pipe(Object(v.a)(1)).subscribe((function(n){n&&t.store.dispatch(new m.m(e.id))}))}},{key:"manage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct.b.Manage,n={id:ut.a.SaveBookmarkDialog,data:{bookmark:e,mode:t}};return this.dialog.closeAll(),this.dialog.open(ct.a,n)}},{key:"view",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id,i=e.title,a=this.store.selectSnapshot(f.a.getUserLocale).lang,o=this.publishService.isCustomWidget(e.embed_url_path);if(e.unavailable)this.snackbar.open('Error opening "'.concat(i,'", it is unavailable.'));else if(o){var r=this.publishService.getWidgetURL(e,e.embed_url,new d.a),s=window.open(r);this.snackbar.open(s?'"'.concat(i,'" loaded in a new tab.'):'Error launching "'.concat(i,'" in a new tab.'))}else this.router.navigate(["/view"],{queryParams:Object.assign({id:n,lang:a},t)})}},{key:"viewQuiz",value:function(e){this.view(e,{quiz:!0})}},{key:"shareBookmark",value:function(e){var t=this.store.selectSnapshot(f.a.getUserLanguage),n=this.shareService.generateShareLink(e,t);return!0===ot.a.native||ot.a.platform===rt.a.SDK?(this.clipboardService.copyToClipboard(n.fullUrl,"url").toPromise(),Object(P.a)(void 0)):this.dialogService.openShareDialog(n,"Share","Anyone with the link can view this 3D model. They will need to create an account for full acccess.").afterClosed()}},{key:"publish",value:function(e){this.isPremiumRestrictedAction(it.a.Publish)?this.userAccessService.openPublishPaywall():this.dialog.open(nt,{width:"90vw",height:"95vh",data:{bookmark:e}})}},{key:"isPremiumRestrictedAction",value:function(e){var t=this.store.selectSnapshot(f.a.isPremiumUser),n=this.store.selectSnapshot(l.a.hasOrganization),i=t&&n;switch(e){case it.a.Publish:return!i;default:return!1}}},{key:"duplicate",value:function(e){var t=this;this.checkBookmarkLimit().subscribe((function(n){n.limit_reached?t.userAccessService.openBookmarkSaveLimit():t.manage(e,ct.b.Duplicate)}))}},{key:"addToMyLibrary",value:function(e){var t=this;this.checkBookmarkLimit().subscribe((function(n){n.limit_reached?t.userAccessService.openBookmarkSaveLimit():t.manage(e,ct.b.Copy)}))}},{key:"checkBookmarkLimit",value:function(){return this.store.selectSnapshot(f.a.isPremiumUser)?Object(P.a)({limit_reached:!1}):this.bookmarksService.atMaxFreeBookmarkCount()}},{key:"getBookmarkShareActions",value:function(e,t){if(t===re.a.Module){var n=!Object(W.isNil)(e.module_accessor_level),i=!0===e.collection_content;if(n)return[it.a.Publish];if(!n&&!i)return[it.a.Share,it.a.Publish]}var a=this.store.selectSnapshot(f.a.getUserRole),o=this.store.selectSnapshot(f.a.isPremiumUser),r=this.store.selectSnapshot(l.a.hasOrganization),s=[];return lt.i(a)&&s.push(it.a.Publish),lt.b(a,e,o,r)&&s.push(it.a.CopyURL),s.length>0?[it.a.Divider].concat(s):[]}},{key:"removeDividerers",value:function(e){return e.filter((function(e){return e!==it.a.Divider}))}},{key:"removeDuplicateDividers",value:function(e){for(var t=u(e);t[0]===it.a.Divider;)t.splice(0,1);for(t=t.filter((function(e,n){return e!==it.a.Divider||t[n-1]!==it.a.Divider}));t[t.length-1]===it.a.Divider;)t.pop();return t}},{key:"getBookmarkActionsGrouping",value:function(e,t){var n=t?1:3,i=e.filter((function(e){return kt.includes(e)})),a=e.filter((function(e){return!i.includes(e)}));return this.createBookmarkActionsGrouping(i,a,n)}},{key:"createBookmarkActionsGrouping",value:function(e,t,n){var i=this.removeDividerers(t).length>0||this.removeDividerers(e).length>n,a=[].concat(u(e.splice(i?n-1:n)),u(t));return{mainActions:e,moreActions:this.removeDuplicateDividers(a)}}},{key:"openLimitDialog",value:function(){var e=this;this.dialogService.openLimitDialog().afterClosed().subscribe((function(t){t&&e.dialogService.openUpgradeDialog()}))}}]),e}()).\u0275fac=function(e){return new(e||tt)(O.Zb(r.h),O.Zb(s.b),O.Zb(c.a),O.Zb(k.b),O.Zb(le.b),O.Zb(bt.e),O.Zb(at.a),O.Zb(mt.a),O.Zb(ce.a),O.Zb(pt.a),O.Zb(ht.b),O.Zb(ft.a))},tt.\u0275prov=O.Lb({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt)},PWQe:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("HDdC"),a=n("P6Fj");function o(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=new a.a,r=[];return n&&r.push(t.map((function(e){return e.label}))),e.forEach((function(e){var n=t.map((function(t){return e[t.field]}));r.push(n)})),new i.a((function(e){var t=o.unparse(r,{quotes:!0,header:!1});e.next(t),e.complete()}))}},PXMH:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),a=n("fXoL"),o=function(){var e=function e(){h(this,e)};return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e}()},PlCH:function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));var i=n("zJoM"),a=n("fXoL"),o=n("ofXK"),r=n("XNiG"),s=(n("Lwol"),n("AcyG")),c=n("VRyK"),u=n("HDdC"),l=n("pLZG"),p=n("1G5W"),d=n("5miH"),g=n("PUI9"),f=n("Mh2x"),m=n("eW6i"),y=n("qz+p"),v=n("lR5k"),k=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},O=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},S=["image"],x=["imagePre"],C=["imagePost"],w=["imageContainer"];function j(e,t){if(1&e&&(a.Qb(0,"span",8),a.hc(1,"markdown")),2&e){var n=a.gc();a.mc("innerHTML",a.ic(1,1,n.label),a.Dc)}}function P(e,t){if(1&e&&a.Qb(0,"img",9,10),2&e){var n=a.gc();a.mc("src",n.imageUrl,a.Fc)}}function _(e,t){if(1&e&&a.Qb(0,"img",11,12),2&e){var n=a.gc();a.mc("src",n.imageUrl,a.Fc)}}var M,I=((M=function(){function e(t,n,i){h(this,e),this.renderer=t,this.engineService=n,this.animationService=i,this.ngUnsubscribe=new r.a,this.loopImage=!1}return b(e,[{key:"ngOnInit",value:function(){this.initChapterListener(),this.initTimelineListener()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initChapterListener",value:function(){var e=this;this.selectedChapterId$.pipe(Object(l.a)((function(e){return null!=e})),Object(p.a)(this.ngUnsubscribe)).subscribe((function(t){e.timerange=e.animationService.getChapterLocalTimerange(t)}))}},{key:"initTimelineListener",value:function(){var e=this;Object(c.a)(this.engineService.getEvent(d.a.TimelineScrubbed),this.engineService.getEvent(d.a.TimelinePlaying)).pipe(Object(p.a)(this.ngUnsubscribe)).subscribe((function(t){var n=e.getChapterPercent(t.time);e.moveImage(n)}))}},{key:"moveImage",value:function(e){var t=this.image.nativeElement.getBoundingClientRect().width;this.renderer.setStyle(this.imageContainer.nativeElement,"transform","translate(".concat(e/100*-t,"px, 0)")),this.loopImage&&(this.renderer.setStyle(this.imagePre.nativeElement,"transform","translate(".concat(-t,"px, 0)")),this.renderer.setStyle(this.imagePost.nativeElement,"transform","translate(".concat(t,"px, 0)")))}},{key:"getChapterPercent",value:function(e){var t=this.timerange,n=t.firstTime,i=t.lastTime,a=this.animationService.mapGlobalTimeToLocal(e).time;return Math.max(n,Math.min(a,i))/i*100}}]),e}()).\u0275fac=function(e){return new(e||M)(a.Pb(a.H),a.Pb(m.a),a.Pb(y.a))},M.\u0275cmp=a.Jb({type:M,selectors:[["app-ticker-block-item"]],viewQuery:function(e,t){var n;1&e&&(a.Jc(S,!0),a.Vc(x,!0),a.Vc(C,!0),a.Jc(w,!0)),2&e&&(a.xc(n=a.dc())&&(t.image=n.first),a.xc(n=a.dc())&&(t.imagePre=n.first),a.xc(n=a.dc())&&(t.imagePost=n.first),a.xc(n=a.dc())&&(t.imageContainer=n.first))},inputs:{label:"label",imageUrl:"imageUrl",loopImage:"loopImage"},decls:8,vars:4,consts:[[1,"ticker-block-item"],["class","ticker-block-item__label html",3,"innerHTML",4,"ngIf"],[1,"ticker-block__image-container"],["imageContainer",""],["class","ticker-block-item__image ticker-block-item__image--pre",3,"src",4,"ngIf"],["class","ticker-block-item__image ticker-block-item__image--post",3,"src",4,"ngIf"],[1,"ticker-block-item__image",3,"src"],["image",""],[1,"ticker-block-item__label","html",3,"innerHTML"],[1,"ticker-block-item__image","ticker-block-item__image--pre",3,"src"],["imagePre",""],[1,"ticker-block-item__image","ticker-block-item__image--post",3,"src"],["imagePost",""]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Nc(1,j,2,3,"span",1),a.Vb(2,"div",2,3),a.Nc(4,P,2,1,"img",4),a.Nc(5,_,2,1,"img",5),a.Qb(6,"img",6,7),a.Ub(),a.Ub()),2&e&&(a.Db(1),a.mc("ngIf",t.label),a.Db(3),a.mc("ngIf",t.loopImage),a.Db(1),a.mc("ngIf",t.loopImage),a.Db(1),a.mc("src",t.imageUrl,a.Fc))},directives:[o.p],pipes:[v.b],styles:['.ticker-block-item[_ngcontent-%COMP%]{background:#f9fafd;background:linear-gradient(90deg,#f9fafd 20%,hsla(0,0%,100%,0) 40%,#fff 60%,#f9fafd 80%);overflow:hidden;padding-left:50%;position:relative}.ticker-block-item[_ngcontent-%COMP%]:hover   .ticker-block-item__label[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.9)}.ticker-block-item[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:50%;top:0;height:100%;width:1px;background:red;box-shadow:0 0 0 4px rgba(255,0,0,.2);z-index:10}.ticker-block-item__label[_ngcontent-%COMP%]{position:absolute;z-index:10;left:4px;top:4px;border-radius:8px;padding:2px 6px;font-size:12px;border:1px solid rgba(16,24,35,.5);background:hsla(0,0%,100%,.55)}.ticker-block-item__image-container[_ngcontent-%COMP%]{position:relative}.ticker-block-item__image[_ngcontent-%COMP%]{display:block}.ticker-block-item__image--post[_ngcontent-%COMP%], .ticker-block-item__image--pre[_ngcontent-%COMP%]{position:absolute;top:0;left:0}'],changeDetection:0}),k([Object(s.e)(g.a.getAnimationPlaying),O("design:type",u.a)],M.prototype,"animationPlaying$",void 0),k([Object(s.e)(f.a.getSelectedChapterId),O("design:type",u.a)],M.prototype,"selectedChapterId$",void 0),M);function T(e,t){if(1&e&&a.Qb(0,"app-ticker-block-item",3),2&e){var n=t.$implicit,i=a.gc(2);a.mc("imageUrl",n.urls.default)("label",n.caption)("loopImage",i.tickerBlock.loopImage)}}function U(e,t){if(1&e&&(a.Vb(0,"div",1),a.Nc(1,T,1,3,"app-ticker-block-item",2),a.Ub()),2&e){var n=a.gc();a.Db(1),a.mc("ngForOf",n.tickerBlock.images)}}var L,z=((L=function(){function e(){h(this,e),this.ngUnsubscribe=new r.a}return b(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}]),e}()).\u0275fac=function(e){return new(e||L)},L.\u0275cmp=a.Jb({type:L,selectors:[["app-ticker-block"]],inputs:{tickerBlock:"tickerBlock"},decls:1,vars:1,consts:[["class","ticker-block",4,"ngIf"],[1,"ticker-block"],[3,"imageUrl","label","loopImage",4,"ngFor","ngForOf"],[3,"imageUrl","label","loopImage"]],template:function(e,t){1&e&&a.Nc(0,U,2,1,"div",0),2&e&&a.mc("ngIf",t.tickerBlock)},directives:[o.p,o.o,I],styles:[""],changeDetection:0}),L);n("uDDk");var A,F=n("7gUy"),D=((A=function(){function e(){h(this,e),this.layout=i.a.Normal}return b(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||A)},A.\u0275cmp=a.Jb({type:A,selectors:[["app-markdown-block"]],inputs:{markdownBlock:"markdownBlock",layout:"layout"},decls:2,vars:1,consts:[[1,"markdown-block"],[3,"markdownText"]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Qb(1,"app-html",1),a.Ub()),2&e&&(a.Db(1),a.mc("markdownText",t.markdownBlock.markdown))},directives:[F.a],styles:[""],encapsulation:2,changeDetection:0}),A),E=n("JggO");function N(e,t){if(1&e&&a.Qb(0,"app-ticker-block",6),2&e){var n=a.gc().$implicit;a.mc("tickerBlock",n)}}function R(e,t){if(1&e&&a.Qb(0,"app-markdown-block",7),2&e){var n=a.gc().$implicit,i=a.gc(2);a.mc("markdownBlock",n)("layout",i.layout)}}function V(e,t){if(1&e&&a.Qb(0,"app-images-block",8),2&e){var n=a.gc().$implicit,i=a.gc(2);a.mc("imagesBlock",n)("layout",i.layout)}}function B(e,t){if(1&e&&(a.Vb(0,"div"),a.Tb(1,2),a.Nc(2,N,1,1,"app-ticker-block",3),a.Nc(3,R,1,2,"app-markdown-block",4),a.Nc(4,V,1,2,"app-images-block",5),a.Sb(),a.Ub()),2&e){var n=t.$implicit;a.Hb("mv-2",t.index>0),a.Db(1),a.mc("ngSwitch",n.type),a.Db(1),a.mc("ngSwitchCase","ticker"),a.Db(1),a.mc("ngSwitchCase","markdown"),a.Db(1),a.mc("ngSwitchCase","images")}}function H(e,t){if(1&e&&(a.Tb(0),a.Nc(1,B,5,6,"div",1),a.Sb()),2&e){var n=a.gc();a.Db(1),a.mc("ngForOf",n.contentBlocks)}}var Q,G=((Q=function(){function e(){h(this,e),this._contentBlocks=[],this.layout=i.a.Normal,this.include=[],this.exclude=[]}return b(e,[{key:"contentBlocks",get:function(){var e=this;return this._contentBlocks.filter((function(t){return!e.include.length||e.include.includes(t.type)})).filter((function(t){return!e.exclude.length||!e.exclude.includes(t.type)}))},set:function(e){this._contentBlocks=e}},{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Q)},Q.\u0275cmp=a.Jb({type:Q,selectors:[["app-content-blocks"]],inputs:{contentBlocks:"contentBlocks",layout:"layout",include:"include",exclude:"exclude"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"mv-2",4,"ngFor","ngForOf"],[3,"ngSwitch"],[3,"tickerBlock",4,"ngSwitchCase"],[3,"markdownBlock","layout",4,"ngSwitchCase"],[3,"imagesBlock","layout",4,"ngSwitchCase"],[3,"tickerBlock"],[3,"markdownBlock","layout"],[3,"imagesBlock","layout"]],template:function(e,t){1&e&&a.Nc(0,H,2,1,"ng-container",0),2&e&&a.mc("ngIf",t.contentBlocks.length>0)},directives:[o.p,o.o,o.r,o.s,z,D,E.a],styles:[""],encapsulation:2,changeDetection:0}),Q)},PmOP:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL"),a=function(){var e=function(){function e(){h(this,e)}return b(e,[{key:"onClick",value:function(e){e.stopPropagation(),e.stopImmediatePropagation()}},{key:"onEnterUp",value:function(e){e.stopPropagation(),e.stopImmediatePropagation()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.Kb({type:e,selectors:[["","appEventFence",""]],hostBindings:function(e,t){1&e&&i.cc("click",(function(e){return t.onClick(e,e.target)}))("keyup.enter",(function(e){return t.onEnterUp(e,e.target)}))}}),e}()},"Poh+":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Default=0]="Default",e.DrawerOnly="drawer",e.ColumnOnly="column",e}({})},QkH1:function(e,t,n){"use strict";n.d(t,"k",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"j",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"h",(function(){return g})),n.d(t,"b",(function(){return f})),n.d(t,"i",(function(){return b})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"g",(function(){return v})),n.d(t,"l",(function(){return k}));var i=n("LvDl"),a=n("ZR5G"),o=n("WoAB"),r=n("AytR"),s=function(e){return e.User="user",e.Group="group",e}({});function c(e,t){return Object(i.get)(e,"permissions",[]).includes(t)}function u(e){return c(e,o.a.EditBookmarks)&&!r.a.native}function l(e,t){var n=c(e,o.a.EditBookmarks);return!!n&&(t.type===a.a.Module?n:!(!0!==t.is_owner)||!!O(t)&&h(e,t))}function p(){return!0}function d(e,t){return!0===t.is_owner}function g(e,t){return!!c(e,o.a.EditBookmarks)&&(!(!0!==t.is_owner&&!k(t))||!!O(t)&&h(e,t))}function h(e,t){if(c(e,o.a.EditAllTeamBookmarks))return!0;var n=c(e,o.a.EditTeamBookmarks),i=O(t)&&t.group_access[0].member_edit;return n&&i}function f(e,t,n,i){return!(!n||!i)&&c(e,o.a.CopyUrl)}function b(e){return c(e,o.a.PublishBookmarks)}function m(e,t){var n=!0===t.is_owner,i=c(e,o.a.DuplicateTeamBookmarks);return!(!n&&!i)}function y(e,t){return!!Object(i.isNil)(t.module_accessor_level)}function v(e,t){return!!t&&c(e,o.a.ExportCSV)}function k(e){return e.type==a.a.Module&&e.module_accessor_level===s.Group}function O(e){return Array.isArray(e.group_access)&&e.group_access.length>0}},QkOQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){i(n,e);var t=o(n);function n(e,i,a){var o;return h(this,n),(o=t.call(this)).email=e,o.password=i,o.rememberMe=a,o}return b(n,null,[{key:"toJSON",value:function(e){return{id_token:e.token,version:e.version,app_producttype:e.app_producttype,app_productkey:e.app_productkey,group_invite_mode:e.groupInviteMode,group_invite_key:e.groupInviteKey,group_code_mode:e.groupCodeMode,group_code:e.groupCode,group_ovid_mode:e.groupOvidMode,group_ovid_osptok:e.groupOvidOsptok,email:e.email,password:e.password,email_remember_me:e.rememberMe,platform:e.platform,return_to:e.returnTo,brand_id:e.brandId,locale_id:e.localeId,timestamp:e.timestamp,site_verify_response:e.site_verify_response}}}]),n}(n("RX1/").a)},QtmD:function(e,t,n){"use strict";n.d(t,"a",(function(){return Z}));var i=n("AcyG"),a=function e(){h(this,e)},o=n("Lyqc"),r=n("nYR2"),s=n("5+tZ"),c=n("IzEk"),l=n("lJxs"),d=n("eIep"),g=n("vkgz"),f=n("XqAe"),m=n("Mh2x"),y=n("Cfvw"),v=n("cp0P"),k=n("LRne"),O=n("tgUM"),S=n("/MKm"),x=n("qBAC"),C=n("7PKw"),w=n("E13e"),j=n("LvDl"),P=n("kqJf"),_=n("g408"),M=n("0E12"),I=function e(){h(this,e)},T=n("MuXT"),U=n("kTA6"),L=n("yG3n"),z=n("Vrox"),A=n("h8op"),F=n("vm16"),D=n("4FHB"),E=n("cQmI"),N=n("AbMW"),R=n("DTUA"),V=n("ZR5G"),B=n("fXoL"),H=n("dNgK"),Q=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},G=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function W(e,t,n,i,a,o){return o?Object(y.a)(n.getDatabaseItem(R.a.PreviewBookmark)):a===V.a.Bookmark?e.getBookmarkModel(i):t.getConditionModel(i)}var q,X={loading:!0,exporting:!1,copying:!1,saving:!1,bookmarks:[],selectedBookmark:null,sort:O.d,checkedBookmarks:[],selectedCategory:null},Z=((q=function(){function e(t,n,i,a,o,r,s,c,u,l,p){h(this,e),this.store=t,this.actions=n,this.bookmarksService=i,this.imagesService=a,this.storyService=o,this.exploreService=r,this.publishService=s,this.organizationsService=c,this.snackbar=u,this.pendoService=l,this.storageService=p}return b(e,[{key:"loadBookmarks",value:function(e,t){e.patchState({loading:!0,bookmarks:[],checkedBookmarks:[]}),Object(v.a)(this.bookmarksService.getPrivateBookmarks(t.query),this.bookmarksService.getPrivateConditions(t.query)).pipe(Object(r.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(t){var n=p(t,2),i=n[0],a=n[1];e.dispatch(new o.t([].concat(u(i),u(a))))}))}},{key:"loadOrganizationBookmarks",value:function(e,t){var n=t.organizationId;e.patchState({loading:!0,bookmarks:[],checkedBookmarks:[]}),this.bookmarksService.getOrganizationContent(n).pipe(Object(r.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(t){e.dispatch(new o.t(t))}))}},{key:"loadCollectionBookmarks",value:function(e,t){e.patchState({loading:!0,bookmarks:[],checkedBookmarks:[]}),this.organizationsService.getCollectionContent(t.organizationId,t.collectionId).pipe(Object(r.a)((function(){return e.patchState({loading:!1})}))).subscribe((function(t){e.dispatch(new o.t(t))}))}},{key:"loadSuccess",value:function(e,t){(0,e.patchState)({bookmarks:t.result})}},{key:"selectBookmark",value:function(e,t){var n=t.id,i=t.type,a=t.preview;W(this.bookmarksService,this.exploreService,this.storageService,n,i,a).subscribe((function(t){e.dispatch(new o.D(t))}))}},{key:"selectBookmarkSuccess",value:function(e,t){var n=t.bookmark;n&&(n=Object(N.a)(n)),e.patchState({selectedBookmark:n})}},{key:"saveBookmark",value:function(e,t){return n=this,r=regeneratorRuntime.mark((function n(){var a,r,u,l,p,d,g,h,f=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.patchState({saving:!0}),r=t.bookmarkEntry,u=this.store.selectSnapshot(m.a.getStoryChapters),l=!1===t.inplace,p=_.a.makeChapterIdMap(u,l),n.t0=l,!n.t0){n.next=6;break}return n.next=6,this.store.dispatch(new M.a.UpdateTweenParticleLookupChapters(p)).toPromise();case 6:t.includeIndex&&(a=this.bookmarksService.createBookmarkStory(p),r.index=a.story),d=Object(k.a)([]),t.includeIndex&&(g=this.store.selectSnapshot(z.a.getRegisteredThumbnails),(h=this.imagesService.saveChapterThumbnails(r.index.chapters,g,Object(j.invert)(p))).length&&(d=Object(v.a)(h))),d.pipe(Object(s.b)((function(t){var n=f.store.selectSnapshot(z.a.getRegisteredThumbnails);return t.forEach((function(e){var t=new L.a;t.storyId=r.id,t.chapterId=e.chapterId,t.urls={small:e.uris.small,large:e.uris.large},n.set(e.chapterId,t);var i=r.index.chapters.findIndex((function(t){return t.id===e.chapterId}));i>=0&&(r.index.chapters[i].thumbnails=Object.assign({},e.uris))})),e.dispatch(new A.a(n)),f.bookmarksService.saveBookmark(r)}))).subscribe((function(t){e.patchState({saving:!1});var n=a?a.story:null,s=r.id?"update":"save",u=Array.isArray(r.addCollections)&&r.addCollections.length>0,l=r.removeCollections&&Array.from(r.removeCollections.keys()).length>0;u||l?(f.actions.pipe(Object(i.l)(o.L,o.K),Object(c.a)(1)).subscribe((function(){e.dispatch(new o.B(t,n,s))})),e.dispatch(new o.J(t,r.addCollections,r.removeCollections))):e.dispatch(new o.B(t,n,s))}),(function(){e.dispatch(new o.A(r))})),this.pendoService.track("Bookmark Save - Start");case 10:case"end":return n.stop()}}),n,this)})),new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{s(r.next(e))}catch(n){t(n)}}function o(e){try{s(r.throw(e))}catch(n){t(n)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(i,o)}s((r=r.apply(n,[])).next())}));var n,a,r}},{key:"saveBookmarkSuccess",value:function(e,t){var n=t.bookmark,i=e.getState().bookmarks,a=i.findIndex((function(e){return e.id===n.id}));-1!==a&&(i[a]=n,e.patchState({bookmarks:u(i)})),"save"===t.method&&e.patchState({selectedBookmark:t.bookmark}),this.pendoService.track("Bookmark Save - Success")}},{key:"saveBookmarkFail",value:function(e,t){this.pendoService.track("Bookmark Save - Failure")}},{key:"deleteBookmark",value:function(e,t){var n=t.bookmarkId;this.bookmarksService.deleteBookmark(n).subscribe((function(){e.dispatch(new o.o(n))}),(function(t){e.dispatch(new o.n(n,t))}))}},{key:"deleteBookmarkSuccess",value:function(e,t){var n=e.getState().bookmarks.filter((function(e){return e.id!==t.bookmarkId}));e.patchState({bookmarks:u(n)}),this.snackbar.open("Successfully deleted 3D model")}},{key:"bulkDeleteBookmark",value:function(e,t){var n=this,i=t.bookmarkIds,a=t.bookmarkIds.map((function(e){return n.bookmarksService.deleteBookmark(e)}));Object(v.a)(a).subscribe((function(){e.dispatch(new o.e(i))}),(function(t){e.dispatch(new o.d(i,t))}))}},{key:"bulkDeleteBookmarkSuccess",value:function(e,t){var n=e.getState().bookmarks.filter((function(e){return!t.bookmarkIds.some((function(t){return t===e.id}))}));e.patchState({bookmarks:u(n)}),this.snackbar.open("Successfully deleted 3D models")}},{key:"sortBookmarks",value:function(e,t){var n=e.getState().bookmarks;e.patchState({sort:t.sort,bookmarks:u(n)})}},{key:"clearBookmarks",value:function(e,t){e.patchState({bookmarks:[],checkedBookmarks:[]})}},{key:"resetBookmarks",value:function(e,t){e.setState(X)}},{key:"checkBookmark",value:function(e,t){var n=e.getState().checkedBookmarks,i=n.some((function(e){return e===t.id}));t.checked&&!i?n=[].concat(u(n),[t.id]):t.checked||(n=n.filter((function(e){return e!==t.id}))),e.patchState({checkedBookmarks:n})}},{key:"setCheckedBookmarks",value:function(e,t){e.patchState({checkedBookmarks:t.ids})}},{key:"exportBookmarks",value:function(e,t){var n=t.bookmarks,i=t.organizationId,a=t.collections,s=t.widgetURL,c=t.widgetOptions,u=t.offlineEnabled,l=t.productAccountId,p=c||new x.a;e.patchState({exporting:!0}),this.publishService.exportBookmarks(n,i,a,s,p,null,t.userLanguage,t.userApp,u,l).pipe(Object(r.a)((function(){e.patchState({exporting:!1})}))).subscribe((function(t){e.dispatch(t?new o.r(n):new o.q(n))}))}},{key:"updateBookmarkCollections",value:function(e,t){var n=t.addCollections,i=n.map((function(e){return{collection_id:e.collection_id,content_list:[{content_type:t.bookmark.type,content_id:t.bookmark.id}]}})),a=Array.from(t.removeCollections.keys()),r=a.map((function(e){return{collection_id:e.collection_id,collection_content_id_list:[t.removeCollections.get(e)]}})),s=n.concat(a)[0].group_id;this.organizationsService.updateCollectionContent(s,i,r).subscribe((function(){n.length>0&&e.dispatch(new o.b(t.bookmark,n)),a.length>0&&e.dispatch(new o.x(t.bookmark,a)),e.dispatch(new o.L(t.bookmark,n,a))}),(function(){n.length>0&&e.dispatch(new o.a(t.bookmark,n)),a.length>0&&e.dispatch(new o.w(t.bookmark,a)),e.dispatch(new o.K(t.bookmark,n,a))}))}},{key:"removeBookmarkCollectionSuccess",value:function(e,t){var n=e.getState(),i=n.bookmarks;if("collection"===n.selectedCategory){var a=t.bookmark.id,o=i.filter((function(e){return e.id!==a}));e.patchState({bookmarks:u(o)})}}},{key:"copyBookmark",value:function(e,t){var n=this;this.pendoService.track("Bookmark Copy - Start");var i,a,s,c,u,h=t.groupAccess,f=t.collections;e.patchState({copying:!0,saving:!0});var b=W(this.bookmarksService,this.exploreService,this.storageService,t.id,t.type,!1),m=this.storyService.getStory(t.id,t.type,t.lang);Object(v.a)([b,m]).pipe(Object(l.a)((function(e){var t=p(e,2),n=t[0],i=t[1];a=Object(j.cloneDeep)(i),s=Object(j.cloneDeep)(i),c=_.a.makeChapterIdMap(a.chapters,!0),s.chapters.forEach((function(e){e.id=c[e.id]})),s.tweenParticleLookup&&(s.tweenParticleLookup=D.a.updateChapterIds(s.tweenParticleLookup,c)),u=n.viewMode})),Object(d.a)((function(){return n.imagesService.generateFreshChapterImages(a.chapters,t.id)})),Object(d.a)((function(e){var t=e.map((function(e){return n.imagesService.saveNewChapterImage(e.chapterId,e.snapshot)}));return t.length?Object(v.a)(t):Object(k.a)([])})),Object(l.a)((function(e){e.forEach((function(e){e.chapterId=c[e.chapterId]})),s.chapters.forEach((function(t){var n=e.find((function(e){return e.chapterId===t.id}));n&&(t.thumbnails=Object.assign({},n.uris))}))})),Object(d.a)((function(){var e=new I;return e.title=t.title,e.isOwner=!0,e.index=s,e.viewMode=u,e.is_content_copy=!0,h&&(e.add_group_access=[h]),n.bookmarksService.saveBookmark(e)})),Object(g.a)((function(e){i=e})),Object(d.a)((function(){if(h&&f&&f.length>0){var e=f[0].group_id,t=f.map((function(e){return{collection_id:e.collection_id,content_list:[{content_type:i.type,content_id:i.id}]}}));return n.organizationsService.updateCollectionContent(e,t,[])}return Object(k.a)(!0)})),Object(r.a)((function(){e.patchState({copying:!1,saving:!1})}))).subscribe((function(){n.pendoService.track("Bookmark Copy - Success"),e.dispatch(new o.l(i))}),(function(i){n.pendoService.track("Bookmark Copy - Failure"),e.dispatch(new o.k(t.id,i))}))}},{key:"setBookmarkText",value:function(e,t){var n=e.getState().selectedBookmark;e.patchState({selectedBookmark:Object.assign(Object.assign({},n),{title:t.title})})}},{key:"setBookmarkViewMode",value:function(e,t){var n=e.getState().selectedBookmark;e.patchState({selectedBookmark:Object.assign(Object.assign({},n),{viewMode:t.viewMode})})}},{key:"setSelectedCategory",value:function(e,t){var n=t.category;e.patchState({selectedCategory:n||null})}},{key:"cancelSaveBookmark",value:function(e,t){e.patchState({saving:!1})}},{key:"cancelCopyBookmark",value:function(e,t){e.patchState({copying:!1})}}],[{key:"getBookmarks",value:function(e){var t=e.bookmarks,n=e.sort,i=n.ascending,a=n.fields;return Object(P.a)(t,a,i)}},{key:"getCheckedBookmarks",value:function(e){return e.checkedBookmarks}},{key:"getSelectedBookmark",value:function(e){return e.selectedBookmark}},{key:"getSelectedBookmarkViewMode",value:function(e){return e.selectedBookmark.viewMode||E.a.All}},{key:"getLoading",value:function(e){return e.loading}},{key:"getExporting",value:function(e){return e.exporting}},{key:"getSaving",value:function(e){return e.saving}},{key:"getCopying",value:function(e){return e.copying}},{key:"getSort",value:function(e){return e.sort}},{key:"getSelectedCategory",value:function(e){return e.selectedCategory}}]),e}()).\u0275fac=function(e){return new(e||q)(B.Zb(i.h),B.Zb(i.b),B.Zb(f.a),B.Zb(F.a),B.Zb(T.a),B.Zb(w.a),B.Zb(S.b),B.Zb(C.a),B.Zb(H.b),B.Zb(U.b),B.Zb(R.d))},q.\u0275prov=B.Lb({token:q,factory:q.\u0275fac}),Q([Object(i.a)(o.s),G("design:type",Function),G("design:paramtypes",[Object,o.s]),G("design:returntype",void 0)],q.prototype,"loadBookmarks",null),Q([Object(i.a)(o.v),G("design:type",Function),G("design:paramtypes",[Object,o.v]),G("design:returntype",void 0)],q.prototype,"loadOrganizationBookmarks",null),Q([Object(i.a)(o.u),G("design:type",Function),G("design:paramtypes",[Object,o.u]),G("design:returntype",void 0)],q.prototype,"loadCollectionBookmarks",null),Q([Object(i.a)(o.t),G("design:type",Function),G("design:paramtypes",[Object,o.t]),G("design:returntype",void 0)],q.prototype,"loadSuccess",null),Q([Object(i.a)(o.C),G("design:type",Function),G("design:paramtypes",[Object,o.C]),G("design:returntype",void 0)],q.prototype,"selectBookmark",null),Q([Object(i.a)(o.D),G("design:type",Function),G("design:paramtypes",[Object,o.D]),G("design:returntype",void 0)],q.prototype,"selectBookmarkSuccess",null),Q([Object(i.a)(o.z),G("design:type",Function),G("design:paramtypes",[Object,o.z]),G("design:returntype",Promise)],q.prototype,"saveBookmark",null),Q([Object(i.a)(o.B),G("design:type",Function),G("design:paramtypes",[Object,o.B]),G("design:returntype",void 0)],q.prototype,"saveBookmarkSuccess",null),Q([Object(i.a)(o.A),G("design:type",Function),G("design:paramtypes",[Object,o.A]),G("design:returntype",void 0)],q.prototype,"saveBookmarkFail",null),Q([Object(i.a)(o.m),G("design:type",Function),G("design:paramtypes",[Object,o.m]),G("design:returntype",void 0)],q.prototype,"deleteBookmark",null),Q([Object(i.a)(o.o),G("design:type",Function),G("design:paramtypes",[Object,o.o]),G("design:returntype",void 0)],q.prototype,"deleteBookmarkSuccess",null),Q([Object(i.a)(o.c),G("design:type",Function),G("design:paramtypes",[Object,o.c]),G("design:returntype",void 0)],q.prototype,"bulkDeleteBookmark",null),Q([Object(i.a)(o.e),G("design:type",Function),G("design:paramtypes",[Object,o.e]),G("design:returntype",void 0)],q.prototype,"bulkDeleteBookmarkSuccess",null),Q([Object(i.a)(o.I),G("design:type",Function),G("design:paramtypes",[Object,o.I]),G("design:returntype",void 0)],q.prototype,"sortBookmarks",null),Q([Object(i.a)(o.i),G("design:type",Function),G("design:paramtypes",[Object,o.i]),G("design:returntype",void 0)],q.prototype,"clearBookmarks",null),Q([Object(i.a)(o.y),G("design:type",Function),G("design:paramtypes",[Object,o.y]),G("design:returntype",void 0)],q.prototype,"resetBookmarks",null),Q([Object(i.a)(o.h),G("design:type",Function),G("design:paramtypes",[Object,o.h]),G("design:returntype",void 0)],q.prototype,"checkBookmark",null),Q([Object(i.a)(o.G),G("design:type",Function),G("design:paramtypes",[Object,o.G]),G("design:returntype",void 0)],q.prototype,"setCheckedBookmarks",null),Q([Object(i.a)(o.p),G("design:type",Function),G("design:paramtypes",[Object,o.p]),G("design:returntype",void 0)],q.prototype,"exportBookmarks",null),Q([Object(i.a)(o.J),G("design:type",Function),G("design:paramtypes",[Object,o.J]),G("design:returntype",void 0)],q.prototype,"updateBookmarkCollections",null),Q([Object(i.a)(o.x),G("design:type",Function),G("design:paramtypes",[Object,o.x]),G("design:returntype",void 0)],q.prototype,"removeBookmarkCollectionSuccess",null),Q([Object(i.a)(o.j),G("design:type",Function),G("design:paramtypes",[Object,o.j]),G("design:returntype",void 0)],q.prototype,"copyBookmark",null),Q([Object(i.a)(o.E),G("design:type",Function),G("design:paramtypes",[Object,o.E]),G("design:returntype",void 0)],q.prototype,"setBookmarkText",null),Q([Object(i.a)(o.F),G("design:type",Function),G("design:paramtypes",[Object,o.F]),G("design:returntype",void 0)],q.prototype,"setBookmarkViewMode",null),Q([Object(i.a)(o.H),G("design:type",Function),G("design:paramtypes",[Object,o.H]),G("design:returntype",void 0)],q.prototype,"setSelectedCategory",null),Q([Object(i.a)(o.g),G("design:type",Function),G("design:paramtypes",[Object,o.g]),G("design:returntype",void 0)],q.prototype,"cancelSaveBookmark",null),Q([Object(i.a)(o.f),G("design:type",Function),G("design:paramtypes",[Object,o.f]),G("design:returntype",void 0)],q.prototype,"cancelCopyBookmark",null),Q([Object(i.f)(),G("design:type",Function),G("design:paramtypes",[a]),G("design:returntype",void 0)],q,"getBookmarks",null),Q([Object(i.f)(),G("design:type",Function),G("design:paramtypes",[a]),G("design:returntype",void 0)],q,"getCheckedBookmarks",null),Q([Object(i.f)(),G("design:type",Function),G("design:paramtypes",[a]),G("design:returntype",void 0)],q,"getSelectedBookmark",null),Q([Object(i.f)(),G("design:type",Function),G("design:paramtypes",[a]),G("design:returntype",void 0)],q,"getSelectedBookmarkViewMode",null),Q([Object(i.f)(),G("design:type",Function),G("design:paramtypes",[a]),G("design:returntype",void 0)],q,"getLoading",null),Q([Object(i.f)(),G("design:type",Function),G("design:paramtypes",[a]),G("design:returntype",void 0)],q,"getExporting",null),Q([Object(i.f)(),G("design:type",Function),G("design:paramtypes",[a]),G("design:returntype",void 0)],q,"getSaving",null),Q([Object(i.f)(),G("design:type",Function),G("design:paramtypes",[a]),G("design:returntype",void 0)],q,"getCopying",null),Q([Object(i.f)(),G("design:type",Function),G("design:paramtypes",[a]),G("design:returntype",void 0)],q,"getSort",null),Q([Object(i.f)(),G("design:type",Function),G("design:paramtypes",[a]),G("design:returntype",void 0)],q,"getSelectedCategory",null),q=Q([Object(i.g)({name:"bookmarks",defaults:X})],q))},R6Q1:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(){h(this,e)}return b(e,null,[{key:"toArray",value:function(e){return[e.x,e.y,e.z]}},{key:"fromArray",value:function(e){return{x:e[0],y:e[1],z:e[2]}}}]),e}()},RD2w:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.AnnotationsCreate="annotations.create",e.AnnotationsDestroy="annotations.destroy",e.AnnotationsInfo="annotations.info",e.AnnotationsSetDescription="annotations.setDescription",e.AnnotationsSetLabelsShown="annotations.setLabelsShown",e.AnnotationsSetTitle="annotations.setTitle",e.AnnotationsUpdate="annotations.update",e.AnnotationsSetEnabled="annotations.setEnabled",e.CameraInfo="camera.info",e.CameraOrbit="camera.orbit",e.CameraPan="camera.pan",e.CameraReset="camera.reset",e.CameraSet="camera.set",e.CameraZoom="camera.zoom",e.setCameraMode="camera.setCameraMode",e.CameraDisableChapterCamera="camera.disableChapterCamera",e.CameraEnableChapterCamera="camera.enableChapterCamera",e.GetAnnotationInfo="annotations.info",e.HideAnnotations="annotations.hide",e.HotspotsCreate="hotspots.create",e.HotspotsDestroy="hotspots.destroy",e.HotspotsHide="hotspots.hide",e.HotspotsInfo="hotspots.info",e.HotspotsShow="hotspots.show",e.HotspotsTypes="hotspots.types",e.HotspotsUpdate="hotspots.update",e.HumanInfo="human.info",e.HumanCanvasInfo="human.canvasInfo",e.InputDisable="input.disable",e.InputEnable="input.enable",e.LabelsCreate="labels.create",e.LabelsDestroy="labels.destroy",e.LabelsInfo="labels.info",e.LabelsHide="labels.hide",e.LabelsSetEnabled="labels.setEnabled",e.LabelsShow="labels.show",e.LabelsUpdate="labels.update",e.LabelsCanvasUpdate="labels.canvasUpdate",e.LabelsSetScale="labels.setScale",e.NativeErrorMessage="native.errorMessage",e.NativeSetSdkOffline="native.setSdkOffline",e.NativeSetAppVersion="native.setAppVersion",e.NativeRedirect="native.redirect",e.NativeReload="native.reload",e.NativeOfflineModelIds="native.offlineModelIDs",e.QuizInfo="quiz.info",e.QuizEnter="quiz.enter",e.QuizExit="quiz.exit",e.QuizQuestion="quiz.currentQuestion",e.QuizSubmit="quiz.submit",e.QuizNextQuestion="quiz.next",e.QuizPreviousQuestion="quiz.previous",e.QuizSelectQuestion="quiz.select",e.QuizSet="quiz.set",e.QuizReset="quiz.reset",e.SceneMetaData="scene.metadata",e.SceneSetHighlightColor="scene.setHighlightColor",e.SceneColorObject="scene.colorObject",e.SceneDisableHighlight="scene.disableHighlight",e.SceneEnableHighlight="scene.enableHighlight",e.SceneGetColor="scene.getColor",e.SceneInfo="scene.info",e.SceneLoad="scene.load",e.ScenePick="scene.pick",e.SceneReset="scene.reset",e.SceneSelectObjects="scene.selectObjects",e.SceneShowObjects="scene.showObjects",e.SceneTransformObject="scene.transformObject",e.SceneUncolorObject="scene.uncolorObject",e.SceneSnapshot="scene.snapshot",e.SceneCapture="scene.capture",e.SceneRestore="scene.restore",e.SceneEnableXrayMode="scene.enableXray",e.SceneDisableXrayMode="scene.disableXray",e.SceneSetLayersSliderPosition="scene.setLayersSliderPosition",e.SceneGetLayers="scene.getLayers",e.SceneSetBaseDirectory="scene.setBaseDirectory",e.ShowAnnotations="annotations.show",e.SetAnnotationsShown="annotations.setShown",e.TimelineInfo="timeline.info",e.TimelineQuery="timeline.query",e.TimelineNext="timeline.nextChapter",e.TimelinePause="timeline.pause",e.TimelinePlay="timeline.play",e.TimelinePrev="timeline.previousChapter",e.TimelineSet="timeline.set",e.UIGetBackground="ui.getBackground",e.UIGetDisplay="ui.getDisplay",e.UIGetWorldPosition="ui.getWorldPosition",e.UISetBackground="ui.setBackground",e.UIPresetBackground="ui.presetBackground",e.UISetDisplay="ui.setDisplay",e.UIResetDisplay="ui.resetDisplay",e.UISnapshot="ui.snapshot",e.focusObject="focus.focusObject",e.dissectSetEnabled="dissect.setEnabled",e.pickSingleSetEnabled="pick.single.setEnabled",e.pickMultiSetEnabled="pick.multi.setEnabled",e.getCanvasPos="scene.getCanvasPos",e.sceneSetClickMode="scene.setClickMode",e.sceneGetClickMode="scene.getClickMode",e.IsolateObject="scene.isolateObject",e.UISetOndemand="ui.setOndemand",e.UISetLoadingExperience="ui.setLoadingExperience",e.UISetScrollCaptureMode="ui.setScrollCaptureMode",e.UISetTutorial="ui.setTutorial",e.UISetQuizLock="ui.setQuizLock",e}({})},"RGY+":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("fXoL"),a=n("3Pt+"),o=function(){var e=function(){function e(){h(this,e),this.theme="dark",this.min=0,this.max=100,this.step=1,this.label="",this._value=0,this.disabled=!1,this.blurred=new i.p,this.mouseUp=new i.p,this.onChange=function(){},this.onTouched=function(){},this.propagateChange=function(e){}}return b(e,[{key:"value",get:function(){return this._value},set:function(e){null!=e&&(null==this._initialValue&&(this._initialValue=e),this._value=e,this.propagateChange(this.value))}},{key:"ngOnInit",value:function(){}},{key:"handleMouseUp",value:function(){this.mouseUp.emit()}},{key:"handleBlur",value:function(){this.blurred.emit()}},{key:"handleRangeDoubleClick",value:function(){this.value=this._initialValue}},{key:"writeValue",value:function(e){this.value=e}},{key:"registerOnChange",value:function(e){this.propagateChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-slider"]],inputs:{theme:"theme",min:"min",max:"max",step:"step",value:"value",label:"label"},outputs:{blurred:"blurred",mouseUp:"mouseUp"},features:[i.Cb([{provide:a.p,useExisting:Object(i.W)((function(){return e})),multi:!0}])],decls:5,vars:16,consts:[[1,"slider"],[1,"slider__range"],["type","range",1,"range",3,"ngModel","min","max","step","disabled","ngModelChange","dblclick","mouseup"],[1,"slider__input"],["type","number",1,"input",3,"ngModel","min","max","step","disabled","ngModelChange","blur"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Vb(1,"div",1),i.Vb(2,"input",2),i.cc("ngModelChange",(function(e){return t.value=e}))("dblclick",(function(){return t.handleRangeDoubleClick()}))("mouseup",(function(){return t.handleMouseUp()})),i.Ub(),i.Ub(),i.Vb(3,"div",3),i.Vb(4,"input",4),i.cc("ngModelChange",(function(e){return t.value=e}))("blur",(function(){return t.handleBlur()})),i.Ub(),i.Ub(),i.Ub()),2&e&&(i.Db(2),i.Hb("light","light"===t.theme)("dark","dark"===t.theme),i.mc("ngModel",t.value)("min",t.min)("max",t.max)("step",t.step)("disabled",t.disabled),i.Eb("aria-label",t.label),i.Db(2),i.mc("ngModel",t.value)("min",t.min)("max",t.max)("step",t.step)("disabled",t.disabled),i.Eb("aria-label",t.label))},directives:[a.y,a.c,a.r,a.u,a.w],styles:[".slider[_ngcontent-%COMP%]{align-items:center;display:flex}.slider__range[_ngcontent-%COMP%]{flex:1 1 100%}.slider__input[_ngcontent-%COMP%]{flex:0 0 80px;margin-left:8px}"]}),e}()},"RX1/":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){h(this,e),this.version=4,this.groupInviteMode=0,this.groupCodeMode=0}},"Rc+H":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("ofXK"),a=n("AcyG"),o=n("FFWI"),r=n("3Pt+"),s=n("+pSP"),c=n("fXoL"),u=function(){var e=function e(){h(this,e)};return e.\u0275mod=c.Nb({type:e}),e.\u0275inj=c.Mb({factory:function(t){return new(t||e)},imports:[[a.d.forFeature([o.b]),i.c,s.a,r.z]]}),e}()},Ryms:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.XSmall=0]="XSmall",e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Large=3]="Large",e[e.XLarge=4]="XLarge",e}({})},"S+jl":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ofXK"),a=n("Ow1N"),o=n("fXoL"),r=function(){var e=function e(){h(this,e)};return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a]]}),e}()},"S/GR":function(t,n,i){"use strict";i.d(n,"a",(function(){return j}));var a,o=i("e0fF"),r=i("b36G"),s=i("LvDl"),c=i("aqTE"),d=i("nS47"),g=i("f5j2"),f=i("AcyG"),m=i("GMXD"),y=i("0Yvn"),v=i("7u76"),k=i("gQBz"),O=i("rGz1"),S=i("FFWI"),x=i("Vrox"),C=i("fXoL"),w=function e(t){var n=this;h(this,e),this.shown="majorityWins",this.selected="majorityWins",this.pickable="majorityWins",t.forEach((function(e){n[e]="majorityWins"}))},j=((a=function(){function t(e,n,i){h(this,t),this.store=e,this.labelService=n,this.graphService=i}return b(t,[{key:"getMinimumGraphSync",value:function(t,n,i){var a=this,r=Human.scene.colorRecipes.getRecipes(),c=Object.keys(new o.d(r)),u=function(e,t,n){var i={},a={};return d.a.depthFirst(e,(function(o){a[o]=d.a.isRoot(e,o)?Object.assign(Object.assign({},d.a.getState(e,o,n)),t[o]||{}):Object.assign(Object.assign({},a[e.predecessors[o]]),t[o]||{}),d.a.isLeaf(e,o)&&(i[o]=a[o])})),i}(t,n,c),h=function(t,n,i){var a=Object.keys(n),o=g.a.getInitialVoterState(i,a),r=g.a.getInitialElectionDepth(i,t),c=Object(s.range)(r,-1).reduce((function(e,i){var a=g.a.getEligibleElections(t,Object.keys(e.remainingVoters),i),o=g.a.getElectionResults(t,e.remainingVoters,a,n),r=function(e){return e.reduce((function(e,t){var n=Object.keys(t).map((function(e){return function(e,t,n,i){var a=i.reduce((function(t,i){return t[i]=l({},e,!n),t}),{});return a[t]=l({},e,n),a}(e,t[e].id,t[e].result,t[e].dissenters)})).reduce((function(e,t){return Object(s.merge)(e,t)}),{});return Object.keys(n).forEach((function(t){e[t]=n[t]})),e}),{})}(o.results);return Object.keys(r).forEach((function(t){e.syncGraph[t]=r[t]})),e.remainingVoters=o.remainingVoters,e}),{syncGraph:{},remainingVoters:o}).syncGraph;return function(t,n,i,a){var o,r=n.reduce((function(n,o){var r,s=t[o],c=t[a.predecessors[o]],u=e(i);try{for(u.s();!(r=u.n()).done;){var l=r.value;s[l]===c[l]&&n.push({successorId:o,prop:l})}}catch(p){u.e(p)}finally{u.f()}return n}),[]),s=e(r);try{for(s.s();!(o=s.n()).done;){var c=o.value;delete t[c.successorId][c.prop],0===Object.keys(t[c.successorId]).length&&delete t[c.successorId]}}catch(u){s.e(u)}finally{s.f()}return t}(c,Object.keys(c).filter((function(e){return!t.roots[e]&&!!t.successors[e]})),a,t)}(t,JSON.parse(JSON.stringify(new w(r))),u);Object.entries(n).forEach((function(e){var t=p(e,2),n=t[0],i=t[1],a=Object(s.omit)(i,c);Object(s.isEmpty)(a)||(h[n]=Object.assign(Object.assign({},h[n]||{}),a))}));var f=new o.c;return Object.entries(h).forEach((function(e){var t=p(e,2),n=t[0],o=t[1];f[a.switchNamespace(n,i)]=o}),this),f}},{key:"convertGraphSync",value:function(e){var t=this,n={},i={},a={},o={};return Object.entries(e).forEach((function(e){var r=p(e,2),s=r[0],c=r[1];Object.entries(c).forEach((function(e){var t=p(e,2),r=t[0],c=t[1];"shown"===r?n[s]=c:"selected"===r?i[s]=c:"pickable"===r?a[s]=!c:o[s]=Object.assign(Object.assign({},o[s]||{}),l({},r,c))}),t)}),this),{showObjects:n,selectObjects:i,pickThroughObjects:a,synchronization:o}}},{key:"switchNamespace",value:function(e,t){return t[e]||e}},{key:"serializeProperties",value:function(e){var t=Object.assign({},e.properties),n=Human.properties.properties["annotations.layout.type"];return"draggable"!==n&&(t["annotations.layout.type"]=n),t}},{key:"serializeHotspots",value:function(e,t){var n=this,i=u(e.hotspots),a={};return t.filter((function(t){return t.chapterId===e.id})).forEach((function(e){var t=n.labelService.serializeLabel(e,i.length);i=[].concat(u(i),u(t.hotspots)),a=Object.assign(Object.assign({},a),t.data)})),{customData:a,hotspots:i}}},{key:"serializeMedia",value:function(e){return e.media?Object.entries(e.media).reduce((function(e,t){var n=p(t,2),i=n[0],a=n[1];return e[i]=Object.assign({},a.data),e}),{}):null}},{key:"serializeBackground",value:function(e){return e?Object(r.classToClass)(e):{}}},{key:"serializeUI",value:function(e,t){return Object(s.isEmpty)(t)?{play:{count:1}}:t}},{key:"calcMinimumPaintState",value:function(e,t){return Object.keys(e.roots).reduce((function(n,i){return Object.assign(Object.assign({},n),function n(i){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=(e.successors[i]||[]).reduce((function(e,a){var o=!Object(s.isEqual)(t[i],t[a]);return Object.assign(Object.assign({},e),n(a,o))}),{});return a?Object.assign(l({},i,t[i]),o):o}(i))}),{})}},{key:"serializeVisibilityLayers",value:function(e,t){var n=Object.assign({},e);return Array.isArray(e.layers)&&(n.layers=e.layers.map((function(e){return Object.assign(Object.assign({},e),{objectIds:e.objectIds.filter((function(e){return Object.prototype.hasOwnProperty.call(t.nodes,e)}))})})).filter((function(e){return e.objectIds.length>0}))),n}},{key:"serializeTimelineMap",value:function(e){return e?e.map((function(e){var t=Object(s.cloneDeep)(e);return delete t.id,t})):[]}},{key:"serializeChapter",value:function(e,t,n,i,a){var o,r,c,u=this.serializeHotspots(t,i),d=this.store.selectSnapshot(O.a.particleSystemsForChapter(t.id)),g=Object(s.pickBy)(t.customData,(function(e,t){return!t.startsWith("errand")})),h=Object.assign(Object.assign(Object.assign({},g),u.customData),{particleSystems:d.map((function(e){return e.id}))}),f=this.store.selectSnapshot(S.b.getQuizQuestionsByChapter(t.id)).map((function(e){var t=Object.assign({},e);return delete t.chapterId,t})),b=a[t.id],v=this.store.selectSnapshot(x.a.getRegisteredThumbnails),C=(null===(r=v.get(b))||void 0===r?void 0:r.urls)||(null===(c=v.get(t.id))||void 0===c?void 0:c.urls)||null,w=(l(o={id:b,displayName:t.info.displayName,description:t.info.description},t.camera.action,t.camera.location),l(o,"cameraRotationCenter",t.camera.rotationCenter),l(o,"background",this.serializeBackground(t.background)),l(o,"hotspots",u.hotspots),l(o,"clippingPlanes",{clips:t.clippingPlanes.clips,boundary:t.clippingPlanes.boundary}),l(o,"ui",this.serializeUI(t,t.ui)),l(o,"media",this.serializeMedia(t)),l(o,"graph",t.graph||{}),l(o,"timelineMap",this.serializeTimelineMap(t.timelineMap)),l(o,"customData",h),l(o,"viewModes",t.viewModes),l(o,"lights",t.lights),l(o,"recipes",t.recipes||{}),l(o,"transparencyMode",t.transparencyMode||""),l(o,"fallbackTransparency",t.fallbackTransparency||""),l(o,"properties",this.serializeProperties(t)),l(o,"effects",t.effects||{}),l(o,"options",t.options),l(o,"transitions",t.transitions),l(o,"environment",t.environment||{}),l(o,"legend",t.legend||[]),l(o,"visibilityLayers",this.serializeVisibilityLayers(t.visibilityLayers.src,e)),l(o,"colorRecipeObjects",t.colorRecipeObjects),l(o,"contentBlocks",t.contentBlocks||[]),l(o,"thumbnails",C),l(o,"quizQuestions",f),o),j=this.store.selectSnapshot(m.a.getAllNodeState)[t.id],P=Object.keys(j).reduce((function(n,i){var a=j[i],o=a.shownSetByTween?Object(k.b)(e,i,t.showObjects)||Object(k.c)(e,i,t.showObjects):a.shown;return n.boolState[i]={shown:o,pickable:a.pickable},n.paintState[i]=y.a.toEngine(a.paint),n}),{boolState:{},paintState:{}}),_=this.getMinimumGraphSync(e,P.boolState,n);return Object.entries(this.convertGraphSync(_)).forEach((function(e){var t=p(e,2),n=t[0],i=t[1];w[n]=i})),w.synchronization=this.calcMinimumPaintState(e,P.paintState),w}}]),t}()).\u0275fac=function(e){return new(e||a)(C.Zb(f.h),C.Zb(c.a),C.Zb(v.a))},a.\u0275prov=C.Lb({token:a,factory:a.\u0275fac,providedIn:"root"}),a)},S6v9:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("ofXK"),a=n("AcyG"),o=n("QtmD"),r=n("3Pt+"),s=n("PCNd"),c=n("vvyD"),u=n("tyNb"),l=n("hQIT"),p=n("Wdmj"),d=n("fXoL"),g=function(){var e=function e(){h(this,e)};return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[a.d.forFeature([o.a]),i.c,c.a,r.z,s.a,u.i,l.a,p.d]]}),e}()},"SJ0+":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var i=function(e){return e[e.LeftClip=0]="LeftClip",e[e.RightClip=1]="RightClip",e[e.BottomClip=2]="BottomClip",e[e.TopClip=3]="TopClip",e[e.FrontClip=4]="FrontClip",e[e.BackClip=5]="BackClip",e}({}),a={left:i.LeftClip,right:i.RightClip,bottom:i.BottomClip,top:i.TopClip,front:i.FrontClip,back:i.BackClip},o={0:"left",1:"right",2:"bottom",3:"top",4:"front",5:"back"}},SxJt:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Success="success",e.Fail="fail",e}({})},TATr:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"r",(function(){return a})),n.d(t,"l",(function(){return o})),n.d(t,"o",(function(){return r})),n.d(t,"p",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"s",(function(){return l})),n.d(t,"t",(function(){return p})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return g})),n.d(t,"e",(function(){return f})),n.d(t,"j",(function(){return b})),n.d(t,"k",(function(){return m})),n.d(t,"i",(function(){return y})),n.d(t,"n",(function(){return v})),n.d(t,"q",(function(){return k})),n.d(t,"c",(function(){return O})),n.d(t,"m",(function(){return S})),n.d(t,"a",(function(){return x}));var i=function(){var e=function e(t){h(this,e),this.id=t};return e.type="[Engine Camera] Clear Camera",e}(),a=function(){var e=function e(t,n){h(this,e),this.id=t,this.camera=n};return e.type="[Engine Camera] Store Camera",e}(),o=function(){var e=function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;h(this,e),this.camera=t,this.animate=n,this.animationDuration=i,this.rotationCenter=a};return e.type="[Engine Camera] Set Camera",e}(),r=function(){var e=function e(){h(this,e)};return e.type="[Engine Camera] Set Camera Success",e}(),s=function(){var e=function e(t){h(this,e),this.enabled=t};return e.type="[Engine Camera] Set Chapter Camera Enabled",e}(),c=function(){var e=function e(t){h(this,e),this.cameraMotion=t};return e.type="[Engine Camera] Move Camera",e}(),u=function(){var e=function e(){h(this,e)};return e.type="[Engine Camera] Reset Camera",e}(),l=function(){var e=function e(t){h(this,e),this.value=t};return e.type="[Engine Camera] Zoom Camera",e}(),p=function(){var e=function e(t){h(this,e),this.value=t};return e.type="[Engine Camera] Zoom Camera Static",e}(),d=function(){var e=function e(t){h(this,e),this.value=t};return e.type="[Engine Camera] Pan Camera X",e}(),g=function(){var e=function e(t){h(this,e),this.value=t};return e.type="[Engine Camera] Pan Camera Y",e}(),f=function(){var e=function e(t,n,i){h(this,e),this.x=t,this.y=n,this.z=i};return e.type="[Engine Camera] Pan Camera Static",e}(),b=function(){var e=function e(t){h(this,e),this.value=t};return e.type="[Engine Camera] Rotate Camera X",e}(),m=function(){var e=function e(t){h(this,e),this.value=t};return e.type="[Engine Camera] Rotate Camera Y",e}(),y=function(){var e=function e(t,n){h(this,e),this.x=t,this.y=n};return e.type="[Engine Camera] Rotate Camera Static",e}(),v=function(){var e=function e(t){h(this,e),this.mode=t};return e.type="[Engine Camera] Set Camera Mode",e}(),k=function(){var e=function e(t){h(this,e),this.zoomed=t};return e.type="[Engine Camera] Set Zoomed",e}(),O=function(){var e=function e(t){h(this,e),this.lock=t};return e.type="[Engine Camera] Lock camera",e}(),S=function(){var e=function e(t){h(this,e),this.camera=t};return e.type="[Engine Camera] Set Camera Fly To",e}(),x=function(){var e=function e(t){h(this,e),this.patches=t};return e.type="[Engine Camera] Patch Camera State",e}()},TEF2:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i,a,o=n("AcyG"),r=function e(){h(this,e)},s=n("lz5t"),c=n("odcc"),u=n("nYR2"),l=n("vkgz"),p=n("pLZG"),d=n("5+tZ"),g=n("qXBG"),f=n("AytR"),m=n("wSC8"),y=n("Kn5L"),v=n("LvDl"),k=n("ECVi"),O=n("k+hL"),S=n("kTA6"),x=n("fXoL"),C=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},w=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},j={buying:!1,updating:!1,cancelling:!1,checkingCode:!1,plans:[],selectedPlan:void 0},P=((a=i=function(){function e(t,n,i,a){h(this,e),this.authService=t,this.subscriptionService=n,this.pendoService=i,this.store=a}return b(e,[{key:"resetSubscriptionState",value:function(e,t){e.setState(j)}},{key:"getPremiumPlans",value:function(e,t){this.subscriptionService.getBraintreePlans().subscribe((function(t){e.dispatch(new c.l(t))}),(function(t){e.dispatch(new c.k(t))}))}},{key:"getPremiumPlansSuccess",value:function(e,t){var n=t.plans;e.patchState({plans:n})}},{key:"setPremiumPlan",value:function(e,t){var n=t.plan;e.patchState({selectedPlan:n})}},{key:"buySubscription",value:function(e,t){var n=this,i=t.request;e.patchState({buying:!0}),f.a.deploy===m.a.Local?this.subscriptionService.buyProfessionalSubscription(i).pipe(Object(u.a)((function(){return e.patchState({buying:!1})}))).subscribe((function(){e.dispatch(new c.c(i))}),(function(t){e.dispatch(new c.b(t))})):this.authService.isHuman("subscription_checkout").pipe(Object(l.a)((function(t){t.isHuman||e.dispatch(new y.sb)})),Object(p.a)((function(e){return e.isHuman})),Object(d.a)((function(){return n.subscriptionService.buyProfessionalSubscription(i)})),Object(u.a)((function(){return e.patchState({buying:!1})}))).subscribe((function(){e.dispatch(new c.c(i))}),(function(t){e.dispatch(new c.b(t))}))}},{key:"buySubscriptionSuccess",value:function(e,t){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t);var n=this.store.selectSnapshot(i.isFreeTrial);this.pendoService.track("Account Upgrade - "+(n?"Free Trial to Premium Individual":"Free Individual to Premium Individual"))}},{key:"updateSubscription",value:function(e,t){var n=t.request;e.patchState({updating:!0}),this.subscriptionService.updateProfessionalSubscription(n).pipe(Object(u.a)((function(){return e.patchState({updating:!1})}))).subscribe((function(){e.dispatch(new c.r)}),(function(t){e.dispatch(new c.q(t))}))}},{key:"cancelSubscription",value:function(e,t){e.patchState({cancelling:!0}),this.subscriptionService.cancelSubscription().pipe(Object(u.a)((function(){return e.patchState({cancelling:!1})}))).subscribe((function(){e.dispatch(new c.f)}),(function(t){e.dispatch(new c.e(t))}))}},{key:"checkPromoCode",value:function(e,t){var n=t.planId,i=t.code;e.patchState({checkingCode:!0}),this.subscriptionService.getBraintreePlan(n,i).pipe(Object(u.a)((function(){return e.patchState({checkingCode:!1})}))).subscribe((function(t){e.dispatch(new c.i(i,t))}),(function(t){e.dispatch(new c.h(t))}))}},{key:"checkPromoCodeSuccess",value:function(e,t){var n=t.plan;e.patchState({selectedPlan:n})}},{key:"removePromoCode",value:function(e,t){var n=e.getState(),i=n.plans,a=n.selectedPlan;if(!Object(v.isNil)(a)){var o=a.plan_id;e.patchState({selectedPlan:i.find((function(e){return e.plan_id===o}))})}}},{key:"ngxsOnInit",value:function(e){}}],[{key:"getBuying",value:function(e){return e.buying}},{key:"getUpdating",value:function(e){return e.updating}},{key:"getCancelling",value:function(e){return e.cancelling}},{key:"getSubscription",value:function(e,t){return Object(v.get)(t,"userProfile.subscription")}},{key:"getPlans",value:function(e){return e.plans}},{key:"getSelectedPlan",value:function(e){return e.selectedPlan}},{key:"getCheckingCode",value:function(e){return e.checkingCode}},{key:"isFreeTrial",value:function(e,t){return"Free Trial"===Object(v.get)(t,"userProfile.subscription.subscription_type")}},{key:"isCanceled",value:function(e,t){return"canceled"===Object(v.get)(t,"userProfile.subscription.subscription_status")}}]),e}()).\u0275fac=function(e){return new(e||a)(x.Zb(g.a),x.Zb(s.a),x.Zb(S.b),x.Zb(o.h))},a.\u0275prov=x.Lb({token:a,factory:a.\u0275fac}),C([Object(o.a)(c.n),w("design:type",Function),w("design:paramtypes",[Object,c.n]),w("design:returntype",void 0)],a.prototype,"resetSubscriptionState",null),C([Object(o.a)(c.j),w("design:type",Function),w("design:paramtypes",[Object,c.j]),w("design:returntype",void 0)],a.prototype,"getPremiumPlans",null),C([Object(o.a)(c.l),w("design:type",Function),w("design:paramtypes",[Object,c.l]),w("design:returntype",void 0)],a.prototype,"getPremiumPlansSuccess",null),C([Object(o.a)(c.o),w("design:type",Function),w("design:paramtypes",[Object,c.o]),w("design:returntype",void 0)],a.prototype,"setPremiumPlan",null),C([Object(o.a)(c.a),w("design:type",Function),w("design:paramtypes",[Object,c.a]),w("design:returntype",void 0)],a.prototype,"buySubscription",null),C([Object(o.a)(c.c),w("design:type",Function),w("design:paramtypes",[Object,c.c]),w("design:returntype",void 0)],a.prototype,"buySubscriptionSuccess",null),C([Object(o.a)(c.p),w("design:type",Function),w("design:paramtypes",[Object,c.p]),w("design:returntype",void 0)],a.prototype,"updateSubscription",null),C([Object(o.a)(c.d),w("design:type",Function),w("design:paramtypes",[Object,c.d]),w("design:returntype",void 0)],a.prototype,"cancelSubscription",null),C([Object(o.a)(c.g),w("design:type",Function),w("design:paramtypes",[Object,c.g]),w("design:returntype",void 0)],a.prototype,"checkPromoCode",null),C([Object(o.a)(c.i),w("design:type",Function),w("design:paramtypes",[Object,c.i]),w("design:returntype",void 0)],a.prototype,"checkPromoCodeSuccess",null),C([Object(o.a)(c.m),w("design:type",Function),w("design:paramtypes",[Object,c.m]),w("design:returntype",void 0)],a.prototype,"removePromoCode",null),C([Object(o.f)(),w("design:type",Function),w("design:paramtypes",[r]),w("design:returntype",void 0)],a,"getBuying",null),C([Object(o.f)(),w("design:type",Function),w("design:paramtypes",[r]),w("design:returntype",void 0)],a,"getUpdating",null),C([Object(o.f)(),w("design:type",Function),w("design:paramtypes",[r]),w("design:returntype",void 0)],a,"getCancelling",null),C([Object(o.f)([k.a]),w("design:type",Function),w("design:paramtypes",[r,O.a]),w("design:returntype",void 0)],a,"getSubscription",null),C([Object(o.f)(),w("design:type",Function),w("design:paramtypes",[r]),w("design:returntype",void 0)],a,"getPlans",null),C([Object(o.f)(),w("design:type",Function),w("design:paramtypes",[r]),w("design:returntype",void 0)],a,"getSelectedPlan",null),C([Object(o.f)(),w("design:type",Function),w("design:paramtypes",[r]),w("design:returntype",void 0)],a,"getCheckingCode",null),C([Object(o.f)([k.a]),w("design:type",Function),w("design:paramtypes",[r,O.a]),w("design:returntype",void 0)],a,"isFreeTrial",null),C([Object(o.f)([k.a]),w("design:type",Function),w("design:paramtypes",[r,O.a]),w("design:returntype",void 0)],a,"isCanceled",null),a=i=C([Object(o.g)({name:"subscription",defaults:j})],a))},TWoc:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("HlzF"),a=n("fXoL"),o=new RegExp("^/media/audio/(.*)/.*$"),r=function(){var e=function(){function e(){h(this,e),this.audioPlayers=new Map}return b(e,[{key:"createAudioUploadEvent",value:function(e){return{type:"uploadFile",url:"/ws/media/audio/upload",method:"POST",file:e}}},{key:"getAudioClips",value:function(e){return Object.values(e).filter((function(e){return"audio"===e.data.streamType}))}},{key:"createAudioClip",value:function(e,t,n){var i=Human.timeline.branchTimelines[e.id],a=this.getAudioUUID(t);return[a,{data:{clipId:a,streamType:"audio",fullUrl:t,time1:i.timeRange.firstTime,time2:i.timeRange.lastTime,lang:n}}]}},{key:"getAudioSrc",value:function(e){return e.match("/media/audio")||(e="/content/states/"+e),e}},{key:"getAudioPlayer",value:function(e){return this.audioPlayers.get(e)}},{key:"addAudioPlayer",value:function(e){this.removeAudioPlayer(e),e=this.getAudioSrc(e);var t=new i.Howl({src:[e]});return this.audioPlayers.set(e,t),t}},{key:"removeAudioPlayer",value:function(e){var t=this.audioPlayers.get(e);t&&(t.unload(),this.audioPlayers.delete(e))}},{key:"stopAudio",value:function(){this.audioPlayers.forEach((function(e){e.stop()}))}},{key:"getAudioUUID",value:function(e){return e.match(o)[1]}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},ThaW:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("ZR5G");function a(e){return e.split("/").length>1?i.a.Module:i.a.Bookmark}},"Tx//":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("ofXK"),a=n("tyNb"),o=n("AcyG"),r=n("CpGW"),s=n("vvyD"),c=n("PCNd"),u=n("INTG"),l=n("3Pt+"),p=n("izPL"),d=n("S6v9"),g=n("3ros"),f=n("ejx4"),b=n("fXoL"),m=function(){var e=function e(){h(this,e)};return e.\u0275mod=b.Nb({type:e}),e.\u0275inj=b.Mb({factory:function(t){return new(t||e)},imports:[[c.a,s.a,i.c,a.i,p.a,u.a,l.z,d.a,g.a,f.a,o.d.forFeature([r.a])]]}),e}()},UEjg:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("ufUH");!function(e){var t=function e(t){h(this,e),this.canHover=t};t.type="[View] Set Can Hover",e.SetCanHover=t;var n=function e(t){h(this,e),this.canTouch=t};n.type="[View] Set Can Touch",e.SetCanTouch=n;var i=function e(t){h(this,e),this.canFullscreen=t};i.type="[View] Set Can Fullscreen",e.SetCanFullscreen=i;var o=function e(t){h(this,e),this.ui=t};o.type="[View] Set UI",e.SetUI=o;var r=function e(t){h(this,e),this.ui=t};r.type="[View] Set Initial UI",e.SetInitialUI=r;var s=function e(t){h(this,e),this.enabled=t};s.type="[View] Set Input Enabled",e.SetInputEnabled=s;var c=function e(t){h(this,e),this.mode=t};c.type="[View] Set Search Display Mode",e.SetSearchDisplayMode=c;var u=function e(t){h(this,e),this.active=t};u.type="[View] Toggle Presentation",e.TogglePresentation=u;var l=function e(t){h(this,e),this.interactType=t};l.type="[View] Set Interact Type",e.SetInteractType=l;var p=function e(t){h(this,e),this.onDemand=t};p.type="[View] Set On Demand",e.SetOnDemand=p;var d=function e(t){h(this,e),this.layout=t};d.type="[View] Set Layout",e.SetLayout=d;var g=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.a.Basics;h(this,e),this.tab=t};g.type="[View] Toggle Help Tab",e.ToggleHelpTab=g;var f=function e(t){h(this,e),this.inputMode=t};f.type="[View] Set Input Mode",e.SetInputMode=f;var b=function e(t){h(this,e),this.tutorial=t};b.type="[View] Set Tutorial",e.SetTutorial=b;var m=function e(t){h(this,e),this.intro=t};m.type="[View] Start Tutorial",e.StartTutorial=m;var y=function e(t){h(this,e),this.seen=t};y.type="[View] Tutorial Seen",e.TutorialSeen=y;var v=function e(){h(this,e)};v.type="[View] Tutorial Next",e.TutorialNext=v;var k=function e(){h(this,e)};k.type="[View] Tutorial Previous",e.TutorialPrevious=k;var O=function e(t){h(this,e),this.show=t};O.type="[View] Toggle Node Info",e.ToggleNodeInfo=O;var S=function e(t){h(this,e),this.lang=t};S.type="[View] Set View Language",e.SetViewLanguage=S;var x=function e(t){h(this,e),this.fallback=t};x.type="[View] Set Node Info Config",e.SetNodeInfoConfig=x;var C=function e(t){h(this,e),this.enabled=t};C.type="[View] Set multi pick mode enabled",e.SetMultiPickModeEnabled=C;var w=function e(t){h(this,e),this.labelsBreakpoint=t};w.type="[View] Set Label Breakpoint",e.SetLabelBreakpoint=w;var j=function e(t){h(this,e),this.usePrintImage=t};j.type="[View] Set Use Print Image",e.SetUsePrintImage=j;var P=function e(t){h(this,e),this.windows=t};P.type="[View] Set Windows",e.SetWindows=P;var _=function e(t){h(this,e),this.window=t};_.type="[View] Open Window",e.OpenWindow=_;var M=function e(t){h(this,e),this.window=t};M.type="[View] Close Window",e.CloseWindow=M;var I=function e(t,n){h(this,e),this.window=t,this.show=n};I.type="[View] Toggle Window",e.ToggleWindow=I;var T=function e(t){h(this,e),this.open=t};T.type="[View] Toggle Menu",e.ToggleMenu=T;var U=function e(t){h(this,e),this.enabled=t};U.type="[View] Whiteboard Enabled",e.SetWhiteboardEnabled=U;var L=function e(t){h(this,e),this.brushSize=t};L.type="[View] Whiteboard Brush Size",e.SetWhiteboardBrushSize=L;var z=function e(t){h(this,e),this.brushColor=t};z.type="[View] Whiteboard Brush Color",e.SetWhiteboardBrushColor=z;var A=function e(t){h(this,e),this.size=t};A.type="[View] Whiteboard Text Size",e.SetWhiteboardTextSize=A;var F=function e(t){h(this,e),this.eraserSize=t};F.type="[View] Whiteboard Eraser Size",e.SetWhiteboardEraserSize=F;var D=function e(t){h(this,e),this.mode=t};D.type="[View] Whiteboard Annotate Mode",e.SetWhiteboardAnnotateMode=D;var E=function e(t){h(this,e),this.hasPaint=t};E.type="[View] Whiteboard Has Paint",e.SetWhiteboardHasPaint=E;var N=function e(t){h(this,e),this.hasText=t};N.type="[View] Whiteboard Has Text",e.SetWhiteboardHasText=N;var R=function e(t,n){h(this,e),this.showSpinner=t,this.label=n};R.type="[View] Show Scrim",e.ShowScrim=R;var V=function e(){h(this,e)};V.type="[View] Hide Scrim",e.HideScrim=V}(i||(i={}))},UdTj:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("fXoL"),a=n("3Pt+"),o=n("ofXK"),r=n("PmOP"),s=n("0njA"),c=n("bSwM"),u=n("lR5k");function l(e,t){if(1&e&&(i.Qb(0,"span",10),i.hc(1,"markdown")),2&e){var n=i.gc();i.mc("innerHTML",i.ic(1,1,n.label),i.Dc)}}function p(e,t){1&e&&i.kc(0,3)}var d=function(e,t){return{"rotate-90":e,"rotate-0":t}};function g(e,t){if(1&e&&(i.Vb(0,"div",14),i.Qb(1,"app-icon",15),i.Ub()),2&e){var n=i.gc(2);i.mc("ngClass",i.qc(1,d,n.open,!n.open))}}function f(e,t){if(1&e){var n=i.Wb();i.Vb(0,"div",16),i.Vb(1,"mat-checkbox",17),i.cc("change",(function(e){return i.Cc(n),i.gc(2).open=e.checked})),i.Ub(),i.Ub()}if(2&e){var a=i.gc(2);i.Db(1),i.mc("disabled",a.disabled)("checked",a.open)}}function m(e,t){if(1&e&&(i.Tb(0,11),i.Nc(1,g,2,4,"div",12),i.Nc(2,f,2,2,"div",13),i.Sb()),2&e){var n=i.gc();i.mc("ngSwitch",n.toggleType),i.Db(1),i.mc("ngSwitchCase","arrow"),i.Db(1),i.mc("ngSwitchCase","checkbox")}}function y(e,t){if(1&e&&(i.Vb(0,"div",18),i.Pc(1),i.Ub()),2&e){var n=i.gc();i.Db(1),i.Rc(" ",n.hint," ")}}var v=[[["","panel-prefix",""]],[["","panel-actions",""]],"*",[["","panel-label",""]]],k=function(e,t,n,i,a,o,r){return{"panel--static":e,"panel--disabled":t,"panel--open":n,"panel--closed":i,"panel--compact":a,"panel--no-padding":o,"panel--inactive":r}},O=["[panel-prefix]","[panel-actions]","*","[panel-label]"],S=function(){var e=function(){function e(t){h(this,e),this.changeRef=t,this.toggleType="none",this.toggleable=!0,this.isCompact=!1,this.noPadding=!1,this.active=!0,this.opened=new i.p,this.disabled=!1,this.onChange=function(){},this.onTouched=function(){},this.propagateChange=function(e){}}return b(e,[{key:"open",get:function(){return this._open},set:function(e){e!==this.open&&(this._open=e,this.value=e)}},{key:"value",get:function(){return this._value},set:function(e){e!==this.value&&(this._value=e,this.open=e,this.propagateChange(this.value),this.changeRef.markForCheck())}},{key:"ngOnInit",value:function(){}},{key:"handleClickHeader",value:function(){"none"!==this.toggleType&&!this.disabled&&this.toggleable&&(this.open=!this.open,this.opened.emit(this.open))}},{key:"writeValue",value:function(e){this.value=e}},{key:"registerOnChange",value:function(e){this.propagateChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-panel"]],inputs:{label:"label",hint:"hint",open:"open",value:"value",toggleType:"toggleType",toggleable:"toggleable",dataTestAttributeVal:"dataTestAttributeVal",isCompact:"isCompact",noPadding:"noPadding",active:"active"},outputs:{opened:"opened"},features:[i.Cb([{provide:a.p,useExisting:Object(i.W)((function(){return e})),multi:!0}])],ngContentSelectors:O,decls:14,vars:13,consts:[[1,"panel",3,"ngClass"],[1,"panel__header",3,"click"],[1,"panel__prefix"],[1,"panel__label"],["class","html",3,"innerHTML",4,"ngIf","ngIfElse"],["labelContent",""],["appEventFence","",1,"panel__actions"],[3,"ngSwitch",4,"ngIf"],["class","panel__hint text-11",4,"ngIf"],[1,"panel__body"],[1,"html",3,"innerHTML"],[3,"ngSwitch"],["class","panel__toggle panel__toggle--arrow rotate--animate",3,"ngClass",4,"ngSwitchCase"],["appEventFence","","class","panel__toggle panel__toggle--checkbox",4,"ngSwitchCase"],[1,"panel__toggle","panel__toggle--arrow","rotate--animate",3,"ngClass"],["icon","angle-right"],["appEventFence","",1,"panel__toggle","panel__toggle--checkbox"],[3,"disabled","checked","change"],[1,"panel__hint","text-11"]],template:function(e,t){if(1&e&&(i.lc(v),i.Vb(0,"div",0),i.Vb(1,"div",1),i.cc("click",(function(){return t.handleClickHeader()})),i.Vb(2,"div",2),i.kc(3),i.Ub(),i.Vb(4,"div",3),i.Nc(5,l,2,3,"span",4),i.Nc(6,p,1,0,"ng-template",null,5,i.Oc),i.Ub(),i.Vb(8,"div",6),i.kc(9,1),i.Ub(),i.Nc(10,m,3,3,"ng-container",7),i.Ub(),i.Nc(11,y,2,1,"div",8),i.Vb(12,"div",9),i.kc(13,2),i.Ub(),i.Ub()),2&e){var n=i.yc(7);i.mc("ngClass",i.vc(5,k,"none"===t.toggleType,t.disabled,t.open,!1===t.open,t.isCompact,t.noPadding,!t.active)),i.Db(5),i.mc("ngIf",t.label)("ngIfElse",n),i.Db(5),i.mc("ngIf","none"!==t.toggleType),i.Db(1),i.mc("ngIf",t.hint&&!t.open)}},directives:[o.m,o.p,r.a,o.r,o.s,s.a,c.a],pipes:[u.b],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.panel[_ngcontent-%COMP%]{border-top:1px solid #1c2a3f}.theme-light[_nghost-%COMP%]   .panel[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{border-top:1px solid #eaeff5}.panel--static[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%]:hover{cursor:default}.theme-light[_nghost-%COMP%]   .panel--open[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel--open[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%]{background-color:#fff}.panel--open[_ngcontent-%COMP%]   .panel__label[_ngcontent-%COMP%]{color:#fff}.theme-light[_nghost-%COMP%]   .panel--open[_ngcontent-%COMP%]   .panel__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel--open[_ngcontent-%COMP%]   .panel__label[_ngcontent-%COMP%]{color:#101823}.panel--open[_ngcontent-%COMP%]   .panel__body[_ngcontent-%COMP%]{display:block}.panel--closed[_ngcontent-%COMP%]   .panel__body[_ngcontent-%COMP%]{display:none}.panel--compact[_ngcontent-%COMP%]   .panel__body[_ngcontent-%COMP%]{padding:4px 8px 12px}.panel--compact[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%]{padding:8px}.panel--compact[_ngcontent-%COMP%]   .panel__hint[_ngcontent-%COMP%]{padding:0 8px 4px}.panel--no-padding[_ngcontent-%COMP%]   .panel__body[_ngcontent-%COMP%], .panel--no-padding[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%], .panel--no-padding[_ngcontent-%COMP%]   .panel__hint[_ngcontent-%COMP%]{padding:0}.panel--inactive[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%], .panel--inactive[_ngcontent-%COMP%]   .panel__label[_ngcontent-%COMP%]{color:#61779e}.panel__header[_ngcontent-%COMP%]{align-items:center;display:flex;word-break:break-word;padding:12px 16px;justify-content:space-between;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.panel__header[_ngcontent-%COMP%]:hover{cursor:pointer}.panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__label[_ngcontent-%COMP%]{color:#fff}.theme-light[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__label[_ngcontent-%COMP%]{color:#101823}.panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__actions[_ngcontent-%COMP%], .panel[_ngcontent-%COMP%]:not(.panel--fixed):hover   .panel__toggle--arrow[_ngcontent-%COMP%]{visibility:visible}.panel__actions[_ngcontent-%COMP%]{flex:0 1 auto;white-space:nowrap;visibility:hidden}.panel__actions[_ngcontent-%COMP%] + .panel__toggle[_ngcontent-%COMP%]{margin-left:8px}.panel__label[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em;flex:1 1 auto;color:#d7e0ea;align-items:center}.theme-light[_nghost-%COMP%]   .panel__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .panel__label[_ngcontent-%COMP%]{color:#283853;font-weight:700}.panel__prefix[_ngcontent-%COMP%]{align-self:flex-start;flex:0 1}.panel__hint[_ngcontent-%COMP%]{padding:0 16px 8px;color:#61779e}.panel__body[_ngcontent-%COMP%]{display:block;padding:12px 12px 32px}.panel__toggle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex:0 0 16px}.panel__toggle--arrow[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0}),e}()},UsYJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("E32s");function a(e,t){if(void 0!==e.activeChapterId&&void 0!==e.nodeState){var n=immer.produceWithPatches(e,(function(e){var n=e.nodeState[e.activeChapterId],a=t.objectIds||Object.keys(n);t.patch?Object.entries(t.patch).forEach((function(e){var t=p(e,2),i=t[0],a=t[1];n[i].shown=a})):a.forEach((function(e){n[e].shown=t.show,n[e].shownSetByTween=t.setByTween,t.objectIds&&(Object(i.a)(e,n,"shown",t.show),!0===t.setByTween&&Object(i.a)(e,n,"shownSetByTween",t.setByTween))}))})),a=p(n,3),o=a[0],r=a[1],s=a[2];return{finalState:immer.produce(o,(function(e){var t;e.patches=r,(t=e.patchesForChapter[e.activeChapterId]).push.apply(t,u(r))})),patches:r,inversePatches:s}}}},V7wM:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){var t=/(\s*[\d\.]+\s*,){2,15}\s*[\d\.]+\s*/g;function n(e){for(var t=0;t<3;t++)if(parseFloat(""+e[t])>1)return!0;return!1}function i(e){var t=document.createElement("div");t.style.backgroundColor=e,document.documentElement.appendChild(t);var n=window.getComputedStyle(t).backgroundColor.replace(/\s/g,"");return window.document.documentElement.removeChild(t),n}function a(e){var t=e.slice(0,4);3===t.length&&t.push(1);for(var n=0;n<4;n++)t[n]=parseFloat(""+t[n]),t[n]<0&&(t[n]=0),t[n]>255&&(t[n]=255);return t[3]>1&&(t[3]=1),t}function o(e){var n;if(Array.isArray(e))n=a(e);else if("string"==typeof e){var o=e.match(t);o?n=a(o[0].split(",")):(o=i(e).match(t))&&(n=a(o[0].split(",")))}return n}function r(e){var t=o(e);if(!t)throw new TypeError("Invalid color input.");var i=s(t);return{1:n(t)?i:t,255:n(t)?t:i}}function s(e){for(var t=n(e),i=[],a=0;a<3;a++){var o=t?e[a]/255:255*e[a];o=t?Math.round(100*o)/100:Math.round(o),i.push(o)}return 4===e.length&&i.push(e[3]),i}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return[t,t,n,n,i,i].join("")})).replace(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,(function(e,t,n,i){return[t,n,i,"ff"].join("")}));var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),i=parseInt(n[1],16),a=parseInt(n[2],16),o=parseInt(n[3],16),r=parseInt(n[4],16)/255;if(t){var s=d([i,a,o]);return[s[0],s[1],s[2],r]}return[i,a,o,r]}function l(e){var t=p(e,3),n=t[0],i=t[1],a=t[2];return Math.sqrt(n*n*.299+i*i*.587+a*a*.114)}function d(e){return e.map((function(e){return e/255}))}function g(e){return e.map((function(e){return Math.round(255*e)}))}function h(e){return"#"+e.map((function(e){var t=e.toString(16);return t.length%2?"0"+t:t})).join("")}e.is255=n,e.isLight=function(e,t){return t||(t=u(e)),(l(e)+l(t))/2>140.25},e.getComputedColor=i,e.convertChannels=a,e.convert=o,e.getColor=r,e.getColors=function(e){var n=[];if("string"==typeof e){var i=e.match(t);i&&(e=i.join(",")),e=e.split(",")}if(Array.isArray(e))if(Array.isArray(e[0])&&Array.isArray(e[1]))n=e;else if(e.length<=2)n=1===e.length?e.concat(e):e;else{var a=Math.floor(e.length/2);n=e.length>4?[e.slice(0,a),e.slice(a)]:[e,e]}return n.map((function(e){return r(e)}))},e.scaleColor=s,e.hexToRgba=c,e.hexToRgb=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=c(e,t);return[n[0],n[1],n[2]]},e.rgbToHex=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return h(t?g(e):e)},e.rgbToHSP=l,e.rgbaToHex=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e[0],i=e[1],a=e[2],o=255*e[3];return h(t?[].concat(u(g([n,i,a])),[o]):[n,i,a,o])},e.rgbToDecimal=d,e.rgbFromDecimal=g}(i||(i={}))},VJvM:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"g",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"p",(function(){return c})),n.d(t,"q",(function(){return u})),n.d(t,"H",(function(){return l})),n.d(t,"t",(function(){return p})),n.d(t,"G",(function(){return d})),n.d(t,"x",(function(){return g})),n.d(t,"y",(function(){return f})),n.d(t,"a",(function(){return b})),n.d(t,"m",(function(){return m})),n.d(t,"D",(function(){return y})),n.d(t,"B",(function(){return v})),n.d(t,"E",(function(){return k})),n.d(t,"C",(function(){return O})),n.d(t,"k",(function(){return S})),n.d(t,"F",(function(){return x})),n.d(t,"u",(function(){return C})),n.d(t,"s",(function(){return w})),n.d(t,"r",(function(){return j})),n.d(t,"n",(function(){return P})),n.d(t,"I",(function(){return _})),n.d(t,"d",(function(){return M})),n.d(t,"j",(function(){return I})),n.d(t,"o",(function(){return T})),n.d(t,"i",(function(){return U})),n.d(t,"w",(function(){return L})),n.d(t,"A",(function(){return z})),n.d(t,"v",(function(){return A})),n.d(t,"b",(function(){return F})),n.d(t,"J",(function(){return D})),n.d(t,"l",(function(){return E})),n.d(t,"z",(function(){return N}));var i=function(){var e=function e(t){h(this,e),this.patches=t};return e.type="[Story Chapter] Apply Patch",e}(),a=function(){var e=function e(){h(this,e)};return e.type="[Story Chapter] Next Chapter",e}(),o=function(){var e=function e(){h(this,e)};return e.type="[Story Chapter] Previous Chapter",e}(),r=function(){var e=function e(){h(this,e)};return e.type="[Story Chapter] First Chapter",e}(),s=function(){var e=function e(){h(this,e)};return e.type="[Story Chapter] Last Chapter",e}(),c=function(){var e=function e(t){h(this,e),this.chapter=t};return e.type="[Story Chapter] Select Chapter",e}(),u=function(){var e=function e(t){h(this,e),this.chapterId=t};return e.type="[Story Chapter] Select Chapter by chapter id",e}(),l=function(){var e=function e(t){h(this,e),this.chapters=t};return e.type="[Story Chapter] Set Chapters",e}(),p=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.cameraAction=n};return e.type="[Story Chapter] Set Chapter Camera Action",e}(),d=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.ui=n};return e.type="[Story Chapter] Set Chapter UI",e}(),g=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.info=n};return e.type="[Story Chapter] Set Chapter Info",e}(),f=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.legend=n};return e.type="[Story Chapter] Set Chapter Legend",e}(),b=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.legend=n};return e.type="[Story Chapter] Add To Chapter Legend",e}(),m=function(){var e=function e(t,n){h(this,e),this.previousIndex=t,this.currentIndex=n};return e.type="[Story Chapter] Reorder Chapters",e}(),y=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.readyState=n};return e.type="[Story Chapter] Set Readystate",e}(),v=function(){var e=function e(t,n,i){h(this,e),this.chapterId=t,this.effects=n,this.properties=i};return e.type="[Story Chapter] Set Chapter PostProcessing",e}(),k=function(){var e=function e(t,n,i){h(this,e),this.chapterId=t,this.transition=n,this.key=i};return e.type="[Story Chapter] Set Chapter Transitions",e}(),O=function(){var e=function e(t,n){h(this,e),this.chapterIds=t,this.properties=n};return e.type="[Story Chapter] Set Chapter Properties",e}(),S=function(){var e=function e(t,n){h(this,e),this.chapterIds=t,this.properties=n};return e.type="[Story Chapter] Remove Chapter Properties",e}(),x=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.transparencyMode=n};return e.type="[Story Chapter] Set Chapter Transparency Mode",e}(),C=function(){var e=function e(t,n,i,a){h(this,e),this.chapterId=t,this.clips=n,this.enabled=i,this.record=a};return e.type="[Story Chapter] Set Chapter Clipping Planes",e}(),w=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.background=n};return e.type="[Story Chapter] Set Chapter Background",e}(),j=function(){var e=function e(t){h(this,e),this.background=t};return e.type="[Story Chapter] Set All Chapters Background",e}(),P=function(){var e=function e(){h(this,e)};return e.type="[Story Chapter] Reset Selected Chapter Background",e}(),_=function(){var e=function e(t){h(this,e),this.background=t};return e.type="[Story Chapter] Set Selected Chapter Background",e}(),M=function(){var e=function e(t,n){h(this,e),this.chapter=t,this.chapterId=n};return e.type="[Story Chapter] Duplicate An Existing Chapter",e}(),I=function(){var e=function e(t){h(this,e),this.chapter=t};return e.type="[Story Chapter] Remove Chapter",e}(),T=function(){var e=function e(){h(this,e)};return e.type="[Story Chapter] Reset",e}(),U=function(){var e=function e(t,n,i){h(this,e),this.chapterId=t,this.camera=n,this.rotationCenter=i};return e.type="[Story Chapters] Record Camera",e}(),L=function(){var e=function e(t,n,i,a){h(this,e),this.chapterId=t,this.index=n,this.position=i,this.record=a};return e.type="[Story Chapters] Set the current visibility layers index and position",e}(),z=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.media=n};return e.type="[Story Chapters] Set the media object",e}(),A=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.contentBlocks=n};return e.type="[Story Chapters] Set the content blocks",e}(),F=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.timelineMaps=n};return e.type="[Story Chapters] Add to timelineMap array",e}(),D=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.updates=n};return e.type="[Story Chapters] Update timelineMap array",e}(),E=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.timelineMapIds=n};return e.type="[Story Chapters] Remove from timelineMap array",e}(),N=function(){var e=function e(t,n){h(this,e),this.chapterId=t,this.lights=n};return e.type="[Story Chapters] Set the lights",e}()},VKIe:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Admin="admin",e.Creator="creator",e.Viewer="viewer",e}({})},Vec5:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){h(this,e)}},Vrox:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var i,a,o=n("AcyG"),r=function e(){h(this,e)},s=n("h8op"),c=n("ve2m"),l=n("ewuU"),d=n("V7wM"),g=n("zKvh"),f=n("t15c"),m=n("yG3n"),y=n("eW6i"),v=n("HDdC"),k=n("LRne"),O=n("GyhO"),S=n("11Ye"),x=n("lJxs"),C=n("5+tZ"),w=n("7wxJ"),j=n("JIr8"),P=n("aqTE"),_=n("gw9s"),M=n("fXoL"),I=((i=function(){function e(t,n,i){h(this,e),this.engineService=t,this.labelsService=n,this.store=i}return b(e,[{key:"localResize",value:function(e,t){var n=Human.renderer.canvas.canvas,i=Human.renderer.canvas.annotationCanvas,a=n.parentNode,o=a.clientWidth,r=a.clientHeight;return a.width=e,a.height=t,n.width=e,n.height=t,i.width=e,i.height=t,a.style.width=e+"px",a.style.height=t+"px",Human.renderer.canvas.init(),Human.renderer.viewportDirty=!0,Human.renderer.camera.updateCanvas(),Human.renderer.postprocess.updateCanvas(),Human.renderer.draw.updateCanvas(),Human.renderer.viewportDirty=!0,Human.renderer.prepareFrame(),Human.renderer.forceRenderFrame(),[o,r]}},{key:"canvasToImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"original",n=e.width/e.height,i=this.engineService.getCanvas(),a=i.width,o=i.height,r=.5*(i.width-a),s=0;switch(t){case"square":o>a?o=a:a=o,r=.5*(i.width-a),s=.5*(i.height-o);break;case"original":a=n*o}return new v.a((function(t){var n=e.getContext("2d");Human.renderer.forceRenderFrame(),n.drawImage(i,r,s,a,o,0,0,e.width,e.height),t.next(),t.complete()}))}},{key:"canvasToImageWithResize",value:function(e){var t=this,n=this.engineService.getCanvas();n.style.opacity="0",this.store.dispatch(new S.Y(!1));var i=p(this.localResize(e.width,e.height),2),a=i[0],o=i[1],r=e.getContext("2d");return new v.a((function(e){setTimeout((function(){Human.renderer.viewportDirty=!0,Human.renderer.prepareFrame(),Human.renderer.forceRenderFrame(),r.drawImage(n,0,0,n.width,n.height),t.localResize(a,o),document.getElementById("theCanvas").style.opacity="",t.store.dispatch(new S.Y(!0)),e.next(),e.complete()}),10)}))}},{key:"drawRadialGradient",value:function(e,t){var n=t.colors,i=p(t.colorStops.map((function(t){return n=t,i=e.width,a=e.height,o=[Math.pow(i/2,2),Math.pow(a/2,2)],r=o[0],s=o[1],n/100*Math.pow(r+s,.5);var n,i,a,o,r,s})),2),a=i[0],o=i[1],r=e.getContext("2d"),s=e.width/2,c=e.height/2,u=r.createRadialGradient(s,c,a,s,c,o);u.addColorStop(t.colorStops[0]/100,"rgba(".concat(n.slice(0,4).join(","),")")),u.addColorStop(t.colorStops[1]/100,"rgba(".concat(n.slice(4,8).join(","),")")),r.fillStyle=u,r.fillRect(0,0,e.width,e.height)}},{key:"drawLinearGradient",value:function(e,t){var n=t.colors,i=e.getContext("2d"),a=e.width/2,o=e.height/2,r=i.createLinearGradient(a,o,a,e.height);r.addColorStop(t.colorStops[0]/100,"rgba(".concat(n.slice(0,4).join(","),")")),r.addColorStop(t.colorStops[1]/100,"rgba(".concat(n.slice(4,8).join(","),")")),i.fillStyle=r,i.fillRect(0,0,e.width,e.height)}},{key:"takeSnapshot",value:function(e,t,n,i,a,o){var r=this,s=o.imageType,c=o.imageQuality,l=o.copyrightEnabled,p=o.crop,d=document.createElement("canvas");d.width=e,d.height=t,"radial"===n.gradientType?this.drawRadialGradient(d,n):"linear"===n.gradientType&&this.drawLinearGradient(d,n);var g=this.engineService.getCanvas(),h=[],f=(d.height>g.height||d.width>g.width?this.canvasToImageWithResize(d):this.canvasToImage(d,p)).pipe(Object(x.a)((function(){return d})));h.push(f);var b=[],m=this.labelsService.getLabelContainer();return a&&m&&b.push(m.nativeElement),b.push.apply(b,u(i)),h.push.apply(h,u(b.map((function(n){return(n instanceof HTMLCanvasElement?Object(k.a)(n):_.a.elementToCanvas(n,!0)).pipe(Object(C.a)((function(n){return _.a.fitCanvas(n,{width:e,height:t})})))})))),Object(O.a)(h).pipe(Object(w.a)(),Object(x.a)((function(e){return _.a.combineCanvasElements(e)})),Object(C.a)((function(e){return l?r.writeLogoToCanvas(e,o):Object(k.a)(e)})),Object(C.a)((function(e){return _.a.canvasToBlob(e,s,c)})))}},{key:"writeLogoToCanvas",value:function(e,t){var n=this;return this.getLogoImage(t.copyrightImagePath).pipe(Object(x.a)((function(i){var a=i.width,o=i.height,r=e.width,s=e.height;.1*r>a&&(o=o/a*(a=.1*r));var c=n.getLogoPosition(r,s,a,o,t),u=c.xOffset,l=c.yOffset;return e.getContext("2d").drawImage(i,u,l,a,o),e})),Object(j.a)((function(){return Object(k.a)(e)})))}},{key:"getLogoImage",value:function(e){return new v.a((function(t){var n=new Image;n.onload=function(){t.next(n),t.complete()},n.onerror=function(){return t.error()},n.src=e}))}},{key:"getLogoPosition",value:function(e,t,n,i,a){var o,r,s=a.copyrightPosition,c=a.copyrightOffset;switch(s.x){case"right":o=e-n;break;case"center":o=e/2-n/2;break;default:o=0}switch(s.y){case"bottom":r=t-i;break;case"center":r=t/2-i/2;break;default:r=0}return{xOffset:o+c.x,yOffset:r+c.y}}}]),e}()).\u0275fac=function(e){return new(e||i)(M.Zb(y.a),M.Zb(P.a),M.Zb(o.h))},i.\u0275prov=M.Lb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),T=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},U=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},L={imageType:g.a.JPEG,crop:"original",copyrightEnabled:!1,copyrightImagePath:"assets/images/powered-by-biodigital-color.svg",copyrightPosition:{x:"left",y:"bottom"},copyrightOffset:{x:12,y:-12},imageQuality:1},z={thumbnails:new Map},A=((a=function(){function e(t,n){h(this,e),this.snapshotService=t,this.store=n}return b(e,[{key:"registerChapterThumbnails",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.thumbnails=new Map(t.thumbnails)})))}},{key:"takeChapterPicture",value:function(e,t){var n,i=this,a=t.chapterId,o=t.includeLabels,r=t.includeCopyright,u=t.dimensions,p=t.imageType,h=t.imageQuality,b=t.crop,m=t.layers,y=u||f.a.large,v=y.width,k=y.height,O=t.background;switch(p){case g.a.PNG:n=O||c.a;break;case g.a.JPEG:default:n=O&&!l.a.isTransparent(O)?O:c.a}var S=O.colors.slice(0,3),x=d.a.isLight(S),C=Object.assign(Object.assign({},L),{crop:b,imageType:p,imageQuality:h,copyrightEnabled:r,copyrightImagePath:x?"assets/images/powered-by-biodigital-color.svg":"assets/images/powered-by-biodigital-white.svg"});setTimeout((function(){i.snapshotService.takeSnapshot(v,k,n,m,o,C).subscribe((function(t){e.dispatch(new s.c(a,t,y))}))}))}},{key:"takeChapterPictureSuccess",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){var n=e.thumbnails.get(t.chapterId)||new m.a;n.snapshot=URL.createObjectURL(t.blob),e.thumbnails.set(t.chapterId,n)})))}}],[{key:"getRegisteredThumbnails",value:function(e){return e.thumbnails}}]),e}()).\u0275fac=function(e){return new(e||a)(M.Zb(I),M.Zb(o.h))},a.\u0275prov=M.Lb({token:a,factory:a.\u0275fac}),T([Object(o.a)(s.a),U("design:type",Function),U("design:paramtypes",[Object,s.a]),U("design:returntype",void 0)],a.prototype,"registerChapterThumbnails",null),T([Object(o.a)(s.b),U("design:type",Function),U("design:paramtypes",[Object,s.b]),U("design:returntype",void 0)],a.prototype,"takeChapterPicture",null),T([Object(o.a)(s.c),U("design:type",Function),U("design:paramtypes",[Object,s.c]),U("design:returntype",void 0)],a.prototype,"takeChapterPictureSuccess",null),T([Object(o.f)(),U("design:type",Function),U("design:paramtypes",[r]),U("design:returntype",void 0)],a,"getRegisteredThumbnails",null),a=T([Object(o.g)({name:"storyThumbnails",defaults:z})],a))},Vv7R:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"n",(function(){return o})),n.d(t,"o",(function(){return r})),n.d(t,"r",(function(){return s})),n.d(t,"q",(function(){return c})),n.d(t,"p",(function(){return u})),n.d(t,"m",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"k",(function(){return d})),n.d(t,"g",(function(){return g})),n.d(t,"a",(function(){return f})),n.d(t,"i",(function(){return b})),n.d(t,"h",(function(){return m})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return v})),n.d(t,"l",(function(){return k})),n.d(t,"s",(function(){return O})),n.d(t,"b",(function(){return S})),n.d(t,"j",(function(){return x}));var i=n("INTG"),a=function(){var e=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.b.lang,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];h(this,e),this.id=t,this.type=n,this.lang=a,this.preview=o};return e.type="[Story] Load Current Story",e}(),o=function(){var e=function e(t){h(this,e),this.story=t};return e.type="[Story] Replace the Story",e}(),r=function(){var e=function e(t){h(this,e),this.id=t};return e.type="[Story] Set the Story ID",e}(),s=function(){var e=function e(t){h(this,e),this.displayName=t};return e.type="[Story] Set Story Text",e}(),c=function(){var e=function e(t){h(this,e),this.tags=t};return e.type="[Story] Set Story Tags",e}(),u=function(){var e=function e(t){h(this,e),this.lightLibs=t};return e.type="[Story] Set Story Light Libs",e}(),l=function(){var e=function e(t,n,i){h(this,e),this.id=t,this.type=n,this.reset=i};return e.type="[Story] Set Incoming Story Id",e}(),p=function(){var e=function e(){h(this,e)};return e.type="[Story] Load Story Chunk",e}(),d=function(){var e=function e(t){h(this,e),this.chapterId=t};return e.type="[Story] Reorder Load Chunks",e}(),g=function(){var e=function e(t){h(this,e),this.chunk=t};return e.type="[Story] Load Story Chunk Success",e}(),f=function(){var e=function e(t,n,i,a){h(this,e),this.id=t,this.story=n,this.type=i,this.chapterIdx=a};return e.type="[Story] Build Story In Engine From Story Model",e}(),b=function(){var e=function e(t,n,i){h(this,e),this.story=t,this.id=n,this.type=i};return e.type="[Story] Load Success",e}(),m=function(){var e=function e(t,n){h(this,e),this.id=t,this.type=n};return e.type="[Story] Load Fail",e}(),y=function(){var e=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.b.lang;h(this,e),this.id=t,this.type=n,this.lang=a};return e.type="[Story] Import",e}(),v=function(){var e=function e(t,n,i){h(this,e),this.story=t,this.id=n,this.type=i};return e.type="[Story] Import Success",e}(),k=function(){var e=function e(){h(this,e)};return e.type="[Story] Clear",e}(),O=function(){var e=function e(){h(this,e)};return e.type="[Story] Synchronize Chapters",e}(),S=function(){var e=function e(){h(this,e)};return e.type="[Story] Human Ready (SDK)",e}(),x=function(){var e=function e(t){h(this,e),this.story=t};return e.type="[Story] Merge Bridge Module Success",e}()},WFQG:function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"c",(function(){return U})),n.d(t,"a",(function(){return L}));var a,r,s=n("AcyG"),c=n("UEjg"),l=n("yCjD"),p=n("mtgE"),d=n("stSV"),g=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.a.Hide,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h(this,e),this.status=t,this.enable=n},f=n("Yl/Z"),m=n("+6Fv"),y=n("cAYK"),v=n("ufUH"),k=n("nj9G"),O=n("pZol"),S=n("fnuH"),x=n("Poh+"),C=n("DTUA"),w=n("gzgB"),j=n("N2iv"),P=n("fXoL"),_=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},M=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=function e(){h(this,e)},T={audio:new g,camera:new g(l.a.Show,!0),chapterList:new g(l.a.Show,!1),column:new g,description:new g,drawer:new(function(e){i(n,e);var t=o(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return h(this,n),(e=t.call(this)).isExpandedInitially=i,e}return n}(g)),fullscreen:new g,help:new g,labels:new(function(e){i(n,e);var t=o(n);function n(){var e,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return h(this,n),(e=t.call(this)).shown=i,e}return n}(g)),labelInfo:new g,labelList:new g(l.a.Show,!1),loader:new(function(e){i(n,e);var t=o(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.b;return h(this,n),(e=t.call(this)).template=i,e}return n}(g)),logo:new(function(e){i(n,e);var t=o(n);function n(){var e,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return h(this,n),(e=t.call(this)).isHyperLink=i,e}return n}(g)),media:new(function(e){i(n,e);var t=o(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.a.Small;return h(this,n),(e=t.call(this)).template=i,e}return n}(g)),menu:new g,nodeInfo:new g(l.a.Hide,!1),pagination:new g,presenter:new g(l.a.Hide,!1),reset:new g,search:new g,quiz:new g,titleOnly:new g,toolbar:new g,tools:new g,anatomyLabels:new g,tutorial:new g(l.a.Hide,!1),internetExplorerWarning:new g,legend:new g,undo:new g,whiteboard:new g,visibilityLayers:new g,contextActions:new g,toggleLabels:new g},U={lang:"en",canFullscreen:!1,canHover:!1,canTouch:!1,drawerCoversContent:!1,fullscreenActive:!1,help:{tab:v.a.Basics},initialUI:T,inputEnabled:!0,inputMode:S.a.Mouse,interactType:m.a.Play,onDemand:!1,layout:x.a.Default,labelsBreakpoint:480,menuOpen:!1,multiPickModeEnabled:!1,openWindows:[y.a.Loader],presentationActive:!1,searchDisplayMode:j.a.Tree,nodeInfo:{show:!1,fallback:w.a.Wikipedia},tutorial:{pageSize:0,pageIndex:-1},tutorialSeen:!0,ui:T,usePrintImage:!1,whiteboard:{enabled:!1,hasPaint:!1,hasText:!1,brushSize:O.c.size,brushColor:O.d.color,textSize:O.f.size,eraserSize:O.e.size,annotateMode:k.a.Paint},scrim:{show:!1,label:""}},L=((r=a=function(){function e(t){h(this,e),this.storageService=t}return b(e,[{key:"setUI",value:function(e,t){var n=e.getState().ui;e.patchState({ui:Object.assign(Object.assign({},n),t.ui)})}},{key:"setInitialUI",value:function(e,t){e.patchState({initialUI:t.ui})}},{key:"setInputEnabled",value:function(e,t){e.patchState({inputEnabled:t.enabled})}},{key:"setCanHover",value:function(e,t){e.patchState({canHover:t.canHover})}},{key:"setCanTouch",value:function(e,t){e.patchState({canTouch:t.canTouch})}},{key:"setCanFullscreen",value:function(e,t){e.patchState({canFullscreen:t.canFullscreen})}},{key:"setSearchDisplayMode",value:function(e,t){e.patchState({searchDisplayMode:t.mode})}},{key:"setViewLanguage",value:function(e,t){var n=t.lang;e.patchState({lang:n})}},{key:"toggleNodeInfo",value:function(e,t){var n=t.show;e.patchState({nodeInfo:Object.assign(Object.assign({},e.getState().nodeInfo),{show:n})})}},{key:"setNodeInfoConfig",value:function(e,t){var n=t.fallback;e.patchState({nodeInfo:Object.assign(Object.assign({},e.getState().nodeInfo),{fallback:n})})}},{key:"togglePresentation",value:function(e,t){e.patchState({presentationActive:t.active})}},{key:"toggleHelp",value:function(e,t){e.patchState({help:{tab:t.tab}})}},{key:"setLoaderType",value:function(e,t){e.patchState({interactType:t.interactType})}},{key:"setOnDemand",value:function(e,t){e.patchState({onDemand:t.onDemand})}},{key:"setInputMode",value:function(e,t){var n=t.inputMode;e.patchState({inputMode:n})}},{key:"SetLayout",value:function(e,t){e.patchState({layout:t.layout})}},{key:"setTutorial",value:function(e,t){var n=e.getState().tutorial;e.patchState({tutorial:Object.assign(Object.assign({},n),t.tutorial)})}},{key:"startTutorial",value:function(e,t){e.patchState({tutorial:Object.assign(Object.assign({},e.getState().tutorial),{pageIndex:t.intro?-1:0})}),e.dispatch(new c.a.TutorialSeen(!0))}},{key:"tutorialSeen",value:function(e,t){this.storageService.setLocalItem(C.b.GettingStartedTutorial,t.seen),e.patchState({tutorialSeen:t.seen})}},{key:"tutorialPrevious",value:function(e,t){var n=e.getState().tutorial,i=Math.max(n.pageIndex-1,0);e.dispatch(new c.a.SetTutorial(Object.assign(Object.assign({},n),{pageIndex:i})))}},{key:"tutorialNext",value:function(e,t){var n=e.getState().tutorial,i=Math.min(n.pageIndex+1,n.pageSize-1);e.dispatch(new c.a.SetTutorial(Object.assign(Object.assign({},n),{pageIndex:i})))}},{key:"setWhiteboardEnabled",value:function(e,t){var n=t.enabled;e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{enabled:n})})}},{key:"setWhiteboardBrushSize",value:function(e,t){var n=t.brushSize;e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{brushSize:n})})}},{key:"setWhiteboardTextSize",value:function(e,t){var n=t.size;e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{textSize:n})})}},{key:"setWhiteboardEraserSize",value:function(e,t){var n=t.eraserSize;e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{eraserSize:n})})}},{key:"setWhiteboardAnnotateMode",value:function(e,t){var n=t.mode;e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{annotateMode:n})})}},{key:"setWhiteboardBrushColor",value:function(e,t){var n=t.brushColor;e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{brushColor:n})})}},{key:"setWhiteboardHasPaint",value:function(e,t){var n=t.hasPaint;e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{hasPaint:n})})}},{key:"setWhiteboardHasText",value:function(e,t){var n=t.hasText;e.patchState({whiteboard:Object.assign(Object.assign({},e.getState().whiteboard),{hasText:n})})}},{key:"setMultiPickModeEnabled",value:function(e,t){e.patchState({multiPickModeEnabled:t.enabled})}},{key:"setLabelBreakpoint",value:function(e,t){e.patchState({labelsBreakpoint:t.labelsBreakpoint})}},{key:"setUsePrintImage",value:function(e,t){e.patchState({usePrintImage:t.usePrintImage})}},{key:"setWindows",value:function(e,t){e.patchState({openWindows:t.windows})}},{key:"openWindow",value:function(e,t){var n=e.getState().openWindows;n.indexOf(t.window)<0&&e.patchState({openWindows:[t.window].concat(u(n))})}},{key:"closeWindow",value:function(e,t){var n=e.getState().openWindows;null!=t.window?n=n.filter((function(e){return e!==t.window})):n.shift(),e.patchState({openWindows:u(n)})}},{key:"toggleWindow",value:function(e,t){var n=e.getState().openWindows.indexOf(t.window)>=0;e.dispatch((null!=t.show?t.show:!n)?new c.a.OpenWindow(t.window):new c.a.CloseWindow(t.window))}},{key:"toggleMenu",value:function(e,t){e.patchState({menuOpen:t.open})}},{key:"showScrim",value:function(e,t){e.patchState({scrim:{show:!0,label:t.label}})}},{key:"hideScrim",value:function(e,t){e.patchState({scrim:{show:!1,label:""}})}},{key:"ngxsOnInit",value:function(e){f.a.onFullscreenChange().subscribe((function(t){e.patchState({fullscreenActive:f.a.isFullscreen()})})),e.patchState({tutorialSeen:this.storageService.getLocalJSON(C.b.GettingStartedTutorial)||!1})}}],[{key:"getUI",value:function(e){return e.ui}},{key:"getInitialUI",value:function(e){return e.initialUI}},{key:"getLabelsBreakpoint",value:function(e){return e.labelsBreakpoint}},{key:"getInputEnabled",value:function(e){return e.inputEnabled}},{key:"getFullscreenActive",value:function(e){return e.fullscreenActive}},{key:"getPresentationActive",value:function(e){return e.presentationActive}},{key:"getDrawerCoversContent",value:function(e){return e.drawerCoversContent}},{key:"getShowNodeInfo",value:function(e){return e.nodeInfo.show}},{key:"getNodeInfoFallback",value:function(e){return e.nodeInfo.fallback}},{key:"getViewLanguage",value:function(e){return e.lang}},{key:"getInteractType",value:function(e){return e.interactType}},{key:"getOnDemand",value:function(e){return e.onDemand}},{key:"getLayout",value:function(e){return e.layout}},{key:"getInputMode",value:function(e){return e.inputMode}},{key:"getShowHelpTab",value:function(e){return e.help.tab}},{key:"getTutorial",value:function(e){return e.tutorial}},{key:"getTutorialSeen",value:function(e){return e.tutorialSeen}},{key:"getWhiteboardEnabled",value:function(e){return e.whiteboard.enabled}},{key:"getWhiteboardBrushSize",value:function(e){return e.whiteboard.brushSize}},{key:"getWhiteboardTextSize",value:function(e){return e.whiteboard.textSize}},{key:"getWhiteboardEraserSize",value:function(e){return e.whiteboard.eraserSize}},{key:"getWhiteboardAnnotateMode",value:function(e){return e.whiteboard.annotateMode}},{key:"getWhiteboardBrushColor",value:function(e){return e.whiteboard.brushColor}},{key:"getWhiteboardHasPaint",value:function(e){return e.whiteboard.hasPaint}},{key:"getWhiteboardHasText",value:function(e){return e.whiteboard.hasText}},{key:"getCanTouch",value:function(e){return e.canTouch}},{key:"getCanHover",value:function(e){return e.canHover}},{key:"getMultiPickModeEnabled",value:function(e){return e.multiPickModeEnabled}},{key:"getSearchDisplayMode",value:function(e){return e.searchDisplayMode}},{key:"getUsePrintImage",value:function(e){return e.usePrintImage}},{key:"getOpenWindow",value:function(e){return e.openWindows.length>0?e.openWindows.sort()[0]:null}},{key:"getMenuOpen",value:function(e){return e.menuOpen}},{key:"getScrim",value:function(e){return e.scrim}},{key:"shouldWindowOpen",value:function(e){return Object(s.i)([a],(function(t){return t.openWindows.indexOf(e)>=0}))}}]),e}()).\u0275fac=function(e){return new(e||r)(P.Zb(C.d))},r.\u0275prov=P.Lb({token:r,factory:r.\u0275fac}),_([Object(s.a)(c.a.SetUI),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetUI]),M("design:returntype",void 0)],r.prototype,"setUI",null),_([Object(s.a)(c.a.SetInitialUI),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetInitialUI]),M("design:returntype",void 0)],r.prototype,"setInitialUI",null),_([Object(s.a)(c.a.SetInputEnabled),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetInputEnabled]),M("design:returntype",void 0)],r.prototype,"setInputEnabled",null),_([Object(s.a)(c.a.SetCanHover),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetCanHover]),M("design:returntype",void 0)],r.prototype,"setCanHover",null),_([Object(s.a)(c.a.SetCanTouch),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetCanTouch]),M("design:returntype",void 0)],r.prototype,"setCanTouch",null),_([Object(s.a)(c.a.SetCanFullscreen),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetCanFullscreen]),M("design:returntype",void 0)],r.prototype,"setCanFullscreen",null),_([Object(s.a)(c.a.SetSearchDisplayMode),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetSearchDisplayMode]),M("design:returntype",void 0)],r.prototype,"setSearchDisplayMode",null),_([Object(s.a)(c.a.SetViewLanguage),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetViewLanguage]),M("design:returntype",void 0)],r.prototype,"setViewLanguage",null),_([Object(s.a)(c.a.ToggleNodeInfo),M("design:type",Function),M("design:paramtypes",[Object,c.a.ToggleNodeInfo]),M("design:returntype",void 0)],r.prototype,"toggleNodeInfo",null),_([Object(s.a)(c.a.SetNodeInfoConfig),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetNodeInfoConfig]),M("design:returntype",void 0)],r.prototype,"setNodeInfoConfig",null),_([Object(s.a)(c.a.TogglePresentation),M("design:type",Function),M("design:paramtypes",[Object,c.a.TogglePresentation]),M("design:returntype",void 0)],r.prototype,"togglePresentation",null),_([Object(s.a)(c.a.ToggleHelpTab),M("design:type",Function),M("design:paramtypes",[Object,c.a.ToggleHelpTab]),M("design:returntype",void 0)],r.prototype,"toggleHelp",null),_([Object(s.a)(c.a.SetInteractType),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetInteractType]),M("design:returntype",void 0)],r.prototype,"setLoaderType",null),_([Object(s.a)(c.a.SetOnDemand),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetOnDemand]),M("design:returntype",void 0)],r.prototype,"setOnDemand",null),_([Object(s.a)(c.a.SetInputMode),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetInputMode]),M("design:returntype",void 0)],r.prototype,"setInputMode",null),_([Object(s.a)(c.a.SetLayout),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetLayout]),M("design:returntype",void 0)],r.prototype,"SetLayout",null),_([Object(s.a)(c.a.SetTutorial),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetTutorial]),M("design:returntype",void 0)],r.prototype,"setTutorial",null),_([Object(s.a)(c.a.StartTutorial),M("design:type",Function),M("design:paramtypes",[Object,c.a.StartTutorial]),M("design:returntype",void 0)],r.prototype,"startTutorial",null),_([Object(s.a)(c.a.TutorialSeen),M("design:type",Function),M("design:paramtypes",[Object,c.a.TutorialSeen]),M("design:returntype",void 0)],r.prototype,"tutorialSeen",null),_([Object(s.a)(c.a.TutorialPrevious),M("design:type",Function),M("design:paramtypes",[Object,c.a.TutorialPrevious]),M("design:returntype",void 0)],r.prototype,"tutorialPrevious",null),_([Object(s.a)(c.a.TutorialNext),M("design:type",Function),M("design:paramtypes",[Object,c.a.TutorialNext]),M("design:returntype",void 0)],r.prototype,"tutorialNext",null),_([Object(s.a)(c.a.SetWhiteboardEnabled),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetWhiteboardEnabled]),M("design:returntype",void 0)],r.prototype,"setWhiteboardEnabled",null),_([Object(s.a)(c.a.SetWhiteboardBrushSize),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetWhiteboardBrushSize]),M("design:returntype",void 0)],r.prototype,"setWhiteboardBrushSize",null),_([Object(s.a)(c.a.SetWhiteboardTextSize),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetWhiteboardTextSize]),M("design:returntype",void 0)],r.prototype,"setWhiteboardTextSize",null),_([Object(s.a)(c.a.SetWhiteboardEraserSize),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetWhiteboardEraserSize]),M("design:returntype",void 0)],r.prototype,"setWhiteboardEraserSize",null),_([Object(s.a)(c.a.SetWhiteboardAnnotateMode),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetWhiteboardAnnotateMode]),M("design:returntype",void 0)],r.prototype,"setWhiteboardAnnotateMode",null),_([Object(s.a)(c.a.SetWhiteboardBrushColor),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetWhiteboardBrushColor]),M("design:returntype",void 0)],r.prototype,"setWhiteboardBrushColor",null),_([Object(s.a)(c.a.SetWhiteboardHasPaint),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetWhiteboardHasPaint]),M("design:returntype",void 0)],r.prototype,"setWhiteboardHasPaint",null),_([Object(s.a)(c.a.SetWhiteboardHasText),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetWhiteboardHasText]),M("design:returntype",void 0)],r.prototype,"setWhiteboardHasText",null),_([Object(s.a)(c.a.SetMultiPickModeEnabled),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetMultiPickModeEnabled]),M("design:returntype",void 0)],r.prototype,"setMultiPickModeEnabled",null),_([Object(s.a)(c.a.SetLabelBreakpoint),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetLabelBreakpoint]),M("design:returntype",void 0)],r.prototype,"setLabelBreakpoint",null),_([Object(s.a)(c.a.SetUsePrintImage),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetUsePrintImage]),M("design:returntype",void 0)],r.prototype,"setUsePrintImage",null),_([Object(s.a)(c.a.SetWindows),M("design:type",Function),M("design:paramtypes",[Object,c.a.SetWindows]),M("design:returntype",void 0)],r.prototype,"setWindows",null),_([Object(s.a)(c.a.OpenWindow),M("design:type",Function),M("design:paramtypes",[Object,c.a.OpenWindow]),M("design:returntype",void 0)],r.prototype,"openWindow",null),_([Object(s.a)(c.a.CloseWindow),M("design:type",Function),M("design:paramtypes",[Object,c.a.CloseWindow]),M("design:returntype",void 0)],r.prototype,"closeWindow",null),_([Object(s.a)(c.a.ToggleWindow),M("design:type",Function),M("design:paramtypes",[Object,c.a.ToggleWindow]),M("design:returntype",void 0)],r.prototype,"toggleWindow",null),_([Object(s.a)(c.a.ToggleMenu),M("design:type",Function),M("design:paramtypes",[Object,c.a.ToggleMenu]),M("design:returntype",void 0)],r.prototype,"toggleMenu",null),_([Object(s.a)(c.a.ShowScrim),M("design:type",Function),M("design:paramtypes",[Object,c.a.ShowScrim]),M("design:returntype",void 0)],r.prototype,"showScrim",null),_([Object(s.a)(c.a.HideScrim),M("design:type",Function),M("design:paramtypes",[Object,c.a.HideScrim]),M("design:returntype",void 0)],r.prototype,"hideScrim",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getUI",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getInitialUI",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getLabelsBreakpoint",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getInputEnabled",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getFullscreenActive",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getPresentationActive",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getDrawerCoversContent",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getShowNodeInfo",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getNodeInfoFallback",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getViewLanguage",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getInteractType",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getOnDemand",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getLayout",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getInputMode",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getShowHelpTab",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getTutorial",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getTutorialSeen",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getWhiteboardEnabled",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getWhiteboardBrushSize",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getWhiteboardTextSize",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getWhiteboardEraserSize",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getWhiteboardAnnotateMode",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getWhiteboardBrushColor",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getWhiteboardHasPaint",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getWhiteboardHasText",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getCanTouch",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getCanHover",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getMultiPickModeEnabled",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getSearchDisplayMode",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getUsePrintImage",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getOpenWindow",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getMenuOpen",null),_([Object(s.f)(),M("design:type",Function),M("design:paramtypes",[I]),M("design:returntype",void 0)],r,"getScrim",null),r=a=_([Object(s.g)({name:"view",defaults:U})],r))},WLCt:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var i=n("AcyG"),a=n("WFQG"),o=n("yCjD"),r=n("snBo"),s=n("N0Zw"),c=n("Mh2x"),u=n("LvDl"),l=n("AytR"),p=n("p345"),d=n("Ryms"),g=n("j8e5"),f=n("cAYK"),m=n("stSV"),y=n("3zw+"),v=n("Poh+"),k=n("FFWI"),O=n("Y7Bv"),S=n("k93M"),x=n("mtgE"),C=n("fXoL"),w=function(){var e=function(){function e(t,n){h(this,e),this.store=t,this.chapterService=n,this.ui=null,this.breakpoint=null}return b(e,[{key:"getBase",value:function(){return{ui:this.store.selectSnapshot(a.a.getUI),layout:this.store.selectSnapshot(a.a.getLayout),breakpoint:this.store.selectSnapshot(g.a.getBreakpoint),hideUI:this.isUIHidden()}}},{key:"isUIHidden",value:function(){var e=this.store.selectSnapshot(a.a.getOpenWindow),t=this.store.selectSnapshot(c.a.getSelectedChapterIndex),n=this.store.selectSnapshot(a.a.getUI),i=e===f.a.Loader&&t<=0&&n.loader.template===m.a.Circle,o=this.store.selectSnapshot(S.a.getStoryLoadProgress);return i||0===o||e===f.a.OnDemand||e===f.a.Interact||e===f.a.Tutorial||e===f.a.Whiteboard}},{key:"isDrawerVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.ui,i=e.layout;return!t&&this.getViewLayout(i)===O.a.Drawer&&(n.drawer.enable&&"none"!==this.getVisibleContent()||n.nodeInfo.status===o.a.Show||n.labelInfo.status===o.a.Show)}},{key:"isColumnVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.layout,i=e.ui;return!t&&i.column.status!==o.a.Collapse&&this.getViewLayout(n)===O.a.Column&&i.column.enable&&"full"===this.getVisibleContent()}},{key:"isColumnToggleVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.layout,i=e.ui;return!t&&!this.store.selectSnapshot(k.b.getQuizModeActive)&&this.getViewLayout(n)===O.a.Column&&i.column.enable&&"full"===this.getVisibleContent()}},{key:"isTitleOnlyVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.ui,i=e.breakpoint;return!t&&!(i<d.a.Large)&&n.titleOnly.enable&&"titleOnly"===this.getVisibleContent()}},{key:"isToolsVisible",value:function(){return!this.getBase().hideUI&&this.isUIVisible(r.a.Tools)}},{key:"isToolbarVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.ui;return!t&&n.toolbar.enable}},{key:"isLogoVisible",value:function(){var e=this.getBase().ui;return this.store.selectSnapshot(a.a.getOpenWindow)!==f.a.OnDemand&&e.logo.enable}},{key:"isCameraVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.ui;return!t&&n.camera.enable}},{key:"isPaginationVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.ui;return!t&&!(this.store.selectSnapshot(c.a.getChapterCount)<=1)&&n.pagination.enable}},{key:"isMediaVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.ui;return!t&&this.store.selectSnapshot(c.a.getIsChapterAnimated)&&n.media.enable}},{key:"isMediabarVisible",value:function(){if(this.getBase().hideUI)return!1;var e=this.isMediaVisible(),t=this.isAudioVisible();return e||t}},{key:"isScrubberVisible",value:function(e){var t=this.getBase(),n=t.hideUI,i=t.ui,a=t.breakpoint;if(n)return!1;var o=this.isMediaVisible&&i.media.template===x.a.Full;switch(e){case r.a.ScrubberButton:return o&&a>d.a.Small;case r.a.ScrubberItem:return o&&a<=d.a.Small}}},{key:"isMenuVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.ui;return!t&&(n.fullscreen.enable||n.help.enable||n.search.enable||n.tools.enable||n.whiteboard.enable||n.tutorial.enable)&&n.menu.enable}},{key:"isNodeInfoColumnVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.ui,i=e.breakpoint;return!t&&(!!(i>=d.a.Large&&this.isUIVisible(r.a.NodeInfo))||(i<d.a.Large?!n.drawer.enable&&this.isUIVisible(r.a.NodeInfo):void 0))}},{key:"isNodeInfoVisible",value:function(e){var t=this.getBase(),n=t.hideUI,i=t.breakpoint;return!n&&(i>=d.a.Large&&e===O.a.Column||i<d.a.Large&&e===O.a.Drawer)&&this.isUIVisible(r.a.NodeInfo)}},{key:"isAudioVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.ui;if(t)return!1;var i=null!=this.store.selectSnapshot(c.a.getSelectedChapterAudio);return n.audio.enable&&i}},{key:"isSearchColumnVisible",value:function(){return!this.getBase().hideUI&&this.isUIVisible(r.a.Search)}},{key:"isUndoVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.ui;return!t&&n.undo.enable}},{key:"isVisibilityLayersVisible",value:function(){var e=this.getBase(),t=e.hideUI,n=e.ui;if(t)return!1;var i=n.visibilityLayers.enable,a=this.store.selectSnapshot(c.a.getSelectedChapterCurrentLayers);return i&&this.chapterService.hasVisibilityLayers(a)}},{key:"isVisible",value:function(e){switch(e){case r.a.Audio:return this.isAudioVisible();case r.a.Camera:return this.isCameraVisible();case r.a.Column:return this.isColumnVisible();case r.a.ColumnToggle:return this.isColumnToggleVisible();case r.a.Drawer:return this.isDrawerVisible();case r.a.Logo:return this.isLogoVisible();case r.a.Media:return this.isMediaVisible();case r.a.Mediabar:return this.isMediabarVisible();case r.a.Menu:return this.isMenuVisible();case r.a.Pagination:return this.isPaginationVisible();case r.a.Search:return this.isSearchColumnVisible();case r.a.ScrubberButton:return this.isScrubberVisible(r.a.ScrubberButton);case r.a.ScrubberItem:return this.isScrubberVisible(r.a.ScrubberItem);case r.a.TitleOnly:return this.isTitleOnlyVisible();case r.a.Tools:return this.isToolsVisible();case r.a.Toolbar:return this.isToolbarVisible();case r.a.Undo:return this.isUndoVisible();case r.a.VisibilityLayers:return this.isVisibilityLayersVisible();default:return this.isUIVisible(e)}}},{key:"isUIVisible",value:function(e){var t=this.getBase(),n=t.hideUI,i=t.ui;return i[e]?!n&&i[e].enable&&i[e].status!==o.a.Hide:(console.warn("Attempting to check visibility of a non-existent element: ${element}"),!1)}},{key:"isUIEnabled",value:function(e){return this.getBase().ui[e].enable}},{key:"getVisibleContent",value:function(){var e=this.getBase().ui,t=this.store.selectSnapshot(s.a.getChapterLabels),n=this.store.selectSnapshot(c.a.getSelectedChapter),i=Object(u.get)(n,"info.description"),a=Object(u.get)(n,"info.displayName"),o=Object(u.get)(n,"legend",[]),r=Object(u.get)(n,"contentBlocks",[]).length,l=e.labelList.enable&&t.length>0,p=null!=i&&Object(u.trim)(i).length>0,d=null!=a&&Object(u.trim)(a).length>0,g=e.legend.enable&&o.length>0,h=this.store.selectSnapshot(k.b.getQuizModeActive);return l||p||g||h||r?"full":d?"titleOnly":"none"}},{key:"getViewLayout",value:function(e){var t=document.body.getBoundingClientRect(),n=t.width,i=t.height,a=n/i>=1?"landscape":"portrait",o=this.getBase().breakpoint,r=384+(l.a.application===p.a.Viewer?0:56);switch(e){case v.a.ColumnOnly:return O.a.Column;case v.a.DrawerOnly:return O.a.Drawer;default:return"portrait"===a?O.a.Drawer:o>=d.a.Large||i<=r&&n>=708?O.a.Column:O.a.Drawer}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(C.Zb(i.h),C.Zb(y.a))},e.\u0275prov=C.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},WRwD:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){h(this,e),this.title=null,this.description=null,this.errands=[]}},WUhe:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){var t=function e(t){h(this,e),this.quizState=t};t.type="[Quiz] Set Quiz State",e.SetQuizState=t;var n=function e(){h(this,e)};n.type="[Quiz] Reset Quiz State",e.ResetQuizState=n;var i=function e(t){h(this,e),this.quizSettings=t};i.type="[Quiz] Set Quiz Settings",e.SetQuizSettings=i;var a=function e(t){h(this,e),this.active=t};a.type="[Quiz] Set Quiz Active",e.SetQuizActive=a;var o=function e(t){h(this,e),this.enabled=t};o.type="[Quiz] Set Quiz Enabled",e.SetQuizEnabled=o;var r=function e(t){h(this,e),this.locked=t};r.type="[Quiz] Set Quiz Locked",e.SetQuizLocked=r;var s=function e(t){h(this,e),this.enable=t};s.type="[Quiz] Set Enable Quiz Retake",e.SetEnableQuizRetake=s;var c=function e(t){h(this,e),this.mode=t};c.type="[Quiz] Set Quiz Questions Mode",e.SetQuizQuestionsMode=c;var u=function e(t,n){h(this,e),this.sourceChapterId=t,this.targetChapterId=n};u.type="[Quiz] Copy Quiz Questions",e.CopyQuestions=u;var l=function e(t){h(this,e),this.chapterIds=t};l.type="[Quiz] Reoder Quiz Questions",e.ReorderQuestions=l;var p=function e(t){h(this,e),this.question=t};p.type="[Quiz] Add Quiz Question",e.AddQuestion=p;var d=function e(t){h(this,e),this.questions=t};d.type="[Quiz] Set Quiz Questions",e.SetQuestions=d;var g=function e(t){h(this,e),this.questionIds=t};g.type="[Quiz] Remove Quiz Questions",e.RemoveQuestions=g;var f=function e(t){h(this,e),this.question=t};f.type="[Quiz] Set Quiz Question",e.SetQuestion=f;var b=function e(t){h(this,e),this.submission=t};b.type="[Quiz] Submit Question Answer",e.SubmitQuestionAnswer=b;var m=function e(){h(this,e)};m.type="[Quiz] Advance Question",e.NextQuestion=m;var y=function e(){h(this,e)};y.type="[Quiz] Previous Question",e.PreviousQuestion=y;var v=function e(){h(this,e)};v.type="[Quiz] Clear Submissions",e.ClearSubmissions=v;var k=function e(t){h(this,e),this.questionId=t};k.type="[Quiz] Set Active Question",e.SetActiveQuestion=k;var O=function e(t){h(this,e),this.pickMode=t};O.type="[Quiz] Set Pick Mode",e.SetQuizPickMode=O;var S=function e(t){h(this,e),this.submission=t};S.type="[Quiz] Set Active QuestionAnswer",e.SetActiveSubmission=S;var x=function e(t){h(this,e),this.lifecycle=t};x.type="[Quiz] Set Quiz Lifecycle",e.SetQuizLifecycle=x}(i||(i={}))},Wd1f:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("LvDl"),o=n("pLZG"),r=n("lJxs"),s=n("6d61"),c=n("ZR5G"),u=n("yG3n"),l=n("ThaW");!function(e){function t(e,t){var n=new u.a;if(e.thumbnails)n.legacy=!1,n.storyId=t,n.chapterId=e.id,n.urls=Object.assign({},e.thumbnails);else{var i="/thumbs/".concat(c.a.Bookmark===Object(l.a)(t)?"bookmarks":"modules","/").concat(t.replace(".json",""));n.legacy=!0,n.storyId=t,n.chapterId=e.id,n.urls={small:"".concat(i,"/small/chapters/").concat(e.id,".jpg"),large:"".concat(i,"/large/chapters/").concat(e.id,".jpg")}}return n}e.generateLegacyThumbnail=function(e,t){var n="/thumbs/".concat(c.a.Bookmark===Object(l.a)(e)?"bookmarks":"modules","/").concat(e.replace(".json",""));return{small:"".concat(n,"/small/chapters/").concat(t,".jpg"),large:"".concat(n,"/large/chapters/").concat(t,".jpg")}},e.generateThumbnails=function(e){return e.reduce((function(e,t){var n=t.originalChapterId,i=t.newChapterId,a=t.originalStoryId,o=c.a.Bookmark===Object(l.a)(a),r=new u.a;r.storyId=a,r.chapterId=n;var s="/thumbs/".concat(o?"bookmarks":"modules","/").concat(a.replace(".json",""));return r.urls={small:"".concat(s,"/small/chapters/").concat(n,".jpg"),large:"".concat(s,"/large/chapters/").concat(n,".jpg")},e.set(i,r),e}),new Map)},e.getChapterThumbnail=t,e.getChapterThumbnails=function(e,n){return n.reduce((function(n,i){var a=t(i,e);return n.set(i.id,a),n}),new Map)},e.makeFreshThumbnail=function(e,t,n){return Object(s.a)(n).pipe(Object(o.a)((function(e){return!Object(a.isNil)(e)})),Object(r.a)((function(n){var i=new u.a;return i.snapshot=URL.createObjectURL(n),i.chapterId=t,i.storyId=e,i})))}}(i||(i={}))},Wgla:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ofXK"),a=n("EWj2"),o=n("vvyD"),r=n("Wdmj"),s=n("fXoL"),c=function(){var e=function e(){h(this,e)};return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,o.a,r.d]]}),e}()},WkFQ:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return s}));var a=function e(){h(this,e)},o=function(e){return e.View="View",e.Edit="Customize in Studio",e.Duplicate="Duplicate",e.Manage="Manage",e.Publish="Publish",e.Delete="Delete",e.CopyURL="Copy URL",e.Share="Share",e.AddToMyLibrary="Add to My Library",e.Divider="",e}({}),r=(l(i={},o.View,""),l(i,o.AddToMyLibrary,"plus"),l(i,o.Edit,"pen"),l(i,o.Share,"share-alt"),l(i,o.Publish,"code"),l(i,o.CopyURL,"link"),l(i,o.Duplicate,""),l(i,o.Manage,""),l(i,o.Delete,""),l(i,o.Divider,""),i);function s(e){var t=e.substring(0,1).toUpperCase()+e.substring(1);return Object.values(o).reduce((function(e,n){return e[n]=n===o.Edit?"Customize in "+t:n,e}),{})}},WoAB:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.AssignRole="assignRole",e.RemoveUser="removeUser",e.TransferContent="transferContent",e.CreateCollection="createCollection",e.DeleteCollection="deleteCollection",e.EditTeamAccount="editTeamAccount",e.EditTeamBookmarks="editTeamBookmarks",e.EditAllTeamBookmarks="editAllTeamBookmarks",e.AddTeamBookmarks="addTeamBookmarks",e.RemoveTeamBookmarks="removeTeamBookmarks",e.EditBookmarks="editBookmarks",e.PublishBookmarks="publishBookmarks",e.SavePrivateBookmarks="savePrivateBookmarks",e.CopyUrl="copyURL",e.ViewBookmarks="viewBookmarks",e.InviteUsers="inviteUsers",e.ExportCSV="exportCSV",e.DuplicateTeamBookmarks="duplicateTeamBookmarks",e}({})},Wqx0:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ofXK"),a=n("3Pt+"),o=n("fXoL"),r=function(){var e=function e(){h(this,e)};return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.l]]}),e}()},WwWM:function(e,t,n){"use strict";n.d(t,"a",(function(){return he}));var i=n("AcyG"),a=n("Vv7R"),o=n("PUI9"),r=n("YpC8"),s=n("itXk"),c=n("pLZG"),l=n("IzEk"),d=n("VJvM"),g=n("GMXD"),f=n("sTHe"),m=n("11Ye"),y=n("WFQG"),v=n("yCjD"),k=n("UEjg"),O=n("EF3F"),S=n("q8pu"),x=n("Mh2x"),C=n("TATr"),w=n("zlNa");function j(e){var t=e.id,n=e.s,i=e.m,a=e.be,o=e.b,r="";if(t)r=t;else if(a)r=a;else if(o){var s=parseInt(o,10);r=Number.isNaN(s)?"":function(e){for(var t,n,i=[],a=e;a>0;){var o;n=a,a=(o=p([Math.floor(n/62),n%62],2))[0],t=o[1],i.unshift("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"[t])}return i.join("")}(s)}else i&&(r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"male";return e.includes("/")?e:"production/".concat(t,"Adult/").concat(e)}(i,"female"===n?"female":"male"));return r.replace(/\.json$/,"")}n("ewuU"),n("V7wM");var P,_=n("eW6i"),M=n("LvDl"),I=n("fXoL"),T=((P=function(){function e(t){h(this,e),this.store=t}return b(e,[{key:"chapterHasTransition",value:function(e,t){var n=t?"transitions.pre":"transitions.post",i=Object(M.get)(e,n);return!!i&&(t?i.onPrevious:i.onNext)}},{key:"searchChapterTransitions",value:function(e,t,n){var i=this,a=u(n),o=a.findIndex((function(t){return t.id===e})),r=a.findIndex((function(e){return e.id===t})),s=r<o;if(s&&(o=(a=a.reverse()).findIndex((function(t){return t.id===e})),r=a.findIndex((function(e){return e.id===t}))),o<0||r<0||o===r)return null;var c=a.slice(o,r).find((function(e){return i.chapterHasTransition(e,s)}));return c?s?c.transitions.pre:c.transitions.post:null}}]),e}()).\u0275fac=function(e){return new(e||P)(I.Zb(i.h))},P.\u0275prov=I.Lb({token:P,factory:P.\u0275fac,providedIn:"root"}),P),U=n("cAOT"),L=n("j8e5"),z=n("cAYK"),A=n("gm/O"),F=n("JaAu"),D=n("ufUH"),E=n("WLCt"),N=n("Lyqc"),R=n("+1W3"),V=n("kTA6"),B=n("FFWI"),H=n("N2iv"),Q=n("0IaG"),G=n("XNiG"),W=n("HDdC"),q=n("CpGW"),X=n("0kAG"),Z=n("0njA"),J=n("4qFM"),K=n("awCs"),$=n("ofXK");function Y(e,t){if(1&e&&(I.Vb(0,"label",11),I.Pc(1),I.Ub()),2&e){var n=I.gc().$implicit;I.Db(1),I.Qc(n.pronunciation)}}function ee(e,t){if(1&e&&(I.Vb(0,"span"),I.Vb(1,"kbd",9),I.Pc(2),I.Ub(),I.Nc(3,Y,2,1,"label",10),I.Ub()),2&e){var n=t.$implicit;I.Db(1),I.Eb("aria-hidden",n.hasOwnProperty("pronunciation")),I.Db(1),I.Rc(" ",n.shortcut," "),I.Db(1),I.mc("ngIf",n.hasOwnProperty("pronunciation"))}}function te(e,t){if(1&e&&(I.Vb(0,"tr"),I.Vb(1,"th",7),I.Pc(2),I.Ub(),I.Vb(3,"td",8),I.Nc(4,ee,4,3,"span",6),I.Ub(),I.Ub()),2&e){var n=t.$implicit;I.Db(2),I.Qc(n.label),I.Db(2),I.mc("ngForOf",n.keys)}}function ne(e,t){if(1&e&&(I.Vb(0,"div",2),I.Vb(1,"h2",3),I.Pc(2),I.Ub(),I.Vb(3,"table",4),I.Vb(4,"tr"),I.Qb(5,"th"),I.Vb(6,"th",5),I.Pc(7,"Keyboard Shortcut"),I.Ub(),I.Ub(),I.Nc(8,te,5,2,"tr",6),I.Ub(),I.Ub()),2&e){var n=t.$implicit;I.Db(2),I.Qc(n.label),I.Db(6),I.mc("ngForOf",n.shortcuts)}}var ie,ae,oe,re=function(e){return e.Left="\u2190",e.Right="\u2192",e.Up="\u2191",e.Down="\u2193",e.Command="\u2318",e}({}),se=((ie=function e(){h(this,e),this.shortcutGroups=[{label:"Navigation",shortcuts:[{keys:[{shortcut:",",pronunciation:"Comma."},{shortcut:"Pg-Up",pronunciation:"page-up"}],label:"Previous chapter"},{keys:[{shortcut:".",pronunciation:"Period."},{shortcut:"Pg-Down",pronunciation:"Page-down."}],label:"Next chapter"},{keys:[{shortcut:"/",pronunciation:"Forward slash."}],label:"Open Search"},{keys:[{shortcut:"Ctrl + Enter"}],label:"Enter Fullscreen"},{keys:[{shortcut:"Ctrl/Cmd + ,",pronunciation:"Control or command plus comma."}],label:"Toggle Description"},{keys:[{shortcut:"Shift + /"}],label:"Open Help"}]},{label:"Tools",shortcuts:[{keys:[{shortcut:"1"}],label:'Use "Select" tool'},{keys:[{shortcut:"2"}],label:'Use "Hide" tool'},{keys:[{shortcut:"3"}],label:'Use "Fade" tool'},{keys:[{shortcut:"del",pronunciation:"Delete."},{shortcut:"backspace"}],label:"Hide selected structure"},{keys:[{shortcut:"Shift + R"}],label:"Reset chapter"},{keys:[{shortcut:"Ctrl/Cmd + Z",pronunciation:"Control or command plus z."}],label:"Undo"},{keys:[{shortcut:"Ctrl/Cmd + Shift + Z",pronunciation:"Control or command plus shift pluz z."},{shortcut:"Ctrl/Cmd + Y",pronunciation:"Control or command plus y."}],label:"Redo"}]},{label:"Pan",shortcuts:[{keys:[{shortcut:"W"}],label:"Pan up"},{keys:[{shortcut:"S"}],label:"Pan down"},{keys:[{shortcut:"A"}],label:"Pan left"},{keys:[{shortcut:"D"}],label:"Pan right"},{keys:[{shortcut:"Shift + W"}],label:"Slow pan up"},{keys:[{shortcut:"Shift + S"}],label:"Slow pan down"},{keys:[{shortcut:"Shift + A"}],label:"Slow pan left"},{keys:[{shortcut:"Shift + D"}],label:"Slow pan right"}]},{label:"Rotate",shortcuts:[{keys:[{shortcut:re.Up}],label:"Rotate up"},{keys:[{shortcut:re.Down}],label:"Rotate down"},{keys:[{shortcut:re.Left}],label:"Rotate left"},{keys:[{shortcut:re.Right}],label:"Rotate right"},{keys:[{shortcut:"Shift + "+re.Up}],label:"Slow rotate up"},{keys:[{shortcut:"Shift + "+re.Down}],label:"Slow rotate down"},{keys:[{shortcut:"Shift + "+re.Left}],label:"Slow rotate left"},{keys:[{shortcut:"Shift + "+re.Right}],label:"Slow rotate right"}]},{label:"Zoom",shortcuts:[{keys:[{shortcut:"E"},{shortcut:"=",pronunciation:"Equals."}],label:"Zoom in"},{keys:[{shortcut:"C"},{shortcut:"-",pronunciation:"Hyphen."}],label:"Zoom out"},{keys:[{shortcut:"Shift + E"},{shortcut:"Shift + =",pronunciation:"Shift plus equals."}],label:"Slow zoom in"},{keys:[{shortcut:"Shift + C"},{shortcut:"Shift + -",pronunciation:"Shift plus hyphen."}],label:"Slow zoom out"}]}]}).\u0275fac=function(e){return new(e||ie)},ie.\u0275cmp=I.Jb({type:ie,selectors:[["app-view-shortcuts"]],decls:2,vars:1,consts:[[1,"view-shortcuts"],["class","view-shortcuts__group",4,"ngFor","ngForOf"],[1,"view-shortcuts__group"],[1,"view-shortcuts__label","text-bold"],[1,"view-shortcuts__table"],["scope","col",1,"view-shortcuts__cell-header"],[4,"ngFor","ngForOf"],["scope","row",1,"view-shortcuts__cell-header"],[1,"view-shortcuts__cell","view-shortcuts__cell--key"],[1,"view-shortcuts__key"],["class","visually-hidden",4,"ngIf"],[1,"visually-hidden"]],template:function(e,t){1&e&&(I.Vb(0,"div",0),I.Nc(1,ne,9,2,"div",1),I.Ub()),2&e&&(I.Db(1),I.mc("ngForOf",t.shortcutGroups))},directives:[$.o,$.p],styles:[".view-shortcuts[_ngcontent-%COMP%]{display:flex;flex-direction:column}.view-shortcuts__group[_ngcontent-%COMP%]{width:100%;padding-bottom:32px;margin-top:32px}.view-shortcuts__label[_ngcontent-%COMP%]{padding:8px 0 12px}.view-shortcuts__table[_ngcontent-%COMP%]{width:100%}.view-shortcuts__cell[_ngcontent-%COMP%], .view-shortcuts__cell-header[_ngcontent-%COMP%]{padding:8px;border-bottom:1px solid hsla(0,0%,100%,.3);width:50%}.view-shortcuts__cell-header[_ngcontent-%COMP%]{text-align:left}.view-shortcuts__key[_ngcontent-%COMP%]{border-radius:4px;display:inline-flex;padding:4px;margin-right:4px;background:#000;color:#fff;justify-content:center;align-items:center;font-family:monospace;font-size:16px}"],changeDetection:0}),ie),ce=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ue=["viewHelp"],le=((ae=function(){function e(t,n,i,a){h(this,e),this.dialogRef=t,this.renderer=n,this.store=i,this.data=a,this.helpTypeEnum=D.a,this.activeTab=D.a.Basics,this.ngUnsubscribe=new G.a,this.activeTab=a.tab}return b(e,[{key:"ngOnInit",value:function(){this.initWindowSizeObserver()}},{key:"ngAfterViewInit",value:function(){this.updateViewHeight()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initWindowSizeObserver",value:function(){var e=this;this.renderer.listen("window","resize",(function(){e.updateViewHeight()}))}},{key:"updateViewHeight",value:function(){var e=this.store.selectSnapshot(q.a.getSiteHeader),t=Object(X.a)(e,!1);this.viewHelp.nativeElement.style.setProperty("--vh",t+"px")}},{key:"handleCloseClick",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||ae)(I.Pb(Q.g),I.Pb(I.H),I.Pb(i.h),I.Pb(Q.a))},ae.\u0275cmp=I.Jb({type:ae,selectors:[["app-help-dialog"]],viewQuery:function(e,t){var n;1&e&&I.Jc(ue,!0),2&e&&I.xc(n=I.dc())&&(t.viewHelp=n.first)},decls:126,vars:1,consts:[["role","dialog","aria-labelledby","helpTitle",1,"view-help"],["viewHelp",""],["id","helpTitle",1,"view-help__header"],["type","button",1,"view-help__close",3,"click"],["icon","times","aria-hidden","true"],[1,"visually-hidden"],[1,"view-help__inner"],["tabSize","medium","tabAlign","center","cdkFocusInitial","",3,"activeTab"],["label","Navigation Basics","id","helpBasics","aria-controls","basicsPanel"],["role","tabpanel","aria-labelledby","helpBasics","tabindex","0","id","basicsPanel"],[1,"view-help__group"],[1,"view-help__item"],[1,"view-help__image"],["src","assets/images/widget/help-rotate.svg","alt","A heart with an arrow wrapped around it, which symbolises objects being rotated withing the 3D viewport."],[1,"view-help__label"],["src","assets/images/widget/help-pan.svg","alt","A heart with left and right arrows pointing away from it, which symbolises objects being panned within the 3D viewport"],["src","assets/images/widget/help-zoom.svg","alt","A heart with a magnifying glass over it, which symbolises zooming into and out from an object within the 3D viewport."],["src","assets/images/widget/help-learn.svg","alt","A heart with a smaller region colored in blue and a popup window specifying that the Right Ventricle is selected."],["label","All Controls","id","helpAll","aria-controls","allPanel"],["role","tabpanel","aria-labelledby","helpAll","tabindex","0","id","allPanel"],[1,"view-help__section-header"],["src","assets/images/widget/help-mouse-hold-left.svg","alt","A mouse with the left button being held in."],["src","assets/images/widget/help-mouse-hold-right.svg","alt","A mouse with the right button being held in."],["src","assets/images/widget/help-mouse-single-click-left.svg","alt","A mouse with the left button being clicked."],["src","assets/images/widget/help-mouse-double-click-left.svg","alt","A mouse with the left button being double clicked."],["src","assets/images/widget/help-mouse-long-press-left.svg","alt","A mouse with the left button being held in for a long duration."],["src","assets/images/widget/help-keyboard-rotate.svg","alt","The arrow keys."],["src","assets/images/widget/help-keyboard-pan.svg","alt","The W, A, S and D keys."],["src","assets/images/widget/help-keyboard-zoom.svg","alt","The plus and minus keys grouped together or the E and C keys grouped together."],["src","assets/images/widget/help-keyboard-slow-motion.svg","alt","The shift key."],["src","assets/images/widget/help-trackpad-single-tap.svg","alt","A finger clicking the trackpad once."],["src","assets/images/widget/help-trackpad-double-tap.svg","alt","A finger clicking the trackpad twice."],["src","assets/images/widget/help-trackpad-long-press.svg","alt","A finger pressing for a long duration on the trackpad."],["src","assets/images/widget/help-trackpad-scroll.svg","alt","Two fingers pressing the trackpad while moving vertically."],["icon","plus","aria-hidden","true",1,"view-help__icon"],["icon","minus","aria-hidden","true",1,"view-help__icon"],["icon","location","aria-hidden","true",1,"view-help__icon"],["icon","arrows","aria-hidden","true",1,"view-help__icon"],["label","Keyboard Shortcuts","id","helpShortcuts","aria-controls","shortcutsPanel"],["role","tabpanel","aria-labelledby","helpShortcuts","tabindex","0","id","shortcutsPanel"]],template:function(e,t){1&e&&(I.Vb(0,"div",0,1),I.Vb(2,"h2",2),I.Pc(3,"Help"),I.Ub(),I.Vb(4,"button",3),I.cc("click",(function(){return t.handleCloseClick()})),I.Qb(5,"app-icon",4),I.Vb(6,"span",5),I.Pc(7,"Close help modal"),I.Ub(),I.Ub(),I.Vb(8,"div",6),I.Vb(9,"app-tabs",7),I.Vb(10,"app-tab",8),I.Vb(11,"div",9),I.Vb(12,"ul",10),I.Vb(13,"li",11),I.Vb(14,"div",12),I.Qb(15,"img",13),I.Ub(),I.Vb(16,"div",14),I.Pc(17,"Rotate"),I.Ub(),I.Pc(18," Click and drag or use one finger to change the viewing angle. "),I.Ub(),I.Vb(19,"li",11),I.Vb(20,"div",12),I.Qb(21,"img",15),I.Ub(),I.Vb(22,"div",14),I.Pc(23,"Pan"),I.Ub(),I.Pc(24," Hold the shift key and drag or use two fingers to move the model's position. "),I.Ub(),I.Vb(25,"li",11),I.Vb(26,"div",12),I.Qb(27,"img",16),I.Ub(),I.Vb(28,"div",14),I.Pc(29,"Zoom"),I.Ub(),I.Pc(30," Scroll up and down or pinch with two fingers to zoom in or out. "),I.Ub(),I.Vb(31,"li",11),I.Vb(32,"div",12),I.Qb(33,"img",17),I.Ub(),I.Vb(34,"div",14),I.Pc(35,"Explore the Anatomy"),I.Ub(),I.Pc(36," Click or tap an anatomic structure or label to learn more. "),I.Ub(),I.Ub(),I.Ub(),I.Ub(),I.Vb(37,"app-tab",18),I.Vb(38,"div",19),I.Vb(39,"h3",20),I.Pc(40,"Mouse"),I.Ub(),I.Vb(41,"ul",10),I.Vb(42,"li",11),I.Vb(43,"div",12),I.Qb(44,"img",21),I.Ub(),I.Pc(45," Hold left button to rotate "),I.Ub(),I.Vb(46,"li",11),I.Vb(47,"div",12),I.Qb(48,"img",22),I.Ub(),I.Pc(49," Hold right button to pan "),I.Ub(),I.Vb(50,"li",11),I.Vb(51,"div",12),I.Qb(52,"img",23),I.Ub(),I.Pc(53," Single-click left button to select a structure "),I.Ub(),I.Vb(54,"li",11),I.Vb(55,"div",12),I.Qb(56,"img",24),I.Ub(),I.Pc(57," Double-click left button to auto-focus on a structure "),I.Ub(),I.Vb(58,"li",11),I.Vb(59,"div",12),I.Qb(60,"img",25),I.Ub(),I.Pc(61," Long-click to fly to a structure "),I.Ub(),I.Ub(),I.Vb(62,"h3",20),I.Pc(63,"Keyboard"),I.Ub(),I.Vb(64,"ul",10),I.Vb(65,"li",11),I.Vb(66,"div",12),I.Qb(67,"img",26),I.Ub(),I.Pc(68," Rotate with arrows "),I.Ub(),I.Vb(69,"li",11),I.Vb(70,"div",12),I.Qb(71,"img",27),I.Ub(),I.Pc(72," Pan up (W), left (A), down (S), right(D) "),I.Ub(),I.Vb(73,"li",11),I.Vb(74,"div",12),I.Qb(75,"img",28),I.Ub(),I.Pc(76," Zoom out (-, C) and zoom in (+, E) "),I.Ub(),I.Vb(77,"li",11),I.Vb(78,"div",12),I.Qb(79,"img",29),I.Ub(),I.Pc(80," Hold with any previous key to slow down motion "),I.Ub(),I.Ub(),I.Vb(81,"h3",20),I.Pc(82,"Trackpad"),I.Ub(),I.Vb(83,"ul",10),I.Vb(84,"li",11),I.Vb(85,"div",12),I.Qb(86,"img",30),I.Ub(),I.Pc(87," Single-tap to auto-focus a structure "),I.Ub(),I.Vb(88,"li",11),I.Vb(89,"div",12),I.Qb(90,"img",31),I.Ub(),I.Pc(91," Double-tap to select a structure "),I.Ub(),I.Vb(92,"li",11),I.Vb(93,"div",12),I.Qb(94,"img",32),I.Ub(),I.Pc(95," Long-press to fly to a structure "),I.Ub(),I.Vb(96,"li",11),I.Vb(97,"div",12),I.Qb(98,"img",33),I.Ub(),I.Pc(99," Scroll up and down to zoom "),I.Ub(),I.Ub(),I.Vb(100,"h3",20),I.Pc(101,"In-App"),I.Ub(),I.Vb(102,"ul",10),I.Vb(103,"li",11),I.Qb(104,"app-icon",34),I.Vb(105,"span",5),I.Pc(106," The plus symbol, which represents zooming in in the camera control menu. "),I.Ub(),I.Pc(107," Zoom in "),I.Ub(),I.Vb(108,"li",11),I.Qb(109,"app-icon",35),I.Vb(110,"span",5),I.Pc(111," The minus symbol, which represents zooming out in the camera control menu. "),I.Ub(),I.Pc(112," Zoom out "),I.Ub(),I.Vb(113,"li",11),I.Qb(114,"app-icon",36),I.Vb(115,"span",5),I.Pc(116," The map pin symbol, which resets the camera in the camera control menu. "),I.Ub(),I.Pc(117," Recenter 3D Model "),I.Ub(),I.Vb(118,"li",11),I.Qb(119,"app-icon",37),I.Vb(120,"span",5),I.Pc(121," Arrows pointing in four directions, which represents panning in the camera control menu. "),I.Ub(),I.Pc(122," Pan "),I.Ub(),I.Ub(),I.Ub(),I.Ub(),I.Vb(123,"app-tab",38),I.Vb(124,"div",39),I.Qb(125,"app-view-shortcuts"),I.Ub(),I.Ub(),I.Ub(),I.Ub(),I.Ub()),2&e&&(I.Db(9),I.mc("activeTab",t.activeTab))},directives:[Z.a,J.a,K.a,se],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}.view-help{background-color:rgba(16,24,35,.9);color:#fff;display:flex;align-items:center;flex-direction:column;position:fixed;top:0;left:0;right:0;z-index:10000;height:100vh;height:calc(var(--vh, 1vh) * 100);max-height:100vh;overflow:auto}.view-help__inner{width:100%;max-width:1140px;height:99vh;height:calc(var(--vh, 1vh) * 99);padding:32px;position:relative}.view-help__close{color:#fff;width:40px;height:40px;display:flex;align-items:center;justify-content:center;position:fixed;right:8px;top:8px;z-index:10;border:none;background:none}.view-help__header{font-size:14px;letter-spacing:.84px}.view-help__header,.view-help__section-header{line-height:1.25em;text-transform:uppercase;font-weight:600;padding-bottom:12px;margin-top:32px}.view-help__section-header{font-size:12px;letter-spacing:.72px;border-bottom:1px solid hsla(0,0%,100%,.3)}.view-help__label{font-size:14px;letter-spacing:.35px;line-height:1.4em;font-weight:600;margin-bottom:12px}.view-help__group{display:flex;justify-content:space-around;flex-wrap:wrap}.view-help__item{font-size:12px;letter-spacing:.3px;line-height:1.4em;display:flex;flex-flow:column;text-align:center;padding:20px;flex:0 1 180px}.view-help__image{justify-content:center;margin-bottom:16px;width:160px;height:100px}.view-help__icon{font-size:24px;margin-bottom:16px}"],encapsulation:2,changeDetection:0}),function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);o>3&&r&&Object.defineProperty(t,n,r)}([Object(i.e)(y.a.getCanTouch),ce("design:type",W.a)],ae.prototype,"canTouch$",void 0),ae),pe=n("YLgZ"),de=n("u47x"),ge=function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{c(i.next(e))}catch(t){o(t)}}function s(e){try{c(i.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((i=i.apply(e,t||[])).next())}))},he=((oe=function(){function e(t,n,i,a,o,r,s,c){h(this,e),this.dialog=t,this.store=n,this.location=i,this.transitionService=a,this.engineService=o,this.layoutService=r,this.pendoService=s,this.liveAnnouncer=c}return b(e,[{key:"initStory",value:function(e,t,n){var i=this,u="preview"===e;this.store.dispatch(new N.C(e,t,u)),this.store.dispatch(new a.m(e,t,!0));var g=this.store.select(o.a.getReady),h=this.store.select(r.a.getIncomingStoryInfo);Object(s.b)([g,h]).pipe(Object(c.a)((function(e){var t=p(e,2),n=t[0],i=t[1];return n&&!!i.id})),Object(l.a)(1)).subscribe((function(){i.store.dispatch(new d.p),i.store.dispatch(new a.e(e,t,n,u))}))}},{key:"nextChapter",value:function(e){var t=this.store.selectSnapshot(x.a.getSelectedChapterIndex),n=this.store.selectSnapshot(x.a.getStoryChapters);this.pendoService.trackOncePerSession(V.a.DiscoveredChapterNav,{source:e,breakpoint:this.store.selectSnapshot(L.a.getBreakpointLabel)});var i=n[t+1];i&&this.selectChapter(i)}},{key:"previousChapter",value:function(e){var t=this.store.selectSnapshot(x.a.getSelectedChapterIndex),n=this.store.selectSnapshot(x.a.getStoryChapters);this.pendoService.trackOncePerSession(V.a.DiscoveredChapterNav,{source:e,breakpoint:this.store.selectSnapshot(L.a.getBreakpointLabel)});var i=n[t-1];i&&this.selectChapter(i)}},{key:"selectChapter",value:function(e){return ge(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.store.selectSnapshot(B.b.getQuizModeActive)){t.next=8;break}if(n=this.store.selectSnapshot(x.a.getSelectedChapterId),i=e.id,o=this.store.selectSnapshot(x.a.getStoryChapters),r=this.transitionService.searchChapterTransitions(n,i,o),this.pendoService.trackOncePerSession(V.a.DiscoveredChapterNav,{source:"Chapter List",breakpoint:this.store.selectSnapshot(L.a.getBreakpointLabel)}),t.t0=r,!t.t0){t.next=7;break}return t.next=7,this.chapterTransition(r);case 7:this.store.dispatch([new a.k(e.id),new d.p(e)]);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"chapterTransition",value:function(e){var t=this;return new Promise((function(n){e.camera&&t.store.dispatch(new C.l(e.camera,!0,e.duration)),e.fadeColor&&t.store.dispatch(new m.h(e.fadeColor,e.duration)),setTimeout((function(){n(!0)}),1e3*e.duration)}))}},{key:"hideSelectedStructures",value:function(){var e=this.store.selectSnapshot(g.a.getCheckedNodeIds);this.store.dispatch(new A.a.UpdateNodesShown(!1,e))}},{key:"selectTool",value:function(e){this.store.selectSnapshot(B.b.getQuizModeActive)&&e===f.a.Select&&(e=f.a.Quiz),this.store.dispatch(new m.w(e))}},{key:"toggleColumn",value:function(e){var t=this.store.selectSnapshot(y.a.getUI);t.column.status=(e=null==e?!(t.column.status===v.a.Show):e)?v.a.Show:v.a.Collapse,this.store.dispatch(new k.a.SetUI(t))}},{key:"togglePresentation",value:function(){this.store.selectSnapshot(y.a.getPresentationActive)?this.stopPresentation():this.startPresentation()}},{key:"startPresentation",value:function(){this.store.dispatch(new k.a.TogglePresentation(!0))}},{key:"stopPresentation",value:function(){this.store.dispatch(new k.a.TogglePresentation(!1))}},{key:"toggleHelp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.a.Basics;0===this.dialog.openDialogs.length&&this.dialog.open(le,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{tab:e}})}},{key:"toggleInteract",value:function(e){this.store.dispatch(new k.a.ToggleWindow(z.a.Interact,e))}},{key:"toggleOnDemand",value:function(e){this.store.dispatch(new k.a.SetOnDemand(e)),this.store.dispatch(new k.a.ToggleWindow(z.a.OnDemand,e))}},{key:"toggleTutorial",value:function(e){this.store.dispatch(new k.a.ToggleWindow(z.a.Tutorial,e)),e&&this.store.dispatch(new k.a.StartTutorial(!0))}},{key:"toggleWhiteboard",value:function(e){this.store.dispatch(new k.a.ToggleWindow(z.a.Whiteboard,e)),e&&(this.store.dispatch(new m.W(!1)),this.store.dispatch(new k.a.SetWhiteboardEnabled(!0)))}},{key:"showLabels",value:function(e){var t=this.store.selectSnapshot(y.a.getUI);e=Object(M.isNil)(e)?!t.labels.shown:e,t.labels.shown=e,this.store.dispatch(new k.a.SetUI(t))}},{key:"toggleLabels",value:function(e){this.store.dispatch(new m.Y(e))}},{key:"toggleSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H.a.List,t=arguments.length>1?arguments[1]:void 0;this.store.selectSnapshot(L.a.getBreakpoint);var n=this.store.selectSnapshot(y.a.getUI);n.search.status=(t=null==t?!(n.search.status===v.a.Show):t)?v.a.Show:v.a.Hide,t&&(n.nodeInfo.status=v.a.Hide),this.store.dispatch(new k.a.SetSearchDisplayMode(e)),this.store.dispatch(new k.a.SetUI(n))}},{key:"toggleNodeInfo",value:function(e){this.toggleInfoLayout("nodeInfo",e)}},{key:"toggleLabelInfo",value:function(e){this.toggleInfoLayout("labelInfo",e)}},{key:"toggleInfoLayout",value:function(e,t){var n=this.store.selectSnapshot(y.a.getUI);(t=null==t?n[e].status===v.a.Hide:t)?(n[e].status=v.a.Show,["nodeInfo","labelInfo"].filter((function(t){return t!==e})).forEach((function(e){return n[e].status=v.a.Hide}))):n[e].status=v.a.Hide,this.store.dispatch(new k.a.SetUI(n))}},{key:"delegateNodeClick",value:function(e,t){if(this.clearSelectedLabel(),e||t.srcEvent.shiftKey)if(t.srcEvent.shiftKey||this.store.selectSnapshot(y.a.getMultiPickModeEnabled))this.checkNode(e);else switch(this.store.selectSnapshot(o.a.getActiveTool)){case f.a.Hide:this.hideNode(e);break;case f.a.Select:this.selectNode(e);break;case f.a.Isolate:this.isolateNode(e);break;case f.a.Fade:this.fadeNode(e)}else this.clearSelectedNodes()}},{key:"clearSelectedLabel",value:function(){this.store.dispatch(new S.k)}},{key:"clearSelectedNodes",value:function(){this.store.dispatch(new A.a.UpdateNodeSelected),this.store.dispatch(new A.a.UpdateNodesChecked(!1))}},{key:"clearFadedNodes",value:function(){var e=this.store.selectSnapshot(x.a.getSelectedChapterId);this.store.dispatch(new F.a.UndoAll(e))}},{key:"checkNode",value:function(e,t){void 0!==e&&(null==t&&(t=this.store.selectSnapshot(g.a.getNodes)[e.id].checked),this.store.dispatch(new A.a.UpdateNodesChecked(!t,[e.id])),this.store.dispatch(new A.a.UpdateNodeSelected(e.id)))}},{key:"fadeNode",value:function(e){this.store.dispatch(new A.a.UpdateNodesPaint(O.b,[e.id]))}},{key:"isolateNode",value:function(e){this.store.dispatch(new A.a.UpdateNodesShown(!1)),this.store.dispatch(new A.a.UpdateNodesShown(!0,[e.id]))}},{key:"selectNode",value:function(e){var t=!this.store.selectSnapshot(g.a.getNodes)[e.id].checked;this.store.dispatch(new A.a.UpdateNodesChecked(!1)),t&&(this.store.dispatch(new A.a.UpdateNodesChecked(!0,[e.id])),this.store.dispatch(new A.a.UpdateNodeSelected(e.id))),this.store.dispatch(new m.g(e));var n=this.store.selectSnapshot(y.a.getNodeInfoFallback),i=this.store.selectSnapshot(y.a.getViewLanguage);this.store.dispatch(new m.q(e,n,i))}},{key:"hideNode",value:function(e){this.store.dispatch(new A.a.UpdateNodesShown(!1,[e.id])),this.store.dispatch(new A.a.UpdateNodesChecked(!1))}},{key:"selectLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.objectId,i=e.states;this.store.dispatch(new S.k(e)),t&&n&&0===i.length&&this.store.dispatch(new m.j(n,!0))}},{key:"initChapter",value:function(e){return ge(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.engineService.createViewGraph({},!1),this.store.dispatch(new m.E(n)),this.store.selectSnapshot(pe.a.getChapterCameraEnabled)&&this.store.dispatch(new C.l(e.camera.location,e.camera.action===U.a.FlyTo,void 0,e.camera.rotationCenter));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"playChapterFromStart",value:function(){this.store.dispatch(new m.p)}},{key:"resetCamera",value:function(){var e=this.store.selectSnapshot(x.a.getSelectedChapter);e&&this.store.dispatch(new C.l(e.camera.location))}},{key:"resetChapter",value:function(){var e=this;this.resetCamera();var t=this.store.selectSnapshot(x.a.getSelectedChapterId);this.store.dispatch(new F.a.UndoAll(t)).subscribe((function(){e.liveAnnouncer.announce("reset complete")})),this.store.dispatch(new A.a.UpdateNodesChecked(!1)),this.store.dispatch(new S.h)}},{key:"resetLayout",value:function(){var e=this.store.selectSnapshot(y.a).ui;this.layoutService.isUIHidden()?Object.keys(e).forEach((function(t){e[t].status=v.a.Hide})):(Object.keys(e).forEach((function(t){e[t].status=v.a.Show})),e.search.status=v.a.Hide,e.tools.status=v.a.Hide,e.nodeInfo.status=v.a.Hide,e.labelInfo.status=v.a.Hide,e.media.status=v.a.Hide,e.visibilityLayers.status=v.a.Hide),this.store.dispatch(new k.a.SetUI(e))}},{key:"undo",value:function(){var e=this;this.store.dispatch(new F.a.Undo(this.store.selectSnapshot(x.a.getSelectedChapterId))).subscribe((function(){e.liveAnnouncer.announce("undo complete")}))}},{key:"redo",value:function(){var e=this;this.store.dispatch(new F.a.Redo(this.store.selectSnapshot(x.a.getSelectedChapterId))).subscribe((function(){e.liveAnnouncer.announce("redo complete")}))}},{key:"toggleAnimation",value:function(){var e=!this.store.selectSnapshot(o.a.getAnimationPlaying);this.store.dispatch(new m.W(e))}},{key:"toggleAudio",value:function(){var e=this.store.selectSnapshot(o.a.getPlayAudio);this.store.dispatch(new m.n(!e))}},{key:"toggleToolbar",value:function(e){var t=this.store.selectSnapshot(y.a.getUI);t.media.status=v.a.Hide,t.tools.status=v.a.Hide,t.toolbar.status=v.a.Hide,t.visibilityLayers.status=v.a.Hide,"none"!==e?t[e].status=v.a.Show:this.selectTool(f.a.Select),this.store.dispatch(new k.a.SetUI(t))}},{key:"closeToolbar",value:function(){var e=this.store.selectSnapshot(y.a.getUI);e.media.status=v.a.Hide,e.tools.status=v.a.Hide,e.visibilityLayers.status=v.a.Hide,this.selectTool(f.a.Select),this.store.dispatch(new k.a.SetUI(e))}},{key:"normalizeQueryParams",value:function(e){var t,n=Object.assign({},e);return{id:j(n),type:(t=n,j(t).includes("/")?"module":"bookmark"),lang:e.lang}}},{key:"sanitizeRouteId",value:function(e){return e=e.replace(/\.json$/,""),this.location.replaceState("view","?id="+e),e}},{key:"openInNewTab",value:function(){var e=window.document.location.href;window.open(e)}},{key:"getComputedTransform",value:function(e){var t=getComputedStyle(e).transform.replace("matrix3d","").replace("matrix","").replace("(","").replace(")","").split(",").map((function(e){return e.trim()})).map((function(e){return parseInt(e,10)})),n=16===t.length?t[12]:t[4],i=16===t.length?t[13]:t[5];return Number.isNaN(n)||Number.isNaN(i)?null:{x:n,y:i}}},{key:"inferDrawerMode",value:function(e){var t=w.a.Content;return e.nodeInfo.status===v.a.Show?t=w.a.NodeInfo:e.labelInfo.status===v.a.Show&&(t=w.a.LabelInfo),t}},{key:"setUI",value:function(e){var t,n=null!==(t=e.baseUIConfig)&&void 0!==t?t:new R.a;n=Object(R.h)(n,e.apiUIConfig),n=Object(R.h)(n,e.urlUIConfig),n=Object(R.h)(n,e.chapterUIConfig),e.quizUIConfig&&(n=Object(R.h)(n,e.quizUIConfig,!0));var i=this.store.selectSnapshot(y.a.getUI),a=Object(R.d)(i,n);this.store.dispatch(new k.a.SetUI(a))}},{key:"setViewLanguage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";this.store.dispatch(new k.a.SetViewLanguage(e))}},{key:"setAnatomyDescriptionFallback",value:function(e){this.store.dispatch(new k.a.SetNodeInfoConfig(e))}}]),e}()).\u0275fac=function(e){return new(e||oe)(I.Zb(Q.b),I.Zb(i.h),I.Zb($.k),I.Zb(T),I.Zb(_.a),I.Zb(E.a),I.Zb(V.b),I.Zb(de.i))},oe.\u0275prov=I.Lb({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe)},XAAL:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];h(this,e),this.zoom=t,this.panX=n,this.panY=i,this.rotateX=a,this.rotateY=o,this.applyFriction=r}},Xk3F:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return g})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return y})),n.d(t,"g",(function(){return v}));var i=n("LvDl"),a=n("qA9Q"),o=n("7b4e"),r=n("2o60"),s=n("6L7E"),c=n("3fyd"),l="Next Question";function p(e){var t,n=e.map((function(e){return(e.quizQuestions||[]).map((function(t){return Object.assign(Object.assign({},t),{chapterId:t.chapterId||e.id})}))}));return(t=[]).concat.apply(t,u(n))}function d(e){var t={id:o.a.idWithPrefix("question"),chapterId:"",type:e,questionPrompt:[Object(a.a)("")],data:{},explanation:[Object(a.a)("")],nextLabel:"",showChapterLabels:!1,sceneConfig:{}};switch(e){case c.a.MultipleChoice:var n=[g(),g()];return Object.assign(Object.assign({},t),{data:{correctAnswer:n[0].value,options:n}});case c.a.SelectAnatomy:return Object.assign(Object.assign({},t),{data:{showAnswerList:!0,selectType:"all",correctAnswer:[]}});case c.a.LabelAnatomy:return Object.assign(Object.assign({},t),{data:{correctAnswer:[],options:[]}});case c.a.Instructions:return Object.assign({},t)}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{value:o.a.idWithPrefix("question-option"),label:e}}function h(e){return{value:o.a.idWithPrefix("question-option"),label:e}}function f(e,t,n){var a=new s.a(e.label);a.id=o.a.idWithPrefix("quiz-label");var c=a.hideWire?20:32;return a.title=Object(i.trim)(e.label),a.offset=[c,0],a.objectId=t.objectId,a.barycentric=[t.barycentric[0],t.barycentric[1],t.barycentric[2]],a.pos=[t.worldPos[0],t.worldPos[1],t.worldPos[2]],a.primitiveIndex=t.primitiveIndex,a.renderableIndex=t.renderableIndex||0,a.dir=n,a.occludable=!0,a.shown=!0,a.pinType=r.a.Sequential,a}function b(e){return"string"==typeof e.data.correctAnswer?[e.data.correctAnswer]:e.data.correctAnswer}function m(e,t){var n=b(e);switch(e.type){case c.a.LabelAnatomy:return Object(i.isEqual)(n,t);case c.a.MultipleChoice:return Object(i.isEqual)(n.sort(),t.sort());case c.a.SelectAnatomy:if(void 0===e.data.selectType||"all"===e.data.selectType)return Object(i.isEqual)(n.sort(),t.sort());if("any"===e.data.selectType)return 0===Object(i.difference)(t,n).length&&t.length>0}}function y(e,t){var n=e.filter((function(e){return e.type!==c.a.Instructions})),i=e.reduce((function(e,n){return e[n.id]=function(e,t){var n=e.find((function(e){return e.questionId===t}));return n?n.answer:void 0}(t,n.id),e}),{}),a=e.reduce((function(e,t){return e[t.id]=b(t),e}),{}),o=n.filter((function(e){var t=i[e.id];return m(e,void 0===t?[]:"string"==typeof t?[t]:t)})),r=e.length,s=n.length,u=o.length,l=r-u;return{score:r>0?Math.round(u/s*100):0,total:r,scorableTotal:s,correctTotal:u,incorrectTotal:l,questionAnswers:i,correctQuestionAnswers:a}}function v(e){switch(Object(i.get)(e,"type","")){case c.a.MultipleChoice:var t=Object(i.get)(e,"data.correctAnswer","");return t&&""!==t;case c.a.SelectAnatomy:case c.a.LabelAnatomy:return Object(i.get)(e,"data.correctAnswer",[]).length>0;default:return!0}}},XoCC:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("fXoL"),a=n("ofXK");function o(e,t){if(1&e&&(i.Vb(0,"div",3),i.Pc(1),i.Ub()),2&e){var n=i.gc();i.Db(1),i.Rc(" ",n.label," ")}}var r=function(e,t,n){return[e,t,n]},s=function(e){return e.Small="small",e.Medium="medium",e.Large="large",e.Huge="huge",e}({}),c=function(e){return e.Horizontal="horizontal",e.Vertical="vertical",e}({}),u=function(e){return e.Inline="inline",e.Block="block",e.Fill="fill",e}({}),l=function(){var e=function(){function e(){h(this,e),this.size=s.Medium,this.label="",this.direction=c.Horizontal,this.render=u.Fill}return b(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-spinner"]],inputs:{size:"size",label:"label",direction:"direction",render:"render"},decls:3,vars:6,consts:[[1,"spinner","spinner--horizontal",3,"ngClass"],[1,"spinner__circle"],["class","spinner__label",4,"ngIf"],[1,"spinner__label"]],template:function(e,t){1&e&&(i.Vb(0,"div",0),i.Qb(1,"div",1),i.Nc(2,o,2,1,"div",2),i.Ub()),2&e&&(i.mc("ngClass",i.rc(2,r,"spinner--"+t.size,"spinner--"+t.render,"spinner--"+t.direction)),i.Db(2),i.mc("ngIf",t.label.length))},directives:[a.m,a.p],styles:['@-webkit-keyframes spinner{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes spinner{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.spinner[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center}.spinner--small[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%], .spinner--small[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%]:after{width:11px;height:11px}.spinner--small[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{font-size:10px}.spinner--medium[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%], .spinner--medium[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%]:after{width:14px;height:14px}.spinner--medium[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{font-size:10px}.spinner--large[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%], .spinner--large[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%]:after{width:28px;height:28px}.spinner--large[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{font-size:14px}.spinner--huge[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%], .spinner--huge[_ngcontent-%COMP%]   .spinner__circle[_ngcontent-%COMP%]:after{width:44px;height:44px}.spinner--huge[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{font-size:16px}.spinner--horizontal[_ngcontent-%COMP%]{flex-direction:row}.spinner--vertical[_ngcontent-%COMP%]{align-items:center;flex-direction:column}.spinner--vertical[_ngcontent-%COMP%]   .spinner__label[_ngcontent-%COMP%]{padding:8px 0 0}.spinner--inline[_ngcontent-%COMP%]{display:inline-flex}.spinner--block[_ngcontent-%COMP%]{display:flex}.spinner--fill[_ngcontent-%COMP%]{display:flex;height:100%}.spinner__circle[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:50%;border:2px solid rgba(16,24,35,.1);position:relative}.spinner__circle[_ngcontent-%COMP%]:after{-webkit-animation:spinner .4s linear infinite;animation:spinner .4s linear infinite;content:" ";border-radius:50%;border-color:hsla(0,0%,100%,.2) rgba(16,24,35,.2) transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;position:absolute;display:block;width:14px;height:14px;top:-2px;left:-2px}.spinner__label[_ngcontent-%COMP%]{padding-left:8px;font-size:14px;text-transform:uppercase}.theme-dark[_nghost-%COMP%]   .spinner__label[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .spinner__label[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.2)}.theme-light[_nghost-%COMP%]   .spinner__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .spinner__label[_ngcontent-%COMP%]{color:rgba(16,24,35,.6)}'],changeDetection:0}),e}()},XoIW:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var i=function e(){h(this,e)},a=function(e){return e.DomainAlert="join_group_through_domain_alert",e.WelcomeTour="welcome_tour_alert",e.CompleteProfileAlert="complete_profile_alert",e}({})},XoU3:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fqos"),a=function e(t){h(this,e),this.type=i.a.flyToObject,this.value=t}},XqAe:function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));var i,a,o,r=n("tk/3"),s=n("MtjB"),c=n("3E0/"),l=n("IzEk"),d=n("lJxs"),g=n("5+tZ"),f=n("JIr8"),m=n("b36G"),y=n("zrlG"),v=n("cp0P"),k=n("z6cu"),O=n("LRne"),S=n("eNUT"),x=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},C=(i=function e(){h(this,e)},function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);o>3&&r&&Object.defineProperty(t,n,r)}([Object(m.Type)((function(){return S.b})),x("design:type",String)],i.prototype,"objectId",void 0),i),w=function e(){h(this,e)},j=n("uA5T"),P=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=(a=function e(){h(this,e)},function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);o>3&&r&&Object.defineProperty(t,n,r)}([Object(m.Type)((function(){return C})),Object(m.Type)((function(){return j.a})),Object(m.Type)((function(){return w})),P("design:type",String)],a.prototype,"moduleId",void 0),a),M=n("ZJ6O"),I=n("0FUJ"),T=n("ZR5G"),U=n("LvDl"),L=n("AcyG"),z=n("YpC8"),A=n("Mh2x"),F=n("MuXT"),D=n("Kzh2"),E=function(e){return e.Private="private",e.Group="enterprise",e.Public="public",e}({}),N=n("cQmI"),R=n("AbMW"),V=n("icKS"),B=n("ECVi"),H=n("QkH1"),Q=n("fXoL"),G={headers:new r.d({"Content-Type":"application/json; charset=utf-8"})},W=((o=function(){function e(t,n,i,a,o){h(this,e),this.store=t,this.http=n,this.serializeModuleService=i,this.storyService=a,this.productService=o}return b(e,[{key:"getBookmarkData",value:function(e){return this.http.get("/search/bookmarks/data?be="+e).pipe(Object(s.a)((function(e){return e.pipe(Object(c.a)(1e3),Object(l.a)(3))})),Object(d.a)((function(e){return(e=e.bookmark).moduleId=e.customData?e.customData.moduleId:e.modules.activeModules[0],Object(m.plainToClass)(_,e)})))}},{key:"getBookmarkModel",value:function(e){return this.http.get("/ws/search/bookmarks?eid="+e).pipe(Object(s.a)((function(e){return e.pipe(Object(c.a)(1e3),Object(l.a)(3))})),Object(d.a)((function(e){return Object(m.plainToClass)(y.a,e.bookmark_info)})),Object(d.a)((function(e){return Object(R.a)(e)})))}},{key:"getUserBookmarks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,i=arguments.length>3?arguments[3]:void 0,a={q:t,page_size:""+n};return Object(U.isNil)(i)||(a.is_owner=""+(i?1:0)),this.http.get("/ws/search/bookmarks/"+e,{params:a}).pipe(Object(s.a)((function(e){return e.pipe(Object(c.a)(1e3),Object(l.a)(3))})),Object(d.a)((function(e){return e.map((function(e){return Object(m.plainToClass)(y.a,e)})).map((function(e){return Object(R.a)(e)}))})))}},{key:"getUserConditions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4,a="";switch(e){case E.Private:a="user";break;case E.Group:a="group"}return this.http.get("/ws/search/conditions/private?q=".concat(t,"&page_size=").concat(i)).pipe(Object(d.a)((function(e){return e.filter((function(e){return e.module_accessor_level===a&&(!n||e.module_accessor_id===n)}))})),Object(d.a)((function(e){return Object(m.plainToClass)(y.a,e)})),Object(d.a)((function(e){return e.map((function(e){return Object(R.a)(e)}))})))}},{key:"getPrivateBookmarks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return this.getUserBookmarks(E.Private,e,t,!0)}},{key:"getPrivateConditions",value:function(){return this.getUserConditions(E.Private)}},{key:"getOrganizationBookmarks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return this.getUserBookmarks(E.Private,t,n).pipe(Object(d.a)((function(t){return t.filter((function(e){return e.tags.includes("enterprise")})).filter((function(t){return t.group_access.some((function(t){return t.group_id===e}))}))})))}},{key:"getOrganizationConditions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.getUserConditions(E.Group,t,e)}},{key:"getOrganizationContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(v.a)([this.getOrganizationBookmarks(e,t),this.getOrganizationConditions(e,t)]).pipe(Object(d.a)((function(e){var t=p(e,2),n=t[0],i=t[1];return[].concat(u(n),u(i))})))}},{key:"getPrivateContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(v.a)([this.getPrivateBookmarks(e),this.getPrivateConditions(e)]).pipe(Object(d.a)((function(e){var t=p(e,2),n=t[0],i=t[1];return[].concat(u(n),u(i))})))}},{key:"createBookmarkStory",value:function(e){return this.serializeModuleService.serialize({},new I.a,!1,this.store.selectSnapshot(z.a.getStory),this.store.selectSnapshot(A.a.getStoryChapters),e)}},{key:"getPublicBookmarks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.getUserBookmarks(E.Public,e)}},{key:"saveBookmark",value:function(e){var t=this,n=this.getNormalizedBookmarkEntry(e);return this.http.post(e.id?"/ws/user/bookmark/v4/update":"/ws/user/bookmark/v4/save",n,G).pipe(Object(g.a)((function(e){return t.getBookmarkModel(e.id)})))}},{key:"deleteBookmark",value:function(e){return this.http.delete("/ws/user/bookmark/v4/delete?eid=".concat(e,"&app_producttype=").concat(this.productService.productType,"&app_productkey=").concat(this.productService.productKey)).pipe(Object(f.a)((function(e){var t=e.error.error,n=t?t.message:"";return Object(k.a)(n)})))}},{key:"atMaxFreeBookmarkCount",value:function(){return this.http.get("/ws/user/content/limit/check?version=2").pipe(Object(f.a)((function(e){return Object(O.a)({limit_reached:!1})})))}},{key:"filterByTags",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.filter((function(e){return n?t.every((function(t){return e.tags.includes(t)})):t.some((function(t){return e.tags.includes(t)}))}))}},{key:"getGalleryTags",value:function(e){if(e){var t=[],n=this.store.selectSnapshot(B.a.getUserRole),i=H.e(n,e);return e.type===T.a.Bookmark&&!i&&t.push("View Only"),e.animated&&t.push("Animated"),e.tour&&t.push("Tour"),e.quiz&&t.push("Quiz"),t}return[]}},{key:"getShowcase",value:function(e){var t=this,n=[],i=this.getPrivateBookmarks("",10).pipe(Object(d.a)((function(e){return t.createPrivateShowcase(e)})));if(n.push(i),!Object(U.isNil)(e)){var a=this.getOrganizationBookmarks(e.id,"",10).pipe(Object(d.a)((function(n){return t.createOrganizationShowcase(n,e)})));n.push(a)}return Object(v.a)(n)}},{key:"createMockBookmark",value:function(e){return Object.assign({author:"",author_first_name:"",author_last_name:"",cost:0,create_date_time:new Date,description:"",id:"",is_owner:!0,last_editor:"",last_editor_first_name:"",last_editor_last_name:"",tags:[],thumbnail_url:"",title:"",update_date_time:new Date,type:T.a.Bookmark},e?{animated:!0,tour:!0}:{})}},{key:"createMockBookmarks",value:function(e){var t=this;return u(Array(e).keys()).map((function(e){return t.createMockBookmark(e%2==0)}))}},{key:"createPrivateShowcase",value:function(e){return{title:"Pick up where you left off",description:"",url:"/results/bookmarks?type=Private",bookmarks:e}}},{key:"createOrganizationShowcase",value:function(e,t){return{title:"Recently added to "+t.name,description:"Recently added models to your Team library.",url:"/results/bookmarks?organizationId=".concat(t.id,"&type=Organization"),bookmarks:e}}},{key:"translateBookmark",value:function(e,t,n,i){var a=this,o=n===T.a.Module||n===T.a.Internal?t.replace(".json",""):t;return Object(v.a)([this.storyService.getStory(e,T.a.Bookmark),this.storyService.getStoryTranslation(o,n,i)]).pipe(Object(d.a)((function(e){var t=p(e,2),n=t[0],i=t[1];return a.storyService.translateStory(n,i)})),Object(g.a)((function(t){return a.saveBookmark({isOwner:!0,title:t.displayName.substr(0,60),id:e,index:t})})),Object(d.a)((function(e){return e.id})),Object(f.a)((function(t){return 404===t.status?Object(O.a)(e):Object(k.a)(t)})))}},{key:"getNormalizedBookmarkEntry",value:function(e){var t,n,i,a,o=this;if(e.isOwner){if(t=e.add_group_access?this.getGroupAccess(e.add_group_access):[],e.remove_group_access&&e.remove_group_access.forEach((function(e){var n=o.getNormalizeGroupAccess({group_id:e.group_id,remove:!0});t.push(n)})),n=this.getNormalizedBool(e.public_access),e.index){i={},e.index.chapters&&(i[D.a.UserGeneratedTour]=this.getNormalizedBool(e.index.chapters.length>1));var r=(e.index.tags||[]).includes("animated");i[D.a.Animated]=this.getNormalizedBool(r),i[D.a.ModeQuiz]=this.getNormalizedBool(e.viewMode===N.a.Quiz),i[D.a.ModeContent]=this.getNormalizedBool(e.viewMode===N.a.Content);var s=Object(U.get)(e.index,"quizSettings.enabled",!1);i[D.a.Quiz]=this.getNormalizedBool(s)}a=this.getNormalizedBool(e.is_content_copy)}return{eid:e.id,name:e.title,description:e.description,index:e.index,group_access:t,public_access:n,flags:i,is_content_copy:a,app_producttype:this.productService.productType,app_productkey:this.productService.productKey}}},{key:"getGroupAccess",value:function(e){var t=this;return e.map((function(e){return t.getNormalizeGroupAccess(e)}))}},{key:"getNormalizeGroupAccess",value:function(e){var t=e.group_id,n=e.group_name,i=e.member_edit,a=e.visible,o=e.remove;return{group_id:t,group_name:n,member_edit:this.getNormalizedBool(i),visibility:this.getNormalizedBool(a),remove:this.getNormalizedBool(o)}}},{key:"getNormalizedBool",value:function(e){return!0===e?"1":!1===e?"0":""}}]),e}()).\u0275fac=function(e){return new(e||o)(Q.Zb(L.h),Q.Zb(r.b),Q.Zb(M.a),Q.Zb(F.a),Q.Zb(V.a))},o.\u0275prov=Q.Lb({token:o,factory:o.\u0275fac,providedIn:"root"}),o)},"Y+XQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var i=n("fXoL"),a=n("ofXK"),o=n("0njA");function r(e,t){if(1&e&&i.Qb(0,"app-icon",3),2&e){var n=i.gc();i.mc("icon",n.icon)}}var s=function(e){return e.Blue="blue",e.Purple="purple",e.Green="green",e.Gray="gray",e}({}),c=function(){var e=function(){function e(){h(this,e),this.label="",this.icon="",this.color=s.Blue}return b(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-tag"]],inputs:{label:"label",icon:"icon",color:"color"},decls:4,vars:3,consts:[[1,"tag",3,"ngClass"],["class","mr-2",3,"icon",4,"ngIf"],[1,"text-nowrap"],[1,"mr-2",3,"icon"]],template:function(e,t){1&e&&(i.Vb(0,"span",0),i.Nc(1,r,1,1,"app-icon",1),i.Vb(2,"span",2),i.Pc(3),i.Ub(),i.Ub()),2&e&&(i.mc("ngClass","tag--"+t.color),i.Db(1),i.mc("ngIf",t.icon),i.Db(2),i.Qc(t.label))},directives:[a.m,a.p,o.a],styles:[".tag[_ngcontent-%COMP%]{align-items:center;border-radius:10px;color:#fff;display:inline-flex;font-size:10px;height:20px;padding:0 8px;text-transform:uppercase}.tag[_ngcontent-%COMP%], .tag--blue[_ngcontent-%COMP%]{background-color:#2d72dc}.tag--gray[_ngcontent-%COMP%]{background-color:#374a68}.tag--green[_ngcontent-%COMP%]{background-color:#3f7d84}.tag--purple[_ngcontent-%COMP%]{background-color:#925bc3}"],changeDetection:0}),e}()},Y7Bv:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Drawer="drawer",e.Column="column",e}({})},Y8QC:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("XNiG"),a=n("xgIS"),o=n("1G5W"),r=n("fXoL"),s=n("ofXK"),c=["labelEl"];function u(e,t){if(1&e&&(r.Vb(0,"div",5),r.Pc(1),r.Ub()),2&e){var n=r.gc();r.Hb("text-uppercase",n.uppercase),r.Db(1),r.Rc(" ",n.label," ")}}var l=["*",[["","form-field-help",""]]],p=function(e,t,n,i){return{"field--light":e,"field--dark":t,"field--inline":n,"field--compact":i}},d=["*","[form-field-help]"],g=function(){var e=function(){function e(){h(this,e),this.display="block",this.theme="dark",this.uppercase=!0,this.isCompact=!1,this.ngUnsubscribe=new i.a}return b(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.labelEl.nativeElement.querySelectorAll("[contenteditable]").length>0&&Object(a.a)(this.labelEl.nativeElement,"click").pipe(Object(o.a)(this.ngUnsubscribe)).subscribe((function(e){e.preventDefault()}))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Jb({type:e,selectors:[["app-form-field"]],viewQuery:function(e,t){var n;(1&e&&r.Jc(c,!0),2&e)&&(r.xc(n=r.dc())&&(t.labelEl=n.first))},inputs:{label:"label",display:"display",theme:"theme",uppercase:"uppercase",isCompact:"isCompact"},ngContentSelectors:d,decls:8,vars:8,consts:[["data-test","formField",1,"field",3,"ngClass"],["labelEl",""],["class","field__label text-10","data-test","formFieldLabel",3,"text-uppercase",4,"ngIf"],[1,"field__input"],[1,"field__help","text-dim","text-11"],["data-test","formFieldLabel",1,"field__label","text-10"]],template:function(e,t){1&e&&(r.lc(l),r.Vb(0,"div",0),r.Vb(1,"label",null,1),r.Nc(3,u,2,3,"div",2),r.Vb(4,"div",3),r.kc(5),r.Vb(6,"div",4),r.kc(7,1),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&e&&(r.mc("ngClass",r.sc(3,p,"light"===t.theme,"dark"===t.theme,"inline"===t.display,t.isCompact)),r.Db(1),r.Eb("aria-label",t.label),r.Db(2),r.mc("ngIf",t.label))},directives:[s.m,s.p],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.field[_ngcontent-%COMP%]{padding-bottom:16px;display:block;width:100%}.field__input[_ngcontent-%COMP%]{margin-top:4px}.field--light[_ngcontent-%COMP%]   .field__label[_ngcontent-%COMP%]{color:#374a68}.field--dark[_ngcontent-%COMP%]   .field__label[_ngcontent-%COMP%]{color:#96a8c0}.field--inline[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:auto}.field--inline[_ngcontent-%COMP%]   .field__label[_ngcontent-%COMP%]{margin-right:8px}.field--inline[_ngcontent-%COMP%]   .field__input[_ngcontent-%COMP%]{margin-top:auto}.field--compact[_ngcontent-%COMP%]{padding-bottom:0}.field__help[_ngcontent-%COMP%]:not(:empty){padding-top:8px}"],changeDetection:0}),e}()},YLgZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i,a,o=n("AcyG"),r=function e(){h(this,e)},s=n("TATr"),c=n("937/"),u=n("XAAL"),l=n("vkgz"),p=n("Mh2x"),d=n("fXoL"),g=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m={storedCameras:{},cameraMotion:new u.a,panMode:"rotate",zoomed:!1,lockCamera:!1,cameraFlyTo:void 0,chapterCameraEnabled:!0},y=((a=i=function(){function e(t,n){h(this,e),this.cameraService=t,this.store=n}return b(e,[{key:"storeCamera",value:function(e,t){var n=t.camera||this.cameraService.getCamera(),i=e.getState().storedCameras;i[t.id]=Object.assign({},n),e.patchState({storedCameras:Object.assign({},i)})}},{key:"clearCamera",value:function(e,t){var n=e.getState().storedCameras;delete n[t.id],e.patchState({storedCameras:Object.assign({},n)})}},{key:"setCameraFlyTo",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.cameraFlyTo=t.camera})))}},{key:"applyCameraPatch",value:function(e,t){var n=immer.applyPatches(e.getState(),t.patches);e.patchState(n);var i=void 0===n.cameraFlyTo?this.store.selectSnapshot(p.a.getChapterCamera):n.cameraFlyTo;e.dispatch(new s.l(i,!0,1))}},{key:"moveCamera",value:function(e,t){e.patchState({cameraMotion:Object.assign({},t.cameraMotion)})}},{key:"resetCamera",value:function(e,t){return this.cameraService.resetCamera().pipe(Object(l.a)((function(){e.patchState({cameraMotion:new u.a})})))}},{key:"zoomCamera",value:function(e,t){var n=e.getState().cameraMotion;n.zoom=t.value,e.patchState({cameraMotion:Object.assign({},n)})}},{key:"panCameraX",value:function(e,t){var n=e.getState().cameraMotion;n.panX=t.value,e.patchState({cameraMotion:Object.assign({},n)})}},{key:"panCameraY",value:function(e,t){var n=e.getState().cameraMotion;n.panY=t.value,e.patchState({cameraMotion:Object.assign({},n)})}},{key:"rotateCameraX",value:function(e,t){var n=e.getState().cameraMotion;e.patchState({cameraMotion:Object.assign(Object.assign({},n),{rotateX:t.value})})}},{key:"rotateCameraY",value:function(e,t){var n=e.getState().cameraMotion;n.rotateY=t.value,e.patchState({cameraMotion:Object.assign({},n)})}},{key:"SetCameraMode",value:function(e,t){e.patchState({panMode:t.mode})}},{key:"setZoomed",value:function(e,t){e.patchState({zoomed:t.zoomed})}},{key:"lockCamera",value:function(e,t){e.patchState({lockCamera:t.lock})}},{key:"setChapterCameraEnabled",value:function(e,t){this.cameraService.setChapterCameraEnabled(t.enabled),e.patchState({chapterCameraEnabled:t.enabled})}}],[{key:"getStoredCamera",value:function(e){return Object(o.i)([i],(function(t){return t.storedCameras[e]||null}))}},{key:"getCameraMotion",value:function(e){return e.cameraMotion}},{key:"getPanMode",value:function(e){return e.panMode}},{key:"getZoomed",value:function(e){return e.zoomed}},{key:"getLockCamera",value:function(e){return e.lockCamera}},{key:"getChapterCameraEnabled",value:function(e){return e.chapterCameraEnabled}}]),e}()).\u0275fac=function(e){return new(e||a)(d.Zb(c.a),d.Zb(o.h))},a.\u0275prov=d.Lb({token:a,factory:a.\u0275fac}),g([Object(o.a)(s.r),f("design:type",Function),f("design:paramtypes",[Object,s.r]),f("design:returntype",void 0)],a.prototype,"storeCamera",null),g([Object(o.a)(s.b),f("design:type",Function),f("design:paramtypes",[Object,s.b]),f("design:returntype",void 0)],a.prototype,"clearCamera",null),g([Object(o.a)(s.m),f("design:type",Function),f("design:paramtypes",[Object,s.m]),f("design:returntype",void 0)],a.prototype,"setCameraFlyTo",null),g([Object(o.a)(s.a),f("design:type",Function),f("design:paramtypes",[Object,s.a]),f("design:returntype",void 0)],a.prototype,"applyCameraPatch",null),g([Object(o.a)(s.d),f("design:type",Function),f("design:paramtypes",[Object,s.d]),f("design:returntype",void 0)],a.prototype,"moveCamera",null),g([Object(o.a)(s.h),f("design:type",Function),f("design:paramtypes",[Object,s.h]),f("design:returntype",void 0)],a.prototype,"resetCamera",null),g([Object(o.a)(s.s),f("design:type",Function),f("design:paramtypes",[Object,s.s]),f("design:returntype",void 0)],a.prototype,"zoomCamera",null),g([Object(o.a)(s.f),f("design:type",Function),f("design:paramtypes",[Object,s.f]),f("design:returntype",void 0)],a.prototype,"panCameraX",null),g([Object(o.a)(s.g),f("design:type",Function),f("design:paramtypes",[Object,s.g]),f("design:returntype",void 0)],a.prototype,"panCameraY",null),g([Object(o.a)(s.j),f("design:type",Function),f("design:paramtypes",[Object,s.j]),f("design:returntype",void 0)],a.prototype,"rotateCameraX",null),g([Object(o.a)(s.k),f("design:type",Function),f("design:paramtypes",[Object,s.k]),f("design:returntype",void 0)],a.prototype,"rotateCameraY",null),g([Object(o.a)(s.n),f("design:type",Function),f("design:paramtypes",[Object,s.n]),f("design:returntype",void 0)],a.prototype,"SetCameraMode",null),g([Object(o.a)(s.q),f("design:type",Function),f("design:paramtypes",[Object,s.q]),f("design:returntype",void 0)],a.prototype,"setZoomed",null),g([Object(o.a)(s.c),f("design:type",Function),f("design:paramtypes",[Object,s.c]),f("design:returntype",void 0)],a.prototype,"lockCamera",null),g([Object(o.a)(s.p),f("design:type",Function),f("design:paramtypes",[Object,s.p]),f("design:returntype",void 0)],a.prototype,"setChapterCameraEnabled",null),g([Object(o.f)(),f("design:type",Function),f("design:paramtypes",[r]),f("design:returntype",void 0)],a,"getCameraMotion",null),g([Object(o.f)(),f("design:type",Function),f("design:paramtypes",[r]),f("design:returntype",void 0)],a,"getPanMode",null),g([Object(o.f)(),f("design:type",Function),f("design:paramtypes",[r]),f("design:returntype",void 0)],a,"getZoomed",null),g([Object(o.f)(),f("design:type",Function),f("design:paramtypes",[r]),f("design:returntype",void 0)],a,"getLockCamera",null),g([Object(o.f)(),f("design:type",Function),f("design:paramtypes",[r]),f("design:returntype",void 0)],a,"getChapterCameraEnabled",null),a=i=g([Object(o.g)({name:"engineCamera",defaults:m})],a))},YQYg:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var i=function e(){h(this,e)},a=function e(){h(this,e)},o=function e(){h(this,e)}},"Yg7+":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var i=[{icon:"search",tag:"Heart",params:{categoryId:"all",query:"Heart",type:"Category"}},{icon:"search",tag:"Brain",params:{categoryId:"all",query:"Brain",type:"Category"}},{icon:"search",tag:"Cardiology",params:{categoryId:"Cardiology",type:"Category"}},{icon:"search",tag:"COVID-19",params:{categoryId:"all",query:"COVID-19",type:"Category"}},{icon:"search",tag:"Treatments",params:{categoryId:"all",query:"Treatments",type:"Category"}},{icon:"search",tag:"Eye",params:{categoryId:"all",query:"Eye",type:"Category"}},{icon:"search",tag:"Skull",params:{categoryId:"all",query:"Skull",type:"Category"}},{icon:"search",tag:"Nervous System",params:{categoryId:"all",query:"Nervous System",type:"Category"}},{icon:"search",tag:"Muscles",params:{categoryId:"all",query:"Muscles",type:"Category"}},{icon:"search",tag:"Skeleton",params:{categoryId:"all",query:"Skeleton",type:"Category"}},{icon:"search",tag:"Digestive System",params:{categoryId:"all",query:"Digestive System",type:"Category"}}],a=["assets/images/hero/biodigital-human-muscular-system.jpg","assets/images/hero/biodigital-human-cardiovascular-system.jpg","assets/images/hero/biodigital-human-nervous-system.jpg","assets/images/hero/biodigital-human-multiple-systems.jpg"],o=6e3},"Yl/Z":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("qpAl"),o=n.n(a),r=n("xgIS"),s=n("VRyK");!function(e){function t(e){a()&&(e||(e=document.body),o.a.prefixed("requestFullscreen",e)())}function n(){a()&&o.a.prefixed("exitFullscreen",document)()}function i(){return o.a.fullscreen&&o.a.prefixed("fullscreenEnabled",document)}function a(){return!!i()||(console.warn("Fullscreen is not enabled"),!1)}function c(){return o.a.prefixed("fullscreenElement",document)}e.toggleFullscreen=function(e){null===c()?t(e):n()},e.requestFullscreen=t,e.exitFullscreen=n,e.canFullscreen=i,e.checkFullscreenSupport=a,e.getFullscreenElement=c,e.isFullscreen=function(){return null!=c()},e.onFullscreenChange=function(){var e="mozfullscreenchange webkitfullscreenchange MSFullscreenChange fullscreenchange".split(" ").map((function(e){return Object(r.a)(document.body,e)}));return Object(s.a).apply(void 0,u(e))}}(i||(i={}))},YpC8:function(t,n,i){"use strict";i.d(n,"a",(function(){return Z}));var a=i("AcyG"),o=i("YQYg"),r=i("Vv7R"),s=i("MuXT"),c=i("Mh2x"),l=i("q8pu"),d=i("LvDl"),g=i("7b4e");function f(t,n,i){var a=function(t,n){var i,a={},o=e(t);try{for(o.s();!(i=o.n()).done;)for(var r=i.value,s=Object.keys(n[r]),c=0,u=s;c<u.length;c++){a[u[c]]=!1}}catch(l){o.e(l)}finally{o.f()}return a}(n,i);return t.map((function(e){return Object.assign(Object.assign({},e),{showObjects:Object.assign(Object.assign({},e.showObjects),a),selectObjects:Object.assign(Object.assign({},e.selectObjects),a),pickThroughObjects:Object.assign(Object.assign({},e.pickThroughObjects),a)})}))}var m=i("ZR5G"),y=i("ThaW");function v(e,t){return e.map((function(e){if(!Object(d.isEmpty)(e.lights))return e;var n={libraries:u(t),lights:[]};return Object.assign(Object.assign({},e),{lights:n})}))}var k=i("FKtB");function O(e){return e.customData&&e.customData.particleSystems?e.customData.particleSystems.reduce((function(e,t){return e[k.a.getParticleIdRoot(t.id)]=t.id,e}),{}):{}}function S(e,t){return e.customData&&e.customData.particleSystems?e.customData.particleSystems.map((function(e){var n=k.a.getParticleIdRoot(e.id);return Object.assign(Object.assign({},e),{id:t[n]})})):[]}function x(e,t){return e.map((function(e){return e.customData&&e.customData.particleSystems&&(e.customData.particleSystems=e.customData.particleSystems.map((function(e){return t[k.a.getParticleIdRoot(e)]}))),e}))}function C(e,t){return e.map((function(e){return e.id})).reduce((function(n,i){return e.some((function(e){return e.id===i&&Object(d.get)(e,"customData.particleSystems",[]).length>0}))&&(n[i]=t),n}),{})}var w,j,P=i("Wd1f"),_=i("AytR"),M=i("ZJ6O"),I=i("0FUJ"),T=i("gm/O"),U=i("eW6i"),L=i("gQBz"),z=i("g408"),A=i("0E12"),F=i("WUhe"),D=i("Cfvw"),E=i("cp0P"),N=i("DTUA"),R=i("3E0/"),V=i("Xk3F"),B=i("Vrox"),H=i("VJvM"),Q=i("h8op"),G=i("fXoL"),W=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},q=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},X={loading:!1,incoming:{id:void 0,type:void 0},storyId:void 0,storyType:void 0,loadingChunk:null,loadChunks:[],loadChunksRemaining:[],thumbnailLookup:[]},Z=((j=w=function(){function t(e,n,i,a,o){h(this,t),this.store=e,this.storyService=n,this.engineService=i,this.serializeModuleService=a,this.storageService=o,this.reload=_.a.native}return b(t,[{key:"setStoryText",value:function(e,t){var n=e.getState().story;n&&e.patchState({story:Object.assign(Object.assign({},n),{displayName:t.displayName})})}},{key:"setStoryTags",value:function(e,t){var n=t.tags,i=e.getState().story;i&&e.patchState({story:Object.assign(Object.assign({},i),{tags:n})})}},{key:"setStoryLightLibs",value:function(e,t){var n=e.getState().story;n&&e.patchState({story:Object.assign(Object.assign({},n),{assetLibraries:Object.assign(Object.assign({},n.assetLibraries),{lights:t.lightLibs})})})}},{key:"setStory",value:function(e,t){e.patchState({story:t.story})}},{key:"SetStoryId",value:function(e,t){e.patchState({storyId:t.id})}},{key:"setIncomingStory",value:function(e,t){var n=e.getState(),i=t.id,a=t.type,o=t.reset;i!==n.storyId||o?e.patchState({incoming:{id:i,type:a}}):o&&e.dispatch(new r.a(t.id,n.story,t.type))}},{key:"loadStory",value:function(e,t){var n=this;(t.preview?Object(D.a)(this.storageService.getDatabaseItem(N.a.PreviewStory)):this.storyService.getStory(t.id,t.type,t.lang)).subscribe((function(n){e.dispatch(new r.i(n,t.id,t.type))}),(function(){!0===n.reload?(n.reload=!1,n.loadStory(e,t)):e.dispatch(new r.h(t.id,t.type))}))}},{key:"loadStorySuccess",value:function(e,t){this.storyService.unloadStory(null).pipe(Object(R.a)(0)).subscribe((function(){e.dispatch(new r.a(t.id,t.story,t.type))}))}},{key:"buildStoryWorkflow",value:function(e,t,n,i){var a=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Map;this.storyService.buildStory(t,n,!0).subscribe((function(c){var p=a.storyService.getStoryChapters(t,i),g=[];p.forEach((function(e){g=[].concat(u(g),u(e.labels))}));var h=a.storyService.getLoadConfig(t,o),f=a.storyService.getStoryLoadChunks(t,h);e.patchState({storyId:t,story:n,loadChunks:f,loadChunksRemaining:f,incoming:{id:void 0,type:void 0}});var b=a.engineService.getSceneGraph(Human.scene.rootObjects),m=p.reduce((function(e,t){return e[t.id]=Object(L.a)(b,t.showObjects,t.pickThroughObjects,t.synchronization),e}),{});e.dispatch(new T.a.InitNodeState(m)),e.dispatch(new T.a.SetActiveChapter(p[o].id)),e.dispatch(new H.H(p)),e.dispatch(new Q.a(s)),e.dispatch(new l.q(g)),e.dispatch(new H.p(p[o]));var y=Object(d.get)(n,"tweenParticleLookup",{}),v=Object(d.get)(n,"customData.particleSystems",[]),k=p.reduce((function(e,t){return e[t.id]=Object(d.get)(t,"customData.particleSystems",[]),e}),{});e.dispatch(new A.a.SetParticleState(v,k,y)),e.dispatch(new F.a.ResetQuizState),n.quizSettings&&e.dispatch(new F.a.SetQuizSettings(n.quizSettings));var O=Object(V.b)(p);e.dispatch(new F.a.SetQuestions(O)),e.dispatch(new r.b),e.dispatch(new r.f)}))}},{key:"importStorySuccess",value:function(t,n){var i=this,a=t.getState(),o=a.storyType,r=a.storyId,s=new I.a,l=this.store.selectSnapshot(w.getStory),h=this.store.selectSnapshot(c.a.getStoryChapters),b=z.a.makeChapterIdMap(h,!1),j=this.serializeModuleService.serialize({},s,!1,l,h,b).story,M=function(t,n,i,a){var o,r,s,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m.a.Bookmark,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.a.idWithPrefix,h=function(t,n){var i=function(e){return void 0!==e.objectId},a=p(Object(d.partition)(t,i),2),o=a[0],r=a[1],s=p(Object(d.partition)(n,i),2),c=s[0],l=function(t,n){return n.reduce((function(n,i){var a,o=e(t);try{for(o.s();!(a=o.n()).done;){var r=a.value;Object(d.isEqual)(r,i)||n.push(i)}}catch(s){o.e(s)}finally{o.f()}return n}),t)}(r,s[1]),g=function(t,n){var i=t.reduce((function(e,t){return e[t.objectId]=t,e}),{}),a=n.reduce((function(t,n){if(void 0===t.nodes[n.objectId])return t.nodes[n.objectId]=n,t;if(!Object(d.isEqual)(n,t.nodes[n.objectId])){var i=function(t,n){var i={},a={};return{root:function t(n,o){if(n.objectId!==o.objectId)return i[o.objectId]=!0,[n,o];if(void 0===n.objects&&o.objects){var r,s=e(o.objects);try{for(s.s();!(r=s.n()).done;){var c=r.value;i[c.objectId]=!0}}catch(O){s.e(O)}finally{s.f()}return[Object.assign({},o)]}if(n.objects&&void 0===o.objects){var u,l=e(n.objects);try{for(l.s();!(u=l.n()).done;){var p=u.value;a[p.objectId]=!0}}catch(O){l.e(O)}finally{l.f()}return[Object.assign({},n)]}if(void 0===n.objects&&void 0===o.objects)return[Object.assign({},n)];var g,h=[],f=e(n.objects);try{var b=function(){var e=g.value,n=o.objects.find((function(t){return t.objectId===e.objectId}));n?h.push(t(e,n)):(a[e.objectId]=!0,h.push(e))};for(f.s();!(g=f.n()).done;)b()}catch(O){f.e(O)}finally{f.f()}var m,y=e(o.objects);try{var v=function(){var e=m.value;n.objects.find((function(t){return t.objectId===e.objectId}))||(i[e.objectId]=!0,h.push(e))};for(y.s();!(m=y.n()).done;)v()}catch(O){y.e(O)}finally{y.f()}var k=Object.assign({},n);return k.objects=Object(d.flatten)(h),[k]}(t,n),objectIdsUniqueToNew:i,objectIdsUniqueToOriginal:a}}(t.nodes[n.objectId],n);t.nodes[n.objectId]=i.root[0],t.graphsMerged.push(n.objectId),t.objectIdsUniqueToNew[n.objectId]=i.objectIdsUniqueToNew,t.objectIdsUniqueToOriginal[n.objectId]=i.objectIdsUniqueToOriginal}return t}),{nodes:i,graphsMerged:[],objectIdsUniqueToNew:{},objectIdsUniqueToOriginal:{}});return{newSceneGraph:Object.keys(a.nodes).reduce((function(e,t){return e.push(a.nodes[t]),e}),[]),graphsMerged:a.graphsMerged,objectIdsUniqueToNew:a.objectIdsUniqueToNew,objectIdsUniqueToOriginal:a.objectIdsUniqueToOriginal}}(o,c),h=g.newSceneGraph,f=g.graphsMerged,b=g.objectIdsUniqueToNew,m=g.objectIdsUniqueToOriginal;return{sceneGraph:[].concat(u(l),u(h)),graphsMerged:f,objectIdsUniqueToNew:b,objectIdsUniqueToOriginal:m}}(t.sceneGraph,i.sceneGraph),b=h.sceneGraph,w=h.graphsMerged,j=h.objectIdsUniqueToNew,P=h.objectIdsUniqueToOriginal,_=(o=t.assetLibraries,r=i.assetLibraries,{lights:(s=function(e,t){return Object(d.uniq)([].concat(u(e),u(t)))})(o.lights,r.lights),tweens:s(o.tweens,r.tweens),reflections:s(o.reflections,r.reflections)}),M=function(e,t,n,i){e=e||{},t=t||{};var a=function(e,t){return t.includes("/")?t:"".concat(function(e){return Object(y.a)(e)===m.a.Bookmark?e:e.split("/").pop()}(e),"/").concat(t)};return Object.assign(Object.assign({},Object(d.mapKeys)(e,(function(e,t){return a(n,t)}))),Object(d.mapKeys)(t,(function(e,t){return a(i,t)})))}(t.reflections,i.reflections,n,a),I=function(e,t,n){e=e||{},t=t||{};var i=Object.keys(t).reduce((function(e,i){var a=n("color-recipe-"+i);return e.newColorRecipeIds[i]=a,e.colorRecipes[a]=t[i],e}),{colorRecipes:{},newColorRecipeIds:{}});return{colorRecipes:Object.assign(Object.assign({},e),i.colorRecipes),newColorRecipeIds:i.newColorRecipeIds}}(t.colorRecipes,i.colorRecipes,l),T=I.colorRecipes,U=I.newColorRecipeIds,L=v(t.chapters,t.assetLibraries.lights),z=v(i.chapters,i.assetLibraries.lights),A=function(e,t,n,i,a){var o=O(e),r=Object.values(o),s=O(t);for(var c in s)if(s.hasOwnProperty(c)&&r.includes(s[c])){var l=k.a.generateParticleId(c,a);s[c]=l}var p=[].concat(u(S(e,o)),u(S(t,s))),g=x(n,o),h=x(i,s),f=Object.assign(Object.assign({},C(g,o)),C(h,s));return{mergedParticles:p,currentChapters:g,importedChapters:h,tweenParticleLookup:Object(d.pickBy)(f,(function(e,t){return!Object(d.isEmpty)(e)}))}}(t,i,f(L,w,j),f(z,w,P).map((function(e){return Object.assign(Object.assign({},e),{id:l("chapter")})})),l),F=function(e,t){return e.map((function(e){if(Object(d.isEmpty)(e.colorRecipeObjects))return e;var n=Object.keys(e.colorRecipeObjects).reduce((function(n,i){return n[t[i]]=e.colorRecipeObjects[i],n}),{});return e.colorRecipeObjects=n,e}))}(A.importedChapters,U),D=[].concat(u(A.currentChapters),u(F)),E=Object.assign(Object.assign({},t.customData),{particleSystems:A.mergedParticles}),N="module"===c?t.tags:[];return Object.assign(Object.assign({},t),{assetLibraries:_,chapters:D,sceneGraph:b,customData:E,tags:N,reflections:M,colorRecipes:T,stateId:Object(d.uniq)([].concat(u(t.stateId),u(i.stateId))),tweenParticleLookup:A.tweenParticleLookup})}(j,r,n.story,n.id,_.a.exportType),T=M.chapters.slice(j.chapters.length).reduce((function(e,t,i){return e[n.story.chapters[i].id]=t.id,e}),{}),U=n.story.chapters.reduce((function(e,t){var i=t.thumbnails?t.thumbnails.large:P.a.generateLegacyThumbnail(n.id,t.id).large,a=P.a.makeFreshThumbnail(r,T[t.id],i);return e.push(a),e}),[]);Object(E.a)(U).subscribe((function(e){var n=i.store.selectSnapshot(B.a.getRegisteredThumbnails);e.forEach((function(e){n.set(e.chapterId,e)})),i.storyService.unloadStory(null,!0).subscribe((function(){i.buildStoryWorkflow(t,r,M,o,M.chapters.length-1,n)}))}))}},{key:"buildStory",value:function(e,t){t.story.chapters.map((function(e,n){return{newChapterId:e.id,originalChapterId:e.id,originalStoryId:t.id}}));var n=P.a.getChapterThumbnails(t.id,t.story.chapters);this.buildStoryWorkflow(e,t.id,t.story,t.type,t.chapterIdx||0,n)}},{key:"loadStoryChunk",value:function(e){var t=e.getState().loadChunksRemaining[0];t&&(e.patchState({loadingChunk:t}),this.storyService.loadStoryChunk(t,(function(){e.dispatch([new r.g(t),new r.f])})))}},{key:"reorderLoadChunks",value:function(e,t){var n=e.getState().loadChunksRemaining,i=p(Object(d.partition)(n,(function(e){return e.chapterId===t.chapterId})),2),a=i[0],o=i[1];e.patchState({loadChunksRemaining:[].concat(u(a),u(o))})}},{key:"loadStoryChunkSuccess",value:function(e,t){var n=e.getState().loadChunksRemaining.filter((function(e){return e.chunkId!==t.chunk.chunkId}));e.patchState({loadingChunk:null,loadChunksRemaining:n}),e.dispatch(new H.D(t.chunk.chapterId,t.chunk.readyState))}},{key:"synchronizeChapters",value:function(e){var t=this.store.selectSnapshot(c.a.getStoryChapters),n=e.getState().story;e.patchState({story:Object.assign(Object.assign({},n),{chapters:u(t)})})}},{key:"importStory",value:function(e,t){this.storyService.getStory(t.id,t.type,t.lang).subscribe((function(n){e.dispatch(new r.d(n,t.id,t.type))}))}},{key:"resetStory",value:function(e){e.setState(X)}},{key:"mergeBridgeModuleSuccess",value:function(e,t){var n=this,i=t.story,a=e.getState(),o=this.store.selectSnapshot(c.a.getSelectedChapterIndex),r=P.a.getChapterThumbnails(a.storyId,i.chapters);this.storyService.unloadStory(null,!0).subscribe((function(){n.buildStoryWorkflow(e,a.storyId,i,m.a.Module,o,r)}))}}],[{key:"getStory",value:function(e){return e.story}},{key:"getStoryId",value:function(e){return e.storyId}},{key:"getLoadingChunk",value:function(e){return e.loadingChunk}},{key:"getLoadChunks",value:function(e){return e.loadChunks}},{key:"getLoadChunksRemaining",value:function(e){return e.loadChunksRemaining}},{key:"getStoryInfo",value:function(e){return{id:e.storyId,type:e.storyType}}},{key:"getIncomingStoryInfo",value:function(e){return e.incoming}},{key:"getStoryTags",value:function(e){return Object(d.get)(e,"story.tags",[])}}]),t}()).\u0275fac=function(e){return new(e||j)(G.Zb(a.h),G.Zb(s.a),G.Zb(U.a),G.Zb(M.a),G.Zb(N.d))},j.\u0275prov=G.Lb({token:j,factory:j.\u0275fac}),W([Object(a.a)(r.r),q("design:type",Function),q("design:paramtypes",[Object,r.r]),q("design:returntype",void 0)],j.prototype,"setStoryText",null),W([Object(a.a)(r.q),q("design:type",Function),q("design:paramtypes",[Object,r.q]),q("design:returntype",void 0)],j.prototype,"setStoryTags",null),W([Object(a.a)(r.p),q("design:type",Function),q("design:paramtypes",[Object,r.p]),q("design:returntype",void 0)],j.prototype,"setStoryLightLibs",null),W([Object(a.a)(r.n),q("design:type",Function),q("design:paramtypes",[Object,r.n]),q("design:returntype",void 0)],j.prototype,"setStory",null),W([Object(a.a)(r.o),q("design:type",Function),q("design:paramtypes",[Object,r.o]),q("design:returntype",void 0)],j.prototype,"SetStoryId",null),W([Object(a.a)(r.m),q("design:type",Function),q("design:paramtypes",[Object,r.m]),q("design:returntype",void 0)],j.prototype,"setIncomingStory",null),W([Object(a.a)(r.e),q("design:type",Function),q("design:paramtypes",[Object,r.e]),q("design:returntype",void 0)],j.prototype,"loadStory",null),W([Object(a.a)(r.i),q("design:type",Function),q("design:paramtypes",[Object,r.i]),q("design:returntype",void 0)],j.prototype,"loadStorySuccess",null),W([Object(a.a)(r.d),q("design:type",Function),q("design:paramtypes",[Object,r.d]),q("design:returntype",void 0)],j.prototype,"importStorySuccess",null),W([Object(a.a)(r.a),q("design:type",Function),q("design:paramtypes",[Object,r.a]),q("design:returntype",void 0)],j.prototype,"buildStory",null),W([Object(a.a)(r.f),q("design:type",Function),q("design:paramtypes",[Object]),q("design:returntype",void 0)],j.prototype,"loadStoryChunk",null),W([Object(a.a)(r.k),q("design:type",Function),q("design:paramtypes",[Object,r.k]),q("design:returntype",void 0)],j.prototype,"reorderLoadChunks",null),W([Object(a.a)(r.g),q("design:type",Function),q("design:paramtypes",[Object,r.g]),q("design:returntype",void 0)],j.prototype,"loadStoryChunkSuccess",null),W([Object(a.a)(r.s),q("design:type",Function),q("design:paramtypes",[Object]),q("design:returntype",void 0)],j.prototype,"synchronizeChapters",null),W([Object(a.a)(r.c),q("design:type",Function),q("design:paramtypes",[Object,r.c]),q("design:returntype",void 0)],j.prototype,"importStory",null),W([Object(a.a)(r.l),q("design:type",Function),q("design:paramtypes",[Object]),q("design:returntype",void 0)],j.prototype,"resetStory",null),W([Object(a.a)(r.j),q("design:type",Function),q("design:paramtypes",[Object,Object]),q("design:returntype",void 0)],j.prototype,"mergeBridgeModuleSuccess",null),W([Object(a.f)(),q("design:type",Function),q("design:paramtypes",[o.c]),q("design:returntype",void 0)],j,"getStory",null),W([Object(a.f)(),q("design:type",Function),q("design:paramtypes",[o.c]),q("design:returntype",void 0)],j,"getStoryId",null),W([Object(a.f)(),q("design:type",Function),q("design:paramtypes",[o.c]),q("design:returntype",void 0)],j,"getLoadingChunk",null),W([Object(a.f)(),q("design:type",Function),q("design:paramtypes",[o.c]),q("design:returntype",void 0)],j,"getLoadChunks",null),W([Object(a.f)(),q("design:type",Function),q("design:paramtypes",[o.c]),q("design:returntype",void 0)],j,"getLoadChunksRemaining",null),W([Object(a.f)(),q("design:type",Function),q("design:paramtypes",[o.c]),q("design:returntype",void 0)],j,"getStoryInfo",null),W([Object(a.f)(),q("design:type",Function),q("design:paramtypes",[o.c]),q("design:returntype",void 0)],j,"getIncomingStoryInfo",null),W([Object(a.f)(),q("design:type",Function),q("design:paramtypes",[o.c]),q("design:returntype",void 0)],j,"getStoryTags",null),j=w=W([Object(a.g)({name:"story",defaults:X})],j))},YsyH:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ofXK"),a=n("vvyD"),o=n("PCNd"),r=n("3Pt+"),s=n("fXoL"),c=function(){var e=function e(){h(this,e)};return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,o.a,r.z]]}),e}()},Z48A:function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var i,a=n("R0Ic"),o=n("fXoL"),r=n("AcyG"),s=n("LvDl"),c=n("XNiG"),u=n("HDdC"),l=n("1G5W"),p=n("o6VQ"),d=n("AytR"),g=n("J9/X"),f=n("GCmh"),m=n("tyNb"),y=n("ofXK"),v=["app-pill-button",""],k=function(e){return{"pill-button--selected":e}},O=["*"],S=((i=function(){function e(){h(this,e),this.selected=!1}return b(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=o.Jb({type:i,selectors:[["button","app-pill-button",""],["a","app-pill-button",""]],inputs:{selected:"selected"},attrs:v,ngContentSelectors:O,decls:2,vars:3,consts:[[1,"pill-button",3,"ngClass"]],template:function(e,t){1&e&&(o.lc(),o.Vb(0,"span",0),o.kc(1),o.Ub()),2&e&&o.mc("ngClass",o.pc(1,k,t.selected))},directives:[y.m],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}[_nghost-%COMP%]{border-color:transparent;background:none;border-width:0;padding:0;margin:0;border-radius:4px;outline:0 none}[_nghost-%COMP%]:not([disabled]):hover{cursor:pointer}[_nghost-%COMP%]:focus   .pill-button[_ngcontent-%COMP%]{outline:2px solid #2d72dc!important}[_nghost-%COMP%]:disabled   .pill-button[_ngcontent-%COMP%], [_nghost-%COMP%]:disabled:hover   .pill-button[_ngcontent-%COMP%]{background-color:#f9fafd;color:#96a8c0}.pill-button[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em;font-family:Inter UI,sans-serif;font-weight:500;color:#374a68;display:flex;align-items:center;justify-content:center;background-color:#eaeff5;border-radius:100px;padding:8px 16px;transition:background-color .12s,color .12s;width:100%}.pill-button[_ngcontent-%COMP%]:hover{background-color:#d7e0ea}.pill-button--selected[_ngcontent-%COMP%], .pill-button--selected[_ngcontent-%COMP%]:hover{background-color:#2d72dc;color:#fff}"],changeDetection:0}),i),x=n("0njA"),C=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function w(e,t){if(1&e){var n=o.Wb();o.Vb(0,"li",9),o.Vb(1,"button",10),o.cc("click",(function(){o.Cc(n);var e=t.$implicit,i=o.gc().$implicit,a=o.gc(2);return a.setTag(i.title,a.activeTags[i.title]===e?"":e)})),o.hc(2,"async"),o.Pc(3),o.hc(4,"titlecase"),o.Ub(),o.Ub()}if(2&e){var i=t.$implicit,a=o.gc().$implicit,r=o.gc(2),s=null;o.Db(1),o.mc("disabled",!(null!=(s=o.ic(2,3,r.availableTags$))&&s.includes(i)))("selected",r.activeTags[a.title]===i),o.Db(2),o.Rc(" ",o.ic(4,5,i)," ")}}function j(e,t){if(1&e&&(o.Vb(0,"div",5),o.Vb(1,"h2",6),o.Pc(2),o.Ub(),o.Vb(3,"ul",7),o.Nc(4,w,5,7,"li",8),o.Ub(),o.Ub()),2&e){var n=t.$implicit;o.Db(2),o.Qc(n.title),o.Db(2),o.mc("ngForOf",n.tags)}}function P(e,t){if(1&e&&(o.Vb(0,"div",3),o.Nc(1,j,5,2,"div",4),o.Ub()),2&e){var n=o.gc();o.mc("@show",void 0),o.Db(1),o.mc("ngForOf",n.tagGroups)}}function _(e,t){if(1&e){var n=o.Wb();o.Vb(0,"li",9),o.Vb(1,"button",14),o.cc("click",(function(){o.Cc(n);var e=o.gc(2).$implicit;return o.gc(2).setTag(e.title,"")})),o.Vb(2,"span",15),o.Pc(3),o.hc(4,"titlecase"),o.Ub(),o.Qb(5,"app-icon",16),o.Ub(),o.Ub()}if(2&e){var i=o.gc().$implicit;o.Db(3),o.Qc(o.ic(4,1,i))}}function M(e,t){if(1&e&&(o.Tb(0),o.Nc(1,_,6,3,"li",13),o.Sb()),2&e){var n=t.$implicit,i=o.gc().$implicit,a=o.gc(2);o.Db(1),o.mc("ngIf",a.activeTags[i.title]===n)}}function I(e,t){if(1&e&&(o.Tb(0),o.Nc(1,M,2,1,"ng-container",12),o.Sb()),2&e){var n=t.$implicit;o.Db(1),o.mc("ngForOf",n.tags)}}function T(e,t){if(1&e&&(o.Vb(0,"ul",11),o.Nc(1,I,2,1,"ng-container",12),o.Ub()),2&e){var n=o.gc();o.Db(1),o.mc("ngForOf",n.tagGroups)}}var U,L=((U=function(){function e(t,n,i){h(this,e),this.changeDetectorRef=t,this.store=n,this.router=i,this.activeTagList=[],this.ngUnsubscribe=new c.a,this._viewMode="expanded",this.tagGroups=[],this._activeTags={},this.selectedTagChange=new o.p}return b(e,[{key:"viewMode",get:function(){return this._viewMode},set:function(e){this._viewMode=e}},{key:"activeTags",get:function(){return this._activeTags},set:function(e){null==e&&(e={}),this._activeTags=e,this.activeTagList=Object.values(this.activeTags).reduce((function(e,t){return""!=t&&e.push(t),e}),[]),this.changeDetectorRef.markForCheck()}},{key:"ngOnInit",value:function(){var e=this;this.store.select(f.a.getActiveTags).pipe(Object(l.a)(this.ngUnsubscribe)).subscribe((function(t){e.activeTags=t})),this.tagGroups=[],d.a.native&&this.tagGroups.push(p.b),this.isExplore()&&(this.tagGroups=this.tagGroups.concat([p.e,p.d,Object.assign(Object.assign({},p.c),{tags:Object(s.without)(p.c.tags,"Quiz")})]))}},{key:"isExplore",value:function(){return this.router.url.indexOf("/results/modules")>=0}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"setTag",value:function(e,t){var n=this.store.selectSnapshot(f.a.getActiveTags);n[e]=t,this.store.dispatch(new g.a.SetActiveTags(n))}}]),e}()).\u0275fac=function(e){return new(e||U)(o.Pb(o.i),o.Pb(r.h),o.Pb(m.e))},U.\u0275cmp=o.Jb({type:U,selectors:[["app-gallery-filters"]],inputs:{viewMode:"viewMode"},outputs:{selectedTagChange:"selectedTagChange"},decls:3,vars:2,consts:[["data-test","galleryFilters",1,"gallery-filters"],["class","gallery-filters__expanded","data-test","galleryFiltersExpanded",4,"ngIf"],["class","gallery-filters__tags","data-test","galleryFiltersSummary",4,"ngIf"],["data-test","galleryFiltersExpanded",1,"gallery-filters__expanded"],["class","gallery-filters__group",4,"ngFor","ngForOf"],[1,"gallery-filters__group"],[1,"gallery-filters__header"],[1,"gallery-filters__tags"],["class","gallery-filters__tag",4,"ngFor","ngForOf"],[1,"gallery-filters__tag"],["app-pill-button","","data-test","galleryFiltersTag",3,"disabled","selected","click"],["data-test","galleryFiltersSummary",1,"gallery-filters__tags"],[4,"ngFor","ngForOf"],["class","gallery-filters__tag",4,"ngIf"],["app-pill-button","","data-test","galleryFiltersTag",3,"click"],[1,"mr-2"],["icon","times"]],template:function(e,t){1&e&&(o.Vb(0,"div",0),o.Nc(1,P,2,2,"div",1),o.Nc(2,T,2,1,"ul",2),o.Ub()),2&e&&(o.Db(1),o.mc("ngIf","expanded"===t.viewMode),o.Db(1),o.mc("ngIf","summary"===t.viewMode))},directives:[y.p,y.o,S,x.a],pipes:[y.b,y.x],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.gallery-filters__expanded[_ngcontent-%COMP%]{display:grid;grid-template-columns:33% 33% 33%;grid-gap:16px}.gallery-filters__header[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em;font-weight:600;padding-bottom:12px}.gallery-filters__tag[_ngcontent-%COMP%]{display:inline-block;margin:0 12px 12px 0}@media (max-width:1179px){.gallery-filters__expanded[_ngcontent-%COMP%]{grid-template-columns:100%}}@media (max-width:540px){.gallery-filters__group[_ngcontent-%COMP%]{padding:0 0 24px}}"],data:{animation:[Object(a.n)("show",[Object(a.m)(":enter",[Object(a.l)({height:"0"}),Object(a.e)("250ms ease-out",Object(a.l)({height:"*"}))])])]},changeDetection:0}),function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);o>3&&r&&Object.defineProperty(t,n,r)}([Object(r.e)(f.a.getAvailableTags),C("design:type",u.a)],U.prototype,"availableTags$",void 0),U)},ZDoJ:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){var t=function e(t){h(this,e),this.theme=t};t.type="[Layout] Set Theme",e.SetTheme=t;var n=function e(t){h(this,e),this.sidenav=t};n.type="[Layout] Set Sidenav",e.SetSidenav=n;var i=function e(t){h(this,e),this.open=t};i.type="[Layout] Toggle Sidenav",e.ToggleSidenav=i;var a=function e(t){h(this,e),this.siteHeaderType=t};a.type="[Layout] Set Header",e.SetHeader=a;var o=function e(t){h(this,e),this.siteFooterType=t};o.type="[Layout] Set Footer",e.SetFooter=o;var r=function e(){h(this,e)};r.type="[Layout] Reset",e.ResetLayout=r}(i||(i={}))},ZJ6O:function(t,n,i){"use strict";i.d(n,"a",(function(){return z}));var a,o=i("AcyG"),r=i("S/GR"),s=i("eNUT");!function(e){function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;["x","y","z"].forEach((function(n){void 0!==e[n]&&Math.abs(e[n]-t)<1e-4&&delete e[n]}))}function n(e){["translate","rotate","pivot"].forEach((function(n){void 0!==e[n]&&(t(e[n]),0===Object.keys(e[n]).length&&delete e[n])})),void 0!==e.scale&&(t(e.scale,1),0===Object.keys(e.scale).length&&delete e.scale)}function i(e,t){["backfaces","displayName","layer"].forEach((function(n){e[n]&&(t[n]=e[n])}))}function a(e,t){var i=new s.b;i.translate=JSON.parse(JSON.stringify(e.translate)),i.rotate=JSON.parse(JSON.stringify(e.rotate)),i.scale=JSON.parse(JSON.stringify(e.scale)),i.pivot=JSON.parse(JSON.stringify(e.pivot)),n(i),Object.entries(i).forEach((function(e){var n=p(e,2),i=n[0],a=n[1];t[i]=JSON.parse(JSON.stringify(a))})),t.transformId&&delete t.transformId}function o(e,t){var n=["geometryId","morphId","materialId"],i=[];return e.renderables&&e.renderables.forEach((function(e){var t=new s.a;n.forEach((function(n){e[n]&&(t[n]=e[n])})),e.layer&&(t.layer=e.layer),i.push(t)})),1===i.length?t=Object.assign(Object.assign({},t),i[0]):i.length>1&&(t.renderables=i),t}e.filterTransformProperties=n,e.serializeObjectProperties=i,e.serializeTransformData=a,e.serializeRenderables=o,e.serializeHumanObject=function e(t,n){if(n[t.objectId])return null;var r=new s.c;return r.objectId=t.objectId,i(t,r),t.transformId?r.transformId=t.transformId:a(t,r),r=o(t,r),t.objects&&t.objects.length&&(r.objects=[]),t.objects.forEach((function(t){var i=e(t,n);null!==i&&r.objects.push(i)}),this),r}}(a||(a={}));var c,u=i("LvDl"),l=i("eW6i"),d=i("e0fF"),g=i("qz+p");!function(e){function t(e,t){var n=Object.entries(t);return n.sort((function(e,t){return e[0].length===t[0].length?0:e[0].length<t[0].length?1:-1})),n.reduce((function(e,t){var n=p(t,2),i=n[0],a=n[1];if(e.startsWith(i)){var o=new RegExp("^"+i);e=e.replace(o,a)}return e}),e||"")}e.renamespaceValue=t,e.renamespaceKeys=function(e,n){return Object.entries(e).reduce((function(e,i){var a=p(i,2),o=a[0],r=a[1];return e[t(o,n)]=r,e}),{})},e.renamespaceAssetLibrary=function(e,n,i){if(!i)return e;var a=e.tweens.map((function(e){return t(e,n)})),o=e.reflections.map((function(e){return t(e,n)}));return Object.assign(Object.assign({},e),{tweens:a,reflections:o})},e.renamespaceReflections=function(e,n,i){return i?Object(u.mapValues)(e,(function(e){return t(e,n)})):e}}(c||(c={}));var f=i("fqos");function m(e,t){return{showObjects:Object(u.mapKeys)(e.showObjects,(function(e,n){return c.renamespaceValue(n,t)})),selectObjects:Object(u.mapKeys)(e.selectObjects,(function(e,n){return c.renamespaceValue(n,t)})),pickThroughObjects:Object(u.mapKeys)(e.pickThroughObjects,(function(e,n){return c.renamespaceValue(n,t)})),synchronization:Object(u.mapKeys)(e.synchronization,(function(e,n){return c.renamespaceValue(n,t)}))}}function y(e,t){return(e||[]).map((function(e){return Object.assign(Object.assign({},e),{objectId:c.renamespaceValue(e.objectId,t),states:e.states.map((function(e){return Object.assign(Object.assign({},e),{errands:(n=e.errands,n.map((function(e){return e.type===f.a.flyToChapter||e.type===f.a.flyToObject?Object.assign(Object.assign({},e),{value:c.renamespaceValue(e.value,t)}):e})))});var n}))})}))}function v(e,t){return(e||[]).map((function(e){return e.data.timeline=t[e.data.timeline]||e.data.timeline,e}))}function k(e,t){return(e||[]).map((function(e){return e.objectId&&(e.objectId=c.renamespaceValue(e.objectId,t)),e}))}function O(e,t){return e?{xray:Object(u.mapKeys)(e.xray,(function(e,n){return c.renamespaceValue(n,t)})),highlight:Object(u.mapKeys)(e.highlight,(function(e,n){return c.renamespaceValue(n,t)}))}:{}}function S(e,t){var n=Object.assign({},e);return Array.isArray(e.layers)&&(n.layers=e.layers.map((function(e){return Object.assign(Object.assign({},e),{objectIds:e.objectIds.map((function(e){return c.renamespaceValue(e,t)}))})}))),n}function x(e,t){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Object.assign(Object.assign({},e),{src:c.renamespaceValue(e.src,t)})}))}var i=[];return e&&Array.isArray(e.particleSystems)&&(i=e.particleSystems.map((function(e){return Object.assign(Object.assign({},e),{textures:n(e.textures)})}))),i}function C(t,n){var i=function(e,t){return"string"==typeof e?[t[e]||e]:e.map((function(e){return t[e]||e}))}(t.stateId,n),a=t.assetLibraries.tweens.map((function(e){return c.renamespaceValue(e,n)})),o=t.assetLibraries.reflections.map((function(e){return c.renamespaceValue(e,n)})),r=Object(u.mapValues)(t.reflections,(function(e,t){return c.renamespaceValue(e,n)})),s=function(e,t){return e.map((function(e){return Object.assign(Object.assign(Object.assign({},e),m(e,t)),{colorRecipeObjects:O(e.colorRecipeObjects,t),timelineMap:v(e.timelineMap,t),labels:y(e.labels,t),hotspots:k(e.hotspots,t),visibilityLayers:S(e.visibilityLayers,t)})}))}(t.chapters,n),l=function t(n,i){var a,o=e(n);try{var r=function(){var e=a.value;["objectId","displayName","geometryId","morphId","materialId","transformId"].forEach((function(t){e[t]&&(e[t]=c.renamespaceValue(e[t],i))})),t(e.objects||[],i)};for(o.s();!(a=o.n()).done;)r()}catch(s){o.e(s)}finally{o.f()}return n}(t.sceneGraph,n),p=Object.assign(Object.assign({},t.customData),{particleSystems:x(t.customData,n)});return Object.assign(Object.assign(Object.assign(Object.assign({},t),{stateId:i}),m(t,n)),{assetLibraries:Object.assign(Object.assign({},t.assetLibraries),{tweens:a,reflections:o}),reflections:r,chapters:s,sceneGraph:l,customData:p})}var w,j=i("N0Zw"),P=i("rGz1"),_=i("FFWI"),M=i("nS47"),I=i("3zw+"),T=i("GMXD"),U=i("Vrox"),L=i("fXoL"),z=((w=function(){function e(t,n,i,a,o){h(this,e),this.store=t,this.engineService=n,this.chapterSerializer=i,this.animationService=a,this.chapterService=o}return b(e,[{key:"serializeUI",value:function(e){var t=Object.assign({},e.ui);return e.chapters.length>1&&(t.scrubber=!1,t.playPause=!1,t.tour={chapters:!0}),t}},{key:"serializeAnimation",value:function(e){return this.animationService.isChapterAnimated(e)?{startTime:e.timelineMap[0].start,loop:!1!==e.loop,numChapters:1}:{}}},{key:"getClippedObjects",value:function(){return 0===Human.renderer.clip.getActiveClips().length?{}:Human.scene.getLeaves().reduce((function(e,t){return Human.scene.objects[t].culledByClip&&(e[t]=!0),e}),{})}},{key:"generateTrimObjectMap",value:function(e){var t={};if(e.graph.hidden){var n=this.store.selectSnapshot(T.a.getAllNodeState);Object.values(n).forEach((function(e){Object.entries(e).forEach((function(e){var n=p(e,2),i=n[0],a=n[1];!1!==t[i]&&(t[i]=!(a.shown||a.shownSetByTween))}))}))}var i=e.graph.clipped?this.getClippedObjects():{};return Object.assign(Object.assign({},t),i)}},{key:"serialize",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=Object(u.cloneDeep)(o),l=this.generateTrimObjectMap(t);c.sceneGraph=function(e,t){var n=[];return Object.entries(e).forEach((function(e){var i=p(e,2),o=(i[0],i[1]),r=a.serializeHumanObject(o,t);null!==r&&n.push(r)}),this),n}(Human.scene.rootObjects,l);var g=M.a.createGraphFromSrc(c.sceneGraph,"objectId","objects",new d.d(Human.scene.colorRecipes.getRecipes())),h=this.store.selectSnapshot(j.a.getLabels);this.store.selectSnapshot(U.a.getRegisteredThumbnails),c.chapters=r.map((function(t){return n.chapterSerializer.serializeChapter(g,t,e,h,s)})),c.ui=this.serializeUI(c),c.animation=this.serializeAnimation(r[0]),c.customData=Object.assign(Object.assign({},c.customData),{particleSystems:this.store.selectSnapshot(P.a.getParticleSystemsList)});var f=this.store.selectSnapshot(_.b.getAllQuestions),b=this.store.selectSnapshot(_.b.getQuizSettings);b&&f.length>0?c.quizSettings=b:delete c.quizSettings,c.tweenParticleLookup=this.store.selectSnapshot(P.a.getTweenParticleLookup);var m=r.reduce((function(e,t){return e.concat(n.chapterService.getChapterLightLibraries(t))}),[]);c.assetLibraries.lights=Array.from(new Set(m));var y=this.getReflectionLibraries(c.reflections),v=r.reduce((function(e,t){return e.concat(n.chapterService.getChapterReflectionLibraries(t))}),[]);c.assetLibraries.reflections=Array.from(new Set(y.concat(v)));var k=[].concat.apply([],Object.values(c.assetLibraries)),O=this.getSceneGraphStateIds(c.sceneGraph);return c.stateId=Array.from(new Set(k.map(this.getStateId).concat(O))),{story:i?C(c,e):c}}},{key:"getReflectionLibraries",value:function(e){return e=e||{},Object.values(e).map((function(e){var t=e.split(".");return[t[0],t[1]].join("/")}))}},{key:"getSceneGraphStateIds",value:function(e){return e.map((function(e){return e.objectId.split("-")[0]}))}},{key:"getStateId",value:function(e){return e.split("/")[0]}}]),e}()).\u0275fac=function(e){return new(e||w)(L.Zb(o.h),L.Zb(l.a),L.Zb(r.a),L.Zb(g.a),L.Zb(I.a))},w.\u0275prov=L.Lb({token:w,factory:w.\u0275fac,providedIn:"root"}),w)},ZR5G:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Bookmark="bookmark",e.Module="module",e.Internal="internal",e}({})},ZULQ:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.normalize=function(e){return(""+(e||"")).replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(t)})).replace(/(&.+;)/gi,(function(e,t){return String.fromCharCode(e.charCodeAt(0))}))},e.prettyPrint=function(e){return(""+(e||"")).trim().replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()})).trim()},e.parseEmails=function(e){return e.split(",").map((function(e){return e.trim()})).filter((function(e){return!!e}))},e.validateEmail=function(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)},e.toTitleCase=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()}))}}(i||(i={}))},ZriC:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.SSAO="sao",e.Blur="blur",e.RadialBlur="radialBlur",e.DOF="dof",e.FXAA="fxaa",e.GroundShadow="groundShadow",e}({})},a0wz:function(e,t,n){"use strict";n.d(t,"z",(function(){return i})),n.d(t,"x",(function(){return a})),n.d(t,"w",(function(){return o})),n.d(t,"h",(function(){return r})),n.d(t,"i",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"m",(function(){return p})),n.d(t,"o",(function(){return d})),n.d(t,"n",(function(){return g})),n.d(t,"y",(function(){return f})),n.d(t,"p",(function(){return b})),n.d(t,"r",(function(){return m})),n.d(t,"q",(function(){return y})),n.d(t,"s",(function(){return v})),n.d(t,"u",(function(){return k})),n.d(t,"t",(function(){return O})),n.d(t,"v",(function(){return S})),n.d(t,"e",(function(){return x})),n.d(t,"g",(function(){return C})),n.d(t,"f",(function(){return w})),n.d(t,"A",(function(){return j})),n.d(t,"C",(function(){return P})),n.d(t,"B",(function(){return _})),n.d(t,"j",(function(){return M})),n.d(t,"l",(function(){return I})),n.d(t,"k",(function(){return T})),n.d(t,"d",(function(){return U}));var i=function(){var e=function e(t){h(this,e),this.organizations=t};return e.type="[Organizations] Set Organizations",e}(),a=function(){var e=function e(t){h(this,e),this.organization=t};return e.type="[Organizations] Select Organization",e}(),o=function(){var e=function e(t){h(this,e),this.collection=t};return e.type="[Organizations] Select Collection",e}(),r=function(){var e=function e(t){h(this,e),this.organizationId=t};return e.type="[Organizations] Get Collections",e}(),s=function(){var e=function e(t){h(this,e),this.collections=t};return e.type="[Organizations] Get Collections Success",e}(),c=function(){var e=function e(t,n){h(this,e),this.organizationId=t,this.collectionName=n};return e.type="[Organizations] Add Collection",e}(),u=function(){var e=function e(t,n){h(this,e),this.organizationId=t,this.collectionName=n};return e.type="[Organizations] Add Collection Success",e}(),l=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Organizations] Add Collection Error",e}(),p=function(){var e=function e(t){h(this,e),this.collection=t};return e.type="[Organizations] Remove Collection",e}(),d=function(){var e=function e(t){h(this,e),this.collection=t};return e.type="[Organizations] Remove Collection Success",e}(),g=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Organizations] Remove Collection Error",e}(),f=function(){var e=function e(t){h(this,e),this.collection=t};return e.type="[Organizations] Set Collection Rename Mode",e}(),b=function(){var e=function e(t,n){h(this,e),this.collection=t,this.collectionName=n};return e.type="[Organizations] Rename Collection",e}(),m=function(){var e=function e(t,n){h(this,e),this.collection=t,this.collectionName=n};return e.type="[Organizations] Rename Collection Success",e}(),y=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Organizations] Rename Collection Error",e}(),v=function(){var e=function e(t,n){h(this,e),this.organizationId=t,this.collections=n};return e.type="[Organizations] Reorder Collections",e}(),k=function(){var e=function e(t,n){h(this,e),this.organizationId=t,this.collections=n};return e.type="[Organizations] Reorder Collections Success",e}(),O=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Organizations] Reorder Collections Error",e}(),S=function(){var e=function e(){h(this,e)};return e.type="[Organizations] Reset",e}(),x=function(){var e=function e(t){h(this,e),this.organization=t};return e.type="[Organizations] Create Organization",e}(),C=function(){var e=function e(){h(this,e)};return e.type="[Organizations] Create Organization Success",e}(),w=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Organizations] Create Organization Fail",e}(),j=function(){var e=function e(t){h(this,e),this.organization=t};return e.type="[Organizations] Update Organization",e}(),P=function(){var e=function e(){h(this,e)};return e.type="[Organizations] Update Organization Success",e}(),_=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Organizations] Update Organization Fail",e}(),M=function(){var e=function e(t){h(this,e),this.request=t};return e.type="[Organizations] Get Organization Profile",e}(),I=function(){var e=function e(t){h(this,e),this.organizationProfile=t};return e.type="[Organizations] Get Organization Profile Success",e}(),T=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Organizations] Get Organization Profile Fail",e}(),U=function(){var e=function e(){h(this,e)};return e.type="[Organizations] Clear Organization Profile",e}()},aKmd:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("ofXK"),a=n("vvyD"),o=n("+pSP"),r=n("EWj2"),s=n("yGOH"),c=n("Wdmj"),u=n("fXoL"),l=function(){var e=function e(){h(this,e)};return e.\u0275mod=u.Nb({type:e}),e.\u0275inj=u.Mb({factory:function(t){return new(t||e)},imports:[[i.c,s.a,a.a,r.a,o.a,c.d]]}),e}()},aWUR:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.InvalidUAID="analytic id does not exist",e.InvalidDeveloperId="Client id invalid",e.InvalidProductKey="app product key",e.MissingUAID="analytic id missing",e.WebOnlyAPI="Api key only compatible with Web Widget",e.AndroidOnlyAPI="Api key only compatible with Mobile Widget SDK for Android",e.IOSOnlyAPI="Api key only compatible with Mobile Widget SDK for iOS",e.MixedAPIKeys="Use of both an app product key and an app api key not allowed",e.ProductKeyNotRegistered='App product key "xxx" has not been registered or is incorrect.  Ensure it has been registered by the system admin',e.ProductKeyInvalidAppBundleID='The app product key "xxx" has not been authorized to be used for app bundle id "yyy".  Confirm the correct values are being used from the system admin',e.ProductKeyBundleIDWhitelist='Use of app product key "xxx" requires the affiliated app bundle id (app_domain) to be white-listed.  Ensure the system admin has white-listed "yyy"',e.ImproperProductKeyUsage='Improper use of app product key "xxx" detected. Contact the system admin if issue continues',e.InvalidPlatformSource="Invalid platform source",e.MissingSource="Missing source",e.MissingPlatform="Missing platform",e.MissingAppDomain="Missing app domain",e.APIKeyMissing="Api key missing",e.APIKeyInvalid="Api key invalid",e.DeveloperDeactivated="Developer account for api key is deactivated",e.BundleIDNotAllowed="App bundle id not allowed",e.BundleIDUnregistered="App bundle id unregistered",e}({})},aqTE:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i,a=n("6L7E"),o=n("7b4e"),r=n("2o60"),s=n("l57l"),c=function e(){h(this,e)},u=n("yonH"),l=n("WRwD"),p=n("XoU3"),d=n("qplK"),g=n("b36G"),f=n("fMqy"),m=n("eW6i"),y=n("fqos"),v=n("x1jL"),k=n("A+8E"),O=n("LvDl"),S=n("fXoL"),x={flyToCamera:"flyTo",flyToChapter:"flyTo"},C=((i=function(){function e(t){var n=this;h(this,e),this.engineService=t,this.convertActionToErrand=function(e,t,n){var i=new RegExp("^flyTo(Async)?"),a=new RegExp("^flyToObject(Async)?"),o=new RegExp("^flyTo[w.:]+currentChapter.[flyTo|jumpTo]"),r=n.split(":").slice(0,2),s=e,c=r[1];/currentChapter/.test(c)&&(c=c.replace("currentChapter","chapters[".concat(t,"]")));var u=null;return a.test(r[0])?u=new p.a(Object(O.get)(s,c)):i.test(r[0])?u=new d.a(Object(O.get)(s,c)):o.test(r[0])&&(u=new v.a),u},this.convertErrandToAction=function(e,t){var i=o.a.idWithPrefix("errand").replace(/-/g,"_"),a={},r="",s=function(e){return x[e]||e}(t.type);return t.type===y.a.flyToChapter?r="".concat(s,"Async:currentChapter.").concat(n.engineService.getChapter(e.chapterId).camera.action):(r="".concat(s,"Async:currentChapter.customData.").concat(i),a[i]=t.value),{action:r,data:a}}}return b(e,[{key:"filterHotspot",value:function(e,t,n){var i=new RegExp("^(flyTo|flyToObject|hideHotspot|showHotspot|resetHotspots)"),a=this.getHotspotAction(e,n),o=a.filter((function(e){return i.test(e)}));return a.length===o.length}},{key:"deserializeAnnotation",value:function(e,t,n){var i=new a.a(e.title||"");return i.id=e.annotationId||o.a.idWithPrefix("label"),i.chapterId=t.id,i.expandTag=!0,i.showDescription=!0,i.collapseDescription=!1,i.pinGlow=!1,i.hideWire=!1,i.hideTag=!1,n===s.a.Annotation?(i.theme=s.a.Annotation,i.pinType=r.a.Default,i.flyTo=!1,i.states=[]):(i.theme=s.a.StudioNext,i.pinType=r.a.PlusMinus,i.flyTo=!0,i.states=[new l.a,new l.a],i.states[0].errands=[new v.a],i.states[1].errands=[new p.a(e.objectId)]),i.occludable=!1!==e.occludable,i.renderableIndex=e.renderableIndex||0,e.objectId&&Object.prototype.hasOwnProperty.call(e,"barycentric")?(i.objectId=e.objectId,i.primitiveIndex=e.primitiveIndex,i.barycentric=e.barycentric):Object.prototype.hasOwnProperty.call(e,"pos")&&(Object.prototype.hasOwnProperty.call(e,"objectId")&&(i.objectId=e.objectId),i.pos=e.pos),e.dir&&Array.isArray(e.dir)?i.dir=e.dir:e.dir&&e.dir instanceof Object&&(i.dir=Object.values(e.dir)),i.description=e.description||"",i.offset=e.labelOffset||[40,40],i.shown=!1!==e.shown,i.labelShown=!1!==e.labelShown,i}},{key:"deserializeHotspots",value:function(e,t,n){for(var i=this,c=arguments.length,p=new Array(c>3?c-3:0),d=3;d<c;d++)p[d-3]=arguments[d];var g=p[0],h=p[1],f=new a.a(g.title||"");switch(f.id=o.a.idWithPrefix("hotspot"),f.objectId=g.objectId,f.chapterId=t.id,f.description=g.description||"",f.pinType=/plus|minus/.test(g.className)?r.a.PlusMinus:/sequential/.test(g.className)?r.a.Sequential:/none/.test(g.className)?r.a.None:r.a.Default,/alphabetical/.test(g.className)?f.sequentialType=k.a.Alphabetical:/numerical/.test(g.className)&&(f.sequentialType=k.a.Numerical),f.pinGlow=/pulse/.test(g.className),f.occludable=!0,f.shown=g.shown,f.offset=g.labelOffset?g.labelOffset:[22,-17],(/left/.test(g.className)&&f.offset[0]>0||/right/.test(g.className)&&f.offset[0]<0)&&(f.offset[0]*=-1),Object.prototype.hasOwnProperty.call(g,"barycentric")?(f.renderableIndex=g.renderableIndex||0,f.barycentric=g.barycentric,f.primitiveIndex=g.primitiveIndex):f.pos=g.pos,f.dir=g.dir,g.theme=g.theme?g.theme:u.a.classicHotspot,g.theme){case u.a.classicAnnotation:f.theme=s.a.Annotation,f.showDescription=!0,f.collapseDescription=/collapsible/g.test(g.className),f.expandTag=!0,f.hideTag=!1,f.hideWire=!/leader-line/.test(g.className);break;case u.a.classicHotspot:f.theme=s.a.Classic,f.showDescription=/label/.test(g.className),f.expandTag=/label/.test(g.className),f.hideTag=!f.expandTag,f.collapseDescription=!1,f.hideWire=!/leader-line/.test(g.className);break;case u.a.studioNext:f.theme=s.a.StudioNext,f.showDescription=this.hasContent(g),f.collapseDescription=/collapsible/g.test(g.className),f.hideTag=!g.title,f.hideWire=!/leader-line/.test(g.className)}f.flyTo=!1,f.flyToTarget=null,f.states=[];var b=this.filterHotspotActions(this.getHotspotAction(e,g)),m=h?this.filterHotspotActions(this.getHotspotAction(e,h)):[],v=new l.a,O=new l.a;b.length&&(v.errands=b.map((function(t){return i.convertActionToErrand(e,n,t)}))),m.length&&(O.errands=m.map((function(t){return i.convertActionToErrand(e,n,t)}))),f.states=[O,v],v.errands.length>0&&(f.flyTo=!0,f.flyToTarget=v.errands[0].type,v.errands[0].type===y.a.flyToCamera&&(f.cameraPosition=v.errands[0].value));var S=g.contentBlocks;return S&&(f.contentBlocks=JSON.parse(JSON.stringify(S))),f}},{key:"makeDefaultStudioLabel",value:function(e){var t=e?Object.assign({},e):new a.a("");return t.pinType=r.a.PlusMinus,t.theme=s.a.StudioNext,t.expandTag=!0,t.showDescription=!0,t.collapseDescription=!1,t.pinGlow=!1,t.hideWire=!1,t.hideTag=!1,t.occludable=!0,t.flyTo=!0,t.description="",t.shown=!0,t.states=[new l.a,new l.a],t}},{key:"makeAnnotationLabel",value:function(e){var t=e?Object.assign({},e):new a.a("");return t.pinType=r.a.Default,t.theme=s.a.Annotation,t.expandTag=!0,t.showDescription=!0,t.collapseDescription=!1,t.pinGlow=!1,t.hideWire=!1,t.hideTag=!1,t.states=[],t}},{key:"serializeLabel",value:function(e,t){var n=this,i=new c,a=Object(g.classToClass)(e),o=["circle","draggable"];i.shown=!0,e.objectId&&(i.objectId=a.objectId);try{e.primitiveIndex&&e.barycentric&&e.objectId?(i.renderableIndex=e.renderableIndex||0,i.primitiveIndex=e.primitiveIndex,i.barycentric=e.barycentric,i.pos=this.engineService.barycentricToWorld(e.objectId,e.primitiveIndex,e.barycentric)):i.pos=a.pos}catch(b){return{data:{},hotspots:[]}}switch((Array.isArray(e.dir)||ArrayBuffer.isView(e.dir))&&(i.dir=Array.prototype.slice.call(e.dir)),i.labelOffset=e.offset,e.theme){case s.a.Annotation:i.theme=u.a.classicAnnotation;break;case s.a.Classic:i.theme=u.a.classicHotspot;break;default:i.theme=u.a.studioNext}""!==a.title?(i.title=a.title,i.description=a.description,i.type=f.a.CircleLabel):i.type=f.a.Circle,e.pinGlow&&o.push("pulse"),e.pinType===r.a.PlusMinus&&o.push("plus"),e.pinType===r.a.Sequential&&(o.push("sequential"),o.push(e.sequentialType===k.a.Alphabetical?"alphabetical":"numerical")),e.pinType===r.a.None&&o.push("none"),e.hideWire||o.push("leader-line"),e.hideTag||o.push("label"),e.collapseDescription&&o.push("collapsible collapsed"),i.className=o.join(" ");var l={};i.actions=[];var p=[i],d=e.states.length;e.states.forEach((function(t,a){if(a===d-1)p[0].actions.push("resetHotspots"),t.errands.forEach((function(t){var i=n.convertErrandToAction(e,t);p[0].actions.push(i.action),l=Object.assign(Object.assign({},l),i.data)}));else{var o=Object(g.classToClass)(i);o.actions=[],o.className=o.className.replace("plus","minus"),t.errands.forEach((function(t){var i=n.convertErrandToAction(e,t);o.actions.push(i.action),l=Object.assign(Object.assign({},l),i.data)})),p.push(o)}})),2===p.length&&(p[0].actions.push("hideHotspots:currentChapter.hotspots[".concat(t,"]")),p[0].actions.push("showHotspots:currentChapter.hotspots[".concat(t+1,"]")),p[1].actions.push("hideHotspots:currentChapter.hotspots[".concat(t+1,"]")),p[1].actions.push("showHotspots:currentChapter.hotspots[".concat(t,"]")),p[0].shown=!0,p[1].shown=!1),2===p.length&&e.collapseDescription&&(p[1].className+=p[1].className.replace("collapsed","")),p.forEach((function(e){i.labelOffset[0]<0?e.className=e.className.replace("right","")+" left":i.labelOffset[0]>0&&(e.className=e.className.replace("left","")+" right")}));var h=e.contentBlocks;return h&&(i.contentBlocks=JSON.parse(JSON.stringify(h))),{data:l,hotspots:p}}},{key:"setLabelContainer",value:function(e){this._labelContainer=e}},{key:"getLabelContainer",value:function(){return this._labelContainer}},{key:"hasContent",value:function(e){var t=e.description,n=e.contentBlocks;return!!t||!Object(O.isNil)(n)&&n.length>0}},{key:"getHotspotAction",value:function(e,t){var n=t.actionSrc?Object(O.get)(e,t.actionSrc):t.actions?t.actions:[];return Array.isArray(n)?n:[]}},{key:"filterHotspotActions",value:function(e){var t=new RegExp("^(flyTo|flyToObject)");return e.filter((function(e){return t.test(e)}))}}]),e}()).\u0275fac=function(e){return new(e||i)(S.Zb(m.a))},i.\u0275prov=S.Lb({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},awCs:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("fXoL"),a=n("ofXK");function o(e,t){1&e&&(i.Vb(0,"div"),i.kc(1),i.Ub())}var r=["*"],s=function(){var e=function(){function e(t){h(this,e),this.changeDetector=t,this.hide=!1,this._isActive=!1}return b(e,[{key:"isActive",get:function(){return this._isActive},set:function(e){this._isActive=e,this.changeDetector.markForCheck()}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.i))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-tab"]],inputs:{label:"label",hide:"hide"},ngContentSelectors:r,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(i.lc(),i.Nc(0,o,2,0,"div",0)),2&e&&i.mc("ngIf",t.isActive)},directives:[a.p],styles:[""],changeDetection:0}),e}()},bKUj:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var i=n("LvDl");function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(t?r(e):e).reduce((function(e,t){return Object.assign(Object.assign({},e),t)}),{})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.entries(e).map((function(e){var t=p(e,2);return l({},t[0],t[1])}));return t?r(n):n}function r(e){return e.filter((function(e){return Object.values(e).some((function(e){return!Object(i.isNil)(e.value)&&""!==e.value}))}))}},bjoO:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("itXk"),a=n("HDdC"),o=n("pLZG"),r=n("AcyG"),s=n("LvDl"),c=n("Mh2x"),u=n("VJvM"),l=n("gm/O"),d=n("GMXD"),g=n("0Yvn"),f=n("fXoL"),m=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},y=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){var e=function(){function e(t){h(this,e),this.store=t,this.currentLayers=[],this.nodesLayerIndex=0,this.objectsLayerIndex=0,this.nodeChapterOpacities={}}return b(e,[{key:"initObservables",value:function(){var e=this;this.selectedChapterId$.pipe(Object(o.a)((function(e){return!Object(s.isNil)(e)}))).subscribe((function(t){e.selectedChapterId=t,e.updateNodeChapterOpacities()})),this.selectedChapterCurrentLayers$.subscribe((function(t){e.currentLayers=t,e.nodesLayerIndex=e.objectsLayerIndex=e.store.selectSnapshot(c.a.getSelectedChapterCurrentLayersIndex)})),Object(i.b)([this.selectedChapterCurrentLayersIndex$,this.selectedChapterCurrentLayersPosition$]).pipe(Object(o.a)((function(e){var t=p(e,2),n=t[0],i=t[1];return!Object(s.isNil)(n)&&!Object(s.isNil)(i)}))).subscribe((function(t){var n=p(t,2),i=n[0],a=n[1];e.synchronizeScene(i,a,!0)}))}},{key:"recordLayerIndexPosition",value:function(e,t){this.store.dispatch(new u.w(this.selectedChapterId,e,t,!0))}},{key:"synchronizeScene",value:function(e,t,n){this.updateLayerIndex(e,this.currentLayers,n),this.updateLayerPosition(t,this.currentLayers,n)}},{key:"fractionToIndex",value:function(e){var t=this.getThreshold(),n=Math.floor(e/t);return Math.min(this.currentLayers.length-2,n)}},{key:"fractionToPosition",value:function(e,t){var n=this.getThreshold();return Math.max(0,Math.min((e-n*t)/n,1))}},{key:"indexPositionToFraction",value:function(e,t){var n=this.getThreshold();return e*n+t*n}},{key:"getThreshold",value:function(){return this.currentLayers.length>1?1/(this.currentLayers.length-1):1}},{key:"getCurrentLayerIndexProp",value:function(e){return e?"nodesLayerIndex":"objectsLayerIndex"}},{key:"updateLayerIndex",value:function(e,t,n){var i=this.getCurrentLayerIndexProp(n);e!==this[i]&&(this.restoreLayers(e,this[i],t,n),n&&(this.nodesLayerIndex=e),this.objectsLayerIndex=e)}},{key:"updateLayerPosition",value:function(e,t,n){var i=this.getCurrentLayerIndexProp(n);this.setObjectsOpacity(t[this[i]].objectIds,1-e)}},{key:"restoreLayers",value:function(e,t,n,i){for(var a=(e-t)/Math.abs(e-t),o=[],r=t;r!==e;)o=o.concat(n[r].objectIds),r+=a;var s=-1===a;this.setObjectsOpacity(o,1===a?0:1),i?this.setNodesShown(o,s):this.setObjectsShown(o,s),-1===a&&(i?this.setNodesShown(n[e].objectIds,!0):this.setObjectsShown(n[e].objectIds,!0))}},{key:"setObjectsOpacity",value:function(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=this.nodeChapterOpacities[i],o=void 0;this.isFresnelOpacity(a)?((o=a.slice())[0]=t*a[0],o[1]=t*a[1]):o=t*a,Human.scene.objects[i].setOpacity(o)}}},{key:"updateNodeChapterOpacities",value:function(){var e=this,t=this.store.selectSnapshot(d.a.getAllNodeState)[this.selectedChapterId];this.nodeChapterOpacities={},Object.entries(t).forEach((function(t){var n=p(t,2),i=n[0],a=n[1];if(e.nodeChapterOpacities[i]=1,a.paint&&a.paint.hasOwnProperty("opacity")){var o=g.a.toEngine(a.paint);(e.isFresnelOpacity(o.opacity)||e.isScalarOpacity(o.opacity))&&(e.nodeChapterOpacities[i]=o.opacity)}}))}},{key:"isScalarOpacity",value:function(e){return"number"==typeof e}},{key:"isFresnelOpacity",value:function(e){return Array.isArray(e)}},{key:"setObjectsShown",value:function(e,t){for(var n={},i=0;i<e.length;i++)n[e[i]]=t;Human.scene.setEnabledObjects({objects:n})}},{key:"setNodesShown",value:function(e,t){this.store.dispatch(new l.a.UpdateNodesShown(t,e,void 0,!1))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Zb(r.h))},e.\u0275prov=f.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),m([Object(r.e)(c.a.getSelectedChapterCurrentLayers),y("design:type",a.a)],e.prototype,"selectedChapterCurrentLayers$",void 0),m([Object(r.e)(c.a.getSelectedChapterCurrentLayersIndex),y("design:type",a.a)],e.prototype,"selectedChapterCurrentLayersIndex$",void 0),m([Object(r.e)(c.a.getSelectedChapterCurrentLayersPosition),y("design:type",a.a)],e.prototype,"selectedChapterCurrentLayersPosition$",void 0),m([Object(r.e)(c.a.getSelectedChapterId),y("design:type",a.a)],e.prototype,"selectedChapterId$",void 0),e}()},c8sk:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i,a=n("AcyG"),o=function e(){h(this,e)},r=n("k0jR"),s=n("/MKm"),c=n("lZmj"),u=n("ECVi"),l=n("cp0P"),d=n("eKhQ"),g=n("kTA6"),f=n("fXoL"),m=n("dNgK"),y=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},v=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},k={publishing:!1,widgetURL:"/viewer",dimensions:c.a.dimensions,minDimensions:{width:300,height:400}},O=((i=function(){function e(t,n,i,a){h(this,e),this.publishService=t,this.store=n,this.snackbar=i,this.pendoService=a}return b(e,[{key:"setPublishWidgetURL",value:function(e,t){e.patchState({widgetURL:t.widgetURL||"/viewer"})}},{key:"setPublishDimensions",value:function(e,t){e.patchState({dimensions:t.dimensions})}},{key:"getPublishURL",value:function(e,t){var n=t.model,i=t.camera,a=t.widgetOptions,o=e.getState().widgetURL,c=this.store.selectSnapshot(u.a.getUserLanguage),l=this.store.selectSnapshot(u.a.getSelectedUserApp),p=this.store.selectSnapshot(d.a.getSelectedOrganizationProductAccountId);this.publishService.generateWidgetURL(n,o,a,i,s.a.Single,c,l,p).subscribe((function(t){e.dispatch(new r.i(n,t))}),(function(){e.dispatch(new r.h(n))}))}},{key:"getPublishURLSuccess",value:function(e,t){this.pendoService.track("Publish - Success",{type:"url",source:"publish"})}},{key:"getPublishURLFail",value:function(e,t){this.snackbar.open("Unable to generate URL.")}},{key:"getPublishIFrame",value:function(e,t){var n=t.model,i=t.camera,a=t.widgetOptions,o=e.getState(),c=o.widgetURL,l=o.dimensions,p=this.store.selectSnapshot(u.a.getUserLanguage),g=this.store.selectSnapshot(u.a.getSelectedUserApp),h=this.store.selectSnapshot(d.a.getSelectedOrganizationProductAccountId);this.publishService.generateWidgetEmbed(n,c,a,l,i,s.a.Single,p,g,h).subscribe((function(t){e.dispatch(new r.c(t))}),(function(){e.dispatch(new r.b)}))}},{key:"setPublishIFrameSuccess",value:function(e,t){this.pendoService.track("Publish - Success",{type:"iframe",source:"publish"})}},{key:"savePublishImage",value:function(e,t){var n=t.imageData,i=t.imageType;this.publishService.saveUserImage(n,i).subscribe((function(t){e.dispatch(new r.m(t))}),(function(){e.dispatch(new r.l)}))}},{key:"savePublishImageSuccess",value:function(e,t){this.pendoService.track("Publish - Success",{type:"image",source:"publish"})}},{key:"getPublishImage",value:function(e,t){var n=this,i=t.model,a=t.camera,o=t.widgetOptions,c=t.imageData,d=t.fileType,g=e.getState().widgetURL,h=this.store.selectSnapshot(u.a.getUserLanguage),f=this.store.selectSnapshot(u.a.getSelectedUserApp);Object(l.a)(this.publishService.generateWidgetURL(i,g,o,a,s.a.Single,h,f),this.publishService.saveUserImage(c,d)).subscribe((function(t){var a=p(t,2),o=a[0],s=a[1],c=n.publishService.getImageEmbed(i.title,o,s);e.dispatch(new r.f(c))}),(function(){e.dispatch(new r.e)}))}},{key:"setPublishing",value:function(e,t){var n=t.publishing;e.patchState({publishing:n})}},{key:"resetPublish",value:function(e,t){e.setState(k)}}],[{key:"getDimensions",value:function(e){return e.dimensions}},{key:"getMinDimensions",value:function(e){return e.minDimensions}},{key:"getWidgetURL",value:function(e){return e.widgetURL}},{key:"getPublishing",value:function(e){return e.publishing}}]),e}()).\u0275fac=function(e){return new(e||i)(f.Zb(s.b),f.Zb(a.h),f.Zb(m.b),f.Zb(g.b))},i.\u0275prov=f.Lb({token:i,factory:i.\u0275fac}),y([Object(a.a)(r.o),v("design:type",Function),v("design:paramtypes",[Object,r.o]),v("design:returntype",void 0)],i.prototype,"setPublishWidgetURL",null),y([Object(a.a)(r.n),v("design:type",Function),v("design:paramtypes",[Object,r.n]),v("design:returntype",void 0)],i.prototype,"setPublishDimensions",null),y([Object(a.a)(r.g),v("design:type",Function),v("design:paramtypes",[Object,r.g]),v("design:returntype",void 0)],i.prototype,"getPublishURL",null),y([Object(a.a)(r.i),v("design:type",Function),v("design:paramtypes",[Object,r.i]),v("design:returntype",void 0)],i.prototype,"getPublishURLSuccess",null),y([Object(a.a)(r.h),v("design:type",Function),v("design:paramtypes",[Object,r.h]),v("design:returntype",void 0)],i.prototype,"getPublishURLFail",null),y([Object(a.a)(r.a),v("design:type",Function),v("design:paramtypes",[Object,r.a]),v("design:returntype",void 0)],i.prototype,"getPublishIFrame",null),y([Object(a.a)(r.c),v("design:type",Function),v("design:paramtypes",[Object,r.c]),v("design:returntype",void 0)],i.prototype,"setPublishIFrameSuccess",null),y([Object(a.a)(r.k),v("design:type",Function),v("design:paramtypes",[Object,r.k]),v("design:returntype",void 0)],i.prototype,"savePublishImage",null),y([Object(a.a)(r.m),v("design:type",Function),v("design:paramtypes",[Object,r.m]),v("design:returntype",void 0)],i.prototype,"savePublishImageSuccess",null),y([Object(a.a)(r.d),v("design:type",Function),v("design:paramtypes",[Object,r.d]),v("design:returntype",void 0)],i.prototype,"getPublishImage",null),y([Object(a.a)(r.p),v("design:type",Function),v("design:paramtypes",[Object,r.p]),v("design:returntype",void 0)],i.prototype,"setPublishing",null),y([Object(a.a)(r.j),v("design:type",Function),v("design:paramtypes",[Object,r.j]),v("design:returntype",void 0)],i.prototype,"resetPublish",null),y([Object(a.f)(),v("design:type",Function),v("design:paramtypes",[o]),v("design:returntype",void 0)],i,"getDimensions",null),y([Object(a.f)(),v("design:type",Function),v("design:paramtypes",[o]),v("design:returntype",void 0)],i,"getMinDimensions",null),y([Object(a.f)(),v("design:type",Function),v("design:paramtypes",[o]),v("design:returntype",void 0)],i,"getWidgetURL",null),y([Object(a.f)(),v("design:type",Function),v("design:paramtypes",[o]),v("design:returntype",void 0)],i,"getPublishing",null),i=y([Object(a.g)({name:"publish",defaults:k})],i))},cAOT:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.JumpTo="jumpTo",e.FlyTo="flyTo",e}({})},cAYK:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.OnDemand=0]="OnDemand",e[e.Interact=1]="Interact",e[e.Loader=2]="Loader",e[e.Tutorial=3]="Tutorial",e[e.Whiteboard=4]="Whiteboard",e[e.Help=5]="Help",e}({})},cQmI:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.All="",e.Quiz="mode-quiz",e.Content="mode-content",e}({})},dMmY:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL"),a=function(){var e=function(){function e(){h(this,e)}return b(e,[{key:"roundModel",value:function(e,t){var n=this,i=Object.assign({},e);return Object.keys(e).filter((function(t){return"number"==typeof e[t]})).forEach((function(a){i[a]=n.roundNumber(e[a],t)})),i}},{key:"roundNumber",value:function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},e0fF:function(e,t,n){"use strict";function i(e){return{id:e,depth:0,boolState:{},numState:{}}}function a(){return{nodes:{},successors:{},predecessors:{},roots:{}}}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return r}));var o=function e(){h(this,e)},r=function e(t){var n=this;h(this,e),this.shown=function(e){return!1},this.selected=function(e){return!1},this.pickable=function(e){return!0},t.forEach((function(e){n[e]=function(e){return!1}}))}},e0tp:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ofXK"),a=n("3Pt+"),o=n("vvyD"),r=n("+pSP"),s=n("fXoL"),c=function(){var e=function e(){h(this,e)};return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[o.a,a.l,i.c,r.a]]}),e}()},eKhQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i,a=n("AcyG"),o=function e(){h(this,e)},r=n("a0wz"),s=n("7PKw"),c=n("qBAC"),p=n("/MKm"),d=n("k0jR"),g=n("nYR2"),f=n("kTA6"),m=n("LvDl"),y=n("icKS"),v=n("fXoL"),k=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},O=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},S={creating:!1,updating:!1,loadingCollections:!1,addingCollection:!1,reorderingCollections:!1,removingCollection:!1,updatingCollection:!1,collectionRenaming:null},x=((i=function(){function e(t,n,i,a){h(this,e),this.organizationsService=t,this.publishService=n,this.pendoService=i,this.productService=a}return b(e,[{key:"selectOrganization",value:function(e,t){var n=t.organization;e.patchState({selectedOrganization:n,selectedCollection:null}),n&&e.dispatch(new r.h(n.id))}},{key:"setOrganizations",value:function(e,t){var n,i=t.organizations||[],a=i[0],o=null,r=Object.assign({},e.getState().appFeatures);if(a&&a.group_attributes){var s=a.group_attributes,u=this.organizationsService.getOrganizationAttribute(s,"widget_settings","widget_custom_url_path");u&&u.value&&(n=u.value);var l=this.organizationsService.getOrganizationAttribute(s,"widget_settings","widget_url_params");l&&l.value&&(o=this.publishService.extendWidgetOptions(new c.a,l.value));var p=this.organizationsService.getOrganizationAttribute(s,"app_settings","web_app_features");p&&(r=Object.assign(Object.assign({},r),p.value))}e.patchState({organization:a,organizations:i,widgetURL:n,widgetOptions:o,appFeatures:r}),e.dispatch(new d.o(n))}},{key:"getCollections",value:function(e,t){e.patchState({loadingCollections:!0}),this.organizationsService.getCollections({group_id:t.organizationId}).pipe(Object(g.a)((function(){return e.patchState({loadingCollections:!1})}))).subscribe((function(t){e.dispatch(new r.i(t))}))}},{key:"getCollectionsSuccess",value:function(e,t){e.patchState({collections:t.collections})}},{key:"selectCollection",value:function(e,t){var n=e.getState(),i=n.organization,a=n.selectedOrganization;e.patchState({selectedOrganization:a||i,selectedCollection:t.collection})}},{key:"addCollection",value:function(e,t){e.patchState({addingCollection:!0}),this.organizationsService.addCollection(t.organizationId,t.collectionName).pipe(Object(g.a)((function(){e.patchState({addingCollection:!1})}))).subscribe((function(){e.dispatch(new r.c(t.organizationId,t.collectionName))}),(function(t){e.dispatch(new r.b(t))}))}},{key:"addCollectionSuccess",value:function(e,t){this.pendoService.track("Add Collection - Success",{platform:this.productService.productType})}},{key:"addCollectionError",value:function(e,t){this.pendoService.track("Add Collection - Failure",{error:Object(m.get)(t,"error.error.error.message")||"There was an error with collection creation."})}},{key:"removeCollection",value:function(e,t){e.patchState({removingCollection:!0}),this.organizationsService.removeCollection(t.collection).pipe(Object(g.a)((function(){e.patchState({removingCollection:!1})}))).subscribe((function(){e.dispatch(new r.o(t.collection))}),(function(t){e.dispatch(new r.n(t))}))}},{key:"removeCollectionSuccess",value:function(e,t){this.pendoService.track("Remove Collection - Success",{platform:this.productService.productType})}},{key:"removeCollectionError",value:function(e,t){this.pendoService.track("Remove Collection - Failure",{error:Object(m.get)(t,"error.error.error.message")||"There was an error with collection removal."})}},{key:"setCollectionRenameMode",value:function(e,t){e.patchState({collectionRenaming:t.collection})}},{key:"renameCollection",value:function(e,t){e.patchState({updatingCollection:!0}),this.organizationsService.renameCollection(t.collection,t.collectionName).pipe(Object(g.a)((function(){e.patchState({updatingCollection:!1})}))).subscribe((function(){e.dispatch(new r.r(t.collection,t.collectionName))}),(function(t){e.dispatch(new r.q(t))}))}},{key:"renameCollectionSuccess",value:function(e,t){this.pendoService.track("Rename Collection - Success",{platform:this.productService.productType})}},{key:"renameCollectionError",value:function(e,t){this.pendoService.track("Rename Collection - Failure",{error:Object(m.get)(t,"error.error.error.message")||"There was an error with collection renaming."})}},{key:"reorderCollections",value:function(e,t){e.patchState({reorderingCollections:!0}),this.organizationsService.reorderCollections(t.organizationId,t.collections).pipe(Object(g.a)((function(){e.patchState({reorderingCollections:!1})}))).subscribe((function(){e.dispatch(new r.u(t.organizationId,t.collections))}),(function(t){e.dispatch(new r.t(t))}))}},{key:"reorderCollectionsSuccess",value:function(e,t){e.patchState({collections:u(t.collections)})}},{key:"resetOrganizations",value:function(e,t){e.setState(S)}},{key:"createOrganization",value:function(e,t){var n=t.organization;e.patchState({creating:!0}),this.organizationsService.createOrganization(n).pipe(Object(g.a)((function(){return e.patchState({creating:!1})}))).subscribe((function(){return e.dispatch(new r.g)}),(function(t){return e.dispatch(new r.f(t))}))}},{key:"createOrganizationSuccess",value:function(e){this.pendoService.track("Team Creation - Success",{platform:this.productService.productType})}},{key:"createOrganizationFail",value:function(e,t){this.pendoService.track("Team Creation - Failure",{error:Object(m.get)(t,"error.error.error.message")||"There was an error with team creation."})}},{key:"updateOrganization",value:function(e,t){var n=t.organization;e.patchState({updating:!0}),this.organizationsService.updateOrganization(n).pipe(Object(g.a)((function(){return e.patchState({updating:!1})}))).subscribe((function(){return e.dispatch(new r.C)}),(function(t){return e.dispatch(new r.B(t))}))}},{key:"getOrganizationProfile",value:function(e,t){var n=t.request;e.patchState({updating:!0}),this.organizationsService.getPublicProfile(n).pipe().subscribe((function(t){return e.dispatch(new r.l(t))}),(function(t){return e.dispatch(new r.k(t))}))}},{key:"getOrganizationProfileSuccess",value:function(e,t){var n=t.organizationProfile;e.patchState({organizationProfile:n})}},{key:"clearOrganizationProfile",value:function(e,t){e.patchState({organizationProfile:void 0})}}],[{key:"getOrganizations",value:function(e){return e.organizations}},{key:"getOrganization",value:function(e){return e.organization}},{key:"getOrganizationLogo",value:function(e){return e.organization?e.organization.group_logos.default:""}},{key:"getSelectedOrganization",value:function(e){return e.selectedOrganization}},{key:"getSelectedOrganizationProductAccountId",value:function(e){return Object(m.get)(e,"organization.product_acctid")}},{key:"getOrganizationProfile",value:function(e){return e.organizationProfile}},{key:"getOrganizationAccountSettings",value:function(e){return Object(m.get)(e,"organization.group_attributes",[]).filter((function(e){return"account_settings"===e.type})).map((function(e){return l({},e.name,{value:e.value})}))}},{key:"getCollections",value:function(e){return e.collections}},{key:"getSelectedCollection",value:function(e){return e.selectedCollection}},{key:"getReorderingCollections",value:function(e){return e.reorderingCollections}},{key:"getAddingCollection",value:function(e){return e.addingCollection}},{key:"getRemovingCollection",value:function(e){return e.removingCollection}},{key:"getUpdatingCollection",value:function(e){return e.updatingCollection}},{key:"getCollectionRenaming",value:function(e){return e.collectionRenaming}},{key:"getWidgetURL",value:function(e){return e.widgetURL}},{key:"getWidgetOptions",value:function(e){return e.widgetOptions}},{key:"getAppFeatures",value:function(e){return e.appFeatures}},{key:"getCreating",value:function(e){return e.creating}},{key:"getUpdating",value:function(e){return e.updating}},{key:"getCollectionsLoading",value:function(e){return e.loadingCollections}},{key:"hasOrganization",value:function(e){return!Object(m.isNil)(e.organization)}},{key:"isTrial",value:function(e){return Object(m.get)(e,"organization.subscription.type","").includes("Trial")}},{key:"isTrialExpired",value:function(e){return!0===Object(m.get)(e,"organization.subscription.expired",!1)}},{key:"getSubscriptionEndDate",value:function(e){var t=Object(m.get)(e,"organization.subscription.paid_through_date_time");return Object(m.isNil)(t)?void 0:new Date(t)}},{key:"getExternalAccount",value:function(e){var t=e.organization;return null==t?void 0:t.external_account}}]),e}()).\u0275fac=function(e){return new(e||i)(v.Zb(s.a),v.Zb(p.b),v.Zb(f.b),v.Zb(y.a))},i.\u0275prov=v.Lb({token:i,factory:i.\u0275fac}),k([Object(a.a)(r.x),O("design:type",Function),O("design:paramtypes",[Object,r.x]),O("design:returntype",void 0)],i.prototype,"selectOrganization",null),k([Object(a.a)(r.z),O("design:type",Function),O("design:paramtypes",[Object,r.z]),O("design:returntype",void 0)],i.prototype,"setOrganizations",null),k([Object(a.a)(r.h),O("design:type",Function),O("design:paramtypes",[Object,r.h]),O("design:returntype",void 0)],i.prototype,"getCollections",null),k([Object(a.a)(r.i),O("design:type",Function),O("design:paramtypes",[Object,r.i]),O("design:returntype",void 0)],i.prototype,"getCollectionsSuccess",null),k([Object(a.a)(r.w),O("design:type",Function),O("design:paramtypes",[Object,r.w]),O("design:returntype",void 0)],i.prototype,"selectCollection",null),k([Object(a.a)(r.a),O("design:type",Function),O("design:paramtypes",[Object,r.a]),O("design:returntype",void 0)],i.prototype,"addCollection",null),k([Object(a.a)(r.c),O("design:type",Function),O("design:paramtypes",[Object,r.c]),O("design:returntype",void 0)],i.prototype,"addCollectionSuccess",null),k([Object(a.a)(r.b),O("design:type",Function),O("design:paramtypes",[Object,r.b]),O("design:returntype",void 0)],i.prototype,"addCollectionError",null),k([Object(a.a)(r.m),O("design:type",Function),O("design:paramtypes",[Object,r.m]),O("design:returntype",void 0)],i.prototype,"removeCollection",null),k([Object(a.a)(r.o),O("design:type",Function),O("design:paramtypes",[Object,r.o]),O("design:returntype",void 0)],i.prototype,"removeCollectionSuccess",null),k([Object(a.a)(r.n),O("design:type",Function),O("design:paramtypes",[Object,r.n]),O("design:returntype",void 0)],i.prototype,"removeCollectionError",null),k([Object(a.a)(r.y),O("design:type",Function),O("design:paramtypes",[Object,r.y]),O("design:returntype",void 0)],i.prototype,"setCollectionRenameMode",null),k([Object(a.a)(r.p),O("design:type",Function),O("design:paramtypes",[Object,r.p]),O("design:returntype",void 0)],i.prototype,"renameCollection",null),k([Object(a.a)(r.r),O("design:type",Function),O("design:paramtypes",[Object,r.r]),O("design:returntype",void 0)],i.prototype,"renameCollectionSuccess",null),k([Object(a.a)(r.q),O("design:type",Function),O("design:paramtypes",[Object,r.q]),O("design:returntype",void 0)],i.prototype,"renameCollectionError",null),k([Object(a.a)(r.s),O("design:type",Function),O("design:paramtypes",[Object,r.s]),O("design:returntype",void 0)],i.prototype,"reorderCollections",null),k([Object(a.a)(r.u),O("design:type",Function),O("design:paramtypes",[Object,r.u]),O("design:returntype",void 0)],i.prototype,"reorderCollectionsSuccess",null),k([Object(a.a)(r.v),O("design:type",Function),O("design:paramtypes",[Object,r.v]),O("design:returntype",void 0)],i.prototype,"resetOrganizations",null),k([Object(a.a)(r.e),O("design:type",Function),O("design:paramtypes",[Object,r.e]),O("design:returntype",void 0)],i.prototype,"createOrganization",null),k([Object(a.a)(r.g),O("design:type",Function),O("design:paramtypes",[Object]),O("design:returntype",void 0)],i.prototype,"createOrganizationSuccess",null),k([Object(a.a)(r.f),O("design:type",Function),O("design:paramtypes",[Object,r.f]),O("design:returntype",void 0)],i.prototype,"createOrganizationFail",null),k([Object(a.a)(r.A),O("design:type",Function),O("design:paramtypes",[Object,r.A]),O("design:returntype",void 0)],i.prototype,"updateOrganization",null),k([Object(a.a)(r.j),O("design:type",Function),O("design:paramtypes",[Object,r.j]),O("design:returntype",void 0)],i.prototype,"getOrganizationProfile",null),k([Object(a.a)(r.l),O("design:type",Function),O("design:paramtypes",[Object,r.l]),O("design:returntype",void 0)],i.prototype,"getOrganizationProfileSuccess",null),k([Object(a.a)(r.d),O("design:type",Function),O("design:paramtypes",[Object,r.d]),O("design:returntype",void 0)],i.prototype,"clearOrganizationProfile",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getOrganizations",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getOrganization",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",String)],i,"getOrganizationLogo",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getSelectedOrganization",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",String)],i,"getSelectedOrganizationProductAccountId",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getOrganizationProfile",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",Array)],i,"getOrganizationAccountSettings",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getCollections",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getSelectedCollection",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getReorderingCollections",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getAddingCollection",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getRemovingCollection",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getUpdatingCollection",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getCollectionRenaming",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getWidgetURL",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getWidgetOptions",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getAppFeatures",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getCreating",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getUpdating",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getCollectionsLoading",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"hasOrganization",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"isTrial",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"isTrialExpired",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",void 0)],i,"getSubscriptionEndDate",null),k([Object(a.f)(),O("design:type",Function),O("design:paramtypes",[o]),O("design:returntype",Object)],i,"getExternalAccount",null),i=k([Object(a.g)({name:"organizations",defaults:S})],i))},eNUT:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var i=function e(){h(this,e)},a=function e(){h(this,e)},o=function e(){h(this,e)}},eW6i:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n("HDdC");n("e0fF");var a,o=n("7u76"),r=n("uA5T"),s=n("b36G"),c=n("nS47"),l=n("5miH"),p=n("ZriC"),d=n("LvDl"),g=n("fXoL"),f={shown:"shown",renderable:function(e){return Human.scene.objects[e].isRenderable()},pickable:"pickable",label:function(e){return Human.scene.objects[e].displayName},expanded:function(e){return!1},layer:"layer"},m={shown:"trueWins",renderable:"falseWins",pickable:"trueWins"},y={trim:!0},v=function e(t){h(this,e),this.trim=t.trim||!1,this.terminal=t.terminal||[],this.root=t.root||{children:[],replace:!1},this.connect=t.connect||{},this.nodes=t.nodes||[]},k=((a=function(){function e(t){var n=this;h(this,e),this.graphService=t,this.objectToNodeMap={},this.nodeToObjectMap={},this.events={},this.events=Object.values(l.a).reduce((function(e,t){return e[t]=n.makeObservable(t),e}),{})}return b(e,[{key:"makeObservable",value:function(e){return new i.a((function(t){Human.events.on(e,(function(e){t.next(e)}))}))}},{key:"getCanvas",value:function(){return Human.renderer.canvas.canvas}},{key:"getEvent",value:function(e){return this.events[e]}},{key:"fireEvent",value:function(e,t){Human.events.fire(e,t)}},{key:"getSceneBoundary",value:function(){return Human.scene.getBoundary()}},{key:"getObjectBoundary",value:function(e){return Human.scene.objects[e].getBoundary()}},{key:"getObjectLoaded",value:function(e){var t=this.getObjectBoundary(e);return!Object(d.isNil)(t)&&Object.values(t).every((function(e){return isFinite(e)}))}},{key:"pickScene",value:function(e){return Human.renderer.pick.pick(e.x,e.y,{rayPick:e.rayPick})}},{key:"transformObject",value:function(e,t){var n=Human.scene.objects[e];n?n.setTransform(t):console.error("Scene object not found: '".concat(e,"'"))}},{key:"toggleNodes",value:function(e,t){var n=this,i={replace:!1,objects:{},fetchAssets:t};e.forEach((function(e){n.getObjects(e).forEach((function(e){i.objects[e]=t}))})),Human.scene.setEnabledObjects(i)}},{key:"setNodesVisible",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={replace:t,objects:Object.assign({},e),fetchAssets:!0};Human.scene.setEnabledObjects(n)}},{key:"setNodesPickable",value:function(e){var t=this;Object.keys(e).forEach((function(n){(Human.scene.objects[n].isLeaf()?[n]:t.getLeafObjects(n)).forEach((function(t){Human.scene.objects[t].setPickable(e[n])}))}))}},{key:"filterObjects",value:function(e,t){for(var n=e.length;n--;)switch(!0){case e[n]instanceof Human.scene.Group:e[n].objects=this.filterObjects(e[n].objects,t),0===e[n].objects.length&&e.splice(n,1);break;case e[n]instanceof Human.scene.Object:-1===e[n].displayName.toLowerCase().indexOf(t)&&e.splice(n,1)}return e}},{key:"setObjectLayer",value:function(e,t){var n=Human.scene.objects[e];if(n.layer=t,n.renderables)for(var i=0;i<n.renderables.length;++i)n.renderables[i].setLayer(t);else n.hasOwnProperty("_layerNode")?n._layerNode.setPriority(t):n.hasOwnProperty("_propertiesNode")&&n._propertiesNode.setProperties({layer:t})}},{key:"getObjectLayerValues",value:function(e){var t={},n=Human.scene.getBoundary();return e.forEach((function(e){var i=Human.scene.objects[e],a=i.getBoundary(),o=Math.min(a.xmin-n.xmin,n.xmax-a.xmax),r=2*Math.min(a.ymin-n.ymin,n.ymax-a.ymax),s=Math.min(a.zmin-n.zmin,n.zmax-a.zmax),c=i.layer;t[c]=t[c]||[],t[c].push({nodeId:e,value:Math.min(o,r,s)})})),t}},{key:"getSceneGraph",value:function(e){var t=c.a.createGraphFromSrc(e,"objectId","objects",f);return this.graphService.synchronize(t,m),t}},{key:"createViewGraph",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t?c.a.pruneHiddenObjects(Human.scene.rootObjects,e):Human.scene.rootObjects,a=i.reduce((function(e,t){var i=!n&&t.objectId.includes("-root");return e[t.objectId]=!0!==i,i&&t.objects.forEach((function(t){e[t.objectId]=!0})),e}),{}),o=this.getSceneGraph(c.a.pruneHiddenObjects(i,a));return this.graphService.resetDepth(o),o}},{key:"getNode",value:function(e,t){return this.graphService.nodeExists(e,t)?c.a.getNode(e,t):this.objectToNodeMap[t]?c.a.getNode(e,this.objectToNodeMap[t]):null}},{key:"getChapterGraphConfig",value:function(){var e=Human.timeline.activeRoot._nowBranch;return new v(Object.assign(Object.assign({},y),e.graph||{}))}},{key:"getRootObjects",value:function(){return Human.scene.rootObjects}},{key:"getAllSceneObjects",value:function(){return Human.scene.objects}},{key:"getObjects",value:function(e){return this.nodeToObjectMap[e]?this.nodeToObjectMap[e]:[Human.scene.objects[e].objectId]||!1}},{key:"getLeafObjects",value:function(e){if(e in this.nodeToObjectMap){var t={};return this.nodeToObjectMap[e].forEach((function(e){Human.scene.objects[e].isLeaf()?t[e]=!0:Human.scene.getLeaves(e).forEach((function(e){t[e]=!0}))})),Object.keys(t)}return e in Human.scene.objects?Human.scene.getLeaves(e):[]}},{key:"getChapter",value:function(e){return Human.timeline.branchTimelines[e]||null}},{key:"getActiveChapters",value:function(){return Human.timeline.activeRoot?Human.timeline.activeRoot._chapters:[]}},{key:"getBoundaryFromObjects",value:function(e){return e=e.filter((function(e){return Human.scene.objects[e].isLeaf()})),Human.scene.getBoundary({objectIds:e,clipped:!0})}},{key:"getLeaves",value:function(e){return Human.scene.getLeaves(e)}},{key:"getVisibleLeaves",value:function(){return Human.scene.getEnabledLeaves()}},{key:"getCameraLookAt",value:function(){return Object(s.plainToClass)(r.a,Human.renderer.camera.getLookAt())}},{key:"barycentricToWorld",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=new Float32Array([0,0,0]);return Human.scene.objects[e].barycentricToWorldSpace(i,t,n,a),isNaN(a[0])?[0,0,0]:u(Array.from(a))}},{key:"setGraphState",value:function(e){Human.scene.setObjectProperties(e)}},{key:"getAssetNamespaces",value:function(){var e={};return Object.keys(Human.assets.loadedAssets).map((function(e){return e.split("/")[0]})).forEach((function(t){e[t]=!0})),Object.keys(e)}},{key:"loadGraphObject",value:function(e){var t=this.getObjects(e).map((function(e){return Human.scene.objects[e]}));return new i.a((function(e){Human.scene.graph.attachAssetSetsToSubtree(t,null,(function(){e.next(!0),e.complete()}))}))}},{key:"setProperties",value:function(e){Human.properties.set(e)}},{key:"getDefaultProperties",value:function(){return Human.properties.getDefaults()}},{key:"setTransparencyMode",value:function(e){Human.renderer.setTransparencyMode(e)}},{key:"setPostProcessingEnabled",value:function(e){e?Human.renderer.postprocess.enable():Human.renderer.postprocess.disable()}},{key:"setPostProcessingFeatures",value:function(e){var t=e.filter((function(e){return e.effect!==p.a.GroundShadow}));Human.renderer.postprocess.parse(t);var n=e.find((function(e){return e.effect===p.a.GroundShadow}));n?(Human.renderer.groundShadow.init(),Human.renderer.groundShadow.update({blurAmount:n.blur,opacity:n.opacity,translation:[n.xPos,n.yPos,n.zPos],scale:n.size})):Human.renderer.groundShadow.destroy()}},{key:"enableAnimation",value:function(){Human.timeline.enableAnimation()}},{key:"enableRender",value:function(){Human.renderer.enableRender()}},{key:"canIRender",value:function(){return Human.renderer.canIRender()}},{key:"enableLightLib",value:function(e){var t=Human.assets.lights.lightIds[e];if(Array.isArray(t)){var n={};t.forEach((function(e){n[e]=!0})),Human.renderer.lights.clearEnabled(),Human.renderer.lights.setEnabled(n)}}},{key:"setBranchLights",value:function(e,t){var n=Human.timeline.branchTimelines[e];n.lights.libraries[0]!==t&&(n.lights.libraries[0]=t,this.enableLightLib(t))}},{key:"loadLightLib",value:function(e){return new Promise((function(t,n){Human.assets.getAssetLibrary("light","lights",e,"outline",{},(function(){var i=Human.assets.lights.lightIds;Array.isArray(i[e])?t(e):n()}))}))}}]),e}()).\u0275fac=function(e){return new(e||a)(g.Zb(o.a))},a.\u0275prov=g.Lb({token:a,factory:a.\u0275fac,providedIn:"root"}),a)},ejx4:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ofXK"),a=n("vvyD"),o=n("PCNd"),r=n("tyNb"),s=n("fXoL"),c=function(){var e=function e(){h(this,e)};return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a,r.i,o.a]]}),e}()},esev:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("5miH"),a=n("RD2w"),o=n("2Vo4"),r=function(){var e=function(){function e(){h(this,e)}return b(e,[{key:"on",value:function(e,t){Human.events.on(e,t)}},{key:"send",value:function(t,n){var o=null,r={};switch(t){case a.a.NativeErrorMessage:(o=e.snackBar.open(n,"OK",{duration:6e3,verticalPosition:"top"})).onAction().subscribe((function(){o.dismiss()}));break;case a.a.NativeSetAppVersion:e.appVersion=n.appVersion;break;case a.a.NativeRedirect:r=JSON.parse(n.queryItems),e.router.navigate([n.url],{queryParams:r});break;case a.a.NativeReload:window.location.href=n.url;break;case a.a.NativeOfflineModelIds:e.setOfflineModelIDs(n.modelIds);break;default:Human.events.fire(i.a.NativeDebugMessage,"unprocessed HumanWindowAPI send "+t)}}}],[{key:"getOfflineModelIDs",value:function(){return e._offlineModelIDs$}},{key:"setOfflineModelIDs",value:function(t){e._offlineModelIDs.next(t)}},{key:"getOfflineModelIDList",value:function(){return this._offlineModelIDs.getValue()}},{key:"setStore",value:function(t){e.store=t}},{key:"setSnackBar",value:function(t){e.snackBar=t}},{key:"setRouter",value:function(t){e.router=t}},{key:"debug",value:function(e){"undefined"!=typeof Human&&void 0!==Human.events&&Human.events.fire(i.a.NativeDebugMessage,e)}},{key:"fire",value:function(e,t){Human.events.fire(e,t)}}]),e}();return e.store=null,e.snackBar=null,e.router=null,e.appVersion="",e._offlineModelIDs=new o.a([]),e._offlineModelIDs$=e._offlineModelIDs.asObservable(),e}()},ewuU:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("V7wM"),a=function(e,t){var n=u(e);return t.forEach((function(e){n.push(void 0!==e?Number(e):1)})),n},o=function(e){var t=/rgba?\((\d{1,3})\,\s*(\d{1,3})\,\s*(\d{1,3})\,?\s*(\d+\.\d{0,5})?\)/g,n=[],i=t.exec(e),o=t.exec(e);return n=a(n,i.slice(1,5)),n=a(n,o.slice(1,5))},r=function(){function e(t,n,i){h(this,e),this.colors=t,this.gradientType=n,this.colorStops=i}return b(e,null,[{key:"equals",value:function(e,t){return e.gradientType===t.gradientType&&e.colors.length===t.colors.length&&e.colors.every((function(e,n){return e===t.colors[n]}))&&e.colorStops.length===t.colorStops.length&&e.colorStops.every((function(e,n){return e===t.colorStops[n]}))}},{key:"deserialize",value:function(t){if(!Object.keys(t).length)return null;var n=[];"string"==typeof t.colors?n=o(t.colors):Array.isArray(t.colors)&&8===t.colors.length&&(n=t.colors.map((function(e,t){return(t+1)%4&&e<=1?Math.round(255*e):e})));var i=/radial|linear/.test(t.gradientType)?t.gradientType:"radial",a=t.colorStops;return new e(n,i,Array.isArray(a)&&2===a.length?[a[0],a[1]]:[0,100])}},{key:"toCSS",value:function(e){var t=e.colors,n="rgba(".concat(t[0],",").concat(t[1],", ").concat(t[2],", ").concat(t[3],") ").concat(e.colorStops[0],"%"),i="rgba(".concat(t[4],",").concat(t[5],", ").concat(t[6],", ").concat(t[7],") ").concat(e.colorStops[1],"%");return"radial"===e.gradientType?"radial-gradient(circle, ".concat(n,", ").concat(i,")"):"linear-gradient(180deg, ".concat(n,", ").concat(i,")")}},{key:"fromCSS",value:function(t){var n=/radial-gradient/.test(t)?"radial":"linear",i=o(t),a=/([0-9]+)\%/g,r=[0,100];return r[0]=Number(a.exec(t)[1]),r[1]=Number(a.exec(t)[1]),new e(i,n,r)}},{key:"isTransparent",value:function(e){if(!e||!e.colors)return!1;var t=e.colors,n=t[3];return t.length<=4?0===n:0===n&&0===t[7]}},{key:"isLight",value:function(e){var t=null==e?void 0:e.colors;if(Array.isArray(t)){var n=t.slice(0,3);return i.a.isLight(n)}return!1}}]),e}()},f3gM:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Web="web",e.SDK="sdk",e}({})},f5j2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("nS47");!function(e){function t(e,t){return e.reduce((function(e,n){return e[n]=t[n]||!1,e}),{})}e.createVoter=t,e.getInitialVoterState=function(e,n){return Object.keys(e).reduce((function(i,a){return i[a]=t(n,e[a]),i}),{})},e.getInitialElectionDepth=function(e,t){return Object.keys(e).reduce((function(e,n){return Math.max(e,a.a.getNode(t,n).depth)}),0)-1},e.getEligibleElections=function(e,t,n){return a.a.getAllAncestorsFromList(e,t).filter((function(t){return t&&a.a.getNode(e,t).depth===n}))};var n={trueWins:function(e){return{result:e.votesFor.length>0,dissenters:u(e.votesAgainst)}},falseWins:function(e){return{result:e.votesAgainst.length>0,dissenters:u(e.votesFor)}},majorityWins:function(e){var t=e.votesFor.length>e.votesAgainst.length;return{result:t,dissenters:u(t?e.votesAgainst:e.votesFor)}}};function i(e,t,i){return Object.keys(t).reduce((function(a,o){var r=t[o],s=i[o]||"majorityWins",c=n[s](r),l=c.result,p=c.dissenters;return a[o]={id:e,result:l,dissenters:p,voters:[].concat(u(r.votesFor),u(r.votesAgainst))},a}),{})}e.buildElectionResult=i,e.getElectionResults=function(e,n,o,r){var s=n,c=Object.keys(r);return{results:o.reduce((function(o,u){var d=a.a.getSuccessors(e,u),g=d.map((function(i){return l({},i,n[i]||t(c,a.a.getState(e,i,c)))}));d.forEach((function(e){delete s[e]}));var h=i(u,function(e,t){return Object.keys(e).reduce((function(e,n){var i=t.reduce((function(e,t){var i=Object.keys(t)[0];return t[i][n]?e.votesFor.push(i):e.votesAgainst.push(i),e}),{votesFor:[],votesAgainst:[]});return e[n]=i,e}),{})}(r,g),r);return s[u]=Object.entries(h).reduce((function(e,t){var n=p(t,2),i=n[0],a=n[1];return e[i]=a.result,e}),{}),o.results.push(h),o}),{results:[]}).results,remainingVoters:s}}}(i||(i={}))},fMqy:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Circle="circle",e.CirclePlus="circle-plus",e.CircleMinus="circle-minus",e.Label="label",e.CircleLabel="circle-label",e}({})},"fP/T":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n("ofXK"),a=n("AcyG"),o=n("YpC8"),r=n("N0Zw"),s=n("PCNd"),c=n("Mh2x"),u=n("vvyD"),l=n("aKmd"),p=n("lR5k"),d=n("oH02"),g=n("3Pt+"),f=n("Rc+H"),b=n("Vrox"),m=n("fXoL"),y=function(){var e=function e(){h(this,e)};return e.\u0275mod=m.Nb({type:e}),e.\u0275inj=m.Mb({factory:function(t){return new(t||e)},imports:[[a.d.forFeature([o.a,c.a,r.a,b.a]),i.c,s.a,u.a,l.a,d.a,g.z,p.a.forChild(),f.a]]}),e}()},fnuH:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Mouse="mouse",e.Touch="touch",e}({})},fqos:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.flyToChapter="flyToChapter",e.flyToObject="flyToObject",e.flyToCamera="flyToCamera",e}({})},g408:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("7b4e");!function(e){e.makeChapterIdMap=function(e,t){return e.reduce((function(e,n){return e[n.id]=!0===t?a.a.idWithPrefix("chapter"):n.id,e}),{})}}(i||(i={}))},gQBz:function(t,n,i){"use strict";i.d(n,"c",(function(){return c})),i.d(n,"b",(function(){return u})),i.d(n,"a",(function(){return l}));var a=i("EF3F"),o=i("0Yvn"),r=i("GUwF"),s=i("nS47");function c(t,n,i){var a=s.a.getSuccessors(t,n);if(0===a.length)return!1;var o,r=e(a);try{for(r.s();!(o=r.n()).done;){var u=o.value;if(!0===i[u])return!0}}catch(l){r.e(l)}finally{r.f()}return a.some((function(e){return c(t,e,i)}))}function u(e,t,n){switch(n[t]){case!0:return!0;case!1:return!1;case void 0:var i=s.a.getAncestor(e,t);return!!i&&u(e,i,n)}}function l(e,t,n,i){return Object.keys(e.nodes).reduce((function(l,p){return l[p]=function(l){var p=u(e,l,t)||c(e,l,t),d=function e(t,n,i){switch(i[n]){case!0:return!1;case!1:return!0;case void 0:var a=s.a.getAncestor(t,n);return!a||e(t,a,i)}}(e,l,n);return{objectId:l,checked:!1,selected:!1,paint:function e(t,n,i){if(i&&i[n]&&("tintColor"in(c=i[n])||"opacity"in c||"brightness"in c||"saturation"in c||"contrast"in c))return o.a.fromEngine(new r.a(i[n]));var c,u=s.a.getAncestor(t,n);return u?e(t,u,i):a.c}(e,l,i),pickable:d,shown:p,shownSetByTween:!1}}(p),l}),{})}},"gm/O":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){var t=function e(){h(this,e)};t.type="[Engine Nodes] Reset",e.Reset=t;var n=function e(t){h(this,e),this.nodeState=t};n.type="[Engine Nodes] init nodes",e.InitNodeState=n;var i=function e(t){h(this,e),this.patches=t};i.type="[Engine Nodes] patch nodes",e.ApplyPatch=i;var a=function e(t){h(this,e),this.activeChapterId=t};a.type="[Engine Nodes] set active chapter",e.SetActiveChapter=a;var o=function e(t,n){h(this,e),this.originalChapterId=t,this.copyChapterId=n};o.type="[Engine Nodes] Duplicate node state",e.DuplicateNodeState=o;var r=function e(t,n,i){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];h(this,e),this.show=t,this.objectIds=n,this.patch=i,this.record=a,this.setByTween=o};r.type="[Engine Nodes] update nodes shown",e.UpdateNodesShown=r;var s=function e(t){h(this,e),this.objectId=t};s.type="[Engine Nodes] update nodes selected",e.UpdateNodeSelected=s;var c=function e(t,n,i){h(this,e),this.checked=t,this.objectIds=n,this.patch=i};c.type="[Engine Nodes] update nodes checked",e.UpdateNodesChecked=c;var u=function e(t,n,i){h(this,e),this.pickable=t,this.objectIds=n,this.patch=i};u.type="[Engine Nodes] update nodes pickable",e.UpdateNodesPickable=u;var l=function e(t,n,i){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];h(this,e),this.recipe=t,this.objectIds=n,this.patch=i,this.record=a};l.type="[Engine Nodes] update nodes paint",e.UpdateNodesPaint=l}(i||(i={}))},gw9s:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i,a=n("wOnQ"),o=n.n(a),r=(n("INDF"),n("LRne")),s=n("HDdC"),c=n("Cfvw"),l=n("Iab2"),p=n("VUv2");!function(e){e.exportImage=function(t,n,i,a){var o="string"==typeof t?e.base64ToBlob(t,n):t;return a?Object(p.changeDpiBlob)(o,a).then((function(e){Object(l.saveAs)(e,i)})):Object(l.saveAs)(o,i),Object(r.a)(!0)},e.canvasToBlob=function(e,t,n){return new s.a((function(i){e.toBlob((function(e){i.next(e),i.complete()}),t,n)}))},e.fitCanvas=function(e,t){var n=t.width,i=t.height,a=document.createElement("canvas");a.width=n,a.height=i;var o=a.getContext("2d"),r=Math.max(.5*(e.width-a.width/a.height*e.height),0);return new s.a((function(t){o.drawImage(e,r,0,a.width,a.height),t.next(a),t.complete()}))},e.elementToCanvas=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?{backgroundColor:"transparent"}:{};return Object(c.a)(o()(e,Object.assign({scale:1},n)))},e.combineCanvasElements=function(e){var t=Math.max.apply(Math,[0].concat(u(e.map((function(e){return e.width}))))),n=Math.max.apply(Math,[0].concat(u(e.map((function(e){return e.height}))))),i=document.createElement("canvas");i.width=t,i.height=n;var a=i.getContext("2d");return e.forEach((function(e){a.drawImage(e,0,0)})),i},e.base64ToBlob=function(e,t){for(var n=atob(e.split(",")[1]),i=new ArrayBuffer(n.length),a=new Uint8Array(i),o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return new Blob([i],{type:t})},e.blobToBase64=function(e){return new s.a((function(t){var n=new FileReader;n.addEventListener("load",(function(){t.next(n.result),t.complete()})),n.readAsDataURL(e)}))},e.blobToCanvas=function(e,t){var n=t.width,i=t.height;return new s.a((function(t){var a=document.createElement("canvas");a.width=n,a.height=i;var o=a.getContext("2d"),r=new Image;r.addEventListener("load",(function(){o.drawImage(r,0,0),t.next(a),t.complete()})),r.src=URL.createObjectURL(e)}))}}(i||(i={}))},gzgB:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.BioDigital="biodigital",e.Wikipedia="wikipedia",e.NCIT="ncit",e}({})},h8op:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s}));var i=n("ve2m"),a=n("zKvh"),o=function(){var e=function e(t){h(this,e),this.thumbnails=t};return e.type="[Story Chapters] Register thumbnail URLs from story",e}(),r=function(){var e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.a.JPEG,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.92,s=arguments.length>4?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"original",u=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[];h(this,e),this.chapterId=t,this.background=n,this.imageType=o,this.imageQuality=r,this.dimensions=s,this.crop=c,this.includeLabels=u,this.includeCopyright=l,this.layers=p};return e.type="[Story Chapters] Take picture",e}(),s=function(){var e=function e(t,n,i){h(this,e),this.chapterId=t,this.blob=n,this.dimensions=i};return e.type="[Story Chapters] Take picture success",e}()},hQIT:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("ofXK"),a=n("AcyG"),o=n("vvyD"),r=n("PCNd"),s=n("3Pt+"),c=n("c8sk"),u=n("R9Cn"),l=n("fXoL"),p=function(){var e=function e(){h(this,e)};return e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({factory:function(t){return new(t||e)},imports:[[i.c,o.a,s.z,r.a,u.b,a.d.forFeature([c.a])]]}),e}()},hQeY:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("0IaG"),a=n("fXoL"),o=n("ofXK"),r=n("IlST");function s(e,t){if(1&e&&(a.Vb(0,"button",7),a.Pc(1),a.Ub()),2&e){var n=a.gc();a.Db(1),a.Rc(" ",n.settings.miscText," ")}}function c(e,t){if(1&e&&(a.Vb(0,"button",8),a.Pc(1),a.Ub()),2&e){var n=a.gc();a.mc("mat-dialog-close",!1),a.Db(1),a.Rc(" ",n.settings.cancelText," ")}}function u(e,t){if(1&e&&(a.Vb(0,"button",9),a.Pc(1),a.Ub()),2&e){var n=a.gc();a.mc("mat-dialog-close",!0),a.Db(1),a.Rc(" ",n.settings.confirmText," ")}}var l=function(){var e=function(){function e(t,n){h(this,e),this.dialogRef=t,this.data=n,this.settings={titleText:"Confirm Action",bodyText:"",confirmText:"Confirm",confirmColor:"primary",cancelText:"Cancel",confirmEnabled:!0,cancelEnabled:!0,miscText:""},n&&(this.settings=Object.assign(Object.assign({},this.settings),n))}return b(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Pb(i.g),a.Pb(i.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-confirm-dialog"]],decls:10,vars:8,consts:[["data-test","confirmDialog","role","alertdialog","aria-modal","true"],["mat-dialog-title",""],["mat-dialog-content","",1,"pt-4","pb-6","text-14"],["mat-dialog-actions","",1,"dialog__actions","pt-2"],["app-button","","buttonTheme","light",3,"mat-dialog-close",4,"ngIf"],["type","button","class","mr-1","app-button","","buttonTheme","light","data-test","confirmDialogCancelButton",3,"mat-dialog-close",4,"ngIf"],["type","button","app-button","","buttonType","primary","data-test","confirmDialogConfirmButton","cdkFocusInitial","",3,"mat-dialog-close",4,"ngIf"],["app-button","","buttonTheme","light",3,"mat-dialog-close"],["type","button","app-button","","buttonTheme","light","data-test","confirmDialogCancelButton",1,"mr-1",3,"mat-dialog-close"],["type","button","app-button","","buttonType","primary","data-test","confirmDialogConfirmButton","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Vb(1,"h1",1),a.Pc(2),a.Ub(),a.Vb(3,"p",2),a.Pc(4),a.Ub(),a.Vb(5,"div",3),a.Nc(6,s,2,1,"button",4),a.Vb(7,"div"),a.Nc(8,c,2,2,"button",5),a.Nc(9,u,2,2,"button",6),a.Ub(),a.Ub(),a.Ub()),2&e&&(a.Eb("aria-label",t.settings.titleText),a.Db(2),a.Rc(" ",t.settings.titleText," "),a.Db(2),a.Rc(" ",t.settings.bodyText," "),a.Db(1),a.Hb("dialog__actions--compact",!t.settings.miscText),a.Db(1),a.mc("ngIf",t.settings.miscText),a.Db(2),a.mc("ngIf",t.settings.cancelEnabled),a.Db(1),a.mc("ngIf",t.settings.confirmEnabled))},directives:[i.h,i.e,i.c,o.p,r.a,i.d],styles:["[_nghost-%COMP%]{display:block}.dialog__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.dialog__actions--compact[_ngcontent-%COMP%]{justify-content:flex-end}@media (min-width:480px){[_nghost-%COMP%]{min-width:320px}}"],changeDetection:0}),e}()},icKS:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("AytR"),a=n("fXoL"),o=n("nLfN"),r=function(e){return e.Web="web",e.Android="mobile_android",e.iOS="mobile_ios",e}({}),s=function(){var e=function(){function e(t){h(this,e),this.platform=t}return b(e,[{key:"productKey",get:function(){return i.a.productKey}},{key:"productType",get:function(){if(i.a.native){if(this.platform.ANDROID)return r.Android;if(this.platform.IOS)return r.iOS}return r.Web}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Zb(o.a))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},ihWl:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l}));var i=n("EETq"),a=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";h(this,e),this.categoryId=t,this.tags=n,this.query=a,this.type=i.a.Category},o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];h(this,e),this.organizationId=t,this.query=n,this.tags=a,this.type=i.a.Organization},r=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];h(this,e),this.organizationId=t,this.collectionId=n,this.query=a,this.tags=o,this.type=i.a.Collection},s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];h(this,e),this.query=t,this.tags=n,this.categoryId="public",this.type=i.a.Community},c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];h(this,e),this.query=t,this.tags=n,this.type=i.a.Private},u=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];h(this,e),this.query=t,this.directory=n,this.tags=a,this.type=i.a.Internal},l=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];h(this,e),this.primary=t,this.secondary=n,this.query=a,this.tags=o,this.type=i.a.Loft}},izPL:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ofXK"),a=n("+pSP"),o=n("fXoL"),r=function(){var e=function e(){h(this,e)};return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a]]}),e}()},j8e5:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i,a=n("AcyG");!function(e){var t=function e(t){h(this,e),this.breakpoint=t};t.type="[View] Set Breakpoint",e.SetBreakpoint=t}(i||(i={}));var o,r=n("Ryms"),s=n("itXk"),c=n("lJxs"),u=n("/uUt"),l=n("pLZG"),d=n("fXoL"),g=n("0MNC"),f=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function e(){h(this,e)},v=((o=function(){function e(t,n){h(this,e),this.breakpointObserver=t,this.store=n}return b(e,[{key:"setBreakpoint",value:function(e,t){e.patchState({breakpoint:t.breakpoint})}},{key:"ngxsOnInit",value:function(e){var t=this.breakpointObserver.observe(["(max-width: 374px)"]),n=this.breakpointObserver.observe(["(max-width: 599px)"]),a=this.breakpointObserver.observe(["(max-width: 959px)"]),o=this.breakpointObserver.observe(["(max-width: 1439px)"]),d=this.breakpointObserver.observe(["(min-width: 1440px)"]);Object(s.b)(t,n,a,o,d).pipe(Object(c.a)((function(e){var t=p(e,5),n=t[0],i=t[1],a=t[2],o=t[3],s=t[4];return n.matches?r.a.XSmall:i.matches?r.a.Small:a.matches?r.a.Medium:o.matches?r.a.Large:s.matches?r.a.XLarge:null})),Object(u.a)(),Object(l.a)((function(e){return null!=e}))).subscribe((function(t){e.dispatch(new i.SetBreakpoint(t))}))}}],[{key:"getBreakpoint",value:function(e){return e.breakpoint}},{key:"getBreakpointLabel",value:function(e){return["(max-width: 374px)","(max-width: 599px)","(max-width: 959px)","(max-width: 1439px)","(min-width: 1440px)"][e.breakpoint]}}]),e}()).\u0275fac=function(e){return new(e||o)(d.Zb(g.a),d.Zb(a.h))},o.\u0275prov=d.Lb({token:o,factory:o.\u0275fac}),f([Object(a.a)(i.SetBreakpoint),m("design:type",Function),m("design:paramtypes",[Object,i.SetBreakpoint]),m("design:returntype",void 0)],o.prototype,"setBreakpoint",null),f([Object(a.f)(),m("design:type",Function),m("design:paramtypes",[y]),m("design:returntype",void 0)],o,"getBreakpoint",null),f([Object(a.f)(),m("design:type",Function),m("design:paramtypes",[y]),m("design:returntype",void 0)],o,"getBreakpointLabel",null),o=f([Object(a.g)({name:"breakpoint",defaults:{breakpoint:null}})],o))},jDQD:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Capture="capture",e.DoNotCaptureShowMessage="do_not_capture_show_message",e.DoNotCapture="do_not_capture",e}({})},jjCP:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"j",(function(){return s})),n.d(t,"i",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return p})),n.d(t,"m",(function(){return d})),n.d(t,"k",(function(){return g})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return b}));var i=function(){var e=function e(t){h(this,e),this.view=t};return e.type="[Edit] Set view",e}(),a=function(){var e=function e(){h(this,e)};return e.type="[Edit] Next view",e}(),o=function(){var e=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;h(this,e),this.quizLocked=t,this.quizQuestion=n};return e.type="[Edit] Preview",e}(),r=function(){var e=function e(){h(this,e)};return e.type="[Edit] Previous view",e}(),s=function(){var e=function e(t){h(this,e),this.show=t};return e.type="[Edit] Show columns",e}(),c=function(){var e=function e(t,n){h(this,e),this.column=t,this.show=n};return e.type="[Edit] Show column",e}(),u=function(){var e=function e(t){h(this,e),this.show=t};return e.type="[Edit] Show Timeline Editor",e}(),l=function(){var e=function e(){h(this,e)};return e.type="[Edit] Reset",e}(),p=function(){var e=function e(t){h(this,e),this.layerOrderMode=t};return e.type="[Edit] Set Layer Order Mode",e}(),d=function(){var e=function e(t){h(this,e),this.show=t};return e.type="[Edit] Show Tree Node Ids",e}(),g=function(){var e=function e(t){h(this,e),this.show=t};return e.type="[Edit] Show Root Nodess",e}(),f=function(){var e=function e(t){h(this,e),this.size=t};return e.type="[Edit] Set Canvas Size",e}(),b=function(){var e=function e(t){h(this,e),this.enable=t};return e.type="[Edit] Auto Capture",e}()},"k+hL":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){h(this,e)}},k0jR:function(e,t,n){"use strict";n.d(t,"o",(function(){return i})),n.d(t,"n",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"p",(function(){return p})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return g})),n.d(t,"m",(function(){return f})),n.d(t,"l",(function(){return b})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return v}));var i=function(){var e=function e(t){h(this,e),this.widgetURL=t};return e.type="[Publish] Set Widget URL",e}(),a=function(){var e=function e(t){h(this,e),this.dimensions=t};return e.type="[Publish] Set Dimensions",e}(),o=function(){var e=function e(t,n,i){h(this,e),this.model=t,this.widgetOptions=n,this.camera=i};return e.type="[Publish] Get iFrame",e}(),r=function(){var e=function e(t){h(this,e),this.embed=t};return e.type="[Publish] Get iFrame Success",e}(),s=function(){var e=function e(){h(this,e)};return e.type="[Publish] Get iFrame Fail",e}(),c=function(){var e=function e(t,n,i){h(this,e),this.model=t,this.widgetOptions=n,this.camera=i};return e.type="[Publish] Get URL",e}(),u=function(){var e=function e(t,n){h(this,e),this.model=t,this.url=n};return e.type="[Publish] Get URL Success",e}(),l=function(){var e=function e(t){h(this,e),this.model=t};return e.type="[Publish] Get URL Fail",e}(),p=function(){var e=function e(t){h(this,e),this.publishing=t};return e.type="[Publish] Set Publishing",e}(),d=function(){var e=function e(){h(this,e)};return e.type="[Publish] Reset Publishing",e}(),g=function(){var e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jpeg";h(this,e),this.imageData=t,this.imageType=n};return e.type="[Publish] Save Publish Image",e}(),f=function(){var e=function e(t){h(this,e),this.imageURL=t};return e.type="[Publish] Save Publish Image Success",e}(),b=function(){var e=function e(){h(this,e)};return e.type="[Publish] Save Publish Image Fail",e}(),m=function(){var e=function e(t,n,i,a,o){h(this,e),this.model=t,this.imageData=n,this.fileType=i,this.widgetOptions=a,this.camera=o};return e.type="[Publish] Get Publish Image Code",e}(),y=function(){var e=function e(t){h(this,e),this.embed=t};return e.type="[Publish] Get Publish Image Code Success",e}(),v=function(){var e=function e(){h(this,e)};return e.type="[Publish] Get Publish Image Code Fail",e}()},k93M:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("AcyG"),a=n("Dz/e"),o=n("fXoL"),r=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},s=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c={storyLoadProgress:0,chunkLoadProgress:0},u=function(){var e=function(){function e(){h(this,e)}return b(e,[{key:"setProgress",value:function(e,t){e.patchState({storyLoadProgress:t.storyLoadProgress,chunkLoadProgress:t.chunkLoadProgress})}},{key:"resetProgress",value:function(e,t){e.setState(Object.assign({},c))}}],[{key:"getStoryLoadProgress",value:function(e){return e.storyLoadProgress}},{key:"getChunkLoadProgress",value:function(e){return e.chunkLoadProgress}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac}),r([Object(i.a)(a.b),s("design:type",Function),s("design:paramtypes",[Object,a.b]),s("design:returntype",void 0)],e.prototype,"setProgress",null),r([Object(i.a)(a.a),s("design:type",Function),s("design:paramtypes",[Object,a.a]),s("design:returntype",void 0)],e.prototype,"resetProgress",null),r([Object(i.f)(),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],e,"getStoryLoadProgress",null),r([Object(i.f)(),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],e,"getChunkLoadProgress",null),e=r([Object(i.g)({name:"engineProgress",defaults:c})],e)}()},"kR+W":function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"i",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"j",(function(){return r})),n.d(t,"l",(function(){return s})),n.d(t,"k",(function(){return c})),n.d(t,"q",(function(){return u})),n.d(t,"s",(function(){return l})),n.d(t,"r",(function(){return p})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return y})),n.d(t,"p",(function(){return v})),n.d(t,"w",(function(){return k})),n.d(t,"y",(function(){return O})),n.d(t,"x",(function(){return S})),n.d(t,"m",(function(){return x})),n.d(t,"o",(function(){return C})),n.d(t,"n",(function(){return w})),n.d(t,"t",(function(){return j})),n.d(t,"v",(function(){return P})),n.d(t,"u",(function(){return _}));var i=function(){var e=function e(t){h(this,e),this.organization=t};return e.type="[Users] Join Organization",e}(),a=function(){var e=function e(t){h(this,e),this.organization=t};return e.type="[Users] Join Organization Success",e}(),o=function(){var e=function e(t){h(this,e),this.organization=t};return e.type="[Users] Join Organization Fail",e}(),r=function(){var e=function e(t){h(this,e),this.code=t};return e.type="[Users] Join Organization With Code",e}(),s=function(){var e=function e(t){h(this,e),this.organizationName=t};return e.type="[Users] Join Organization With Code Success",e}(),c=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Users] Join Organization With Code Fail",e}(),u=function(){var e=function e(t,n){h(this,e),this.groupEID=t,this.invites=n};return e.type="[Users] Send Organization Invite",e}(),l=function(){var e=function e(t){h(this,e),this.responses=t};return e.type="[Users] Send Organization Invite Success",e}(),p=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Users] Send Organization Invite Fail",e}(),d=function(){var e=function e(t){h(this,e),this.groupId=t};return e.type="[Users] Get Organization Users",e}(),g=function(){var e=function e(t){h(this,e),this.users=t};return e.type="[Users] Get Organization Users Success",e}(),f=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Users] Get Organization Users Fail",e}(),b=function(){var e=function e(t){h(this,e),this.groupId=t};return e.type="[Users] Get Organization Invited Users",e}(),m=function(){var e=function e(t){h(this,e),this.invites=t};return e.type="[Users] Get Organization Invited Users Success",e}(),y=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Users] Get Organization Invited Users Fail",e}(),v=function(){var e=function e(){h(this,e)};return e.type="[Users] Reset",e}(),k=function(){var e=function e(t,n){h(this,e),this.groupId=t,this.users=n};return e.type="[Users] Update User Roles",e}(),O=function(){var e=function e(t,n){h(this,e),this.groupId=t,this.users=n};return e.type="[Users] Update User Roles Success",e}(),S=function(){var e=function e(){h(this,e)};return e.type="[Users] Update User Roles Fail",e}(),x=function(){var e=function e(t,n){h(this,e),this.groupId=t,this.users=n};return e.type="[Users] Remove Organization User",e}(),C=function(){var e=function e(t,n){h(this,e),this.groupId=t,this.users=n};return e.type="[Users] Remove Organization User Success",e}(),w=function(){var e=function e(){h(this,e)};return e.type="[Users] Remove Organization User Fail",e}(),j=function(){var e=function e(t,n){h(this,e),this.groupId=t,this.users=n};return e.type="[Users] Transfer Organization Content",e}(),P=function(){var e=function e(t,n){h(this,e),this.groupId=t,this.users=n};return e.type="[Users] Transfer Organization Content Success",e}(),_=function(){var e=function e(){h(this,e)};return e.type="[Users] Transfer Organization Content Fail",e}()},kTA6:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p}));var i=n("tyNb"),a=n("LvDl"),o=n("pLZG"),r=n("AytR"),s=n("bKUj"),c=n("7PKw"),u=n("fXoL"),l=function(e){return e.DiscoveredChapterNav="Discovered Chapter Nav",e}({}),p=function(){var e=function(){function e(t,n,i,a){h(this,e),this.config=t,this.router=n,this.route=i,this.organizationsService=a,this.appended=!1,this.initialized=!1,this.sessionEvents={},this.pageEvents={},this.queuedEvents=[],this.initRouteListener()}return b(e,[{key:"appendScript",value:function(){if(this.config.enabled&&!this.appended){var e="\n      (function(apiKey){\n        (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=o._q||[];\n        v=['initialize','identify','updateOptions','pageLoad','track'];for(w=0,x=v.length;w<x;++w)(function(m){\n            o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);\n            y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';\n            z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');\n      })('".concat(this.config.pendoId,"');\n    "),t=document.createElement("script");t.textContent=e,document.body.appendChild(t),this.appended=!0}}},{key:"initialize",value:function(e){if(this.pendoEnabled()){var t=Object.assign({},e);t.visitor.id&&this.setIds(t),pendo.initialize(t),this.initialized=!0,this.flushQueuedEvents()}}},{key:"identify",value:function(e){if(this.pendoEnabled()){var t=Object.assign({},e);this.setIds(t),pendo.identify(t)}}},{key:"createVisitorData",value:function(e){var t={},n=Object(s.b)(e.account_settings),i=Object(a.get)(e,"organizations[0].user_role.role_display_name",null);return e.hasOwnProperty("id")&&(t.id=e.id.toString()),e.hasOwnProperty("email")&&(t.email=e.email),e.hasOwnProperty("first_name")&&e.hasOwnProperty("last_name")&&(t.full_name="".concat(e.first_name," ").concat(e.last_name)),e.hasOwnProperty("registration_date")&&(t.registration_date=e.registration_date),e.hasOwnProperty("premium_account")&&(t.premium=e.premium_account),e.hasOwnProperty("user_is_developer")&&(t.developer=e.user_is_developer),e.hasOwnProperty("subscription")&&(t.subscriptionType=e.subscription?e.subscription.subscription_type:null),e.hasOwnProperty("is_third_party")&&(t.thirdParty=e.is_third_party),n.hasOwnProperty("account_purpose")&&(t.purpose=n.account_purpose?n.account_purpose.value:null),n.hasOwnProperty("account_role")&&(t.role=n.account_role?n.account_role.value:null),n.hasOwnProperty("account_field")&&(t.field=n.account_field?n.account_field.value:null),i&&(t.teamRole=i),t}},{key:"updateVisitorData",value:function(e){this.pendoEnabled()&&pendo.updateOptions({visitor:this.createVisitorData(e)})}},{key:"createAccountData",value:function(e){var t=Object(a.get)(e,"group_attributes",null);return{id:Object(a.get)(e,"id",null),name:Object(a.get)(e,"name",null),subscriptionType:Object(a.get)(e,"subscription.type",null),subscriptionEndDate:Object(a.get)(e,"subscription.paid_through_date",null),usersCount:Object(a.get)(e,"users_count",null),purpose:this.getGroupAttributeValue(t,"account_purpose"),field:this.getGroupAttributeValue(t,"account_field"),companyWebsite:this.getGroupAttributeValue(t,"account_company_website"),companySize:this.getGroupAttributeValue(t,"account_company_size")}}},{key:"flushQueuedEvents",value:function(){var e=this;this.queuedEvents.forEach((function(t){e.track(t.trackType,t.metadata)}))}},{key:"track",value:function(e,t){this.pendoEnabled()&&(this.initialized?pendo.track(e,t):this.queuedEvents.push({trackType:e,metadata:t}))}},{key:"trackOncePerSession",value:function(e,t){this.sessionEvents[e]||this.pendoEnabled()&&(this.track(e,t),this.sessionEvents[e]=!0)}},{key:"trackOncePerPage",value:function(e,t){this.pageEvents[e]||this.pendoEnabled()&&(this.track(e,t),this.pageEvents[e]=!0)}},{key:"trackSignIn",value:function(e){this.trackSignInSignUp("Sign In - Success",e)}},{key:"trackSignUp",value:function(e){this.trackSignInSignUp("Sign Up - Success",e)}},{key:"trackSignInSignUp",value:function(e,t){var n=this.route.snapshot.queryParams;this.track(e,{type:t,referrer:document.referrer,refParam:n.ref||null,groupInvite:n.hasOwnProperty("group_invite"),groupCode:n.hasOwnProperty("group")&&n.hasOwnProperty("code")})}},{key:"initRouteListener",value:function(){var e=this;this.router.events.pipe(Object(o.a)((function(e){return e instanceof i.c}))).subscribe((function(){e.pageEvents={}}))}},{key:"pendoEnabled",value:function(){if(!this.config.enabled)return!1;var e=Object(a.get)(this.config,"whitelist[".concat(r.a.application,"]"),null);if(!Object(a.isNil)(e)){var t=new URLSearchParams(window.location.search),n=t.get("id")||t.get("be")||t.get("m");return e.includes(n)}return!0}},{key:"setIds",value:function(e){var t=Object(a.get)(this.config,"idPrefixes[".concat(r.a.deploy,"]"),"");e.visitor.id="".concat(t).concat(e.visitor.id),e.account.id&&(e.account.id="".concat(t).concat(e.account.id))}},{key:"getGroupAttributeValue",value:function(e,t){if(!e)return null;var n=this.organizationsService.getOrganizationAttribute(e,"account_settings",t);return n?n.value:null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Zb("pendoConfig"),u.Zb(i.e),u.Zb(i.a),u.Zb(c.a))},e.\u0275prov=u.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},kqJf:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("LvDl");function a(e,t,n){var a=t.map((function(t){return e[t]})).filter((function(e){return!Object(i.isNil)(e)}));return n?a.sort().shift():a.sort().pop()}function o(e,t,n){if(0===t.length)return e;var i=new Intl.Collator("en-US",{sensitivity:"base"});return e.sort((function(e,o){var r=a(e,t,n)||"",s=a(o,t,n)||"";return(n?1:-1)*i.compare(r.toString(),s.toString())}))}},l4YF:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var i=function e(){h(this,e)},a=function e(){h(this,e)}},l57l:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Annotation="annotation",e.Classic="classic",e.StudioNext="studioNext",e.Context="context",e}({})},lMGN:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i,a=n("AcyG"),o=n("kR+W"),r=n("nYR2"),s=n("vkgz"),c=n("pLZG"),u=n("5+tZ"),l=n("kTA6"),p=n("FnMX"),d=function e(){h(this,e)},g=n("icKS"),f=n("qXBG"),m=n("Kn5L"),y=n("fXoL"),v=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},k=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O={joining:!1,inviting:!1,loadingUsers:!1,loadingInvites:!1,users:[],invites:[]},S=((i=function(){function e(t,n,i,a){h(this,e),this.usersService=t,this.pendoService=n,this.productService=i,this.authService=a}return b(e,[{key:"joinOrganization",value:function(e,t){var n=t.organization;e.patchState({joining:!0}),this.usersService.addUserToOrganization(n.eid).pipe(Object(r.a)((function(){return e.patchState({joining:!1})}))).subscribe((function(){return e.dispatch(new o.i(n))}),(function(){return e.dispatch(new o.h(n))}))}},{key:"joinOrganizationWithCode",value:function(e,t){var n=t.code;e.patchState({joining:!0}),this.usersService.addUserWithGroupCode(n).pipe(Object(r.a)((function(){return e.patchState({joining:!1})}))).subscribe((function(t){return e.dispatch(new o.l(t))}),(function(t){return e.dispatch(new o.k(t))}))}},{key:"joinOrganizationWithCodeSuccess",value:function(){this.pendoService.track("Account Upgrade - Free Individual to Team")}},{key:"sendOrganizationInvite",value:function(e,t){var n=this,i=t.groupEID,a=t.invites;e.patchState({inviting:!0}),this.authService.isHuman("invites",!0).pipe(Object(s.a)((function(t){t.isHuman||e.dispatch(new m.sb(new Error("reCAPTCHA error. Refresh the page and try again.")))})),Object(c.a)((function(e){return e.isHuman})),Object(u.b)((function(e){return n.usersService.sendOrganizationInvites(i,a,e.verification)})),Object(r.a)((function(){return e.patchState({inviting:!1})}))).subscribe((function(t){return e.dispatch(new o.s(t))}),(function(t){return e.dispatch(new o.r(t))}))}},{key:"getOrganizationUsers",value:function(e,t){var n=t.groupId;e.patchState({loadingUsers:!0}),this.usersService.getOrganizationUsers({group_id:n}).pipe(Object(r.a)((function(){return e.patchState({loadingUsers:!1})}))).subscribe((function(t){return e.dispatch(new o.c(t))}),(function(t){return e.dispatch(new o.b(t))}))}},{key:"getOrganizationUsersSuccess",value:function(e,t){var n=t.users;e.patchState({users:n})}},{key:"getOrganizationUserInvites",value:function(e,t){var n=t.groupId;e.patchState({loadingInvites:!0}),this.usersService.getOrganizationInvites({group_id:n,version:1,app_productkey:this.productService.productKey,app_producttype:this.productService.productType}).pipe(Object(r.a)((function(){return e.patchState({loadingInvites:!1})}))).subscribe((function(t){return e.dispatch(new o.f(t))}),(function(t){return e.dispatch(new o.e(t))}))}},{key:"getOrganizationUserInvitesSuccess",value:function(e,t){var n=t.invites;e.patchState({invites:n})}},{key:"resetOrganizations",value:function(e){e.setState(O)}},{key:"updateUserRoles",value:function(e,t){var n=t.groupId,i=t.users;this.usersService.updateUserRoles(n,i).subscribe((function(){return e.dispatch(new o.y(n,i))}),(function(){return e.dispatch(new o.x)}))}},{key:"removeOrganizationUser",value:function(e,t){var n=t.groupId,i=t.users;this.usersService.removeUsers(n,i).subscribe((function(){return e.dispatch(new o.o(n,i))}),(function(){return e.dispatch(new o.n)}))}},{key:"transferOrganizationContent",value:function(e,t){var n=t.groupId,i=t.users;this.usersService.transferUserContent(n,i).subscribe((function(){return e.dispatch(new o.v(n,i))}),(function(){return e.dispatch(new o.u)}))}}],[{key:"getUsers",value:function(e){return e.users}},{key:"getInvites",value:function(e){return e.invites}},{key:"getUsersLoading",value:function(e){return e.loadingUsers}},{key:"getJoining",value:function(e){return e.joining}},{key:"getInviting",value:function(e){return e.inviting}}]),e}()).\u0275fac=function(e){return new(e||i)(y.Zb(p.a),y.Zb(l.b),y.Zb(g.a),y.Zb(f.a))},i.\u0275prov=y.Lb({token:i,factory:i.\u0275fac}),v([Object(a.a)(o.g),k("design:type",Function),k("design:paramtypes",[Object,o.g]),k("design:returntype",void 0)],i.prototype,"joinOrganization",null),v([Object(a.a)(o.j),k("design:type",Function),k("design:paramtypes",[Object,o.j]),k("design:returntype",void 0)],i.prototype,"joinOrganizationWithCode",null),v([Object(a.a)(o.l),k("design:type",Function),k("design:paramtypes",[]),k("design:returntype",void 0)],i.prototype,"joinOrganizationWithCodeSuccess",null),v([Object(a.a)(o.q),k("design:type",Function),k("design:paramtypes",[Object,o.q]),k("design:returntype",void 0)],i.prototype,"sendOrganizationInvite",null),v([Object(a.a)(o.a),k("design:type",Function),k("design:paramtypes",[Object,o.a]),k("design:returntype",void 0)],i.prototype,"getOrganizationUsers",null),v([Object(a.a)(o.c),k("design:type",Function),k("design:paramtypes",[Object,o.c]),k("design:returntype",void 0)],i.prototype,"getOrganizationUsersSuccess",null),v([Object(a.a)(o.d),k("design:type",Function),k("design:paramtypes",[Object,o.d]),k("design:returntype",void 0)],i.prototype,"getOrganizationUserInvites",null),v([Object(a.a)(o.f),k("design:type",Function),k("design:paramtypes",[Object,o.f]),k("design:returntype",void 0)],i.prototype,"getOrganizationUserInvitesSuccess",null),v([Object(a.a)(o.p),k("design:type",Function),k("design:paramtypes",[Object]),k("design:returntype",void 0)],i.prototype,"resetOrganizations",null),v([Object(a.a)(o.w),k("design:type",Function),k("design:paramtypes",[Object,o.w]),k("design:returntype",void 0)],i.prototype,"updateUserRoles",null),v([Object(a.a)(o.m),k("design:type",Function),k("design:paramtypes",[Object,o.m]),k("design:returntype",void 0)],i.prototype,"removeOrganizationUser",null),v([Object(a.a)(o.t),k("design:type",Function),k("design:paramtypes",[Object,o.t]),k("design:returntype",void 0)],i.prototype,"transferOrganizationContent",null),v([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[d]),k("design:returntype",void 0)],i,"getUsers",null),v([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[d]),k("design:returntype",void 0)],i,"getInvites",null),v([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[d]),k("design:returntype",void 0)],i,"getUsersLoading",null),v([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[d]),k("design:returntype",void 0)],i,"getJoining",null),v([Object(a.f)(),k("design:type",Function),k("design:paramtypes",[d]),k("design:returntype",void 0)],i,"getInviting",null),i=v([Object(a.g)({name:"users",defaults:O})],i))},lWeg:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i="context-label",a=function e(){h(this,e)}},lZmj:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={title:"Desktop",type:"desktop",dimensions:{width:700,height:550},orientation:"vertical"}},lz5t:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("lJxs"),a=n("fXoL"),o=n("tk/3"),r=function(){var e=function(){function e(t){h(this,e),this.http=t}return b(e,[{key:"getBraintreePlans",value:function(){return this.http.get("/ws/professional/plan").pipe(Object(i.a)((function(e){return e.plans})))}},{key:"getBraintreePlan",value:function(e,t){return this.http.get("/ws/professional/plan?plan_id=".concat(e,"&discountcode=").concat(t)).pipe(Object(i.a)((function(e){return e.plan})))}},{key:"getBraintreeClientToken",value:function(){return this.http.get("/ws/professional/customer").pipe(Object(i.a)((function(e){return e.client_token})))}},{key:"getProfessionalSubscription",value:function(){return this.http.get("/ws/user/profile?version=2&subscription_hard_check=1").pipe(Object(i.a)((function(e){return e.subscription})))}},{key:"buyProfessionalSubscription",value:function(e){return this.http.post("/ws/professional/subscribe",Object.assign(Object.assign({},e),{subscription_intent:"buy"}))}},{key:"updateProfessionalSubscription",value:function(e){var t=e.nonce,n=e.device_data;return this.http.post("/ws/professional/subscribe",{payment_method_nonce:t,device_data:n,subscription_intent:"update"})}},{key:"cancelSubscription",value:function(){return this.http.post("/ws/professional/cancel",{})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Zb(o.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},mSC4:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("fXoL"),a={"Sign in":"3971305","Sign up":"3971297"},o=function(){var e=function(){function e(t){h(this,e),this.config=t,this.initialized=!1}return b(e,[{key:"initialize",value:function(){if(this.config.enabled&&!this.initialized){var e='\n      _linkedin_partner_id = "'.concat(this.config.linkedinId,'"; \n      window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || []; \n      window._linkedin_data_partner_ids.push(_linkedin_partner_id);\n      (function(){var s = document.getElementsByTagName("script")[0]; var b = document.createElement("script"); b.type = "text/javascript";b.async = true; b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js"; s.parentNode.insertBefore(b, s);})();\n    '),t=document.createElement("script");t.textContent=e,document.body.appendChild(t),this.initialized=!0}}},{key:"track",value:function(e){var t=a[e];if(t){var n=document.createElement("img");n.height=1,n.width=1,n.style.display="none",n.alt="",n.src="https://px.ads.linkedin.com/collect/?pid=".concat(this.config.linkedinId,"&conversionId=").concat(t,"&fmt=gif"),document.body.appendChild(n)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Zb("linkedinConfig"))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},mWjH:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var i=n("3Pt+"),a=n("LvDl"),o=n("fXoL"),r=function(){var e=function(){function e(t){h(this,e),this.controlContainer=t}return b(e,[{key:"control",get:function(){return this.formControl||this.controlContainer.control.get(this.formControlName)}},{key:"registerOnTouched",value:function(e){this.formControlDirective.valueAccessor.registerOnTouched(e)}},{key:"registerOnChange",value:function(e){this.formControlDirective.valueAccessor.registerOnChange(e)}},{key:"writeValue",value:function(e){this.formControlDirective.valueAccessor.writeValue(e)}},{key:"setDisabledState",value:function(e){this.formControlDirective.valueAccessor.setDisabledState(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Pb(i.b))},e.\u0275cmp=o.Jb({type:e,selectors:[["app-base-accessor-control"]],viewQuery:function(e,t){var n;(1&e&&o.Jc(i.h,!0),2&e)&&(o.xc(n=o.dc())&&(t.formControlDirective=n.first))},inputs:{formControl:"formControl",formControlName:"formControlName"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),s=function(){var e=function(){function e(){h(this,e)}return b(e,[{key:"value",get:function(){return this._value},set:function(e){Object(a.isEqual)(this._value,e)||(this._value=e,this.setFormValues(e),this.onChange(e))}},{key:"onChange",value:function(e){}},{key:"onTouched",value:function(){}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"writeValue",value:function(e){this.value=e}},{key:"setDisabledState",value:function(e){this.disabled=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["app-abstract-input-control"]],inputs:{value:"value",disabled:"disabled"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}()},mXx7:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{center:0,edge:1,centerBias:1,edgeBias:0,power:1};h(this,e);var n=t.edge,i=t.center,a=t.centerBias,o=t.edgeBias,r=t.power;this.edge=n,this.center=i,this.centerBias=a,this.edgeBias=o,this.power=r}return b(e,null,[{key:"toEngine",value:function(e){return[e.center,e.edge,e.centerBias,e.edgeBias,e.power]}},{key:"isFresnelObject",value:function(e){var t=!1;return e&&(t="center,centerBias,edge,edgeBias,power"==Object.keys(e).sort().toString()),t}}]),e}()},mmXA:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Application=0]="Application",e[e.Search=1]="Search",e[e.View=2]="View",e[e.Hide=3]="Hide",e[e.Share=4]="Share",e}({})},mtgE:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.None="none",e.Small="small",e.Full="full",e}({})},nRae:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i,a=n("uA5T"),o=n("6L7E"),r=n("b36G"),s=function e(){h(this,e)},c=function e(){h(this,e)},u=n("ewuU"),l=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function e(){h(this,e),this[i]=!0};i=immer.immerable,l([Object(r.Type)((function(){return o.a})),Object(r.Type)((function(){return s})),Object(r.Type)((function(){return a.a})),Object(r.Type)((function(){return c})),Object(r.Expose)(),p("design:type",String)],d.prototype,"id",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"info",void 0),l([Object(r.Expose)(),p("design:type",Array)],d.prototype,"labels",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"colorRecipeObjects",void 0),l([Object(r.Expose)(),p("design:type",Array)],d.prototype,"hotspots",void 0),l([Object(r.Expose)(),p("design:type",s)],d.prototype,"synchronization",void 0),l([Object(r.Expose)(),p("design:type",u.a)],d.prototype,"background",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"lights",void 0),l([Object(r.Expose)(),p("design:type",Array)],d.prototype,"timelineMap",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"camera",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"transitions",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"properties",void 0),l([Object(r.Expose)(),p("design:type",Boolean)],d.prototype,"loop",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"customData",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"clippingPlanes",void 0),l([Object(r.Expose)(),p("design:type",function(){return function e(){h(this,e)}}())],d.prototype,"ui",void 0),l([Object(r.Expose)(),p("design:type",c)],d.prototype,"graph",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"viewModes",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"recipes",void 0),l([Object(r.Expose)(),p("design:type",String)],d.prototype,"transparencyMode",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"fallbackTransparency",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"effects",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"environment",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"pickThroughObjects",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"showObjects",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"options",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"media",void 0),l([Object(r.Expose)(),p("design:type",Array)],d.prototype,"legend",void 0),l([Object(r.Expose)(),p("design:type",function(){return function e(){h(this,e)}}())],d.prototype,"visibilityLayers",void 0),l([Object(r.Expose)(),p("design:type",Array)],d.prototype,"contentBlocks",void 0),l([Object(r.Expose)(),p("design:type",Array)],d.prototype,"quizQuestions",void 0),l([Object(r.Expose)(),p("design:type",Object)],d.prototype,"thumbnails",void 0),d=l([Object(r.Exclude)()],d)},nS47:function(t,n,i){"use strict";i.d(n,"a",(function(){return a}));var a,o=i("e0fF");!function(t){function n(e,t){e.nodes[t.id]||(e.nodes[t.id]=t)}function i(e,t){return e.nodes[t]||null}function a(e,t){return e.predecessors[t]||null}function r(e,t){return u(e.successors[t]||[])}function s(e){return Object.keys(e.roots)}t.addRootNode=function(e,t){n(e,t);var a=i(e,t.id);e.roots[a.id]=a},t.getNodes=function(e,t){var n=[];return t.forEach((function(t){e.nodes[t]&&n.push(e.nodes[t])})),n},t.getAncestors=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ascending",a=n?[t]:[],o=e.predecessors[t];o;)a.push(o),o=e.predecessors[o];return"descending"===i&&a.reverse(),a},t.addNode=n,t.getNode=i,t.getAncestor=a,t.getAllAncestorsFromList=function(e,t){var n,i={};return t.forEach((function(t){(n=a(e,t))&&!i[n]&&(i[n]=!0)})),Object.keys(i)},t.getSuccessors=r,t.getState=function(e,t,n){var a={},o=i(e,t);return Object.entries(o.boolState).forEach((function(e){var t=p(e,2),i=t[0],o=t[1];n&&n.includes(i)&&(a[i]=o)})),Object.entries(o.numState).forEach((function(e){var t=p(e,2),i=t[0],o=t[1];n&&n.includes(i)&&(a[i]=o)})),a},t.isLeaf=function(e,t){return!!e.nodes[t]&&void 0===e.successors[t]},t.isRoot=function(e,t){return e.roots.hasOwnProperty(t)||!1},t.getRoots=s,t.depthFirst=function e(t,n,i){i?(n(i),r(t,i).forEach((function(i){e(t,n,i)}))):s(t).forEach((function(i){n(i),e(t,n,i)}))},t.createGraphFromSrc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"objectId",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"objects",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=Object(o.a)();return e.forEach((function(e){!function e(t,n,i,a,r,s,c){var l=Object(o.b)(i[a]);l.depth=c,function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"id";Object.entries(n).forEach((function(n){var a,o=p(n,2),r=o[0],s=o[1];"string"==typeof s?a=t[s]:"function"==typeof s&&(a=s(t[i])),"boolean"==typeof a?e.boolState[r]=a:"number"==typeof a?e.numState[r]=a:e[r]=a}))}(l,i,s,a),t.nodes[l.id]=l,n?(t.successors[n]=[].concat(u(t.successors[n]||[]),[l.id]),t.predecessors[l.id]=n):t.roots[l.id]=l,c+=1,(i[r]||[]).forEach((function(n){e(t,l.id,n,a,r,s,c)}))}(a,null,e,t,n,i,0)})),a},t.pruneHiddenObjects=function t(n,i,a){var o,r=[],s=e(n);try{for(s.s();!(o=s.n()).done;){var c=o.value,u=i[c.objectId],l=!0===u||!1!==u&&a,p=t(c.objects||[],i,l);if(l){var d=Object.assign({},c);d.objects=p,r.push(d)}else p.forEach((function(e){return r.push(e)}))}}catch(g){s.e(g)}finally{s.f()}return r}}(a||(a={}))},nclC:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("HDdC"),a=n("LRne"),o=n("AytR"),r=n("f3gM"),s=n("eW6i"),c=n("5miH"),u=n("fXoL"),l=function(){var e=function(){function e(t){h(this,e),this.engineService=t}return b(e,[{key:"getClipboardAPISupport",value:function(){return"clipboard"in navigator}},{key:"getClipboardAPI",value:function(){return navigator.clipboard}},{key:"copyToClipboard",value:function(e,t){var n=this;if(!0===o.a.native||o.a.platform===r.a.SDK)return new i.a((function(i){n.engineService.fireEvent(c.a.NativeShare,{type:t,value:e}),i.next(!0),i.complete()}));if(this.getClipboardAPISupport()){var s=this.getClipboardAPI();return new i.a((function(t){s.writeText(e).then((function(){t.next(!0),t.complete()})).catch((function(e){t.next(!1),t.complete()}))}))}return Object(a.a)(!1)}},{key:"copyInputFieldValue",value:function(e){e.select();var t=!1;try{t=document.execCommand("copy")}catch(n){t=!1}return t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Zb(s.a))},e.\u0275prov=u.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},nj9G:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Text=0]="Text",e[e.Paint=1]="Paint",e[e.Erase=2]="Erase",e}({})},o6VQ:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var i={title:"Tags",tags:["Animated","Tour","Quiz","featured","new"]},a={title:"Type",tags:["Anatomy","Disease","Pharmacology","Physiology","Procedure"]},o={title:"Level of Detail",tags:["Gross Anatomy","Tissue","Cellular","Molecular"]},r={title:"Downloaded",tags:["Downloaded"]},s=[{title:"Status",tags:["Live","obsolete"]},{title:"Paywall",tags:["Premium","Basic"]},{title:"Platform",tags:["web platform","ios platform","android platform"]},i,{title:"Flags",tags:["animated","tour","Audio","low definition"]},{title:"Gender",tags:["male","female"]},a,o,{title:"Anatomy Categories",tags:["complete anatomy","system","regional","Bony Landmarks","Cross Section","Cross Section and Micro Anatomy","Micro Anatomy","Origins and Insertions"]},{title:"Clinical Specialty",tags:["Allergy and Immunology","Cardiology","Dentistry","Dermatology","Endocrinology","Gastroenterology and Hepatology","Gynecology","Infectious Disease","Nephrology","Neurology and Psychiatry","Obstetrics","Oncology and Hematology","Ophthalmology","Orthopedics","Otolaryngology","Pediatrics","Physical Therapy","Pulmonology and Respiratory","Rheumatology","Urology"]},{title:"Health Conditions",tags:["Blood, Heart and Circulation","Brain and Nerves","Ear, Nose and Throat","Eyes and Vision","Immune System","Lungs and Breathing","Mouth and Teeth","Bones, Joints and Muscles","Digestive System","Endocrine System","Female Reproductive System","Male Reproductive System","Skin, Hair and Nail"]},r]},oH02:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i,a,o=n("ofXK"),r=n("PCNd"),s=n("vvyD"),c=n("lR5k"),u=n("fXoL"),l=((a=function e(){h(this,e)}).\u0275mod=u.Nb({type:a}),a.\u0275inj=u.Mb({factory:function(e){return new(e||a)},imports:[[o.c,c.a.forChild()]]}),a),p=((i=function e(){h(this,e)}).\u0275mod=u.Nb({type:i}),i.\u0275inj=u.Mb({factory:function(e){return new(e||i)},imports:[[o.c,r.a,s.a,l]]}),i)},oOZS:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("XNiG"),a=n("xgIS"),o=n("1G5W"),r=n("fXoL"),s=n("ofXK");function c(e,t){if(1&e&&(r.Vb(0,"span",4),r.Pc(1),r.Ub()),2&e){var n=r.gc(2);r.Db(1),r.Sc("",n.remainingCount," ",1===n.remainingCount?"character":"characters"," remaining")}}function u(e,t){if(1&e&&(r.Vb(0,"span",4),r.Pc(1),r.Ub()),2&e){var n=r.gc(2);r.Db(1),r.Sc("",n.count,"/",n.max,"")}}function l(e,t){if(1&e&&(r.Vb(0,"div",1),r.Nc(1,c,2,2,"span",2),r.Nc(2,u,2,2,"span",3),r.Ub()),2&e){var n=r.gc();r.Hb("counter--inline","inline"===n.display),r.mc("ngSwitch",n.mode),r.Db(1),r.mc("ngSwitchCase","remaining")}}var p=function(){var e=function(){function e(t){h(this,e),this.ref=t,this.ngUnsubscribe=new i.a,this.display="block",this.mode="count"}return b(e,[{key:"remainingCount",get:function(){return this.max-this.count}},{key:"ngOnInit",value:function(){this.count=0,this.max=this.field.maxLength||0}},{key:"ngAfterViewInit",value:function(){var e=this;this.getValueChanges().pipe(Object(o.a)(this.ngUnsubscribe)).subscribe((function(){e.updateCount()}))}},{key:"ngAfterContentChecked",value:function(){this.updateCount()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"updateCount",value:function(){var e=this.getValue().length;this.count!==e&&(this.count=e,this.ref.markForCheck())}},{key:"getValueChanges",value:function(){return this.field.getValueChanges?this.field.getValueChanges():Object(a.a)(this.field,"input")}},{key:"getValue",value:function(){return void 0!==this.field.textValue?this.field.textValue:this.field.value}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Pb(r.i))},e.\u0275cmp=r.Jb({type:e,selectors:[["app-character-counter"]],inputs:{field:"field",display:"display",mode:"mode"},decls:1,vars:1,consts:[["class","counter text-10 pt-1 pb-1",3,"counter--inline","ngSwitch",4,"ngIf"],[1,"counter","text-10","pt-1","pb-1",3,"ngSwitch"],["class","counter__label",4,"ngSwitchCase"],["class","counter__label",4,"ngSwitchDefault"],[1,"counter__label"]],template:function(e,t){1&e&&r.Nc(0,l,3,4,"div",0),2&e&&r.mc("ngIf",t.max)},directives:[s.p,s.r,s.s,s.t],styles:[".theme-light[_nghost-%COMP%]   .counter__label[_ngcontent-%COMP%], .theme-light   [_nghost-%COMP%]   .counter__label[_ngcontent-%COMP%]{color:#1c2a3f}.theme-dark[_nghost-%COMP%]   .counter__label[_ngcontent-%COMP%], .theme-dark   [_nghost-%COMP%]   .counter__label[_ngcontent-%COMP%]{color:#96a8c0}.counter[_ngcontent-%COMP%]{display:block;width:100%;float:right;text-align:right}.counter--inline[_ngcontent-%COMP%]{display:inline-block;width:auto}"]}),e}()},odcc:function(e,t,n){"use strict";n.d(t,"n",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"p",(function(){return s})),n.d(t,"r",(function(){return c})),n.d(t,"q",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return d})),n.d(t,"g",(function(){return g})),n.d(t,"i",(function(){return f})),n.d(t,"h",(function(){return b})),n.d(t,"m",(function(){return m})),n.d(t,"j",(function(){return y})),n.d(t,"l",(function(){return v})),n.d(t,"k",(function(){return k})),n.d(t,"o",(function(){return O}));var i=function(){var e=function e(){h(this,e)};return e.type="[Subscription] Reset Subscription State",e}(),a=function(){var e=function e(t){h(this,e),this.request=t};return e.type="[Subscription] Buy Subscription",e}(),o=function(){var e=function e(t){h(this,e),this.request=t};return e.type="[Subscription] Buy Subscription Success",e}(),r=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Subscription] Buy Subscription Failure",e}(),s=function(){var e=function e(t){h(this,e),this.request=t};return e.type="[Subscription] Update Subscription",e}(),c=function(){var e=function e(){h(this,e)};return e.type="[Subscription] Update Subscription Success",e}(),u=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Subscription] Update Subscription Failure",e}(),l=function(){var e=function e(){h(this,e)};return e.type="[Subscription] Cancel Subscription",e}(),p=function(){var e=function e(){h(this,e)};return e.type="[Subscription] Cancel Subscription Success",e}(),d=function(){var e=function e(t){h(this,e),this.error=t};return e.type="[Subscription] Cancel Subscription Failure",e}(),g=function(){var e=function e(t,n){h(this,e),this.planId=t,this.code=n};return e.type="[Subscription] Check Promo Code",e}(),f=function(){var e=function e(t,n){h(this,e),this.code=t,this.plan=n};return e.type="[Subscription] Check Promo Code Success",e}(),b=function(){var e=function e(t){h(this,e),this.err=t};return e.type="[Subscription] Check Promo Code Failure",e}(),m=function(){var e=function e(){h(this,e)};return e.type="[Subscription] Remove Promo Code",e}(),y=function(){var e=function e(){h(this,e)};return e.type="[Subscription] Get Premium Plans",e}(),v=function(){var e=function e(t){h(this,e),this.plans=t};return e.type="[Subscription] Get Premium Plans Success ",e}(),k=function(){var e=function e(t){h(this,e)};return e.type="[Subscription] Get Premium Plans Failure",e}(),O=function(){var e=function e(t){h(this,e),this.plan=t};return e.type="[Subscription] Set Premium Plan",e}()},p345:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Loft="loft",e.Studio="studio",e.Viewer="viewer",e.All="",e}({})},p3zp:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("ofXK"),a=n("+pSP"),o=n("fXoL"),r=function(){var e=function e(){h(this,e)};return e.\u0275mod=o.Nb({type:e}),e.\u0275inj=o.Mb({factory:function(t){return new(t||e)},imports:[[i.c,a.a]]}),e}()},pZol:function(e,t,n){"use strict";n.d(t,"g",(function(){return o})),n.d(t,"j",(function(){return r})),n.d(t,"i",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return h})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return b}));var i=[4,8,12,16,24,32],a=function(e){return e.slice(0).reverse().map((function(e){return{label:""+e,size:e}}))},o=a(i),r=a([8,12,16,20,24,32]),s=a(i),c={label:"Black",color:"#000000"},u={label:"White",color:"#ffffff"},l=[c,{label:"Red",color:"#ff0000"},{label:"Yellow",color:"#ffff00"},{label:"Green",color:"#00ff00"},{label:"Cyan",color:"#00ffff"},{label:"Blue",color:"#0000ff"},{label:"Pink",color:"#ff00ff"},u],p=o[4],d=l[0],g=r[3],h=s[4],f=c,b=u},q7pw:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Modal="Modal",e.Footer="Footer",e.Notification="Notification",e}({})},q8pu:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"n",(function(){return o})),n.d(t,"q",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return p})),n.d(t,"g",(function(){return d})),n.d(t,"m",(function(){return g})),n.d(t,"p",(function(){return f})),n.d(t,"o",(function(){return b})),n.d(t,"k",(function(){return m})),n.d(t,"j",(function(){return y})),n.d(t,"c",(function(){return v})),n.d(t,"e",(function(){return k})),n.d(t,"t",(function(){return O})),n.d(t,"l",(function(){return S})),n.d(t,"r",(function(){return x})),n.d(t,"s",(function(){return C}));var i=n("4LIl"),a=function(){var e=function e(t){h(this,e),this.patches=t};return e.type="[Story Labels] Patch Labels",e}(),o=function(){var e=function e(t,n){h(this,e),this.labelId=t,this.offset=n};return e.type="[Story Labels] Set label Offset",e}(),r=function(){var e=function e(t){h(this,e),this.labels=t};return e.type="[Story Labels] Set Labels",e}(),s=function(){var e=function e(t){h(this,e),this.label=t};return e.type="[Story Labels] Add Label",e}(),c=function(){var e=function e(t){h(this,e),this.label=t};return e.type="[Story Labels] Set Contexdt Label",e}(),u=function(){var e=function e(t,n){h(this,e),this.sourceChapter=t,this.targetChapter=n};return e.type="[Story Labels] Copy Labels",e}(),l=function(){var e=function e(t){h(this,e),this.label=t};return e.type="[Story Labels] Remove Label",e}(),p=function(){var e=function e(){h(this,e)};return e.type="[Story Labels] Remove Context Label",e}(),d=function(){var e=function e(t){h(this,e),this.chapter=t};return e.type="[Story Labels] Remove All Chapter Labels",e}(),g=function(){var e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h(this,e),this.label=t,this.record=n};return e.type="[Story Labels] Set Label",e}(),f=function(){var e=function e(t,n){h(this,e),this.id=t,this.states=n};return e.type="[Story Labels] Set Label States",e}(),b=function(){var e=function e(t){h(this,e),this.scale=t};return e.type="[Story Labels] Set Label Scale",e}(),m=function(){var e=function e(t){h(this,e),this.label=t};return e.type="[Story Labels] Select Label",e}(),y=function(){var e=function e(){h(this,e)};return e.type="[Story Labels] Reset",e}(),v=function(){var e=function e(t,n){h(this,e),this.labels=t,this.fields=n};return e.type="[Story Labels] Convert",e}(),k=function(){var e=function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];h(this,e),this.enable=t,this.enableInfo=n,this.enableActions=i};return e.type="[Story Labels] Enable Context Label",e}(),O=function(){var e=function e(t,n){h(this,e),this.labels=t,this.shown=n};return e.type="[Story Labels] Set Labels Shown",e}(),S=function(){var e=function e(t){h(this,e),this.show=t};return e.type="[Story Labels] Set All Labels Shown",e}(),x=function(){var e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.a.None;h(this,e),this.collapsed=t,this.collapsedMode=n};return e.type="[Story Labels] Set Labels Collapsed",e}(),C=function(){var e=function e(t){h(this,e),this.draggable=t};return e.type="[Story Labels] Set Draggable",e}()},qA9Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var i=n("uDDk");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:i.a.Markdown,markdown:e}}function o(e){return e?e.filter((function(e){return e.type===i.a.Markdown})).map((function(e){return e.markdown})).join("\n"):""}},qBAC:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("stSV"),a=n("4bFC"),o=function e(){h(this,e),this.background={colors:null},this.uiAnnotations=!1,this.uiAudio=!1,this.uiInfo=!0,this.uiFullscreen=!0,this.uiScrubber=!1,this.uiHelp=!0,this.uiBd="",this.loadRotate=null,this.initial={button:!1,handHint:!1,play:!1},this.disableScroll={alert:!1,overlay:!1},this.uiQuiz={mode:a.a.Enabled,number:void 0},this.autoLoad=!0,this.uiTour=!1,this.uiNav=!0,this.uiSearch=!0,this.uiTools=!0,this.uiUndo=!0,this.uiLabelList=!0,this.uiChapterList=!1,this.all=!1,this.collapseLabel=null,this.uiMenu=!0,this.uiAnatomyDescriptions=!1,this.uiTutorial=!1,this.uiLegend=!0,this.uiLoader=i.b,this.uiWhiteboard=!0,this.uiVisibilityLayers=!0,this.uiAnatomyLabels=!0}},qXBG:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i,a=n("lJxs"),o=n("5+tZ"),r=n("JIr8"),s=n("LRne"),c=n("uAsG"),u=n("b36G"),l=function(){function e(){h(this,e)}return b(e,null,[{key:"fromJSON",value:function(t){var n=new e;return n.email=t.user_email,n.credentials=t.credentials,n.isUser=t.is_user,n.isThirdParty=t.user_is_third_party,n.thirdPartyProvider=t.user_third_party_provider,n.isDeveloper=t.user_is_developer,n.isDeveloperActive=t.user_is_developer_active,n.isDeveloperVerified=t.user_is_developer_verified,n.firstName=t.user_first_name,n.lastName=t.user_last_name,n.name="".concat(t.firstName," ").concat(t.lastName),n}}]),e}(),p=function(){function e(){h(this,e)}return b(e,null,[{key:"fromJSON",value:function(t){var n=new e;return n.google=t.google_api_key,n}}]),e}(),d=n("I0z8"),g=n("C1bs"),f=n("QkOQ"),m=n("jCJ1"),y=function(e){return e.Zendesk="zendesk",e}({}),v=n("Oq7/"),k=n("LvDl"),O=n("8pBO"),S=function e(){h(this,e)},x=function e(){h(this,e)},C=n("xybE"),w=n("XoIW"),j=n("icKS"),P=n("fXoL"),_=n("tk/3"),M=["harvard.edu","liberty.edu"],I=((i=function(){function e(t,n,i,a,o){h(this,e),this.http=t,this.reCaptchaV3Service=n,this.userMessageService=i,this.productService=a,this.RECAPTCHA_V3_SITE_KEY=o}return b(e,[{key:"loginWithBiodigital",value:function(e){return this.http.post("/ws/user/sign/in",f.a.toJSON(e))}},{key:"loginWithGoogle",value:function(e){return this.http.post("/ws/user/sign/in/google",g.a.toJSON(e))}},{key:"logout",value:function(){return this.http.get("/ws/user/sign/out")}},{key:"checkProfile",value:function(e){return this.http.post("/ws/user/profile/check",{version:2,email:e}).pipe(Object(a.a)((function(e){var t=l.fromJSON(e);return t.isThirdParty=""!==t.thirdPartyProvider,t})))}},{key:"getUserProfile",value:function(e){return this.http.get(e?"/ws/user/profile?version=2&subscription_hard_check=1":"/ws/user/profile?version=2").pipe(Object(a.a)((function(e){var t=Object(u.plainToClass)(c.a,e);return t.organizations.forEach((function(e){var t=Object(k.get)(e,"user_role",O.b);e.user_role=Object(O.c)(t)})),t})))}},{key:"getUserRoles",value:function(){return this.http.get("/ws/organization/user/roles").pipe(Object(a.a)((function(e){return e.user_roles.map((function(e){var t=Object(u.plainToClass)(v.a,e);return Object(O.c)(t)}))})))}},{key:"updaterUserProfile",value:function(e){return this.http.post("/ws/user/profile?version=2",e)}},{key:"deleteUserProfile",value:function(){return this.http.post("/ws/user/profile/delete",{}).pipe(Object(a.a)((function(e){return e.deleted_user_email})))}},{key:"getEnvironmentSettings",value:function(){return this.http.get("/ws/environment/settings?version=2").pipe(Object(a.a)((function(e){return p.fromJSON(e)})))}},{key:"getUserApps",value:function(){return this.http.get("/ws/developer/apps/profile").pipe(Object(a.a)((function(e){return e&&e.apps?JSON.parse(e.apps):[]})))}},{key:"getGroupConfigFromRoute",value:function(e){var t=e.queryParams.code||"",n=e.queryParams.group_invite||"",i=e.queryParams.osptok||"";return{group:e.queryParams.group||"",groupCode:t,groupCodeMode:t?1:0,groupInviteMode:n?1:0,groupInviteKey:n,groupOvidMode:i?1:0,groupOvidOsptok:i}}},{key:"getPlatformConfigFromRoute",value:function(e){var t=e.queryParams,n=t.zendesk_signin,i=t.return_to,a=t.brand_id,o=t.locale_id,r=t.timestamp;return"1"===n?{platform:y.Zendesk,returnTo:i,brandId:a,localeId:o,timestamp:r}:void 0}},{key:"isLoggedIn",value:function(){return this.http.get("/ws/user/is/signed-in?version=4&app_producttype=".concat(this.productService.productType,"&app_productkey=").concat(this.productService.productKey))}},{key:"getProfileRestrictions",value:function(e){var t=!1,n=!1,i="";return e.organizations.forEach((function(e){t||n||(i=e.name,t=e.user_is_subscribed&&e.email_domain_restriction&&!e.user_has_email_domain_access,n=e.user_is_subscribed&&e.ip_address_restriction&&!e.user_has_domain_access)})),{organizationName:i,email:t,ip:n}}},{key:"resetPassword",value:function(e){return this.http.post("/ws/user/password/forgot",{email:e})}},{key:"deactivateFacebook",value:function(e){return this.http.post("/ws/user/sign/in/facebook/deactivate",e)}},{key:"updatePassword",value:function(e,t,n){return this.http.post("/ws/user/password/change",{current_password:e,new_password:t,confirm_new_password:n})}},{key:"signUp",value:function(e){return this.http.post("/ws/user/sign/up",d.a.toJSON(e))}},{key:"verifyToken",value:function(e){return this.http.post("/ws/recaptcha/siteverify",{recaptcha_reponse_token:e,recaptcha_version:"v3"}).pipe(Object(a.a)((function(e){return e})))}},{key:"isHuman",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n&&grecaptcha.reset(this.RECAPTCHA_V3_SITE_KEY),this.reCaptchaV3Service.execute(e).pipe(Object(o.b)((function(e){return t.verifyToken(e)})),Object(a.a)((function(t){return{isHuman:t.action===e&&t.score>.2,verification:t}})))}},{key:"isReCaptchaWhiteListed",value:function(e){return M.some((function(t){return new RegExp(t+"$","i").test(e)}))}},{key:"requestVerificationCode",value:function(e){var t=Object.assign(Object.assign({},e),{version:4,app_producttype:this.productService.productType,app_productkey:this.productService.productKey});return this.http.post("/ws/user/verification/request",t).pipe(Object(a.a)((function(e){return Object(u.plainToClass)(S,e)})))}},{key:"verifyProfile",value:function(e){var t=Object.assign(Object.assign({},e),{version:4,app_producttype:this.productService.productType,app_productkey:this.productService.productKey});return this.http.post("/ws/user/verification/confirm",t).pipe(Object(a.a)((function(e){return Object(u.plainToClass)(x,e)})))}},{key:"checkProfileIncomplete",value:function(){return this.userMessageService.getUserMessage(w.a.CompleteProfileAlert,"v2",!1).pipe(Object(r.a)((function(){return Object(s.a)({messageType:w.a.CompleteProfileAlert,messageData:{},showUserAlert:!1})})))}}]),e}()).\u0275fac=function(e){return new(e||i)(P.Zb(_.b),P.Zb(m.c),P.Zb(C.a),P.Zb(j.a),P.Zb(m.b))},i.\u0275prov=P.Lb({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},qpAl:function(e,t){!function(t){var n="Modernizr"in t,i=t.Modernizr;!function(e,t,n,i){function a(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function r(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):v?n.createElementNS.call(n,"http://www.w3.org/2000/svg",arguments[0]):n.createElement.apply(n,arguments)}function s(e,t,i,a){var o,s,c,u,l="modernizr",p=r("div"),d=function(){var e=n.body;return e||((e=r(v?"svg":"body")).fake=!0),e}();if(parseInt(i,10))for(;i--;)(c=r("div")).id=a?a[i]:l+(i+1),p.appendChild(c);return(o=r("style")).type="text/css",o.id="s"+l,(d.fake?d:p).appendChild(o),d.appendChild(p),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(n.createTextNode(e)),p.id=l,d.fake&&(d.style.background="",d.style.overflow="hidden",u=y.style.overflow,y.style.overflow="hidden",y.appendChild(d)),s=t(p,e),d.fake&&d.parentNode?(d.parentNode.removeChild(d),y.style.overflow=u):p.parentNode.removeChild(p),!!s}function c(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()})).replace(/^ms-/,"-ms-")}function u(e,n){var a=e.length;if("CSS"in t&&"supports"in t.CSS){for(;a--;)if(t.CSS.supports(c(e[a]),n))return!0;return!1}if("CSSSupportsRule"in t){for(var o=[];a--;)o.push("("+c(e[a])+":"+n+")");return s("@supports ("+(o=o.join(" or "))+") { #modernizr { position: absolute; } }",(function(e){return"absolute"===function(e,n,i){var a;if("getComputedStyle"in t){a=getComputedStyle.call(t,e,null);var o=t.console;null!==a?a=a.getPropertyValue(i):o&&o[o.error?"error":"log"].call(o,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else a=e.currentStyle&&e.currentStyle[i];return a}(e,0,"position")}))}return i}function l(e){return e.replace(/([a-z])-([a-z])/g,(function(e,t,n){return t+n.toUpperCase()})).replace(/^-/,"")}function p(e,t,n,s){function c(){d&&(delete x.style,delete x.modElem)}if(s=!a(s,"undefined")&&s,!a(n,"undefined")){var p=u(e,n);if(!a(p,"undefined"))return p}for(var d,g,h,f,b,m=["modernizr","tspan","samp"];!x.style&&m.length;)d=!0,x.modElem=r(m.shift()),x.style=x.modElem.style;for(h=e.length,g=0;g<h;g++)if(b=x.style[f=e[g]],o(f,"-")&&(f=l(f)),x.style[f]!==i){if(s||a(n,"undefined"))return c(),"pfx"!==t||f;try{x.style[f]=n}catch(e){}if(x.style[f]!==b)return c(),"pfx"!==t||f}return c(),!1}function d(e,t){return function(){return e.apply(t,arguments)}}function g(e,t,n,i,o){var r=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+O.join(r+" ")+r).split(" ");return a(t,"string")||a(t,"undefined")?p(s,t,i,o):function(e,t,n){var i;for(var o in e)if(e[o]in t)return!1===n?e[o]:a(i=t[e[o]],"function")?d(i,n||t):i;return!1}(s=(e+" "+C.join(r+" ")+r).split(" "),t,n)}var h=[],f={_version:"3.11.8",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){h.push({name:e,fn:t,options:n})},addAsyncTest:function(e){h.push({name:null,fn:e})}},b=function(){};b.prototype=f,b=new b;var m=[],y=n.documentElement,v="svg"===y.nodeName.toLowerCase(),k="Moz O ms Webkit",O=f._config.usePrefixes?k.split(" "):[];f._cssomPrefixes=O;var S={elem:r("modernizr")};b._q.push((function(){delete S.elem}));var x={style:S.elem.style};b._q.unshift((function(){delete x.style}));var C=f._config.usePrefixes?k.toLowerCase().split(" "):[];f._domPrefixes=C,f.testAllProps=g;var w=function(e){var n,a=prefixes.length,o=t.CSSRule;if(void 0===o)return i;if(!e)return!1;if((n=(e=e.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in o)return"@"+e;for(var r=0;r<a;r++){var s=prefixes[r];if(s.toUpperCase()+"_"+n in o)return"@-"+s.toLowerCase()+"-"+e}return!1};f.atRule=w;var j=f.prefixed=function(e,t,n){return 0===e.indexOf("@")?w(e):(-1!==e.indexOf("-")&&(e=l(e)),t?g(e,t,n):g(e,"pfx"))};b.addTest("fullscreen",!(!j("exitFullscreen",n,!1)&&!j("cancelFullScreen",n,!1))),function(){var e,t,n,i,o,r;for(var s in h)if(h.hasOwnProperty(s)){if(e=[],(t=h[s]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=a(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)1===(r=e[o].split(".")).length?b[r[0]]=i:(b[r[0]]&&(!b[r[0]]||b[r[0]]instanceof Boolean)||(b[r[0]]=new Boolean(b[r[0]])),b[r[0]][r[1]]=i),m.push((i?"":"no-")+r.join("-"))}}(),function(e){var t=y.className,n=b._config.classPrefix||"";if(v&&(t=t.baseVal),b._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}b._config.enableClasses&&(e.length>0&&(t+=" "+n+e.join(" "+n)),v?y.className.baseVal=t:y.className=t)}(m),delete f.addTest,delete f.addAsyncTest;for(var P=0;P<b._q.length;P++)b._q[P]();e.Modernizr=b}(t,t,document),e.exports=t.Modernizr,n?t.Modernizr=i:delete t.Modernizr}(window)},qplK:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fqos"),a=function e(t){h(this,e),this.type=i.a.flyToCamera,this.value=t}},"qz+p":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("rvu2"),a=n("b36G"),o=n("LvDl"),r=n("fXoL"),s=function(){var e=function(){function e(){h(this,e),this.fps=30,this.epsilon=.001}return b(e,[{key:"getChapterLocalTimerange",value:function(e){var t=Human.timeline.activeRoot._chapters.find((function(t){return t.id===e}));return Object(a.plainToClass)(i.a,t.timeRange)}},{key:"mapGlobalTimeToLocal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Human.timeline.activeRoot.mapGlobalTime(e,t);return n.time<0&&(n.time=0),n}},{key:"mapLocalTimeToGlobal",value:function(e,t){var n=Human.timeline.activeRoot._chapters.find((function(t){return t.id===e}));return Human.timeline.activeRoot.mapBranchTime(n,t)}},{key:"getLocalTime",value:function(e){var t=Human.timeline.activeRoot._nowBranch,n=this.mapLocalTimeToGlobal(t.id,t.timeRange.firstTime);return this.mapGlobalTimeToLocal(e,{tie:e===n?"later":"earlier"}).time}},{key:"isChapterAnimated",value:function(e){return e.timelineMap.filter((function(e){return"dummy"!==Object(o.get)(e,"data.timeline")&&"dummy"!==Object(o.get)(e,"data.timeline.id")&&"dummy"!==Object(o.get)(e,"data.timeline.id.id")})).length>0}},{key:"isChapterLooped",value:function(e){return!0===Object(o.get)(e,"loop")||-1===Object(o.get)(e,"ui.play.count")}},{key:"scrub",value:function(e){Human.timeline.scrub({time:e.time,borderCondition:{which:e.which?e.which:"first",direction:"forwards"}})}},{key:"scrubFrame",value:function(e){var t,n="next"===e?1:-1,i=this.getTime(),a=this.secondsToFrames(i),o=this.framesToSeconds(a+n),r=Human.timeline.activeRoot._nowBranch,s=r.timeRange,c=this.mapLocalTimeToGlobal(r.id,s.firstTime),u=this.mapLocalTimeToGlobal(r.id,s.lastTime);t=o<=c?{time:c,which:"second"}:o>=u?{time:u,which:"first"}:{time:o},this.scrub(t)}},{key:"fromEngineTimelineMap",value:function(e){return{id:e.id,name:e.name,start:e.start,end:e.end,data:{timeline:e.leafTimeline.id,start:e.dataStart,end:e.dataEnd,fit:e.fit,onEnd:e.onEnd}}}},{key:"secondsToFrames",value:function(e){return Math.round(e*this.fps)}},{key:"framesToSeconds",value:function(e){return e/this.fps}},{key:"toNearestFrame",value:function(e){return this.framesToSeconds(this.secondsToFrames(e))}},{key:"formatTime",value:function(e){var t,n=this,i=function(t){var n=e<0?Math.ceil:Math.floor;return Math.abs(n(t)).toString().padStart(2,"0")},a=i(e/60),o=i(e%60),r=(t=e%1,Math.abs(n.secondsToFrames(t%1)).toString().padStart(2,"0"));return"".concat(e<0?"-":"").concat(a,":").concat(o,":").concat(r)}},{key:"parseFormattedTime",value:function(e){var t=/^-/,n=t.test(e)?-1:1;-1===n&&(e=e.replace(t,""));var i=e.split(":").reverse(),a=parseInt(i[0],10),o=parseInt(i[1],10),r=parseInt(i[2],10);return isNaN(a)&&(a=0),isNaN(o)&&(o=0),isNaN(r)&&(r=0),(60*r+o+this.framesToSeconds(a))*n}},{key:"constrainLocalTime",value:function(e){var t=Human.timeline.activeRoot._nowBranch.timeRange;return e<t.firstTime&&(e=t.firstTime),e>t.lastTime&&(e=t.lastTime),e}},{key:"addTimelineMap",value:function(e,t){var n=e.getTimeFrame(),i=e.createTimelineMap(t);t.id=i;var a=e.getTimeFrame();return n.lastTime!==a.lastTime&&Human.timeline.activeRoot.build(),t}},{key:"updateTimelineMaps",value:function(e,t){var n=e.getTimeFrame();t.forEach((function(t){e.updateTimelineMap(t.id,t)}));var i=e.getTimeFrame();n.lastTime!==i.lastTime&&Human.timeline.activeRoot.build()}},{key:"deleteTimelineMaps",value:function(e,t){var n=e.getTimeFrame();t.forEach((function(t){e.deleteTimelineMap(t)}));var i=e.getTimeFrame();n.lastTime!==i.lastTime&&Human.timeline.activeRoot.build()}},{key:"getLeafTimelines",value:function(){return Human.timeline.leafTimelines}},{key:"getTimeFrame",value:function(){return Human.timeline.getTimeFrame()}},{key:"getTime",value:function(){return Human.timeline.time}},{key:"isPlaying",value:function(){return Human.timeline.playing}},{key:"hasChapterFinished",value:function(e){var t=this.getChapterLocalTimerange(e),n=this.mapGlobalTimeToLocal(Human.timeline.time);return Math.abs(n.time-t.lastTime)<this.epsilon}},{key:"play",value:function(e){this.playParams=Object.keys(e).reduce((function(e,t){return void 0===e[t]&&delete e[t],e}),Object.assign({},e)),Human.timeline.play(this.playParams)}},{key:"rewind",value:function(e){var t=this.mapLocalTimeToGlobal(e,0);this.scrub({time:t,which:"second"})}},{key:"unpause",value:function(e){this.hasChapterFinished(e)&&this.rewind(e),Human.timeline.unpause()}},{key:"pause",value:function(){Human.timeline.pause()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"r/EZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Mobile=0]="Mobile",e[e.None=1]="None",e}({})},rGz1:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i,a=n("AcyG"),o=n("0E12"),r=n("4FHB"),s=n("FKtB"),c=n("fXoL"),d=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){var e=i=function(){function e(){h(this,e)}return b(e,[{key:"applyPatch",value:function(e,t){var n=immer.applyPatches(e.getState(),t.patches);e.patchState(n)}},{key:"setParticleState",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.particleSystems=t.particleSystems.reduce((function(e,t){return e[t.id]=t,e}),{}),e.assignedParticles=t.assignedParticles,e.tweenParticleLookup=t.tweenParticleLookup,e.visibleParticleSystems={}})))}},{key:"setParticlesVisible",value:function(e,t){var n=t.visible,i=t.chapterId;e.patchState(immer.produce(e.getState(),(function(e){var t=(e.assignedParticles[i]||[]).reduce((function(e,t){return e[t]=n,e}),{});e.visibleParticleSystems=Object.assign(Object.assign({},e.visibleParticleSystems),l({},i,t))})))}},{key:"setParticleVisible",value:function(e,t){var n=t.id,i=t.visible,a=t.chapterId;e.patchState(immer.produce(e.getState(),(function(e){e.visibleParticleSystems[a]=Object.assign(Object.assign({},e.visibleParticleSystems[a]||{}),l({},n,i))})))}},{key:"newParticleSystem",value:function(e,t){var n=t.particleSystem,i=t.chapterId,a=n.id,o=p(immer.produceWithPatches(e.getState(),(function(e){e.particleSystems[a]=n,e.assignedParticles[i]=[].concat(u(e.assignedParticles[i]||[]),[a])})),3),r=o[0];o[1],o[2];e.patchState(r)}},{key:"duplicateParticleSystem",value:function(e,t){var n=t.id,i=t.targetChapterId,a=s.a.generateParticleId(n);e.patchState(immer.produce(e.getState(),(function(e){e.particleSystems[a]=JSON.parse(JSON.stringify(e.particleSystems[n])),e.particleSystems[a].id=a,e.assignedParticles[i].push(a);var t=s.a.getParticleIdRoot(n);e.tweenParticleLookup[i]&&e.tweenParticleLookup[i][t]&&(e.tweenParticleLookup=r.a.addEntryForChapter(i,l({},t,a),e.tweenParticleLookup))}))),e.dispatch(new o.a.DuplicateParticleSystemSuccess(a,i))}},{key:"updateParticleSystem",value:function(e,t){var n=immer.produce(e.getState(),(function(e){e.particleSystems[t.id]=t.particleSystem}));e.patchState(Object.assign(Object.assign({},n),{particleSystems:Object.assign({},n.particleSystems)}))}},{key:"deleteChapterLookup",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){delete e.tweenParticleLookup[t.chapterId]})))}},{key:"setLookupForChapter",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.tweenParticleLookup[t.chapterId]=t.lookup})))}},{key:"assignParticle",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){var n=e.assignedParticles[t.chapterId]||[],i=s.a.getParticleIdRoot(t.id);e.assignedParticles[t.chapterId]=n.concat(t.id),e.tweenParticleLookup=r.a.addEntryForChapter(t.chapterId,l({},i,t.id),e.tweenParticleLookup),e.particleSystems=Object.assign({},e.particleSystems)})))}},{key:"unassignParticle",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){var n=e.assignedParticles[t.chapterId]||[],i=s.a.getParticleIdRoot(t.id);e.assignedParticles[t.chapterId]=n.filter((function(e){return e!==t.id})),e.tweenParticleLookup[t.chapterId]&&delete e.tweenParticleLookup[t.chapterId][i],e.particleSystems=Object.assign({},e.particleSystems)})))}},{key:"deleteParticleSystem",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){delete e.particleSystems[t.id],Object.keys(e.assignedParticles).forEach((function(n){e.assignedParticles[n]=e.assignedParticles[n].filter((function(e){return e!==t.id}))})),Object.keys(e.tweenParticleLookup).forEach((function(n){delete e.tweenParticleLookup[n][s.a.getParticleIdRoot(t.id)]}))})))}},{key:"selectParticleSystem",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.particleSelection={selectedParticle:t.id}})))}},{key:"selectParticleConstraint",value:function(e,t){var n=e.getState().particleSelection;e.patchState(immer.produce(e.getState(),(function(e){e.particleSelection=Object.assign(Object.assign({},n),{selectedConstraint:t.index})})))}},{key:"selectParticleCreator",value:function(e,t){var n=e.getState().particleSelection;e.patchState(immer.produce(e.getState(),(function(e){e.particleSelection=Object.assign(Object.assign({},n),{selectedCreator:t.index})})))}},{key:"selectParticleUpdater",value:function(e,t){var n=e.getState().particleSelection;e.patchState(immer.produce(e.getState(),(function(e){e.particleSelection=Object.assign(Object.assign({},n),{selectedUpdater:t.index})})))}},{key:"updateTweenParticleLookupChapters",value:function(e,t){e.patchState(immer.produce(e.getState(),(function(e){e.tweenParticleLookup=r.a.updateChapterIds(e.tweenParticleLookup,t.chapterMap)})))}}],[{key:"particleSystemIdExists",value:function(e){return Object(a.i)([i],(function(t){return void 0!==t.particleSystems[e]}))}},{key:"particleSystemsForChapter",value:function(e){return Object(a.i)([i],(function(t){return(t.assignedParticles[e]||[]).map((function(e){return t.particleSystems[e]}))}))}},{key:"getVisibleParticleSystesmForChapter",value:function(e){return Object(a.i)([i],(function(t){var n=t.visibleParticleSystems[e]||{};return(t.assignedParticles[e]||[]).filter((function(e){return!1!==n[e]}))}))}},{key:"getTweenParticleLookup",value:function(e){return e.tweenParticleLookup}},{key:"getParticleSystems",value:function(e){return e.particleSystems}},{key:"getVisisbleParticleSystems",value:function(e){return e.visibleParticleSystems}},{key:"getParticleSystemsList",value:function(e){return Object.values(e.particleSystems)}},{key:"getAssignedParticleSystems",value:function(e){return e.assignedParticles}},{key:"getSelectedParticleSystemId",value:function(e){return e.particleSelection.selectedParticle}},{key:"getSelectedParticleSystem",value:function(e){return e.particleSystems[e.particleSelection.selectedParticle]}},{key:"getSelectedParticleConstraintIndex",value:function(e){return e.particleSelection.selectedConstraint}},{key:"getSelectedParticleConstraint",value:function(e){var t=i.getSelectedParticleSystem(e);return t?t.constraints[e.particleSelection.selectedConstraint]:null}},{key:"getSelectedParticleCreatorIndex",value:function(e){return e.particleSelection.selectedCreator}},{key:"getSelectedParticleCreator",value:function(e){var t=i.getSelectedParticleSystem(e);return t?t.creators[e.particleSelection.selectedCreator]:null}},{key:"getSelectedParticleUpdaterIndex",value:function(e){return e.particleSelection.selectedUpdater}},{key:"getSelectedParticleUpdater",value:function(e){var t=i.getSelectedParticleSystem(e);return t?t.updaters[e.particleSelection.selectedUpdater]:null}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac}),d([Object(a.a)(o.a.ApplyPatch),g("design:type",Function),g("design:paramtypes",[Object,o.a.ApplyPatch]),g("design:returntype",void 0)],e.prototype,"applyPatch",null),d([Object(a.a)(o.a.SetParticleState),g("design:type",Function),g("design:paramtypes",[Object,o.a.SetParticleState]),g("design:returntype",void 0)],e.prototype,"setParticleState",null),d([Object(a.a)(o.a.SetParticleSystemsVisible),g("design:type",Function),g("design:paramtypes",[Object,o.a.SetParticleSystemsVisible]),g("design:returntype",void 0)],e.prototype,"setParticlesVisible",null),d([Object(a.a)(o.a.SetParticleSystemVisible),g("design:type",Function),g("design:paramtypes",[Object,o.a.SetParticleSystemVisible]),g("design:returntype",void 0)],e.prototype,"setParticleVisible",null),d([Object(a.a)(o.a.NewParticleSystem),g("design:type",Function),g("design:paramtypes",[Object,o.a.NewParticleSystem]),g("design:returntype",void 0)],e.prototype,"newParticleSystem",null),d([Object(a.a)(o.a.DuplicateParticleSystem),g("design:type",Function),g("design:paramtypes",[Object,o.a.DuplicateParticleSystem]),g("design:returntype",void 0)],e.prototype,"duplicateParticleSystem",null),d([Object(a.a)(o.a.UpdateParticleSystem),g("design:type",Function),g("design:paramtypes",[Object,o.a.UpdateParticleSystem]),g("design:returntype",void 0)],e.prototype,"updateParticleSystem",null),d([Object(a.a)(o.a.DeleteChapterLookup),g("design:type",Function),g("design:paramtypes",[Object,o.a.DeleteChapterLookup]),g("design:returntype",void 0)],e.prototype,"deleteChapterLookup",null),d([Object(a.a)(o.a.SetLookupForChapter),g("design:type",Function),g("design:paramtypes",[Object,o.a.SetLookupForChapter]),g("design:returntype",void 0)],e.prototype,"setLookupForChapter",null),d([Object(a.a)(o.a.AssignParticle),g("design:type",Function),g("design:paramtypes",[Object,o.a.AssignParticle]),g("design:returntype",void 0)],e.prototype,"assignParticle",null),d([Object(a.a)(o.a.UnassignParticle),g("design:type",Function),g("design:paramtypes",[Object,o.a.UnassignParticle]),g("design:returntype",void 0)],e.prototype,"unassignParticle",null),d([Object(a.a)(o.a.DeleteParticleSystem),g("design:type",Function),g("design:paramtypes",[Object,o.a.DeleteParticleSystem]),g("design:returntype",void 0)],e.prototype,"deleteParticleSystem",null),d([Object(a.a)(o.a.SelectParticleSystem),g("design:type",Function),g("design:paramtypes",[Object,o.a.SelectParticleSystem]),g("design:returntype",void 0)],e.prototype,"selectParticleSystem",null),d([Object(a.a)(o.a.SelectParticleConstraint),g("design:type",Function),g("design:paramtypes",[Object,o.a.SelectParticleConstraint]),g("design:returntype",void 0)],e.prototype,"selectParticleConstraint",null),d([Object(a.a)(o.a.SelectParticleCreator),g("design:type",Function),g("design:paramtypes",[Object,o.a.SelectParticleCreator]),g("design:returntype",void 0)],e.prototype,"selectParticleCreator",null),d([Object(a.a)(o.a.SelectParticleUpdater),g("design:type",Function),g("design:paramtypes",[Object,o.a.SelectParticleUpdater]),g("design:returntype",void 0)],e.prototype,"selectParticleUpdater",null),d([Object(a.a)(o.a.UpdateTweenParticleLookupChapters),g("design:type",Function),g("design:paramtypes",[Object,o.a.UpdateTweenParticleLookupChapters]),g("design:returntype",void 0)],e.prototype,"updateTweenParticleLookupChapters",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getTweenParticleLookup",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getParticleSystems",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getVisisbleParticleSystems",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getParticleSystemsList",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getAssignedParticleSystems",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getSelectedParticleSystemId",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getSelectedParticleSystem",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getSelectedParticleConstraintIndex",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getSelectedParticleConstraint",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getSelectedParticleCreatorIndex",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getSelectedParticleCreator",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getSelectedParticleUpdaterIndex",null),d([Object(a.f)(),g("design:type",Function),g("design:paramtypes",[Object]),g("design:returntype",void 0)],e,"getSelectedParticleUpdater",null),e=i=d([Object(a.g)({name:"engineParticles",defaults:{particleSelection:{},particleSystems:{},visibleParticleSystems:{},assignedParticles:{},tweenParticleLookup:{}}})],e)}()},rKJn:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Web="web",e.Mobile="mobilesdk",e}({})},rYhz:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i,a=n("AcyG"),o=n("qXBG"),r=n("vkgz"),s=n("pLZG"),c=n("5+tZ"),u=n("nYR2"),l=n("Kn5L"),p=n("icKS"),d=function e(){h(this,e)},g=n("KI9D"),f=n("8mU5"),m=n("fXoL"),y=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},v=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},k={sharing:!1},O=((i=function(){function e(t,n,i){h(this,e),this.shareService=t,this.productService=n,this.authService=i}return b(e,[{key:"resetShare",value:function(e,t){e.setState(k)}},{key:"sendEmail",value:function(e,t){var n=this,i=t.shareEmail;e.patchState({sharing:!0}),this.authService.isHuman("share_email",!0).pipe(Object(r.a)((function(t){t.isHuman||e.dispatch(new l.sb(new Error("reCAPTCHA error. Refresh the page and try again.")))})),Object(s.a)((function(e){return e.isHuman})),Object(c.b)((function(e){return n.shareService.shareEmailLink(Object.assign({version:4,app_productkey:n.productService.productKey,app_producttype:n.productService.productType,site_verify_response:e.verification},i))})),Object(u.a)((function(){return e.patchState({sharing:!1})}))).subscribe((function(){return e.dispatch(new g.d(i))}),(function(t){return e.dispatch(new g.c(t))}))}}],[{key:"getSharing",value:function(e){return e.sharing}}]),e}()).\u0275fac=function(e){return new(e||i)(m.Zb(f.a),m.Zb(p.a),m.Zb(o.a))},i.\u0275prov=m.Lb({token:i,factory:i.\u0275fac}),y([Object(a.a)(g.a),v("design:type",Function),v("design:paramtypes",[Object,g.a]),v("design:returntype",void 0)],i.prototype,"resetShare",null),y([Object(a.a)(g.b),v("design:type",Function),v("design:paramtypes",[Object,g.b]),v("design:returntype",void 0)],i.prototype,"sendEmail",null),y([Object(a.f)(),v("design:type",Function),v("design:paramtypes",[d]),v("design:returntype",void 0)],i,"getSharing",null),i=y([Object(a.g)({name:"share",defaults:k})],i))},rvu2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){h(this,e),this.firstTime=0,this.lastTime=1}},sTHe:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Select="Select",e.Hide="Hide",e.Paint="Paint",e.Eyedropper="Eyedropper",e.Label="Label",e.Isolate="Isolate",e.Fade="Fade",e.Position="Position",e.Quiz="Quiz",e}({})},snBo:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.AnatomyLabels="anatomyLabels",e.Audio="audio",e.Camera="camera",e.Column="column",e.ColumnToggle="column-toggle",e.ContextActions="contextActions",e.Description="description",e.Drawer="drawer",e.Fullscreen="fullscreen",e.Help="help",e.InternetExplorerWarning="internetExplorerWarning",e.LabelList="labelList",e.Labels="labels",e.Layout="layout",e.Legend="legend",e.Loader="loader",e.Logo="logo",e.Media="media",e.Mediabar="mediabar",e.Menu="menu",e.NodeInfo="nodeInfo",e.Pagination="pagination",e.Presenter="presenter",e.Reset="reset",e.Search="search",e.ScrubberButton="scrubberButton",e.ScrubberItem="scrubberItem",e.TitleOnly="title-only",e.ToggleLabels="toggleLabels",e.Toolbar="toolbar",e.Tools="tools",e.Tutorial="tutorial",e.Undo="undo",e.VisibilityLayers="visibilityLayers",e.Whiteboard="whiteboard",e}({})},stSV:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s}));var i=n("AytR"),a=n("p345"),o=function(e){return e.None="none",e.Circle="circle",e.Bar="bar",e}({}),r=o.Bar,s=i.a.application===a.a.Viewer?r:o.Circle},t15c:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={small:{width:256,height:256},medium:{width:512,height:512},large:{width:1024,height:1024}}},tgUM:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u}));var i={label:"Relevance",fields:[],ascending:!0},a={label:"Most Recent",fields:["collection_content_createdate","update_date_time","create_date_time"],ascending:!1},o={label:"Title (A-Z)",fields:["title"],ascending:!0},r={label:"Title (Z-A)",fields:["title"],ascending:!1},s={label:"Author (A-Z)",fields:["author"],ascending:!0},c={label:"Author (Z-A)",fields:["author"],ascending:!1},u=[i,a,o,r,s,c]},u9Xo:function(e,t,n){"use strict";n.d(t,"a",(function(){return Se}));var i,a,o,r,s,c,u,l,p,d,g,f,m,y,v,k,O,S,x,C,w,j,P,_,M,I,T,U=n("ofXK"),L=n("vvyD"),z=n("PCNd"),A=n("fXoL"),F=((a=function e(){h(this,e)}).\u0275mod=A.Nb({type:a}),a.\u0275inj=A.Mb({factory:function(e){return new(e||a)},imports:[[U.c,L.a,z.a]]}),a),D=((i=function e(){h(this,e)}).\u0275mod=A.Nb({type:i}),i.\u0275inj=A.Mb({factory:function(e){return new(e||i)},imports:[[U.c,L.a,z.a]]}),i),E=n("3Pt+"),N=((u=function e(){h(this,e)}).\u0275mod=A.Nb({type:u}),u.\u0275inj=A.Mb({factory:function(e){return new(e||u)},imports:[[U.c,L.a,z.a,E.z]]}),u),R=((c=function e(){h(this,e)}).\u0275mod=A.Nb({type:c}),c.\u0275inj=A.Mb({factory:function(e){return new(e||c)},imports:[[U.c,L.a,z.a]]}),c),V=((s=function e(){h(this,e)}).\u0275mod=A.Nb({type:s}),s.\u0275inj=A.Mb({factory:function(e){return new(e||s)},imports:[[U.c,L.a,z.a]]}),s),B=((r=function e(){h(this,e)}).\u0275mod=A.Nb({type:r}),r.\u0275inj=A.Mb({factory:function(e){return new(e||r)},imports:[[U.c,L.a,z.a]]}),r),H=((o=function e(){h(this,e)}).\u0275mod=A.Nb({type:o}),o.\u0275inj=A.Mb({factory:function(e){return new(e||o)},imports:[[U.c,L.a,z.a]]}),o),Q=n("EWj2"),G=((p=function e(){h(this,e)}).\u0275mod=A.Nb({type:p}),p.\u0275inj=A.Mb({factory:function(e){return new(e||p)},imports:[[U.c,L.a,Q.a]]}),p),W=((l=function e(){h(this,e)}).\u0275mod=A.Nb({type:l}),l.\u0275inj=A.Mb({factory:function(e){return new(e||l)},imports:[[U.c,L.a,z.a,E.z]]}),l),q=n("YsyH"),X=((d=function e(){h(this,e)}).\u0275mod=A.Nb({type:d}),d.\u0275inj=A.Mb({factory:function(e){return new(e||d)},imports:[[U.c,L.a,z.a]]}),d),Z=n("AcyG"),J=function e(){h(this,e)},K=n("0Zsz"),$=n("L2KA"),Y=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},ee=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},te=((k=function(){function e(t){h(this,e),this.dialogService=t}return b(e,[{key:"openLimit",value:function(e,t){this.dialogService.openLimitDialog().afterClosed().subscribe((function(t){e.dispatch(new K.a.CloseLimit(t))}))}},{key:"closeLimit",value:function(e,t){t.upgrade&&this.dialogService.openUpgradeDialog()}},{key:"openPremiumContent",value:function(e,t){this.dialogService.openPremiumContentDialog().afterClosed().subscribe((function(t){e.dispatch(new K.a.ClosePremiumContent(t))}))}},{key:"closePremiumContent",value:function(e,t){t.confirmed&&e.dispatch(new K.a.OpenUpgrade)}},{key:"openUpgrade",value:function(e,t){this.dialogService.openUpgradeDialog()}}],[{key:"getOpenDialog",value:function(e){return e.openDialog}}]),e}()).\u0275fac=function(e){return new(e||k)(A.Zb($.a))},k.\u0275prov=A.Lb({token:k,factory:k.\u0275fac}),Y([Object(Z.a)(K.a.OpenLimit),ee("design:type",Function),ee("design:paramtypes",[Object,K.a.OpenLimit]),ee("design:returntype",void 0)],k.prototype,"openLimit",null),Y([Object(Z.a)(K.a.CloseLimit),ee("design:type",Function),ee("design:paramtypes",[Object,K.a.CloseLimit]),ee("design:returntype",void 0)],k.prototype,"closeLimit",null),Y([Object(Z.a)(K.a.OpenPremiumContent),ee("design:type",Function),ee("design:paramtypes",[Object,K.a.OpenPremiumContent]),ee("design:returntype",void 0)],k.prototype,"openPremiumContent",null),Y([Object(Z.a)(K.a.ClosePremiumContent),ee("design:type",Function),ee("design:paramtypes",[Object,K.a.ClosePremiumContent]),ee("design:returntype",void 0)],k.prototype,"closePremiumContent",null),Y([Object(Z.a)(K.a.OpenUpgrade),ee("design:type",Function),ee("design:paramtypes",[Object,K.a.OpenUpgrade]),ee("design:returntype",void 0)],k.prototype,"openUpgrade",null),Y([Object(Z.f)(),ee("design:type",Function),ee("design:paramtypes",[J]),ee("design:returntype",void 0)],k,"getOpenDialog",null),k=Y([Object(Z.g)({name:"dialog",defaults:{openDialog:null}})],k)),ne=((v=function e(){h(this,e)}).\u0275mod=A.Nb({type:v}),v.\u0275inj=A.Mb({factory:function(e){return new(e||v)},imports:[[U.c,L.a,z.a,E.z]]}),v),ie=((y=function e(){h(this,e)}).\u0275mod=A.Nb({type:y}),y.\u0275inj=A.Mb({factory:function(e){return new(e||y)},imports:[[U.c,L.a,z.a,E.z]]}),y),ae=((m=function e(){h(this,e)}).\u0275mod=A.Nb({type:m}),m.\u0275inj=A.Mb({factory:function(e){return new(e||m)},imports:[[U.c,L.a,z.a,E.z]]}),m),oe=((f=function e(){h(this,e)}).\u0275mod=A.Nb({type:f}),f.\u0275inj=A.Mb({factory:function(e){return new(e||f)},imports:[[U.c,L.a,z.a]]}),f),re=((g=function e(){h(this,e)}).\u0275mod=A.Nb({type:g}),g.\u0275inj=A.Mb({factory:function(e){return new(e||g)},imports:[[U.c,L.a,E.l,E.z,z.a]]}),g),se=n("+Xsx"),ce=n("PXMH"),ue=((S=function e(){h(this,e)}).\u0275mod=A.Nb({type:S}),S.\u0275inj=A.Mb({factory:function(e){return new(e||S)},imports:[[U.c,L.a,z.a,E.z]]}),S),le=((O=function e(){h(this,e)}).\u0275mod=A.Nb({type:O}),O.\u0275inj=A.Mb({factory:function(e){return new(e||O)},imports:[[U.c,L.a,z.a,E.z]]}),O),pe=n("+pSP"),de=((x=function e(){h(this,e)}).\u0275mod=A.Nb({type:x}),x.\u0275inj=A.Mb({factory:function(e){return new(e||x)},imports:[[U.c,L.a,pe.a,Q.a]]}),x),ge=n("vRHm"),he=((M=function e(){h(this,e)}).\u0275mod=A.Nb({type:M}),M.\u0275inj=A.Mb({factory:function(e){return new(e||M)},imports:[[U.c,L.a,z.a,E.z,ge.a]]}),M),fe=((_=function e(){h(this,e)}).\u0275mod=A.Nb({type:_}),_.\u0275inj=A.Mb({factory:function(e){return new(e||_)},imports:[[U.c,L.a,z.a,E.z]]}),_),be=((P=function e(){h(this,e)}).\u0275mod=A.Nb({type:P}),P.\u0275inj=A.Mb({factory:function(e){return new(e||P)},imports:[[U.c,L.a,z.a,E.z]]}),P),me=((j=function e(){h(this,e)}).\u0275mod=A.Nb({type:j}),j.\u0275inj=A.Mb({factory:function(e){return new(e||j)},imports:[[U.c,L.a,z.a,E.z]]}),j),ye=((w=function e(){h(this,e)}).\u0275mod=A.Nb({type:w}),w.\u0275inj=A.Mb({factory:function(e){return new(e||w)},imports:[[U.c,L.a,z.a,E.z]]}),w),ve=((C=function e(){h(this,e)}).\u0275mod=A.Nb({type:C}),C.\u0275inj=A.Mb({factory:function(e){return new(e||C)},imports:[[U.c,L.a,z.a,E.z]]}),C),ke=n("ejx4"),Oe=((T=function e(){h(this,e)}).\u0275mod=A.Nb({type:T}),T.\u0275inj=A.Mb({factory:function(e){return new(e||T)},imports:[[U.c,L.a,z.a,E.l,E.z]]}),T),Se=((I=function e(){h(this,e)}).\u0275mod=A.Nb({type:I}),I.\u0275inj=A.Mb({factory:function(e){return new(e||I)},imports:[[Z.d.forFeature([te]),F,D,N,R,V,ve,B,H,de,G,W,q.a,X,ne,ie,ae,oe,re,ue,le,he,me,ye,se.a,ce.a,z.a],F,D,N,R,V,ve,B,H,de,G,W,q.a,X,ne,he,ie,ae,oe,re,ue,le,fe,be,me,ye,ke.a,Oe]}),I)},uA5T:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){h(this,e)}},uAsG:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var i=n("b36G"),a=n("Vec5"),o=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=function(){var e=function e(){h(this,e)};return function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);o>3&&r&&Object.defineProperty(t,n,r)}([Object(i.Type)((function(){return a.a})),o("design:type",Array)],e.prototype,"organizations",void 0),e}();function s(e){return e.email.endsWith("@biodigital.com")}},uDDk:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Markdown="markdown",e.Images="images",e.Ticker="ticker",e}({})},ufUH:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Basics=0]="Basics",e[e.All=1]="All",e[e.Shortcuts=2]="Shortcuts",e}({})},uwj7:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Query=0]="Query",e[e.Path=1]="Path",e}({})},vCxQ:function(e,t,n){"use strict";n("qA9Q"),n("3fyd")},vRHm:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("ofXK"),a=n("3Pt+"),o=n("D8yp"),r=n("PXMH"),s=n("Ow1N"),c=n("EWj2"),u=n("vvyD"),l=n("+Xsx"),p=n("fXoL"),d=function(){var e=function e(){h(this,e)};return e.\u0275mod=p.Nb({type:e}),e.\u0275inj=p.Mb({factory:function(t){return new(t||e)},imports:[[i.c,u.a,a.l,r.a,a.z,s.a,c.a,o.a,l.a]]}),e}()},vXBk:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return s}));var i=l({},n("9U6C").a.WoltersKluwer,"https://tools.ovid.com/support/index_inner.html");function a(e){return"https://support.biodigital.com/hc/en-us"}function o(e){return!0===(null==e?void 0:e.premium_account_valid)||"group"===(null==e?void 0:e.premium_account_type)}function r(e){var t,n;return!(null===(n=null===(t=null==e?void 0:e.organizations[0])||void 0===t?void 0:t.external_account)||void 0===n?void 0:n.is_external_account)&&o(e)}function s(e){var t,n,a=null===(n=null===(t=null==e?void 0:e.organizations[0])||void 0===t?void 0:t.external_account)||void 0===n?void 0:n.external_account_provider;return i[a]}},vXdC:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function e(){h(this,e)}},ve2m:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r}));var i={colors:[245,245,245,1,245,245,245,1],gradientType:"radial",colorStops:[0,100]},a={colors:[255,255,255,0,255,255,255,0],gradientType:"linear",colorStops:[0,100]},o=[{colors:[0,0,0,1,0,0,0,1],gradientType:"linear",colorStops:[0,100]},{colors:[38,38,38,1,38,38,38,1],gradientType:"linear",colorStops:[0,100]},{colors:[77,77,77,1,77,77,77,1],gradientType:"linear",colorStops:[0,100]},{colors:[115,115,115,1,115,115,115,1],gradientType:"linear",colorStops:[0,100]},{colors:[153,153,153,1,153,153,153,1],gradientType:"linear",colorStops:[0,100]},{colors:[191,191,191,1,191,191,191,1],gradientType:"linear",colorStops:[0,100]},{colors:[230,230,230,1,230,230,230,1],gradientType:"linear",colorStops:[0,100]},{colors:[255,255,255,1,255,255,255,1],gradientType:"linear",colorStops:[0,100]},{colors:[128,128,128,1,0,0,0,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,38,38,38,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,77,77,77,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,115,115,115,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,153,153,153,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,191,191,191,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,230,230,230,1],gradientType:"radial",colorStops:[0,100]},{colors:[128,128,128,1,255,255,255,1],gradientType:"radial",colorStops:[0,100]},{colors:[245,208,208,1,245,208,208,1],gradientType:"linear",colorStops:[0,100]},{colors:[253,236,219,1,253,236,219,1],gradientType:"linear",colorStops:[0,100]},{colors:[255,246,219,1,255,246,219,1],gradientType:"linear",colorStops:[0,100]},{colors:[220,236,213,1,220,236,213,1],gradientType:"linear",colorStops:[0,100]},{colors:[212,229,245,1,212,229,245,1],gradientType:"linear",colorStops:[0,100]},{colors:[219,212,235,1,219,212,235,1],gradientType:"linear",colorStops:[0,100]},{colors:[164,194,244,1,164,194,244,1],gradientType:"linear",colorStops:[0,100]},{colors:[118,165,175,1,118,165,175,1],gradientType:"linear",colorStops:[0,100]},{colors:[245,208,208,1,245,208,208,1],gradientType:"radial",colorStops:[0,100]},{colors:[253,236,219,1,240,169,99,1],gradientType:"radial",colorStops:[0,100]},{colors:[255,246,219,1,250,210,92,1],gradientType:"radial",colorStops:[0,100]},{colors:[220,236,213,1,147,188,129,1],gradientType:"radial",colorStops:[0,100]},{colors:[212,229,245,1,112,164,213,1],gradientType:"radial",colorStops:[0,100]},{colors:[219,212,235,1,145,128,187,1],gradientType:"radial",colorStops:[0,100]},{colors:[164,194,244,1,112,164,213,1],gradientType:"radial",colorStops:[0,100]},{colors:[211,211,211,1,118,165,175,1],gradientType:"radial",colorStops:[0,100]}],r=[].concat(o,[{colors:[10,132,130,255,5,43,51,255],gradientType:"radial",colorStops:[0,68]},{colors:[0,28,84,1,0,0,0,1],gradientType:"radial",colorStops:[12,100]}])},vm16:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("LvDl"),a=n("cp0P"),o=n("LRne"),r=n("HDdC"),s=n("eIep"),c=n("lJxs"),u=n("Wd1f"),l=n("6d61"),p=n("fXoL"),d=n("tk/3"),g=function(){var e=function(){function e(t){h(this,e),this.http=t}return b(e,[{key:"generateFreshChapterImages",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];return e.forEach((function(e){var a=u.a.getChapterThumbnail(e,t);(a.legacy||n)&&i.push(u.a.makeFreshThumbnail(a.storyId,a.chapterId,a.urls.large))})),i.length?Object(a.a)(i):Object(o.a)([])}},{key:"saveChapterThumbnails",value:function(e,t,n){var a=this;return e.reduce((function(e,o){var r=t.get(n[o.id]),s=Object(i.get)(r,"snapshot");return s&&e.push(a.saveNewChapterImage(o.id,s)),e}),[])}},{key:"saveNewChapterImage",value:function(e,t){var n=this;return new r.a((function(i){Object(l.a)(t).pipe(Object(s.a)((function(e){return n.saveImageBlob(e)})),Object(c.a)((function(t){return Object.assign({chapterId:e},t)}))).subscribe((function(e){i.next(e),i.complete()}),(function(){i.next(null),i.complete()}))}))}},{key:"getIndexThumbnail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"large";return"".concat("undefined"==typeof localBaseDirectory?"":localBaseDirectory,"thumbs/modules/").concat(e,"/").concat(t,"/index.jpg")}},{key:"saveImageBlob",value:function(e){var t=new File([e],"image.jpg",{type:"image/jpeg"}),n=new FormData;return n.append("file",t),this.http.post("/ws/media/images/upload",n)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Zb(d.b))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},vvyD:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n("f6nW"),a=n("FvrZ"),o=n("bSwM"),r=n("FKr1"),s=n("bTqV"),c=n("QibW"),u=n("d3UM"),l=n("STbY"),p=n("/t3+"),d=n("jaxi"),g=n("0IaG"),f=n("Qu3c"),b=n("dNgK"),m=n("f0Cb"),y=n("XhcP"),v=n("bv9b"),k=(n("yLV6"),n("vxfF")),O=n("5+WD"),S=n("rDax"),x=n("+rOU"),C=n("fXoL"),w={disabled:!0,animation:{enterDuration:0,exitDuration:0}},j=Object.assign(Object.assign({},Object(f.b)()),{touchGestures:"off"}),P=function(){var e=function e(){h(this,e)};return e.\u0275mod=C.Nb({type:e}),e.\u0275inj=C.Mb({factory:function(t){return new(t||e)},providers:[{provide:b.a,useValue:{duration:3e3}},{provide:r.d,useValue:w},{provide:f.a,useValue:j}],imports:[[O.d,i.a,o.b,o.b,s.b,c.c,u.a,l.c,p.a,d.c,g.f,f.d,b.c,m.b,y.d,k.g,S.f,x.f],O.d,i.a,a.a,o.b,o.b,s.b,c.c,u.a,l.c,p.a,d.c,g.f,f.d,b.c,m.b,y.d,k.g,S.f,x.f,v.b]}),e}()},wSC8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Local="Local",e.QA="QA",e.Staging="Staging",e.Production="Production",e}({})},"x/dY":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Chapter="chapter",e.Label="label",e.Paint="paint",e.Position="position",e.Quiz="quiz",e}({})},x1jL:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fqos"),a=function e(){h(this,e),this.type=i.a.flyToChapter,this.value=null}},xo8B:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return p}));var i=n("LvDl"),a=n("08/d");function o(){return[].concat(u(a.a.main),u(a.a.categories),u(a.a.specialties),u(a.a.community))}function r(e){return{all:s(a.a.main,e),anatomy:s(a.a.categories,e),specialties:s(a.a.specialties,e),community:s(a.a.community,e)}}function s(e,t){return e.map((function(e){var n={id:e.id,title:e.title,type:e.type};return t&&(n.title=Object(i.get)(e,"translations.".concat(t,".title"),n.title)),n}))}function c(e,t){if(null==e)return null;var n=Object(i.cloneDeep)(o().find((function(t){return t.id===e})));return null==n?null:(t&&(n.title=Object(i.get)(n,"translations.".concat(t,".title"),n.title)),n)}function l(e){return a.a.specialties.find((function(t){return e.tags.some((function(e){return e===t.id}))}))}function p(e){return a.a.categories.find((function(t){return e.tags.some((function(e){return e===t.id}))}))}},xybE:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("XoIW"),a=n("LRne"),o=n("lJxs"),r=n("vkgz"),s=n("b36G"),c=n("Vec5"),l=n("DTUA"),p=n("fXoL"),d=n("tk/3"),g=function(){var e=function(){function e(t,n){h(this,e),this.http=t,this.storageService=n}return b(e,[{key:"getUserMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=this.getCachedMessage(e);return u&&l?Object(a.a)(l):this.http.get("/ws/user/message?version=2&type=".concat(e,"&mode=").concat(n)).pipe(Object(o.a)((function(t){var n,a=t.message_seen_id,o=t.show_alert;switch(e){case i.a.DomainAlert:n=Object(s.plainToClass)(c.a,t.join_organization);break;case i.a.WelcomeTour:n=""+t.tour_version;break;case i.a.CompleteProfileAlert:var r=t||{},u=r.is_new_user,l=r.is_team_user;n=Object(s.plainToClass)(i.b,{is_new_user:u,is_team_user:l})}return{messageSeenId:a,messageType:e,showUserAlert:o,messageData:n}})),Object(r.a)((function(e){e.showUserAlert||t.addCachedMessage(e)})))}},{key:"setUserMessageViewed",value:function(e){return this.http.post("/ws/user/message",{version:2,message_seen_id:e})}},{key:"sendMessage",value:function(e){return this.http.post("/ws/user/message",e)}},{key:"getCachedMessage",value:function(e){return this.getCachedMessages().find((function(t){return t.messageType===e}))}},{key:"getCachedMessages",value:function(){return this.storageService.getSessionItem(l.c.UserMessagesSeen)||[]}},{key:"addCachedMessage",value:function(e){if(!this.getCachedMessage(e.messageType)){var t=this.getCachedMessages();this.storageService.setSessionItem(l.c.UserMessagesSeen,[].concat(u(t),[e]))}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Zb(d.b),p.Zb(l.d))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},yCjD:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Hide="hide",e.Show="show",e.Collapse="collapse",e}({})},yG3n:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return a}));var a=function e(){h(this,e),this[i]=!0};i=immer.immerable},yGOH:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("ofXK"),a=n("fXoL"),o=function(){var e=function e(){h(this,e)};return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e}()},yIGu:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("fXoL"),a=n("ofXK"),o=[[["app-list-item"]]],r=["app-list-item"],s=function(e){return e.Default="default",e.Commafied="commafied",e.flat="flat",e.inline="inline",e}({}),c=function(){var e=function(){function e(){h(this,e),this.listType=s.Default}return b(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-list"]],inputs:{listType:"listType"},ngContentSelectors:r,decls:2,vars:1,consts:[[1,"list",3,"ngClass"]],template:function(e,t){1&e&&(i.lc(o),i.Vb(0,"div",0),i.kc(1),i.Ub()),2&e&&i.mc("ngClass","list--"+t.listType)},directives:[a.m],styles:['.list{display:flex;flex-direction:column}.list--default app-list-item{display:list-item;margin-left:16px;list-style-type:disc}.list--commafied{align-items:center;display:flex;flex-direction:row;flex-wrap:wrap;padding:0 4px 4px 0}.list--commafied app-list-item:not(:last-child):after{content:", ";float:right;padding-right:4px}.list--flat app-list-item:not(:last-child){margin-bottom:4px}.list--inline{display:inline-flex;align-items:center;display:flex;flex-direction:row;flex-wrap:wrap}.list--inline app-list-item{margin:0 8px 4px 0}.list__item{display:block}'],encapsulation:2,changeDetection:0}),e}()},yonH:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.classicAnnotation="classic-annotation",e.classicHotspot="classic-hotspot",e.studioNext="studio-light",e}({})},zJoM:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.Normal="normal",e.Compact="compact",e}({})},zKvh:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e.JPEG="image/jpeg",e.PNG="image/png",e}({})},zP1m:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("R0Ic"),a=n("XNiG"),o=n("pLZG"),r=n("Kj3r"),s=n("1G5W"),c=n("5nh7"),u=n("fXoL"),l=n("ofXK"),p=n("0njA");function d(e,t){if(1&e&&(u.Vb(0,"div",7),u.Vb(1,"div",8),u.Qb(2,"app-icon",9),u.Ub(),u.Ub()),2&e){var n=u.gc(2);u.Db(2),u.mc("icon",n.icon)}}function g(e,t){if(1&e&&(u.Vb(0,"h3",10),u.Pc(1),u.Ub()),2&e){var n=u.gc(2);u.Db(1),u.Qc(n.title)}}function f(e,t){if(1&e){var n=u.Wb();u.Vb(0,"button",11),u.cc("click",(function(){return u.Cc(n),u.gc(2).handleDismissClicked()})),u.Qb(1,"app-icon",12),u.Ub()}}function m(e,t){if(1&e&&(u.Vb(0,"div",1),u.Vb(1,"div",2),u.Nc(2,d,3,1,"div",3),u.Vb(3,"div",4),u.Nc(4,g,2,1,"h3",5),u.Vb(5,"p"),u.kc(6),u.Ub(),u.Ub(),u.Ub(),u.Nc(7,f,2,0,"button",6),u.Ub()),2&e){var n=u.gc();u.Hb("toggle--message","message"===n.type)("toggle--error","error"===n.type)("toggle--notification","notification"===n.type)("toggle--warning","warning"===n.type)("toggle--rounded","rounded"===n.toggleStyle)("toggle--light","light"===n.theme)("toggle--dark","dark"===n.theme)("toggle--left","left"===n.toggleAlign)("toggle--center","center"===n.toggleAlign),u.mc("@show",void 0),u.Db(2),u.mc("ngIf",n.icon),u.Db(2),u.mc("ngIf",n.title),u.Db(3),u.mc("ngIf",n.dismiss)}}var y=["*"],v=function(){var e=function(){function e(t){h(this,e),this.changeRef=t,this.type="message",this.theme="light",this.toggleAlign="left",this.showDelay=0,this.hideDelay=5e3,this.dismiss=!1,this.toggleStyle="rounded",this.handleDismiss=new a.a,this._shown=!0,this.shownSubject=new a.a,this.ngUnsubscribe=new a.a}return b(e,[{key:"shown",get:function(){return this._shown},set:function(e){this._shown!==e&&(this._shown=e,this.shownSubject.next(e),this.changeRef.markForCheck())}},{key:"ngOnInit",value:function(){this.initViewShownListeners()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"handleDismissClicked",value:function(){this.handleDismiss.next()}},{key:"initViewShownListeners",value:function(){var e=this;this.shownSubject.pipe(Object(o.a)((function(){return e.hideDelay>0})),Object(r.a)(this.hideDelay),Object(o.a)((function(e){return e})),Object(s.a)(this.ngUnsubscribe)).subscribe((function(){e._shown=!1,e.changeRef.markForCheck()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Pb(u.i))},e.\u0275cmp=u.Jb({type:e,selectors:[["app-message-toggle"]],inputs:{type:"type",theme:"theme",toggleAlign:"toggleAlign",icon:"icon",title:"title",showDelay:"showDelay",hideDelay:"hideDelay",dismiss:"dismiss",toggleStyle:"toggleStyle",shown:"shown"},outputs:{handleDismiss:"handleDismiss"},ngContentSelectors:y,decls:1,vars:1,consts:[["class","toggle flex flex-row items-start justify-between",3,"toggle--message","toggle--error","toggle--notification","toggle--warning","toggle--rounded","toggle--light","toggle--dark","toggle--left","toggle--center",4,"ngIf"],[1,"toggle","flex","flex-row","items-start","justify-between"],[1,"toggle__wrapper","flex","flex-row","flex-auto"],["class","mr-3",4,"ngIf"],[1,"toggle__content"],["class","text-semibold mb-1",4,"ngIf"],["class","toggle__icon toggle__dismiss",3,"click",4,"ngIf"],[1,"mr-3"],[1,"toggle__icon"],[3,"icon"],[1,"text-semibold","mb-1"],[1,"toggle__icon","toggle__dismiss",3,"click"],["icon","times"]],template:function(e,t){1&e&&(u.lc(),u.Nc(0,m,8,22,"div",0)),2&e&&u.mc("ngIf",t.shown)},directives:[l.p,p.a],styles:[".text-8{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header{font-weight:700}.text--code{font-family:Courier New,Courier,monospace}.text-uppercase{text-transform:uppercase}.text-xlight{font-weight:200}.text-light{font-weight:300}.text-medium{font-weight:500}.text-semibold{font-weight:600}.text-bold{font-weight:700}.text-underline{text-decoration:underline}.text-italic{font-style:italic}.text-bright{color:#fff}.text-dim{color:#96a8c0}.text-error{color:#ed4758}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link,.text-link:visited{color:inherit;cursor:pointer}.text-link:not(.text-underline),.text-link:visited:not(.text-underline){text-decoration:none}.text-success{color:#38de38}.text-danger{color:#de3535}.text-info{color:#2d72dc}.text-nowrap{white-space:nowrap}.text-pre-line{white-space:pre-line}:root{--message-toggle-color:#1c2a3f;--message-toggle-background-color:#f0f8ff;--message-toggle-icon-color:#2d72dc}.toggle{padding:16px;box-sizing:border-box;font-size:13px;line-height:20px;color:var(--message-toggle-color);background-color:var(--message-toggle-background-color)}.toggle--rounded{border-radius:4px}.toggle__icon{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:1px;color:#fff;font-size:16px;background:none;border:none;color:var(--message-toggle-icon-color)}.toggle__content{padding:0 2px;word-break:break-word}.toggle__dismiss{font-size:14px;color:var(--message-toggle-color)}.toggle--left .toggle__content{flex:1 1 auto}.toggle--center .toggle__wrapper{justify-content:center}.toggle.toggle--message{--message-toggle-color:#1c2a3f;--message-toggle-background-color:#f0fff0;--message-toggle-icon-color:#33cd54}.toggle.toggle--notification{--message-toggle-color:#1c2a3f;--message-toggle-background-color:#f0f8ff;--message-toggle-icon-color:#2d72dc}.toggle.toggle--warning{--message-toggle-color:#1c2a3f;--message-toggle-background-color:#fffcf0;--message-toggle-icon-color:#ffb92e}.toggle.toggle--error{--message-toggle-color:#1c2a3f;--message-toggle-background-color:#fff3f0;--message-toggle-icon-color:#f44336}.toggle--dark.toggle--message{--message-toggle-background-color:#e3ffe5}.toggle--dark.toggle--notification{--message-toggle-background-color:#d6ecff}.toggle--dark.toggle--warning{--message-toggle-background-color:#fff6d1}.toggle--dark.toggle--error{--message-toggle-background-color:#ffe2db}"],encapsulation:2,data:{animation:[Object(i.n)("show",[Object(i.m)(":enter",[Object(i.o)(c.a.fadeIn,{params:{duration:300}})]),Object(i.m)(":leave",[Object(i.o)(c.a.fadeOut,{params:{duration:300}})])])]},changeDetection:0}),e}()},zUnb:function(t,n,a){"use strict";a.r(n);var r=a("fXoL"),s=a("AytR"),c=a("jhN1"),d=a("R1ws"),g=a("tyNb"),f=a("P+IX"),m=a("1G5W"),y=a("XNiG"),v=a("ofXK");function k(e,t){1&e&&(r.Tb(0),r.Vb(1,"div",5),r.Vb(2,"div"),r.Pc(3,"Our apologies."),r.Ub(),r.Vb(4,"div"),r.Pc(5,"We're unable to find the model you are looking for."),r.Ub(),r.Ub(),r.Vb(6,"p",6),r.Pc(7,"404 Error. Content not found."),r.Ub(),r.Sb())}function O(e,t){1&e&&(r.Tb(0),r.Vb(1,"div",5),r.Vb(2,"div"),r.Pc(3,"Our apologies."),r.Ub(),r.Vb(4,"div"),r.Pc(5,"We're unable to find the page you are looking for."),r.Ub(),r.Ub(),r.Vb(6,"p",6),r.Pc(7,"404 Error. Page not found."),r.Ub(),r.Sb())}var S,x,C=function(){return["/explore"]},w=((S=function(){function e(t){h(this,e),this.route=t,this.ngUnsubscribe=new y.a}return b(e,[{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.errorType=t.errorType}))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}]),e}()).\u0275fac=function(e){return new(e||S)(r.Pb(g.a))},S.\u0275cmp=r.Jb({type:S,selectors:[["app-not-found"]],decls:6,vars:4,consts:[[1,"error",3,"ngSwitch"],["src","assets/images/biodigital-logo.svg",1,"error__logo"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"error__button",3,"routerLink"],[1,"error__text"],[1,"error__subtext"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Qb(1,"img",1),r.Nc(2,k,8,0,"ng-container",2),r.Nc(3,O,8,0,"ng-container",3),r.Vb(4,"button",4),r.Pc(5,"Go to our home page"),r.Ub(),r.Ub()),2&e&&(r.mc("ngSwitch",t.errorType),r.Db(2),r.mc("ngSwitchCase","content"),r.Db(2),r.mc("routerLink",r.oc(3,C)))},directives:[v.r,v.s,v.t,g.f],styles:["body[_ngcontent-%COMP%]{background-color:#fff}.error[_ngcontent-%COMP%]{padding:160px;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;color:#283853;font-size:16px}.error__logo[_ngcontent-%COMP%]{width:240px}.error__text[_ngcontent-%COMP%]{margin-top:32px;font-size:32px;line-height:48px;font-weight:500;letter-spacing:.025em}.error__subtext[_ngcontent-%COMP%]{font-size:20px;margin-top:32px}.error__button[_ngcontent-%COMP%]{margin-top:48px;padding:16px 24px;border-radius:4px;border:1px solid #96a8c0;font-size:16px;font-weight:500;letter-spacing:.075em;color:#374a68;text-transform:uppercase;outline:0;cursor:pointer}.error__button[_ngcontent-%COMP%]:hover{background:#eaeff5;color:#1c2a3f;border-color:#1c2a3f}@media (max-width:1024px){.error[_ngcontent-%COMP%]{padding:10%}.error__text[_ngcontent-%COMP%]{font-size:24px;line-height:32px;letter-spacing:normal}.error__subtext[_ngcontent-%COMP%]{font-size:18px;line-height:26px}.error__button[_ngcontent-%COMP%]{font-size:14px}}@media (max-width:768px){.error__logo[_ngcontent-%COMP%]{width:200px}.error__text[_ngcontent-%COMP%]{font-size:20px;line-height:28px}.error__subtext[_ngcontent-%COMP%]{font-size:16px;line-height:24px;margin-top:24px}.error__button[_ngcontent-%COMP%]{font-size:12px;padding:12px 20px;margin-top:32px}}"],changeDetection:0}),S),j=a("p345"),P=[{canActivate:[f.a],path:"",pathMatch:"full",redirectTo:s.a.application===j.a.Studio?"/explore":"/results/modules"},{path:"dashboard",pathMatch:"full",redirectTo:s.a.application===j.a.Studio?"/results/bookmarks":"/results/modules"},{path:"explore/search",redirectTo:"results/modules"},{path:"account",loadChildren:function(){return Promise.all([a.e(0),a.e(3),a.e(1),a.e(7)]).then(a.bind(null,"jcJX")).then((function(e){return e.AccountModule}))}},{path:"login",loadChildren:function(){return Promise.all([a.e(1),a.e(16)]).then(a.bind(null,"X3zk")).then((function(e){return e.LoginModule}))}},{path:"results",loadChildren:function(){return Promise.all([a.e(0),a.e(4),a.e(6),a.e(18)]).then(a.bind(null,"RmqX")).then((function(e){return e.SearchModule}))}},{path:"explore",loadChildren:function(){return Promise.all([a.e(0),a.e(4),a.e(17)]).then(a.bind(null,"vwuq")).then((function(e){return e.ExploreModule}))}},{path:"view",loadChildren:function(){return Promise.all([a.e(0),a.e(5),a.e(14)]).then(a.bind(null,"mn0Z")).then((function(e){return e.ViewInternalModule}))}},{path:"edit",loadChildren:function(){return Promise.all([a.e(0),a.e(4),a.e(6),a.e(5),a.e(3),a.e(1),a.e(15)]).then(a.bind(null,"zFnc")).then((function(e){return e.EditModule}))}},{path:"account",loadChildren:function(){return Promise.all([a.e(0),a.e(3),a.e(1),a.e(7)]).then(a.bind(null,"jcJX")).then((function(e){return e.AccountModule}))}},{path:"**",component:w}],_=((x=function e(){h(this,e)}).\u0275mod=r.Nb({type:x}),x.\u0275inj=r.Mb({factory:function(e){return new(e||x)},imports:[[g.i.forRoot(P,{relativeLinkResolution:"legacy"})],g.i]}),x);a("mNvP");var M=a("pLZG"),I=a("IzEk"),T=a("lJxs"),U=a("JX91"),L=a("Kj3r"),z=a("xgIS"),A=a("HDdC"),F=a("DTUA"),D=a("LvDl"),E=a("AcyG"),N=a("ECVi"),R=a("0IaG"),V=a("IlST");function B(e,t){if(1&e&&(r.Vb(0,"div",6),r.Pc(1),r.Vb(2,"a",7),r.Pc(3,"Contact us"),r.Ub(),r.Pc(4," if you have any questions regarding your group account. "),r.Ub()),2&e){var n=r.gc();r.Db(1),r.Rc(" You must be within the ",n.organizationName," network to access this group account. "),r.Db(1),r.mc("href","mailto:"+n.supportEmail,r.Fc)}}function H(e,t){if(1&e&&(r.Vb(0,"div",6),r.Pc(1),r.Vb(2,"a",7),r.Pc(3,"Contact us"),r.Ub(),r.Pc(4," if you have any questions regarding your group account. "),r.Ub()),2&e){var n=r.gc();r.Db(1),r.Rc(" You must be within the ",n.organizationName," network to access this group account. "),r.Db(1),r.mc("href","mailto:"+n.supportEmail,r.Fc)}}var Q,G,W=((Q=function(){function e(t,n,i){h(this,e),this.dialogRef=t,this.data=n,this.storageService=i,this.email=!1,this.ip=!1,this.supportEmail=s.a.supportEmail,this.organizationName=n.organizationName,this.email=n.email,this.ip=n.ip}return b(e,[{key:"ngOnInit",value:function(){}},{key:"handleDontShowClick",value:function(){var e=this.storageService.getLocalJSON(F.b.GroupRestriction)||{};e.dontShowDialog=!0,this.storageService.setLocalItem(F.b.GroupRestriction,e),this.dialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||Q)(r.Pb(R.g),r.Pb(R.a),r.Pb(F.d))},Q.\u0275cmp=r.Jb({type:Q,selectors:[["app-group-restriction-dialog"]],decls:12,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"pt-4","pb-6"],["class","text-14",4,"ngIf"],["mat-dialog-actions","",1,"pt-2"],["app-button","","buttonTheme","light","buttonType","outline",3,"click"],["app-button","","buttonType","primary","cdkFocusInitial","",3,"mat-dialog-close"],[1,"text-14"],[3,"href"]],template:function(e,t){1&e&&(r.Vb(0,"h1",0),r.Pc(1,"Oh no, you have no access to the "),r.Qb(2,"br"),r.Pc(3),r.Ub(),r.Vb(4,"div",1),r.Nc(5,B,5,2,"div",2),r.Nc(6,H,5,2,"div",2),r.Ub(),r.Vb(7,"div",3),r.Vb(8,"button",4),r.cc("click",(function(){return t.handleDontShowClick()})),r.Pc(9," Don't show me this again "),r.Ub(),r.Vb(10,"button",5),r.Pc(11,"Close"),r.Ub(),r.Ub()),2&e&&(r.Db(3),r.Rc("",t.organizationName," group!"),r.Db(2),r.mc("ngIf",t.ip),r.Db(1),r.mc("ngIf",t.email),r.Db(4),r.mc("mat-dialog-close",!0))},directives:[R.h,R.e,v.p,R.c,V.a,R.d],styles:[""],changeDetection:0}),Q),q=a("5sb6"),X=a("5miH"),Z=a("Kn5L"),J=a("esev"),K=a("7XdW"),$=a("Wdmj"),Y=a("qXBG"),ee=a("0ul3"),te=a("mSC4"),ne=a("kTA6"),ie=a("937/"),ae=a("eW6i"),oe=a("PUI9"),re=a("7u76");(G||(G={})).getColorRecipe=function(e,t){var n=e.scene.objects[t];if(n instanceof e.scene.Object){var i=n.getProperties();return{tintColor:Object(D.get)(i,"tintColor")?i.tintColor:[1,1,1],brightness:i.brightness,saturation:i.saturation,contrast:i.contrast,opacity:i.opacity}}return null};var se,ce=a("0Yvn"),ue=((se=function(){function e(t,n,i){h(this,e),this.store=t,this.graphService=n,this.engineService=i,this.highlightDisabled=!1}return b(e,[{key:"colorObject",value:function(e,t){var n=t.tintColor,i=t.saturation,a=t.brightness,o=t.contrast,r=t.opacity,s=Human.scene.objects[e];s instanceof Human.scene.Object&&(Object(D.isNil)(n)||s.setTintColor(n),Object(D.isNil)(i)||s.setSaturation(i),Object(D.isNil)(a)||s.setBrightness(a),Object(D.isNil)(o)||s.setContrast(o),Object(D.isNil)(r)||s.setOpacity(r))}},{key:"getColor",value:function(e){return G.getColorRecipe(Human,e)}},{key:"uncolorObject",value:function(e){var t=Human.scene.objects[e];t instanceof Human.scene.Object&&(t.clearColorModifiers(),t.clearOpacityModifiers())}},{key:"unpaint",value:function(e){var t=this,n=this.store.selectSnapshot(oe.a.getViewGraph);this.graphService.getLeafDescendants(n,e.id).forEach((function(e){t.engineService.getObjects(e).forEach((function(e){var t=Human.scene.objects[e];t instanceof Human.scene.Object&&(t.clearColorModProperties(),t.clearOpacityModProperties())}))}))}},{key:"paint",value:function(e,t){var n=this,i=this.store.selectSnapshot(oe.a.getViewGraph),a=ce.a.toEngine(t);this.graphService.getLeafDescendants(i,e).forEach((function(e){n.engineService.getObjects(e).forEach((function(e){n.colorObject(e,a)}))}))}},{key:"highlight",value:function(e,t){var n=this;if(!1===this.highlightDisabled||!1===t){var i=this.store.selectSnapshot(oe.a.getViewGraph);this.graphService.getLeafDescendants(i,e).forEach((function(e){n.engineService.getObjects(e).forEach((function(e){var n=Human.scene.objects[e];n instanceof Human.scene.Object&&n.setHighlight(t)}))}))}}},{key:"xRay",value:function(e,t){Human.scene.objects[e.id].setXRay(t)}},{key:"paintAll",value:function(e,t){var n=this;e.forEach((function(e){return n.paint(e,t)}))}},{key:"unpaintAll",value:function(e){var t=this;e.forEach((function(e){t.unpaint(e)}))}},{key:"highlightAll",value:function(e,t){var n=this;e.forEach((function(e){return n.highlight(e,t)}))}},{key:"disableHighlight",value:function(){this.highlightDisabled=!0}},{key:"enableHighlight",value:function(){this.highlightDisabled=!1}},{key:"setHighlightColor",value:function(e){Human.renderer.highlightColor=u(e)}}]),e}()).\u0275fac=function(e){return new(e||se)(r.Zb(E.h),r.Zb(re.a),r.Zb(ae.a))},se.\u0275prov=r.Lb({token:se,factory:se.\u0275fac,providedIn:"root"}),se);function le(e,t){var n=t.procName,i=t.actionFn,a=t.aliases,o=void 0===a?[]:a,r=t.mapFnIn,s=t.mapFnOut,c=t.hideDefinition,l=void 0!==c&&c,p=function(e){var t=this,n=r?r(e):e,a=i(n);if(void 0!==a)if(a instanceof A.a)a.subscribe((function(e){var n=s?s(e):e;t.setResult(n)}));else{var o=s?s(a):a;t.setResult(o)}};[n].concat(u(o)).forEach((function(t){var n=function(){return e.rpc.define(t,p)};l?e.rpc.hideDefinitions((function(){return n()})):n()}))}var pe=a("RD2w"),de=a("TATr"),ge=a("11Ye");function he(e){var t=e.captureCamera();return{position:t.lookAt.eye,target:t.lookAt.look,up:t.lookAt.up,zoom:t.zoom}}var fe,be=a("ZR5G"),me=a("Vv7R"),ye=a("YpC8"),ve=a("N0Zw"),ke=a("q8pu"),Oe=a("SxV6"),Se=a("Mh2x"),xe=a("VJvM"),Ce=a("UEjg"),we=a("sTHe"),je=a("WFQG"),Pe=a("IOcx");(fe||(fe={})).getCanvasPos=function(e,t,n,i,a){n&&Pe.a.add(t,n,t);var o=e.renderer.getViewMat(),r=e.renderer.getProjMat(),s=Pe.b.create();Pe.a.transformMat4(s,t,o),s[3]=1,Pe.b.transformMat4(s,s,r);var c=s[1],u=s[3];return[Math.round((1+s[0]/u)*i/2),Math.round((1-c/u)*a/2)]};var _e,Me=a("ve2m");function Ie(e,t){return e.dispatch(new ge.R(!1)),t.fireEvent(X.a.SceneXrayDisabled,void 0),!0}!function(e){e.isLegacyCaptureFormat=function(e){return void 0!==e.engineVersion},e.convertCaptureFormat=function(e){var t=Object.keys(e.objects).reduce((function(e,t){return e.push({objectId:t,selected:!1,hidden:!1}),e}),[]);return{storyId:e.timeline.rootName.replace(".json",""),camera:{lookAt:e.camera,zoom:void 0},labels:[],objects:t,background:[],activeChapterId:e.timeline.scrub?e.timeline.scrub.chapterId:void 0}},e.convertMediaFormat=function(e){var t={};return Object.entries(e).forEach((function(e){var n=p(e,2),i=n[0],a=n[1];t[i]={fullUrl:a.data.fullUrl,lang:a.data.lang,streamType:a.data.streamType}})),t}}(_e||(_e={}));var Te=a("gm/O"),Ue=a("GMXD"),Le=a("EF3F"),ze=function(){var e=function e(){h(this,e)};return e.type="[Analytics] Reset First Interaction",e}(),Ae=a("uDDk");function Fe(e){if(!e)return null;var t=e.objectId,n=e.canvasPos,i=e.worldPos;return{objectId:t||void 0,canvasPosition:n?{x:n[0],y:n[1]}:void 0,mode:"query",position:i?{x:i[0],y:i[1],z:i[2]}:void 0}}function De(e,t,n){var i=e.scene.objects[n].parent;return null!==i&&(t[i.objectId].checked||De(e,t,i.objectId))}function Ee(e,t){var n=t.includes("/")?be.a.Module:be.a.Bookmark;e.dispatch(new me.e(t,n))}function Ne(e,t){return e.dispatch(new ge.R(!0)),t.fireEvent(X.a.SceneXrayEnabled,void 0),!0}function Re(e,t,n,i){e.rpc.defineEvent(t,{events:n||[t],map:i||function(e){return e}})}var Ve=a("qz+p"),Be=function(){var e=function e(t,n,i){h(this,e),this.hostingURL=t,this.embedded=n,this.widgetConfig=i};return e.type="[Widget] Setup Widget",e}(),He=function(){var e=function e(){h(this,e)};return e.type="[Widget] Reset",e}(),Qe=function(){var e=function e(t){h(this,e),this.enabled=t};return e.type="[Widget] Set Input Enabled",e}(),Ge=function(){var e=function e(t){h(this,e),this.config=t};return e.type="[Widget] Set API Config",e}(),We=function(){var e=function e(t){h(this,e),this.productAccountId=t};return e.type="[Widget] Get Widget Product Settings",e}(),qe=function(){var e=function e(t){h(this,e),this.widgetSettings=t};return e.type="[Widget] Set Widget Product Settings",e}(),Xe=a("5+tZ"),Ze=a("vkgz"),Je=a("JIr8"),Ke=a("I65S"),$e=a("ewuU"),Ye=a("V7wM"),et=a("+1W3"),tt=a("cAYK"),nt=a("gw9s"),it=a("zKvh"),at=a("WUhe"),ot=a("h8op"),rt=a("2Vo4"),st=a("f3gM");function ct(e){return Ye.a.getColors(e).map((function(e){return e[255]}))}function ut(e,t){var n,i=e.selectSnapshot(Se.a.getSelectedChapterBackground),a=i.colors,o=i.colorStops,r=i.gradientType,s=t.colors?(n=[]).concat.apply(n,u(t.colors)):a;return new $e.a(s,t.gradientType||r,t.colorStops||o)}var lt=a("l57l");function pt(e){return e.selectSnapshot(ve.a.getChapterLabels)}function dt(e,t){return function(e,t){return e.find((function(e){return t===e.id}))}(pt(e),t)}function gt(e,t){var n=function(e,t){return e.scene.markers.markers[t]}(e,t.id);return{annotationId:t.id,objectId:t.objectId||null,title:t.title,description:t.description,shown:t.shown,occludable:t.occludable,position:n?{x:n.pos[0],y:n.pos[1],z:n.pos[2]}:null,canvasPosition:n?{x:n.canvasPos[0],y:n.canvasPos[1]}:null}}function ht(e,t){var n=dt(e,t.annotationId);return n?Object.assign(Object.assign({},n),t):null}function ft(e,t){return t&&e.dispatch(new ke.m(t)),!0}function bt(e,t){return e.dispatch(new ke.l(t)),!0}function mt(e,t){return e.reduce((function(e,n){return Object.assign(Object.assign({},e),l({},""+n,t))}),{})}function yt(e,t){return function(e,n){return Object.entries(e).filter((function(e){var n=p(e,2);n[0];return function(e,n){return n===t}(0,n[1])})).reduce((function(e,t){var n=p(t,2),i=n[0],a=n[1];return Object.assign(Object.assign({},e),l({},""+i,a))}),{})}(e)}function vt(e,t){return Object.keys(yt(e,t))}function kt(e,t,n){return function(e,t){return e.filter((function(e){return t.includes(e.id)}))}(e,vt(t,n))}function Ot(e,t,n){var i,a=vt(t,n).map((function(t){return function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var o,r,s=i.map((function(t){return e.filter((function(e){return t===e.objectId}))}));return o=(t=[]).concat.apply(t,u(s)),r=new Set(o),Array.from(r.values())}(e,t)})).map((function(e){return e.map((function(e){return e.id}))}));return mt((i=[]).concat.apply(i,u(a)),n)}var St=a("fMqy"),xt=a("2o60"),Ct={};function wt(e,t){t.hasOwnProperty("data")&&(t[e]=t.data)}var jt={hotspotSeedId:0,hotspotIdMap:new Map,getHotspotMap:function(e){var t=jt.hotspotIdMap,n=jt.createHotspotId;return e.selectSnapshot(ve.a.getLabels).forEach((function(e){var i=e.id;void 0===t.get(i)&&n(i)})),t},createHotspotId:function(e){return jt.hotspotSeedId++,jt.hotspotIdMap.set(e,jt.hotspotSeedId),jt.hotspotSeedId},getHotspotIdByLabel:function(e,t,n){var i=jt.getHotspotMap,a=jt.createHotspotId,o=i(e).get(t);return n&&void 0===o?a(t):o},getLabelIdByHotspotId:function(e,t){var n=jt.getHotspotMap(e),i=Array.from(n).find((function(e){var n=p(e,2);n[0];return n[1]===t}));return i?i[0]:null}};function Pt(e,t){var n=e.selectSnapshot(ve.a.getLabels);return void 0!==t?n.filter((function(e){return e.chapterId===t})):n}function _t(e,t){var n=Pt(e),i=jt.getLabelIdByHotspotId(e,t);return n.find((function(e){return e.id===i}))}function Mt(e){return e===St.a.CirclePlus?xt.a.Plus:e===St.a.CircleMinus?xt.a.Minus:xt.a.Default}function It(e,t){return jt.getHotspotIdByLabel(e,t)}function Tt(e,t){return Object.assign(Object.assign({},t),{id:It(e,t.id)})}function Ut(e,t,n){var i=t.selectSnapshot(Se.a.getStoryChapters);return n.map((function(n){return function(e,t,n,i){var a,o=i.id,r=i.chapterId,s=i.title,c=i.objectId,u=n.findIndex((function(e){return r===e.id})),l=jt.getHotspotIdByLabel(t,o,!0),p=function(e,t){return e.scene.markers.markers[t]}(e,o);return{id:l,title:s,objectId:c,position:p?Lt(p.pos):null,direction:p?Lt(p.dir):null,canvasPosition:p?(a=p.canvasPos,{x:a[0],y:a[1]}):null,chapterScope:u,type:i.pinType===xt.a.PlusMinus?St.a.CirclePlus:St.a.Circle,shown:i.shown,data:Ct[i.id]}}(e,t,i,n)}))}function Lt(e){return{x:e[0],y:e[1],z:e[2]}}function zt(e){return[e.x,e.y,e.z]}function At(e,t,n){return e.dispatch(new ke.t(t,n)),!0}function Ft(e,t){if("number"==typeof t){var n=_t(e,t);return n?[n]:[]}return Pt(e)}var Dt=a("XoU3"),Et=a("x1jL"),Nt=a("7b4e"),Rt=a("WRwD"),Vt=a("qplK");function Bt(e){return e.selectSnapshot(ve.a.getChapterLabels)}function Ht(e,t){return e.dispatch(new ke.l(t)),!0}function Qt(e,t){return Bt(e).find((function(e){return t===e.id}))}function Gt(e,t){return Bt(e).filter((function(e){return t.includes(e.id)}))}function Wt(e,t,n){return t&&t.objectId?(e.dispatch(n?new ke.b(t):new ke.m(t)),t):null}function qt(e,t){var n=document.createElement("span");return n.innerHTML=e,Object(D.trim)(n.textContent).length<=t}function Xt(e,t,n){var i=e;return i.title=t.title&&qt(t.title,100)?t.title:i.title,i.description=t.description&&qt(t.description,300)?t.description:i.description,i.theme=t.theme||i.theme,i.pinType=t.pinType||i.pinType,i.sequentialType=t.sequentialType||i.sequentialType,i.offset=function(e,t){return t||[-(e.hideWire?20:32),0]}(i,t.labelOffset),i.pinGlow=void 0!==t.pinGlow?t.pinGlow:i.pinGlow,i.hideWire=void 0!==t.hideWire?t.hideWire:i.hideWire,i.hideTag=void 0!==t.hideTag?t.hideTag:i.hideTag,i.collapseDescription=void 0!==t.collapseDescription?t.collapseDescription:i.collapseDescription,i.occludable=void 0!==t.occludable?t.occludable:i.occludable,i.cameraPosition=t.flyToCamera||i.cameraPosition,i.flyTo=function(e,t){return!1!==t&&(t||e.flyTo)}(i,t.flyTo),i.states=function(e){if(!e.flyTo)return[];var t=[new Rt.a,new Rt.a];t[0].errands=[new Et.a],t[1].errands=e.cameraPosition?[new Vt.a(e.cameraPosition)]:[new Dt.a(e.objectId)]}(i),i}function Zt(e,t){if(t){var n=e.scene.markers.markers[t.id];return{labelId:t.id,objectId:t.objectId,title:t.title,description:t.description,theme:t.theme,pinType:t.pinType,labelOffset:t.offset,hideWire:t.hideWire,pinGlow:t.pinGlow,occludable:t.occludable,sequentialType:t.sequentialType,shown:t.shown,collapseDescription:t.collapseDescription,hideTag:t.hideTag,flyTo:!0===t.flyTo,flyToCamera:t.cameraPosition,position:n?[n.pos[0],n.pos[1],n.pos[2]]:t.pos,canvasPosition:n?[n.canvasPos[0],n.canvasPos[1]]:[-1,-1],occluded:!n||n.occluded}}return null}function Jt(e,t){return t.reduce((function(t,n){return t[n.id]=Zt(e,n),t}),{})}var Kt=a("aqTE"),$t=a("WwWM"),Yt=function(e){return e.Widget="widget",e.WidgetAPI="widgetapi",e}({}),en=a("bjoO"),tn=a("0UUK"),nn=a("3fyd"),an=a("FFWI"),on=a("Xk3F");function rn(e){return e.selectSnapshot(an.b.getAllQuestions)}function sn(e,t){return rn(e).find((function(e){return e.id===t}))}function cn(e){return sn(e,gn(e))}function un(e){return{enabled:e.selectSnapshot(an.b.getQuizEnabled),active:e.selectSnapshot(an.b.getQuizModeActive),questions:(t=rn(e),i=t.map((function(e){return bn(e)})),void 0!==n?i.filter((function(e){return n.includes(e.questionId)})):i),questionId:gn(e),submissions:ln(e,dn(e))};var t,n,i}function ln(e,t){return t.map((function(t){return pn(e,t)}))}function pn(e,t){var n=cn(e);return{questionId:t.questionId,answerIds:n.data.correctAnswer,correctAnswerIds:mn(n),correct:Object(on.h)(n,t.answer)}}function dn(e){return e.selectSnapshot(an.b.getAllSubmissions)}function gn(e){return e.selectSnapshot(an.b.getActiveQuestionId)}function hn(e){var t=cn(e),n=function(e){return dn(e).find((function(t){return t.questionId===gn(e)}))}(e);return{question:bn(t),submission:n?pn(e,n):void 0}}function fn(e){return e.map((function(e){return function(e){var t=e.type;switch(t){case Ae.a.Markdown:return{type:t,content:e.markdown};case Ae.a.Images:return{type:t,content:e.images.map((function(e){return e.urls.default}))};default:return{type:t,content:""}}}(e)}))}function bn(e){var t=[],n="";switch(e.type){case nn.a.MultipleChoice:var i=e.data;t=i.options.map((function(e){return function(e){return{answerId:e.value,displayText:e.label}}(e)})),n=i.correctAnswer;break;case nn.a.SelectAnatomy:t=e.data.correctAnswer.map((function(e){return{answerId:e,displayText:e}})),n="";break;case nn.a.LabelAnatomy:t=e.data.options.map((function(e){return{answerId:e.value,displayText:e.label.title}})),n=""}return{questionId:e.id,questionType:e.type,questionPrompt:fn(e.questionPrompt),answerExplanation:fn(e.explanation),answers:t,answerId:n}}function mn(e){var t=bn(e);switch(t.questionType){case nn.a.LabelAnatomy:case nn.a.SelectAnatomy:return t.answers.map((function(e){return e.answerId}));case nn.a.Instructions:return["-"];default:return[t.answerId]}}var yn,vn,kn,On,Sn,xn,Cn=a("zp9f"),wn=a("tk/3"),jn=a("b36G"),Pn=a("LRne"),_n=a("Qyje"),Mn=a("aWUR"),In=function e(){h(this,e)},Tn=function e(){h(this,e)},Un=function e(){h(this,e)},Ln=function e(){h(this,e)},zn=function(e){return e[e.User=0]="User",e[e.Developer=1]="Developer",e}({}),An=((yn=function(){function e(t){h(this,e),this.http=t}return b(e,[{key:"getWidgetSettings",value:function(e){return this.http.get("/ws/product/account/settings?product_acctid="+e)}}]),e}()).\u0275fac=function(e){return new(e||yn)(r.Zb(wn.b))},yn.\u0275prov=r.Lb({token:yn,factory:yn.\u0275fac,providedIn:"root"}),yn),Fn=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},Dn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},En={userType:zn.User,authenticating:!1,authenticated:!1,widgetUrlConfig:{id:"",type:""},widgetApiConfig:null,parentUrl:{full:"",domain:""},embedded:!1,engineVersion:"",engineAPIVersion:"",inputEnabled:!0,widgetSettings:void 0},Nn=((vn=function(){function e(t){h(this,e),this.widgetConfigService=t}return b(e,[{key:"setupWidget",value:function(e,t){var n=t.hostingURL,i=t.embedded,a=t.widgetConfig,o=n.match(/:\/\/(.[^/]+)/);e.patchState({userType:a.uaid?zn.User:zn.Developer,embedded:i,widgetUrlConfig:a,parentUrl:{full:n,domain:o&&o[1]?o[1]:n}})}},{key:"getWidgetProductSettings",value:function(e,t){var n=t.productAccountId;this.widgetConfigService.getWidgetSettings(n).subscribe((function(t){var n=t.settings;e.dispatch(new qe(n))}))}},{key:"setWidgetProductSettings",value:function(e,t){var n=t.widgetSettings;e.patchState({widgetSettings:n})}},{key:"resetWidget",value:function(e){e.setState(En)}},{key:"setInputEnabled",value:function(e,t){e.patchState({inputEnabled:t.enabled})}},{key:"setWidgetApiConfig",value:function(e,t){e.patchState({widgetApiConfig:t.config})}},{key:"ngxsOnInit",value:function(e){e.patchState({engineVersion:Human.VERSION,engineAPIVersion:Human.API_VERSION})}}],[{key:"getWidgetState",value:function(e){return e}},{key:"getUserType",value:function(e){return e.userType}},{key:"getWidgetAuthenticating",value:function(e){return e.authenticating}},{key:"getWidgetAuthenticated",value:function(e){return e.authenticated}},{key:"getInputEnabled",value:function(e){return e.inputEnabled}},{key:"getEmbedded",value:function(e){return e.embedded}},{key:"getBypassAnalytics",value:function(e){return e.widgetUrlConfig["bypass-analytics"]}},{key:"getParentURL",value:function(e){return e.parentUrl.full}},{key:"getWidgetUrlConfig",value:function(e){return e.widgetUrlConfig}},{key:"getWidgetApiUIConfig",value:function(e){return e.widgetApiConfig}},{key:"getWidgetSettings",value:function(e){return e.widgetSettings}}]),e}()).\u0275fac=function(e){return new(e||vn)(r.Zb(An))},vn.\u0275prov=r.Lb({token:vn,factory:vn.\u0275fac}),Fn([Object(E.a)(Be),Dn("design:type",Function),Dn("design:paramtypes",[Object,Be]),Dn("design:returntype",void 0)],vn.prototype,"setupWidget",null),Fn([Object(E.a)(We),Dn("design:type",Function),Dn("design:paramtypes",[Object,We]),Dn("design:returntype",void 0)],vn.prototype,"getWidgetProductSettings",null),Fn([Object(E.a)(qe),Dn("design:type",Function),Dn("design:paramtypes",[Object,qe]),Dn("design:returntype",void 0)],vn.prototype,"setWidgetProductSettings",null),Fn([Object(E.a)(He),Dn("design:type",Function),Dn("design:paramtypes",[Object]),Dn("design:returntype",void 0)],vn.prototype,"resetWidget",null),Fn([Object(E.a)(Qe),Dn("design:type",Function),Dn("design:paramtypes",[Object,Qe]),Dn("design:returntype",void 0)],vn.prototype,"setInputEnabled",null),Fn([Object(E.a)(Ge),Dn("design:type",Function),Dn("design:paramtypes",[Object,Ge]),Dn("design:returntype",void 0)],vn.prototype,"setWidgetApiConfig",null),Fn([Object(E.f)(),Dn("design:type",Function),Dn("design:paramtypes",[Ln]),Dn("design:returntype",void 0)],vn,"getWidgetState",null),Fn([Object(E.f)(),Dn("design:type",Function),Dn("design:paramtypes",[Ln]),Dn("design:returntype",void 0)],vn,"getUserType",null),Fn([Object(E.f)(),Dn("design:type",Function),Dn("design:paramtypes",[Ln]),Dn("design:returntype",void 0)],vn,"getWidgetAuthenticating",null),Fn([Object(E.f)(),Dn("design:type",Function),Dn("design:paramtypes",[Ln]),Dn("design:returntype",void 0)],vn,"getWidgetAuthenticated",null),Fn([Object(E.f)(),Dn("design:type",Function),Dn("design:paramtypes",[Ln]),Dn("design:returntype",void 0)],vn,"getInputEnabled",null),Fn([Object(E.f)(),Dn("design:type",Function),Dn("design:paramtypes",[Ln]),Dn("design:returntype",void 0)],vn,"getEmbedded",null),Fn([Object(E.f)(),Dn("design:type",Function),Dn("design:paramtypes",[Ln]),Dn("design:returntype",void 0)],vn,"getBypassAnalytics",null),Fn([Object(E.f)(),Dn("design:type",Function),Dn("design:paramtypes",[Ln]),Dn("design:returntype",void 0)],vn,"getParentURL",null),Fn([Object(E.f)(),Dn("design:type",Function),Dn("design:paramtypes",[Ln]),Dn("design:returntype",void 0)],vn,"getWidgetUrlConfig",null),Fn([Object(E.f)(),Dn("design:type",Function),Dn("design:paramtypes",[Ln]),Dn("design:returntype",void 0)],vn,"getWidgetApiUIConfig",null),Fn([Object(E.f)(),Dn("design:type",Function),Dn("design:paramtypes",[Ln]),Dn("design:returntype",Array)],vn,"getWidgetSettings",null),vn=Fn([Object(E.g)({name:"widget",defaults:En})],vn)),Rn={headers:new wn.d({"Content-Type":"application/json; charset=utf-8"})},Vn=((kn=function(){function e(t,n,i){h(this,e),this.http=t,this.storageService=n,this.store=i}return b(e,[{key:"getAnalytic",value:function(e){var t=this;return s.a.offline?(fetch("https://human.biodigital.com/ws/user/analytics?analytic_id="+e,{method:"GET",mode:"no-cors"}),Object(Pn.a)({success:!0})):this.http.get("/ws/user/analytics?analytic_id="+e).pipe(Object(T.a)((function(){return{success:!0}})),Object(Je.a)((function(e){return Object(Pn.a)(t.parseError(e))})))}},{key:"sendAnalytic",value:function(e){var t=this;if(s.a.offline){var n=e instanceof In?"https://human.biodigital.com/ws/user/analytics":"https://human.biodigital.com/ws/developer/apps/access/key",i=Object(_n.stringify)(e);if(navigator.onLine)this.sendOfflineAnalytic(n,i),this.sendSavedOfflineMessages(n);else{var a=(new Date).toISOString().substring(0,19);this.storageService.setDatabaseAnalyticItem("offline_event=1&event_timestamp="+a+"&"+i)}return Object(Pn.a)({success:!0})}return this.http.post(e instanceof In?"/ws/user/analytics":"/ws/developer/apps/access/key",e,Rn).pipe(Object(T.a)((function(){return{success:!0}})),Object(Je.a)((function(e){return Object(Pn.a)(t.parseError(e))})))}},{key:"sendOfflineAnalytic",value:function(e,t){return n=this,a=regeneratorRuntime.mark((function n(){var i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:fetch(e,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",mode:"no-cors",body:t}).catch((function(){navigator.onLine?setTimeout((function(){fetch(e,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",mode:"no-cors",body:t})}),300):i.storageService.setDatabaseAnalyticItem(t)}));case 1:case"end":return n.stop()}}),n)})),new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{s(a.next(e))}catch(n){t(n)}}function r(e){try{s(a.throw(e))}catch(n){t(n)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,r)}s((a=a.apply(n,[])).next())}));var n,i,a}},{key:"sendSavedOfflineMessages",value:function(e){var t=this;this.storageService.getDatabaseOfflineAnalytics((function(n){n.forEach((function(n){t.sendOfflineAnalytic(e,n)}))}))}},{key:"buildUserAnalytic",value:function(e,t){var n=this.store.selectSnapshot(Nn.getWidgetState),i=n.widgetUrlConfig,a=n.parentUrl,o=i.uaid,r=a.domain,s=Object.assign(Object.assign({},this.buildAppActivityData()),l({parent_analytic_identifier:o,referer_domain:r},e+"_source",t)),c={analytic_platform:Yt.Widget,analytic_type:e,analytic_data:s};return Object(jn.plainToClass)(In,c)}},{key:"buildDeveloperAnalytic",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yt.Widget,n=arguments.length>2?arguments[2]:void 0,i=this.store.selectSnapshot(Nn.getWidgetState),a=i.widgetUrlConfig,o=i.parentUrl,r=i.embedded,s={platform:t,app_activity:e,app_productkey:a["app-productkey"],app_userid:a["app-userid"],app_apikey:a.dk,app_domain:o.full,app_activity_data:n,widget_is_fullscreen:!r};return Object(jn.plainToClass)(Tn,s)}},{key:"buildAppActivityData",value:function(){var e=this.store.selectSnapshot(Nn.getWidgetState),t=e.engineVersion,n=e.engineAPIVersion,i=e.widgetUrlConfig,a={engine_version:t,api_version:n};return Object.entries(i).filter((function(e){return"dk"!==p(e,1)[0]})).forEach((function(e){var t=p(e,2),n=t[0],i=t[1];a["url_param_"+n]=i})),Object(jn.plainToClass)(Un,a)}},{key:"parseError",value:function(e){if(s.a.offline)return{success:!0,message:"",errorCode:null};var t=e.error.error,n=e.status,i=t&&t.message?t.message:"";return{success:n>=500&&n<=504,message:i,errorCode:Object.values(Mn.a).includes(i)?i:null}}}]),e}()).\u0275fac=function(e){return new(e||kn)(r.Zb(wn.b),r.Zb(F.d),r.Zb(E.h))},kn.\u0275prov=r.Lb({token:kn,factory:kn.\u0275fac,providedIn:"root"}),kn),Bn=function(e){return e.Init="init",e.View="view",e.ChanceInteraction="interactionc",e.FirstInteraction="interactionf",e.Call="call",e}({}),Hn=((On=function(){function t(e,n,i,a,o,r,s,c,u,l,p,d){h(this,t),this.store=e,this.actions=n,this.cameraService=i,this.engineService=a,this.animationService=o,this.paintService=r,this.labelsService=s,this.graphService=c,this.viewService=u,this.analyticsService=l,this.visibilityLayersService=p,this.quizService=d,this.webGLInfo=SceneJS.WEBGL_INFO}return b(t,[{key:"listen",value:function(e){this.initProcedures(),this.initEvents(),e&&this.logAPIUsage()}},{key:"logAPIUsage",value:function(){var e=this;setInterval((function(){var t=Human.rpc.getLog(),n=Object(D.uniqBy)(t,(function(e){return e.identifier}));if(n.length>0){var i=JSON.stringify(n),a=e.analyticsService.buildDeveloperAnalytic(Bn.Call,Yt.WidgetAPI,i);e.analyticsService.sendAnalytic(a).subscribe({next:function(e){},error:function(e){throw new Error(e)}}),Human.rpc.resetLog()}}),1e4)}},{key:"initEvents",value:function(){var e,t;Re(Human,X.a.HumanProgress,void 0,(function(e){return e})),(e=this.store,[{eventName:X.a.HumanReady,aliasEvents:[X.a.HumanStarted]},{eventName:X.a.Error,aliasEvents:[X.a.HumanError],mapFn:function(e){return e}},{eventName:X.a.HumanCanvasResized,aliasEvents:[X.a.CanvasResized],mapFn:function(){return e.selectSnapshot(oe.a.getEnginePosition)}}]).forEach((function(e){Re(Human,e.eventName,e.aliasEvents,e.mapFn)})),[{eventName:X.a.SceneLoaded,mapFn:function(e){return e}},{eventName:X.a.ScenePicked,aliasEvents:[X.a.PickPicked],mapFn:Fe},{eventName:X.a.SceneObjectsSelected,mapFn:function(e){return e.selectedObjectsUpdate}},{eventName:X.a.SceneObjectsShown,mapFn:function(e){return e.enabledObjectsUpdate}},{eventName:X.a.SceneReady,aliasEvents:[X.a.Started]},{eventName:X.a.SceneRestored,mapFn:function(){return!0}},{eventName:X.a.SceneXrayEnabled,mapFn:function(){return!0}},{eventName:X.a.SceneXrayDisabled,mapFn:function(){return!0}},{eventName:X.a.NativeShare,mapFn:function(e){return e}},{eventName:X.a.NativeDebugMessage,mapFn:function(e){return e}}].forEach((function(e){Re(Human,e.eventName,e.aliasEvents,e.mapFn)})),(t=this.cameraService,[{eventName:X.a.CameraUpdated,aliasEvents:[X.a.CameraRested],mapFn:function(){return he(t)}}]).forEach((function(e){Re(Human,e.eventName,e.aliasEvents,e.mapFn)})),[{eventName:X.a.TimelinePlaying,mapFn:function(e){return e}},{eventName:X.a.TimelineCompleted,mapFn:function(e){return!0}},{eventName:X.a.TimelineChapterTransition,aliasEvents:[X.a.TimelineChaptersActivated],mapFn:function(e){return{previousChapter:e.oldChapterIndex,currentChapter:e.newChapterIndex,time:e.time}}}].forEach((function(e){Re(Human,e.eventName,e.aliasEvents,e.mapFn)})),[].forEach((function(e){Re(Human,e.eventName,e.aliasEvents,e.mapFn)})),[].forEach((function(e){Re(Human,e.eventName,e.aliasEvents,e.mapFn)})),function(e,t){return[].concat(u(function(e,t){return[{eventName:X.a.AnnotationsCreated,aliasEvents:[X.a.LabelsCreated],mapFn:function(t){return gt(e,t)}},{eventName:X.a.AnnotationsDestroyed,aliasEvents:[X.a.LabelsDestroyed],mapFn:function(e){return{annotationId:e.id}}},{eventName:X.a.AnnotationsShown,aliasEvents:[X.a.LabelsEnabled],mapFn:function(){return!0}},{eventName:X.a.AnnotationsHidden,aliasEvents:[X.a.LabelsDisabled],mapFn:function(){return!0}}]}(e)),u(function(e,t){return[{eventName:X.a.HotspotsEntered,mapFn:function(e){return Tt(t,e)}},{eventName:X.a.HotspotsLeft,mapFn:function(e){return Tt(t,e)}},{eventName:X.a.HotspotsPicked,mapFn:function(e){return Tt(t,e)}},{eventName:X.a.HotspotsDisplayUpdated,mapFn:function(e){return Tt(t,e)}},{eventName:X.a.HotspotsPositionUpdated,mapFn:function(e){return function(e,t){var n=t.id,i=t.canvasPos,a=i.x,o=i.y;return{id:It(e,n),canvasPosition:{x:a,y:o,0:a,1:o},occluded:t.occluded}}(t,e)}}]}(0,t)),[{eventName:X.a.LabelsChapterInfo,mapFn:function(t){return Jt(e,t)}},{eventName:X.a.LabelsCreated,mapFn:function(t){return Zt(e,t)}},{eventName:X.a.LabelsUpdated,mapFn:function(t){return Zt(e,t)}},{eventName:X.a.LabelsDestroyed,mapFn:function(e){return{labelId:e.id}}},{eventName:X.a.LabelsEntered,mapFn:function(e){return e}},{eventName:X.a.LabelsLeft,mapFn:function(e){return e}},{eventName:X.a.LabelsPicked,mapFn:function(e){return e}},{eventName:X.a.LabelsMoved,mapFn:function(e){return e}},{eventName:X.a.LabelsEnabled,mapFn:function(){return!0}},{eventName:X.a.LabelsDisabled,mapFn:function(){return!0}},{eventName:X.a.LabelsShown,mapFn:function(e){return e}},{eventName:X.a.LabelsHidden,mapFn:function(e){return e}}])}(Human,this.store).forEach((function(e){Re(Human,e.eventName,e.aliasEvents,e.mapFn)})),function(e){return[{eventName:X.a.QuizEntered,mapFn:function(){return un(e)}},{eventName:X.a.QuizExited,mapFn:function(){return!0}},{eventName:X.a.QuizQuestionLoaded,mapFn:function(e){return e}},{eventName:X.a.QuizAnswerSelected,mapFn:function(t){return{questionId:t.questionId,answerId:t.answerId,correctAnswerIds:mn(sn(e,t.questionId))}}},{eventName:X.a.QuizAnswerSubmitted,mapFn:function(t){var n=sn(e,t.questionId),i=mn(n);return{questionId:t.questionId,answerIds:t.answer,correctAnswerIds:i,correct:Object(on.h)(n,t.answer)}}},{eventName:X.a.QuizCompleted,mapFn:function(){var t=rn(e),n=dn(e);return Object(on.i)(t,n)}}]}(this.store).forEach((function(e){Re(Human,e.eventName,e.aliasEvents,e.mapFn)}))}},{key:"initProcedures",value:function(){var t,n,i;(t=Human,n=this.webGLInfo,i=this.store,[{procName:pe.a.HumanInfo,actionFn:function(){return{version:t.VERSION,webglInfo:n,apiFunctions:t.rpc.getProcedures().sort(),apiEvents:t.rpc.getEvents().sort()}}},{procName:pe.a.HumanCanvasInfo,actionFn:function(){return i.selectSnapshot(oe.a.getEnginePosition)}}]).forEach((function(e){le(Human,e)})),function(t,n,i,a,o,r,s,c,d){return[{procName:pe.a.SceneMetaData,actionFn:function(){var e=n.selectSnapshot(ye.a.getStory),t=n.selectSnapshot(Se.a.getStoryChapters);return{title:e.displayName,description:e.description,chapters:t.map((function(e){return{id:e.id,title:e.info.displayName,description:e.info.description,isAnimated:s.isChapterAnimated(e),loops:s.isChapterLooped(e),duration:s.getChapterLocalTimerange(e.id),media:_e.convertMediaFormat(e.media),images:e.contentBlocks?(t=e.contentBlocks,a=t.find((function(e){return e.type==Ae.a.Images})),null!==(i=null===(n=null==a?void 0:a.images)||void 0===n?void 0:n.filter((function(e){var t;return null!=(null===(t=e.urls)||void 0===t?void 0:t.default)})).map((function(e){return e.urls.default})))&&void 0!==i?i:[]):[],thumbnail:e.thumbnails?e.thumbnails.default:""};var t,n,i,a}))}}},{procName:pe.a.focusObject,actionFn:function(e){return function(e,t,n){e.select&&e.xray?Ne(t,n):Ie(t,n),e.select&&t.dispatch(new Te.a.UpdateNodesChecked(!0,[e.objectId])),t.dispatch(new ge.j(e.objectId,!0,1))}(e,n,i),!0},hideDefinition:!0},{procName:pe.a.dissectSetEnabled,actionFn:function(e){return n.dispatch(new ge.w(e.enable?we.a.Hide:we.a.Select)),!0},hideDefinition:!0},{procName:pe.a.sceneSetClickMode,actionFn:function(e){return n.dispatch(new ge.w("select"===e?we.a.Select:"hide"===e?we.a.Hide:"fade"===e?we.a.Fade:we.a.Select)),!0}},{procName:pe.a.sceneGetClickMode,actionFn:function(){return n.selectSnapshot(oe.a.getActiveTool)}},{procName:pe.a.pickSingleSetEnabled,actionFn:function(e){var t=function(){switch(e.enable){case void 0:return!n.selectSnapshot(je.a.getMultiPickModeEnabled);case!0:return!1;case!1:return!0}}();return n.dispatch(new Ce.a.SetMultiPickModeEnabled(t)),!0},hideDefinition:!0},{procName:pe.a.pickMultiSetEnabled,actionFn:function(e){var t=function(){switch(e.enable){case void 0:return!n.selectSnapshot(je.a.getMultiPickModeEnabled);default:return e.enable}}();return n.dispatch(new Ce.a.SetMultiPickModeEnabled(t)),!0},hideDefinition:!0},{procName:pe.a.getCanvasPos,actionFn:function(e){var n=i.getCanvas();return fe.getCanvasPos(t,e.worldPos,e.offset,n.width,n.height)},hideDefinition:!0},{procName:pe.a.SceneCapture,actionFn:function(){return function(e,t,n){var i=n.captureCamera(),a=t.selectSnapshot(Ue.a.getNodes),o=Object.keys(a).map((function(t){return{objectId:t,selected:a[t].checked||De(e,a,t),hidden:!a[t].shown}})),r=t.selectSnapshot(Se.a.getStoryChapters).map((function(e){return{chapterId:e.id,background:e.background||Me.a}})),s=t.selectSnapshot(ye.a.getStoryId);return{camera:i,labels:t.selectSnapshot(ve.a.getLabels),storyId:s,objects:o,background:r,activeChapterId:t.selectSnapshot(Se.a.getSelectedChapterId)}}(t,n,o)}},{procName:pe.a.SceneRestore,actionFn:function(e){var a=_e.isLegacyCaptureFormat(e),o=a?_e.convertCaptureFormat(e):e;return function(e,t,n,i,a){return new A.a((function(o){i.getEvent(X.a.HumanStarted).pipe(Object(Oe.a)()).subscribe((function(){(function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(a){n.selectSnapshot(oe.a.getViewGraph);var o=t.objects.filter((function(e){return!0===e.selected})).map((function(e){return e.objectId})),r=i?e.scene.getLeaves().filter((function(e){return void 0===t.objects.find((function(t){return t.objectId===e}))})):t.objects.filter((function(e){return!0===e.hidden})).map((function(e){return e.objectId})),s=t.background.map((function(e){return new xe.s(e.chapterId,e.background)})),c=t.activeChapterId?[new xe.q(t.activeChapterId)]:[],l=void 0!==t.camera.zoom?[new de.t(t.camera.zoom)]:[];setTimeout((function(){n.dispatch([new de.l(t.camera.lookAt,!1),new ke.q(t.labels),new Te.a.UpdateNodesShown(!1,r),new Te.a.UpdateNodesChecked(!0,o)].concat(l,c,u(s))),a(void 0)}))}))})(e,t,n,a).then((function(){i.fireEvent(X.a.SceneRestored,void 0),o.next(!0),o.complete()}))})),Ee(n,t.storyId)}))}(t,o,n,i,a)}},{procName:pe.a.SceneEnableXrayMode,actionFn:function(){return Ne(n,i)}},{procName:pe.a.SceneDisableXrayMode,actionFn:function(){return Ie(n,i)}},{procName:pe.a.SceneLoad,actionFn:function(e){return Ee(n,e),n.dispatch(new ze),!0}},{procName:pe.a.SceneSetBaseDirectory,actionFn:function(e){return t.events.fire("scene.setBaseDirectory",e),!0}},{procName:pe.a.NativeSetSdkOffline,actionFn:function(e){return t.events.fire("native.setSdkOffline",e),!0}},{procName:pe.a.SceneReset,actionFn:function(){return c.resetChapter(),!0}},{procName:pe.a.SceneInfo,actionFn:function(e){var i=e&&e.objectId?[e.objectId]:Object.keys(t.scene.objects),a=n.selectSnapshot(ye.a.getStory).displayName;return function(e,t,n,i){var a=i.selectSnapshot(Ue.a.getNodes);return{name:t,objects:n.reduce((function(t,n){return t[n]=function(t){var n=e.scene.objects[t],i=n.isLeaf()?a[t].checked||De(e,a,t):void 0;return{objectId:n.objectId,name:n.displayName,description:n.description||"",shown:n.shown,selected:i,children:n.objects.map((function(e){return e.objectId})),parent:n.parent?n.parent.objectId:null}}(n),t}),{})}}(t,a,i,n)}},{procName:pe.a.ScenePick,actionFn:function(e){return Fe(i.pickScene({x:e.x,y:e.y,rayPick:!0}))}},{procName:pe.a.SceneSelectObjects,actionFn:function(e){var t=!0===e.replace,i=e;return delete i.replace,t&&n.dispatch(new Te.a.UpdateNodesChecked(!1)),n.dispatch(new Te.a.UpdateNodesChecked(!1,[],i)),!0}},{procName:pe.a.SceneShowObjects,actionFn:function(i){delete i.replace;var a=Object.entries(i).reduce((function(n,a){var o=p(a,2),r=o[0],s=o[1];return Object.assign(Object.assign({},n),function n(a,o){var r,s=t.scene.objects[a].objects,c=l({},a,o),u=e(s);try{for(u.s();!(r=u.n()).done;){var p=r.value;void 0!==i[p.objectId]||(c[p.objectId]=o,c=Object.assign(Object.assign({},c),n(p.objectId,o)))}}catch(d){u.e(d)}finally{u.f()}return c}(r,s))}),{});return n.dispatch(new Te.a.UpdateNodesShown(!1,[],a)),!0}},{procName:pe.a.IsolateObject,actionFn:function(e){var t="string"==typeof e?[e]:e,i=n.selectSnapshot(oe.a.getViewGraph),a=r.getInverseSelection(i,t),o=r.getNodes(i,a);return n.dispatch(new Te.a.UpdateNodesShown(!1,o.map((function(e){return e.id})))),!0}},{procName:pe.a.SceneTransformObject,actionFn:function(e){return i.transformObject(e.objectId,e),!0}},{procName:pe.a.SceneColorObject,actionFn:function(e){var t=e.objectId,i=e.tintColor,a=e.saturation,o=e.contrast,r=e.brightness,s=e.opacity;return n.dispatch(new Te.a.UpdateNodesPaint(ce.a.fromEngine({tintColor:i,saturation:a,contrast:o,brightness:r,opacity:s}),[t])),!0}},{procName:pe.a.SceneGetColor,actionFn:function(e){var t=n.selectSnapshot(Ue.a.getNodePaint)(e.objectId);return ce.a.toEngine(t)}},{procName:pe.a.SceneUncolorObject,actionFn:function(e){return n.dispatch(new Te.a.UpdateNodesPaint(Le.c,[e.objectId])),!0}},{procName:pe.a.SceneDisableHighlight,actionFn:function(){return a.disableHighlight(),!0}},{procName:pe.a.SceneEnableHighlight,actionFn:function(){return a.enableHighlight(),!0}},{procName:pe.a.SceneSetHighlightColor,actionFn:function(e){return a.setHighlightColor(e),!0}},{procName:pe.a.SceneSetLayersSliderPosition,actionFn:function(e){var t=Math.min(1,Math.max(e.position,0)),n=d.fractionToIndex(t),i=d.fractionToPosition(t,n);return e.record?d.recordLayerIndexPosition(n,i):d.synchronizeScene(n,i,!1),!0}},{procName:pe.a.SceneGetLayers,actionFn:function(){return n.selectSnapshot(Se.a.getAllChaptersCurrentLayers)}}]}(Human,this.store,this.engineService,this.paintService,this.cameraService,this.graphService,this.animationService,this.viewService,this.visibilityLayersService).forEach((function(e){le(Human,e)})),function(e,t){return[{procName:pe.a.CameraInfo,actionFn:function(){return he(t)}},{procName:pe.a.CameraOrbit,actionFn:function(t){return e.dispatch(new de.i(void 0===t.pitch?0:t.pitch,void 0===t.yaw?0:t.yaw)),!0}},{procName:pe.a.CameraPan,actionFn:function(t){return e.dispatch(new de.e(void 0===t.x?0:t.x,void 0===t.y?0:t.y,void 0===t.z?0:t.z)),!0}},{procName:pe.a.CameraReset,actionFn:function(){return e.dispatch(new de.h)}},{procName:pe.a.CameraSet,actionFn:function(n){var i=n.animate||!1;if(n.objectId)return e.dispatch(new ge.j(n.objectId,i,n.animationDuration)),!0;var a=he(t);return e.dispatch(new de.l({eye:n.position||a.position,look:n.target||a.target,up:n.up||a.up},i)),!0}},{procName:pe.a.CameraZoom,actionFn:function(t){return e.dispatch(new de.t(t||0)),!0}},{procName:pe.a.setCameraMode,actionFn:function(t){return e.dispatch(new de.n("pan"===t?"pan":"rotate")),!0}},{procName:pe.a.CameraDisableChapterCamera,actionFn:function(){return e.dispatch(new de.p(!1)),!0}},{procName:pe.a.CameraEnableChapterCamera,actionFn:function(){return e.dispatch(new de.p(!0)),!0}}]}(this.store,this.cameraService).forEach((function(e){le(Human,e)})),function(e,t,n,i){return[{procName:pe.a.TimelineQuery,actionFn:function(){return{chapters:e.selectSnapshot(Se.a.getStoryChapters).map((function(e){var t=e.info;return{description:t.description,displayName:t.displayName,annotations:e.labels.map((function(e){return{title:e.title,description:e.description}}))}}))}},hideDefinition:!0},{procName:pe.a.TimelineInfo,actionFn:function(){return function(e,t){var n=t.getTimeFrame();return{time:t.getTime(),startTime:n.firstTime,endTime:n.lastTime,chapters:e.selectSnapshot(Se.a.getStoryChapters).map((function(e){return e.id})),playing:t.isPlaying()}}(e,n)}},{procName:pe.a.TimelinePlay,actionFn:function(i){var a=i.loop||!1;if(void 0===i.time&&void 0===i.chapterId){var o=e.selectSnapshot(Se.a.getSelectedChapterId);return n.play({numChapters:1,loop:a,queue:!1,startChapterId:o}),!0}var r=Math.max(0,i.time),s=n.getTimeFrame().lastTime,c=Math.min(r,s-.001);return new A.a((function(o){t.pipe(Object(E.k)(xe.q),Object(I.a)(1)).subscribe((function(){n.play(Object.assign(Object.assign({},{numChapters:1,queue:!1,loop:a}),void 0!==i.time?{startTime:c}:{startChapterId:i.chapterId})),o.next(!0),o.complete()}));var r=i.chapterId?i.chapterId:n.mapGlobalTimeToLocal(c,{tie:"later"}).branch.id;e.dispatch(new xe.q(r))}))}},{procName:pe.a.TimelinePause,actionFn:function(){return n.pause(),!0}},{procName:pe.a.TimelineSet,actionFn:function(i){if(void 0===i.time&&void 0===i.chapterId)return!0;if(void 0!==i.chapterId)return e.dispatch(new xe.q(i.chapterId)),!0;var a=Math.max(0,i.time),o=n.getTimeFrame().lastTime,r=Math.min(a,o);return new A.a((function(i){t.pipe(Object(E.k)(xe.q),Object(I.a)(1)).subscribe((function(){n.scrub({time:r,which:0===r?"second":"first"}),i.next(!0),i.complete()}));var a=n.mapGlobalTimeToLocal(r,0===r?{tie:"later"}:{});e.dispatch(new xe.q(a.branch.id))}))}},{procName:pe.a.TimelineNext,actionFn:function(){return i.nextChapter("API"),!0}},{procName:pe.a.TimelinePrev,actionFn:function(){return i.previousChapter("API"),!0}}]}(this.store,this.actions,this.animationService,this.viewService).forEach((function(e){le(Human,e)})),function(e){return[{procName:pe.a.InputEnable,actionFn:function(){return e.dispatch(new Qe(!0)),!0}},{procName:pe.a.InputDisable,actionFn:function(){return e.dispatch(new Qe(!1)),!0}}]}(this.store).forEach((function(e){le(Human,e)})),function(e,t,n,i,a){var o=new rt.a(!1);return n.pipe(Object(E.k)(xe.H)).subscribe((function(){o.next(!0)})),[{procName:pe.a.UIGetBackground,actionFn:function(){return e=t.selectSnapshot(Se.a.getSelectedChapterBackground),n=e.colors,i=e.gradientType,a=e.colorStops,{colors:[[n[0],n[1],n[2],n[3]],[n[4],n[5],n[6],n[7]]],gradientType:i,colorStops:a};var e,n,i,a}},{procName:pe.a.UISetBackground,mapFnIn:function(e){var t=e.colors,n=e.colorStops,i=e.gradientType;return{colors:t?ct(t):t,gradientType:i,colorStops:n}},actionFn:function(e){if(e){var n=ut(t,e);t.dispatch(new xe.I(n))}return!0}},{procName:pe.a.UIPresetBackground,mapFnIn:function(e){var t=e.colors,n=e.colorStops,i=e.gradientType;return{colors:t?ct(t):t,gradientType:i,colorStops:n}},actionFn:function(e){if(e){var n=ut(t,e);s.a.platform===st.a.SDK&&o.next(!1),o.pipe(Object(M.a)((function(e){return!!e})),Object(I.a)(1)).subscribe((function(){t.dispatch(new xe.r(n))}))}return!0}},{procName:pe.a.UIGetWorldPosition,actionFn:function(t){var n=e.renderer.pick.pick(t.x,t.y,{rayPick:!0}).worldPos;return n?{x:n[0],y:n[1],z:n[2]}:null}},{procName:pe.a.UISetOndemand,actionFn:function(e){return t.dispatch([new Ce.a.ToggleWindow(tt.a.OnDemand,e.enabled)]),!0}},{procName:pe.a.UISetLoadingExperience,actionFn:function(e){return Object(D.isEmpty)(e)?t.dispatch(new Ce.a.CloseWindow(tt.a.Interact)):t.dispatch([new Ce.a.SetInteractType(e),new Ce.a.OpenWindow(tt.a.Interact)]),!0}},{procName:pe.a.UISetScrollCaptureMode,actionFn:function(e){return t.dispatch(new ge.N(e)),!0}},{procName:pe.a.UISetTutorial,actionFn:function(e){return t.dispatch([new Ce.a.ToggleWindow(tt.a.Tutorial,e.enabled),new Ce.a.StartTutorial(e.enabled)]),!0}},{procName:pe.a.UIGetDisplay,actionFn:function(){var e=t.selectSnapshot(je.a.getUI);return{audio:e.audio.enable,fullscreen:e.fullscreen.enable,help:e.help.enable,nav:e.camera.enable,cameraMode:e.camera.enable,center:e.camera.enable,zoomIn:e.camera.enable,zoomOut:e.camera.enable,info:e.column.enable||e.drawer.enable,playPause:e.media.enable,scrubber:e.media.enable,"scrubber.chapters":e.media.enable,tools:e.tools.enable,"tools-display":e.tools.enable,tour:e.pagination.enable,"tour.chapters":e.pagination.enable,objectTree:e.search.enable,anatomyLabels:e.anatomyLabels.enable,share:!1,dissect:!1,xray:!1,annotations:!1,crossSection:!1,isolate:!1}}},{procName:pe.a.UISetDisplay,actionFn:function(e){var n=Object(et.c)(e);return t.dispatch(new Ge(n)),e}},{procName:pe.a.UIResetDisplay,actionFn:function(){var e=t.selectSnapshot(je.a.getInitialUI);t.dispatch(new Ce.a.SetUI(e))}},{procName:pe.a.UISetQuizLock,actionFn:function(e){return n.pipe(Object(E.l)(me.b),Object(I.a)(1)).subscribe((function(){t.dispatch(new at.a.SetQuizLocked(e)),t.dispatch(new at.a.SetEnableQuizRetake(e)),!0===e&&a.startQuiz()})),!0}},{procName:pe.a.UISnapshot,aliases:[pe.a.SceneSnapshot],mapFnIn:function(e){var t=i.getCanvas(),n=t.width,a=t.height;return Object.assign({width:n,height:a,openInTab:!1,fileType:"jpeg",quality:.92},e)},actionFn:function(e){var i=e.width,a=e.height,o=e.openInTab,r=e.fileType,s=t.selectSnapshot(Se.a.getSelectedChapterId),c={width:i,height:a},u="jpeg"===r?it.a.JPEG:it.a.PNG,l=t.selectSnapshot(Se.a.getSelectedChapterBackground);return t.dispatch(new ot.b(s,l,u,.92,c,"original",!0,!0)).pipe(Object(Xe.a)((function(){return n.pipe(Object(E.l)(ot.c),Object(I.a)(1))})),Object(Xe.a)((function(e){return nt.a.blobToBase64(e.blob)})),Object(Ze.a)((function(e){o&&e&&function(e){var t=window.open("","_blank");if(t){var n=t.document.createElement("img");n.src=e,t.document.body.appendChild(n)}}(e)})),Object(Je.a)((function(){return Object(Ke.of)(null)})))}}]}(Human,this.store,this.actions,this.engineService,this.quizService).forEach((function(e){le(Human,e)})),function(e,t,n,i){return[].concat(u(function(e,t,n){return[{procName:pe.a.AnnotationsInfo,actionFn:function(){return pt(t)},mapFnOut:function(t){return function(e,t){return t.reduce((function(t,n){return t[n.id]=gt(e,n),t}),{})}(e,t)}},{procName:pe.a.AnnotationsCreate,mapFnIn:function(i){return function(e,t,n,i){var a=t.selectSnapshot(Se.a.getSelectedChapter),o={annotationId:i.annotationId,title:i.title,description:i.description,objectId:e.scene.objects[i.objectId]?i.objectId:void 0,pos:i.position,occludable:i.occludable,labelOffset:i.labelOffset,shown:i.shown,labelShown:i.shown};return o.objectId&&void 0===o.pos&&(o.pos=e.scene.objects[o.objectId].center),n.deserializeAnnotation(o,a,lt.a.Annotation)}(e,t,n,i)},actionFn:function(e){return function(e,t){return t.objectId||t.pos?(e.dispatch(new ke.b(t)),t):null}(t,e)},mapFnOut:function(t){return t?gt(e,t):null}},{procName:pe.a.AnnotationsUpdate,mapFnIn:function(e){return ht(t,e)},actionFn:function(e){return ft(t,e)}},{procName:pe.a.AnnotationsSetTitle,mapFnIn:function(e){return ht(t,e)},actionFn:function(e){return ft(t,e)},hideDefinition:!0},{procName:pe.a.AnnotationsSetDescription,mapFnIn:function(e){return ht(t,e)},actionFn:function(e){return ft(t,e)},hideDefinition:!0},{procName:pe.a.AnnotationsDestroy,mapFnIn:function(e){return dt(t,e)},actionFn:function(e){return function(e,t){return t&&e.dispatch(new ke.i(t)),!0}(t,e)}},{procName:pe.a.ShowAnnotations,actionFn:function(){return bt(t,!0)}},{procName:pe.a.SetAnnotationsShown,actionFn:function(){return bt(t,!0)},hideDefinition:!0},{procName:pe.a.HideAnnotations,actionFn:function(){return bt(t,!1)}},{procName:pe.a.AnnotationsSetLabelsShown,mapFnIn:function(e){return function(e,t){var n=t.annotations,i=t.objects,a=t.replace,o=n||{},r=i||{},s=pt(e),c=Object.assign(Object.assign(Object.assign(Object.assign({},yt(o,!0)),yt(o,!1)),Ot(s,r,!0)),Ot(s,r,!1));return a?Object.assign(Object.assign({},mt(s.map((function(e){return e.id})),!1)),c):c}(t,e)},actionFn:function(e){return function(e,t){var n=pt(e),i=kt(n,t,!1),a=kt(n,t,!0);e.dispatch(new ke.t(a,!0)),e.dispatch(new ke.t(i,!1))}(t,e)},hideDefinition:!0}]}(e,t,n)),u(function(e,t,n){return[{procName:pe.a.HotspotsInfo,actionFn:function(n){var i="number"==typeof n?n:void 0;if(void 0!==i){var a=_t(t,i);return Ut(e,t,[a])[0]}var o=Ft(t,i);return Ut(e,t,o)}},{procName:pe.a.HotspotsTypes,mapFnIn:function(){return Object.values(St.a).map((function(e){return""+e}))},actionFn:function(e){return e}},{procName:pe.a.HotspotsCreate,mapFnIn:function(e){return function(e,t,n){var i=n.title,a=n.objectId,o=n.position,r=n.direction,s=n.chapterScope,c=n.type,u=e.selectSnapshot(Se.a.getStoryChapters),l=e.selectSnapshot(Se.a.getSelectedChapter),p=e.selectSnapshot(Se.a.getSelectedChapterIndex),d="number"==typeof s?s:p,g=u[d]||l,h=!1!==n.shown,f=h&&!!i,b={title:i,type:c||St.a.CircleLabel,objectId:a,pos:o?zt(o):null,dir:r?zt(r):null,shown:h,symbol:"",className:""},m=t.deserializeHotspots({},g,d,b);return m.title=i,m.expandTag=!0,m.flyTo=!1,m.flyToTarget=null,m.occludable=!0,m.pinGlow=!1,m.pinType=xt.a.PlusMinus,m.shown=h,m.hideTag=!f,m.hideWire=!0,m.theme=lt.a.StudioNext,m.pinType=Mt(c),wt(m.id,n),m}(t,n,e)},actionFn:function(e){return function(e,t){return t.objectId||t.pos?(e.dispatch(new ke.b(t)),t):null}(t,e)},mapFnOut:function(e){return e?It(t,e.id):null}},{procName:pe.a.HotspotsUpdate,mapFnIn:function(e){return function(e,t){var n=_t(e,t.id);return n?function(e,t){var n=e.title,i=e.objectId,a=e.direction,o=e.position,r=e.shown,s=e.type,c=Object.assign(Object.assign({},t),{title:n,objectId:i,shown:r,pos:o?zt(o):null,dir:a?zt(a):null,pinType:s?Mt(s):null});return wt(t.id,e),Object.assign(Object.assign({},t),Object(D.omitBy)(c,D.isNil))}(t,n):null}(t,e)},actionFn:function(e){return e?function(e,t){return e.dispatch(new ke.m(t)),t}(t,e):null}},{procName:pe.a.HotspotsDestroy,mapFnIn:function(e){return _t(t,e)},actionFn:function(e){return e?function(e,t){return e.dispatch(new ke.i(t)),t}(t,e):null}},{procName:pe.a.HotspotsShow,mapFnIn:function(e){return Ft(t,e)},actionFn:function(e){return At(t,e,!0)}},{procName:pe.a.HotspotsHide,mapFnIn:function(e){return Ft(t,e)},actionFn:function(e){return At(t,e,!1)}}]}(e,t,n)),[{procName:pe.a.LabelsInfo,actionFn:function(e){return e.length>0?Gt(t,e):t.selectSnapshot(ve.a.getChapterLabels)},mapFnOut:function(t){return Jt(e,t)}},{procName:pe.a.LabelsCreate,mapFnIn:function(e){return e.labelId&&Qt(t,e.labelId)?null:e.objectId&&e.position?function(e,t,n,i){var a=n.makeDefaultStudioLabel();a.id=i.labelId||Nt.a.idWithPrefix("label"),a.objectId=i.objectId,a.pos=i.position,a.renderableIndex=0,a.occludable=!0,a.flyTo=!0,a.description="",a.shown=!0;var o=t.selectSnapshot(Se.a.getSelectedChapter);return a.chapterId=o.id,Xt(a,i)}(0,t,n,e):(console.log("attempt to create a label with no objectId and position"),null)},actionFn:function(e){return Wt(t,e,!0)},mapFnOut:function(t){return Zt(e,t)}},{procName:pe.a.LabelsUpdate,mapFnIn:function(e){return Qt(t,e.labelId)?function(e,t){return Xt(Qt(e,t.labelId),t,e.selectSnapshot(Se.a.getSelectedChapter))}(t,e):null},actionFn:function(e){return Wt(t,e,!1)},mapFnOut:function(t){return Zt(e,t)}},{procName:pe.a.LabelsCanvasUpdate,mapFnIn:function(e){return Qt(t,e.labelId)?function(e,t,n){var i=Qt(e,n.labelId),a=n.canvasPosition,o=t.pickScene({x:a[0],y:a[1],rayPick:!0});return o&&o.objectId?(i.objectId=o.objectId,i.pos=[o.worldPos[0],o.worldPos[1],o.worldPos[2]],i.offset=[i.hideWire?20:32,0],i.barycentric=[o.barycentric[0],o.barycentric[1],o.barycentric[2]],i.primitiveIndex=o.primitiveIndex,i.renderableIndex=o.renderableIndex||0,i):null}(t,i,e):null},actionFn:function(e){return Wt(t,e,!1)},mapFnOut:function(t){return Zt(e,t)}},{procName:pe.a.LabelsDestroy,mapFnIn:function(e){return Qt(t,e)},actionFn:function(e){return e?(t.dispatch(new ke.i(e)),{labelId:e.id}):null}},{procName:pe.a.LabelsShow,actionFn:function(e){return e.length>0?t.dispatch(new ke.t(Gt(t,e),!0)):Ht(t,!0),!0}},{procName:pe.a.LabelsHide,actionFn:function(e){return e.length>0?t.dispatch(new ke.t(Gt(t,e),!1)):Ht(t,!1),!0}},{procName:pe.a.LabelsSetEnabled,aliases:[pe.a.AnnotationsSetEnabled],actionFn:function(e){t.dispatch(new ge.Y(e.enable))},hideDefinition:!0},{procName:pe.a.LabelsSetScale,actionFn:function(e){t.dispatch(new ke.o(e.scale))}}])}(Human,this.store,this.labelsService,this.engineService).forEach((function(e){le(Human,e)})),function(e,t){function n(t){return e.selectSnapshot(an.b.getQuizModeActive)?t():{error:"quiz mode is not active"}}return[{procName:pe.a.QuizInfo,actionFn:function(){return e.selectSnapshot(an.b.hasQuiz)?un(e):null}},{procName:pe.a.QuizSubmit,actionFn:function(i){return n((function(){return t.submitQuestion(i.questionId,i.answerIds),un(e)}))}},{procName:pe.a.QuizQuestion,actionFn:function(){return n((function(){return hn(e)}))}},{procName:pe.a.QuizEnter,actionFn:function(){return e.selectSnapshot(an.b.hasQuiz)?(t.startQuiz(),!0):{error:"quiz not found"}}},{procName:pe.a.QuizExit,actionFn:function(){return t.exitQuiz(),!0}},{procName:pe.a.QuizSelectQuestion,actionFn:function(t){return n((function(){return e.dispatch(new at.a.SetActiveQuestion(t)),un(e)}))}},{procName:pe.a.QuizNextQuestion,actionFn:function(){return n((function(){return t.nextQuestion(),hn(e)}))}},{procName:pe.a.QuizPreviousQuestion,actionFn:function(){return n((function(){return e.dispatch(new at.a.SetQuizLifecycle(tn.a.Question)),e.dispatch(new at.a.PreviousQuestion),hn(e)}))}},{procName:pe.a.QuizReset,actionFn:function(){return t.resetQuiz(),un(e)}},{procName:pe.a.QuizSet,actionFn:function(t){var n=t.settings,i=t.startNumber,a=t.endNumber,o=t.locked;if(!Object(D.isNil)(n)){var r=e.selectSnapshot(an.b.getQuizSettings);e.dispatch(new at.a.SetQuizSettings(Object.assign(Object.assign({},r),n)))}if("number"==typeof i||"number"==typeof a){var s=e.selectSnapshot(Se.a.getStoryChapters),c=Object(on.b)(s),u=c.slice("number"==typeof i?i-1:0,"number"==typeof a?a:c.length);e.dispatch(new at.a.SetQuestions(u))}return"boolean"==typeof o&&e.dispatch(new at.a.SetQuizLocked(o)),e.dispatch(new at.a.SetQuizQuestionsMode("number"==typeof i&&"number"==typeof a?"restricted":"all")),un(e)}}]}(this.store,this.quizService).forEach((function(e){le(Human,e)}))}}]),t}()).\u0275fac=function(e){return new(e||On)(r.Zb(E.h),r.Zb(E.b),r.Zb(ie.a),r.Zb(ae.a),r.Zb(Ve.a),r.Zb(ue),r.Zb(Kt.a),r.Zb(re.a),r.Zb($t.a),r.Zb(Vn),r.Zb(en.a),r.Zb(Cn.a))},On.\u0275prov=r.Lb({token:On,factory:On.\u0275fac,providedIn:"root"}),On),Qn=a("/EfZ"),Gn=a("dNgK"),Wn=((Sn=function(){function e(t){h(this,e),this.viewService=t}return b(e,[{key:"initialize",value:function(){var e=this;window.BDGlobalActions={toggleTutorial:function(t){return e.viewService.toggleTutorial(t)}}}}]),e}()).\u0275fac=function(e){return new(e||Sn)(r.Zb($t.a))},Sn.\u0275prov=r.Lb({token:Sn,factory:Sn.\u0275fac,providedIn:"root"}),Sn),qn=a("R0Ic"),Xn=a("VRyK"),Zn=a("itXk"),Jn=a("/uUt"),Kn=a("Zy1z"),$n=a("zp1y"),Yn=a("zP0r"),ei=a("L6yT"),ti=a("Lyqc"),ni=a("Ryms"),ii=a("j8e5"),ai=a("eKhQ"),oi=a("q7pw"),ri=a("EFcw"),si=a("J5ja"),ci=a("PV7u"),ui=a("L2KA"),li=a("0njA"),pi=["*"],di=((xn=function(){function e(){h(this,e),this.type="message",this.dismissClick=new r.p}return b(e,[{key:"ngOnInit",value:function(){}},{key:"handleDismissClicked",value:function(){this.dismissClick.emit()}}]),e}()).\u0275fac=function(e){return new(e||xn)},xn.\u0275cmp=r.Jb({type:xn,selectors:[["app-header-notification"]],inputs:{type:"type"},outputs:{dismissClick:"dismissClick"},ngContentSelectors:pi,decls:8,vars:10,consts:[[1,"header-notification","flex","flex-row","justify-center"],[1,"text-14","flex","flex-row","justify-center","items-center","flex-auto"],[1,"mr-3"],["icon","exclamation-triangle"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Dismiss",3,"click"],["icon","times","size","lg"]],template:function(e,t){1&e&&(r.lc(),r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Qb(3,"app-icon",3),r.Ub(),r.Vb(4,"div"),r.kc(5),r.Ub(),r.Ub(),r.Vb(6,"button",4),r.cc("click",(function(){return t.handleDismissClicked()})),r.Qb(7,"app-icon",5),r.Ub(),r.Ub()),2&e&&(r.Hb("header-notification--message","message"===t.type)("header-notification--error","error"===t.type)("header-notification--notification","notification"===t.type)("header-notification--warning","warning"===t.type),r.mc("@inFromTop",void 0),r.Db(6),r.Eb("aria-label","Dismiss"))},directives:[li.a,V.a],styles:[".header-notification[_ngcontent-%COMP%]{position:fixed;z-index:10000;width:100vw;color:#fff;padding:8px}.header-notification--message[_ngcontent-%COMP%]{background-color:#138032}.header-notification--error[_ngcontent-%COMP%]{background-color:#a81914}.header-notification--notification[_ngcontent-%COMP%]{background-color:#1c5ab9}.header-notification--warning[_ngcontent-%COMP%]{color:#1c2a3f;background-color:#ffb92e}"],data:{animation:[Object(qn.n)("inFromTop",[Object(qn.m)(":enter",[Object(qn.l)({transform:"translateY(-100%)"}),Object(qn.e)("250ms ease-out",Object(qn.l)({transform:"*"}))])])]},changeDetection:0}),xn),gi=a("lR5k");function hi(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",6),r.cc("click",(function(){return r.Cc(n),r.gc().handleActionClick()})),r.Pc(1),r.Ub()}if(2&e){var i=r.gc();r.Db(1),r.Rc(" ",i.buttonLabel," ")}}var fi,bi=((fi=function(){function e(){h(this,e),this.dismissClick=new r.p,this.actionClick=new r.p}return b(e,[{key:"ngOnInit",value:function(){}},{key:"handleActionClick",value:function(){this.actionClick.emit()}},{key:"handleDismissClick",value:function(){this.dismissClick.emit()}}]),e}()).\u0275fac=function(e){return new(e||fi)},fi.\u0275cmp=r.Jb({type:fi,selectors:[["app-footer-notification"]],inputs:{label:"label",buttonLabel:"buttonLabel",compact:"compact"},outputs:{dismissClick:"dismissClick",actionClick:"actionClick"},decls:7,vars:7,consts:[["data-test","footerNotification",1,"footer-notification","flex","flex-row","items-start","justify-center"],[1,"footer-notification__wrapper"],["data-test","footerNotificationTitle",1,"footer-notification__title","text-16","html",3,"innerHTML"],["app-button","","buttonType","primary","data-test","footerNotificationAction",3,"click",4,"ngIf"],["app-button","","buttonType","default","buttonTheme","light","type","button","title","Close","data-test","footerNotificationDismiss",1,"footer-notification__close",3,"click"],["icon","times","size","lg"],["app-button","","buttonType","primary","data-test","footerNotificationAction",3,"click"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Qb(2,"div",2),r.hc(3,"markdown"),r.Nc(4,hi,2,1,"button",3),r.Ub(),r.Vb(5,"button",4),r.cc("click",(function(){return t.handleDismissClick()})),r.Qb(6,"app-icon",5),r.Ub(),r.Ub()),2&e&&(r.Hb("footer-notification--compact",t.compact),r.Db(2),r.mc("innerHTML",r.ic(3,5,t.label),r.Dc),r.Db(2),r.mc("ngIf",t.buttonLabel),r.Db(1),r.Eb("aria-label","Close"))},directives:[v.p,V.a,li.a],pipes:[gi.b],styles:[".footer-notification[_ngcontent-%COMP%]{padding:16px 40px;background-color:#fff;box-shadow:0 11px 15px rgba(0,0,0,.2),0 24px 38px rgba(0,0,0,.14),0 9px 46px rgba(0,0,0,.12)}.footer-notification__wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex:1 1 auto}.footer-notification__title[_ngcontent-%COMP%]{margin-right:40px}.footer-notification--compact[_ngcontent-%COMP%]   .footer-notification__wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;justify-content:flex-start}.footer-notification--compact[_ngcontent-%COMP%]   .footer-notification__title[_ngcontent-%COMP%]{margin-right:auto;margin-bottom:20px}"],changeDetection:0}),fi),mi=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},yi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},vi=function(){return["/account/profile"]},ki=function(){return{section:"subscription",mode:"edit"}};function Oi(e,t){if(1&e){var n=r.Wb();r.Vb(0,"app-header-notification",6),r.cc("dismissClick",(function(){r.Cc(n);var e=r.gc(3);return e.handleHeaderDismissClick(e.headerNotification)})),r.Vb(1,"div",7),r.Pc(2," Your Personal Pro subscription has expired. Please update your "),r.Vb(3,"span",8),r.Pc(4," payment information "),r.Ub(),r.Pc(5," to keep enjoying full access. "),r.Ub(),r.Ub()}2&e&&(r.Db(3),r.mc("routerLink",r.oc(2,vi))("queryParams",r.oc(3,ki)))}function Si(e,t){if(1&e&&(r.Vb(0,"div",4),r.Nc(1,Oi,6,4,"app-header-notification",5),r.Ub()),2&e){var n=r.gc(2);r.mc("ngSwitch",n.headerNotification.type),r.Db(1),r.mc("ngSwitchCase",n.gateTypes.ProAccountPastDue)}}function xi(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",9),r.Vb(1,"app-footer-notification",10),r.cc("actionClick",(function(){r.Cc(n);var e=r.gc(2);return e.handleActionClick(e.footerNotification.type)}))("dismissClick",(function(){r.Cc(n);var e=r.gc(2);return e.handleFooterDismissClick(e.footerNotification)})),r.hc(2,"async"),r.Ub(),r.Ub()}if(2&e){var i=r.gc(2);r.mc("@inFromBottom",void 0),r.Db(1),r.mc("label",i.footerNotification.data.title)("compact",r.ic(2,4,i.breakpoint$)<i.breakPoints.Medium)("buttonLabel",i.footerNotification.data.actionText)}}function Ci(e,t){if(1&e&&(r.Vb(0,"div",1),r.Nc(1,Si,2,2,"div",2),r.Nc(2,xi,3,6,"div",3),r.Ub()),2&e){var n=r.gc();r.Db(1),r.mc("ngIf",n.headerNotification),r.Db(1),r.mc("ngIf",n.footerNotification)}}var wi,ji=((wi=function(){function e(t,n,i,a,o,r,s,c,u){h(this,e),this.store=t,this.actions=n,this.router=i,this.activatedRoute=a,this.userAccessService=o,this.bookmarkActionService=r,this.storageService=s,this.dialogService=c,this.changeRef=u,this.breakPoints=ni.a,this.displayTypes=oi.a,this.gateTypes=ri.a,this.ngUnsubscribe=new y.a,this.initUtilityStates()}return b(e,[{key:"ngOnInit",value:function(){this.initNotificationListeners(),this.initContentViews(),this.initContentSaves(),this.initFreeTrial(),this.initPastDue(),this.initContentViewsCheck()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initContentViewsCheck",value:function(){var e=this;this.store.select(N.a.getUserProfile).pipe(Object(T.a)((function(e){return!Object(D.isNil)(e)})),Object(Jn.a)(),Object(M.a)((function(e){return e})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.store.dispatch(new Z.a)}))}},{key:"initUtilityStates",value:function(){var e=this;this.pageNavigation$=Object(Xn.a)(this.activatedRoute.url,this.router.events.pipe(Object(M.a)((function(e){return e instanceof g.c})))).pipe(Object(T.a)((function(){return e.router.url})))}},{key:"initNotificationListeners",value:function(){var e=this,t=this.store.select(N.a.getLoggedIn).pipe(Object(Kn.a)(),Object(T.a)((function(e){var t=p(e,2),n=t[0],i=t[1];return n===i?"unchanged":!n&&i?"loggingIn":"loggingOut"})),Object(Jn.a)());this.actions.pipe(Object(E.l)(Z.K),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){switch(t.display){case oi.a.Notification:e.headerNotification=t;break;case oi.a.Footer:e.footerNotification=t}e.changeRef.markForCheck()})),this.actions.pipe(Object(E.l)(Z.i),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){t.displays.forEach((function(t){switch(t){case oi.a.Notification:e.headerNotification=void 0;break;case oi.a.Footer:e.footerNotification=void 0}})),e.changeRef.markForCheck()})),this.pageNavigation$.pipe(Object($n.a)(t),Object(M.a)((function(e){return"loggingIn"!==p(e,2)[1]})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.userAccessService.clearDialogs();var t=e.isEditPage(e.router.url);e.clearNotifications(t,!0)})),this.actions.pipe(Object(E.l)(Z.H),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.clearNotifications(!0,!0),e.changeRef.markForCheck()}))}},{key:"initContentViews",value:function(){var e,t=this,n=this.pageNavigation$.pipe(Object(T.a)((function(){return t.isContentViewPage(t.router.url)})),Object(Jn.a)((function(e,t){return e===t})),Object(M.a)((function(e){return e})));this.pageNavigation$.pipe(Object(T.a)((function(){return t.router.url})),Object(Kn.a)(),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=p(t,2),i=n[0];n[1],e=i}));var i=this.contentViews$.pipe(Object(T.a)((function(e){return e.limit_reached})),Object(Jn.a)());n.pipe(Object(M.a)((function(){return!t.store.selectSnapshot(N.a.isPremiumUser)})),Object(Xe.b)((function(){return i})),Object(M.a)((function(e){return e})),Object(Xe.b)((function(){return t.userAccessService.openBookmarkViewLimit()})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(n){if(n){var i=t.router.url,a=t.isContentViewPage(e),o=t.isLoginPage(e),r=t.isAccountPage(e);t.isAccountPage(i)||(Object(D.isNil)(e)||r||o||a?t.router.navigate(["/results/bookmarks"]):t.router.navigateByUrl(e))}}));var a=this.pageNavigation$.pipe(Object(Yn.a)(1),Object(Xe.b)((function(e){return t.isContentViewPage(e)?t.store.select(Se.a.getSelectedChapterReadyState).pipe(Object(M.a)((function(e){return!Object(D.isNil)(e)&&e.model}))):Object(Pn.a)(!0)})));Object(Zn.b)([a,this.contentViews$]).pipe(Object(Jn.a)((function(e,t){return e[1].inapp_view_count===t[1].inapp_view_count})),Object(L.a)(2500),Object(m.a)(this.ngUnsubscribe)).subscribe((function(e){var n=p(e,2),i=(n[0],n[1]),a=i.inapp_view_count,o=i.inapp_view_limit,r=a/o;r>.7&&r<1&&(t.userAccessService.openBookmarkViewWarning(a,o),setTimeout((function(){t.userAccessService.clearUserNotifications(oi.a.Footer)}),2e4))}))}},{key:"initContentSaves",value:function(){var e=this;this.actions.pipe(Object(E.l)(ti.l,ti.B),Object(M.a)((function(){return!e.store.selectSnapshot(N.a.isPremiumUser)})),Object(Xe.b)((function(){return e.bookmarkActionService.checkBookmarkLimit()})),Object(L.a)(2500),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=t.inapp_content_limit,i=t.inapp_content_count,a=i/n;a>.6&&a<1&&(e.userAccessService.openBookmarkSaveWarning(i,n),setTimeout((function(){e.userAccessService.clearUserNotifications(oi.a.Footer)}),2e4))}))}},{key:"initFreeTrial",value:function(){var e=this,t=this.store.select(ai.a.isTrialExpired);Object(Zn.b)([t,this.pageNavigation$]).pipe(Object(M.a)((function(e){return p(e,1)[0]})),Object(M.a)((function(){return"true"!==e.storageService.getLocalItem(F.b.TeamTrialExpirationSeen)})),Object(I.a)(1),Object(L.a)(1e3),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){p(t,1)[0]&&e.userAccessService.openTrialExpired()}))}},{key:"initPastDue",value:function(){var e=this;this.store.select(N.a.getUserProfile).pipe(Object(M.a)((function(e){return!Object(D.isNil)(e)})),Object(M.a)((function(){return"true"!==e.storageService.getLocalItem(F.b.ProExpirationSeen)})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.store.selectSnapshot(N.a.getUserType)!==ei.a.Team&&t.subscription&&"past due"===t.subscription.subscription_status&&e.userAccessService.openPastDue()}))}},{key:"handleActionClick",value:function(e){switch(e){case ri.a.BookmarkViewThresholdReached:case ri.a.BookmarkSaveThresholdReached:case ri.a.BookmarkViewLimitReached:case ri.a.BookmarkSaveLimitReached:this.dialogService.openUpgradeDialog()}this.clearNotifications(!1,!0)}},{key:"handleHeaderDismissClick",value:function(e){switch(e.type){case ri.a.ProAccountPastDue:this.storageService.setLocalItem(F.b.ProExpirationSeen,!0)}this.clearNotifications(!0,!1),this.changeRef.markForCheck()}},{key:"handleFooterDismissClick",value:function(e){this.clearNotifications(!1,!0),this.changeRef.markForCheck()}},{key:"clearNotifications",value:function(e,t){var n,i=[];e&&(i.push(oi.a.Notification),this.headerNotification=void 0),t&&i.push(oi.a.Footer),(n=this.userAccessService).clearUserNotifications.apply(n,i)}},{key:"isViewPage",value:function(e){return e.startsWith("/view")}},{key:"isEditPage",value:function(e){return e.startsWith("/edit")}},{key:"isAccountPage",value:function(e){return e.startsWith("/account")}},{key:"isLoginPage",value:function(e){return e.startsWith("/login")}},{key:"isContentViewPage",value:function(e){var t=this.isEditPage(e);return this.isViewPage(e)||t}}]),e}()).\u0275fac=function(e){return new(e||wi)(r.Pb(E.h),r.Pb(E.b),r.Pb(g.e),r.Pb(g.a),r.Pb(si.a),r.Pb(ci.a),r.Pb(F.d),r.Pb(ui.a),r.Pb(r.i))},wi.\u0275cmp=r.Jb({type:wi,selectors:[["app-user-access"]],decls:1,vars:1,consts:[["class","user-access",4,"ngIf"],[1,"user-access"],["class","user-access__header",3,"ngSwitch",4,"ngIf"],["class","user-access__footer",4,"ngIf"],[1,"user-access__header",3,"ngSwitch"],["type","warning",3,"dismissClick",4,"ngSwitchCase"],["type","warning",3,"dismissClick"],[1,"text-13","text-medium"],[1,"text-link","text-underline",3,"routerLink","queryParams"],[1,"user-access__footer"],[3,"label","compact","buttonLabel","actionClick","dismissClick"]],template:function(e,t){1&e&&r.Nc(0,Ci,3,2,"div",0),2&e&&r.mc("ngIf",t.headerNotification||t.footerNotification)},directives:[v.p,v.r,v.s,di,g.f,bi],pipes:[v.b],styles:[".user-access__footer[_ngcontent-%COMP%]{position:fixed;z-index:100;left:0;right:0;bottom:0}"],data:{animation:[Object(qn.n)("inFromBottom",[Object(qn.m)(":enter",[Object(qn.l)({transform:"translateY(100%)"}),Object(qn.e)("250ms ease-out",Object(qn.l)({transform:"*"}))])])]},changeDetection:0}),mi([Object(E.e)(ii.a.getBreakpoint),yi("design:type",A.a)],wi.prototype,"breakpoint$",void 0),mi([Object(E.e)(N.a.getContentViews),yi("design:type",A.a)],wi.prototype,"contentViews$",void 0),wi);function Pi(e,t){if(1&e){var n=r.Wb();r.Vb(0,"app-header-notification",1),r.cc("dismissClick",(function(){return r.Cc(n),r.gc().handleHeaderDismissClick()})),r.Vb(1,"div",2),r.Pc(2,"You are offline. Check your data or wifi connection."),r.Ub(),r.Ub()}}var _i,Mi=((_i=function(){function e(t){h(this,e),this.changeRef=t,this.enabled=!s.a.native,this.offline=!1,this.seen=!1,this.ngUnsubscribe=new y.a}return b(e,[{key:"ngOnInit",value:function(){var e=this;this.offline=!window.navigator.onLine;var t=Object(z.a)(window,"online"),n=Object(z.a)(window,"offline");Object(Xn.a)(t,n).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.offline=!window.navigator.onLine,e.offline&&(e.seen=!1),e.changeRef.markForCheck()}))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"handleHeaderDismissClick",value:function(){this.seen=!0}}]),e}()).\u0275fac=function(e){return new(e||_i)(r.Pb(r.i))},_i.\u0275cmp=r.Jb({type:_i,selectors:[["app-offline-message"]],decls:1,vars:1,consts:[["type","warning",3,"dismissClick",4,"ngIf"],["type","warning",3,"dismissClick"],[1,"text-13","text-medium"]],template:function(e,t){1&e&&r.Nc(0,Pi,3,0,"app-header-notification",0),2&e&&r.mc("ngIf",t.enabled&&t.offline&&!t.seen)},directives:[v.p,di],styles:[""],changeDetection:0}),_i),Ii=a("OsX3"),Ti=a("3UWI"),Ui=a("1a36"),Li=a("XAAL"),zi=a("YLgZ"),Ai=a("Dz/e"),Fi=a("jDQD"),Di=a("yLV6"),Ei=a("rGz1"),Ni=a("4FHB"),Ri=function(){function e(t){h(this,e),this.ngUnsubsribe=new y.a,this.store=t,this.listenForParticleChanges(),this.listenForLookupChanges()}return b(e,[{key:"destroy",value:function(){this.ngUnsubsribe.next(),this.ngUnsubsribe.complete()}},{key:"listenForLookupChanges",value:function(){var e=this;this.store.select(Ei.a.getTweenParticleLookup).pipe(Object(m.a)(this.ngUnsubsribe)).subscribe((function(t){Object(D.isEmpty)(t)||Ni.a.refreshEngineLookup(e.store.selectSnapshot(ye.a.getStoryId),t)}))}},{key:"listenForParticleChanges",value:function(){var e=this,t=this.store.select(Ei.a.getParticleSystems),n=this.store.select(Ei.a.getVisisbleParticleSystems);Object(Xn.a)(t,n).pipe(Object(m.a)(this.ngUnsubsribe)).subscribe((function(){var t=e.store.selectSnapshot(Se.a.getSelectedChapterId),n=e.store.selectSnapshot(Ei.a.particleSystemsForChapter(t)),i=e.store.selectSnapshot(Ei.a.getVisibleParticleSystesmForChapter(t)),a=n.filter((function(e){return i.includes(e.id)}));e.setEngineParticles(a)}))}},{key:"setEngineParticles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Human.particles.disableAll(),Human.particles.resetAll();var t=JSON.parse(JSON.stringify(e));Human.particles.parse(t,(function(){e.forEach((function(e){Human.particles.enable(e.id)})),null!=Human.timeline.activeRoot&&(Human.timeline.activeRoot._nowBranch.particleSystems=e.map((function(e){return e.id})))}))}}]),e}(),Vi=a("3zw+"),Bi=a("TWoc"),Hi=a("fqos"),Qi=a("A+8E"),Gi=a("lWeg"),Wi=a("2he+"),qi=a("PmOP"),Xi=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},Zi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ji=["labelContainerEl"],Ki=["labelEl"],$i=["wire"],Yi=["tag"],ea=["pin"],ta=["title"];function na(e,t){1&e&&(r.Vb(0,"div",18),r.Qb(1,"app-icon",19),r.Ub())}var ia=function(e){return{"label__body--collapse":e}};function aa(e,t){if(1&e&&(r.Vb(0,"div",20),r.kc(1,3),r.Ub()),2&e){var n=r.gc();r.mc("ngClass",r.pc(1,ia,n.isCollapsed||n.descriptionCollapsed))}}var oa,ra=[[["","label-header",""]],[["","label-actions",""]],[["","label-more",""]],[["","label-body",""]]],sa=function(e,t,n,i,a,o,r,s,c){return{"label--selected":e,"label--glow":t,"label--annotation":n,"label--invert":i,"label--studio":a,"label--context":o,"label--screenshot-mode":r,"label--auto-fit":s,"label--opaque":c}},ca=function(e){return{"label__wire--collapse":e}},ua=function(e,t,n,i){return{"label__tag--collapse":e,"label__tag--collapsible":t,"label__tag--floating":n,"label__tag--draggable":i}},la=["[label-header]","[label-actions]","[label-more]","[label-body]"],pa=((oa=function(){function e(t,n,i,a,o,s,c){h(this,e),this.renderer=t,this.labelsService=n,this.engineService=i,this.cameraService=a,this.store=o,this.actions=s,this.changeDetection=c,this.labelPinType=xt.a,this.labelSequentialType=Qi.a,this.labelUpdated=new r.p,this.offsetUpdated=new r.p,this.pinClicked=new r.p,this.tagClicked=new r.p,this.displayUpdated=new r.p,this.positionUpdated=new r.p,this.hoverStart=new r.p,this.hoverEnd=new r.p,this.labelOffsetUpdated=new r.p,this.fit="fixed",this.opaque=!1,this.fixedScale=0,this.isCollapsed=!1,this.tagCollapsed=!1,this.theme="classic",this.pinDraggable=!0,this.tagDraggable=!0,this._selected=!1,this.enginePosition=null,this.isBackgroundDark=!1,this.pinDragging=!1,this.screenshotMode=!1,this.hammerManagers=[],this.displayUpdated$=new y.a,this.positionUpdated$=new y.a,this.ngUnsubscribe=new y.a}return b(e,[{key:"label",get:function(){return this._label},set:function(e){var t=Object(D.isEmpty)(e),n=Object(D.isEmpty)(this.label);t&&!n?(this._label=Object.assign({},e),this.destroyLabel()):t||(this._label=Object.assign({},e),this.initLabel(this.label))}},{key:"selected",get:function(){return this._selected},set:function(e){e&&this.tagRef.nativeElement.focus(),this._selected=e}},{key:"ngOnInit",value:function(){this.initListeners()}},{key:"ngAfterViewInit",value:function(){this.bindTagEvents(),this.bindPinEvents(),this.bindHoverEvents()}},{key:"ngOnDestroy",value:function(){this.destroyLabel(),this.emitDisplayUpdated({id:this.label.id,inView:!1,shown:!1,objectShown:this.objectShown}),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"destroyLabel",value:function(){this.hammerManagers.forEach((function(e){return e.destroy})),this.hammerManagers=[],this.deleteMarker(this.marker)}},{key:"initListeners",value:function(){var e=this;this.enginePosition$.pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.enginePosition=t})),this.engineService.getEvent(X.a.SceneMarkersUpdated).pipe(Object(M.a)((function(){return null!=e.label&&null!=e.enginePosition})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.setCanvasPos()})),this.displayUpdated$.pipe(Object(Jn.a)((function(e,t){return Object(D.isEqual)(e,t)})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.displayUpdated.next(t)})),this.positionUpdated$.pipe(Object(Jn.a)((function(e,t){return Object(D.isEqual)(e,t)})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.positionUpdated.next({positionUpdate:t,onCanvas:e.isOnCanvas()})})),this.background$.pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=t.colors.slice(0,3),i=t.colors.slice(4,7);e.isBackgroundDark=!Ye.a.isLight(n,i),e.changeDetection.markForCheck()})),this.actions.pipe(Object(E.l)(ot.b),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.screenshotMode=!0,e.changeDetection.detectChanges()})),this.actions.pipe(Object(E.k)(ot.c),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.screenshotMode=!1,e.changeDetection.markForCheck()}))}},{key:"bindTagEvents",value:function(){var e=this,t=new Di(this.tagRef.nativeElement,{domEvents:!0});t.get("pan").set({direction:Di.DIRECTION_ALL,threshold:3}),t.on("pan",(function(t){if(e.tagDraggable){t.srcEvent.stopPropagation(),e.cachedTagOffset||(e.cachedTagOffset=e.label.offset);var n=[e.cachedTagOffset[0]+t.deltaX,e.cachedTagOffset[1]+t.deltaY];e.label.offset=n,t.isFinal&&(e.cachedTagOffset=null,e.offsetUpdated.next({labelId:e.label.id,offset:n}))}})),t.on("tap",(function(t){t.srcEvent.preventDefault(),t.srcEvent.stopPropagation(),e.tagClicked.next(t)})),this.hammerManagers.push(t)}},{key:"bindPinEvents",value:function(){var e=this,t=new Di(this.pinRef.nativeElement);t.get("pan").set({direction:Di.DIRECTION_ALL,threshold:4}),t.on("pan",(function(t){if(e.pinDraggable){t.srcEvent.stopPropagation(),e.pinDragging=!0;var n=t.changedPointers[0],i=n.layerX,a=n.layerY;if(i-=16,a-=16,e.marker&&e.deleteMarker(e.marker),e.renderer.setStyle(e.labelContainerRef.nativeElement,"transform","translate(".concat(i,"px, ").concat(a,"px)")),t.isFinal){e.pinDragging=!1;var o=Object.assign({},e.label),r=Human.renderer.pick.pick(i,a,{rayPick:!0}),s="string"==typeof r.objectId;s&&(o.dir=e.cameraService.getDirection(r),o.objectId=r.objectId,o.barycentric=[r.barycentric[0],r.barycentric[1],r.barycentric[2]],o.pos=[r.worldPos[0],r.worldPos[1],r.worldPos[2]],o.primitiveIndex=r.primitiveIndex),e.labelUpdated.next({label:o,shouldPreserve:s})}}})),t.on("tap",(function(t){t.srcEvent.preventDefault(),t.srcEvent.stopImmediatePropagation(),e.pinClicked.next(t)})),this.hammerManagers.push(t)}},{key:"bindHoverEvents",value:function(){var e=this,t=this.labelRef.nativeElement;this.renderer.listen(t,"mouseenter",(function(){e.hoverStart.next({labelId:e.label.id})})),this.renderer.listen(t,"mouseleave",(function(){e.hoverEnd.next({labelId:e.label.id})}))}},{key:"initLabel",value:function(e){this.initMarker(e),this.ensureObjectId(e),this.initObjectSubscription(e)}},{key:"initMarker",value:function(e){this.marker&&this.deleteMarker(this.marker),this.marker=Human.scene.markers.create({id:e.id,pos:e.pos,dir:e.dir,objectId:e.objectId,primitiveIndex:e.primitiveIndex,barycentric:e.barycentric,renderableIndex:e.renderableIndex||0})}},{key:"checkLabelDisplay",value:function(){return{id:this.label.id,shown:this.label.shown,inView:this.isOnCanvas(),objectShown:!0}}},{key:"ensureObjectId",value:function(e){if(!e.objectId){var t=p(this.marker.canvasPos,2),n=t[0],i=t[1],a=Human.renderer.pick.pick(n,i,{rayPick:!0});a.objectId&&(e.objectId=a.objectId,e.states.forEach((function(e){e.errands.forEach((function(e){e.type===Hi.a.flyToObject&&(e.value=a.objectId)}))})),this.labelUpdated.next({label:e,shouldPreserve:void 0}))}}},{key:"initObjectSubscription",value:function(e){var t=this;this.object$&&this.object$.unsubscribe(),e.objectId&&(this.object$=this.store.select(oe.a.getViewGraphNode).pipe(Object(T.a)((function(t){return t(e.objectId)})),Object(M.a)((function(e){return!!e})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(e){t.objectShown=e.boolState.shown})))}},{key:"deleteMarker",value:function(e){Human.scene.markers.delete(e.id),this.marker=null}},{key:"setCanvasPos",value:function(){if(!this.pinDragging&&this.marker){this.depth=-this.marker.viewPos[2];var e=this.isOccluded(),t=this.isOcclusionIgnored(),n=this.isOnCanvas(),i=e&&!t,a=void 0===this.objectShown?n&&!i:n&&this.objectShown&&!i;a!==this.shown&&(this.shown=a,this.setDisplay(a)),this.setElementPosition(),this.setElementScale(),this.setTagPosition(),this.setWirePosition();var o=this.marker.canvasPos,r=o[0],s=o[1];this.positionUpdated$.next({id:this.label.id,canvasPos:{x:r,y:s},occluded:i})}}},{key:"isOcclusionIgnored",value:function(){return this.selected||!this.label.occludable}},{key:"isOccluded",value:function(){return this.depth<0||this.marker.occluded}},{key:"isOnCanvas",value:function(){var e=this.labelsService.getLabelContainer().nativeElement,t=e.offsetWidth,n=e.offsetHeight,i=p(this.marker.canvasPos,2),a=i[0],o=i[1];return a>0&&o>0&&a<t&&o<n}},{key:"setDisplay",value:function(e){this.renderer.setStyle(this.labelRef.nativeElement,"visibility",e?"visible":"hidden"),this.emitDisplayUpdated({id:this.label.id,inView:this.isOnCanvas(),shown:e,objectShown:this.objectShown})}},{key:"setOpacity",value:function(e){var t=1;e?(this.marker.viewAngle>=80&&(t=Math.max(1-(this.marker.viewAngle-80)/20*1,0)),this.renderer.setStyle(this.labelContainerRef.nativeElement,"opacity",t)):this.renderer.setStyle(this.labelContainerRef.nativeElement,"opacity",1)}},{key:"setElementPosition",value:function(){var e=this.marker.canvasPos;this.renderer.setStyle(this.labelContainerRef.nativeElement,"transform","translate(".concat(e[0],"px, ").concat(e[1],"px)"))}},{key:"setElementScale",value:function(){var e;if(this.fixedScale)e=this.fixedScale;else{var t=this.store.selectSnapshot(oe.a.getEnginePosition).width;e=t>1440?t/1440:1}var n=32*e-32;this.renderer.setStyle(this.labelRef.nativeElement,"transform-origin","top left"),this.renderer.setStyle(this.labelRef.nativeElement,"transform","translate(-".concat(n/2,"px, -").concat(n/2,"px) scale(").concat(e,", ").concat(e,")"))}},{key:"setTagPosition",value:function(){var e=this.label.offset,t=this.tagRef.nativeElement.offsetWidth;switch(this.label.offset[0]>0?"left":"right"){case"left":this.renderer.setStyle(this.tagRef.nativeElement,"transform","translate(".concat(16+e[0],"px, ").concat(e[1],"px)"));break;case"right":this.renderer.setStyle(this.tagRef.nativeElement,"transform","translate(".concat(16+e[0]-t,"px, ").concat(e[1],"px)"))}}},{key:"setWirePosition",value:function(){var e=p(this.label.offset,2),t=e[0],n=e[1];switch(this.label.theme){case lt.a.Annotation:case lt.a.Classic:n+=this.titleRef.nativeElement.offsetHeight-16-2}var i=Math.sqrt(t*t+n*n);this.renderer.setStyle(this.wireRef.nativeElement,"width",i+"px"),this.renderer.setStyle(this.wireRef.nativeElement,"transform","rotate(".concat(Math.atan2(n,t),"rad)"))}},{key:"emitDisplayUpdated",value:function(e){this.label.id!==Gi.a&&null!=e.inView&&null!=e.shown&&this.displayUpdated$.next(e)}}]),e}()).\u0275fac=function(e){return new(e||oa)(r.Pb(r.H),r.Pb(Kt.a),r.Pb(ae.a),r.Pb(ie.a),r.Pb(E.h),r.Pb(E.b),r.Pb(r.i))},oa.\u0275cmp=r.Jb({type:oa,selectors:[["app-generic-label"]],viewQuery:function(e,t){var n;1&e&&(r.Jc(Ji,!0),r.Jc(Ki,!0),r.Jc($i,!0),r.Jc(Yi,!0),r.Jc(ea,!0),r.Jc(ta,!0)),2&e&&(r.xc(n=r.dc())&&(t.labelContainerRef=n.first),r.xc(n=r.dc())&&(t.labelRef=n.first),r.xc(n=r.dc())&&(t.wireRef=n.first),r.xc(n=r.dc())&&(t.tagRef=n.first),r.xc(n=r.dc())&&(t.pinRef=n.first),r.xc(n=r.dc())&&(t.titleRef=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&r.Hb("selected",t.selected)},inputs:{fit:"fit",opaque:"opaque",fixedScale:"fixedScale",sequence:"sequence",hasContent:"hasContent",label:"label",isCollapsed:"isCollapsed",descriptionCollapsed:"descriptionCollapsed",tagCollapsed:"tagCollapsed",selected:"selected",theme:"theme",pinDraggable:"pinDraggable",tagDraggable:"tagDraggable"},outputs:{labelUpdated:"labelUpdated",offsetUpdated:"offsetUpdated",pinClicked:"pinClicked",tagClicked:"tagClicked",displayUpdated:"displayUpdated",positionUpdated:"positionUpdated",hoverStart:"hoverStart",hoverEnd:"hoverEnd",labelOffsetUpdated:"labelOffsetUpdated"},ngContentSelectors:la,decls:21,vars:26,consts:[["data-test","labelContainer",1,"label-container"],["labelContainerEl",""],["data-test","labelElement",1,"label",3,"ngClass"],["labelEl",""],[1,"label__pin"],["pin",""],[3,"label","labelTheme","selected","sequence"],[1,"label__glow"],[1,"label__wire",3,"ngClass"],["wire",""],["tabindex","0",1,"label__tag",3,"ngClass"],["tag",""],[1,"label__header"],["data-test","labelTitle",1,"label__title"],["title",""],["class","label__more",4,"ngIf"],["appEventFence","",1,"label__actions"],["class","label__body",3,"ngClass",4,"ngIf"],[1,"label__more"],["icon","caret-right"],[1,"label__body",3,"ngClass"]],template:function(e,t){1&e&&(r.lc(ra),r.Vb(0,"div",0,1),r.Vb(2,"div",2,3),r.Vb(4,"div",4,5),r.Qb(6,"app-label-pin",6),r.Qb(7,"div",7),r.Ub(),r.Qb(8,"div",8,9),r.Vb(10,"div",10,11),r.Vb(12,"div",12),r.Vb(13,"div",13,14),r.kc(15),r.Ub(),r.Nc(16,na,2,0,"div",15),r.Vb(17,"div",16),r.kc(18,1),r.Ub(),r.Ub(),r.Nc(19,aa,2,3,"div",17),r.kc(20,2),r.Ub(),r.Ub(),r.Ub()),2&e&&(r.Db(2),r.mc("ngClass",r.wc(9,sa,[t.selected,t.label.pinGlow,"annotation"===t.label.theme||"classic"===t.label.theme,t.isBackgroundDark,"studioNext"===t.label.theme,"context"===t.label.theme,t.screenshotMode,"auto"===t.fit,t.opaque])),r.Db(4),r.mc("label",t.label)("labelTheme",t.label.theme)("selected",t.selected)("sequence",t.sequence),r.Db(2),r.mc("ngClass",r.pc(19,ca,t.isCollapsed||t.tagCollapsed||t.label.hideWire)),r.Db(2),r.mc("ngClass",r.sc(21,ua,t.isCollapsed||t.tagCollapsed,t.label.collapseDescription,t.label.hideWire,t.tagDraggable)),r.Db(6),r.mc("ngIf",t.hasContent&&t.label.collapseDescription),r.Db(3),r.mc("ngIf",t.hasContent))},directives:[v.m,Wi.a,v.p,qi.a,li.a],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}@-webkit-keyframes fadeIn{0%{display:none;opacity:0}1%{display:block;opacity:0}to{opacity:1;display:block}}@keyframes fadeIn{0%{display:none;opacity:0}1%{display:block;opacity:0}to{opacity:1;display:block}}@-webkit-keyframes fadeOut{0%{display:block;opacity:1}99%{opacity:0}to{opacity:0;display:none}}@keyframes fadeOut{0%{display:block;opacity:1}99%{opacity:0}to{opacity:0;display:none}}@-webkit-keyframes glow{0%{box-shadow:0 0 0 hsla(0,0%,100%,.5)}50%{box-shadow:0 0 8px 2px hsla(0,0%,100%,.5)}to{box-shadow:0 0 0 hsla(0,0%,100%,.5)}}@keyframes glow{0%{box-shadow:0 0 0 hsla(0,0%,100%,.5)}50%{box-shadow:0 0 8px 2px hsla(0,0%,100%,.5)}to{box-shadow:0 0 0 hsla(0,0%,100%,.5)}}@-webkit-keyframes classic-glow{0%{transform:scale(.5)}10%{transform:scale(.5)}50%{transform:scale(1)}90%{transform:scale(.5)}to{transform:scale(.5)}}@keyframes classic-glow{0%{transform:scale(.5)}10%{transform:scale(.5)}50%{transform:scale(1)}90%{transform:scale(.5)}to{transform:scale(.5)}}.label-container[_ngcontent-%COMP%], [_nghost-%COMP%]{display:block;position:absolute;z-index:10;width:160px;pointer-events:all;pointer-events:none}.label-container[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]:hover{z-index:12}.selected[_nghost-%COMP%]{z-index:11}.label-container[_ngcontent-%COMP%]{left:-16px;top:-16px}.label[_ngcontent-%COMP%]{display:block;overflow:visible;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;justify-content:center;align-items:center;height:32px}.label--screenshot-mode[_ngcontent-%COMP%]{text-shadow:none!important}.label--screenshot-mode[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]:after, .label--screenshot-mode[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%]:before{box-shadow:none!important}.label--screenshot-mode[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{box-shadow:none!important;text-shadow:none!important}.label--screenshot-mode[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{display:none!important}.label--auto-fit[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;padding:0!important}.label--auto-fit[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{padding:0!important}.label__glow[_ngcontent-%COMP%]{display:none;position:absolute;width:32px;height:32px;border-radius:50%;z-index:0;top:0;left:0}.label--selected[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{transform:rotate(45deg)}.label__more[_ngcontent-%COMP%]{color:#374a68;display:none;flex:0 0 16px;height:16px;transition:transform .15s ease-in-out}.label__more[_ngcontent-%COMP%], .label__pin[_ngcontent-%COMP%]{align-items:center;justify-content:center}.label__pin[_ngcontent-%COMP%]{display:flex;width:32px;height:32px;border-radius:50%;position:absolute;pointer-events:all;transition:background-color .12s;z-index:10}.label__pin[_ngcontent-%COMP%]:hover{cursor:pointer}.label__pin--draggable[_ngcontent-%COMP%]:hover{cursor:-webkit-grab;cursor:grab}.label__pin--draggable[_ngcontent-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}.label__wire[_ngcontent-%COMP%]{position:absolute;top:16px;left:16px;height:0;transform-origin:0 100%;pointer-events:none;z-index:1}.label__wire--collapse[_ngcontent-%COMP%]{display:none}.label__tag[_ngcontent-%COMP%]{display:inline-block;left:16px;top:0;z-index:10;max-width:160px;pointer-events:all}.label__tag[_ngcontent-%COMP%]:hover{cursor:pointer}.label__tag--draggable[_ngcontent-%COMP%]:hover{cursor:-webkit-grab;cursor:grab}.label__tag--draggable[_ngcontent-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}.label__tag--collapse[_ngcontent-%COMP%]{display:none}.label__tag[_ngcontent-%COMP%]:focus{outline:2px solid #2d72dc!important;border-radius:4px}.label__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.label__title[_ngcontent-%COMP%]{line-height:1.4em;line-height:140%;align-self:center}.label__body[_ngcontent-%COMP%], .label__title[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;letter-spacing:0}.label__body[_ngcontent-%COMP%]{line-height:1.4em}.label__body--collapse[_ngcontent-%COMP%]{display:none}.label__icon[_ngcontent-%COMP%]{margin:0 -4px 0 4px}.label__actions[_ngcontent-%COMP%]{padding-left:4px}.label--studio.label--glow[_ngcontent-%COMP%]   .label__glow[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.3);display:block;-webkit-animation:classic-glow 4s infinite;animation:classic-glow 4s infinite}.label--studio.label--opaque[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.85)!important}.label--studio.label.label--selected[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-color:#2d72dc}.label--studio.label.label--selected[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{background-color:#fff;border-color:#2d72dc;box-shadow:0 0 0 1px rgba(45,114,220,.7)}.label--studio.label.label--selected[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{font-weight:600}.label--studio.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-top:1px solid rgba(16,24,35,.5)}.label--studio.label[_ngcontent-%COMP%]   .label__wire--collapse[_ngcontent-%COMP%]{display:none}.label--studio.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.55);border:1px solid rgba(16,24,35,.5);box-shadow:0 0 24px rgba(16,24,35,.1);padding:4px 8px;border-radius:4px}.label--studio.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]:hover{background:hsla(0,0%,100%,.8)}.label--studio.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{color:#101823;flex:1 1 auto}.label--studio.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{color:#374a68;overflow-x:hidden;padding-top:4px}.label--studio.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.label--studio.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic}.label--studio.label[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{display:flex}.label--studio.label.label--invert[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.5)}.label--annotation.label--glow[_ngcontent-%COMP%]   .label__glow[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.25);display:block;-webkit-animation:classic-glow 4s infinite;animation:classic-glow 4s infinite;top:-1px;left:-1px}.label--annotation.label--none[_ngcontent-%COMP%]{display:none}.label--annotation.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-top:1px solid #666}.label--annotation.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{min-width:10px;color:#eee}.label--annotation.label[_ngcontent-%COMP%]   .label__tag--collapsible[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{display:flex;color:#000}.label--annotation.label[_ngcontent-%COMP%]   .label__tag--floating[_ngcontent-%COMP%]   .label__header[_ngcontent-%COMP%]{border-bottom:none}.label--annotation.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]:focus{outline-offset:4px}.label--annotation.label[_ngcontent-%COMP%]   .label__header[_ngcontent-%COMP%]{border-bottom:1px solid #666}.label--annotation.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{font-weight:600;min-height:18px;width:100%;padding-bottom:4px;margin-bottom:-2px;color:#000}.label--annotation.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{padding-top:4px;color:#333}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{border-color:#eee}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__tag--collapsible[_ngcontent-%COMP%]   .label__more[_ngcontent-%COMP%]{display:flex;color:#fff}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{color:#fff}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__header[_ngcontent-%COMP%]{border-color:#eee}.label--annotation.label.label--invert.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{color:#eee}.label--context.label[_ngcontent-%COMP%]{pointer-events:none}.label--context.label--glow[_ngcontent-%COMP%]   .label__glow[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.3);display:block;-webkit-animation:classic-glow 4s infinite;animation:classic-glow 4s infinite}.label--context.label[_ngcontent-%COMP%]   .label__pin[_ngcontent-%COMP%], .label--context.label[_ngcontent-%COMP%]   .label__wire[_ngcontent-%COMP%]{display:none}.label--context.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.7);border:1px solid rgba(16,24,35,.5);box-shadow:0 0 24px rgba(16,24,35,.1);padding:4px 8px;border-radius:4px}.label--context.label[_ngcontent-%COMP%]   .label__tag[_ngcontent-%COMP%]:hover{background:hsla(0,0%,100%,.8);cursor:-webkit-grab;cursor:grab}.label--context.label[_ngcontent-%COMP%]   .label__title[_ngcontent-%COMP%]{font-weight:600;color:#101823}.label--context.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]{margin-top:8px;border-top:1px solid #eaeff5;color:#101823;overflow-x:hidden;padding-top:8px}.label--context.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.label--context.label[_ngcontent-%COMP%]   .label__body[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic}"],changeDetection:0}),Xi([Object(E.e)(oe.a.getEnginePosition),Zi("design:type",A.a)],oa.prototype,"enginePosition$",void 0),Xi([Object(E.e)(Se.a.getSelectedChapterBackground),Zi("design:type",A.a)],oa.prototype,"background$",void 0),oa),da=a("51ZA"),ga=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function ha(e,t){if(1&e&&r.Qb(0,"app-node-actions",9),2&e){var n=r.gc(2);r.mc("node",n.node)}}function fa(e,t){if(1&e&&(r.Vb(0,"div",7),r.kc(1),r.Nc(2,ha,1,1,"app-node-actions",8),r.Ub()),2&e){var n=r.gc();r.Db(2),r.mc("ngIf",n.enableActions)}}function ba(e,t){if(1&e&&(r.Vb(0,"i",10),r.Pc(1),r.Ub()),2&e){var n=r.gc();r.Db(1),r.Rc(" ",n.node.info.latinLabel," ")}}function ma(e,t){if(1&e){var n=r.Wb();r.Vb(0,"button",11),r.cc("click",(function(){return r.Cc(n),r.gc().handleReadMoreClick()})),r.Pc(1," Read More "),r.Ub()}2&e&&r.mc("@show",void 0)}var ya,va=["*"],ka=((ya=function(){function e(t,n,i,a,o){h(this,e),this.store=t,this.actions=n,this.engineService=i,this.viewService=a,this.changeDetectorRef=o,this.ngUnsubscribe=new y.a}return b(e,[{key:"label",get:function(){return this._label},set:function(e){this._label=e,this.setLabelNode()}},{key:"ngOnInit",value:function(){this.initInfoListeners()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"setLabelNode",value:function(){var e=Object(D.get)(this.label,"objectId");if(e){var t=this.store.selectSnapshot(oe.a.getViewGraph);this.node=this.engineService.getNode(t,e)}else this.node=null;this.changeDetectorRef.markForCheck()}},{key:"initInfoListeners",value:function(){var e=this;this.actions.pipe(Object(E.k)(ge.G),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.setLabelNode()}))}},{key:"handleReadMoreClick",value:function(){this.node&&this.viewService.toggleNodeInfo(!0)}}]),e}()).\u0275fac=function(e){return new(e||ya)(r.Pb(E.h),r.Pb(E.b),r.Pb(ae.a),r.Pb($t.a),r.Pb(r.i))},ya.\u0275cmp=r.Jb({type:ya,selectors:[["app-context-label"]],inputs:{label:"label",enableInfo:"enableInfo",enableActions:"enableActions"},ngContentSelectors:va,decls:8,vars:9,consts:[[1,"context-label",3,"label"],["label-header","",1,"context-label__header","html",3,"innerHTML"],["title",""],["class","context-label__actions","label-actions","",4,"ngIf"],["label-more",""],["class","context-label__latin",4,"ngIf"],["type","button","app-button","","buttonTheme","light","buttonSize","xsmall","class","context-label__more",3,"click",4,"ngIf"],["label-actions","",1,"context-label__actions"],["eventCategory","Context Node","theme","light",3,"node",4,"ngIf"],["eventCategory","Context Node","theme","light",3,"node"],[1,"context-label__latin"],["type","button","app-button","","buttonTheme","light","buttonSize","xsmall",1,"context-label__more",3,"click"]],template:function(e,t){1&e&&(r.lc(),r.Vb(0,"app-generic-label",0),r.Qb(1,"div",1,2),r.hc(3,"markdown"),r.Nc(4,fa,3,1,"div",3),r.Tb(5,4),r.Nc(6,ba,2,1,"i",5),r.Nc(7,ma,2,1,"button",6),r.Sb(),r.Ub()),2&e&&(r.Hb("context-label--more",t.enableInfo&&t.node&&t.node.info),r.mc("label",t.label),r.Db(1),r.mc("innerHTML",r.ic(3,7,t.label.title),r.Dc),r.Db(3),r.mc("ngIf",t.node),r.Db(2),r.mc("ngIf",t.node&&(null==t.node.info?null:t.node.info.latinLabel)),r.Db(1),r.mc("ngIf",t.enableInfo&&t.node&&t.node.info))},directives:[pa,v.p,da.a,V.a],pipes:[gi.b],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.context-label__latin[_ngcontent-%COMP%], .text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.context-label[_ngcontent-%COMP%]{z-index:12}.context-label__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.context-label__action[_ngcontent-%COMP%]{cursor:pointer}.context-label__action--selected[_ngcontent-%COMP%]{color:#2d72dc}.context-label__header[_ngcontent-%COMP%]{margin-left:4px}.context-label__latin[_ngcontent-%COMP%]{display:block;margin-left:4px}.context-label__latin[_ngcontent-%COMP%], .context-label__more[_ngcontent-%COMP%]{margin-bottom:4px;font-size:10px;letter-spacing:.25px;line-height:1.4em}.context-label__more[_ngcontent-%COMP%]{margin-left:-4px;margin-top:4px}.context-label--more[_ngcontent-%COMP%]   .context-label__actions[_ngcontent-%COMP%], .context-label--more[_ngcontent-%COMP%]   .context-label__header[_ngcontent-%COMP%]{margin-top:4px}"],data:{animation:[Object(qn.n)("show",[Object(qn.m)(":enter",[Object(qn.j)([Object(qn.l)({height:"0"}),Object(qn.e)("125ms ease-in-out",Object(qn.l)({height:"*"}))])])])]},changeDetection:0}),function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);o>3&&r&&Object.defineProperty(t,n,r)}([Object(E.e)(oe.a.getQuerying),ga("design:type",A.a)],ya.prototype,"querying$",void 0),ya),Oa=a("4LIl"),Sa=a("PlCH"),xa=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},Ca=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function wa(e,t){if(1&e&&(r.Vb(0,"div",6),r.Qb(1,"app-content-blocks",7),r.Ub()),2&e){var n=r.gc();r.Db(1),r.mc("contentBlocks",n.label.contentBlocks)("layout","compact")}}function ja(e,t){if(1&e&&(r.Qb(0,"div",8),r.hc(1,"markdown")),2&e){var n=r.gc();r.mc("innerHTML",r.ic(1,1,n.label.description),r.Dc)}}var Pa,_a=((Pa=function(){function e(t,n,i,a){h(this,e),this.store=t,this.labelsService=n,this.engineService=i,this.changeDetectorRef=a,this.emitEvents=!0,this.collapsedMode=Oa.a.None,this.collapsed=!1,this.pinDraggable=!1,this.tagDraggable=!1,this.descriptionCollapsed=!1,this.tagCollapsed=!1,this.ngUnsubscribe=new y.a}return b(e,[{key:"isCollapsed",get:function(){if(this.collapsedMode===Oa.a.Toggle){var e=this.store.selectSnapshot(ve.a.getSelectedLabelId)===this.label.id;return this.collapsed&&!e}return this.collapsed}},{key:"hasContent",get:function(){return this.labelsService.hasContent(this.label)}},{key:"ngOnInit",value:function(){var e=this;this.selectedLabel$.pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){return e.handleLabelSelected(t)})),this.store.select(ve.a.getChapterLabels).pipe(Object(m.a)(this.ngUnsubscribe),Object(L.a)(100)).subscribe((function(){e.sequence=e.store.selectSnapshot(ve.a.getLabelSequence(e.label)),e.changeDetectorRef.markForCheck()})),this.descriptionCollapsed=this.label.collapseDescription,this.tagCollapsed=this.label.hideTag}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"handleLabelUpdated",value:function(e){var t=e.label,n=e.shouldPreserve;this.store.dispatch(new ke.m(t,n))}},{key:"handleOffsetUpdated",value:function(e){var t=e.labelId,n=e.offset;this.store.dispatch(new ke.n(t,n))}},{key:"handlePinClicked",value:function(e){this.selectLabel()}},{key:"handleTagClicked",value:function(e){this.selectLabel()}},{key:"selectLabel",value:function(){var e=this.store.selectSnapshot(ve.a.getSelectedLabel);this.store.dispatch(new ke.k(e&&e.id===this.label.id?null:this.label)),this.emitEngineEvent(X.a.HotspotsPicked,{id:this.label.id}),this.emitEngineEvent(X.a.LabelsPicked,{labelId:this.label.id})}},{key:"emitEngineEvent",value:function(e,t){this.emitEvents&&this.engineService.fireEvent(e,t)}},{key:"handleDisplayUpdated",value:function(e){this.emitEngineEvent(X.a.HotspotsDisplayUpdated,e)}},{key:"handlePositionUpdated",value:function(e){this.emitEngineEvent(X.a.HotspotsPositionUpdated,e.positionUpdate),this.emitEngineEvent(X.a.LabelsMoved,{labelId:e.positionUpdate.id,canvasPosition:[e.positionUpdate.canvasPos.x,e.positionUpdate.canvasPos.y],occluded:e.positionUpdate.occluded||!e.onCanvas})}},{key:"handleHoverStart",value:function(e){this.emitEngineEvent(X.a.HotspotsEntered,{id:e.labelId}),this.emitEngineEvent(X.a.LabelsEntered,{labelId:e.labelId})}},{key:"handleHoverEnd",value:function(e){this.emitEngineEvent(X.a.HotspotsLeft,{id:e.labelId}),this.emitEngineEvent(X.a.LabelsLeft,{labelId:e.labelId})}},{key:"handleLabelSelected",value:function(e){var t=this,n=e&&e.id===this.label.id,i=Object(D.get)(e,"states[1].errands"),a=this.store.selectSnapshot(zi.a.getLockCamera);n&&i&&!a&&i.forEach((function(e){switch(e.type){case Hi.a.flyToObject:t.store.dispatch(new ge.j(e.value));break;case Hi.a.flyToCamera:t.store.dispatch(new de.l(e.value))}t.store.dispatch(new de.q(!0))})),this.tagCollapsed=!(this.label.title||this.hasContent)||(this.label.expandTag&&this.label.hideTag?!n:this.label.hideTag),this.descriptionCollapsed=this.label.showDescription&&this.label.collapseDescription?!n:this.label.collapseDescription}}]),e}()).\u0275fac=function(e){return new(e||Pa)(r.Pb(E.h),r.Pb(Kt.a),r.Pb(ae.a),r.Pb(r.i))},Pa.\u0275cmp=r.Jb({type:Pa,selectors:[["app-story-label"]],inputs:{label:"label",emitEvents:"emitEvents",collapsedMode:"collapsedMode",collapsed:"collapsed",pinDraggable:"pinDraggable",tagDraggable:"tagDraggable"},decls:9,vars:18,consts:[[3,"label","selected","fixedScale","sequence","isCollapsed","tagCollapsed","pinDraggable","tagDraggable","descriptionCollapsed","hasContent","labelUpdated","offsetUpdated","tagClicked","pinClicked","keydown.enter","displayUpdated","positionUpdated","hoverStart","hoverEnd"],["label-header","",1,"html",3,"innerHTML"],["title",""],["label-body","",1,"html"],["class","mv-1","appEventFence","",4,"ngIf"],["data-test","labelDescription",3,"innerHTML",4,"ngIf"],["appEventFence","",1,"mv-1"],[3,"contentBlocks","layout"],["data-test","labelDescription",3,"innerHTML"]],template:function(e,t){var n;(1&e&&(r.Vb(0,"app-generic-label",0),r.cc("labelUpdated",(function(e){return t.handleLabelUpdated(e)}))("offsetUpdated",(function(e){return t.handleOffsetUpdated(e)}))("tagClicked",(function(e){return t.handleTagClicked(e)}))("pinClicked",(function(e){return t.handlePinClicked(e)}))("keydown.enter",(function(e){return t.handleTagClicked(e)}))("displayUpdated",(function(e){return t.handleDisplayUpdated(e)}))("positionUpdated",(function(e){return t.handlePositionUpdated(e)}))("hoverStart",(function(e){return t.handleHoverStart(e)}))("hoverEnd",(function(e){return t.handleHoverEnd(e)})),r.hc(1,"async"),r.hc(2,"async"),r.Qb(3,"div",1,2),r.hc(5,"markdown"),r.Vb(6,"div",3),r.Nc(7,wa,2,2,"div",4),r.Nc(8,ja,2,3,"div",5),r.Ub(),r.Ub()),2&e)&&(r.mc("label",t.label)("selected",(null==(n=r.ic(1,12,t.selectedLabel$))?null:n.id)===t.label.id)("fixedScale",r.ic(2,14,t.labelScale$))("sequence",t.sequence)("isCollapsed",t.isCollapsed)("tagCollapsed",t.tagCollapsed)("pinDraggable",t.pinDraggable)("descriptionCollapsed",t.descriptionCollapsed)("hasContent",t.hasContent),r.Db(3),r.mc("innerHTML",r.ic(5,16,t.label.title),r.Dc),r.Db(4),r.mc("ngIf",t.label.contentBlocks),r.Db(1),r.mc("ngIf",t.label.description))},directives:[pa,v.p,qi.a,Sa.a],pipes:[v.b,gi.b],styles:[""],changeDetection:0}),xa([Object(E.e)(ve.a.getLabelScale),Ca("design:type",A.a)],Pa.prototype,"labelScale$",void 0),xa([Object(E.e)(ve.a.getSelectedLabel),Ca("design:type",A.a)],Pa.prototype,"selectedLabel$",void 0),Pa),Ma=a("3Pt+"),Ia=a("mWjH"),Ta=a("EFPM");function Ua(e,t){1&e&&r.Qb(0,"app-icon",8)}function La(e,t){1&e&&r.Qb(0,"app-icon",9)}function za(e,t){if(1&e&&(r.Vb(0,"div",10),r.Vb(1,"em",11),r.Pc(2),r.Ub(),r.Pc(3,". "),r.Ub()),2&e){var n=r.gc(2);r.Db(2),r.Qc(n.option.label.title)}}function Aa(e,t){if(1&e&&(r.Vb(0,"div",10),r.Vb(1,"p",12),r.Pc(2," You selected "),r.Vb(3,"em",11),r.Pc(4),r.Ub(),r.Pc(5,". "),r.Ub(),r.Vb(6,"p"),r.Pc(7," This is the "),r.Vb(8,"em",11),r.Pc(9),r.Ub(),r.Pc(10,". "),r.Ub(),r.Ub()),2&e){var n=r.gc(2),i=null;r.Db(4),r.Qc(null==(i=n.getSelectedLabel(n.options,n.control.value))?null:i.title.trim()),r.Db(5),r.Qc(n.option.label.title.trim())}}function Fa(e,t){if(1&e&&(r.Vb(0,"div",4),r.Nc(1,Ua,1,0,"app-icon",5),r.Nc(2,La,1,0,"app-icon",6),r.Nc(3,za,4,1,"div",7),r.Nc(4,Aa,11,2,"div",7),r.Ub()),2&e){var n=r.gc();r.mc("ngSwitch",n.correct),r.Db(1),r.mc("ngSwitchCase",!0),r.Db(1),r.mc("ngSwitchCase",!1),r.Db(1),r.mc("ngSwitchCase",!0),r.Db(1),r.mc("ngSwitchCase",!1)}}var Da,Ea=((Da=function(e){i(n,e);var t=o(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).sequence=0,e.labelUpdated=new r.p,e}return b(n,[{key:"ngOnInit",value:function(){}},{key:"handleLabelUpdated",value:function(e){this.labelUpdated.next(e.label)}},{key:"handleOffsetUpdated",value:function(e){this.labelUpdated.next(Object.assign(Object.assign({},this.option.label),{offset:e.offset}))}},{key:"getSelectedLabel",value:function(e,t){var n=this.options.find((function(e){return e.value===t}));return n?n.label:void 0}}]),n}(Ia.b)).\u0275fac=function(e){return Na(e||Da)},Da.\u0275cmp=r.Jb({type:Da,selectors:[["app-quiz-label"]],inputs:{sequence:"sequence",collapsed:"collapsed",options:"options",option:"option",correct:"correct",mode:"mode"},outputs:{labelUpdated:"labelUpdated"},features:[r.Cb([{provide:Ma.p,useExisting:Object(r.W)((function(){return Da})),multi:!0}]),r.Ab],decls:4,vars:14,consts:[[1,"label","theme-light",3,"label","fit","opaque","pinDraggable","tagDraggable","isCollapsed","descriptionCollapsed","hasContent","sequence","labelUpdated","offsetUpdated"],["label-body","",1,"label__body"],[3,"outline","hidden","options","formControl"],["class","label__summary flex items-start",3,"ngSwitch",4,"ngIf"],[1,"label__summary","flex","items-start",3,"ngSwitch"],["class","label__icon label__icon--correct","style","font-size: 16px","icon","check-circle",4,"ngSwitchCase"],["class","label__icon label__icon--incorrect","style","font-size: 16px","icon","times-circle",4,"ngSwitchCase"],["class","label__text pl-2",4,"ngSwitchCase"],["icon","check-circle",1,"label__icon","label__icon--correct",2,"font-size","16px"],["icon","times-circle",1,"label__icon","label__icon--incorrect",2,"font-size","16px"],[1,"label__text","pl-2"],[1,"text-semibold"],[1,"pb-2"]],template:function(e,t){1&e&&(r.Vb(0,"app-generic-label",0),r.cc("labelUpdated",(function(e){return t.handleLabelUpdated(e)}))("offsetUpdated",(function(e){return t.handleOffsetUpdated(e)})),r.Vb(1,"div",1),r.Qb(2,"app-quiz-label-anatomy-select",2),r.Nc(3,Fa,5,5,"div",3),r.Ub(),r.Ub()),2&e&&(r.mc("label",t.option.label)("fit","summary"===t.mode?"fixed":"auto")("opaque",!0)("pinDraggable","edit"===t.mode)("tagDraggable","edit"===t.mode)("isCollapsed",t.collapsed)("descriptionCollapsed",!1)("hasContent",!0)("sequence",t.sequence),r.Db(2),r.mc("outline",!1)("hidden","summary"===t.mode)("options",t.options)("formControl",t.control),r.Db(1),r.mc("ngIf","summary"===t.mode))},directives:[pa,Ta.a,Ma.r,Ma.h,v.p,v.r,v.s,li.a],styles:[".label__body[_ngcontent-%COMP%]{color:#101823;min-width:142px;max-width:200px}.label__icon[_ngcontent-%COMP%]{position:relative;flex-basis:0 0 20px;justify-content:center}.label__icon--correct[_ngcontent-%COMP%]{color:#83e692}.label__icon--incorrect[_ngcontent-%COMP%]{color:#f44336}.label__text[_ngcontent-%COMP%]{flex-wrap:wrap}"],changeDetection:0}),Da),Na=r.Xb(Ea),Ra=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},Va=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function Ba(e,t){if(1&e){var n=r.Wb();r.Tb(0),r.Vb(1,"app-quiz-label",3),r.cc("labelUpdated",(function(e){r.Cc(n);var i=t.index;return r.gc().handleLabelUpdated(e,i)})),r.hc(2,"async"),r.hc(3,"async"),r.hc(4,"async"),r.hc(5,"async"),r.hc(6,"async"),r.Ub(),r.Sb()}if(2&e){var i=t.$implicit,a=t.index,o=r.gc();r.Db(1),r.mc("mode",o.mode)("formControl",i)("option",r.ic(2,7,o.quizLabels$)[a])("options",r.ic(3,9,o.quizLabels$))("sequence",a+1)("correct",o.isCorrect(r.ic(4,11,o.quizLabels$)[a],r.ic(5,13,o.activeSubmitted$),a))("collapsed",r.ic(6,15,o.labelsCollapsed$))}}var Ha,Qa=((Ha=function(){function e(t,n,i,a){h(this,e),this.store=t,this.formBuilder=n,this.changeRef=i,this.router=a,this.ngUnsubscribe=new y.a,this.mode="edit",this.form=this.formBuilder.group({options:this.formBuilder.array([])}),this.optionsArray=this.form.get("options")}return b(e,[{key:"ngOnInit",value:function(){this.initFormListeners(),this.initQuizSubmissionListeners()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initFormListeners",value:function(){var e=this;this.quizLabels$.pipe(Object(Jn.a)((function(e,t){var n=e.map((function(e){return e.value})),i=t.map((function(e){return e.value}));return Object(D.isEqual)(n,i)})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=e.store.selectSnapshot(an.b.getQuizModeActive);e.buildFormOptions(t,n),e.changeRef.markForCheck()})),Object(Zn.b)([this.quizModeActive$,this.quizLabels$]).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=p(t,1)[0];e.setFormEnabled(n),e.changeRef.markForCheck()}))}},{key:"initQuizSubmissionListeners",value:function(){var e=this;this.activeSubmission$.pipe(Object(M.a)((function(e){return!Object(D.isNil)(e)&&!Object(D.isNil)(e.answer)&&Array.isArray(e.answer)})),Object(Jn.a)((function(e,t){return Object(D.isEqual)(e,t)})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=e.form.value.options,i=t.answer;Object(D.isEqual)(n,i)||(e.form.patchValue({options:i},{emitEvent:!1,onlySelf:!0}),e.changeRef.markForCheck())})),this.form.valueChanges.pipe(Object(Jn.a)((function(e,t){return Object(D.isEqual)(e,t)})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=e.store.selectSnapshot(an.b.getActiveQuestionId),i=e.store.selectSnapshot(an.b.getActiveSubmitted),a=e.store.selectSnapshot(an.b.getActiveSubmission),o=Object(D.isNil)(a)?[]:a.answer,r=t.options;Object(D.isNil)(i)&&(Object(D.isEqual)(r,o)||e.store.dispatch(new at.a.SetActiveSubmission({questionId:n,answer:r})),e.changeRef.markForCheck())})),Object(Zn.b)([this.quizModeActive$,this.activeSubmitted$]).subscribe((function(t){var n=p(t,2),i=n[0],a=n[1],o=e.router.url.includes("/edit");e.mode=o?"edit":i&&!Object(D.isNil)(a)?"summary":"view",e.changeRef.markForCheck()}))}},{key:"isCorrect",value:function(e,t,n){if(!Object(D.isNil)(t))return t.answer[n]===e.value}},{key:"handleLabelUpdated",value:function(e,t){var n=this.store.selectSnapshot(an.b.getActiveQuestion);n.data.options[t].label=e,this.store.dispatch(new at.a.SetQuestion(n))}},{key:"buildFormOptions",value:function(e,t){var n=this;this.optionsArray.clear(),e.forEach((function(e){n.optionsArray.push(n.formBuilder.control(t?"":e.value))}))}},{key:"setFormEnabled",value:function(e){e?this.optionsArray.enable():this.optionsArray.disable()}}]),e}()).\u0275fac=function(e){return new(e||Ha)(r.Pb(E.h),r.Pb(Ma.f),r.Pb(r.i),r.Pb(g.e))},Ha.\u0275cmp=r.Jb({type:Ha,selectors:[["app-quiz-labels"]],decls:3,vars:2,consts:[["data-test","quizLabelsElement",3,"formGroup"],["formArrayName","options"],[4,"ngFor","ngForOf"],["data-test","appQuizLabel",3,"mode","formControl","option","options","sequence","correct","collapsed","labelUpdated"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Nc(2,Ba,7,17,"ng-container",2),r.Ub(),r.Ub()),2&e&&(r.mc("formGroup",t.form),r.Db(2),r.mc("ngForOf",t.optionsArray.controls))},directives:[Ma.s,Ma.j,Ma.e,v.o,Ea,Ma.r,Ma.h],pipes:[v.b],styles:[""],changeDetection:0}),Ra([Object(E.e)(ve.a.getLabelsCollapsed),Va("design:type",A.a)],Ha.prototype,"labelsCollapsed$",void 0),Ra([Object(E.e)(an.b.getActiveQuestionLabels),Va("design:type",A.a)],Ha.prototype,"quizLabels$",void 0),Ra([Object(E.e)(an.b.getQuizModeActive),Va("design:type",A.a)],Ha.prototype,"quizModeActive$",void 0),Ra([Object(E.e)(an.b.getAllSubmissions),Va("design:type",A.a)],Ha.prototype,"allSubmissions$",void 0),Ra([Object(E.e)(an.b.getActiveSubmission),Va("design:type",A.a)],Ha.prototype,"activeSubmission$",void 0),Ra([Object(E.e)(an.b.getActiveSubmitted),Va("design:type",A.a)],Ha.prototype,"activeSubmitted$",void 0),Ha),Ga=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},Wa=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function qa(e,t){if(1&e&&(r.Qb(0,"app-context-label",5),r.hc(1,"async"),r.hc(2,"async"),r.hc(3,"async"),r.hc(4,"async"),r.hc(5,"async")),2&e){var n=r.gc(3),i=null,a=null;r.mc("label",r.ic(1,3,n.contextLabel$))("enableInfo",r.ic(2,5,n.enableContextLabelInfo$)&&(null==(i=r.ic(3,7,n.layout$))?null:i.nodeInfo.enable))("enableActions",r.ic(4,9,n.enableContextLabelActions$)&&(null==(a=r.ic(5,11,n.layout$))?null:a.contextActions.enable))}}function Xa(e,t){if(1&e&&(r.Tb(0),r.Qb(1,"app-story-label",6),r.hc(2,"async"),r.hc(3,"async"),r.hc(4,"async"),r.hc(5,"async"),r.Sb()),2&e){var n,i,a=t.$implicit,o=r.gc(3);r.Db(1),r.Hb("labels__label--hidden",!a.shown),r.mc("pinDraggable",null==(n=r.ic(2,7,o.draggable$))?null:n.pin)("tagDraggable",null==(i=r.ic(3,9,o.draggable$))?null:i.tag)("label",a)("collapsed",r.ic(4,11,o.labelsCollapsed$))("collapsedMode",r.ic(5,13,o.labelsCollapsedMode$))}}function Za(e,t){if(1&e&&(r.Tb(0),r.Nc(1,qa,6,13,"app-context-label",3),r.hc(2,"async"),r.hc(3,"async"),r.Nc(4,Xa,6,15,"ng-container",4),r.hc(5,"async"),r.Sb()),2&e){var n=r.gc(2);r.Db(1),r.mc("ngIf",r.ic(2,3,n.enableContextLabel$)&&r.ic(3,5,n.contextLabel$)),r.Db(3),r.mc("ngForOf",r.ic(5,7,n.labels$))("ngForTrackBy",n.trackLabel)}}function Ja(e,t){1&e&&(r.Tb(0),r.Qb(1,"app-quiz-labels"),r.Sb())}function Ka(e,t){if(1&e&&(r.Vb(0,"div",1),r.Nc(1,Za,6,9,"ng-container",2),r.Nc(2,Ja,2,0,"ng-container",2),r.Ub()),2&e){var n=r.gc();r.Db(1),r.mc("ngIf",n.showAnatomyLabels),r.Db(1),r.mc("ngIf",n.showQuizLabels)}}var $a,Ya=(($a=function(){function e(t,n,i,a,o,r,s,c){h(this,e),this.store=t,this.action$=n,this.router=i,this.engineService=a,this.cameraService=o,this.changeDetector=r,this.labelsService=s,this.elRef=c,this.interactive=!1,this.showAnatomyLabels=!1,this.showQuizLabels=!1,this.ngUnsubscribe=new y.a}return b(e,[{key:"ngOnInit",value:function(){this.bindEngineEvents(),this.bindApplicationEvents(),this.labelsService.setLabelContainer(this.elRef)}},{key:"ngOnDestroy",value:function(){this.labelsService.setLabelContainer(null),this.changeDetector.detach(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"bindApplicationEvents",value:function(){var e=this;this.action$.pipe(Object(E.l)(ge.d),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.handleClickNode(t)})),this.labels$.pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.changeDetector.markForCheck()})),this.selectedLabel$.pipe(Object(M.a)((function(e){return null==e})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){var t=e.store.selectSnapshot(zi.a.getZoomed),n=e.store.selectSnapshot(zi.a.getLockCamera);t&&!n&&e.resetCamera()}));var t=Object(Zn.b)([this.activeTool$,this.activeQuestion$]).pipe(Object(m.a)(this.ngUnsubscribe),Object(T.a)((function(t){var n=p(t,2),i=n[0],a=n[1],o=e.router.url.indexOf("/edit")>=0,r=Object(D.get)(a,"type")===nn.a.LabelAnatomy;return o?i===we.a.Quiz:r})));Object(Zn.b)([this.showLabels$,t,this.activeQuestion$]).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=p(t,3),i=n[0],a=n[1],o=n[2],r=Object(D.get)(o,"showChapterLabels");e.showQuizLabels=a,e.showAnatomyLabels=!e.showQuizLabels&&i||r,e.changeDetector.markForCheck()})),this.store.select(Se.a.getSelectedChapterReadyState).pipe(Object(M.a)((function(e){return null!=e})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.interactive=t.model,e.changeDetector.markForCheck()}))}},{key:"bindEngineEvents",value:function(){var e=this;this.action$.pipe(Object(E.l)(ge.Y,ke.l),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.engineService.fireEvent(t.show?X.a.LabelsEnabled:X.a.LabelsDisabled,null)})),this.action$.pipe(Object(E.l)(ke.b),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.engineService.fireEvent(X.a.LabelsCreated,t.label)})),this.action$.pipe(Object(E.l)(ke.m),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.engineService.fireEvent(X.a.LabelsUpdated,t.label)})),this.action$.pipe(Object(E.l)(ke.t),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){t.labels.forEach((function(n){e.engineService.fireEvent(t.shown?X.a.LabelsShown:X.a.LabelsHidden,{labelId:n.id})}))})),this.action$.pipe(Object(E.l)(ke.i),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.engineService.fireEvent(X.a.LabelsDestroyed,t.label)}))}},{key:"handleClickNode",value:function(e){var t=this,n=this.store.selectSnapshot(oe.a.getActiveTool);null!=e.node?n===we.a.Label?this.addLabel(e.hit,e.node):setTimeout((function(){t.toggleContextLabel(e.hit,e.node)})):(this.store.dispatch(new ke.k(null)),this.store.dispatch(new ke.h))}},{key:"addLabel",value:function(e,t){var n=this.cameraService.getDirection(e),i=this.getLabelDefaults(e.objectId),a=i.hideWire?20:32;i.title=t.label,i.offset=[a,0],i.objectId=e.objectId,i.barycentric=[e.barycentric[0],e.barycentric[1],e.barycentric[2]],i.pos=[e.worldPos[0],e.worldPos[1],e.worldPos[2]],i.primitiveIndex=e.primitiveIndex,i.renderableIndex=e.renderableIndex||0,i.dir=n,i.chapterId=this.store.selectSnapshot(Se.a.getSelectedChapter).id,i.occludable=!0,i.shown=!0,this.store.dispatch(new ke.b(i)),this.store.dispatch(new ke.k(i))}},{key:"toggleContextLabel",value:function(e,t){if(this.store.selectSnapshot(Ue.a.getCheckedNodeIds).some((function(e){return e===t.id}))){var n=this.cameraService.getDirection(e),i=this.labelsService.makeDefaultStudioLabel();i.theme=lt.a.Context,i.title=t.label,i.offset=[32,0],i.objectId=e.objectId,i.barycentric=[e.barycentric[0],e.barycentric[1],e.barycentric[2]],i.pos=[e.worldPos[0],e.worldPos[1],e.worldPos[2]],i.primitiveIndex=e.primitiveIndex,i.dir=n,i.occludable=!1,this.store.dispatch(new ke.a(i))}else this.store.dispatch(new ke.h)}},{key:"getLabelDefaults",value:function(e){var t=this.store.selectSnapshot(ve.a.getSelectedLabel);if(null==t){var n=this.store.selectSnapshot(ve.a.getChapterLabels);n&&0!==n.length||(n=this.store.selectSnapshot(ve.a.getLabels)),n.length&&(t=Object(D.cloneDeep)(n[n.length-1]))}if(null!=t){var i=this.labelsService.makeDefaultStudioLabel();switch(i.hideWire=t.hideWire,i.pinGlow=t.pinGlow,i.pinType=t.pinType,i.theme=t.theme,i.sequentialType=t.sequentialType,i.states[0].errands[0]=new Et.a,Object(D.get)(t,"states[1].errands[0].type")){case Hi.a.flyToObject:case Hi.a.flyToCamera:i.states[1].errands[0]=new Dt.a(e)}return i}var a=this.labelsService.makeDefaultStudioLabel();return a.states[0].errands[0]=new Et.a,a.states[1].errands[0]=new Dt.a(e),a}},{key:"trackLabel",value:function(e,t){var n=t.id,i=t.shown,a=t.theme;return"".concat(n).concat(i).concat(a)}},{key:"resetCamera",value:function(){var e=this.store.selectSnapshot(Se.a.getSelectedChapter);Object(D.get)(e,"camera.location")&&this.store.dispatch(new de.l(e.camera.location))}}]),e}()).\u0275fac=function(e){return new(e||$a)(r.Pb(E.h),r.Pb(E.b),r.Pb(g.e),r.Pb(ae.a),r.Pb(ie.a),r.Pb(r.i),r.Pb(Kt.a),r.Pb(r.m))},$a.\u0275cmp=r.Jb({type:$a,selectors:[["app-labels"]],decls:1,vars:1,consts:[["class","labels","data-test","labelsElement",4,"ngIf"],["data-test","labelsElement",1,"labels"],[4,"ngIf"],[3,"label","enableInfo","enableActions",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"label","enableInfo","enableActions"],["data-test","appStoryLabel",1,"labels__label",3,"pinDraggable","tagDraggable","label","collapsed","collapsedMode"]],template:function(e,t){1&e&&r.Nc(0,Ka,3,2,"div",0),2&e&&r.mc("ngIf",t.interactive)},directives:[v.p,v.o,ka,_a,Qa],pipes:[v.b],styles:["[_nghost-%COMP%]{position:relative}.labels[_ngcontent-%COMP%], [_nghost-%COMP%]{width:100%;height:100%;display:block}.labels[_ngcontent-%COMP%]{position:absolute;left:0;top:0;z-index:2;pointer-events:none}.labels__label--hidden[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),Ga([Object(E.e)(je.a.getUI),Wa("design:type",A.a)],$a.prototype,"layout$",void 0),Ga([Object(E.e)(ve.a.getChapterLabels),Wa("design:type",A.a)],$a.prototype,"labels$",void 0),Ga([Object(E.e)(an.b.getQuizModeActive),Wa("design:type",A.a)],$a.prototype,"quizModeActive$",void 0),Ga([Object(E.e)(oe.a.getActiveTool),Wa("design:type",A.a)],$a.prototype,"activeTool$",void 0),Ga([Object(E.e)(an.b.getActiveQuestion),Wa("design:type",A.a)],$a.prototype,"activeQuestion$",void 0),Ga([Object(E.e)(Se.a.getSelectedChapter),Wa("design:type",A.a)],$a.prototype,"selectedChapter$",void 0),Ga([Object(E.e)(ve.a.getSelectedLabel),Wa("design:type",A.a)],$a.prototype,"selectedLabel$",void 0),Ga([Object(E.e)(ve.a.getLabelsCollapsed),Wa("design:type",A.a)],$a.prototype,"labelsCollapsed$",void 0),Ga([Object(E.e)(ve.a.getLabelsCollapsedMode),Wa("design:type",A.a)],$a.prototype,"labelsCollapsedMode$",void 0),Ga([Object(E.e)(ve.a.getContextLabel),Wa("design:type",A.a)],$a.prototype,"contextLabel$",void 0),Ga([Object(E.e)(oe.a.getShowLabels),Wa("design:type",A.a)],$a.prototype,"showLabels$",void 0),Ga([Object(E.e)(zi.a.getZoomed),Wa("design:type",A.a)],$a.prototype,"zoomed$",void 0),Ga([Object(E.e)(ve.a.getEnableContextLabel),Wa("design:type",A.a)],$a.prototype,"enableContextLabel$",void 0),Ga([Object(E.e)(ve.a.getEnableContextLabelInfo),Wa("design:type",A.a)],$a.prototype,"enableContextLabelInfo$",void 0),Ga([Object(E.e)(ve.a.getEnableContextLabelActions),Wa("design:type",A.a)],$a.prototype,"enableContextLabelActions$",void 0),Ga([Object(E.e)(ve.a.getLabelsDraggable),Wa("design:type",A.a)],$a.prototype,"draggable$",void 0),$a);function eo(e,t){if(1&e){var n=r.Wb();r.Vb(0,"div",1),r.cc("@show.done",(function(){return r.Cc(n),r.gc().onShowDone()})),r.Vb(1,"div",2),r.Pc(2,"Use control + scroll to zoom"),r.Ub(),r.Ub()}2&e&&r.mc("@show",void 0)}var to,no,io,ao,oo,ro=((to=function(){function e(t,n){h(this,e),this.actions=t,this.changeDetectorRef=n,this.ngUnsubscribe=new y.a,this.show=!1}return b(e,[{key:"ngOnInit",value:function(){var e=this;this.actions.pipe(Object(E.l)(ge.S),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.show=!0,e.changeDetectorRef.markForCheck()}))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"onShowDone",value:function(){this.show=!1}}]),e}()).\u0275fac=function(e){return new(e||to)(r.Pb(E.b),r.Pb(r.i))},to.\u0275cmp=r.Jb({type:to,selectors:[["app-engine-scroll"]],decls:1,vars:1,consts:[["class","engine-scroll","data-test","engineScroll",4,"ngIf"],["data-test","engineScroll",1,"engine-scroll"],[1,"engine-scroll__label"]],template:function(e,t){1&e&&r.Nc(0,eo,3,1,"div",0),2&e&&r.mc("ngIf",t.show)},directives:[v.p],styles:[".text-8[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.2px;line-height:1.4em}.text-8.text-uppercase[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.48px;line-height:1.25em;text-transform:uppercase}.text-9[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.225px;line-height:1.4em}.text-9.text-uppercase[_ngcontent-%COMP%]{font-size:9px;letter-spacing:.54px;line-height:1.25em;text-transform:uppercase}.text-10[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.25px;line-height:1.4em}.text-10.text-uppercase[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.6px;line-height:1.25em;text-transform:uppercase}.text-11[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.275px;line-height:1.4em}.text-11.text-uppercase[_ngcontent-%COMP%]{font-size:11px;letter-spacing:.66px;line-height:1.25em;text-transform:uppercase}.text-12[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.3px;line-height:1.4em}.text-12.text-uppercase[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.72px;line-height:1.25em;text-transform:uppercase}.text-13[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.325px;line-height:1.4em}.text-13.text-uppercase[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.78px;line-height:1.25em;text-transform:uppercase}.text-14[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.35px;line-height:1.4em}.text-14.text-uppercase[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.84px;line-height:1.25em;text-transform:uppercase}.text-16[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.4px;line-height:1.4em}.text-16.text-uppercase[_ngcontent-%COMP%]{font-size:16px;letter-spacing:.96px;line-height:1.25em;text-transform:uppercase}.text-18[_ngcontent-%COMP%]{font-size:18px;letter-spacing:.45px;line-height:1.4em}.text-18.text-uppercase[_ngcontent-%COMP%]{font-size:18px;letter-spacing:1.08px;line-height:1.25em;text-transform:uppercase}.text-20[_ngcontent-%COMP%]{font-size:20px;letter-spacing:.5px;line-height:1.4em}.text-20.text-uppercase[_ngcontent-%COMP%]{font-size:20px;letter-spacing:1.2px;line-height:1.25em;text-transform:uppercase}.text-22[_ngcontent-%COMP%]{font-size:22px;letter-spacing:.55px;line-height:1.4em}.text-22.text-uppercase[_ngcontent-%COMP%]{font-size:22px;letter-spacing:1.32px;line-height:1.25em;text-transform:uppercase}.text-24[_ngcontent-%COMP%]{font-size:24px;letter-spacing:.6px;line-height:1.4em}.text-24.text-uppercase[_ngcontent-%COMP%]{font-size:24px;letter-spacing:1.44px;line-height:1.25em;text-transform:uppercase}.text-28[_ngcontent-%COMP%]{font-size:28px;letter-spacing:.7px;line-height:1.4em}.text-28.text-uppercase[_ngcontent-%COMP%]{font-size:28px;letter-spacing:1.68px;line-height:1.25em;text-transform:uppercase}.text-header[_ngcontent-%COMP%]{font-weight:700}.text--code[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace}.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.text-xlight[_ngcontent-%COMP%]{font-weight:200}.text-light[_ngcontent-%COMP%]{font-weight:300}.text-medium[_ngcontent-%COMP%]{font-weight:500}.text-semibold[_ngcontent-%COMP%]{font-weight:600}.text-bold[_ngcontent-%COMP%]{font-weight:700}.text-underline[_ngcontent-%COMP%]{text-decoration:underline}.text-italic[_ngcontent-%COMP%]{font-style:italic}.text-bright[_ngcontent-%COMP%]{color:#fff}.text-dim[_ngcontent-%COMP%]{color:#96a8c0}.text-error[_ngcontent-%COMP%]{color:#ed4758}.text-left[_ngcontent-%COMP%]{text-align:left}.text-center[_ngcontent-%COMP%]{text-align:center}.text-right[_ngcontent-%COMP%]{text-align:right}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.text-link[_ngcontent-%COMP%], .text-link[_ngcontent-%COMP%]:visited{color:inherit;cursor:pointer}.text-link[_ngcontent-%COMP%]:not(.text-underline), .text-link[_ngcontent-%COMP%]:visited:not(.text-underline){text-decoration:none}.text-success[_ngcontent-%COMP%]{color:#38de38}.text-danger[_ngcontent-%COMP%]{color:#de3535}.text-info[_ngcontent-%COMP%]{color:#2d72dc}.text-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.text-pre-line[_ngcontent-%COMP%]{white-space:pre-line}.engine-scroll[_ngcontent-%COMP%]{display:flex;position:absolute;justify-content:center;align-items:center;top:0;bottom:0;left:0;right:0;z-index:10000;opacity:0;pointer-events:none}.engine-scroll__label[_ngcontent-%COMP%]{background:rgba(16,24,35,.5);font-size:16px;letter-spacing:.4px;line-height:1.4em;color:#fff;font-weight:600;padding:24px 32px;border-radius:40px}"],data:{animation:[Object(qn.n)("show",[Object(qn.m)(":enter",[Object(qn.j)([Object(qn.l)({opacity:"*"}),Object(qn.e)("500ms ease-in-out",Object(qn.l)({opacity:1})),Object(qn.e)("500ms 2000ms ease-in-out",Object(qn.l)({opacity:0}))])])])]},changeDetection:0}),to),so=function(e,t){return{backgroundColor:e,duration:t}},co=function(e,t){return{value:e,params:t}},uo=Object(qn.g)([Object(qn.l)({opacity:"0",backgroundColor:"*"}),Object(qn.j)([Object(qn.e)("{{ duration }}ms {{ easing }}",Object(qn.l)({opacity:1,backgroundColor:"{{ backgroundColor }}"})),Object(qn.e)("250ms 500ms ease-in",Object(qn.l)({opacity:0}))])],{params:{duration:2e3,backgroundColor:"#ffffff",easing:"ease-out"}}),lo=((io=function(){function e(t,n,i){h(this,e),this.actions=t,this.changeDetectorRef=n,this.store=i,this.color="#FFFFFF",this.duration=2e3,this.isVisible=!1,this.ngUnsubscribe=new y.a}return b(e,[{key:"ngOnInit",value:function(){this.initFadeListener()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initFadeListener",value:function(){var e=this;this.actions.pipe(Object(E.l)(ge.h),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.fadeIn(t.color,t.duration)}))}},{key:"handleFadeComplete",value:function(){this.store.dispatch(new ge.i),this.isVisible=!1,this.changeDetectorRef.markForCheck()}},{key:"fadeIn",value:function(e,t){this.isVisible=!0,this.color=e,this.duration=1e3*t,this.changeDetectorRef.markForCheck()}}]),e}()).\u0275fac=function(e){return new(e||io)(r.Pb(E.b),r.Pb(r.i),r.Pb(E.h))},io.\u0275cmp=r.Jb({type:io,selectors:[["app-engine-fade"]],decls:1,vars:7,consts:[[1,"engine-fade"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.cc("@fade.done",(function(){return t.handleFadeComplete()})),r.Ub()),2&e&&r.mc("@fade",r.qc(4,co,t.isVisible,r.qc(1,so,t.color,t.duration)))},styles:[".engine-fade{pointer-events:none;display:block;position:absolute;left:0;right:0;top:0;bottom:0;z-index:10000}"],encapsulation:2,data:{animation:[Object(qn.n)("fade",[Object(qn.m)("* => true",Object(qn.o)(uo))])]},changeDetection:0}),io),po=((no=function(){function e(t){h(this,e),this.store=t}return b(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.nodeActionsComponent.nodeActionsTrigger.openMenu()}},{key:"onNodeActionsClosed",value:function(){this.store.dispatch(new ge.z(null,null))}},{key:"getNodeActionsStyles",value:function(){return{"left.px":this.hit?this.hit.canvasPos[0]:0,"top.px":this.hit?this.hit.canvasPos[1]:0}}}]),e}()).\u0275fac=function(e){return new(e||no)(r.Pb(E.h))},no.\u0275cmp=r.Jb({type:no,selectors:[["app-engine-contextmenu"]],viewQuery:function(e,t){var n;1&e&&r.Jc(da.a,!0),2&e&&r.xc(n=r.dc())&&(t.nodeActionsComponent=n.first)},inputs:{node:"node",hit:"hit"},decls:2,vars:2,consts:[[1,"contextmenu"],["eventCategory","Context Node","theme","light",1,"contextmenu__node-actions",3,"ngStyle","node","nodeActionsClosed"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Vb(1,"app-node-actions",1),r.cc("nodeActionsClosed",(function(){return t.onNodeActionsClosed()})),r.Ub(),r.Ub()),2&e&&(r.Db(1),r.mc("ngStyle",t.getNodeActionsStyles())("node",t.node))},directives:[da.a,v.q],styles:[".contextmenu[_ngcontent-%COMP%]{left:0;top:0;width:100%;height:100%;display:block;z-index:2}.contextmenu[_ngcontent-%COMP%], .contextmenu__node-actions[_ngcontent-%COMP%]{position:absolute}"]}),no),go=a("k93M"),ho=a("Jk2I"),fo=((oo=function(){function e(t,n){h(this,e),this.store=t,this.changeDetectorRef=n,this.ngUnsubscribe=new y.a,this.storyLoadProgress=0}return b(e,[{key:"ngOnInit",value:function(){var e=this,t=this.store.select(go.a.getChunkLoadProgress),n=this.store.select(ye.a.getLoadingChunk);Object(Zn.b)(t,n).pipe(Object(M.a)((function(){var t=e.store.selectSnapshot(ye.a.getLoadChunks);return null!==t&&t.length>0})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=p(t,2),i=n[0],a=n[1],o=null!==a&&a.chapterId===e.store.selectSnapshot(Se.a.getSelectedChapterId);e.storyLoadProgress=o?i:1,e.changeDetectorRef.markForCheck()}))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}]),e}()).\u0275fac=function(e){return new(e||oo)(r.Pb(E.h),r.Pb(r.i))},oo.\u0275cmp=r.Jb({type:oo,selectors:[["app-engine-progress"]],decls:1,vars:2,consts:[["data-test","engineProgress",1,"engine-progress",3,"value","total"]],template:function(e,t){1&e&&r.Qb(0,"app-progress",0),2&e&&r.mc("value",t.storyLoadProgress)("total",1)},directives:[ho.a],styles:[".engine-progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;z-index:2;pointer-events:none}"],changeDetection:0}),oo),bo=((ao=function(){function e(t,n){h(this,e),this.engineService=t,this.changeDetectionRef=n,this.camera={x:0,y:0,z:0,zoom:0,dist:0}}return b(e,[{key:"ngOnInit",value:function(){this.initCameraListener()}},{key:"initCameraListener",value:function(){var e=this;this.engineService.getEvent(X.a.CameraUpdated).pipe(Object(Ti.a)(50)).subscribe((function(t){e.camera={x:t.eye.x.toFixed(0),y:t.eye.y.toFixed(0),z:t.eye.z.toFixed(0),zoom:Math.floor(100*Human.renderer.camera.getZoom()),dist:t.dist.toFixed(0)},e.changeDetectionRef.markForCheck()}))}}]),e}()).\u0275fac=function(e){return new(e||ao)(r.Pb(ae.a),r.Pb(r.i))},ao.\u0275cmp=r.Jb({type:ao,selectors:[["app-engine-camera-position"]],decls:2,vars:5,consts:[[1,"engine-camera-position"]],template:function(e,t){1&e&&(r.Vb(0,"div",0),r.Pc(1),r.Ub()),2&e&&(r.Db(1),r.Uc(" X:",null==t.camera?null:t.camera.x," Y:",null==t.camera?null:t.camera.y," Z:",null==t.camera?null:t.camera.z," Dist:",null==t.camera?null:t.camera.dist," Zoom:",null==t.camera?null:t.camera.zoom,"\n"))},styles:[".engine-camera-position[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;color:#fff;font-size:10px;text-shadow:0 0 2px rgba(0,0,0,.8);z-index:10}"],changeDetection:0}),ao),mo=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},yo=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},vo=["engine"],ko=["engineCanvas"],Oo=["engineAnnotations"];function So(e,t){1&e&&r.Qb(0,"div",11)}function xo(e,t){if(1&e&&r.Qb(0,"app-engine-contextmenu",12),2&e){var n=r.gc();r.mc("node",n.contextmenuNode)("hit",n.contextmenuHit)}}function Co(e,t){1&e&&r.Qb(0,"div",13)}function wo(e,t){1&e&&r.Qb(0,"app-engine-progress",14)}function jo(e,t){1&e&&(r.Tb(0),r.Qb(1,"app-engine-camera-position"),r.Sb())}var Po,_o,Mo,Io,To,Uo,Lo,zo,Ao,Fo,Do,Eo,No,Ro,Vo=function(e){return e[e.Pan=.4]="Pan",e[e.PanSlow=.04]="PanSlow",e[e.Zoom=5]="Zoom",e[e.ZoomSlow=1]="ZoomSlow",e[e.Rotate=.3]="Rotate",e[e.RotateSlow=.03]="RotateSlow",e}({}),Bo=function(e){return e[e.Rotate=6]="Rotate",e[e.Pan=1.75]="Pan",e[e.Zoom=2.5]="Zoom",e}({}),Ho=function(e){return e[e.Zoom=-6]="Zoom",e[e.TrackZoom=.5]="TrackZoom",e[e.Pan=1.25]="Pan",e[e.Rotate=1.5]="Rotate",e[e.Friction=.85]="Friction",e[e.ZoomFriction=.85]="ZoomFriction",e[e.FrictionThreshold=.002]="FrictionThreshold",e}({}),Qo=function(e){return e.Hide="engine--cursor-hide",e.Label="engine--cursor-label",e.Paint="engine--cursor-paint",e.Eyedropper="engine--cursor-eyedropper",e.Crosshair="engine--cursor-crosshair",e.Default="",e}({}),Go=function(e){return e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.LeftAndRight=4]="LeftAndRight",e}({}),Wo=((Po=function(){function e(t,n,i,o,r,c,u,l,p,d,g,f){h(this,e),this.actions=t,this.cameraService=n,this.chapterService=i,this.changeDetecton=o,this.engineService=r,this.paintService=c,this.visibilityLayersService=u,this.mediaService=l,this.storageService=p,this.renderer=d,this.store=g,this.matDialog=f,this.flyCamera=!0,this.chapterActivating=!1,this.visible=!1,this.application=j.a,this.cursorClass=Qo.Default,this.showDebug=s.a.application===j.a.Loft||this.storageService.getLocalItem(F.b.CameraDebug),this.ngUnsubscribe=new y.a,this.display=!1,this.engineVisible=!0,this.background=new rt.a(null),this.ctrlPressed=!1,this.scrollType=null,this.scrollTimeout=null,this.pinchTicks=0,this.progress="0",this.deltaTime=window.performance.now(),this.pinchMode="",this.cameraAnimating=!1,this.inputEnabled=!0,s.a.application===j.a.Loft&&a.e(13).then(a.t.bind(null,"16wW",7)).then((function(e){window.pako=e}))}return b(e,[{key:"wheel",value:function(e){var t=this.store.selectSnapshot(oe.a.getScrollMode),n=e.ctrlKey;t!==Fi.a.DoNotCaptureShowMessage||n||this.store.dispatch(new ge.S(!0)),(t===Fi.a.Capture||n)&&(e.preventDefault(),this.handleWheel(e))}},{key:"contextmenu",value:function(e){this.handleContextMenu(e)}},{key:"mouseout",value:function(){this.handleMouseOut()}},{key:"convertToLeafStateMap",value:function(e,t){var n={};return Object.entries(t).forEach((function(t){var i=p(t,2),a=i[0],o=i[1];n[a]={},n[a][e]=o})),n}},{key:"ngOnInit",value:function(){this.particleStateListener=new Ri(this.store),this.bindEngineEvents(),this.bindApplicationEvents(),this.bindChapterChangeEvents(),this.bindCameraEvents(),this.bindToolEvents(),this.bindMouseEvents(),this.bindKeyEvents(),this.bindHumanInteractions(),this.initChangeListener(),this.initChapterAudio(),this.initBackgroundListener(),this.initPlaybackSpeedListener(),Human.properties.set({assetDomain:s.a.assetDomain}),Human.init.init()}},{key:"ngOnDestroy",value:function(){this.changeDetecton.detach(),this.particleStateListener.destroy(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"bindEngineEvents",value:function(){var e=this;this.engineService.getEvent(X.a.Loaded).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.store.dispatch(new ge.M(!0))})),this.engineService.getEvent(X.a.TimelineChaptersActivateStart).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.chapterActivating=!0})),this.engineService.getEvent(X.a.TimelineChaptersActivateFinish).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.chapterActivating=!1;var n=Human.timeline.activeRoot._nowBranch,i={id:n.id,init:!0,camera:n.initializedCamera,annotations:n.initializedAnnotations,graph:n.initializedGraph,properties:n.initializedProperties,particles:n.initializedParticles,clips:n.initializedClippingPlanes,postprocessing:n.initializedPostprocess,transparency:n.initializedTransparencyMode};e.store.dispatch(new ge.B(t.chapterId)),e.store.dispatch(new ge.C(i))})),this.engineService.getEvent(X.a.TimelineChaptersActivated).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.engineService.fireEvent(X.a.LabelsChapterInfo,e.store.selectSnapshot(ve.a.getChapterLabels))})),Object(Xn.a)(this.engineService.getEvent(X.a.TimelinePlayed),this.engineService.getEvent(X.a.TimelinePaused)).pipe(Object(m.a)(this.ngUnsubscribe),Object(M.a)((function(){return null!=e.store.selectSnapshot(Se.a.getSelectedChapterId)})),Object(L.a)(50),Object(T.a)((function(){return Human.timeline.playing}))).subscribe((function(t){e.store.dispatch(new ge.x(t))})),this.engineService.getEvent(X.a.Tick).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.visible&&(e.inputEnabled&&e.handleMouseInputEngineTick(),e.handleCameraTick(),e.deltaTime=window.performance.now())})),this.engineService.getEvent(X.a.TweenVisibilityUpdate).pipe(Object(Jn.a)((function(e,t){return JSON.stringify(e)===JSON.stringify(t)})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=Object.keys(t).filter((function(e){return!0===t[e]})),i=Object.keys(t).filter((function(e){return!1===t[e]}));n.length>0&&e.store.dispatch(new Te.a.UpdateNodesShown(!0,n,void 0,!1,!0)),i.length>0&&e.store.dispatch(new Te.a.UpdateNodesShown(!1,i,void 0,!1,!0))})),this.engineService.getEvent(X.a.SceneObjectRenderable).pipe(Object(Ii.a)(1e3),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){if(t.length){var n={};t.forEach((function(e){n[e.objectId]={renderable:!0}})),e.store.dispatch(new ge.U(n))}})),this.engineService.getEvent(X.a.AssetsLoadProgress).pipe(Object(Ti.a)(33),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=Math.max(1,e.store.selectSnapshot(ye.a.getLoadChunks).length),i=e.store.selectSnapshot(ye.a.getLoadChunksRemaining).length,a=n-i,o=t.receivedAssets/t.requestedAssets,r=1/n,s=0===i?1:o*r+a*r;e.progress=s.toFixed(2),e.changeDetecton.markForCheck(),e.store.dispatch(new Ai.b(s,o))})),this.actions.pipe(Object(E.k)(me.g),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){0===e.store.selectSnapshot(ye.a.getLoadChunksRemaining).length&&(e.store.dispatch(new Ai.b(1,1)),e.engineService.enableRender())})),this.engineService.getEvent(X.a.CameraUpdated).pipe(Object(M.a)((function(){return!e.cameraAnimating})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.cameraAnimating=!0,e.changeDetecton.markForCheck()})),this.engineService.getEvent(X.a.CameraRested).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.cameraAnimating=!1,e.changeDetecton.markForCheck()}))}},{key:"bindApplicationEvents",value:function(){var e=this;this.enginePosition$.pipe(Object(M.a)((function(e){return null!=e})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.repositionEngine(t)})),this.store.select(oe.a.getXrayModeEnabled).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=e.store.selectSnapshot(Ue.a.getCheckedNodes),i=e.store.selectSnapshot(Ue.a.getNodes);!1===t?(Object.keys(i||[]).forEach((function(t){e.paintService.paint(t,i[t].paint)})),n.forEach((function(t){return e.paintService.highlight(t.objectId,!0)}))):(e.paintService.paintAll(Object.keys(i),Le.b),e.paintService.paintAll(n.map((function(e){return e.objectId})),Le.c))})),this.actions.pipe(Object(E.l)(ge.p),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.playChapterFromStart()})),this.engineDisplay$.pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.display=t,e.changeDetecton.markForCheck()})),this.engineVisible$.pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.engineVisible=t,e.changeDetecton.markForCheck()})),this.visibilityLayersService.initObservables(),this.contextmenu$.pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.contextmenuNode=t.node,e.contextmenuHit=t.hit,e.changeDetecton.markForCheck()}))}},{key:"bindChapterChangeEvents",value:function(){var e=this;this.selectedChapter$.pipe(Object(M.a)((function(e){return!Object(D.isNil)(e)})),Object(Kn.a)(),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=p(t,2),i=n[0],a=n[1],o=e.chapterService.getCurrentChapterId(),r=a.id;i.id===r&&o===r||(e.store.dispatch(new Te.a.SetActiveChapter(r)),Ie(e.store,e.engineService),Human.timeline.scrub({chapterId:r}),e.store.dispatch(new de.m(void 0)))})),this.clippingPlanes$.pipe(Object(M.a)((function(e){return void 0!==e})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(e){var t=Object.values(e.clips).filter((function(e){return e.enabled}));Human.renderer.clip.reset(),t.forEach((function(t){return Human.renderer.clip.setClip(Object.assign({boundary:e.boundary},t))}))})),Object(Zn.b)(this.selectedChapterId$,this.readyState$,this.autoplay$).pipe(Object(M.a)((function(e){var t=p(e,3),n=t[0],i=t[1],a=t[2];return!Object(D.isNil)(n)&&!Object(D.isNil)(i)&&!Object(D.isNil)(a)})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=p(t,3),i=n[1],a=n[2],o=Object(D.get)(i,"animation",!1),r=e.store.selectSnapshot(Se.a.getSelectedChapter),s=Object(D.get)(r,"ui.play.autoplay",!0),c=o&&a&&s;e.store.dispatch(new ge.o(r,!c)),e.store.dispatch(new ge.W(c))}))}},{key:"bindCameraEvents",value:function(){var e=this;this.actions.pipe(Object(E.l)(de.l),Object(M.a)((function(e){return!Object(D.isNil)(e.camera)})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){(t.animate?e.flyToPoint(t.camera,t.animationDuration):e.jumpToPoint(t.camera)).then((function(){e.store.dispatch(new de.o),t.rotationCenter&&e.cameraService.setCameraRotationCenter(t.rotationCenter)}))})),this.actions.pipe(Object(E.l)(de.e),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.cameraService.panCameraStatic(t.x,t.y,t.z)})),this.actions.pipe(Object(E.l)(de.i),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.cameraService.rotateCameraStatic(t.x,t.y)})),this.actions.pipe(Object(E.l)(de.t),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.cameraService.setHumanZoomFactor(t.value)})),this.actions.pipe(Object(E.l)(ge.j),Object(M.a)((function(e){return!!e.objectId})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){t.animate?e.flyToObject(t.objectId,t.animationDuration):e.jumpToObject(t.objectId)}))}},{key:"bindToolEvents",value:function(){var e=this;this.activeTool$.pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){switch(Object.values(Qo).forEach((function(t){t&&e.renderer.removeClass(e.engineElement.nativeElement,t)})),t){case we.a.Hide:e.renderer.addClass(e.engineElement.nativeElement,Qo.Hide);break;case we.a.Label:e.renderer.addClass(e.engineElement.nativeElement,Qo.Label);break;case we.a.Paint:e.renderer.addClass(e.engineElement.nativeElement,Qo.Paint);break;case we.a.Eyedropper:e.renderer.addClass(e.engineElement.nativeElement,Qo.Eyedropper);break;case we.a.Quiz:e.renderer.addClass(e.engineElement.nativeElement,Qo.Crosshair)}}))}},{key:"bindMouseEvents",value:function(){var e=this;this.mouseMove$=Object(z.a)(this.engineElement.nativeElement,"mousemove"),this.mouseMove$.pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.handleMousePan(t)})),this.mouseMove$.pipe(Object(L.a)(10),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.handleMouseHover(t)})),this.mouseLeave$=Object(z.a)(this.engineElement.nativeElement,"mouseleave"),this.mouseLeave$.pipe(Object(L.a)(10),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){e.handleMouseLeave()}))}},{key:"bindWindowKeyEvent",value:function(e){var t=this;return Object(z.a)(window,e).pipe(Object(M.a)((function(e){return Object(D.isEmpty)(t.matDialog.openDialogs)})))}},{key:"bindKeyEvents",value:function(){var e,t=this,n=["w","a","s","d","e","c","=","-","+","_","arrowleft","arrowright","arrowup","arrowdown","shiftKey"].reduce((function(e,t){return e[t]=!1,e}),{}),i=new rt.a(n);this.bindWindowKeyEvent("keydown").pipe(Object(M.a)((function(e){return!(e.repeat||e.metaKey||e.ctrlKey)})),Object(M.a)((function(e){var t=e.target.nodeName.toLowerCase();return!(["input","textarea","select","option"].indexOf(t)>=0)})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(e){var t;i.next(Object.assign(Object.assign({},i.value),(l(t={},e.key.toLowerCase(),!0),l(t,"shiftKey",e.shiftKey),l(t,"hasMomentum",!1),t)))})),this.bindWindowKeyEvent("keyup").pipe(Object(M.a)((function(e){return!!e.key})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(n){var a,o;1===Object.values(e).filter((function(e){return!0===e})).length?(t.applyMotion(e,!0),i.next(Object.assign(Object.assign({},i.value),(l(a={},n.key.toLowerCase(),!1),l(a,"shiftKey",n.shiftKey),l(a,"hasMomentum",!1===e.shiftKey),a)))):i.next(Object.assign(Object.assign({},i.value),(l(o={},n.key.toLowerCase(),!1),l(o,"shiftKey",n.shiftKey),l(o,"hasMomentum",!1),o)))})),i.pipe(Object(M.a)((function(){return t.inputEnabled})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(n){e=n,!1===n.hasMomentum&&t.applyMotion(n,!1)})),this.bindWindowKeyEvent("keydown").pipe(Object(M.a)((function(e){return"Control"===e.key})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){t.ctrlPressed=!0})),this.bindWindowKeyEvent("keyup").pipe(Object(M.a)((function(e){return"Control"===e.key})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(){t.ctrlPressed=!1}))}},{key:"applyMotion",value:function(e,t){var n=new Li.a,i=e.shiftKey?Vo.ZoomSlow:Vo.Zoom,a=e.shiftKey?Vo.PanSlow:Vo.Pan,o=e.shiftKey?Vo.RotateSlow:Vo.Rotate;n.zoom+=e.c||e["-"]||e._?i:0,n.zoom-=e.e||e["="]||e["+"]?i:0,n.panX-=e.d?a:0,n.panX+=e.a?a:0,n.panY+=e.w?a:0,n.panY-=e.s?a:0,n.rotateX-=e.arrowright?o:0,n.rotateX+=e.arrowleft?o:0,n.rotateY+=e.arrowup?o:0,n.rotateY-=e.arrowdown?o:0,n.applyFriction=t,this.store.dispatch(new de.d(n))}},{key:"initChangeListener",value:function(){var e=this;this.store.select(Ue.a.getPatches).pipe(Object(M.a)((function(e){return e.length>0})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=t.reduce((function(e,t){var n=t.path[t.path.length-1];return void 0!==e[n]&&e[n].push(t),e}),{shown:[],checked:[],paint:[],pickable:[]}),i=function(e){return n[e].reduce((function(e,t){return e[t.path[2]]=t.value,e}),{})},a=i("checked"),o=i("shown"),r=i("paint"),s=i("pickable");if(!Object(D.isEmpty)(o)){var c=e.store.selectSnapshot(Ue.a.getNodes),u=Object.values(c).reduce((function(e,t){return e[t.objectId]=t.shown,e}),{});e.engineService.setNodesVisible(u);var l=e.convertToLeafStateMap("shown",u);e.store.dispatch(new ge.V(l,c))}if(!Object(D.isEmpty)(a)){e.engineService.fireEvent(X.a.SceneObjectsSelected,{selectedObjectsUpdate:a});var d=e.store.selectSnapshot(oe.a.getXrayModeEnabled)?function(t,n){return e.paintService.paint(t,!0===n?Le.c:Le.b)}:function(t,n){return e.paintService.highlight(t,n)};Object.entries(a).forEach((function(e){var t=p(e,2),n=t[0],i=t[1];d(n,i)}))}if(!Object(D.isEmpty)(r))for(var g=0,h=Object.entries(r);g<h.length;g++){var f=p(h[g],2),b=f[0],m=f[1];e.paintService.colorObject(b,ce.a.toEngine(m))}if(!Object(D.isEmpty)(s)){var y=e.store.selectSnapshot(Ue.a.getNodes),v=Object.values(y).reduce((function(e,t){return e[t.objectId]=t.pickable,e}),{});e.engineService.setNodesPickable(v),e.store.dispatch(new ge.T(e.convertToLeafStateMap("pickable",v),y))}}))}},{key:"initChapterAudio",value:function(){var e=this;Object(Zn.b)([this.selectedChapterId$,this.playAudio$]).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=p(t,2),i=(n[0],n[1]);e.playAudio(i)}))}},{key:"initBackgroundListener",value:function(){var e=this;Object(Zn.b)([this.background$,this.engineDisplay$,this.engineVisible$]).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){var n=p(t,3),i=n[0],a=n[1],o=n[2];e.renderer.setStyle(e.engineElement.nativeElement,"background-image",$e.a.toCSS(i)),e.isBackgroundCheckered(i)?e.renderer.addClass(e.engineElement.nativeElement,"engine--checkered"):e.renderer.removeClass(e.engineElement.nativeElement,"engine--checkered"),e.renderer.setStyle(e.engineElement.nativeElement,"display",a?"block":"none"),e.renderer.setStyle(e.engineElement.nativeElement,"opacity",o?1:0)}))}},{key:"initPlaybackSpeedListener",value:function(){this.store.select(oe.a.getPlaybackSpeed).pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(e){Human.timeline.scale=e}))}},{key:"repositionEngine",value:function(e){this.renderer.setStyle(this.engineElement.nativeElement,"left",e.left+"px"),this.renderer.setStyle(this.engineElement.nativeElement,"top",e.top+"px"),this.renderer.setStyle(this.engineElement.nativeElement,"width",e.width+"px"),this.renderer.setStyle(this.engineElement.nativeElement,"height",e.height+"px"),this.renderer.setStyle(this.engineElement.nativeElement,"zIndex",""+e.visibility),this.renderer.setStyle(this.engineElement.nativeElement,"visibility",e.visibility===Ui.a.Shown?"visible":"hidden"),this.visible=e.visibility===Ui.a.Shown,Human.renderer.resize()}},{key:"bindHumanInteractions",value:function(){var e=this,t=new Di.Manager(this.engineCanvasElement.nativeElement);t.add(new Di.Tap({event:"doubletap",taps:2,posThreshold:50})),t.add(new Di.Tap({event:"singletap"})),t.add(new Di.Pan({event:"pan",pointers:0})),t.add(new Di.Pinch({event:"pinch"})),t.add(new Di.Press({time:500})),t.on("singletap",(function(t){e.handleTap(t)})),t.on("doubletap",(function(t){e.handleDoubleTap(t)})),t.on("press",(function(t){t.preventDefault(),t.srcEvent.stopImmediatePropagation(),e.handlePress(t)})),t.on("pan",(function(t){t.preventDefault(),e.handlePan(t)})),t.on("panend",(function(t){e.handlePanEnd(t)})),t.on("pinchend",(function(t){e.handlePinchEnd(t)}));var n=0,i=0;t.on("pinchstart",(function(t){n=t.scale,e.pinchMode=""})),t.on("pinchmove",(function(t){if(!(e.pinchTicks>0)){var a=Math.abs(t.deltaX)>60||Math.abs(t.deltaY)>60,o=t.scale>1.25||t.scale<.75;e.pinchMode?("pan"===e.pinchMode&&o&&!a&&(e.pinchMode="pinch"),"pinch"===e.pinchMode&&a&&!o&&(e.pinchMode="pan")):e.pinchMode=o?"pinch":"pan";var r=t.scale-n;n=t.scale;var s=i;i=0===r?0:r>0?1:-1,e.cameraService.setCameraPan(t.velocityX*Ho.Pan,t.velocityY*Ho.Pan),i+s!==0&&e.cameraService.setHumanZoom(r*Ho.Zoom)}}))}},{key:"handleMouseHover",value:function(e){if(e.buttons===Go.None){var t=e.offsetX,n=e.offsetY,i=Human.renderer.pick.pick(t,n);if(i.objectId){var a=this.store.selectSnapshot(oe.a.getViewGraph),o=this.engineService.getNode(a,i.objectId),r=this.store.selectSnapshot(oe.a.getHoveredNode);r&&r.id===o.id||this.store.dispatch(new ge.k(o,i))}else null!=this.store.selectSnapshot(oe.a.getHoveredNode)&&this.store.dispatch(new ge.k(null))}}},{key:"handleMouseLeave",value:function(){this.store.dispatch(new ge.k(null))}},{key:"handleMousePan",value:function(e){if(2===e.buttons||4===e.buttons){var t=e.movementX,n=e.movementY;t/=16,n/=16,this.cameraService.setCameraPan(t,n)}}},{key:"handleMouseOut",value:function(){this.store.dispatch(new ge.k(null))}},{key:"handleWheel",value:function(e){var t=this,n=0;switch(e.deltaMode){case 0:null===this.scrollType&&(this.scrollType=Math.abs(e.deltaY)<10?"trackpad":"wheel"),n="trackpad"===this.scrollType?e.deltaY*Ho.TrackZoom:Math.sign(e.deltaY)*Bo.Zoom;break;default:this.scrollType="wheel",n=e.deltaY*Bo.Zoom}clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){t.scrollType=null}),500),Math.abs(n)>40&&(n=40*Math.sign(n)),"trackpad"===this.scrollType?this.cameraService.setCameraZoom(n):this.zoomWithVelocity(n)}},{key:"zoomWithVelocity",value:function(e){var t=this;this.cameraService.setCameraZoom(e),requestAnimationFrame((function(){e*=.85,Math.abs(e)>1&&t.zoomWithVelocity(e)}))}},{key:"handleContextMenu",value:function(e){e.preventDefault();var t=e.offsetX,n=e.offsetY,i=this.getHit(t,n),a=this.getNodeFromHit(i);this.store.dispatch(new ge.z(a,i))}},{key:"handlePanEnd",value:function(e){var t=this.store.selectSnapshot(zi.a.getCameraMotion);if(!(this.pinchTicks>0||t.panX===e.velocityX&&t.panY===e.velocityY)){var n=this.store.selectSnapshot(zi.a.getPanMode);e.srcEvent.shiftKey||"pan"===n?(t.panX=e.velocityX*Ho.Pan,t.panY=e.velocityY*Ho.Pan):(t.rotateX=e.velocityX*Ho.Rotate,t.rotateY=e.velocityY*Ho.Rotate),t.applyFriction=!0,this.store.dispatch(new de.d(t))}}},{key:"handlePinchEnd",value:function(e){var t=this.store.selectSnapshot(zi.a.getCameraMotion);if("pan"===this.pinchMode)t.panX=e.velocityX*Ho.Pan,t.panY=e.velocityY*Ho.Pan;else{var n=e.velocity>0?1:-1;t.zoom=Math.sqrt(e.velocityX*e.velocityX+e.velocityY*e.velocityY)*-n*Ho.Zoom}t.applyFriction=!0,this.store.dispatch(new de.d(t)),this.pinchTicks=10}},{key:"handleTap",value:function(e){var t=this.getOffset(e),n=t.offsetX,i=t.offsetY,a=this.getHit(n,i),o=this.getNodeFromHit(a);this.store.dispatch(new ge.d(o,e,a))}},{key:"handleDoubleTap",value:function(e){var t=this.getOffset(e),n=t.offsetX,i=t.offsetY,a=this.getHit(n,i),o=this.getNodeFromHit(a);o&&this.store.dispatch(new ge.j(o.id))}},{key:"handlePress",value:function(e){var t=this.getOffset(e),n=t.offsetX,i=t.offsetY,a=this.getHit(n,i),o=this.getNodeFromHit(a);o&&this.store.dispatch(new ge.j(o.id))}},{key:"handlePan",value:function(e){if(!(this.pinchTicks>0)){var t=this.store.selectSnapshot(zi.a.getPanMode),n=e.velocityX,i=e.velocityY;e.srcEvent.shiftKey||"pan"===t?this.cameraService.setCameraPan(n*Ho.Pan,i*Ho.Pan):this.cameraService.setCameraRotation(n*Ho.Rotate,i*Ho.Rotate)}}},{key:"handleMouseInputEngineTick",value:function(){var e=this.cameraService.tickCameraRotation(),t=this.cameraService.tickCameraPan(),n=this.cameraService.tickCameraZoom(),i=Math.min(15,(window.performance.now()-this.deltaTime)/16.666666666666668);if((e.vx||e.vy)&&this.cameraService.rotateCameraStatic(0!==e.vx?i*e.vx*Bo.Rotate:0,0!==e.vy?i*e.vy*Bo.Rotate:0),t.x||t.y){var a=Math.max(Human.renderer.camera.lookDistance/80,.01);this.cameraService.panCameraStatic(i*t.x*a*Bo.Pan,i*t.y*a*Bo.Pan,i*t.z*a*Bo.Pan)}0!==n&&this.cameraService.setHumanZoom(i*n*Bo.Zoom)}},{key:"handleCameraTick",value:function(){this.pinchTicks>0&&this.pinchTicks--,this.applyFriction();var e=this.store.selectSnapshot(zi.a.getCameraMotion);this.cameraService.setCameraPan(e.panX,e.panY),this.cameraService.setCameraRotation(e.rotateX,e.rotateY),this.cameraService.setCameraZoom(e.zoom)}},{key:"getFriction",value:function(e){if(0===e)return 0;var t=(window.performance.now()-this.deltaTime)/16.666666666666668,n=e*Math.max(0,Ho.Friction+.1*(1-t));return Math.abs(n)<Ho.FrictionThreshold&&(n=0),n}},{key:"applyFriction",value:function(){var e=this.store.selectSnapshot(zi.a.getCameraMotion);!0===e.applyFriction&&(e.rotateX=this.getFriction(e.rotateX),e.rotateY=this.getFriction(e.rotateY),e.panX=this.getFriction(e.panX),e.panY=this.getFriction(e.panY),e.zoom=this.getFriction(e.zoom),0===e.rotateX&&0===e.rotateY&&0===e.panX&&0===e.panY&&0===e.zoom&&(e.applyFriction=!1),this.store.dispatch(new de.d(e)))}},{key:"flyToObject",value:function(e,t){Human.renderer.camera.fly.flyTo({objectId:e,animationDuration:t})}},{key:"jumpToObject",value:function(e){Human.renderer.camera.fly.jumpTo({objectId:e})}},{key:"flyToPoint",value:function(e,t){return new Promise((function(n){Human.renderer.camera.fly.flyTo(Object.assign(Object.assign({},e),{animationDuration:t}),n)}))}},{key:"jumpToPoint",value:function(e){return new Promise((function(t){Human.renderer.camera.fly.jumpTo(e,t)}))}},{key:"getNodeFromHit",value:function(e){var t;if(e.objectId){var n=this.store.selectSnapshot(oe.a.getViewGraph);t=this.engineService.getNode(n,e.objectId)}return t}},{key:"getHit",value:function(e,t){return Human.renderer.pick.pick(e,t,{rayPick:!0})}},{key:"getOffset",value:function(e){var t=0,n=0;e.center?(t=e.center.x,n=e.center.y):(t=e.clientX,n=e.clientY);var i=this.engineElement.nativeElement.getBoundingClientRect();return{offsetX:t-i.left,offsetY:n-i.top}}},{key:"playAudio",value:function(e){e=Object(D.isNil)(e)?this.store.selectSnapshot(oe.a.getPlayAudio):e,this.mediaService.stopAudio();var t=this.store.selectSnapshot(Se.a.getSelectedChapterAudio),n=Object(D.get)(t,"data.fullUrl");if(n){var i=this.mediaService.getAudioPlayer(n);i||(i=this.mediaService.addAudioPlayer(n)),e?i.play():i.stop()}}},{key:"playChapterFromStart",value:function(){var e=this.store.selectSnapshot(Se.a.getSelectedChapter);this.playAudio(),this.store.dispatch(new ge.o(e)),this.store.dispatch(new ge.W(!0))}},{key:"isTransparentBackground",value:function(e){return!!e&&$e.a.isTransparent(this.background.getValue())}},{key:"isBackgroundCheckered",value:function(e){return s.a.application!==j.a.Viewer&&this.isTransparentBackground(e)}}]),e}()).\u0275fac=function(e){return new(e||Po)(r.Pb(E.b),r.Pb(ie.a),r.Pb(Vi.a),r.Pb(r.i),r.Pb(ae.a),r.Pb(ue),r.Pb(en.a),r.Pb(Bi.a),r.Pb(F.d),r.Pb(r.H),r.Pb(E.h),r.Pb(R.b))},Po.\u0275cmp=r.Jb({type:Po,selectors:[["app-engine"]],viewQuery:function(e,t){var n;1&e&&(r.Jc(vo,!0),r.Jc(ko,!0),r.Jc(Oo,!0)),2&e&&(r.xc(n=r.dc())&&(t.engineElement=n.first),r.xc(n=r.dc())&&(t.engineCanvasElement=n.first),r.xc(n=r.dc())&&(t.engineAnnotationsElement=n.first))},hostBindings:function(e,t){1&e&&r.cc("wheel",(function(e){return t.wheel(e)}))("contextmenu",(function(e){return t.contextmenu(e)}))("mouseout",(function(e){return t.mouseout(e)}))},inputs:{inputEnabled:"inputEnabled"},decls:16,vars:11,consts:[["id","container","data-test","engine","role","complementary",1,"engine"],["engine",""],["class","engine__watermark","role","img","aria-label","watermark","data-test","engineWatermark",4,"ngIf"],["id","theCanvas","data-test","engineCanvas",1,"engine__canvas"],["engineCanvas",""],["id","annotationCanvas",1,"engine__annotations"],["engineAnnotations",""],[3,"node","hit",4,"ngIf"],["data-test","engineInputBlocker","class","engine__input-blocking",4,"ngIf"],["data-test","engineProgressBar",4,"ngIf"],[4,"ngIf"],["role","img","aria-label","watermark","data-test","engineWatermark",1,"engine__watermark"],[3,"node","hit"],["data-test","engineInputBlocker",1,"engine__input-blocking"],["data-test","engineProgressBar"]],template:function(e,t){1&e&&(r.Vb(0,"div",0,1),r.Nc(2,So,1,0,"div",2),r.hc(3,"async"),r.Qb(4,"canvas",3,4),r.Qb(6,"canvas",5,6),r.Qb(8,"app-labels"),r.Nc(9,xo,1,2,"app-engine-contextmenu",7),r.Nc(10,Co,1,0,"div",8),r.Nc(11,wo,1,0,"app-engine-progress",9),r.hc(12,"async"),r.Qb(13,"app-engine-scroll"),r.Qb(14,"app-engine-fade"),r.Nc(15,jo,2,0,"ng-container",10),r.Ub()),2&e&&(r.Eb("data-progress",t.progress)("data-camera-animating",t.cameraAnimating),r.Db(2),r.mc("ngIf",r.ic(3,7,t.watermarkEnabled$)),r.Db(7),r.mc("ngIf",t.contextmenuNode),r.Db(1),r.mc("ngIf",!t.inputEnabled),r.Db(1),r.mc("ngIf",r.ic(12,9,t.showProgressBar$)),r.Db(4),r.mc("ngIf",t.showDebug))},directives:[v.p,Ya,ro,lo,po,fo,bo],pipes:[v.b],styles:[".engine[_ngcontent-%COMP%]{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;position:fixed;width:100vw;height:100vh;overflow:hidden;visibility:hidden;z-index:-1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.engine__canvas[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%;z-index:1}.engine__annotations[_ngcontent-%COMP%]{display:none}.engine--cursor-eyedropper[_ngcontent-%COMP%]:hover{cursor:url(/assets/images/cursors/cursor-eyedropper.png) 7 20,pointer}.engine--cursor-paint[_ngcontent-%COMP%]:hover{cursor:url(/assets/images/cursors/cursor-paint.png) 7 20,pointer}.engine--cursor-hide[_ngcontent-%COMP%]:hover{cursor:url(/assets/images/cursors/cursor-hide.png) 7 20,pointer}.engine--cursor-label[_ngcontent-%COMP%]:hover{cursor:url(/assets/images/cursors/cursor-label.png) 7 20,pointer}.engine--cursor-crosshair[_ngcontent-%COMP%]:hover{cursor:crosshair}.engine--checkered[_ngcontent-%COMP%]{background-color:#fff;background-size:24px 24px;background-position:0 0,12px 12px;background-image:linear-gradient(45deg,#d7e0ea 25%,transparent 0,transparent 75%,#d7e0ea 0,#d7e0ea),linear-gradient(45deg,#d7e0ea 25%,transparent 0,transparent 75%,#d7e0ea 0,#d7e0ea)}.engine__controls[_ngcontent-%COMP%]{position:absolute;right:16px;bottom:16px;z-index:2}.engine__progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;z-index:2}.engine__progress--hide[_ngcontent-%COMP%]{display:none}.engine__input-blocking[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:3}.engine__watermark[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:101;pointer-events:none;background-image:url(/assets/images/BioDigital_watermark_1024x768.svg);background-repeat:no-repeat;background-position:50%;background-size:auto}@media (max-width:768px){.engine__controls[_ngcontent-%COMP%]{bottom:96px}}@media (max-width:959px){.engine__watermark[_ngcontent-%COMP%]{background-image:url(/assets/images/BioDigital_watermark_959x100.svg);background-size:contain}}"],changeDetection:0}),mo([Object(E.e)(oe.a.getReady),yo("design:type",A.a)],Po.prototype,"ready$",void 0),mo([Object(E.e)(oe.a.getViewGraph),yo("design:type",A.a)],Po.prototype,"viewGraph$",void 0),mo([Object(E.e)(oe.a.getEnginePosition),yo("design:type",A.a)],Po.prototype,"enginePosition$",void 0),mo([Object(E.e)(oe.a.getHoveredNode),yo("design:type",A.a)],Po.prototype,"hoveredNode$",void 0),mo([Object(E.e)(oe.a.getChapter),yo("design:type",A.a)],Po.prototype,"chapter$",void 0),mo([Object(E.e)(oe.a.getChapterInit),yo("design:type",A.a)],Po.prototype,"chapterInit$",void 0),mo([Object(E.e)(Ue.a.getCheckedNodes),yo("design:type",A.a)],Po.prototype,"checkedNodes$",void 0),mo([Object(E.e)(oe.a.getActiveTool),yo("design:type",A.a)],Po.prototype,"activeTool$",void 0),mo([Object(E.e)(oe.a.getAnimationPlaying),yo("design:type",A.a)],Po.prototype,"animationPlaying$",void 0),mo([Object(E.e)(oe.a.getAutoplay),yo("design:type",A.a)],Po.prototype,"autoplay$",void 0),mo([Object(E.e)(oe.a.getPlayAudio),yo("design:type",A.a)],Po.prototype,"playAudio$",void 0),mo([Object(E.e)(oe.a.getDisplay),yo("design:type",A.a)],Po.prototype,"engineDisplay$",void 0),mo([Object(E.e)(oe.a.getVisible),yo("design:type",A.a)],Po.prototype,"engineVisible$",void 0),mo([Object(E.e)(oe.a.getShowProgressBar),yo("design:type",A.a)],Po.prototype,"showProgressBar$",void 0),mo([Object(E.e)(oe.a.getContextmenu),yo("design:type",A.a)],Po.prototype,"contextmenu$",void 0),mo([Object(E.e)(Se.a.getSelectedChapter),yo("design:type",A.a)],Po.prototype,"selectedChapter$",void 0),mo([Object(E.e)(Se.a.getSelectedChapterId),yo("design:type",A.a)],Po.prototype,"selectedChapterId$",void 0),mo([Object(E.e)(Se.a.getSelectedChapterReadyState),yo("design:type",A.a)],Po.prototype,"readyState$",void 0),mo([Object(E.e)(Se.a.getSelectedChapterClippingPlanes),yo("design:type",A.a)],Po.prototype,"clippingPlanes$",void 0),mo([Object(E.e)(zi.a.getCameraMotion),yo("design:type",A.a)],Po.prototype,"cameraMotion$",void 0),mo([Object(E.e)(Se.a.getSelectedChapterBackground),yo("design:type",A.a)],Po.prototype,"background$",void 0),mo([Object(E.e)(oe.a.getWatermarkEnabled),yo("design:type",A.a)],Po.prototype,"watermarkEnabled$",void 0),Po),qo=function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},Xo=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Zo=((_o=function(){function e(t,n,i,a,o,r,s,c,u,l,p,d,g,f,b,m,v,k,O,S){h(this,e),this.ga=n,this.authService=i,this.storageService=a,this.compatibilityService=o,this.dialog=r,this.router=s,this.activatedRoute=c,this.viewContainerRef=u,this.linkedinInsights=l,this.pendoService=p,this.widgetAPIHandler=d,this.engineService=g,this.store=f,this.actions=b,this.zendeskService=m,this.viewService=v,this.snackBar=k,this.titleService=O,this.globalActionsService=S,this.title="human-studio-next",this.ngUnsubscribe=new y.a,t.loadRouting(),this.initPageTitle()}return b(e,[{key:"ngOnInit",value:function(){var e=this;this.initPageAnalytics(),s.a.native&&this.initNativeAPIHooks(),this.userProfile$.pipe(Object(M.a)((function(e){return null!=e})),Object(I.a)(1),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.checkProfileAccess(t)})),this.initZendesk(),this.initPendo(),this.globalActionsService.initialize()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initPageTitle",value:function(){var e=this,t=this.titleService.getTitle();this.router.events.pipe(Object(M.a)((function(e){return e instanceof g.c})),Object(T.a)((function(){for(var t="",n=e.activatedRoute;n.firstChild;){var i=n.firstChild.snapshot.data.title;Object(D.isNil)(i)||(t=i),n=n.firstChild}return t})),Object(T.a)((function(e){return e.length?e+" | BioDigital Human Platform":t}))).subscribe((function(t){e.titleService.setTitle(t)}))}},{key:"initPageAnalytics",value:function(){var e=this;this.linkedinInsights.initialize(),this.router.events.pipe(Object(M.a)((function(e){return e instanceof g.c})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.ga.pageView(t.urlAfterRedirects)}))}},{key:"initZendesk",value:function(){var e=this;this.zendeskService.updateFromProfile(),Object(z.a)(window,"resize").pipe(Object(U.a)(this.compatibilityService.isHoverSupported()),Object(L.a)(100),Object(T.a)((function(){return e.compatibilityService.isHoverSupported()})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.zendeskService.setHelpCenterSuggestions({labels:[t?"webhelp":"mobilehelp"]})})),this.userProfile$.pipe(Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.zendeskService.identify(t),e.zendeskService.updateFromProfile(t)})),this.userLocale$.pipe(Object(M.a)((function(e){return!Object(D.isNil)(e)})),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.zendeskService.setLocale(t.lang)}))}},{key:"initPendo",value:function(){var e=this;this.pendoService.appendScript(),this.pendoService.initialize({visitor:{},account:{}}),this.userProfile$.pipe(Object(M.a)((function(e){return null!=e})),Object(I.a)(1),Object(m.a)(this.ngUnsubscribe)).subscribe((function(t){e.setPendoVisitorData(t)}))}},{key:"setPendoVisitorData",value:function(e){this.pendoService.identify({visitor:this.pendoService.createVisitorData(e),account:this.pendoService.createAccountData(e.organizations[0])})}},{key:"checkProfileAccess",value:function(e){var t=this,n=this.authService.getProfileRestrictions(e),i=this.storageService.getLocalJSON(F.b.GroupRestriction);!0!==Object(D.get)(i,"dontShowDialog")&&(n.email||n.ip)&&setTimeout((function(){var e={id:q.a.GroupRestrictionDialog,width:"480px",height:"auto",data:Object.assign({},n)};t.dialog.open(W,e)}))}},{key:"initNativeAPIHooks",value:function(){var e=this;window.HumanWindowAPI=J.a,J.a.setStore(this.store),J.a.setSnackBar(this.snackBar),J.a.setRouter(this.router),this.widgetAPIHandler.listen(!1),this.engineService.fireEvent(X.a.HumanStarted,null),this.actions.pipe(Object(E.l)(Z.j)).subscribe((function(){e.engineService.fireEvent(X.a.NativeDeleteData,null)}))}}]),e}()).\u0275fac=function(e){return new(e||_o)(r.Pb(K.a),r.Pb($.c),r.Pb(Y.a),r.Pb(F.d),r.Pb(ee.a),r.Pb(R.b),r.Pb(g.e),r.Pb(g.a),r.Pb(r.S),r.Pb(te.a),r.Pb(ne.b),r.Pb(Hn),r.Pb(ae.a),r.Pb(E.h),r.Pb(E.b),r.Pb(Qn.a),r.Pb($t.a),r.Pb(Gn.b),r.Pb(c.c),r.Pb(Wn))},_o.\u0275cmp=r.Jb({type:_o,selectors:[["app-root"]],decls:4,vars:0,template:function(e,t){1&e&&(r.Qb(0,"app-user-access"),r.Qb(1,"app-offline-message"),r.Qb(2,"app-engine"),r.Qb(3,"router-outlet"))},directives:[ji,Mi,Wo,g.j],styles:[""],changeDetection:0}),qo([Object(E.e)(N.a.getUserProfile),Xo("design:type",A.a)],_o.prototype,"userProfile$",void 0),qo([Object(E.e)(N.a.getUserLocale),Xo("design:type",A.a)],_o.prototype,"userLocale$",void 0),_o),Jo=a("xuHu"),Ko=a("Tx//"),$o=((Mo=function(){function e(){h(this,e)}return b(e,[{key:"intercept",value:function(e,t){return t.handle(e).pipe(Object(T.a)((function(e){return e instanceof wn.e&&e.body&&e.body.hasOwnProperty("results")&&(e=e.clone({body:e.body.results})),e})))}}]),e}()).\u0275fac=function(e){return new(e||Mo)},Mo.\u0275prov=r.Lb({token:Mo,factory:Mo.\u0275fac}),Mo),Yo=a("S6v9"),er=a("AIoM"),tr=a("fP/T"),nr=a("vvyD"),ir=a("PCNd"),ar=a("hQIT"),or=((Io=function e(){h(this,e)}).\u0275mod=r.Nb({type:Io}),Io.\u0275inj=r.Mb({factory:function(e){return new(e||Io)},imports:[[v.c,nr.a,ir.a,ar.a,E.d.forFeature([ai.a])]]}),Io),rr=a("u9Xo"),sr=a("TEF2"),cr=a("INTG"),ur=a("jCJ1"),lr=((Lo=function e(){h(this,e)}).\u0275mod=r.Nb({type:Lo}),Lo.\u0275inj=r.Mb({factory:function(e){return new(e||Lo)},providers:[{provide:ur.b,useValue:s.a.recaptchaKey}],imports:[[E.d.forFeature([N.a,sr.a]),v.c,cr.a,ur.d]]}),Lo),pr=((Uo=function(){function e(){h(this,e)}return b(e,[{key:"parse",value:function(e){e=e.replace(/&amp;/g,"&");var t=(new g.b).parse(e);return this.ensureQueryParam(t.queryParams,"dk",e),this.ensureQueryParam(t.queryParams,"uaid",e),t}},{key:"serialize",value:function(e){return(new g.b).serialize(e).replace(/%2F/g,"/")}},{key:"ensureQueryParam",value:function(e,t,n){if(e.hasOwnProperty(t))return e;var i=this.getParameterByName(t,n);return null!==i&&(e[t]=i),e}},{key:"getParameterByName",value:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}}]),e}()).\u0275fac=function(e){return new(e||Uo)},Uo.\u0275prov=r.Lb({token:Uo,factory:Uo.\u0275fac}),Uo),dr=((To=function e(){h(this,e)}).\u0275mod=r.Nb({type:To}),To.\u0275inj=r.Mb({factory:function(e){return new(e||To)},imports:[[E.d.forFeature([ii.a]),v.c]]}),To),gr=a("/75k"),hr=((zo=function e(){h(this,e)}).\u0275mod=r.Nb({type:zo}),zo.\u0275inj=r.Mb({factory:function(e){return new(e||zo)},imports:[[E.d.forFeature([gr.a]),v.c]]}),zo),fr=a("E+WR"),br=((Ao=function e(){h(this,e)}).\u0275mod=r.Nb({type:Ao}),Ao.\u0275inj=r.Mb({factory:function(e){return new(e||Ao)},imports:[[E.d.forFeature([fr.a]),v.c]]}),Ao),mr=a("CL6y"),yr=((Do=function(){function e(){h(this,e)}return b(e,null,[{key:"forRoot",value:function(t){return{ngModule:e,providers:[ne.b,{provide:"pendoConfig",useValue:t}]}}}]),e}()).\u0275mod=r.Nb({type:Do}),Do.\u0275inj=r.Mb({factory:function(e){return new(e||Do)},imports:[[]]}),Do),vr=((Fo=function(){function e(){h(this,e)}return b(e,null,[{key:"forRoot",value:function(t){return{ngModule:e,providers:[te.a,{provide:"linkedinConfig",useValue:t}]}}}]),e}()).\u0275mod=r.Nb({type:Fo}),Fo.\u0275inj=r.Mb({factory:function(e){return new(e||Fo)},imports:[[]]}),Fo),kr=a("wSC8"),Or=((Eo=function e(){h(this,e)}).\u0275mod=r.Nb({type:Eo}),Eo.\u0275inj=r.Mb({factory:function(e){return new(e||Eo)},imports:[[v.c,g.i,ir.a,gi.a.forChild()]]}),Eo),Sr=a("CSvP"),xr=a("lMGN"),Cr=((No=function e(){h(this,e)}).\u0275mod=r.Nb({type:No}),No.\u0275inj=r.Mb({factory:function(e){return new(e||No)},imports:[[v.c,E.d.forFeature([xr.a])]]}),No),wr=a("rYhz"),jr=((Ro=function e(){h(this,e)}).\u0275mod=r.Nb({type:Ro}),Ro.\u0275inj=r.Mb({factory:function(e){return new(e||Ro)},imports:[[v.c,E.d.forFeature([wr.a])]]}),Ro);immer.enableAllPlugins(),immer.enableES5();var Pr,_r,Mr=s.a.application===j.a.Studio,Ir=[{provide:wn.a,useClass:$o,multi:!0},{provide:g.k,useClass:pr},{provide:ur.a,useValue:"https://recaptcha.net/recaptcha/api.js"}],Tr=((_r=function e(){h(this,e)}).\u0275mod=r.Nb({type:_r,bootstrap:[Zo]}),_r.\u0275inj=r.Mb({factory:function(e){return new(e||_r)},providers:Ir,imports:[[E.d.forRoot(),$.d.forRoot(s.a.googleAnalyticsId),vr.forRoot({enabled:Mr,linkedinId:s.a.linkedinId}),yr.forRoot({enabled:Mr,pendoId:s.a.pendoId,idPrefixes:(Pr={},l(Pr,kr.a.Local,"local-"),l(Pr,kr.a.QA,"qa-"),l(Pr,kr.a.Staging,"staging-"),l(Pr,kr.a.Production,""),Pr)}),cr.a.forRoot(),mr.a,d.b,c.a,wn.c,lr,er.a,dr,Yo.a,Ko.a,or,Cr,tr.a,ir.a,hr,s.a.application===j.a.Loft?br:[],rr.a,_,Jo.a.forRoot({disabled:s.a.production}),Or,jr,Sr.b]]}),_r);s.a.production&&Object(r.V)(),c.d().bootstrapModule(Tr).catch((function(e){return console.error(e)}))},zlNa:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Content=0]="Content",e[e.Label=1]="Label",e[e.Tools=2]="Tools",e[e.Search=3]="Search",e[e.Help=4]="Help",e[e.NodeInfo=5]="NodeInfo",e[e.LabelInfo=6]="LabelInfo",e}({})},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"},zp9f:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("AcyG"),a=n("eW6i"),o=n("5miH"),r=n("TATr"),s=n("0UUK"),c=n("3fyd"),u=n("WUhe"),l=n("FFWI"),p=n("Mh2x"),d=n("WwWM"),g=n("fXoL"),f=function(){var e=function(){function e(t,n,i){h(this,e),this.store=t,this.engineService=n,this.viewService=i}return b(e,[{key:"startQuiz",value:function(){this.viewService.toggleColumn(!0),this.store.dispatch(new u.a.SetQuizActive(!0));var e=this.store.selectSnapshot(l.b.getAllQuestions)[0].id;this.store.dispatch(new u.a.SetActiveQuestion(e))}},{key:"resetQuiz",value:function(){this.viewService.clearFadedNodes(),this.viewService.clearSelectedNodes(),this.store.dispatch(new u.a.SetQuizActive(!1)),this.store.dispatch(new u.a.SetActiveSubmission(void 0)),this.store.dispatch(new u.a.ClearSubmissions),this.store.dispatch(new u.a.SetQuizLifecycle(s.a.Question))}},{key:"exitQuiz",value:function(){var e=this;this.resetQuiz(),setTimeout((function(){e.store.dispatch(new r.l(e.store.selectSnapshot(p.a.getChapterCamera),!1))}))}},{key:"submitQuestion",value:function(e,t){var n=this.store.selectSnapshot(l.b.getAllQuestions).find((function(t){return t.id===e})),i=this.store.selectSnapshot(l.b),a=i.launchMode,r=i.quizSettings;this.store.dispatch(new u.a.SubmitQuestionAnswer({questionId:n.id,answer:t})),this.store.dispatch(new u.a.SetActiveSubmission({questionId:n.id,answer:t})),this.engineService.fireEvent(o.a.QuizAnswerSubmitted,{questionId:n.id,answer:t}),a===l.a.Learning&&n.type!==c.a.Instructions&&!1!==r.showExplanation?this.store.dispatch(new u.a.SetQuizLifecycle(s.a.Explanation)):this.nextQuestion()}},{key:"nextQuestion",value:function(){this.store.selectSnapshot(l.b.hasQuestionRemaining)?(this.store.dispatch(new u.a.SetQuizLifecycle(s.a.Question)),this.viewService.clearFadedNodes(),this.viewService.clearSelectedNodes(),this.store.dispatch(new u.a.NextQuestion)):(this.store.dispatch(new u.a.SetQuizLifecycle(s.a.Review)),this.engineService.fireEvent(o.a.QuizCompleted,!0))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Zb(i.h),g.Zb(a.a),g.Zb(d.a))},e.\u0275prov=g.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},zrlG:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i,a=n("b36G"),o=function e(){h(this,e)},r=n("ZR5G"),s=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=(i=function e(){h(this,e),this.type=r.a.Bookmark,this.favorite=!1,this.unavailable=!1},function(e,t,n,i){var a,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r);o>3&&r&&Object.defineProperty(t,n,r)}([Object(a.Type)((function(){return o})),s("design:type",Array)],i.prototype,"group_access",void 0),i)}},[[0,2,12]]])}();