"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[742],{51452:(ve,X,s)=>{s.d(X,{j:()=>j});var e=s(54438),c=s(92014),k=s(58841),d=s(43194),S=s(85052),Y=s(35426),p=s(2573),z=s(27180),O=s(72865),h=s(28696),_=s(24418),G=s(90882),g=s(37925),w=s(14264),W=s(21082),de=s(87996),ee=s(36110),C=(s(74394),s(49204)),R=s(40470),M=s(17766),b=s(97948),B=s(49969),F=s(79898),le=s(32408),ye=s(7277),Q=s(16823),$e=s(66432),Be=s(89079),te=s(38104),L=s(15623),P=s(99327),U=s(21007),y=s(60177),I=s(26779),ge=s(12374),f=s(76718),v=s(90856),T=s(72192),m=s(89417),E=s(12614),ne=function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);return l>3&&a&&Object.defineProperty(n,t,a),a},he=function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,n)};function Ee(i,n){if(1&i&&(e.j41(0,"option",8),e.EFF(1),e.k0s()),2&i){const t=n.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Re(i,n){if(1&i&&(e.j41(0,"option",8),e.EFF(1),e.k0s()),2&i){const t=n.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function oe(i,n){if(1&i&&(e.j41(0,"select",9),e.DNE(1,Re,2,2,"option",5),e.nI1(2,"async"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",e.bMT(2,1,t.secondaryCategoryOptions$))}}function we(i,n){if(1&i){const t=e.RV6();e.j41(0,"form",2)(1,"div",3)(2,"select",4),e.DNE(3,Ee,2,2,"option",5),e.nI1(4,"async"),e.k0s()(),e.j41(5,"div",3),e.DNE(6,oe,3,3,"select",6),e.nI1(7,"async"),e.k0s(),e.j41(8,"button",7),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.toggleSearchMode(l.gallerySearchMode.Path))}),e.EFF(9," ...or specify file path "),e.k0s()()}if(2&i){let t;const o=e.XpG();e.Y8G("formGroup",o.queryForm),e.R7$(3),e.Y8G("ngForOf",e.bMT(4,3,o.primaryCategoryOptions$)),e.R7$(3),e.Y8G("ngIf",null==(t=e.bMT(7,5,o.secondaryCategoryOptions$))?null:t.length)}}function Je(i,n){if(1&i){const t=e.RV6();e.j41(0,"form",2)(1,"div",3),e.nrm(2,"input",10),e.k0s(),e.j41(3,"button",11),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.toggleSearchMode(l.gallerySearchMode.Query))}),e.EFF(4," Cancel "),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("formGroup",t.pathForm)}}class ae{get primaryCategoryControl(){return this.queryForm.get("primary")}get secondaryCategoryControl(){return this.queryForm.get("secondary")}get pathControl(){return this.pathForm.get("path")}constructor(n,t){this.store=n,this.formBuilder=t,this.gallerySearchMode=T.A,this.configChange=new e.bkB,this.ngUnsubscribe=new S.B}ngOnInit(){this.initForms(),this.initFormListeners(),this.store.dispatch(new v.lZ),this.store.dispatch(new v.T_(this.primaryCategoryControl.value))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForms(){const n=this.store.selectSnapshot(d.Y.getSearchConfig);this.queryForm=this.formBuilder.group({primary:[n.type===b.n.Loft?n.primary:"production"],secondary:[n.type===b.n.Loft?n.secondary:"maleAdult"]}),this.pathForm=this.formBuilder.group({path:[]})}initFormListeners(){this.primaryCategoryControl.valueChanges.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.handlePrimaryUpdate(n)}),(0,f.h)(this.queryForm.valueChanges,this.pathForm.valueChanges).pipe((0,de.B)(300),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{const n=this.getQuery();n&&this.configChange.emit(n)})}toggleSearchMode(n){this.store.dispatch(new h.w.SetSearchMode(n))}handlePrimaryUpdate(n){this.secondaryCategoryControl.setValue(""),this.store.dispatch(new v.T_(n))}getQuery(){switch(this.store.selectSnapshot(d.Y.getSearchMode)){case T.A.Query:if(this.primaryCategoryControl.value)return new O.qS(this.primaryCategoryControl.value,this.secondaryCategoryControl.value);break;case T.A.Path:const n=decodeURIComponent(this.pathControl.value||""),t=n.split("/"),l=n.match(/([A-Za-z_-\s0-9]*\/)/gi);if(null!=l)return new O.qS((l[0]||"").replace("/",""),(l[1]||"").replace("/",""),t.pop())}return null}static#e=this.\u0275fac=function(t){return new(t||ae)(e.rXU(c.il),e.rXU(m.ze))};static#t=this.\u0275cmp=e.VBU({type:ae,selectors:[["app-gallery-filters-loft"]],outputs:{configChange:"configChange"},decls:5,vars:7,consts:[["label","Path",3,"collapsible"],["class","gallery-filters theme-light p-5",3,"formGroup",4,"ngIf"],[1,"gallery-filters","theme-light","p-5",3,"formGroup"],[1,"pb-4"],["appAutoFocus","","formControlName","primary",1,"input"],[3,"value",4,"ngFor","ngForOf"],["class","input","formControlName","secondary",4,"ngIf"],["type","button","app-button","","buttonTheme","light","data-test","specifyFilePath",3,"click"],[3,"value"],["formControlName","secondary",1,"input"],["type","text","formControlName","path","placeholder","primary/secondary/name","data-test","moduleIdInput",1,"input"],["type","button","appAutoFocus","","app-button","","buttonTheme","light",3,"click"]],template:function(t,o){1&t&&(e.j41(0,"app-navigation-panel",0),e.DNE(1,we,10,7,"form",1),e.nI1(2,"async"),e.DNE(3,Je,5,1,"form",1),e.nI1(4,"async"),e.k0s()),2&t&&(e.Y8G("collapsible",!1),e.R7$(),e.Y8G("ngIf",e.bMT(2,3,o.searchMode$)===o.gallerySearchMode.Query),e.R7$(2),e.Y8G("ngIf",e.bMT(4,5,o.searchMode$)===o.gallerySearchMode.Path))},dependencies:[U.Q,y.Sq,y.bT,m.qT,m.xH,m.y7,m.me,m.wz,m.BC,m.cb,m.j4,m.JD,E.k,y.Jj],changeDetection:0})}ne([(0,c.l6)(ge.z.getPrimaryCategoryOptions("read")),he("design:type",p.c)],ae.prototype,"primaryCategoryOptions$",void 0),ne([(0,c.l6)(ge.z.getSecondaryCategoryOptions),he("design:type",p.c)],ae.prototype,"secondaryCategoryOptions$",void 0),ne([(0,c.l6)(d.Y.getSearchMode),he("design:type",p.c)],ae.prototype,"searchMode$",void 0);var De=s(29160),Ge=s(82656),Ae=s(39705),Ne=s(72760),se=s(30234),ie=s(38645),ce=s(97352),Me=s(96931),Ye=s(44971),Ve=function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);return l>3&&a&&Object.defineProperty(n,t,a),a},et=function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,n)};const ht=i=>({"gallery-cards--list":i});function mt(i,n){if(1&i){const t=e.RV6();e.j41(0,"li",3)(1,"app-gallery-card",4),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("selectBookmark",function(l){e.eBV(t);const a=e.XpG();return e.Njj(a.handleSelect(l))})("checkChange",function(l){const a=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.handleCheckedChange(a,l))}),e.k0s()()}if(2&i){const t=n.$implicit,o=e.XpG();e.R7$(),e.Y8G("actionMode",o.actionMode)("actionsEnabled",o.actionsEnabled)("bookmark",t)("viewMode",e.bMT(2,7,o.viewMode$))("responsive",e.bMT(3,9,o.horizontalBreakpoint$)<=o.horizontalBreakpoint.Medium)("checked",!0===o.checkedResultsMap[t.id]),e.BMQ("data-id",t.id)}}class Te{get results(){return this._results}set results(n){this._results=n,this.checkedResultsMap=this.getCheckedResultsMap(n.items,this.checkedResults),this.changeRef.markForCheck()}get checkedResults(){return this._checkedResults}set checkedResults(n){this._checkedResults=n,this.checkedResultsMap=this.getCheckedResultsMap(this.results.items,n),this.changeRef.markForCheck()}constructor(n){this.changeRef=n,this.galleryViewMode=k.P,this.horizontalBreakpoint=L.m,this._checkedResults=[],this.selectBookmark=new e.bkB,this.checkChanged=new e.bkB,this.actionMode=F.g.Explore,this.actionsEnabled=!0,this.checkedResultsMap={}}handleSelect(n){this.selectBookmark.emit(n)}handleCheckedChange(n,t){this.checkChanged.emit({id:n.id,checked:t})}trackCard(n,t){return t.id}getCheckedResultsMap(n,t){return n.reduce((o,l)=>(o[l.id]=t.includes(l.id),o),{})}static#e=this.\u0275fac=function(t){return new(t||Te)(e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:Te,selectors:[["app-gallery-cards"]],inputs:{results:"results",checkedResults:"checkedResults",actionMode:"actionMode",actionsEnabled:"actionsEnabled"},outputs:{selectBookmark:"selectBookmark",checkChanged:"checkChanged"},decls:4,vars:7,consts:[["data-test","galleryCards",1,"gallery-cards",3,"ngClass"],[1,"gallery-cards__content"],["class","gallery-cards__item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"gallery-cards__item"],[3,"selectBookmark","checkChange","actionMode","actionsEnabled","bookmark","viewMode","responsive","checked"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.nI1(1,"async"),e.j41(2,"ul",1),e.DNE(3,mt,4,11,"li",2),e.k0s()()),2&t&&(e.Y8G("ngClass",e.eq3(5,ht,e.bMT(1,3,o.viewMode$)===o.galleryViewMode.Row)),e.R7$(3),e.Y8G("ngForOf",o.results.items)("ngForTrackBy",o.trackCard))},dependencies:[y.YU,y.Sq,Ye.u,y.Jj],styles:[":host{display:block;height:100%;width:100%}.gallery-cards{display:block;width:100%}.gallery-cards--list .gallery-cards__content{grid-template-columns:100%;grid-gap:0}.gallery-cards__loading{display:flex;justify-content:center;margin-top:20vh}.gallery-cards__content{display:block;padding:1px;height:100%;display:grid;gap:20px;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));grid-auto-rows:1fr;grid-auto-flow:row;justify-content:center}@media (max-width: 498px){.gallery-cards__content{gap:24px}}\n"],encapsulation:2,changeDetection:0})}Ve([(0,c.l6)(d.Y.getViewMode),et("design:type",p.c)],Te.prototype,"viewMode$",void 0),Ve([(0,c.l6)(te.V.getHorizontalBreakpoint),et("design:type",p.c)],Te.prototype,"horizontalBreakpoint$",void 0);var We=function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);return l>3&&a&&Object.defineProperty(n,t,a),a},Ke=function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,n)};const _t=["body"],yt=()=>["/results/modules"];function ft(i,n){1&i&&e.nrm(0,"app-zspace-alert",8)}function bt(i,n){if(1&i){const t=e.RV6();e.j41(0,"div"),e.DNE(1,ft,1,0,"app-zspace-alert",6),e.j41(2,"app-gallery-cards",7),e.bIt("selectBookmark",function(l){e.eBV(t);const a=e.XpG();return e.Njj(a.handleSelect(l))})("checkChanged",function(l){e.eBV(t);const a=e.XpG();return e.Njj(a.handleCheckedChange(l))}),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.zspaceRestricted),e.R7$(),e.Y8G("actionMode",t.actionMode)("actionsEnabled",t.actionsEnabled)("results",t.results)("checkedResults",t.checkedResults)}}function Ct(i,n){1&i&&(e.j41(0,"div",9),e.nrm(1,"app-spinner",10),e.k0s())}function vt(i,n){1&i&&(e.j41(0,"div",15)(1,"div",16)(2,"div",17),e.EFF(3,"Add your first 3D model"),e.k0s(),e.EFF(4," This is your library of saved anatomy models in the BioDigital Human. Customize, manage, and publish your models at any time. "),e.k0s(),e.j41(5,"button",18),e.EFF(6," Start Exploring "),e.k0s()()),2&i&&(e.R7$(5),e.Y8G("routerLink",e.lJ4(1,yt)))}function Mt(i,n){1&i&&(e.qex(0),e.j41(1,"div",19),e.nrm(2,"app-icon",20),e.k0s(),e.j41(3,"p",21),e.EFF(4,"No results found"),e.k0s(),e.j41(5,"p",22),e.EFF(6,"Can't find what you're looking for?"),e.k0s(),e.j41(7,"button",23),e.EFF(8," Submit A Request "),e.k0s(),e.bVm()),2&i&&(e.R7$(7),e.Y8G("uppercase",!0))}function Tt(i,n){if(1&i&&(e.j41(0,"div",11),e.qex(1,12),e.DNE(2,vt,7,2,"div",13)(3,Mt,9,1,"ng-container",14),e.bVm(),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngSwitch",t.emptyMessage),e.R7$(),e.Y8G("ngSwitchCase","team"),e.R7$(),e.Y8G("ngSwitchCase","default")}}class fe{get results(){return this._results.value}set results(n){this._results.next(n),this.changeDetectorRef.markForCheck()}constructor(n,t,o){this.changeDetectorRef=n,this.store=t,this.bookmarkService=o,this.galleryViewMode=k.P,this.loading=!1,this.viewMode=k.P.Card,this._results=new De.t({total:0,items:[]}),this.checkedResults=[],this.actionMode=F.g.Explore,this.actionsEnabled=!0,this.selectBookmark=new e.bkB,this.zspaceRestricted=!1,this.emptyMessage="default",this.ngUnsubscribe=new S.B}ngOnInit(){(0,Ge.z)([this.store.select(d.Y.getSearchConfig),this._results]).pipe((0,W.F)((n,t)=>(0,C.isEqual)(n,t)),(0,Ae.M)(()=>{this.emptyMessage="none",this.changeDetectorRef.markForCheck()}),(0,de.B)(100),(0,g.Q)(this.ngUnsubscribe),(0,Ae.M)(()=>{const n=this.store.selectSnapshot(d.Y.isZSpaceSearch);this.zspaceRestricted=n&&this.bookmarkService.getZSpaceRestriction()!==se.O.None}),(0,w.p)(([n,t])=>!(0,C.isNil)(n)&&0===t.total)).subscribe(([n,t])=>{this.updateEmptyMessage(n,t),this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleSelect(n){this.selectBookmark.emit(n)}handleCheckedChange(n){this.store.dispatch(new h.w.CheckItem(n.id,n.checked))}handleSort(n){const t=this.store.selectSnapshot(d.Y.getSearchOptions);t.sortBy=n,this.store.dispatch(new h.w.SetSearchOptions(t)),0===t.sortBy.fields.length&&this.store.dispatch(new h.w.SearchStudio)}updateEmptyMessage(n,t){this.emptyMessage="default",""===n.query&&(n.type===b.n.Collection||n.type===b.n.Organization||n.type===b.n.Private)&&0===t.total&&(this.emptyMessage="team")}scrollToTop(){this.body.nativeElement.scrollTo({top:0})}static#e=this.\u0275fac=function(t){return new(t||fe)(e.rXU(e.gRc),e.rXU(c.il),e.rXU(Ne.x))};static#t=this.\u0275cmp=e.VBU({type:fe,selectors:[["app-gallery-results"]],viewQuery:function(t,o){if(1&t&&e.GBs(_t,7),2&t){let l;e.mGM(l=e.lsd())&&(o.body=l.first)}},inputs:{loading:"loading",viewMode:"viewMode",results:"results",checkedResults:"checkedResults",actionMode:"actionMode",actionsEnabled:"actionsEnabled"},outputs:{selectBookmark:"selectBookmark"},decls:6,vars:3,consts:[["body",""],["data-test","galleryResults",1,"gallery-results"],[1,"gallery-results__body"],[4,"ngIf"],["class","gallery-results__loading",4,"ngIf"],["class","gallery-results__empty",4,"ngIf"],["class","block mb-4",4,"ngIf"],[3,"selectBookmark","checkChanged","actionMode","actionsEnabled","results","checkedResults"],[1,"block","mb-4"],[1,"gallery-results__loading"],["size","huge","direction","vertical","label","Loading"],[1,"gallery-results__empty"],[3,"ngSwitch"],["class","gallery-results__explore",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"gallery-results__explore"],["role","status",1,"mb-5"],[1,"text-base","mb-2"],["app-button","","buttonSize","xl","buttonType","primary",3,"routerLink"],[1,"gallery-results__magnifying-glass","mb-8"],["icon","search"],["role","status",1,"gallery-results__no-results-title","mb-3"],[1,"gallery-results__no-results-copy","mb-8"],["app-button","","buttonType","primary","data-test","noResultsButton",3,"uppercase"]],template:function(t,o){1&t&&(e.j41(0,"div",1)(1,"div",2,0),e.DNE(3,bt,3,5,"div",3)(4,Ct,2,0,"div",4)(5,Tt,4,3,"div",5),e.k0s()()),2&t&&(e.R7$(3),e.Y8G("ngIf",o.viewMode===o.galleryViewMode.Card&&!o.loading&&o.results),e.R7$(),e.Y8G("ngIf",o.loading),e.R7$(),e.Y8G("ngIf",!o.loading&&o.results&&0===o.results.total))},dependencies:[ie.Wk,U.Q,y.bT,y.ux,y.e1,ce.tI,I.R,Me.u,Te],styles:[".gallery-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;min-height:64px;position:relative}.gallery-results__loading[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.gallery-results__body[_ngcontent-%COMP%]{padding:0 0 120px;flex:1 1 100%}.gallery-results__empty[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;color:#96a8c0;display:flex;flex-direction:column;height:100%;width:100%;min-height:64px;align-items:center;justify-content:center;text-align:center}.gallery-results__explore[_ngcontent-%COMP%]{max-width:530px}.gallery-results__no-results-title[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem;font-weight:600;color:#374a68}.gallery-results__no-results-body[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;color:#374a68}.gallery-results__magnifying-glass[_ngcontent-%COMP%]{height:84px;width:84px;border-radius:50%;font-size:40px;line-height:84px;color:#61779e;background-color:#eaeff5}@media (max-width: 959px){.gallery-results__body[_ngcontent-%COMP%]{padding-bottom:48px}.gallery-results__no-results-title[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}.gallery-results__no-results-body[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}}"],changeDetection:0})}We([(0,c.l6)(d.Y.getSearchOptions),Ke("design:type",p.c)],fe.prototype,"searchOptions$",void 0),We([(0,c.l6)(d.Y.getSortOptions),Ke("design:type",p.c)],fe.prototype,"sortOptions$",void 0),We([(0,c.l6)(d.Y.getSort),Ke("design:type",p.c)],fe.prototype,"sort$",void 0);var kt=s(68511),Ue=s(75736),ze=s(10588),Ot=s(86225);const St=(i,n)=>n.key;function Rt(i,n){if(1&i&&(e.j41(0,"div",3),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",t.key," ")}}function Gt(i,n){if(1&i&&e.nrm(0,"app-category-image",6),2&i){const t=e.XpG().$implicit,o=e.XpG(3);e.Y8G("color",o.isSelected(t.id)?"color":"mono")("category",t.id)}}function Pt(i,n){if(1&i&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.subtitle)}}function xt(i,n){if(1&i){const t=e.RV6();e.j41(0,"li")(1,"button",4),e.bIt("click",function(){const l=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.handleSelectCategory(l.id))}),e.j41(2,"div",5),e.DNE(3,Gt,1,2,"app-category-image",6),e.j41(4,"div",7)(5,"div",8),e.EFF(6),e.k0s(),e.DNE(7,Pt,2,1,"div",9),e.k0s()()()()}if(2&i){const t=n.$implicit,o=e.XpG(3);e.R7$(),e.Y8G("selected",o.isSelected(t.id)),e.BMQ("aria-disabled",o.isSelected(t.id))("data-test",t.id+"GalleryCategory"),e.R7$(2),e.vxM(t.icon?3:-1),e.R7$(3),e.JRh(t.title),e.R7$(),e.vxM(t.subtitle?7:-1)}}function It(i,n){if(1&i&&(e.j41(0,"app-navigation-list-container")(1,"nav"),e.DNE(2,Rt,2,1,"div",1),e.j41(3,"ul"),e.DNE(4,xt,8,6,"li",2),e.k0s()()()),2&i){const t=e.XpG().$implicit;e.R7$(2),e.Y8G("ngIf","all"!==t.key),e.R7$(2),e.Y8G("ngForOf",t.value)}}function jt(i,n){1&i&&e.DNE(0,It,5,2,"app-navigation-list-container"),2&i&&e.vxM(n.$implicit.value.length?0:-1)}let Ft=(()=>{class i extends kt.P{originalOrder(){return 0}static#e=this.\u0275fac=(()=>{let t;return function(l){return(t||(t=e.xGo(i)))(l||i)}})();static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-gallery-categories"]],features:[e.Vt3],decls:4,vars:4,consts:[["label","Category",3,"collapsible"],["class","mt-5 text-xs uppercase gallery-categories__header",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mt-5","text-xs","uppercase","gallery-categories__header"],["type","button","app-navigation-list-item","",1,"gallery-categories__item",3,"click","selected"],[1,"flex","flex-row","items-center","w-full"],[1,"gallery-categories__image",3,"color","category"],[1,"flex","flex-col","gap-1"],[1,"flex-auto","gallery-categories__title"],[1,"text-xs","font-normal"]],template:function(o,l){1&o&&(e.j41(0,"app-navigation-panel",0),e.Z7z(1,jt,1,1,null,null,St),e.nI1(3,"keyvalue"),e.k0s()),2&o&&(e.Y8G("collapsible",!0),e.R7$(),e.Dyx(e.i5U(3,1,l.groupedCategories,l.originalOrder)))},dependencies:[y.Sq,y.bT,E.k,Ue.T,ze.d,Ot.f,y.lG],styles:[".gallery-categories__header[_ngcontent-%COMP%]{color:#61779e;padding:12px 20px}.gallery-categories__item[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:4px 0;background:none;border:none;text-align:left}.gallery-categories__title[_ngcontent-%COMP%]{font-size:14px;flex:1 1 auto}.gallery-categories__image[_ngcontent-%COMP%]{margin:0 20px 0 0;flex:0 0 24px;height:24px}"],changeDetection:0})}return i})();var x=s(21424),tt=s(17365),$=s(18152),be=s(34006),$t=s(87505),Bt=s(98101);function Et(i,n){1&i&&(e.j41(0,"div"),e.EFF(1," A collection already exists with that name. "),e.k0s())}function wt(i,n){1&i&&(e.j41(0,"div"),e.EFF(1,"Collection name is required."),e.k0s())}function Dt(i,n){if(1&i&&(e.j41(0,"div",12),e.DNE(1,Et,2,0,"div",13)(2,wt,2,0,"div",13),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.collectionName.errors?null:t.collectionName.errors.duplicate),e.R7$(),e.Y8G("ngIf",null==t.collectionName.errors?null:t.collectionName.errors.required)}}let nt=(()=>{class i{get collectionName(){return this.form.get("collectionName")}constructor(t,o,l,a){this.dialogRef=t,this.data=o,this.store=l,this.formBuilder=a}ngOnInit(){this.title=this.data.collection?"Edit collection":"New collection",this.confirmText=this.data.collection?"Save changes":"Create collection",this.collectionNames=this.store.selectSnapshot(x.q.getCollections).map(o=>o.collection_name);const t=this.data.collection?this.data.collection.collection_name:this.getNewName();this.form=this.formBuilder.group({collectionName:[t,[m.k0.required,m.k0.maxLength(60),m.k0.required,this.duplicateNameValidator.bind(this)]]})}handleCancelClick(){this.dialogRef.close()}handleConfirmClick(){this.submit()}submit(){if(this.collectionName.invalid)return;const t=this.collectionName.value.trim();this.store.dispatch(this.data.collection?new $.jK(this.data.collection,t):new $.qS(this.data.groupId,t)),this.dialogRef.close(t)}duplicateNameValidator(t){const o=t.value?t.value.trim():"",l=this.collectionNames.includes(o);return l?{duplicate:l}:null}getNewName(){let t="New Collection",o=1;for(;this.collectionNames.includes(t);)t=`New Collection ${o}`,o++;return t}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(be.CP),e.rXU(be.Vh),e.rXU(c.il),e.rXU(m.ze))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-collection-name-dialog"]],decls:15,vars:6,consts:[["collectionNameInput",""],["mat-dialog-title",""],["mat-dialog-content",""],[1,"dialog"],[3,"submit","formGroup"],["label","Name"],["type","text","data-test","collectionNameInput","formControlName","collectionName","cdkFocusInitial","","maxlength","60",1,"input","w-full"],[3,"field"],["class","text-red-700 text-xs mb-2",4,"ngIf"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","buttonType","default","data-test","collectionNameCancel","type","button",3,"click"],["app-button","","buttonType","primary","data-test","collectionNameConfirm","type","button",3,"click","disabled"],[1,"text-red-700","text-xs","mb-2"],[4,"ngIf"]],template:function(o,l){if(1&o){const a=e.RV6();e.j41(0,"h1",1),e.EFF(1),e.k0s(),e.j41(2,"div",2)(3,"div",3)(4,"form",4),e.bIt("submit",function(){return e.eBV(a),e.Njj(l.submit())}),e.j41(5,"app-form-field",5),e.nrm(6,"input",6,0)(8,"app-character-counter",7),e.DNE(9,Dt,3,2,"div",8),e.k0s()()()(),e.j41(10,"div",9)(11,"button",10),e.bIt("click",function(){return e.eBV(a),e.Njj(l.handleCancelClick())}),e.EFF(12," Cancel "),e.k0s(),e.j41(13,"button",11),e.bIt("click",function(){return e.eBV(a),e.Njj(l.handleConfirmClick())}),e.EFF(14),e.k0s()()}if(2&o){const a=e.sdS(7);e.R7$(),e.JRh(l.title),e.R7$(3),e.Y8G("formGroup",l.form),e.R7$(4),e.Y8G("field",a),e.R7$(),e.Y8G("ngIf",l.collectionName.invalid&&l.collectionName.dirty),e.R7$(4),e.Y8G("disabled",l.collectionName.invalid),e.R7$(),e.SpI(" ",l.confirmText," ")}},dependencies:[y.bT,be.BI,be.E7,be.Yi,U.Q,$t.K,Bt.P,m.qT,m.me,m.BC,m.cb,m.tU,m.j4,m.JD],changeDetection:0})}return i})();var ot=s(84370),Ze=s(81391),it=s(99504),At=s(95416),qe=s(14823),lt=s(71997),at=s(17215),Nt=s(21827);let Yt=(()=>{class i{constructor(t,o){this.storageService=t,this.router=o,this.organizations=[],this.interacted=new e.bkB}handleCancel(){this.setInteracted()}handleViewTeamsClick(){this.setInteracted(),this.router.navigateByUrl("/account/team")}setInteracted(){this.storageService.setLocalItem(at.UT.UserJoinNotificationInteracted,!0),this.interacted.next()}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(at.n$),e.rXU(ie.Ix))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-team-join-notification"]],inputs:{organizations:"organizations"},outputs:{interacted:"interacted"},decls:10,vars:4,consts:[[1,"team-join","flex","flex-col","p-5"],[1,"flex","justify-between","items-center"],[1,"text-sm","font-semibold"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Close",3,"click"],["icon","times","size","md"],[3,"readonly","compact","organizations"],[1,"flex","flex-row-reverse","mt-3"],["app-button","","buttonSize","xs","buttonType","text","buttonTheme","light",1,"team-join__view","font-semibold",3,"click"]],template:function(o,l){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3,"Join a Team"),e.k0s(),e.j41(4,"button",3),e.bIt("click",function(){return l.handleCancel()}),e.nrm(5,"app-icon",4),e.k0s()(),e.nrm(6,"app-team-join",5),e.j41(7,"div",6)(8,"button",7),e.bIt("click",function(){return l.handleViewTeamsClick()}),e.EFF(9," View Teams "),e.k0s()()()),2&o&&(e.R7$(4),e.BMQ("aria-label","Close"),e.R7$(2),e.Y8G("readonly",!0)("compact",!0)("organizations",l.organizations))},dependencies:[U.Q,I.R,Nt.H],styles:[".team-join[_ngcontent-%COMP%]{border-radius:4px;background-color:#f0f8ff}.team-join__view[_ngcontent-%COMP%]{letter-spacing:1px}"],changeDetection:0})}return i})();var st=s(66571),Vt=s(87732),K=s(59115),Le=function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);return l>3&&a&&Object.defineProperty(n,t,a),a},Xe=function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,n)};const Ut=()=>["/account/team"];function zt(i,n){if(1&i&&(e.j41(0,"div"),e.nrm(1,"img",12),e.nI1(2,"async"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("src",e.bMT(2,1,t.organizationLogo$),e.B4B)}}function Lt(i,n){if(1&i&&(e.j41(0,"div",13),e.EFF(1),e.nI1(2,"async"),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(),e.SpI(" ",null==(t=e.bMT(2,1,o.organization$))?null:t.name," ")}}function Xt(i,n){if(1&i&&(e.j41(0,"button",14),e.nrm(1,"app-icon",15),e.k0s()),2&i){e.XpG();const t=e.sdS(10);e.Y8G("matMenuTriggerFor",t)}}function Qt(i,n){1&i&&(e.j41(0,"button",16),e.EFF(1," Team Settings "),e.k0s()),2&i&&e.Y8G("routerLink",e.lJ4(1,Ut))}function Ht(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const l=e.XpG(2);return e.Njj(l.handleInviteTeammatesClick())}),e.EFF(1," Invite Members "),e.k0s()}}function Jt(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",18),e.bIt("click",function(){e.eBV(t);const l=e.XpG(2);return e.Njj(l.handleInviteTeammatesClick())}),e.nrm(1,"app-icon",19),e.k0s()}}function Wt(i,n){if(1&i&&(e.j41(0,"div",4)(1,"div",5),e.DNE(2,zt,3,3,"div",6),e.nI1(3,"async"),e.DNE(4,Lt,3,3,"ng-template",null,1,e.C5r)(6,Xt,2,1,"button",7),e.nI1(7,"async"),e.nI1(8,"async"),e.j41(9,"mat-menu",null,2),e.DNE(11,Qt,2,2,"button",8),e.nI1(12,"async"),e.DNE(13,Ht,2,0,"button",9),e.nI1(14,"async"),e.k0s()(),e.j41(15,"div")(16,"span",10),e.EFF(17),e.k0s(),e.DNE(18,Jt,2,0,"button",11),e.nI1(19,"async"),e.k0s()()),2&i){let t,o;const l=e.sdS(5),a=e.XpG();e.R7$(2),e.Y8G("ngIf",e.bMT(3,7,a.organizationLogo$))("ngIfElse",l),e.R7$(4),e.Y8G("ngIf",(null==(t=e.bMT(7,9,a.userRole$))?null:t.role_name)===a.userRoleEnum.Creator||(null==(t=e.bMT(8,11,a.userRole$))?null:t.role_name)===a.userRoleEnum.Admin),e.R7$(5),e.Y8G("ngIf",(null==(o=e.bMT(12,13,a.userRole$))?null:o.role_name)===a.userRoleEnum.Admin),e.R7$(2),e.Y8G("ngIf",e.bMT(14,15,a.canInviteUsers$)),e.R7$(4),e.JRh(a.membersCount),e.R7$(),e.Y8G("ngIf",e.bMT(19,17,a.canInviteUsers$))}}function Kt(i,n){if(1&i&&(e.nrm(0,"img",12),e.nI1(1,"async")),2&i){const t=e.XpG(2);e.Y8G("src",e.bMT(1,1,t.organizationLogo$),e.B4B)}}function Zt(i,n){if(1&i&&(e.DNE(0,Kt,2,3,"img",20),e.nI1(1,"async")),2&i){const t=e.XpG();e.Y8G("ngIf",e.bMT(1,1,t.organizationLogo$))}}class _e{constructor(n){this.dialogService=n,this.galleryActionMode=F.g,this.userRoleEnum=Vt.x,this.actionMode=F.g.Explore,this.ngUnsubscribe=new S.B}ngOnInit(){this.initOrganization()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleInviteTeammatesClick(){this.dialogService.openAddUserDialog()}initOrganization(){this.organization$.pipe((0,w.p)(n=>!(0,C.isNil)(n)),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.membersCount=`${n.users_count} member${1===n.users_count?"":"s"}`})}static#e=this.\u0275fac=function(t){return new(t||_e)(e.rXU(st.o))};static#t=this.\u0275cmp=e.VBU({type:_e,selectors:[["app-gallery-banner"]],inputs:{actionMode:"actionMode"},decls:3,vars:2,consts:[["importChapterBanner",""],["teamName",""],["teamOptionsMenu","matMenu"],["class","gallery-banner",4,"ngIf","ngIfElse"],[1,"gallery-banner"],[1,"gallery-banner__header","pb-2"],[4,"ngIf","ngIfElse"],["class","ml-2","app-button","","buttonTheme","light","buttonShape","square","buttonSize","sm","matTooltip","Team options","data-test","galleryBannerTeamOptions",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item","",3,"routerLink",4,"ngIf"],["mat-menu-item","","data-test","bannerMenuAddUserButton",3,"click",4,"ngIf"],[1,"gallery-banner__member-count","pr-2"],["app-button","","buttonTheme","light","buttonShape","square","matTooltip","Invite Members","data-test","bannerAddUserButton",3,"click",4,"ngIf"],[1,"gallery-banner__logo",3,"src"],[1,"gallery-banner__name"],["app-button","","buttonTheme","light","buttonShape","square","buttonSize","sm","matTooltip","Team options","data-test","galleryBannerTeamOptions",1,"ml-2",3,"matMenuTriggerFor"],["icon","chevron-down"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","","data-test","bannerMenuAddUserButton",3,"click"],["app-button","","buttonTheme","light","buttonShape","square","matTooltip","Invite Members","data-test","bannerAddUserButton",3,"click"],["icon","user-plus","size","sm",1,"gallery-banner__add-member"],["class","gallery-banner__logo",3,"src",4,"ngIf"]],template:function(t,o){if(1&t&&e.DNE(0,Wt,20,19,"div",3)(1,Zt,2,3,"ng-template",null,0,e.C5r),2&t){const l=e.sdS(2);e.Y8G("ngIf",o.actionMode===o.galleryActionMode.Explore)("ngIfElse",l)}},dependencies:[ie.Wk,U.Q,y.bT,K.kk,K.fb,K.Cp,qe.oV,I.R,y.Jj],styles:["[_nghost-%COMP%]{display:block;width:100%}.gallery-banner[_ngcontent-%COMP%]{border:solid #d7e0ea;border-width:1px;border-radius:4px;padding:16px 12px 8px 16px}.gallery-banner__header[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row;justify-content:space-between}.gallery-banner__logo[_ngcontent-%COMP%]{display:block;width:100%;max-height:48px}.gallery-banner__name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;font-size:.875rem;line-height:1.25rem;font-weight:600}.gallery-banner__member-count[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;font-weight:500;color:#61779e}.gallery-banner__add-member[_ngcontent-%COMP%]{color:#374a68}"],changeDetection:0})}Le([(0,c.l6)(x.q.getOrganizationLogo),Xe("design:type",p.c)],_e.prototype,"organizationLogo$",void 0),Le([(0,c.l6)(x.q.getOrganization),Xe("design:type",p.c)],_e.prototype,"organization$",void 0),Le([(0,c.l6)(Q.k.getUserRole),Xe("design:type",p.c)],_e.prototype,"userRole$",void 0),Le([(0,c.l6)(Q.k.canInviteUsers),Xe("design:type",p.c)],_e.prototype,"canInviteUsers$",void 0);var qt=s(37737),ct=s(25780),Pe=function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);return l>3&&a&&Object.defineProperty(n,t,a),a},xe=function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,n)};function en(i,n){if(1&i&&(e.j41(0,"span",7),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.collection.collection_name," ")}}function tn(i,n){if(1&i){const t=e.RV6();e.j41(0,"input",8),e.bIt("blur",function(l){e.eBV(t);const a=e.XpG();return e.Njj(a.handleCollectionRename(l))})("keyup.enter",function(l){e.eBV(t);const a=e.XpG();return e.Njj(a.handleCollectionRename(l))})("keyup.escape",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.setRenameMode(!1))}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("value",t.collection.collection_name)}}function nn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",9),e.bIt("menuOpened",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleMenuOpened())})("menuClosed",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleMenuClosed())}),e.nrm(1,"app-icon",10),e.k0s()}if(2&i){e.XpG();const t=e.sdS(9);e.Y8G("matMenuTriggerFor",t)}}class me{constructor(n,t,o,l){this.store=n,this.dialog=t,this.dialogService=o,this.changeDetection=l,this.renameMode=!1,this.menuOpen=!1,this.ngUnsubscribe=new S.B}ngOnInit(){this.collectionRenaming$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.renameMode=this.collection===n,this.changeDetection.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleMenuOpened(){this.menuOpen=!0}handleMenuClosed(){this.menuOpen=!1}handleSelectCollection(){if(this.curCollectionId!==this.collection.collection_id){const n=new O.Vf(this.store.selectSnapshot(x.q.getOrganization).id,this.collection.collection_id);this.store.dispatch(new h.w.SetSearchConfig(n))}}handleDeleteCollection(){this.dialogService.openConfirmDialog({maxWidth:"480px",data:{titleText:`Delete "${this.collection.collection_name}"`,bodyText:"Are you sure you want to delete this collection? All 3D models in this collection will still be available in Team \u2192 All Models.",confirmText:"Delete",confirmColor:"warn"}}).afterClosed().subscribe(t=>{t&&this.store.dispatch(new $.T1(this.collection))})}openCollectionNameDialog(){this.dialog.open(nt,{id:ot.t.CollectionNameDialog,width:"480px",data:{groupId:this.collection.group_id,collection:this.collection}}).afterClosed().subscribe(o=>{o&&(this.collection.collection_name=o,this.changeDetection.markForCheck())})}handleCollectionRename(n){const o=n.target.value,a=this.store.selectSnapshot(x.q.getCollections).find(r=>r.collection_name===o);o&&!a&&(this.store.dispatch(new $.jK(this.collection,o)),this.collection.collection_name=o,this.changeDetection.markForCheck()),this.setRenameMode(!1)}setRenameMode(n){if(this.store.selectSnapshot(Q.k.isAdmin)){this.store.dispatch(new $.ks(n?this.collection:null));const t=this.store.selectSnapshot(d.Y.getSidenav);this.store.dispatch(new h.w.SetSidenav({...t,disableClose:n}))}}static#e=this.\u0275fac=function(t){return new(t||me)(e.rXU(c.il),e.rXU(be.bZ),e.rXU(st.o),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:me,selectors:[["app-gallery-collection"]],inputs:{collection:"collection",curCollectionId:"curCollectionId"},decls:14,vars:19,consts:[["collectionsOptions","matMenu"],["data-test","galleryCollectionItem","role","button","tabindex","0",1,"gallery-collection",3,"click","keyup.enter","dblclick"],["class","gallery-collection__title",4,"ngIf"],["type","text","appEventFence","","appAutoFocus","","class","input","data-test","galleryCollectionInput",3,"value","blur","keyup.enter","keyup.escape",4,"ngIf"],["class","gallery-collection__options","appEventFence","","app-button","","buttonSize","xs","buttonTheme","light","buttonShape","square","matTooltip","Options","data-test","galleryCollectionOptions",3,"matMenuTriggerFor","menuOpened","menuClosed",4,"ngIf"],["mat-menu-item","","data-test","galleryCollectionRenameButton",3,"click"],["mat-menu-item","","data-test","galleryCollectionDeleteButton",1,"text-red-700",3,"click"],[1,"gallery-collection__title"],["type","text","appEventFence","","appAutoFocus","","data-test","galleryCollectionInput",1,"input",3,"blur","keyup.enter","keyup.escape","value"],["appEventFence","","app-button","","buttonSize","xs","buttonTheme","light","buttonShape","square","matTooltip","Options","data-test","galleryCollectionOptions",1,"gallery-collection__options",3,"menuOpened","menuClosed","matMenuTriggerFor"],["icon","ellipsis-v"]],template:function(t,o){if(1&t){const l=e.RV6();e.j41(0,"div",1),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("click",function(){return e.eBV(l),e.Njj(o.handleSelectCollection())})("keyup.enter",function(){return e.eBV(l),e.Njj(o.handleSelectCollection())})("dblclick",function(){return e.eBV(l),e.Njj(o.setRenameMode(!0))}),e.DNE(4,en,2,1,"span",2)(5,tn,1,1,"input",3)(6,nn,2,1,"button",4),e.nI1(7,"async"),e.k0s(),e.j41(8,"mat-menu",null,0)(10,"button",5),e.bIt("click",function(){return e.eBV(l),e.Njj(o.openCollectionNameDialog())}),e.EFF(11," Rename "),e.k0s(),e.j41(12,"button",6),e.bIt("click",function(){return e.eBV(l),e.Njj(o.handleDeleteCollection())}),e.EFF(13," Delete "),e.k0s()()}2&t&&(e.AVh("gallery-collection--disabled",e.bMT(1,11,o.collectionsLoading$)||e.bMT(2,13,o.removingCollection$)||e.bMT(3,15,o.updatingCollection$))("gallery-collection--menu-open",o.menuOpen)("gallery-collection--selected",o.collection.collection_id===o.curCollectionId)("gallery-collection--renaming",o.renameMode),e.R7$(4),e.Y8G("ngIf",!o.renameMode),e.R7$(),e.Y8G("ngIf",o.renameMode),e.R7$(),e.Y8G("ngIf",e.bMT(7,17,o.isAdmin$)&&!o.renameMode))},dependencies:[U.Q,y.bT,qt.B,ct.L,K.kk,K.fb,K.Cp,qe.oV,I.R,y.Jj],styles:['.gallery-collection[_ngcontent-%COMP%]{display:flex;flex-grow:1;align-items:center;justify-content:space-between;position:relative;padding:8px 20px;min-height:48px;outline:none;font-size:.875rem;line-height:1.25rem;color:#1c2a3f;text-align:left}.gallery-collection[_ngcontent-%COMP%]:after{content:"";position:absolute;background:#f2f5fb;z-index:-1;border-radius:4px;inset:0 12px;opacity:0}.gallery-collection--renaming[_ngcontent-%COMP%]:after{background:#f0f8ff}.gallery-collection[_ngcontent-%COMP%]:hover:not(.gallery-collection--selected){cursor:pointer}.gallery-collection[_ngcontent-%COMP%]:hover:not(.gallery-collection--selected):after{background:#f9fafd;opacity:1}.gallery-collection[_ngcontent-%COMP%]:hover   .gallery-collection__options[_ngcontent-%COMP%], .gallery-collection[_ngcontent-%COMP%]:focus-within   .gallery-collection__options[_ngcontent-%COMP%], .gallery-collection--menu-open[_ngcontent-%COMP%]   .gallery-collection__options[_ngcontent-%COMP%]{visibility:visible}.gallery-collection[_ngcontent-%COMP%]:focus-within:not(.gallery-collection--renaming):after, .gallery-collection--menu-open[_ngcontent-%COMP%]:after{outline:#2d72dc solid 2px!important;opacity:1}.gallery-collection--disabled[_ngcontent-%COMP%]{pointer-events:none}.gallery-collection--selected[_ngcontent-%COMP%]{font-weight:600}.gallery-collection--selected[_ngcontent-%COMP%]:after{opacity:1}.gallery-collection__title[_ngcontent-%COMP%]{word-break:break-word}.gallery-collection__options[_ngcontent-%COMP%]{margin-left:8px;visibility:hidden}'],changeDetection:0})}Pe([(0,c.l6)(Q.k.isAdmin),xe("design:type",p.c)],me.prototype,"isAdmin$",void 0),Pe([(0,c.l6)(x.q.getCollectionsLoading),xe("design:type",p.c)],me.prototype,"collectionsLoading$",void 0),Pe([(0,c.l6)(x.q.getRemovingCollection),xe("design:type",p.c)],me.prototype,"removingCollection$",void 0),Pe([(0,c.l6)(x.q.getUpdatingCollection),xe("design:type",p.c)],me.prototype,"updatingCollection$",void 0),Pe([(0,c.l6)(x.q.getCollectionRenaming),xe("design:type",p.c)],me.prototype,"collectionRenaming$",void 0);var Z=function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);return l>3&&a&&Object.defineProperty(n,t,a),a},q=function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,n)};const on=["teamCollections"];function ln(i,n){if(1&i&&(e.j41(0,"div",4)(1,"div",5),e.nrm(2,"app-gallery-banner",6),e.k0s()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("actionMode",t.actionMode)}}function an(i,n){if(1&i){const t=e.RV6();e.j41(0,"li")(1,"div",7)(2,"p",8),e.EFF(3,"Private"),e.k0s()(),e.j41(4,"ul",9)(5,"li")(6,"button",10),e.nI1(7,"async"),e.nI1(8,"async"),e.nI1(9,"async"),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleSelectPrivate())}),e.EFF(10," All Models "),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(6),e.Y8G("selected",e.bMT(7,3,t.searchType$)===t.searchType.Private),e.BMQ("data-selected",e.bMT(8,5,t.searchType$)===t.searchType.Private)("aria-disabled",e.bMT(9,7,t.searchType$)===t.searchType.Private)}}function sn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",15),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("click",function(){e.eBV(t);const l=e.XpG(2);return e.Njj(l.handleAddCollection())}),e.nrm(3,"app-icon",16),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("disabled",e.bMT(1,1,t.collectionsLoading$)||e.bMT(2,3,t.addingCollection$))}}function cn(i,n){if(1&i&&(e.j41(0,"li",17),e.nrm(1,"app-gallery-collection",18),e.k0s()),2&i){const t=n.$implicit,o=e.XpG(2);e.R7$(),e.Y8G("collection",t)("curCollectionId",o.collectionId),e.BMQ("data-id",t.collection_id)("aria-disabled",t.collection_id===o.collectionId)}}function rn(i,n){if(1&i){const t=e.RV6();e.j41(0,"li")(1,"div",7)(2,"p",8),e.EFF(3,"Team"),e.k0s(),e.DNE(4,sn,4,5,"button",11),e.nI1(5,"async"),e.k0s(),e.j41(6,"ul",12,0),e.nI1(8,"async"),e.nI1(9,"async"),e.bIt("cdkDropListDropped",function(l){e.eBV(t);const a=e.XpG();return e.Njj(a.handleDrop(l))}),e.j41(10,"li")(11,"button",13),e.nI1(12,"async"),e.nI1(13,"async"),e.nI1(14,"async"),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleSelectAll())}),e.EFF(15," All Models "),e.k0s()(),e.DNE(16,cn,2,4,"li",14),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",e.bMT(5,6,t.isAdmin$)),e.R7$(2),e.Y8G("cdkDropListDisabled",!0!==e.bMT(8,8,t.isAdmin$)||e.bMT(9,10,t.reorderingCollections$)),e.R7$(5),e.Y8G("selected",e.bMT(12,12,t.searchType$)===t.searchType.Organization),e.BMQ("data-selected",e.bMT(13,14,t.searchType$)===t.searchType.Organization)("aria-disabled",e.bMT(14,16,t.searchType$)===t.searchType.Private),e.R7$(5),e.Y8G("ngForOf",t.collections)}}function pn(i,n){if(1&i){const t=e.RV6();e.j41(0,"li")(1,"div",19),e.nrm(2,"mat-divider",20),e.j41(3,"app-team-join-notification",21),e.nI1(4,"async"),e.bIt("interacted",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleTeamJoinInteracted())}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(3),e.Y8G("organizations",e.bMT(4,1,t.eligibleOrganizations$))}}class V{get collections(){return this._collections}set collections(n){this._collections=Array.isArray(n)?[...n]:[],this.changeDetectorRef.markForCheck()}constructor(n,t,o,l,a){this.dialog=n,this.store=t,this.actions=o,this.snackBar=l,this.changeDetectorRef=a,this.actionMode=F.g.Explore,this.showBanner=!0,this.searchType=b.n,this.ngUnsubscribe=new S.B}ngOnInit(){this.observeCollections(),this.observeSearchConfig()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}observeCollections(){this.store.select(x.q.getCollections).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>this.collections=n),this.organization$.pipe((0,w.p)(n=>!(0,C.isNil)(n)),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{n&&this.store.dispatch(new $._q(n.id))}),this.actions.pipe((0,c.xi)($.dD),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>this.handleAddCollectionSuccess(n)),this.actions.pipe((0,c.xi)($.kW),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>this.handleAddCollectionError()),this.actions.pipe((0,c.xi)($.ob),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>this.handleRemoveCollectionSuccess(n)),this.actions.pipe((0,c.xi)($.Rk),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>this.handleRemoveCollectionError()),this.actions.pipe((0,c.xi)($.qd),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>this.handleRenameCollectionSuccess(n)),this.actions.pipe((0,c.xi)($.BD),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>this.handleRenameCollectionError()),this.actions.pipe((0,c.xi)($.hQ),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>this.handleReorderCollectionsError())}observeSearchConfig(){this.searchConfig$.pipe((0,w.p)(n=>!(0,C.isNil)(n)),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.collectionId=n.type===b.n.Collection?n.collectionId:null,this.showBanner=n.type===b.n.Collection||n.type===b.n.Organization||n.type===b.n.Private&&!this.store.selectSnapshot(Q.k.isPrivateUser),this.changeDetectorRef.markForCheck()})}handleAddCollection(){const n=this.store.selectSnapshot(x.q.getOrganization).id;this.dialog.open(nt,{id:ot.t.CollectionNameDialog,width:"480px",data:{groupId:n}})}handleSelectAll(){this.loadAllTeamModels()}handleSelectPrivate(){const n=new O.Y0;this.store.dispatch(new h.w.SetSearchConfig(n))}handleDrop(n){(0,Ze.HD)(this.collections,n.previousIndex,n.currentIndex),this.store.dispatch(new $.hu(this.store.selectSnapshot(x.q.getOrganization).id,this.collections))}handleTeamJoinInteracted(){const n=this.store.selectSnapshot(d.Y.getSidenav);this.store.dispatch(new h.w.SetSidenav({...n,enabled:!1}))}loadAllTeamModels(){const n=new O.S8(this.store.selectSnapshot(x.q.getOrganization).id);this.store.dispatch(new h.w.SetSearchConfig(n))}loadCollection(n){const t=new O.Vf(this.store.selectSnapshot(x.q.getOrganization).id,n);this.store.dispatch(new h.w.SetSearchConfig(t))}handleAddCollectionSuccess(n){this.actions.pipe((0,c.xi)($.dl),(0,tt.s)(1),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{const o=this.store.selectSnapshot(x.q.getCollections).find(l=>l.collection_name===n.collectionName);this.loadCollection(o.collection_id),this.scrollToCollection(o.collection_id)}),this.store.dispatch(new $._q(n.organizationId)),this.snackBar.open(`Successfully added "${n.collectionName}".`)}handleAddCollectionError(){this.snackBar.open("There was a problem adding the collection.")}handleRemoveCollectionSuccess(n){this.scrollToCollection(0),this.loadAllTeamModels(),this.store.dispatch(new $._q(n.collection.group_id)),this.snackBar.open(`Successfully deleted "${n.collection.collection_name}".`)}handleRemoveCollectionError(){this.snackBar.open("There was a problem deleting the collection.")}handleReorderCollectionsError(){this.collections=this.store.selectSnapshot(x.q.getCollections),this.snackBar.open("There was a problem re-ordering the collections.")}handleRenameCollectionSuccess(n){this.collectionId===n.collection.collection_id&&this.loadCollection(n.collection.collection_id),this.actions.pipe((0,c.xi)($.dl),(0,tt.s)(1),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.scrollToCollection(n.collection.collection_id)}),this.store.dispatch(new $._q(n.collection.group_id))}handleRenameCollectionError(){this.snackBar.open("There was a problem renaming the collection.");const n=this.store.selectSnapshot(x.q.getOrganization).id;this.store.dispatch(new $._q(n))}scrollToCollection(n){const o=this.teamCollections.nativeElement.querySelector(`[data-id="${n}"]`);o&&o.scrollIntoView({block:"center"})}static#e=this.\u0275fac=function(t){return new(t||V)(e.rXU(be.bZ),e.rXU(c.il),e.rXU(c.En),e.rXU(At.UG),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:V,selectors:[["app-gallery-collections"]],viewQuery:function(t,o){if(1&t&&e.GBs(on,5),2&t){let l;e.mGM(l=e.lsd())&&(o.teamCollections=l.first)}},inputs:{actionMode:"actionMode"},decls:11,vars:12,consts:[["teamCollections",""],[3,"collapsible","showHeader"],["app-navigation-panel-title","",4,"ngIf"],[4,"ngIf"],["app-navigation-panel-title",""],[1,"gallery-collections__header"],[3,"actionMode"],[1,"pl-6","pr-3","py-2","flex","items-center","justify-between"],[1,"gallery-collections__section-title"],[1,"ml-4"],["type","button","app-navigation-list-item","","data-test","galleryMyLibrary",1,"gallery-collections__item",3,"click","selected"],["data-test","addCollectionButton","app-button","","buttonTheme","light","buttonShape","square","matTooltip","Add a New Collection...",3,"disabled","click",4,"ngIf"],["data-test","galleryCollections","cdkDropList","",1,"ml-4",3,"cdkDropListDropped","cdkDropListDisabled"],["type","button","app-navigation-list-item","","data-test","galleryTeamLibrary","data-id","0",1,"gallery-collections__item",3,"click","selected"],["cdkDrag","",4,"ngFor","ngForOf"],["data-test","addCollectionButton","app-button","","buttonTheme","light","buttonShape","square","matTooltip","Add a New Collection...",3,"click","disabled"],["icon","plus"],["cdkDrag",""],["type","button",1,"gallery-collections__item","flex",3,"collection","curCollectionId"],[1,"px-5"],[1,"!my-5"],[3,"interacted","organizations"]],template:function(t,o){1&t&&(e.j41(0,"app-navigation-panel",1),e.DNE(1,ln,3,1,"div",2),e.j41(2,"app-navigation-list-container")(3,"nav")(4,"ul"),e.DNE(5,an,11,9,"li",3),e.nI1(6,"async"),e.DNE(7,rn,17,18,"li",3),e.nI1(8,"async"),e.DNE(9,pn,5,3,"li",3),e.nI1(10,"async"),e.k0s()()()()),2&t&&(e.Y8G("collapsible",!1)("showHeader",o.showBanner),e.R7$(),e.Y8G("ngIf",o.showBanner),e.R7$(4),e.Y8G("ngIf",e.bMT(6,6,o.userProfile$)),e.R7$(2),e.Y8G("ngIf",e.bMT(8,8,o.hasOrganization$)),e.R7$(2),e.Y8G("ngIf",e.bMT(10,10,o.hasEligibleOrganizations$)))},dependencies:[U.Q,y.Sq,y.bT,Ze.O7,Ze.T1,qe.oV,lt.q,E.k,Ue.T,ze.d,I.R,Yt,_e,me,y.Jj],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{list-style:none;background:#fffc}.gallery-collections__header[_ngcontent-%COMP%]{display:flex;align-items:center}.gallery-collections__section-title[_ngcontent-%COMP%]{font-size:11px;text-transform:uppercase;color:#61779e}.gallery-collections__item[_ngcontent-%COMP%]{width:100%;border:none;background:none;padding:4px 0}"],changeDetection:0})}Z([(0,c.l6)(Q.k.getUserProfile),q("design:type",p.c)],V.prototype,"userProfile$",void 0),Z([(0,c.l6)(x.q.getOrganization),q("design:type",p.c)],V.prototype,"organization$",void 0),Z([(0,c.l6)(x.q.getOrganizationLogo),q("design:type",p.c)],V.prototype,"organizationLogo$",void 0),Z([(0,c.l6)(x.q.getCollectionsLoading),q("design:type",p.c)],V.prototype,"collectionsLoading$",void 0),Z([(0,c.l6)(x.q.getAddingCollection),q("design:type",p.c)],V.prototype,"addingCollection$",void 0),Z([(0,c.l6)(x.q.getReorderingCollections),q("design:type",p.c)],V.prototype,"reorderingCollections$",void 0),Z([(0,c.l6)(d.Y.getSearchConfig),q("design:type",p.c)],V.prototype,"searchConfig$",void 0),Z([(0,c.l6)(d.Y.getSearchType),q("design:type",p.c)],V.prototype,"searchType$",void 0),Z([(0,c.l6)(Q.k.isAdmin),q("design:type",p.c)],V.prototype,"isAdmin$",void 0),Z([(0,c.l6)(x.q.hasOrganization),q("design:type",p.c)],V.prototype,"hasOrganization$",void 0),Z([(0,c.l6)(it.e.hasEligibleOrganizations),q("design:type",p.c)],V.prototype,"hasEligibleOrganizations$",void 0),Z([(0,c.l6)(it.e.getEligibleOrganizations),q("design:type",p.c)],V.prototype,"eligibleOrganizations$",void 0);var dn=s(72212),un=s(39937),gn=s(88041),hn=s(291),rt=function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);return l>3&&a&&Object.defineProperty(n,t,a),a},pt=function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,n)};function mn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleSelectionModeClick())}),e.EFF(1," Select "),e.k0s()}}function _n(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleViewModeClick(l.galleryViewMode.Card))}),e.EFF(1," View as Grid "),e.k0s()}}function yn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleViewModeClick(l.galleryViewMode.Row))}),e.EFF(1," View as List "),e.k0s()}}class ke{constructor(n){this.store=n,this.galleryViewMode=k.P}ngOnInit(){}handleSelectionModeClick(){this.store.dispatch(new h.w.SetBulkActions({active:!0}))}handleViewModeClick(n){this.store.dispatch(new h.w.SetViewMode(n))}static#e=this.\u0275fac=function(t){return new(t||ke)(e.rXU(c.il))};static#t=this.\u0275cmp=e.VBU({type:ke,selectors:[["app-gallery-view-mode"]],decls:11,vars:10,consts:[["actionsMenu","matMenu"],["app-button","","appEventFence","","buttonTheme","light","buttonSize","xl","buttonShape","square","data-test","galleryModeMenuButton",3,"matMenuTriggerFor"],["icon","ellipsis-v"],["mat-menu-item","","data-test","gallerySelectMode",3,"click",4,"ngIf"],["mat-menu-item","","data-test","galleryViewModeCard",3,"click",4,"ngIf"],["mat-menu-item","","data-test","galleryViewModeList",3,"click",4,"ngIf"],["mat-menu-item","","data-test","gallerySelectMode",3,"click"],["mat-menu-item","","data-test","galleryViewModeCard",3,"click"],["mat-menu-item","","data-test","galleryViewModeList",3,"click"]],template:function(t,o){if(1&t&&(e.j41(0,"div")(1,"button",1),e.nrm(2,"app-icon",2),e.k0s(),e.j41(3,"mat-menu",null,0),e.DNE(5,mn,2,0,"button",3),e.nI1(6,"async"),e.DNE(7,_n,2,0,"button",4),e.nI1(8,"async"),e.DNE(9,yn,2,0,"button",5),e.nI1(10,"async"),e.k0s()()),2&t){const l=e.sdS(4);e.R7$(),e.Y8G("matMenuTriggerFor",l),e.R7$(4),e.Y8G("ngIf",e.bMT(6,4,o.bulkActionsAvailable$)),e.R7$(2),e.Y8G("ngIf",e.bMT(8,6,o.viewMode$)!==o.galleryViewMode.Card),e.R7$(2),e.Y8G("ngIf",e.bMT(10,8,o.viewMode$)!==o.galleryViewMode.Row)}},dependencies:[U.Q,y.bT,ct.L,K.kk,K.fb,K.Cp,I.R,y.Jj],changeDetection:0})}rt([(0,c.l6)(d.Y.getViewMode),pt("design:type",p.c)],ke.prototype,"viewMode$",void 0),rt([(0,c.l6)(d.Y.getBulkActionsAvailable),pt("design:type",p.c)],ke.prototype,"bulkActionsAvailable$",void 0);var re=s(17773),Qe=s(7213),fn=s(52394),Oe=function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);return l>3&&a&&Object.defineProperty(n,t,a),a},Se=function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,n)};function bn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const l=e.XpG(2);return e.Njj(l.handleSelectAllClick())}),e.EFF(1," Select All "),e.k0s()}if(2&i){e.XpG();const t=e.sdS(4);e.Y8G("uppercase",!1)("matMenuTriggerFor",t)}}function Cn(i,n){if(1&i&&(e.j41(0,"button",13)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"app-icon",14),e.k0s()),2&i){e.XpG();const t=e.sdS(4),o=e.XpG();e.Y8G("uppercase",!1)("matMenuTriggerFor",t),e.R7$(2),e.SpI("",o.checkedResults.length," Selected")}}function vn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){const l=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.handleActionClick(l))}),e.EFF(1),e.k0s()}if(2&i){const t=n.$implicit,o=e.XpG(2);e.Y8G("disabled",!o.bulkActionsEnabled[t]),e.BMQ("title",t)("data-test",o.bulkActionsDataTestMap[t]),e.R7$(),e.SpI(" ",t," ")}}function Mn(i,n){1&i&&e.nrm(0,"mat-divider")}function Tn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){const l=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.handleActionClick(l))}),e.EFF(1),e.k0s()}if(2&i){const t=n.$implicit,o=e.XpG(2);e.Y8G("disabled",!o.bulkActionsEnabled[t]),e.BMQ("title",t)("data-test",o.bulkActionsDataTestMap[t]),e.R7$(),e.SpI(" ",t," ")}}function kn(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",2),e.DNE(1,bn,2,2,"button",3)(2,Cn,4,3,"button",4),e.j41(3,"mat-menu",null,0)(5,"button",5),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleClearSelectionClick())}),e.EFF(6," Clear Selected "),e.k0s(),e.j41(7,"button",6),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleSelectAllClick())}),e.EFF(8," Select All "),e.k0s(),e.DNE(9,vn,2,4,"button",7)(10,Mn,1,0,"mat-divider",8)(11,Tn,2,4,"button",9),e.k0s(),e.j41(12,"button",10),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleCancelClick())}),e.nrm(13,"app-icon",11),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",0===t.checkedResults.length),e.R7$(),e.Y8G("ngIf",t.checkedResults.length>0),e.R7$(3),e.Y8G("disabled",0===t.checkedResults.length),e.R7$(2),e.Y8G("disabled",t.checkedResults.length===t.allResults.total),e.R7$(2),e.Y8G("ngForOf",t.primaryBulkActions),e.R7$(),e.Y8G("ngIf",t.secondaryBulkActions.length>0),e.R7$(),e.Y8G("ngForOf",t.secondaryBulkActions)}}const On={[re.qg.ExportCSV]:(i,n,t)=>(0,Qe.Dx)(n,t),[re.qg.AddToLibrary]:(i,n,t,o)=>(0,Qe.E2)(t,o),[re.qg.Delete]:(i,n,t)=>(0,Qe.D1)(i,n,t),[re.qg.Manage]:(i,n)=>i.every(t=>(0,Qe.dE)(n,t))};class pe{constructor(n,t){this.store=n,this.changeDetectorRef=t,this.bookmarkPermission=fn.c,this.bulkActionsIconMap=re.xM,this.bulkActionsDataTestMap=re.EM,this.bulkActionsEnabled=Object.values(re.qg).reduce((o,l)=>(o[l]=!1,o),{}),this.bulkAction=new e.bkB,this.primaryBulkActions=[],this.secondaryBulkActions=[],this.ngUnsubscribe=new S.B}ngOnInit(){this.initBulkActions()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initBulkActions(){(0,Ge.z)([this.allResults$,this.checkedResults$,this.userRole$,this.isPremiumUser$,this.isTeamTrial$]).pipe((0,w.p)(([n,t])=>!(0,C.isNil)(n)&&!(0,C.isNil)(t)),(0,g.Q)(this.ngUnsubscribe)).subscribe(([n,t,o,l,a])=>{this.allResults=n,this.checkedResults=t;const r=n.items.filter(u=>t.includes(u.id));Object.values(re.qg).forEach(u=>{this.bulkActionsEnabled[u]=0!==t.length&&(0,On[u])(r,o,l,a)}),this.changeDetectorRef.markForCheck()}),this.bulkActions$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(({items:n})=>{this.primaryBulkActions=n.filter(t=>t!==re.qg.Delete),this.secondaryBulkActions=n.filter(t=>t===re.qg.Delete),this.changeDetectorRef.markForCheck()})}handleSelectAllClick(){this.store.dispatch(new h.w.CheckAll)}handleClearSelectionClick(){this.store.dispatch(new h.w.UncheckAll)}handleActionClick(n){this.bulkAction.emit({name:n,ids:this.store.selectSnapshot(d.Y.getCheckedResults)})}handleSelectAllChange(n){n?this.handleSelectAllClick():this.handleClearSelectionClick()}handleCancelClick(){this.store.dispatch(new h.w.UncheckAll),this.store.dispatch(new h.w.SetBulkActions({active:!1}))}static#e=this.\u0275fac=function(t){return new(t||pe)(e.rXU(c.il),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:pe,selectors:[["app-gallery-bulk-actions"]],outputs:{bulkAction:"bulkAction"},decls:1,vars:1,consts:[["bulkActionsMenu","matMenu"],["class","flex flex-row gallery-bulk-actions",4,"ngIf"],[1,"flex","flex-row","gallery-bulk-actions"],["app-button","","buttonTheme","light","buttonSize","xl","class","ml-2 font-semibold whitespace-nowrap",3,"uppercase","matMenuTriggerFor","click",4,"ngIf"],["app-button","","buttonTheme","light","buttonSize","xl","data-test","bulkActionsMenu","class","font-semibold whitespace-nowrap",3,"uppercase","matMenuTriggerFor",4,"ngIf"],["type","button","mat-menu-item","","data-test","clearSelectionButton",3,"click","disabled"],["type","button","mat-menu-item","","data-test","selectAllSelectionButton",3,"click","disabled"],["type","button","mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],["type","button","mat-menu-item","","class","text-red-700 disabled:text-red-700/50",3,"disabled","click",4,"ngFor","ngForOf"],["app-button","","type","button","app-button","","buttonSize","xl","buttonTheme","light","buttonType","default","title","Cancel Select","data-test","cancelSelectButton",3,"click"],["icon","times","size","lg"],["app-button","","buttonTheme","light","buttonSize","xl",1,"ml-2","font-semibold","whitespace-nowrap",3,"click","uppercase","matMenuTriggerFor"],["app-button","","buttonTheme","light","buttonSize","xl","data-test","bulkActionsMenu",1,"font-semibold","whitespace-nowrap",3,"uppercase","matMenuTriggerFor"],["icon","caret-down",1,"ml-1"],["type","button","mat-menu-item","",3,"click","disabled"],["type","button","mat-menu-item","",1,"text-red-700","disabled:text-red-700/50",3,"click","disabled"]],template:function(t,o){1&t&&e.DNE(0,kn,14,7,"div",1),2&t&&e.Y8G("ngIf",o.allResults&&o.checkedResults)},dependencies:[U.Q,y.Sq,y.bT,K.kk,K.fb,K.Cp,lt.q,I.R],styles:[".gallery-bulk-actions__button[_ngcontent-%COMP%]{white-space:nowrap}.gallery-bulk-actions__secondary[_ngcontent-%COMP%]{color:#de3535}.gallery-bulk-actions__secondary[disabled][_ngcontent-%COMP%]{color:#de353580}"],changeDetection:0})}Oe([(0,c.l6)(Q.k.getUserRole),Se("design:type",p.c)],pe.prototype,"userRole$",void 0),Oe([(0,c.l6)(Q.k.isPremiumUser),Se("design:type",p.c)],pe.prototype,"isPremiumUser$",void 0),Oe([(0,c.l6)(x.q.isTrial),Se("design:type",p.c)],pe.prototype,"isTeamTrial$",void 0),Oe([(0,c.l6)(d.Y.getBulkActions),Se("design:type",p.c)],pe.prototype,"bulkActions$",void 0),Oe([(0,c.l6)(d.Y.getAllResults),Se("design:type",p.c)],pe.prototype,"allResults$",void 0),Oe([(0,c.l6)(d.Y.getCheckedResults),Se("design:type",p.c)],pe.prototype,"checkedResults$",void 0);var Sn=s(49206);const Pn=(i,n)=>({"gallery-search--has-filters":i,"gallery-search--has-text":n});function xn(i,n){if(1&i){const t=e.RV6();e.j41(0,"span",10)(1,"button",11),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleToggleFilters())}),e.EFF(2," Filter "),e.nrm(3,"app-icon",12),e.nI1(4,"async"),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.BMQ("aria-label","Toggle Filters"),e.R7$(2),e.Y8G("icon",e.bMT(4,2,t.showFilters$)?"caret-up":"caret-down")}}class Ce extends Sn.Z{constructor(){super(...arguments),this.mode="desktop",this.placeholder="",this.hasFilters=!0,this.aiSearch=!0,this.clearClicked=new e.bkB,this.filtersClicked=new e.bkB}handleClearQuery(){this.clearClicked.emit()}handleToggleFilters(){this.filtersClicked.emit()}static#e=this.\u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(Ce)))(o||Ce)}})();static#t=this.\u0275cmp=e.VBU({type:Ce,selectors:[["app-gallery-search-field"]],inputs:{mode:"mode",placeholder:"placeholder",hasFilters:"hasFilters",aiSearch:"aiSearch"},outputs:{clearClicked:"clearClicked",filtersClicked:"filtersClicked"},features:[e.Jv_([{provide:m.kq,useExisting:(0,e.Rfq)(()=>Ce),multi:!0}]),e.Vt3],decls:13,vars:18,consts:[[1,"gallery-search",3,"ngClass"],[1,"sr-only"],[1,"gallery-search__bar"],[1,"gallery-search__icon"],[3,"custom","icon"],["type","text","autocomplete","off",1,"gallery-search__input",3,"formControl"],[1,"gallery-search__clear"],["type","button","buttonType","text","buttonShape","square","app-button","","buttonTheme","light",3,"click"],["icon","times-circle"],["class","gallery-search__filters",4,"ngIf"],[1,"gallery-search__filters"],["type","button","buttonType","text","app-button","","buttonTheme","light","data-test","galleryFiltersToggle",3,"click"],[1,"pl-1",3,"icon"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.nI1(1,"async"),e.j41(2,"label",1),e.EFF(3),e.k0s(),e.j41(4,"div",2)(5,"span",3),e.nrm(6,"app-icon",4),e.k0s(),e.nrm(7,"input",5),e.nI1(8,"titlecase"),e.j41(9,"span",6)(10,"button",7),e.bIt("click",function(){return o.handleClearQuery()}),e.nrm(11,"app-icon",8),e.k0s()()(),e.DNE(12,xn,5,4,"span",9),e.k0s()),2&t&&(e.Y8G("ngClass",e.l_i(15,Pn,o.hasFilters,e.bMT(1,11,o.control.valueChanges))),e.R7$(2),e.BMQ("for","gallery-search-"+o.mode),e.R7$(),e.JRh(o.placeholder||""),e.R7$(3),e.Y8G("custom",o.aiSearch)("icon",o.aiSearch?"search-sparkle":"search"),e.R7$(),e.Y8G("formControl",o.control),e.BMQ("id","gallery-search-"+o.mode)("placeholder",o.placeholder||"")("data-test","gallerySearch"+e.bMT(8,13,o.mode)),e.R7$(3),e.BMQ("aria-label","Clear Search Results"),e.R7$(2),e.Y8G("ngIf",o.hasFilters))},dependencies:[U.Q,y.YU,y.bT,m.me,m.BC,m.l_,I.R,y.Jj,y.PV],styles:[".input[_ngcontent-%COMP%], [type=text].input[_ngcontent-%COMP%], [type=number].input[_ngcontent-%COMP%], [type=email].input[_ngcontent-%COMP%], [type=password].input[_ngcontent-%COMP%], [type=file].input[_ngcontent-%COMP%], [type=url].input[_ngcontent-%COMP%], select.input[_ngcontent-%COMP%], mat-select.input[_ngcontent-%COMP%], textarea.input[_ngcontent-%COMP%]{border:1px solid #1b283c;border-radius:4px;background-color:#101823;color:#fff;display:block;min-height:36px;width:100%;font-size:14px;padding:8px 12px;font-family:Inter,sans-serif}@supports (font-variation-settings: normal){.input[_ngcontent-%COMP%], [type=text].input[_ngcontent-%COMP%], [type=number].input[_ngcontent-%COMP%], [type=email].input[_ngcontent-%COMP%], [type=password].input[_ngcontent-%COMP%], [type=file].input[_ngcontent-%COMP%], [type=url].input[_ngcontent-%COMP%], select.input[_ngcontent-%COMP%], mat-select.input[_ngcontent-%COMP%], textarea.input[_ngcontent-%COMP%]{font-family:Inter UI var alt,sans-serif}}.input[_ngcontent-%COMP%]:focus, [type=text].input[_ngcontent-%COMP%]:focus, [type=number].input[_ngcontent-%COMP%]:focus, [type=email].input[_ngcontent-%COMP%]:focus, [type=password].input[_ngcontent-%COMP%]:focus, [type=file].input[_ngcontent-%COMP%]:focus, [type=url].input[_ngcontent-%COMP%]:focus, select.input[_ngcontent-%COMP%]:focus, mat-select.input[_ngcontent-%COMP%]:focus, textarea.input[_ngcontent-%COMP%]:focus{outline:#2d72dc solid 2px!important}.input[_ngcontent-%COMP%]:focus.ng-invalid, [type=text].input[_ngcontent-%COMP%]:focus.ng-invalid, [type=number].input[_ngcontent-%COMP%]:focus.ng-invalid, [type=email].input[_ngcontent-%COMP%]:focus.ng-invalid, [type=password].input[_ngcontent-%COMP%]:focus.ng-invalid, [type=file].input[_ngcontent-%COMP%]:focus.ng-invalid, [type=url].input[_ngcontent-%COMP%]:focus.ng-invalid, select.input[_ngcontent-%COMP%]:focus.ng-invalid, mat-select.input[_ngcontent-%COMP%]:focus.ng-invalid, textarea.input[_ngcontent-%COMP%]:focus.ng-invalid{outline-color:#ed4758!important;outline-width:1px!important}.input--small[_ngcontent-%COMP%], [type=text].input--small[_ngcontent-%COMP%], [type=number].input--small[_ngcontent-%COMP%], [type=email].input--small[_ngcontent-%COMP%], [type=password].input--small[_ngcontent-%COMP%], [type=file].input--small[_ngcontent-%COMP%], [type=url].input--small[_ngcontent-%COMP%], select.input--small[_ngcontent-%COMP%], mat-select.input--small[_ngcontent-%COMP%], textarea.input--small[_ngcontent-%COMP%]{font-size:12px;padding:8px;min-height:auto}.input--large[_ngcontent-%COMP%], [type=text].input--large[_ngcontent-%COMP%], [type=number].input--large[_ngcontent-%COMP%], [type=email].input--large[_ngcontent-%COMP%], [type=password].input--large[_ngcontent-%COMP%], [type=file].input--large[_ngcontent-%COMP%], [type=url].input--large[_ngcontent-%COMP%], select.input--large[_ngcontent-%COMP%], mat-select.input--large[_ngcontent-%COMP%], textarea.input--large[_ngcontent-%COMP%]{font-size:16px;padding:12px}.input--success[_ngcontent-%COMP%], [type=text].input--success[_ngcontent-%COMP%], [type=number].input--success[_ngcontent-%COMP%], [type=email].input--success[_ngcontent-%COMP%], [type=password].input--success[_ngcontent-%COMP%], [type=file].input--success[_ngcontent-%COMP%], [type=url].input--success[_ngcontent-%COMP%], select.input--success[_ngcontent-%COMP%], mat-select.input--success[_ngcontent-%COMP%], textarea.input--success[_ngcontent-%COMP%]{border-color:#38de38!important}.input[_ngcontent-%COMP%]:disabled, .input.mat-mdc-select-disabled[_ngcontent-%COMP%], [type=text].input[_ngcontent-%COMP%]:disabled, [type=text].input.mat-mdc-select-disabled[_ngcontent-%COMP%], [type=number].input[_ngcontent-%COMP%]:disabled, [type=number].input.mat-mdc-select-disabled[_ngcontent-%COMP%], [type=email].input[_ngcontent-%COMP%]:disabled, [type=email].input.mat-mdc-select-disabled[_ngcontent-%COMP%], [type=password].input[_ngcontent-%COMP%]:disabled, [type=password].input.mat-mdc-select-disabled[_ngcontent-%COMP%], [type=file].input[_ngcontent-%COMP%]:disabled, [type=file].input.mat-mdc-select-disabled[_ngcontent-%COMP%], [type=url].input[_ngcontent-%COMP%]:disabled, [type=url].input.mat-mdc-select-disabled[_ngcontent-%COMP%], select.input[_ngcontent-%COMP%]:disabled, select.input.mat-mdc-select-disabled[_ngcontent-%COMP%], mat-select.input[_ngcontent-%COMP%]:disabled, mat-select.input.mat-mdc-select-disabled[_ngcontent-%COMP%], textarea.input[_ngcontent-%COMP%]:disabled, textarea.input.mat-mdc-select-disabled[_ngcontent-%COMP%]{opacity:.4}.input.ng-dirty.ng-invalid[_ngcontent-%COMP%], [type=text].input.ng-dirty.ng-invalid[_ngcontent-%COMP%], [type=number].input.ng-dirty.ng-invalid[_ngcontent-%COMP%], [type=email].input.ng-dirty.ng-invalid[_ngcontent-%COMP%], [type=password].input.ng-dirty.ng-invalid[_ngcontent-%COMP%], [type=file].input.ng-dirty.ng-invalid[_ngcontent-%COMP%], [type=url].input.ng-dirty.ng-invalid[_ngcontent-%COMP%], select.input.ng-dirty.ng-invalid[_ngcontent-%COMP%], mat-select.input.ng-dirty.ng-invalid[_ngcontent-%COMP%], textarea.input.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:1px solid #ed4758}textarea.input--nonresizable[_ngcontent-%COMP%]{resize:none}select.input[_ngcontent-%COMP%]{height:36px}input.theme-dark[_ngcontent-%COMP%], select.theme-dark[_ngcontent-%COMP%], textarea.theme-dark[_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .input[type=text][_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .input[type=number][_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .input[type=email][_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .input[type=password][_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .input[type=file][_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .input[type=url][_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   select.input[_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   mat-select.input[_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   textarea.input[_ngcontent-%COMP%]{background-color:#101823;border:1px solid #374a68;color:#fff}input.theme-light[_ngcontent-%COMP%], select.theme-light[_ngcontent-%COMP%], textarea.theme-light[_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   .input[type=text][_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   .input[type=number][_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   .input[type=email][_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   .input[type=password][_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   .input[type=file][_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   .input[type=url][_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   select.input[_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   mat-select.input[_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   textarea.input[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #96a8c0;color:#283853}input.theme-light[_ngcontent-%COMP%]:focus, select.theme-light[_ngcontent-%COMP%]:focus, textarea.theme-light[_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   .input[type=text][_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   .input[type=number][_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   .input[type=email][_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   .input[type=password][_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   .input[type=file][_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   .input[type=url][_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   select.input[_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   mat-select.input[_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   textarea.input[_ngcontent-%COMP%]:focus{background-color:#fff}input.theme-light[_ngcontent-%COMP%]::placeholder, select.theme-light[_ngcontent-%COMP%]::placeholder, textarea.theme-light[_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   .input[type=text][_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   .input[type=number][_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   .input[type=email][_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   .input[type=password][_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   .input[type=file][_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   .input[type=url][_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   select.input[_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   mat-select.input[_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   textarea.input[_ngcontent-%COMP%]::placeholder{color:#374a6880}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.gallery-search__input[_ngcontent-%COMP%]{font-size:16px}}}.gallery-search[_ngcontent-%COMP%]{position:relative;height:44px;width:100%;display:flex}.gallery-search--has-filters[_ngcontent-%COMP%]   .gallery-search__filters[_ngcontent-%COMP%]{display:flex}.gallery-search--has-filters[_ngcontent-%COMP%]   .gallery-search__bar[_ngcontent-%COMP%]{margin-right:-1px;border-radius:4px 0 0 4px}.gallery-search--has-text[_ngcontent-%COMP%]   .gallery-search__clear[_ngcontent-%COMP%]{visibility:visible}.gallery-search__bar[_ngcontent-%COMP%]{flex:1 1 100%;height:100%;display:flex;border-radius:4px;background-color:#fff;border:1px solid #96a8c0;padding:0 2px}.gallery-search__bar[_ngcontent-%COMP%]:focus-within{outline:#2d72dc solid 2px!important}.gallery-search__filters[_ngcontent-%COMP%]{border:1px solid #96a8c0;border-radius:0 4px 4px 0;display:none;align-items:center;height:100%;flex:0 0 auto;white-space:nowrap;padding:0 4px}.gallery-search__input[_ngcontent-%COMP%]{border:0;padding:0;margin:0;display:block;height:100%;flex:1 1 auto;font-size:14px;width:100%}.gallery-search__input[_ngcontent-%COMP%]:focus{outline:0}.gallery-search__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#61779e;flex:0 0 36px;height:100%;-webkit-user-select:none;user-select:none}.gallery-search__clear[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;flex:0 0 36px;visibility:hidden}"],changeDetection:0})}!function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);l>3&&a&&Object.defineProperty(n,t,a)}([(0,c.l6)(d.Y.getShowFilters),function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,p.c)],Ce.prototype,"showFilters$",void 0);var H=function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);return l>3&&a&&Object.defineProperty(n,t,a),a},J=function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,n)};function In(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-gallery-search-field",12),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("clearClicked",function(){e.eBV(t);const l=e.XpG(2);return e.Njj(l.handleClearQuery())})("filtersClicked",function(){e.eBV(t);const l=e.XpG(2);return e.Njj(l.handleToggleFilters())}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("hasFilters",e.bMT(1,3,t.hasFilters$))("placeholder","Search "+e.bMT(2,5,t.searchTitle$))("aiSearch",t.isExplore())}}function jn(i,n){1&i&&(e.qex(0),e.nrm(1,"app-locales",13),e.bVm()),2&i&&(e.R7$(),e.Y8G("showFlag",!0))}function Fn(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-gallery-bulk-actions",14),e.bIt("bulkAction",function(l){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleBulkAction(l))}),e.k0s()}}function $n(i,n){1&i&&e.nrm(0,"app-gallery-view-mode")}function Bn(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"form",6),e.DNE(4,In,3,7,"app-gallery-search-field",7),e.nI1(5,"async"),e.k0s()(),e.j41(6,"div",8),e.DNE(7,jn,2,1,"ng-container",9),e.j41(8,"app-sort",10),e.nI1(9,"async"),e.nI1(10,"async"),e.bIt("sortChange",function(l){e.eBV(t);const a=e.XpG();return e.Njj(a.handleSortClick(l))}),e.k0s(),e.DNE(11,Fn,1,0,"app-gallery-bulk-actions",11),e.nI1(12,"async"),e.nI1(13,"async"),e.DNE(14,$n,1,0,"ng-template",null,0,e.C5r),e.k0s()()()}if(2&i){const t=e.sdS(15),o=e.XpG();e.R7$(3),e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("ngIf",e.bMT(5,8,o.searchTitle$)),e.R7$(3),e.Y8G("ngIf",o.isExplore()),e.R7$(),e.Y8G("sortLabel","Sort Models")("sortOptions",e.bMT(9,10,o.sortOptions$))("sort",e.bMT(10,12,o.sort$)),e.R7$(3),e.Y8G("ngIf",e.bMT(12,14,o.bulkActionsActive$)&&e.bMT(13,16,o.bulkActionsAvailable$))("ngIfElse",t)}}function En(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-gallery-search-field",20),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("clearClicked",function(){e.eBV(t);const l=e.XpG(2);return e.Njj(l.handleClearQuery())})("filtersClicked",function(){e.eBV(t);const l=e.XpG(2);return e.Njj(l.handleToggleFilters())}),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("hasFilters",e.bMT(1,3,t.hasFilters$))("placeholder","Search "+e.bMT(2,5,t.searchTitle$))("aiSearch",t.isExplore())}}function wn(i,n){if(1&i&&(e.qex(0),e.EFF(1),e.nI1(2,"async"),e.bVm()),2&i){let t;const o=e.XpG(2);e.R7$(),e.SpI("",null==(t=e.bMT(2,1,o.results$))?null:t.total," results")}}function Dn(i,n){1&i&&(e.qex(0),e.nrm(1,"app-locales",21),e.bVm()),2&i&&(e.R7$(),e.Y8G("showFlag",!0))}function An(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",15)(1,"div",4)(2,"div",16)(3,"div",5)(4,"form",6),e.DNE(5,En,3,7,"app-gallery-search-field",17),e.nI1(6,"async"),e.k0s()()(),e.j41(7,"div",18)(8,"div",19),e.DNE(9,wn,3,3,"ng-container",9),e.nI1(10,"async"),e.k0s(),e.j41(11,"div",8),e.DNE(12,Dn,2,1,"ng-container",9),e.j41(13,"app-sort",10),e.nI1(14,"async"),e.nI1(15,"async"),e.bIt("sortChange",function(l){e.eBV(t);const a=e.XpG();return e.Njj(a.handleSortClick(l))}),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(4),e.Y8G("formGroup",t.form),e.R7$(),e.Y8G("ngIf",e.bMT(6,7,t.searchTitle$)),e.R7$(4),e.Y8G("ngIf",!e.bMT(10,9,t.loading$)),e.R7$(3),e.Y8G("ngIf",t.isExplore()),e.R7$(),e.Y8G("sortLabel","Sort Models")("sortOptions",e.bMT(14,11,t.sortOptions$))("sort",e.bMT(15,13,t.sort$))}}class D{constructor(n,t,o,l){this.store=n,this.router=t,this.changeDetectorRef=o,this.formBuilder=l,this.bulkAction=new e.bkB,this.sortChange=new e.bkB,this.galleryViewMode=k.P,this.horizontalBreakpoint=L.m,this.ngUnsubscribe=new S.B,this.form=this.formBuilder.group({query:[""]}),this.searchTitle$=(0,un.E)(this.store)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.observeSearchInput(),this.observeSearchQuery()}observeSearchInput(){this.form.valueChanges.pipe((0,de.B)(600),(0,ee.T)(n=>n.query),(0,W.F)(),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{const t={...this.store.selectSnapshot(d.Y.getSearchConfig)};t.query=n,this.store.dispatch(new h.w.SetSearchConfig(t))})}observeSearchQuery(){this.searchConfig$.pipe((0,w.p)(n=>!(0,C.isNil)(n)&&n.query!==this.form.value.query),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.form.patchValue({query:n.query}),this.changeDetectorRef.markForCheck()})}handleSortClick(n){this.sortChange.next(n)}handleToggleFilters(){const n=!this.store.selectSnapshot(d.Y.getShowFilters),t=this.store.selectSnapshot(te.V.getHorizontalBreakpoint)<=L.m.Small;this.store.dispatch(new h.w.ShowFilters(n,t))}handleBulkAction(n){this.bulkAction.next(n)}handleClearQuery(){const n=this.store.selectSnapshot(d.Y.getSearchConfig);this.store.dispatch(new h.w.SetSearchConfig({...n,query:""}))}toggleView(n){this.store.dispatch(new h.w.SetViewMode(n))}isExplore(){return this.router.url.startsWith("/results/modules")}static#e=this.\u0275fac=function(t){return new(t||D)(e.rXU(c.il),e.rXU(ie.Ix),e.rXU(e.gRc),e.rXU(m.ze))};static#t=this.\u0275cmp=e.VBU({type:D,selectors:[["app-gallery-header"]],outputs:{bulkAction:"bulkAction",sortChange:"sortChange"},decls:4,vars:6,consts:[["standardActions",""],["class","gallery-header gallery-header--desktop","data-test","galleryHeaderDesktop",4,"ngIf"],["class","gallery-header gallery-header--mobile","data-test","galleryHeaderMobile",4,"ngIf"],["data-test","galleryHeaderDesktop",1,"gallery-header","gallery-header--desktop"],[1,"gallery-header__controls"],[1,"gallery-header__search"],[3,"formGroup"],["mode","desktop","formControlName","query",3,"hasFilters","placeholder","aiSearch","clearClicked","filtersClicked",4,"ngIf"],[1,"flex","items-center"],[4,"ngIf"],["buttonSize","lg",3,"sortChange","sortLabel","sortOptions","sort"],[3,"bulkAction",4,"ngIf","ngIfElse"],["mode","desktop","formControlName","query",3,"clearClicked","filtersClicked","hasFilters","placeholder","aiSearch"],["buttonSize","lg","buttonTheme","light","buttonType","default","localeFormat","lang",3,"showFlag"],[3,"bulkAction"],["data-test","galleryHeaderMobile",1,"gallery-header","gallery-header--mobile"],[1,"flex","pt-5","pb-3"],["mode","mobile","formControlName","query",3,"hasFilters","placeholder","aiSearch","clearClicked","filtersClicked",4,"ngIf"],[1,"flex","items-center","justify-between"],["role","status",1,"flex","items-center","text-sm","text-nowrap"],["mode","mobile","formControlName","query",3,"clearClicked","filtersClicked","hasFilters","placeholder","aiSearch"],["buttonTheme","light","buttonType","default","localeFormat","lang","buttonSize","lg",3,"showFlag"]],template:function(t,o){1&t&&(e.DNE(0,Bn,16,18,"div",1),e.nI1(1,"async"),e.DNE(2,An,16,15,"div",2),e.nI1(3,"async")),2&t&&(e.Y8G("ngIf",e.bMT(1,2,o.horizontalBreakpoint$)>=o.horizontalBreakpoint.Large),e.R7$(2),e.Y8G("ngIf",e.bMT(3,4,o.horizontalBreakpoint$)<=o.horizontalBreakpoint.Medium))},dependencies:[y.bT,m.qT,m.BC,m.cb,m.j4,m.JD,gn.K,hn.J,ke,pe,Ce,y.Jj],styles:[".gallery-header--desktop[_ngcontent-%COMP%]{display:block}.gallery-header--mobile[_ngcontent-%COMP%]{display:none}.gallery-header__title[_ngcontent-%COMP%]{display:flex;align-items:center}.gallery-header__controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 40px}.gallery-header__search[_ngcontent-%COMP%]{flex:0 1 400px;padding-right:8px}@media (max-width: 959px){.gallery-header[_ngcontent-%COMP%]{padding:0}.gallery-header--desktop[_ngcontent-%COMP%]{display:none}.gallery-header--mobile[_ngcontent-%COMP%]{display:block}.gallery-header__title[_ngcontent-%COMP%]{display:flex;padding:12px 0}.gallery-header__controls[_ngcontent-%COMP%]{display:block;padding:0 20px}.gallery-header__search[_ngcontent-%COMP%]{flex:1 0 auto;padding:0 4px 0 0;max-width:100%}}"],changeDetection:0})}H([(0,c.l6)(d.Y.getViewMode),J("design:type",p.c)],D.prototype,"viewMode$",void 0),H([(0,c.l6)(d.Y.getSort),J("design:type",p.c)],D.prototype,"sort$",void 0),H([(0,c.l6)(d.Y.getSortOptions),J("design:type",p.c)],D.prototype,"sortOptions$",void 0),H([(0,c.l6)(d.Y.getSearchConfig),J("design:type",p.c)],D.prototype,"searchConfig$",void 0),H([(0,c.l6)(d.Y.getSearchType),J("design:type",p.c)],D.prototype,"searchType$",void 0),H([(0,c.l6)(d.Y.getFilteredResults),J("design:type",p.c)],D.prototype,"results$",void 0),H([(0,c.l6)(d.Y.getBulkActions),J("design:type",p.c)],D.prototype,"bulkActions$",void 0),H([(0,c.l6)(d.Y.getBulkActionsAvailable),J("design:type",p.c)],D.prototype,"bulkActionsAvailable$",void 0),H([(0,c.l6)(d.Y.getLoading),J("design:type",p.c)],D.prototype,"loading$",void 0),H([(0,c.l6)(d.Y.getShowFilters),J("design:type",p.c)],D.prototype,"showFilters$",void 0),H([(0,c.l6)(d.Y.getHasFilters),J("design:type",p.c)],D.prototype,"hasFilters$",void 0),H([(0,c.l6)(d.Y.getBulkActionsActive),J("design:type",p.c)],D.prototype,"bulkActionsActive$",void 0),H([(0,c.l6)(te.V.getHorizontalBreakpoint),J("design:type",p.c)],D.prototype,"horizontalBreakpoint$",void 0);var Nn=s(97978);let dt=(()=>{class i{transform(t,o){return(0,C.lowerCase)(t).split(" ").map(l=>"and"===l||"or"===l?l:(0,C.upperFirst)(l)).join(" ")}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275pipe=e.EJ8({name:"humanize",type:i,pure:!0})}return i})();function Un(i,n){if(1&i){const t=e.RV6();e.j41(0,"a",2),e.bIt("click",function(){const l=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.handleSelectClient(l))}),e.EFF(1),e.nI1(2,"humanize"),e.k0s()}if(2&i){const t=n.$implicit,o=e.XpG();e.Y8G("selected",t===o.selectedClient),e.R7$(),e.SpI(" ",e.bMT(2,2,t)," ")}}class Ie{constructor(n,t){this.modulesService=n,this.changeDetectorRef=t,this.clients=[],this.selectedClient="",this.ngUnsubscribe=new S.B,this.clientSelected=new e.bkB}ngOnInit(){this.initClients(),this.observeClient()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initClients(){this.modulesService.getClients().pipe((0,ee.T)(n=>(0,C.compact)(n))).subscribe(n=>{this.clients=n,this.changeDetectorRef.markForCheck()})}handleSelectClient(n){this.clientSelected.emit(n)}observeClient(){this.searchConfig$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{if(n.type===b.n.Internal){const t=n.directory.split("/");this.selectedClient="","client"===t[0]&&2===t.length&&(this.selectedClient=t[1]),this.changeDetectorRef.markForCheck()}})}static#e=this.\u0275fac=function(t){return new(t||Ie)(e.rXU(Nn.F),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:Ie,selectors:[["app-gallery-clients"]],outputs:{clientSelected:"clientSelected"},decls:4,vars:2,consts:[["label","Clients",3,"collapsible"],["app-navigation-list-item","",3,"selected","click",4,"ngFor","ngForOf"],["app-navigation-list-item","",3,"click","selected"]],template:function(t,o){1&t&&(e.j41(0,"app-navigation-panel",0)(1,"app-navigation-list-container")(2,"nav"),e.DNE(3,Un,3,4,"a",1),e.k0s()()()),2&t&&(e.Y8G("collapsible",!0),e.R7$(3),e.Y8G("ngForOf",o.clients))},dependencies:[y.Sq,E.k,Ue.T,ze.d,dt],changeDetection:0})}!function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);l>3&&a&&Object.defineProperty(n,t,a)}([(0,c.l6)(d.Y.getSearchConfig),function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,p.c)],Ie.prototype,"searchConfig$",void 0);var ut=s(96728),zn=s(54169),Ln=s(59369);function Hn(i,n){if(1&i){const t=e.RV6();e.j41(0,"a",1),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleSelectSource("library"))}),e.EFF(4," My Library "),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("selected",e.bMT(1,1,t.searchType$)===t.searchType.Private||e.bMT(2,3,t.searchType$)===t.searchType.Organization||e.bMT(3,5,t.searchType$)===t.searchType.Collection)}}function Jn(i,n){if(1&i){const t=e.RV6();e.j41(0,"a",1),e.nI1(1,"async"),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.handleSelectSource("loft"))}),e.EFF(2," Loft "),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("selected",e.bMT(1,1,t.searchType$)===t.searchType.Loft)}}class je{constructor(n){this.store=n,this.searchType=b.n,this.environmentApplication=z.c}handleSelectSource(n){let t,o=ut.Ir;switch(n){case"module":t=new O.pf("all");break;case"library":t=new O.Y0(""),o=ut._z;break;case"loft":t=new O.qS("production","maleAdult")}this.store.dispatch(new h.w.SetSearchConfig(t));const l=new zn.n("",o);this.store.dispatch(new h.w.SetSearchOptions(l))}static#e=this.\u0275fac=function(t){return new(t||je)(e.rXU(c.il))};static#t=this.\u0275cmp=e.VBU({type:je,selectors:[["app-gallery-source"]],decls:7,vars:6,consts:[["label","Source",3,"collapsible"],["app-navigation-list-item","",3,"click","selected"],["app-navigation-list-item","",3,"selected","click",4,"appFlagApplication"]],template:function(t,o){1&t&&(e.j41(0,"app-navigation-panel",0)(1,"app-navigation-list-container")(2,"a",1),e.nI1(3,"async"),e.bIt("click",function(){return o.handleSelectSource("module")}),e.EFF(4," BioDigital Library "),e.k0s(),e.DNE(5,Hn,5,7,"a",2)(6,Jn,3,3,"a",2),e.k0s()()),2&t&&(e.Y8G("collapsible",!0),e.R7$(2),e.Y8G("selected",e.bMT(3,4,o.searchType$)===o.searchType.Category),e.R7$(3),e.Y8G("appFlagApplication",o.environmentApplication.Studio),e.R7$(),e.Y8G("appFlagApplication",o.environmentApplication.Loft))},dependencies:[Ln.Y,E.k,Ue.T,ze.d,y.Jj],changeDetection:0})}!function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);l>3&&a&&Object.defineProperty(n,t,a)}([(0,c.l6)(d.Y.getSearchType),function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,p.c)],je.prototype,"searchType$",void 0);var Wn=s(68008);const gt=i=>({"gallery-groups__button--active":i});function qn(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",2),e.bIt("click",function(){const l=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.selectFilter(l))}),e.EFF(1),e.nI1(2,"humanize"),e.k0s()}if(2&i){const t=n.$implicit,o=e.XpG(2);e.Y8G("ngClass",e.eq3(4,gt,o.activeTag===t)),e.R7$(),e.SpI(" ",e.bMT(2,2,t)," ")}}function eo(i,n){if(1&i){const t=e.RV6();e.j41(0,"nav",1)(1,"button",2),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.selectFilter(""))}),e.EFF(2," All "),e.k0s(),e.DNE(3,qn,3,6,"button",3),e.k0s()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(2,gt,null==t.activeTag)),e.R7$(2),e.Y8G("ngForOf",t.tagCategory.tags)}}class Fe{get tagCategory(){return this._tagCategory}set tagCategory(n){this._tagCategory=n}constructor(n,t){this.store=n,this.changeDetectorRef=t,this.ngUnsubscribe=new S.B,this.activeTag=""}ngOnInit(){this.activeTags$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=this.tagCategory?.title;this.activeTag=n?n[t]:"",this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}selectFilter(n){const t=this.store.selectSnapshot(d.Y.getActiveTags);t[this.tagCategory.title]=n,this.store.dispatch(new h.w.SetActiveTags(t))}static#e=this.\u0275fac=function(t){return new(t||Fe)(e.rXU(c.il),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:Fe,selectors:[["app-gallery-groups"]],inputs:{tagCategory:"tagCategory"},decls:1,vars:1,consts:[["class","gallery-groups",4,"ngIf"],[1,"gallery-groups"],["type","button",1,"gallery-groups__button",3,"click","ngClass"],["type","button","class","gallery-groups__button",3,"ngClass","click",4,"ngFor","ngForOf"]],template:function(t,o){1&t&&e.DNE(0,eo,4,4,"nav",0),2&t&&e.Y8G("ngIf",o.tagCategory)},dependencies:[y.YU,y.Sq,y.bT,dt],styles:[".gallery-groups[_ngcontent-%COMP%]{display:flex;gap:8px}.gallery-groups__item[_ngcontent-%COMP%]{display:inline-flex}.gallery-groups__button[_ngcontent-%COMP%]{background:none;border:none;border-radius:4px;border-bottom:3px solid transparent;height:32px;display:flex;align-items:center;justify-content:center;color:#374a68;font-weight:600;font-size:14px;padding:0 8px;transition:all ease-out .15s}.gallery-groups__button--active[_ngcontent-%COMP%]{border-bottom-color:#de3535;border-radius:4px 4px 0 0}.gallery-groups__button[_ngcontent-%COMP%]:hover:not(.gallery-groups__button--active){background:#eaeff5;cursor:pointer}"],changeDetection:0})}!function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);l>3&&a&&Object.defineProperty(n,t,a)}([(0,c.l6)(d.Y.getActiveTags),function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,p.c)],Fe.prototype,"activeTags$",void 0);var A=function(i,n,t,o){var r,l=arguments.length,a=l<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(i,n,t,o);else for(var u=i.length-1;u>=0;u--)(r=i[u])&&(a=(l<3?r(a):l>3?r(n,t,a):r(n,t))||a);return l>3&&a&&Object.defineProperty(n,t,a),a},N=function(i,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,n)};const to=["sidenav"],no=["content"],oo=i=>({"gallery--small":i}),io=i=>({"gallery__filters--empty":i});function lo(i,n){1&i&&e.nrm(0,"app-gallery-source")}function ao(i,n){if(1&i&&(e.qex(0),e.nrm(1,"app-gallery-collections",18),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("actionMode",t.actionMode)}}function so(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"app-gallery-clients",19),e.bIt("clientSelected",function(l){e.eBV(t);const a=e.XpG();return e.Njj(a.handleClientSelected(l))}),e.k0s(),e.bVm()}}function co(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-gallery-categories",21),e.bIt("categorySelected",function(l){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleCategorySelected(l))}),e.k0s()}}function ro(i,n){if(1&i&&(e.qex(0),e.DNE(1,co,1,0,"app-gallery-categories",20),e.nI1(2,"async"),e.nI1(3,"async"),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,1,t.searchType$)===t.searchTypeEnum.Category||e.bMT(3,3,t.searchType$)===t.searchTypeEnum.Community)}}function po(i,n){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"app-gallery-filters-loft",22),e.bIt("configChange",function(l){e.eBV(t);const a=e.XpG();return e.Njj(a.handleLoftConfigChange(l))}),e.k0s(),e.bVm()}}function uo(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",23),e.nI1(1,"async"),e.j41(2,"button",24),e.bIt("click",function(){e.eBV(t);const l=e.XpG();return e.Njj(l.scrollToTop())}),e.nrm(3,"app-icon",25),e.EFF(4," Back to Top "),e.k0s()()}if(2&i){const t=e.XpG();e.AVh("gallery__to-top--mobile",e.bMT(1,2,t.siteFooter$)===t.siteFooterType.Mobile)}}function go(i,n){1&i&&(e.j41(0,"div",9),e.nrm(1,"app-gallery-title"),e.k0s())}class j{constructor(n,t,o){this.changeDetectorRef=n,this.store=t,this.breakpointObserver=o,this.applicationEnum=z.c,this.contentTypeEnum=M.c,this.searchTypeEnum=b.n,this.siteFooterType=ye.v,this.galleryActionMode=F.g,this.horizontalBreakpoint=L.m,this.application=z.c.Studio,this.contentType=M.c.Bookmark,this.viewMode=k.P.Card,this.showSourcePicker=!1,this.lazyLoadThreshold=480,this.lazyLoadCount=12,this.actionMode=F.g.Explore,this.actionsEnabled=!0,this.selectBookmark=new e.bkB,this.bulkAction=new e.bkB,this.searchConfig=(0,Be.ot)(this.store.select(d.Y.getSearchConfig)),this.category=(0,e.EWP)(()=>{if(this.searchConfig()?.type===b.n.Category)return(0,$e.p7)(this.searchConfig().categoryId)}),this.ngUnsubscribe=new S.B,this.isSmall=!0,this.showScrollTo=!1,this.mobileCutoff=!1}ngOnInit(){this.initBreakpointObserver(),this.initSearchConfigObserver()}ngAfterViewInit(){this.store.select(d.Y.getSidenav).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.toggleSidenav(n.open&&n.enabled)}),this.initLazyLoadObserver(),this.initScrollObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initSearchConfigObserver(){this.searchConfig$.pipe((0,g.Q)(this.ngUnsubscribe),(0,w.p)(n=>null!=n),(0,W.F)((n,t)=>(0,C.isEqual)(n,t)),(0,de.B)(100)).subscribe(n=>{if(this.contentType=this.store.selectSnapshot(d.Y.getSearchGroup),n.type===b.n.Category){const o=this.store.selectSnapshot(Q.k.getUserLanguage),a=(0,$e.QU)(o).find(r=>r.id===n.categoryId);this.tagCategory=a?.tabTags}else this.tagCategory=null;const t=this.store.selectSnapshot(d.Y.getSearchOptions);if(this.store.dispatch(new h.w.SetSearchOptions({...t,offset:0})),this.breakpointObserver.isMatched("(max-width: 959px)")){const o=this.store.selectSnapshot(d.Y.getSidenav);this.store.dispatch(new h.w.SetSidenav({...o,open:!1}))}this.changeDetectorRef.markForCheck(),this.search()})}initBreakpointObserver(){this.breakpointObserver.observe("(max-width: 959px)").pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.isSmall=n.matches;const t=this.store.selectSnapshot(d.Y.getSidenav);this.store.dispatch(new h.w.SetSidenav({...t,open:!this.isSmall})),this.store.dispatch(new h.w.SetViewMode(k.k)),this.changeDetectorRef.markForCheck()}),this.breakpointObserver.observe("(max-width: 540px)").pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.mobileCutoff=n.matches})}initLazyLoadObserver(){(0,Y.R)(this.content.getElementRef().nativeElement,"scroll").pipe((0,g.Q)(this.ngUnsubscribe),(0,de.B)(50)).subscribe(()=>{const n=this.content.getElementRef().nativeElement;if(n.scrollHeight-(n.scrollTop+n.offsetHeight)<=this.lazyLoadThreshold){const o=this.store.selectSnapshot(d.Y.getSearchOptions);o.pageSize+=this.lazyLoadCount,this.store.dispatch(new h.w.SetSearchOptions(o))}})}initScrollObserver(){this.sidenavContainer.scrollable.elementScrolled().pipe((0,g.Q)(this.ngUnsubscribe),(0,ee.T)(n=>n.srcElement.scrollTop>window.innerHeight),(0,W.F)()).subscribe(n=>{this.showScrollTo=n,this.changeDetectorRef.markForCheck()})}handleSelect(n){this.selectBookmark.emit(n)}handleCategorySelected(n){this.store.dispatch(new h.w.SearchCategory(n))}handleClientSelected(n){if(_.c.application===z.c.Studio){const t=(0,R.bj)(O.O5,{...this.store.selectSnapshot(d.Y.getSearchConfig),directory:`client/${n}`});this.store.dispatch(new h.w.SetSearchConfig(t))}}handleFiltersChange(n){this.handleSelectedTagChange(n.group,n.tag)}handleSelectedTagChange(n,t){const o=this.store.selectSnapshot(d.Y.getActiveTags);o[n]=t,this.store.dispatch(new h.w.SetActiveTags(o))}handleLoftConfigChange(n){this.store.dispatch(new h.w.SetSearchConfig(n))}handleBulkAction(n){this.bulkAction.emit(n)}handleSort(n){const t=this.store.selectSnapshot(d.Y.getSearchOptions);t.sortBy=n,this.store.dispatch(new h.w.SetSearchOptions(t)),0===t.sortBy.fields.length&&this.store.dispatch(new h.w.SearchStudio)}toggleSidenav(n){this.sidenav.toggle(n)}search(){this.store.dispatch(new h.w.SearchStudio)}scrollToTop(){this.content.scrollTo({top:0,behavior:"smooth"})}static#e=this.\u0275fac=function(t){return new(t||j)(e.rXU(e.gRc),e.rXU(c.il),e.rXU(P.QP))};static#t=this.\u0275cmp=e.VBU({type:j,selectors:[["app-gallery-container"]],viewQuery:function(t,o){if(1&t&&(e.GBs(G.US,7,G.US),e.GBs(to,7,G.LG),e.GBs(no,5,G.El)),2&t){let l;e.mGM(l=e.lsd())&&(o.sidenavContainer=l.first),e.mGM(l=e.lsd())&&(o.sidenav=l.first),e.mGM(l=e.lsd())&&(o.content=l.first)}},inputs:{application:"application",contentType:"contentType",viewMode:"viewMode",showSourcePicker:"showSourcePicker",lazyLoadThreshold:"lazyLoadThreshold",lazyLoadCount:"lazyLoadCount",actionMode:"actionMode",actionsEnabled:"actionsEnabled"},outputs:{selectBookmark:"selectBookmark",bulkAction:"bulkAction"},decls:39,vars:61,consts:()=>{let n;return n=$localize`:a34baa1282c78d04170353e19aaca50af32adf002181154762165715522:Gallery`,[["sidenavContainer",""],["sidenav",""],["content",""],["role","region","aria-label",n,1,"gallery",3,"ngClass"],[1,"gallery__container"],[1,"gallery__sidenav",3,"autoFocus","disableClose","fixedInViewport","fixedTopGap","fixedBottomGap","position","opened","mode"],[4,"ngIf"],["class","gallery__to-top",3,"gallery__to-top--mobile",4,"ngIf"],[1,"gallery__content","theme-light"],[1,"gallery__title"],[1,"gallery__header"],[3,"bulkAction","sortChange"],[1,"gallery__filters",3,"ngClass"],[3,"selectedTagChange","viewMode"],[1,"gallery__groups"],[3,"tagCategory"],[1,"gallery__results"],[3,"selectBookmark","actionMode","actionsEnabled","viewMode","loading","results","checkedResults"],[3,"actionMode"],[3,"clientSelected"],[3,"categorySelected",4,"ngIf"],[3,"categorySelected"],[3,"configChange"],[1,"gallery__to-top"],["type","button","app-button","","buttonTheme","light","buttonType","info","buttonShape","rounded",3,"click"],["icon","arrow-circle-up",1,"mr-1"]]},template:function(t,o){if(1&t){const l=e.RV6();e.j41(0,"div",3)(1,"mat-sidenav-container",4,0)(3,"mat-sidenav",5,1),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.DNE(11,lo,1,0,"app-gallery-source",6)(12,ao,2,1,"ng-container",6)(13,so,2,0,"ng-container",6)(14,ro,4,5,"ng-container",6)(15,po,2,0,"ng-container",6),e.nI1(16,"async"),e.k0s(),e.j41(17,"mat-sidenav-content",null,2),e.DNE(19,uo,5,4,"div",7),e.j41(20,"div",8),e.DNE(21,go,2,0,"div",9),e.nI1(22,"async"),e.j41(23,"div",10)(24,"app-gallery-header",11),e.bIt("bulkAction",function(r){return e.eBV(l),e.Njj(o.handleBulkAction(r))})("sortChange",function(r){return e.eBV(l),e.Njj(o.handleSort(r))}),e.k0s()(),e.j41(25,"div",12),e.nI1(26,"async"),e.nI1(27,"async"),e.nI1(28,"async"),e.j41(29,"app-gallery-filters",13),e.nI1(30,"async"),e.nI1(31,"async"),e.bIt("selectedTagChange",function(r){return e.eBV(l),e.Njj(o.handleFiltersChange(r))}),e.k0s()(),e.j41(32,"div",14),e.nrm(33,"app-gallery-groups",15),e.k0s(),e.j41(34,"div",16)(35,"app-gallery-results",17),e.nI1(36,"async"),e.nI1(37,"async"),e.nI1(38,"async"),e.bIt("selectBookmark",function(r){return e.eBV(l),e.Njj(o.handleSelect(r))}),e.k0s()()()()()()}if(2&t){let l,a;e.Y8G("ngClass",e.eq3(57,oo,o.isSmall)),e.R7$(3),e.Y8G("autoFocus",!1)("disableClose",e.bMT(5,25,o.sideNav$).disableClose)("fixedInViewport",o.isSmall)("fixedTopGap",e.bMT(6,27,o.siteHeaderHeight$))("fixedBottomGap",e.bMT(7,29,o.siteFooter$)===o.siteFooterType.Mobile?e.bMT(8,31,o.siteFooterHeight$):0)("position","start")("opened",(null==(l=e.bMT(9,33,o.sideNav$))?null:l.open)&&(null==(l=e.bMT(10,35,o.sideNav$))?null:l.enabled))("mode",o.isSmall?"push":"side"),e.R7$(8),e.Y8G("ngIf",o.showSourcePicker),e.R7$(),e.Y8G("ngIf",o.contentType===o.contentTypeEnum.Bookmark),e.R7$(),e.Y8G("ngIf",o.contentType===o.contentTypeEnum.Internal),e.R7$(),e.Y8G("ngIf",o.contentType===o.contentTypeEnum.Module),e.R7$(),e.Y8G("ngIf",e.bMT(16,37,o.searchType$)===o.searchTypeEnum.Loft),e.R7$(4),e.Y8G("ngIf",o.showScrollTo),e.R7$(2),e.vxM(null!=(a=o.category())&&a.featured||e.bMT(22,39,o.horizontalBreakpoint$)>o.horizontalBreakpoint.Medium?21:-1),e.R7$(4),e.Y8G("ngClass",e.eq3(59,io,(!1===e.bMT(26,41,o.hasFilters$)||!1===e.bMT(27,43,o.showFilters$))&&0===e.bMT(28,45,o.activeTagsCount$))),e.R7$(4),e.Y8G("viewMode",e.bMT(30,47,o.hasFilters$)&&e.bMT(31,49,o.showFilters$)&&!o.mobileCutoff?"expanded":"summary"),e.R7$(4),e.Y8G("tagCategory",o.tagCategory),e.R7$(2),e.Y8G("actionMode",o.actionMode)("actionsEnabled",o.actionsEnabled)("viewMode",o.viewMode)("loading",e.bMT(36,51,o.loading$))("results",e.bMT(37,53,o.results$))("checkedResults",e.bMT(38,55,o.checkedResults$))}},dependencies:[U.Q,y.YU,y.bT,G.LG,G.US,G.El,I.R,ae,fe,Ft,V,dn.E,D,Ie,je,Wn.N,Fe,y.Jj],styles:["[_nghost-%COMP%]{width:100%}.gallery[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;inset:0}.gallery[_ngcontent-%COMP%]   .mat-sidenav-content[_ngcontent-%COMP%]{background:#fff}.gallery--small[_ngcontent-%COMP%]   .gallery__container[_ngcontent-%COMP%], .gallery__container[_ngcontent-%COMP%]{flex:1}.gallery__sidenav[_ngcontent-%COMP%]{width:260px;padding-top:12px;color:#1c2a3f}.gallery__content[_ngcontent-%COMP%]{border-left:1px solid #d7e0ea;width:100%;min-height:100%;max-width:1440px;display:flex;flex-direction:column}.gallery__header[_ngcontent-%COMP%]{flex:0 1 auto}.gallery__filters[_ngcontent-%COMP%]{flex:0 1 auto;padding-left:40px;padding-right:40px}.gallery__groups[_ngcontent-%COMP%]{padding-left:40px;padding-right:40px;flex:0 0 auto;max-height:48px;overflow-x:auto;white-space:nowrap;background-color:#fff}.gallery__results[_ngcontent-%COMP%]{flex:1 1 100%;padding:24px 42px 36px;overflow-y:hidden}.gallery__to-top[_ngcontent-%COMP%]{pointer-events:none;display:flex;justify-content:center;position:fixed;padding-bottom:12px;bottom:0;z-index:10;left:0;width:100%}.gallery__to-top--mobile[_ngcontent-%COMP%]{bottom:56px}.gallery__to-top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{pointer-events:initial}@media (max-width: 959px){.gallery__content[_ngcontent-%COMP%]{border-left:0}.gallery__sidenav[_ngcontent-%COMP%]{padding-top:0}.gallery__results[_ngcontent-%COMP%]{padding:24px 20px 36px;overflow-y:hidden}}"],data:{animation:[(0,B.hZ)("inFromBottom",[(0,B.kY)(":enter",[(0,B.iF)({transform:"translateY(100%)"}),(0,B.i0)("250ms ease-out",(0,B.iF)({transform:"*"}))]),(0,B.kY)(":leave",[(0,B.i0)("250ms ease-out",(0,B.iF)({transform:"translateX(100%)"}))])])]},changeDetection:0})}A([(0,c.l6)(d.Y.getFilteredResults),N("design:type",p.c)],j.prototype,"results$",void 0),A([(0,c.l6)(d.Y.getCheckedResults),N("design:type",p.c)],j.prototype,"checkedResults$",void 0),A([(0,c.l6)(d.Y.getLoading),N("design:type",p.c)],j.prototype,"loading$",void 0),A([(0,c.l6)(d.Y.getSearchConfig),N("design:type",p.c)],j.prototype,"searchConfig$",void 0),A([(0,c.l6)(d.Y.getSearchType),N("design:type",p.c)],j.prototype,"searchType$",void 0),A([(0,c.l6)(d.Y.getSearchOptions),N("design:type",p.c)],j.prototype,"searchOptions$",void 0),A([(0,c.l6)(d.Y.getActiveTags),N("design:type",p.c)],j.prototype,"activeTags$",void 0),A([(0,c.l6)(d.Y.getActiveTagsCount),N("design:type",p.c)],j.prototype,"activeTagsCount$",void 0),A([(0,c.l6)(d.Y.getHasFilters),N("design:type",p.c)],j.prototype,"hasFilters$",void 0),A([(0,c.l6)(d.Y.getSidenav),N("design:type",p.c)],j.prototype,"sideNav$",void 0),A([(0,c.l6)(d.Y.getShowFilters),N("design:type",p.c)],j.prototype,"showFilters$",void 0),A([(0,c.l6)(le.W.getSiteFooter),N("design:type",p.c)],j.prototype,"siteFooter$",void 0),A([(0,c.l6)(le.W.getSiteFooterHeight),N("design:type",p.c)],j.prototype,"siteFooterHeight$",void 0),A([(0,c.l6)(le.W.getSiteHeaderHeight),N("design:type",p.c)],j.prototype,"siteHeaderHeight$",void 0),A([(0,c.l6)(d.Y.getBulkActionsAvailable),N("design:type",p.c)],j.prototype,"bulkActionsAvailable$",void 0),A([(0,c.l6)(d.Y.getBulkActionsActive),N("design:type",p.c)],j.prototype,"bulkActionsActive$",void 0),A([(0,c.l6)(te.V.getHorizontalBreakpoint),N("design:type",p.c)],j.prototype,"horizontalBreakpoint$",void 0)},17773:(ve,X,s)=>{s.d(X,{EM:()=>c,qg:()=>e,xM:()=>d});var e=function(S){return S.ExportCSV="Export CSV",S.AddToLibrary="Save Selected Models",S.Delete="Delete",S.Manage="Manage",S}(e||{});const c={[e.ExportCSV]:"exportCSVButton",[e.AddToLibrary]:"AddToTeamLibraryButton",[e.Delete]:"DeleteButton",[e.Manage]:"Manage"},d={[e.ExportCSV]:"file-csv",[e.AddToLibrary]:"plus",[e.Delete]:"minus",[e.Manage]:"folders"}},36569:(ve,X,s)=>{s.d(X,{q:()=>S});var e=s(60177),c=s(92014),k=s(12374),d=s(54438);let S=(()=>{class Y{static#e=this.\u0275fac=function(O){return new(O||Y)};static#t=this.\u0275mod=d.$C({type:Y});static#n=this.\u0275inj=d.G2t({imports:[e.MD,c.rK.forFeature([k.z])]})}return Y})()},90856:(ve,X,s)=>{s.d(X,{$3:()=>S,G5:()=>d,NZ:()=>k,OS:()=>Y,T_:()=>O,W1:()=>p,lZ:()=>z,lu:()=>h,oJ:()=>c});let c=(()=>{class _{static#e=this.type="[Modules] Save Module";constructor(g,w,W){this.id=g,this.saveConfig=w,this.trimConfig=W}}return _})(),k=(()=>{class _{static#e=this.type="[Modules] Save Module Success";constructor(g,w,W=!1){this.id=g,this.story=w,this.statesDuplicated=W}}return _})(),d=(()=>{class _{static#e=this.type="[Modules] Save Module Failure";constructor(g){this.id=g}}return _})(),S=(()=>{class _{static#e=this.type="[Modules] Duplicate Module Success";constructor(g){this.id=g}}return _})(),Y=(()=>{class _{static#e=this.type="[Modules] Duplicate Module Failure";constructor(g){this.id=g}}return _})(),p=(()=>{class _{static#e=this.type="[Modules] Set Save Module";constructor(g){this.module=g}}return _})(),z=(()=>{class _{static#e=this.type="[Modules] Get Primary Categories";constructor(){}}return _})(),O=(()=>{class _{static#e=this.type="[Modules] Get Secondary Categories";constructor(g){this.primaryCategory=g}}return _})(),h=(()=>{class _{static#e=this.type="[Modules] Reset";constructor(){}}return _})()},12374:(ve,X,s)=>{s.d(X,{z:()=>I});var U,e=s(28407),c=s(92014),k=s(90856),d=s(84426),S=s(21894),Y=s(97978),p=s(52597),z=s(94495),O=s(17766),h=s(15877),_=s(46104),G=s(15152),g=s(36110),w=s(39705),W=s(32914),de=s(17365),ue=s(22679),C=s(49204),R=s(65881),M=s(35939),b=s(65650),B=s(1580),F=s(57238),le=s(82323),ye=s(21523),Q=s(58832),$e=s(40215),Be=s(16606),te=s(54438),L=function(ge,f,v,T){var ne,m=arguments.length,E=m<3?f:null===T?T=Object.getOwnPropertyDescriptor(f,v):T;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(ge,f,v,T);else for(var he=ge.length-1;he>=0;he--)(ne=ge[he])&&(E=(m<3?ne(E):m>3?ne(f,v,E):ne(f,v))||E);return m>3&&E&&Object.defineProperty(f,v,E),E},P=function(ge,f){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ge,f)};const y={primaryCategoryOptions:[],secondaryCategoryOptions:[],moduleExists:!1,saveModule:new class ee{},storyType:O.c.Module,saving:!1};let I=class He{static#e=U=this;constructor(f,v,T,m,E){this.store=f,this.serializeModuleService=v,this.modulesService=T,this.imagesService=m,this.storyService=E}static getSaveModule(f){return f.saveModule}static getPrimaryCategoryOptions(f){return(0,c.Mz)([U],v=>"read"===f?v.primaryCategoryOptions:v.primaryCategoryOptions.filter(T=>"exports"!==T))}static getSecondaryCategoryOptions(f){return f.secondaryCategoryOptions}static getSaving(f){return f.saving}saveModule(f,v){var T=this;return(0,e.A)(function*(){f.patchState({saving:!0});const m=v.saveConfig,E=v.trimConfig?v.trimConfig:new S.F,ne=m.duplicate?v.saveConfig.namespaceMap:{},he=T.store.selectSnapshot(z.N.getStoryChapters),Ee=!1===m.replace,Re=(0,R.S)(he,Ee);Ee&&(yield(0,$e._)(T.store.dispatch(new M.u.UpdateTweenParticleLookupChapters(Re))));const oe=T.serializeModuleService.serialize(ne,E,v.saveConfig.duplicate,T.store.selectSnapshot(ue.t.getStory),T.store.selectSnapshot(z.N.getStoryChapters),Re,!1),we=T.store.selectSnapshot(ue.t.getStoryId);T.storyService.checkStoryIdChange(we,v.id)&&T.storyService.addContentRecord(we,oe.story);const ae=T.store.selectSnapshot(ye.J.getSelectedBookmarkViewMode),De=(0,C.without)(oe.story.tags,Q._.Content,Q._.Quiz);ae&&De.push(ae),oe.story.tags=De;let Ge=(0,h.of)([]);const Ae=T.store.selectSnapshot(b.K.getRegisteredThumbnails),Ne=T.imagesService.saveChapterThumbnails(oe.story.chapters,Ae,(0,C.invert)(Re));if(Ne.length&&(Ge=(0,_.p)(Ne)),Ge.pipe((0,G.j)(()=>f.patchState({saving:!1})),(0,g.T)(se=>{const ie=T.store.selectSnapshot(b.K.getRegisteredThumbnails);return se.forEach(ce=>{const Me=new F.R;Me.storyId=oe.story.moduleId,Me.chapterId=ce.chapterId,Me.urls={small:ce.uris.small,large:ce.uris.large},ie.set(ce.chapterId,Me);const Ye=oe.story.chapters.findIndex(Ve=>Ve.id===ce.chapterId);Ye>=0&&(oe.story.chapters[Ye].thumbnails={...ce.uris})}),ie}),(0,w.M)(se=>{f.dispatch(new le.W2(se))}),(0,W.n)(()=>T.modulesService.saveModule(oe.story,v.id))).subscribe(se=>{f.dispatch(se===p.d.Success?new k.NZ(v.id,oe.story,v.saveConfig.duplicate):new k.G5(v.id))}),m.duplicate){const se=[];Object.entries(ne).forEach(([ie,ce])=>{se.push(T.modulesService.copyState(ie,ce))}),(0,_.p)(se).subscribe(ie=>{f.dispatch(new k.$3(v.id))},ie=>{f.dispatch(new k.OS(v.id))})}})()}setSaveModule(f,v){f.patchState({saveModule:{...v.module}})}getModulePrimaryCategories(f,v){this.modulesService.getPrimaryCategories().subscribe(T=>{f.patchState({primaryCategoryOptions:T})})}getModuleSecondaryCategories(f,v){this.modulesService.getSecondaryCategories(v.primaryCategory).subscribe(T=>{f.patchState({secondaryCategoryOptions:T})})}resetModules(f,v){(0,_.p)(this.modulesService.getPrimaryCategories(),this.modulesService.getSecondaryCategories("")).pipe((0,de.s)(1)).subscribe(([T,m])=>{f.patchState({primaryCategoryOptions:T,secondaryCategoryOptions:m})})}static#t=this.\u0275fac=function(v){return new(v||He)(te.KVO(c.il),te.KVO(d.g),te.KVO(Y.F),te.KVO(B.M),te.KVO(Be.J))};static#n=this.\u0275prov=te.jDH({token:He,factory:He.\u0275fac})};L([(0,c.rc)(k.oJ),P("design:type",Function),P("design:paramtypes",[Object,k.oJ]),P("design:returntype",Promise)],I.prototype,"saveModule",null),L([(0,c.rc)(k.W1),P("design:type",Function),P("design:paramtypes",[Object,k.W1]),P("design:returntype",void 0)],I.prototype,"setSaveModule",null),L([(0,c.rc)(k.lZ),P("design:type",Function),P("design:paramtypes",[Object,k.lZ]),P("design:returntype",void 0)],I.prototype,"getModulePrimaryCategories",null),L([(0,c.rc)(k.T_),P("design:type",Function),P("design:paramtypes",[Object,k.T_]),P("design:returntype",void 0)],I.prototype,"getModuleSecondaryCategories",null),L([(0,c.rc)(k.lu),P("design:type",Function),P("design:paramtypes",[Object,k.lu]),P("design:returntype",void 0)],I.prototype,"resetModules",null),L([(0,c.MD)(),P("design:type",Function),P("design:paramtypes",[Object]),P("design:returntype",void 0)],I,"getSaveModule",null),L([(0,c.MD)(),P("design:type",Function),P("design:paramtypes",[Object]),P("design:returntype",void 0)],I,"getSecondaryCategoryOptions",null),L([(0,c.MD)(),P("design:type",Function),P("design:paramtypes",[Object]),P("design:returntype",void 0)],I,"getSaving",null),I=U=L([(0,c.Uw)({name:"modules",defaults:y}),P("design:paramtypes",[c.il,d.g,Y.F,B.M,Be.J])],I)},291:(ve,X,s)=>{s.d(X,{J:()=>ue});var e=s(54438),c=s(92014),k=s(2573),d=s(38165),S=s(16823),Y=s(11040),p=s(82542),z=s(21007),O=s(60177),h=s(26779),_=s(59115);function w(C,R){if(1&C&&(e.nrm(0,"img",8),e.nI1(1,"async"),e.nI1(2,"async")),2&C){let M;const b=e.XpG(2);e.Y8G("src",b.getLocaleFlag(e.bMT(1,2,b.userLocale$)),e.B4B),e.BMQ("alt",null==(M=e.bMT(2,4,b.userLocale$))?null:M.title)}}function W(C,R){if(1&C&&(e.j41(0,"button",3)(1,"div",4),e.DNE(2,w,3,6,"img",5),e.j41(3,"span",6),e.EFF(4),e.nI1(5,"async"),e.k0s(),e.nrm(6,"app-icon",7),e.k0s()()),2&C){const M=e.XpG(),b=e.sdS(3);e.Y8G("buttonSize",M.buttonSize())("buttonTheme",M.buttonTheme())("buttonType",M.buttonType())("matMenuTriggerFor",b),e.BMQ("aria-label","Select your locale"),e.R7$(2),e.Y8G("ngIf",M.showFlag()),e.R7$(2),e.JRh(M.displayLocale(e.bMT(5,7,M.userLocale$)))}}function de(C,R){if(1&C){const M=e.RV6();e.j41(0,"button",9),e.bIt("click",function(){const B=e.eBV(M).$implicit,F=e.XpG();return e.Njj(F.handleLocaleSelection(B))}),e.j41(1,"span",4),e.nrm(2,"img",8),e.EFF(3),e.nI1(4,"uppercase"),e.k0s()()}if(2&C){const M=R.$implicit,b=e.XpG();e.BMQ("aria-label",M.title)("data-test",b.localesDataTestMap[M.lang]),e.R7$(2),e.Y8G("src",b.getLocaleFlag(M),e.B4B),e.BMQ("alt",M.title),e.R7$(),e.Lme(" ",M.title," (",e.bMT(4,6,M.lang),") ")}}var ee=function(C){return C.Full="full",C.Title="title",C.Lang="lang",C}(ee||{});class ue{constructor(R){this.store=R,this.locales=Y.IB,this.localesDataTestMap=Y.A8,this.buttonType=(0,e.hFB)("default"),this.buttonTheme=(0,e.hFB)(p.P.Dark),this.buttonSize=(0,e.hFB)("md"),this.localeFormat=(0,e.hFB)(ee.Full),this.showFlag=(0,e.hFB)(!0)}handleLocaleSelection(R){this.store.selectSnapshot(S.k.getUserLocale)!==R&&this.store.dispatch(new d.aD(R,!0))}getLocaleFlag(R){return`/assets/images/flags/${R.country}.svg`}displayLocale(R){switch(this.localeFormat()){case ee.Full:return`${R.title} (${R.lang})`;case ee.Title:return R.title;case ee.Lang:return R.lang}}static#e=this.\u0275fac=function(M){return new(M||ue)(e.rXU(c.il))};static#t=this.\u0275cmp=e.VBU({type:ue,selectors:[["app-locales"]],inputs:{buttonType:[1,"buttonType"],buttonTheme:[1,"buttonTheme"],buttonSize:[1,"buttonSize"],localeFormat:[1,"localeFormat"],showFlag:[1,"showFlag"]},decls:5,vars:4,consts:[["localeOptions","matMenu"],["app-button","",3,"buttonSize","buttonTheme","buttonType","matMenuTriggerFor",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["app-button","",3,"buttonSize","buttonTheme","buttonType","matMenuTriggerFor"],[1,"flex","items-center"],["class","mr-2",3,"src",4,"ngIf"],[1,"font-semibold"],["icon","caret-down",1,"ml-1"],[1,"mr-2",3,"src"],["mat-menu-item","",3,"click"]],template:function(M,b){1&M&&(e.DNE(0,W,7,9,"button",1),e.nI1(1,"async"),e.j41(2,"mat-menu",null,0),e.DNE(4,de,5,8,"button",2),e.k0s()),2&M&&(e.Y8G("ngIf",e.bMT(1,2,b.userLocale$)),e.R7$(4),e.Y8G("ngForOf",b.locales))},dependencies:[z.Q,O.Sq,O.bT,h.R,_.kk,_.fb,_.Cp,O.Jj,O.Pc],changeDetection:0})}!function(C,R,M,b){var le,B=arguments.length,F=B<3?R:null===b?b=Object.getOwnPropertyDescriptor(R,M):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)F=Reflect.decorate(C,R,M,b);else for(var ye=C.length-1;ye>=0;ye--)(le=C[ye])&&(F=(B<3?le(F):B>3?le(R,M,F):le(R,M))||F);B>3&&F&&Object.defineProperty(R,M,F)}([(0,c.l6)(S.k.getUserLocale),function(C,R){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",R)}(0,k.c)],ue.prototype,"userLocale$",void 0)},88041:(ve,X,s)=>{s.d(X,{K:()=>z});var e=s(54438),c=s(21007),k=s(60177),d=s(26779),S=s(59115);function Y(O,h){if(1&O&&(e.j41(0,"button",3)(1,"span",4)(2,"span",5),e.EFF(3,"Sort:"),e.k0s(),e.EFF(4),e.nrm(5,"app-icon",6),e.k0s()()),2&O){const _=e.XpG(),G=e.sdS(2);e.Y8G("buttonSize",_.buttonSize())("uppercase",!1)("matMenuTriggerFor",G),e.BMQ("aria-label",_.sortLabel()),e.R7$(4),e.SpI("",_.sort().label," ")}}function p(O,h){if(1&O){const _=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){const g=e.eBV(_).$implicit,w=e.XpG();return e.Njj(w.handleSort(g))}),e.EFF(1),e.k0s()}if(2&O){const _=h.$implicit;e.BMQ("data-test-value",_.dataTest)("aria-label","Sort by "+_.label),e.R7$(),e.SpI(" ",_.label," ")}}let z=(()=>{class O{constructor(){this.sort=(0,e.hFB)(),this.sortOptions=(0,e.hFB)([]),this.sortLabel=(0,e.hFB)(),this.sortChange=(0,e.CGW)(),this.buttonSize=(0,e.hFB)()}handleSort(_){this.sortChange.emit(_)}static#e=this.\u0275fac=function(G){return new(G||O)};static#t=this.\u0275cmp=e.VBU({type:O,selectors:[["app-sort"]],inputs:{sort:[1,"sort"],sortOptions:[1,"sortOptions"],sortLabel:[1,"sortLabel"],buttonSize:[1,"buttonSize"]},outputs:{sortChange:"sortChange"},decls:4,vars:2,consts:[["sortActions","matMenu"],["app-button","","buttonTheme","light","data-test","gallerySortBy",3,"buttonSize","uppercase","matMenuTriggerFor",4,"ngIf"],["mat-menu-item","","data-test","gallerySortByItem",3,"click",4,"ngFor","ngForOf"],["app-button","","buttonTheme","light","data-test","gallerySortBy",3,"buttonSize","uppercase","matMenuTriggerFor"],[1,"whitespace-nowrap"],[1,"hidden","mr-1","font-semibold","sm:inline-block"],["icon","caret-down",1,"ml-1"],["mat-menu-item","","data-test","gallerySortByItem",3,"click"]],template:function(G,g){1&G&&(e.DNE(0,Y,6,5,"button",1),e.j41(1,"mat-menu",null,0),e.DNE(3,p,2,3,"button",2),e.k0s()),2&G&&(e.Y8G("ngIf",g.sort()),e.R7$(3),e.Y8G("ngForOf",g.sortOptions()))},dependencies:[c.Q,k.Sq,k.bT,d.R,S.kk,S.fb,S.Cp],changeDetection:0})}return O})()}}]);