"use strict";(self.webpackChunkhuman_studio_next=self.webpackChunkhuman_studio_next||[]).push([[742],{51452:(ve,X,s)=>{s.d(X,{j:()=>F});var E,e=s(54438),r=s(65763),S=s(58841),d=s(43194),O=s(85052),$=s(35426),c=s(2573),V=s(27180),T=s(72865),y=s(28696),h=s(24418),m=s(90882),_=s(37925),G=s(14264),K=s(21082),Q=s(87996),_e=s(36110),j=(s(74394),s(49204)),R=s(40470),M=s(17766),f=s(97948),x=s(49969),N=s(79898),Y=s(32408),ge=s(7277),w=s(16823),Ve=s(66432),Ue=s(89079),te=s(38104),H=s(15623),ne=s(99327),v=s(21007),C=s(60177),oe=s(26779),z=s(12374),se=s(76718),b=s(90856),k=s(72192),u=s(89417),B=s(12614),le=function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},ue=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function ze(o,n){if(1&o&&(e.j41(0,"option",8),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Oe(o,n){if(1&o&&(e.j41(0,"option",8),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function ie(o,n){if(1&o&&(e.j41(0,"select",9),e.DNE(1,Oe,2,2,"option",5),e.nI1(2,"async"),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",e.bMT(2,1,t.secondaryCategoryOptions$))}}function Le(o,n){if(1&o){const t=e.RV6();e.j41(0,"form",2)(1,"div",3)(2,"select",4),e.DNE(3,ze,2,2,"option",5),e.nI1(4,"async"),e.k0s()(),e.j41(5,"div",3),e.DNE(6,ie,3,3,"select",6),e.nI1(7,"async"),e.k0s(),e.j41(8,"button",7),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleSearchMode(i.gallerySearchMode.Path))}),e.EFF(9," ...or specify file path "),e.k0s()()}if(2&o){let t;const l=e.XpG();e.Y8G("formGroup",l.queryForm),e.R7$(3),e.Y8G("ngForOf",e.bMT(4,3,l.primaryCategoryOptions$)),e.R7$(3),e.Y8G("ngIf",null==(t=e.bMT(7,5,l.secondaryCategoryOptions$))?null:t.length)}}function ot(o,n){if(1&o){const t=e.RV6();e.j41(0,"form",2)(1,"div",3),e.nrm(2,"input",10),e.k0s(),e.j41(3,"button",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleSearchMode(i.gallerySearchMode.Query))}),e.EFF(4," Cancel "),e.k0s()()}if(2&o){const t=e.XpG();e.Y8G("formGroup",t.pathForm)}}class me{get primaryCategoryControl(){return this.queryForm.get("primary")}get secondaryCategoryControl(){return this.queryForm.get("secondary")}get pathControl(){return this.pathForm.get("path")}constructor(n,t){this.store=n,this.formBuilder=t,this.gallerySearchMode=k.A,this.configChange=new e.bkB,this.ngUnsubscribe=new O.B}ngOnInit(){this.initForms(),this.initFormListeners(),this.store.dispatch(new b.lZ),this.store.dispatch(new b.T_(this.primaryCategoryControl.value))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForms(){const n=this.store.selectSnapshot(d.Y.getSearchConfig);this.queryForm=this.formBuilder.group({primary:[n.type===f.n.Loft?n.primary:"production"],secondary:[n.type===f.n.Loft?n.secondary:"maleAdult"]}),this.pathForm=this.formBuilder.group({path:[]})}initFormListeners(){this.primaryCategoryControl.valueChanges.pipe((0,_.Q)(this.ngUnsubscribe)).subscribe(n=>{this.handlePrimaryUpdate(n)}),(0,se.h)(this.queryForm.valueChanges,this.pathForm.valueChanges).pipe((0,Q.B)(300),(0,_.Q)(this.ngUnsubscribe)).subscribe(()=>{const n=this.getQuery();n&&this.configChange.emit(n)})}toggleSearchMode(n){this.store.dispatch(new y.w.SetSearchMode(n))}handlePrimaryUpdate(n){this.secondaryCategoryControl.setValue(""),this.store.dispatch(new b.T_(n))}getQuery(){switch(this.store.selectSnapshot(d.Y.getSearchMode)){case k.A.Query:if(this.primaryCategoryControl.value)return new T.qS(this.primaryCategoryControl.value,this.secondaryCategoryControl.value);break;case k.A.Path:const n=decodeURIComponent(this.pathControl.value||""),t=n.split("/"),i=n.match(/([A-Za-z_-\s0-9]*\/)/gi);if(null!=i)return new T.qS((i[0]||"").replace("/",""),(i[1]||"").replace("/",""),t.pop())}return null}}(E=me).\u0275fac=function(n){return new(n||E)(e.rXU(r.il),e.rXU(u.ze))},E.\u0275cmp=e.VBU({type:E,selectors:[["app-gallery-filters-loft"]],outputs:{configChange:"configChange"},decls:5,vars:7,consts:[["label","Path",3,"collapsible"],["class","gallery-filters theme-light p-5",3,"formGroup",4,"ngIf"],[1,"gallery-filters","theme-light","p-5",3,"formGroup"],[1,"pb-4"],["appAutoFocus","","formControlName","primary",1,"input"],[3,"value",4,"ngFor","ngForOf"],["class","input","formControlName","secondary",4,"ngIf"],["type","button","app-button","","buttonTheme","light","data-test","specifyFilePath",3,"click"],[3,"value"],["formControlName","secondary",1,"input"],["type","text","formControlName","path","placeholder","primary/secondary/name","data-test","moduleIdInput",1,"input"],["type","button","appAutoFocus","","app-button","","buttonTheme","light",3,"click"]],template:function(n,t){1&n&&(e.j41(0,"app-navigation-panel",0),e.DNE(1,Le,10,7,"form",1),e.nI1(2,"async"),e.DNE(3,ot,5,1,"form",1),e.nI1(4,"async"),e.k0s()),2&n&&(e.Y8G("collapsible",!1),e.R7$(),e.Y8G("ngIf",e.bMT(2,3,t.searchMode$)===t.gallerySearchMode.Query),e.R7$(2),e.Y8G("ngIf",e.bMT(4,5,t.searchMode$)===t.gallerySearchMode.Path))},dependencies:[v.Q,C.Sq,C.bT,u.qT,u.xH,u.y7,u.me,u.wz,u.BC,u.cb,u.j4,u.JD,B.k,C.Jj],changeDetection:0}),le([(0,r.l6)(z.z.getPrimaryCategoryOptions("read")),ue("design:type",c.c)],me.prototype,"primaryCategoryOptions$",void 0),le([(0,r.l6)(z.z.getSecondaryCategoryOptions),ue("design:type",c.c)],me.prototype,"secondaryCategoryOptions$",void 0),le([(0,r.l6)(d.Y.getSearchMode),ue("design:type",c.c)],me.prototype,"searchMode$",void 0);var ye,Xe=s(29160),Ge=s(82656),Qe=s(39705),He=s(40634),re=s(30234),ae=s(38645),ce=s(97352),Me=s(96931),Je=s(44971),ut=function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},gt=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Gt=o=>({"gallery-cards--list":o});function Rt(o,n){if(1&o){const t=e.RV6();e.j41(0,"li",3)(1,"app-gallery-card",4),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("selectBookmark",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.handleSelect(i))})("checkChange",function(i){const a=e.eBV(t).$implicit,p=e.XpG();return e.Njj(p.handleCheckedChange(a,i))}),e.k0s()()}if(2&o){const t=n.$implicit,l=e.XpG();e.R7$(),e.Y8G("actionMode",l.actionMode)("actionsEnabled",l.actionsEnabled)("bookmark",t)("viewMode",e.bMT(2,7,l.viewMode$))("responsive",e.bMT(3,9,l.horizontalBreakpoint$)<=l.horizontalBreakpoint.Medium)("checked",!0===l.checkedResultsMap[t.id]),e.BMQ("data-id",t.id)}}class We{get results(){return this._results}set results(n){this._results=n,this.checkedResultsMap=this.getCheckedResultsMap(n.items,this.checkedResults),this.changeRef.markForCheck()}get checkedResults(){return this._checkedResults}set checkedResults(n){this._checkedResults=n,this.checkedResultsMap=this.getCheckedResultsMap(this.results.items,n),this.changeRef.markForCheck()}constructor(n){this.changeRef=n,this.galleryViewMode=S.P,this.horizontalBreakpoint=H.m,this._checkedResults=[],this.selectBookmark=new e.bkB,this.checkChanged=new e.bkB,this.actionMode=N.g.Explore,this.actionsEnabled=!0,this.checkedResultsMap={}}handleSelect(n){this.selectBookmark.emit(n)}handleCheckedChange(n,t){this.checkChanged.emit({id:n.id,checked:t})}trackCard(n,t){return t.id}getCheckedResultsMap(n,t){return n.reduce((l,i)=>(l[i.id]=t.includes(i.id),l),{})}}(ye=We).\u0275fac=function(n){return new(n||ye)(e.rXU(e.gRc))},ye.\u0275cmp=e.VBU({type:ye,selectors:[["app-gallery-cards"]],inputs:{results:"results",checkedResults:"checkedResults",actionMode:"actionMode",actionsEnabled:"actionsEnabled"},outputs:{selectBookmark:"selectBookmark",checkChanged:"checkChanged"},decls:4,vars:7,consts:[["data-test","galleryCards",1,"gallery-cards",3,"ngClass"],[1,"gallery-cards__content"],["class","gallery-cards__item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"gallery-cards__item"],[3,"selectBookmark","checkChange","actionMode","actionsEnabled","bookmark","viewMode","responsive","checked"]],template:function(n,t){1&n&&(e.j41(0,"div",0),e.nI1(1,"async"),e.j41(2,"ul",1),e.DNE(3,Rt,4,11,"li",2),e.k0s()()),2&n&&(e.Y8G("ngClass",e.eq3(5,Gt,e.bMT(1,3,t.viewMode$)===t.galleryViewMode.Row)),e.R7$(3),e.Y8G("ngForOf",t.results.items)("ngForTrackBy",t.trackCard))},dependencies:[C.YU,C.Sq,Je.u,C.Jj],styles:[":host{display:block;height:100%;width:100%}.gallery-cards{display:block;width:100%}.gallery-cards--list .gallery-cards__content{grid-template-columns:100%;grid-gap:0}.gallery-cards__loading{display:flex;justify-content:center;margin-top:20vh}.gallery-cards__content{display:block;padding:1px;height:100%;display:grid;gap:20px;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));grid-auto-rows:1fr;grid-auto-flow:row;justify-content:center}@media (max-width: 498px){.gallery-cards__content{gap:24px}}\n"],encapsulation:2,changeDetection:0}),ut([(0,r.l6)(d.Y.getViewMode),gt("design:type",c.c)],We.prototype,"viewMode$",void 0),ut([(0,r.l6)(te.V.getHorizontalBreakpoint),gt("design:type",c.c)],We.prototype,"horizontalBreakpoint$",void 0);var Re,lt=function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},it=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const xt=["body"],Pt=()=>["/results/modules"];function It(o,n){1&o&&e.nrm(0,"app-zspace-alert",8)}function jt(o,n){if(1&o){const t=e.RV6();e.j41(0,"div"),e.DNE(1,It,1,0,"app-zspace-alert",6),e.j41(2,"app-gallery-cards",7),e.bIt("selectBookmark",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.handleSelect(i))})("checkChanged",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.handleCheckedChange(i))}),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.zspaceRestricted),e.R7$(),e.Y8G("actionMode",t.actionMode)("actionsEnabled",t.actionsEnabled)("results",t.results)("checkedResults",t.checkedResults)}}function Ft(o,n){1&o&&(e.j41(0,"div",9),e.nrm(1,"app-spinner",10),e.k0s())}function $t(o,n){1&o&&(e.j41(0,"div",15)(1,"div",16)(2,"div",17),e.EFF(3,"Add your first 3D model"),e.k0s(),e.EFF(4," This is your library of saved anatomy models in the BioDigital Human. Customize, manage, and publish your models at any time. "),e.k0s(),e.j41(5,"button",18),e.EFF(6," Start Exploring "),e.k0s()()),2&o&&(e.R7$(5),e.Y8G("routerLink",e.lJ4(1,Pt)))}function Bt(o,n){1&o&&(e.qex(0),e.j41(1,"div",19),e.nrm(2,"app-icon",20),e.k0s(),e.j41(3,"p",21),e.EFF(4,"No results found"),e.k0s(),e.j41(5,"p",22),e.EFF(6,"Can't find what you're looking for?"),e.k0s(),e.j41(7,"button",23),e.EFF(8," Submit A Request "),e.k0s(),e.bVm()),2&o&&(e.R7$(7),e.Y8G("uppercase",!0))}function Et(o,n){if(1&o&&(e.j41(0,"div",11),e.qex(1,12),e.DNE(2,$t,7,2,"div",13)(3,Bt,9,1,"ng-container",14),e.bVm(),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngSwitch",t.emptyMessage),e.R7$(),e.Y8G("ngSwitchCase","team"),e.R7$(),e.Y8G("ngSwitchCase","default")}}class xe{get results(){return this._results.value}set results(n){this._results.next(n),this.changeDetectorRef.markForCheck()}constructor(n,t,l){this.changeDetectorRef=n,this.store=t,this.bookmarkService=l,this.galleryViewMode=S.P,this.loading=!1,this.viewMode=S.P.Card,this._results=new Xe.t({total:0,items:[]}),this.checkedResults=[],this.actionMode=N.g.Explore,this.actionsEnabled=!0,this.selectBookmark=new e.bkB,this.zspaceRestricted=!1,this.emptyMessage="default",this.ngUnsubscribe=new O.B}ngOnInit(){(0,Ge.z)([this.store.select(d.Y.getSearchConfig),this._results]).pipe((0,K.F)((n,t)=>(0,j.isEqual)(n,t)),(0,Qe.M)(()=>{this.emptyMessage="none",this.changeDetectorRef.markForCheck()}),(0,Q.B)(100),(0,_.Q)(this.ngUnsubscribe),(0,Qe.M)(()=>{const n=this.store.selectSnapshot(d.Y.isZSpaceSearch);this.zspaceRestricted=n&&this.bookmarkService.getZSpaceRestriction()!==re.O.None}),(0,G.p)(([n,t])=>!(0,j.isNil)(n)&&0===t.total)).subscribe(([n,t])=>{this.updateEmptyMessage(n,t),this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleSelect(n){this.selectBookmark.emit(n)}handleCheckedChange(n){this.store.dispatch(new y.w.CheckItem(n.id,n.checked))}handleSort(n){const t=this.store.selectSnapshot(d.Y.getSearchOptions);t.sortBy=n,this.store.dispatch(new y.w.SetSearchOptions(t)),0===t.sortBy.fields.length&&this.store.dispatch(new y.w.SearchStudio)}updateEmptyMessage(n,t){this.emptyMessage="default",""===n.query&&(n.type===f.n.Collection||n.type===f.n.Organization||n.type===f.n.Private)&&0===t.total&&(this.emptyMessage="team")}scrollToTop(){this.body.nativeElement.scrollTo({top:0})}}(Re=xe).\u0275fac=function(n){return new(n||Re)(e.rXU(e.gRc),e.rXU(r.il),e.rXU(He.x))},Re.\u0275cmp=e.VBU({type:Re,selectors:[["app-gallery-results"]],viewQuery:function(n,t){if(1&n&&e.GBs(xt,7),2&n){let l;e.mGM(l=e.lsd())&&(t.body=l.first)}},inputs:{loading:"loading",viewMode:"viewMode",results:"results",checkedResults:"checkedResults",actionMode:"actionMode",actionsEnabled:"actionsEnabled"},outputs:{selectBookmark:"selectBookmark"},decls:6,vars:3,consts:[["body",""],["data-test","galleryResults",1,"gallery-results"],[1,"gallery-results__body"],[4,"ngIf"],["class","gallery-results__loading",4,"ngIf"],["class","gallery-results__empty",4,"ngIf"],["class","block mb-4",4,"ngIf"],[3,"selectBookmark","checkChanged","actionMode","actionsEnabled","results","checkedResults"],[1,"block","mb-4"],[1,"gallery-results__loading"],["size","huge","direction","vertical","label","Loading"],[1,"gallery-results__empty"],[3,"ngSwitch"],["class","gallery-results__explore",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"gallery-results__explore"],["role","status",1,"mb-5"],[1,"text-base","mb-2"],["app-button","","buttonSize","xl","buttonType","primary",3,"routerLink"],[1,"gallery-results__magnifying-glass","mb-8"],["icon","search"],["role","status",1,"gallery-results__no-results-title","mb-3"],[1,"gallery-results__no-results-copy","mb-8"],["app-button","","buttonType","primary","data-test","noResultsButton",3,"uppercase"]],template:function(n,t){1&n&&(e.j41(0,"div",1)(1,"div",2,0),e.DNE(3,jt,3,5,"div",3)(4,Ft,2,0,"div",4)(5,Et,4,3,"div",5),e.k0s()()),2&n&&(e.R7$(3),e.Y8G("ngIf",t.viewMode===t.galleryViewMode.Card&&!t.loading&&t.results),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",!t.loading&&t.results&&0===t.results.total))},dependencies:[ae.Wk,v.Q,C.bT,C.ux,C.e1,ce.tI,oe.R,Me.u,We],styles:[".gallery-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;min-height:64px;position:relative}.gallery-results__loading[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.gallery-results__body[_ngcontent-%COMP%]{padding:0 0 120px;flex:1 1 100%}.gallery-results__empty[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;color:#96a8c0;display:flex;flex-direction:column;height:100%;width:100%;min-height:64px;align-items:center;justify-content:center;text-align:center}.gallery-results__explore[_ngcontent-%COMP%]{max-width:530px}.gallery-results__no-results-title[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem;font-weight:600;color:#374a68}.gallery-results__no-results-body[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;color:#374a68}.gallery-results__magnifying-glass[_ngcontent-%COMP%]{height:84px;width:84px;border-radius:50%;font-size:40px;line-height:84px;color:#61779e;background-color:#eaeff5}@media (max-width: 959px){.gallery-results__body[_ngcontent-%COMP%]{padding-bottom:48px}.gallery-results__no-results-title[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}.gallery-results__no-results-body[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}}"],changeDetection:0}),lt([(0,r.l6)(d.Y.getSearchOptions),it("design:type",c.c)],xe.prototype,"searchOptions$",void 0),lt([(0,r.l6)(d.Y.getSortOptions),it("design:type",c.c)],xe.prototype,"sortOptions$",void 0),lt([(0,r.l6)(d.Y.getSort),it("design:type",c.c)],xe.prototype,"sort$",void 0);var wt=s(68511),Ke=s(75736),Ze=s(10588),Dt=s(86225);const At=(o,n)=>n.key;function Nt(o,n){if(1&o&&(e.j41(0,"div",3),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",t.key," ")}}function Yt(o,n){if(1&o&&e.nrm(0,"app-category-image",6),2&o){const t=e.XpG().$implicit,l=e.XpG(3);e.Y8G("color",l.isSelected(t.id)?"color":"mono")("category",t.id)}}function Vt(o,n){if(1&o&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.subtitle)}}function Ut(o,n){if(1&o){const t=e.RV6();e.j41(0,"li")(1,"button",4),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.handleSelectCategory(i.id))}),e.j41(2,"div",5),e.DNE(3,Yt,1,2,"app-category-image",6),e.j41(4,"div",7)(5,"div",8),e.EFF(6),e.k0s(),e.DNE(7,Vt,2,1,"div",9),e.k0s()()()()}if(2&o){const t=n.$implicit,l=e.XpG(3);e.R7$(),e.Y8G("selected",l.isSelected(t.id)),e.BMQ("aria-disabled",l.isSelected(t.id))("data-test",t.id+"GalleryCategory"),e.R7$(2),e.vxM(3,t.icon?3:-1),e.R7$(3),e.JRh(t.title),e.R7$(),e.vxM(7,t.subtitle?7:-1)}}function zt(o,n){if(1&o&&(e.j41(0,"app-navigation-list-container")(1,"nav"),e.DNE(2,Nt,2,1,"div",1),e.j41(3,"ul"),e.DNE(4,Ut,8,6,"li",2),e.k0s()()()),2&o){const t=e.XpG().$implicit;e.R7$(2),e.Y8G("ngIf","all"!==t.key),e.R7$(2),e.Y8G("ngForOf",t.value)}}function Lt(o,n){1&o&&e.DNE(0,zt,5,2,"app-navigation-list-container"),2&o&&e.vxM(0,n.$implicit.value.length?0:-1)}let Xt=(()=>{var o;class n extends wt.P{originalOrder(){return 0}}return(o=n).\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(o)))(i||o)}})(),o.\u0275cmp=e.VBU({type:o,selectors:[["app-gallery-categories"]],features:[e.Vt3],decls:4,vars:4,consts:[["label","Category",3,"collapsible"],["class","mt-5 text-xs uppercase gallery-categories__header",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"mt-5","text-xs","uppercase","gallery-categories__header"],["type","button","app-navigation-list-item","",1,"gallery-categories__item",3,"click","selected"],[1,"flex","flex-row","items-center","w-full"],[1,"gallery-categories__image",3,"color","category"],[1,"flex","flex-col","gap-1"],[1,"flex-auto","gallery-categories__title"],[1,"text-xs","font-normal"]],template:function(l,i){1&l&&(e.j41(0,"app-navigation-panel",0),e.Z7z(1,Lt,1,1,null,null,At),e.nI1(3,"keyvalue"),e.k0s()),2&l&&(e.Y8G("collapsible",!0),e.R7$(),e.Dyx(e.i5U(3,1,i.groupedCategories,i.originalOrder)))},dependencies:[C.Sq,C.bT,B.k,Ke.T,Ze.d,Dt.f,C.lG],styles:[".gallery-categories__header[_ngcontent-%COMP%]{color:#61779e;padding:12px 20px}.gallery-categories__item[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:4px 0;background:none;border:none;text-align:left}.gallery-categories__title[_ngcontent-%COMP%]{font-size:14px;flex:1 1 auto}.gallery-categories__image[_ngcontent-%COMP%]{margin:0 20px 0 0;flex:0 0 24px;height:24px}"],changeDetection:0}),n})();var P=s(21424),mt=s(17365),I=s(18152),fe=s(34006),Qt=s(87505),Ht=s(98101);function Jt(o,n){1&o&&(e.j41(0,"div"),e.EFF(1," A collection already exists with that name. "),e.k0s())}function Wt(o,n){1&o&&(e.j41(0,"div"),e.EFF(1,"Collection name is required."),e.k0s())}function Kt(o,n){if(1&o&&(e.j41(0,"div",12),e.DNE(1,Jt,2,0,"div",13)(2,Wt,2,0,"div",13),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",null==t.collectionName.errors?null:t.collectionName.errors.duplicate),e.R7$(),e.Y8G("ngIf",null==t.collectionName.errors?null:t.collectionName.errors.required)}}let ht=(()=>{var o;class n{get collectionName(){return this.form.get("collectionName")}constructor(l,i,a,p){this.dialogRef=l,this.data=i,this.store=a,this.formBuilder=p}ngOnInit(){this.title=this.data.collection?"Edit collection":"New collection",this.confirmText=this.data.collection?"Save changes":"Create collection",this.collectionNames=this.store.selectSnapshot(P.q.getCollections).map(i=>i.collection_name);const l=this.data.collection?this.data.collection.collection_name:this.getNewName();this.form=this.formBuilder.group({collectionName:[l,[u.k0.required,u.k0.maxLength(60),u.k0.required,this.duplicateNameValidator.bind(this)]]})}handleCancelClick(){this.dialogRef.close()}handleConfirmClick(){this.submit()}submit(){if(this.collectionName.invalid)return;const l=this.collectionName.value.trim();this.store.dispatch(this.data.collection?new I.jK(this.data.collection,l):new I.qS(this.data.groupId,l)),this.dialogRef.close(l)}duplicateNameValidator(l){const i=l.value?l.value.trim():"",a=this.collectionNames.includes(i);return a?{duplicate:a}:null}getNewName(){let l="New Collection",i=1;for(;this.collectionNames.includes(l);)l=`New Collection ${i}`,i++;return l}}return(o=n).\u0275fac=function(l){return new(l||o)(e.rXU(fe.CP),e.rXU(fe.Vh),e.rXU(r.il),e.rXU(u.ze))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-collection-name-dialog"]],decls:15,vars:6,consts:[["collectionNameInput",""],["mat-dialog-title",""],["mat-dialog-content",""],[1,"dialog"],[3,"submit","formGroup"],["label","Name"],["type","text","data-test","collectionNameInput","formControlName","collectionName","cdkFocusInitial","","maxlength","60",1,"input","w-full"],[3,"field"],["class","text-red-700 text-xs mb-2",4,"ngIf"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","buttonType","default","data-test","collectionNameCancel","type","button",3,"click"],["app-button","","buttonType","primary","data-test","collectionNameConfirm","type","button",3,"click","disabled"],[1,"text-red-700","text-xs","mb-2"],[4,"ngIf"]],template:function(l,i){if(1&l){const a=e.RV6();e.j41(0,"h1",1),e.EFF(1),e.k0s(),e.j41(2,"div",2)(3,"div",3)(4,"form",4),e.bIt("submit",function(){return e.eBV(a),e.Njj(i.submit())}),e.j41(5,"app-form-field",5),e.nrm(6,"input",6,0)(8,"app-character-counter",7),e.DNE(9,Kt,3,2,"div",8),e.k0s()()()(),e.j41(10,"div",9)(11,"button",10),e.bIt("click",function(){return e.eBV(a),e.Njj(i.handleCancelClick())}),e.EFF(12," Cancel "),e.k0s(),e.j41(13,"button",11),e.bIt("click",function(){return e.eBV(a),e.Njj(i.handleConfirmClick())}),e.EFF(14),e.k0s()()}if(2&l){const a=e.sdS(7);e.R7$(),e.JRh(i.title),e.R7$(3),e.Y8G("formGroup",i.form),e.R7$(4),e.Y8G("field",a),e.R7$(),e.Y8G("ngIf",i.collectionName.invalid&&i.collectionName.dirty),e.R7$(4),e.Y8G("disabled",i.collectionName.invalid),e.R7$(),e.SpI(" ",i.confirmText," ")}},dependencies:[C.bT,fe.BI,fe.E7,fe.Yi,v.Q,Qt.K,Ht.P,u.qT,u.me,u.BC,u.cb,u.tU,u.j4,u.JD],changeDetection:0}),n})();var _t=s(84370),at=s(81391),yt=s(99504),Zt=s(95416),st=s(14823),ft=s(71997),Ct=s(17215),qt=s(21827);let en=(()=>{var o;class n{constructor(l,i){this.storageService=l,this.router=i,this.organizations=[],this.interacted=new e.bkB}handleCancel(){this.setInteracted()}handleViewTeamsClick(){this.setInteracted(),this.router.navigateByUrl("/account/team")}setInteracted(){this.storageService.setLocalItem(Ct.UT.UserJoinNotificationInteracted,!0),this.interacted.next()}}return(o=n).\u0275fac=function(l){return new(l||o)(e.rXU(Ct.n$),e.rXU(ae.Ix))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-team-join-notification"]],inputs:{organizations:"organizations"},outputs:{interacted:"interacted"},decls:10,vars:4,consts:[[1,"team-join","flex","flex-col","p-5"],[1,"flex","justify-between","items-center"],[1,"text-sm","font-semibold"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Close",3,"click"],["icon","times","size","md"],[3,"readonly","compact","organizations"],[1,"flex","flex-row-reverse","mt-3"],["app-button","","buttonSize","xs","buttonType","text","buttonTheme","light",1,"team-join__view","font-semibold",3,"click"]],template:function(l,i){1&l&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3,"Join a Team"),e.k0s(),e.j41(4,"button",3),e.bIt("click",function(){return i.handleCancel()}),e.nrm(5,"app-icon",4),e.k0s()(),e.nrm(6,"app-team-join",5),e.j41(7,"div",6)(8,"button",7),e.bIt("click",function(){return i.handleViewTeamsClick()}),e.EFF(9," View Teams "),e.k0s()()()),2&l&&(e.R7$(4),e.BMQ("aria-label","Close"),e.R7$(2),e.Y8G("readonly",!0)("compact",!0)("organizations",i.organizations))},dependencies:[v.Q,oe.R,qt.H],styles:[".team-join[_ngcontent-%COMP%]{border-radius:4px;background-color:#f0f8ff}.team-join__view[_ngcontent-%COMP%]{letter-spacing:1px}"],changeDetection:0}),n})();var Pe,bt=s(66571),tn=s(87732),Z=s(59115),qe=function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},et=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const nn=()=>["/account/team"];function on(o,n){if(1&o&&(e.j41(0,"div"),e.nrm(1,"img",12),e.nI1(2,"async"),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("src",e.bMT(2,1,t.organizationLogo$),e.B4B)}}function ln(o,n){if(1&o&&(e.j41(0,"div",13),e.EFF(1),e.nI1(2,"async"),e.k0s()),2&o){let t;const l=e.XpG(2);e.R7$(),e.SpI(" ",null==(t=e.bMT(2,1,l.organization$))?null:t.name," ")}}function an(o,n){if(1&o&&(e.j41(0,"button",14),e.nrm(1,"app-icon",15),e.k0s()),2&o){e.XpG();const t=e.sdS(10);e.Y8G("matMenuTriggerFor",t)}}function sn(o,n){1&o&&(e.j41(0,"button",16),e.EFF(1," Team Settings "),e.k0s()),2&o&&e.Y8G("routerLink",e.lJ4(1,nn))}function rn(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.handleInviteTeammatesClick())}),e.EFF(1," Invite Members "),e.k0s()}}function cn(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.handleInviteTeammatesClick())}),e.nrm(1,"app-icon",19),e.k0s()}}function pn(o,n){if(1&o&&(e.j41(0,"div",4)(1,"div",5),e.DNE(2,on,3,3,"div",6),e.nI1(3,"async"),e.DNE(4,ln,3,3,"ng-template",null,1,e.C5r)(6,an,2,1,"button",7),e.nI1(7,"async"),e.nI1(8,"async"),e.j41(9,"mat-menu",null,2),e.DNE(11,sn,2,2,"button",8),e.nI1(12,"async"),e.DNE(13,rn,2,0,"button",9),e.nI1(14,"async"),e.k0s()(),e.j41(15,"div")(16,"span",10),e.EFF(17),e.k0s(),e.DNE(18,cn,2,0,"button",11),e.nI1(19,"async"),e.k0s()()),2&o){let t,l;const i=e.sdS(5),a=e.XpG();e.R7$(2),e.Y8G("ngIf",e.bMT(3,7,a.organizationLogo$))("ngIfElse",i),e.R7$(4),e.Y8G("ngIf",(null==(t=e.bMT(7,9,a.userRole$))?null:t.role_name)===a.userRoleEnum.Creator||(null==(t=e.bMT(8,11,a.userRole$))?null:t.role_name)===a.userRoleEnum.Admin),e.R7$(5),e.Y8G("ngIf",(null==(l=e.bMT(12,13,a.userRole$))?null:l.role_name)===a.userRoleEnum.Admin),e.R7$(2),e.Y8G("ngIf",e.bMT(14,15,a.canInviteUsers$)),e.R7$(4),e.JRh(a.membersCount),e.R7$(),e.Y8G("ngIf",e.bMT(19,17,a.canInviteUsers$))}}function dn(o,n){if(1&o&&(e.nrm(0,"img",12),e.nI1(1,"async")),2&o){const t=e.XpG(2);e.Y8G("src",e.bMT(1,1,t.organizationLogo$),e.B4B)}}function un(o,n){if(1&o&&(e.DNE(0,dn,2,3,"img",20),e.nI1(1,"async")),2&o){const t=e.XpG();e.Y8G("ngIf",e.bMT(1,1,t.organizationLogo$))}}class Te{constructor(n){this.dialogService=n,this.galleryActionMode=N.g,this.userRoleEnum=tn.x,this.actionMode=N.g.Explore,this.ngUnsubscribe=new O.B}ngOnInit(){this.initOrganization()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleInviteTeammatesClick(){this.dialogService.openAddUserDialog()}initOrganization(){this.organization$.pipe((0,G.p)(n=>!(0,j.isNil)(n)),(0,_.Q)(this.ngUnsubscribe)).subscribe(n=>{this.membersCount=`${n.users_count} member${1===n.users_count?"":"s"}`})}}(Pe=Te).\u0275fac=function(n){return new(n||Pe)(e.rXU(bt.o))},Pe.\u0275cmp=e.VBU({type:Pe,selectors:[["app-gallery-banner"]],inputs:{actionMode:"actionMode"},decls:3,vars:2,consts:[["importChapterBanner",""],["teamName",""],["teamOptionsMenu","matMenu"],["class","gallery-banner",4,"ngIf","ngIfElse"],[1,"gallery-banner"],[1,"gallery-banner__header","pb-2"],[4,"ngIf","ngIfElse"],["class","ml-2","app-button","","buttonTheme","light","buttonShape","square","buttonSize","sm","matTooltip","Team options","data-test","galleryBannerTeamOptions",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item","",3,"routerLink",4,"ngIf"],["mat-menu-item","","data-test","bannerMenuAddUserButton",3,"click",4,"ngIf"],[1,"gallery-banner__member-count","pr-2"],["app-button","","buttonTheme","light","buttonShape","square","matTooltip","Invite Members","data-test","bannerAddUserButton",3,"click",4,"ngIf"],[1,"gallery-banner__logo",3,"src"],[1,"gallery-banner__name"],["app-button","","buttonTheme","light","buttonShape","square","buttonSize","sm","matTooltip","Team options","data-test","galleryBannerTeamOptions",1,"ml-2",3,"matMenuTriggerFor"],["icon","chevron-down"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","","data-test","bannerMenuAddUserButton",3,"click"],["app-button","","buttonTheme","light","buttonShape","square","matTooltip","Invite Members","data-test","bannerAddUserButton",3,"click"],["icon","user-plus","size","sm",1,"gallery-banner__add-member"],["class","gallery-banner__logo",3,"src",4,"ngIf"]],template:function(n,t){if(1&n&&e.DNE(0,pn,20,19,"div",3)(1,un,2,3,"ng-template",null,0,e.C5r),2&n){const l=e.sdS(2);e.Y8G("ngIf",t.actionMode===t.galleryActionMode.Explore)("ngIfElse",l)}},dependencies:[ae.Wk,v.Q,C.bT,Z.kk,Z.fb,Z.Cp,st.oV,oe.R,C.Jj],styles:["[_nghost-%COMP%]{display:block;width:100%}.gallery-banner[_ngcontent-%COMP%]{border:solid #d7e0ea;border-width:1px;border-radius:4px;padding:16px 12px 8px 16px}.gallery-banner__header[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row;justify-content:space-between}.gallery-banner__logo[_ngcontent-%COMP%]{display:block;width:100%;max-height:48px}.gallery-banner__name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;font-size:.875rem;line-height:1.25rem;font-weight:600}.gallery-banner__member-count[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;font-weight:500;color:#61779e}.gallery-banner__add-member[_ngcontent-%COMP%]{color:#374a68}"],changeDetection:0}),qe([(0,r.l6)(P.q.getOrganizationLogo),et("design:type",c.c)],Te.prototype,"organizationLogo$",void 0),qe([(0,r.l6)(P.q.getOrganization),et("design:type",c.c)],Te.prototype,"organization$",void 0),qe([(0,r.l6)(w.k.getUserRole),et("design:type",c.c)],Te.prototype,"userRole$",void 0),qe([(0,r.l6)(w.k.canInviteUsers),et("design:type",c.c)],Te.prototype,"canInviteUsers$",void 0);var Ie,gn=s(37737),vt=s(25780),je=function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},Fe=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function mn(o,n){if(1&o&&(e.j41(0,"span",7),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.collection.collection_name," ")}}function hn(o,n){if(1&o){const t=e.RV6();e.j41(0,"input",8),e.bIt("blur",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.handleCollectionRename(i))})("keyup.enter",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.handleCollectionRename(i))})("keyup.escape",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.setRenameMode(!1))}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("value",t.collection.collection_name)}}function _n(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",9),e.bIt("menuOpened",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleMenuOpened())})("menuClosed",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleMenuClosed())}),e.nrm(1,"app-icon",10),e.k0s()}if(2&o){e.XpG();const t=e.sdS(9);e.Y8G("matMenuTriggerFor",t)}}class Ce{constructor(n,t,l,i){this.store=n,this.dialog=t,this.dialogService=l,this.changeDetection=i,this.renameMode=!1,this.menuOpen=!1,this.ngUnsubscribe=new O.B}ngOnInit(){this.collectionRenaming$.pipe((0,_.Q)(this.ngUnsubscribe)).subscribe(n=>{this.renameMode=this.collection===n,this.changeDetection.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleMenuOpened(){this.menuOpen=!0}handleMenuClosed(){this.menuOpen=!1}handleSelectCollection(){if(this.curCollectionId!==this.collection.collection_id){const n=new T.Vf(this.store.selectSnapshot(P.q.getOrganization).id,this.collection.collection_id);this.store.dispatch(new y.w.SetSearchConfig(n))}}handleDeleteCollection(){this.dialogService.openConfirmDialog({maxWidth:"480px",data:{titleText:`Delete "${this.collection.collection_name}"`,bodyText:"Are you sure you want to delete this collection? All 3D models in this collection will still be available in Team \u2192 All Models.",confirmText:"Delete",confirmColor:"warn"}}).afterClosed().subscribe(t=>{t&&this.store.dispatch(new I.T1(this.collection))})}openCollectionNameDialog(){this.dialog.open(ht,{id:_t.t.CollectionNameDialog,width:"480px",data:{groupId:this.collection.group_id,collection:this.collection}}).afterClosed().subscribe(l=>{l&&(this.collection.collection_name=l,this.changeDetection.markForCheck())})}handleCollectionRename(n){const l=n.target.value,a=this.store.selectSnapshot(P.q.getCollections).find(p=>p.collection_name===l);l&&!a&&(this.store.dispatch(new I.jK(this.collection,l)),this.collection.collection_name=l,this.changeDetection.markForCheck()),this.setRenameMode(!1)}setRenameMode(n){if(this.store.selectSnapshot(w.k.isAdmin)){this.store.dispatch(new I.ks(n?this.collection:null));const t=this.store.selectSnapshot(d.Y.getSidenav);this.store.dispatch(new y.w.SetSidenav({...t,disableClose:n}))}}}(Ie=Ce).\u0275fac=function(n){return new(n||Ie)(e.rXU(r.il),e.rXU(fe.bZ),e.rXU(bt.o),e.rXU(e.gRc))},Ie.\u0275cmp=e.VBU({type:Ie,selectors:[["app-gallery-collection"]],inputs:{collection:"collection",curCollectionId:"curCollectionId"},decls:14,vars:19,consts:[["collectionsOptions","matMenu"],["data-test","galleryCollectionItem","role","button","tabindex","0",1,"gallery-collection",3,"click","keyup.enter","dblclick"],["class","gallery-collection__title",4,"ngIf"],["type","text","appEventFence","","appAutoFocus","","class","input","data-test","galleryCollectionInput",3,"value","blur","keyup.enter","keyup.escape",4,"ngIf"],["class","gallery-collection__options","appEventFence","","app-button","","buttonSize","xs","buttonTheme","light","buttonShape","square","matTooltip","Options","data-test","galleryCollectionOptions",3,"matMenuTriggerFor","menuOpened","menuClosed",4,"ngIf"],["mat-menu-item","","data-test","galleryCollectionRenameButton",3,"click"],["mat-menu-item","","data-test","galleryCollectionDeleteButton",1,"text-red-700",3,"click"],[1,"gallery-collection__title"],["type","text","appEventFence","","appAutoFocus","","data-test","galleryCollectionInput",1,"input",3,"blur","keyup.enter","keyup.escape","value"],["appEventFence","","app-button","","buttonSize","xs","buttonTheme","light","buttonShape","square","matTooltip","Options","data-test","galleryCollectionOptions",1,"gallery-collection__options",3,"menuOpened","menuClosed","matMenuTriggerFor"],["icon","ellipsis-v"]],template:function(n,t){if(1&n){const l=e.RV6();e.j41(0,"div",1),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("click",function(){return e.eBV(l),e.Njj(t.handleSelectCollection())})("keyup.enter",function(){return e.eBV(l),e.Njj(t.handleSelectCollection())})("dblclick",function(){return e.eBV(l),e.Njj(t.setRenameMode(!0))}),e.DNE(4,mn,2,1,"span",2)(5,hn,1,1,"input",3)(6,_n,2,1,"button",4),e.nI1(7,"async"),e.k0s(),e.j41(8,"mat-menu",null,0)(10,"button",5),e.bIt("click",function(){return e.eBV(l),e.Njj(t.openCollectionNameDialog())}),e.EFF(11," Rename "),e.k0s(),e.j41(12,"button",6),e.bIt("click",function(){return e.eBV(l),e.Njj(t.handleDeleteCollection())}),e.EFF(13," Delete "),e.k0s()()}2&n&&(e.AVh("gallery-collection--disabled",e.bMT(1,11,t.collectionsLoading$)||e.bMT(2,13,t.removingCollection$)||e.bMT(3,15,t.updatingCollection$))("gallery-collection--menu-open",t.menuOpen)("gallery-collection--selected",t.collection.collection_id===t.curCollectionId)("gallery-collection--renaming",t.renameMode),e.R7$(4),e.Y8G("ngIf",!t.renameMode),e.R7$(),e.Y8G("ngIf",t.renameMode),e.R7$(),e.Y8G("ngIf",e.bMT(7,17,t.isAdmin$)&&!t.renameMode))},dependencies:[v.Q,C.bT,gn.B,vt.L,Z.kk,Z.fb,Z.Cp,st.oV,oe.R,C.Jj],styles:['.gallery-collection[_ngcontent-%COMP%]{display:flex;flex-grow:1;align-items:center;justify-content:space-between;position:relative;padding:8px 20px;min-height:48px;outline:none;font-size:.875rem;line-height:1.25rem;color:#1c2a3f;text-align:left}.gallery-collection[_ngcontent-%COMP%]:after{content:"";position:absolute;background:#f2f5fb;z-index:-1;border-radius:4px;inset:0 12px;opacity:0}.gallery-collection--renaming[_ngcontent-%COMP%]:after{background:#f0f8ff}.gallery-collection[_ngcontent-%COMP%]:hover:not(.gallery-collection--selected){cursor:pointer}.gallery-collection[_ngcontent-%COMP%]:hover:not(.gallery-collection--selected):after{background:#f9fafd;opacity:1}.gallery-collection[_ngcontent-%COMP%]:hover   .gallery-collection__options[_ngcontent-%COMP%], .gallery-collection[_ngcontent-%COMP%]:focus-within   .gallery-collection__options[_ngcontent-%COMP%], .gallery-collection--menu-open[_ngcontent-%COMP%]   .gallery-collection__options[_ngcontent-%COMP%]{visibility:visible}.gallery-collection[_ngcontent-%COMP%]:focus-within:not(.gallery-collection--renaming):after, .gallery-collection--menu-open[_ngcontent-%COMP%]:after{outline:#2d72dc solid 2px!important;opacity:1}.gallery-collection--disabled[_ngcontent-%COMP%]{pointer-events:none}.gallery-collection--selected[_ngcontent-%COMP%]{font-weight:600}.gallery-collection--selected[_ngcontent-%COMP%]:after{opacity:1}.gallery-collection__title[_ngcontent-%COMP%]{word-break:break-word}.gallery-collection__options[_ngcontent-%COMP%]{margin-left:8px;visibility:hidden}'],changeDetection:0}),je([(0,r.l6)(w.k.isAdmin),Fe("design:type",c.c)],Ce.prototype,"isAdmin$",void 0),je([(0,r.l6)(P.q.getCollectionsLoading),Fe("design:type",c.c)],Ce.prototype,"collectionsLoading$",void 0),je([(0,r.l6)(P.q.getRemovingCollection),Fe("design:type",c.c)],Ce.prototype,"removingCollection$",void 0),je([(0,r.l6)(P.q.getUpdatingCollection),Fe("design:type",c.c)],Ce.prototype,"updatingCollection$",void 0),je([(0,r.l6)(P.q.getCollectionRenaming),Fe("design:type",c.c)],Ce.prototype,"collectionRenaming$",void 0);var $e,q=function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},ee=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const yn=["teamCollections"];function fn(o,n){if(1&o&&(e.j41(0,"div",4)(1,"div",5),e.nrm(2,"app-gallery-banner",6),e.k0s()()),2&o){const t=e.XpG();e.R7$(2),e.Y8G("actionMode",t.actionMode)}}function Cn(o,n){if(1&o){const t=e.RV6();e.j41(0,"li")(1,"div",7)(2,"p",8),e.EFF(3,"Private"),e.k0s()(),e.j41(4,"ul",9)(5,"li")(6,"button",10),e.nI1(7,"async"),e.nI1(8,"async"),e.nI1(9,"async"),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleSelectPrivate())}),e.EFF(10," All Models "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(6),e.Y8G("selected",e.bMT(7,3,t.searchType$)===t.searchType.Private),e.BMQ("data-selected",e.bMT(8,5,t.searchType$)===t.searchType.Private)("aria-disabled",e.bMT(9,7,t.searchType$)===t.searchType.Private)}}function bn(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",15),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.handleAddCollection())}),e.nrm(3,"app-icon",16),e.k0s()}if(2&o){const t=e.XpG(2);e.Y8G("disabled",e.bMT(1,1,t.collectionsLoading$)||e.bMT(2,3,t.addingCollection$))}}function vn(o,n){if(1&o&&(e.j41(0,"li",17),e.nrm(1,"app-gallery-collection",18),e.k0s()),2&o){const t=n.$implicit,l=e.XpG(2);e.R7$(),e.Y8G("collection",t)("curCollectionId",l.collectionId),e.BMQ("data-id",t.collection_id)("aria-disabled",t.collection_id===l.collectionId)}}function Mn(o,n){if(1&o){const t=e.RV6();e.j41(0,"li")(1,"div",7)(2,"p",8),e.EFF(3,"Team"),e.k0s(),e.DNE(4,bn,4,5,"button",11),e.nI1(5,"async"),e.k0s(),e.j41(6,"ul",12,0),e.nI1(8,"async"),e.nI1(9,"async"),e.bIt("cdkDropListDropped",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.handleDrop(i))}),e.j41(10,"li")(11,"button",13),e.nI1(12,"async"),e.nI1(13,"async"),e.nI1(14,"async"),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleSelectAll())}),e.EFF(15," All Models "),e.k0s()(),e.DNE(16,vn,2,4,"li",14),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",e.bMT(5,6,t.isAdmin$)),e.R7$(2),e.Y8G("cdkDropListDisabled",!0!==e.bMT(8,8,t.isAdmin$)||e.bMT(9,10,t.reorderingCollections$)),e.R7$(5),e.Y8G("selected",e.bMT(12,12,t.searchType$)===t.searchType.Organization),e.BMQ("data-selected",e.bMT(13,14,t.searchType$)===t.searchType.Organization)("aria-disabled",e.bMT(14,16,t.searchType$)===t.searchType.Private),e.R7$(5),e.Y8G("ngForOf",t.collections)}}function Tn(o,n){if(1&o){const t=e.RV6();e.j41(0,"li")(1,"div",19),e.nrm(2,"mat-divider",20),e.j41(3,"app-team-join-notification",21),e.nI1(4,"async"),e.bIt("interacted",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleTeamJoinInteracted())}),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(3),e.Y8G("organizations",e.bMT(4,1,t.eligibleOrganizations$))}}class L{get collections(){return this._collections}set collections(n){this._collections=Array.isArray(n)?[...n]:[],this.changeDetectorRef.markForCheck()}constructor(n,t,l,i,a){this.dialog=n,this.store=t,this.actions=l,this.snackBar=i,this.changeDetectorRef=a,this.actionMode=N.g.Explore,this.showBanner=!0,this.searchType=f.n,this.ngUnsubscribe=new O.B}ngOnInit(){this.observeCollections(),this.observeSearchConfig()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}observeCollections(){this.store.select(P.q.getCollections).pipe((0,_.Q)(this.ngUnsubscribe)).subscribe(n=>this.collections=n),this.organization$.pipe((0,G.p)(n=>!(0,j.isNil)(n)),(0,_.Q)(this.ngUnsubscribe)).subscribe(n=>{n&&this.store.dispatch(new I._q(n.id))}),this.actions.pipe((0,r.xi)(I.dD),(0,_.Q)(this.ngUnsubscribe)).subscribe(n=>this.handleAddCollectionSuccess(n)),this.actions.pipe((0,r.xi)(I.kW),(0,_.Q)(this.ngUnsubscribe)).subscribe(()=>this.handleAddCollectionError()),this.actions.pipe((0,r.xi)(I.ob),(0,_.Q)(this.ngUnsubscribe)).subscribe(n=>this.handleRemoveCollectionSuccess(n)),this.actions.pipe((0,r.xi)(I.Rk),(0,_.Q)(this.ngUnsubscribe)).subscribe(()=>this.handleRemoveCollectionError()),this.actions.pipe((0,r.xi)(I.qd),(0,_.Q)(this.ngUnsubscribe)).subscribe(n=>this.handleRenameCollectionSuccess(n)),this.actions.pipe((0,r.xi)(I.BD),(0,_.Q)(this.ngUnsubscribe)).subscribe(()=>this.handleRenameCollectionError()),this.actions.pipe((0,r.xi)(I.hQ),(0,_.Q)(this.ngUnsubscribe)).subscribe(()=>this.handleReorderCollectionsError())}observeSearchConfig(){this.searchConfig$.pipe((0,G.p)(n=>!(0,j.isNil)(n)),(0,_.Q)(this.ngUnsubscribe)).subscribe(n=>{this.collectionId=n.type===f.n.Collection?n.collectionId:null,this.showBanner=n.type===f.n.Collection||n.type===f.n.Organization||n.type===f.n.Private&&!this.store.selectSnapshot(w.k.isPrivateUser),this.changeDetectorRef.markForCheck()})}handleAddCollection(){const n=this.store.selectSnapshot(P.q.getOrganization).id;this.dialog.open(ht,{id:_t.t.CollectionNameDialog,width:"480px",data:{groupId:n}})}handleSelectAll(){this.loadAllTeamModels()}handleSelectPrivate(){const n=new T.Y0;this.store.dispatch(new y.w.SetSearchConfig(n))}handleDrop(n){(0,at.HD)(this.collections,n.previousIndex,n.currentIndex),this.store.dispatch(new I.hu(this.store.selectSnapshot(P.q.getOrganization).id,this.collections))}handleTeamJoinInteracted(){const n=this.store.selectSnapshot(d.Y.getSidenav);this.store.dispatch(new y.w.SetSidenav({...n,enabled:!1}))}loadAllTeamModels(){const n=new T.S8(this.store.selectSnapshot(P.q.getOrganization).id);this.store.dispatch(new y.w.SetSearchConfig(n))}loadCollection(n){const t=new T.Vf(this.store.selectSnapshot(P.q.getOrganization).id,n);this.store.dispatch(new y.w.SetSearchConfig(t))}handleAddCollectionSuccess(n){this.actions.pipe((0,r.xi)(I.dl),(0,mt.s)(1),(0,_.Q)(this.ngUnsubscribe)).subscribe(()=>{const l=this.store.selectSnapshot(P.q.getCollections).find(i=>i.collection_name===n.collectionName);this.loadCollection(l.collection_id),this.scrollToCollection(l.collection_id)}),this.store.dispatch(new I._q(n.organizationId)),this.snackBar.open(`Successfully added "${n.collectionName}".`)}handleAddCollectionError(){this.snackBar.open("There was a problem adding the collection.")}handleRemoveCollectionSuccess(n){this.scrollToCollection(0),this.loadAllTeamModels(),this.store.dispatch(new I._q(n.collection.group_id)),this.snackBar.open(`Successfully deleted "${n.collection.collection_name}".`)}handleRemoveCollectionError(){this.snackBar.open("There was a problem deleting the collection.")}handleReorderCollectionsError(){this.collections=this.store.selectSnapshot(P.q.getCollections),this.snackBar.open("There was a problem re-ordering the collections.")}handleRenameCollectionSuccess(n){this.collectionId===n.collection.collection_id&&this.loadCollection(n.collection.collection_id),this.actions.pipe((0,r.xi)(I.dl),(0,mt.s)(1),(0,_.Q)(this.ngUnsubscribe)).subscribe(()=>{this.scrollToCollection(n.collection.collection_id)}),this.store.dispatch(new I._q(n.collection.group_id))}handleRenameCollectionError(){this.snackBar.open("There was a problem renaming the collection.");const n=this.store.selectSnapshot(P.q.getOrganization).id;this.store.dispatch(new I._q(n))}scrollToCollection(n){const l=this.teamCollections.nativeElement.querySelector(`[data-id="${n}"]`);l&&l.scrollIntoView({block:"center"})}}($e=L).\u0275fac=function(n){return new(n||$e)(e.rXU(fe.bZ),e.rXU(r.il),e.rXU(r.En),e.rXU(Zt.UG),e.rXU(e.gRc))},$e.\u0275cmp=e.VBU({type:$e,selectors:[["app-gallery-collections"]],viewQuery:function(n,t){if(1&n&&e.GBs(yn,5),2&n){let l;e.mGM(l=e.lsd())&&(t.teamCollections=l.first)}},inputs:{actionMode:"actionMode"},decls:11,vars:12,consts:[["teamCollections",""],[3,"collapsible","showHeader"],["app-navigation-panel-title","",4,"ngIf"],[4,"ngIf"],["app-navigation-panel-title",""],[1,"gallery-collections__header"],[3,"actionMode"],[1,"pl-6","pr-3","py-2","flex","items-center","justify-between"],[1,"gallery-collections__section-title"],[1,"ml-4"],["type","button","app-navigation-list-item","","data-test","galleryMyLibrary",1,"gallery-collections__item",3,"click","selected"],["data-test","addCollectionButton","app-button","","buttonTheme","light","buttonShape","square","matTooltip","Add a New Collection...",3,"disabled","click",4,"ngIf"],["data-test","galleryCollections","cdkDropList","",1,"ml-4",3,"cdkDropListDropped","cdkDropListDisabled"],["type","button","app-navigation-list-item","","data-test","galleryTeamLibrary","data-id","0",1,"gallery-collections__item",3,"click","selected"],["cdkDrag","",4,"ngFor","ngForOf"],["data-test","addCollectionButton","app-button","","buttonTheme","light","buttonShape","square","matTooltip","Add a New Collection...",3,"click","disabled"],["icon","plus"],["cdkDrag",""],["type","button",1,"gallery-collections__item","flex",3,"collection","curCollectionId"],[1,"px-5"],[1,"!my-5"],[3,"interacted","organizations"]],template:function(n,t){1&n&&(e.j41(0,"app-navigation-panel",1),e.DNE(1,fn,3,1,"div",2),e.j41(2,"app-navigation-list-container")(3,"nav")(4,"ul"),e.DNE(5,Cn,11,9,"li",3),e.nI1(6,"async"),e.DNE(7,Mn,17,18,"li",3),e.nI1(8,"async"),e.DNE(9,Tn,5,3,"li",3),e.nI1(10,"async"),e.k0s()()()()),2&n&&(e.Y8G("collapsible",!1)("showHeader",t.showBanner),e.R7$(),e.Y8G("ngIf",t.showBanner),e.R7$(4),e.Y8G("ngIf",e.bMT(6,6,t.userProfile$)),e.R7$(2),e.Y8G("ngIf",e.bMT(8,8,t.hasOrganization$)),e.R7$(2),e.Y8G("ngIf",e.bMT(10,10,t.hasEligibleOrganizations$)))},dependencies:[v.Q,C.Sq,C.bT,at.O7,at.T1,st.oV,ft.q,B.k,Ke.T,Ze.d,oe.R,en,Te,Ce,C.Jj],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{list-style:none;background:#fffc}.gallery-collections__header[_ngcontent-%COMP%]{display:flex;align-items:center}.gallery-collections__section-title[_ngcontent-%COMP%]{font-size:11px;text-transform:uppercase;color:#61779e}.gallery-collections__item[_ngcontent-%COMP%]{width:100%;border:none;background:none;padding:4px 0}"],changeDetection:0}),q([(0,r.l6)(w.k.getUserProfile),ee("design:type",c.c)],L.prototype,"userProfile$",void 0),q([(0,r.l6)(P.q.getOrganization),ee("design:type",c.c)],L.prototype,"organization$",void 0),q([(0,r.l6)(P.q.getOrganizationLogo),ee("design:type",c.c)],L.prototype,"organizationLogo$",void 0),q([(0,r.l6)(P.q.getCollectionsLoading),ee("design:type",c.c)],L.prototype,"collectionsLoading$",void 0),q([(0,r.l6)(P.q.getAddingCollection),ee("design:type",c.c)],L.prototype,"addingCollection$",void 0),q([(0,r.l6)(P.q.getReorderingCollections),ee("design:type",c.c)],L.prototype,"reorderingCollections$",void 0),q([(0,r.l6)(d.Y.getSearchConfig),ee("design:type",c.c)],L.prototype,"searchConfig$",void 0),q([(0,r.l6)(d.Y.getSearchType),ee("design:type",c.c)],L.prototype,"searchType$",void 0),q([(0,r.l6)(w.k.isAdmin),ee("design:type",c.c)],L.prototype,"isAdmin$",void 0),q([(0,r.l6)(P.q.hasOrganization),ee("design:type",c.c)],L.prototype,"hasOrganization$",void 0),q([(0,r.l6)(yt.e.hasEligibleOrganizations),ee("design:type",c.c)],L.prototype,"hasEligibleOrganizations$",void 0),q([(0,r.l6)(yt.e.getEligibleOrganizations),ee("design:type",c.c)],L.prototype,"eligibleOrganizations$",void 0);var Be,kn=s(72212),Sn=s(39937),On=s(88041),Gn=s(291),Mt=function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},Tt=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function Rn(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleSelectionModeClick())}),e.EFF(1," Select "),e.k0s()}}function xn(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleViewModeClick(i.galleryViewMode.Card))}),e.EFF(1," View as Grid "),e.k0s()}}function Pn(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleViewModeClick(i.galleryViewMode.Row))}),e.EFF(1," View as List "),e.k0s()}}class tt{constructor(n){this.store=n,this.galleryViewMode=S.P}ngOnInit(){}handleSelectionModeClick(){this.store.dispatch(new y.w.SetBulkActions({active:!0}))}handleViewModeClick(n){this.store.dispatch(new y.w.SetViewMode(n))}}(Be=tt).\u0275fac=function(n){return new(n||Be)(e.rXU(r.il))},Be.\u0275cmp=e.VBU({type:Be,selectors:[["app-gallery-view-mode"]],decls:11,vars:10,consts:[["actionsMenu","matMenu"],["app-button","","appEventFence","","buttonTheme","light","buttonSize","xl","buttonShape","square","data-test","galleryModeMenuButton",3,"matMenuTriggerFor"],["icon","ellipsis-v"],["mat-menu-item","","data-test","gallerySelectMode",3,"click",4,"ngIf"],["mat-menu-item","","data-test","galleryViewModeCard",3,"click",4,"ngIf"],["mat-menu-item","","data-test","galleryViewModeList",3,"click",4,"ngIf"],["mat-menu-item","","data-test","gallerySelectMode",3,"click"],["mat-menu-item","","data-test","galleryViewModeCard",3,"click"],["mat-menu-item","","data-test","galleryViewModeList",3,"click"]],template:function(n,t){if(1&n&&(e.j41(0,"div")(1,"button",1),e.nrm(2,"app-icon",2),e.k0s(),e.j41(3,"mat-menu",null,0),e.DNE(5,Rn,2,0,"button",3),e.nI1(6,"async"),e.DNE(7,xn,2,0,"button",4),e.nI1(8,"async"),e.DNE(9,Pn,2,0,"button",5),e.nI1(10,"async"),e.k0s()()),2&n){const l=e.sdS(4);e.R7$(),e.Y8G("matMenuTriggerFor",l),e.R7$(4),e.Y8G("ngIf",e.bMT(6,4,t.bulkActionsAvailable$)),e.R7$(2),e.Y8G("ngIf",e.bMT(8,6,t.viewMode$)!==t.galleryViewMode.Card),e.R7$(2),e.Y8G("ngIf",e.bMT(10,8,t.viewMode$)!==t.galleryViewMode.Row)}},dependencies:[v.Q,C.bT,vt.L,Z.kk,Z.fb,Z.Cp,oe.R,C.Jj],changeDetection:0}),Mt([(0,r.l6)(d.Y.getViewMode),Tt("design:type",c.c)],tt.prototype,"viewMode$",void 0),Mt([(0,r.l6)(d.Y.getBulkActionsAvailable),Tt("design:type",c.c)],tt.prototype,"bulkActionsAvailable$",void 0);var Ee,pe=s(17773),nt=s(7213),In=s(52394),ke=function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},Se=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function jn(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.handleSelectAllClick())}),e.EFF(1," Select All "),e.k0s()}if(2&o){e.XpG();const t=e.sdS(4);e.Y8G("uppercase",!1)("matMenuTriggerFor",t)}}function Fn(o,n){if(1&o&&(e.j41(0,"button",13)(1,"span"),e.EFF(2),e.k0s(),e.nrm(3,"app-icon",14),e.k0s()),2&o){e.XpG();const t=e.sdS(4),l=e.XpG();e.Y8G("uppercase",!1)("matMenuTriggerFor",t),e.R7$(2),e.SpI("",l.checkedResults.length," Selected")}}function $n(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.handleActionClick(i))}),e.EFF(1),e.k0s()}if(2&o){const t=n.$implicit,l=e.XpG(2);e.Y8G("disabled",!l.bulkActionsEnabled[t]),e.BMQ("title",t)("data-test",l.bulkActionsDataTestMap[t]),e.R7$(),e.SpI(" ",t," ")}}function Bn(o,n){1&o&&e.nrm(0,"mat-divider")}function En(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.handleActionClick(i))}),e.EFF(1),e.k0s()}if(2&o){const t=n.$implicit,l=e.XpG(2);e.Y8G("disabled",!l.bulkActionsEnabled[t]),e.BMQ("title",t)("data-test",l.bulkActionsDataTestMap[t]),e.R7$(),e.SpI(" ",t," ")}}function wn(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",2),e.DNE(1,jn,2,2,"button",3)(2,Fn,4,3,"button",4),e.j41(3,"mat-menu",null,0)(5,"button",5),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleClearSelectionClick())}),e.EFF(6," Clear Selected "),e.k0s(),e.j41(7,"button",6),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleSelectAllClick())}),e.EFF(8," Select All "),e.k0s(),e.DNE(9,$n,2,4,"button",7)(10,Bn,1,0,"mat-divider",8)(11,En,2,4,"button",9),e.k0s(),e.j41(12,"button",10),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleCancelClick())}),e.nrm(13,"app-icon",11),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",0===t.checkedResults.length),e.R7$(),e.Y8G("ngIf",t.checkedResults.length>0),e.R7$(3),e.Y8G("disabled",0===t.checkedResults.length),e.R7$(2),e.Y8G("disabled",t.checkedResults.length===t.allResults.total),e.R7$(2),e.Y8G("ngForOf",t.primaryBulkActions),e.R7$(),e.Y8G("ngIf",t.secondaryBulkActions.length>0),e.R7$(),e.Y8G("ngForOf",t.secondaryBulkActions)}}const Dn={[pe.qg.ExportCSV]:(o,n,t)=>(0,nt.Dx)(n,t),[pe.qg.AddToLibrary]:(o,n,t,l)=>(0,nt.E2)(t,l),[pe.qg.Delete]:(o,n,t)=>(0,nt.D1)(o,n,t),[pe.qg.Manage]:(o,n)=>o.every(t=>(0,nt.dE)(n,t))};class he{constructor(n,t){this.store=n,this.changeDetectorRef=t,this.bookmarkPermission=In.c,this.bulkActionsIconMap=pe.xM,this.bulkActionsDataTestMap=pe.EM,this.bulkActionsEnabled=Object.values(pe.qg).reduce((l,i)=>(l[i]=!1,l),{}),this.bulkAction=new e.bkB,this.primaryBulkActions=[],this.secondaryBulkActions=[],this.ngUnsubscribe=new O.B}ngOnInit(){this.initBulkActions()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initBulkActions(){(0,Ge.z)([this.allResults$,this.checkedResults$,this.userRole$,this.isPremiumUser$,this.isTeamTrial$]).pipe((0,G.p)(([n,t])=>!(0,j.isNil)(n)&&!(0,j.isNil)(t)),(0,_.Q)(this.ngUnsubscribe)).subscribe(([n,t,l,i,a])=>{this.allResults=n,this.checkedResults=t;const p=n.items.filter(g=>t.includes(g.id));Object.values(pe.qg).forEach(g=>{this.bulkActionsEnabled[g]=0!==t.length&&(0,Dn[g])(p,l,i,a)}),this.changeDetectorRef.markForCheck()}),this.bulkActions$.pipe((0,_.Q)(this.ngUnsubscribe)).subscribe(({items:n})=>{this.primaryBulkActions=n.filter(t=>t!==pe.qg.Delete),this.secondaryBulkActions=n.filter(t=>t===pe.qg.Delete),this.changeDetectorRef.markForCheck()})}handleSelectAllClick(){this.store.dispatch(new y.w.CheckAll)}handleClearSelectionClick(){this.store.dispatch(new y.w.UncheckAll)}handleActionClick(n){this.bulkAction.emit({name:n,ids:this.store.selectSnapshot(d.Y.getCheckedResults)})}handleSelectAllChange(n){n?this.handleSelectAllClick():this.handleClearSelectionClick()}handleCancelClick(){this.store.dispatch(new y.w.UncheckAll),this.store.dispatch(new y.w.SetBulkActions({active:!1}))}}(Ee=he).\u0275fac=function(n){return new(n||Ee)(e.rXU(r.il),e.rXU(e.gRc))},Ee.\u0275cmp=e.VBU({type:Ee,selectors:[["app-gallery-bulk-actions"]],outputs:{bulkAction:"bulkAction"},decls:1,vars:1,consts:[["bulkActionsMenu","matMenu"],["class","flex flex-row gallery-bulk-actions",4,"ngIf"],[1,"flex","flex-row","gallery-bulk-actions"],["app-button","","buttonTheme","light","buttonSize","xl","class","ml-2 font-semibold whitespace-nowrap",3,"uppercase","matMenuTriggerFor","click",4,"ngIf"],["app-button","","buttonTheme","light","buttonSize","xl","data-test","bulkActionsMenu","class","font-semibold whitespace-nowrap",3,"uppercase","matMenuTriggerFor",4,"ngIf"],["type","button","mat-menu-item","","data-test","clearSelectionButton",3,"click","disabled"],["type","button","mat-menu-item","","data-test","selectAllSelectionButton",3,"click","disabled"],["type","button","mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],["type","button","mat-menu-item","","class","text-red-700 disabled:text-red-700/50",3,"disabled","click",4,"ngFor","ngForOf"],["app-button","","type","button","app-button","","buttonSize","xl","buttonTheme","light","buttonType","default","title","Cancel Select","data-test","cancelSelectButton",3,"click"],["icon","times","size","lg"],["app-button","","buttonTheme","light","buttonSize","xl",1,"ml-2","font-semibold","whitespace-nowrap",3,"click","uppercase","matMenuTriggerFor"],["app-button","","buttonTheme","light","buttonSize","xl","data-test","bulkActionsMenu",1,"font-semibold","whitespace-nowrap",3,"uppercase","matMenuTriggerFor"],["icon","caret-down",1,"ml-1"],["type","button","mat-menu-item","",3,"click","disabled"],["type","button","mat-menu-item","",1,"text-red-700","disabled:text-red-700/50",3,"click","disabled"]],template:function(n,t){1&n&&e.DNE(0,wn,14,7,"div",1),2&n&&e.Y8G("ngIf",t.allResults&&t.checkedResults)},dependencies:[v.Q,C.Sq,C.bT,Z.kk,Z.fb,Z.Cp,ft.q,oe.R],styles:[".gallery-bulk-actions__button[_ngcontent-%COMP%]{white-space:nowrap}.gallery-bulk-actions__secondary[_ngcontent-%COMP%]{color:#de3535}.gallery-bulk-actions__secondary[disabled][_ngcontent-%COMP%]{color:#de353580}"],changeDetection:0}),ke([(0,r.l6)(w.k.getUserRole),Se("design:type",c.c)],he.prototype,"userRole$",void 0),ke([(0,r.l6)(w.k.isPremiumUser),Se("design:type",c.c)],he.prototype,"isPremiumUser$",void 0),ke([(0,r.l6)(P.q.isTrial),Se("design:type",c.c)],he.prototype,"isTeamTrial$",void 0),ke([(0,r.l6)(d.Y.getBulkActions),Se("design:type",c.c)],he.prototype,"bulkActions$",void 0),ke([(0,r.l6)(d.Y.getAllResults),Se("design:type",c.c)],he.prototype,"allResults$",void 0),ke([(0,r.l6)(d.Y.getCheckedResults),Se("design:type",c.c)],he.prototype,"checkedResults$",void 0);var be,An=s(49206);const Vn=(o,n)=>({"gallery-search--has-filters":o,"gallery-search--has-text":n});function Un(o,n){if(1&o){const t=e.RV6();e.j41(0,"span",10)(1,"button",11),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleToggleFilters())}),e.EFF(2," Filter "),e.nrm(3,"app-icon",12),e.nI1(4,"async"),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.BMQ("aria-label","Toggle Filters"),e.R7$(2),e.Y8G("icon",e.bMT(4,2,t.showFilters$)?"caret-up":"caret-down")}}class rt extends An.Z{constructor(){super(...arguments),this.mode="desktop",this.placeholder="",this.hasFilters=!0,this.aiSearch=!0,this.clearClicked=new e.bkB,this.filtersClicked=new e.bkB}handleClearQuery(){this.clearClicked.emit()}handleToggleFilters(){this.filtersClicked.emit()}}(be=rt).\u0275fac=(()=>{let o;return function(t){return(o||(o=e.xGo(be)))(t||be)}})(),be.\u0275cmp=e.VBU({type:be,selectors:[["app-gallery-search-field"]],inputs:{mode:"mode",placeholder:"placeholder",hasFilters:"hasFilters",aiSearch:"aiSearch"},outputs:{clearClicked:"clearClicked",filtersClicked:"filtersClicked"},features:[e.Jv_([{provide:u.kq,useExisting:(0,e.Rfq)(()=>be),multi:!0}]),e.Vt3],decls:13,vars:18,consts:[[1,"gallery-search",3,"ngClass"],[1,"sr-only"],[1,"gallery-search__bar"],[1,"gallery-search__icon"],[3,"custom","icon"],["type","text","autocomplete","off",1,"gallery-search__input",3,"formControl"],[1,"gallery-search__clear"],["type","button","buttonType","text","buttonShape","square","app-button","","buttonTheme","light",3,"click"],["icon","times-circle"],["class","gallery-search__filters",4,"ngIf"],[1,"gallery-search__filters"],["type","button","buttonType","text","app-button","","buttonTheme","light","data-test","galleryFiltersToggle",3,"click"],[1,"pl-1",3,"icon"]],template:function(n,t){1&n&&(e.j41(0,"div",0),e.nI1(1,"async"),e.j41(2,"label",1),e.EFF(3),e.k0s(),e.j41(4,"div",2)(5,"span",3),e.nrm(6,"app-icon",4),e.k0s(),e.nrm(7,"input",5),e.nI1(8,"titlecase"),e.j41(9,"span",6)(10,"button",7),e.bIt("click",function(){return t.handleClearQuery()}),e.nrm(11,"app-icon",8),e.k0s()()(),e.DNE(12,Un,5,4,"span",9),e.k0s()),2&n&&(e.Y8G("ngClass",e.l_i(15,Vn,t.hasFilters,e.bMT(1,11,t.control.valueChanges))),e.R7$(2),e.BMQ("for","gallery-search-"+t.mode),e.R7$(),e.JRh(t.placeholder||""),e.R7$(3),e.Y8G("custom",t.aiSearch)("icon",t.aiSearch?"search-sparkle":"search"),e.R7$(),e.Y8G("formControl",t.control),e.BMQ("id","gallery-search-"+t.mode)("placeholder",t.placeholder||"")("data-test","gallerySearch"+e.bMT(8,13,t.mode)),e.R7$(3),e.BMQ("aria-label","Clear Search Results"),e.R7$(2),e.Y8G("ngIf",t.hasFilters))},dependencies:[v.Q,C.YU,C.bT,u.me,u.BC,u.l_,oe.R,C.Jj,C.PV],styles:[".input[_ngcontent-%COMP%], [type=text].input[_ngcontent-%COMP%], [type=number].input[_ngcontent-%COMP%], [type=email].input[_ngcontent-%COMP%], [type=password].input[_ngcontent-%COMP%], [type=file].input[_ngcontent-%COMP%], [type=url].input[_ngcontent-%COMP%], select.input[_ngcontent-%COMP%], textarea.input[_ngcontent-%COMP%]{border:1px solid #1b283c;border-radius:4px;background-color:#101823;color:#fff;display:block;min-height:36px;width:100%;font-size:12px;padding:8px 12px;font-family:Inter,sans-serif}@supports (font-variation-settings: normal){.input[_ngcontent-%COMP%], [type=text].input[_ngcontent-%COMP%], [type=number].input[_ngcontent-%COMP%], [type=email].input[_ngcontent-%COMP%], [type=password].input[_ngcontent-%COMP%], [type=file].input[_ngcontent-%COMP%], [type=url].input[_ngcontent-%COMP%], select.input[_ngcontent-%COMP%], textarea.input[_ngcontent-%COMP%]{font-family:Inter UI var alt,sans-serif}}.input[_ngcontent-%COMP%]:focus, [type=text].input[_ngcontent-%COMP%]:focus, [type=number].input[_ngcontent-%COMP%]:focus, [type=email].input[_ngcontent-%COMP%]:focus, [type=password].input[_ngcontent-%COMP%]:focus, [type=file].input[_ngcontent-%COMP%]:focus, [type=url].input[_ngcontent-%COMP%]:focus, select.input[_ngcontent-%COMP%]:focus, textarea.input[_ngcontent-%COMP%]:focus{outline:#2d72dc solid 2px!important}.input[_ngcontent-%COMP%]:focus.ng-invalid, [type=text].input[_ngcontent-%COMP%]:focus.ng-invalid, [type=number].input[_ngcontent-%COMP%]:focus.ng-invalid, [type=email].input[_ngcontent-%COMP%]:focus.ng-invalid, [type=password].input[_ngcontent-%COMP%]:focus.ng-invalid, [type=file].input[_ngcontent-%COMP%]:focus.ng-invalid, [type=url].input[_ngcontent-%COMP%]:focus.ng-invalid, select.input[_ngcontent-%COMP%]:focus.ng-invalid, textarea.input[_ngcontent-%COMP%]:focus.ng-invalid{outline-color:#ed4758!important;outline-width:1px!important}.input--small[_ngcontent-%COMP%], [type=text].input--small[_ngcontent-%COMP%], [type=number].input--small[_ngcontent-%COMP%], [type=email].input--small[_ngcontent-%COMP%], [type=password].input--small[_ngcontent-%COMP%], [type=file].input--small[_ngcontent-%COMP%], [type=url].input--small[_ngcontent-%COMP%], select.input--small[_ngcontent-%COMP%], textarea.input--small[_ngcontent-%COMP%]{font-size:12px;padding:8px;min-height:auto}.input--large[_ngcontent-%COMP%], [type=text].input--large[_ngcontent-%COMP%], [type=number].input--large[_ngcontent-%COMP%], [type=email].input--large[_ngcontent-%COMP%], [type=password].input--large[_ngcontent-%COMP%], [type=file].input--large[_ngcontent-%COMP%], [type=url].input--large[_ngcontent-%COMP%], select.input--large[_ngcontent-%COMP%], textarea.input--large[_ngcontent-%COMP%]{font-size:16px;padding:12px}.input--success[_ngcontent-%COMP%], [type=text].input--success[_ngcontent-%COMP%], [type=number].input--success[_ngcontent-%COMP%], [type=email].input--success[_ngcontent-%COMP%], [type=password].input--success[_ngcontent-%COMP%], [type=file].input--success[_ngcontent-%COMP%], [type=url].input--success[_ngcontent-%COMP%], select.input--success[_ngcontent-%COMP%], textarea.input--success[_ngcontent-%COMP%]{border-color:#38de38!important}.input[_ngcontent-%COMP%]:disabled, [type=text].input[_ngcontent-%COMP%]:disabled, [type=number].input[_ngcontent-%COMP%]:disabled, [type=email].input[_ngcontent-%COMP%]:disabled, [type=password].input[_ngcontent-%COMP%]:disabled, [type=file].input[_ngcontent-%COMP%]:disabled, [type=url].input[_ngcontent-%COMP%]:disabled, select.input[_ngcontent-%COMP%]:disabled, textarea.input[_ngcontent-%COMP%]:disabled{opacity:.4}.input.ng-dirty.ng-invalid[_ngcontent-%COMP%], [type=text].input.ng-dirty.ng-invalid[_ngcontent-%COMP%], [type=number].input.ng-dirty.ng-invalid[_ngcontent-%COMP%], [type=email].input.ng-dirty.ng-invalid[_ngcontent-%COMP%], [type=password].input.ng-dirty.ng-invalid[_ngcontent-%COMP%], [type=file].input.ng-dirty.ng-invalid[_ngcontent-%COMP%], [type=url].input.ng-dirty.ng-invalid[_ngcontent-%COMP%], select.input.ng-dirty.ng-invalid[_ngcontent-%COMP%], textarea.input.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border:1px solid #ed4758}textarea.input--nonresizable[_ngcontent-%COMP%]{resize:none}select.input[_ngcontent-%COMP%]{height:36px}input.theme-dark[_ngcontent-%COMP%], select.theme-dark[_ngcontent-%COMP%], textarea.theme-dark[_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .input[type=text][_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .input[type=number][_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .input[type=email][_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .input[type=password][_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .input[type=file][_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   .input[type=url][_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   select.input[_ngcontent-%COMP%], .theme-dark[_ngcontent-%COMP%]   textarea.input[_ngcontent-%COMP%]{background-color:#101823;border:1px solid #374a68;color:#fff}input.theme-light[_ngcontent-%COMP%], select.theme-light[_ngcontent-%COMP%], textarea.theme-light[_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   .input[type=text][_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   .input[type=number][_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   .input[type=email][_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   .input[type=password][_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   .input[type=file][_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   .input[type=url][_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   select.input[_ngcontent-%COMP%], .theme-light[_ngcontent-%COMP%]   textarea.input[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #96a8c0;color:#283853}input.theme-light[_ngcontent-%COMP%]:focus, select.theme-light[_ngcontent-%COMP%]:focus, textarea.theme-light[_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   .input[type=text][_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   .input[type=number][_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   .input[type=email][_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   .input[type=password][_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   .input[type=file][_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   .input[type=url][_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   select.input[_ngcontent-%COMP%]:focus, .theme-light[_ngcontent-%COMP%]   textarea.input[_ngcontent-%COMP%]:focus{background-color:#fff}input.theme-light[_ngcontent-%COMP%]::placeholder, select.theme-light[_ngcontent-%COMP%]::placeholder, textarea.theme-light[_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   .input[type=text][_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   .input[type=number][_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   .input[type=email][_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   .input[type=password][_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   .input[type=file][_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   .input[type=url][_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   select.input[_ngcontent-%COMP%]::placeholder, .theme-light[_ngcontent-%COMP%]   textarea.input[_ngcontent-%COMP%]::placeholder{color:#374a6880}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.gallery-search__input[_ngcontent-%COMP%]{font-size:16px}}}.gallery-search[_ngcontent-%COMP%]{position:relative;height:44px;width:100%;display:flex}.gallery-search--has-filters[_ngcontent-%COMP%]   .gallery-search__filters[_ngcontent-%COMP%]{display:flex}.gallery-search--has-filters[_ngcontent-%COMP%]   .gallery-search__bar[_ngcontent-%COMP%]{margin-right:-1px;border-radius:4px 0 0 4px}.gallery-search--has-text[_ngcontent-%COMP%]   .gallery-search__clear[_ngcontent-%COMP%]{visibility:visible}.gallery-search__bar[_ngcontent-%COMP%]{flex:1 1 100%;height:100%;display:flex;border-radius:4px;background-color:#fff;border:1px solid #96a8c0;padding:0 2px}.gallery-search__bar[_ngcontent-%COMP%]:focus-within{outline:#2d72dc solid 2px!important}.gallery-search__filters[_ngcontent-%COMP%]{border:1px solid #96a8c0;border-radius:0 4px 4px 0;display:none;align-items:center;height:100%;flex:0 0 auto;white-space:nowrap;padding:0 4px}.gallery-search__input[_ngcontent-%COMP%]{border:0;padding:0;margin:0;display:block;height:100%;flex:1 1 auto;font-size:14px;width:100%}.gallery-search__input[_ngcontent-%COMP%]:focus{outline:0}.gallery-search__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#61779e;flex:0 0 36px;height:100%;-webkit-user-select:none;user-select:none}.gallery-search__clear[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;flex:0 0 36px;visibility:hidden}"],changeDetection:0}),function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);i>3&&a&&Object.defineProperty(n,t,a)}([(0,r.l6)(d.Y.getShowFilters),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,c.c)],rt.prototype,"showFilters$",void 0);var we,J=function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},W=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function zn(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-gallery-search-field",12),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("clearClicked",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.handleClearQuery())})("filtersClicked",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.handleToggleFilters())}),e.k0s()}if(2&o){const t=e.XpG(2);e.Y8G("hasFilters",e.bMT(1,3,t.hasFilters$))("placeholder","Search "+e.bMT(2,5,t.searchTitle$))("aiSearch",t.isExplore())}}function Ln(o,n){1&o&&(e.qex(0),e.nrm(1,"app-locales",13),e.bVm()),2&o&&(e.R7$(),e.Y8G("showFlag",!0))}function Xn(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-gallery-bulk-actions",14),e.bIt("bulkAction",function(i){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleBulkAction(i))}),e.k0s()}}function Qn(o,n){1&o&&e.nrm(0,"app-gallery-view-mode")}function Hn(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"form",6),e.DNE(4,zn,3,7,"app-gallery-search-field",7),e.nI1(5,"async"),e.k0s()(),e.j41(6,"div",8),e.DNE(7,Ln,2,1,"ng-container",9),e.j41(8,"app-sort",10),e.nI1(9,"async"),e.nI1(10,"async"),e.bIt("sortChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.handleSortClick(i))}),e.k0s(),e.DNE(11,Xn,1,0,"app-gallery-bulk-actions",11),e.nI1(12,"async"),e.nI1(13,"async"),e.DNE(14,Qn,1,0,"ng-template",null,0,e.C5r),e.k0s()()()}if(2&o){const t=e.sdS(15),l=e.XpG();e.R7$(3),e.Y8G("formGroup",l.form),e.R7$(),e.Y8G("ngIf",e.bMT(5,8,l.searchTitle$)),e.R7$(3),e.Y8G("ngIf",l.isExplore()),e.R7$(),e.Y8G("sortLabel","Sort Models")("sortOptions",e.bMT(9,10,l.sortOptions$))("sort",e.bMT(10,12,l.sort$)),e.R7$(3),e.Y8G("ngIf",e.bMT(12,14,l.bulkActionsActive$)&&e.bMT(13,16,l.bulkActionsAvailable$))("ngIfElse",t)}}function Jn(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-gallery-search-field",20),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("clearClicked",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.handleClearQuery())})("filtersClicked",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.handleToggleFilters())}),e.k0s()}if(2&o){const t=e.XpG(2);e.Y8G("hasFilters",e.bMT(1,3,t.hasFilters$))("placeholder","Search "+e.bMT(2,5,t.searchTitle$))("aiSearch",t.isExplore())}}function Wn(o,n){if(1&o&&(e.qex(0),e.EFF(1),e.nI1(2,"async"),e.bVm()),2&o){let t;const l=e.XpG(2);e.R7$(),e.SpI("",null==(t=e.bMT(2,1,l.results$))?null:t.total," results")}}function Kn(o,n){1&o&&(e.qex(0),e.nrm(1,"app-locales",21),e.bVm()),2&o&&(e.R7$(),e.Y8G("showFlag",!0))}function Zn(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",15)(1,"div",4)(2,"div",16)(3,"div",5)(4,"form",6),e.DNE(5,Jn,3,7,"app-gallery-search-field",17),e.nI1(6,"async"),e.k0s()()(),e.j41(7,"div",18)(8,"div",19),e.DNE(9,Wn,3,3,"ng-container",9),e.nI1(10,"async"),e.k0s(),e.j41(11,"div",8),e.DNE(12,Kn,2,1,"ng-container",9),e.j41(13,"app-sort",10),e.nI1(14,"async"),e.nI1(15,"async"),e.bIt("sortChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.handleSortClick(i))}),e.k0s()()()()()}if(2&o){const t=e.XpG();e.R7$(4),e.Y8G("formGroup",t.form),e.R7$(),e.Y8G("ngIf",e.bMT(6,7,t.searchTitle$)),e.R7$(4),e.Y8G("ngIf",!e.bMT(10,9,t.loading$)),e.R7$(3),e.Y8G("ngIf",t.isExplore()),e.R7$(),e.Y8G("sortLabel","Sort Models")("sortOptions",e.bMT(14,11,t.sortOptions$))("sort",e.bMT(15,13,t.sort$))}}class U{constructor(n,t,l,i){this.store=n,this.router=t,this.changeDetectorRef=l,this.formBuilder=i,this.bulkAction=new e.bkB,this.sortChange=new e.bkB,this.galleryViewMode=S.P,this.horizontalBreakpoint=H.m,this.ngUnsubscribe=new O.B,this.form=this.formBuilder.group({query:[""]}),this.searchTitle$=(0,Sn.E)(this.store)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.observeSearchInput(),this.observeSearchQuery()}observeSearchInput(){this.form.valueChanges.pipe((0,Q.B)(600),(0,_e.T)(n=>n.query),(0,K.F)(),(0,_.Q)(this.ngUnsubscribe)).subscribe(n=>{const t={...this.store.selectSnapshot(d.Y.getSearchConfig)};t.query=n,this.store.dispatch(new y.w.SetSearchConfig(t))})}observeSearchQuery(){this.searchConfig$.pipe((0,G.p)(n=>!(0,j.isNil)(n)&&n.query!==this.form.value.query),(0,_.Q)(this.ngUnsubscribe)).subscribe(n=>{this.form.patchValue({query:n.query}),this.changeDetectorRef.markForCheck()})}handleSortClick(n){this.sortChange.next(n)}handleToggleFilters(){const n=!this.store.selectSnapshot(d.Y.getShowFilters),t=this.store.selectSnapshot(te.V.getHorizontalBreakpoint)<=H.m.Small;this.store.dispatch(new y.w.ShowFilters(n,t))}handleBulkAction(n){this.bulkAction.next(n)}handleClearQuery(){const n=this.store.selectSnapshot(d.Y.getSearchConfig);this.store.dispatch(new y.w.SetSearchConfig({...n,query:""}))}toggleView(n){this.store.dispatch(new y.w.SetViewMode(n))}isExplore(){return this.router.url.startsWith("/results/modules")}}(we=U).\u0275fac=function(n){return new(n||we)(e.rXU(r.il),e.rXU(ae.Ix),e.rXU(e.gRc),e.rXU(u.ze))},we.\u0275cmp=e.VBU({type:we,selectors:[["app-gallery-header"]],outputs:{bulkAction:"bulkAction",sortChange:"sortChange"},decls:4,vars:6,consts:[["standardActions",""],["class","gallery-header gallery-header--desktop","data-test","galleryHeaderDesktop",4,"ngIf"],["class","gallery-header gallery-header--mobile","data-test","galleryHeaderMobile",4,"ngIf"],["data-test","galleryHeaderDesktop",1,"gallery-header","gallery-header--desktop"],[1,"gallery-header__controls"],[1,"gallery-header__search"],[3,"formGroup"],["mode","desktop","formControlName","query",3,"hasFilters","placeholder","aiSearch","clearClicked","filtersClicked",4,"ngIf"],[1,"flex","items-center"],[4,"ngIf"],["buttonSize","lg",3,"sortChange","sortLabel","sortOptions","sort"],[3,"bulkAction",4,"ngIf","ngIfElse"],["mode","desktop","formControlName","query",3,"clearClicked","filtersClicked","hasFilters","placeholder","aiSearch"],["buttonSize","lg","buttonTheme","light","buttonType","default","localeFormat","lang",3,"showFlag"],[3,"bulkAction"],["data-test","galleryHeaderMobile",1,"gallery-header","gallery-header--mobile"],[1,"flex","pt-5","pb-3"],["mode","mobile","formControlName","query",3,"hasFilters","placeholder","aiSearch","clearClicked","filtersClicked",4,"ngIf"],[1,"flex","items-center","justify-between"],["role","status",1,"flex","items-center","text-sm","text-nowrap"],["mode","mobile","formControlName","query",3,"clearClicked","filtersClicked","hasFilters","placeholder","aiSearch"],["buttonTheme","light","buttonType","default","localeFormat","lang","buttonSize","lg",3,"showFlag"]],template:function(n,t){1&n&&(e.DNE(0,Hn,16,18,"div",1),e.nI1(1,"async"),e.DNE(2,Zn,16,15,"div",2),e.nI1(3,"async")),2&n&&(e.Y8G("ngIf",e.bMT(1,2,t.horizontalBreakpoint$)>=t.horizontalBreakpoint.Large),e.R7$(2),e.Y8G("ngIf",e.bMT(3,4,t.horizontalBreakpoint$)<=t.horizontalBreakpoint.Medium))},dependencies:[C.bT,u.qT,u.BC,u.cb,u.j4,u.JD,On.K,Gn.J,tt,he,rt,C.Jj],styles:[".gallery-header--desktop[_ngcontent-%COMP%]{display:block}.gallery-header--mobile[_ngcontent-%COMP%]{display:none}.gallery-header__title[_ngcontent-%COMP%]{display:flex;align-items:center}.gallery-header__controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 40px}.gallery-header__search[_ngcontent-%COMP%]{flex:0 1 400px;padding-right:8px}@media (max-width: 959px){.gallery-header[_ngcontent-%COMP%]{padding:0}.gallery-header--desktop[_ngcontent-%COMP%]{display:none}.gallery-header--mobile[_ngcontent-%COMP%]{display:block}.gallery-header__title[_ngcontent-%COMP%]{display:flex;padding:12px 0}.gallery-header__controls[_ngcontent-%COMP%]{display:block;padding:0 20px}.gallery-header__search[_ngcontent-%COMP%]{flex:1 0 auto;padding:0 4px 0 0;max-width:100%}}"],changeDetection:0}),J([(0,r.l6)(d.Y.getViewMode),W("design:type",c.c)],U.prototype,"viewMode$",void 0),J([(0,r.l6)(d.Y.getSort),W("design:type",c.c)],U.prototype,"sort$",void 0),J([(0,r.l6)(d.Y.getSortOptions),W("design:type",c.c)],U.prototype,"sortOptions$",void 0),J([(0,r.l6)(d.Y.getSearchConfig),W("design:type",c.c)],U.prototype,"searchConfig$",void 0),J([(0,r.l6)(d.Y.getSearchType),W("design:type",c.c)],U.prototype,"searchType$",void 0),J([(0,r.l6)(d.Y.getFilteredResults),W("design:type",c.c)],U.prototype,"results$",void 0),J([(0,r.l6)(d.Y.getBulkActions),W("design:type",c.c)],U.prototype,"bulkActions$",void 0),J([(0,r.l6)(d.Y.getBulkActionsAvailable),W("design:type",c.c)],U.prototype,"bulkActionsAvailable$",void 0),J([(0,r.l6)(d.Y.getLoading),W("design:type",c.c)],U.prototype,"loading$",void 0),J([(0,r.l6)(d.Y.getShowFilters),W("design:type",c.c)],U.prototype,"showFilters$",void 0),J([(0,r.l6)(d.Y.getHasFilters),W("design:type",c.c)],U.prototype,"hasFilters$",void 0),J([(0,r.l6)(d.Y.getBulkActionsActive),W("design:type",c.c)],U.prototype,"bulkActionsActive$",void 0),J([(0,r.l6)(te.V.getHorizontalBreakpoint),W("design:type",c.c)],U.prototype,"horizontalBreakpoint$",void 0);var qn=s(97978);let kt=(()=>{var o;class n{transform(l,i){return(0,j.lowerCase)(l).split(" ").map(a=>"and"===a||"or"===a?a:(0,j.upperFirst)(a)).join(" ")}}return(o=n).\u0275fac=function(l){return new(l||o)},o.\u0275pipe=e.EJ8({name:"humanize",type:o,pure:!0}),n})();var De;function no(o,n){if(1&o){const t=e.RV6();e.j41(0,"a",2),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.handleSelectClient(i))}),e.EFF(1),e.nI1(2,"humanize"),e.k0s()}if(2&o){const t=n.$implicit,l=e.XpG();e.Y8G("selected",t===l.selectedClient),e.R7$(),e.SpI(" ",e.bMT(2,2,t)," ")}}class ct{constructor(n,t){this.modulesService=n,this.changeDetectorRef=t,this.clients=[],this.selectedClient="",this.ngUnsubscribe=new O.B,this.clientSelected=new e.bkB}ngOnInit(){this.initClients(),this.observeClient()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initClients(){this.modulesService.getClients().pipe((0,_e.T)(n=>(0,j.compact)(n))).subscribe(n=>{this.clients=n,this.changeDetectorRef.markForCheck()})}handleSelectClient(n){this.clientSelected.emit(n)}observeClient(){this.searchConfig$.pipe((0,_.Q)(this.ngUnsubscribe)).subscribe(n=>{if(n.type===f.n.Internal){const t=n.directory.split("/");this.selectedClient="","client"===t[0]&&2===t.length&&(this.selectedClient=t[1]),this.changeDetectorRef.markForCheck()}})}}(De=ct).\u0275fac=function(n){return new(n||De)(e.rXU(qn.F),e.rXU(e.gRc))},De.\u0275cmp=e.VBU({type:De,selectors:[["app-gallery-clients"]],outputs:{clientSelected:"clientSelected"},decls:4,vars:2,consts:[["label","Clients",3,"collapsible"],["app-navigation-list-item","",3,"selected","click",4,"ngFor","ngForOf"],["app-navigation-list-item","",3,"click","selected"]],template:function(n,t){1&n&&(e.j41(0,"app-navigation-panel",0)(1,"app-navigation-list-container")(2,"nav"),e.DNE(3,no,3,4,"a",1),e.k0s()()()),2&n&&(e.Y8G("collapsible",!0),e.R7$(3),e.Y8G("ngForOf",t.clients))},dependencies:[C.Sq,B.k,Ke.T,Ze.d,kt],changeDetection:0}),function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);i>3&&a&&Object.defineProperty(n,t,a)}([(0,r.l6)(d.Y.getSearchConfig),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,c.c)],ct.prototype,"searchConfig$",void 0);var Ae,St=s(96728),oo=s(54169),lo=s(59369);function so(o,n){if(1&o){const t=e.RV6();e.j41(0,"a",1),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleSelectSource("library"))}),e.EFF(4," My Library "),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("selected",e.bMT(1,1,t.searchType$)===t.searchType.Private||e.bMT(2,3,t.searchType$)===t.searchType.Organization||e.bMT(3,5,t.searchType$)===t.searchType.Collection)}}function ro(o,n){if(1&o){const t=e.RV6();e.j41(0,"a",1),e.nI1(1,"async"),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.handleSelectSource("loft"))}),e.EFF(2," Loft "),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("selected",e.bMT(1,1,t.searchType$)===t.searchType.Loft)}}class pt{constructor(n){this.store=n,this.searchType=f.n,this.environmentApplication=V.c}handleSelectSource(n){let t,l=St.Ir;switch(n){case"module":t=new T.pf("all");break;case"library":t=new T.Y0(""),l=St._z;break;case"loft":t=new T.qS("production","maleAdult")}this.store.dispatch(new y.w.SetSearchConfig(t));const i=new oo.n("",l);this.store.dispatch(new y.w.SetSearchOptions(i))}}(Ae=pt).\u0275fac=function(n){return new(n||Ae)(e.rXU(r.il))},Ae.\u0275cmp=e.VBU({type:Ae,selectors:[["app-gallery-source"]],decls:7,vars:6,consts:[["label","Source",3,"collapsible"],["app-navigation-list-item","",3,"click","selected"],["app-navigation-list-item","",3,"selected","click",4,"appFlagApplication"]],template:function(n,t){1&n&&(e.j41(0,"app-navigation-panel",0)(1,"app-navigation-list-container")(2,"a",1),e.nI1(3,"async"),e.bIt("click",function(){return t.handleSelectSource("module")}),e.EFF(4," BioDigital Library "),e.k0s(),e.DNE(5,so,5,7,"a",2)(6,ro,3,3,"a",2),e.k0s()()),2&n&&(e.Y8G("collapsible",!0),e.R7$(2),e.Y8G("selected",e.bMT(3,4,t.searchType$)===t.searchType.Category),e.R7$(3),e.Y8G("appFlagApplication",t.environmentApplication.Studio),e.R7$(),e.Y8G("appFlagApplication",t.environmentApplication.Loft))},dependencies:[lo.Y,B.k,Ke.T,Ze.d,C.Jj],changeDetection:0}),function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);i>3&&a&&Object.defineProperty(n,t,a)}([(0,r.l6)(d.Y.getSearchType),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,c.c)],pt.prototype,"searchType$",void 0);var Ne,co=s(68008);const Ot=o=>({"gallery-groups__button--active":o});function go(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",2),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.selectFilter(i))}),e.EFF(1),e.nI1(2,"humanize"),e.k0s()}if(2&o){const t=n.$implicit,l=e.XpG(2);e.Y8G("ngClass",e.eq3(4,Ot,l.activeTag===t)),e.R7$(),e.SpI(" ",e.bMT(2,2,t)," ")}}function mo(o,n){if(1&o){const t=e.RV6();e.j41(0,"nav",1)(1,"button",2),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.selectFilter(""))}),e.EFF(2," All "),e.k0s(),e.DNE(3,go,3,6,"button",3),e.k0s()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(2,Ot,null==t.activeTag)),e.R7$(2),e.Y8G("ngForOf",t.tagCategory.tags)}}class dt{get tagCategory(){return this._tagCategory}set tagCategory(n){this._tagCategory=n}constructor(n,t){this.store=n,this.changeDetectorRef=t,this.ngUnsubscribe=new O.B,this.activeTag=""}ngOnInit(){this.activeTags$.pipe((0,_.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=this.tagCategory?.title;this.activeTag=n?n[t]:"",this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}selectFilter(n){const t=this.store.selectSnapshot(d.Y.getActiveTags);t[this.tagCategory.title]=n,this.store.dispatch(new y.w.SetActiveTags(t))}}(Ne=dt).\u0275fac=function(n){return new(n||Ne)(e.rXU(r.il),e.rXU(e.gRc))},Ne.\u0275cmp=e.VBU({type:Ne,selectors:[["app-gallery-groups"]],inputs:{tagCategory:"tagCategory"},decls:1,vars:1,consts:[["class","gallery-groups",4,"ngIf"],[1,"gallery-groups"],["type","button",1,"gallery-groups__button",3,"click","ngClass"],["type","button","class","gallery-groups__button",3,"ngClass","click",4,"ngFor","ngForOf"]],template:function(n,t){1&n&&e.DNE(0,mo,4,4,"nav",0),2&n&&e.Y8G("ngIf",t.tagCategory)},dependencies:[C.YU,C.Sq,C.bT,kt],styles:[".gallery-groups[_ngcontent-%COMP%]{display:flex;gap:8px}.gallery-groups__item[_ngcontent-%COMP%]{display:inline-flex}.gallery-groups__button[_ngcontent-%COMP%]{background:none;border:none;border-radius:4px;border-bottom:3px solid transparent;height:32px;display:flex;align-items:center;justify-content:center;color:#374a68;font-weight:600;font-size:14px;padding:0 8px;transition:all ease-out .15s}.gallery-groups__button--active[_ngcontent-%COMP%]{border-bottom-color:#de3535;border-radius:4px 4px 0 0}.gallery-groups__button[_ngcontent-%COMP%]:hover:not(.gallery-groups__button--active){background:#eaeff5;cursor:pointer}"],changeDetection:0}),function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);i>3&&a&&Object.defineProperty(n,t,a)}([(0,r.l6)(d.Y.getActiveTags),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,c.c)],dt.prototype,"activeTags$",void 0);var Ye,D=function(o,n,t,l){var p,i=arguments.length,a=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,l);else for(var g=o.length-1;g>=0;g--)(p=o[g])&&(a=(i<3?p(a):i>3?p(n,t,a):p(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},A=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const ho=["sidenav"],_o=["content"],yo=o=>({"gallery--small":o}),fo=o=>({"gallery__filters--empty":o});function Co(o,n){1&o&&e.nrm(0,"app-gallery-source")}function bo(o,n){if(1&o&&(e.qex(0),e.nrm(1,"app-gallery-collections",18),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("actionMode",t.actionMode)}}function vo(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"app-gallery-clients",19),e.bIt("clientSelected",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.handleClientSelected(i))}),e.k0s(),e.bVm()}}function Mo(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-gallery-categories",21),e.bIt("categorySelected",function(i){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleCategorySelected(i))}),e.k0s()}}function To(o,n){if(1&o&&(e.qex(0),e.DNE(1,Mo,1,0,"app-gallery-categories",20),e.nI1(2,"async"),e.nI1(3,"async"),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,1,t.searchType$)===t.searchTypeEnum.Category||e.bMT(3,3,t.searchType$)===t.searchTypeEnum.Community)}}function ko(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"app-gallery-filters-loft",22),e.bIt("configChange",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.handleLoftConfigChange(i))}),e.k0s(),e.bVm()}}function So(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",23),e.nI1(1,"async"),e.j41(2,"button",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.scrollToTop())}),e.nrm(3,"app-icon",25),e.EFF(4," Back to Top "),e.k0s()()}if(2&o){const t=e.XpG();e.AVh("gallery__to-top--mobile",e.bMT(1,2,t.siteFooter$)===t.siteFooterType.Mobile)}}function Oo(o,n){1&o&&(e.j41(0,"div",9),e.nrm(1,"app-gallery-title"),e.k0s())}class F{constructor(n,t,l){this.changeDetectorRef=n,this.store=t,this.breakpointObserver=l,this.applicationEnum=V.c,this.contentTypeEnum=M.c,this.searchTypeEnum=f.n,this.siteFooterType=ge.v,this.galleryActionMode=N.g,this.horizontalBreakpoint=H.m,this.application=V.c.Studio,this.contentType=M.c.Bookmark,this.viewMode=S.P.Card,this.showSourcePicker=!1,this.lazyLoadThreshold=480,this.lazyLoadCount=12,this.actionMode=N.g.Explore,this.actionsEnabled=!0,this.selectBookmark=new e.bkB,this.bulkAction=new e.bkB,this.searchConfig=(0,Ue.ot)(this.store.select(d.Y.getSearchConfig)),this.category=(0,e.EWP)(()=>{if(this.searchConfig()?.type===f.n.Category)return(0,Ve.p7)(this.searchConfig().categoryId)}),this.ngUnsubscribe=new O.B,this.isSmall=!0,this.showScrollTo=!1,this.mobileCutoff=!1}ngOnInit(){this.initBreakpointObserver(),this.initSearchConfigObserver()}ngAfterViewInit(){this.store.select(d.Y.getSidenav).pipe((0,_.Q)(this.ngUnsubscribe)).subscribe(n=>{this.toggleSidenav(n.open&&n.enabled)}),this.initLazyLoadObserver(),this.initScrollObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initSearchConfigObserver(){this.searchConfig$.pipe((0,_.Q)(this.ngUnsubscribe),(0,G.p)(n=>null!=n),(0,K.F)((n,t)=>(0,j.isEqual)(n,t)),(0,Q.B)(100)).subscribe(n=>{if(this.contentType=this.store.selectSnapshot(d.Y.getSearchGroup),n.type===f.n.Category){const l=this.store.selectSnapshot(w.k.getUserLanguage),a=(0,Ve.QU)(l).find(p=>p.id===n.categoryId);this.tagCategory=a.tabTags}else this.tagCategory=null;const t=this.store.selectSnapshot(d.Y.getSearchOptions);if(this.store.dispatch(new y.w.SetSearchOptions({...t,offset:0})),this.breakpointObserver.isMatched("(max-width: 959px)")){const l=this.store.selectSnapshot(d.Y.getSidenav);this.store.dispatch(new y.w.SetSidenav({...l,open:!1}))}this.changeDetectorRef.markForCheck(),this.search()})}initBreakpointObserver(){this.breakpointObserver.observe("(max-width: 959px)").pipe((0,_.Q)(this.ngUnsubscribe)).subscribe(n=>{this.isSmall=n.matches;const t=this.store.selectSnapshot(d.Y.getSidenav);this.store.dispatch(new y.w.SetSidenav({...t,open:!this.isSmall})),this.store.dispatch(new y.w.SetViewMode(S.k)),this.changeDetectorRef.markForCheck()}),this.breakpointObserver.observe("(max-width: 540px)").pipe((0,_.Q)(this.ngUnsubscribe)).subscribe(n=>{this.mobileCutoff=n.matches})}initLazyLoadObserver(){(0,$.R)(this.content.getElementRef().nativeElement,"scroll").pipe((0,_.Q)(this.ngUnsubscribe),(0,Q.B)(50)).subscribe(()=>{const n=this.content.getElementRef().nativeElement;if(n.scrollHeight-(n.scrollTop+n.offsetHeight)<=this.lazyLoadThreshold){const l=this.store.selectSnapshot(d.Y.getSearchOptions);l.pageSize+=this.lazyLoadCount,this.store.dispatch(new y.w.SetSearchOptions(l))}})}initScrollObserver(){this.sidenavContainer.scrollable.elementScrolled().pipe((0,_.Q)(this.ngUnsubscribe),(0,_e.T)(n=>n.srcElement.scrollTop>window.innerHeight),(0,K.F)()).subscribe(n=>{this.showScrollTo=n,this.changeDetectorRef.markForCheck()})}handleSelect(n){this.selectBookmark.emit(n)}handleCategorySelected(n){this.store.dispatch(new y.w.SearchCategory(n))}handleClientSelected(n){if(h.c.application===V.c.Studio){const t=(0,R.bj)(T.O5,{...this.store.selectSnapshot(d.Y.getSearchConfig),directory:`client/${n}`});this.store.dispatch(new y.w.SetSearchConfig(t))}}handleFiltersChange(n){this.handleSelectedTagChange(n.group,n.tag)}handleSelectedTagChange(n,t){const l=this.store.selectSnapshot(d.Y.getActiveTags);l[n]=t,this.store.dispatch(new y.w.SetActiveTags(l))}handleLoftConfigChange(n){this.store.dispatch(new y.w.SetSearchConfig(n))}handleBulkAction(n){this.bulkAction.emit(n)}handleSort(n){const t=this.store.selectSnapshot(d.Y.getSearchOptions);t.sortBy=n,this.store.dispatch(new y.w.SetSearchOptions(t)),0===t.sortBy.fields.length&&this.store.dispatch(new y.w.SearchStudio)}toggleSidenav(n){this.sidenav.toggle(n)}search(){this.store.dispatch(new y.w.SearchStudio)}scrollToTop(){this.content.scrollTo({top:0,behavior:"smooth"})}}(Ye=F).\u0275fac=function(n){return new(n||Ye)(e.rXU(e.gRc),e.rXU(r.il),e.rXU(ne.QP))},Ye.\u0275cmp=e.VBU({type:Ye,selectors:[["app-gallery-container"]],viewQuery:function(n,t){if(1&n&&(e.GBs(m.US,7,m.US),e.GBs(ho,7,m.LG),e.GBs(_o,5,m.El)),2&n){let l;e.mGM(l=e.lsd())&&(t.sidenavContainer=l.first),e.mGM(l=e.lsd())&&(t.sidenav=l.first),e.mGM(l=e.lsd())&&(t.content=l.first)}},inputs:{application:"application",contentType:"contentType",viewMode:"viewMode",showSourcePicker:"showSourcePicker",lazyLoadThreshold:"lazyLoadThreshold",lazyLoadCount:"lazyLoadCount",actionMode:"actionMode",actionsEnabled:"actionsEnabled"},outputs:{selectBookmark:"selectBookmark",bulkAction:"bulkAction"},decls:39,vars:61,consts:()=>{let o;return o=$localize`:␟a34baa1282c78d04170353e19aaca50af32adf00␟2181154762165715522:Gallery`,[["sidenavContainer",""],["sidenav",""],["content",""],["role","region","aria-label",o,1,"gallery",3,"ngClass"],[1,"gallery__container"],[1,"gallery__sidenav",3,"autoFocus","disableClose","fixedInViewport","fixedTopGap","fixedBottomGap","position","opened","mode"],[4,"ngIf"],["class","gallery__to-top",3,"gallery__to-top--mobile",4,"ngIf"],[1,"gallery__content","theme-light"],[1,"gallery__title"],[1,"gallery__header"],[3,"bulkAction","sortChange"],[1,"gallery__filters",3,"ngClass"],[3,"selectedTagChange","viewMode"],[1,"gallery__groups"],[3,"tagCategory"],[1,"gallery__results"],[3,"selectBookmark","actionMode","actionsEnabled","viewMode","loading","results","checkedResults"],[3,"actionMode"],[3,"clientSelected"],[3,"categorySelected",4,"ngIf"],[3,"categorySelected"],[3,"configChange"],[1,"gallery__to-top"],["type","button","app-button","","buttonTheme","light","buttonType","info","buttonShape","rounded",3,"click"],["icon","arrow-circle-up",1,"mr-1"]]},template:function(n,t){if(1&n){const l=e.RV6();e.j41(0,"div",3)(1,"mat-sidenav-container",4,0)(3,"mat-sidenav",5,1),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.DNE(11,Co,1,0,"app-gallery-source",6)(12,bo,2,1,"ng-container",6)(13,vo,2,0,"ng-container",6)(14,To,4,5,"ng-container",6)(15,ko,2,0,"ng-container",6),e.nI1(16,"async"),e.k0s(),e.j41(17,"mat-sidenav-content",null,2),e.DNE(19,So,5,4,"div",7),e.j41(20,"div",8),e.DNE(21,Oo,2,0,"div",9),e.nI1(22,"async"),e.j41(23,"div",10)(24,"app-gallery-header",11),e.bIt("bulkAction",function(a){return e.eBV(l),e.Njj(t.handleBulkAction(a))})("sortChange",function(a){return e.eBV(l),e.Njj(t.handleSort(a))}),e.k0s()(),e.j41(25,"div",12),e.nI1(26,"async"),e.nI1(27,"async"),e.nI1(28,"async"),e.j41(29,"app-gallery-filters",13),e.nI1(30,"async"),e.nI1(31,"async"),e.bIt("selectedTagChange",function(a){return e.eBV(l),e.Njj(t.handleFiltersChange(a))}),e.k0s()(),e.j41(32,"div",14),e.nrm(33,"app-gallery-groups",15),e.k0s(),e.j41(34,"div",16)(35,"app-gallery-results",17),e.nI1(36,"async"),e.nI1(37,"async"),e.nI1(38,"async"),e.bIt("selectBookmark",function(a){return e.eBV(l),e.Njj(t.handleSelect(a))}),e.k0s()()()()()()}if(2&n){let l,i;e.Y8G("ngClass",e.eq3(57,yo,t.isSmall)),e.R7$(3),e.Y8G("autoFocus",!1)("disableClose",e.bMT(5,25,t.sideNav$).disableClose)("fixedInViewport",t.isSmall)("fixedTopGap",e.bMT(6,27,t.siteHeaderHeight$))("fixedBottomGap",e.bMT(7,29,t.siteFooter$)===t.siteFooterType.Mobile?e.bMT(8,31,t.siteFooterHeight$):0)("position","start")("opened",(null==(l=e.bMT(9,33,t.sideNav$))?null:l.open)&&(null==(l=e.bMT(10,35,t.sideNav$))?null:l.enabled))("mode",t.isSmall?"push":"side"),e.R7$(8),e.Y8G("ngIf",t.showSourcePicker),e.R7$(),e.Y8G("ngIf",t.contentType===t.contentTypeEnum.Bookmark),e.R7$(),e.Y8G("ngIf",t.contentType===t.contentTypeEnum.Internal),e.R7$(),e.Y8G("ngIf",t.contentType===t.contentTypeEnum.Module),e.R7$(),e.Y8G("ngIf",e.bMT(16,37,t.searchType$)===t.searchTypeEnum.Loft),e.R7$(4),e.Y8G("ngIf",t.showScrollTo),e.R7$(2),e.vxM(21,null!=(i=t.category())&&i.featured||e.bMT(22,39,t.horizontalBreakpoint$)>t.horizontalBreakpoint.Medium?21:-1),e.R7$(4),e.Y8G("ngClass",e.eq3(59,fo,(!1===e.bMT(26,41,t.hasFilters$)||!1===e.bMT(27,43,t.showFilters$))&&0===e.bMT(28,45,t.activeTagsCount$))),e.R7$(4),e.Y8G("viewMode",e.bMT(30,47,t.hasFilters$)&&e.bMT(31,49,t.showFilters$)&&!t.mobileCutoff?"expanded":"summary"),e.R7$(4),e.Y8G("tagCategory",t.tagCategory),e.R7$(2),e.Y8G("actionMode",t.actionMode)("actionsEnabled",t.actionsEnabled)("viewMode",t.viewMode)("loading",e.bMT(36,51,t.loading$))("results",e.bMT(37,53,t.results$))("checkedResults",e.bMT(38,55,t.checkedResults$))}},dependencies:[v.Q,C.YU,C.bT,m.LG,m.US,m.El,oe.R,me,xe,Xt,L,kn.E,U,ct,pt,co.N,dt,C.Jj],styles:["[_nghost-%COMP%]{width:100%}.gallery[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;inset:0}.gallery[_ngcontent-%COMP%]   .mat-sidenav-content[_ngcontent-%COMP%]{background:#fff}.gallery--small[_ngcontent-%COMP%]   .gallery__container[_ngcontent-%COMP%], .gallery__container[_ngcontent-%COMP%]{flex:1}.gallery__sidenav[_ngcontent-%COMP%]{width:260px;padding-top:12px;color:#1c2a3f}.gallery__content[_ngcontent-%COMP%]{border-left:1px solid #d7e0ea;width:100%;min-height:100%;max-width:1440px;display:flex;flex-direction:column}.gallery__header[_ngcontent-%COMP%]{flex:0 1 auto}.gallery__filters[_ngcontent-%COMP%]{flex:0 1 auto;padding-left:40px;padding-right:40px}.gallery__groups[_ngcontent-%COMP%]{padding-left:40px;padding-right:40px;flex:0 0 auto;max-height:48px;overflow-x:auto;white-space:nowrap;background-color:#fff}.gallery__results[_ngcontent-%COMP%]{flex:1 1 100%;padding:24px 42px 36px;overflow-y:hidden}.gallery__to-top[_ngcontent-%COMP%]{pointer-events:none;display:flex;justify-content:center;position:fixed;padding-bottom:12px;bottom:0;z-index:10;left:0;width:100%}.gallery__to-top--mobile[_ngcontent-%COMP%]{bottom:56px}.gallery__to-top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{pointer-events:initial}@media (max-width: 959px){.gallery__content[_ngcontent-%COMP%]{border-left:0}.gallery__sidenav[_ngcontent-%COMP%]{padding-top:0}.gallery__results[_ngcontent-%COMP%]{padding:24px 20px 36px;overflow-y:hidden}}"],data:{animation:[(0,x.hZ)("inFromBottom",[(0,x.kY)(":enter",[(0,x.iF)({transform:"translateY(100%)"}),(0,x.i0)("250ms ease-out",(0,x.iF)({transform:"*"}))]),(0,x.kY)(":leave",[(0,x.i0)("250ms ease-out",(0,x.iF)({transform:"translateX(100%)"}))])])]},changeDetection:0}),D([(0,r.l6)(d.Y.getFilteredResults),A("design:type",c.c)],F.prototype,"results$",void 0),D([(0,r.l6)(d.Y.getCheckedResults),A("design:type",c.c)],F.prototype,"checkedResults$",void 0),D([(0,r.l6)(d.Y.getLoading),A("design:type",c.c)],F.prototype,"loading$",void 0),D([(0,r.l6)(d.Y.getSearchConfig),A("design:type",c.c)],F.prototype,"searchConfig$",void 0),D([(0,r.l6)(d.Y.getSearchType),A("design:type",c.c)],F.prototype,"searchType$",void 0),D([(0,r.l6)(d.Y.getSearchOptions),A("design:type",c.c)],F.prototype,"searchOptions$",void 0),D([(0,r.l6)(d.Y.getActiveTags),A("design:type",c.c)],F.prototype,"activeTags$",void 0),D([(0,r.l6)(d.Y.getActiveTagsCount),A("design:type",c.c)],F.prototype,"activeTagsCount$",void 0),D([(0,r.l6)(d.Y.getHasFilters),A("design:type",c.c)],F.prototype,"hasFilters$",void 0),D([(0,r.l6)(d.Y.getSidenav),A("design:type",c.c)],F.prototype,"sideNav$",void 0),D([(0,r.l6)(d.Y.getShowFilters),A("design:type",c.c)],F.prototype,"showFilters$",void 0),D([(0,r.l6)(Y.W.getSiteFooter),A("design:type",c.c)],F.prototype,"siteFooter$",void 0),D([(0,r.l6)(Y.W.getSiteFooterHeight),A("design:type",c.c)],F.prototype,"siteFooterHeight$",void 0),D([(0,r.l6)(Y.W.getSiteHeaderHeight),A("design:type",c.c)],F.prototype,"siteHeaderHeight$",void 0),D([(0,r.l6)(d.Y.getBulkActionsAvailable),A("design:type",c.c)],F.prototype,"bulkActionsAvailable$",void 0),D([(0,r.l6)(d.Y.getBulkActionsActive),A("design:type",c.c)],F.prototype,"bulkActionsActive$",void 0),D([(0,r.l6)(te.V.getHorizontalBreakpoint),A("design:type",c.c)],F.prototype,"horizontalBreakpoint$",void 0)},17773:(ve,X,s)=>{s.d(X,{EM:()=>r,qg:()=>e,xM:()=>d});var e=function(O){return O.ExportCSV="Export CSV",O.AddToLibrary="Add to Library",O.Delete="Delete",O.Manage="Manage",O}(e||{});const r={[e.ExportCSV]:"exportCSVButton",[e.AddToLibrary]:"AddToTeamLibraryButton",[e.Delete]:"DeleteButton",[e.Manage]:"Manage"},d={[e.ExportCSV]:"file-csv",[e.AddToLibrary]:"plus",[e.Delete]:"minus",[e.Manage]:"folders"}},36569:(ve,X,s)=>{s.d(X,{q:()=>O});var e=s(60177),r=s(65763),S=s(12374),d=s(54438);let O=(()=>{var $;class c{}return($=c).\u0275fac=function(T){return new(T||$)},$.\u0275mod=d.$C({type:$}),$.\u0275inj=d.G2t({imports:[e.MD,r.rK.forFeature([S.z])]}),c})()},90856:(ve,X,s)=>{s.d(X,{$3:()=>O,G5:()=>d,NZ:()=>S,OS:()=>$,T_:()=>T,W1:()=>c,lZ:()=>V,lu:()=>y,oJ:()=>r});let r=(()=>{class m{constructor(G,K,Q){this.id=G,this.saveConfig=K,this.trimConfig=Q}}return m.type="[Modules] Save Module",m})(),S=(()=>{class m{constructor(G,K,Q=!1){this.id=G,this.story=K,this.statesDuplicated=Q}}return m.type="[Modules] Save Module Success",m})(),d=(()=>{class m{constructor(G){this.id=G}}return m.type="[Modules] Save Module Failure",m})(),O=(()=>{class m{constructor(G){this.id=G}}return m.type="[Modules] Duplicate Module Success",m})(),$=(()=>{class m{constructor(G){this.id=G}}return m.type="[Modules] Duplicate Module Failure",m})(),c=(()=>{class m{constructor(G){this.module=G}}return m.type="[Modules] Set Save Module",m})(),V=(()=>{class m{constructor(){}}return m.type="[Modules] Get Primary Categories",m})(),T=(()=>{class m{constructor(G){this.primaryCategory=G}}return m.type="[Modules] Get Secondary Categories",m})(),y=(()=>{class m{constructor(){}}return m.type="[Modules] Reset",m})()},12374:(ve,X,s)=>{s.d(X,{z:()=>z});var H,C,e=s(28407),r=s(65763),S=s(90856),d=s(84426),O=s(21894),$=s(97978),c=s(52597),V=s(94495),T=s(17766),y=s(15877),h=s(46104),m=s(15152),_=s(36110),G=s(39705),K=s(32914),Q=s(17365),de=s(22679),j=s(49204),R=s(65881),M=s(35939),f=s(65650),x=s(1580),N=s(57238),Y=s(82323),ge=s(21523),w=s(58832),Ve=s(40215),Ue=s(16606),te=s(54438),ne=function(se,b,k,u){var le,B=arguments.length,E=B<3?b:null===u?u=Object.getOwnPropertyDescriptor(b,k):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)E=Reflect.decorate(se,b,k,u);else for(var ue=se.length-1;ue>=0;ue--)(le=se[ue])&&(E=(B<3?le(E):B>3?le(b,k,E):le(b,k))||E);return B>3&&E&&Object.defineProperty(b,k,E),E},v=function(se,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(se,b)};const oe={primaryCategoryOptions:[],secondaryCategoryOptions:[],moduleExists:!1,saveModule:new class _e{},storyType:T.c.Module,saving:!1};let z=(C=H=class{constructor(b,k,u,B,E){this.store=b,this.serializeModuleService=k,this.modulesService=u,this.imagesService=B,this.storyService=E}static getSaveModule(b){return b.saveModule}static getPrimaryCategoryOptions(b){return(0,r.Mz)([C],k=>"read"===b?k.primaryCategoryOptions:k.primaryCategoryOptions.filter(u=>"exports"!==u))}static getSecondaryCategoryOptions(b){return b.secondaryCategoryOptions}static getSaving(b){return b.saving}saveModule(b,k){var u=this;return(0,e.A)(function*(){b.patchState({saving:!0});const B=k.saveConfig,E=k.trimConfig?k.trimConfig:new O.F,le=B.duplicate?k.saveConfig.namespaceMap:{},ue=u.store.selectSnapshot(V.N.getStoryChapters),ze=!1===B.replace,Oe=(0,R.S)(ue,ze);ze&&(yield(0,Ve._)(u.store.dispatch(new M.u.UpdateTweenParticleLookupChapters(Oe))));const ie=u.serializeModuleService.serialize(le,E,k.saveConfig.duplicate,u.store.selectSnapshot(de.t.getStory),u.store.selectSnapshot(V.N.getStoryChapters),Oe),Le=u.store.selectSnapshot(de.t.getStoryId);u.storyService.checkStoryIdChange(Le,k.id)&&u.storyService.addContentRecord(Le,ie.story);const me=u.store.selectSnapshot(ge.J.getSelectedBookmarkViewMode),Xe=(0,j.without)(ie.story.tags,w._.Content,w._.Quiz);me&&Xe.push(me),ie.story.tags=Xe;let Ge=(0,y.of)([]);const Qe=u.store.selectSnapshot(f.K.getRegisteredThumbnails),He=u.imagesService.saveChapterThumbnails(ie.story.chapters,Qe,(0,j.invert)(Oe));if(He.length&&(Ge=(0,h.p)(He)),Ge.pipe((0,m.j)(()=>b.patchState({saving:!1})),(0,_.T)(re=>{const ae=u.store.selectSnapshot(f.K.getRegisteredThumbnails);return re.forEach(ce=>{const Me=new N.R;Me.storyId=ie.story.moduleId,Me.chapterId=ce.chapterId,Me.urls={small:ce.uris.small,large:ce.uris.large},ae.set(ce.chapterId,Me);const Je=ie.story.chapters.findIndex(ye=>ye.id===ce.chapterId);Je>=0&&(ie.story.chapters[Je].thumbnails={...ce.uris})}),ae}),(0,G.M)(re=>{b.dispatch(new Y.W2(re))}),(0,K.n)(()=>u.modulesService.saveModule(ie.story,k.id))).subscribe(re=>{b.dispatch(re===c.d.Success?new S.NZ(k.id,ie.story,k.saveConfig.duplicate):new S.G5(k.id))}),B.duplicate){const re=[];Object.entries(le).forEach(([ae,ce])=>{re.push(u.modulesService.copyState(ae,ce))}),(0,h.p)(re).subscribe(ae=>{b.dispatch(new S.$3(k.id))},ae=>{b.dispatch(new S.OS(k.id))})}})()}setSaveModule(b,k){b.patchState({saveModule:{...k.module}})}getModulePrimaryCategories(b,k){this.modulesService.getPrimaryCategories().subscribe(u=>{b.patchState({primaryCategoryOptions:u})})}getModuleSecondaryCategories(b,k){this.modulesService.getSecondaryCategories(k.primaryCategory).subscribe(u=>{b.patchState({secondaryCategoryOptions:u})})}resetModules(b,k){(0,h.p)(this.modulesService.getPrimaryCategories(),this.modulesService.getSecondaryCategories("")).pipe((0,Q.s)(1)).subscribe(([u,B])=>{b.patchState({primaryCategoryOptions:u,secondaryCategoryOptions:B})})}},H.\u0275fac=function(b){return new(b||H)(te.KVO(r.il),te.KVO(d.g),te.KVO($.F),te.KVO(x.M),te.KVO(Ue.J))},H.\u0275prov=te.jDH({token:H,factory:H.\u0275fac}),H);ne([(0,r.rc)(S.oJ),v("design:type",Function),v("design:paramtypes",[Object,S.oJ]),v("design:returntype",Promise)],z.prototype,"saveModule",null),ne([(0,r.rc)(S.W1),v("design:type",Function),v("design:paramtypes",[Object,S.W1]),v("design:returntype",void 0)],z.prototype,"setSaveModule",null),ne([(0,r.rc)(S.lZ),v("design:type",Function),v("design:paramtypes",[Object,S.lZ]),v("design:returntype",void 0)],z.prototype,"getModulePrimaryCategories",null),ne([(0,r.rc)(S.T_),v("design:type",Function),v("design:paramtypes",[Object,S.T_]),v("design:returntype",void 0)],z.prototype,"getModuleSecondaryCategories",null),ne([(0,r.rc)(S.lu),v("design:type",Function),v("design:paramtypes",[Object,S.lu]),v("design:returntype",void 0)],z.prototype,"resetModules",null),ne([(0,r.MD)(),v("design:type",Function),v("design:paramtypes",[Object]),v("design:returntype",void 0)],z,"getSaveModule",null),ne([(0,r.MD)(),v("design:type",Function),v("design:paramtypes",[Object]),v("design:returntype",void 0)],z,"getSecondaryCategoryOptions",null),ne([(0,r.MD)(),v("design:type",Function),v("design:paramtypes",[Object]),v("design:returntype",void 0)],z,"getSaving",null),z=C=ne([(0,r.Uw)({name:"modules",defaults:oe}),v("design:paramtypes",[r.il,d.g,$.F,x.M,Ue.J])],z)},291:(ve,X,s)=>{s.d(X,{J:()=>j});var m,e=s(54438),r=s(65763),S=s(2573),d=s(38165),O=s(16823),$=s(11040),c=s(82542),V=s(21007),T=s(60177),y=s(26779),h=s(59115);function K(R,M){if(1&R&&(e.nrm(0,"img",8),e.nI1(1,"async"),e.nI1(2,"async")),2&R){let f;const x=e.XpG(2);e.Y8G("src",x.getLocaleFlag(e.bMT(1,2,x.userLocale$)),e.B4B),e.BMQ("alt",null==(f=e.bMT(2,4,x.userLocale$))?null:f.title)}}function Q(R,M){if(1&R&&(e.j41(0,"button",3)(1,"div",4),e.DNE(2,K,3,6,"img",5),e.j41(3,"span",6),e.EFF(4),e.nI1(5,"async"),e.k0s(),e.nrm(6,"app-icon",7),e.k0s()()),2&R){const f=e.XpG(),x=e.sdS(3);e.Y8G("buttonSize",f.buttonSize())("buttonTheme",f.buttonTheme())("buttonType",f.buttonType())("matMenuTriggerFor",x),e.BMQ("aria-label","Select your locale"),e.R7$(2),e.Y8G("ngIf",f.showFlag()),e.R7$(2),e.JRh(f.displayLocale(e.bMT(5,7,f.userLocale$)))}}function _e(R,M){if(1&R){const f=e.RV6();e.j41(0,"button",9),e.bIt("click",function(){const N=e.eBV(f).$implicit,Y=e.XpG();return e.Njj(Y.handleLocaleSelection(N))}),e.j41(1,"span",4),e.nrm(2,"img",8),e.EFF(3),e.nI1(4,"uppercase"),e.k0s()()}if(2&R){const f=M.$implicit,x=e.XpG();e.BMQ("aria-label",f.title)("data-test",x.localesDataTestMap[f.lang]),e.R7$(2),e.Y8G("src",x.getLocaleFlag(f),e.B4B),e.BMQ("alt",f.title),e.R7$(),e.Lme(" ",f.title," (",e.bMT(4,6,f.lang),") ")}}var de=function(R){return R.Full="full",R.Title="title",R.Lang="lang",R}(de||{});class j{constructor(M){this.store=M,this.locales=$.IB,this.localesDataTestMap=$.A8,this.buttonType=(0,e.hFB)("default"),this.buttonTheme=(0,e.hFB)(c.P.Dark),this.buttonSize=(0,e.hFB)("md"),this.localeFormat=(0,e.hFB)(de.Full),this.showFlag=(0,e.hFB)(!0)}handleLocaleSelection(M){this.store.selectSnapshot(O.k.getUserLocale)!==M&&this.store.dispatch(new d.aD(M,!0))}getLocaleFlag(M){return`/assets/images/flags/${M.country}.svg`}displayLocale(M){switch(this.localeFormat()){case de.Full:return`${M.title} (${M.lang})`;case de.Title:return M.title;case de.Lang:return M.lang}}}(m=j).\u0275fac=function(M){return new(M||m)(e.rXU(r.il))},m.\u0275cmp=e.VBU({type:m,selectors:[["app-locales"]],inputs:{buttonType:[e.Mj6.SignalBased,"buttonType"],buttonTheme:[e.Mj6.SignalBased,"buttonTheme"],buttonSize:[e.Mj6.SignalBased,"buttonSize"],localeFormat:[e.Mj6.SignalBased,"localeFormat"],showFlag:[e.Mj6.SignalBased,"showFlag"]},decls:5,vars:4,consts:[["localeOptions","matMenu"],["app-button","",3,"buttonSize","buttonTheme","buttonType","matMenuTriggerFor",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["app-button","",3,"buttonSize","buttonTheme","buttonType","matMenuTriggerFor"],[1,"flex","items-center"],["class","mr-2",3,"src",4,"ngIf"],[1,"font-semibold"],["icon","caret-down",1,"ml-1"],[1,"mr-2",3,"src"],["mat-menu-item","",3,"click"]],template:function(M,f){1&M&&(e.DNE(0,Q,7,9,"button",1),e.nI1(1,"async"),e.j41(2,"mat-menu",null,0),e.DNE(4,_e,5,8,"button",2),e.k0s()),2&M&&(e.Y8G("ngIf",e.bMT(1,2,f.userLocale$)),e.R7$(4),e.Y8G("ngForOf",f.locales))},dependencies:[V.Q,T.Sq,T.bT,y.R,h.kk,h.fb,h.Cp,T.Jj,T.Pc],changeDetection:0}),function(R,M,f,x){var ge,N=arguments.length,Y=N<3?M:null===x?x=Object.getOwnPropertyDescriptor(M,f):x;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Y=Reflect.decorate(R,M,f,x);else for(var w=R.length-1;w>=0;w--)(ge=R[w])&&(Y=(N<3?ge(Y):N>3?ge(M,f,Y):ge(M,f))||Y);N>3&&Y&&Object.defineProperty(M,f,Y)}([(0,r.l6)(O.k.getUserLocale),function(R,M){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",M)}(0,S.c)],j.prototype,"userLocale$",void 0)},88041:(ve,X,s)=>{s.d(X,{K:()=>V});var e=s(54438),r=s(21007),S=s(60177),d=s(26779),O=s(59115);function $(T,y){if(1&T&&(e.j41(0,"button",3)(1,"span",4)(2,"span",5)(3,"span",6),e.EFF(4,"Sort:"),e.k0s(),e.EFF(5),e.k0s(),e.nrm(6,"app-icon",7),e.k0s()()),2&T){const h=e.XpG(),m=e.sdS(2);e.Y8G("buttonSize",h.buttonSize())("uppercase",!1)("matMenuTriggerFor",m),e.BMQ("aria-label",h.sortLabel()),e.R7$(5),e.JRh(h.sort().label)}}function c(T,y){if(1&T){const h=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){const _=e.eBV(h).$implicit,G=e.XpG();return e.Njj(G.handleSort(_))}),e.EFF(1),e.k0s()}if(2&T){const h=y.$implicit;e.BMQ("data-test-value",h.dataTest)("aria-label","Sort by "+h.label),e.R7$(),e.SpI(" ",h.label," ")}}let V=(()=>{var T;class y{constructor(){this.sort=(0,e.hFB)(),this.sortOptions=(0,e.hFB)([]),this.sortLabel=(0,e.hFB)(),this.sortChange=(0,e.CGW)(),this.buttonSize=(0,e.hFB)()}handleSort(m){this.sortChange.emit(m)}}return(T=y).\u0275fac=function(m){return new(m||T)},T.\u0275cmp=e.VBU({type:T,selectors:[["app-sort"]],inputs:{sort:[e.Mj6.SignalBased,"sort"],sortOptions:[e.Mj6.SignalBased,"sortOptions"],sortLabel:[e.Mj6.SignalBased,"sortLabel"],buttonSize:[e.Mj6.SignalBased,"buttonSize"]},outputs:{sortChange:"sortChange"},decls:4,vars:2,consts:[["sortActions","matMenu"],["app-button","","buttonTheme","light","data-test","gallerySortBy",3,"buttonSize","uppercase","matMenuTriggerFor",4,"ngIf"],["mat-menu-item","","data-test","gallerySortByItem",3,"click",4,"ngFor","ngForOf"],["app-button","","buttonTheme","light","data-test","gallerySortBy",3,"buttonSize","uppercase","matMenuTriggerFor"],[1,"whitespace-nowrap"],[1,"font-semibold"],[1,"hidden","mr-1","sm:inline-block"],["icon","caret-down",1,"ml-1"],["mat-menu-item","","data-test","gallerySortByItem",3,"click"]],template:function(m,_){1&m&&(e.DNE(0,$,7,5,"button",1),e.j41(1,"mat-menu",null,0),e.DNE(3,c,2,3,"button",2),e.k0s()),2&m&&(e.Y8G("ngIf",_.sort()),e.R7$(3),e.Y8G("ngForOf",_.sortOptions()))},dependencies:[r.Q,S.Sq,S.bT,d.R,O.kk,O.fb,O.Cp],changeDetection:0}),y})()}}]);