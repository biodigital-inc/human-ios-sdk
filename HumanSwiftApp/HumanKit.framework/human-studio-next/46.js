"use strict";(self.webpackChunkhuman_studio_next=self.webpackChunkhuman_studio_next||[]).push([[46],{88046:(ce,ie,c)=>{c.r(ie),c.d(ie,{ViewInternalModule:()=>Mg});var p=c(60177),L=c(18617),V=c(76549),U=c(11818),S=c(39685),W=c(89511),_e=c(16515),K=c(72026),ne=c(73845),j=c(35286),G=c(45189),l=c(65763),we=c(82192),e=c(54438);let $e=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.MD,K.o]}),n})();var k=c(46374),Se=c(6049),se=c(42887),Ee=c(59162),F=c(42617),H=c(89417),At=c(21604),A=c(10381),E=c(18824),oe=c(90556),w=c(78696);let ue=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.MD,G.G,U.C,W.h,K.o,S.y,w.H,H.X1,F.c,Ee.M]}),n})();var he=c(38645);const fe=[];let Ce=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[he.iI.forChild(fe),he.iI]}),n})();var m=c(26463),We=c(5584);let Fe=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.MD,L.Pd,G.G]}),n})(),ge=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.MD,L.Pd,U.C,G.G,_e.x,K.o,We.d,H.YN,Fe,Ee.M,At.G]}),n})();var T=c(51640),et=c(64218);let Bt=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.MD,K.o,et.H,U.C]}),n})();var tt=c(37710);let lt=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[l.rK.forFeature([tt.S]),p.MD]}),n})();var He=c(28203),it=c(36860),Ie=c(86600),$=c(85052);const be=["knob"],Te=["valueIndicatorContainer"];function jt(o,n){if(1&o&&(e.j41(0,"div",2,1)(2,"div",5)(3,"span",6),e.EFF(4),e.k0s()()()),2&o){const t=e.XpG();e.R7$(4),e.JRh(t.valueIndicatorText)}}const ze=["trackActive"],v=["*"];function X(o,n){if(1&o&&e.nrm(0,"div"),2&o){const t=n.$implicit,i=n.$index,_=e.XpG(3);e.HbH(0===t?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),e.xc7("transform",_._calcTickMarkTransform(i))}}function ae(o,n){if(1&o&&e.Z7z(0,X,1,4,"div",8,e.Vm6),2&o){const t=e.XpG(2);e.Dyx(t._tickMarks)}}function Xe(o,n){if(1&o&&(e.j41(0,"div",6,1),e.DNE(2,ae,2,0),e.k0s()),2&o){const t=e.XpG();e.R7$(2),e.vxM(2,t._cachedWidth?2:-1)}}function St(o,n){if(1&o&&e.nrm(0,"mat-slider-visual-thumb",7),2&o){const t=e.XpG();e.Y8G("discrete",t.discrete)("thumbPosition",1)("valueIndicatorText",t.startValueIndicatorText)}}var N=function(o){return o[o.START=1]="START",o[o.END=2]="END",o}(N||{}),Qe=function(o){return o[o.ACTIVE=0]="ACTIVE",o[o.INACTIVE=1]="INACTIVE",o}(Qe||{});const Me=new e.nKC("_MatSlider"),Y=new e.nKC("_MatSliderThumb"),xe=new e.nKC("_MatSliderRangeThumb"),ct=new e.nKC("_MatSliderVisualThumb");let nt=(()=>{var o;class n{constructor(i,_,s,a){this._cdr=i,this._ngZone=_,this._slider=a,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._platform=(0,e.WQX)(it.OD),this._onPointerMove=r=>{if(this._sliderInput._isFocused)return;const u=this._hostElement.getBoundingClientRect(),f=this._slider._isCursorOnSliderThumb(r,u);this._isHovered=f,f?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=r=>{0===r.button&&(this._isActive=!0,this._showActiveRipple())},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()},this._hostElement=s.nativeElement}ngAfterViewInit(){this._ripple.radius=24,this._sliderInput=this._slider._getInput(this.thumbPosition),this._sliderInputEl=this._sliderInput._hostElement;const i=this._sliderInputEl;this._ngZone.runOutsideAngular(()=>{i.addEventListener("pointermove",this._onPointerMove),i.addEventListener("pointerdown",this._onDragStart),i.addEventListener("pointerup",this._onDragEnd),i.addEventListener("pointerleave",this._onMouseLeave),i.addEventListener("focus",this._onFocus),i.addEventListener("blur",this._onBlur)})}ngOnDestroy(){const i=this._sliderInputEl;i&&(i.removeEventListener("pointermove",this._onPointerMove),i.removeEventListener("pointerdown",this._onDragStart),i.removeEventListener("pointerup",this._onDragEnd),i.removeEventListener("pointerleave",this._onMouseLeave),i.removeEventListener("focus",this._onFocus),i.removeEventListener("blur",this._onBlur))}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(i){return i?.state===Ie.Ex.FADING_IN||i?.state===Ie.Ex.VISIBLE}_showRipple(i,_){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===N.START?N.END:N.START)._showValueIndicator(),!this._slider._globalRippleOptions?.disabled||_))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:i,centered:!0,persistent:!0})}_hideRipple(i){if(i?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();const _=this._getSibling();_._isShowingAnyRipple()||(this._hideValueIndicator(),_._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===N.START?N.END:N.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(e.gRc),e.rXU(e.SKi),e.rXU(e.aKT),e.rXU(Me))},o.\u0275cmp=e.VBU({type:o,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(i,_){if(1&i&&(e.GBs(Ie.r6,5),e.GBs(be,5),e.GBs(Te,5)),2&i){let s;e.mGM(s=e.lsd())&&(_._ripple=s.first),e.mGM(s=e.lsd())&&(_._knob=s.first),e.mGM(s=e.lsd())&&(_._valueIndicatorContainer=s.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},standalone:!0,features:[e.Jv_([{provide:ct,useExisting:o}]),e.aNF],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(i,_){1&i&&(e.DNE(0,jt,5,1,"div",2),e.nrm(1,"div",3,0)(3,"div",4)),2&i&&(e.vxM(0,_.discrete?0:-1),e.R7$(3),e.Y8G("matRippleDisabled",!0))},dependencies:[Ie.r6],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0}),n})(),Tt=(()=>{var o;class n{get disabled(){return this._disabled}set disabled(i){this._disabled=i;const _=this._getInput(N.END),s=this._getInput(N.START);_&&(_.disabled=this._disabled),s&&(s.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(i){this._discrete=i,this._updateValueIndicatorUIs()}get min(){return this._min}set min(i){const _=isNaN(i)?this._min:i;this._min!==_&&this._updateMin(_)}_updateMin(i){const _=this._min;this._min=i,this._isRange?this._updateMinRange({old:_,new:i}):this._updateMinNonRange(i),this._onMinMaxOrStepChange()}_updateMinRange(i){const _=this._getInput(N.END),s=this._getInput(N.START),a=_.value,r=s.value;s.min=i.new,_.min=Math.max(i.new,s.value),s.max=Math.min(_.max,_.value),s._updateWidthInactive(),_._updateWidthInactive(),i.new<i.old?this._onTranslateXChangeBySideEffect(_,s):this._onTranslateXChangeBySideEffect(s,_),a!==_.value&&this._onValueChange(_),r!==s.value&&this._onValueChange(s)}_updateMinNonRange(i){const _=this._getInput(N.END);if(_){const s=_.value;_.min=i,_._updateThumbUIByValue(),this._updateTrackUI(_),s!==_.value&&this._onValueChange(_)}}get max(){return this._max}set max(i){const _=isNaN(i)?this._max:i;this._max!==_&&this._updateMax(_)}_updateMax(i){const _=this._max;this._max=i,this._isRange?this._updateMaxRange({old:_,new:i}):this._updateMaxNonRange(i),this._onMinMaxOrStepChange()}_updateMaxRange(i){const _=this._getInput(N.END),s=this._getInput(N.START),a=_.value,r=s.value;_.max=i.new,s.max=Math.min(i.new,_.value),_.min=s.value,_._updateWidthInactive(),s._updateWidthInactive(),i.new>i.old?this._onTranslateXChangeBySideEffect(s,_):this._onTranslateXChangeBySideEffect(_,s),a!==_.value&&this._onValueChange(_),r!==s.value&&this._onValueChange(s)}_updateMaxNonRange(i){const _=this._getInput(N.END);if(_){const s=_.value;_.max=i,_._updateThumbUIByValue(),this._updateTrackUI(_),s!==_.value&&this._onValueChange(_)}}get step(){return this._step}set step(i){const _=isNaN(i)?this._step:i;this._step!==_&&this._updateStep(_)}_updateStep(i){this._step=i,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){const i=this._getInput(N.END),_=this._getInput(N.START),s=i.value,a=_.value,r=_.value;i.min=this._min,_.max=this._max,i.step=this._step,_.step=this._step,this._platform.SAFARI&&(i.value=i.value,_.value=_.value),i.min=Math.max(this._min,_.value),_.max=Math.min(this._max,i.value),_._updateWidthInactive(),i._updateWidthInactive(),i.value<r?this._onTranslateXChangeBySideEffect(_,i):this._onTranslateXChangeBySideEffect(i,_),s!==i.value&&this._onValueChange(i),a!==_.value&&this._onValueChange(_)}_updateStepNonRange(){const i=this._getInput(N.END);if(i){const _=i.value;i.step=this._step,this._platform.SAFARI&&(i.value=i.value),i._updateThumbUIByValue(),_!==i.value&&this._onValueChange(i)}}constructor(i,_,s,a,r,u){this._ngZone=i,this._cdr=_,this._elementRef=s,this._dir=a,this._globalRippleOptions=r,this._disabled=!1,this._discrete=!1,this.showTickMarks=!1,this._min=0,this.disableRipple=!1,this._max=100,this._step=1,this.displayWith=f=>`${f}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._platform=(0,e.WQX)(it.OD),this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations="NoopAnimations"===u,this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl="rtl"===this._dir.value}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();const i=this._getInput(N.END),_=this._getInput(N.START);this._isRange=!!i&&!!_,this._cdr.detectChanges();const s=this._getThumb(N.END);this._rippleRadius=s._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(i,_):this._initUINonRange(i),this._updateTrackUI(i),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(i){i.initProps(),i.initUI(),this._updateValueIndicatorUI(i),this._hasViewInitialized=!0,i._updateThumbUIByValue()}_initUIRange(i,_){i.initProps(),i.initUI(),_.initProps(),_.initUI(),i._updateMinMax(),_._updateMinMax(),i._updateStaticStyles(),_._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,i._updateThumbUIByValue(),_._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl="rtl"===this._dir.value,this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){const i=this._getInput(N.END),_=this._getInput(N.START);i._setIsLeftThumb(),_._setIsLeftThumb(),i.translateX=i._calcTranslateXByValue(),_.translateX=_._calcTranslateXByValue(),i._updateStaticStyles(),_._updateStaticStyles(),i._updateWidthInactive(),_._updateWidthInactive(),i._updateThumbUIByValue(),_._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(N.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(N.START)._isActive||this._getThumb(N.END)._isActive}_getValue(i=N.END){const _=this._getInput(i);return _?_.value:this.min}_skipUpdate(){return!(!this._getInput(N.START)?._skipUIUpdate&&!this._getInput(N.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(i){const _=this._trackActive.nativeElement.style;_.left=i.left,_.right=i.right,_.transformOrigin=i.transformOrigin,_.transform=i.transform}_calcTickMarkTransform(i){return`translateX(${i*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(i){this._hasViewInitialized&&(this._updateThumbUI(i),this._updateTrackUI(i),this._updateOverlappingThumbUI(i))}_onTranslateXChangeBySideEffect(i,_){this._hasViewInitialized&&(i._updateThumbUIByValue(),_._updateThumbUIByValue())}_onValueChange(i){this._hasViewInitialized&&(this._updateValueIndicatorUI(i),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){const i=this._getInput(N.END),_=this._getInput(N.START);i._updateThumbUIByValue(),_._updateThumbUIByValue(),i._updateStaticStyles(),_._updateStaticStyles(),i._updateMinMax(),_._updateMinMax(),i._updateWidthInactive(),_._updateWidthInactive()}else{const i=this._getInput(N.END);i&&i._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){const i=this._getInput(N.START),_=this._getInput(N.END);return!(!i||!_)&&_.translateX-i.translateX<20}_updateOverlappingThumbClassNames(i){const _=i.getSibling(),s=this._getThumb(i.thumbPosition);this._getThumb(_.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),s._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(i){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(i))}_updateThumbUI(i){this._skipUpdate()||(this._getThumb(i.thumbPosition===N.END?N.END:N.START)._hostElement.style.transform=`translateX(${i.translateX}px)`)}_updateValueIndicatorUI(i){if(this._skipUpdate())return;const _=this.displayWith(i.value);if(this._hasViewInitialized?i._valuetext.set(_):i._hostElement.setAttribute("aria-valuetext",_),this.discrete){i.thumbPosition===N.START?this.startValueIndicatorText=_:this.endValueIndicatorText=_;const s=this._getThumb(i.thumbPosition);_.length<3?s._hostElement.classList.add("mdc-slider__thumb--short-value"):s._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){const i=this._getInput(N.END),_=this._getInput(N.START);i&&this._updateValueIndicatorUI(i),_&&this._updateValueIndicatorUI(_)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;const i=this._step&&this._step>0?this._step:1,s=(Math.floor(this.max/i)*i-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*s-6}_updateTrackUI(i){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(i):this._updateTrackUINonRange(i))}_updateTrackUIRange(i){const _=i.getSibling();if(!_||!this._cachedWidth)return;const s=Math.abs(_.translateX-i.translateX)/this._cachedWidth;this._setTrackActiveStyles(i._isLeftThumb&&this._cachedWidth?{left:"auto",right:this._cachedWidth-_.translateX+"px",transformOrigin:"right",transform:`scaleX(${s})`}:{left:`${_.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${s})`})}_updateTrackUINonRange(i){this._setTrackActiveStyles(this._isRtl?{left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-i.fillPercentage})`}:{left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${i.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||void 0===this.step||void 0===this.min||void 0===this.max)return;const i=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(i):this._updateTickMarkUINonRange(i),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(i){const _=this._getValue();let s=Math.max(Math.floor((_-this.min)/i),0),a=Math.max(Math.floor((this.max-_)/i),0);this._isRtl?s++:a++,this._tickMarks=Array(s).fill(Qe.ACTIVE).concat(Array(a).fill(Qe.INACTIVE))}_updateTickMarkUIRange(i){const _=this._getValue(),s=this._getValue(N.START),a=Math.max(Math.floor((s-this.min)/i),0),r=Math.max(Math.floor((_-s)/i)+1,0),u=Math.max(Math.floor((this.max-_)/i),0);this._tickMarks=Array(a).fill(Qe.INACTIVE).concat(Array(r).fill(Qe.ACTIVE),Array(u).fill(Qe.INACTIVE))}_getInput(i){return i===N.END&&this._input?this._input:this._inputs?.length?i===N.START?this._inputs.first:this._inputs.last:void 0}_getThumb(i){return i===N.END?this._thumbs?.last:this._thumbs?.first}_setTransition(i){this._hasAnimation=!this._platform.IOS&&i&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(i,_){const s=_.width/2,f=i.clientY-(_.y+s);return Math.pow(i.clientX-(_.x+s),2)+Math.pow(f,2)<Math.pow(s,2)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(e.SKi),e.rXU(e.gRc),e.rXU(e.aKT),e.rXU(He.dS,8),e.rXU(Ie.$E,8),e.rXU(e.bc$,8))},o.\u0275cmp=e.VBU({type:o,selectors:[["mat-slider"]],contentQueries:function(i,_,s){if(1&i&&(e.wni(s,Y,5),e.wni(s,xe,4)),2&i){let a;e.mGM(a=e.lsd())&&(_._input=a.first),e.mGM(a=e.lsd())&&(_._inputs=a)}},viewQuery:function(i,_){if(1&i&&(e.GBs(ze,5),e.GBs(ct,5)),2&i){let s;e.mGM(s=e.lsd())&&(_._trackActive=s.first),e.mGM(s=e.lsd())&&(_._thumbs=s)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(i,_){2&i&&(e.HbH("mat-"+(_.color||"primary")),e.AVh("mdc-slider--range",_._isRange)("mdc-slider--disabled",_.disabled)("mdc-slider--discrete",_.discrete)("mdc-slider--tick-marks",_.showTickMarks)("_mat-animation-noopable",_._noopAnimations))},inputs:{disabled:[e.Mj6.HasDecoratorInputTransform,"disabled","disabled",e.L39],discrete:[e.Mj6.HasDecoratorInputTransform,"discrete","discrete",e.L39],showTickMarks:[e.Mj6.HasDecoratorInputTransform,"showTickMarks","showTickMarks",e.L39],min:[e.Mj6.HasDecoratorInputTransform,"min","min",e.Udg],color:"color",disableRipple:[e.Mj6.HasDecoratorInputTransform,"disableRipple","disableRipple",e.L39],max:[e.Mj6.HasDecoratorInputTransform,"max","max",e.Udg],step:[e.Mj6.HasDecoratorInputTransform,"step","step",e.Udg],displayWith:"displayWith"},exportAs:["matSlider"],standalone:!0,features:[e.Jv_([{provide:Me,useExisting:o}]),e.GFd,e.aNF],ngContentSelectors:v,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(i,_){1&i&&(e.NAR(),e.SdG(0),e.j41(1,"div",2),e.nrm(2,"div",3),e.j41(3,"div",4),e.nrm(4,"div",5,0),e.k0s(),e.DNE(6,Xe,3,1,"div",6),e.k0s(),e.DNE(7,St,1,3,"mat-slider-visual-thumb",7),e.nrm(8,"mat-slider-visual-thumb",7)),2&i&&(e.R7$(6),e.vxM(6,_.showTickMarks?6:-1),e.R7$(),e.vxM(7,_._isRange?7:-1),e.R7$(),e.Y8G("discrete",_.discrete)("thumbPosition",2)("valueIndicatorText",_.endValueIndicatorText))},dependencies:[nt],styles:['.mdc-slider{cursor:pointer;height:48px;margin:0 24px;position:relative;touch-action:pan-y}.mdc-slider .mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%}.mdc-slider .mdc-slider__track--active,.mdc-slider .mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider .mdc-slider__track--active{overflow:hidden}.mdc-slider .mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;-webkit-transform-origin:left;transform-origin:left}[dir=rtl] .mdc-slider .mdc-slider__track--active_fill,.mdc-slider .mdc-slider__track--active_fill[dir=rtl]{-webkit-transform-origin:right;transform-origin:right}.mdc-slider .mdc-slider__track--inactive{left:0;top:0}.mdc-slider .mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider .mdc-slider__value-indicator-container{bottom:44px;left:50%;left:var(--slider-value-indicator-container-left, 50%);pointer-events:none;position:absolute;right:var(--slider-value-indicator-container-right);transform:translateX(-50%);transform:var(--slider-value-indicator-container-transform, translateX(-50%))}.mdc-slider .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0.4, 0, 1, 1);align-items:center;border-radius:4px;display:flex;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom}.mdc-slider .mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;left:var(--slider-value-indicator-caret-left, 50%);position:absolute;right:var(--slider-value-indicator-caret-right);transform:translateX(-50%);transform:var(--slider-value-indicator-caret-transform, translateX(-50%));width:0}.mdc-slider .mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}@media(prefers-reduced-motion){.mdc-slider .mdc-slider__value-indicator,.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:none}}.mdc-slider .mdc-slider__thumb{display:flex;left:-24px;outline:none;position:absolute;user-select:none;height:48px;width:48px}.mdc-slider .mdc-slider__thumb--top{z-index:1}.mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-style:solid;border-width:1px;box-sizing:content-box}.mdc-slider .mdc-slider__thumb-knob{box-sizing:border-box;left:50%;position:absolute;top:50%;transform:translate(-50%, -50%)}.mdc-slider .mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:transform 80ms ease}@media(prefers-reduced-motion){.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:none}}.mdc-slider--disabled{cursor:auto}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;pointer-events:none;position:absolute;top:2px;width:44px}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;margin-left:8px;margin-right:8px;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider .mdc-slider__thumb-knob{background-color:var(--mdc-slider-handle-color);border-color:var(--mdc-slider-handle-color)}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color);border-color:var(--mdc-slider-disabled-handle-color)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb::before,.mat-mdc-slider .mdc-slider__thumb::after{background-color:var(--mdc-slider-handle-color)}.mat-mdc-slider .mdc-slider__thumb:hover::before,.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-surface--hover::before{opacity:var(--mdc-ripple-hover-opacity)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded--background-focused::before,.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:var(--mdc-ripple-focus-opacity)}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:var(--mdc-ripple-press-opacity)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity)}.mat-mdc-slider .mdc-slider__track--active_fill{border-color:var(--mdc-slider-active-track-color)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color)}.mat-mdc-slider .mdc-slider__track--inactive{background-color:var(--mdc-slider-inactive-track-color);opacity:.24}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color);opacity:.24}.mat-mdc-slider .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color);opacity:var(--mdc-slider-with-tick-marks-active-container-opacity)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color);opacity:var(--mdc-slider-with-tick-marks-active-container-opacity)}.mat-mdc-slider .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-inactive-container-color);opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-disabled-container-color);opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity)}.mat-mdc-slider .mdc-slider__value-indicator{background-color:var(--mdc-slider-label-container-color);opacity:1}.mat-mdc-slider .mdc-slider__value-indicator::before{border-top-color:var(--mdc-slider-label-container-color)}.mat-mdc-slider .mdc-slider__value-indicator{color:var(--mdc-slider-label-label-text-color)}.mat-mdc-slider .mdc-slider__track{height:var(--mdc-slider-inactive-track-height)}.mat-mdc-slider .mdc-slider__track--active{height:var(--mdc-slider-active-track-height);top:calc((var(--mdc-slider-inactive-track-height) - var(--mdc-slider-active-track-height)) / 2)}.mat-mdc-slider .mdc-slider__track--active_fill{border-top-width:var(--mdc-slider-active-track-height)}.mat-mdc-slider .mdc-slider__track--inactive{height:var(--mdc-slider-inactive-track-height)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{height:var(--mdc-slider-with-tick-marks-container-size);width:var(--mdc-slider-with-tick-marks-container-size)}.mat-mdc-slider.mdc-slider--disabled{opacity:0.38}.mat-mdc-slider .mdc-slider__value-indicator-text{letter-spacing:var(--mdc-slider-label-label-text-tracking);font-size:var(--mdc-slider-label-label-text-size);font-family:var(--mdc-slider-label-label-text-font);font-weight:var(--mdc-slider-label-label-text-weight);line-height:var(--mdc-slider-label-label-text-line-height)}.mat-mdc-slider .mdc-slider__track--active{border-radius:var(--mdc-slider-active-track-shape)}.mat-mdc-slider .mdc-slider__track--inactive{border-radius:var(--mdc-slider-inactive-track-shape)}.mat-mdc-slider .mdc-slider__thumb-knob{border-radius:var(--mdc-slider-handle-shape);width:var(--mdc-slider-handle-width);height:var(--mdc-slider-handle-height);border-style:solid;border-width:calc(var(--mdc-slider-handle-height) / 2) calc(var(--mdc-slider-handle-width) / 2)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{border-radius:var(--mdc-slider-with-tick-marks-container-shape)}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color);border-color:var(--mdc-slider-hover-handle-color)}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color);border-color:var(--mdc-slider-focus-handle-color)}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:var(--mdc-slider-with-overlap-handle-outline-color);border-width:var(--mdc-slider-with-overlap-handle-outline-width)}.mat-mdc-slider .mdc-slider__thumb-knob{box-shadow:var(--mdc-slider-handle-elevation)}.mat-mdc-slider .mdc-slider__input{box-sizing:content-box;pointer-events:auto}.mat-mdc-slider .mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mat-mdc-slider .mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mdc-slider__track,.mat-mdc-slider .mdc-slider__thumb{pointer-events:none}.mat-mdc-slider .mdc-slider__value-indicator-container{transform:var(--mat-slider-value-indicator-container-transform)}.mat-mdc-slider .mdc-slider__value-indicator{width:var(--mat-slider-value-indicator-width);height:var(--mat-slider-value-indicator-height);padding:var(--mat-slider-value-indicator-padding);opacity:var(--mat-slider-value-indicator-opacity);border-radius:var(--mat-slider-value-indicator-border-radius)}.mat-mdc-slider .mdc-slider__value-indicator::before{display:var(--mat-slider-value-indicator-caret-display)}.mat-mdc-slider .mdc-slider__value-indicator-text{width:var(--mat-slider-value-indicator-width);transform:var(--mat-slider-value-indicator-text-transform)}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slider .mdc-slider__value-indicator{word-break:normal}.mat-mdc-slider .mdc-slider__value-indicator-text{text-align:center}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),n})();const Pn={provide:H.kq,useExisting:(0,e.Rfq)(()=>Ft),multi:!0};let Ft=(()=>{var o;class n{get value(){return(0,e.Udg)(this._hostElement.value,0)}set value(i){const _=(i=isNaN(i)?0:i)+"";this._hasSetInitialValue?this._isActive||this._setValue(_):this._initialValue=_}_setValue(i){this._hostElement.value=i,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(void 0===this._translateX&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(i){this._translateX=i}get min(){return(0,e.Udg)(this._hostElement.min,0)}set min(i){this._hostElement.min=i+"",this._cdr.detectChanges()}get max(){return(0,e.Udg)(this._hostElement.max,0)}set max(i){this._hostElement.max=i+"",this._cdr.detectChanges()}get step(){return(0,e.Udg)(this._hostElement.step,0)}set step(i){this._hostElement.step=i+"",this._cdr.detectChanges()}get disabled(){return(0,e.L39)(this._hostElement.disabled)}set disabled(i){this._hostElement.disabled=i,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?0===this._translateX?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(i){this._isFocused=i}constructor(i,_,s,a){this._ngZone=i,this._elementRef=_,this._cdr=s,this._slider=a,this.valueChange=new e.bkB,this.dragStart=new e.bkB,this.dragEnd=new e.bkB,this.thumbPosition=N.END,this._valuetext=(0,e.vPA)(""),this._knobRadius=8,this._tickMarkOffset=3,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new $.B,this._skipUIUpdate=!1,this._onTouchedFn=()=>{},this._isControlInitialized=!1,this._platform=(0,e.WQX)(it.OD),this._hostElement=_.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,void 0===this._initialValue?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(i){if(!this.disabled&&0===i.button){if(this._platform.IOS){const _=this._slider._isCursorOnSliderThumb(i,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());return this._isActive=_,this._updateWidthActive(),void this._slider._updateDimensions()}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(i,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(i),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(i){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(i)},0)}_fixValue(i){const _=i.clientX-this._slider._cachedLeft,s=this._slider._cachedWidth,a=0===this._slider.step?1:this._slider.step,r=Math.floor((this._slider.max-this._slider.min)/a),P=Math.round((this._slider._isRtl?1-_/s:_/s)*r)/r*(this._slider.max-this._slider.min)+this._slider.min,x=Math.round(P/a)*a;if(x===this.value)return this._slider._onValueChange(this),void(this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(i,{withAnimation:this._slider._hasAnimation}));this.value=x,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(i,{withAnimation:this._slider._hasAnimation})}_onPointerMove(i){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(i)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(i){const _=this._tickMarkOffset;return Math.max(Math.min(i,this._slider._cachedWidth-this._tickMarkOffset),_)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-2*this._tickMarkOffset)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-2*this._tickMarkOffset)+this._tickMarkOffset}_calcTranslateXByPointerEvent(i){return i.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-2*this._tickMarkOffset}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(i){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(i)}_updateThumbUIByPointerEvent(i,_){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(i)),this._updateThumbUI(_)}_updateThumbUI(i){this._slider._setTransition(!!i?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(i){(this._isControlInitialized||null!==i)&&(this.value=i)}registerOnChange(i){this._onChangeFn=i,this._isControlInitialized=!0}registerOnTouched(i){this._onTouchedFn=i}setDisabledState(i){this.disabled=i}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(e.SKi),e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(Me))},o.\u0275dir=e.FsC({type:o,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(i,_){1&i&&e.bIt("change",function(){return _._onChange()})("input",function(){return _._onInput()})("blur",function(){return _._onBlur()})("focus",function(){return _._onFocus()}),2&i&&e.BMQ("aria-valuetext",_._valuetext())},inputs:{value:[e.Mj6.HasDecoratorInputTransform,"value","value",e.Udg]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],standalone:!0,features:[e.Jv_([Pn,{provide:Y,useExisting:o}]),e.GFd]}),n})(),Ye=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[Ie.yE,Ie.pZ]}),n})();var Nt=c(66915),b=c(94495),Dn=c(64566),Z=c(39358),Oe=c(22679),R=c(49204),h=c(93822),re=c(89079),ye=c(14823),Ss=c(63365),Ts=c(60286),bs=c(35650),bt=c(61295),di=c(13409),ho=c(68947),e_=c(59e3),J=c(65985);const vs=(o,n,t)=>({"justify-between":o,"justify-start":n,"gap-2":t}),Os=()=>["outline","outline-blue-600"],ws=()=>[""];function Is(o,n){if(1&o&&e.nrm(0,"div",10),2&o){const t=e.XpG().$implicit;e.HbH(t.imageClass)}}function Cs(o,n){if(1&o&&(e.j41(0,"span",11),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.title)}}function Ms(o,n){if(1&o){const t=e.RV6();e.j41(0,"li")(1,"button",7),e.bIt("click",function(){const _=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.handleThemeSelected(_))}),e.j41(2,"div",8),e.DNE(3,Is,1,2,"div",9)(4,Cs,2,1),e.k0s()()()}if(2&o){const t=n.$implicit,i=e.XpG();e.R7$(),e.Y8G("matTooltip",t.title)("lang",i.lang()),e.BMQ("aria-label",t.arialLabel)("data-test-skin",t.id),e.R7$(),e.HbH(i.selectedTheme()===t?e.lJ4(7,Os):e.lJ4(8,ws)),e.R7$(),e.vxM(3,t.imageClass?3:4)}}function ys(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",6)(1,"mat-slider",12)(2,"input",13,0),e.bIt("valueChange",function(_){e.eBV(t);const s=e.XpG();return e.Njj(s.handleSliderChange(_,!1,!0))})("input",function(){e.eBV(t);const _=e.sdS(3),s=e.XpG();return e.Njj(s.handleSliderChange(_.value,!0,!1))}),e.k0s()(),e.j41(4,"div",14)(5,"span"),e.pXf(6,1),e.k0s(),e.j41(7,"span"),e.EFF(8),e.k0s()()()}if(2&o){const t=e.sdS(3),i=e.XpG();e.R7$(),e.Y8G("min",0)("max",100)("showTickMarks",!1),e.R7$(),e.Y8G("value",i.opacity()),e.R7$(6),e.SpI("",t.value,"%")}}let Ln=(()=>{var o;class n{constructor(i,_,s,a){this.store=i,this.sceneService=_,this.paintService=s,this.vendorAnalyticsService=a,this.skinUIConfig={"integumentary system":{title:$localize`Integumentary System`},off:{id:"off",title:$localize`Off`,arialLabel:$localize`Off`},"dark skin":{id:"dark",title:$localize`Dark Skin`,imageClass:"dark"},"medium skin":{id:"medium",title:$localize`Medium Skin`,imageClass:"medium"},"light skin":{id:"light",title:$localize`Light Skin`,imageClass:"light"},"fair skin":{id:"fair",title:$localize`Fair Skin`,imageClass:"fair"},"transparent skin":{id:"transparent",title:$localize`Transparent Skin`,imageClass:"transparent"}},this.offSkinTheme={id:"off",title:$localize`Off`,arialLabel:$localize`Turn off Skin`,objectVariants:{}},this.lang=e.hFB.required(),this.schema=e.hFB.required(),this.contentId=e.hFB.required(),this.contentType=e.hFB.required(),this.schemaTitle=(0,e.EWP)(()=>{const r=this.schema(),u=r.title.toLowerCase();return this.skinUIConfig[u]?.title??r.title}),this.compact=(0,e.hFB)(!1),this.themes=(0,e.EWP)(()=>{const r=function As(o,n){return o.map(t=>{const i=t.title.toLowerCase(),_=n[i],s=_?.id??i.replace(/\s/g,""),a=_?.title??t.title,r=_?.arialLabel??$localize`Switch to ${a}`,u=Object.keys(t.objectVariants).some(P=>P.includes("female"))?"female":"male";let f=_?.imageClass?`view-skin__image--${u}--${_.imageClass}`:"";return{...t,id:s,title:a,arialLabel:r,imageClass:f}})}(this.schema().themes,this.skinUIConfig);return[this.offSkinTheme,...r]}),this.selectedThemeIndex=(0,e.EWP)(()=>{const r=this.themes(),u=this.nodes();return r.findIndex((f,P)=>f===this.offSkinTheme?this.allObjectIds().every(z=>!1===u[z]?.shown):Object.entries(f.objectVariants).every(([x,z])=>u[x]?.variant===z))}),this.selectedTheme=(0,e.EWP)(()=>this.themes()[this.selectedThemeIndex()]),this.isOffThemeSelected=(0,e.EWP)(()=>this.selectedTheme()===this.offSkinTheme),this.allObjectIds=(0,e.EWP)(()=>{const u=this.themes().reduce((f,P)=>{const x=Object.keys(P.objectVariants);return f.push(...x),f},[]);return Array.from(new Set(u))}),this.selectedObjectIds=(0,e.EWP)(()=>Object.keys(this.selectedTheme()?.objectVariants??{})),this.selectedSkinId=(0,e.EWP)(()=>this.selectedObjectIds().find(r=>r.includes("skin"))),this.opacity=(0,e.EWP)(()=>{const r=this.nodes(),u=this.selectedSkinId(),P=r[u]?.paint;return this.getObjectOpacity(P?.opacity)??100}),this.nodes=(0,re.ot)(this.store.select(di.z.getNodes))}toggleVisibility(i){i||this.handleThemeSelected(this.offSkinTheme)}handleThemeSelected(i){if(i===this.offSkinTheme){const u=this.allObjectIds();this.store.dispatch(new bt.yr(!1,u)),this.store.dispatch(new bt._n({}))}else{const{objectVariants:u}=i,f=Object.keys(u);this.store.dispatch(new bt.yr(!0,f)),this.store.dispatch(new bt._n(u))}const _=ho.l.toTitleCase(i.id),s=this.lang(),a=this.contentId(),r=this.contentType();this.vendorAnalyticsService.track("Skin Type",{skinType:_,contentId:a,contentType:r,lang:s})}handleSliderChange(i,_,s){const a=i/100,r=this.selectedObjectIds();if(_&&r.forEach(u=>{this.setObjectOpacity(u,a)}),s){const u=r.reduce((f,P)=>{const x=this.paintService.getColor(P);if(x){const z=(0,Ss.H)(x);f[P]=z}return f},{});this.store.dispatch(new bt.Jp(void 0,void 0,u))}}setObjectOpacity(i,_){this.sceneService.getLeafIds(i).forEach(a=>{const r=this.paintService.getColor(a)?.opacity||1;let u;Array.isArray(r)?(u=[...r],u[0]=_):"number"==typeof r&&(u=_),this.paintService.colorObject(a,{opacity:u})})}getObjectOpacity(i){if(Array.isArray(i)){const[_]=i;return _}if("number"==typeof i)return i}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(l.il),e.rXU(bs.w),e.rXU(Ts.s),e.rXU(e_.e))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-skin-variants"]],inputs:{lang:[e.Mj6.SignalBased,"lang"],schema:[e.Mj6.SignalBased,"schema"],contentId:[e.Mj6.SignalBased,"contentId"],contentType:[e.Mj6.SignalBased,"contentType"],compact:[e.Mj6.SignalBased,"compact"]},standalone:!0,features:[e.aNF],decls:8,vars:7,consts:()=>{let t;return t=$localize`:␟fd09d25b9e69b686d3fc0154c0b316c7c9f45cec␟8036200981586016464:Opacity`,[["slider","matSliderThumb"],t,[1,"flex","flex-col","gap-1","gray-400"],[1,"uppercase","text-2xs"],[1,"flex","flex-col","gap-1","p-3","border","border-gray-200","border-solid","rounded"],[1,"flex","flex-row","item-center","text-2xs",3,"ngClass"],[1,"grow"],["type","button","app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","transparent","matTooltipPosition","below","data-test","skinToggleButton",1,"rounded-sm","focus:rounded-sm","focus:outline","focus:outline-blue-600",3,"click","matTooltip","lang"],[1,"flex","items-center","justify-center","w-10","h-10","text-black","bg-gray-100","rounded-sm"],["role","img",1,"w-full","h-full","bg-center","bg-repeat","bg-cover","rounded-sm",3,"class"],["role","img",1,"w-full","h-full","bg-center","bg-repeat","bg-cover","rounded-sm"],[1,"break-words","hyphens-auto","text-2xs"],[1,"!w-full","!m-0",3,"min","max","showTickMarks"],["matSliderThumb","",3,"valueChange","input","value"],[1,"flex","items-center","justify-between","uppercase","text-2xs"]]},template:function(i,_){1&i&&(e.j41(0,"div",2)(1,"div",3),e.EFF(2),e.k0s(),e.j41(3,"div",4)(4,"ul",5),e.Z7z(5,Ms,5,9,"li",null,e.fX1),e.k0s(),e.DNE(7,ys,9,5,"div",6),e.k0s()()),2&i&&(e.R7$(2),e.JRh(_.schemaTitle()),e.R7$(2),e.Y8G("ngClass",e.sMw(3,vs,!_.compact(),_.compact(),_.compact())),e.R7$(),e.Dyx(_.themes()),e.R7$(2),e.vxM(7,!1===_.isOffThemeSelected()?7:-1))},dependencies:[p.MD,p.YU,Ye,Tt,Ft,ye.uc,ye.oV,U.C,J.ri],styles:[".view-skin__image--male--fair{background-image:url(maleskin_variants_fair.png)}.view-skin__image--male--light{background-image:url(maleskin_variants_light.png)}.view-skin__image--male--medium{background-image:url(maleskin_variants_medium.png)}.view-skin__image--male--dark{background-image:url(maleskin_variants_dark.png)}.view-skin__image--male--transparent{background-image:url(maleskin_variants_transparent.png)}.view-skin__image--female--fair{background-image:url(femaleskin_variants_fair.png)}.view-skin__image--female--light{background-image:url(femaleskin_variants_light.png)}.view-skin__image--female--medium{background-image:url(femaleskin_variants_medium.png)}.view-skin__image--female--dark{background-image:url(femaleskin_variants_dark.png)}.view-skin__image--female--transparent{background-image:url(femaleskin_variants_transparent.png)}\n"],encapsulation:2}),n})();const Ns=(o,n)=>n.name;function Rs(o,n){if(1&o&&e.nrm(0,"app-view-skin-variants",6,0),2&o){const t=e.XpG();e.Y8G("compact",t.compact())("schema",t.skinVariantsSchema())("lang",t.lang())("contentId",t.storyId())("contentType",t.storyType())}}function Vs(o,n){if(1&o){const t=e.RV6();e.j41(0,"li",10)(1,"div",11),e.EFF(2),e.k0s(),e.j41(3,"div",12)(4,"button",13),e.bIt("click",function(){const _=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.toggleGroupVisibilityClick(_))}),e.j41(5,"div",14),e.nrm(6,"div",15),e.k0s()(),e.j41(7,"div",16)(8,"mat-slider",17)(9,"input",18,1),e.bIt("valueChange",function(_){const s=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.handleSliderChange(s,_,!1,!0))})("input",function(){const _=e.eBV(t).$implicit,s=e.sdS(10),a=e.XpG(2);return e.Njj(a.handleSliderChange(_,s.value,!0,!1))}),e.k0s()()()()()}if(2&o){const t=n.$implicit,i=e.XpG(2);e.AVh("view-visibility-layers__list-item--hidden",!t.visible),e.R7$(2),e.JRh(t.label),e.R7$(2),e.Y8G("buttonTheme","transparent-fill")("matTooltip",t.visible?i.hideLayersTooltip:i.showLayersTooltip),e.BMQ("aria-label",i.getGroupAriaLabel(t.name,t.visible)),e.R7$(2),e.Y8G("className",t.imageClassName),e.R7$(2),e.Y8G("min",0)("max",t.layers.length)("step",1)("showTickMarks",!0),e.R7$(),e.Y8G("value",t.position)}}function Ps(o,n){if(1&o&&(e.j41(0,"ul",7),e.Z7z(1,Vs,11,12,"li",9,Ns),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Dyx(t.viewGroups())}}function Us(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",8)(1,"button",19),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleToggleAllClick(_.viewGroups(),_.allGroupsHidden()))}),e.EFF(2),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(2),e.SpI(" ",t.allGroupsHidden()?t.showAllLayersTooltip:t.hideAllLayersTooltip," ")}}let go=(()=>{var o;class n{constructor(i,_,s,a){this.store=i,this.viewService=_,this.visibilityLayersService=s,this.elementRef=a,this.defaultSystemToImage={label:$localize`Layer`,icon:"layer"},this.systemToImage={"muscular system":{label:$localize`muscular system`,icon:"muscular-system"},"connective tissue":{label:$localize`connective tissue`,icon:"connective-tissue"},"skeletal system":{label:$localize`skeletal system`,icon:"skeletal-system"},"respiratory system":{label:$localize`respiratory system`,icon:"respiratory-system"},"endocrine system":{label:$localize`endocrine system`,icon:"endocrine-system"},"digestive system":{label:$localize`digestive system`,icon:"digestive-system"},"reproductive system":{label:$localize`reproductive system`,icon:"reproductive-system"},"urinary system":{label:$localize`urinary system`,icon:"urinary-system"},"cardiovascular system":{label:$localize`cardiovascular system`,icon:"cardiovascular-system"},"lymphatic system":{label:$localize`lymphatic system`,icon:"lymphatic-system"},"nervous system":{label:$localize`nervous system`,icon:"nervous-system"},"integumentary system":{label:$localize`integumentary system`,icon:"integumentary-system"}},this.showAllLayersTooltip=$localize`Show All Anatomy Layers`,this.hideAllLayersTooltip=$localize`Hide All Anatomy Layers`,this.showLayersTooltip=$localize`Show Layer`,this.hideLayersTooltip=$localize`Hide Layer`,this.skinLayersComponent=(0,e.ebz)(Ln),this.selectedChapterLayerGroups=(0,re.ot)(this.store.select(b.N.getSelectedChapterLayerGroups)),this.skinVariantsSchema=(0,re.ot)(this.store.select(Oe.t.getVariantSchema("skin"))),this.skinLayersUI=(0,re.ot)(this.store.select(T.dF.getUIEntry(h.U.SkinLayers))),this.visibilityLayersUI=(0,re.ot)(this.store.select(T.dF.getUIEntry(h.U.VisibilityLayers))),this.lang=(0,re.ot)(this.store.select(m.Pf.getViewLanguage)),this.storyId=(0,re.ot)(this.store.select(Oe.t.getStoryId)),this.storyType=(0,re.ot)(this.store.select(Oe.t.getStoryType)),this.compact=(0,e.hFB)(!1),this.showSkinLayers=(0,e.EWP)(()=>{const r=this.skinVariantsSchema(),u=this.skinLayersUI();return!(0,R.isNil)(r)&&u.enable}),this.showVisibilityLayers=(0,e.EWP)(()=>{const r=this.viewGroups(),u=this.visibilityLayersUI();return r.length>0&&u.enable}),this.viewGroups=(0,e.EWP)(()=>{const r=this.selectedChapterLayerGroups();return this.createViewLayerGroups(r)}),this.allGroupsHidden=(0,e.EWP)(()=>this.viewGroups().every(u=>!u.visible))}handleKeyPress(){this.viewService.elementHasFocus(this.elementRef.nativeElement)&&!this.viewService.isMaterialMenuOut()&&this.viewService.toggleLayers(!1)}handleSliderChange(i,_,s,a){this.setLayerGroupVisibility([{...i,position:_}],s,a)}toggleGroupVisibilityClick(i){const _=this.visibilityLayersService.computeGroupPositionsByFraction([i],i.visible?0:1);this.setLayerGroupVisibility(_,!0,!0)}handleToggleAllClick(i,_){this.toggleLayers(i,_)}getGroupAriaLabel(i,_){return _?$localize`Hide ${i} Layer`:$localize`Show ${i} Layer`}toggleLayers(i,_){const s=this.visibilityLayersService.computeGroupPositionsByFraction(i,_?1:0);this.setLayerGroupVisibility(s,!0,!0),this.skinLayersComponent()?.toggleVisibility(_)}setLayerGroupVisibility(i,_,s){const a=this.store.selectSnapshot(b.N.getSelectedChapterId);_&&this.visibilityLayersService.syncLayerGroupsToScene(i),s&&this.visibilityLayersService.syncLayerGroupsToState(a,i,!0)}createViewLayerGroups(i){return i.map((_,s)=>{const{name:a}=_,r=s+1,u=0!==_.position,f=a.toLowerCase(),P=this.systemToImage[f]??this.defaultSystemToImage,x=P===this.defaultSystemToImage?`${P.label} ${r}`:P.label,Ge="view-visibility-layers__image",yt=[Ge,`${Ge}--${P.icon}`].join(" ");return{..._,visible:u,label:x,imageClassName:yt}})}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(l.il),e.rXU(Z.z),e.rXU(Dn.u),e.rXU(e.aKT))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-visibility-layers"]],viewQuery:function(i,_){1&i&&e.wEZ(_.skinLayersComponent,Ln,5),2&i&&e.NyB()},hostBindings:function(i,_){1&i&&e.bIt("keydown.escape",function(){return _.handleKeyPress()},!1,e.EBC)},inputs:{compact:[e.Mj6.SignalBased,"compact"]},standalone:!0,features:[e.aNF],decls:7,vars:6,consts:()=>{let t;return t=$localize`:␟3acd4e3a84c66d140da3c19c36a4d0d7ce688e6a␟6086371624662249440: Changing the value of the sliders will modify visibility of different layers of the model `,[["skinLayers",""],["slider","matSliderThumb"],t,["role","dialog","cdkTrapFocus","",1,"view-visibility-layers",3,"cdkTrapFocusAutoCapture"],[1,"sr-only"],[1,"flex","flex-col","flex-auto","gap-4","view-visibility-layers__list-wraper"],[3,"compact","schema","lang","contentId","contentType"],[1,"view-visibility-layers__list"],[1,"view-visibility-layers__toggle"],[1,"view-visibility-layers__list-item",3,"view-visibility-layers__list-item--hidden"],[1,"view-visibility-layers__list-item"],[1,"mb-1","uppercase","text-2xs"],[1,"view-visibility-layers__slider"],["type","button","app-view-button","","buttonSize","small","buttonShape","square","data-test","viewToolsButton",1,"view-visibility-layers__slider-button",3,"click","buttonTheme","matTooltip"],[1,"relative","flex","items-center","justify-center"],["role","img",3,"className"],[1,"pl-1","pr-6","grow"],[2,"width","100% !important",3,"min","max","step","showTickMarks"],["matSliderThumb","",3,"valueChange","input","value"],["app-view-button","","buttonTheme","light-gray-outline","buttonShape","rounded","buttonSize","small","cdkFocusInitial","",1,"w-full",3,"click"]]},template:function(i,_){1&i&&(e.j41(0,"div",3)(1,"span",4),e.pXf(2,2),e.k0s(),e.j41(3,"div",5),e.DNE(4,Rs,2,5,"app-view-skin-variants",6)(5,Ps,3,0,"ul",7),e.k0s(),e.DNE(6,Us,3,1,"div",8),e.k0s()),2&i&&(e.AVh("view-visibility-layers--overflow",!_.compact()),e.Y8G("cdkTrapFocusAutoCapture",!_.compact()),e.R7$(4),e.vxM(4,_.showSkinLayers()?4:-1),e.R7$(),e.vxM(5,_.showVisibilityLayers()?5:-1),e.R7$(),e.vxM(6,_.showVisibilityLayers()?6:-1))},dependencies:[L.kB,ye.uc,ye.oV,Ye,Tt,Ft,U.C,J.ri,Ln],styles:[".view-visibility-layers{display:flex;flex-direction:column;position:relative;max-height:100%}.view-visibility-layers__toggle{padding:20px 0}.view-visibility-layers__list{display:flex;flex-direction:column;gap:16px}.view-visibility-layers__list-item{color:#374a68}.view-visibility-layers__list-item--hidden{color:#8196b1}.view-visibility-layers__slider{display:flex;align-items:center;border:1px solid #d7e0ea;border-radius:4px}.view-visibility-layers__slider-button{border-right:1px solid #d7e0ea!important}.view-visibility-layers__image{display:inline-block;width:20px;height:20px;background-repeat:no-repeat;background-position:center center;background-size:contain}.view-visibility-layers__image--muscular-system{background-image:url(muscular-system.svg)}.view-visibility-layers__image--connective-tissue{background-image:url(connective-tissue.svg)}.view-visibility-layers__image--skeletal-system{background-image:url(skeletal-system.svg)}.view-visibility-layers__image--respiratory-system{background-image:url(respiratory-system.svg)}.view-visibility-layers__image--endocrine-system{background-image:url(endocrine-system.svg)}.view-visibility-layers__image--digestive-system{background-image:url(digestive-system.svg)}.view-visibility-layers__image--reproductive-system{background-image:url(reproductive-system.svg)}.view-visibility-layers__image--urinary-system{background-image:url(urinary-system.svg)}.view-visibility-layers__image--cardiovascular-system{background-image:url(cardiovascular-system.svg)}.view-visibility-layers__image--lymphatic-system{background-image:url(lymphatic-system.svg)}.view-visibility-layers__image--nervous-system{background-image:url(nervous-system.svg)}.view-visibility-layers__image--integumentary-system{background-image:url(integumentary-system.svg)}.view-visibility-layers__image--layer{background-image:url(layer.svg)}.view-visibility-layers--overflow .view-visibility-layers__toggle{background-color:#fff;position:sticky!important;bottom:0}@media (hover: none){.view-visibility-layers input[type=range]{pointer-events:none!important}.view-visibility-layers input[type=range]::-webkit-slider-thumb{pointer-events:all!important}.view-visibility-layers input[type=range]::-moz-range-thumb{pointer-events:all!important}.view-visibility-layers input[type=range]::-ms-thumb{pointer-events:all!important}}\n"],encapsulation:2,changeDetection:0}),n})();var Ds=c(4763),$n=c(70914);function Ls(o,n){if(1&o&&(e.j41(0,"li",4)(1,"div",5),e.EFF(2),e.k0s(),e.j41(3,"div",6),e.nrm(4,"app-html",7),e.k0s()()),2&o){const t=n.$implicit,i=n.$index;e.R7$(2),e.SpI("",i+1,"."),e.R7$(2),e.Y8G("markdownText",t.label)}}let $s=(()=>{var o;class n{constructor(){this.references=e.hFB.required()}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-references"]],inputs:{references:[e.Mj6.SignalBased,"references"]},standalone:!0,features:[e.aNF],decls:6,vars:0,consts:()=>{let t;return t=$localize`:␟0dc2e6fb6d0244d5024e73ede409a45d5b0c8a64␟449712922219700420:References`,[t,[1,"flex","flex-row","items-center","pb-3","font-bold"],["data-test","view-references",1,"view-references"],[1,"flex","flex-col","gap-4"],[1,"flex","flex-row","gap-1","text-xs"],[1,"text-xs","text-right",2,"flex","0 0 20px"],[1,"flex-auto","w-full"],[1,"!text-gray-900",3,"markdownText"]]},template:function(i,_){1&i&&(e.j41(0,"div",1),e.pXf(1,0),e.k0s(),e.j41(2,"div",2)(3,"ol",3),e.Z7z(4,Ls,5,2,"li",4,e.fX1),e.k0s()()),2&i&&(e.R7$(4),e.Dyx(_.references()))},dependencies:[$n.V],styles:[".view-references{color:#374a68}\n"],encapsulation:2,changeDetection:0}),n})();var Ht=c(21523),yi=c(17766),q=c(26779);const xs=o=>({"p-4 rounded shadow":o}),ks=(o,n)=>({hidden:o,"pt-6":n}),Gs=o=>({"rotate-90":o});function Ws(o,n){if(1&o&&(e.j41(0,"span"),e.pXf(1,0),e.k0s()),2&o){const t=e.XpG(3);e.R7$(),e.uP7(t.updateDateText()),e.nnv(1)}}function zs(o,n){1&o&&(e.j41(0,"span"),e.pXf(1,1),e.k0s())}function Xs(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.open.set(!_.open()))}),e.j41(1,"div",13)(2,"span",14),e.DNE(3,Ws,2,1,"span")(4,zs,2,0),e.k0s(),e.nrm(5,"app-icon",15),e.k0s()()}if(2&o){let t;const i=e.XpG(2);e.R7$(3),e.vxM(3,null!=(t=i.sourceInfo().reviewed)&&t.enabled&&null!=(t=i.sourceInfo().audit)&&t.enabled&&i.updateDate()?3:4),e.R7$(2),e.Y8G("ngClass",e.eq3(2,Gs,i.open()))}}function Bs(o,n){1&o&&e.nrm(0,"app-badge",17)}function js(o,n){if(1&o&&(e.j41(0,"div")(1,"span",20),e.pXf(2,2),e.k0s(),e.j41(3,"time"),e.EFF(4),e.k0s()()),2&o){const t=e.XpG(3);e.R7$(3),e.BMQ("datetime",t.updateDateTime()),e.R7$(),e.JRh(t.updateDateText())}}function Fs(o,n){if(1&o&&(e.j41(0,"a",19)(1,"span"),e.pXf(2,3),e.k0s(),e.nrm(3,"app-icon",21),e.k0s()),2&o){const t=e.XpG(3);e.BMQ("href",t.sourceInfo().reviewed.url,e.B4B)}}function Hs(o,n){if(1&o&&(e.j41(0,"div")(1,"em",20),e.pXf(2,4),e.k0s(),e.EFF(3),e.k0s()),2&o){const t=e.XpG(4);e.R7$(3),e.SpI(" ",t.sourceInfo().collaborated.authors," ")}}function Qs(o,n){if(1&o&&(e.j41(0,"div",16),e.nrm(1,"app-badge",22),e.DNE(2,Hs,4,1,"div"),e.k0s()),2&o){const t=e.XpG(3);e.R7$(2),e.vxM(2,t.sourceInfo().collaborated.authors?2:-1)}}function Ys(o,n){if(1&o&&(e.j41(0,"div",10)(1,"div",16),e.DNE(2,Bs,1,0,"app-badge",17),e.j41(3,"div",18),e.DNE(4,js,5,2,"div")(5,Fs,4,1,"a",19),e.k0s()(),e.DNE(6,Qs,3,1,"div",16),e.k0s()),2&o){let t,i,_,s;const a=e.XpG(2);e.R7$(2),e.vxM(2,null!=(t=a.sourceInfo().reviewed)&&t.enabled?2:-1),e.R7$(2),e.vxM(4,null!=(i=a.sourceInfo().audit)&&i.enabled&&a.updateDate()?4:-1),e.R7$(),e.vxM(5,null!=(_=a.sourceInfo().reviewed)&&_.url?5:-1),e.R7$(),e.vxM(6,null!=(s=a.sourceInfo().collaborated)&&s.enabled?6:-1)}}function qs(o,n){if(1&o&&(e.j41(0,"div",11),e.nrm(1,"app-view-references",23),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("references",t.references())}}function Ks(o,n){if(1&o&&(e.j41(0,"div")(1,"em",20),e.pXf(2,5),e.k0s(),e.EFF(3),e.k0s()),2&o){const t=e.XpG(3);e.R7$(3),e.SpI(" ",t.updateDateText(),"")}}function Zs(o,n){if(1&o&&(e.j41(0,"div",10),e.nrm(1,"app-view-references",23),e.DNE(2,Ks,4,1,"div"),e.k0s()),2&o){let t;const i=e.XpG(2);e.R7$(),e.Y8G("references",i.references()),e.R7$(),e.vxM(2,null!=(t=i.sourceInfo().audit)&&t.enabled&&i.updateDateText()?2:-1)}}function Js(o,n){if(1&o&&(e.j41(0,"div")(1,"em",20),e.pXf(2,6),e.k0s(),e.EFF(3),e.k0s()),2&o){const t=e.XpG(2);e.R7$(3),e.SpI(" ",t.updateDateText(),"")}}function ea(o,n){if(1&o&&(e.j41(0,"div",7),e.DNE(1,Xs,6,4,"button",8),e.j41(2,"div",9),e.DNE(3,Ys,7,4,"div",10)(4,qs,2,1,"div",11)(5,Zs,3,2,"div",10)(6,Js,4,1,"div"),e.k0s()()),2&o){let t;const i=e.XpG();e.Y8G("ngClass",e.eq3(7,xs,i.toggleable()&&i.open())),e.R7$(),e.vxM(1,i.toggleable()?1:-1),e.R7$(),e.Y8G("ngClass",e.l_i(9,ks,i.toggleable()&&!i.open(),i.toggleable()&&i.open())),e.R7$(),e.vxM(3,i.displaySources()?3:-1),e.R7$(),e.vxM(4,i.displayReferences()&&i.displaySources()?4:-1),e.R7$(),e.vxM(5,i.displayReferences()&&!i.displaySources()?5:-1),e.R7$(),e.vxM(6,!i.displayReferences()&&!i.displaySources()&&null!=(t=i.sourceInfo().audit)&&t.enabled&&i.updateDateText()?6:-1)}}let xn=(()=>{var o;class n{constructor(i){this.store=i,this.sourceInfo=(0,re.ot)(this.store.select(Oe.t.getStorySourceInfo)),this.storyType=(0,re.ot)(this.store.select(Oe.t.getStoryType)),this.selectedBookmark=(0,re.ot)(this.store.select(Ht.J.getSelectedBookmark)),this.toggleable=(0,e.hFB)(!1),this.open=(0,e.vPA)(!1),this.showSources=(0,e.EWP)(()=>this.storyType()===yi.c.Module),this.updateDate=(0,e.EWP)(()=>this.selectedBookmark()?.update_date_time??this.selectedBookmark()?.create_date_time),this.updateDateTime=(0,e.EWP)(()=>{const _=this.updateDate();return _?new Date(_).toISOString():void 0}),this.updateDateText=(0,e.EWP)(()=>{const _=this.updateDate();return _?new Date(_).toLocaleDateString():void 0}),this.displaySources=(0,e.EWP)(()=>{const _=this.sourceInfo();return this.showSources()&&_?.reviewed?.enabled||_?.collaborated?.enabled}),this.displayReferences=(0,e.EWP)(()=>this.references().length>0),this.references=(0,e.EWP)(()=>this.sourceInfo()?.references??[])}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(l.il))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-source-info"]],inputs:{toggleable:[e.Mj6.SignalBased,"toggleable"]},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:()=>{let t,i,_,s,a,r,u,f,P;return t=$localize`:␟ec2c1d22b6e2207023be0f04e37c533e4e5cc7ec␟7104746773075604544:Medically reviewed on ${"\ufffd0\ufffd"}:INTERPOLATION:`,i=$localize`:␟5bbf2bcdb5d3aa2b328ab66786845485b997e0e7␟5233133710285034701:Source Information`,_=$localize`:␟8130925c3a61817eae8b407d5bbcdaaba8758d15␟429607993299883476:Medically Reviewed`,s=$localize`:␟c0036f237054be68e8a0cc165f3b71b2f874cbf1␟63496578423295101:Updated on `,a=$localize`:␟9a747d50c4db80b1cb473adfd9e5a9c9e034b7d5␟5574571308850658695:Read about our review process.`,r=$localize`:␟d5b8a08bdd48b443f541a8477c756faa70d686d5␟214207563889300286:Built in Collaboration`,u=$localize`:␟525d654f08c7e65835ec2836814a49aa1ba604f3␟4382887906654551268:Created with`,f=$localize`:␟bc56b2e58706df3bcb07aa8e07b86d26e1e3d93d␟738579991266800938:Updated on`,P=$localize`:␟bc56b2e58706df3bcb07aa8e07b86d26e1e3d93d␟738579991266800938:Updated on`,[t,i,s,a,u,f,P,[1,"transition-all",3,"ngClass"],["app-view-button","","buttonSize","2xsmall",1,"w-full"],[1,"flex","flex-col","gap-6","[&_a]:break-all","text-xs",3,"ngClass"],[1,"flex","flex-col","gap-6"],["id","view-source-info-references"],["app-view-button","","buttonSize","2xsmall",1,"w-full",3,"click"],[1,"flex","items-center"],[1,"text-xs"],["icon","angle-right",1,"ml-1","transition-transform",3,"ngClass"],[1,"flex","flex-col","gap-2"],["theme","blue","icon","check","label",_],[1,"flex","flex-col","gap-1"],["target","_blank","rel","noreferrer nofollow",1,"hover:underline"],[1,"font-bold"],["icon","arrow-up-right-from-square",1,"ml-1"],["theme","green","icon","check","label",r],[3,"references"]]},template:function(i,_){1&i&&e.DNE(0,ea,7,12,"div",7),2&i&&e.vxM(0,_.sourceInfo()?0:-1)},dependencies:[p.MD,p.YU,U.C,J.ri,K.o,q.R,Ds.n,$s],styles:[".view-source-info{color:#131c2a}.view-source-info__toggle{color:#131c2a;font-size:.75rem;line-height:1rem}\n"],encapsulation:2,changeDetection:0}),n})();var Ni,d=c(2573),Ai=c(65650);class kn{constructor(n){this.store=n,this.injector=(0,e.WQX)(e.zZn),this.defaultImage=(0,e.hFB)("/assets/images/view-chapter-thumbnail-placeholder.png"),this.chapterId=e.hFB.required(),this.chapterThumb=(0,e.EWP)(()=>{const t=this.thumbnails().get(this.chapterId());return t?t.snapshot||t.urls.small:""}),this.thumbnails=(0,re.ot)(this.store.select(Ai.K.getRegisteredThumbnails))}}(Ni=kn).\u0275fac=function(n){return new(n||Ni)(e.rXU(l.il))},Ni.\u0275cmp=e.VBU({type:Ni,selectors:[["app-chapter-image"]],inputs:{defaultImage:[e.Mj6.SignalBased,"defaultImage"],chapterId:[e.Mj6.SignalBased,"chapterId"]},standalone:!0,features:[e.aNF],decls:1,vars:2,consts:[[1,"w-full","h-full","bg-cover",3,"defaultImage","lazyLoad"]],template:function(n,t){1&n&&e.nrm(0,"div",0),2&n&&e.Y8G("defaultImage",t.defaultImage())("lazyLoad",t.chapterThumb())},dependencies:[ne.Un,ne.Je],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}"],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(Ai.K.getRegisteredThumbnails),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],kn.prototype,"thumbnails$",void 0);var na=c(62497),mo=c(5025),g=c(37925);const oa=["container"],_a=o=>({"rotate-90":o});function sa(o,n){if(1&o&&(e.j41(0,"span"),e.pXf(1,1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.uP7(t.updateDateText()),e.nnv(1)}}function aa(o,n){1&o&&(e.j41(0,"span"),e.pXf(1,2),e.k0s())}function ra(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",null,0)(2,"button",3),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.toggleDetails())}),e.j41(3,"div",4)(4,"span",5),e.DNE(5,sa,2,1,"span")(6,aa,2,0),e.k0s(),e.nrm(7,"app-icon",6),e.k0s()()()}if(2&o){let t;const i=e.XpG();e.R7$(5),e.vxM(5,null!=(t=i.sourceInfo().reviewed)&&t.enabled&&null!=(t=i.sourceInfo().audit)&&t.enabled&&i.updateDate()?5:6),e.R7$(2),e.Y8G("ngClass",e.eq3(2,_a,i.open()))}}let t_=(()=>{var o;class n{ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}constructor(i,_){this.store=i,this.popupService=_,this.ngUnsubscribe=new $.B,this.open=(0,e.vPA)(!1),this.sourceInfo=(0,re.ot)(this.store.select(Oe.t.getStorySourceInfo)),this.selectedBookmark=(0,re.ot)(this.store.select(Ht.J.getSelectedBookmark)),this.updateDate=(0,e.EWP)(()=>this.selectedBookmark()?.update_date_time??this.selectedBookmark()?.create_date_time),this.updateDateTime=(0,e.EWP)(()=>{const s=this.updateDate();return s?new Date(s).toISOString():void 0}),this.updateDateText=(0,e.EWP)(()=>{const s=this.updateDate();return s?new Date(s).toLocaleDateString():void 0})}toggleDetails(){const i=this.popupService.open({origin:this.container.nativeElement,positions:[mo.k.Below],width:"272px",maxHeight:"484px",content:xn});this.open.set(!0),i.afterClosed$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.open.set(!1)})}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(l.il),e.rXU(mo.O))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-source-info-toggle"]],viewQuery:function(i,_){if(1&i&&e.GBs(oa,5),2&i){let s;e.mGM(s=e.lsd())&&(_.container=s.first)}},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:()=>{let t,i;return t=$localize`:␟ec2c1d22b6e2207023be0f04e37c533e4e5cc7ec␟7104746773075604544:Medically reviewed on ${"\ufffd0\ufffd"}:INTERPOLATION:`,i=$localize`:␟5bbf2bcdb5d3aa2b328ab66786845485b997e0e7␟5233133710285034701:Source Information`,[["container",""],t,i,["app-view-button","","buttonSize","2xsmall","data-test","viewSourceInfoToggle",1,"w-full","overflow-hidden","rounded",3,"click"],[1,"flex","items-center"],[1,"text-xs"],["icon","angle-right",1,"ml-1","transition-transform",3,"ngClass"]]},template:function(i,_){1&i&&e.DNE(0,ra,8,4,"div"),2&i&&e.vxM(0,_.sourceInfo()?0:-1)},dependencies:[p.MD,p.YU,U.C,J.ri,K.o,q.R],changeDetection:0}),n})(),la=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[l.rK.forFeature([m.Pf]),l.rK.forFeature([T.dF]),j.y2.forChild(),L.Pd,V.k,U.C,p.MD,S.y,W.h,_e.x,H.YN,K.o,ne.Un,G.G,lt,we.G,$e,k.b,Se.Y,se.x,Ee.M,F.c,H.X1,At.G,A.k,E.j,We.d,oe.f,Fe,ge,ue,Ce,Bt,Nt.z,Ye,na.N,xn,t_,go,Ln,kn]}),n})();var ca=c(20736),pt=c(29160),Ve=c(35426),Ae=c(82656),Ri=c(76718),da=c(81027),pa=c(24911),ua=c(4664),Pe=c(47610),y=c(14264),ut=c(17365),Be=c(87996),Qt=c(9065),Ke=c(21082),pi=c(1670),Ue=c(36110),i_=c(39705),B=c(93132),ot=c(13181),Ze=c(47555),Gn=function(o){return o[o.Content=0]="Content",o[o.Label=1]="Label",o[o.Tools=2]="Tools",o[o.Search=3]="Search",o[o.Help=4]="Help",o[o.NodeInfo=5]="NodeInfo",o[o.LabelInfo=6]="LabelInfo",o}(Gn||{}),Ne=c(73828),ha=c(38465),Yt=c(87947),Vi=c(82109),ui=c(93915),Je=c(38753),n_=function(o){return o[o.Main=0]="Main",o[o.Media=1]="Media",o[o.Tools=2]="Tools",o[o.Whiteboard=3]="Whiteboard",o[o.VisibilityLayers=4]="VisibilityLayers",o[o.Empty=5]="Empty",o}(n_||{}),Eo=c(34215),o_=c(15375),__=c(30327),Pi=c(79805),qt=c(515),hi=c(38104),Ui=c(15623),Kt=c(17276),s_=c(96557),a_=c(62943),Di=c(47932),fo=c(39898),r_=c(66056),gi=c(32408),mi=c(24418),Li=c(27180),l_=c(90699),$i=c(30607),Rt=c(76016),O=c(87710),Wn=c(47833),zn=c(7431),le=c(55494),ht=c(51529),Xn=c(62949),xi=c(95419),So=c(50677),vt=c(18272),c_=c(92811),To=c(28407),ki=c(12347),bo=c(46842);let p_=(()=>{var o;class n{constructor(i,_,s){this.mediaService=i,this.animationService=_,this.store=s,this.countdownStatus=new pt.t("inactive"),this.countdownChanged=new $.B,this.countdownComplete=new $.B,this.audioObserver=new d.c,this.audioSubject=new pt.t({current:0,duration:0,complete:!1}),this.animationSubject=new pt.t({current:0,duration:0,complete:!1}),this.readingSubject=new pt.t({current:0,duration:0,complete:!1}),this.minimumSubject=new pt.t({current:0,duration:0,complete:!1})}startChapterTimers(i,_=!1){var s=this;return(0,To.A)(function*(){const r={current:0,duration:0,complete:!1},u=s.store.selectSnapshot(m.Pf.getViewLanguage),f=s.store.selectSnapshot(bo.U.getPrefersReducedMotion);if(s.clearChapterTimers(),s.clearCountdown(),(_||s.mediaService.chapterHasAudio(i,u))&&(s.audioRef=yield s.mediaService.getChapterAudioPlayer(i,u,_)),s.audioRef){const x=yield s.mediaService.getDuration(s.audioRef);s.audioSubject.next({current:0,duration:x,complete:!1}),s.audioRef.on("end",()=>{s.audioSubject.next({...s.audioSubject.value,complete:!0})}),s.audioRef.on("stop",()=>{s.audioSubject.next({...s.audioSubject.value,complete:!1})}),s.audioRef.on("play",()=>{s.audioSubject.next({current:s.audioRef?.seek(),duration:x,complete:!1})})}else s.audioSubject.next({current:0,duration:0,complete:!0});s.animationSubject.next({current:s.animationService.getTime(),duration:s.animationService.getChapterDuration(),complete:!1}),s.readingSubject.next({current:0,duration:s.calculateChapterReadingTime(i),complete:!1});const{minimum:P}=s.store.selectSnapshot(m.Pf.getPlaythroughSettings);s.minimumSubject.next({current:0,duration:P,complete:!1}),s.interval=setInterval(()=>{s.audioSubject.next(s.audioRef?{...s.audioSubject.value,current:s.audioRef?.seek()}:{...r,complete:!0}),!s.animationService.isChapterAnimated(i)||f?s.animationSubject.next({...r,complete:!0}):s.animationService.isChapterLooped(i)?s.animationSubject.next({...s.animationSubject.value,current:s.animationSubject.value.current+.05,complete:s.animationSubject.value.current>=s.animationSubject.value.duration}):s.animationSubject.next({...s.animationSubject.value,current:s.animationService.getTime(),complete:s.animationService.hasChapterFinished()}),s.readingSubject.next({...s.readingSubject.value,current:s.readingSubject.value.current+50,complete:s.readingSubject.value.current>=s.readingSubject.value.duration}),s.minimumSubject.next({...s.minimumSubject.value,current:s.minimumSubject.value.current+50,complete:s.minimumSubject.value.current>=s.minimumSubject.value.duration})},50)})()}clearChapterTimers(){clearInterval(this.interval),this.audioRef=null;const i={current:0,duration:0,complete:!1};this.animationSubject.next({...i}),this.audioSubject.next({...i}),this.readingSubject.next({...i}),this.minimumSubject.next({...i})}calculateMaximumRemainingTime(){return[{...this.audioSubject.getValue(),type:"audio"},{...this.animationSubject.getValue(),type:"animation"},{...this.readingSubject.getValue(),type:"reading"},{...this.minimumSubject.getValue(),type:"minimum"}].reduce((i,_)=>(_.complete||(("audio"===_.type||"animation"===_.type)&&(_={..._,current:1e3*_.current,duration:1e3*_.duration}),_.duration-_.current>i.duration-i.current&&(i={..._})),i),{complete:!0,current:0,duration:0})}calculateChapterReadingTime(i){return 1e3*Math.floor((i.description??"").split(" ").length/200*60)}preloadAudio(i,_=!1){var s=this;return(0,To.A)(function*(){const a=s.store.selectSnapshot(m.Pf.getViewLanguage);for(const r of i)yield s.mediaService.getChapterAudioPlayer(r,a,_)})()}startCountdown(){this.clearCountdown(),this.countdownStatus.next("active");let{countdown:i}=this.store.selectSnapshot(m.Pf.getPlaythroughSettings);this.countdownInterval=setInterval(()=>{i-=50,this.countdownChanged.next(i),i<=0&&(this.countdownComplete.next(),this.clearCountdown())},50)}delayCountdown(){const{countdownDelay:i}=this.store.selectSnapshot(m.Pf.getPlaythroughSettings);this.countdownInterval&&(this.clearCountdown(),clearTimeout(this.countdownDelay),this.countdownStatus.next("delay"),this.countdownDelay=setTimeout(()=>{this.startCountdown()},i))}clearCountdown(){const{countdown:i}=this.store.selectSnapshot(m.Pf.getPlaythroughSettings);clearInterval(this.countdownInterval),clearTimeout(this.countdownDelay),this.countdownChanged.next(i),this.countdownStatus.next("inactive")}}return(o=n).\u0275fac=function(i){return new(i||o)(e.KVO(xi.u),e.KVO(ki.O),e.KVO(l.il))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})();var Gi,Bn=c(63008),u_=c(82529);function Sa(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleAction("takeQuiz"))}),e.pXf(1,2),e.k0s()}}class vo{constructor(n){this.dialogRef=n}ngOnInit(){}handleAction(n){this.dialogRef.close(n)}}(Gi=vo).\u0275fac=function(n){return new(n||Gi)(e.rXU(u_.ce))},Gi.\u0275cmp=e.VBU({type:Gi,selectors:[["app-view-playthrough-modal"]],decls:10,vars:3,consts:()=>{let o,n,t;return o=$localize`:␟1cbfa5d1bd6e6c717ce755355bc69d490bacec68␟4369858959634679447:${"\ufffd#4\ufffd"}:START_TAG_APP_ICON:${"\ufffd/#4\ufffd"}:CLOSE_TAG_APP_ICON: Explore on Your Own `,n=$localize`:␟1a4ef7deae63552688d7b8d2aa530d0ed9addf03␟8508351863775798459:${"\ufffd#9\ufffd"}:START_TAG_APP_ICON:${"\ufffd/#9\ufffd"}:CLOSE_TAG_APP_ICON: Play Again `,t=$localize`:␟3453239ade2e7a669baf13d6322db6a7dcc27688␟2019708727875402043: Take Quiz `,[o,n,t,[1,"view-playthrough-modal"],[1,"view-playthrough-modal__buttons"],["app-view-button","","buttonTheme","blue-fill","buttonSize","large","buttonShape","rounded",1,"view-playthrough-modal__button",3,"click"],["icon","arrow-pointer","aria-hidden","true"],["app-view-button","","class","view-playthrough-modal__button","buttonTheme","white-outline","buttonSize","large","buttonShape","rounded",3,"click",4,"ngIf"],["app-view-button","","buttonTheme","white-outline","buttonSize","large","buttonShape","rounded",1,"view-playthrough-modal__button",3,"click"],["icon","rotate-left","aria-hidden","true"]]},template:function(n,t){1&n&&(e.j41(0,"div",3)(1,"div",4)(2,"button",5),e.bIt("click",function(){return t.handleAction("explore")}),e.PLo(3,0),e.nrm(4,"app-icon",6),e.YFu(),e.k0s(),e.DNE(5,Sa,2,0,"button",7),e.nI1(6,"async"),e.j41(7,"button",8),e.bIt("click",function(){return t.handleAction("playAgain")}),e.PLo(8,1),e.nrm(9,"app-icon",9),e.YFu(),e.k0s()()()),2&n&&(e.R7$(5),e.Y8G("ngIf",e.bMT(6,1,t.hasQuiz$)))},dependencies:[J.ri,p.bT,q.R,p.Jj],styles:["[_nghost-%COMP%]{display:flex;background:#1018238c;width:100%;height:100%;justify-content:center;align-items:center;transition:background .3 ease-out}.view-playthrough-modal__button[_ngcontent-%COMP%]{width:280px}.view-playthrough-modal__buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}"],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(O.j.hasQuiz),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],vo.prototype,"hasQuiz$",void 0);var gt=c(65294),Wi=c(58832),jn=c(90908),h_=c(73987),g_=c(17042),Ta=c(20339),ba=c(94604),Oo=c(83621),m_=c(345),E_=c(59369),Ei=c(12637),Ot=c(49989),va=c(41537),Oa=c(51002),Vt=c(82487),wo=c(48948),Io=c(81391);const wa=["scrubber"],Ia=["track"],Ca=["bar"],Ma=["handle"],ya=(o,n,t,i)=>({"view-slider--immediate":o,"view-slider--show-track":n,"view-slider--x":t,"view-slider--y":i});let f_=(()=>{var o;class n{get percent(){return this._percent}set percent(i){this._percent=i,this.dragging||(this.setScrubberBar(i),this.setScrubberHandle(i))}get dragging(){return this._dragging}set dragging(i){i!=this.dragging&&(i?this.dragStarted.emit(this.percent):this.dragEnded.emit(this.percent)),this._dragging=i,this.draggingChanged.emit(i)}constructor(i,_){this.renderer=i,this.changeDetectorRef=_,this.accessibleLabel="",this.sliderAxis="x",this.showTrack=!1,this._percent=0,this.percentChanged=new e.bkB,this._dragging=!1,this.animate=!0,this.draggingChanged=new e.bkB,this.dragStarted=new e.bkB,this.dragEnded=new e.bkB,this.trackClicked=new e.bkB,this.ngUnsubscribe=new $.B,this.trackWidth=0,this.dragPosition={x:0,y:0}}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.setScrubberBar(this.percent),this.setScrubberHandle(this.percent)}),this.initDragListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initDragListener(){this.dragInstance.moved.pipe((0,Qt.Z)(20),(0,g.Q)(this.ngUnsubscribe)).subscribe(i=>{this.percent=this.calculateHandlePercent(),this.setScrubberBar(this.percent),this.percentChanged.emit(this.percent)})}handleDragStart(){this.dragging=!0,this.animate=!1}handleDragEnd(){this.dragging=!1,this.animate=!0}handleTrackClick(i){this.animate=!1,this.changeDetectorRef.markForCheck(),setTimeout(()=>{this.percent=this.getClickPercent(i),this.trackClicked.emit(this.percent),this.percentChanged.emit(this.percent),setTimeout(()=>{this.animate=!0})})}handleKeyDown(i){switch(i.key){case"Home":this.increment(-100),i.stopPropagation();break;case"End":this.increment(100),i.stopPropagation();break;case"PageDown":this.increment(-10),i.stopPropagation();break;case"PageUp":this.increment(10),i.stopPropagation();break;case"ArrowLeft":case"ArrowDown":this.increment(-1),i.stopPropagation();break;case"ArrowRight":case"ArrowUp":this.increment(1),i.stopPropagation()}}increment(i){this.percent+=i,this.percent>100&&(this.percent=100),this.percent<0&&(this.percent=0),this.percentChanged.emit(this.percent)}getClickPercent(i){const{height:_,width:s}=this.track.nativeElement.getBoundingClientRect();let a=0;switch(this.sliderAxis){case"x":a=i.offsetX/s*100;break;case"y":a=(_-i.offsetY)/_*100}return a>100&&(a=100),a<0&&(a=0),a}calculateHandlePercent(){const i=this.getTrackWidth(),_=this.scrubber.nativeElement.getBoundingClientRect().left,s=this.handle.nativeElement.getBoundingClientRect().left,a=this.getTrackHeight(),r=this.scrubber.nativeElement.getBoundingClientRect().top,u=this.handle.nativeElement.getBoundingClientRect().top;let f=0;switch(this.sliderAxis){case"x":f=(s-_)/i*100;break;case"y":f=100-(u-r)/a*100}return Math.min(Math.max(f,0),100)}setScrubberBar(i){switch(this.sliderAxis){case"x":this.renderer.setStyle(this.bar.nativeElement,"width",`${i}%`);break;case"y":this.renderer.setStyle(this.bar.nativeElement,"height",`${i}%`)}this.changeDetectorRef.markForCheck()}setScrubberHandle(i){let _,s;switch(this.sliderAxis){case"x":_=this.getTrackWidth(),this.dragPosition={...this.dragPosition,x:_*(i/100)};break;case"y":s=this.getTrackHeight(),this.dragPosition={...this.dragPosition,y:s-s*(i/100)}}this.changeDetectorRef.markForCheck()}getTrackWidth(){const{left:i,right:_}=this.scrubber.nativeElement.getBoundingClientRect();return _-i-this.handle.nativeElement.offsetWidth}getTrackHeight(){const{height:i}=this.scrubber.nativeElement.getBoundingClientRect();return i-this.handle.nativeElement.offsetHeight}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(e.sFG),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-slider"]],viewQuery:function(i,_){if(1&i&&(e.GBs(wa,7),e.GBs(Ia,7),e.GBs(Ca,7),e.GBs(Ma,7),e.GBs(Io.T1,5)),2&i){let s;e.mGM(s=e.lsd())&&(_.scrubber=s.first),e.mGM(s=e.lsd())&&(_.track=s.first),e.mGM(s=e.lsd())&&(_.bar=s.first),e.mGM(s=e.lsd())&&(_.handle=s.first),e.mGM(s=e.lsd())&&(_.dragInstance=s.first)}},inputs:{accessibleLabel:"accessibleLabel",sliderAxis:"sliderAxis",showTrack:"showTrack",percent:"percent"},outputs:{percentChanged:"percentChanged",draggingChanged:"draggingChanged",dragStarted:"dragStarted",dragEnded:"dragEnded",trackClicked:"trackClicked"},decls:8,vars:10,consts:[["scrubber",""],["track",""],["bar",""],["handle",""],[1,"view-slider",3,"ngClass"],[1,"view-slider__track",3,"click"],[1,"view-slider__bar"],["cdkDrag","","cdkDragBoundary",".view-slider","role","slider","tabindex","0","aria-valuemin","0","aria-valuemax","100",1,"view-slider__handle",3,"cdkDragStarted","cdkDragEnded","keydown","cdkDragLockAxis","cdkDragFreeDragPosition"]],template:function(i,_){if(1&i){const s=e.RV6();e.j41(0,"div",4,0)(2,"div",5,1),e.bIt("click",function(r){return e.eBV(s),e.Njj(_.handleTrackClick(r))}),e.nrm(4,"div",6,2),e.k0s(),e.j41(6,"div",7,3),e.bIt("cdkDragStarted",function(){return e.eBV(s),e.Njj(_.handleDragStart())})("cdkDragEnded",function(){return e.eBV(s),e.Njj(_.handleDragEnd())})("keydown",function(r){return e.eBV(s),e.Njj(_.handleKeyDown(r))}),e.k0s()()}2&i&&(e.Y8G("ngClass",e.ziG(5,ya,!_.animate,_.showTrack,"x"===_.sliderAxis,"y"===_.sliderAxis)),e.R7$(6),e.Y8G("cdkDragLockAxis",_.sliderAxis)("cdkDragFreeDragPosition",_.dragPosition),e.BMQ("aria-label",_.accessibleLabel)("aria-valuenow",_.percent))},dependencies:[p.YU,Io.T1],styles:['.view-slider[_ngcontent-%COMP%]{--height: 28px;--width: 100%;--track-height: 4px;--track-width: 100%;--bar-height: 4px;--bar-width: 0;--handle-height: 28px;--handle-width: 32px;--handle-bulb-size: 12px;--track-color: #d7e0ea;--bar-color: #374a68;--handle-color: transparent;--bar-hover-color: #2d72dc;--handle-hover-color: #2d72dc;--track-hover-color: #d7e0ea;--half-width: calc(var(--handle-width) / 2);--half-height: calc(var(--handle-height) / 2);position:relative;display:flex;justify-content:center;align-items:center;height:var(--height);width:var(--width)}.view-slider[_ngcontent-%COMP%]:hover, .view-slider.view-slider--show-track[_ngcontent-%COMP%]{cursor:pointer}.view-slider[_ngcontent-%COMP%]:hover.view-slider--x, .view-slider.view-slider--show-track.view-slider--x[_ngcontent-%COMP%]{--bar-height: 6px;--track-height: 6px}.view-slider[_ngcontent-%COMP%]:hover.view-slider--y, .view-slider.view-slider--show-track.view-slider--y[_ngcontent-%COMP%]{--bar-width: 6px;--track-width: 6px}.view-slider[_ngcontent-%COMP%]:hover   .view-slider__bar[_ngcontent-%COMP%], .view-slider.view-slider--show-track[_ngcontent-%COMP%]   .view-slider__bar[_ngcontent-%COMP%]{background:var(--bar-hover-color)}.view-slider[_ngcontent-%COMP%]:hover   .view-slider__handle[_ngcontent-%COMP%], .view-slider.view-slider--show-track[_ngcontent-%COMP%]   .view-slider__handle[_ngcontent-%COMP%]{opacity:1}.view-slider[_ngcontent-%COMP%]:hover   .view-slider__handle[_ngcontent-%COMP%]:after, .view-slider.view-slider--show-track[_ngcontent-%COMP%]   .view-slider__handle[_ngcontent-%COMP%]:after{background:var(--handle-hover-color)}.view-slider[_ngcontent-%COMP%]:hover   .view-slider__track[_ngcontent-%COMP%]:after, .view-slider.view-slider--show-track[_ngcontent-%COMP%]   .view-slider__track[_ngcontent-%COMP%]:after{background:var(--track-hover-color)}.view-slider--x[_ngcontent-%COMP%]   .view-slider__track[_ngcontent-%COMP%]{left:var(--half-width);right:var(--half-width)}.view-slider--y[_ngcontent-%COMP%]{--height: 100%;--width: 28px;--track-height: 100%;--track-width: 4px;--bar-height: 0;--bar-width: 4px;--handle-height: 32px;--handle-width: 28px;flex-direction:column-reverse;justify-content:flex-end}.view-slider--y[_ngcontent-%COMP%]:hover{--bar-width: 6px;--track-width: 6px}.view-slider--y[_ngcontent-%COMP%]   .view-slider__bar[_ngcontent-%COMP%]{left:auto}.view-slider--y[_ngcontent-%COMP%]   .view-slider__track[_ngcontent-%COMP%]{flex-direction:column-reverse;top:var(--half-height);bottom:var(--half-height)}.view-slider--immediate[_ngcontent-%COMP%]   .view-slider__bar[_ngcontent-%COMP%], .view-slider--immediate[_ngcontent-%COMP%]   .view-slider__handle[_ngcontent-%COMP%]{transition:none!important}.view-slider__track[_ngcontent-%COMP%]{display:flex;align-items:center;position:absolute;inset:0}.view-slider__track[_ngcontent-%COMP%]:after{content:" ";background:var(--track-color);height:var(--track-height);width:var(--track-width);transition:all .2s ease-in-out,width 50ms}.view-slider__bar[_ngcontent-%COMP%]{border-radius:2px;position:absolute;background:var(--bar-color);height:var(--bar-height);width:var(--bar-width);z-index:2;left:0;transition:all .2s ease-in-out,width 50ms;pointer-events:none}.view-slider__handle[_ngcontent-%COMP%]{width:var(--handle-width);height:var(--handle-height);margin-left:-calc(var(--handle-width)/2);left:0;display:flex;align-items:center;justify-content:center;position:absolute;z-index:2;opacity:0;transition:transform 50ms linear}.view-slider__handle[_ngcontent-%COMP%]:hover:after{transform:scale(1.3)}.view-slider__handle[_ngcontent-%COMP%]:after{opacity:1;content:"";width:var(--handle-bulb-size);height:var(--handle-bulb-size);border-radius:50%;background:var(--handle-color);transition:opacity .25s,transform ease-out .15s}.view-slider__handle-touch[_ngcontent-%COMP%]:after{opacity:1}'],changeDetection:0}),n})();var zi,Fn=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},Hn=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};class fi{constructor(n,t,i,_){this.store=n,this.animationService=t,this.engineService=i,this.changeDetetorRef=_,this.ngUnsubscribe=new $.B,this.duration=0,this.wasPlaying=!0,this.percent=0,this.accessibleLabel=$localize`media slider`}ngOnInit(){this.initChapterListener(),this.initTimelineListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handlePercentChanged(n){this.percent=n,this.scrubToPercent(n)}initChapterListener(){this.chapterReadyState$.pipe((0,y.p)(n=>!(0,R.isNil)(n)&&n.animation),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.timerange=this.animationService.getChapterTimeFrame(),this.tick(this.animationService.getTime())})}initTimelineListener(){this.engineService.getEvent(qt.X.TimelinePlaying).pipe((0,Qt.Z)(20),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.tick(n.time)}),this.engineService.getEvent(qt.X.TimelineScrubbed).pipe((0,Qt.Z)(20),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.percent=this.getPercent(n.time)})}handleDragStart(){this.wasPlaying=this.store.selectSnapshot(le.S.getAnimationPlaying),this.animationService.pause()}handleTrackClick(n){const t=this.store.selectSnapshot(le.S.getAnimationPlaying);t&&this.animationService.pause(),this.percent=n,this.scrubToPercent(n),setTimeout(()=>{t&&this.animationService.unpause()})}handleDragEnd(){this.wasPlaying&&this.animationService.play()}tick(n){this.percent=this.getPercent(n),this.changeDetetorRef.markForCheck()}getPercent(n){return this.timerange?.lastTime>0?n/this.timerange.lastTime*100:0}scrubToPercent(n){this.timerange?.lastTime>0&&this.animationService.scrub(n/100*this.timerange.lastTime)}}(zi=fi).\u0275fac=function(n){return new(n||zi)(e.rXU(l.il),e.rXU(ki.O),e.rXU(Pi.y),e.rXU(e.gRc))},zi.\u0275cmp=e.VBU({type:zi,selectors:[["app-view-scrubber"]],decls:1,vars:2,consts:[["data-test","viewMediaScrubber",3,"dragStarted","dragEnded","trackClicked","percentChanged","percent","accessibleLabel"]],template:function(n,t){1&n&&(e.j41(0,"app-view-slider",0),e.bIt("dragStarted",function(){return t.handleDragStart()})("dragEnded",function(){return t.handleDragEnd()})("trackClicked",function(_){return t.handleTrackClick(_)})("percentChanged",function(_){return t.handlePercentChanged(_)}),e.k0s()),2&n&&e.Y8G("percent",t.percent)("accessibleLabel",t.accessibleLabel)},dependencies:[f_],encapsulation:2}),Fn([(0,l.l6)(b.N.getSelectedChapterId),Hn("design:type",d.c)],fi.prototype,"selectedChapterId$",void 0),Fn([(0,l.l6)(le.S.getAnimationPlaying),Hn("design:type",d.c)],fi.prototype,"animationPlaying$",void 0),Fn([(0,l.l6)(b.N.getSelectedChapterReadyState),Hn("design:type",d.c)],fi.prototype,"chapterReadyState$",void 0),Fn([(0,l.l6)(m.Pf.getCanTouch),Hn("design:type",d.c)],fi.prototype,"canTouch$",void 0);var Xi,Bi,ke=c(59115);class Co{constructor(n){this.store=n}setPlaybackSpeed(n){this.store.dispatch(new Pe.Vs(n))}}(Xi=Co).\u0275fac=function(n){return new(n||Xi)(e.rXU(l.il))},Xi.\u0275cmp=e.VBU({type:Xi,selectors:[["app-view-playback-speed"]],decls:18,vars:4,consts:()=>{let o,n,t;return o=$localize`:␟4f8e5379083ddd28f3d57c885e7917c264af4f2a␟7596687563071324760:Playback Speed`,n=$localize`:␟4f8e5379083ddd28f3d57c885e7917c264af4f2a␟7596687563071324760:Playback Speed`,t=$localize`:␟077e90416bdae39a40441d0b94c5a9e8fcad4514␟3080483882937310852:Normal`,[["playbackMenu","matMenu"],n,t,["app-view-button","","buttonSize","small","data-test","viewPlaybackSpeed","matTooltip",o,"matTooltipPosition","above",3,"matMenuTriggerFor"],[1,"px-2"],[1,"sr-only"],[1,"text-xs"],["icon","angle-up","size","xs",1,"ml-2"],["mat-menu-item","",3,"click"]]},template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"button",3)(1,"div",4)(2,"span",5),e.pXf(3,1),e.k0s(),e.j41(4,"span",6),e.EFF(5),e.nI1(6,"async"),e.k0s(),e.nrm(7,"app-icon",7),e.k0s()(),e.j41(8,"mat-menu",null,0)(10,"button",8),e.bIt("click",function(){return e.eBV(i),e.Njj(t.setPlaybackSpeed(1))}),e.pXf(11,2),e.k0s(),e.j41(12,"button",8),e.bIt("click",function(){return e.eBV(i),e.Njj(t.setPlaybackSpeed(.5))}),e.EFF(13,"0.5"),e.k0s(),e.j41(14,"button",8),e.bIt("click",function(){return e.eBV(i),e.Njj(t.setPlaybackSpeed(.25))}),e.EFF(15,"0.25"),e.k0s(),e.j41(16,"button",8),e.bIt("click",function(){return e.eBV(i),e.Njj(t.setPlaybackSpeed(.1))}),e.EFF(17,"0.1"),e.k0s()()}if(2&n){const i=e.sdS(9);e.Y8G("matMenuTriggerFor",i),e.R7$(5),e.SpI("",e.bMT(6,2,t.playbackSpeed$),"x ")}},dependencies:[J.ri,ke.kk,ke.fb,ke.Cp,ye.oV,q.R,p.Jj],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(le.S.getPlaybackSpeed),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],Co.prototype,"playbackSpeed$",void 0);class Qn{constructor(n){this.store=n}handlePlayClick(){const n=this.store.selectSnapshot(le.S.getAnimationPlaying);this.store.dispatch(new Pe.dE(!n))}getAnimationPlayingTooltip(n){return n?$localize`Pause Animation`:$localize`Play Animation`}}(Bi=Qn).\u0275fac=function(n){return new(n||Bi)(e.rXU(l.il))},Bi.\u0275cmp=e.VBU({type:Bi,selectors:[["app-view-play"]],decls:7,vars:9,consts:[["app-view-button","","buttonSize","small","data-test","viewMediaPlay","matTooltipPosition","above",3,"click","matTooltip"],[1,"sr-only"],["size","lg","aria-hidden","true",3,"icon"]],template:function(n,t){1&n&&(e.j41(0,"button",0),e.nI1(1,"async"),e.bIt("click",function(){return t.handlePlayClick()}),e.j41(2,"span",1),e.EFF(3),e.nI1(4,"async"),e.k0s(),e.nrm(5,"app-icon",2),e.nI1(6,"async"),e.k0s()),2&n&&(e.Y8G("matTooltip",t.getAnimationPlayingTooltip(e.bMT(1,3,t.animationPlaying$))),e.R7$(3),e.JRh(t.getAnimationPlayingTooltip(e.bMT(4,5,t.animationPlaying$))),e.R7$(2),e.Y8G("icon",e.bMT(6,7,t.animationPlaying$)?"pause":"play"))},dependencies:[J.ri,ye.oV,q.R,p.Jj],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(le.S.getAnimationPlaying),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],Qn.prototype,"animationPlaying$",void 0);var ji,Si=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},Ti=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Pa=["mediaPlayButton"];function Ua(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handlePlayChapterFromStartClick())}),e.j41(1,"span",7),e.pXf(2,0),e.k0s(),e.nrm(3,"app-icon",8),e.k0s()}}function Da(o,n){1&o&&e.nrm(0,"app-view-scrubber",9)}function La(o,n){if(1&o&&(e.j41(0,"div",10),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.timeLabel," ")}}function $a(o,n){1&o&&e.nrm(0,"app-view-playback-speed")}class Pt{set autoFocus(n){n&&!this.triedToFocus&&setTimeout(()=>{this.playButton.focus()},0),this.triedToFocus=!0}constructor(n,t,i,_,s){this.animationService=n,this.engineService=t,this.viewService=i,this.store=_,this.changeDetectorRef=s,this.viewLayout=h.U,this.buttonSize=J.Mp.Default,this.showScrubber=!0,this.showSpeed=!0,this.triedToFocus=!1,this.ngUnsubscribe=new $.B,this.timeLabel="0:00 / 0:00",this.viewUI=h.U}ngOnInit(){this.initChapterListener(),this.initTimelineListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initChapterListener(){this.chapterReadyState$.pipe((0,y.p)(n=>!(0,R.isNil)(n)&&n.animation),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.timerange=this.animationService.getChapterTimeFrame(),this.tick(0)})}initTimelineListener(){this.engineService.getEvent(qt.X.TimelinePlaying).pipe((0,Qt.Z)(500),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.tick(n.time)})}handlePlayClick(){this.viewService.toggleAnimation()}handlePlayChapterFromStartClick(){this.viewService.playChapterFromStart()}setPlaybackSpeed(n){this.store.dispatch(new Pe.Vs(n))}tick(n){this.timerange&&(this.timeLabel=`${this.getFormattedTime(n)} / ${this.getFormattedTime(this.timerange.lastTime)}`,this.changeDetectorRef.markForCheck())}getFormattedTime(n){return`${Math.floor(Math.floor(n)/60)}:${(0,R.padStart)((Math.floor(n)%60).toString(),2,"0")}`}}(ji=Pt).\u0275fac=function(n){return new(n||ji)(e.rXU(ki.O),e.rXU(Pi.y),e.rXU(Z.z),e.rXU(l.il),e.rXU(e.gRc))},ji.\u0275cmp=e.VBU({type:ji,selectors:[["app-view-media-bar"]],viewQuery:function(n,t){if(1&n&&e.GBs(Pa,5),2&n){let i;e.mGM(i=e.lsd())&&(t.playButton=i.first)}},inputs:{buttonSize:"buttonSize",showScrubber:"showScrubber",showSpeed:"showSpeed",autoFocus:"autoFocus"},decls:10,vars:12,consts:()=>{let o,n;return o=$localize`:␟623c2eb512dd08c852fcda4f15379224c8c97133␟7851550536336238650:Play Chapter From Start`,n=$localize`:␟b3e95ffdcd71216e76228de060aaa7fd8662266c␟162780291567006895:Play Chapter from Start`,[n,["data-test","viewMediaBar",1,"view-media-bar"],["app-view-button","","buttonSize","small","data-test","viewMediaRestart","matTooltip",o,"matTooltipPosition","above",3,"click",4,"ngIf"],["class","view-media-bar__scrubber",4,"ngIf"],["class","view-media-bar__time","data-test","viewMediaTime",4,"ngIf"],[4,"ngIf"],["app-view-button","","buttonSize","small","data-test","viewMediaRestart","matTooltip",o,"matTooltipPosition","above",3,"click"],[1,"sr-only"],["size","lg","icon","step-backward","aria-hidden","true"],[1,"view-media-bar__scrubber"],["data-test","viewMediaTime",1,"view-media-bar__time"]]},template:function(n,t){if(1&n&&(e.j41(0,"div",1),e.nrm(1,"app-view-play"),e.DNE(2,Ua,4,0,"button",2),e.nI1(3,"async"),e.DNE(4,Da,1,0,"app-view-scrubber",3),e.nI1(5,"async"),e.DNE(6,La,2,1,"div",4),e.nI1(7,"async"),e.DNE(8,$a,1,0,"app-view-playback-speed",5),e.nI1(9,"async"),e.k0s()),2&n){let i,_,s,a;e.R7$(2),e.Y8G("ngIf","full"===(null==(i=e.bMT(3,4,t.mediaUI$))?null:i.template)),e.R7$(2),e.Y8G("ngIf","full"===(null==(_=e.bMT(5,6,t.mediaUI$))?null:_.template)&&t.showScrubber),e.R7$(2),e.Y8G("ngIf","full"===(null==(s=e.bMT(7,8,t.mediaUI$))?null:s.template)&&t.showScrubber),e.R7$(2),e.Y8G("ngIf","full"===(null==(a=e.bMT(9,10,t.mediaUI$))?null:a.template)&&t.showSpeed)}},dependencies:[p.bT,J.ri,ye.oV,q.R,fi,Co,Qn,p.Jj],styles:[".view-media-bar[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;position:relative}.view-media-bar__scrubber[_ngcontent-%COMP%]{flex:1}.view-media-bar__scrubber--disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.view-media-bar__time[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:0 12px;font-size:12px;color:#374a68;height:100%;white-space:nowrap}.view-media-bar__playback[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;font-weight:600}"],changeDetection:0}),Si([(0,l.l6)(b.N.getSelectedChapterId),Ti("design:type",d.c)],Pt.prototype,"selectedChapterId$",void 0),Si([(0,l.l6)(b.N.getSelectedChapterReadyState),Ti("design:type",d.c)],Pt.prototype,"chapterReadyState$",void 0),Si([(0,l.l6)(le.S.getPlaybackSpeed),Ti("design:type",d.c)],Pt.prototype,"playbackSpeed$",void 0),Si([(0,l.l6)(m.Pf.getAutoplay),Ti("design:type",d.c)],Pt.prototype,"autoplay$",void 0),Si([(0,l.l6)(T.dF.getVisible(h.U.Audio)),Ti("design:type",d.c)],Pt.prototype,"audioVisible$",void 0),Si([(0,l.l6)(T.dF.getUIEntry(h.U.Media)),Ti("design:type",d.c)],Pt.prototype,"mediaUI$",void 0);var Fi,Yn=c(97352);function Ga(o,n){1&o&&e.nrm(0,"app-spinner",3)}function Wa(o,n){if(1&o&&(e.nrm(0,"app-icon",4),e.nI1(1,"async")),2&o){const t=e.XpG();e.Y8G("icon",e.bMT(1,1,t.muted$)?"volume-slash":"volume")}}class qn{get text(){return this.store.selectSnapshot(tt.S.getAudioMuted)?$localize`Unmute`:$localize`Mute`}constructor(n,t){this.store=n,this.mediaService=t,this.buttonSize="small",this.buttonShape="square",this.buttonTheme="transparent-fill"}handleClick(){const n=this.store.selectSnapshot(b.N.getSelectedChapter),t=!this.store.selectSnapshot(tt.S.getAudioMuted);if(this.store.dispatch(new Bn.O.SetAudioMuted(t)),t)this.mediaService.muteAudio();else if(this.mediaService.getPlayingAudio()?.length)this.mediaService.unmuteAudio(n.id);else{const _=this.store.selectSnapshot(m.Pf.getViewLanguage),s=this.store.selectSnapshot(m.Pf.getForceAudio);this.mediaService.getChapterAudioPlayer(n,_,s).then(()=>{this.mediaService.playChapterAudio(n.id)})}}}(Fi=qn).\u0275fac=function(n){return new(n||Fi)(e.rXU(l.il),e.rXU(xi.u))},Fi.\u0275cmp=e.VBU({type:Fi,selectors:[["app-view-audio-mute"]],inputs:{disabled:"disabled",buttonSize:"buttonSize",buttonShape:"buttonShape",buttonTheme:"buttonTheme"},decls:5,vars:13,consts:()=>{let o;return o=$localize`:␟17517742950bb7560a3ca4c8fa23122e16b56116␟3135353579204779711:mute audio`,[["type","button","app-view-button","","aria-label",o,"matTooltipPosition","above","data-test","viewAudioMute",1,"view-audio-mute",3,"click","buttonSize","buttonShape","buttonTheme","matTooltip","disabled"],["spinnerSize","small",4,"ngIf"],["appLogicalDir","","class","view-audio-mute__icon","aria-hidden","true",3,"icon",4,"ngIf"],["spinnerSize","small"],["appLogicalDir","","aria-hidden","true",1,"view-audio-mute__icon",3,"icon"]]},template:function(n,t){1&n&&(e.j41(0,"button",0),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("click",function(){return t.handleClick()}),e.DNE(3,Ga,1,0,"app-spinner",1)(4,Wa,2,3,"app-icon",2),e.k0s()),2&n&&(e.Y8G("buttonSize",t.buttonSize)("buttonShape",t.buttonShape)("buttonTheme",t.buttonTheme)("matTooltip",t.text)("disabled",t.disabled),e.BMQ("aria-pressed",!1===e.bMT(1,9,t.muted$))("data-test-muted",e.bMT(2,11,t.muted$)),e.R7$(3),e.Y8G("ngIf",t.disabled),e.R7$(),e.Y8G("ngIf",!t.disabled))},dependencies:[p.bT,J.ri,ye.oV,q.R,Yn.tI,Ot.e,p.Jj],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(tt.S.getAudioMuted),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],qn.prototype,"muted$",void 0);let S_=(()=>{var o;class n{constructor(){}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-button-loader"]],decls:5,vars:0,consts:()=>{let t,i,_;return t=$localize`:␟b13403343605d44ebc315fb7b618d8d859410163␟306128254471360973:Interact in 3D`,i=$localize`:␟b13403343605d44ebc315fb7b618d8d859410163␟306128254471360973:Interact in 3D`,_=$localize`:␟b13403343605d44ebc315fb7b618d8d859410163␟306128254471360973:Interact in 3D`,[_,["type","button","aria-label",t,"type","button",1,"button-loader"],[1,"button-loader__button"],["src","assets/images/widget/loading_experience/interact-in-3d-arrow.svg","alt",i,1,"button-loader__3d-arrow"],[1,"button-loader__label"]]},template:function(i,_){1&i&&(e.j41(0,"button",1)(1,"div",2),e.nrm(2,"img",3),e.j41(3,"div",4),e.pXf(4,0),e.k0s()()())},styles:[".button-loader[_ngcontent-%COMP%]{border:0;background:#0003;display:flex;position:fixed;justify-content:center;align-items:center;inset:0;width:100%;height:100%;transition:background-color .25s,opacity .25s;z-index:10000}.button-loader[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:#0003}@media print{.button-loader[_ngcontent-%COMP%]{display:none}}.button-loader[_ngcontent-%COMP%]:focus   .button-loader__button[_ngcontent-%COMP%], .button-loader[_ngcontent-%COMP%]:hover   .button-loader__button[_ngcontent-%COMP%]{background-color:#2d72dc;transform:scale(1.1)}.button-loader[_ngcontent-%COMP%]:focus   .button-loader__3d-arrow[_ngcontent-%COMP%], .button-loader[_ngcontent-%COMP%]:hover   .button-loader__3d-arrow[_ngcontent-%COMP%]{transform:scale(1.2)}.button-loader__button[_ngcontent-%COMP%]{display:flex;padding:12px 28px;border-radius:32px;align-items:center;transition:transform .25s,background-color .25s;background-color:#101823cc}.button-loader__3d-arrow[_ngcontent-%COMP%]{transition:transform .25s;margin-inline-end:4px}.button-loader__label[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;color:#fff;font-weight:600;margin-inline-start:4px}"],changeDetection:0}),n})(),T_=(()=>{var o;class n{constructor(){}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-hand-loader"]],decls:6,vars:0,consts:()=>{let t,i,_;return t=$localize`:␟b13403343605d44ebc315fb7b618d8d859410163␟306128254471360973:Interact in 3D`,i=$localize`:␟b13403343605d44ebc315fb7b618d8d859410163␟306128254471360973:Interact in 3D`,_=$localize`:␟b13403343605d44ebc315fb7b618d8d859410163␟306128254471360973:Interact in 3D`,[_,["type","button","aria-label",t,1,"hand-loader"],[1,"hand-loader__container"],[1,"hand-loader__circle"],["src","assets/images/widget/loading_experience/interact-in-3d-hand.svg","alt",i,1,"hand-loader__3d-hand"],[1,"hand-loader__label"]]},template:function(i,_){1&i&&(e.j41(0,"button",1)(1,"div",2),e.nrm(2,"div",3)(3,"img",4),e.j41(4,"div",5),e.pXf(5,0),e.k0s()()())},styles:[".hand-loader[_ngcontent-%COMP%]{border:0;background:#0003;display:flex;position:fixed;justify-content:center;align-items:center;inset:0;width:100%;height:100%;transition:background-color .25s,opacity .25s;z-index:10000}.hand-loader[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:#0003}@keyframes _ngcontent-%COMP%_handKeyframes{0%{transform:scale(1.2)}25%{transform:scale(1)}40%{transform:scale(1)}60%{transform:scale(1.2)}to{transform:scale(1.2)}}@keyframes _ngcontent-%COMP%_circleKeyframes{0%{transform:scale(0)}20%{transform:scale(0);opacity:1}to{transform:scale(1);opacity:0}}.hand-loader[_ngcontent-%COMP%]:focus   .hand-loader__3d-hand[_ngcontent-%COMP%], .hand-loader[_ngcontent-%COMP%]:hover   .hand-loader__3d-hand[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px #2d72dc)}.hand-loader__container[_ngcontent-%COMP%]{position:relative;width:200px;height:200px}.hand-loader__circle[_ngcontent-%COMP%]{background-color:#fff;position:absolute;left:50%;margin-left:-40.5px;margin-top:-1.5px;width:70px;height:70px;border-radius:50%;animation:_ngcontent-%COMP%_circleKeyframes 2s infinite}.hand-loader__3d-hand[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_handKeyframes 2s ease-in-out infinite;position:absolute;height:96px;width:86px;left:50%;margin-left:-43px;margin-top:27px;transition:filter .3s ease-out}.hand-loader__label[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;font-weight:600;color:#fff;text-shadow:0px 1px 5px black;bottom:40px;position:absolute;text-align:center;width:100%}"],changeDetection:0}),n})();const za=["circle"],Xa=["progressCircle"],Ba=["progressContainer"];let b_=(()=>{var o;class n{get percent(){return this._percent}set percent(i){null!=i&&(this._percent=i,this.setProgress(this.percent))}constructor(i){this.renderer=i,this.ngUnsubscribe=new $.B,this._percent=0}ngOnInit(){this.initSizeObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.updateDimensions()}initSizeObserver(){(0,Ve.R)(window,"resize").pipe((0,Be.B)(10),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.updateDimensions()})}calculateRadius(){return this.getCircleWidth()/2}getCircleWidth(){return this.circleRef.nativeElement.offsetWidth}getRadius(){return this.progressCircleRef.nativeElement.r.baseVal.value}getCircumference(){return 2*this.getRadius()*Math.PI}getOffset(i=100){const _=this.getCircumference();return _-i/100*_}setProgress(i=0){i>=100&&(i=100);const _=this.getCircumference(),s=this.getOffset(i);this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${_} ${_}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",`${s}`)}updateDimensions(){const i=this.calculateRadius();this.renderer.setAttribute(this.progressContainerRef.nativeElement,"width",""+2*i),this.renderer.setAttribute(this.progressContainerRef.nativeElement,"height",""+2*i),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"r",""+(i-6)),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"cx",`${i}`),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"cy",`${i}`);const _=this.getCircumference();this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${_} ${_}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",`${_}`),setTimeout(()=>{this.renderer.setStyle(this.progressCircleRef.nativeElement,"transition","stroke-dashoffset 300ms")})}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(e.sFG))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-play-loader"]],viewQuery:function(i,_){if(1&i&&(e.GBs(za,7),e.GBs(Xa,7),e.GBs(Ba,7)),2&i){let s;e.mGM(s=e.lsd())&&(_.circleRef=s.first),e.mGM(s=e.lsd())&&(_.progressCircleRef=s.first),e.mGM(s=e.lsd())&&(_.progressContainerRef=s.first)}},inputs:{percent:"percent"},decls:10,vars:0,consts:()=>{let t,i;return t=$localize`:␟b13403343605d44ebc315fb7b618d8d859410163␟306128254471360973:Interact in 3D`,i=$localize`:␟4b03875d535c300d85a81c17105d24d85adadbae␟9093351263643113653:3D`,[["circle",""],["progressContainer",""],["progressCircle",""],i,["type","button","aria-label",t,1,"play-loader"],[1,"play-loader__circle"],[1,"play-loader__ring"],[1,"play-loader__ring-inner"],["icon","play",1,"play-loader__icon"],[1,"play-loader__label"]]},template:function(i,_){1&i&&(e.j41(0,"button",4)(1,"div",5,0),e.qSk(),e.j41(3,"svg",6,1),e.nrm(5,"circle",7,2),e.k0s(),e.joV(),e.nrm(7,"app-icon",8),e.j41(8,"div",9),e.pXf(9,3),e.k0s()()())},dependencies:[q.R],styles:[".play-loader[_ngcontent-%COMP%]{--buttonSize: 35vw;border:0;background:#0003;display:flex;position:fixed;justify-content:center;align-items:center;inset:0;width:100%;height:100%;transition:background-color .25s,opacity .25s;z-index:10000}.play-loader[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:#0003}.play-loader[_ngcontent-%COMP%]:focus   .play-loader__circle[_ngcontent-%COMP%], .play-loader[_ngcontent-%COMP%]:hover   .play-loader__circle[_ngcontent-%COMP%]{background:#fffc;transform:scale(1.1)}.play-loader[_ngcontent-%COMP%]:focus   .play-loader__icon[_ngcontent-%COMP%], .play-loader[_ngcontent-%COMP%]:hover   .play-loader__icon[_ngcontent-%COMP%]{color:#2d72dc;transform:scale(1.2)}.play-loader[_ngcontent-%COMP%]:focus   .play-loader__label[_ngcontent-%COMP%], .play-loader[_ngcontent-%COMP%]:hover   .play-loader__label[_ngcontent-%COMP%]{color:#fff}.play-loader[_ngcontent-%COMP%]:focus   .play-loader__ring[_ngcontent-%COMP%], .play-loader[_ngcontent-%COMP%]:hover   .play-loader__ring[_ngcontent-%COMP%]{stroke:#2d72dc}.play-loader__circle[_ngcontent-%COMP%]{width:var(--buttonSize);height:var(--buttonSize);border-radius:50%;background-color:#101823cc;display:flex;align-items:center;justify-content:center;position:relative;transition:background-color .25s,color .25s,transform .25s}.play-loader__icon[_ngcontent-%COMP%]{font-size:calc(var(--buttonSize) / 2);color:#ffffffe6;transition:color .25s,transform .25s;margin-right:-10%}.play-loader__label[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:2;font-weight:600}.play-loader__ring[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:3;stroke-width:4;stroke:#fff;fill:transparent;transform:rotate(-90deg)}@media (min-width: 600px){.play-loader__circle[_ngcontent-%COMP%]{width:160px;height:160px}.play-loader__icon[_ngcontent-%COMP%]{font-size:80px}}"],changeDetection:0}),n})();var Mo=c(33013),qe=c(43753),Hi=c(76774),Kn=c(24552),v_=(c(24484),c(5951)),Qi=c(86234),O_=c(78109),ja=c(77242),Fa=c(41640);function Ha(o,n){if(1&o&&(e.j41(0,"app-list-item")(1,"div",1),e.EFF(2),e.k0s()()),2&o){const t=n.$implicit;e.R7$(),e.BMQ("data-id",t.id),e.R7$(),e.JRh(t.label)}}let w_=(()=>{var o;class n{get objectIds(){return this._objectIds}set objectIds(i){this._objectIds=i;const _=this.store.selectSnapshot(le.S.getViewGraph);this.nodes=this.graphService.getNodes(_,i),this.changeRef.markForCheck()}constructor(i,_,s){this.store=i,this.graphService=_,this.changeRef=s}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(l.il),e.rXU(O_.w),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-quiz-object-tree"]],inputs:{objectIds:"objectIds"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"text-sm","my-1"]],template:function(i,_){1&i&&(e.j41(0,"app-list"),e.DNE(1,Ha,3,2,"app-list-item",0),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngForOf",_.nodes))},dependencies:[p.Sq,ja.s,Fa.P],changeDetection:0}),n})();var Qa=c(91442),Ya=c(57743);let I_=(()=>{var o;class n{constructor(){}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-quiz-answer-number"]],inputs:{number:"number"},decls:3,vars:1,consts:[[1,"number","text-2xs"]],template:function(i,_){1&i&&(e.j41(0,"div",0)(1,"div"),e.EFF(2),e.k0s()()),2&i&&(e.R7$(2),e.JRh(_.number))},styles:[".number[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;height:20px;color:#131c2a;border:1px solid rgba(55,74,104,.5);border-radius:50%}"],changeDetection:0}),n})();var Yi;function Za(o,n){if(1&o&&(e.j41(0,"div",3)(1,"div",4),e.nrm(2,"app-view-quiz-answer-number",5),e.k0s(),e.j41(3,"div",6),e.nrm(4,"app-quiz-label-anatomy-select",7),e.k0s()()),2&o){const t=n.index,i=e.XpG();e.R7$(2),e.Y8G("number",t+1),e.R7$(2),e.Y8G("options",i.options)("formControlName",t)}}class yo{get options(){return this._options}set options(n){(0,R.isEqual)(n,this._options)||(this._options=n,this.buildFormOptions(n))}constructor(n){this.formBuilder=n,this.valueChange=new e.bkB,this.ngUnsubscribe=new $.B,this._options=[],this.form=this.formBuilder.group({options:this.formBuilder.array([])}),this.optionsArray=this.form.get("options")}ngOnInit(){this.initFormListeners(),this.init()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initFormListeners(){this.form.valueChanges.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(({options:n})=>{this.valueChange.next(n)})}init(){this.activeSubmission$.pipe((0,y.p)(n=>!(0,R.isNil)(n)&&!(0,R.isNil)(n.answer)),(0,pi.J)(),(0,g.Q)(this.ngUnsubscribe)).subscribe(([n,t])=>{const i=(0,Qa.R)(n.answer||[],t.answer||[],"");(0,R.isEqual)(t,i)||this.form.patchValue({options:i||[]})}),this.activeSubmission$.pipe((0,y.p)(n=>!(0,R.isNil)(n)&&!(0,R.isNil)(n.answer)&&Array.isArray(n.answer)),(0,Ke.F)((n,t)=>(0,R.isEqual)(n,t)),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{const i=n.answer;(0,R.isEqual)(this.form.value.options,i)||this.form.patchValue({options:i},{emitEvent:!1,onlySelf:!0})})}buildFormOptions(n){this.optionsArray.clear(),n.forEach(()=>{this.optionsArray.push(this.formBuilder.control(""))}),this.optionsArray.setValue(n.map(()=>""))}}(Yi=yo).\u0275fac=function(n){return new(n||Yi)(e.rXU(H.ze))},Yi.\u0275cmp=e.VBU({type:Yi,selectors:[["app-view-quiz-label-anatomy"]],inputs:{options:"options"},outputs:{valueChange:"valueChange"},decls:3,vars:2,consts:[[1,"options",3,"formGroup"],["formArrayName","options"],["class","options__item","data-test","questionAnswer",4,"ngFor","ngForOf"],["data-test","questionAnswer",1,"options__item"],[1,"mr-2"],[3,"number"],[1,"options__item-select"],[3,"options","formControlName"]],template:function(n,t){1&n&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,Za,5,3,"div",2),e.k0s()()),2&n&&(e.Y8G("formGroup",t.form),e.R7$(2),e.Y8G("ngForOf",t.options))},dependencies:[p.Sq,H.BC,H.cb,H.j4,H.JD,H.v8,Ya.w,I_],styles:[".options__item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin-bottom:12px}.options__item-select[_ngcontent-%COMP%]{border:1px solid #96a8c0;border-radius:4px;flex:1 1 auto}"],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(O.j.getActiveSubmission),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],yo.prototype,"activeSubmission$",void 0);var bi,C_=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},M_=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function Ja(o,n){if(1&o&&(e.j41(0,"mat-radio-button",8),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.label," ")}}function er(o,n){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"mat-radio-group",6),e.bIt("change",function(_){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleMultipleChoiceChange(_))}),e.DNE(2,Ja,2,2,"mat-radio-button",7),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",t.question.data.options)}}function tr(o,n){if(1&o&&(e.j41(0,"div",10),e.nrm(1,"app-view-quiz-object-tree",11),e.k0s()),2&o){const t=e.XpG(3);e.R7$(),e.Y8G("objectIds",t.question.data.correctAnswer)}}function ir(o,n){if(1&o&&(e.j41(0,"div"),e.DNE(1,tr,2,1,"div",9),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.question.data.showAnswerList)}}function nr(o,n){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"app-view-quiz-label-anatomy",12),e.bIt("valueChange",function(_){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleLabelAnatomyChanges(_))}),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(),e.Y8G("options",t.question.data.options)}}function or(o,n){if(1&o&&(e.j41(0,"div",1)(1,"div",2),e.nrm(2,"app-content-blocks",3),e.k0s(),e.j41(3,"div",4),e.DNE(4,er,3,1,"div",5)(5,ir,2,1,"div",5)(6,nr,2,1,"div",5),e.k0s()()),2&o){const t=e.XpG();e.R7$(2),e.Y8G("contentBlocks",t.question.questionPrompt),e.R7$(),e.Y8G("ngSwitch",t.question.type),e.R7$(),e.Y8G("ngSwitchCase",t.QuestionType.MultipleChoice),e.R7$(),e.Y8G("ngSwitchCase",t.QuestionType.SelectAnatomy),e.R7$(),e.Y8G("ngSwitchCase",t.QuestionType.LabelAnatomy)}}class Zn{get question(){return this._question}set question(n){this._question=n,this.initQuestionListeners()}get value(){return this._value}set value(n){this._value=n,this.onChange(n)}constructor(n,t){this.changeRef=n,this.viewService=t,this.disabled=!1,this.QuestionType=qe.Q5,this.ngUnsubscribe=new $.B}handleMultipleChoiceChange(n){this.writeValue(n.value)}handleLabelAnatomyChanges(n){this.writeValue(n)}initQuestionListeners(){switch(this.question.type){case qe.Q5.SelectAnatomy:this.initSelectAnatomyListeners();break;case qe.Q5.Instructions:this.initInstructions()}}initSelectAnatomyListeners(){this.checkedNodesIds$.pipe((0,Ke.F)((n,t)=>(0,R.isEqual)(n,t)),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.writeValue(n),this.changeRef.markForCheck()})}initInstructions(){setTimeout(()=>{this.writeValue("-"),this.changeRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onChange(n){}onTouched(){}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}writeValue(n){this.value=n}setDisabledState(n){this.disabled=n}}(bi=Zn).\u0275fac=function(n){return new(n||bi)(e.rXU(e.gRc),e.rXU(Z.z))},bi.\u0275cmp=e.VBU({type:bi,selectors:[["app-view-quiz-question"]],inputs:{question:"question",value:"value"},features:[e.Jv_([{provide:H.kq,useExisting:(0,e.Rfq)(()=>bi),multi:!0}])],decls:1,vars:1,consts:[["class","view-quiz-question text-sm mb-8","data-test","question",4,"ngIf"],["data-test","question",1,"view-quiz-question","text-sm","mb-8"],["data-test","questionPrompt",1,"view-quiz-question__prompt"],[3,"contentBlocks"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"flex","flex-col",3,"change"],["data-test","questionAnswer","class","view-quiz-question__option",3,"value",4,"ngFor","ngForOf"],["data-test","questionAnswer",1,"view-quiz-question__option",3,"value"],["class","ml-3",4,"ngIf"],[1,"ml-3"],[3,"objectIds"],[3,"valueChange","options"]],template:function(n,t){1&n&&e.DNE(0,or,7,5,"div",0),2&n&&e.Y8G("ngIf",t.question)},dependencies:[p.Sq,p.bT,p.ux,p.e1,v_.VT,v_._g,Qi.l,w_,yo],styles:[".view-quiz-question__prompt{margin-bottom:8px}.view-quiz-question__option{font-size:.875rem;line-height:1.25rem;padding:12px;white-space:normal!important}.view-quiz-question__option>*{white-space:normal!important}\n"],encapsulation:2,changeDetection:0}),C_([(0,l.l6)(di.z.getCheckedNodeIds),M_("design:type",d.c)],Zn.prototype,"checkedNodesIds$",void 0),C_([(0,l.l6)(O.j.getActiveSubmission),M_("design:type",d.c)],Zn.prototype,"activeSubmission$",void 0);var y_=c(13976);const _r=["*"];function sr(o,n){1&o&&e.nrm(0,"app-icon",6)}function ar(o,n){1&o&&e.nrm(0,"app-icon",7)}function rr(o,n){1&o&&(e.j41(0,"span",8),e.nrm(1,"span",9),e.k0s())}let Ao=(()=>{var o;class n{constructor(){}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-quiz-answer-option"]],inputs:{correct:"correct"},ngContentSelectors:_r,decls:7,vars:7,consts:[["data-test","answerOptionContainer",1,"option"],[1,"flex","relative",3,"ngSwitch"],["class","option__icon option__icon--correct","style","font-size: 20px","icon","check-circle",4,"ngSwitchCase"],["class","option__icon option__icon--incorrect","style","font-size: 20px","icon","times-circle",4,"ngSwitchCase"],["class","option__icon",4,"ngSwitchDefault"],[1,"pl-2"],["icon","check-circle",1,"option__icon","option__icon--correct",2,"font-size","20px"],["icon","times-circle",1,"option__icon","option__icon--incorrect",2,"font-size","20px"],[1,"option__icon"],[1,"mat-radio-outer-circle"]],template:function(i,_){1&i&&(e.NAR(),e.j41(0,"div",0)(1,"div",1),e.DNE(2,sr,1,0,"app-icon",2)(3,ar,1,0,"app-icon",3)(4,rr,2,0,"span",4),e.j41(5,"div",5),e.SdG(6),e.k0s()()()),2&i&&(e.AVh("option--correct",!0===_.correct)("option--incorrect",!1===_.correct),e.R7$(),e.Y8G("ngSwitch",_.correct),e.R7$(),e.Y8G("ngSwitchCase",!0),e.R7$(),e.Y8G("ngSwitchCase",!1))},dependencies:[p.ux,p.e1,p.fG,q.R],styles:[".option[_ngcontent-%COMP%]{padding:12px;border-radius:4px;margin-bottom:8px;color:#131c2a}.option--correct[_ngcontent-%COMP%]{border:1px solid #83e692;background-color:#f0fff0}.option--incorrect[_ngcontent-%COMP%]{border:1px solid #f44336;background-color:#ffe2db}.option__icon[_ngcontent-%COMP%]{position:relative;flex:0 0 20px;justify-content:center}.option__icon--correct[_ngcontent-%COMP%]{color:#83e692}.option__icon--incorrect[_ngcontent-%COMP%]{color:#f44336}"],changeDetection:0}),n})();function lr(o,n){if(1&o&&(e.j41(0,"div")(1,"app-view-quiz-answer-option",1)(2,"div"),e.EFF(3),e.k0s()()()),2&o){const t=n.$implicit,i=e.XpG();e.R7$(),e.Y8G("correct",i.isOptionAnswerCorrect(i.question,t.value,i.answer)),e.R7$(2),e.SpI(" ",t.label," ")}}let cr=(()=>{var o;class n{constructor(){}ngOnInit(){}isOptionAnswerCorrect(i,_,s){const a=(0,Hi.Br)(i,[_]);return _===s[0]||a?a:void 0}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-quiz-multiple-choice-answer"]],inputs:{question:"question",answer:"answer",summary:"summary"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"correct"]],template:function(i,_){1&i&&e.DNE(0,lr,4,2,"div",0),2&i&&e.Y8G("ngForOf",_.question.data.options)},dependencies:[p.Sq,Ao],changeDetection:0}),n})();var dr=c(20458);function pr(o,n){1&o&&(e.qex(0),e.pXf(1,1),e.bVm())}function ur(o,n){1&o&&(e.qex(0),e.pXf(1,2),e.bVm())}function hr(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",11)(1,"button",12),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleSelectedObjectsClick(_.answer))}),e.pXf(2,3),e.k0s(),e.j41(3,"button",13),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleCorrectObjectsClick(_.question.data.correctAnswer))}),e.EFF(4," Highlight Correct Answer "),e.k0s()()}}let gr=(()=>{var o;class n{get isCorrect(){return(0,Hi.Br)(this.question,this.answer)}constructor(i,_,s){this.graphService=i,this.viewService=_,this.store=s}fadeNonselected(i){const _=this.store.selectSnapshot(le.S.getViewGraph),s=this.graphService.getInverseSelection(_,i),a=this.graphService.getNodes(_,s);this.store.dispatch(new bt.Jp(dr.EC,a.map(r=>r.id)))}handleCorrectObjectsClick(i){this.highlightNodes(i)}handleSelectedObjectsClick(i){this.highlightNodes(i)}highlightNodes(i){const _=i.filter(s=>s&&""!==s);this.resetSelectAndFade(),this.repositionCamera(_),this.fadeNonselected(_)}repositionCamera(i){1===i.length?this.store.dispatch(new Pe.W6(i[0])):this.viewService.resetCamera()}resetSelectAndFade(){this.viewService.clearSelectedNodes(),this.viewService.clearFadedNodes()}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(O_.w),e.rXU(Z.z),e.rXU(l.il))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-quiz-select-anatomy-answer"]],inputs:{question:"question",answer:"answer",summary:"summary"},decls:11,vars:5,consts:()=>{let t,i,_;return t=$localize`:␟4274205d4ae04ab28b67840a011bbbc3c207f608␟3164453258197222114:Correct! You selected:`,i=$localize`:␟86fadbb89f45c1d0fad1eae1936d43d4e59e065a␟682829795532587629:Incorrect! You selected:`,_=$localize`:␟a5dfb5defc5b4f7d9d17e3175f3a2832a3380187␟2737293371102556031: Highlight My Answer `,[["selectAnatomyAnswer",""],t,i,_,[3,"correct"],[1,"flex","flex-col"],[1,"font-semibold"],[4,"ngIf"],[1,"mt-2","ml-2"],[3,"objectIds"],["class","flex flex-col gap-2 mt-4",4,"ngIf"],[1,"flex","flex-col","gap-2","mt-4"],["app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","light-gray-fill","data-test","highlightUserAnswers",1,"w-full",3,"click"],["app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","light-gray-fill","data-test","highlightCorrectAnswers",1,"w-full",3,"click"]]},template:function(i,_){if(1&i&&(e.j41(0,"div")(1,"app-view-quiz-answer-option",4,0)(3,"div",5)(4,"div")(5,"span",6),e.DNE(6,pr,2,0,"ng-container",7)(7,ur,2,0,"ng-container",7),e.k0s()(),e.j41(8,"div",8),e.nrm(9,"app-view-quiz-object-tree",9),e.k0s()()(),e.DNE(10,hr,5,0,"div",10),e.k0s()),2&i){const s=e.sdS(2);e.R7$(),e.Y8G("correct",_.isCorrect),e.R7$(5),e.Y8G("ngIf",s.correct),e.R7$(),e.Y8G("ngIf",!s.correct),e.R7$(2),e.Y8G("objectIds",_.answer),e.R7$(),e.Y8G("ngIf",!_.summary&&!_.isCorrect)}},dependencies:[p.bT,J.ri,w_,Ao],changeDetection:0}),n})();function mr(o,n){if(1&o&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.label.title," ")}}function Er(o,n){if(1&o&&(e.j41(0,"div"),e.pXf(1,2),e.k0s(),e.j41(2,"div",11),e.pXf(3,3),e.k0s()),2&o){const t=e.XpG(),i=t.$implicit,_=t.index,s=e.XpG();e.R7$(),e.uP7(s.getSelectedUserOption(_).label.title.trim()),e.nnv(1),e.R7$(2),e.uP7(i.label.title.trim()),e.nnv(3)}}function fr(o,n){if(1&o&&(e.j41(0,"div",5)(1,"div",6),e.nrm(2,"app-view-quiz-answer-number",7),e.k0s(),e.j41(3,"div",8)(4,"app-view-quiz-answer-option",9,0),e.DNE(6,mr,2,1,"div",10)(7,Er,4,2,"ng-template",null,1,e.C5r),e.k0s()()()),2&o){const t=n.index,i=e.sdS(5),_=e.sdS(8),s=e.XpG();e.R7$(2),e.Y8G("number",t+1),e.R7$(2),e.Y8G("correct",s.isOptionAnswerCorrect(t)),e.R7$(2),e.Y8G("ngIf",i.correct)("ngIfElse",_)}}let Sr=(()=>{var o;class n{constructor(){}ngOnInit(){}isOptionAnswerCorrect(i){return this.answer[i]===this.question.data.correctAnswer[i]}getSelectedUserOption(i){const _=this.answer[i];return this.question.data.options.find(s=>s.value===_)}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-quiz-label-anatomy-answer"]],inputs:{question:"question",answer:"answer",summary:"summary"},decls:1,vars:1,consts:()=>{let t,i;return t=$localize`:␟a72b1c5957d49334a91017e69eb28a64b4794be9␟3931625009645654184:You selected ${"\ufffd0\ufffd"}:INTERPOLATION:.`,i=$localize`:␟68452fc86b9a1e10579d11cafee518846c2acf74␟7572660995305138875:This is the ${"\ufffd0\ufffd"}:INTERPOLATION:.`,[["answerOption",""],["falseBlock",""],t,i,["class","answers",4,"ngFor","ngForOf"],[1,"answers"],[1,"answers__number"],[3,"number"],[1,"answers__option"],[3,"correct"],[4,"ngIf","ngIfElse"],[1,"mt-1"]]},template:function(i,_){1&i&&e.DNE(0,fr,9,4,"div",4),2&i&&e.Y8G("ngForOf",_.question.data.options)},dependencies:[p.Sq,p.bT,Ao,I_],styles:[".answers[_ngcontent-%COMP%]{display:flex;flex-direction:row}.answers__number[_ngcontent-%COMP%]{border-top:1px solid transparent;margin-top:12px;margin-inline-end:8px}.answers__option[_ngcontent-%COMP%]{flex:1 1 auto}"],changeDetection:0}),n})();function Tr(o,n){if(1&o&&(e.j41(0,"div",7),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI("",t.questionNumber,".")}}function br(o,n){if(1&o&&(e.j41(0,"div"),e.nrm(1,"app-view-quiz-multiple-choice-answer",8),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("question",t.question)("answer",t.answer)("summary",t.summary)}}function vr(o,n){if(1&o&&(e.j41(0,"div"),e.nrm(1,"app-view-quiz-select-anatomy-answer",8),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("question",t.question)("answer",t.answer)("summary",t.summary)}}function Or(o,n){if(1&o&&(e.j41(0,"div"),e.nrm(1,"app-view-quiz-label-anatomy-answer",8),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("question",t.question)("answer",t.answer)("summary",t.summary)}}function wr(o,n){if(1&o&&(e.j41(0,"div",9),e.nrm(1,"app-content-blocks",3),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("contentBlocks",t.question.explanation)}}let A_=(()=>{var o;class n{constructor(i,_){this.store=i,this.contentBlocksService=_,this.QuestionType=qe.Q5,this.hasExplanation=!1}ngOnInit(){this.store.dispatch(new Rt.B.SetQuizPickMode("none")),this.hasExplanation=this.contentBlocksService.hasContentBlockText(this.question.explanation)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(l.il),e.rXU(y_.V))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-quiz-answer"]],inputs:{question:"question",questionNumber:"questionNumber",answer:"answer",summary:"summary"},decls:10,vars:7,consts:[["data-test","answer",1,"answer"],[1,"answer__prompt"],["class","mr-1",4,"ngIf"],[3,"contentBlocks"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","answer__explanation",4,"ngIf"],[1,"mr-1"],[3,"question","answer","summary"],[1,"answer__explanation"]],template:function(i,_){1&i&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,Tr,2,1,"div",2),e.j41(3,"div"),e.nrm(4,"app-content-blocks",3),e.k0s()(),e.j41(5,"div",4),e.DNE(6,br,2,3,"div",5)(7,vr,2,3,"div",5)(8,Or,2,3,"div",5),e.k0s(),e.DNE(9,wr,2,1,"div",6),e.k0s()),2&i&&(e.R7$(2),e.Y8G("ngIf",_.questionNumber),e.R7$(2),e.Y8G("contentBlocks",_.question.questionPrompt),e.R7$(),e.Y8G("ngSwitch",_.question.type),e.R7$(),e.Y8G("ngSwitchCase",_.QuestionType.MultipleChoice),e.R7$(),e.Y8G("ngSwitchCase",_.QuestionType.SelectAnatomy),e.R7$(),e.Y8G("ngSwitchCase",_.QuestionType.LabelAnatomy),e.R7$(),e.Y8G("ngIf",_.hasExplanation))},dependencies:[p.bT,p.ux,p.e1,Qi.l,cr,gr,Sr],styles:[".answer[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.answer__prompt[_ngcontent-%COMP%]{display:flex;padding-bottom:16px}.answer__explanation[_ngcontent-%COMP%]{padding-top:32px}"],changeDetection:0}),n})();var Ir=c(60391),Ut=c(11756),wt=c(16823),N_=c(21626),Cr=c(28577),vi=c(15877),No=c(65776),Mr=c(44867);let yr=(()=>{var o;class n{constructor(i,_,s){this.http=i,this.markdownService=_,this.store=s}downloadResultsPDF(i="",_="",s="",a,r){return this.http.post("/ws/mc/pdf",this.getPDFHTML(i,_,s,a,r),{responseType:"arraybuffer",headers:new N_.Lr({"Content-Type":"text/html; charset=utf-8"})}).pipe((0,Ue.T)(u=>{const f=new Blob([u],{type:"application/pdf"}),P=window.URL.createObjectURL(f),x=(s||"Quiz Results").replace(/ /g,"_").replace(/\W/g,"").toLowerCase(),z=document.createElement("a");return z.download=x,z.href=P,z.click(),!0}),(0,Cr.W)(()=>(0,vi.of)(!1)))}getPDFHTML(i,_,s,a,r){return`\n    <html>\n      <head>\n        <meta charset="utf-8">\n        <style>\n\n          @media print {\n\n            html {\n              font-family: Arial;\n            }\n\n            body {\n              margin: 0;\n            }\n\n            ol {\n              list-style-position: inside;\n              padding-left: 0;\n            }\n\n            header {\n              position: running(header);\n              width: 100%;\n            }\n\n            header > div {\n              display: flex;\n              justify-content: space-between;\n            }\n\n            @page {\n              size: letter portrait;\n              margin: 1in;\n              \n              @top-center {\n                content: element(header);\n                width: 100%;\n              }\n\n              @bottom-center {\n                content: "Page " counter(page) " of " counter(pages);\n                font-size: 10px;\n              }\n            }\n\n          }\n          \n        </style>\n      </head>\n      <body style="font-size: 12px">\n\n        <header>\n          <div style="margin-bottom: .05in">\n            <div style="font-weight: 900">${i}</div>\n            <div style="text-align: right">\n                <span style="font-weight: 900">Score: </span>\n                <span>${r.correctTotal} out of ${r.scorableTotal}</span>\n            </div>\n          </div>\n\n          <div>\n            <div>${_}</div>\n            <div style="text-align: right">\n              <span style="font-weight: 900">Percentage: </span>\n              <span>${r.score}%</span>\n            </div>\n          </div>\n        </header>\n\n        \x3c!-- PDF CONTENT --\x3e\n\n        <div style="font-weight: 900; margin-bottom: .05in">${s}</div>\n        <div style="font-size: 10px">QUIZ RESULTS</div>\n\n        <br />\n\n        ${this.createPDFResponses(a,r)}\n        \n      </body>\n    </html>\n    `}createPDFResponses(i,_){const s=i.filter(f=>f.type!==qe.Q5.Instructions),a=this.markdownService.renderer.list,r=this.markdownService.renderer.listitem;this.markdownService.renderer.list=f=>f.replace(/,$/,""),this.markdownService.renderer.listitem=f=>` ${f},`;const u=s.map(f=>{const P=this.getNormalizedAnswer(_.questionAnswers[f.id]);return this.createPDFResponse(f,P)}).join("\n      <br />\n      <br />\n    ");return this.markdownService.renderer.list=a,this.markdownService.renderer.listitem=r,`\n      <ol>\n        ${u}\n      </ol>\n    `}getNormalizedAnswer(i){return typeof i>"u"?[]:"string"==typeof i?[i]:i}createPDFResponse(i,_){let s=this.convertContentBlockArray(i.questionPrompt);i.type===qe.Q5.SelectAnatomy&&i.data.showAnswerList&&(s=`${s} ${this.printAnatomyList(i.data.correctAnswer)}.`);const a=(0,Hi.Br)(i,_);return`\n      <li style="font-weight: 900">\n        ${s}\n        <div style="font-weight: 400; margin-top: .1in; margin-left: .2in; line-height: .2in;">\n          <img src="${(a?"correct":"incorrect")+".svg"}" />\n          <span style="font-weight: 900; margin-left: .05in; margin-right: .05in">${a?"Correct!":"Incorrect!"}</span>\n          ${this.getResponseText(i,_,a)}\n        </div>\n        <p style="font-weight: 400; font-style: italic; margin-bottom: 0">\n          ${this.convertContentBlockArray(i.explanation)}\n        </p>\n      </li>\n    `}getResponseText(i,_,s){let a="";switch(i.type){case qe.Q5.MultipleChoice:a=`You selected: ${this.getMultipleChoiceLabel(i,_[0])}.`,s||(a=`${a} The correct answer is: ${this.getMultipleChoiceLabel(i,i.data.correctAnswer)}.`);break;case qe.Q5.LabelAnatomy:a=`You labeled the anatomy ${s?"correctly":"incorrectly. The correct answer is"}: ${this.printLabelList(i)}.`;break;case qe.Q5.SelectAnatomy:s||(a=`You selected: ${this.printAnatomyList(_)}.`)}return a}printAnatomyList(i){const _=this.store.selectSnapshot(le.S.getViewGraph);return i.map(s=>(0,Mr.dV)(_,s)?.label).join(", ")}printLabelList(i){return i.data.correctAnswer.map((_,s)=>`${s+1}. ${i.data.options.find(r=>r.value===_).label.title}`).join(", ")}getMultipleChoiceLabel(i,_){return i.data.options.find(a=>a.value===_)?.label}convertContentBlockArray(i){return i.filter(_=>_.type===No.m.Markdown).map(_=>{const s=this.markdownService.parse(_.markdown);return this.stripHTML(s)}).join("\n")}stripHTML(i){return(new DOMParser).parseFromString(i,"text/html").body.textContent||""}}return(o=n).\u0275fac=function(i){return new(i||o)(e.KVO(N_.Qq),e.KVO(j.Rl),e.KVO(l.il))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})();var R_=c(95416);const Ar=["progressCircle"],Nr=["*"],Rr=(o,n)=>({"progress--text-small":o,"progress--animate":n});function Vr(o,n){if(1&o&&(e.j41(0,"div",6),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.progress,"% ")}}function Pr(o,n){1&o&&(e.j41(0,"div",7),e.SdG(1),e.k0s())}let V_=(()=>{var o;class n{get progress(){return this._progress}set progress(i){this._progress=i,this.updateCircle()}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i}get diameter(){return this._diameter}set diameter(i){this._diameter=i}constructor(i,_){this.renderer=i,this.changeRef=_,this.textSize="default",this._progress=0,this.showPercent=!0,this.strokeColor="#2d72dc",this.fillColor="#ffffff",this.ringColor="#eaeff5",this._strokeWidth=8,this._diameter=120,this.fillOnComplete=!1,this.animate=!0}ngOnInit(){}ngAfterViewInit(){this.updateCircle()}updateCircle(){if(this.progressCircleRef){const _=2*this.progressCircleRef.nativeElement.r.baseVal.value*Math.PI,s=_-this.progress/100*_;this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${_} ${_}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",`${s}`)}this.changeRef.markForCheck()}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(e.sFG),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-progress-circle"]],viewQuery:function(i,_){if(1&i&&e.GBs(Ar,7),2&i){let s;e.mGM(s=e.lsd())&&(_.progressCircleRef=s.first)}},inputs:{textSize:"textSize",progress:"progress",showPercent:"showPercent",strokeColor:"strokeColor",fillColor:"fillColor",ringColor:"ringColor",strokeWidth:"strokeWidth",diameter:"diameter",fillOnComplete:"fillOnComplete",animate:"animate"},ngContentSelectors:Nr,decls:9,vars:20,consts:[["progressCircle",""],["data-test","progress",1,"progress",3,"ngClass"],["alt",""],[1,"progress__circle"],["class","progress__label","data-test","progressPercentage",4,"ngIf"],["class","progress__content","data-test","progressContent",4,"ngIf"],["data-test","progressPercentage",1,"progress__label"],["data-test","progressContent",1,"progress__content"]],template:function(i,_){1&i&&(e.NAR(),e.j41(0,"div",1),e.qSk(),e.j41(1,"svg",2)(2,"g"),e.nrm(3,"circle",3),e.k0s(),e.j41(4,"g"),e.nrm(5,"circle",3,0),e.k0s()(),e.DNE(7,Vr,2,1,"div",4)(8,Pr,2,0,"div",5),e.k0s()),2&i&&(e.Y8G("ngClass",e.l_i(17,Rr,"small"===_.textSize,_.animate)),e.R7$(),e.BMQ("width",_.diameter)("height",_.diameter),e.R7$(2),e.BMQ("stroke",_.ringColor)("stroke-width",_.strokeWidth)("fill",_.fillColor)("r",_.diameter/2-_.strokeWidth)("cx",_.diameter/2)("cy",_.diameter/2),e.R7$(2),e.BMQ("stroke",_.strokeColor)("stroke-width",_.strokeWidth)("fill",100===_.progress&&_.fillOnComplete?_.strokeColor:"transparent")("r",_.diameter/2-_.strokeWidth)("cx",_.diameter/2)("cy",_.diameter/2),e.R7$(2),e.Y8G("ngIf",_.showPercent),e.R7$(),e.Y8G("ngIf",!_.showPercent))},dependencies:[p.YU,p.bT],styles:[".progress[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.progress--animate[_ngcontent-%COMP%]   .progress__circle[_ngcontent-%COMP%]{transition:stroke-dashoffset .35s,fill .35s}.progress--small[_ngcontent-%COMP%]   .progress__label[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}.progress__ring[_ngcontent-%COMP%]{position:absolute;z-index:1}.progress__circle[_ngcontent-%COMP%]{transform:rotate(-90deg);transform-origin:50% 50%}.progress__label[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;font-weight:600;transform:translate(-50%,-50%);z-index:2;font-size:1.125rem;line-height:1.75rem}.progress__content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#fff;position:absolute}"],changeDetection:0}),n})();var qi,It=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},Ct=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function Ur(o,n){if(1&o&&(e.j41(0,"div",10)(1,"div",11),e.nrm(2,"app-progress-circle",12),e.j41(3,"div",13),e.pXf(4,0),e.k0s()()()),2&o){const t=e.XpG();e.R7$(2),e.Y8G("progress",null==t.quizScore?null:t.quizScore.score),e.R7$(2),e.uP7(null==t.quizScore?null:t.quizScore.correctTotal)(null==t.quizScore?null:t.quizScore.scorableTotal),e.nnv(4)}}function Dr(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleResultsClick())}),e.nrm(1,"app-icon",21),e.qex(2),e.pXf(3,1),e.bVm(),e.k0s()}}function Lr(o,n){1&o&&(e.qex(0),e.pXf(1,2),e.bVm())}function $r(o,n){1&o&&(e.qex(0),e.pXf(1,3),e.bVm())}function xr(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleToggleSummaryClick())}),e.DNE(1,Lr,2,0,"ng-container",23)(2,$r,2,0,"ng-container",23),e.k0s()}if(2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.showExplanation),e.R7$(),e.Y8G("ngIf",!t.showExplanation)}}function kr(o,n){if(1&o&&(e.j41(0,"div",26),e.nrm(1,"app-view-quiz-answer",27),e.k0s()),2&o){const t=n.$implicit,i=n.index,_=e.XpG(3);e.R7$(),e.Y8G("question",t)("questionNumber",i+1)("answer",null==_.quizScore?null:_.quizScore.questionAnswers[t.id])("summary",!0)}}function Gr(o,n){if(1&o&&(e.j41(0,"div",24),e.DNE(1,kr,2,4,"div",25),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.questions)}}function Wr(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleRestartClick())}),e.pXf(1,4),e.k0s()}}function zr(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",29),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleExitClick())}),e.pXf(1,5),e.k0s()}}function Xr(o,n){if(1&o&&(e.j41(0,"div",14),e.DNE(1,Dr,4,0,"button",15)(2,xr,3,2,"button",16)(3,Gr,2,1,"div",17)(4,Wr,2,0,"button",18),e.nI1(5,"async"),e.DNE(6,zr,2,0,"button",19),e.nI1(7,"async"),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.showSummaryEnabled&&t.showExplanationEnabled),e.R7$(),e.Y8G("ngIf",t.showSummaryEnabled&&t.showExplanationEnabled),e.R7$(),e.Y8G("ngIf",t.showExplanationEnabled&&t.showExplanation),e.R7$(),e.Y8G("ngIf",e.bMT(5,5,t.enableQuizRetake$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(7,7,t.quizLocked$))}}function Br(o,n){1&o&&(e.j41(0,"div",30),e.nrm(1,"app-spinner",31),e.k0s())}class _t{constructor(n,t,i,_){this.changeRef=n,this.quizService=t,this.quizPDFService=i,this.snackbar=_,this.questions=[],this.showSummaryEnabled=!1,this.showExplanationEnabled=!1,this.showExplanation=!1,this.loadingPDF=!1,this.ngUnsubscribe=new $.B,this.pdfInputs=new Ir.m(1)}ngOnInit(){this.initReviewListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.pdfInputs.complete()}initReviewListeners(){(0,Ae.z)([this.userFullName$,this.userEmail$,this.story$,this.questions$,this.submissions$]).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(([n,t,i,_,s])=>{this.questions=_,this.quizScore=(0,Hi.MH)(_,s),this.pdfInputs.next([n,t,i,_,this.quizScore]),this.changeRef.markForCheck()}),this.quizSettings$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(({showSummary:n,showExplanation:t})=>{this.showSummaryEnabled=!1!==n,this.showExplanationEnabled=!1!==t,this.changeRef.markForCheck()})}handleToggleSummaryClick(){this.showExplanation=!this.showExplanation}handleResultsClick(){this.loadingPDF=!0,this.pdfInputs.pipe((0,ut.s)(1),(0,Ut.Z)(([n,t,i,_,s])=>this.quizPDFService.downloadResultsPDF(n,t,i.displayName.toUpperCase(),_,s)),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.loadingPDF=!1,n||this.snackbar.open("Error opening the results PDF."),this.changeRef.markForCheck()})}handleRestartClick(){this.quizService.resetQuiz(),this.quizService.startQuiz()}handleExitClick(){this.quizService.exitQuiz()}}(qi=_t).\u0275fac=function(n){return new(n||qi)(e.rXU(e.gRc),e.rXU($i.k),e.rXU(yr),e.rXU(R_.UG))},qi.\u0275cmp=e.VBU({type:qi,selectors:[["app-view-quiz-review"]],decls:4,vars:3,consts:()=>{let o,n,t,i,_,s;return o=$localize`:␟2bba53403aac78f4e44cdb7a38216c93a0a33ab7␟1432800600767014651: You answered ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: questions correctly. `,n=$localize`:␟f57ccc4608c3db5d46b9ebd75467a841f5e7599e␟1835089687895717278:Download Results as PDF`,t=$localize`:␟1f4dec9e6be75af098a539e0eedf41f86f2c8c38␟6268957596815378507:Hide Summary`,i=$localize`:␟96b2e76703c8dea4c7c173b97fff2a10f45c5907␟3866918107243977386:Show Summary`,_=$localize`:␟bf6eb666b88af02c4793aba88435a71da36ba5d2␟5529862952779485373: Take Again `,s=$localize`:␟19411ab6ff55d914e6f229a14e03ffc1127ffccf␟4002907482219878023: Exit Quiz `,[o,n,t,i,_,s,["data-test","quizReview",1,"review"],["class","review__container","data-test","quizDownload",4,"ngIf"],["class","flex flex-col gap-2",4,"ngIf"],["class","mt-10 review__loading",4,"ngIf"],["data-test","quizDownload",1,"review__container"],["data-test","quizSummary",1,"text-center"],["strokeWidth","12","diameter","96",3,"progress"],[1,"mt-5","mb-8","text-xs","font-semibold"],[1,"flex","flex-col","gap-2"],["class","w-full","app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","light-gray-fill","data-test","quizGetResultsButton",3,"click",4,"ngIf"],["class","w-full","app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","light-gray-fill","data-test","quizToggleSummaryButton",3,"click",4,"ngIf"],["class","mt-3 review__summary","data-test","quizExplanation",4,"ngIf"],["class","w-full mt-8","app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","blue-fill","data-test","quizTakeAgainButton",3,"click",4,"ngIf"],["class","w-full mt-3","app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","light-gray-fill","data-test","quizExitButton",3,"click",4,"ngIf"],["app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","light-gray-fill","data-test","quizGetResultsButton",1,"w-full",3,"click"],["icon","download",1,"mr-1"],["app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","light-gray-fill","data-test","quizToggleSummaryButton",1,"w-full",3,"click"],[4,"ngIf"],["data-test","quizExplanation",1,"mt-3","review__summary"],["class","my-6",4,"ngFor","ngForOf"],[1,"my-6"],[3,"question","questionNumber","answer","summary"],["app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","blue-fill","data-test","quizTakeAgainButton",1,"w-full","mt-8",3,"click"],["app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","light-gray-fill","data-test","quizExitButton",1,"w-full","mt-3",3,"click"],[1,"mt-10","review__loading"],["size","huge","direction","vertical","label","Loading"]]},template:function(n,t){1&n&&(e.j41(0,"div",6),e.DNE(1,Ur,5,3,"div",7)(2,Xr,8,9,"div",8)(3,Br,2,0,"div",9),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngIf",t.showSummaryEnabled),e.R7$(),e.Y8G("ngIf",!t.loadingPDF),e.R7$(),e.Y8G("ngIf",t.loadingPDF))},dependencies:[p.Sq,p.bT,J.ri,q.R,Yn.tI,V_,A_,p.Jj],styles:[".review[_ngcontent-%COMP%]{position:relative}.review__summary[_ngcontent-%COMP%]{background-color:#f9fafd;padding:4px 12px}"],changeDetection:0}),It([(0,l.l6)(O.j.getAllQuestions),Ct("design:type",d.c)],_t.prototype,"questions$",void 0),It([(0,l.l6)(O.j.getAllSubmissions),Ct("design:type",d.c)],_t.prototype,"submissions$",void 0),It([(0,l.l6)(O.j.getQuizSettings),Ct("design:type",d.c)],_t.prototype,"quizSettings$",void 0),It([(0,l.l6)(O.j.getQuizModeLocked),Ct("design:type",d.c)],_t.prototype,"quizLocked$",void 0),It([(0,l.l6)(O.j.getEnableQuizRetake),Ct("design:type",d.c)],_t.prototype,"enableQuizRetake$",void 0),It([(0,l.l6)(wt.k.getUserProfile),Ct("design:type",d.c)],_t.prototype,"userProfile$",void 0),It([(0,l.l6)(wt.k.getUserFullName),Ct("design:type",d.c)],_t.prototype,"userFullName$",void 0),It([(0,l.l6)(wt.k.getUserEmail),Ct("design:type",d.c)],_t.prototype,"userEmail$",void 0),It([(0,l.l6)(Oe.t.getStory),Ct("design:type",d.c)],_t.prototype,"story$",void 0);var Ki,st=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},at=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const jr=(o,n)=>({"view-quiz--column":o,"view-quiz--drawer":n});function Fr(o,n){if(1&o&&(e.nrm(0,"app-view-quiz-question",12),e.nI1(1,"async")),2&o){const t=e.XpG(2);e.Y8G("question",e.bMT(1,1,t.question$))}}function Hr(o,n){if(1&o&&(e.j41(0,"div",17),e.EFF(1),e.nI1(2,"async"),e.k0s()),2&o){let t;const i=e.XpG(3);e.R7$(),e.SpI(" ",(null==(t=e.bMT(2,1,i.question$))?null:t.nextLabel)||i.defaultNextButtonNext," ")}}function Qr(o,n){1&o&&(e.j41(0,"div",17),e.pXf(1,0),e.k0s())}function Yr(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",13),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleSubmit())}),e.j41(1,"div",14),e.nI1(2,"async"),e.DNE(3,Hr,3,3,"div",15)(4,Qr,2,0,"div",16),e.k0s()()}if(2&o){let t;const i=e.XpG(2);e.Y8G("disabled",!i.form.valid),e.R7$(),e.Y8G("ngSwitch",null==(t=e.bMT(2,3,i.question$))?null:t.type),e.R7$(2),e.Y8G("ngSwitchCase",i.quizQuestionType.Instructions)}}function qr(o,n){if(1&o&&(e.j41(0,"div",8),e.DNE(1,Fr,2,3,"app-view-quiz-question",9),e.nI1(2,"async"),e.j41(3,"div",10),e.DNE(4,Yr,5,5,"button",11),e.nI1(5,"async"),e.nI1(6,"async"),e.k0s()()),2&o){let t;const i=e.XpG();e.Y8G("formGroup",i.form),e.R7$(),e.Y8G("ngIf",e.bMT(2,3,i.question$)),e.R7$(3),e.Y8G("ngIf",(null==(t=e.bMT(5,5,i.quizSettings$))?null:t.showSubmit)&&e.bMT(6,7,i.lifecycle$)===i.Lifecycle.Question)}}function Kr(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.nextQuestion())}),e.j41(1,"div",17),e.EFF(2),e.nI1(3,"async"),e.k0s()()}if(2&o){let t;const i=e.XpG(2);e.R7$(2),e.JRh((null==(t=e.bMT(3,1,i.question$))?null:t.nextLabel)||i.defaultNextButtonNext)}}function Zr(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(t);const _=e.XpG(3);return e.Njj(_.handleViewSummaryClick())}),e.PLo(1,1),e.nrm(2,"div",17),e.YFu(),e.k0s()}}function Jr(o,n){if(1&o&&(e.qex(0),e.DNE(1,Zr,3,0,"button",23),e.nI1(2,"async"),e.bVm()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",e.bMT(2,1,t.quizReviewEnabled$))}}function el(o,n){if(1&o&&(e.qex(0),e.j41(1,"div",18),e.nrm(2,"app-view-quiz-answer",19),e.nI1(3,"async"),e.nI1(4,"async"),e.k0s(),e.qex(5,14),e.nI1(6,"async"),e.j41(7,"div",10),e.DNE(8,Kr,4,3,"button",20)(9,Jr,3,3,"ng-container",21),e.k0s(),e.bVm()()),2&o){const t=e.XpG();e.R7$(2),e.Y8G("question",e.bMT(3,5,t.question$))("answer",e.bMT(4,7,t.submission$).answer)("summary",!1),e.R7$(3),e.Y8G("ngSwitch",e.bMT(6,9,t.hasQuestionsRemaining$)),e.R7$(3),e.Y8G("ngSwitchCase",!0)}}function tl(o,n){1&o&&(e.qex(0),e.nrm(1,"app-view-quiz-review"),e.bVm())}function il(o,n){if(1&o&&(e.j41(0,"div",25),e.qex(1),e.pXf(2,2),e.nI1(3,"async"),e.bVm(),e.qex(4),e.pXf(5,3),e.bVm(),e.k0s()),2&o){let t;const i=e.XpG();e.R7$(3),e.uP7(null==(t=e.bMT(3,1,i.questions$))?null:t.length),e.nnv(2)}}class je{constructor(n,t,i,_,s,a){this.store=n,this.actions=t,this.formBuilder=i,this.viewService=_,this.applicationEventService=s,this.viewQuizService=a,this.defaultNextButtonNext=$localize`Next Question`,this.showHeader=!0,this.mode="column",this.Lifecycle=Kn.h,this.quizQuestionType=qe.Q5,this.sceneConfigStash={},this.ngUnsubscribe=new $.B}ngOnInit(){if(!this.store.selectSnapshot(O.j.getActiveQuestionId)){const n=this.store.selectSnapshot(O.j).questions[0].id;this.store.dispatch(new Rt.B.SetActiveQuestion(n))}this.form=this.formBuilder.group({question:new H.hs("",this.getQuizValidation())}),this.initQuestionObserver(),this.initAnswerObserver(),this.initEngineInteractionObserver(),this.applicationEventService.fireEvent(gt.F.QuizEntered,!0)}ngOnDestroy(){Object.entries(this.sceneConfigStash).forEach(([n,t])=>{this.store.dispatch(new Mo.qi(n,t.background))}),this.applicationEventService.fireEvent(gt.F.QuizExited,!0),this.viewService.selectTool(Ze.s.Select),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}get answer(){const n=this.form.get("question").value;return Array.isArray(n)?n:[n]}initQuestionObserver(){this.question$.pipe((0,g.Q)(this.ngUnsubscribe),(0,y.p)(n=>void 0!==n)).subscribe(n=>{const t=this.store.selectSnapshot(b.N.getSelectedChapterId);n.chapterId!==t&&this.store.dispatch(new Mo.wg(n.chapterId)),this.form.reset(),this.setSceneConfig(n),n.type===qe.Q5.Instructions&&this.form.get("question").setValue("-"),this.applicationEventService.fireEvent(gt.F.QuizQuestionLoaded,n)})}initAnswerObserver(){this.form.get("question").valueChanges.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=this.store.selectSnapshot(O.j.getActiveQuestion),i=this.store.selectSnapshot(O.j.getActiveSubmission);void 0!==t&&(this.store.selectSnapshot(O.j.getAllSubmissions).some(_=>_.questionId===t.id)||((!i||!(0,R.isEqual)(i.answer,n))&&this.store.dispatch(new Rt.B.SetActiveSubmission({questionId:t.id,answer:n})),(0,R.isNil)(n)||this.applicationEventService.fireEvent(gt.F.QuizAnswerSelected,{questionId:t.id,answerId:n})))})}initEngineInteractionObserver(){this.viewService.selectTool(Ze.s.Quiz),this.actions.pipe((0,l.xi)(Pe.zE),(0,y.p)(i=>{const{node:_,event:s}=i;return!(0,R.isNil)(_)&&this.store.selectSnapshot(le.S.getActiveTool)===Ze.s.Quiz&&!s.srcEvent.shiftKey})).pipe((0,y.p)(()=>"none"!==this.store.selectSnapshot(O.j.getPickMode)),(0,g.Q)(this.ngUnsubscribe)).subscribe(i=>{"single"===this.store.selectSnapshot(O.j.getPickMode)&&this.viewService.clearSelectedNodes();const s=(0,R.get)(i,"hit.objectId");if(s){const r=this.store.selectSnapshot(di.z.getCheckedNodeIds).includes(s);this.store.dispatch(new bt.q9(!r,[s]))}}),this.question$.pipe((0,Ke.F)((i,_)=>(0,R.get)(i,"id")===(0,R.get)(_,"id")),(0,y.p)(i=>!(0,R.isNil)(i))).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(i=>this.setQuestionPickMode(i))}setQuestionPickMode(n){const{type:t,data:i}=n;let _;_=t===qe.Q5.SelectAnatomy?i.correctAnswer.length>1&&"any"!==i.selectType?"multi":"single":"none",this.store.dispatch(new Rt.B.SetQuizPickMode(_))}handleSubmit(){const n=this.store.selectSnapshot(O.j.getActiveQuestion);(this.form.valid||n.type===qe.Q5.Instructions)&&this.viewQuizService.submitQuestion(n.id,this.answer)}handleViewSummaryClick(){this.viewSummary()}handleExitClick(){this.viewQuizService.exitQuiz()}nextQuestion(){this.viewQuizService.nextQuestion()}viewSummary(){this.store.dispatch(new Rt.B.SetQuizLifecycle(Kn.h.Review)),this.applicationEventService.fireEvent(gt.F.QuizCompleted,!0)}setSceneConfig(n){const{camera:t,background:i}=n?.sceneConfig||{},_=this.store.selectSnapshot(b.N.getChapter(n.chapterId));t&&(this.setStash(n.chapterId,{camera:_.camera.location}),setTimeout(()=>{this.store.dispatch(new zn.Ih(t.location,!0,1))})),i&&(this.setStash(n.chapterId,{background:_.background}),this.store.dispatch(new Mo.qi(n.chapterId,i)))}setStash(n,t){this.sceneConfigStash[n]={...this.sceneConfigStash[n]||{},...t}}getQuizValidation(){return n=>{const t=n.value,i=Array.isArray(t)?t:[t],_=this.store.selectSnapshot(O.j.getActiveQuestion),s=(0,Hi.Ie)(_),a=i.some(r=>(0,R.isNil)(r)||""===r);return s&&a?{invalidValues:a}:null}}}(Ki=je).\u0275fac=function(n){return new(n||Ki)(e.rXU(l.il),e.rXU(l.En),e.rXU(H.ze),e.rXU(Z.z),e.rXU(Oo.S),e.rXU($i.k))},Ki.\u0275cmp=e.VBU({type:Ki,selectors:[["app-view-quiz"]],inputs:{showHeader:"showHeader",mode:"mode"},decls:12,vars:22,consts:()=>{let o,n,t,i;return o=$localize`:␟71c77bb8cecdf11ec3eead24dd1ba506573fa9cd␟935187492052582731:Submit`,n=$localize`:␟19c0d80cbbbe6ab7d75dbe7c77ef3017ec5f4d96␟7886851004377486562:${"\ufffd#2\ufffd"}:START_TAG_DIV:See Results${"\ufffd/#2\ufffd"}:CLOSE_TAG_DIV:`,t=$localize`:␟6649c9f6c298747891fb175dbe382be60e1728c6␟6638623222432926474:{VAR_PLURAL, plural, =1 {Answer} other {Answers}}`,t=e.k04(t,{VAR_PLURAL:"\ufffd0\ufffd"}),i=$localize`:␟ceb65fed78c2ea1d81ce1514a244608fdc02bfca␟1766523863374888036:submitted`,[o,n,t,i,["data-test","quiz",1,"view-quiz",3,"ngClass"],["role","form","class","flex flex-col",3,"formGroup",4,"ngIf"],[4,"ngIf"],["class","text-base font-bold text-center",4,"ngIf"],["role","form",1,"flex","flex-col",3,"formGroup"],["formControlName","question",3,"question",4,"ngIf"],[1,"flex","flex-row-reverse"],["app-view-button","","class","view-quiz__button","buttonTheme","blue-fill","buttonSize","small","buttonShape","rounded","data-test","questionSubmit",3,"disabled","click",4,"ngIf"],["formControlName","question",3,"question"],["app-view-button","","buttonTheme","blue-fill","buttonSize","small","buttonShape","rounded","data-test","questionSubmit",1,"view-quiz__button",3,"click","disabled"],[3,"ngSwitch"],["class","px-4",4,"ngSwitchCase"],["class","px-4",4,"ngSwitchDefault"],[1,"px-4"],[1,"mb-8"],[3,"question","answer","summary"],["app-view-button","","buttonTheme","blue-fill","buttonSize","small","buttonShape","rounded","class","view-quiz__button","data-test","questionNextButton",3,"click",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["app-view-button","","buttonTheme","blue-fill","buttonSize","small","buttonShape","rounded","data-test","questionNextButton",1,"view-quiz__button",3,"click"],["data-test","quizViewSummaryButton","app-view-button","","buttonTheme","blue-fill","buttonSize","small","buttonShape","rounded","class","view-quiz__button",3,"click",4,"ngIf"],["data-test","quizViewSummaryButton","app-view-button","","buttonTheme","blue-fill","buttonSize","small","buttonShape","rounded",1,"view-quiz__button",3,"click"],[1,"text-base","font-bold","text-center"]]},template:function(n,t){if(1&n&&(e.j41(0,"div",4),e.DNE(1,qr,7,9,"div",5),e.nI1(2,"async"),e.DNE(3,el,10,11,"ng-container",6),e.nI1(4,"async"),e.DNE(5,tl,2,0,"ng-container",6),e.nI1(6,"async"),e.nI1(7,"async"),e.DNE(8,il,6,3,"div",7),e.nI1(9,"async"),e.nI1(10,"async"),e.nI1(11,"async"),e.k0s()),2&n){let i;e.Y8G("ngClass",e.l_i(19,jr,"column"===t.mode,"drawer"===t.mode)),e.R7$(),e.Y8G("ngIf",e.bMT(2,5,t.lifecycle$)===t.Lifecycle.Question),e.R7$(2),e.Y8G("ngIf",e.bMT(4,7,t.lifecycle$)===t.Lifecycle.Explanation),e.R7$(2),e.Y8G("ngIf",e.bMT(6,9,t.lifecycle$)===t.Lifecycle.Review&&e.bMT(7,11,t.quizReviewEnabled$)),e.R7$(3),e.Y8G("ngIf",!(e.bMT(9,13,t.hasQuestionsRemaining$)||e.bMT(10,15,t.quizReviewEnabled$)||null!=(i=e.bMT(11,17,t.quizSettings$))&&i.showExplanation))}},dependencies:[p.YU,p.bT,p.ux,p.e1,p.fG,J.ri,H.BC,H.cb,H.j4,H.JD,Zn,A_,_t,p.Jj],styles:[".view-quiz[_ngcontent-%COMP%]{color:#374a68}.view-quiz__button[_ngcontent-%COMP%]:disabled{opacity:.5}.view-quiz--column[_ngcontent-%COMP%]   .view-quiz__button[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),st([(0,l.l6)(O.j.getQuizReviewEnabled),at("design:type",d.c)],je.prototype,"quizReviewEnabled$",void 0),st([(0,l.l6)(O.j.getActiveQuestion),at("design:type",d.c)],je.prototype,"question$",void 0),st([(0,l.l6)(O.j.getAllQuestions),at("design:type",d.c)],je.prototype,"questions$",void 0),st([(0,l.l6)(O.j.getActiveQuestionIndex),at("design:type",d.c)],je.prototype,"questionIndex$",void 0),st([(0,l.l6)(O.j.getQuestionTotal),at("design:type",d.c)],je.prototype,"questionTotal$",void 0),st([(0,l.l6)(O.j.getCorrectAnswerTotal),at("design:type",d.c)],je.prototype,"correctAnswerTotal$",void 0),st([(0,l.l6)(O.j.hasQuestionRemaining),at("design:type",d.c)],je.prototype,"hasQuestionsRemaining$",void 0),st([(0,l.l6)(O.j.getQuizSettings),at("design:type",d.c)],je.prototype,"quizSettings$",void 0),st([(0,l.l6)(O.j.getLifecycle),at("design:type",d.c)],je.prototype,"lifecycle$",void 0),st([(0,l.l6)(O.j.getQuizModeLocked),at("design:type",d.c)],je.prototype,"quizLocked$",void 0),st([(0,l.l6)(O.j.getActiveSubmission),at("design:type",d.c)],je.prototype,"submission$",void 0);let P_=(()=>{var o;class n{constructor(i){this.el=i,this.appScrollListener=(0,e.geq)()}ngOnInit(){this.el.nativeElement.addEventListener("scroll",()=>{this.emitScroll()})}ngOnDestroy(){this.el.nativeElement.removeEventListener("scroll",this.emitScroll)}emitScroll(){this.appScrollListener.set(this.el.nativeElement.scrollTop)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(e.aKT))},o.\u0275dir=e.FsC({type:o,selectors:[["","appScrollListener",""]],inputs:{appScrollListener:[e.Mj6.SignalBased,"appScrollListener"]},outputs:{appScrollListener:"appScrollListenerChange"}}),n})();var Zi,tn,Ji=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},en=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function nl(o,n){if(1&o&&(e.qex(0),e.j41(1,"div",6),e.nrm(2,"app-progress-circle",7),e.k0s(),e.j41(3,"div",6),e.nrm(4,"app-progress-circle",8),e.k0s(),e.bVm()),2&o){const t=e.XpG();e.R7$(2),e.Y8G("progress",t.chapterPercent)("showPercent",!1)("animate",!1),e.R7$(2),e.Y8G("progress",t.countdownPercent)("showPercent",!1)("animate",!1)}}class Dt{constructor(n,t,i,_){this.viewService=n,this.viewPlaythroughService=t,this.store=i,this.changeDetectorRef=_,this.showCount=!0,this.showPlaythrough=!1,this.buttonSize=J.Mp.Default,this.iconSize="md",this.buttonTheme="transparent-fill",this.interval=null,this.chapterPercent=0,this.countdownPercent=0,this.ngUnsubscribe=new $.B}ngOnInit(){this.initChapterListener(),this.initPlaythrough()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.stopChapterTimer()}handlePreviousClick(){this.viewService.previousChapter("Pagination")}handleNextClick(){this.viewService.nextChapter("Pagination")}initChapterListener(){this.store.select(b.N.getSelectedChapterId).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.stopChapterTimer()}),(0,Ae.z)([this.store.select(le.S.getChapter),this.store.select(m.Pf.getPlaythroughEnabled)]).pipe((0,Ke.F)(),(0,g.Q)(this.ngUnsubscribe)).subscribe(([n,t])=>{this.chapterPercent=0,t?this.startChapterTimer():this.stopChapterTimer()})}initPlaythrough(){this.viewPlaythroughService.countdownChanged.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{const{countdown:t}=this.store.selectSnapshot(m.Pf.getPlaythroughSettings);this.countdownPercent=Math.floor(100-n/t*100),this.changeDetectorRef.markForCheck()})}startChapterTimer(){this.chapterPercent=0,this.countdownPercent=0,this.stopChapterTimer(),this.interval=setInterval(()=>{const n=this.viewPlaythroughService.calculateMaximumRemainingTime();this.chapterPercent=Math.ceil(n.current/n.duration*100),this.chapterPercent>100&&(this.chapterPercent=100),this.changeDetectorRef.markForCheck()},50)}stopChapterTimer(){this.interval&&clearInterval(this.interval),this.interval=null}}(Zi=Dt).\u0275fac=function(n){return new(n||Zi)(e.rXU(Z.z),e.rXU(p_),e.rXU(l.il),e.rXU(e.gRc))},Zi.\u0275cmp=e.VBU({type:Zi,selectors:[["app-view-pagination"]],inputs:{showCount:"showCount",showPlaythrough:"showPlaythrough",buttonSize:"buttonSize",iconSize:"iconSize",buttonTheme:"buttonTheme"},decls:10,vars:17,consts:()=>{let o,n;return o=$localize`:␟3228d65908ec43ba657d860b050c2a3871868cee␟8424575283863104959:Previous Chapter`,n=$localize`:␟95f5388846a3beaee5f870eb0996ed47d9c7819a␟8192680256063110394:Next Chapter`,[[1,"view-pagination"],["data-test","viewPreviousChapter","aria-label",o,"app-view-button","",3,"click","buttonSize","buttonTheme","disabled"],["icon","arrow-left","appLogicalDir","",3,"size"],["data-test","viewNextChapter","aria-label",n,"app-view-button","",3,"click","buttonSize","buttonTheme","disabled"],[4,"ngIf"],["icon","arrow-right","appLogicalDir","",3,"size"],[1,"view-pagination__playthrough"],["fillColor","transparent","ringColor","#eaeff5","strokeColor","#96a8c0","diameter","28","strokeWidth","3",3,"progress","showPercent","animate"],["fillColor","transparent","ringColor","transparent","strokeColor","#374a68","diameter","28","strokeWidth","3",3,"progress","showPercent","animate"]]},template:function(n,t){1&n&&(e.j41(0,"nav",0)(1,"button",1),e.nI1(2,"async"),e.bIt("click",function(){return t.handlePreviousClick()}),e.nrm(3,"app-icon",2),e.k0s(),e.j41(4,"button",3),e.nI1(5,"async"),e.nI1(6,"async"),e.bIt("click",function(){return t.handleNextClick()}),e.DNE(7,nl,5,6,"ng-container",4),e.nI1(8,"async"),e.nrm(9,"app-icon",5),e.k0s()()),2&n&&(e.R7$(),e.Y8G("buttonSize",t.buttonSize)("buttonTheme",t.buttonTheme)("disabled",0===e.bMT(2,9,t.chapterIndex$)?"true":null),e.R7$(2),e.Y8G("size",t.iconSize),e.R7$(),e.Y8G("buttonSize",t.buttonSize)("buttonTheme",t.buttonTheme)("disabled",e.bMT(5,11,t.chapterIndex$)===e.bMT(6,13,t.chapterCount$)-1?"true":null),e.R7$(3),e.Y8G("ngIf",e.bMT(8,15,t.playthroughEnabled$)),e.R7$(2),e.Y8G("size",t.iconSize))},dependencies:[J.ri,p.bT,Ot.e,q.R,V_,p.Jj],styles:["@keyframes _ngcontent-%COMP%_disappear{0%{top:0}to{top:100%}}.view-pagination[_ngcontent-%COMP%]{display:flex;position:relative;white-space:nowrap}.view-pagination__count[_ngcontent-%COMP%]{font-size:14px;padding:0 8px}.view-pagination__playthrough[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;justify-content:center;align-items:center}"],changeDetection:0}),Ji([(0,l.l6)(b.N.getSelectedChapterIndex),en("design:type",d.c)],Dt.prototype,"chapterIndex$",void 0),Ji([(0,l.l6)(b.N.getNextChapter),en("design:type",d.c)],Dt.prototype,"nextChapter$",void 0),Ji([(0,l.l6)(b.N.getPreviousChapter),en("design:type",d.c)],Dt.prototype,"previousChapter$",void 0),Ji([(0,l.l6)(b.N.getChapterCount),en("design:type",d.c)],Dt.prototype,"chapterCount$",void 0),Ji([(0,l.l6)(m.Pf.getPlaythroughEnabled),en("design:type",d.c)],Dt.prototype,"playthroughEnabled$",void 0);const al=o=>({"!border-gray-200":o}),rl=o=>({"!outline-blue-600":o}),ll=(o,n)=>({"!bg-gray-200":o,"!bg-blue-600 !text-white !outline-blue-600":n}),cl=o=>({"!opacity-100":o});function dl(o,n){1&o&&e.nrm(0,"div",11)}function pl(o,n){1&o&&e.nrm(0,"div",12)}function ul(o,n){if(1&o){const t=e.RV6();e.j41(0,"li",5)(1,"button",6),e.bIt("click",function(){const _=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.handleChapterClick(_))}),e.j41(2,"span",7),e.EFF(3),e.k0s(),e.j41(4,"div",8)(5,"div",9),e.EFF(6),e.k0s(),e.nrm(7,"app-chapter-image",10),e.k0s(),e.DNE(8,dl,1,0,"div",11)(9,pl,1,0,"div",12),e.k0s()()}if(2&o){const t=n.$implicit,i=n.$index,_=n.$index,s=n.$count,a=e.XpG();e.R7$(),e.Y8G("matTooltip",a.getTooltip(i,t)),e.BMQ("aria-current",a.selectedChapterIndex()===i)("data-id",t.id),e.R7$(2),e.JRh(t.displayName),e.R7$(),e.Y8G("ngClass",e.eq3(11,rl,i===a.selectedChapterIndex())),e.R7$(),e.Y8G("ngClass",e.l_i(13,ll,i<a.selectedChapterIndex(),a.selectedChapterIndex()===i)),e.R7$(),e.SpI(" ",i+1," "),e.R7$(),e.Y8G("chapterId",t.id)("ngClass",e.eq3(16,cl,i<=a.selectedChapterIndex())),e.R7$(),e.vxM(8,0!==_?8:-1),e.R7$(),e.vxM(9,_!==s-1?9:-1)}}class Ro{constructor(n,t){this.viewService=n,this.store=t,this.chapters=(0,re.ot)(this.store.select(b.N.getStoryChapters)),this.selectedChapterIndex=(0,re.ot)(this.store.select(b.N.getSelectedChapterIndex)),this.scrollTop=0,(0,e.QZP)(()=>{this.scrollChapterIntoView(this.selectedChapterIndex())})}getTooltip(n,t){return $localize`${n+1} of ${this.chapters().length}\: ${t.displayName}`}handleChapterClick(n){this.viewService.selectChapter(n)}handleNextChapter(){this.viewService.nextChapter("Pagination")}handlePreviousChapter(){this.viewService.previousChapter("Pagination")}scrollChapterIntoView(n){const t=document.querySelector(`[data-test="viewChapterThumbnail"]:nth-child(${n+1})`);null!=t&&setTimeout(()=>{t.scrollIntoView({block:"nearest"})})}}(tn=Ro).\u0275fac=function(n){return new(n||tn)(e.rXU(Z.z),e.rXU(l.il))},tn.\u0275cmp=e.VBU({type:tn,selectors:[["app-view-chapter-list"]],decls:7,vars:5,consts:()=>{let o;return o=$localize`:␟2be2e0ec21a9620412d9a21102e7645fce9d9cc1␟5659091765954160016:List of Chapters`,[["aria-label",o,"data-test","viewChapterList",1,"flex","flex-col","h-full"],[1,"flex","items-center","justify-center","flex-grow-0","py-5","transition-colors","border-b","border-transparent","border-solid","bg-gray-50",3,"ngClass"],[1,"shadow"],["buttonSize","2xsmall",3,"showCount"],[1,"flex-grow","overflow-x-hidden","overflow-y-auto","scroll-smooth",3,"appScrollListenerChange","appScrollListener"],["data-test","viewChapterThumbnail"],["matTooltipPosition","right","data-test","viewChapterListButton",1,"relative","flex","flex-col","items-center","justify-center","w-full","py-2","cursor-pointer","group","min-h-20","focus:outline-none",3,"click","matTooltip"],[1,"sr-only"],[1,"absolute","z-10","transition-all","bg-white","border-2","border-white","border-solid","rounded","w-14","h-14","outline","outline-2","outline-gray-200","group-hover:outline-gray-300","group-focus:outline-blue-600",3,"ngClass"],[1,"absolute","top-0","left-0","z-20","flex","items-center","justify-center","w-6","h-6","font-semibold","text-gray-600","transition-all","-translate-x-[15px]","-translate-y-[15px]","bg-white","border","border-2","border-white","border-solid","rounded","rounded-full","outline","outline-2","-outline-offset-4","outline-gray-200","group-hover:outline-gray-300","group-focus:outline-blue-600","text-2xs",3,"ngClass"],[1,"overflow-hidden","transition-opacity","rounded","opacity-50","group-hover:opacity-100","group-focus:opacity-100",3,"chapterId","ngClass"],[1,"w-[2px]","h-1/2","bg-gray-200","absolute","z-0","left-1/2","-translate-x-1","top-0"],[1,"w-[2px]","h-1/2","bg-gray-200","absolute","z-0","left-1/2","-translate-x-1","bottom-0"]]},template:function(n,t){1&n&&(e.j41(0,"nav",0)(1,"div",1)(2,"app-pillbox",2),e.nrm(3,"app-view-pagination",3),e.k0s()(),e.j41(4,"ol",4),e.mxI("appScrollListenerChange",function(_){return e.DH7(t.scrollTop,_)||(t.scrollTop=_),_}),e.Z7z(5,ul,10,18,"li",5,e.Vm6),e.k0s()()),2&n&&(e.R7$(),e.Y8G("ngClass",e.eq3(3,al,t.scrollTop>0)),e.R7$(2),e.Y8G("showCount",!1),e.R7$(),e.R50("appScrollListener",t.scrollTop),e.R7$(),e.Dyx(t.chapters()))},dependencies:[p.YU,P_,ye.oV,Vt.O,kn,Dt],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(b.N.getSelectedChapterId),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],Ro.prototype,"selectedChapterId$",void 0);var hl=c(91003),U_=c(32914);function gl(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"button",5),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handlePlayFromBeginning())}),e.nrm(2,"app-icon",6),e.j41(3,"span",7),e.pXf(4,1),e.k0s()(),e.nrm(5,"app-view-audio-mute",8),e.bVm()}}function ml(o,n){1&o&&(e.j41(0,"button",9)(1,"div",10),e.nrm(2,"app-spinner",11),e.j41(3,"span",7),e.pXf(4,2),e.k0s()()()),2&o&&e.Y8G("disabled",!0)}let El=(()=>{var o;class n{constructor(i,_,s,a){this.viewService=i,this.mediaService=_,this.store=s,this.changeDetectorRef=a,this.hasAudioPlayer=!1,this.ngUnsubscribe=new $.B}ngOnInit(){this.initChapterPlayer()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initChapterPlayer(){this.store.select(b.N.getSelectedChapter).pipe((0,i_.M)(()=>{this.hasAudioPlayer=!1,this.changeDetectorRef.markForCheck()}),(0,U_.n)(i=>{const _=this.store.selectSnapshot(m.Pf.getViewLanguage),s=this.store.selectSnapshot(m.Pf.getForceAudio);return this.mediaService.getChapterAudioPlayer(i,_,s)}),(0,g.Q)(this.ngUnsubscribe)).subscribe(i=>{this.hasAudioPlayer=!(0,R.isNil)(i),this.changeDetectorRef.markForCheck()})}handlePlayFromBeginning(){const i=this.store.selectSnapshot(b.N.getSelectedChapterId);this.mediaService.playChapterAudio(i),this.viewService.playChapterFromStart()}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(Z.z),e.rXU(xi.u),e.rXU(l.il),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-audio-bar"]],decls:4,vars:2,consts:()=>{let t,i,_;return t=$localize`:␟5006279573e513c000899122cbef8e588b25faae␟2965090484617938475:play from beginning`,i=$localize`:␟81e8d1fd604d4f4e83ad3300e500ae3b35aa4be7␟1494613406887362546:Play From Beginning`,_=$localize`:␟65026328a38cc4b6451777987b5dee29a779a10f␟3235113974618934655:Loading Audio`,[["loading",""],i,_,[1,"view-audio-bar"],[4,"ngIf","ngIfElse"],["type","button","app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","light-gray-outline","aria-label",t,"data-test","viewPlayFromBeginning",1,"view-audio-bar__play",3,"click"],["icon","rotate-left","aria-hidden","true"],[1,"ml-2","uppercase","text-2xs"],["buttonSize","small","buttonShape","rounded","buttonTheme","light-gray-outline"],["type","button","app-view-button","","buttonSize","small","buttonShape","rounded","buttonTheme","light-gray-outline",1,"view-audio-bar__play",3,"disabled"],[1,"flex","justify-center","items-center"],["spinnerSize","small"]]},template:function(i,_){if(1&i&&(e.j41(0,"div",3),e.DNE(1,gl,6,0,"ng-container",4)(2,ml,5,1,"ng-template",null,0,e.C5r),e.k0s()),2&i){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf",_.hasAudioPlayer)("ngIfElse",s)}},dependencies:[p.bT,J.ri,q.R,Yn.tI,qn],styles:[".view-audio-bar[_ngcontent-%COMP%]{display:flex;gap:12px}.view-audio-bar__play[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})();var nn,D_=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},L_=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function fl(o,n){if(1&o&&(e.j41(0,"section",1),e.nrm(1,"app-html",2),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("markdownText",t.chapterDescription)}}class Jn{get isPopulated(){return this._isPopulated}set isPopulated(n){this._isPopulated=n,this.isPopulatedChange.emit(this.isPopulated)}constructor(){this.ngUnsubscribe=new $.B,this.chapterDescription="",this._isPopulated=!1,this.isPopulatedChange=new e.bkB}ngOnInit(){this.initContentListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initContentListener(){(0,Ae.z)(this.story$,this.chapter$).pipe((0,y.p)(([n,t])=>!(0,R.isNil)(n)&&!(0,R.isNil)(t)),(0,g.Q)(this.ngUnsubscribe)).subscribe(([n,t])=>{this.chapterDescription=(0,R.trim)(t.description),this.isPopulated=""!==this.chapterDescription})}}(nn=Jn).\u0275fac=function(n){return new(n||nn)},nn.\u0275cmp=e.VBU({type:nn,selectors:[["app-view-description"]],inputs:{isPopulated:"isPopulated"},outputs:{isPopulatedChange:"isPopulatedChange"},decls:1,vars:1,consts:[["class","view-description",4,"ngIf"],[1,"view-description"],[3,"markdownText"]],template:function(n,t){1&n&&e.DNE(0,fl,2,1,"section",0),2&n&&e.Y8G("ngIf",t.chapterDescription)},dependencies:[p.bT,$n.V],styles:[".view-description{font-size:.875rem;line-height:1.25rem;overflow-wrap:break-word}\n"],encapsulation:2,changeDetection:0}),D_([(0,l.l6)(Oe.t.getStory),L_("design:type",d.c)],Jn.prototype,"story$",void 0),D_([(0,l.l6)(b.N.getSelectedChapter),L_("design:type",d.c)],Jn.prototype,"chapter$",void 0);var on,Sl=c(24151),Tl=c(79817),bl=c(26513),$_=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},x_=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const vl=o=>({"view-labels__item--selected":o}),Ol=o=>({"view-labels__content--shown":o});function wl(o,n){if(1&o&&(e.j41(0,"div",11),e.nrm(1,"div",12),e.nI1(2,"markdown"),e.nI1(3,"async"),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.Y8G("innerHTML",e.bMT(3,3,e.bMT(2,1,t.title)),e.npT)}}function Il(o,n){if(1&o&&(e.j41(0,"div",13)(1,"div",14),e.nrm(2,"app-icon",15),e.nI1(3,"async"),e.k0s()()),2&o){let t;const i=e.XpG().$implicit,_=e.XpG();e.R7$(2),e.Y8G("ngClass",(null==(t=e.bMT(3,1,_.selectedLabel$))?null:t.id)===i.id?"rotate-90":"rotate-0")}}function Cl(o,n){if(1&o&&(e.j41(0,"div",19),e.nrm(1,"app-content-blocks",20),e.k0s()),2&o){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("contentBlocks",t.contentBlocks)}}function Ml(o,n){if(1&o&&(e.j41(0,"div",16),e.nI1(1,"async"),e.nI1(2,"async"),e.nrm(3,"app-html",17),e.DNE(4,Cl,2,1,"div",18),e.k0s()),2&o){let t,i;const _=e.XpG(),s=_.$implicit,a=_.index,r=e.XpG();e.Y8G("ngClass",e.eq3(9,Ol,(null==(t=e.bMT(1,5,r.selectedLabel$))?null:t.id)===s.id)),e.BMQ("aria-hidden",(null==(i=e.bMT(2,7,r.selectedLabel$))?null:i.id)!==s.id)("id","content-"+a),e.R7$(3),e.Y8G("markdownText",s.description),e.R7$(),e.Y8G("ngIf",(null==s.contentBlocks?null:s.contentBlocks.length)>0)}}function yl(o,n){if(1&o){const t=e.RV6();e.j41(0,"li",3)(1,"button",4),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.bIt("click",function(){const _=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.handleLabelClick(_))}),e.j41(5,"span",5),e.pXf(6,0),e.k0s(),e.j41(7,"div",6),e.nrm(8,"app-label-pin",7),e.nI1(9,"async"),e.k0s(),e.DNE(10,wl,4,5,"div",8)(11,Il,4,3,"div",9),e.k0s(),e.DNE(12,Ml,5,11,"div",10),e.k0s()}if(2&o){let t,i,_,s;const a=n.$implicit,r=n.index,u=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(20,vl,(null==(t=e.bMT(2,12,u.selectedLabel$))?null:t.id)===a.id)),e.BMQ("aria-current",(null==(i=e.bMT(3,14,u.selectedLabel$))?null:i.id)===a.id)("aria-controls","label-list-content-"+r)("aria-expanded",(null==(_=e.bMT(4,16,u.selectedLabel$))?null:_.id)===a.id)("id","label-list-item-"+r),e.R7$(7),e.Y8G("showOnNone",!0)("selected",(null==(s=e.bMT(9,18,u.selectedLabel$))?null:s.id)===a.id)("label",a)("sequence",u.getLabelSequence(a)),e.R7$(2),e.Y8G("ngIf",a.title),e.R7$(),e.Y8G("ngIf",a.description||(null==a.contentBlocks?null:a.contentBlocks.length)>0),e.R7$(),e.Y8G("ngIf",a.description||(null==a.contentBlocks?null:a.contentBlocks.length)>0)}}class eo{constructor(n,t){this.viewService=n,this.store=t,this.labelPinType=Sl.O,this.labelSequentialtype=Tl.C}ngOnInit(){}getLabelSequence(n){return this.store.selectSnapshot(Je.y.getLabelSequence(n))}handleLabelClick(n){const t=this.store.selectSnapshot(Je.y.getSelectedLabel);n.id===t?.id?this.viewService.clearSelectedLabel():this.viewService.selectLabel(n,!0)}}(on=eo).\u0275fac=function(n){return new(n||on)(e.rXU(Z.z),e.rXU(l.il))},on.\u0275cmp=e.VBU({type:on,selectors:[["app-view-labels"]],decls:3,vars:3,consts:()=>{let o;return o=$localize`:␟e788aaf840ca6aea39b81480b735057823a73b53␟2641792472434523020:Navigate to description for, `,[o,["data-test","viewLabelList",1,"view-labels"],["data-test","viewLabelListItem","class","view-labels__list-item",4,"ngFor","ngForOf"],["data-test","viewLabelListItem",1,"view-labels__list-item"],["data-test","viewLabelListButton",1,"view-labels__item",3,"click","ngClass"],[1,"sr-only"],[1,"view-labels__pin"],[1,"flex",3,"showOnNone","selected","label","sequence"],["class","view-labels__body",4,"ngIf"],["class","view-labels__expand","data-test","viewLabelsToggle",4,"ngIf"],["class","view-labels__content","data-test","viewLabelListContent",3,"ngClass",4,"ngIf"],[1,"view-labels__body"],[1,"view-labels__title","html",3,"innerHTML"],["data-test","viewLabelsToggle",1,"view-labels__expand"],["aria-hidden","true",1,"px-3"],["icon","angle-right",1,"transition-transform",3,"ngClass"],["data-test","viewLabelListContent",1,"view-labels__content",3,"ngClass"],["data-test","viewLabelListHtml",3,"markdownText"],["data-test","viewLabelListBlocks",4,"ngIf"],["data-test","viewLabelListBlocks"],[3,"contentBlocks"]]},template:function(n,t){1&n&&(e.j41(0,"ul",1),e.DNE(1,yl,13,22,"li",2),e.nI1(2,"async"),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngForOf",e.bMT(2,1,t.labels$)))},dependencies:[p.YU,p.Sq,p.bT,Qi.l,q.R,$n.V,bl.b,j.i0,p.Jj],styles:[".view-labels__list-item{padding-bottom:8px}.view-labels__item{background:none;border:0;display:flex;padding:12px 0 12px 16px;cursor:pointer;transition:background-color 125ms,color 125ms,border 125ms;width:100%;gap:12px;text-align:left;align-items:center}.view-labels__item:focus{outline:#2d72dc solid 2px!important}.view-labels__item:hover,.view-labels__item--selected:hover{background-color:#131c2a0d}.view-labels__item--selected .view-labels__title{font-weight:600}.view-labels__pin{display:flex;align-items:center;justify-content:center;flex:0 0 18px;height:18px}.view-labels__body{flex:1 1 auto}.view-labels__expand{flex-grow:0;display:flex;justify-content:center;align-items:center;position:relative;font-size:14px}.view-labels__title{color:#131c2a;font-size:.875rem;line-height:1.25rem}.view-labels__label{position:absolute;font-size:10px;top:3px}.view-labels__content{display:none;padding:8px 0 12px 46px;font-size:.875rem;line-height:1.25rem;overflow-wrap:break-word;color:#374a68}.view-labels__content--shown{display:block}\n"],encapsulation:2,changeDetection:0}),$_([(0,l.l6)(Je.y.getChapterLabels),x_("design:type",d.c)],eo.prototype,"labels$",void 0),$_([(0,l.l6)(Je.y.getSelectedLabel),x_("design:type",d.c)],eo.prototype,"selectedLabel$",void 0);var Al=c(11789);function Nl(o,n){if(1&o&&(e.j41(0,"div",6),e.EFF(1),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.description)}}function Rl(o,n){if(1&o&&(e.j41(0,"li",2),e.nrm(1,"div",3),e.j41(2,"div",4)(3,"div"),e.EFF(4),e.k0s(),e.DNE(5,Nl,2,1,"div",5),e.k0s()()),2&o){const t=n.$implicit,i=e.XpG();e.R7$(),e.xc7("background-color",i.getComputedColor(t.colors)),e.R7$(3),e.JRh(t.label),e.R7$(),e.Y8G("ngIf",t.description)}}let Vl=(()=>{var o;class n{constructor(){}ngOnInit(){}getComputedColor(i){return Al.T.rgbToHex(i,!0)}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-legend"]],inputs:{legend:"legend"},decls:2,vars:1,consts:()=>{let t;return t=$localize`:␟5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5␟7297822327994766046:Legend`,[["aria-label",t,"role","complementary",1,"view-legend"],["class","view-legend__item",4,"ngFor","ngForOf"],[1,"view-legend__item"],[1,"view-legend__color"],[1,"view-legend__content","text-sm"],["class","my-2",4,"ngIf"],[1,"my-2"]]},template:function(i,_){1&i&&(e.j41(0,"ul",0),e.DNE(1,Rl,6,4,"li",1),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngForOf",_.legend))},dependencies:[p.Sq,p.bT],styles:['.view-legend{display:flex;flex-direction:column}.view-legend__item{padding:12px 12px 12px 16px;display:flex;gap:12px;flex-direction:row;justify-content:flex-start;align-items:flex-start}.view-legend__content{word-break:break-word;display:flex;flex-direction:column}.view-legend__color{border:2px solid white;outline:1px solid #96a8c0;content:" ";display:block;flex:0 0 18px;width:18px;height:18px;border-radius:50%}.view-legend__color:after{content:" "}\n'],encapsulation:2,changeDetection:0}),n})();var _n;function Ll(o,n){if(1&o){const t=e.RV6();e.j41(0,"h2",0)(1,"button",2),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.togglePanel())}),e.j41(2,"div",3)(3,"span",4),e.EFF(4),e.k0s(),e.j41(5,"div",5),e.nrm(6,"app-icon",6),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(),e.BMQ("aria-expanded",t.open())("aria-controls",t.panelId()),e.R7$(3),e.JRh(t.label()),e.R7$(2),e.Y8G("ngClass",t.open()?"rotate-90":"rotate-0")}}class Vo{constructor(n){this.store=n,this.panelId=e.hFB.required(),this.label=(0,e.hFB)(""),this.showHeader=(0,e.hFB)(!0),this.open=(0,e.geq)(!1),this.canToggle=(0,e.hFB)(!0)}ngOnInit(){this.canToggle()?this.open.set(this.store.selectSnapshot(m.Pf.isOpenPanel(this.panelId()))):this.open.set(!0)}togglePanel(){const n=!this.open();this.open.set(n),this.panelId()&&this.store.dispatch(new B.B.TogglePanel(this.panelId(),n))}}(_n=Vo).\u0275fac=function(n){return new(n||_n)(e.rXU(l.il))},_n.\u0275cmp=e.VBU({type:_n,selectors:[["app-view-panel"]],inputs:{panelId:[e.Mj6.SignalBased,"panelId"],label:[e.Mj6.SignalBased,"label"],showHeader:[e.Mj6.SignalBased,"showHeader"],open:[e.Mj6.SignalBased,"open"],canToggle:[e.Mj6.SignalBased,"canToggle"]},outputs:{open:"openChange"},ngContentSelectors:["*"],decls:3,vars:2,consts:[[1,"-ml-1","text-sm","font-semibold"],[1,"transition-all",3,"ngClass"],["app-view-button","","buttonShape","rounded",1,"flex-grow","w-full","rounded","min-h-11",3,"click"],[1,"flex","justify-between","text-gray-900"],[1,"pl-1"],["aria-hidden","true",1,"px-3"],["icon","angle-right",1,"transition-transform",3,"ngClass"]],template:function(n,t){1&n&&(e.NAR(),e.DNE(0,Ll,7,4,"h2",0),e.j41(1,"div",1),e.SdG(2),e.k0s()),2&n&&(e.vxM(0,t.showHeader()?0:-1),e.R7$(),e.Y8G("ngClass",t.open()?"pb-6":"h-0 overflow-hidden"))},dependencies:[J.ri,p.YU,q.R],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(m.Pf.isOpenPanel("labels")),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],Vo.prototype,"labelsOpen",void 0);var sn,Lt=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},$t=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const $l=(o,n,t)=>[o,n,t];function xl(o,n){1&o&&e.nrm(0,"app-view-source-info",1),2&o&&e.Y8G("toggleable",!0)}function kl(o,n){1&o&&e.nrm(0,"app-view-audio-bar",11)}function Gl(o,n){if(1&o&&(e.j41(0,"div"),e.nrm(1,"app-content-blocks",12),e.nI1(2,"async"),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("contentBlocks",e.bMT(2,2,t.contentBlocks$))("include",t.contentBlockTypes.Ticker)}}function Wl(o,n){if(1&o&&(e.j41(0,"div",13),e.nrm(1,"app-content-blocks",12),e.nI1(2,"async"),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("contentBlocks",e.bMT(2,2,t.contentBlocks$))("include",e.sMw(4,$l,t.contentBlockTypes.Markdown,t.contentBlockTypes.Images,t.contentBlockTypes.Videos))}}function zl(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-view-panel",6),e.DNE(1,kl,1,0,"app-view-audio-bar",7),e.nI1(2,"async"),e.DNE(3,Gl,3,4,"div",8),e.nI1(4,"async"),e.j41(5,"app-view-description",9),e.mxI("isPopulatedChange",function(_){e.eBV(t);const s=e.XpG();return e.DH7(s.isPopulated,_)||(s.isPopulated=_),e.Njj(_)}),e.k0s(),e.DNE(6,Wl,3,8,"div",10),e.nI1(7,"async"),e.k0s()}if(2&o){let t,i;const _=e.XpG();e.Y8G("showHeader",!1)("canToggle",!1)("hidden",!_.isPopulated),e.R7$(),e.Y8G("ngIf",e.bMT(2,7,_.audioVisible$)),e.R7$(2),e.Y8G("ngIf",(null==(t=e.bMT(4,9,_.contentBlocks$))?null:t.length)>0),e.R7$(2),e.R50("isPopulated",_.isPopulated),e.R7$(),e.Y8G("ngIf",(null==(i=e.bMT(7,11,_.contentBlocks$))?null:i.length)>0)}}function Xl(o,n){if(1&o&&(e.j41(0,"app-view-panel",14),e.nrm(1,"app-view-legend",15),e.nI1(2,"async"),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("legend",e.bMT(2,1,t.chapter$).legend)}}function Bl(o,n){1&o&&(e.j41(0,"app-view-panel",16),e.nrm(1,"app-view-labels"),e.k0s())}function jl(o,n){if(1&o&&(e.j41(0,"app-view-panel",17),e.nrm(1,"app-content-blocks",18),e.nI1(2,"async"),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("contentBlocks",e.bMT(2,1,t.positionBlocks$))}}class rt{constructor(n,t,i){this.store=n,this.contentBlocksService=t,this.positionsService=i,this.contentTypes=yi.c,this.layout=(0,e.hFB)(),this.ngUnsubscribe=new $.B,this.isPopulated=!0,this.contentBlockTypes=No.m}ngOnInit(){this.positionBlocks$=this.contentBlocks$.pipe((0,Ut.Z)(n=>{let t=this.contentBlocksService.filterContentBlocksByType(n,[No.m.Positions]);return t.length>0&&(t=this.insertStartingPosition(t)),(0,vi.of)(t)}),(0,g.Q)(this.ngUnsubscribe))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}insertStartingPosition(n){return(n=(0,R.cloneDeep)(n))[0].positions.unshift(this.positionsService.startingPositionToAdditionalPosition(this.store.selectSnapshot(b.N.getSelectedChapterId))),n}}(sn=rt).\u0275fac=function(n){return new(n||sn)(e.rXU(l.il),e.rXU(y_.V),e.rXU(hl.c))},sn.\u0275cmp=e.VBU({type:sn,selectors:[["app-view-content-mode"]],inputs:{layout:[e.Mj6.SignalBased,"layout"]},decls:13,vars:19,consts:()=>{let o,n,t;return o=$localize`:␟5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5␟7297822327994766046:Legend`,n=$localize`:␟2af7efecfae8d7fed3b07f718a623eca1ad8163f␟546766753072101168:Labels`,t=$localize`:␟7acfeb6214be6d5b9c6ca7285d689dd1402ca446␟529261375582544700:Positions`,[["data-test","viewContentMode",1,"view-content-mode"],[1,"block","mb-4",3,"toggleable"],["panelId","description","aria-describedby","view-title",3,"showHeader","canToggle","hidden",4,"ngIf"],["panelId","legend","label",o,4,"ngIf"],["label",n,"panelId","labels",4,"ngIf"],["label",t,"panelId","positions",4,"ngIf"],["panelId","description","aria-describedby","view-title",3,"showHeader","canToggle","hidden"],["class","block mb-4",4,"ngIf"],[4,"ngIf"],[3,"isPopulatedChange","isPopulated"],["class","mt-5",4,"ngIf"],[1,"block","mb-4"],[3,"contentBlocks","include"],[1,"mt-5"],["panelId","legend","label",o],[3,"legend"],["label",n,"panelId","labels"],["label",t,"panelId","positions"],[3,"contentBlocks"]]},template:function(n,t){if(1&n&&(e.j41(0,"div",0),e.DNE(1,xl,1,1,"app-view-source-info",1)(2,zl,8,13,"app-view-panel",2),e.nI1(3,"async"),e.DNE(4,Xl,3,3,"app-view-panel",3),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.DNE(8,Bl,2,0,"app-view-panel",4),e.nI1(9,"async"),e.nI1(10,"async"),e.DNE(11,jl,3,3,"app-view-panel",5),e.nI1(12,"async"),e.k0s()),2&n){let i,_;e.R7$(),e.vxM(1,"drawer"===t.layout()?1:-1),e.R7$(),e.Y8G("ngIf",e.bMT(3,5,t.descriptionVisible$)),e.R7$(2),e.Y8G("ngIf",(null==(i=e.bMT(5,7,t.chapter$))?null:i.legend)&&(null==(i=e.bMT(6,9,t.chapter$))?null:i.legend.length)>0&&e.bMT(7,11,t.legendVisible$)),e.R7$(4),e.Y8G("ngIf",(null==(_=e.bMT(9,13,t.labels$))?null:_.length)&&e.bMT(10,15,t.labelListVisible$)),e.R7$(3),e.Y8G("ngIf",e.bMT(12,17,t.positionBlocks$).length>0)}},dependencies:[p.bT,Qi.l,El,xn,Jn,eo,Vl,Vo,p.Jj],styles:[".view-content-mode[_ngcontent-%COMP%]{padding-bottom:24px}"],changeDetection:0}),Lt([(0,l.l6)(b.N.getStoryChapters),$t("design:type",d.c)],rt.prototype,"chapters$",void 0),Lt([(0,l.l6)(b.N.getSelectedChapter),$t("design:type",d.c)],rt.prototype,"chapter$",void 0),Lt([(0,l.l6)(b.N.getSelectedChapterContentBlocks),$t("design:type",d.c)],rt.prototype,"contentBlocks$",void 0),Lt([(0,l.l6)(Je.y.getChapterLabels),$t("design:type",d.c)],rt.prototype,"labels$",void 0),Lt([(0,l.l6)(T.dF.getVisible(h.U.Description)),$t("design:type",d.c)],rt.prototype,"descriptionVisible$",void 0),Lt([(0,l.l6)(T.dF.getVisible(h.U.LabelList)),$t("design:type",d.c)],rt.prototype,"labelListVisible$",void 0),Lt([(0,l.l6)(T.dF.getVisible(h.U.Legend)),$t("design:type",d.c)],rt.prototype,"legendVisible$",void 0),Lt([(0,l.l6)(T.dF.getVisible(h.U.Audio)),$t("design:type",d.c)],rt.prototype,"audioVisible$",void 0);var an,Oi=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},wi=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Fl=(o,n)=>({"view-title--center":o,"view-title--ellipsis":n}),Hl=(o,n)=>({"text-md":o,"text-lg":n});function Ql(o,n){if(1&o&&e.nrm(0,"h2",4),2&o){const t=e.XpG();e.Y8G("innerHTML",t.htmlMetaTitle,e.npT)}}function Yl(o,n){if(1&o&&e.nrm(0,"h2",5),2&o){const t=e.XpG();e.Y8G("innerHTML",t.htmlSubTitle,e.npT)}}class mt{get style(){return this.sanitizer.bypassSecurityTrustStyle(this.useEllipsis?"overflow: hidden; display: flex; width: 100%;":"")}get mainTitle(){return this._mainTitle}set mainTitle(n){this._mainTitle=n,this.handleMarkdownTextUpdate(n,"htmlMainTitle")}get metaTitle(){return this._metaTitle}set metaTitle(n){this._metaTitle=n,this.handleMarkdownTextUpdate(n,"htmlMetaTitle")}get subTitle(){return this._subTitle}set subTitle(n){this._subTitle=n,this.handleMarkdownTextUpdate(n,"htmlSubTitle")}constructor(n,t,i,_,s){this.viewUIService=n,this.changeDetectorRef=t,this.sanitizer=i,this.markdownService=_,this.store=s,this.useEllipsis=!1,this.includePagination=!1,this.size="md",this._mainTitle="",this._metaTitle="",this.showMetaTitle=!0,this._subTitle="",this.showSubTitle=!0,this.align="left",this.viewLayout=h.U,this.ngUnsubscribe=new $.B}ngOnInit(){"chapter"===this.dynamicTitle?this.initDynamicChapterListener():"quiz"===this.dynamicTitle&&this.initDynamicQuizListener(),this.initLayoutListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}isEnabled(n){return this.viewUIService.isUIEnabled(n)}initDynamicChapterListener(){(0,Ae.z)([this.story$,this.chapter$,this.pagination$]).pipe((0,y.p)(([n,t])=>null!=t&&null!=n),(0,g.Q)(this.ngUnsubscribe)).subscribe(([n,t,i])=>{const _=ho.l.normalize(n.displayName),s=t.displayName?ho.l.normalize(t.displayName):$localize`Chapter`+` ${i.index+1}`;mi.c.application===Li.c.Studio&&(this.metaTitle=_!==s?_:""),this.mainTitle=s,this.subTitle=this.includePagination?i?.label:""})}initDynamicQuizListener(){this.activeQuestionIndex$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=this.store.selectSnapshot(O.j.getQuizSettings),i=this.store.selectSnapshot(O.j.getLifecycle);if(t.showProgress&&i!==Kn.h.Review){const _=$localize`Question ${n+1}`,s=$localize` of ${this.store.selectSnapshot(O.j.getQuestionTotal)}`;this.mainTitle=`${_}<span class="font-normal">${s}</span>`}else this.mainTitle=$localize`Quiz`})}initLayoutListener(){this.viewUI$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.changeDetectorRef.markForCheck()})}handleMarkdownTextUpdate(n,t){var i=this;return(0,To.A)(function*(){const _=yield i.markdownService.parse(n);i[t]=i.sanitizer.bypassSecurityTrustHtml(_||""),i.changeDetectorRef.markForCheck()})()}}(an=mt).\u0275fac=function(n){return new(n||an)(e.rXU(Eo.d),e.rXU(e.gRc),e.rXU(m_.up),e.rXU(j.Rl),e.rXU(l.il))},an.\u0275cmp=e.VBU({type:an,selectors:[["app-view-title"]],hostVars:2,hostBindings:function(n,t){2&n&&e.Aen(t.style)},inputs:{useEllipsis:"useEllipsis",includePagination:"includePagination",dynamicTitle:"dynamicTitle",size:"size",mainTitle:"mainTitle",metaTitle:"metaTitle",showMetaTitle:"showMetaTitle",subTitle:"subTitle",showSubTitle:"showSubTitle",align:"align"},decls:4,vars:11,consts:[[1,"view-title",3,"ngClass"],["id","view-title-meta","class","view-title__meta",3,"innerHTML",4,"ngIf"],["id","view-title","tabindex","0",1,"view-title__main",3,"ngClass","innerHTML"],["class","view-title__sub","id","view-title-sub",3,"innerHTML",4,"ngIf"],["id","view-title-meta",1,"view-title__meta",3,"innerHTML"],["id","view-title-sub",1,"view-title__sub",3,"innerHTML"]],template:function(n,t){1&n&&(e.j41(0,"section",0),e.DNE(1,Ql,1,1,"h2",1),e.nrm(2,"h1",2),e.DNE(3,Yl,1,1,"h2",3),e.k0s()),2&n&&(e.Y8G("ngClass",e.l_i(5,Fl,"center"===t.align,t.useEllipsis)),e.R7$(),e.Y8G("ngIf",t.metaTitle.length>0&&t.showMetaTitle),e.R7$(),e.Y8G("ngClass",e.l_i(8,Hl,"md"===t.size,"lg"===t.size))("innerHTML",t.htmlMainTitle,e.npT),e.R7$(),e.Y8G("ngIf",t.showSubTitle))},dependencies:[p.YU,p.bT],styles:["[_nghost-%COMP%]{display:flex}.view-title[_ngcontent-%COMP%]{overflow-wrap:break-word;color:#131c2a;border-radius:4px;transition:background-color 125ms;flex:1 1 0;display:flex;flex-direction:column;align-items:flex-start}.view-title--ellipsis[_ngcontent-%COMP%]{width:0}.view-title--ellipsis[_ngcontent-%COMP%]   .view-title__meta[_ngcontent-%COMP%], .view-title--ellipsis[_ngcontent-%COMP%]   .view-title__main[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.view-title--center[_ngcontent-%COMP%]{justify-content:center}.view-title__meta[_ngcontent-%COMP%]{font-size:.625rem;line-height:.75rem;text-transform:uppercase;text-align:start;font-weight:400;color:#374a68;overflow-wrap:anywhere;margin-bottom:4px}.view-title__main[_ngcontent-%COMP%]{color:#131c2a;text-align:start;font-weight:600;overflow-wrap:anywhere}.view-title__sub[_ngcontent-%COMP%]{font-size:.625rem;line-height:.75rem;text-transform:uppercase;text-align:start;margin-top:4px;color:#374a68;font-weight:400}.view-title[_ngcontent-%COMP%]:hover   .view-title__count[_ngcontent-%COMP%]{display:none}.view-title[_ngcontent-%COMP%]:hover   .view-title__show[_ngcontent-%COMP%]{display:block}.view-title__show[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),Oi([(0,l.l6)(Oe.t.getStory),wi("design:type",d.c)],mt.prototype,"story$",void 0),Oi([(0,l.l6)(b.N.getSelectedChapter),wi("design:type",d.c)],mt.prototype,"chapter$",void 0),Oi([(0,l.l6)(b.N.getChapterPagination),wi("design:type",d.c)],mt.prototype,"pagination$",void 0),Oi([(0,l.l6)(T.dF.getUI),wi("design:type",d.c)],mt.prototype,"viewUI$",void 0),Oi([(0,l.l6)(T.dF.getVisible(h.U.Pagination)),wi("design:type",d.c)],mt.prototype,"paginationVisible$",void 0),Oi([(0,l.l6)(O.j.getActiveQuestionIndex),wi("design:type",d.c)],mt.prototype,"activeQuestionIndex$",void 0);var D=c(49969),k_=c(11040);let G_=(()=>{var o;class n{constructor(i,_){this.store=i,this.el=_,this.appInfoScroll=!0,this.ngUnsubscribe=new $.B}ngOnInit(){this.store.selectSnapshot(O.j.hasQuiz)&&this.handleQuizScrolling(),this.handleChapterScrolling()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleChapterScrolling(){this.store.select(b.N.getSelectedChapterId).pipe((0,y.p)(()=>this.appInfoScroll),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.scrollToTop()})}handleQuizScrolling(){const i=this.store.select(O.j.getQuizModeActive),_=this.store.select(O.j.getLifecycle);i.pipe((0,y.p)(()=>this.appInfoScroll),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.scrollToTop()}),_.pipe((0,y.p)(()=>this.appInfoScroll),(0,g.Q)(this.ngUnsubscribe)).subscribe(s=>{s===Kn.h.Explanation?setTimeout(()=>this.scrollToBottom()):this.scrollToTop()})}scrollToTop(){this.el.nativeElement.scrollTo({top:0})}scrollToBottom(){this.el.nativeElement.scrollTo({top:this.el.nativeElement.scrollHeight,behavior:"smooth"})}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(l.il),e.rXU(e.aKT))},o.\u0275dir=e.FsC({type:o,selectors:[["","appInfoScroll",""]],inputs:{appInfoScroll:"appInfoScroll"}}),n})();const ql=[[["","header",""]],[["","body",""]],[["","aside",""]]],Kl=["[header]","[body]","[aside]"],Zl=(o,n)=>({"view-column--padded":o,"view-column--show-aside":n}),Jl=o=>({"!border-gray-200":o});function ec(o,n){1&o&&(e.j41(0,"div",4),e.SdG(1,2),e.k0s())}let to="-100%";const tc=(0,D.lY)([(0,D.iF)({transform:"translateX({{ translateX }})"}),(0,D.i0)("150ms ease-in-out",(0,D.iF)({transform:"*"}))],{params:{translateX:to}}),ic=(0,D.lY)([(0,D.i0)("150ms ease-in-out",(0,D.iF)({transform:"translateX({{ translateX }})"}))],{params:{translateX:to}});let W_=(()=>{var o;class n{get show(){return{value:this.floating(),params:{translateX:to}}}constructor(i,_,s){this.el=i,this.store=_,this.localeId=s,this.animationsDisabled=this.store.selectSnapshot(bo.U.getPrefersReducedMotion),this.contentMode=(0,re.ot)(this.store.select(m.Pf.getContentMode)),this.animated=(0,e.hFB)(!1),this.padded=(0,e.hFB)(!0),this.wide=(0,e.hFB)(!1),this.floating=(0,e.hFB)(!1),this.showFooter=(0,e.hFB)(!1),this.showAside=(0,e.hFB)(!1),this.footerLabel=(0,e.hFB)(""),this.viewContentMode=ht.G,this.footerExpanded=!1,this.scrollTop=0,"rtl"===(0,k_.NS)(this.localeId).direction&&(to="100%"),(0,e.QZP)(()=>{this.floating()&&this.el.nativeElement.classList.add("!absolute","z-50","top-0","start-0","bottom-0")}),(0,e.QZP)(()=>{const a=this.wide()?"424px":"320px";this.el.nativeElement.style.setProperty("--column-width",a)})}handleToggleFooter(i){this.footerExpanded=i}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(e.aKT),e.rXU(l.il),e.rXU(e.xe9))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-column"]],hostVars:2,hostBindings:function(i,_){2&i&&e.zvX("@show",_.show)("@.disabled",_.animationsDisabled)},inputs:{animated:[e.Mj6.SignalBased,"animated"],padded:[e.Mj6.SignalBased,"padded"],wide:[e.Mj6.SignalBased,"wide"],floating:[e.Mj6.SignalBased,"floating"],showFooter:[e.Mj6.SignalBased,"showFooter"],showAside:[e.Mj6.SignalBased,"showAside"],footerLabel:[e.Mj6.SignalBased,"footerLabel"]},ngContentSelectors:Kl,decls:6,vars:10,consts:[["data-test","viewColumn",1,"view-column",3,"ngClass"],[1,"border-b","border-transparent","border-solid","view-column__header",3,"ngClass"],[1,"view-column__body",3,"appScrollListenerChange","appScrollListener","appInfoScroll"],["class","view-column__aside",4,"ngIf"],[1,"view-column__aside"]],template:function(i,_){1&i&&(e.NAR(ql),e.j41(0,"div",0)(1,"div",1),e.SdG(2),e.k0s(),e.j41(3,"div",2),e.mxI("appScrollListenerChange",function(a){return e.DH7(_.scrollTop,a)||(_.scrollTop=a),a}),e.SdG(4,1),e.k0s(),e.DNE(5,ec,2,0,"div",3),e.k0s()),2&i&&(e.Y8G("ngClass",e.l_i(5,Zl,_.padded(),_.showAside())),e.R7$(),e.Y8G("ngClass",e.eq3(8,Jl,_.scrollTop>0||_.floating())),e.R7$(2),e.R50("appScrollListener",_.scrollTop),e.Y8G("appInfoScroll",_.contentMode()===_.viewContentMode.ChapterInfo||_.contentMode()===_.viewContentMode.Quiz),e.R7$(2),e.Y8G("ngIf",_.showAside()))},dependencies:[p.YU,p.bT,G_,P_],styles:['[_nghost-%COMP%]{--column-width: 320px;position:relative;width:var(--column-width);max-width:100vw}.view-column[_ngcontent-%COMP%]{background-color:#fff;border-right:1px solid #d7e0ea;height:100%;display:grid;grid-template-areas:"header" "content" "footer";grid-template-columns:auto;grid-template-rows:auto 1fr}.view-column--padded[_ngcontent-%COMP%]   .view-column__header[_ngcontent-%COMP%]{padding:20px 24px 12px}.view-column--padded[_ngcontent-%COMP%]   .view-column__body[_ngcontent-%COMP%]{padding:12px 24px 20px}.view-column--padded[_ngcontent-%COMP%]   .view-column__footer-content[_ngcontent-%COMP%]{padding:4px 24px 24px 12px}.view-column--show-aside[_ngcontent-%COMP%]{grid-template-areas:"aside header" "aside content" "aside footer";grid-template-columns:104px 320px}.view-column__aside[_ngcontent-%COMP%]{background-color:#f9fafd;grid-area:aside;border-right:1px solid #d7e0ea}.view-column__aside[_ngcontent-%COMP%]:empty{display:none}.view-column__header[_ngcontent-%COMP%]{grid-area:header}.view-column__body[_ngcontent-%COMP%]{grid-area:content;overflow:auto}.view-column__footer[_ngcontent-%COMP%]{grid-area:footer;border:1px solid #d7e0ea;display:flex;flex-direction:column}.view-column__footer-toggle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:16px 12px;color:#131c2a;font-size:.875rem;line-height:1.25rem;font-weight:600;text-transform:uppercase}.view-column__footer-content-wrapper[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:all .5s}.view-column__footer-content-wrapper--expanded[_ngcontent-%COMP%]{overflow:auto;max-height:40vh}'],data:{animation:[(0,D.hZ)("show",[(0,D.kY)(":enter",(0,D.sM)(tc)),(0,D.kY)(":leave",(0,D.sM)(ic))])]},changeDetection:0}),n})();var rn,z_=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},X_=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};class io{constructor(){}ngOnInit(){}}(rn=io).\u0275fac=function(n){return new(n||rn)},rn.\u0275cmp=e.VBU({type:rn,selectors:[["app-view-column-chapter-header"]],decls:3,vars:3,consts:[["data-test","viewColumnHeader",1,"view-column-chapter-header"],[1,"view-column-chapter-header__title"],["size","lg",3,"dynamicTitle","showMetaTitle","showSubTitle"]],template:function(n,t){1&n&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"app-view-title",2),e.k0s()()),2&n&&(e.R7$(2),e.Y8G("dynamicTitle","chapter")("showMetaTitle",!1)("showSubTitle",!1))},dependencies:[mt],styles:[".view-column-chapter-header[_ngcontent-%COMP%]{min-height:32px;display:flex;align-items:center}.view-column-chapter-header__title[_ngcontent-%COMP%]{flex-grow:1;padding-right:12px}.view-column-chapter-header__pagination[_ngcontent-%COMP%]{align-self:flex-start}"],changeDetection:0}),z_([(0,l.l6)(b.N.getChapterCount),X_("design:type",d.c)],io.prototype,"chapterCount$",void 0),z_([(0,l.l6)(T.dF.getVisible(h.U.Pagination)),X_("design:type",d.c)],io.prototype,"paginationVisible$",void 0);var ln,B_=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},j_=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const nc=["sourceInformation"];function oc(o,n){1&o&&(e.qex(0),e.nrm(1,"app-view-title",9),e.bVm()),2&o&&(e.R7$(),e.Y8G("dynamicTitle","quiz")("showMetaTitle",!1)("showSubTitle",!1))}function _c(o,n){1&o&&(e.qex(0),e.nrm(1,"app-view-column-chapter-header")(2,"app-view-source-info-toggle"),e.bVm())}function sc(o,n){1&o&&(e.qex(0),e.nrm(1,"app-view-content-mode"),e.bVm())}function ac(o,n){1&o&&(e.qex(0),e.nrm(1,"app-view-quiz",10),e.bVm())}class no{constructor(n,t){this.store=n,this.popupService=t,this.contentMode=(0,re.ot)(this.store.select(m.Pf.getContentMode)),this.paginationVisible=(0,re.ot)(this.store.select(T.dF.getVisible(h.U.Pagination))),this.viewContentMode=ht.G}toggleSourceInformation(){this.popupService.open({origin:this.sourceInformationEl.nativeElement,content:xn}).afterClosed$.subscribe()}}(ln=no).\u0275fac=function(n){return new(n||ln)(e.rXU(l.il),e.rXU(mo.O))},ln.\u0275cmp=e.VBU({type:ln,selectors:[["app-view-column-container"]],viewQuery:function(n,t){if(1&n&&e.GBs(nc,5),2&n){let i;e.mGM(i=e.lsd())&&(t.sourceInformationEl=i.first)}},decls:11,vars:8,consts:()=>{let o;return o=$localize`:␟459baf5634e45a7173e4f0e1920265af97fce630␟801176277231880295:Chapter Description`,[["data-test","viewColumnContainer","role","region","aria-label",o,3,"padded","showAside"],["aside",""],[1,"block","h-full"],["header",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["body",""],[4,"ngIf"],[3,"dynamicTitle","showMetaTitle","showSubTitle"],["mode","column"]]},template:function(n,t){1&n&&(e.j41(0,"app-view-column",0),e.qex(1,1),e.nrm(2,"app-view-chapter-list",2),e.bVm(),e.qex(3,3)(4,4),e.nI1(5,"async"),e.DNE(6,oc,2,3,"ng-container",5)(7,_c,3,0,"ng-container",6),e.bVm()(),e.qex(8,7),e.DNE(9,sc,2,0,"ng-container",8)(10,ac,2,0,"ng-container",8),e.bVm(),e.k0s()),2&n&&(e.Y8G("padded",t.contentMode()!==t.viewContentMode.Search)("showAside",t.paginationVisible()),e.R7$(4),e.Y8G("ngSwitch",e.bMT(5,6,t.contentMode$)),e.R7$(2),e.Y8G("ngSwitchCase",t.viewContentMode.Quiz),e.R7$(3),e.Y8G("ngIf",t.contentMode()===t.viewContentMode.ChapterInfo),e.R7$(),e.Y8G("ngIf",t.contentMode()===t.viewContentMode.Quiz))},dependencies:[p.bT,p.ux,p.e1,p.fG,je,t_,Ro,rt,mt,W_,io,p.Jj],styles:["[_nghost-%COMP%]{position:relative;height:100%}.view-column-container[_ngcontent-%COMP%]{height:100%}.view-column-container--hide-tabs[_ngcontent-%COMP%]   .view-column-container__tabs[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),B_([(0,l.l6)(m.Pf.getContentMode),j_("design:type",d.c)],no.prototype,"contentMode$",void 0),B_([(0,l.l6)(T.dF.getVisible(h.U.Pagination)),j_("design:type",d.c)],no.prototype,"paginationVisible$",void 0);const rc=(o,n)=>({"rotate-180":o,"rotate-0":n});let lc=(()=>{var o;class n{constructor(i,_,s){this.viewService=i,this.store=_,this.directionality=s,this.chapter=(0,re.ot)(this.store.select(b.N.getSelectedChapter)),this.viewUI=(0,re.ot)(this.store.select(T.dF.getUI)),this.isOut=(0,e.EWP)(()=>!(0,R.isNil)(this.chapter())&&this.viewUI().column.status!==ot.Q.Collapse),this.tooltipText=(0,e.EWP)(()=>this.isOut()?$localize`Close Info Panel`:$localize`Open Info Panel`),this.tooltipPosition="ltr"===this.directionality.value?"right":"left"}handleToggle(){const i=this.store.selectSnapshot(m.Pf.getContentMode);this.viewService.toggleColumn(),this.viewService.toggleSearch(null,!1),i===ht.G.NodeInfo&&this.viewService.toggleNodeInfo(!1),i===ht.G.LabelInfo&&this.viewService.toggleLabelInfo(!1)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(Z.z),e.rXU(l.il),e.rXU(He.dS))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-column-toggle"]],decls:3,vars:8,consts:[["orientation","vertical","appPreventFadeout",""],["app-view-button","","buttonSize","small","data-test","viewColumnToggle",3,"click","matTooltip","matTooltipPosition"],["appLogicalDir","","size","lg","icon","angles-left",1,"rotate--animate",3,"ngClass"]],template:function(i,_){1&i&&(e.j41(0,"app-pillbox",0)(1,"button",1),e.bIt("click",function(){return _.handleToggle()}),e.nrm(2,"app-icon",2),e.k0s()()),2&i&&(e.R7$(),e.Y8G("matTooltip",_.tooltipText())("matTooltipPosition",_.tooltipPosition),e.BMQ("aria-label",_.tooltipText())("aria-expanded",_.isOut()),e.R7$(),e.Y8G("ngClass",e.l_i(5,rc,!_.isOut(),_.isOut())))},dependencies:[J.ri,p.YU,Ei.s,Ot.e,q.R,ye.oV,Vt.O],encapsulation:2,data:{animation:[(0,D.hZ)("show",[(0,D.kY)(":enter",[(0,D.iF)({opacity:0,transform:"translateX(-32px)"}),(0,D.i0)("300ms ease-in-out",(0,D.iF)({opacity:1,transform:"*"}))]),(0,D.kY)(":leave",[(0,D.i0)("300ms ease-in-out",(0,D.iF)({transform:"translateX(-32px)",opacity:0}))])])]},changeDetection:0}),n})();var cn,F_=c(8961);function pc(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",2)(1,"app-message-toggle",3),e.bIt("handleDismiss",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleDismiss())}),e.j41(2,"div"),e.pXf(3,0),e.k0s()()()}2&o&&(e.R7$(),e.Y8G("dismiss",!0))}class Po{constructor(n){this.changeRef=n,this.shown=!1,this.ngUnsubscribe=new $.B}ngOnInit(){this.bookmark$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=(0,R.get)(n,"tags",[]);this.shown=t.includes("complete anatomy"),this.changeRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleDismiss(){this.shown=!1,this.changeRef.markForCheck()}}(cn=Po).\u0275fac=function(n){return new(n||cn)(e.rXU(e.gRc))},cn.\u0275cmp=e.VBU({type:cn,selectors:[["app-view-content-warning"]],decls:2,vars:3,consts:()=>{let o;return o=$localize`:␟971372758a4ed342c52bb48b1081e75772857366␟4888031257194232864: This model is not optimized for use on mobile devices. For an optimal experience, please switch to a desktop device or try our Anatomy by Regions. `,[o,["class","warning",4,"ngIf"],[1,"warning"],["type","warning","toggleStyle","flat","icon","info-circle",3,"handleDismiss","dismiss"]]},template:function(n,t){1&n&&(e.DNE(0,pc,4,1,"div",1),e.nI1(1,"async")),2&n&&e.Y8G("ngIf",e.bMT(1,1,t.bookmark$)&&t.shown)},dependencies:[p.bT,F_.X,p.Jj],styles:[".warning{position:fixed;top:0;left:0;right:0;z-index:1001}\n"],encapsulation:2,changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(Ht.J.getSelectedBookmark),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],Po.prototype,"bookmark$",void 0);var dn,uc=c(25780);class Uo{constructor(){this.toggle=new e.bkB,this.open=!1,this.fixed=!1,this.compact=!1}handleToggleClick(){this.toggle.emit()}}(dn=Uo).\u0275fac=function(n){return new(n||dn)},dn.\u0275cmp=e.VBU({type:dn,selectors:[["app-view-drawer-header"]],inputs:{open:"open",fixed:"fixed",compact:"compact"},outputs:{toggle:"toggle"},ngContentSelectors:["*"],decls:5,vars:8,consts:[["app-view-button","","buttonSize","fill","data-test","drawerToggleButton",1,"view-drawer-header",3,"click"],[1,"view-drawer-header__content"],["size","md",1,"mx-4",3,"icon"]],template:function(n,t){if(1&n&&(e.NAR(),e.j41(0,"button",0),e.bIt("click",function(){return t.handleToggleClick()}),e.j41(1,"div",1),e.SdG(2),e.nrm(3,"app-icon",2),e.nI1(4,"async"),e.k0s()()),2&n){let i;e.AVh("view-drawer-header--fixed",t.fixed)("view-drawer-header--compact",t.compact),e.BMQ("aria-expanded",t.open),e.R7$(3),e.Y8G("icon","show"===(null==(i=e.bMT(4,6,t.viewUI$))?null:i.drawer.status)?"angle-down":"angle-up")}},dependencies:[J.ri,q.R,p.Jj],styles:[".view-drawer-header[_ngcontent-%COMP%]{--header-height: 40px;font-size:16px;width:100%;border-bottom:1px solid #d7e0ea;min-height:var(--header-height)}.view-drawer-header--fixed[_ngcontent-%COMP%]{font-size:14px;height:var(--header-height)}.view-drawer-header--compact[_ngcontent-%COMP%]{--header-height: 24px;min-height:var(--header-height);height:var(--header-height);font-size:12px}.view-drawer-header__content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 16px;margin:0 auto;max-width:520px;min-height:var(--header-height)-4px}"],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(T.dF.getUI),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],Uo.prototype,"viewUI$",void 0);var pn,De=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},Le=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Ec=["viewDrawer"],fc=["viewDrawerContent"],Sc=(o,n,t)=>({"view-drawer--closed":o,"view-drawer--active":n,"view-drawer--scrollable":t});function Tc(o,n){if(1&o&&(e.j41(0,"div",9),e.nrm(1,"app-spinner",10),e.nI1(2,"async"),e.k0s()),2&o){let t;const i=e.XpG();e.R7$(),e.Y8G("label",null==(t=e.bMT(2,1,i.scrim$))?null:t.label)}}function bc(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"app-view-drawer-header",11),e.bIt("toggle",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleToggleClick(_.viewContentMode.ChapterInfo))}),e.nrm(2,"app-view-title",12),e.k0s(),e.bVm()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("compact",t.scrolled&&t.scrollThreshold),e.R7$(),e.Y8G("dynamicTitle","chapter")("showMetaTitle",!1)("showSubTitle",!1)("useEllipsis",t.scrolled&&t.scrollThreshold)}}function vc(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"app-view-drawer-header",13),e.bIt("toggle",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleToggleClick(_.viewContentMode.Quiz))}),e.nrm(2,"app-view-title",14),e.k0s(),e.bVm()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("fixed",!0)("compact",t.scrolled&&t.scrollThreshold),e.R7$(),e.Y8G("dynamicTitle","quiz")("showMetaTitle",!1)("showSubTitle",!1)}}function Oc(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"app-view-drawer-header",13),e.nI1(2,"async"),e.bIt("toggle",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleToggleClick(_.viewContentMode.LabelInfo))}),e.nrm(3,"app-view-title",15),e.nI1(4,"async"),e.k0s(),e.bVm()}if(2&o){let t,i;const _=e.XpG();e.R7$(),e.Y8G("fixed","collapse"===(null==(t=e.bMT(2,5,_.drawerUI$))?null:t.status))("compact",_.scrolled&&_.scrollThreshold),e.R7$(2),e.Y8G("align","center")("mainTitle",null==(i=e.bMT(4,7,_.selectedLabel$))?null:i.title)("useEllipsis",_.scrolled&&_.scrollThreshold)}}function wc(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"app-view-drawer-header",13),e.nI1(2,"async"),e.bIt("toggle",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleToggleClick(_.viewContentMode.VisibilityLayers))}),e.nrm(3,"app-view-title",16),e.k0s(),e.bVm()}if(2&o){let t;const i=e.XpG();e.R7$(),e.Y8G("fixed","collapse"===(null==(t=e.bMT(2,3,i.drawerUI$))?null:t.status))("compact",i.scrolled&&i.scrollThreshold),e.R7$(2),e.Y8G("align","left")}}function Ic(o,n){1&o&&(e.qex(0),e.nrm(1,"app-view-content-mode",17),e.bVm())}function Cc(o,n){1&o&&e.nrm(0,"app-view-quiz",20)}function Mc(o,n){if(1&o&&(e.j41(0,"div",18),e.DNE(1,Cc,1,0,"app-view-quiz",19),e.nI1(2,"async"),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,1,t.quizModeActive$))}}function yc(o,n){if(1&o&&(e.j41(0,"div",23),e.nrm(1,"app-content-blocks",24),e.nI1(2,"async"),e.k0s()),2&o){let t;const i=e.XpG(2);e.R7$(),e.Y8G("contentBlocks",null==(t=e.bMT(2,2,i.selectedLabel$))?null:t.contentBlocks)("layout","compact")}}function Ac(o,n){if(1&o&&(e.qex(0),e.DNE(1,yc,3,4,"div",21),e.nI1(2,"async"),e.nrm(3,"app-html",22),e.nI1(4,"async"),e.bVm()),2&o){let t,i;const _=e.XpG();e.R7$(),e.Y8G("ngIf",null==(t=e.bMT(2,2,_.selectedLabel$))?null:t.contentBlocks),e.R7$(2),e.Y8G("markdownText",null==(i=e.bMT(4,4,_.selectedLabel$))?null:i.description)}}function Nc(o,n){1&o&&(e.qex(0),e.nrm(1,"app-view-visibility-layers",25),e.bVm()),2&o&&(e.R7$(),e.Y8G("compact",!0))}class Re{constructor(n,t,i){this.changeDetectorRef=n,this.viewService=t,this.store=i,this.viewContentMode=ht.G,this.openChanged=new e.bkB,this.ngUnsubscribe=new $.B,this.viewMode=Gn,this.mode=Gn.Content,this.horizontalBreakpoint=Ui.m,this.scrolled=!1,this.scrollThreshold=!1}ngOnInit(){this.initQuizObserver(),this.initScrollObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initQuizObserver(){const n=this.selectedChapterReady$.pipe((0,Ue.T)(t=>t&&t.model),(0,y.p)(t=>t),(0,Be.B)(300));(0,Ae.z)([n,this.quizModeActive$]).pipe((0,y.p)(([t])=>t),(0,g.Q)(this.ngUnsubscribe)).subscribe(([,t])=>{setTimeout(()=>{t&&(this.viewService.toggleDrawer(ot.Q.Show),this.changeDetectorRef.markForCheck())})})}initScrollObserver(){(0,Ve.R)(this.viewDrawerContent.nativeElement,"scroll").pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(()=>this.handleContentScroll())}updateViewHeight(){const n=this.store.selectSnapshot(gi.W.getSiteHeader),t=this.store.selectSnapshot(gi.W.getSiteHeaderHeight),i=(0,Wn.Un)(n),_=(0,Wn.mJ)(n,t,i);this.viewDrawer.nativeElement.style.setProperty("--vh",`${_}px`)}handleToggleClick(n){const t=this.store.selectSnapshot(T.dF.getUIEntry(h.U.Drawer));switch(n){case ht.G.LabelInfo:this.viewService.clearSelectedLabel();break;case ht.G.Quiz:this.viewService.toggleDrawer(t.status===ot.Q.Show?ot.Q.Collapse:ot.Q.Show);break;default:this.viewService.toggleDrawer()}}handleDrawerKeydown(n){("ArrowDown"===n.key||"ArrowUp"===n.key)&&n.stopPropagation()}handleLabelBack(){this.viewService.clearSelectedLabel()}handlePreviousClick(){this.viewService.previousChapter("drawer")}handleNextClick(){this.viewService.nextChapter("drawer")}handleContentScroll(){const n=this.viewDrawerContent.nativeElement.scrollTop;this.scrollThreshold=this.viewDrawerContent.nativeElement.scrollHeight-this.viewDrawerContent.nativeElement.clientHeight>21;const _=n>0;_!==this.scrolled&&(this.scrolled=_,this.changeDetectorRef.markForCheck())}}(pn=Re).\u0275fac=function(n){return new(n||pn)(e.rXU(e.gRc),e.rXU(Z.z),e.rXU(l.il))},pn.\u0275cmp=e.VBU({type:pn,selectors:[["app-view-drawer"]],viewQuery:function(n,t){if(1&n&&(e.GBs(Ec,5),e.GBs(fc,7)),2&n){let i;e.mGM(i=e.lsd())&&(t.viewDrawer=i.first),e.mGM(i=e.lsd())&&(t.viewDrawerContent=i.first)}},outputs:{openChanged:"openChanged"},decls:22,vars:32,consts:()=>{let o;return o=$localize`:␟459baf5634e45a7173e4f0e1920265af97fce630␟801176277231880295:Chapter Description`,[["viewDrawer",""],["viewDrawerContent",""],["data-test","viewPageDrawer",1,"view-drawer",3,"ngClass"],["class","view-drawer__scrim",4,"ngIf"],["role","region","aria-label",o,1,"view-drawer__outer",3,"keydown"],[1,"view-drawer__inner",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"view-drawer__content",3,"appInfoScroll","ngSwitch"],["class","pt-3 pb-8",4,"ngSwitchCase"],[1,"view-drawer__scrim"],["size","large",3,"label"],[3,"toggle","compact"],[3,"dynamicTitle","showMetaTitle","showSubTitle","useEllipsis"],[3,"toggle","fixed","compact"],[3,"dynamicTitle","showMetaTitle","showSubTitle"],[3,"align","mainTitle","useEllipsis"],["mainTitle","Anatomy Layers",3,"align"],["layout","drawer",1,"mt-2"],[1,"pt-3","pb-8"],["mode","drawer",4,"ngIf"],["mode","drawer"],["appEventFence","",4,"ngIf"],[1,"text-sm",3,"markdownText"],["appEventFence",""],[3,"contentBlocks","layout"],[3,"compact"]]},template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"div",2,0),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.DNE(5,Tc,3,3,"div",3),e.nI1(6,"async"),e.j41(7,"div",4),e.bIt("keydown",function(s){return e.eBV(i),e.Njj(t.handleDrawerKeydown(s))}),e.j41(8,"div",5),e.nI1(9,"async"),e.DNE(10,bc,3,5,"ng-container",6)(11,vc,3,5,"ng-container",6)(12,Oc,5,9,"ng-container",6)(13,wc,4,5,"ng-container",6),e.j41(14,"div",7,1),e.nI1(16,"async"),e.nI1(17,"async"),e.DNE(18,Ic,2,0,"ng-container",6)(19,Mc,3,3,"div",8)(20,Ac,5,6,"ng-container",6)(21,Nc,2,1,"ng-container",6),e.k0s()()()()}if(2&n){let i,_;e.Y8G("ngClass",e.sMw(28,Sc,!1===e.bMT(2,14,t.drawerVisible$),e.bMT(3,16,t.drawerVisible$),"show"===(null==(i=e.bMT(4,18,t.drawerUI$))?null:i.status))),e.R7$(5),e.Y8G("ngIf",null==(_=e.bMT(6,20,t.scrim$))?null:_.show),e.R7$(3),e.Y8G("ngSwitch",e.bMT(9,22,t.contentMode$)),e.R7$(2),e.Y8G("ngSwitchCase",t.viewContentMode.ChapterInfo),e.R7$(),e.Y8G("ngSwitchCase",t.viewContentMode.Quiz),e.R7$(),e.Y8G("ngSwitchCase",t.viewContentMode.LabelInfo),e.R7$(),e.Y8G("ngSwitchCase",t.viewContentMode.VisibilityLayers),e.R7$(),e.Y8G("appInfoScroll",!0)("ngSwitch",e.bMT(16,24,t.contentMode$)),e.BMQ("tabindex",e.bMT(17,26,t.drawerVisible$)?0:-1),e.R7$(4),e.Y8G("ngSwitchCase",t.viewContentMode.ChapterInfo),e.R7$(),e.Y8G("ngSwitchCase",t.viewContentMode.Quiz),e.R7$(),e.Y8G("ngSwitchCase",t.viewContentMode.LabelInfo),e.R7$(),e.Y8G("ngSwitchCase",t.viewContentMode.VisibilityLayers)}},dependencies:[p.YU,p.bT,p.ux,p.e1,Qi.l,uc.L,G_,Yn.tI,$n.V,je,go,rt,mt,Uo,p.Jj],styles:[".view-drawer{height:100%;padding-bottom:4px}.view-drawer--active,.view-drawer--closed{background-color:#fff}.view-drawer--scrollable{min-height:0}.view-drawer--scrollable .view-drawer__content{overflow-y:scroll}.view-drawer__header{position:relative;border-bottom:1px solid #eaeff5}.view-drawer__pagination,.view-drawer__media{display:flex;align-items:center;border-right:1px solid rgba(0,0,0,.1)}.view-drawer__toggle{padding:0 16px;display:flex;align-items:center;justify-content:center;width:100%;font-size:.625rem;line-height:.75rem;text-transform:uppercase;font-weight:600}.view-drawer__inner{height:100%;display:flex;flex-direction:column}.view-drawer__outer{outline:none;height:100%}.view-drawer__content{display:flex;flex:1 1 100%;flex-direction:column;width:100%;max-width:520px;margin:0 auto;padding:8px 16px}.view-drawer__scrim{background-color:#fff;position:absolute;display:flex;justify-content:center;align-items:center;z-index:50;inset:0}.view-drawer__pagination-tooltip{position:absolute;z-index:1000;bottom:100%;left:36px}\n"],encapsulation:2,changeDetection:0}),De([(0,l.l6)(m.Pf.getContentMode),Le("design:type",d.c)],Re.prototype,"contentMode$",void 0),De([(0,l.l6)(m.Pf.getScrim),Le("design:type",d.c)],Re.prototype,"scrim$",void 0),De([(0,l.l6)(b.N.getSelectedChapterTitle),Le("design:type",d.c)],Re.prototype,"selectedChapterTitle$",void 0),De([(0,l.l6)(b.N.getChapterPagination),Le("design:type",d.c)],Re.prototype,"pagination$",void 0),De([(0,l.l6)(b.N.getSelectedChapterReadyState),Le("design:type",d.c)],Re.prototype,"selectedChapterReady$",void 0),De([(0,l.l6)(b.N.getNextChapter),Le("design:type",d.c)],Re.prototype,"nextChapter$",void 0),De([(0,l.l6)(Je.y.getSelectedLabel),Le("design:type",d.c)],Re.prototype,"selectedLabel$",void 0),De([(0,l.l6)(O.j.getQuizModeActive),Le("design:type",d.c)],Re.prototype,"quizModeActive$",void 0),De([(0,l.l6)(O.j.getActiveQuestionIndex),Le("design:type",d.c)],Re.prototype,"activeQuestionIndex$",void 0),De([(0,l.l6)(O.j.getQuestionTotal),Le("design:type",d.c)],Re.prototype,"questionTotal$",void 0),De([(0,l.l6)(O.j.getQuestionsRemaining),Le("design:type",d.c)],Re.prototype,"questionRemaining$",void 0),De([(0,l.l6)(O.j.getQuizSettings),Le("design:type",d.c)],Re.prototype,"quizSettings$",void 0),De([(0,l.l6)(O.j.getQuizModeLocked),Le("design:type",d.c)],Re.prototype,"quizLocked$",void 0),De([(0,l.l6)(hi.V.getHorizontalBreakpoint),Le("design:type",d.c)],Re.prototype,"horizontalBreakpoint$",void 0),De([(0,l.l6)(T.dF.getVisible(h.U.Drawer)),Le("design:type",d.c)],Re.prototype,"drawerVisible$",void 0),De([(0,l.l6)(T.dF.getUIEntry(h.U.Drawer)),Le("design:type",d.c)],Re.prototype,"drawerUI$",void 0);let Rc=(()=>{var o;class n{constructor(i,_,s){this.viewService=i,this.directionality=_,this.store=s,this.viewUI=(0,re.ot)(this.store.select(T.dF.getUI)),this.contentMode=(0,re.ot)(this.store.select(m.Pf.getContentMode)),this.isOut=(0,e.EWP)(()=>this.viewUI().drawer.status===ot.Q.Show&&this.contentMode()===ht.G.ChapterInfo),this.tooltipText=(0,e.EWP)(()=>this.isOut()?$localize`Close Info Panel`:$localize`Open Info Panel`),this.tooltipPosition="ltr"===this.directionality.value?"right":"left"}toggleDrawer(){const i=this.isOut()?ot.Q.Hide:ot.Q.Show;this.viewService.clearSelectedLabel(),this.viewService.setContentMode(ht.G.ChapterInfo),this.viewService.toggleDrawer(i,!0)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(Z.z),e.rXU(He.dS),e.rXU(l.il))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-drawer-toggle"]],decls:2,vars:4,consts:[["app-view-button","","buttonSize","small","data-test","viewDrawerToggle",3,"click","matTooltip","matTooltipPosition","buttonTheme"],["size","lg","icon","info",3,"custom"]],template:function(i,_){1&i&&(e.j41(0,"button",0),e.bIt("click",function(){return _.toggleDrawer()}),e.nrm(1,"app-icon",1),e.k0s()),2&i&&(e.Y8G("matTooltip",_.tooltipText())("matTooltipPosition",_.tooltipPosition)("buttonTheme",_.isOut()?"blue-fill":"transparent-fill"),e.R7$(),e.Y8G("custom",!0))},dependencies:[J.ri,q.R,ye.oV],changeDetection:0}),n})();function Vc(o,n){1&o&&e.nrm(0,"app-icon",6)}function Pc(o,n){1&o&&e.nrm(0,"app-icon",7)}function Uc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",2),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleFullscreenClick())}),e.j41(1,"span",3),e.EFF(2),e.k0s(),e.DNE(3,Vc,1,0,"app-icon",4)(4,Pc,1,0,"app-icon",5),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("buttonSize",t.buttonSize)("matTooltip",t.fullscreenToggleTooltip),e.R7$(2),e.JRh(t.fullscreenToggleTooltip),e.R7$(),e.Y8G("ngIf",t.isFullscreen),e.R7$(),e.Y8G("ngIf",!t.isFullscreen)}}function Dc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",9),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleNewTabClick())}),e.nrm(1,"app-icon",10),e.k0s()}if(2&o){const t=e.XpG(2);e.Y8G("buttonSize",t.buttonSize)}}function Lc(o,n){if(1&o&&(e.qex(0),e.DNE(1,Dc,2,1,"button",8),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.canFullscreen)}}let $c=(()=>{var o;class n{constructor(i,_){this.viewService=i,this.changeDetectorRef=_,this.isFullscreen=!1,this.canFullscreen=!1,this.ngUnsubscribe=new $.B,this.viewUI=h.U,this.nativePlatform=l_.I,this.application=Li.c,this.buttonSize=J.Mp.Default}ngOnInit(){this.canFullscreen=Yt.g.canFullscreen(),this.initFullscreenListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleFullscreenClick(){Yt.g.toggleFullscreen()}handleNewTabClick(){this.viewService.openInNewTab()}initFullscreenListener(){Yt.g.onFullscreenChange().pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(i=>{this.isFullscreen=i,this.fullscreenToggleTooltip=i?$localize`Exit Fullscreen`:$localize`Enter Fullscreen`,this.changeDetectorRef.markForCheck()})}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(Z.z),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-fullscreen"]],inputs:{buttonSize:"buttonSize"},decls:2,vars:4,consts:()=>{let t;return t=$localize`:␟0ced11d3928af0572f10cfd084c3f86347d3af60␟6283253681872253092:Open in New Tab`,[["appPreventFadeout","","app-view-button","","data-test","viewFullscreenButton","matTooltipPosition","left",3,"buttonSize","matTooltip","click",4,"ngIf"],[4,"appFlagApplication","appFlagApplicationMode","appFlagApplicationNative"],["appPreventFadeout","","app-view-button","","data-test","viewFullscreenButton","matTooltipPosition","left",3,"click","buttonSize","matTooltip"],[1,"sr-only"],["size","lg","icon","compress",4,"ngIf"],["size","lg","icon","expand",4,"ngIf"],["size","lg","icon","compress"],["size","lg","icon","expand"],["appPreventFadeout","","app-view-button","","matTooltip",t,"matTooltipPosition","left","data-test","viewNewTab",3,"buttonSize","click",4,"ngIf"],["appPreventFadeout","","app-view-button","","matTooltip",t,"matTooltipPosition","left","data-test","viewNewTab",3,"click","buttonSize"],["icon","arrow-up-right-from-square"]]},template:function(i,_){1&i&&e.DNE(0,Uc,5,5,"button",0)(1,Lc,2,1,"ng-container",1),2&i&&(e.Y8G("ngIf",_.canFullscreen),e.R7$(),e.Y8G("appFlagApplication",_.application.All)("appFlagApplicationMode","exclude")("appFlagApplicationNative",_.nativePlatform.All))},dependencies:[J.ri,p.bT,E_.Y,Ei.s,q.R,ye.oV],encapsulation:2,changeDetection:0}),n})();var oo=c(17215);function xc(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",2)(1,"app-message-toggle",3),e.bIt("handleDismiss",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleDismiss())}),e.j41(2,"div"),e.pXf(3,0),e.k0s()()()}2&o&&(e.R7$(),e.Y8G("dismiss",!0))}const Zt=[];let _o,so,Gc=(()=>{var o;class n{constructor(i,_){this.storageService=i,this.changeRef=_,this.shown=!1,this.sampling=!1}ngOnInit(){this.storageService.getLocalItem(oo.UT.Iphone12Warning)||this.testDevices()}ngOnDestroy(){this.sampling=!1}testDevices(){const i=window.matchMedia("only screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)"),_=window.matchMedia("only screen and (device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3)"),s=window.matchMedia("only screen and (device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2)"),a=i.matches||_.matches||s.matches,r=/iPhone|iPad/.test(navigator.userAgent),u=/OS\s14/.test(navigator.userAgent);a&&r&&u&&this.startFrameSampling()}startFrameSampling(){this.sampling=!0,_o=0,so=Date.now();const i=()=>{this.frame()?(this.shown=!0,this.changeRef.markForCheck()):this.sampling&&requestAnimationFrame(i)};requestAnimationFrame(i)}frame(){_o++;const i=Date.now();if(i>=so+500){const s=Math.floor(500*_o/(i-so)*2);if(Zt.push(s),Zt.length>3&&Zt.shift(),3===Zt.length&&(Zt[0]+Zt[1]+Zt[2])/3<10)return!0;so=i,_o=0}}handleDismiss(){this.shown=!1,this.changeRef.markForCheck(),this.storageService.setLocalItem(oo.UT.Iphone12Warning,!0)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(oo.n$),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-iphone12-warning"]],decls:1,vars:1,consts:()=>{let t;return t=$localize`:␟6aa3f174a7565623c9f89ee56c05a46a791742c9␟6041509682411192729: This model appears to be performing slowly on your device. For an optimal experience, please switch to a different device or try another model. `,[t,["class","warning",4,"ngIf"],[1,"warning"],["type","warning","toggleStyle","flat","icon","info-circle",3,"handleDismiss","dismiss"]]},template:function(i,_){1&i&&e.DNE(0,xc,4,1,"div",1),2&i&&e.Y8G("ngIf",_.shown)},dependencies:[p.bT,F_.X],styles:[".warning[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;z-index:1002}"],changeDetection:0}),n})();const Wc=["viewLoader"],zc=["*"];let Xc=(()=>{var o;class n{constructor(i,_,s,a){this.renderer=i,this.viewService=_,this.mediaService=s,this.store=a,this.ngUnsubscribe=new $.B}handleClick(){this.renderer.addClass(this.viewLoaderRef.nativeElement,"view-loader--disappear"),this.viewService.toggleInteract(!1),this.store.selectSnapshot(bo.U.getPrefersReducedMotion)||this.viewService.playChapterFromStart();const i=this.store.selectSnapshot(m.Pf.getViewLanguage),_=this.store.selectSnapshot(b.N.getSelectedChapter);this.store.selectSnapshot(m.Pf.getPlaythroughEnabled)||this.mediaService.getChapterAudioPlayer(_,i).then(a=>{if(a){const r=this.store.selectSnapshot(b.N.getSelectedChapterId);this.mediaService.playChapterAudio(r)}})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(e.sFG),e.rXU(Z.z),e.rXU(xi.u),e.rXU(l.il))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-loader"]],viewQuery:function(i,_){if(1&i&&e.GBs(Wc,7),2&i){let s;e.mGM(s=e.lsd())&&(_.viewLoaderRef=s.first)}},ngContentSelectors:zc,decls:4,vars:0,consts:[["viewLoader",""],["role","dialog",1,"view-loader"],["role","button",3,"click"]],template:function(i,_){if(1&i){const s=e.RV6();e.NAR(),e.j41(0,"div",1,0)(2,"div",2),e.bIt("click",function(){return e.eBV(s),e.Njj(_.handleClick())}),e.SdG(3),e.k0s()()}},encapsulation:2,changeDetection:0}),n})();var un,Bc=c(20342),jc=c(98020),Lo=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},$o=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Fc=["logoLinkRef"],Hc=["logoSpanRef"],H_=(o,n,t,i)=>({"view-logo--full-color":o,"view-logo--full-white":n,"view-logo--small-color":t,"view-logo--small-white":i});function Qc(o,n){if(1&o&&e.nrm(0,"a",5,0),2&o){const t=e.XpG();e.Y8G("ngClass",e.ziG(1,H_,"color"===t.logoColor&&"full"===t.logoSize,"white"===t.logoColor&&"full"===t.logoSize,"color"===t.logoColor&&"small"===t.logoSize,"white"===t.logoColor&&"small"===t.logoSize))}}function Yc(o,n){if(1&o&&e.nrm(0,"span",6,1),2&o){const t=e.XpG();e.Y8G("ngClass",e.ziG(1,H_,"color"===t.logoColor&&"full"===t.logoSize,"white"===t.logoColor&&"full"===t.logoSize,"color"===t.logoColor&&"small"===t.logoSize,"white"===t.logoColor&&"small"===t.logoSize))}}class hn{get logoSize(){return this.logoSize$.value}set logoSize(n){this.logoSize$.next(n)}get logoColor(){return this.logoColor$.value}set logoColor(n){this.logoColor$.next(n)}constructor(n,t){this.renderer=n,this.changeRef=t,this.logoDisplayMode="text",this.ngUnsubscribe=new $.B,this.logoSize$=new pt.t("full"),this.logoColor$=new pt.t("color")}ngOnInit(){}ngAfterViewInit(){this.initLogoListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initLogoListeners(){(0,Ae.z)([this.logoUI$,this.logoConfig$,this.logoSize$,this.logoColor$]).pipe((0,y.p)(([,n])=>!(0,R.isNil)(n)),(0,g.Q)(this.ngUnsubscribe)).subscribe(([n,t,i,_])=>{const a="logo_swap"===t.viewer.viewer_logo_setting,r=(0,Bc.g)(t,i,_),{logo_url:u,logo_linkout_url:f}=r;this.logoDisplayMode=n?.isHyperLink&&f?"link":"text",this.changeRef.markForCheck(),setTimeout(()=>{"link"===this.logoDisplayMode?this.setHyperlinkLogo(u,f,a):this.setSpanLogo(u,a)})})}setHyperlinkLogo(n,t,i){const _=this.logoLinkRef?.nativeElement;_&&(this.renderer.setStyle(_,"background-image",`url('${n}')`),this.renderer.setAttribute(_,"href",t),i?(this.renderer.setAttribute(_,"rel","noreferrer nofollow"),this.renderer.setAttribute(_,"title",""),this.renderer.setAttribute(_,"aria-label",$localize`link opens in a new tab`)):(this.renderer.removeAttribute(_,"rel"),this.renderer.setAttribute(_,"title",$localize`Powered by BioDigital`),this.renderer.setAttribute(_,"aria-label",$localize`Powered by BioDigital (opens in a new tab)`)))}setSpanLogo(n,t){const i=this.logoSpanRef?.nativeElement;i&&(this.renderer.setStyle(i,"background-image",`url('${n}')`),this.renderer.setAttribute(i,"title",t?"":$localize`Powered by BioDigital`))}}(un=hn).\u0275fac=function(n){return new(n||un)(e.rXU(e.sFG),e.rXU(e.gRc))},un.\u0275cmp=e.VBU({type:un,selectors:[["app-view-logo"]],viewQuery:function(n,t){if(1&n&&(e.GBs(Fc,5),e.GBs(Hc,5)),2&n){let i;e.mGM(i=e.lsd())&&(t.logoLinkRef=i.first),e.mGM(i=e.lsd())&&(t.logoSpanRef=i.first)}},inputs:{logoSize:"logoSize",logoColor:"logoColor"},decls:3,vars:3,consts:[["logoLinkRef",""],["logoSpanRef",""],[3,"ngSwitch"],["target","_blank","class","view-logo","data-test","viewLogo",3,"ngClass",4,"ngSwitchCase"],["class","view-logo","data-test","viewLogo",3,"ngClass",4,"ngSwitchCase"],["target","_blank","data-test","viewLogo",1,"view-logo",3,"ngClass"],["data-test","viewLogo",1,"view-logo",3,"ngClass"]],template:function(n,t){1&n&&(e.qex(0,2),e.DNE(1,Qc,2,6,"a",3)(2,Yc,2,6,"span",4),e.bVm()),2&n&&(e.Y8G("ngSwitch",t.logoDisplayMode),e.R7$(),e.Y8G("ngSwitchCase","link"),e.R7$(),e.Y8G("ngSwitchCase","text"))},dependencies:[p.YU,p.ux,p.e1],styles:["[_nghost-%COMP%]{display:flex;align-items:center}.view-logo[_ngcontent-%COMP%]{pointer-events:all;background-position:center center;background-repeat:no-repeat}.view-logo[_ngcontent-%COMP%]:focus{outline:#2d72dc solid 2px!important}.view-logo--small-color[_ngcontent-%COMP%]{width:40px;display:flex;justify-content:center;height:40px}.view-logo--full-color[_ngcontent-%COMP%]{width:120px;height:33px}.view-logo--small-white[_ngcontent-%COMP%]{width:40px;display:flex;justify-content:center;height:40px}.view-logo--full-white[_ngcontent-%COMP%]{width:120px;height:33px}.view-logo[_ngcontent-%COMP%]:not([hidden]){display:flex}.view-logo[href][_ngcontent-%COMP%]:hover{cursor:pointer}"],changeDetection:0}),Lo([(0,l.l6)(b.N.getSelectedChapterBackground),$o("design:type",d.c)],hn.prototype,"background$",void 0),Lo([(0,l.l6)(T.dF.getUIEntry(h.U.Logo)),$o("design:type",d.c)],hn.prototype,"logoUI$",void 0),Lo([(0,l.l6)(jc.X.getViewLogoConfig),$o("design:type",d.c)],hn.prototype,"logoConfig$",void 0);var qc=c(40634),Kc=c(1580),Zc=c(65855);function Jc(o,n){if(1&o&&(e.j41(0,"p"),e.EFF(1),e.qex(2),e.pXf(3,0),e.bVm(),e.k0s()),2&o){const t=e.XpG(3);e.R7$(),e.SpI("",t.chapterCount()," ")}}function ed(o,n){1&o&&(e.j41(0,"p"),e.pXf(1,1),e.k0s())}function td(o,n){if(1&o&&(e.j41(0,"div",7),e.DNE(1,Jc,4,1,"p")(2,ed,2,0,"p"),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.vxM(1,t.hasMultiChapter()?1:-1),e.R7$(),e.vxM(2,t.hasSkinVariants()?2:-1)}}function id(o,n){1&o&&(e.qex(0),e.pXf(1,2),e.bVm())}function nd(o,n){1&o&&(e.qex(0),e.pXf(1,3),e.bVm())}function od(o,n){1&o&&(e.qex(0),e.pXf(1,4),e.bVm())}function _d(o,n){if(1&o&&e.DNE(0,nd,2,0,"ng-container")(1,od,2,0),2&o){const t=e.XpG(2);e.vxM(0,t.hasMultiChapter()?0:1)}}function sd(o,n){if(1&o&&(e.j41(0,"h1",6),e.EFF(1),e.k0s(),e.DNE(2,td,3,2,"div",7),e.j41(3,"div",8),e.DNE(4,id,2,0)(5,_d,2,1),e.nrm(6,"app-icon",9),e.k0s()),2&o){let t;const i=e.XpG();e.R7$(),e.SpI(" ",i.story().displayName," "),e.R7$(),e.vxM(2,i.hasMultiChapter()||i.hasSkinVariants()?2:-1),e.R7$(2),e.vxM(4,(t=i.selectedBookmarkViewMode())===i.bookmarkViewMode.Quiz?4:5)}}let Q_=(()=>{var o;class n{constructor(i){this.store=i,this.bookmarkViewMode=Wi._,this.story=(0,re.ot)(this.store.select(Oe.t.getStory)),this.chapterCount=(0,re.ot)(this.store.select(b.N.getChapterCount)),this.selectedBookmarkViewMode=(0,re.ot)(this.store.select(Ht.J.getSelectedBookmarkViewMode)),this.skinVariant=(0,re.ot)(this.store.select(Oe.t.getVariantSchema("skin"))),this.hasSkinVariants=(0,e.EWP)(()=>!(0,R.isEmpty)(this.skinVariant())),this.hasMultiChapter=(0,e.EWP)(()=>this.chapterCount()>1)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(l.il))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-summary-loader"]],decls:2,vars:1,consts:()=>{let t,i,_,s,a,r;return t=$localize`:␟b13403343605d44ebc315fb7b618d8d859410163␟306128254471360973:Interact in 3D`,i=$localize`:␟d904f74acb72356dd3547977ca3cf29d6da25946␟5096495468612049743:Chapters`,_=$localize`:␟39967f284caff71af5063e41259bb4968bff203b␟4142145898284245309:Skin Options Available`,s=$localize`:␟66a82c6638b304a349b7d43b13482fa7493419c9␟1556772664146095223:Take Quiz`,a=$localize`:␟2c55dafd02bed135add1986e10e77ae660728533␟2899734440722419896:Begin Interactive Tour`,r=$localize`:␟b13403343605d44ebc315fb7b618d8d859410163␟306128254471360973:Interact in 3D`,[i,_,s,a,r,["type","button","aria-label",t,1,"summary-loader"],[1,"text-2xl","font-bold"],[1,"summary-loader__sub-title"],[1,"summary-loader__cta"],["icon","arrow-right","appLogicalDir","",1,"ml-2"]]},template:function(i,_){1&i&&(e.j41(0,"button",5),e.DNE(1,sd,7,3),e.k0s()),2&i&&(e.R7$(),e.vxM(1,_.story()?1:-1))},dependencies:[Ot.e,q.R],styles:['.button[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;align-items:center;background:none;border-color:transparent;border-radius:4px;border-width:0;color:inherit;display:flex;font-family:Inter,sans-serif;justify-content:center;margin:0;outline:0 none;padding:0 16px;position:relative;text-align:center;text-decoration:none;transition:background-color .12s;width:100%}.button[_ngcontent-%COMP%]:not([disabled]):hover{cursor:pointer}.button[_ngcontent-%COMP%]:focus   .button--themed[_ngcontent-%COMP%]{outline:#2d72dc solid 2px!important}.button[_ngcontent-%COMP%]:after{content:" ";background-color:#283853;border-radius:4px;display:block;position:absolute;inset:0;opacity:0;z-index:1;transition:opacity .06s}.button[_ngcontent-%COMP%]:not(.button--disabled):hover:after{opacity:.7}.button__container[_ngcontent-%COMP%]{position:relative;z-index:2;width:100%}.button--uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.button--expanded[_ngcontent-%COMP%]{display:flex;flex:1}.button--xsmall[_ngcontent-%COMP%]{height:24px;min-width:24px;padding:0 8px;font-size:.625rem;line-height:.75rem}.button--small[_ngcontent-%COMP%]{height:32px;min-width:32px;padding:0 12px;font-size:.75rem;line-height:1rem}.button--medium[_ngcontent-%COMP%]{height:36px;min-width:36px;padding:0 16px;font-size:.75rem;line-height:1rem}.button--large[_ngcontent-%COMP%]{height:48px;min-width:48px;padding:0 16px;font-size:.875rem;line-height:1.25rem}.button--no-border[_ngcontent-%COMP%]{border-radius:0!important}.button--no-border[_ngcontent-%COMP%]:after{border-radius:0!important}.button--left[_ngcontent-%COMP%]{text-align:left}.button--themed[_ngcontent-%COMP%]{color:#374a68}.button--themed[_ngcontent-%COMP%]:hover{color:#1c2a3f}.button--themed[_ngcontent-%COMP%]:after{background-color:#d7e0ea}.button--dark[_ngcontent-%COMP%]{color:#d7e0ea}.button--dark[_ngcontent-%COMP%]:hover{color:#fff}.button--dark[_ngcontent-%COMP%]:after{background-color:#283853}.button--dark.button--flat[_ngcontent-%COMP%]{background:#374a68}.button--dark.button--default[_ngcontent-%COMP%]{background:transparent}.button--dark.button--outline[_ngcontent-%COMP%]{background:transparent;border:1px solid #374a68;transition:border-color .12s}.button--dark.button--outline[_ngcontent-%COMP%]:hover{border-color:#96a8c0}.button--dark.button--outline[_ngcontent-%COMP%]:hover:after{background-color:transparent;display:none}.button--dark.button--text[_ngcontent-%COMP%]{background:transparent;color:#d7e0ea}.button--dark.button--text[_ngcontent-%COMP%]:hover{color:#fff}.button--dark.button--text[_ngcontent-%COMP%]:hover:after{display:none}.button--dark.button--selected[_ngcontent-%COMP%]{background-color:#2d72dc;color:#fff}.button--dark.button--selected[_ngcontent-%COMP%]:hover:after{display:none}.button--light[_ngcontent-%COMP%]{color:#283853}.button--light[_ngcontent-%COMP%]:hover{color:#1c2a3f}.button--light[_ngcontent-%COMP%]:after{background-color:#96a8c0}.button--light[_ngcontent-%COMP%]:not(.button--disabled):hover:after{opacity:.6}.button--light.button--flat[_ngcontent-%COMP%]{background:#d7e0ea;font-weight:500}.button--light.button--flat.button--selected[_ngcontent-%COMP%]{background-color:#96a8c0}.button--light.button--default[_ngcontent-%COMP%]{background:transparent;color:#131c2a}.button--light.button--default[_ngcontent-%COMP%]:not(.button--disabled):hover:after{opacity:.2}.button--light.button--outline[_ngcontent-%COMP%]{background:transparent;border:1px solid #96a8c0;color:#283853;transition:border-color .12s}.button--light.button--outline[_ngcontent-%COMP%]:after{display:none}.button--light.button--outline[_ngcontent-%COMP%]:hover{background:#374a680d;border-color:#374a68;color:#1c2a3f}.button--light.button--outline[_ngcontent-%COMP%]:hover:after{background-color:transparent}.button--light.button--selected[_ngcontent-%COMP%]{background-color:#eaeff5}.button--light.button--selected[_ngcontent-%COMP%]:hover:after{display:none}.button--light.button--text[_ngcontent-%COMP%]{color:#283853}.button--light.button--text[_ngcontent-%COMP%]:hover{color:#1c2a3f}.button--light.button--text[_ngcontent-%COMP%]:hover:after{display:none}.button--primary[_ngcontent-%COMP%]{background:#de3535;color:#fff}.button--primary[_ngcontent-%COMP%]:after{background:#f9fafd}.button--primary[_ngcontent-%COMP%]:not([disabled]):hover:after{opacity:.1}.button--info[_ngcontent-%COMP%]{background:#3892dc;color:#fff}.button--info[_ngcontent-%COMP%]:after{background:#f9fafd}.button--info[_ngcontent-%COMP%]:hover:after{opacity:.1}.button--selected[_ngcontent-%COMP%]{background-color:#2d72dc}.button--disabled[_ngcontent-%COMP%]{opacity:.5}.button--circle[_ngcontent-%COMP%]{border-radius:50%}.button--circle.button--xsmall[_ngcontent-%COMP%]{width:24px}.button--circle.button--small[_ngcontent-%COMP%]{width:32px;padding:0 6px}.button--circle.button--medium[_ngcontent-%COMP%]{width:36px;padding:0 8px}.button--circle.button--large[_ngcontent-%COMP%]{width:48px}.button--circle[_ngcontent-%COMP%]:after{border-radius:50%}.button--rounded[_ngcontent-%COMP%]{border-radius:18px}.button--rounded[_ngcontent-%COMP%]:after{border-radius:18px}.summary-loader[_ngcontent-%COMP%]{border-color:transparent;background:none;border-width:0;outline:none;margin:0;pointer-events:all;background:#0006108c;position:fixed;justify-content:center;align-items:center;inset:0;width:100%;height:100%;transition:background-color .25s,opacity .25s;z-index:10000;position:absolute;padding:36px;color:#fff;display:flex;justify-content:flex-start;align-items:flex-start;flex-direction:column;gap:8px}.summary-loader[_ngcontent-%COMP%]::-moz-focus-inner{border:0}.summary-loader[_ngcontent-%COMP%]:not([disabled]):hover{cursor:pointer}.summary-loader[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:#000610b3}.summary-loader[_ngcontent-%COMP%]:hover   .summary-loader__cta[_ngcontent-%COMP%]{background-color:#2d72dc;border-color:#2d72dc}.summary-loader__title[_ngcontent-%COMP%]{font-size:24px;line-height:1.33em;font-weight:700}.summary-loader__sub-title[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;font-size:16px;line-height:1.25em;letter-spacing:.02em;text-align:left;gap:8px}.summary-loader__sub-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(:first-child){padding-left:8px;border-left:2px solid #ffffff}.summary-loader__cta[_ngcontent-%COMP%]{width:220px;height:48px;border:1px solid #ffffff;border-radius:4px;margin-top:20px;font-weight:600px;font-size:16px;display:flex;justify-content:center;align-items:center;transition:all .25s ease-in-out}'],changeDetection:0}),n})();var gn,mn;function ld(o,n){1&o&&e.nrm(0,"app-play-loader")}function cd(o,n){1&o&&e.nrm(0,"app-button-loader")}function dd(o,n){1&o&&e.nrm(0,"app-hand-loader")}function pd(o,n){1&o&&e.nrm(0,"app-summary-loader")}function ud(o,n){1&o&&e.nrm(0,"div",7)}class xo{constructor(n,t,i,_){this.changeRef=n,this.viewService=t,this.bookmarksService=i,this.imagesService=_,this.thumbnailURL="",this.interactionType=Zc.i}ngOnInit(){this.setThumbnailUrl()}handleClick(){this.viewService.toggleOnDemand(!1),this.viewService.toggleInteract(!1)}setThumbnailUrl(){this.contentType===yi.c.Bookmark?this.bookmarksService.getBookmarkModel(this.contentId).subscribe(n=>{this.thumbnailURL=n.thumbnail_url,this.changeRef.markForCheck()}):(this.thumbnailURL=this.imagesService.getIndexThumbnail(this.contentId),this.changeRef.markForCheck())}getPoweredByUrl(){return(typeof localBaseDirectory>"u"?"":localBaseDirectory)+"assets/images/powered-by-biodigital-logo.svg"}}(gn=xo).\u0275fac=function(n){return new(n||gn)(e.rXU(e.gRc),e.rXU(Z.z),e.rXU(qc.x),e.rXU(Kc.M))},gn.\u0275cmp=e.VBU({type:gn,selectors:[["app-view-ondemand"]],inputs:{contentId:"contentId",contentType:"contentType"},decls:11,vars:10,consts:[[1,"ondemand",3,"click"],[1,"ondemand__image",3,"lazyLoad"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","ondemand__blank-overlay",4,"ngSwitchCase"],[1,"ondemand__logo"],[3,"src"],[1,"ondemand__blank-overlay"]],template:function(n,t){1&n&&(e.j41(0,"div",0),e.bIt("click",function(){return t.handleClick()}),e.nrm(1,"div",1),e.j41(2,"div",2),e.nI1(3,"async"),e.DNE(4,ld,1,0,"app-play-loader",3)(5,cd,1,0,"app-button-loader",3)(6,dd,1,0,"app-hand-loader",3)(7,pd,1,0,"app-summary-loader",3)(8,ud,1,0,"div",4),e.k0s(),e.j41(9,"div",5),e.nrm(10,"img",6),e.k0s()()),2&n&&(e.R7$(),e.Y8G("lazyLoad",t.thumbnailURL),e.R7$(),e.Y8G("ngSwitch",e.bMT(3,8,t.interactType$)),e.R7$(2),e.Y8G("ngSwitchCase",t.interactionType.Play),e.R7$(),e.Y8G("ngSwitchCase",t.interactionType.Button),e.R7$(),e.Y8G("ngSwitchCase",t.interactionType.Hand),e.R7$(),e.Y8G("ngSwitchCase",t.interactionType.Summary),e.R7$(),e.Y8G("ngSwitchCase",t.interactionType.None),e.R7$(2),e.Y8G("src",t.getPoweredByUrl(),e.B4B))},dependencies:[p.ux,p.e1,ne.Je,S_,T_,b_,Q_,p.Jj],styles:[".ondemand__blank-overlay[_ngcontent-%COMP%]{background:#0003;display:flex;position:fixed;justify-content:center;align-items:center;inset:0;width:100%;height:100%;transition:background-color .25s,opacity .25s;z-index:10000}.ondemand__blank-overlay[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;background:#0003}.ondemand__image[_ngcontent-%COMP%]{position:absolute;inset:0;background-size:cover;background-repeat:no-repeat;background-position:center center;filter:blur(6px);z-index:1000}.ondemand__logo[_ngcontent-%COMP%]{position:absolute;bottom:40px;justify-content:center;width:100%;z-index:20000;display:flex}"],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(m.Pf.getInteractType),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],xo.prototype,"interactType$",void 0);class ko{beforePrint(n){this.visible=!0,this.changeDetectorRef.markForCheck()}afterPrint(n){this.visible=!1,this.changeDetectorRef.markForCheck()}constructor(n,t){this.store=n,this.changeDetectorRef=t,this.ngUnsubscribe=new $.B,this.visible=!1}ngOnInit(){this.initImageUrlListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initImageUrlListener(){(0,Ae.z)(this.storyChapters$,this.store.select(Ai.K.getRegisteredThumbnails)).pipe((0,y.p)(([n,t])=>n.length>0&&t.size>0),(0,Ue.T)(([n,t])=>t.get(n[0].id).urls.large),(0,Ke.F)(),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.imageUrl=n,this.changeDetectorRef.markForCheck()})}}(mn=ko).\u0275fac=function(n){return new(n||mn)(e.rXU(l.il),e.rXU(e.gRc))},mn.\u0275cmp=e.VBU({type:mn,selectors:[["app-view-print"]],hostBindings:function(n,t){1&n&&e.bIt("beforeprint",function(){return t.beforePrint()},!1,e.tSv)("afterprint",function(){return t.afterPrint()},!1,e.tSv)},decls:3,vars:1,consts:[[1,"view-print"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",1,"view-print__scrim"],[1,"view-print__image",3,"src"]],template:function(n,t){1&n&&(e.j41(0,"div",0),e.nrm(1,"img",1)(2,"img",2),e.k0s()),2&n&&(e.R7$(2),e.Y8G("src",t.imageUrl,e.B4B))},styles:[".view-print[_ngcontent-%COMP%]{background-color:#fff;display:none;position:absolute;top:0;left:0;width:100%;height:100%;z-index:10000;justify-content:space-around;margin:auto;margin-top:0!important}@media print{.view-print[_ngcontent-%COMP%]{display:flex}}.view-print__scrim[_ngcontent-%COMP%]{display:block;width:100%;height:100%;position:absolute;z-index:-1;inset:0}.view-print__image[_ngcontent-%COMP%]{display:block;flex:1 1 auto;object-fit:contain;margin:0 auto;z-index:1}"],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(b.N.getStoryChapters),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],ko.prototype,"storyChapters$",void 0);const md=["circle"],Ed=["progressCircle"],fd=["progressContainer"],Sd=o=>({"view-progress--active":o}),Td=o=>({"view-progress__ring--pulse":o});function bd(o,n){if(1&o&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI("",t.percent,"%")}}let vd=(()=>{var o;class n{get show(){return this._show}set show(i){setTimeout(()=>{this._show=i,this.changeDetectorRef.markForCheck()})}get percent(){return Math.floor(this._percent.value)}set percent(i){null!=i&&this._percent.next(i)}constructor(i,_){this.renderer=i,this.changeDetectorRef=_,this.ngUnsubscribe=new $.B,this.label=$localize`Loading...`,this._show=!1,this._percent=new pt.t(0)}ngOnInit(){this.initSizeObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.updateDimensions(),this.initPercentObserver()}initPercentObserver(){this._percent.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.label=this.getLoadingLabel(this.percent),this.renderProgress(0===this.percent?100:this.percent),this.changeDetectorRef.markForCheck()})}initSizeObserver(){(0,Ve.R)(window,"resize").pipe((0,Be.B)(10),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.updateDimensions()})}calculateRadius(){return this.getCircleWidth()/2}getCircleWidth(){return this.circleRef.nativeElement.offsetWidth}getRadius(){return this.progressCircleRef.nativeElement.r.baseVal.value}getCircumference(){return 2*this.getRadius()*Math.PI}getOffset(i=100){const _=this.getCircumference();return _-i/100*_}renderProgress(i){i>=100&&(i=100);const _=this.getCircumference(),s=this.getOffset(i);this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${_} ${_}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",`${s}`)}getLoadingLabel(i){return 100===i?$localize`Launching...`:$localize`Loading...`}updateDimensions(){const i=this.calculateRadius();this.renderer.setAttribute(this.progressContainerRef.nativeElement,"width",""+2*i),this.renderer.setAttribute(this.progressContainerRef.nativeElement,"height",""+2*i),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"r",""+(i-6)),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"cx",`${i}`),this.renderer.setAttribute(this.progressCircleRef.nativeElement,"cy",`${i}`);const _=this.getCircumference();this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDasharray",`${_} ${_}`),this.renderer.setStyle(this.progressCircleRef.nativeElement,"strokeDashoffset",`${_}`)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(e.sFG),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-progress"]],viewQuery:function(i,_){if(1&i&&(e.GBs(md,7),e.GBs(Ed,7),e.GBs(fd,7)),2&i){let s;e.mGM(s=e.lsd())&&(_.circleRef=s.first),e.mGM(s=e.lsd())&&(_.progressCircleRef=s.first),e.mGM(s=e.lsd())&&(_.progressContainerRef=s.first)}},inputs:{show:"show",percent:"percent"},decls:10,vars:10,consts:[["circle",""],["progressContainer",""],["progressCircle",""],["data-test","viewProgress","role","status","aria-live","polite",1,"view-progress",3,"ngClass"],["aria-hidden","true",1,"view-progress__circle"],[1,"view-progress__ring",3,"ngClass"],[1,"view-progress__ring-inner"],["class","view-progress__count",4,"ngIf"],[1,"view-progress__label"],[1,"view-progress__count"]],template:function(i,_){1&i&&(e.j41(0,"div",3)(1,"div",4,0),e.qSk(),e.j41(3,"svg",5,1),e.nrm(5,"circle",6,2),e.k0s(),e.DNE(7,bd,2,1,"div",7),e.joV(),e.j41(8,"div",8),e.EFF(9),e.k0s()()()),2&i&&(e.Y8G("ngClass",e.eq3(6,Sd,_.show)),e.BMQ("aria-busy",_.show),e.R7$(),e.Y8G("@isOpen",_.show?"open":"closed"),e.R7$(2),e.Y8G("ngClass",e.eq3(8,Td,0===_.percent||100===_.percent)),e.R7$(4),e.Y8G("ngIf",_.percent>0&&_.percent<100),e.R7$(2),e.SpI(" ",_.label," "))},dependencies:[p.YU,p.bT],styles:[".view-progress[_ngcontent-%COMP%]{--circleSize: 35vw;pointer-events:none;position:absolute;display:flex;justify-content:center;align-items:center;inset:0;z-index:1000;transition:background-color .15s}@keyframes _ngcontent-%COMP%_progressPulse{0%{stroke-width:4}50%{stroke-width:1}to{stroke-width:4}}.view-progress--active[_ngcontent-%COMP%]{background-color:#0003}.view-progress__circle[_ngcontent-%COMP%]{transform:scale(0);width:var(--circleSize);height:var(--circleSize);border-radius:50%;background-color:#101823cc;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative}.view-progress__count[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem;color:#fff;font-weight:700}.view-progress__label[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;color:#fffc}.view-progress__ring[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:3;opacity:1;stroke-dashoffset:0;stroke-width:4;stroke:#fffc;fill:transparent;transform:rotate(-90deg)}.view-progress__ring--pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_progressPulse ease-in-out infinite 2s}@media (min-width: 600px){.view-progress__circle[_ngcontent-%COMP%]{width:160px;height:160px}}"],data:{animation:[(0,D.hZ)("isOpen",[(0,D.wk)("open",(0,D.iF)({transform:"scale(1)"})),(0,D.wk)("closed",(0,D.iF)({transform:"scale(0)"})),(0,D.kY)("closed => open",[(0,D.i0)("300ms ease-out")]),(0,D.kY)("open => closed",[(0,D.i0)("150ms ease-in")])])]},changeDetection:0}),n})();var En=c(35160),Od=c(82542),wd=c(37737);let Id=(()=>{var o;class n{constructor(){}onClick(i,_){_.select()}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275dir=e.FsC({type:o,selectors:[["","appSelectOnFocus",""]],hostBindings:function(i,_){1&i&&e.bIt("click",function(a){return _.onClick(a,a.target)})}}),n})();var fn,Cd=c(30356),Ii=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},Ci=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Md=["searchInput"],yd=["tabButton"],Y_=o=>({"view-search__action--selected":o});class xt{constructor(n,t,i){this.viewService=n,this.store=t,this.elementRef=i,this.application=Li.c,this.ngUnsubscribe=new $.B,this.themeEnum=Od.P,this.treeSearchDisplayMode=vt.q}handleKeyPress(){this.viewService.elementHasFocus(this.elementRef.nativeElement)&&!this.viewService.isMaterialMenuOut()&&this.close()}ngOnInit(){this.initSearchForm()}ngAfterViewInit(){this.initDisplayModeSubscription()}initDisplayModeSubscription(){this.searchDisplayMode$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{setTimeout(()=>{this.searchInput.nativeElement.focus()})})}initSearchForm(){this.searchForm=new H.gE({query:new H.MJ("")});const n=this.searchForm.controls.query;this.searchQuery$=n.valueChanges.pipe((0,En.Z)(n.value),(0,g.Q)(this.ngUnsubscribe))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}toggleDisplayMode(){let n=this.store.selectSnapshot(m.Pf.getSearchDisplayMode);n=n===vt.q.List?vt.q.Tree:vt.q.List,this.setDisplayMode(n)}setDisplayMode(n){this.store.dispatch(new B.B.SetSearchDisplayMode(n))}handleTreeButtonClick(){this.setDisplayMode(vt.q.Tree)}handleListButtonClick(){this.setDisplayMode(vt.q.List)}getActiveTab(){switch(this.store.selectSnapshot(m.Pf.getSearchDisplayMode)){case vt.q.List:return"searchTab";case vt.q.Tree:return"treeTab";default:return null}}shiftFocus(n,t){n.stopPropagation();const i=this._buttonRefs.toArray(),s=(i.findIndex(a=>a.nativeElement==document.activeElement)+t+i.length)%i.length;i[s].nativeElement.focus()}close(){this.searchForm.patchValue({query:""}),this.viewService.toggleSearch(null,!1)}}function q_(o){if(null==o)return"";const n=new RegExp(/[^a-zA-Z0-9_]/,"gi");return o.replace(n,"_")}(fn=xt).\u0275fac=function(n){return new(n||fn)(e.rXU(Z.z),e.rXU(l.il),e.rXU(e.aKT))},fn.\u0275cmp=e.VBU({type:fn,selectors:[["app-view-search"]],viewQuery:function(n,t){if(1&n&&(e.GBs(Md,5),e.GBs(yd,5)),2&n){let i;e.mGM(i=e.lsd())&&(t.searchInput=i.first),e.mGM(i=e.lsd())&&(t._buttonRefs=i)}},hostBindings:function(n,t){1&n&&e.bIt("keydown.escape",function(){return t.handleKeyPress()},!1,e.EBC)},decls:31,vars:47,consts:()=>{let o,n,t,i;return o=$localize`:␟4c4305eb340456e2e50f1eb70a8061a4e63fc352␟1130690042989597231:Start typing the search term, then use tab to navigate the results`,n=$localize`:␟8f62b63665181ac3c3afe409d6d76530ef267bc1␟1644955292665662544:Search for a structure`,t=$localize`:␟6490b3960cc7c4a789cdbd29575d93abad081e07␟7906458871395232033:List`,i=$localize`:␟979a2479fa31a7c56e45cf33c4d29dbda0b3ace3␟5139118152626940877:Tree`,[["searchInput",""],["tabButton",""],t,i,["role","dialog","cdkTrapFocus","",1,"view-search"],[1,"view-search__header",3,"formGroup"],[1,"view-search__input-row",3,"formGroup"],[1,"view-search__input-container"],["icon","search",1,"view-search__input-icon"],["appAutoFocus","","appSelectOnFocus","","type","search","aria-label",o,"placeholder",n,"formControlName","query",1,"view-search__input"],[1,"view-search__actions-row"],["role","tablist",1,"view-search__actions",3,"keydown.arrowleft","keydown.arrowright"],["type","button","role","tab","id","searchTab",1,"view-search__action",3,"click","keyup.space","ngClass"],["type","button","role","tab","id","treeTab",1,"view-search__action",3,"click","keyup.space","ngClass"],["role","tabpanel",1,"mt-3","view-search__body"],[3,"displayMode","theme","query","viewGraph","viewGraphMetadata","viewGraphRank","selectedChapter","layerOrderMode","showTreeNodeIds","showLatinLabel"]]},template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),e.nrm(4,"app-icon",8)(5,"input",9,0),e.k0s()(),e.j41(7,"div",10)(8,"div",11),e.bIt("keydown.arrowleft",function(s){return e.eBV(i),e.Njj(t.shiftFocus(s,-1))})("keydown.arrowright",function(s){return e.eBV(i),e.Njj(t.shiftFocus(s,1))}),e.j41(9,"button",12,1),e.nI1(11,"async"),e.nI1(12,"async"),e.nI1(13,"async"),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleListButtonClick())})("keyup.space",function(){return e.eBV(i),e.Njj(t.handleListButtonClick())}),e.qex(14),e.pXf(15,2),e.bVm(),e.k0s(),e.j41(16,"button",13,1),e.nI1(18,"async"),e.nI1(19,"async"),e.nI1(20,"async"),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleTreeButtonClick())})("keyup.space",function(){return e.eBV(i),e.Njj(t.handleTreeButtonClick())}),e.qex(21),e.pXf(22,3),e.bVm(),e.k0s()()()(),e.j41(23,"div",14),e.nrm(24,"app-tree-search",15),e.nI1(25,"async"),e.nI1(26,"async"),e.nI1(27,"async"),e.nI1(28,"async"),e.nI1(29,"async"),e.nI1(30,"async"),e.k0s()()}2&n&&(e.R7$(),e.Y8G("formGroup",t.searchForm),e.R7$(),e.Y8G("formGroup",t.searchForm),e.R7$(7),e.Y8G("ngClass",e.eq3(43,Y_,e.bMT(11,19,t.searchDisplayMode$)===t.treeSearchDisplayMode.List)),e.BMQ("aria-selected",e.bMT(12,21,t.searchDisplayMode$)===t.treeSearchDisplayMode.List)("tabIndex",e.bMT(13,23,t.searchDisplayMode$)===t.treeSearchDisplayMode.List?0:-1),e.R7$(7),e.Y8G("ngClass",e.eq3(45,Y_,e.bMT(18,25,t.searchDisplayMode$)===t.treeSearchDisplayMode.Tree)),e.BMQ("aria-selected",e.bMT(19,27,t.searchDisplayMode$)===t.treeSearchDisplayMode.Tree)("tabIndex",e.bMT(20,29,t.searchDisplayMode$)===t.treeSearchDisplayMode.Tree?0:-1),e.R7$(7),e.BMQ("aria-labelledby",t.getActiveTab()),e.R7$(),e.Y8G("displayMode",e.bMT(25,31,t.searchDisplayMode$))("theme",t.themeEnum.Light)("query",e.bMT(26,33,t.searchQuery$))("viewGraph",e.bMT(27,35,t.treeGraph$))("viewGraphMetadata",e.bMT(28,37,t.viewGraphMetadata$))("viewGraphRank",e.bMT(29,39,t.viewGraphRank$))("selectedChapter",e.bMT(30,41,t.selectedChapter$))("layerOrderMode",!1)("showTreeNodeIds",!1)("showLatinLabel",!0))},dependencies:[L.kB,p.YU,wd.B,Id,H.me,H.BC,H.cb,q.R,H.j4,H.JD,Cd.k,p.Jj],styles:[".view-search{display:flex;flex-direction:column;height:100%}@keyframes appear{0%{background-color:transparent}}.view-search__header{flex:0 0 auto;flex-direction:column;display:flex;animation:appear .25s ease-out}.view-search__actions-row{flex:0 0 auto;display:flex;align-items:center}.view-search__actions{display:flex;height:48px;flex:1;justify-content:space-between}.view-search__action{font-size:.625rem;line-height:.75rem;text-transform:uppercase;align-items:center;background:transparent;border:none;border-bottom:2px solid transparent;color:#374a68;display:flex;flex-direction:column;flex:1;justify-content:flex-end;padding-bottom:8px;transition:all .3s ease-in-out;cursor:pointer}.view-search__action:hover:not(.view-search__action--selected){border-bottom-color:#f9fafd}.view-search__action--selected{border-bottom-color:#2d72dc;font-weight:600}.view-search__input-row{flex:0 0 auto;display:flex;padding:24px 0 0}.view-search__input-container{background-color:#fff;border:1px solid #96a8c0;display:flex;flex-grow:1;border-radius:4px}.view-search__input-container:hover{border-color:#61779e}.view-search__input-container:focus-within{outline:#2d72dc solid 2px!important;outline-offset:-2px}.view-search__input-icon{background:0 0;display:flex;align-items:center;justify-content:center;color:#61779e;width:36px;height:36px;outline:0}.view-search__input{font-size:.875rem;line-height:1.25rem;font-weight:400;color:#131c2a;background:transparent;border:1px solid transparent;outline:none;flex:1 0 auto;padding:8px 12px 8px 0}.view-search__input::-ms-clear{display:none}.view-search__input::placeholder{color:#61779e;opacity:1}.view-search__body{flex:1 1 100%}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.view-search__input{font-size:16px;padding:4px 8px;width:0}}}\n"],encapsulation:2,changeDetection:0}),Ii([(0,l.l6)(le.S.getViewGraph),Ci("design:type",d.c)],xt.prototype,"viewGraph$",void 0),Ii([(0,l.l6)(le.S.getTreeGraph),Ci("design:type",d.c)],xt.prototype,"treeGraph$",void 0),Ii([(0,l.l6)(le.S.getViewGraphMetadata),Ci("design:type",d.c)],xt.prototype,"viewGraphMetadata$",void 0),Ii([(0,l.l6)(le.S.getViewGraphRank),Ci("design:type",d.c)],xt.prototype,"viewGraphRank$",void 0),Ii([(0,l.l6)(m.Pf.getSearchDisplayMode),Ci("design:type",d.c)],xt.prototype,"searchDisplayMode$",void 0),Ii([(0,l.l6)(b.N.getSelectedChapter),Ci("design:type",d.c)],xt.prototype,"selectedChapter$",void 0);let Ad=(()=>{var o;class n{transform(i,_){return q_(i)}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275pipe=e.EJ8({name:"elementID",type:o,pure:!0}),n})();var Sn,kt=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},Gt=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Nd=["chapterMenuTrigger"],Rd=["chapter"],Vd=o=>({"view-chapters__item--viewed":o}),Pd=o=>({"outline outline-blue-600 outline-2":o});function Ud(o,n){1&o&&e.nrm(0,"app-view-pagination",14),2&o&&e.Y8G("showCount",!1)}function Dd(o,n){if(1&o){const t=e.RV6();e.qex(0),e.nrm(1,"app-pillbox-divider"),e.j41(2,"button",15,2),e.bIt("menuOpened",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleChapterMenuOpen())}),e.j41(4,"div",16)(5,"div",17)(6,"span",18),e.pXf(7,4),e.k0s(),e.j41(8,"div",19),e.EFF(9),e.nI1(10,"async"),e.nI1(11,"async"),e.k0s(),e.j41(12,"div",20),e.EFF(13),e.nI1(14,"async"),e.qex(15),e.pXf(16,5),e.bVm(),e.EFF(17),e.nI1(18,"async"),e.k0s()(),e.j41(19,"div",21),e.nrm(20,"app-icon",22),e.k0s()()(),e.bVm()}if(2&o){const t=e.XpG(2),i=e.sdS(6);e.R7$(2),e.Y8G("matMenuTriggerFor",i),e.R7$(7),e.SpI(" ",t.getFormattedChapterTitle(e.bMT(10,4,t.chapterTitle$),e.bMT(11,6,t.chapterIndex$))," "),e.R7$(4),e.SpI(" ",e.bMT(14,8,t.chapterIndex$)+1," "),e.R7$(4),e.SpI(" ",e.bMT(18,10,t.chapterCount$)," ")}}function Ld(o,n){if(1&o&&(e.j41(0,"div",11),e.DNE(1,Ud,1,1,"app-view-pagination",12),e.nI1(2,"async"),e.DNE(3,Dd,21,12,"ng-container",13),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,2,t.paginationVisible$)),e.R7$(2),e.Y8G("ngIf",t.showTitle)}}function $d(o,n){if(1&o&&(e.j41(0,"div",24)(1,"span",25),e.EFF(2),e.nI1(3,"async"),e.nI1(4,"async"),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(2),e.JRh(t.getFormattedChapterTitle(e.bMT(3,1,t.chapterTitle$),e.bMT(4,3,t.chapterIndex$)))}}function xd(o,n){if(1&o&&e.DNE(0,$d,5,5,"div",23),2&o){const t=e.XpG();e.Y8G("ngIf",t.showTitle)}}function kd(o,n){1&o&&(e.j41(0,"span",18),e.pXf(1,6),e.k0s())}function Gd(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",26,3),e.nI1(2,"elementID"),e.bIt("click",function(){const _=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.handleChapterClick(_))}),e.nrm(3,"div",27),e.nI1(4,"async"),e.j41(5,"div",28),e.EFF(6),e.k0s(),e.DNE(7,kd,2,0,"span",29),e.nI1(8,"async"),e.k0s()}if(2&o){const t=n.$implicit,i=n.index,_=e.XpG();e.Y8G("ngClass",e.eq3(14,Vd,_.isViewed(t.id))),e.BMQ("data-chapter-id",e.bMT(2,8,t.id)),e.R7$(3),e.Y8G("ngClass",e.eq3(16,Pd,t.id===e.bMT(4,10,_.selectedChapterId$)))("defaultImage",_.defaultImage)("lazyLoad",_.getChapterThumb(t.id)),e.R7$(3),e.Lme(" ",i+1,": ",_.getFormattedChapterTitle(t.displayName,i)," "),e.R7$(),e.Y8G("ngIf",t.id===e.bMT(8,12,_.selectedChapterId$))}}class Et{constructor(n,t){this.viewService=n,this.store=t,this.viewUI=h.U,this.showTitle=!0,this.defaultImage="/assets/images/view-chapter-thumbnail-placeholder.png",this.ngUnsubscribe=new $.B}getChapterThumb(n){const i=this.store.selectSnapshot(Ai.K.getRegisteredThumbnails).get(n);return i?i.snapshot||i.urls.small:""}getFormattedChapterTitle(n,t){return n||$localize`Chapter`+` ${t+1}`}isViewed(n){return this.store.selectSnapshot(b.N.getChaptersViewed).some(t=>t===n)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleChapterMenuOpen(){setTimeout(()=>{this.scrollToSelectedChapter()})}handleNextClick(){this.viewService.nextChapter("titleOnly")}handleChapterClick(n){this.viewService.selectChapter(n)}handlePreviousClick(){this.viewService.previousChapter("titleOnly")}scrollToSelectedChapter(){const n=q_(this.store.selectSnapshot(b.N.getSelectedChapterId));this.chapters.find(i=>i.nativeElement.dataset.chapterId===n)?.nativeElement.scrollIntoView({block:"center"})}}(Sn=Et).\u0275fac=function(n){return new(n||Sn)(e.rXU(Z.z),e.rXU(l.il))},Sn.\u0275cmp=e.VBU({type:Sn,selectors:[["app-view-title-only"]],viewQuery:function(n,t){if(1&n&&(e.GBs(Nd,5),e.GBs(Rd,5,e.aKT)),2&n){let i;e.mGM(i=e.lsd())&&(t.chapterMenuTrigger=i.first),e.mGM(i=e.lsd())&&(t.chapters=i)}},inputs:{showTitle:"showTitle"},decls:9,vars:7,consts:()=>{let o,n,t;return o=$localize`:␟0498f53592b97136a56a48a29c54aea03a15b5e0␟9209125563388589034:Chapter List`,n=$localize`:␟169eed2bc3e08e1bea977bcc5d799379f6b8a758␟5881876145178332550:of`,t=$localize`:␟1e7180823484a8b886c921518255e24324c3d47b␟8167513183851535531:current`,[["staticTitle",""],["chapterMenu","matMenu"],["chapterMenuTrigger","matMenuTrigger"],["chapter",""],o,n,t,["orientation","horizontal","data-test","viewTitleOnly","appPreventFadeout","",1,"relative"],["class","flex w-full","style","min-width: 0",4,"ngIf","ngIfElse"],[1,"view-chapters"],["mat-menu-item","","class","view-chapters__item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","w-full",2,"min-width","0"],["data-test","viewFloatingPagination","buttonSize","small","iconSize","lg",3,"showCount",4,"ngIf"],[4,"ngIf"],["data-test","viewFloatingPagination","buttonSize","small","iconSize","lg",3,"showCount"],["app-view-button","","data-test","viewChaptersButton","buttonSize","small",1,"w-full",2,"min-width","0",3,"menuOpened","matMenuTriggerFor"],[1,"flex","flex-row","w-full"],[1,"grow",2,"overflow","hidden","text-align","start","padding","0 8px"],[1,"sr-only"],[1,"view-title-only__title","view-title-only__title--truncated"],[1,"view-title-only__count"],[1,"view-title-only__icon"],["icon","angle-down","size","lg"],["class","view-title-only__title view-title-only__title--static","data-test","viewStaticTitle",4,"ngIf"],["data-test","viewStaticTitle",1,"view-title-only__title","view-title-only__title--static"],[1,"view-title-only__title--truncated"],["mat-menu-item","",1,"view-chapters__item",3,"click","ngClass"],[1,"view-chapters__thumb",3,"ngClass","defaultImage","lazyLoad"],[1,"view-chapters__title"],["class","sr-only",4,"ngIf"]]},template:function(n,t){if(1&n&&(e.j41(0,"app-pillbox",7),e.DNE(1,Ld,4,4,"div",8),e.nI1(2,"async"),e.DNE(3,xd,1,1,"ng-template",null,0,e.C5r),e.k0s(),e.j41(5,"mat-menu",9,1),e.DNE(7,Gd,9,18,"button",10),e.nI1(8,"async"),e.k0s()),2&n){const i=e.sdS(4);e.R7$(),e.Y8G("ngIf",e.bMT(2,3,t.paginationVisible$))("ngIfElse",i),e.R7$(6),e.Y8G("ngForOf",e.bMT(8,5,t.chapters$))}},dependencies:[J.ri,p.YU,p.Sq,p.bT,Ei.s,q.R,ne.Je,ke.kk,ke.fb,ke.Cp,Vt.O,wo.p,Dt,p.Jj,Ad],styles:[".view-title-only{display:flex;align-items:center}.view-title-only__title{font-size:.875rem;line-height:1.25rem;font-weight:600;color:#131c2a}.view-title-only__title--static{padding:0 12px;min-height:40px;display:flex;align-items:center;min-width:0}.view-title-only__title--truncated{overflow:hidden;text-overflow:ellipsis}.view-title-only__count{font-size:10px;text-transform:uppercase;color:#374a68}.view-title-only__icon{display:flex;align-items:center;padding:0 8px}.view-chapters{min-width:300px;max-height:228px;overflow:auto}.view-chapters button.mat-mdc-menu-item{width:100%;height:auto;font-size:.75rem;line-height:1rem}.view-chapters div.mat-mdc-menu-content{padding:0}.view-chapters .mat-mdc-menu-item-text{display:flex;line-height:1.4em!important}.view-chapters__item{height:auto;white-space:normal;display:flex!important;padding:12px 20px!important;background-color:transparent;width:240px;transition:background-color 125ms,color 125ms}.view-chapters__item:first-of-type{border-top-left-radius:4px;border-top-right-radius:4px}.view-chapters__item:last-of-type{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.view-chapters__item:hover{cursor:pointer;background:#eaeff5}.view-chapters__item--selected{background-color:#2d72dc!important;--mat-menu-item-label-text-color: #ffffff}.view-chapters__thumb{background-size:cover;background-color:#f9fafd;border-radius:4px;background-repeat:no-repeat;border:2px solid white;flex:0 0 52px;height:52px;width:52px;transition:border-color .1s}.view-chapters__title{overflow-wrap:break-word;padding-inline-start:16px;word-break:break-word;white-space:normal;display:flex;flex-grow:1;font-weight:500}\n"],encapsulation:2,changeDetection:0}),kt([(0,l.l6)(b.N.getSelectedChapterTitle),Gt("design:type",d.c)],Et.prototype,"chapterTitle$",void 0),kt([(0,l.l6)(b.N.getSelectedChapterIndex),Gt("design:type",d.c)],Et.prototype,"chapterIndex$",void 0),kt([(0,l.l6)(b.N.getChapterCount),Gt("design:type",d.c)],Et.prototype,"chapterCount$",void 0),kt([(0,l.l6)(b.N.getStoryChapters),Gt("design:type",d.c)],Et.prototype,"chapters$",void 0),kt([(0,l.l6)(b.N.getSelectedChapterId),Gt("design:type",d.c)],Et.prototype,"selectedChapterId$",void 0),kt([(0,l.l6)(Ai.K.getRegisteredThumbnails),Gt("design:type",d.c)],Et.prototype,"thumbnails$",void 0),kt([(0,l.l6)(b.N.getChaptersViewed),Gt("design:type",d.c)],Et.prototype,"chaptersViewed$",void 0),kt([(0,l.l6)(T.dF.getVisible(h.U.Pagination)),Gt("design:type",d.c)],Et.prototype,"paginationVisible$",void 0);var Wd=c(84370),Go=c(34006),zd=c(16443);let Xd=(()=>{var o;class n{constructor(i,_){this.dialogRef=i,this.data=_,this.config=_}handleCloseClick(){this.dialogRef.close()}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(Go.CP),e.rXU(Go.Vh))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-video-dialog"]],decls:4,vars:2,consts:[["role","dialog","aria-modal","true",1,"video-dialog"],["mode","full",1,"video-dialog__video",3,"sources"],["type","button","app-view-button","","buttonShape","rounded","buttonTheme","white","matTooltip","Close Dialog","matTooltipPosition","left","aria-label","Close Dialog",1,"video-dialog__close",3,"click"],["icon","times"]],template:function(i,_){1&i&&(e.j41(0,"div",0),e.nrm(1,"app-video-view",1),e.j41(2,"button",2),e.bIt("click",function(){return _.handleCloseClick()}),e.nrm(3,"app-icon",3),e.k0s()()),2&i&&(e.BMQ("aria-label",(_.config.title||"")+" Video Dialog"),e.R7$(),e.Y8G("sources",_.config.videoSources))},dependencies:[q.R,zd.E,J.ri],styles:[".video-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.video-dialog__video[_ngcontent-%COMP%]{display:block;max-width:100%}.video-dialog__close[_ngcontent-%COMP%]{position:fixed;top:24px;inset-inline-end:24px}"],changeDetection:0}),n})();const Wo=[{src:"/umedia/video/a5b42697-64f5-43e1-97d2-48e62b8945ed/viewer.mpd",type:"application/dash+xml"},{src:"/umedia/video/a5b42697-64f5-43e1-97d2-48e62b8945ed/viewer.m3u8",type:"application/x-mpegURL"},{src:"/umedia/video/a5b42697-64f5-43e1-97d2-48e62b8945ed/viewer.0000022.jpg",type:"image/jpeg"}];var Tn,ao=c(68504),Mi=c(32724),ro=c(48570),zo=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},Xo=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};class bn{constructor(n,t,i){this.store=n,this.visibilityLayersService=t,this.changeDetectorRef=i,this.accessibleLabel=$localize`layer slider`,this.percent=100,this.ngUnsubscribe=new $.B}ngOnInit(){this.initIndexPositionObserver()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initIndexPositionObserver(){(0,Ae.z)([this.selectedChapterCurrentLayersIndex$,this.selectedChapterCurrentLayersPosition$,this.selectedChapterCurrentLayers$]).pipe((0,y.p)(([n,t,i])=>!(0,R.isNil)(n)&&!(0,R.isNil)(t)&&!(0,R.isNil)(i)),(0,g.Q)(this.ngUnsubscribe)).subscribe(([n,t,i])=>{const _=this.visibilityLayersService.indexPositionToFraction(i,n,t);this.percent=this.visibilityLayersService.fractionToPercent(_),this.changeDetectorRef.markForCheck()})}handleDragEnded(n){this.syncSliderLayers(n,!1,!0)}handleTrackClicked(n){this.syncSliderLayers(n,!1,!0)}handlePercentChanged(n){this.syncSliderLayers(n,!0,!1)}syncSliderLayers(n,t,i){const _=this.store.selectSnapshot(b.N.getSelectedChapterId),s=this.store.selectSnapshot(b.N.getSelectedChapterCurrentLayers),a=this.visibilityLayersService.percentToFraction(n),r=this.visibilityLayersService.fractionToIndex(s,a),u=this.visibilityLayersService.fractionToPosition(s,a,r);t&&this.visibilityLayersService.syncLayersToScene(s,r,u,!1),i&&this.visibilityLayersService.syncLayersToState(_,r,u)}}(Tn=bn).\u0275fac=function(n){return new(n||Tn)(e.rXU(l.il),e.rXU(g_.n),e.rXU(e.gRc))},Tn.\u0275cmp=e.VBU({type:Tn,selectors:[["app-view-layers-slider"]],decls:4,vars:3,consts:()=>{let o;return o=$localize`:␟78670204058ee08d827f2323fab98b7520c7c51e␟7032204075609591368: Changing the value of the slider will modify visibility of different layers of the model `,[o,[1,"flex","justify-center","w-full",2,"height","200px"],[1,"sr-only"],["sliderAxis","y",3,"percentChanged","dragEnded","trackClicked","percent","showTrack","accessibleLabel"]]},template:function(n,t){1&n&&(e.j41(0,"div",1)(1,"span",2),e.pXf(2,0),e.k0s(),e.j41(3,"app-view-slider",3),e.bIt("percentChanged",function(_){return t.handlePercentChanged(_)})("dragEnded",function(_){return t.handleDragEnded(_)})("trackClicked",function(_){return t.handleTrackClicked(_)}),e.k0s()()),2&n&&(e.R7$(3),e.Y8G("percent",t.percent)("showTrack",!0)("accessibleLabel",t.accessibleLabel))},dependencies:[f_],styles:['.view-layers-slider[_ngcontent-%COMP%]{--track-width: 5px;height:200px;width:40px;display:flex;justify-content:center}.view-layers-slider--disabled[_ngcontent-%COMP%]{opacity:.25;pointer-events:none}.view-layers-slider__group[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;width:28px;height:100%}.view-layers-slider__track[_ngcontent-%COMP%]{cursor:pointer;position:absolute;background:#96a8c099;z-index:1;width:var(--track-width);border-radius:var(--track-width);top:14px;bottom:14px}.view-layers-slider__bar[_ngcontent-%COMP%]{position:absolute;background:#374a68;width:var(--track-width);border-radius:var(--track-width);z-index:2;height:0;top:0;pointer-events:none}.view-layers-slider__handle[_ngcontent-%COMP%]{cursor:pointer;width:28px;height:28px;margin-top:-14px;top:14px;display:flex;align-items:center;justify-content:center;position:absolute;z-index:2}.view-layers-slider__handle[_ngcontent-%COMP%]:focus{outline:none;border:none}.view-layers-slider__handle--hide[_ngcontent-%COMP%]{display:none}.view-layers-slider__handle[_ngcontent-%COMP%]:after{content:"";width:12px;height:12px;border-radius:6px;background:#374a68;box-shadow:1px -1px 2px #1c2a3f1a,0 1px 2px #1c2a3f4d}.view-layers-slider__handle[_ngcontent-%COMP%]:hover:after, .view-layers-slider__handle[_ngcontent-%COMP%]:focus:after{background:#2d72dc}'],changeDetection:0}),zo([(0,l.l6)(b.N.getSelectedChapterCurrentLayers),Xo("design:type",d.c)],bn.prototype,"selectedChapterCurrentLayers$",void 0),zo([(0,l.l6)(b.N.getSelectedChapterCurrentLayersIndex),Xo("design:type",d.c)],bn.prototype,"selectedChapterCurrentLayersIndex$",void 0),zo([(0,l.l6)(b.N.getSelectedChapterCurrentLayersPosition),Xo("design:type",d.c)],bn.prototype,"selectedChapterCurrentLayersPosition$",void 0);var vn,ee=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},te=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Bd=["viewMenu"],jd=["viewQuizMenu"],Fd=o=>({"bg-blue-600 text-white":o}),Hd=o=>({"font-bold":o});function Qd(o,n){1&o&&e.nrm(0,"app-icon",43)}function Yd(o,n){1&o&&e.nrm(0,"app-icon",44)}function qd(o,n){1&o&&e.nrm(0,"app-icon",45)}function Kd(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",38),e.bIt("mousedown",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleSecretXRTriggerDown())})("mouseup",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleSecretXRTriggerUp())})("touchstart",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleSecretXRTriggerDown())})("touchend",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleSecretXRTriggerUp())}),e.j41(1,"div",39),e.nI1(2,"async"),e.DNE(3,Qd,1,0,"app-icon",40)(4,Yd,1,0,"app-icon",41)(5,qd,1,0,"app-icon",42),e.k0s()()}if(2&o){const t=e.XpG(2),i=e.sdS(29);e.Y8G("matMenuTriggerFor",i)("matTooltipPosition",t.tooltipPosition),e.R7$(),e.Y8G("ngSwitch",e.bMT(2,5,t.activeTool$)),e.R7$(3),e.Y8G("ngSwitchCase",t.toolEnum.Hide),e.R7$(),e.Y8G("ngSwitchCase",t.toolEnum.Fade)}}function Zd(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",46),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleLayers())}),e.nrm(4,"app-icon",47),e.k0s()}if(2&o){let t;const i=e.XpG(2);e.Y8G("buttonTheme","show"===(null==(t=e.bMT(1,4,i.visibilityLayersUI$))?null:t.status)?"blue-fill":"transparent-fill")("matTooltipPosition",i.tooltipPosition),e.BMQ("data-test-visibility-layers",e.bMT(2,6,i.visibilityLayersVisible$))("data-test-skin-layers",e.bMT(3,8,i.skinLayersVisible$))}}function Jd(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",48),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleSearch())}),e.nrm(3,"app-icon",49),e.k0s()}if(2&o){const t=e.XpG(2);e.Y8G("buttonTheme","show"===e.bMT(1,3,t.searchStatus$)?"blue-fill":"transparent-fill")("matTooltipPosition",t.tooltipPosition),e.BMQ("aria-pressed","show"===e.bMT(2,5,t.searchStatus$))}}function ep(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",50),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleDraw())}),e.nrm(1,"app-icon",51),e.k0s()}if(2&o){const t=e.XpG(2);e.Y8G("matTooltipPosition",t.tooltipPosition)}}function tp(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",53),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG(3);return e.Njj(_.toggleXRModeClick("immersive-vr"))}),e.nrm(4,"app-icon",54),e.k0s()}if(2&o){const t=e.XpG(3);e.Y8G("matTooltip",e.bMT(1,4,t.xrActive$)?"Exit VR":"Enter VR")("matTooltipPosition",t.tooltipPosition)("disabled","immersive-ar"===e.bMT(2,6,t.xrSessionMode$)),e.BMQ("aria-label",e.bMT(3,8,t.xrActive$)?"Exit VR":"Enter VR")}}function ip(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",53),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG(3);return e.Njj(_.toggleXRModeClick("immersive-ar"))}),e.nrm(4,"app-icon",55),e.k0s()}if(2&o){const t=e.XpG(3);e.Y8G("matTooltip",e.bMT(1,4,t.xrActive$)?"Exit AR":"Enter AR")("matTooltipPosition",t.tooltipPosition)("disabled","immersive-vr"===e.bMT(2,6,t.xrSessionMode$)),e.BMQ("aria-label",e.bMT(3,8,t.xrActive$)?"Exit AR":"Enter AR")}}function np(o,n){if(1&o&&(e.qex(0),e.DNE(1,tp,5,10,"button",52),e.nI1(2,"async"),e.nI1(3,"async"),e.DNE(4,ip,5,10,"button",52),e.nI1(5,"async"),e.nI1(6,"async"),e.bVm()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",e.bMT(2,2,t.xrSupportedModes$)["immersive-vr"]&&e.bMT(3,4,t.canvasHeightBreakpoint$)>t.canvasHeightBreakpoint.Small),e.R7$(3),e.Y8G("ngIf",e.bMT(5,6,t.xrSupportedModes$)["immersive-ar"]&&e.bMT(6,8,t.canvasHeightBreakpoint$)>t.canvasHeightBreakpoint.Small)}}function op(o,n){if(1&o&&(e.qex(0),e.DNE(1,Kd,6,7,"button",34),e.nI1(2,"async"),e.DNE(3,Zd,5,10,"button",35),e.nI1(4,"async"),e.DNE(5,Jd,4,7,"button",36),e.nI1(6,"async"),e.DNE(7,ep,2,1,"button",37),e.nI1(8,"async"),e.DNE(9,np,7,10,"ng-container",22),e.nI1(10,"async"),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,5,t.toolsVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(4,7,t.visibilityLayersVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(6,9,t.searchVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(8,11,t.whiteboardVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(10,13,t.xrEnabled$))}}function _p(o,n){if(1&o&&(e.j41(0,"button",56),e.nI1(1,"async"),e.nrm(2,"app-icon",57),e.k0s()),2&o){const t=e.XpG(),i=e.sdS(10),_=e.sdS(33);e.Y8G("matMenuTriggerFor",e.bMT(1,2,t.canvasHeightBreakpoint$)>t.canvasHeightBreakpoint.Small?_:i)("matTooltipPosition",t.tooltipPosition)}}function sp(o,n){1&o&&(e.j41(0,"app-pillbox",58),e.nrm(1,"app-view-layers-slider"),e.k0s())}function ap(o,n){1&o&&e.nrm(0,"app-icon",68)}function rp(o,n){1&o&&e.nrm(0,"app-icon",69)}function lp(o,n){1&o&&e.nrm(0,"app-icon",70)}function cp(o,n){if(1&o&&(e.j41(0,"button",63),e.qex(1,64),e.nI1(2,"async"),e.DNE(3,ap,1,0,"app-icon",65)(4,rp,1,0,"app-icon",66)(5,lp,1,0,"app-icon",67),e.bVm(),e.qex(6),e.pXf(7,8),e.bVm(),e.k0s()),2&o){const t=e.XpG(2),i=e.sdS(29);e.Y8G("matMenuTriggerFor",i),e.R7$(),e.Y8G("ngSwitch",e.bMT(2,4,t.activeTool$)),e.R7$(3),e.Y8G("ngSwitchCase",t.toolEnum.Hide),e.R7$(),e.Y8G("ngSwitchCase",t.toolEnum.Fade)}}function dp(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",71),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleLayers())}),e.nrm(3,"app-icon",72),e.qex(4),e.pXf(5,9),e.bVm(),e.k0s()}if(2&o){const t=e.XpG(2);e.BMQ("data-test-visibility-layers",e.bMT(1,2,t.visibilityLayersVisible$))("data-test-skin-layers",e.bMT(2,4,t.skinLayersVisible$))}}function pp(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",73),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleSearch())}),e.nrm(1,"app-icon",74),e.qex(2),e.pXf(3,10),e.bVm(),e.k0s()}}function up(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",75),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleDraw())}),e.nrm(1,"app-icon",76),e.qex(2),e.pXf(3,11),e.bVm(),e.k0s()}}function hp(o,n){1&o&&(e.qex(0),e.pXf(1,12),e.bVm())}function gp(o,n){1&o&&(e.qex(0),e.pXf(1,13),e.bVm())}function mp(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",78),e.nI1(1,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG(3);return e.Njj(_.toggleXRModeClick("immersive-vr"))}),e.nrm(2,"app-icon",79),e.DNE(3,hp,2,0,"ng-container",22),e.nI1(4,"async"),e.DNE(5,gp,2,0,"ng-container",22),e.nI1(6,"async"),e.k0s()}if(2&o){const t=e.XpG(3);e.Y8G("disabled","immersive-ar"===e.bMT(1,3,t.xrSessionMode$)),e.R7$(3),e.Y8G("ngIf",e.bMT(4,5,t.xrActive$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(6,7,t.xrActive$))}}function Ep(o,n){1&o&&(e.qex(0),e.pXf(1,14),e.bVm())}function fp(o,n){1&o&&(e.qex(0),e.pXf(1,15),e.bVm())}function Sp(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",78),e.nI1(1,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG(3);return e.Njj(_.toggleXRModeClick("immersive-ar"))}),e.nrm(2,"app-icon",80),e.DNE(3,Ep,2,0,"ng-container",22),e.nI1(4,"async"),e.DNE(5,fp,2,0,"ng-container",22),e.nI1(6,"async"),e.k0s()}if(2&o){const t=e.XpG(3);e.Y8G("disabled","immersive-vr"===e.bMT(1,3,t.xrSessionMode$)),e.R7$(3),e.Y8G("ngIf",e.bMT(4,5,t.xrActive$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(6,7,t.xrActive$))}}function Tp(o,n){if(1&o&&(e.qex(0),e.DNE(1,mp,7,9,"button",77),e.nI1(2,"async"),e.DNE(3,Sp,7,9,"button",77),e.nI1(4,"async"),e.bVm()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",e.bMT(2,2,t.xrSupportedModes$)["immersive-vr"]),e.R7$(2),e.Y8G("ngIf",e.bMT(4,4,t.xrSupportedModes$)["immersive-ar"])}}function bp(o,n){if(1&o&&(e.qex(0),e.DNE(1,cp,8,6,"button",59),e.nI1(2,"async"),e.DNE(3,dp,6,6,"button",60),e.nI1(4,"async"),e.nI1(5,"async"),e.DNE(6,pp,4,0,"button",61),e.nI1(7,"async"),e.DNE(8,up,4,0,"button",62),e.nI1(9,"async"),e.DNE(10,Tp,5,6,"ng-container",22),e.nI1(11,"async"),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,5,t.toolsVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(4,7,t.visibilityLayersVisible$)&&e.bMT(5,9,t.canvasHeightBreakpoint$)<t.canvasHeightBreakpoint.Standard),e.R7$(3),e.Y8G("ngIf",e.bMT(7,11,t.searchVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(9,13,t.whiteboardVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(11,15,t.xrEnabled$))}}function vp(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",82),e.bIt("click",function(){const _=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.handleSelectTool(_.id))}),e.j41(1,"div",83)(2,"div",84),e.nI1(3,"async"),e.nrm(4,"app-icon",85),e.k0s(),e.j41(5,"div",86),e.nI1(6,"async"),e.EFF(7),e.k0s()()()}if(2&o){const t=n.$implicit,i=e.XpG(2);e.BMQ("data-test","viewQuizTools"+t.label),e.R7$(2),e.Y8G("ngClass",e.eq3(9,Fd,e.bMT(3,5,i.activeTool$)===t.id)),e.R7$(2),e.Y8G("icon",t.icon),e.R7$(),e.Y8G("ngClass",e.eq3(11,Hd,e.bMT(6,7,i.activeTool$)===t.id)),e.R7$(2),e.SpI(" ",t.label," ")}}function Op(o,n){if(1&o&&(e.qex(0),e.Z7z(1,vp,8,13,"button",81,e.Vm6),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Dyx(t.tools)}}function wp(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",87),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleTakeQuiz())}),e.nrm(3,"app-icon",88),e.qex(4),e.pXf(5,16),e.bVm(),e.k0s()}if(2&o){let t;const i=e.XpG();e.Y8G("disabled",!(null!=(t=e.bMT(1,1,i.selectedChapterReady$))&&t.model)||e.bMT(2,3,i.quizActive$))}}function Ip(o,n){1&o&&(e.qex(0),e.pXf(1,17),e.bVm())}function Cp(o,n){1&o&&(e.qex(0),e.pXf(1,18),e.bVm())}function Mp(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",89),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleToggleLabels())}),e.DNE(1,Ip,2,0,"ng-container",22),e.nI1(2,"async"),e.DNE(3,Cp,2,0,"ng-container",22),e.nI1(4,"async"),e.k0s()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,2,t.showLabels$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(4,4,t.showLabels$))}}function yp(o,n){if(1&o&&(e.qex(0),e.j41(1,"button",90),e.pXf(2,19),e.k0s(),e.bVm()),2&o){e.XpG();const t=e.sdS(18);e.R7$(),e.Y8G("matMenuTriggerFor",t)}}class Q{constructor(n,t,i,_,s,a,r){this.viewService=n,this.viewUIService=t,this.quizService=i,this.dialog=_,this.store=s,this.directionality=a,this.activatedRoute=r,this.toolEnum=Ze.s,this.horizontalBreakpoint=Ui.m,this.canvasHeightBreakpoint=h_.h,this.viewUI=h.U,this.viewUIStatus=ot.Q,this.bookmarkViewMode=Wi._,this.ngUnsubscribe=new $.B,this.tools=[{id:Ze.s.Select,label:$localize`Select`,icon:"mouse-pointer"},{id:Ze.s.Hide,label:$localize`Hide`,icon:"eye-slash"},{id:Ze.s.Fade,label:$localize`Fade`,icon:"adjust"}],this.tooltipPosition="ltr"===this.directionality.value?"right":"left"}ngOnInit(){this.checkSecretXRTrigger()}ngOnDestroy(){clearTimeout(this.xrTimeout),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}checkSecretXRTrigger(){const n=this.activatedRoute.snapshot.queryParamMap.get("xr");(0,R.isNil)(n)||this.store.dispatch(new ro.W.SetEnabled("true"===n))}handleSecretXRTriggerDown(){this.xrTimeout=setTimeout(()=>{const t=this.store.selectSnapshot(Mi.U.getXREnabled);this.store.dispatch(new ro.W.SetEnabled(!t))},1e4)}handleSecretXRTriggerUp(){clearTimeout(this.xrTimeout)}handleSearch(){this.viewService.toggleSearch()}handleDraw(){this.viewService.toggleWhiteboard(!0)}handleSelectTool(n){(0,R.isNil)(n)||this.viewService.selectTool(n)}handleLayers(){this.viewService.toggleLayers()}handleToggleLabels(){this.viewService.showLabels()}handleTakeQuiz(){this.quizService.startQuiz()}handleHelpShortcuts(){this.viewService.toggleHelp(fo.J.Shortcuts)}handleHelpBasics(){this.viewService.toggleHelp(fo.J.Basics)}handlePlaythrough(n){this.viewService.togglePlaythrough(n)}handleTutorial(){this.viewService.toggleTutorial(!0)}handleVideo(n){this.dialog.open(Xd,{id:Wd.t.VideoDialog,backdropClass:"bd-dialog-backdrop",panelClass:"bd-dialog-panel",disableClose:!1,data:{videoSources:Wo}}),n.stopPropagation()}isEnabled(n){return this.viewUIService.isUIEnabled(n)}handleUndoClick(){this.viewService.undo()}handleRedoClick(){this.viewService.redo()}handleResetClick(){this.viewService.resetChapter()}toggleXRModeClick(n){this.store.selectSnapshot(Mi.U.getXRSessionMode)?this.store.dispatch(new ro.W.ExitXR(!1)):this.store.dispatch(new ro.W.EnterXR(n))}openRemoteQuest(){const n=new URL("https://oculus.com/open_url/");n.searchParams.set("url",location.href),window.open(n,"__blank")}}(vn=Q).\u0275fac=function(n){return new(n||vn)(e.rXU(Z.z),e.rXU(Eo.d),e.rXU($i.k),e.rXU(Go.bZ),e.rXU(l.il),e.rXU(He.dS),e.rXU(he.nX))},vn.\u0275cmp=e.VBU({type:vn,selectors:[["app-view-toolbar"]],viewQuery:function(n,t){if(1&n&&(e.GBs(Bd,5),e.GBs(jd,5)),2&n){let i;e.mGM(i=e.lsd())&&(t.viewMenu=i.first),e.mGM(i=e.lsd())&&(t.viewQuizMenu=i.first)}},decls:45,vars:43,consts:()=>{let o,n,t,i,_,s,a,r,u,f,P,x,z,Ge,me,yt,oi,_i,si,ai,ri,li,Rn,Vn,de,Es,fs;return o=$localize`:␟7d208927e15566385c17967cc202c76e52e8f6a5␟3354617747657053846:Selection Tools`,n=$localize`:␟90fe9fae0783d2318d135abeb52592f09485421e␟4976034006498894948:More Options`,t=$localize`:␟90fe9fae0783d2318d135abeb52592f09485421e␟4976034006498894948:More Options`,i=$localize`:␟ac0f81713a84217c9bd1d9bb460245d8190b073f␟5937251202465808296:More`,_=$localize`:␟58083a2c0d5c2b2184981c0887b01d1b3795eb61␟3384117902239564995:Getting Started Video`,s=$localize`:␟27469d782d17f88ac1d4bbb5ab0715a83be9bfec␟1108080934572452765:3D Navigation Tutorial`,a=$localize`:␟eedb1f2596af2c8fcb065b15ace6b88d079e45db␟4831075576673859232:Keyboard Shortcuts`,r=$localize`:␟7d208927e15566385c17967cc202c76e52e8f6a5␟3354617747657053846:Selection Tools`,u=$localize`:␟7d208927e15566385c17967cc202c76e52e8f6a5␟3354617747657053846:Selection Tools`,f=$localize`:␟3a7999f75941d258d1b67979cf1dc683a5db872b␟8605048384026546143:Anatomy Layers`,P=$localize`:␟3a7999f75941d258d1b67979cf1dc683a5db872b␟8605048384026546143:Anatomy Layers`,x=$localize`:␟b4c7cd9839a91a097a7d23041261d812818f2688␟1240960779977380559:Anatomy Search`,z=$localize`:␟b4c7cd9839a91a097a7d23041261d812818f2688␟1240960779977380559:Anatomy Search`,Ge=$localize`:␟a9c16db1d07908ad468c925fb3a36d96b98e9080␟8647687729200262691:Draw`,me=$localize`:␟a9c16db1d07908ad468c925fb3a36d96b98e9080␟8647687729200262691:Draw`,yt=$localize`:␟7d208927e15566385c17967cc202c76e52e8f6a5␟3354617747657053846:Selection Tools`,oi=$localize`:␟3a7999f75941d258d1b67979cf1dc683a5db872b␟8605048384026546143:Anatomy Layers`,_i=$localize`:␟b4c7cd9839a91a097a7d23041261d812818f2688␟1240960779977380559:Anatomy Search`,si=$localize`:␟a9c16db1d07908ad468c925fb3a36d96b98e9080␟8647687729200262691:Draw`,ai=$localize`:␟d8f00947439583705b11afdb26b3606125755d7b␟1909228686165085461:Exit VR`,ri=$localize`:␟5830a413540a273b819289949937046a450e5d1d␟3237949197627908261:Enter VR`,li=$localize`:␟1d0d80fb57ed2c1c18d12b2df218541387455b4d␟6343763191422968223:Exit AR`,Rn=$localize`:␟ea19499751215e7ca470be4008a3fc22ed128146␟7143676568850518157:Enter AR`,Vn=$localize`:␟66a82c6638b304a349b7d43b13482fa7493419c9␟1556772664146095223:Take Quiz`,de=$localize`:␟0176531c3e308e6a4f5dd4776a054145a1a6f2f3␟4142825283571551211:Hide Labels`,Es=$localize`:␟5a595fd88f56c04bacea3ea933dd02f98f213150␟6701808385090866243:Show Labels`,fs=$localize`:␟79b5cb803980738a667e2f41746369c1efc9b0b1␟1685423440406455552: Help `,[["viewMenu","matMenu"],["helpMenu","matMenu"],["selectionToolsMenu","matMenu"],["moreMenu","matMenu"],i,_,s,a,yt,oi,_i,si,ai,ri,li,Rn,Vn,de,Es,fs,["data-test","viewToolbar",1,"view-toolbar"],["orientation","vertical","role","group","aria-label",o,"appPreventFadeout","",1,"view-toolbar__main"],[4,"ngIf"],["type","button","data-test","viewMenuButton","matTooltip",n,"app-view-button","","buttonSize","small","aria-label",t,3,"matMenuTriggerFor","matTooltipPosition",4,"ngIf"],["appPreventFadeout","","orientation","vertical","class","view-toolbar__tools","data-test","viewLayers",4,"ngIf"],["data-test","viewMenu",1,"view-menu",3,"overlapTrigger"],["mat-menu-item","","data-test","viewMoreMenuButton",3,"matMenuTriggerFor"],[1,"view-menu"],["mat-menu-item","",3,"click"],["mat-menu-item","","data-test","viewLaunchTutorial",3,"click","disabled"],["mat-menu-item","","data-test","viewKeyboardShortcuts",3,"click"],["data-test","selectionToolsMenu",1,"view-menu"],["mat-menu-item","","data-test","viewQuizMenuButton",3,"disabled","click",4,"ngIf"],["mat-menu-item","","data-test","viewToggleLabels",3,"click",4,"ngIf"],["app-view-button","","buttonSize","small","buttonTheme","transparent-fill","data-test","viewToolsButton","aria-label",r,"matTooltip",u,3,"matMenuTriggerFor","matTooltipPosition","mousedown","mouseup","touchstart","touchend",4,"ngIf"],["app-view-button","","buttonSize","small","data-test","viewLayersButton","aria-label",f,"matTooltip",P,3,"buttonTheme","matTooltipPosition","click",4,"ngIf"],["app-view-button","","buttonSize","small","data-test","viewSearchButton","aria-label",x,"matTooltip",z,3,"buttonTheme","matTooltipPosition","click",4,"ngIf"],["app-view-button","","buttonSize","small","data-test","viewDrawButton","aria-label",Ge,"matTooltip",me,3,"matTooltipPosition","click",4,"ngIf"],["app-view-button","","buttonSize","small","buttonTheme","transparent-fill","data-test","viewToolsButton","aria-label",r,"matTooltip",u,3,"mousedown","mouseup","touchstart","touchend","matMenuTriggerFor","matTooltipPosition"],[1,"relative","flex","justify-center",3,"ngSwitch"],["size","lg","icon","mouse-pointer",4,"ngSwitchDefault"],["size","lg","icon","eye-slash",4,"ngSwitchCase"],["size","lg","icon","adjust",4,"ngSwitchCase"],["size","lg","icon","mouse-pointer"],["size","lg","icon","eye-slash"],["size","lg","icon","adjust"],["app-view-button","","buttonSize","small","data-test","viewLayersButton","aria-label",f,"matTooltip",P,3,"click","buttonTheme","matTooltipPosition"],["size","lg","icon","sliders-simple"],["app-view-button","","buttonSize","small","data-test","viewSearchButton","aria-label",x,"matTooltip",z,3,"click","buttonTheme","matTooltipPosition"],["size","lg","icon","magnifying-glass"],["app-view-button","","buttonSize","small","data-test","viewDrawButton","aria-label",Ge,"matTooltip",me,3,"click","matTooltipPosition"],["size","lg","icon","pen"],["app-view-button","","buttonSize","small",3,"matTooltip","matTooltipPosition","disabled","click",4,"ngIf"],["app-view-button","","buttonSize","small",3,"click","matTooltip","matTooltipPosition","disabled"],["size","lg","icon","head-side-goggles"],["size","lg","icon","glasses"],["type","button","data-test","viewMenuButton","matTooltip",n,"app-view-button","","buttonSize","small","aria-label",t,3,"matMenuTriggerFor","matTooltipPosition"],["size","lg","icon","ellipsis-vertical"],["appPreventFadeout","","orientation","vertical","data-test","viewLayers",1,"view-toolbar__tools"],["mat-menu-item","","data-test","viewToolsButton",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item","","data-test","viewLayersButton",3,"click",4,"ngIf"],["mat-menu-item","","data-test","viewSearchButton",3,"click",4,"ngIf"],["mat-menu-item","","data-test","viewDrawButton",3,"click",4,"ngIf"],["mat-menu-item","","data-test","viewToolsButton",3,"matMenuTriggerFor"],[3,"ngSwitch"],["class","view-toolbar__menu-icon","size","lg","icon","mouse-pointer",4,"ngSwitchDefault"],["class","view-toolbar__menu-icon","size","lg","icon","eye-slash",4,"ngSwitchCase"],["class","view-toolbar__menu-icon","size","lg","icon","adjust",4,"ngSwitchCase"],["size","lg","icon","mouse-pointer",1,"view-toolbar__menu-icon"],["size","lg","icon","eye-slash",1,"view-toolbar__menu-icon"],["size","lg","icon","adjust",1,"view-toolbar__menu-icon"],["mat-menu-item","","data-test","viewLayersButton",3,"click"],["size","lg","icon","sliders-simple",1,"view-toolbar__menu-icon"],["mat-menu-item","","data-test","viewSearchButton",3,"click"],["size","lg","icon","magnifying-glass",1,"view-toolbar__menu-icon"],["mat-menu-item","","data-test","viewDrawButton",3,"click"],["size","lg","icon","pen",1,"view-toolbar__menu-icon"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"click","disabled"],["size","lg","icon","head-side-goggles",1,"view-toolbar__menu-icon"],["size","lg","icon","glasses",1,"view-toolbar__menu-icon"],["mat-menu-item","",1,"!px-2"],["mat-menu-item","",1,"!px-2",3,"click"],[1,"flex","items-center","gap-2","pr-4"],["aria-hidden","",1,"flex","items-center","justify-center","w-8","h-8","rounded",3,"ngClass"],["size","lg","appLogicalDir","",3,"icon"],[3,"ngClass"],["mat-menu-item","","data-test","viewQuizMenuButton",3,"click","disabled"],["size","lg","icon","user-graduate","appLogicalDir","",1,"view-toolbar__menu-icon"],["mat-menu-item","","data-test","viewToggleLabels",3,"click"],["data-test","viewHelpMenuButton","mat-menu-item","",3,"matMenuTriggerFor"]]},template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"div",20)(1,"app-pillbox",21),e.DNE(2,op,11,15,"ng-container",22),e.nI1(3,"async"),e.DNE(4,_p,3,4,"button",23),e.nI1(5,"async"),e.k0s(),e.DNE(6,sp,2,0,"app-pillbox",24),e.nI1(7,"async"),e.nI1(8,"async"),e.k0s(),e.j41(9,"mat-menu",25,0),e.nI1(11,"async"),e.DNE(12,bp,12,17,"ng-container",22),e.nI1(13,"async"),e.j41(14,"button",26),e.qex(15),e.pXf(16,4),e.bVm(),e.k0s()(),e.j41(17,"mat-menu",27,1)(19,"button",28),e.bIt("click",function(s){return e.eBV(i),e.Njj(t.handleVideo(s))}),e.pXf(20,5),e.k0s(),e.j41(21,"button",29),e.nI1(22,"async"),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleTutorial())}),e.qex(23),e.pXf(24,6),e.bVm(),e.k0s(),e.j41(25,"button",30),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleHelpShortcuts())}),e.qex(26),e.pXf(27,7),e.bVm(),e.k0s()(),e.j41(28,"mat-menu",31,2),e.DNE(30,Op,3,0,"ng-container",22),e.nI1(31,"async"),e.k0s(),e.j41(32,"mat-menu",27,3),e.DNE(34,wp,6,5,"button",32),e.nI1(35,"async"),e.nI1(36,"async"),e.nI1(37,"async"),e.nI1(38,"async"),e.nI1(39,"async"),e.nI1(40,"async"),e.DNE(41,Mp,5,6,"button",33),e.nI1(42,"async"),e.DNE(43,yp,3,1,"ng-container",22),e.nI1(44,"async"),e.k0s()}if(2&n){let i,_;const s=e.sdS(33);e.R7$(2),e.Y8G("ngIf",e.bMT(3,11,t.canvasHeightBreakpoint$)>t.canvasHeightBreakpoint.Small),e.R7$(2),e.Y8G("ngIf",e.bMT(5,13,t.toolbarOverflowVisible$)),e.R7$(2),e.Y8G("ngIf","show"===(null==(i=e.bMT(7,15,t.visibilityLayersUI$))?null:i.status)&&"single"===(null==(i=e.bMT(8,17,t.visibilityLayersUI$))?null:i.layersMode)),e.R7$(3),e.Y8G("overlapTrigger",e.bMT(11,19,t.canvasHeightBreakpoint$)<t.canvasHeightBreakpoint.Standard),e.R7$(3),e.Y8G("ngIf",e.bMT(13,21,t.canvasHeightBreakpoint$)<t.canvasHeightBreakpoint.Standard),e.R7$(2),e.Y8G("matMenuTriggerFor",s),e.R7$(7),e.Y8G("disabled",!(null!=(_=e.bMT(22,23,t.selectedChapterReady$))&&_.model)),e.R7$(9),e.Y8G("ngIf",e.bMT(31,25,t.toolsVisible$)),e.R7$(4),e.Y8G("ngIf",e.bMT(35,27,t.hasQuiz$)&&e.bMT(36,29,t.quizEnabled$)&&e.bMT(37,31,t.quizPromptVisible$)&&!1===e.bMT(38,33,t.quizLocked$)&&e.bMT(39,35,t.selectedBookmarkViewMode$)!==t.bookmarkViewMode.Content&&e.bMT(40,37,t.isMobileWeb$)),e.R7$(7),e.Y8G("ngIf",e.bMT(42,39,t.toggleLabelsVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(44,41,t.helpVisible$))}},dependencies:[J.ri,p.YU,p.bT,p.ux,p.e1,p.fG,Ei.s,Ot.e,q.R,ke.kk,ke.fb,ke.Cp,ye.oV,Vt.O,bn,p.Jj],styles:[".view-toolbar[_ngcontent-%COMP%]{position:relative}.view-toolbar__menu-icon[_ngcontent-%COMP%]{display:inline-block;width:20px;text-align:center;margin-inline-end:4px}.view-toolbar__menu-icon--light[_ngcontent-%COMP%]{color:#374a68}.view-toolbar__tools[_ngcontent-%COMP%]{position:absolute;z-index:2;inset-inline-start:48px;top:0;width:40px}"],changeDetection:0}),ee([(0,l.l6)(T.dF.getVisible(h.U.Tools)),te("design:type",d.c)],Q.prototype,"toolsVisible$",void 0),ee([(0,l.l6)(T.dF.getVisible(h.U.VisibilityLayers)),te("design:type",d.c)],Q.prototype,"visibilityLayersVisible$",void 0),ee([(0,l.l6)(T.dF.getUIEntry(h.U.VisibilityLayers)),te("design:type",d.c)],Q.prototype,"visibilityLayersUI$",void 0),ee([(0,l.l6)(T.dF.getVisible(h.U.SkinLayers)),te("design:type",d.c)],Q.prototype,"skinLayersVisible$",void 0),ee([(0,l.l6)(T.dF.getVisible(h.U.Search)),te("design:type",d.c)],Q.prototype,"searchVisible$",void 0),ee([(0,l.l6)(T.dF.getVisible(h.U.Whiteboard)),te("design:type",d.c)],Q.prototype,"whiteboardVisible$",void 0),ee([(0,l.l6)(T.dF.getVisible(h.U.ToggleLabels)),te("design:type",d.c)],Q.prototype,"toggleLabelsVisible$",void 0),ee([(0,l.l6)(T.dF.getVisible(h.U.Help)),te("design:type",d.c)],Q.prototype,"helpVisible$",void 0),ee([(0,l.l6)(T.dF.getVisible(h.U.Playthrough)),te("design:type",d.c)],Q.prototype,"playthroughVisible$",void 0),ee([(0,l.l6)(T.dF.getVisible(h.U.ToolbarOverflow)),te("design:type",d.c)],Q.prototype,"toolbarOverflowVisible$",void 0),ee([(0,l.l6)(T.dF.getSearchStatus),te("design:type",d.c)],Q.prototype,"searchStatus$",void 0),ee([(0,l.l6)(hi.V.getHorizontalBreakpoint),te("design:type",d.c)],Q.prototype,"horizontalBreakpoint$",void 0),ee([(0,l.l6)(le.S.getCanvasHeightBreakpoint),te("design:type",d.c)],Q.prototype,"canvasHeightBreakpoint$",void 0),ee([(0,l.l6)(O.j.hasQuiz),te("design:type",d.c)],Q.prototype,"hasQuiz$",void 0),ee([(0,l.l6)(T.dF.getVisible(h.U.QuizPrompt)),te("design:type",d.c)],Q.prototype,"quizPromptVisible$",void 0),ee([(0,l.l6)(O.j.getQuizEnabled),te("design:type",d.c)],Q.prototype,"quizEnabled$",void 0),ee([(0,l.l6)(O.j.getQuizModeLocked),te("design:type",d.c)],Q.prototype,"quizLocked$",void 0),ee([(0,l.l6)(O.j.getQuizModeActive),te("design:type",d.c)],Q.prototype,"quizActive$",void 0),ee([(0,l.l6)(le.S.getShowLabels),te("design:type",d.c)],Q.prototype,"showLabels$",void 0),ee([(0,l.l6)(le.S.getActiveTool),te("design:type",d.c)],Q.prototype,"activeTool$",void 0),ee([(0,l.l6)(b.N.getSelectedChapterReadyState),te("design:type",d.c)],Q.prototype,"selectedChapterReady$",void 0),ee([(0,l.l6)(Ht.J.getSelectedBookmarkViewMode),te("design:type",d.c)],Q.prototype,"selectedBookmarkViewMode$",void 0),ee([(0,l.l6)(m.Pf.getIsMobileWeb),te("design:type",d.c)],Q.prototype,"isMobileWeb$",void 0),ee([(0,l.l6)(ao.o.canUndo),te("design:type",d.c)],Q.prototype,"canUndo$",void 0),ee([(0,l.l6)(ao.o.canRedo),te("design:type",d.c)],Q.prototype,"canRedo$",void 0),ee([(0,l.l6)(T.dF.getVisible(h.U.Undo)),te("design:type",d.c)],Q.prototype,"undoVisible$",void 0),ee([(0,l.l6)(Mi.U.getXREnabled),te("design:type",d.c)],Q.prototype,"xrEnabled$",void 0),ee([(0,l.l6)(Mi.U.getXRSessionMode),te("design:type",d.c)],Q.prototype,"xrSessionMode$",void 0),ee([(0,l.l6)(Mi.U.getXRSupportedModes),te("design:type",d.c)],Q.prototype,"xrSupportedModes$",void 0),ee([(0,l.l6)(Mi.U.getXRActive),te("design:type",d.c)],Q.prototype,"xrActive$",void 0);var K_=c(86050);const Ap=["app-view-rounded-button",""];function Np(o,n){if(1&o&&e.nrm(0,"app-icon",3),2&o){const t=e.XpG();e.Y8G("icon",t.icon)}}let Rp=(()=>{var o;class n{constructor(){this.iconPlacement="left",this.compact=!1,this.buttonType="outline"}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["button","app-view-rounded-button",""]],inputs:{icon:"icon",iconPlacement:"iconPlacement",label:"label",compact:"compact",buttonType:"buttonType",shadow:"shadow"},attrs:Ap,decls:4,vars:12,consts:[[1,"view-rounded-button"],["class","view-rounded-button__icon mx-1",3,"icon",4,"ngIf"],[1,"view-rounded-button__label","mx-1"],[1,"view-rounded-button__icon","mx-1",3,"icon"]],template:function(i,_){1&i&&(e.j41(0,"div",0),e.DNE(1,Np,1,1,"app-icon",1),e.j41(2,"div",2),e.EFF(3),e.k0s()()),2&i&&(e.AVh("view-rounded-button--outline","outline"===_.buttonType)("view-rounded-button--solid","solid"===_.buttonType)("view-rounded-button--shadow",_.shadow)("view-rounded-button--compact",_.compact)("view-rounded-button--reverse","right"===_.iconPlacement),e.R7$(),e.Y8G("ngIf",_.icon),e.R7$(2),e.JRh(_.label))},dependencies:[p.bT,q.R],styles:["button[app-view-rounded-button]{border-color:transparent;background:none;border-width:0;padding:0;outline:none;margin:0;pointer-events:all}button[app-view-rounded-button]:hover .view-rounded-button,button[app-view-rounded-button]:focus .view-rounded-button{color:#f9fafd;border-color:#f9fafd;background:#f9fafd40}button[app-view-rounded-button]:hover .view-rounded-button--solid,button[app-view-rounded-button]:focus .view-rounded-button--solid{border-color:#f9fafd40}.view-rounded-button{cursor:pointer;display:flex;flex-direction:row;align-items:center;justify-content:center;padding:12px 16px;border-style:solid;border-width:1px;border-radius:24px;color:#f9fafd;border-color:#f9fafd}.view-rounded-button__label{font-size:1rem;line-height:1.5rem}.view-rounded-button--solid{color:#060502;border-color:#060502;background:#f9fafd}.view-rounded-button--shadow{box-shadow:0 0 8px #00000052}.view-rounded-button--reverse{flex-direction:row-reverse}.view-rounded-button--compact{padding:4px 8px}\n"],encapsulation:2,changeDetection:0}),n})();var Jt=function(o){return o.CameraZoom="camera-zoom",o.CameraRotate="camera-rotate",o.CameraPan="camera-pan",o.NodeSelection="node-selection",o}(Jt||{}),Vp=c(13878),Pp=c(3266),ei=c(38472),Up=c(3829);function Z_(o,n,t=1e3,i=.001){return Bo(o).pipe((0,En.Z)(n.getCameraZoom()),(0,Ue.T)(()=>n.getCameraZoom()),(0,pi.J)(),(0,Ue.T)(([_,s])=>s-_),(0,y.p)(_=>Math.abs(_)>i),(0,Be.B)(t))}function J_(o,n,t=125){return Bo(o).pipe((0,En.Z)(n.getLookDirection()),(0,Ue.T)(()=>n.getLookDirection()),(0,pi.J)(),(0,Ue.T)(([i,_])=>function Wp(o,n){return ei.angle(o,n)>.001}(i,_)),(0,y.p)(i=>i),(0,Be.B)(t))}function es(o){return{camera:o.getCamera(),zoom:o.getCameraZoom()}}function Bo(o){return o.getEvent(qt.X.CameraRested)}function ts(o){const{eye:n,look:t}=o,i=ei.fromValues(n.x,n.y,n.z),_=ei.fromValues(t.x,t.y,t.z),s=ei.create();return ei.sub(s,i,_),s}var Xp=c(15210),is=c(66196),Bp=c(81954),jp=c(19827),Hp=c(19833),Qp=c(46799);const Yp=["*",[["","slide-footer",""]]],qp=["*","[slide-footer]"];function Kp(o,n){if(1&o&&(e.j41(0,"h2",6),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.title," ")}}function Zp(o,n){if(1&o&&e.nrm(0,"img",7),2&o){const t=e.XpG(2);e.Y8G("src",t.image,e.B4B)("alt",t.alt)}}function Jp(o,n){if(1&o&&(e.j41(0,"div",1),e.DNE(1,Kp,2,1,"h2",2),e.j41(2,"article",3),e.SdG(3),e.k0s(),e.DNE(4,Zp,1,2,"img",4),e.j41(5,"div",5),e.SdG(6,1),e.k0s()()),2&o){const t=e.XpG();e.AVh("slide--expanded","expanded"===t.spacing),e.Y8G("@refresh",void 0),e.R7$(),e.Y8G("ngIf",t.title),e.R7$(3),e.Y8G("ngIf",t.image)}}let jo=(()=>{var o;class n{set shown(i){this._shown=i,this.initTrigger(),this.changeRef.markForCheck()}get shown(){return this._shown}constructor(i,_,s,a,r,u){this.store=i,this.actions=_,this.engineService=s,this.cameraService=a,this.engineRendererService=r,this.changeRef=u,this.alt="",this.spacing="compact",this.exitEnabled=!0,this.triggerDelay=300,this.triggerComplete=new e.bkB,this._shown=!1,this.ngUnsubscribe=new $.B}ngOnInit(){}ngAfterViewInit(){this.initTrigger()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initTrigger(){if(this.ngUnsubscribe.next(),this.shown&&this.trigger){const i=this.resetCamera(),_=this.store.selectSnapshot(m.Pf.getCanTouch);(function Dp(o,n,t,i,_,s){switch(o){case Jt.CameraZoom:return s?Z_(t,i):function Lp(o,n,t,i=1e3,_=.001){const s=t.getCanvas(),a=(0,Ve.R)(s,"wheel"),r=(0,Ve.R)(s,"touchmove").pipe((0,y.p)(f=>2===f.touches.length)),u=Z_(o,n,i,_);return(0,Ri.h)(a,r).pipe((0,Ut.Z)(()=>u))}(t,i,_);case Jt.CameraPan:return function kp(o,n,t,i=125){const _=t.getCanvas(),s=(0,Ve.R)(_,"mousemove").pipe((0,y.p)(u=>1===u.buttons&&u.shiftKey||2===u.buttons||4===u.buttons)),a=(0,Ve.R)(_,"touchmove").pipe((0,y.p)(u=>2===u.touches.length)),r=function xp(o,n,t=125){return Bo(o).pipe((0,En.Z)(es(n)),(0,Ue.T)(()=>es(n)),(0,Be.B)(t),(0,pi.J)(),(0,Ue.T)(([i,_])=>function zp(o,n){const _=ts(o.camera),s=ts(n.camera),a=ei.create();ei.sub(a,_,s);const r=a.reduce((f,P)=>f+P),u=n.zoom-o.zoom;return(0!==u||0!==r)&&Math.abs(r)<1&&Math.abs(u)<.001}(i,_)),(0,y.p)(i=>i))}(o,n,i);return(0,Ri.h)(s,a).pipe((0,Ut.Z)(()=>r))}(t,i,_);case Jt.CameraRotate:return s?J_(t,i):function $p(o,n,t,i,_=1e3){const s=i.getCanvas(),a=(0,Ve.R)(s,"mousemove").pipe((0,y.p)(f=>1===f.buttons)),r=(0,Ve.R)(s,"touchmove").pipe((0,y.p)(f=>1===f.touches.length)),u=J_(n,t,_);return(0,Ri.h)(a,r).pipe((0,Ut.Z)(()=>u),(0,y.p)(()=>"rotate"===o.selectSnapshot(Up.x.getPanMode)),(0,Be.B)(125))}(n,t,i,_);case Jt.NodeSelection:return function Gp(o){return o.select(di.z.getCheckedNodes).pipe((0,pi.J)(),(0,y.p)(([,n])=>n.length>0))}(n)}})(this.trigger,this.store,this.engineService,this.cameraService,this.engineRendererService,_).pipe(function Fp(o){return(0,Xp.N)((n,t)=>{let i=!1;const _=(0,is._)(t,()=>{_?.unsubscribe(),i=!0},jp.l);(0,Bp.Tg)(o).subscribe(_),n.subscribe((0,is._)(t,s=>i&&t.next(s)))})}(i),(0,Hp.c)(this.triggerDelay),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.triggerComplete.next()})}}resetCamera(){const _=this.store.selectSnapshot(b.N.getSelectedChapter)?.camera?.location;return(0,R.isNil)(_)?(0,vi.of)(void 0):this.store.dispatch(new zn.Ih(_,!0)).pipe((0,Ut.Z)(()=>this.actions.pipe((0,l.xi)(zn.Nz))),(0,ut.s)(1))}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(l.il),e.rXU(l.En),e.rXU(Pi.y),e.rXU(Pp.j),e.rXU(Qp.z),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-tour-slide"]],inputs:{title:"title",image:"image",alt:"alt",spacing:"spacing",shown:"shown",exitEnabled:"exitEnabled",trigger:"trigger",triggerDelay:"triggerDelay"},outputs:{triggerComplete:"triggerComplete"},ngContentSelectors:qp,decls:1,vars:1,consts:[["class","slide",3,"slide--expanded",4,"ngIf"],[1,"slide"],["class","slide__title",4,"ngIf"],[1,"slide__content"],["class","slide__image",3,"src","alt",4,"ngIf"],[1,"slide__footer"],[1,"slide__title"],[1,"slide__image",3,"src","alt"]],template:function(i,_){1&i&&(e.NAR(Yp),e.DNE(0,Jp,7,5,"div",0)),2&i&&e.Y8G("ngIf",_.shown)},dependencies:[p.bT],styles:[".slide[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;max-width:500px}.slide__title[_ngcontent-%COMP%]{margin-bottom:16px;font-weight:600;font-size:1.125rem;line-height:1.75rem}.slide__content[_ngcontent-%COMP%]{margin-bottom:16px;font-size:1rem;line-height:1.5rem;line-height:1.5em;max-width:100%}.slide__image[_ngcontent-%COMP%]{margin:24px auto;max-width:100%;min-height:1px}.slide__footer[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;font-weight:500;display:flex;flex-direction:row;align-items:center;justify-content:center;max-width:100%}.slide--expanded[_ngcontent-%COMP%]   .slide__title[_ngcontent-%COMP%]{margin:16px}.slide--expanded[_ngcontent-%COMP%]   .slide__content[_ngcontent-%COMP%]{margin:48px}.slide--expanded[_ngcontent-%COMP%]   .slide__image[_ngcontent-%COMP%]{margin:48px auto}@media (max-width: 768px){.slide[_ngcontent-%COMP%]{max-width:400px}.slide__image[_ngcontent-%COMP%]{margin:16px}.slide__title[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem;margin-bottom:12px}.slide__content[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;margin-bottom:12px}.slide__footer[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}}@media (max-width: 640px){.slide[_ngcontent-%COMP%]{max-width:320px}}@media (max-width: 480px){.slide[_ngcontent-%COMP%]{max-width:240px}.slide__title[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;margin-bottom:8px}.slide__content[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;margin-bottom:8px}.slide__image[_ngcontent-%COMP%]{margin:4px auto}.slide__footer[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}}@media (max-width: 320px){.slide[_ngcontent-%COMP%]{max-width:160px}}"],data:{animation:[(0,D.hZ)("refresh",[(0,D.kY)(":enter",[(0,D.sM)(K_.O.slideTransition,{params:{duration:500,from:100,to:0}})])])]},changeDetection:0}),n})();const eu=["*"];function tu(o,n){1&o&&(e.j41(0,"div",1)(1,"div",2),e.SdG(2),e.k0s()())}let Fo=(()=>{var o;class n{set shown(i){this._shown=i,this.setSelectedSlide(0)}get shown(){return this._shown}constructor(i){this.changeRef=i,this.selectedSlideIndex=0,this._shown=!1,this.ngUnsubscribe=new $.B}ngOnInit(){}ngAfterViewInit(){this.initListeners(),setTimeout(()=>{this.setSlideShown(this.selectedSlideIndex)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}goToPrevSlide(){this.setSelectedSlide(this.selectedSlideIndex-1)}goToNextSlide(){this.setSelectedSlide(this.selectedSlideIndex+1)}setSelectedSlide(i){if(this.selectedSlideIndex=i,this.slides){const s=Math.max(0,Math.min(this.slides.length-1,i));this.selectedSlideIndex=s}this.setSlideShown(this.selectedSlideIndex)}initListeners(){(0,Ri.h)(...this.slides.map(i=>i.triggerComplete.asObservable())).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.goToNextSlide()})}setSlideShown(i){this.slides&&this.slides.forEach((_,s)=>{_.shown=s===i}),this.changeRef.markForCheck()}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-tour-page"]],contentQueries:function(i,_,s){if(1&i&&e.wni(s,jo,4),2&i){let a;e.mGM(a=e.lsd())&&(_.slides=a)}},inputs:{shown:"shown"},ngContentSelectors:eu,decls:1,vars:1,consts:[["class","page",4,"ngIf"],[1,"page"],[1,"page__contents"]],template:function(i,_){1&i&&(e.NAR(),e.DNE(0,tu,3,0,"div",0)),2&i&&e.Y8G("ngIf",_.shown)},dependencies:[p.bT],styles:[".page[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.page__contents[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem}@media (max-width: 768px){.page__contents[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}}@media (max-width: 480px){.page__contents[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}}"],changeDetection:0}),n})();var On;const _u=o=>({"pages--opaquer":o});function su(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",1)(1,"button",2),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleExitClick())}),e.nrm(2,"app-icon",3),e.k0s(),e.j41(3,"div",4),e.SdG(4),e.k0s(),e.j41(5,"div",5)(6,"button",6),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handlePrevClick())}),e.nrm(7,"app-icon",7),e.k0s(),e.j41(8,"div",8),e.EFF(9),e.k0s(),e.j41(10,"button",9),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleNextClick())}),e.nrm(11,"app-icon",10),e.k0s()()()}if(2&o){const t=n.$implicit;e.Y8G("ngClass",e.eq3(7,_u,t.pageIndex==t.pageSize-1)),e.R7$(6),e.Y8G("disabled",t.pageIndex<1),e.BMQ("tabindex",t.pageIndex<1?-1:0),e.R7$(3),e.Lme("",t.pageIndex+1," / ",t.pageSize,""),e.R7$(),e.Y8G("disabled",t.pageIndex===t.pageSize-1),e.BMQ("tabindex",t.pageIndex===t.pageSize-1?-1:0)}}class lo{constructor(n,t){this.store=n,this.changeRef=t,this.ngUnsubscribe=new $.B}ngOnInit(){}ngAfterViewInit(){this.tutorial$.pipe((0,g.Q)(this.ngUnsubscribe),(0,y.p)(n=>null!=n&&n.pageSize>0)).subscribe(n=>{this.handleTutorialPages(n)}),this.store.dispatch(new B.B.SetTutorial({pageSize:this.pages.length,pageIndex:0}))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handlePrevClick(){this.store.dispatch(new B.B.TutorialPrevious)}handleNextClick(){this.store.dispatch(new B.B.TutorialNext)}handleExitClick(){this.store.dispatch(new B.B.ToggleWindow(Kt.U.Tutorial,!1))}handleTutorialPages(n){this.pages.forEach((t,i)=>{t.shown=i===n.pageIndex}),this.changeRef.markForCheck()}}(On=lo).\u0275fac=function(n){return new(n||On)(e.rXU(l.il),e.rXU(e.gRc))},On.\u0275cmp=e.VBU({type:On,selectors:[["app-view-tour-pages"]],contentQueries:function(n,t,i){if(1&n&&e.wni(i,Fo,4),2&n){let _;e.mGM(_=e.lsd())&&(t.pages=_)}},ngContentSelectors:["*"],decls:2,vars:3,consts:()=>{let o,n,t,i,_,s;return o=$localize`:␟8a8cd4cbe664d8683580bdf9b28edb0bdac8acf9␟227449910725820734:Exit Tutorial`,n=$localize`:␟8a8cd4cbe664d8683580bdf9b28edb0bdac8acf9␟227449910725820734:Exit Tutorial`,t=$localize`:␟06547848178fce0f19047d0d07c2df326650718b␟2765563396217571020:Previous Tutorial Step`,i=$localize`:␟06547848178fce0f19047d0d07c2df326650718b␟2765563396217571020:Previous Tutorial Step`,_=$localize`:␟a165a2589725552dea3ac6e98be73c72f5ae03a0␟1978646816781669814:Next Tutorial Step`,s=$localize`:␟4ff3dad8ce52dc71e7b3158b1b20b5039959dabf␟2249392320351386178: Next Tutorial Step`,[["class","pages",3,"ngClass",4,"ngIf"],[1,"pages",3,"ngClass"],["app-view-button","","buttonShape","rounded","buttonTheme","dark-gray-fill","buttonSize","small","aria-label",o,"matTooltip",n,"matTooltipPosition","right","data-test","tutorialExitButton",1,"pages__close",3,"click"],["icon","times"],[1,"pages__contents"],[1,"pages__footer"],["app-view-button","","buttonShape","rounded","buttonTheme","dark-gray-fill","aria-label",t,"matTooltip",i,"matTooltipPosition","left","data-test","tutorialPreviousButton",1,"pages__nav",3,"click","disabled"],["icon","angle-left","appLogicalDir",""],[1,"mx-8"],["app-view-button","","buttonShape","rounded","buttonTheme","dark-gray-fill","aria-label",_,"matTooltip",s,"matTooltipPosition","right","data-test","tutorialNextButton",1,"pages__nav",3,"click","disabled"],["icon","angle-right","appLogicalDir",""]]},template:function(n,t){1&n&&(e.NAR(),e.DNE(0,su,12,9,"div",0),e.nI1(1,"async")),2&n&&e.Y8G("ngIf",e.bMT(1,1,t.tutorial$))},dependencies:[J.ri,p.YU,p.bT,Ot.e,q.R,ye.oV,p.Jj],styles:[".pages[_ngcontent-%COMP%]{pointer-events:none;display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px auto 48px;max-width:600px;position:relative;background:#101823cc;border-radius:16px;padding:24px 28px 20px}.pages--opaquer[_ngcontent-%COMP%]{background:#101823e6}.pages__footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;font-size:1rem;line-height:1.5rem;font-weight:500}.pages__close[_ngcontent-%COMP%]{z-index:1;position:absolute;top:8px;inset-inline-end:8px;align-self:flex-end;display:flex;align-items:center;justify-content:center}.pages__contents[_ngcontent-%COMP%]{padding:16px 0}@media (max-width: 768px){.pages[_ngcontent-%COMP%]{margin:16px 12% 48px;border-radius:10px;padding:18px 22px 14px}.pages__contents[_ngcontent-%COMP%]{padding:24px 0}.pages__footer[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.pages__nav[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem}}@media (max-width: 480px){.pages[_ngcontent-%COMP%]{margin:12px 10% 48px;border-radius:8px;padding:24px 20px 12px}.pages__footer[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}.pages__nav[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.75rem}}"],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(m.Pf.getTutorial),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],lo.prototype,"tutorial$",void 0);let ns=(()=>{var o;class n{constructor(){}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-tour-success"]],inputs:{inline:"inline"},decls:2,vars:2,consts:[[1,"view-tour-success"],["icon","check",1,"view-tour-success__icon"]],template:function(i,_){1&i&&(e.j41(0,"div",0),e.nrm(1,"app-icon",1),e.k0s()),2&i&&e.AVh("view-tour-success--inline",_.inline)},dependencies:[q.R],styles:[".view-tour-success{width:52px;height:52px;display:flex;background-color:#1bbc66;border-radius:50%;justify-content:center;align-items:center}.view-tour-success__icon{font-size:2.25rem;line-height:2.5rem;color:#fff}.view-tour-success--inline{display:inline-flex;width:32px;height:32px}.view-tour-success--inline .view-tour-success__icon{font-size:1.125rem;line-height:1.75rem}@media (max-width: 768px){.view-tour-success{width:36px;height:36px}.view-tour-success__icon{font-size:1.25rem;line-height:1.75rem}.view-tour-success--inline{display:inline-flex;width:24px;height:24px}.view-tour-success--inline .view-tour-success__icon{font-size:.75rem;line-height:1rem}}\n"],encapsulation:2,changeDetection:0}),n})();function au(o,n){if(1&o&&e.nrm(0,"app-icon",5),2&o){const t=e.XpG(2);e.Y8G("icon",t.icon)}}function ru(o,n){if(1&o&&(e.j41(0,"span",6),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.JRh(t.label)}}function lu(o,n){if(1&o&&(e.qex(0),e.DNE(1,au,1,1,"app-icon",3)(2,ru,2,1,"span",4),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.icon),e.R7$(),e.Y8G("ngIf",t.icon)}}function cu(o,n){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.label," ")}}let du=(()=>{var o;class n{constructor(){}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-tour-tip-button"]],inputs:{label:"label",icon:"icon"},decls:3,vars:2,consts:[[1,"view-tour-tip-button","my-1","mx-1",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"icon",4,"ngIf"],["class","sr-only",4,"ngIf"],[3,"icon"],[1,"sr-only"]],template:function(i,_){1&i&&(e.j41(0,"div",0),e.DNE(1,lu,3,2,"ng-container",1)(2,cu,2,1,"span",2),e.k0s()),2&i&&(e.Y8G("ngSwitch",!!_.icon),e.R7$(),e.Y8G("ngSwitchCase",!0))},dependencies:[p.bT,p.ux,p.e1,p.fG,q.R],styles:[".view-tour-tip-button{display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;color:#131c2a;background-color:#fff;border-radius:2px;font-weight:700;padding:4px;width:24px;height:24px}@media (max-width: 768px){.view-tour-tip-button{width:20px;height:20px}}\n"],encapsulation:2,changeDetection:0}),n})();var wn;function hu(o,n){1&o&&(e.qex(0),e.pXf(1,14),e.bVm())}function gu(o,n){1&o&&(e.qex(0),e.pXf(1,15),e.bVm())}class Ho{constructor(n){this.viewService=n,this.triggers=Jt,this.videoTutorialSources=Wo}ngOnInit(){this.captureScroll$=this.scrollMode$.pipe((0,Ue.T)(n=>n===Vp.M.Capture))}handleStartClick(){this.viewService.toggleTutorial(!1)}}(wn=Ho).\u0275fac=function(n){return new(n||wn)(e.rXU(Z.z))},wn.\u0275cmp=e.VBU({type:wn,selectors:[["app-view-tour-desktop"]],decls:65,vars:12,consts:()=>{let o,n,t,i,_,s,a,r,u,f,P,x,z,Ge,me,yt,oi,_i,si,ai,ri,li,Rn,Vn;return o=$localize`:␟20058274f3bdffd2cf7023d350d44170f6ff7a12␟1050269006235116171:Rotate`,n=$localize`:␟129a2224e1f9d19eb5e11e2a07fe10a785556484␟8515973702474791807:up`,t=$localize`:␟b5fbc7c7f007dd53b2318525bb7ff8b0376c9e37␟1301930865667956193:down`,i=$localize`:␟478c0bf6552f7226e27bb5b57b8209a040ded2c6␟7449548947549758066:left`,_=$localize`:␟4a379a71f932b31ecae93a9232f818eef02ece10␟6520868693399199322:right`,s=$localize`:␟e76cd6dbaa898f85934f363fef654b29e44d004b␟6421460271971606186:Zoom`,a=$localize`:␟7cd14ceae63b4aba71ab7935638f5d3b799f4f4b␟9128067536654850026:Pan`,r=$localize`:␟eb55d5cbcf6e2a42868bede1caa64be0f1f1e435␟5702628055979003671:Explore the Anatomy`,u=$localize`:␟0cfd714a023e7dddfab02ebbaffddf8b3b7dd988␟1831081178261551807: Click and drag the model to change the viewing angle. `,f=$localize`:␟50f7d911f4c3caa51c033edb36261331cb756e7f␟7923762190272525956:Tip:`,P=$localize`:␟c71aa1ed54f03bfd28210dccb6f900b4962ea522␟114624992018654005:You can also use the arrow keys`,x=$localize`:␟8b5e6e1e74d302bbdd638500b071bb0859f3ab40␟5411319251728756176:to rotate.`,z=$localize`:␟50f7d911f4c3caa51c033edb36261331cb756e7f␟7923762190272525956:Tip:`,Ge=$localize`:␟a6a4d760af95bd17149d92758784333d288f02a4␟7584501271397744885:You can also use`,me=$localize`:␟5be36bcbbbee99ffb6ea5f40636c92334e7c3d37␟4307223492407933970:to zoom out.`,yt=$localize`:␟197d3f7bb3c4bdbe8c11eb56a4cebb7bc9b5880c␟2383075435551442269: Hold the shift key and drag to move the model's position. `,oi=$localize`:␟50f7d911f4c3caa51c033edb36261331cb756e7f␟7923762190272525956:Tip:`,_i=$localize`:␟7e72d30152be758594ce5a0257a4fc0ee19f94d5␟4528617795430260542:You can also use the`,si=$localize`:␟a6e5a9592abcd7af3cf72b5d4ba3a12a124208c7␟9056703775803925947:keys to pan.`,ai=$localize`:␟b9964d82e0ae5a31d53f6aef4fdaa996d15dce16␟1011814326808580654: Click on an individual part of the model to highlight anatomy. `,ri=$localize`:␟50f7d911f4c3caa51c033edb36261331cb756e7f␟7923762190272525956:Tip:`,li=$localize`:␟2949e52a456470cb255048c7e1e40b496934ed32␟962414889722492464: Double-click to zoom in on specific structures.`,Rn=$localize`:␟c4673f13cb56aec8867cfdce431a5c1f283895f6␟6288669230125842319: Hold the control key and scroll up and down to zoom in or out. `,Vn=$localize`:␟dfdbec5eab67c07d82c394952e19cca3652719ea␟6750824053364243866: Scroll up and down to zoom in or out. `,[u,f,P,x,z,Ge,me,yt,oi,_i,si,ai,ri,li,Rn,Vn,["title",o,3,"trigger"],[1,"flex","justify-start","items-center"],[1,"mr-2",3,"inline"],[1,"font-semibold"],["icon","caret-up","label",n],["icon","caret-down","label",t],["appLogicalDir","","icon","caret-left","label",i],["appLogicalDir","","icon","caret-right","label",_],["title",s,3,"trigger","ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["label","+"],["label","-"],["title",a,3,"trigger"],["label","W"],["label","A"],["label","S"],["label","D"],["title",r,3,"trigger"]]},template:function(n,t){1&n&&(e.j41(0,"app-view-tour-pages")(1,"app-view-tour-page")(2,"app-view-tour-slide",16),e.pXf(3,0),e.k0s(),e.j41(4,"app-view-tour-slide")(5,"div",17)(6,"div"),e.nrm(7,"app-view-tour-success",18),e.j41(8,"strong",19),e.pXf(9,1),e.k0s(),e.qex(10),e.pXf(11,2),e.bVm(),e.nrm(12,"app-view-tour-tip-button",20)(13,"app-view-tour-tip-button",21)(14,"app-view-tour-tip-button",22)(15,"app-view-tour-tip-button",23),e.qex(16),e.pXf(17,3),e.bVm(),e.k0s()()()(),e.j41(18,"app-view-tour-page")(19,"app-view-tour-slide",24),e.nI1(20,"async"),e.DNE(21,hu,2,0,"ng-container",25)(22,gu,2,0,"ng-container",26),e.k0s(),e.j41(23,"app-view-tour-slide")(24,"div",17)(25,"div"),e.nrm(26,"app-view-tour-success",18),e.j41(27,"strong",19),e.pXf(28,4),e.k0s(),e.qex(29),e.pXf(30,5),e.bVm(),e.nrm(31,"app-view-tour-tip-button",27),e.eu8(32),e.EFF(33,"to zoom in and "),e.nrm(34,"app-view-tour-tip-button",28),e.qex(35),e.pXf(36,6),e.bVm(),e.k0s()()()(),e.j41(37,"app-view-tour-page")(38,"app-view-tour-slide",29),e.pXf(39,7),e.k0s(),e.j41(40,"app-view-tour-slide")(41,"div",17)(42,"div"),e.nrm(43,"app-view-tour-success",18),e.j41(44,"strong",19),e.pXf(45,8),e.k0s(),e.qex(46),e.pXf(47,9),e.bVm(),e.nrm(48,"app-view-tour-tip-button",30)(49,"app-view-tour-tip-button",31)(50,"app-view-tour-tip-button",32)(51,"app-view-tour-tip-button",33),e.qex(52),e.pXf(53,10),e.bVm(),e.k0s()()()(),e.j41(54,"app-view-tour-page")(55,"app-view-tour-slide",34),e.pXf(56,11),e.k0s(),e.j41(57,"app-view-tour-slide")(58,"div",17)(59,"div"),e.nrm(60,"app-view-tour-success",18),e.j41(61,"strong",19),e.pXf(62,12),e.k0s(),e.qex(63),e.pXf(64,13),e.bVm(),e.k0s()()()()()),2&n&&(e.R7$(2),e.Y8G("trigger",t.triggers.CameraRotate),e.R7$(5),e.Y8G("inline",!0),e.R7$(12),e.Y8G("trigger",t.triggers.CameraZoom)("ngSwitch",e.bMT(20,10,t.captureScroll$)),e.R7$(2),e.Y8G("ngSwitchCase",!1),e.R7$(5),e.Y8G("inline",!0),e.R7$(12),e.Y8G("trigger",t.triggers.CameraPan),e.R7$(5),e.Y8G("inline",!0),e.R7$(12),e.Y8G("trigger",t.triggers.NodeSelection),e.R7$(5),e.Y8G("inline",!0))},dependencies:[p.ux,p.e1,p.fG,Ot.e,Fo,lo,jo,ns,du,p.Jj],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(le.S.getScrollMode),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],Ho.prototype,"scrollMode$",void 0);let mu=(()=>{var o;class n{constructor(i){this.viewService=i,this.triggers=Jt,this.videoTutorialSources=Wo}handleStartClick(){this.viewService.toggleTutorial(!1)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(Z.z))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-tour-mobile"]],decls:27,vars:5,consts:()=>{let t,i,_,s,a,r,u,f,P,x;return t=$localize`:␟20058274f3bdffd2cf7023d350d44170f6ff7a12␟1050269006235116171:Rotate`,i=$localize`:␟e76cd6dbaa898f85934f363fef654b29e44d004b␟6421460271971606186:Zoom`,_=$localize`:␟7cd14ceae63b4aba71ab7935638f5d3b799f4f4b␟9128067536654850026:Pan`,s=$localize`:␟eb55d5cbcf6e2a42868bede1caa64be0f1f1e435␟5702628055979003671:Explore the Anatomy`,a=$localize`:␟40fea76a56245ebbead6177bc3d17ae5ec40a165␟2280443087469838323: Tap and drag with one finger to change the viewing angle. `,r=$localize`:␟8427d89e9a09d73465919535774a238eb9d421db␟2729825529782328186: Pinch with two fingers to zoom in or out. `,u=$localize`:␟14defb0441cab2a9b33483931a54f51867c652e9␟6006726473932808920: Use two fingers to adjust the model's position. `,f=$localize`:␟1a9195f9922538bdf4a4aff64ca479c285355cfe␟7928756420516267887: Tap on an individual part of the model to highlight anatomy. `,P=$localize`:␟50f7d911f4c3caa51c033edb36261331cb756e7f␟7923762190272525956:Tip:`,x=$localize`:␟646945605f8dced01098f9c393573c2a9b46a842␟5072295053569562541:Double-tap to zoom in on specific structures.`,[a,r,u,f,P,x,["title",t,3,"trigger"],["title",i,3,"trigger"],["title",_,3,"trigger"],["title",s,3,"trigger"],[1,"flex","justify-start","items-center"],[1,"mr-2",3,"inline"],[1,"font-semibold"]]},template:function(i,_){1&i&&(e.j41(0,"app-view-tour-pages")(1,"app-view-tour-page")(2,"app-view-tour-slide",6),e.pXf(3,0),e.k0s(),e.j41(4,"app-view-tour-slide"),e.nrm(5,"app-view-tour-success"),e.k0s()(),e.j41(6,"app-view-tour-page")(7,"app-view-tour-slide",7),e.pXf(8,1),e.k0s(),e.j41(9,"app-view-tour-slide"),e.nrm(10,"app-view-tour-success"),e.k0s()(),e.j41(11,"app-view-tour-page")(12,"app-view-tour-slide",8),e.pXf(13,2),e.k0s(),e.j41(14,"app-view-tour-slide"),e.nrm(15,"app-view-tour-success"),e.k0s()(),e.j41(16,"app-view-tour-page")(17,"app-view-tour-slide",9),e.pXf(18,3),e.k0s(),e.j41(19,"app-view-tour-slide")(20,"div",10)(21,"div"),e.nrm(22,"app-view-tour-success",11),e.j41(23,"strong",12),e.pXf(24,4),e.k0s(),e.qex(25),e.pXf(26,5),e.bVm(),e.k0s()()()()()),2&i&&(e.R7$(2),e.Y8G("trigger","camera-rotate"),e.R7$(5),e.Y8G("trigger",_.triggers.CameraZoom),e.R7$(5),e.Y8G("trigger",_.triggers.CameraPan),e.R7$(5),e.Y8G("trigger",_.triggers.NodeSelection),e.R7$(5),e.Y8G("inline",!0))},dependencies:[Fo,lo,jo,ns],changeDetection:0}),n})();var In,os=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},_s=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function Eu(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",6)(1,"h2",7),e.pXf(2,1),e.k0s(),e.j41(3,"p",8),e.qex(4),e.pXf(5,2),e.bVm(),e.nrm(6,"button",9),e.nI1(7,"async"),e.nI1(8,"async"),e.j41(9,"mat-menu",null,0)(11,"button",10),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleSelectInputModeClick(_.inputModes.Mouse))}),e.EFF(12),e.k0s(),e.j41(13,"button",10),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleSelectInputModeClick(_.inputModes.Touch))}),e.EFF(14),e.k0s()()(),e.j41(15,"div",11)(16,"button",12),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleExitClick())}),e.k0s(),e.j41(17,"button",13),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleStartClick())}),e.k0s()()()}if(2&o){const t=e.sdS(10),i=e.XpG();e.R7$(6),e.Y8G("compact",!0)("label",i.inputModesText[e.bMT(7,6,i.inputMode$)])("matMenuTriggerFor",t),e.BMQ("aria-label",i.inputModesText[e.bMT(8,8,i.inputMode$)]),e.R7$(6),e.SpI(" ",i.inputModesText[i.inputModes.Mouse]," "),e.R7$(2),e.SpI(" ",i.inputModesText[i.inputModes.Touch]," ")}}function fu(o,n){1&o&&e.nrm(0,"app-view-tour-mobile")}function Su(o,n){1&o&&e.nrm(0,"app-view-tour-desktop")}function Tu(o,n){if(1&o&&(e.j41(0,"div",14),e.nI1(1,"async"),e.DNE(2,fu,1,0,"app-view-tour-mobile",15)(3,Su,1,0,"app-view-tour-desktop",16),e.k0s()),2&o){const t=e.XpG();e.Y8G("ngSwitch",e.bMT(1,2,t.inputMode$)),e.R7$(2),e.Y8G("ngSwitchCase",t.inputModes.Touch)}}class co{constructor(n,t,i){this.store=n,this.viewService=t,this.storageService=i,this.inputModes=Di.A,this.inputModesText={[Di.A.Mouse]:$localize`mouse, trackpad, or keyboard`,[Di.A.Touch]:$localize`touchscreen`},this.tourStarted=!1,this.tourEnded=!1,this.ngUnsubscribe=new $.B}ngOnInit(){this.initListeners(),this.store.dispatch(new B.B.TutorialSeen(!0))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initListeners(){this.tutorial$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(({pageIndex:n,pageSize:t})=>{this.tourStarted=n>-1,this.tourEnded=n===t-1}),(0,Ve.R)(window,"keyup").pipe((0,y.p)(n=>"Escape"===n.key),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.exit()})}handleExitClick(){this.exit()}handleStartClick(){this.store.dispatch(new B.B.StartTutorial(!1))}handleSelectInputModeClick(n){this.store.dispatch(new B.B.SetInputMode(n))}exit(){this.viewService.toggleTutorial(!1)}}(In=co).\u0275fac=function(n){return new(n||In)(e.rXU(l.il),e.rXU(Z.z),e.rXU(oo.n$))},In.\u0275cmp=e.VBU({type:In,selectors:[["app-view-tour"]],decls:3,vars:5,consts:()=>{let o,n,t,i,_,s,a;return o=$localize`:␟b6d518ec10f5635af884c06c0ee31f0d4589e8a2␟580493549510248593:Getting Started Tutorial`,n=$localize`:␟329b57635013c51987214c5913ca7092ec9a41be␟6199587308275891980:No, Thanks.`,t=$localize`:␟329b57635013c51987214c5913ca7092ec9a41be␟6199587308275891980:No, Thanks.`,i=$localize`:␟6aec50f9ac99e43913886a863d03bbd06133aa94␟188529236849865957:Start Tutorial`,_=$localize`:␟6aec50f9ac99e43913886a863d03bbd06133aa94␟188529236849865957:Start Tutorial`,s=$localize`:␟486c6addfeb93356cab8bbb37310c8f61534e1f2␟9156212170228959929:Getting Started`,a=$localize`:␟80ef270109b95917aeaa29935ed0aeb1b5337627␟5246430719012249797:Welcome! This tutorial will teach you how to navigate and explore in 3D using your`,[["inputSelectionMenu","matMenu"],s,a,["role","dialog","aria-label",o,"cdkTrapFocus","",1,"tour"],["class","tour__intro",4,"ngIf"],["class","tour__contents",3,"ngSwitch",4,"ngIf"],[1,"tour__intro"],[1,"tour__title"],[1,"tour__welcome"],["app-view-rounded-button","","buttonType","outline","icon","chevron-down","iconPlacement","right",1,"tour__input-selection","text-small",3,"compact","label","matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"tour__footer"],["app-view-rounded-button","","buttonType","outline","label",n,"aria-label",t,"data-test","tutorialExitButton",1,"mr-3",3,"click"],["app-view-rounded-button","","buttonType","solid","label",i,"aria-label",_,"data-test","tutorialStartButton",1,"ml-3",3,"click"],[1,"tour__contents",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]]},template:function(n,t){1&n&&(e.j41(0,"div",3),e.DNE(1,Eu,18,10,"div",4)(2,Tu,4,4,"div",5),e.k0s()),2&n&&(e.AVh("tour--started",t.tourStarted),e.Y8G("@refresh",void 0),e.R7$(),e.Y8G("ngIf",!t.tourStarted),e.R7$(),e.Y8G("ngIf",t.tourStarted))},dependencies:[L.kB,p.bT,p.ux,p.e1,p.fG,ke.kk,ke.fb,ke.Cp,Rp,Ho,mu,p.Jj],styles:[".tour[_ngcontent-%COMP%]{color:#fff;position:fixed;inset:0;z-index:100;pointer-events:none;display:flex;flex-direction:column;align-items:center;overflow:auto}.tour__title[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.75rem}.tour__welcome[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;margin:16px auto 32px}.tour__intro[_ngcontent-%COMP%]{background:#101823e6;border-radius:16px;margin:auto;padding:28px 32px;text-align:center;max-width:560px}.tour__input-selection[_ngcontent-%COMP%]{margin:0 8px;vertical-align:middle}.tour__header[_ngcontent-%COMP%]{flex:none;align-self:flex-end;justify-self:flex-start;margin:24px}.tour__contents[_ngcontent-%COMP%]{flex:auto;display:flex;flex-direction:column;justify-content:flex-end;width:100%}.tour__footer[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem;display:flex;flex-direction:row;align-items:center;justify-content:center}.tour__nav-arrow[_ngcontent-%COMP%]{font-size:1.875rem;line-height:2.25rem;cursor:pointer}.tour--ended[_ngcontent-%COMP%]   .tour__contents[_ngcontent-%COMP%]{justify-content:center}@media (max-width: 768px){.tour__intro[_ngcontent-%COMP%]{border-radius:12px;padding:20px 24px;margin:auto 12%;max-width:100%}.tour__intro__title[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}.tour__intro__content[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;max-width:80%}.tour__header[_ngcontent-%COMP%]{margin:12px;font-size:.875rem;line-height:1.25rem}.tour__footer[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.tour__nav-arrow[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.75rem}}@media (max-width: 480px){.tour__intro[_ngcontent-%COMP%]{border-radius:8px;padding:16px 20px;margin:auto 10%}.tour__intro__title[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.tour__intro__content[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;margin:12px auto 16px}.tour__header[_ngcontent-%COMP%]{margin:12px;font-size:.75rem;line-height:1rem}.tour__footer[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}.tour__nav-arrow[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem}}"],data:{animation:[(0,D.hZ)("refresh",[(0,D.kY)(":enter",[(0,D.sM)(K_.O.slideTransition,{params:{duration:500,from:100,to:0}})])])]},changeDetection:0}),os([(0,l.l6)(m.Pf.getTutorial),_s("design:type",d.c)],co.prototype,"tutorial$",void 0),os([(0,l.l6)(m.Pf.getInputMode),_s("design:type",d.c)],co.prototype,"inputMode$",void 0);var Cn,ss=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},as=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function bu(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"button",7),e.nI1(2,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleUndoClick())}),e.nrm(3,"app-icon",8),e.k0s(),e.j41(4,"button",9),e.nI1(5,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleRedoClick())}),e.nrm(6,"app-icon",10),e.k0s(),e.bVm()}if(2&o){const t=e.XpG(2);e.R7$(),e.Y8G("disabled",!1===e.bMT(2,6,t.canUndo$))("matTooltipPosition",t.tooltipPosition),e.R7$(2),e.Y8G("custom",!0),e.R7$(),e.Y8G("disabled",!1===e.bMT(5,8,t.canRedo$))("matTooltipPosition",t.tooltipPosition),e.R7$(2),e.Y8G("custom",!0)}}function vu(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",2)(1,"app-pillbox",3),e.DNE(2,bu,7,10,"ng-container",4),e.j41(3,"button",5),e.nI1(4,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleResetClick())}),e.j41(5,"span",6),e.pXf(6,0),e.k0s()()()()}if(2&o){const t=e.XpG();e.Y8G("@show",void 0),e.R7$(2),e.Y8G("ngIf","full"===t.layout),e.R7$(),e.Y8G("disabled",!1===e.bMT(4,4,t.canUndo$))("matTooltipPosition",t.tooltipPosition)}}class po{constructor(n,t){this.viewService=n,this.directionality=t,this.layout="full",this.tooltipPosition="ltr"===this.directionality.value?"right":"left"}handleUndoClick(){this.viewService.undo()}handleRedoClick(){this.viewService.redo()}handleResetClick(){this.viewService.resetChapter()}}(Cn=po).\u0275fac=function(n){return new(n||Cn)(e.rXU(Z.z),e.rXU(He.dS))},Cn.\u0275cmp=e.VBU({type:Cn,selectors:[["app-view-undo"]],inputs:{layout:"layout"},decls:2,vars:3,consts:()=>{let o,n,t,i,_,s,a;return o=$localize`:␟5d09ab375cce1f50ab075f60a2f4e3c2aa39ed46␟5271497798766647376:Undo Tools`,n=$localize`:␟06c663bf1474713f57551123a46b34318543b67d␟7808756054397155068:Reset`,t=$localize`:␟06c663bf1474713f57551123a46b34318543b67d␟7808756054397155068:Reset`,i=$localize`:␟4f26c54d5c3edadf92756d7d3ce466dde1f01e2a␟5775346636203685655:Undo`,_=$localize`:␟4f26c54d5c3edadf92756d7d3ce466dde1f01e2a␟5775346636203685655:Undo`,s=$localize`:␟91b3b95ffa91d6355be5d7b3d48dfa32f3118bfa␟4221042196936324014:Redo`,a=$localize`:␟91b3b95ffa91d6355be5d7b3d48dfa32f3118bfa␟4221042196936324014:Redo`,[t,["class","view-undo",4,"ngIf"],[1,"view-undo"],["orientation","vertical","role","group","aria-label",o,"appPreventFadeout",""],[4,"ngIf"],["app-view-button","","buttonSize","small","buttonShape","rounded","data-test","reset-btn","matTooltip",n,3,"click","disabled","matTooltipPosition"],[1,"font-semibold","text-2xs"],["app-view-button","","buttonSize","small","data-test","undo-btn","icon","undo","aria-label",i,"matTooltip",_,3,"click","disabled","matTooltipPosition"],["icon","undo","appLogicalDir","",3,"custom"],["app-view-button","","buttonSize","small","data-test","redo-btn","aria-label",s,"matTooltip",a,"icon","redo",3,"click","disabled","matTooltipPosition"],["icon","redo","appLogicalDir","",3,"custom"]]},template:function(n,t){1&n&&(e.DNE(0,vu,7,6,"div",1),e.nI1(1,"async")),2&n&&e.Y8G("ngIf",e.bMT(1,1,t.canUndo$))},dependencies:[J.ri,p.bT,Ei.s,Ot.e,q.R,ye.oV,Vt.O,p.Jj],styles:["[_nghost-%COMP%]{pointer-events:none}"],data:{animation:[(0,D.hZ)("show",[(0,D.kY)(":enter",(0,D.K2)([(0,D.iF)({transform:"translateX(-100%)",opacity:0}),(0,D.i0)("150ms ease-in-out",(0,D.iF)({transform:"translateX(0%)",opacity:1}))]))])]},changeDetection:0}),ss([(0,l.l6)(ao.o.canUndo),as("design:type",d.c)],po.prototype,"canUndo$",void 0),ss([(0,l.l6)(ao.o.canRedo),as("design:type",d.c)],po.prototype,"canRedo$",void 0);var rs=c(38399),Ou=c(15152),ls=c(9592),cs=c(15810),Qo=c(22083),Wt=c(55671),ds=c(42482),wu=c(4951),ps=c(82323),ti=c(46107);const Iu=["textRef"],Cu=o=>({"whiteboard-label__label--active":o});function Mu(o,n){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",4),e.bIt("cdkDragMoved",function(_){e.eBV(t);const s=e.XpG();return e.Njj(s.dragMoved(_,"corner1"))}),e.k0s(),e.j41(2,"div",5),e.bIt("cdkDragMoved",function(_){e.eBV(t);const s=e.XpG();return e.Njj(s.dragMoved(_,"corner2"))}),e.k0s(),e.j41(3,"div",6),e.bIt("cdkDragMoved",function(_){e.eBV(t);const s=e.XpG();return e.Njj(s.dragMoved(_,"corner3"))}),e.k0s(),e.j41(4,"div",7),e.bIt("cdkDragMoved",function(_){e.eBV(t);const s=e.XpG();return e.Njj(s.dragMoved(_,"corner4"))}),e.k0s(),e.j41(5,"div",8),e.bIt("cdkDragMoved",function(_){e.eBV(t);const s=e.XpG();return e.Njj(s.translateHandleMoved(_))}),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("cdkDragFreeDragPosition",t.dragHandles.corner1),e.R7$(),e.Y8G("cdkDragFreeDragPosition",t.dragHandles.corner2),e.R7$(),e.Y8G("cdkDragFreeDragPosition",t.dragHandles.corner3),e.R7$(),e.Y8G("cdkDragFreeDragPosition",t.dragHandles.corner4),e.R7$(),e.Y8G("cdkDragFreeDragPosition",t.dragHandles.translate)}}let yu=(()=>{var o;class n{get id(){return this._id}set id(i){this._id=i,this.initialized=!1}set color(i){this.renderer.setStyle(this.textRef.nativeElement,"color",i)}set exporting(i){i&&(this.active=!1,this.labelActive.next(void 0))}set size(i){this.renderer.setStyle(this.textRef.nativeElement,"font-size",`${i}px`)}constructor(i,_,s,a){this.store=i,this.changeDetectorRef=_,this.renderer=s,this.localeId=a,this.active=!0,this.initialized=!1,this.labelActive=new e.bkB,this.labelEmpty=new e.bkB,this.dragHandles={translate:{x:0,y:0},corner1:{x:0,y:0},corner2:{x:0,y:0},corner3:{x:0,y:0},corner4:{x:0,y:0}},this.handleCoords={translate:{x:0,y:0},corner1:{x:0,y:0},corner2:{x:0,y:0},corner3:{x:0,y:0},corner4:{x:0,y:0}},this.textareaTransform={x:0,y:0,width:110,height:40},this.ngUnsubscribe=new $.B,this.handleDocumentBackspace=r=>{const{activeElement:u}=this.textRef.nativeElement;"Backspace"===r.key&&this.active&&!u&&this.deleteLabel()},this.handleTextboxMouseDown=r=>{this.active=!0,this.labelActive.next(this.id),this.refreshHandles()},this.handleDocumentMouseDown=r=>{const u=r.target.className.includes("view-whiteboard__canvas"),f=r.target.className.includes("whiteboard-label__label"),P=r.target.dataset.id===this.id;this.isLabelEmpty()&&!P&&this.initialized?this.deleteLabel():(u||f&&!P)&&(this.active=!1,this.changeDetectorRef.markForCheck())},this.handleTextKeyDown=r=>{if(r.stopPropagation(),this.isLabelEmpty()&&"Backspace"===r.key)return void this.deleteLabel();const u=this.textRef.nativeElement.scrollHeight,{corner1:f,corner3:P,corner4:x}=this.handleCoords,z=f.y+u;this.handleCoords.corner3={...P,y:z},this.handleCoords.corner4={...x,y:z},this.dragHandles.corner3={...this.handleCoords.corner3},this.dragHandles.corner4={...this.handleCoords.corner4},this.updateTextarea(),this.changeDetectorRef.markForCheck()},this.dir=(0,k_.NS)(this.localeId).direction}ngOnInit(){this.initHandles(),this.initInteractionListeners(),this.initStateListeners(),setTimeout(()=>{this.textRef.nativeElement.focus(),this.initialized=!0})}ngOnDestroy(){this.textRef.nativeElement.removeEventListener("keydown",this.handleTextKeyDown),this.textRef.nativeElement.removeEventListener("mousedown",this.handleTextboxMouseDown),this.mouseDownListener(),this.backspaceListener(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initHandles(){this.textareaTransform.x=this.initialPos.x,this.textareaTransform.y=this.initialPos.y;const{x:i,y:_,width:s,height:a}=this.textareaTransform;this.dragHandles.corner1={x:i,y:_},this.dragHandles.corner2={x:i+s,y:_},this.dragHandles.corner3={x:i+s,y:_+a},this.dragHandles.corner4={x:i,y:_+a},this.dragHandles.translate={x:i+s/2,y:_+-10},this.handleCoords.corner1={...this.dragHandles.corner1},this.handleCoords.corner2={...this.dragHandles.corner2},this.handleCoords.corner3={...this.dragHandles.corner3},this.handleCoords.corner4={...this.dragHandles.corner4},this.handleCoords.translate={...this.dragHandles.translate},this.updateTextarea()}initStateListeners(){this.store.select(m.Pf.getWhiteboardAnnotateMode).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(i=>{i!==Wt.D.Text&&(this.active=!1,this.labelActive.next(void 0),this.changeDetectorRef.markForCheck())})}initInteractionListeners(){this.mouseDownListener=this.renderer.listen("document","mousedown",this.handleDocumentMouseDown),this.backspaceListener=this.renderer.listen("document","keydown",this.handleDocumentBackspace),this.textRef.nativeElement.addEventListener("mousedown",this.handleTextboxMouseDown),this.textRef.nativeElement.addEventListener("keydown",this.handleTextKeyDown)}refreshHandles(){this.dragHandles.corner1={...this.handleCoords.corner1},this.dragHandles.corner2={...this.handleCoords.corner2},this.dragHandles.corner3={...this.handleCoords.corner3},this.dragHandles.corner4={...this.handleCoords.corner4},this.dragHandles.translate={...this.handleCoords.translate},this.changeDetectorRef.markForCheck()}isLabelEmpty(){return""===this.textRef.nativeElement.innerText||"\n"===this.textRef.nativeElement.innerText}deleteLabel(){this.labelEmpty.next(this.id)}updateTextarea(){const{corner1:i,corner2:_,corner3:s}=this.handleCoords;this.textareaTransform.x=i.x,this.textareaTransform.y=i.y,this.textareaTransform.width=_.x-i.x,this.textareaTransform.height=s.y-_.y,this.renderer.setStyle(this.textRef.nativeElement,"transform",`translate(${this.textareaTransform.x}px, ${this.textareaTransform.y}px)`),this.renderer.setStyle(this.textRef.nativeElement,"width",`${this.textareaTransform.width}px`),this.renderer.setStyle(this.textRef.nativeElement,"height",`${this.textareaTransform.height}px`)}updateTranslateHandle(){const{corner1:i,corner2:_}=this.handleCoords;this.handleCoords.translate={x:(_.x-i.x)/2+i.x,y:i.y+-10},this.dragHandles.translate={...this.handleCoords.translate}}setHandle(i,_,s){this.handleCoords[i]={...this.handleCoords[i],[_]:s[_]},this.dragHandles[i]={...this.handleCoords[i]}}addDiffToHandle(i,_){this.handleCoords[i]={x:this.handleCoords[i].x+_.x,y:this.handleCoords[i].y+_.y},this.dragHandles[i]={...this.handleCoords[i]}}translateHandleMoved(i){const _=i.source._dragRef.getFreeDragPosition(),s={x:_.x-this.handleCoords.translate.x,y:_.y-this.handleCoords.translate.y};this.handleCoords.translate={..._},this.addDiffToHandle("corner1",s),this.addDiffToHandle("corner2",s),this.addDiffToHandle("corner3",s),this.addDiffToHandle("corner4",s),this.updateTextarea()}dragMoved(i,_){const s=i.source._dragRef.getFreeDragPosition();this.handleCoords[_]={...s},"corner1"===_&&(this.setHandle("corner2","y",s),this.setHandle("corner4","x",s)),"corner2"===_&&(this.setHandle("corner1","y",s),this.setHandle("corner3","x",s)),"corner3"===_&&(this.setHandle("corner2","x",s),this.setHandle("corner4","y",s)),"corner4"===_&&(this.setHandle("corner1","x",s),this.setHandle("corner3","y",s)),this.updateTranslateHandle(),this.updateTextarea()}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(l.il),e.rXU(e.gRc),e.rXU(e.sFG),e.rXU(e.xe9))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-whiteboard-label"]],viewQuery:function(i,_){if(1&i&&e.GBs(Iu,7),2&i){let s;e.mGM(s=e.lsd())&&(_.textRef=s.first)}},inputs:{id:"id",initialPos:"initialPos",color:"color",exporting:"exporting",size:"size"},outputs:{labelActive:"labelActive",labelEmpty:"labelEmpty"},decls:4,vars:6,consts:()=>{let t;return t=$localize`:␟0fde29c90b84be4dd7bc39adcce90313a570f14b␟1511122002214104331:Type..`,[["textRef",""],[1,"whiteboard-label"],[4,"ngIf"],["contenteditable","true","data-placeholder",t,1,"whiteboard-label__label",3,"dir","ngClass"],["cdkDrag","",1,"whiteboard-label__handle","whiteboard-label__handle--top-left",3,"cdkDragMoved","cdkDragFreeDragPosition"],["cdkDrag","",1,"whiteboard-label__handle","whiteboard-label__handle--top-right",3,"cdkDragMoved","cdkDragFreeDragPosition"],["cdkDrag","",1,"whiteboard-label__handle","whiteboard-label__handle--bottom-right",3,"cdkDragMoved","cdkDragFreeDragPosition"],["cdkDrag","",1,"whiteboard-label__handle","whiteboard-label__handle--bottom-left",3,"cdkDragMoved","cdkDragFreeDragPosition"],["cdkDrag","",1,"whiteboard-label__handle","whiteboard-label__handle--move",3,"cdkDragMoved","cdkDragFreeDragPosition"]]},template:function(i,_){1&i&&(e.j41(0,"div",1),e.DNE(1,Mu,6,5,"div",2),e.nrm(2,"div",3,0),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngIf",!0===_.active),e.R7$(),e.Y8G("dir",_.dir)("ngClass",e.eq3(4,Cu,!0===_.active)),e.BMQ("data-id",_.id))},dependencies:[p.YU,p.bT,Io.T1,He.ig],styles:['.whiteboard-label[_ngcontent-%COMP%]{position:relative;z-index:1000}.whiteboard-label__handle[_ngcontent-%COMP%]{position:fixed;z-index:10;width:32px;height:32px;left:-16px;top:-16px}.whiteboard-label__handle[_ngcontent-%COMP%]:after{content:"";position:absolute;width:12px;height:12px;left:10px;top:10px;border-radius:50%;background-color:#2d72dc}.whiteboard-label__handle[_ngcontent-%COMP%]:hover{cursor:pointer}.whiteboard-label__handle--top-left[_ngcontent-%COMP%]:hover{cursor:nw-resize}.whiteboard-label__handle--top-right[_ngcontent-%COMP%]:hover{cursor:ne-resize}.whiteboard-label__handle--bottom-right[_ngcontent-%COMP%]:hover{cursor:se-resize}.whiteboard-label__handle--bottom-left[_ngcontent-%COMP%]:hover{cursor:sw-resize}.whiteboard-label__handle--move[_ngcontent-%COMP%]:hover{cursor:move}.whiteboard-label__label[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;border:none;padding:5px;overflow-y:hidden}.whiteboard-label__label--active[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #2d72dc}.whiteboard-label__label[_ngcontent-%COMP%]:focus{outline:none}.whiteboard-label__label[_ngcontent-%COMP%]:empty:before{content:attr(data-placeholder);color:#374a6880}'],changeDetection:0}),n})();var Mn,zt=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},Xt=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Au=["colorBtn"];function Nu(o,n){1&o&&(e.j41(0,"div"),e.nrm(1,"app-icon",28),e.j41(2,"span",29),e.pXf(3,5),e.k0s()())}function Ru(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){const _=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.setTextSize(_.size))}),e.j41(1,"div",24)(2,"div",25),e.DNE(3,Nu,4,0,"div",26),e.nI1(4,"async"),e.k0s(),e.j41(5,"div",27)(6,"span"),e.EFF(7),e.k0s()()()()}if(2&o){const t=n.$implicit,i=e.XpG();e.R7$(3),e.Y8G("ngIf",t.size===e.bMT(4,2,i.textSize$)),e.R7$(4),e.SpI("",t.label,"px")}}function Vu(o,n){1&o&&(e.j41(0,"div"),e.nrm(1,"app-icon",28),e.j41(2,"span",29),e.pXf(3,6),e.k0s()())}function Pu(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){const _=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.setBrushSize(_.size))}),e.j41(1,"div",24)(2,"div",25),e.DNE(3,Vu,4,0,"div",26),e.nI1(4,"async"),e.k0s(),e.j41(5,"div",27),e.nrm(6,"app-icon",30),e.j41(7,"span"),e.EFF(8),e.k0s()()()()}if(2&o){const t=n.$implicit,i=e.XpG();e.R7$(3),e.Y8G("ngIf",t.size===e.bMT(4,4,i.brushSize$)),e.R7$(3),e.xc7("font-size",t.size,"px"),e.R7$(2),e.JRh(t.label)}}function Uu(o,n){1&o&&(e.j41(0,"div"),e.nrm(1,"app-icon",28),e.j41(2,"span",29),e.pXf(3,7),e.k0s()())}function Du(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){const _=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.setEraserSize(_.size))}),e.j41(1,"div",24)(2,"div",25),e.DNE(3,Uu,4,0,"div",26),e.nI1(4,"async"),e.k0s(),e.j41(5,"div",31),e.nrm(6,"app-icon",30),e.j41(7,"span"),e.EFF(8),e.k0s()()()()}if(2&o){const t=n.$implicit,i=e.XpG();e.R7$(3),e.Y8G("ngIf",t.size===e.bMT(4,4,i.eraserSize$)),e.R7$(3),e.xc7("font-size",t.size,"px"),e.R7$(2),e.JRh(t.label)}}function Lu(o,n){1&o&&(e.j41(0,"div"),e.nrm(1,"app-icon",28),e.j41(2,"span",29),e.pXf(3,8),e.k0s()())}function $u(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){const _=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.setBrushColor(_.color))}),e.j41(1,"div",24)(2,"div",25),e.DNE(3,Lu,4,0,"div",26),e.nI1(4,"async"),e.k0s(),e.j41(5,"div",27),e.nrm(6,"span",32),e.j41(7,"span"),e.EFF(8),e.nI1(9,"titlecase"),e.k0s()()()()}if(2&o){const t=n.$implicit,i=e.XpG();e.R7$(3),e.Y8G("ngIf",t.color===e.bMT(4,4,i.brushColor$)),e.R7$(3),e.xc7("background-color",t.color),e.R7$(2),e.JRh(e.bMT(9,6,t.label))}}class ft{constructor(n){this.store=n,this.textSizes=ti.WC,this.brushSizes=ti.TH,this.brushColors=[{label:$localize`Black`,color:ti.u5.color},{label:$localize`Red`,color:"#ff0000"},{label:$localize`Yellow`,color:"#ffff00"},{label:$localize`Green`,color:"#00ff00"},{label:$localize`Cyan`,color:"#00ffff"},{label:$localize`Blue`,color:"#0000ff"},{label:$localize`Pink`,color:"#ff00ff"},{label:$localize`White`,color:ti.ky.color}],this.eraserSizes=ti.nt,this.modeEnum=Wt.D,this.downloadClick=new e.bkB,this.clearClick=new e.bkB,this.exitClick=new e.bkB,this.ngUnsubscribe=new $.B}ngOnInit(){}ngAfterViewInit(){this.hasPaint$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{!n&&this.store.selectSnapshot(m.Pf.getWhiteboardAnnotateMode)===Wt.D.Erase&&this.handleModeSelect(Wt.D.Paint)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setBrushSize(n){this.store.dispatch(new B.B.SetWhiteboardBrushSize(n))}setBrushColor(n){this.store.dispatch(new B.B.SetWhiteboardBrushColor(n))}setTextSize(n){this.store.dispatch(new B.B.SetWhiteboardTextSize(n))}handleModeSelect(n){this.store.dispatch(new B.B.SetWhiteboardAnnotateMode(n))}setEraserSize(n){this.store.dispatch(new B.B.SetWhiteboardEraserSize(n))}handleDownloadClick(){this.downloadClick.next()}handleClearClick(){this.clearClick.next()}handleExitClick(){this.exitClick.next()}}(Mn=ft).\u0275fac=function(n){return new(n||Mn)(e.rXU(l.il))},Mn.\u0275cmp=e.VBU({type:Mn,selectors:[["app-view-whiteboard-tools"]],viewQuery:function(n,t){if(1&n&&e.GBs(Au,7,e.aKT),2&n){let i;e.mGM(i=e.lsd())&&(t.colorBtn=i.first)}},outputs:{downloadClick:"downloadClick",clearClick:"clearClick",exitClick:"exitClick"},decls:37,vars:43,consts:()=>{let o,n,t,i,_,s,a,r,u,f,P,x,z,Ge;return o=$localize`:␟8fa4d523f7b91df4390120b85ed0406138273e1a␟9011959596901584887:Color`,n=$localize`:␟8fa4d523f7b91df4390120b85ed0406138273e1a␟9011959596901584887:Color`,t=$localize`:␟a0e8b3d9b3da6e0adfc24e2a32c7a6403b72fbf1␟8792981974820069318:Brush`,i=$localize`:␟a0e8b3d9b3da6e0adfc24e2a32c7a6403b72fbf1␟8792981974820069318:Brush`,_=$localize`:␟8ba143716c2da6e4120c0c1a804f0bdd9a7e5f5b␟6162693758764653365:Text`,s=$localize`:␟8ba143716c2da6e4120c0c1a804f0bdd9a7e5f5b␟6162693758764653365:Text`,a=$localize`:␟07845aefc0a7038371e36035e75183d0cfffbbc3␟8027390660031780542:Eraser`,r=$localize`:␟07845aefc0a7038371e36035e75183d0cfffbbc3␟8027390660031780542:Eraser`,u=$localize`:␟99ee4faa69cd2ea8e3678c1f557c0ff1f05aae46␟8700121026680200191:Clear`,f=$localize`:␟99ee4faa69cd2ea8e3678c1f557c0ff1f05aae46␟8700121026680200191:Clear`,P=$localize`:␟1e7180823484a8b886c921518255e24324c3d47b␟8167513183851535531:current`,x=$localize`:␟1e7180823484a8b886c921518255e24324c3d47b␟8167513183851535531:current`,z=$localize`:␟1e7180823484a8b886c921518255e24324c3d47b␟8167513183851535531:current`,Ge=$localize`:␟1e7180823484a8b886c921518255e24324c3d47b␟8167513183851535531:current`,[["colorBtn","matMenuTrigger"],["textSizeMenu","matMenu"],["brushSizeMenu","matMenu"],["eraserSizeMenu","matMenu"],["brushColorMenu","matMenu"],P,x,z,Ge,[1,"view-whiteboard-tools"],["name","Whiteboard","orientation","vertical"],["app-view-button","","buttonSize","small","aria-label",o,"matTooltip",n,"matTooltipPosition","right",3,"matMenuTriggerFor","buttonTheme"],["size","lg","icon","tint"],["app-view-button","","buttonSize","small","aria-label",t,"matTooltip",i,"matTooltipPosition","right",3,"click","matMenuTriggerFor","buttonTheme"],["size","lg","icon","paint-brush"],["app-view-button","","buttonSize","small","aria-label",_,"matTooltip",s,"matTooltipPosition","right",3,"click","matMenuTriggerFor","buttonTheme"],["size","lg","icon","text-size"],["app-view-button","","buttonSize","small","aria-label",a,"matTooltip",r,"matTooltipPosition","right",3,"click","matMenuTriggerFor","buttonTheme","disabled"],["size","lg","icon","eraser"],["orientation","vertical"],["app-view-button","","buttonSize","small","aria-label",u,"matTooltip",f,"matTooltipPosition","right",3,"click","disabled"],["size","lg","icon","trash"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],[1,"flex","flex-row","items-center","justify-start"],[1,"view-whiteboard-tools__check"],[4,"ngIf"],[1,"view-whiteboard-tools__label"],["icon","check","aria-hidden","true",1,"mr-2"],[1,"sr-only"],["icon","circle","aria-hidden","true",1,"mr-2"],[1,"view-whiteboard-tools__label","flex","flex-auto","items-center"],[1,"view-whiteboard-tools__swatch"]]},template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"div",9)(1,"app-pillbox",10)(2,"button",11,0),e.nrm(4,"app-icon",12),e.k0s(),e.j41(5,"button",13),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"async"),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleModeSelect(t.modeEnum.Paint))}),e.nrm(9,"app-icon",14),e.k0s(),e.j41(10,"button",15),e.nI1(11,"async"),e.nI1(12,"async"),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleModeSelect(t.modeEnum.Text))}),e.nrm(13,"app-icon",16),e.k0s(),e.j41(14,"button",17),e.nI1(15,"async"),e.nI1(16,"async"),e.nI1(17,"async"),e.nI1(18,"async"),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleModeSelect(t.modeEnum.Erase))}),e.nrm(19,"app-icon",18),e.k0s(),e.nrm(20,"app-pillbox-divider",19),e.j41(21,"button",20),e.nI1(22,"async"),e.nI1(23,"async"),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleClearClick())}),e.nrm(24,"app-icon",21),e.k0s(),e.j41(25,"mat-menu",null,1),e.DNE(27,Ru,8,4,"button",22),e.k0s(),e.j41(28,"mat-menu",null,2),e.DNE(30,Pu,9,6,"button",22),e.k0s(),e.j41(31,"mat-menu",null,3),e.DNE(33,Du,9,6,"button",22),e.k0s(),e.j41(34,"mat-menu",null,4),e.DNE(36,$u,10,8,"button",22),e.k0s()()()}if(2&n){const i=e.sdS(3),_=e.sdS(26),s=e.sdS(29),a=e.sdS(32),r=e.sdS(35);e.R7$(2),e.Y8G("matMenuTriggerFor",r)("buttonTheme",i.menuOpen?"blue-fill":"transparent-fill"),e.BMQ("aria-selected",i.menuOpen)("aria-pressed",i.menuOpen),e.R7$(3),e.Y8G("matMenuTriggerFor",s)("buttonTheme",e.bMT(6,21,t.mode$)===t.modeEnum.Paint?"blue-fill":"transparent-fill"),e.BMQ("aria-selected",e.bMT(7,23,t.mode$)===t.modeEnum.Paint)("aria-pressed",e.bMT(8,25,t.mode$)===t.modeEnum.Paint),e.R7$(5),e.Y8G("matMenuTriggerFor",_)("buttonTheme",e.bMT(11,27,t.mode$)===t.modeEnum.Text?"blue-fill":"transparent-fill"),e.BMQ("aria-pressed",e.bMT(12,29,t.mode$)===t.modeEnum.Text),e.R7$(4),e.Y8G("matMenuTriggerFor",a)("buttonTheme",e.bMT(15,31,t.mode$)===t.modeEnum.Erase?"blue-fill":"transparent-fill")("disabled",!1===e.bMT(16,33,t.hasPaint$)),e.BMQ("aria-selected",e.bMT(17,35,t.mode$)===t.modeEnum.Erase)("aria-pressed",e.bMT(18,37,t.mode$)===t.modeEnum.Erase),e.R7$(7),e.Y8G("disabled",!1===e.bMT(22,39,t.hasPaint$)&&!1===e.bMT(23,41,t.hasText$)),e.R7$(6),e.Y8G("ngForOf",t.textSizes),e.R7$(3),e.Y8G("ngForOf",t.brushSizes),e.R7$(3),e.Y8G("ngForOf",t.eraserSizes),e.R7$(3),e.Y8G("ngForOf",t.brushColors)}},dependencies:[J.ri,p.Sq,p.bT,q.R,ke.kk,ke.fb,ke.Cp,ye.oV,Vt.O,wo.p,p.Jj,p.PV],styles:[".view-whiteboard-tools__check{min-width:20px;color:#2d72dc}.view-whiteboard-tools__swatch{display:inline-block;width:14px;height:14px;border-radius:50%;margin-inline-end:8px;box-shadow:0 0 0 1px #96a8c0}\n"],encapsulation:2,changeDetection:0}),zt([(0,l.l6)(m.Pf.isWhiteboardLocked),Xt("design:type",d.c)],ft.prototype,"isLocked$",void 0),zt([(0,l.l6)(m.Pf.getWhiteboardAnnotateMode),Xt("design:type",d.c)],ft.prototype,"mode$",void 0),zt([(0,l.l6)(m.Pf.getWhiteboardBrushSize),Xt("design:type",d.c)],ft.prototype,"brushSize$",void 0),zt([(0,l.l6)(m.Pf.getWhiteboardTextSize),Xt("design:type",d.c)],ft.prototype,"textSize$",void 0),zt([(0,l.l6)(m.Pf.getWhiteboardBrushColor),Xt("design:type",d.c)],ft.prototype,"brushColor$",void 0),zt([(0,l.l6)(m.Pf.getWhiteboardEraserSize),Xt("design:type",d.c)],ft.prototype,"eraserSize$",void 0),zt([(0,l.l6)(m.Pf.getWhiteboardHasPaint),Xt("design:type",d.c)],ft.prototype,"hasPaint$",void 0),zt([(0,l.l6)(m.Pf.getWhiteboardHasText),Xt("design:type",d.c)],ft.prototype,"hasText$",void 0);var yn,ii=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},ni=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const xu=["drawCanvas"],ku=["annotateWrapper"];function Gu(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-view-whiteboard-label",12),e.nI1(1,"async"),e.bIt("labelActive",function(_){e.eBV(t);const s=e.XpG();return e.Njj(s.handleLabelActive(_))})("labelEmpty",function(_){e.eBV(t);const s=e.XpG();return e.Njj(s.handleLabelEmpty(_))}),e.k0s()}if(2&o){const t=n.$implicit,i=e.XpG();e.AVh("view-whiteboard__label--clickthrough",e.bMT(1,7,i.annotateMode$)!==i.whiteboardAnnotateMode.Text),e.Y8G("exporting",i.exporting)("id",t.id)("initialPos",t.pos)("color",t.color)("size",t.size)}}function Wu(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",13),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleExitClick())}),e.j41(1,"span",14),e.pXf(2,2),e.k0s()()}}const Yo=ls.H.PNG;class Mt{constructor(n,t,i,_,s,a,r){this.store=n,this.actions=t,this.viewService=i,this.clipboardService=_,this.applicationEventService=s,this.changeRef=a,this.animationService=r,this.whiteboardAnnotateMode=Wt.D,this.labels=[],this.exporting=!1,this.drawing=!1,this.brushSize=0,this.eraserSize=0,this.lineWidth=0,this.wasPlaying=!1,this.ngUnsubscribe=new $.B}ngOnInit(){this.siteHeader=this.store.selectSnapshot(gi.W.getSiteHeader),this.store.dispatch(new cs.G.SetHeader(Qo.D.Hide)),this.canvasElement=this.drawCanvas.nativeElement,this.canvasContext=this.canvasElement.getContext("2d"),this.initActiveLabelColorListener(),this.initActiveLabelTextSizeListener(),this.initAnnotateModeListener(),this.initBrushColorFromBackgroundListener(),this.animationService.isPlaying()&&(this.animationService.pause(),this.wasPlaying=!0)}ngAfterViewInit(){this.initCanvasListeners()}ngOnDestroy(){this.inputManager.destroy(),this.reset(),this.store.dispatch(new cs.G.SetHeader(this.siteHeader)),this.wasPlaying&&this.animationService.unpause(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initAnnotateModeListener(){this.annotateMode$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{switch(this.inputManager&&this.inputManager.destroy(),n){case Wt.D.Paint:this.canvasContext.globalCompositeOperation="source-over",this.setLineWidth(this.brushSize),this.initDrawListeners();break;case Wt.D.Text:this.initTextListener();break;case Wt.D.Erase:this.canvasContext.globalCompositeOperation="destination-out",this.setLineWidth(this.eraserSize),this.initDrawListeners()}this.applicationEventService.fireEvent(gt.F.WhiteboardModeUpdated,n)})}initActiveLabelColorListener(){this.brushColor$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=this.labels.find(i=>i.id===this.activeLabelId);t&&(t.color=n,this.changeRef.markForCheck())})}initActiveLabelTextSizeListener(){this.textSize$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=this.labels.find(i=>i.id===this.activeLabelId);t&&(t.size=n,this.changeRef.markForCheck())})}initBrushColorFromBackgroundListener(){this.background$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=(0,a_.T4)(n)?ti.fY:ti.dS;this.store.dispatch(new B.B.SetWhiteboardBrushColor(t.color))})}initTextListener(){this.inputManager=new Hammer.Manager(this.drawCanvas.nativeElement),this.inputManager.add(new Hammer.Tap({event:"tap"})),this.inputManager.on("tap",n=>{if(this.activeLabelId)return void(this.activeLabelId=void 0);const t=(0,R.uniqueId)();let i=n.center.x,_=n.center.y;void 0!==n.pointers[0].x&&(i=n.pointers[0].x,_=n.pointers[0].y);const s=this.store.selectSnapshot(m.Pf.getWhiteboardBrushColor),a=this.store.selectSnapshot(m.Pf.getWhiteboardTextSize);this.labels.push({id:t,pos:{x:i,y:_},color:s,size:a}),this.activeLabelId=t,this.changeRef.markForCheck(),this.dispatchHasText()})}initCanvasListeners(){this.brushSize$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.setBrushSize(n)}),this.brushColor$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.setBrushColor(n)}),this.eraserSize$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.setEraserSize(n)}),this.syncCanvas()}initDrawListeners(){this.inputManager=new Hammer.Manager(this.drawCanvas.nativeElement),this.inputManager.add(new Hammer.Pan({event:"pan",pointers:0})),this.inputManager.add(new Hammer.Tap({event:"tap"}));const n=new Map;this.inputManager.on("tap",t=>{this.changeRef.markForCheck();const{x:i,y:_}=this.getInputPosition(t);this.drawPoint(i,_),this.checkCanvasPaint()}),this.inputManager.on("panstart",t=>{this.drawing=!0,this.changeRef.markForCheck();const{x:i,y:_}=this.getInputPosition(t);n.set(t.pointers[0]?.pointerId||1,{x:i,y:_}),this.applicationEventService.fireEvent(gt.F.WhiteboardDrawingStarted)}),this.inputManager.on("pan",t=>{this.drawing=!0,this.changeRef.markForCheck();const{x:i,y:_}=this.getInputPosition(t),s=t.pointers[0]?.pointerId||1,{x:a,y:r}=n.get(s);this.drawLine(a,r,i,_),this.drawPoint(i,_),n.set(s,{x:i,y:_})}),this.inputManager.on("panend",()=>{this.drawing=!1,this.changeRef.markForCheck(),n.clear(),this.checkCanvasPaint(),this.applicationEventService.fireEvent(gt.F.WhiteboardDrawingFinished)})}handleLabelActive(n){this.activeLabelId=n;const t=this.labels.find(i=>i.id===n);t&&this.store.dispatch([new B.B.SetWhiteboardTextSize(t.size),new B.B.SetWhiteboardBrushColor(t.color)])}handleLabelEmpty(n){this.labels=this.labels.filter(t=>t.id!==n),this.changeRef.markForCheck(),this.dispatchHasText()}dispatchHasText(){this.store.dispatch(new B.B.SetWhiteboardHasText(this.labels.length>0))}handleResetClick(){this.reset()}handleDownloadClick(){this.exporting=!0,this.changeRef.detectChanges();const{width:n,height:t}=this.canvasElement,i=this.store.selectSnapshot(b.N.getSelectedChapterId),_=this.store.selectSnapshot(b.N.getSelectedChapterBackground),s=this.store.selectSnapshot(le.S.getWatermarkEnabled),a=document.querySelector(".engine__watermark"),r=[this.drawCanvas.nativeElement,this.annotateElement.nativeElement];s&&!(0,R.isNil)(a)&&r.push(a),this.store.dispatch(new ps.V9(i,_,Yo,100,{width:n,height:t},"original",!0,!0,r)).pipe((0,rs.q)(()=>this.actions.pipe((0,l.xi)(ps.WX),(0,ut.s)(1))),(0,g.Q)(this.ngUnsubscribe),(0,Ou.j)(()=>{this.exporting=!1,this.changeRef.markForCheck()})).subscribe(u=>{this.downloadSnapshot(u.blob)})}handleExitClick(){this.resetCanvas(),this.viewService.toggleWhiteboard(!1)}getInputPosition(n){const t=n.pointers[0];return t?.pageX?{x:t.pageX,y:t.pageY}:{x:n.center.x,y:n.center.y}}checkCanvasPaint(){const n=this.canvasContext.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),i=new Uint32Array(n.data.buffer).some(_=>0!==_);this.store.dispatch(new B.B.SetWhiteboardHasPaint(i))}drawPoint(n,t){const i=this.lineWidth/2,_=2*Math.PI;this.canvasContext.beginPath(),this.canvasContext.arc(n,t,i,0,_),this.canvasContext.fill()}drawLine(n,t,i,_){this.canvasContext.beginPath(),this.canvasContext.moveTo(n,t),this.canvasContext.lineTo(i,_),this.canvasContext.stroke(),this.canvasContext.closePath()}reset(){this.resetCanvas(),this.labels=[],this.changeRef.markForCheck(),this.dispatchHasText()}setBrushSize(n){this.brushSize=n,this.setLineWidth(n)}setBrushColor(n){this.canvasContext.fillStyle=n,this.canvasContext.strokeStyle=n}setEraserSize(n){this.eraserSize=n,this.setLineWidth(n)}setLineWidth(n){this.canvasContext.lineWidth=n,this.lineWidth=n}syncCanvas(){const n=this.store.selectSnapshot(m.Pf.getWhiteboardBrushSize),t=this.store.selectSnapshot(m.Pf.getWhiteboardBrushColor),i=this.store.selectSnapshot(m.Pf.getWhiteboardEraserSize),{width:_,height:s}=this.getScreenDimensions();this.canvasElement.width=_,this.canvasElement.height=s,this.setBrushSize(n),this.setBrushColor(t),this.setEraserSize(i),this.canvasContext.lineJoin="round"}resetCanvas(){const{width:n,height:t}=this.canvasElement;this.canvasContext.clearRect(0,0,n,t),this.store.dispatch(new B.B.SetWhiteboardHasPaint(!1))}downloadSnapshot(n){const{displayName:t}=this.store.selectSnapshot(Oe.t.getStory),s=`${(t||"").replace(/ /g,"_").replace(/\W/g,"").toLowerCase()}_drawing.${Yo===ls.H.PNG?"png":"jpg"}`;!0===mi.c.native||mi.c.platform===c_.N.SDK?ds.X.blobToBase64(n).pipe((0,rs.q)(a=>this.clipboardService.copyToClipboard(a,"image")),(0,g.Q)(this.ngUnsubscribe)).subscribe(a=>{}):ds.X.exportImage(n,Yo,s)}getScreenDimensions(){const{innerWidth:n,innerHeight:t}=window;return{width:n,height:t}}}(yn=Mt).\u0275fac=function(n){return new(n||yn)(e.rXU(l.il),e.rXU(l.En),e.rXU(Z.z),e.rXU(wu.W),e.rXU(Oo.S),e.rXU(e.gRc),e.rXU(ki.O))},yn.\u0275cmp=e.VBU({type:yn,selectors:[["app-view-whiteboard"]],viewQuery:function(n,t){if(1&n&&(e.GBs(xu,7),e.GBs(ku,7)),2&n){let i;e.mGM(i=e.lsd())&&(t.drawCanvas=i.first),e.mGM(i=e.lsd())&&(t.annotateElement=i.first)}},decls:17,vars:20,consts:()=>{let o,n,t,i;return o=$localize`:␟dc75033a5238fdc4f462212c847a45ba8018a3fd␟3099741642167775297:Download`,n=$localize`:␟dc75033a5238fdc4f462212c847a45ba8018a3fd␟3099741642167775297:Download`,t=$localize`:␟321ea915069a7cb35969b033591534495fa061ec␟7029026028912706681:Exit Draw`,i=$localize`:␟321ea915069a7cb35969b033591534495fa061ec␟7029026028912706681:Exit Draw`,[["annotateWrapper",""],["drawCanvas",""],i,[1,"view-whiteboard"],["dir","ltr"],["class","view-whiteboard__label",3,"view-whiteboard__label--clickthrough","exporting","id","initialPos","color","size","labelActive","labelEmpty",4,"ngFor","ngForOf"],["data-test","drawCanvas",1,"view-whiteboard__canvas"],["data-test","viewWhiteboardTools",1,"view-whiteboard__tools",3,"clearClick","downloadClick","exitClick"],[1,"view-whiteboard__actions"],["app-view-button","","buttonSize","small","data-test","viewWhiteboardDownload","aria-label",o,"matTooltip",n,"matTooltipPosition","right",3,"click"],["size","lg","icon","down-to-bracket"],["data-test","viewDrawExit","app-view-button","","buttonSize","small","aria-label",t,3,"click",4,"ngIf"],[1,"view-whiteboard__label",3,"labelActive","labelEmpty","exporting","id","initialPos","color","size"],["data-test","viewDrawExit","app-view-button","","buttonSize","small","aria-label",t,3,"click"],[1,"px-3","uppercase","text-xs"]]},template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"div",3,0),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.j41(5,"div",4),e.DNE(6,Gu,2,9,"app-view-whiteboard-label",5),e.k0s(),e.nrm(7,"canvas",6,1),e.j41(9,"app-view-whiteboard-tools",7),e.bIt("clearClick",function(){return e.eBV(i),e.Njj(t.handleResetClick())})("downloadClick",function(){return e.eBV(i),e.Njj(t.handleDownloadClick())})("exitClick",function(){return e.eBV(i),e.Njj(t.handleExitClick())}),e.k0s(),e.j41(10,"div",8)(11,"app-pillbox")(12,"button",9),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleDownloadClick())}),e.nrm(13,"app-icon",10),e.k0s()(),e.j41(14,"app-pillbox"),e.DNE(15,Wu,3,0,"button",11),e.nI1(16,"async"),e.k0s()()()}2&n&&(e.AVh("view-whiteboard--exporting",t.exporting)("view-whiteboard--drawing",t.drawing)("view-whiteboard--cursor-paint",e.bMT(2,12,t.annotateMode$)===t.whiteboardAnnotateMode.Paint)("view-whiteboard--cursor-erase",e.bMT(3,14,t.annotateMode$)===t.whiteboardAnnotateMode.Erase)("view-whiteboard--cursor-text",e.bMT(4,16,t.annotateMode$)===t.whiteboardAnnotateMode.Text),e.R7$(6),e.Y8G("ngForOf",t.labels),e.R7$(9),e.Y8G("ngIf",!1===e.bMT(16,18,t.isLocked$)))},dependencies:[J.ri,p.Sq,p.bT,q.R,He.ig,ye.oV,Vt.O,yu,ft,p.Jj],styles:["@keyframes shadow{0%{box-shadow:inset 0 0 #3e4043b3}to{box-shadow:inset 0 0 10px 4px #3e4043b3}}.view-whiteboard{touch-action:none;animation:shadow .5s ease-out forwards;position:fixed;inset:0;z-index:20;display:flex;flex-direction:column;align-items:center;justify-content:space-between;transition:all .3s linear}.view-whiteboard--exporting{box-shadow:none}.view-whiteboard--exporting .view-whiteboard__tools,.view-whiteboard--exporting .view-whiteboard__actions,.view-whiteboard--drawing .view-whiteboard__tools,.view-whiteboard--drawing .view-whiteboard__actions{display:none}.view-whiteboard--cursor-paint:hover{cursor:url(/assets/images/cursor-whiteboard-paint.svg) 7 20,pointer}.view-whiteboard--cursor-erase:hover{cursor:url(/assets/images/cursor-whiteboard-erase.svg) 7 20,pointer}.view-whiteboard--cursor-text:hover{cursor:url(/assets/images/cursor-whiteboard-text.svg) 7 20,pointer}.view-whiteboard__canvas{box-shadow:inset 0 0 10px #3e404366;position:absolute;inset:0;z-index:1}.view-whiteboard__label{position:absolute;top:0;left:0;z-index:10}.view-whiteboard__label--clickthrough{pointer-events:none}.view-whiteboard__tools{position:absolute;inset-inline-start:12px;top:12px;bottom:12px;z-index:20;display:flex;align-items:center}.view-whiteboard__actions{display:flex;gap:8px;position:absolute;inset-inline-end:12px;top:12px;z-index:20}\n"],encapsulation:2,changeDetection:0}),ii([(0,l.l6)(m.Pf.isWhiteboardLocked),ni("design:type",d.c)],Mt.prototype,"isLocked$",void 0),ii([(0,l.l6)(m.Pf.getWhiteboardAnnotateMode),ni("design:type",d.c)],Mt.prototype,"annotateMode$",void 0),ii([(0,l.l6)(m.Pf.getWhiteboardBrushSize),ni("design:type",d.c)],Mt.prototype,"brushSize$",void 0),ii([(0,l.l6)(m.Pf.getWhiteboardBrushColor),ni("design:type",d.c)],Mt.prototype,"brushColor$",void 0),ii([(0,l.l6)(m.Pf.getWhiteboardTextSize),ni("design:type",d.c)],Mt.prototype,"textSize$",void 0),ii([(0,l.l6)(m.Pf.getWhiteboardEraserSize),ni("design:type",d.c)],Mt.prototype,"eraserSize$",void 0),ii([(0,l.l6)(b.N.getSelectedChapterBackground),ni("design:type",d.c)],Mt.prototype,"background$",void 0);const Xu=["zones"],Bu=[[["","top",""]],[["","left",""]],[["","right",""]],[["","bottom",""]]],ju=["[top]","[left]","[right]","[bottom]"];let Fu=(()=>{var o;class n{constructor(){this.showZones=[]}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-view-zones"]],viewQuery:function(i,_){if(1&i&&e.GBs(Xu,5),2&i){let s;e.mGM(s=e.lsd())&&(_.zones=s.first)}},inputs:{showZones:"showZones"},ngContentSelectors:ju,decls:10,vars:4,consts:[["zones",""],[1,"view-zones"],[1,"view-zones__zone","view-zones__zone--top"],[1,"view-zones__zone","view-zones__zone--left"],[1,"view-zones__zone","view-zones__zone--right"],[1,"view-zones__zone","view-zones__zone--bottom"]],template:function(i,_){1&i&&(e.NAR(Bu),e.j41(0,"div",1,0)(2,"div",2),e.SdG(3),e.k0s(),e.j41(4,"div",3),e.SdG(5,1),e.k0s(),e.j41(6,"div",4),e.SdG(7,2),e.k0s(),e.j41(8,"div",5),e.SdG(9,3),e.k0s()()),2&i&&(e.R7$(2),e.Y8G("@isShown",_.showZones.includes("top")?"shown":"hidden"),e.R7$(2),e.Y8G("@isShown",_.showZones.includes("left")?"shown":"hidden"),e.R7$(2),e.Y8G("@isShown",_.showZones.includes("right")?"shown":"hidden"),e.R7$(2),e.Y8G("@isShown",_.showZones.includes("bottom")?"shown":"hidden"))},styles:['[_nghost-%COMP%]{width:100%;height:100%}.view-zones[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;grid-template-areas:"top top top" "left . right" "bottom bottom bottom";grid-template-columns:minmax(40px,auto) 1fr minmax(40px,auto);grid-template-rows:auto 1fr auto;padding:12px;pointer-events:none;position:absolute;z-index:20}.view-zones__zone[_ngcontent-%COMP%]{opacity:0;display:flex;gap:8px}.view-zones__zone--left[_ngcontent-%COMP%]{grid-area:left;flex-direction:column}.view-zones__zone--right[_ngcontent-%COMP%]{grid-area:right;flex-direction:column}.view-zones__zone--top[_ngcontent-%COMP%]{grid-area:top;flex-direction:row;opacity:1}.view-zones__zone--top[_ngcontent-%COMP%]:not(:empty){margin-bottom:8px}.view-zones__zone--bottom[_ngcontent-%COMP%]{grid-area:bottom;flex-direction:row;justify-content:flex-end}.view-zones__zone--bottom[_ngcontent-%COMP%]:not(:empty){margin-top:8px}'],data:{animation:[(0,D.hZ)("isShown",[(0,D.wk)("shown",(0,D.iF)({opacity:1})),(0,D.wk)("hidden",(0,D.iF)({opacity:0})),(0,D.kY)("hidden => shown",[(0,D.i0)("300ms ease-out")]),(0,D.kY)("shown => hidden",[(0,D.i0)("150ms ease-in")])])]},changeDetection:0}),n})();var An,C=function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);return _>3&&s&&Object.defineProperty(n,t,s),s},M=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Hu=["viewContainer"],Qu=["columnContainer"],Yu=["drawerContainer"],qu=["engineContainer"],Ku=["view"],Zu=["viewCameraBar"],Ju=["viewLogo"],eh=["viewSceneBase"],th=["viewToolbar"],ih=(o,n,t,i,_,s,a,r)=>({"view-page--layout-column":o,"view-page--layout-drawer":n,"view-page--show-aside":t,"view-page--column-open":i,"view-page--column-closed":_,"view-page--drawer-open":s,"view-page--drawer-closed":a,"view-page--drawer-peek":r}),nh=o=>({"view-page__drawer-nav--overflow":o}),hs=o=>({"w-full":o}),oh=o=>({grow:o}),_h=o=>({collapsed:o}),sh=o=>({"pt-2":o}),ah=(o,n,t)=>({"view-page__logo--mobile":o,"view-page__logo--web":n,"view-page__logo--raised":t});function rh(o,n){1&o&&e.nrm(0,"app-view-toolbar")}function lh(o,n){if(1&o&&(e.nrm(0,"app-view-undo",38),e.nI1(1,"async")),2&o){const t=e.XpG();e.Y8G("layout",e.bMT(1,1,t.canvasHeightBreakpoint$)>t.canvasHeightBreakpoint.Tiny?"full":"resetOnly")}}function ch(o,n){1&o&&e.nrm(0,"app-view-title-only")}function dh(o,n){1&o&&e.nrm(0,"app-view-audio-mute")}function ph(o,n){if(1&o&&(e.j41(0,"app-pillbox",45),e.DNE(1,dh,1,0,"app-view-audio-mute",18),e.nI1(2,"async"),e.nrm(3,"app-view-drawer-toggle"),e.k0s()),2&o){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf",e.bMT(2,1,t.audioVisible$))}}function uh(o,n){if(1&o&&(e.j41(0,"div",43),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.j41(4,"div"),e.DNE(5,ch,1,0,"app-view-title-only",18),e.nI1(6,"async"),e.k0s(),e.DNE(7,ph,4,3,"app-pillbox",44),e.nI1(8,"async"),e.nI1(9,"async"),e.k0s()),2&o){const t=e.XpG(3);e.Y8G("ngClass",e.eq3(15,nh,e.bMT(1,3,t.titleOnlyVisible$)&&(e.bMT(2,5,t.drawerToggleVisible$)||e.bMT(3,7,t.audioVisible$)))),e.R7$(5),e.Y8G("ngIf",e.bMT(6,9,t.titleOnlyVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(8,11,t.drawerToggleVisible$)||e.bMT(9,13,t.audioVisible$))}}function hh(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-pillbox")(1,"button",46),e.bIt("click",function(){e.eBV(t);const _=e.XpG(3);return e.Njj(_.handleQuizClick())}),e.nrm(2,"app-icon",47),e.k0s()()}}function gh(o,n){if(1&o&&(e.j41(0,"div",41),e.DNE(1,uh,10,17,"div",42),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.DNE(5,hh,3,0,"app-pillbox",18),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",e.bMT(2,2,t.titleOnlyVisible$)||e.bMT(3,4,t.drawerToggleVisible$)||e.bMT(4,6,t.audioVisible$)),e.R7$(4),e.Y8G("ngIf",e.bMT(6,8,t.hasQuiz$)&&e.bMT(7,10,t.quizEnabled$)&&!1===e.bMT(8,12,t.quizModeLocked$)&&e.bMT(9,14,t.quizPromptVisible$)&&!1===e.bMT(10,16,t.quizModeActive$))}}function mh(o,n){if(1&o&&(e.qex(0,39),e.DNE(1,gh,11,18,"div",40),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nI1(5,"async"),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,1,t.titleOnlyVisible$)||e.bMT(3,3,t.drawerToggleVisible$)||e.bMT(4,5,t.quizModeActive$)&&!1===e.bMT(5,7,t.quizModeLocked$))}}function Eh(o,n){1&o&&e.nrm(0,"app-view-column-toggle")}function fh(o,n){1&o&&(e.qex(0),e.nrm(1,"app-view-title-only"),e.bVm())}function Sh(o,n){1&o&&e.nrm(0,"app-view-audio-mute")}function Th(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",52),e.bIt("click",function(){e.eBV(t);const _=e.XpG(4);return e.Njj(_.handleQuizClick())}),e.nrm(1,"app-icon",53),e.j41(2,"span",54),e.pXf(3,6),e.k0s()()}}function bh(o,n){if(1&o&&(e.j41(0,"app-pillbox"),e.DNE(1,Sh,1,0,"app-view-audio-mute",18),e.nI1(2,"async"),e.nI1(3,"async"),e.DNE(4,Th,4,0,"button",51),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"async"),e.nI1(9,"async"),e.k0s()),2&o){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",e.bMT(2,2,t.audioVisible$)&&!1===e.bMT(3,4,t.columnVisible$)),e.R7$(3),e.Y8G("ngIf",e.bMT(5,6,t.hasQuiz$)&&e.bMT(6,8,t.quizEnabled$)&&!1===e.bMT(7,10,t.quizModeLocked$)&&e.bMT(8,12,t.quizPromptVisible$)&&!1===e.bMT(9,14,t.quizModeActive$))}}function vh(o,n){if(1&o&&(e.j41(0,"div",49)(1,"div",50),e.DNE(2,Eh,1,0,"app-view-column-toggle",18),e.nI1(3,"async"),e.DNE(4,fh,2,0,"ng-container",18),e.nI1(5,"async"),e.DNE(6,bh,10,16,"app-pillbox",18),e.nI1(7,"async"),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.nI1(11,"async"),e.nI1(12,"async"),e.nI1(13,"async"),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("ngIf",e.bMT(3,3,t.columnToggleVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(5,5,t.titleOnlyVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(7,7,t.hasQuiz$)&&e.bMT(8,9,t.quizEnabled$)&&!1===e.bMT(9,11,t.quizModeLocked$)&&e.bMT(10,13,t.quizPromptVisible$)&&!1===e.bMT(11,15,t.quizModeActive$)||e.bMT(12,17,t.audioVisible$)&&!1===e.bMT(13,19,t.columnVisible$))}}function Oh(o,n){if(1&o&&(e.qex(0,39),e.DNE(1,vh,14,21,"div",48),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,1,t.columnToggleVisible$)||e.bMT(3,3,t.titleOnlyVisible$)||e.bMT(4,5,t.quizModeActive$))}}function wh(o,n){1&o&&e.eu8(0,39)}function Ih(o,n){1&o&&e.nrm(0,"app-engine-camera-bar")}function Ch(o,n){1&o&&(e.j41(0,"app-pillbox",55),e.nrm(1,"app-view-fullscreen",56),e.k0s())}function Mh(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",68),e.nI1(1,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG(4);return e.Njj(_.handleToggleMedia(!1))}),e.nrm(2,"app-icon",69),e.k0s()}if(2&o){let t;const i=e.XpG(4);e.Y8G("matTooltip",i.mediaBarTooltip)("thin",!0),e.BMQ("aria-label",i.mediaBarTooltip)("aria-expanded","show"===(null==(t=e.bMT(1,4,i.mediaUI$))?null:t.status))}}function yh(o,n){if(1&o&&(e.j41(0,"div",63),e.nI1(1,"async"),e.nI1(2,"async"),e.j41(3,"app-pillbox",64),e.nI1(4,"async"),e.nI1(5,"async"),e.DNE(6,Mh,3,6,"button",65),e.nI1(7,"async"),e.nrm(8,"app-pillbox-divider",66)(9,"app-view-media-bar",67),e.nI1(10,"async"),e.nI1(11,"async"),e.k0s()()),2&o){let t,i,_;const s=e.XpG(3);e.Y8G("ngClass",e.eq3(20,hs,e.bMT(1,6,s.horizontalBreakpoint$)>s.horizontalBreakpoint.XSmall&&"full"===(null==(t=e.bMT(2,8,s.mediaUI$))?null:t.template))),e.R7$(3),e.Y8G("ngClass",e.eq3(22,oh,e.bMT(4,10,s.horizontalBreakpoint$)>s.horizontalBreakpoint.XSmall&&"full"===(null==(i=e.bMT(5,12,s.mediaUI$))?null:i.template))),e.R7$(3),e.Y8G("ngIf",e.eq3(24,_h,"show"===(null==(_=e.bMT(7,14,s.mediaUI$))?null:_.status))),e.R7$(3),e.Y8G("autoFocus","keyboard"===s.focusOrigin)("showSpeed",e.bMT(10,16,s.horizontalBreakpoint$)>s.horizontalBreakpoint.XSmall)("showScrubber",e.bMT(11,18,s.horizontalBreakpoint$)>s.horizontalBreakpoint.XSmall)}}function Ah(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"button",68),e.nI1(2,"async"),e.bIt("click",function(){e.eBV(t);const _=e.XpG(4);return e.Njj(_.handleToggleMedia(!0))}),e.nrm(3,"app-icon",70),e.k0s(),e.nrm(4,"app-pillbox-divider",66),e.bVm()}if(2&o){let t;const i=e.XpG(4);e.R7$(),e.Y8G("matTooltip",i.mediaBarTooltip)("thin",!0),e.BMQ("aria-label",i.mediaBarTooltip)("aria-expanded","show"===(null==(t=e.bMT(2,4,i.mediaUI$))?null:t.status))}}function Nh(o,n){if(1&o&&(e.j41(0,"app-pillbox",66),e.DNE(1,Ah,5,6,"ng-container",18),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nrm(5,"app-view-play"),e.k0s()),2&o){let t;const i=e.XpG(3);e.R7$(),e.Y8G("ngIf",!1===e.bMT(2,1,i.isMobileWeb$)&&"collapse"===(null==(t=e.bMT(3,3,i.mediaUI$))?null:t.status)&&"full"===(null==(t=e.bMT(4,5,i.mediaUI$))?null:t.template))}}function Rh(o,n){if(1&o&&(e.j41(0,"div",60),e.DNE(1,yh,12,26,"div",61),e.nI1(2,"async"),e.nI1(3,"async"),e.DNE(4,Nh,6,7,"app-pillbox",62),e.nI1(5,"async"),e.k0s()),2&o){let t,i;const _=e.XpG(2);e.R7$(),e.Y8G("ngIf",e.bMT(2,2,_.mediaVisible$)&&"show"===(null==(t=e.bMT(3,4,_.mediaUI$))?null:t.status)),e.R7$(3),e.Y8G("ngIf","show"!==(null==(i=e.bMT(5,6,_.mediaUI$))?null:i.status))}}function Vh(o,n){if(1&o&&(e.nrm(0,"app-view-title-only",74),e.nI1(1,"async")),2&o){const t=e.XpG(3);e.Y8G("showTitle",!1===e.bMT(1,1,t.drawerVisible$))}}function Ph(o,n){1&o&&(e.j41(0,"app-pillbox",45),e.nrm(1,"app-view-drawer-toggle"),e.k0s())}function Uh(o,n){if(1&o&&(e.j41(0,"div",71),e.nI1(1,"async"),e.j41(2,"div",72),e.nI1(3,"async"),e.DNE(4,Vh,2,3,"app-view-title-only",73),e.nI1(5,"async"),e.k0s(),e.DNE(6,Ph,2,0,"app-pillbox",44),e.nI1(7,"async"),e.k0s()),2&o){const t=e.XpG(2);e.Y8G("ngClass",e.eq3(12,sh,e.bMT(1,4,t.mediaVisible$))),e.R7$(2),e.Y8G("ngClass",e.eq3(14,hs,!1===e.bMT(3,6,t.drawerVisible$))),e.R7$(2),e.Y8G("ngIf",e.bMT(5,8,t.titleOnlyVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(7,10,t.drawerToggleVisible$))}}function Dh(o,n){if(1&o&&(e.j41(0,"div",57),e.DNE(1,Rh,6,8,"div",58),e.nI1(2,"async"),e.DNE(3,Uh,8,16,"div",59),e.nI1(4,"async"),e.nI1(5,"async"),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",e.bMT(2,2,t.mediaVisible$)),e.R7$(2),e.Y8G("ngIf",!0===e.bMT(4,4,t.isMobileWeb$)&&"drawer"===e.bMT(5,6,t.viewLayout$))}}function Lh(o,n){if(1&o&&(e.nrm(0,"app-view-logo",75),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async")),2&o){const t=e.XpG();e.Y8G("ngClass",e.sMw(11,ah,!0===e.bMT(1,3,t.isMobileWeb$),!1===e.bMT(2,5,t.isMobileWeb$),t.isLogoRaised))("logoColor",t.isBackgroundLight?"color":"white")("logoSize",!0===e.bMT(3,7,t.isMobileWeb$)||e.bMT(4,9,t.horizontalBreakpoint$)<=t.horizontalBreakpoint.Small?"small":"full")}}function $h(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",76)(1,"app-pillbox")(2,"button",46),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleExitQuiz())}),e.j41(3,"span",77),e.pXf(4,7),e.k0s()()()()}}function xh(o,n){1&o&&e.nrm(0,"app-view-column-container",78)}function kh(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-view-column",79),e.nI1(1,"async"),e.qex(2,80),e.j41(3,"div",81)(4,"div",82),e.pXf(5,8),e.k0s(),e.j41(6,"button",83),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleToggleSearch(!1))}),e.nrm(7,"app-icon",84),e.j41(8,"span",85),e.pXf(9,9),e.k0s()()(),e.bVm(),e.qex(10,86),e.j41(11,"div",87),e.nrm(12,"app-view-search"),e.k0s(),e.bVm(),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("floating",!0)("padded",!1)("wide",e.bMT(1,3,t.paginationVisible$))}}function Gh(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-view-column",88),e.nI1(1,"async"),e.qex(2,80),e.j41(3,"div",81)(4,"div",82),e.pXf(5,10),e.k0s(),e.j41(6,"button",89),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleToggleLayers())}),e.nrm(7,"app-icon",84),e.j41(8,"span",85),e.pXf(9,11),e.k0s()()(),e.bVm(),e.qex(10,86),e.j41(11,"div",90),e.nrm(12,"app-view-visibility-layers"),e.k0s(),e.bVm(),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("wide",e.bMT(1,3,t.paginationVisible$))("floating",!0)("padded",!1)}}function Wh(o,n){1&o&&(e.j41(0,"div",91,5),e.nrm(2,"app-view-drawer"),e.k0s())}function zh(o,n){1&o&&e.nrm(0,"div",92)}function Xh(o,n){if(1&o&&e.nrm(0,"app-view-ondemand",93),2&o){const t=e.XpG();e.Y8G("contentId",t.contentId)("contentType",t.contentType)}}function Bh(o,n){if(1&o&&(e.nrm(0,"app-view-progress",94),e.nI1(1,"async")),2&o){const t=e.XpG();e.Y8G("show",e.bMT(1,2,t.viewWindow$)===t.viewWindow.Loader)("percent",t.chapterLoadProgress)}}function jh(o,n){if(1&o&&e.nrm(0,"app-play-loader",96),2&o){const t=e.XpG(2);e.Y8G("percent",t.chapterLoadProgress)}}function Fh(o,n){1&o&&e.nrm(0,"app-button-loader")}function Hh(o,n){1&o&&e.nrm(0,"app-hand-loader")}function Qh(o,n){1&o&&e.nrm(0,"app-summary-loader")}function Yh(o,n){if(1&o&&(e.j41(0,"app-view-loader"),e.DNE(1,jh,1,1,"app-play-loader",95),e.nI1(2,"async"),e.DNE(3,Fh,1,0,"app-button-loader",18),e.nI1(4,"async"),e.DNE(5,Hh,1,0,"app-hand-loader",18),e.nI1(6,"async"),e.DNE(7,Qh,1,0,"app-summary-loader",18),e.nI1(8,"async"),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf","play"===e.bMT(2,4,t.interactType$)),e.R7$(2),e.Y8G("ngIf","button"===e.bMT(4,6,t.interactType$)),e.R7$(2),e.Y8G("ngIf","hand"===e.bMT(6,8,t.interactType$)),e.R7$(2),e.Y8G("ngIf","summary"===e.bMT(8,10,t.interactType$))}}function qh(o,n){1&o&&e.nrm(0,"app-view-tour")}function Kh(o,n){1&o&&e.nrm(0,"app-view-whiteboard",97)}function Zh(o,n){1&o&&e.nrm(0,"app-view-print")}function Jh(o,n){1&o&&e.nrm(0,"app-view-content-warning")}class I{onClick(n){this.handleFirstClickTracking(n)}onFocusin(){this.checkFocus()}onFocusout(){this.checkFocus()}onActive(n){this.showTools$.next(!0)}onInactive(n){const t=this.store.selectSnapshot(m.Pf.getFadeout),i=this.store.selectSnapshot(m.Pf.getFadeoutPaused),_=this.viewLayout$.getValue();0!==t&&_!==Xn.G.Column&&!i&&this.showTools$.next(!1)}constructor(n,t,i,_,s,a,r,u,f,P,x,z,Ge,me,yt,oi,_i,si,ai,ri,li){this.activatedRoute=n,this.changeDetectorRef=t,this.store=i,this.actions=_,this.liveAnnouncer=s,this.viewService=a,this.viewQuizService=r,this.viewUIService=u,this.engineService=f,this.nodeService=P,this.animationService=x,this.applicationEventService=z,this.vendorAnalyticsService=Ge,this.mediaService=me,this.title=yt,this.platform=oi,this.viewPlaythroughService=_i,this.focusMonitor=si,this.dialog=ai,this.visibilityLayersService=ri,this.legacyVisibilityLayersService=li,this.application=Li.c,this.environment=mi.c,this.nativePlatform=l_.I,this.toolEnum=Ze.s,this.showTools$=new pt.t(!1),this.mediaExpanded=!1,this.horizontalBreakpoint=Ui.m,this.canvasHeightBreakpoint=h_.h,this.viewContentMode=ht.G,this.viewLayoutStatus=ot.Q,this.viewMode=Gn,this.viewUI=h.U,this.viewWindow=Kt.U,this.columnLayoutStatus=ot.Q.Hide,this.drawerExpandable=!0,this.drawerOpen=!1,this.loadLabel="",this.chapterLoadProgress=0,this.chaptersLoaded=0,this.isBackgroundLight=!0,this.selectedChapterLoading=!1,this.viewToolsMode=n_,this.viewLayout$=new pt.t(Xn.G.Column),this.showZones=[],this.focusOrigin="",this.isLogoRaised=!1,this.ngUnsubscribe=new $.B}ngOnInit(){this.resetScene();const n=this.viewService.normalizeQueryParams(this.activatedRoute.snapshot.queryParams);this.contentId=n.id,this.contentType=n.type,this.contentLang=n.lang}ngAfterViewInit(){this.viewService.setViewLanguage(this.contentLang),this.loadStory(),this.store.dispatch(new ui.Ds({tag:!0,pin:!1})),this.store.dispatch(new Pe.kE(!0));const n=this.store.selectSnapshot(T.dF.getUI).loader.template;this.store.dispatch(new Pe.Ti(n===s_.aD.Bar)),n!==s_.aD.None&&this.store.dispatch(new B.B.ToggleWindow(Kt.U.Loader,!0)),this.liveAnnouncer.announce("Loading","polite"),this.store.select(T.dF.getUIEntry(h.U.Playthrough)).pipe((0,y.p)(i=>i.enable),(0,ut.s)(1),(0,g.Q)(this.ngUnsubscribe)).subscribe(i=>{this.store.dispatch(new B.B.SetPlaythroughEnabled(i.enable))}),this.checkCapabilities(),this.initSizeObservers(),this.initHeaderObserver(),this.initViewUIObserver(),this.initUIObserver(),this.initBreakpointObservers(),this.initKeyboardObserver(),this.initLoadProgressObserver(),this.initPlaythroughObserver(),this.initWindowObserver(),this.initMobileNav(),this.initBackgroundColorObserver(),this.initResponsiveLabels(),this.initNodeObserver(),this.initChapterObserver(),this.initChapterAudioPlayer(),this.initToolsFadeout(),this.initAccessibility(),this.initTooltips(),this.initQuizStateListener(),this.initVisibilityLayers(),this.storyId$.pipe((0,y.p)(i=>!(0,R.isNil)(i)&&"preview"!==i),(0,ut.s)(1),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>this.initVendorAnalyticsEvents()),this.initAnatomyTree()}ngOnDestroy(){this.store.dispatch(new Pe.t5(!1)),this.store.dispatch(new __.J),this.store.dispatch(new ui.S3),Yt.g.isFullscreen()&&Yt.g.exitFullscreen(),this.viewQuizService.exitQuiz(),this.unbindKeyboard(),this.mediaService.stopAllAudio(),this.mediaService.removeAllAudioPlayers(),this.store.dispatch(new Bn.O.ResetAudio),this.viewPlaythroughService.clearChapterTimers(),this.destroyVisibilityLayers(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.focusMonitor.stopMonitoring(document.body),this.viewService.unobserveMaterialOverlay()}loadStory(){this.onDemand$.pipe((0,y.p)(n=>!n),(0,ut.s)(1),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.viewService.initStory(this.contentId,this.contentType,this.contentLang)})}checkCapabilities(){const n=(0,jn.ZO)(),t=(0,jn.yd)();this.store.dispatch(new B.B.SetCanHover(n)),this.store.dispatch(new B.B.SetCanTouch(t)),this.store.dispatch(new B.B.SetCanFullscreen(Yt.g.canFullscreen())),this.store.dispatch(new B.B.SetInputMode(t?Di.A.Touch:Di.A.Mouse)),(0,Ve.R)(window,"orientationchange").pipe((0,Be.B)(100),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new B.B.SetCanHover((0,jn.ZO)())),this.store.dispatch(new B.B.SetCanTouch((0,jn.yd)()))})}initBreakpointObservers(){(0,Ae.z)([this.horizontalBreakpoint$,this.verticalBreakpoint$]).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.viewService.resetUI(),this.viewService.resetContentMode()})}initResponsiveLabels(){const n=(0,Ve.R)(window,"resize").pipe((0,Be.B)(100)),t=this.store.select(m.Pf.getLabelsBreakpoint),i=this.store.select(Je.y.getSelectedLabel),_=this.store.select(Je.y.getLabelsCollapsed);i.pipe((0,y.p)(()=>this.store.selectSnapshot(Je.y.getLabelsCollapsed)),(0,g.Q)(this.ngUnsubscribe)).subscribe(s=>{this.viewService.toggleLabelInfo(null!=s)}),_.pipe((0,y.p)(()=>!!this.store.selectSnapshot(Je.y.getSelectedLabel)),(0,g.Q)(this.ngUnsubscribe)).subscribe(s=>{this.viewService.toggleLabelInfo(s)}),(0,Ae.z)(n,t).pipe((0,y.p)(([,s])=>!(0,R.isNil)(s)),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.checkLabelsCollapsed()}),this.checkLabelsCollapsed()}initSizeObservers(){const n=ha({strategy:"scroll"});(0,Ve.R)(window,"resize").pipe((0,Be.B)(10),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.updateViewHeight(),this.refreshLayout()}),new d.c(_=>{n.listenTo(this.engineContainer.nativeElement,()=>{_.next()})}).pipe((0,Be.B)(10)).subscribe(()=>{this.resizeEngineContainer()})}initHeaderObserver(){this.store.select(gi.W.getSiteHeader).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.updateViewHeight()})}initUIObserver(){this.viewUI$.pipe((0,y.p)(n=>!(0,R.isNil)(n)),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.refreshLayout()}),this.viewUI$.pipe((0,y.p)(n=>!(0,R.isNil)(n)),(0,Qt.Z)(100),(0,Ke.F)(),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.applicationEventService.fireEvent(gt.F.UIUpdated,n)}),this.viewWindow$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.applicationEventService.fireEvent(gt.F.UIWindowUpdated,n)}),(0,Ae.z)([this.isMobileWeb$,this.drawerVisible$,this.paginationVisible$]).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(([n,t,i])=>{this.isLogoRaised=!!n&&(!t||i&&t)})}initViewUIObserver(){var o;(0,Ae.z)([this.horizontalBreakpoint$,this.verticalBreakpoint$,(o=this.engineContainer.nativeElement,new d.c(n=>{const t=new ResizeObserver(i=>{n.next(i)});return t.observe(o),function(){t.unobserve(o)}})),this.viewWindow$,this.store.select(b.N.getSelectedChapterId),this.store.select(Vi.N.getStoryLoadProgress),this.store.select(T.dF.getUI),this.store.select(Je.y.getSelectedLabel)]).pipe((0,g.Q)(this.ngUnsubscribe),(0,Be.B)(30)).subscribe(()=>{this.store.dispatch(new So.p.ToggleVisible({[h.U.Audio]:this.viewUIService.isVisible(h.U.Audio),[h.U.Camera]:this.viewUIService.isVisible(h.U.Camera),[h.U.Column]:this.viewUIService.isVisible(h.U.Column),[h.U.ColumnToggle]:this.viewUIService.isVisible(h.U.ColumnToggle),[h.U.Drawer]:this.viewUIService.isVisible(h.U.Drawer),[h.U.DrawerToggle]:this.viewUIService.isVisible(h.U.DrawerToggle),[h.U.Description]:this.viewUIService.isVisible(h.U.Description),[h.U.Fullscreen]:this.viewUIService.isVisible(h.U.Fullscreen),[h.U.Help]:this.viewUIService.isVisible(h.U.Help),[h.U.LabelList]:this.viewUIService.isVisible(h.U.LabelList),[h.U.Legend]:this.viewUIService.isVisible(h.U.Legend),[h.U.Logo]:this.viewUIService.isVisible(h.U.Logo),[h.U.Media]:this.viewUIService.isVisible(h.U.Media),[h.U.ToolbarOverflow]:this.viewUIService.isVisible(h.U.ToolbarOverflow),[h.U.NodeInfo]:this.viewUIService.isVisible(h.U.NodeInfo),[h.U.Pagination]:this.viewUIService.isVisible(h.U.Pagination),[h.U.Playthrough]:this.viewUIService.isVisible(h.U.Playthrough),[h.U.QuizPrompt]:this.viewUIService.isVisible(h.U.QuizPrompt),[h.U.Search]:this.viewUIService.isVisible(h.U.Search),[h.U.TitleOnly]:this.viewUIService.isVisible(h.U.TitleOnly),[h.U.Toolbar]:this.viewUIService.isVisible(h.U.Toolbar),[h.U.Tools]:this.viewUIService.isVisible(h.U.Tools),[h.U.ToggleLabels]:this.viewUIService.isVisible(h.U.ToggleLabels),[h.U.Undo]:this.viewUIService.isVisible(h.U.Undo),[h.U.VisibilityLayers]:this.viewUIService.isVisible(h.U.VisibilityLayers),[h.U.SkinLayers]:this.viewUIService.isVisible(h.U.SkinLayers),[h.U.Whiteboard]:this.viewUIService.isVisible(h.U.Whiteboard)}))})}initKeyboardObserver(){this.inputEnabled$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{n?this.bindKeyboard():this.unbindKeyboard()})}initNodeObserver(){this.actions.pipe((0,l.xi)(Pe.zE),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.viewService.delegateNodeClick(n.node,n.event)}),this.store.select(di.z.getSelectedNode).pipe((0,pi.J)(),(0,g.Q)(this.ngUnsubscribe)).subscribe(([n,t])=>{const i=(0,R.get)(n,"objectId",void 0),_=(0,R.get)(t,"objectId",void 0);(void 0===t||i!==_)&&this.viewService.toggleNodeInfo(!1)})}initChapterObserver(){this.store.select(b.N.getSelectedChapterId).pipe((0,y.p)(n=>!!n),(0,Ue.T)(()=>this.store.selectSnapshot(b.N.getSelectedChapter)),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.store.dispatch(new ui.S3),this.setPageTitle(n),this.refreshLayout(),this.viewService.resetUI(),this.viewService.resetContentMode()}),this.store.select(le.S.getChapter).pipe((0,y.p)(n=>!!n),(0,Ue.T)(()=>this.store.selectSnapshot(b.N.getSelectedChapter)),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{if(this.viewService.applyChapterCamera(n),this.viewService.applyChapterScenegraph(n),this.engineService.fireEvent(qt.X.SceneLoaded,null),this.store.selectSnapshot(m.Pf.getPlaythroughEnabled)){const t=this.store.selectSnapshot(m.Pf.getForceAudio);this.viewPlaythroughService.startChapterTimers(n,t);const i=this.store.selectSnapshot(b.N.getNextChapter);this.viewPlaythroughService.preloadAudio([i],t)}})}startPlaythroughMonitoring(){this.stopPlaythroughMonitoring(),this.playthroughMonitor$=(0,Ae.z)([this.viewPlaythroughService.audioSubject,this.viewPlaythroughService.animationSubject,this.viewPlaythroughService.readingSubject,this.viewPlaythroughService.minimumSubject]).pipe((0,Qt.Z)(50),(0,Ue.T)(([n,t,i,_])=>n.complete&&t.complete&&i.complete&&_.complete),(0,Ke.F)(),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{n&&this.viewPlaythroughService.startCountdown()}),this.playthroughCountdown$=this.viewPlaythroughService.countdownComplete.pipe((0,y.p)(()=>this.store.selectSnapshot(m.Pf.getPlaythroughEnabled)),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{const n=this.store.selectSnapshot(m.Pf.getPlaythroughSettings);this.store.selectSnapshot(b.N.isLastChapter)?n.loop?this.viewService.firstChapter("Playthrough Loop"):this.openPlaythroughDialog():this.viewService.nextChapter("playthrough")}),this.playthroughInterrupt$=(0,Ri.h)((0,Ve.R)(document,"mousemove").pipe((0,Qt.Z)(50),(0,y.p)(n=>n.buttons>0)),(0,Ve.R)(document,"mousedown"),(0,Ve.R)(document,"keydown"),(0,Ve.R)(document,"wheel")).pipe((0,y.p)(()=>this.viewPlaythroughService.audioSubject.getValue().complete&&this.viewPlaythroughService.animationSubject.getValue().complete&&this.viewPlaythroughService.readingSubject.getValue().complete&&this.viewPlaythroughService.minimumSubject.getValue().complete),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.viewPlaythroughService.delayCountdown()})}stopPlaythroughMonitoring(){[this.playthroughMonitor$,this.playthroughCountdown$,this.playthroughInterrupt$].forEach(n=>{n instanceof da.yU&&n.unsubscribe()})}openPlaythroughDialog(){(0,R.isNil)(this.playthroughDialog)&&(this.playthroughDialog=this.dialog.open(vo,{width:"100%",height:"100%"}),this.playthroughDialog.closed.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{switch(n){case"explore":this.stopPlaythrough(),this.viewService.togglePlaythrough(!1,!1),this.viewService.firstChapter("Playthrough Modal - Explore");break;case"playAgain":this.viewService.togglePlaythrough(!0,!0),this.viewService.firstChapter("Playthrough Modal - Play Again");break;case"takeQuiz":this.stopPlaythrough(),this.viewService.togglePlaythrough(!1,!1),this.viewQuizService.startQuiz();break;default:this.stopPlaythrough(),this.viewService.togglePlaythrough(!1,!1)}this.playthroughDialog=null}))}initChapterAudioPlayer(){this.store.select(b.N.getSelectedChapterId).pipe((0,y.p)(n=>!!n),(0,i_.M)(()=>{this.mediaService.stopAllAudio()}),(0,Be.B)(300),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{const n=this.store.selectSnapshot(m.Pf.getForceAudio);this.store.selectSnapshot(O.j.getQuizModeActive)||(n||this.viewUIService.isAudioVisible())&&this.viewService.playChapterAudio(n)})}initLoadProgressObserver(){this.chapterLoadProgress=0,this.store.select(Vi.N.getChaptersLoadProgress).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=this.store.selectSnapshot(Oe.t.getLoadingChapter),i=this.store.selectSnapshot(b.N.getSelectedChapterId);if(!(0,R.isNil)(t)&&i===t.chapterId){const s=100*(n[i]??0);this.store.dispatch(new B.B.ToggleWindow(Kt.U.Loader,!0)),this.chapterLoadProgress=s,this.changeDetectorRef.markForCheck()}}),this.store.select(Vi.N.getStoryLoadProgress).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.engineService.fireEvent(qt.X.HumanProgress,{progress:n})}),this.actions.pipe((0,l.rM)(r_.dC),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.chapterLoadProgress=100,this.changeDetectorRef.markForCheck(),this.store.dispatch(new B.B.ToggleWindow(Kt.U.Loader,!1)),this.liveAnnouncer.announce("Loading complete","polite")})}initPlaythroughObserver(){(0,Ae.z)([this.store.select(m.Pf.getPlaythroughEnabled),this.viewWindow$,this.quizModeActive$]).pipe((0,Ke.F)(),(0,g.Q)(this.ngUnsubscribe)).subscribe(([n,t,i])=>{n&&null===t&&!0!==i?this.startPlaythrough():this.stopPlaythrough()})}initWindowObserver(){this.viewWindow$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{if(this.viewService.resetUI(),n===Kt.U.Tutorial||n===Kt.U.Interact)this.viewService.resetChapter(),this.viewService.toggleLabels(!1);else{const t=this.viewUIService.isUIEnabled(h.U.Labels);this.viewService.toggleLabels(t)}})}initMobileNav(){const n=(this.platform.ANDROID||this.platform.IOS||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&(!function ma(){try{return window.self!==window.top}catch{return!0}}()||mi.c.platform===c_.N.SDK);this.store.dispatch(new B.B.SetIsMobileWeb(n))}initBackgroundColorObserver(){this.background$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.isBackgroundLight=(0,a_.T4)(n),this.changeDetectorRef.markForCheck()})}initToolsFadeout(){this.showTools$.pipe((0,g.Q)(this.ngUnsubscribe),(0,Ke.F)()).subscribe(i=>{this.showZones=this.store.selectSnapshot(m.Pf.getIsMobileWeb)?i?["top","right","bottom","left"]:["bottom"]:i?["top","right","bottom","left"]:["top"],this.changeDetectorRef.markForCheck()});const n=this.store.selectSnapshot(m.Pf.getFadeout);0===n&&this.showTools$.next(!0);const t=this.store.selectSnapshot(m.Pf.getIsMobileWeb);this.viewLayout$.pipe((0,g.Q)(this.ngUnsubscribe),(0,Ke.F)()).subscribe(i=>{this.showTools$.next(i===Xn.G.Column||0===n||t)}),this.showTools$.pipe((0,y.p)(i=>!0===i),(0,y.p)(()=>0!==n),(0,Be.B)(this.store.selectSnapshot(m.Pf.getFadeout)),(0,y.p)(()=>this.viewLayout$.getValue()!==Xn.G.Column),(0,y.p)(()=>!t),(0,y.p)(()=>!this.store.selectSnapshot(m.Pf.getFadeoutPaused)),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.showTools$.next(!1)}),this.focusMonitor.monitor(document.body,!0).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(i=>{this.focusOrigin=i,("keyboard"===i||"touch"===i)&&this.showTools$.next(!0)}),this.viewService.observeMaterialOverlay(),this.viewService.materialOverlayOut$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new B.B.SetPreventFadeoutEvent("overlay",this.viewService.isMaterialMenuOut()))})}initVendorAnalyticsEvents(){const n={totalQuestions:0};this.store.select(O.j.getQuestionTotal).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(t=>{n.totalQuestions=t}),this.store.select(O.j.getQuizModeActive).pipe((0,y.p)(()=>this.store.selectSnapshot(O.j.getQuestionTotal)>0),(0,g.Q)(this.ngUnsubscribe)).subscribe(t=>{t&&this.vendorAnalyticsService.track("Quiz - Entered",n)}),this.actions.pipe((0,l.xi)(Rt.B.SubmitQuestionAnswer),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{const t=this.store.selectSnapshot(O.j.getActiveQuestionIndex),i=this.store.selectSnapshot(O.j.getQuestionsRemaining);0===t&&this.vendorAnalyticsService.track("Quiz - First Question Answered",n),0===i&&this.vendorAnalyticsService.track("Quiz - Completed",n)}),this.store.select(b.N.getSelectedChapterModelReady).pipe((0,y.p)(t=>t),(0,ut.s)(1),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{const t=this.store.selectSnapshot(Oe.t.getStoryId),i=this.store.selectSnapshot(Oe.t.getStory);this.vendorAnalyticsService.trackOncePerPage("View - Loaded",{id:t,chapters:i.chapters.length,tour:i.tags.includes("tour"),animated:i.tags.includes("animated"),quiz:this.store.selectSnapshot(O.j.hasQuiz),edit:!1})})}initAccessibility(){this.actions.pipe((0,l.xi)(bt.yr)).subscribe(n=>{this.liveAnnouncer.announce("Object "+(n.show?"shown":"hidden"))})}initTooltips(){this.mediaUI$.pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.mediaBarTooltip="collapse"===n?.status?$localize`Open Media Bar`:$localize`Close Media Bar`,this.changeDetectorRef.markForCheck()})}initQuizStateListener(){(0,Ae.z)([this.actions.pipe((0,l.rM)(r_.t1)),this.store.select(Ht.J.getSelectedBookmarkViewMode)]).pipe((0,y.p)(([,n])=>!(0,R.isNil)(n)),(0,g.Q)(this.ngUnsubscribe)).subscribe(([,n])=>{const t=this.store.selectSnapshot(O.j.getQuizSettings);this.store.dispatch(new Rt.B.SetQuizSettings({...t,enabled:n!==Wi._.Content}))})}initVisibilityLayers(){this.visibilityLayersService.initObservables(),this.legacyVisibilityLayersService.initObservables()}destroyVisibilityLayers(){this.visibilityLayersService.destroyObservables(),this.legacyVisibilityLayersService.destroyObservables()}initAnatomyTree(){this.store.dispatch(new Ta.Z(!1))}handleFirstClickTracking(n){n.composedPath().some(s=>"APP-SITE-HEADER"===s.nodeName)||1===this.store.selectSnapshot(Vi.N.getStoryLoadProgress)&&this.vendorAnalyticsService.trackOncePerPage("First Click")}handleToggleAutoplay(n){this.viewService.toggleAutoplay(n)}handleColumnToggle(){this.viewService.toggleColumn(),this.changeDetectorRef.markForCheck()}handleDrawClick(){this.viewService.toggleWhiteboard(!0)}handleQuizClick(){this.viewQuizService.startQuiz()}handleExitQuiz(){this.viewQuizService.exitQuiz()}handleToggleSearch(n){this.viewService.toggleSearch(vt.q.Tree,n)}handleToggleLayers(){this.viewService.toggleLayers(!1)}handleSelectTool(n){this.viewService.selectTool(n)}handleToggleMedia(n){this.viewService.toggleMedia(n)}checkLabelsCollapsed(){const n=this.store.selectSnapshot(hi.V.getHorizontalBreakpoint),t=this.store.selectSnapshot(m.Pf.getLabelsBreakpoint),i=this.isLabelBreaking(t);this.store.dispatch(new ui.vf(i,n>=Ui.m.Large?o_.Q.Toggle:o_.Q.None))}isLabelBreaking(n){return window.innerWidth<n}bindKeyboard(){Ne.bind("1",()=>this.viewService.selectTool(Ze.s.Select)),Ne.bind("2",()=>this.viewService.selectTool(Ze.s.Hide)),Ne.bind("3",()=>this.viewService.selectTool(Ze.s.Fade)),Ne.bind(["command+,","ctrl+,"],n=>{n.preventDefault(),this.store.selectSnapshot(hi.V.getHorizontalBreakpoint)>Ui.m.Medium?this.viewService.toggleColumn():this.viewService.toggleDrawer(),this.changeDetectorRef.markForCheck()}),Ne.bind(["command+enter","ctrl+enter","command+p"],n=>{n.preventDefault(),Yt.g.toggleFullscreen()}),Ne.bind("meta+z",n=>{n.preventDefault(),this.viewService.undo()}),Ne.bind(["meta+y","meta+shift+z"],n=>{n.preventDefault(),this.viewService.redo()}),Ne.bind([".","pagedown"],()=>this.viewService.nextChapter("Keyboard")),Ne.bind([",","pageup"],()=>this.viewService.previousChapter("Keyboard")),Ne.bind(["del","backspace"],n=>{n.preventDefault(),this.viewService.hideSelectedStructures()}),Ne.bind("R",n=>{n.preventDefault(),this.viewService.resetChapter()}),Ne.bind("p",n=>{n.preventDefault(),this.viewService.togglePan()}),Ne.bind("/",()=>{const n=this.store.selectSnapshot(O.j.getQuizModeActive),t=this.store.selectSnapshot(T.dF.getUIEntry(h.U.Search))?.enable??!1;!n&&t&&this.viewService.toggleSearch()}),Ne.bind("?",()=>this.viewService.toggleHelp(fo.J.Shortcuts)),Ne.bind(["space","k"],n=>{n.preventDefault(),this.viewService.toggleAnimation()}),Ne.bind(["j","l"],n=>{switch(n.preventDefault(),n.key){case"j":this.animationService.scrubRelative(-1,!0);break;case"l":this.animationService.scrubRelative(1,!0)}}),Ne.bind(["H","I","F"],n=>{n.preventDefault();const t=this.store.selectSnapshot(di.z.getCheckedNodeIds);if(t.length>0)switch(n.key){case"H":this.store.dispatch(new bt.yr(!1,t));break;case"I":this.nodeService.hideInverse(t);break;case"F":this.nodeService.fade(t)}})}unbindKeyboard(){Ne.reset()}checkFocus(){const n=i=>!(!i||!i.contains(document.activeElement));let t;n(this.columnContainer.nativeElement)?t="column":n(this.drawerContainer?.nativeElement)&&(t="drawer"),this.store.dispatch(new B.B.SetFocusedElement(t))}resizeEngineContainer(){const{top:n,left:t,width:i,height:_}=this.engineContainer.nativeElement.getBoundingClientRect(),s=new pa.j(i,_,t,n,i,_,ua.g.Shown,1);this.store.dispatch(new Pe.Sh(s))}updateViewHeight(){const n=this.store.selectSnapshot(gi.W.getSiteHeader),t=this.store.selectSnapshot(gi.W.getSiteHeaderHeight),i=(0,Wn.Un)(n),_=(0,Wn.mJ)(n,t,i);this.view.nativeElement.style.setProperty("--vh",`${_}px`)}resetScene(){this.store.dispatch(new Pe.t5(!0)),this.store.dispatch(new Pe.dB(!1)),this.store.dispatch(new Pe.pL(Ze.s.Select)),this.store.dispatch(new __.J),this.store.dispatch(new zn.pU(!1)),this.engineService.getEvent(qt.X.AssetsLoadProgress).pipe((0,ut.s)(1),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new Pe.dB(!0))})}refreshLayout(){const n=this.store.selectSnapshot(T.dF.getUI),t=this.store.selectSnapshot(m.Pf.getLayout);this.viewLayout$.next(this.viewUIService.getViewLayout(t)),this.columnLayoutStatus=n.column.status,this.updateViewHeight(),this.resizeEngineContainer(),this.store.dispatch(new ui.Tz(n.anatomyLabels.enable??!0,n.nodeInfo.enable??!0,!0,n.nodeAudio.enable??!0)),this.store.dispatch(new Pe.Gv((n.labels.enable??!0)&&(n.labels.shown??!0))),this.changeDetectorRef.markForCheck()}setPageTitle(n){const t=(0,R.get)(n,"displayName");this.title.setTitle((t?`${t} | `:"")+"BioDigital Human Platform")}deselectLabel(){this.store.dispatch(new ui.TR(null))}startPlaythrough(){this.startPlaythroughMonitoring();const n=this.store.selectSnapshot(m.Pf.getPlaythroughSettings);this.store.dispatch(new B.B.SetForceAudio(n.forceAudio));const t=n.forceAudio,i=this.store.selectSnapshot(b.N.getSelectedChapter),_=this.store.selectSnapshot(m.Pf.getViewLanguage);(t||this.mediaService.chapterHasAudio(i,_))&&(this.store.dispatch(new Bn.O.SetAudioMuted(!1)),this.viewService.playChapterAudio(t),this.store.dispatch(new So.p.ToggleVisible({[h.U.Audio]:!0}))),this.viewPlaythroughService.startChapterTimers(i,t)}stopPlaythrough(){this.stopPlaythroughMonitoring(),this.viewPlaythroughService.clearChapterTimers(),this.mediaService.stopAllAudio(),this.mediaService.muteAudio(),this.store.dispatch(new Bn.O.SetAudioMuted(!0))}}(An=I).\u0275fac=function(n){return new(n||An)(e.rXU(he.nX),e.rXU(e.gRc),e.rXU(l.il),e.rXU(l.En),e.rXU(L.Ai),e.rXU(Z.z),e.rXU($i.k),e.rXU(Eo.d),e.rXU(Pi.y),e.rXU(ba.w),e.rXU(ki.O),e.rXU(Oo.S),e.rXU(e_.e),e.rXU(xi.u),e.rXU(m_.hE),e.rXU(it.OD),e.rXU(p_),e.rXU(L.FN),e.rXU(u_.lG),e.rXU(Dn.u),e.rXU(g_.n))},An.\u0275cmp=e.VBU({type:An,selectors:[["app-view-page"]],viewQuery:function(n,t){if(1&n&&(e.GBs(Hu,7),e.GBs(Qu,7),e.GBs(Yu,5),e.GBs(qu,7),e.GBs(Ku,7),e.GBs(Zu,5),e.GBs(Ju,5),e.GBs(eh,7),e.GBs(th,5)),2&n){let i;e.mGM(i=e.lsd())&&(t.viewContainer=i.first),e.mGM(i=e.lsd())&&(t.columnContainer=i.first),e.mGM(i=e.lsd())&&(t.drawerContainer=i.first),e.mGM(i=e.lsd())&&(t.engineContainer=i.first),e.mGM(i=e.lsd())&&(t.view=i.first),e.mGM(i=e.lsd())&&(t.viewCameraBar=i.first),e.mGM(i=e.lsd())&&(t.viewLogo=i.first),e.mGM(i=e.lsd())&&(t.viewSceneBase=i.first),e.mGM(i=e.lsd())&&(t.viewToolbar=i.first)}},hostBindings:function(n,t){1&n&&e.bIt("click",function(_){return t.onClick(_)},!1,e.EBC)("focusin",function(_){return t.onFocusin(_)},!1,e.EBC)("focusout",function(_){return t.onFocusout(_)},!1,e.EBC)("mousemove",function(_){return t.onActive(_)},!1,e.EBC)("mouseenter",function(_){return t.onActive(_)},!1,e.EBC)("touchstart",function(_){return t.onActive(_)},!1,e.EBC)("mouseleave",function(_){return t.onInactive(_)},!1,e.EBC)},decls:76,vars:110,consts:()=>{let o,n,t,i,_,s,a,r,u;return o=$localize`:␟66a82c6638b304a349b7d43b13482fa7493419c9␟1556772664146095223:Take Quiz`,n=$localize`:␟a8428f42065b95600de48a6a73096f397fe77548␟7584706465725808283:Media Controls`,t=$localize`:␟76fbeb67fc76fbebecb31395a76d10d6f65188f4␟4157627069774048070:Exit Quiz`,i=$localize`:␟774e30c83aba684afbcbdfc30ab51e5ccdbb08ef␟5018030683477673235:Close Anatomy`,_=$localize`:␟b4c7cd9839a91a097a7d23041261d812818f2688␟1240960779977380559:Anatomy Search`,s=$localize`:␟8d649ab3a81d2e70497b706acb98ee078c9625cf␟6438735765171590350:Close anatomy column`,a=$localize`:␟e6871f3c841a7ea3095d82216180cdf00363e630␟7224674749555007457:Close Anatomy Layers`,r=$localize`:␟3a7999f75941d258d1b67979cf1dc683a5db872b␟8605048384026546143:Anatomy Layers`,u=$localize`:␟c02273112dd8379f0d352a3b817f7c69bc525b3c␟7920034665687725450:Close layers`,[["viewContainer",""],["view",""],["engineContainer",""],["viewSceneBase",""],["columnContainer",""],["drawerContainer",""],o,t,_,s,r,u,["role","main","id","viewContainer"],[1,"view-page",3,"ngClass"],["id","engine-container","data-test","viewEngineContainer",1,"view-page__engine"],[3,"contextMenuEnable"],[3,"showZones"],["left",""],[4,"ngIf"],[3,"layout",4,"ngIf"],["top","",4,"ngIf"],["right",""],[1,"flex","flex-col","justify-end","h-full"],["orientation","vertical","class","mt-2","data-test","viewFullscreen",4,"ngIf"],["bottom",""],["class","w-full",4,"ngIf"],["class","view-page__logo",3,"ngClass","logoColor","logoSize",4,"ngIf"],["class","view-page__exit-quiz",4,"ngIf"],[1,"view-page__scene-base"],["class","view-page__column",4,"ngIf"],["data-test","viewSearch",3,"floating","padded","wide",4,"ngIf"],["data-test","viewVisibilityLayers",3,"wide","floating","padded",4,"ngIf"],["class","view-page__drawer",4,"ngIf"],["class","view-block-input",4,"ngIf"],[3,"contentId","contentType",4,"ngIf"],[3,"show","percent",4,"ngIf"],["data-test","viewWhiteboard",4,"ngIf"],[4,"appFlagApplication","appFlagApplicationMode","appFlagApplicationNative"],[3,"layout"],["top",""],["class","w-full view-page__title-nav",4,"ngIf"],[1,"w-full","view-page__title-nav"],["class","view-page__drawer-nav",3,"ngClass",4,"ngIf"],[1,"view-page__drawer-nav",3,"ngClass"],["appPreventFadeout","",4,"ngIf"],["appPreventFadeout",""],["app-view-button","","buttonSize","small",3,"click"],["size","lg","icon","user-graduate"],["class","flex justify-between w-full",4,"ngIf"],[1,"flex","justify-between","w-full"],[1,"flex","gap-2"],["app-view-button","","buttonSize","small","data-test","viewQuizButton",3,"click",4,"ngIf"],["app-view-button","","buttonSize","small","data-test","viewQuizButton",3,"click"],["icon","user-graduate",1,"pl-3"],[1,"px-3","text-xs","font-semibold","uppercase"],["orientation","vertical","data-test","viewFullscreen",1,"mt-2"],["buttonSize","small"],[1,"w-full"],["class","flex justify-end gap-2","role","group","aria-label",n,4,"ngIf"],["class","view-page__mobile-nav",3,"ngClass",4,"ngIf"],["role","group","aria-label",n,1,"flex","justify-end","gap-2"],[3,"ngClass",4,"ngIf"],["orientation","horizontal",4,"ngIf"],[3,"ngClass"],["orientation","horizontal","appPreventFadeout","",3,"ngClass"],["appPreventFadeout","","app-view-button","","matTooltipPosition","left","buttonSize","small","data-test","viewMediaToggle",3,"matTooltip","thin","click",4,"ngIf"],["orientation","horizontal"],[1,"w-full",3,"autoFocus","showSpeed","showScrubber"],["appPreventFadeout","","app-view-button","","matTooltipPosition","left","buttonSize","small","data-test","viewMediaToggle",3,"click","matTooltip","thin"],["icon","angle-right","appLogicalDir",""],["icon","angle-left","appLogicalDir",""],[1,"view-page__mobile-nav",3,"ngClass"],[2,"min-width","0",3,"ngClass"],[3,"showTitle",4,"ngIf"],[3,"showTitle"],[1,"view-page__logo",3,"ngClass","logoColor","logoSize"],[1,"view-page__exit-quiz"],[1,"px-3","text-xs","uppercase"],[1,"view-page__column"],["data-test","viewSearch",3,"floating","padded","wide"],["header",""],[1,"flex","justify-between"],[1,"px-3","py-6","text-base","font-semibold"],["app-view-button","","matTooltip",i,"matTooltipPosition","right","data-test","viewSearchClose",3,"click"],["icon","times"],[1,"sr-only"],["body",""],[1,"h-full","px-3"],["data-test","viewVisibilityLayers",3,"wide","floating","padded"],["app-view-button","","matTooltip",a,"matTooltipPosition","right","data-test","viewVisibilityLayersClose",3,"click"],[1,"h-full","px-3","py-4"],[1,"view-page__drawer"],[1,"view-block-input"],[3,"contentId","contentType"],[3,"show","percent"],[3,"percent",4,"ngIf"],[3,"percent"],["data-test","viewWhiteboard"]]},template:function(n,t){if(1&n&&(e.j41(0,"div",12,0)(2,"div",13,1),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"async"),e.nI1(9,"async"),e.nI1(10,"async"),e.nI1(11,"async"),e.nI1(12,"async"),e.nI1(13,"async"),e.j41(14,"div",14,2),e.nrm(16,"app-engine",15),e.nI1(17,"async"),e.j41(18,"app-view-zones",16),e.qex(19,17),e.DNE(20,rh,1,0,"app-view-toolbar",18),e.nI1(21,"async"),e.DNE(22,lh,2,3,"app-view-undo",19),e.nI1(23,"async"),e.bVm(),e.DNE(24,mh,6,9,"ng-container",20),e.nI1(25,"async"),e.nI1(26,"async"),e.DNE(27,Oh,5,7,"ng-container",20),e.nI1(28,"async"),e.DNE(29,wh,1,0,"ng-container",20),e.nI1(30,"async"),e.nI1(31,"async"),e.qex(32,21),e.j41(33,"div",22),e.DNE(34,Ih,1,0,"app-engine-camera-bar",18),e.nI1(35,"async"),e.DNE(36,Ch,2,0,"app-pillbox",23),e.nI1(37,"async"),e.k0s(),e.bVm(),e.qex(38,24),e.DNE(39,Dh,6,8,"div",25),e.nI1(40,"async"),e.nI1(41,"async"),e.bVm(),e.k0s(),e.DNE(42,Lh,5,15,"app-view-logo",26),e.nI1(43,"async"),e.DNE(44,$h,5,0,"div",27),e.nI1(45,"async"),e.nI1(46,"async"),e.nrm(47,"div",28,3),e.k0s(),e.j41(49,"div",null,4),e.DNE(51,xh,1,0,"app-view-column-container",29),e.nI1(52,"async"),e.DNE(53,kh,13,5,"app-view-column",30),e.nI1(54,"async"),e.DNE(55,Gh,13,5,"app-view-column",31),e.nI1(56,"async"),e.nI1(57,"async"),e.k0s(),e.DNE(58,Wh,3,0,"div",32),e.nI1(59,"async"),e.k0s()(),e.DNE(60,zh,1,0,"div",33),e.nI1(61,"async"),e.DNE(62,Xh,1,2,"app-view-ondemand",34),e.nI1(63,"async"),e.DNE(64,Bh,2,4,"app-view-progress",35),e.nI1(65,"async"),e.DNE(66,Yh,9,12,"app-view-loader",18),e.nI1(67,"async"),e.DNE(68,qh,1,0,"app-view-tour",18),e.nI1(69,"async"),e.DNE(70,Kh,1,0,"app-view-whiteboard",36),e.nI1(71,"async"),e.DNE(72,Zh,1,0,"app-view-print",18),e.nI1(73,"async"),e.DNE(74,Jh,1,0,"app-view-content-warning",37),e.nrm(75,"app-view-iphone12-warning")),2&n){let i,_,s,a,r;e.R7$(2),e.Y8G("ngClass",e.lV(101,ih,"column"===e.bMT(4,27,t.viewLayout$),"drawer"===e.bMT(5,29,t.viewLayout$),e.bMT(6,31,t.paginationVisible$),e.bMT(7,33,t.columnVisible$),!1===e.bMT(8,35,t.columnVisible$),e.bMT(9,37,t.drawerVisible$)&&"show"===(null==(i=e.bMT(10,39,t.drawerUI$))?null:i.status),!1===e.bMT(11,41,t.drawerVisible$),e.bMT(12,43,t.drawerVisible$)&&"collapse"===(null==(i=e.bMT(13,45,t.drawerUI$))?null:i.status))),e.R7$(14),e.Y8G("contextMenuEnable",null==(_=e.bMT(17,47,t.contextMenu$))?null:_.enable),e.R7$(2),e.Y8G("showZones",t.showZones),e.R7$(2),e.Y8G("ngIf",e.bMT(21,49,t.toolbarVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(23,51,t.undoVisible$)),e.R7$(2),e.Y8G("ngIf","drawer"===e.bMT(25,53,t.viewLayout$)&&!1===e.bMT(26,55,t.isMobileWeb$)),e.R7$(3),e.Y8G("ngIf","column"===e.bMT(28,57,t.viewLayout$)),e.R7$(2),e.Y8G("ngIf","drawer"===e.bMT(30,59,t.viewLayout$)&&!0===e.bMT(31,61,t.isMobileWeb$)),e.R7$(5),e.Y8G("ngIf",e.bMT(35,63,t.cameraVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(37,65,t.fullscreenVisible$)),e.R7$(3),e.Y8G("ngIf",!0===e.bMT(40,67,t.isMobileWeb$)||e.bMT(41,69,t.mediaVisible$)),e.R7$(3),e.Y8G("ngIf",e.bMT(43,71,t.logoVisible$)),e.R7$(2),e.Y8G("ngIf",e.bMT(45,73,t.quizModeActive$)&&!e.bMT(46,75,t.quizModeLocked$)),e.R7$(7),e.Y8G("ngIf",e.bMT(52,77,t.columnVisible$)),e.R7$(2),e.Y8G("ngIf","show"===(null==(s=e.bMT(54,79,t.searchUI$))?null:s.status)),e.R7$(2),e.Y8G("ngIf","show"===(null==(a=e.bMT(56,81,t.visibilityLayersUI$))?null:a.status)&&"group"===(null==(a=e.bMT(57,83,t.visibilityLayersUI$))?null:a.layersMode)),e.R7$(3),e.Y8G("ngIf",e.bMT(59,85,t.drawerVisible$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(61,87,t.inputEnabled$)),e.R7$(2),e.Y8G("ngIf",e.bMT(63,89,t.viewWindow$)===t.viewWindow.OnDemand),e.R7$(2),e.Y8G("ngIf","circle"===(null==(r=e.bMT(65,91,t.viewUI$))?null:r.loader.template)),e.R7$(2),e.Y8G("ngIf",e.bMT(67,93,t.viewWindow$)===t.viewWindow.Interact),e.R7$(2),e.Y8G("ngIf",e.bMT(69,95,t.viewWindow$)===t.viewWindow.Tutorial),e.R7$(2),e.Y8G("ngIf",e.bMT(71,97,t.viewWindow$)===t.viewWindow.Whiteboard),e.R7$(2),e.Y8G("ngIf",e.bMT(73,99,t.usePrintImage$)),e.R7$(2),e.Y8G("appFlagApplication",t.application.All)("appFlagApplicationMode","include")("appFlagApplicationNative",t.nativePlatform.All)}},dependencies:[J.ri,p.YU,p.bT,E_.Y,Ei.s,Ot.e,va._,Oa.k,q.R,ye.oV,Vt.O,wo.p,Pt,qn,Qn,go,S_,T_,b_,no,lc,Po,Re,Rc,$c,Gc,Xc,hn,xo,ko,vd,xt,Et,Q,co,po,Mt,Fu,Q_,W_,p.Jj],styles:['.view-page{--drawer-height: 0;--column-width: 320px;border:none;width:100vw;height:calc(var(--vh, 1vh) * 100);max-height:100vh;overflow:hidden;display:grid;transition:all .25s}.view-page--layout-column{grid-template-rows:100%;grid-template-columns:var(--column-width) 1fr;grid-template-areas:"column engine"}.view-page--layout-drawer{grid-template-rows:1fr var(--drawer-height);grid-template-columns:1fr;grid-template-areas:"engine" "drawer"}.view-page--column-open{--column-width: 320px}.view-page--column-open.view-page--show-aside{--column-width: 424px}.view-page--column-closed{--column-width: 0}.view-page--drawer-peek{--drawer-height: 40px}.view-page--drawer-open{--drawer-height: 40%}.view-page--drawer-closed.view-page--has-drawer{--drawer-height: 0}.view-page__column{background-color:#fff;grid-area:column;height:100%}.view-page__engine{grid-area:engine;width:100%;height:100%;position:relative}.view-page__drawer{max-width:100vw;border-top:1px solid #d7e0ea;background-color:#fff;grid-area:drawer}.view-page--drawer-push{padding-bottom:var(--drawer-height)}.view-page__title-nav{display:flex;justify-content:flex-start;gap:8px}.view-page__drawer-nav{display:grid;grid-template-columns:minmax(0,1fr) auto;width:auto}.view-page__drawer-nav--overflow{gap:8px}.view-page__mobile-nav{display:flex;justify-content:space-between;gap:8px;width:auto}.view-page__logo{display:inline-block;position:absolute;inset-inline-start:12px;inset-block-end:12px;z-index:10}.view-page__logo--raised{inset-block-end:62px}.view-page__exit-quiz{position:absolute;inset-block-start:12px;inset-inline-end:12px;z-index:10}.view-page__scene-base{position:absolute;left:0;bottom:0;right:0;z-index:10;transition:transform .3s}@media (prefers-reduced-motion: reduce){.view-page{transition:none}}.view-block-input{position:fixed;inset:0;z-index:10000}\n'],encapsulation:2,changeDetection:0}),C([(0,l.l6)(Oe.t.getStory),M("design:type",d.c)],I.prototype,"story$",void 0),C([(0,l.l6)(Oe.t.getStoryId),M("design:type",d.c)],I.prototype,"storyId$",void 0),C([(0,l.l6)(T.dF.getUI),M("design:type",d.c)],I.prototype,"viewUI$",void 0),C([(0,l.l6)(m.Pf.getAutoplay),M("design:type",d.c)],I.prototype,"autoplay$",void 0),C([(0,l.l6)(m.Pf.getInputEnabled),M("design:type",d.c)],I.prototype,"inputEnabled$",void 0),C([(0,l.l6)(m.Pf.getIsMobileWeb),M("design:type",d.c)],I.prototype,"isMobileWeb$",void 0),C([(0,l.l6)(m.Pf.getContentMode),M("design:type",d.c)],I.prototype,"contentMode$",void 0),C([(0,l.l6)(m.Pf.getFullscreenActive),M("design:type",d.c)],I.prototype,"fullscreenActive$",void 0),C([(0,l.l6)(m.Pf.getDrawerCoversContent),M("design:type",d.c)],I.prototype,"drawerCoversContent$",void 0),C([(0,l.l6)(m.Pf.getInteractType),M("design:type",d.c)],I.prototype,"interactType$",void 0),C([(0,l.l6)(m.Pf.getOnDemand),M("design:type",d.c)],I.prototype,"onDemand$",void 0),C([(0,l.l6)(m.Pf.getShowHelpTab),M("design:type",d.c)],I.prototype,"showHelpTab$",void 0),C([(0,l.l6)(m.Pf.getUsePrintImage),M("design:type",d.c)],I.prototype,"usePrintImage$",void 0),C([(0,l.l6)(m.Pf.getOpenWindow),M("design:type",d.c)],I.prototype,"viewWindow$",void 0),C([(0,l.l6)(m.Pf.getTutorialSeen),M("design:type",d.c)],I.prototype,"tutorialSeen$",void 0),C([(0,l.l6)(Vi.N.getStoryLoadProgress),M("design:type",d.c)],I.prototype,"storyLoadProgress$",void 0),C([(0,l.l6)(hi.V.getHorizontalBreakpoint),M("design:type",d.c)],I.prototype,"horizontalBreakpoint$",void 0),C([(0,l.l6)(hi.V.getVerticalBreakpoint),M("design:type",d.c)],I.prototype,"verticalBreakpoint$",void 0),C([(0,l.l6)(b.N.getSelectedChapter),M("design:type",d.c)],I.prototype,"chapter$",void 0),C([(0,l.l6)(b.N.getSelectedChapterReadyState),M("design:type",d.c)],I.prototype,"selectedChapterReady$",void 0),C([(0,l.l6)(b.N.getChaptersLoaded),M("design:type",d.c)],I.prototype,"chaptersLoaded$",void 0),C([(0,l.l6)(b.N.getSelectedChapterIndex),M("design:type",d.c)],I.prototype,"chapterIndex$",void 0),C([(0,l.l6)(b.N.getChapterCount),M("design:type",d.c)],I.prototype,"chapterCount$",void 0),C([(0,l.l6)(b.N.getSelectedChapterBackground),M("design:type",d.c)],I.prototype,"background$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.Audio)),M("design:type",d.c)],I.prototype,"audioVisible$",void 0),C([(0,l.l6)(le.S.getAnimationPlaying),M("design:type",d.c)],I.prototype,"animationPlaying$",void 0),C([(0,l.l6)(le.S.getHoveredNode),M("design:type",d.c)],I.prototype,"hoveredNode$",void 0),C([(0,l.l6)(le.S.getActiveTool),M("design:type",d.c)],I.prototype,"activeTool$",void 0),C([(0,l.l6)(le.S.getEnginePosition),M("design:type",d.c)],I.prototype,"enginePosition$",void 0),C([(0,l.l6)(le.S.getCanvasHeightBreakpoint),M("design:type",d.c)],I.prototype,"canvasHeightBreakpoint$",void 0),C([(0,l.l6)(Je.y.getSelectedLabel),M("design:type",d.c)],I.prototype,"selectedLabel$",void 0),C([(0,l.l6)(O.j.hasQuiz),M("design:type",d.c)],I.prototype,"hasQuiz$",void 0),C([(0,l.l6)(O.j.getQuizModeActive),M("design:type",d.c)],I.prototype,"quizModeActive$",void 0),C([(0,l.l6)(O.j.getQuizModeLocked),M("design:type",d.c)],I.prototype,"quizModeLocked$",void 0),C([(0,l.l6)(O.j.getQuizEnabled),M("design:type",d.c)],I.prototype,"quizEnabled$",void 0),C([(0,l.l6)(O.j.getActiveQuestionIndex),M("design:type",d.c)],I.prototype,"activeQuestionIndex$",void 0),C([(0,l.l6)(O.j.getQuestionTotal),M("design:type",d.c)],I.prototype,"questionTotal$",void 0),C([(0,l.l6)(m.Pf.getStartingTool),M("design:type",d.c)],I.prototype,"startingTool$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.Camera)),M("design:type",d.c)],I.prototype,"cameraVisible$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.Column)),M("design:type",d.c)],I.prototype,"columnVisible$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.Drawer)),M("design:type",d.c)],I.prototype,"drawerVisible$",void 0),C([(0,l.l6)(T.dF.getUIEntry(h.U.Drawer)),M("design:type",d.c)],I.prototype,"drawerUI$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.DrawerToggle)),M("design:type",d.c)],I.prototype,"drawerToggleVisible$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.Fullscreen)),M("design:type",d.c)],I.prototype,"fullscreenVisible$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.Logo)),M("design:type",d.c)],I.prototype,"logoVisible$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.Media)),M("design:type",d.c)],I.prototype,"mediaVisible$",void 0),C([(0,l.l6)(T.dF.getUIEntry(h.U.Media)),M("design:type",d.c)],I.prototype,"mediaUI$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.NodeInfo)),M("design:type",d.c)],I.prototype,"nodeInfoVisible$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.QuizPrompt)),M("design:type",d.c)],I.prototype,"quizPromptVisible$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.Search)),M("design:type",d.c)],I.prototype,"searchVisible$",void 0),C([(0,l.l6)(T.dF.getUIEntry(h.U.Search)),M("design:type",d.c)],I.prototype,"searchUI$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.TitleOnly)),M("design:type",d.c)],I.prototype,"titleOnlyVisible$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.Toolbar)),M("design:type",d.c)],I.prototype,"toolbarVisible$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.Undo)),M("design:type",d.c)],I.prototype,"undoVisible$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.VisibilityLayers)),M("design:type",d.c)],I.prototype,"visibilityLayersVisible$",void 0),C([(0,l.l6)(T.dF.getUIEntry(h.U.VisibilityLayers)),M("design:type",d.c)],I.prototype,"visibilityLayersUI$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.ColumnToggle)),M("design:type",d.c)],I.prototype,"columnToggleVisible$",void 0),C([(0,l.l6)(T.dF.getVisible(h.U.Pagination)),M("design:type",d.c)],I.prototype,"paginationVisible$",void 0),C([(0,l.l6)(T.dF.getUIEntry(h.U.ContextMenu)),M("design:type",d.c)],I.prototype,"contextMenu$",void 0);var Nn,eg=c(3909),qo=c(24477),tg=c(21424),ig=c(65459),ng=c(39596),Ko=c(38165);class Zo{constructor(n,t,i,_,s,a,r,u,f){this.store=n,this.router=t,this.actions=i,this.cleanupService=_,this.viewService=s,this.quizService=a,this.organizationsService=r,this.activatedRoute=u,this.userAccessService=f,this.ngUnsubscribe=new $.B,this.viewGateSubject=new $.B}ngOnInit(){this.initDynamicLayout(),this.initOrganizationViewConfig(),this.initQuizAutoStart(),mi.c.application===Li.c.Studio&&(this.initContentViews(),this.initPublicViewGate())}ngOnDestroy(){this.viewUI&&this.store.dispatch(new So.p.SetUI(this.viewUI)),this.store.dispatch(new B.B.ResetViewState),this.viewGateSubject.next(),this.viewGateSubject.complete(),this.cleanupService.resetScene(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initOrganizationViewConfig(){this.store.select(tg.q.getOrganization).pipe((0,y.p)(n=>!(0,R.isNil)(n)),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=this.organizationsService.getOrganizationAttribute(n.group_attributes,"app_settings","anatomy_description_fallback");(0,R.isNil)(t)||this.viewService.setAnatomyDescriptionFallback(t.value)})}initDynamicLayout(){(0,Ae.z)([this.store.select(b.N.getSelectedChapter),this.store.select(O.j.getQuizModeActive),this.store.select(O.j.getActiveQuestion)]).pipe((0,y.p)(([n])=>null!=n),(0,g.Q)(this.ngUnsubscribe)).subscribe(([n,t,i])=>{const _=(0,qo.Fm)(!0),s=(0,qo.JO)(n.ui),a=(0,qo.VD)(i);this.viewService.setUI({baseUIConfig:_,chapterUIConfig:s,quizUIConfig:t?a:null})})}initQuizAutoStart(){const n=this.activatedRoute.snapshot.queryParams,t=this.store.select(Ht.J.getSelectedBookmark),i=this.store.select(b.N.getSelectedChapterReadyState),_=this.store.select(O.j.hasQuiz);(0,Ae.z)([t,i,_]).pipe((0,y.p)(([s,a,r])=>{if(!s)return!1;const u=(0,R.get)(a,"model",!1),f=(0,R.get)(n,"quiz",!1);return u&&r&&(f||s.viewMode===Wi._.Quiz)}),(0,ut.s)(1),(0,g.Q)(this.ngUnsubscribe)).subscribe(([s])=>{this.quizService.startQuiz(),s.viewMode===Wi._.Quiz&&this.store.dispatch(new Rt.B.SetQuizLocked(!0))})}initContentViews(){const n=this.viewService.normalizeQueryParams(this.activatedRoute.snapshot.queryParams),t=n.id,i=n.type;(0,Ae.z)([this.store.select(wt.k.getLoggedInState),this.store.select(wt.k.isPremiumUser),this.store.select(b.N.getSelectedChapterModelReady),this.store.select(wt.k.getContentViews)]).pipe((0,y.p)(([_,s,a,r])=>"user"===_?.session_type&&!s&&a&&!r.limit_reached),(0,ut.s)(1),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new Ko.e0(t,i))})}initPublicViewGate(){this.actions.pipe((0,l.xi)(Ko.ec),(0,Ue.T)(n=>n.active),(0,En.Z)(!1),(0,Ke.F)(),(0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{n?this.createPublicViewGate():this.destroyPublicViewGate()}),this.store.select(wt.k.getLoggedIn).pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(n=>{this.store.dispatch(new Pe.E7(!n)),this.store.dispatch(new Ko.ec(!n))})}createPublicViewGate(){this.destroyPublicViewGate(),this.store.select(wt.k.getLoggedIn).pipe((0,y.p)(n=>!n),(0,U_.n)(()=>this.userAccessService.createViewinteractionGate(1e4,5,15)),(0,Ke.F)(),(0,y.p)(n=>n),(0,Ut.Z)(()=>this.userAccessService.openPublicViewGate()),(0,g.Q)(this.viewGateSubject),(0,g.Q)(this.ngUnsubscribe)).subscribe(()=>{this.createPublicViewGate()})}destroyPublicViewGate(){this.userAccessService.closePublicViewGate(),this.viewGateSubject.next()}}(Nn=Zo).\u0275fac=function(n){return new(n||Nn)(e.rXU(l.il),e.rXU(he.Ix),e.rXU(l.En),e.rXU(eg.M),e.rXU(Z.z),e.rXU($i.k),e.rXU(ig.k),e.rXU(he.nX),e.rXU(ng.p))},Nn.\u0275cmp=e.VBU({type:Nn,selectors:[["app-view-internal-page"]],decls:1,vars:0,template:function(n,t){1&n&&e.nrm(0,"router-outlet")},dependencies:[he.n3],changeDetection:0}),function(o,n,t,i){var a,_=arguments.length,s=_<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(o,n,t,i);else for(var r=o.length-1;r>=0;r--)(a=o[r])&&(s=(_<3?a(s):_>3?a(n,t,s):a(n,t))||s);_>3&&s&&Object.defineProperty(n,t,s)}([(0,l.l6)(Oe.t.getStory),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,d.c)],Zo.prototype,"story$",void 0);var gs=c(85884);const lg={title:"We're unable to find the model you're looking for.",description:'Please check your URL or visit the <a href="/" target="_blank">BioDigital Human</a> to see what\'s available in our 3D model library.'};var cg=c(41981);const dg={title:"Your BioDigital Human embed requires proper authentication.",description:""},pg={[cg.U.InvalidUAID]:{title:"Authentication Issues",description:"Your Human Widget has invalid user credentials.",url:"https://support.biodigital.com"}};var ug=c(37678),hg=c(21007);function gg(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",13),e.bIt("click",function(){e.eBV(t);const _=e.XpG(2);return e.Njj(_.handleSeeDetailsClick())}),e.EFF(1," See Details "),e.k0s()}}function mg(o,n){if(1&o&&(e.j41(0,"textarea",14),e.EFF(1,"        "),e.k0s()),2&o){const t=e.XpG(2);e.Y8G("value",t.engineErrorReport)}}function Eg(o,n){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"h1",3),e.EFF(2,"The BioDigital Human encountered an error."),e.k0s(),e.j41(3,"h2",4),e.EFF(4," Error: "),e.j41(5,"span",5),e.EFF(6),e.k0s()(),e.j41(7,"div",6),e.EFF(8," To receive assistance with this error, please follow these steps: "),e.k0s(),e.j41(9,"ol",7)(10,"li",8)(11,"button",9),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleDownloadClick())}),e.EFF(12," Download "),e.k0s(),e.EFF(13," the error report. "),e.k0s(),e.j41(14,"li",8)(15,"button",9),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleActionClick(_.supportURL))}),e.EFF(16," Share the report "),e.k0s(),e.EFF(17," with the customer support team. "),e.k0s()(),e.j41(18,"div",10),e.DNE(19,gg,2,0,"button",11),e.j41(20,"div"),e.DNE(21,mg,2,1,"textarea",12),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(6),e.JRh(t.engineErrorMessage),e.R7$(13),e.Y8G("ngIf",!t.viewEngineErrorDetails),e.R7$(2),e.Y8G("ngIf",t.viewEngineErrorDetails)}}function fg(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",3),e.EFF(1),e.k0s(),e.j41(2,"div",15),e.qex(3),e.j41(4,"button",9),e.bIt("click",function(){e.eBV(t);const _=e.XpG();return e.Njj(_.handleActionClick(_.supportURL))}),e.EFF(5," Contact Support "),e.k0s(),e.bVm(),e.k0s(),e.nrm(6,"div",16)}if(2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.title," "),e.R7$(5),e.Y8G("innerHTML",t.description,e.npT)}}let Sg=(()=>{var o;class n{handleSeeDetailsClick(){this.viewEngineErrorDetails=!0}get title(){return this.errorConfig.title}get description(){return this.errorConfig.description}constructor(i,_,s){this.router=i,this.snackBar=_,this.engineService=s,this.supportURL="https://support.biodigital.com",this.isEngineError=!1,this.viewEngineErrorDetails=!1;const{errorType:a,errorCode:r,error:u,errorUrl:f}=this.router.getCurrentNavigation().extras.state;this.errorType=a,this.errorUrl=f,this.errorCode=r,this.error=u}ngOnInit(){if(this.errorType===gs.Y.Engine){this.isEngineError=!0;const i={contentId:this.errorUrl,error:this.error,webglInfo:this.engineService.getWEBGLInfo()};this.engineErrorMessage=i.error.message,this.engineErrorReport=JSON.stringify(i,null,2)}else this.errorConfig=this.errorType===gs.Y.Content?lg:pg[this.errorCode]||dg}handleDownloadClick(){(0,ug.saveAs)(new Blob([this.engineErrorReport],{type:"text/plain"}),"BioDigital_Error_Report.txt")}handleActionClick(i){window.open(i)||this.snackBar.open("Unable to open link in new window, please check your pop-up settings.")}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(he.Ix),e.rXU(R_.UG),e.rXU(Pi.y))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-error-page"]],decls:4,vars:2,consts:[["notEngineError",""],[1,"error"],[4,"ngIf","ngIfElse"],[1,"text-2xl","font-bold"],[1,"text-base","mt-4","mb-8"],[1,"font-semibold"],[1,"text-base","mb-4"],[1,"text-base"],[1,"my-4"],["app-button","","buttonType","outline","buttonTheme","light",3,"click"],[1,"mt-8"],["app-button","","buttonType","outline","buttonTheme","light","buttonSize","xs",3,"click",4,"ngIf"],["class","error__details mt-2",3,"value",4,"ngIf"],["app-button","","buttonType","outline","buttonTheme","light","buttonSize","xs",3,"click"],[1,"error__details","mt-2",3,"value"],[1,"flex","items-start","mt-10"],[1,"error__description","text-base","mt-8",3,"innerHTML"]],template:function(i,_){if(1&i&&(e.j41(0,"div",1),e.DNE(1,Eg,22,3,"div",2)(2,fg,7,2,"ng-template",null,0,e.C5r),e.k0s()),2&i){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf",_.isEngineError)("ngIfElse",s)}},dependencies:[hg.Q,p.bT],styles:[".error[_ngcontent-%COMP%]{margin:0 auto;max-width:640px;display:flex;flex-direction:column;padding:40px;color:#283853}.error[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style:decimal}.error__details[_ngcontent-%COMP%]{width:100%;height:200px}.error__description[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .error__description[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#283853}"],changeDetection:0}),n})();var Jo=c(71263);let ms=(()=>{var o;class n{constructor(i,_){this.authService=i,this.store=_}canActivate(i,_){const s=this.store.selectSnapshot(wt.k.getLoggedIn);return s?(0,vi.of)(s):this.authService.isLoggedIn().pipe((0,Ue.T)(a=>a.signed_in))}}return(o=n).\u0275fac=function(i){return new(i||o)(e.KVO(Jo.u),e.KVO(l.il))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})();var Tg=c(69270);const bg=[yi.c.Module,yi.c.Bookmark],wg=[{path:"",component:ca.m,canActivate:[(()=>{var o;class n extends ms{constructor(i,_,s){super(i,_),this.authService=i,this.store=_,this.router=s}canActivate(i,_){const{id:s,be:a,m:r}=i.queryParams,f=(0,Tg.S)(s||a||r);return super.canActivate(i,_).pipe((0,Ut.Z)(P=>{const x=P||bg.includes(f);return(0,vi.of)(x||P)}))}}return(o=n).\u0275fac=function(i){return new(i||o)(e.KVO(Jo.u),e.KVO(l.il),e.KVO(he.Ix))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})()],data:{fixedHeight:!0},resolve:{siteHeaderType:(()=>{var o;class n{constructor(i,_){this.store=i,this.authService=_}resolve(i,_){return new ms(this.authService,this.store).canActivate(i,_).pipe((0,Ue.T)(s=>s?Qo.D.View:Qo.D.Share))}}return(o=n).\u0275fac=function(i){return new(i||o)(e.KVO(l.il),e.KVO(Jo.u))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})()},children:[{path:"",component:Zo,children:[{path:"",component:I}]},{path:"error",component:Sg}]}];let Ig=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[he.iI.forChild(wg),he.iI]}),n})();var Cg=c(28107);let Mg=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[Cg.R,la,Ig,p.MD]}),n})()},46733:(ce,ie,c)=>{var p=c(20741);function L(){var V={},U=0,S=0,W=0;return{add:function _e(j,G){G||(G=j,j=0),j>S?S=j:j<W&&(W=j),V[j]||(V[j]=[]),V[j].push(G),U++},process:function K(){for(var j=W;j<=S;j++)for(var G=V[j],l=0;l<G.length;l++)(0,G[l])()},size:function ne(){return U}}}ce.exports=function(U){var S=(U=U||{}).reporter,W=p.getOption(U,"async",!0),_e=p.getOption(U,"auto",!0);_e&&!W&&(S&&S.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),W=!0);var ne,K=L(),j=!1;function l(){for(j=!0;K.size();){var se=K;K=L(),se.process()}j=!1}function e(){ne=function Se(se){return setTimeout(se,0)}(l)}return{add:function G(se,Ee){!j&&_e&&W&&0===K.size()&&e(),K.add(se,Ee)},force:function we(se){j||(void 0===se&&(se=W),ne&&(function k(se){clearTimeout(se)}(ne),ne=null),se?e():l())}}}},20741:ce=>{(ce.exports={}).getOption=function c(p,L,V){var U=p[L];return null==U&&void 0!==V?V:U}},37764:ce=>{var ie=ce.exports={};ie.isIE=function(c){return!(!function p(){var V=navigator.userAgent.toLowerCase();return-1!==V.indexOf("msie")||-1!==V.indexOf("trident")||-1!==V.indexOf(" edge/")}()||c&&c!==function(){var U=3,S=document.createElement("div"),W=S.getElementsByTagName("i");do{S.innerHTML="\x3c!--[if gt IE "+ ++U+"]><i></i><![endif]--\x3e"}while(W[0]);return U>4?U:void 0}())},ie.isLegacyOpera=function(){return!!window.opera}},36565:ce=>{(ce.exports={}).forEach=function(c,p){for(var L=0;L<c.length;L++){var V=p(c[L]);if(V)return V}}},67618:(ce,ie,c)=>{var p=c(37764);ce.exports=function(L){var V=(L=L||{}).reporter,U=L.batchProcessor,S=L.stateHandler.getState;if(!V)throw new Error("Missing required dependency: reporter.");function ne(G){return S(G).object}return{makeDetectable:function K(G,l,we){we||(we=l,l=G,G=null),G=G||{},p.isIE(8)?we(l):function $e(k,Se){var se=function _e(G){var l=L.important?" !important; ":"; ";return(G.join(l)+l).trim()}(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),Ee=!1,F=window.getComputedStyle(k),H=k.offsetWidth,At=k.offsetHeight;function A(){function E(){if("static"===F.position){k.style.setProperty("position","relative",G.important?"important":"");var ue=function(he,fe,Ce,m){var Fe=Ce[m];"auto"!==Fe&&"0"!==function We(ge){return ge.replace(/[^-\d\.]/g,"")}(Fe)&&(he.warn("An element that is positioned static has style."+m+"="+Fe+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+m+" will be set to 0. Element: ",fe),fe.style.setProperty(m,"0",G.important?"important":""))};ue(V,k,F,"top"),ue(V,k,F,"right"),ue(V,k,F,"bottom"),ue(V,k,F,"left")}}""!==F.position&&(E(),Ee=!0);var w=document.createElement("object");w.style.cssText=se,w.tabIndex=-1,w.type="text/html",w.setAttribute("aria-hidden","true"),w.onload=function oe(){Ee||E(),function ue(fe,Ce){if(!fe.contentDocument){var m=S(fe);return m.checkForObjectDocumentTimeoutId&&window.clearTimeout(m.checkForObjectDocumentTimeoutId),void(m.checkForObjectDocumentTimeoutId=setTimeout(function(){m.checkForObjectDocumentTimeoutId=0,ue(fe,Ce)},100))}Ce(fe.contentDocument)}(this,function(Ce){Se(k)})},p.isIE()||(w.data="about:blank"),S(k)&&(k.appendChild(w),S(k).object=w,p.isIE()&&(w.data="about:blank"))}S(k).startSize={width:H,height:At},U?U.add(A):A()}(l,we)},addListener:function W(G,l){function we(){l(G)}if(p.isIE(8))S(G).object={proxy:we},G.attachEvent("onresize",we);else{var e=ne(G);if(!e)throw new Error("Element is not detectable by this strategy.");e.contentDocument.defaultView.addEventListener("resize",we)}},uninstall:function j(G){if(S(G)){var l=ne(G);l&&(p.isIE(8)?G.detachEvent("onresize",l.proxy):G.removeChild(l),S(G).checkForObjectDocumentTimeoutId&&window.clearTimeout(S(G).checkForObjectDocumentTimeoutId),delete S(G).object)}}}}},47728:(ce,ie,c)=>{var p=c(36565).forEach;ce.exports=function(L){var V=(L=L||{}).reporter,U=L.batchProcessor,S=L.stateHandler.getState,_e=L.idHandler;if(!U)throw new Error("Missing required dependency: batchProcessor");if(!V)throw new Error("Missing required dependency: reporter.");var K=function we(){var oe=document.createElement("div");oe.style.cssText=l(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]);var w=document.createElement("div");w.style.cssText=l(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),w.appendChild(oe),document.body.insertBefore(w,document.body.firstChild);var ue=500-w.clientWidth,he=500-w.clientHeight;return document.body.removeChild(w),{width:ue,height:he}}(),j="erd_scroll_detection_container";function G(A){!function e(A,E,oe){if(!A.getElementById(E)){var ue=oe+"_animation",he=oe+"_animation_active",fe="/* Created by the element-resize-detector library. */\n";fe+="."+oe+" > div::-webkit-scrollbar { "+l(["display: none"])+" }\n\n",fe+="."+he+" { "+l(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+ue,"animation-name: "+ue])+" }\n",fe+="@-webkit-keyframes "+ue+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",function w(Ce,m){m=m||function(Fe){A.head.appendChild(Fe)};var We=A.createElement("style");return We.innerHTML=Ce,We.id=E,m(We),We}(fe+="@keyframes "+ue+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}(A,"erd_scroll_detection_scrollbar_style",j)}function l(A){var E=L.important?" !important; ":"; ";return(A.join(E)+E).trim()}function k(A,E,oe){if(A.addEventListener)A.addEventListener(E,oe);else{if(!A.attachEvent)return V.error("[scroll] Don't know how to add event listeners.");A.attachEvent("on"+E,oe)}}function Se(A,E,oe){if(A.removeEventListener)A.removeEventListener(E,oe);else{if(!A.detachEvent)return V.error("[scroll] Don't know how to remove event listeners.");A.detachEvent("on"+E,oe)}}function se(A){return S(A).container.childNodes[0].childNodes[0].childNodes[0]}function Ee(A){return S(A).container.childNodes[0].childNodes[0].childNodes[1]}return G(window.document),{makeDetectable:function H(A,E,oe){function w(){if(A.debug){var v=Array.prototype.slice.call(arguments);if(v.unshift(_e.get(E),"Scroll: "),V.log.apply)V.log.apply(null,v);else for(var X=0;X<v.length;X++)V.log(v[X])}}function he(v){var X=S(v).container.childNodes[0],ae=window.getComputedStyle(X);return!ae.width||-1===ae.width.indexOf("px")}function fe(){var v=window.getComputedStyle(E),X={};return X.position=v.position,X.width=E.offsetWidth,X.height=E.offsetHeight,X.top=v.top,X.right=v.right,X.bottom=v.bottom,X.left=v.left,X.widthCSS=v.width,X.heightCSS=v.height,X}function We(){if(w("storeStyle invoked."),S(E)){var v=fe();S(E).style=v}else w("Aborting because element has been uninstalled")}function Fe(v,X,ae){S(v).lastWidth=X,S(v).lastHeight=ae}function T(){return 2*K.width+1}function et(){return 2*K.height+1}function Bt(v){return v+10+T()}function tt(v){return v+10+et()}function it(v,X,ae){var Xe=se(v),St=Ee(v),N=Bt(X),Qe=tt(ae),Me=function lt(v){return 2*v+T()}(X),Y=function He(v){return 2*v+et()}(ae);Xe.scrollLeft=N,Xe.scrollTop=Qe,St.scrollLeft=Me,St.scrollTop=Y}function Ie(){var v=S(E).container;if(!v){(v=document.createElement("div")).className=j,v.style.cssText=l(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),S(E).container=v,function $e(A){A.className+=" "+j+"_animation_active"}(v),E.appendChild(v);var X=function(){S(E).onRendered&&S(E).onRendered()};k(v,"animationstart",X),S(E).onAnimationStart=X}return v}function $(){if(w("Injecting elements"),S(E)){!function v(){var ve=S(E).style;if("static"===ve.position){E.style.setProperty("position","relative",A.important?"important":"");var Ye=function(Nt,b,Dn,Z){var R=Dn[Z];"auto"!==R&&"0"!==function Oe(h){return h.replace(/[^-\d\.]/g,"")}(R)&&(Nt.warn("An element that is positioned static has style."+Z+"="+R+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+Z+" will be set to 0. Element: ",b),b.style[Z]=0)};Ye(V,E,ve,"top"),Ye(V,E,ve,"right"),Ye(V,E,ve,"bottom"),Ye(V,E,ve,"left")}}();var ae=S(E).container;ae||(ae=Ie());var Xe=K.width,St=K.height,N=l(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),Qe=l(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(function X(ve,Ye,Nt,b){return["left: "+(ve=ve?ve+"px":"0"),"top: "+(Ye=Ye?Ye+"px":"0"),"right: "+(b=b?b+"px":"0"),"bottom: "+(Nt=Nt?Nt+"px":"0")]}(-(1+Xe),-(1+St),-St,-Xe))),Me=l(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),Y=l(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),xe=l(["position: absolute","left: 0","top: 0"]),ct=l(["position: absolute","width: 200%","height: 200%"]),dt=document.createElement("div"),nt=document.createElement("div"),Tt=document.createElement("div"),uo=document.createElement("div"),ci=document.createElement("div"),Pn=document.createElement("div");dt.dir="ltr",dt.style.cssText=N,dt.className=j,nt.className=j,nt.style.cssText=Qe,Tt.style.cssText=Me,uo.style.cssText=xe,ci.style.cssText=Y,Pn.style.cssText=ct,Tt.appendChild(uo),ci.appendChild(Pn),nt.appendChild(Tt),nt.appendChild(ci),dt.appendChild(nt),ae.appendChild(dt),k(Tt,"scroll",Un),k(ci,"scroll",Ft),S(E).onExpandScroll=Un,S(E).onShrinkScroll=Ft}else w("Aborting because element has been uninstalled");function Un(){var ve=S(E);ve&&ve.onExpand?ve.onExpand():w("Aborting expand scroll handler: element has been uninstalled")}function Ft(){var ve=S(E);ve&&ve.onShrink?ve.onShrink():w("Aborting shrink scroll handler: element has been uninstalled")}}function be(){function v(Me,Y,xe){var ct=function ge(v){return se(v).childNodes[0]}(Me),dt=Bt(Y),nt=tt(xe);ct.style.setProperty("width",dt+"px",A.important?"important":""),ct.style.setProperty("height",nt+"px",A.important?"important":"")}function X(Me){var Y=E.offsetWidth,xe=E.offsetHeight,ct=Y!==S(E).lastWidth||xe!==S(E).lastHeight;w("Storing current size",Y,xe),Fe(E,Y,xe),U.add(0,function(){if(ct){if(!S(E))return void w("Aborting because element has been uninstalled");if(!ae())return void w("Aborting because element container has not been initialized");A.debug&&(E.offsetWidth!==Y||E.offsetHeight!==xe)&&V.warn(_e.get(E),"Scroll: Size changed before updating detector elements."),v(E,Y,xe)}}),U.add(1,function(){S(E)?ae()?it(E,Y,xe):w("Aborting because element container has not been initialized"):w("Aborting because element has been uninstalled")}),ct&&Me&&U.add(2,function(){S(E)?ae()?Me():w("Aborting because element container has not been initialized"):w("Aborting because element has been uninstalled")})}function ae(){return!!S(E).container}function Xe(){w("notifyListenersIfNeeded invoked");var Y=S(E);return function Me(){return void 0===S(E).lastNotifiedWidth}()&&Y.lastWidth===Y.startSize.width&&Y.lastHeight===Y.startSize.height?w("Not notifying: Size is the same as the start size, and there has been no notification yet."):Y.lastWidth===Y.lastNotifiedWidth&&Y.lastHeight===Y.lastNotifiedHeight?w("Not notifying: Size already notified"):(w("Current size not notified, notifying..."),Y.lastNotifiedWidth=Y.lastWidth,Y.lastNotifiedHeight=Y.lastHeight,void p(S(E).listeners,function(xe){xe(E)}))}function N(){w("Scroll detected."),he(E)?w("Scroll event fired while unrendered. Ignoring..."):X(Xe)}if(w("registerListenersAndPositionElements invoked."),S(E)){S(E).onRendered=function St(){if(w("startanimation triggered."),he(E))w("Ignoring since element is still unrendered...");else{w("Element rendered.");var Me=se(E),Y=Ee(E);(0===Me.scrollLeft||0===Me.scrollTop||0===Y.scrollLeft||0===Y.scrollTop)&&(w("Scrollbars out of sync. Updating detector elements..."),X(Xe))}},S(E).onExpand=N,S(E).onShrink=N;var Qe=S(E).style;v(E,Qe.width,Qe.height)}else w("Aborting because element has been uninstalled")}function Te(){if(w("finalizeDomMutation invoked."),S(E)){var v=S(E).style;Fe(E,v.width,v.height),it(E,v.width,v.height)}else w("Aborting because element has been uninstalled")}function jt(){oe(E)}function ze(){w("Installing..."),function m(){S(E).listeners=[]}(),function Ce(){var v=fe();S(E).startSize={width:v.width,height:v.height},w("Element start size",S(E).startSize)}(),U.add(0,We),U.add(1,$),U.add(2,be),U.add(3,Te),U.add(4,jt)}oe||(oe=E,E=A,A=null),A=A||{},w("Making detectable..."),function ue(v){return!function X(ae){var Xe=ae.getRootNode&&ae.getRootNode().contains(ae);return ae===ae.ownerDocument.body||ae.ownerDocument.body.contains(ae)||Xe}(v)||null===window.getComputedStyle(v)}(E)?(w("Element is detached"),Ie(),w("Waiting until element is attached..."),S(E).onRendered=function(){w("Element is now attached"),ze()}):ze()},addListener:function F(A,E){if(!S(A).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");S(A).listeners.push(E)},uninstall:function At(A){var E=S(A);E&&(E.onExpandScroll&&Se(se(A),"scroll",E.onExpandScroll),E.onShrinkScroll&&Se(Ee(A),"scroll",E.onShrinkScroll),E.onAnimationStart&&Se(E.container,"animationstart",E.onAnimationStart),E.container&&A.removeChild(E.container))},initDocument:G}}},38465:(ce,ie,c)=>{var p=c(36565).forEach,L=c(6861),V=c(49216),U=c(36100),S=c(1157),W=c(68816),_e=c(37764),K=c(46733),ne=c(43133),j=c(67618),G=c(47728);function l(k){return Array.isArray(k)||void 0!==k.length}function we(k){if(Array.isArray(k))return k;var Se=[];return p(k,function(se){Se.push(se)}),Se}function e(k){return k&&1===k.nodeType}function $e(k,Se,se){var Ee=k[Se];return null==Ee&&void 0!==se?se:Ee}ce.exports=function(k){var Se;if((k=k||{}).idHandler)Se={get:function(ge){return k.idHandler.get(ge,!0)},set:k.idHandler.set};else{var se=U(),Ee=S({idGenerator:se,stateHandler:ne});Se=Ee}var F=k.reporter;F||(F=W(!1===F));var At=$e(k,"batchProcessor",K({reporter:F})),A={};A.callOnAdd=!!$e(k,"callOnAdd",!0),A.debug=!!$e(k,"debug",!1);var w,E=V(Se),oe=L({stateHandler:ne}),ue=$e(k,"strategy","object"),he=$e(k,"important",!1),fe={reporter:F,batchProcessor:At,stateHandler:ne,idHandler:Se,important:he};if("scroll"===ue&&(_e.isLegacyOpera()?(F.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),ue="object"):_e.isIE(9)&&(F.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),ue="object")),"scroll"===ue)w=G(fe);else{if("object"!==ue)throw new Error("Invalid strategy name: "+ue);w=j(fe)}var Ce={};return{listenTo:function m(ge,T,et){function Bt($){var be=E.get($);p(be,function(jt){jt($)})}function tt($,be,Te){E.add(be,Te),$&&Te(be)}if(et||(et=T,T=ge,ge={}),!T)throw new Error("At least one element required.");if(!et)throw new Error("Listener required.");if(e(T))T=[T];else{if(!l(T))return F.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");T=we(T)}var lt=0,He=$e(ge,"callOnAdd",A.callOnAdd),it=$e(ge,"onReady",function(){}),Ie=$e(ge,"debug",A.debug);p(T,function(be){ne.getState(be)||(ne.initState(be),Se.set(be));var Te=Se.get(be);if(Ie&&F.log("Attaching listener to element",Te,be),!oe.isDetectable(be))return Ie&&F.log(Te,"Not detectable."),oe.isBusy(be)?(Ie&&F.log(Te,"System busy making it detectable"),tt(He,be,et),Ce[Te]=Ce[Te]||[],void Ce[Te].push(function(){++lt===T.length&&it()})):(Ie&&F.log(Te,"Making detectable..."),oe.markBusy(be,!0),w.makeDetectable({debug:Ie,important:he},be,function(ze){if(Ie&&F.log(Te,"onElementDetectable"),ne.getState(ze)){oe.markAsDetectable(ze),oe.markBusy(ze,!1),w.addListener(ze,Bt),tt(He,ze,et);var v=ne.getState(ze);v&&v.startSize&&(v.startSize.width!==ze.offsetWidth||v.startSize.height!==ze.offsetHeight)&&Bt(ze),Ce[Te]&&p(Ce[Te],function(Xe){Xe()})}else Ie&&F.log(Te,"Element uninstalled before being detectable.");delete Ce[Te],++lt===T.length&&it()}));Ie&&F.log(Te,"Already detecable, adding listener."),tt(He,be,et),lt++}),lt===T.length&&it()},removeListener:E.removeListener,removeAllListeners:E.removeAllListeners,uninstall:function We(ge){if(!ge)return F.error("At least one element is required.");if(e(ge))ge=[ge];else{if(!l(ge))return F.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");ge=we(ge)}p(ge,function(T){E.removeAllListeners(T),w.uninstall(T),ne.cleanState(T)})},initDocument:function Fe(ge){w.initDocument&&w.initDocument(ge)}}}},6861:ce=>{ce.exports=function(ie){var c=ie.stateHandler.getState;return{isDetectable:function p(S){var W=c(S);return W&&!!W.isDetectable},markAsDetectable:function L(S){c(S).isDetectable=!0},isBusy:function V(S){return!!c(S).busy},markBusy:function U(S,W){c(S).busy=!!W}}}},36100:ce=>{ce.exports=function(){var ie=1;return{generate:function c(){return ie++}}}},1157:ce=>{ce.exports=function(ie){var c=ie.idGenerator,p=ie.stateHandler.getState;return{get:function L(U){var S=p(U);return S&&void 0!==S.id?S.id:null},set:function V(U){var S=p(U);if(!S)throw new Error("setId required the element to have a resize detection state.");var W=c.generate();return S.id=W,W}}}},49216:ce=>{ce.exports=function(ie){var c={};function p(S){var W=ie.get(S);return void 0===W?[]:c[W]||[]}return{get:p,add:function L(S,W){var _e=ie.get(S);c[_e]||(c[_e]=[]),c[_e].push(W)},removeListener:function V(S,W){for(var _e=p(S),K=0,ne=_e.length;K<ne;++K)if(_e[K]===W){_e.splice(K,1);break}},removeAllListeners:function U(S){var W=p(S);W&&(W.length=0)}}}},68816:ce=>{ce.exports=function(ie){function c(){}var p={log:c,warn:c,error:c};if(!ie&&window.console){var L=function(V,U){V[U]=function(){var W=console[U];if(W.apply)W.apply(console,arguments);else for(var _e=0;_e<arguments.length;_e++)W(arguments[_e])}};L(p,"log"),L(p,"warn"),L(p,"error")}return p}},43133:ce=>{var ie="_erd";function p(V){return V[ie]}ce.exports={initState:function c(V){return V[ie]={},p(V)},getState:p,cleanState:function L(V){delete V[ie]}}}}]);