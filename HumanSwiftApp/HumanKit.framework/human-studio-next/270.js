"use strict";(self.webpackChunkhuman_studio_next=self.webpackChunkhuman_studio_next||[]).push([[270],{42270:(Dt,ge,l)=>{l.r(ge),l.d(ge,{AccountModule:()=>Dl});var c=l(60177),U=l(38645),oe=l(85446),_e=l(63665),ie=l(20736),p=l(65763),_=l(49204),C=l(85052),g=l(2573),D=l(14264),G=l(17365),P=l(11756),h=l(37925),H=l(81275),m=l(16823),se=l(15623),ae=l(38104),K=l(66571),e=l(54438),j=l(24418),I=l(12215),k=l(26779),V=l(75736),re=l(10588);const J=()=>["/account/profile"],fe=()=>["/account/team"],Re=()=>["/account/settings"],Mt=()=>["/account/internal"];function At(o,n){1&o&&(e.j41(0,"a",1),e.nrm(1,"app-icon",6),e.EFF(2," Internal "),e.k0s()),2&o&&e.Y8G("routerLink",e.lJ4(1,Mt))}let Gt=(()=>{var o;class n{constructor(){this.enableInternalRoute=j.c.deploy!==I.Z.Production}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-account-nav"]],decls:13,vars:7,consts:[[1,"nav"],["app-navigation-list-item","","routerLinkActive","nav__link--active",1,"nav__link",3,"routerLink"],["icon","user-circle",1,"nav__link-icon"],["icon","user-friends",1,"nav__link-icon"],["icon","cog",1,"nav__link-icon"],["app-navigation-list-item","","routerLinkActive","nav__link--active","class","nav__link",3,"routerLink",4,"ngIf"],["icon","screwdriver-wrench",1,"nav__link-icon"]],template:function(i,s){1&i&&(e.j41(0,"app-navigation-list-container")(1,"nav")(2,"div",0)(3,"a",1),e.nrm(4,"app-icon",2),e.EFF(5," Account "),e.k0s(),e.j41(6,"a",1),e.nrm(7,"app-icon",3),e.EFF(8," Team "),e.k0s(),e.j41(9,"a",1),e.nrm(10,"app-icon",4),e.EFF(11," Settings "),e.k0s(),e.DNE(12,At,3,2,"a",5),e.k0s()()()),2&i&&(e.R7$(3),e.Y8G("routerLink",e.lJ4(4,J)),e.R7$(3),e.Y8G("routerLink",e.lJ4(5,fe)),e.R7$(3),e.Y8G("routerLink",e.lJ4(6,Re)),e.R7$(3),e.Y8G("ngIf",s.enableInternalRoute))},dependencies:[c.bT,U.Wk,U.wQ,k.R,V.T,re.d],styles:[".nav__link[_ngcontent-%COMP%]{color:#374a68;text-decoration:none;display:flex}.nav__link-icon[_ngcontent-%COMP%]{padding-right:20px;font-size:1rem;line-height:1.5rem}.nav__link--active[_ngcontent-%COMP%]{background-color:#eaeff5;border-radius:4px}"],changeDetection:0}),n})();var S,B=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},O=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};class x{constructor(n,t,i,s){this.store=n,this.dialogService=t,this.authRoutingService=i,this.router=s,this.breakPoints=se.m,this.ngUnsubscribe=new C.B}ngOnInit(){this.initProfileCheck()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initProfileCheck(){this.userProfile$.pipe((0,D.p)(n=>!(0,_.isNil)(n)&&this.isVerificationRequired(n)),(0,G.s)(1),(0,P.Z)(()=>this.openVerifyConfirmDialog()),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=this.store.selectSnapshot(m.k.getUserProfile),{email:i}=t,{verification_jwt:s}=t.account_verification;n?this.authRoutingService.navigateToVerifyAccount(i,s):this.router.navigate(["/"])})}isVerificationRequired(n){return!0===(0,_.get)(n,"account_verification.verification_required")}openVerifyConfirmDialog(){return this.dialogService.openConfirmDialog({maxWidth:"480px",data:{titleText:"Verify your email",bodyText:"Before you can make changes to your account, we need to verify your email address. Please log out and log back in to complete the verification process.",confirmText:"Log Out",confirmColor:"warn"}}).afterClosed()}}(S=x).\u0275fac=function(n){return new(n||S)(e.rXU(p.il),e.rXU(K.o),e.rXU(H.y),e.rXU(U.Ix))},S.\u0275cmp=e.VBU({type:S,selectors:[["app-account-master"]],decls:7,vars:4,consts:[[1,"account"],[1,"account__container"],[1,"account__col"],[1,"account__body"]],template:function(n,t){1&n&&(e.j41(0,"div",0),e.nI1(1,"async"),e.j41(2,"div",1)(3,"div",2),e.nrm(4,"app-account-nav"),e.k0s(),e.j41(5,"div",3),e.nrm(6,"router-outlet"),e.k0s()()()),2&n&&e.AVh("account--fullscreen",e.bMT(1,2,t.horizontalBreakpoint$)<t.breakPoints.Large)},dependencies:[U.n3,Gt,c.Jj],styles:[".account[_ngcontent-%COMP%]{background:#fff;display:flex;justify-content:center;padding-top:24px}.account__container[_ngcontent-%COMP%]{flex:0 1 900px;display:flex}.account__col[_ngcontent-%COMP%]{flex:0 0 160px;padding-right:20px}.account__body[_ngcontent-%COMP%]{border-left:1px solid #d7e0ea;padding-left:20px;flex:1 1 100%}.account--fullscreen[_ngcontent-%COMP%]   .account__container[_ngcontent-%COMP%]{flex:0 1 100%}.account--fullscreen[_ngcontent-%COMP%]   .account__col[_ngcontent-%COMP%]{display:none}.account--fullscreen[_ngcontent-%COMP%]   .account__body[_ngcontent-%COMP%]{padding:0 20px;border:none}"],changeDetection:0}),B([(0,p.l6)(m.k.getUserProfile),O("design:type",g.c)],x.prototype,"userProfile$",void 0),B([(0,p.l6)(ae.V.getHorizontalBreakpoint),O("design:type",g.c)],x.prototype,"horizontalBreakpoint$",void 0);var Y=l(76718),M=l(36110),X=l(87732),f=l(38165),T=l(21424),ce=l(71997),d=l(89417),le=l(82656),pe=l(21082),ke=l(63308),be=function(o){return o.MedicalDevice="Medical Device",o.Pharma="Pharma",o.ConsumerHealth="Consumer Health",o.EdTraining="Education & Training",o.DigitalHealth="Digital Health",o.ProviderHospitalPractice="Provider (Hospital & Practice)",o}(be||{}),bn=function(o){return o.K12="K12",o.MedicalSchool="Medical School",o.NursingSchool="Nursing School",o.UndergraduateSchool="Undergraduate School",o.GraduateSchool="Graduate School",o.HealthScienceAlliedHealth="Health Sciences or Allied Health Program",o}(bn||{}),b=l(15828),y=function(o){return o.Student="Student",o.Faculty="Faculty",o.Administrator="Administrator",o.TeacherFaculty="Teacher / Faculty",o.PatientCaregiver="Patient / Caregiver",o.IndustryProfessional="Industry Professional",o.InstructionalDesigner="Instructional Designer",o.Marketing="Marketing",o.TrainingManager="Training Manager",o.ManagerOfMedicalEducation="Manager of Medical Education",o.Developer="Developer",o.BrandProductManager="Brand / Product Manager",o.ScientificCommunications="Scientific Communications",o.ProductManager="Product Manager",o.Editor="Editor",o.ContentManager="Content Manager",o.DesignUserExperience="Design / User Experience",o.Executive="Executive",o.TechnologyIT="Technology / IT",o.Clinician="Clinician",o.PatientEducation="Patient Education",o.Innovation="Innovation",o.PhysicalTherapist="Physical Therapist",o.OccupationalTherapist="Occupational Therapist",o.PersonalTrainer="Personal Trainer",o.Librarian="Librarian",o.SalesTraining="Sales Training",o.ProfessionalEducation="Professional Education",o}(y||{}),ve=function(o){return o.Individual="individual",o.Team="team",o}(ve||{});Object.values(b.j);const vn=Object.values(bn),Cn=Object.values(be),ao=[y.Student,y.TeacherFaculty,y.PatientCaregiver,y.Clinician,y.IndustryProfessional],ro=[y.Student,y.Faculty,y.Administrator,y.Librarian],co={[b.j.PersonalUse]:[],[b.j.Education]:vn,[b.j.Business]:Cn},lo={[be.MedicalDevice]:[y.SalesTraining,y.ProfessionalEducation,y.InstructionalDesigner,y.ProductManager,y.Marketing],[be.Pharma]:[y.SalesTraining,y.ProfessionalEducation,y.ScientificCommunications,y.InstructionalDesigner,y.ProductManager,y.Marketing],[be.ConsumerHealth]:[y.ProductManager,y.Editor,y.ContentManager,y.DesignUserExperience,y.Developer,y.Executive],[be.EdTraining]:[y.ProductManager,y.Editor,y.ContentManager,y.DesignUserExperience,y.Developer,y.Executive],[be.DigitalHealth]:[y.ProductManager,y.DesignUserExperience,y.Developer,y.TechnologyIT,y.Executive],[be.ProviderHospitalPractice]:[y.Clinician,y.Administrator,y.TechnologyIT,y.PatientEducation,y.Innovation]},po={[b.j.PersonalUse]:[],[b.j.Education]:["<100","101-499","500+"],[b.j.Business]:["1-25","26-100","101-500","500+"]},$t={[b.j.PersonalUse]:{title:"",content:[]},[b.j.Education]:{title:"",content:[]},[b.j.Business]:{title:"",content:[]}};function wt(o){return o.map(n=>({value:n}))}function Ot(o,n,t){const u=n?"":"Free for 14 Days";return{account_setting:"account_purpose",label:`${Tn(o,n)}How are you planning to use the BioDigital Human?`,hint:n?"Help us personalize your experience.":"We'll set up your experience accordingly.",responses:[{value:b.j.PersonalUse,label:"For myself",tag:n?"":"Free for 1 Person",icon:"user",content:$t[b.j.PersonalUse]},{value:b.j.Education,label:"With my students",tag:u,icon:"user-friends",content:$t[b.j.Education]},{value:b.j.Business,label:"With my business team",tag:u,icon:"user-friends",content:$t[b.j.Business]}].filter(E=>t===ve.Individual?E.value===b.j.PersonalUse:t!==ve.Team||E.value!==b.j.PersonalUse),other:!1}}function Ct(o){const n=function uo(o){return o===b.j.Education?vn:o===b.j.Business?Cn:[]}(o);return o===b.j.Education?{account_setting:"account_field",label:"What level of education?",hint:"Help us personalize your experience.",responses:wt(n),other:!0}:o===b.j.Business?{account_setting:"account_field",label:"What field do you work in?",hint:"Help us personalize your experience.",responses:wt(n),other:!0}:void 0}function Fe(o,n,t,i,s=!1){const r=`${s?Tn(o,i):""}What role best describes you?`,u=function mo(o,n){switch(o){case b.j.Education:return ro;case b.j.Business:return lo[n]||[];default:return ao}}(n,t);return{account_setting:"account_role",label:r,hint:"Help us personalize your experience.",responses:wt(u),other:!0}}function Tn(o,n){const{first_name:t}=o;return n?`Welcome back, ${t}! `:""}const go=[[["","content-panel-tags",""]],[["","content-panel-actions",""]],"*"],ho=["[content-panel-tags]","[content-panel-actions]","*"];let _o=(()=>{var o;class n{constructor(){this.label=""}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-content-panel"]],inputs:{label:"label"},ngContentSelectors:ho,decls:11,vars:1,consts:[[1,"content-panel"],[1,"content-panel__header"],[1,"content-panel__label"],[1,"text-lg","font-semibold","mr-2"],[1,"content-panel__actions"],[1,"content-panel__body"]],template:function(i,s){1&i&&(e.NAR(go),e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e.EFF(4),e.k0s(),e.j41(5,"div"),e.SdG(6),e.k0s()(),e.j41(7,"div",4),e.SdG(8,1),e.k0s()(),e.j41(9,"div",5),e.SdG(10,2),e.k0s()()),2&i&&(e.R7$(4),e.JRh(s.label))},styles:[".content-panel__header[_ngcontent-%COMP%]{align-items:center;display:flex;flex-flow:wrap;margin-bottom:20px;min-height:36px}.content-panel__label[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:row;align-items:center;flex-wrap:wrap}.content-panel__actions[_ngcontent-%COMP%]{flex-grow:0}"]}),n})();const fo=[[["","panel-view-tags",""]],"*",[["","panel-view-actions",""]],[["","panel-edit-actions",""]],[["","panel-view",""]],[["","panel-edit",""]]],bo=["[panel-view-tags]","*","[panel-view-actions]","[panel-edit-actions]","[panel-view]","[panel-edit]"];function vo(o,n){1&o&&e.SdG(0,2,["*ngIf","mode === 'view'"])}function Co(o,n){1&o&&e.SdG(0,3,["*ngIf","mode === 'edit'"])}function To(o,n){1&o&&e.SdG(0,4,["*ngIf","mode === 'view'"])}function yo(o,n){1&o&&(e.qex(0),e.SdG(1,5),e.bVm())}let z=(()=>{var o;class n{get mode(){return this._mode}set mode(i){i!==this.mode&&(this._mode=i,this.changeDetectorRef.markForCheck())}constructor(i){this.changeDetectorRef=i,this._mode="view"}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-account-panel"]],inputs:{label:"label",mode:"mode"},ngContentSelectors:bo,decls:9,vars:5,consts:[[3,"label"],["content-panel-tags",""],["content-panel-actions",""],[4,"ngIf"]],template:function(i,s){1&i&&(e.NAR(fo),e.j41(0,"app-content-panel",0),e.qex(1,1),e.SdG(2),e.bVm(),e.j41(3,"div",2),e.DNE(4,vo,1,0,"ng-content",3)(5,Co,1,0,"ng-content",3),e.k0s(),e.SdG(6,1),e.DNE(7,To,1,0,"ng-content",3)(8,yo,2,0,"ng-container",3),e.k0s()),2&i&&(e.Y8G("label",s.label),e.R7$(4),e.Y8G("ngIf","view"===s.mode),e.R7$(),e.Y8G("ngIf","edit"===s.mode),e.R7$(2),e.Y8G("ngIf","view"===s.mode),e.R7$(),e.Y8G("ngIf","edit"===s.mode))},dependencies:[c.bT,_o],changeDetection:0}),n})();const Ro=[{name:"Afghanistan",code:"AF"},{name:"Aland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua And Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas The",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bonaire, Sint Eustatius and Saba",code:"BQ"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo The Democratic Republic Of The",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire (Ivory Coast)",code:"CI"},{name:"Croatia (Hrvatska)",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cura\xe7ao",code:"CW"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"East Timor",code:"TL"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji Islands",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia The",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey and Alderney",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and McDonald Islands",code:"HM"},{name:"Honduras",code:"HN"},{name:"Hong Kong S.A.R.",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea North",code:"KP"},{name:"Korea South",code:"KR"},{name:"Kosovo",code:"XK"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Laos",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macau S.A.R.",code:"MO"},{name:"Macedonia",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Man (Isle of)",code:"IM"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia",code:"FM"},{name:"Moldova",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montenegro",code:"ME"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands The",code:"NL"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua new Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn Island",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russia",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts And Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent And The Grenadines",code:"VC"},{name:"Saint-Barthelemy",code:"BL"},{name:"Saint-Martin (French part)",code:"MF"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia",code:"RS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Sint Maarten (Dutch part)",code:"SX"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia",code:"GS"},{name:"South Sudan",code:"SS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard And Jan Mayen Islands",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syria",code:"SY"},{name:"Taiwan",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad And Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks And Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Vatican City State (Holy See)",code:"VA"},{name:"Venezuela",code:"VE"},{name:"Vietnam",code:"VN"},{name:"Virgin Islands (British)",code:"VG"},{name:"Virgin Islands (US)",code:"VI"},{name:"Wallis And Futuna Islands",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}],ko=[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}];var ne=l(95416),$=l(21007),Se=l(87505);const Fo=[[["","card-header",""]],[["","card-content",""]]],So=["[card-header]","[card-content]"];let yn=(()=>{var o;class n{constructor(){}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-account-summary-card"]],ngContentSelectors:So,decls:6,vars:2,consts:[["cardHeader",""],[1,"card"],[1,"font-semibold","text-sm"],[1,"text-xs"]],template:function(i,s){if(1&i&&(e.NAR(Fo),e.j41(0,"div",1)(1,"div",2,0),e.SdG(3),e.k0s(),e.j41(4,"div",3),e.SdG(5,1),e.k0s()()),2&i){const a=e.sdS(2);e.R7$(),e.AVh("mb-3",a.children.length)}},styles:[".card[_ngcontent-%COMP%]{border:1px solid #d7e0ea;border-radius:4px;padding:16px 20px}.card__header[_ngcontent-%COMP%]{color:#1c2a3f}.card__content[_ngcontent-%COMP%]{color:#374a68}"],changeDetection:0}),n})();var we,Bt=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},Nt=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function Io(o,n){if(1&o&&(e.j41(0,"div",35),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.name," ")}}function jo(o,n){if(1&o&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.value," ")}}function xo(o,n){if(1&o&&e.nrm(0,"input",43),2&o){const t=e.XpG(3);e.Y8G("placeholder",null==t.accountFieldQuestion?null:t.accountFieldQuestion.hint)}}function Uo(o,n){if(1&o&&(e.j41(0,"app-form-field",37)(1,"select",38)(2,"optgroup",39),e.DNE(3,jo,2,2,"option",29),e.j41(4,"option",40),e.EFF(5,"Other"),e.k0s()()(),e.DNE(6,xo,1,1,"input",41),e.k0s()),2&o){const t=e.XpG(2);e.Y8G("label",t.selectedPurpose===t.accountPurposeEnum.Education?"Education":"Field"),e.R7$(2),e.Y8G("label",t.accountFieldQuestion.label),e.R7$(),e.Y8G("ngForOf",t.accountFieldQuestion.responses),e.R7$(3),e.Y8G("ngIf",t.otherFieldEnabled)}}function Po(o,n){if(1&o&&e.DNE(0,Uo,7,4,"app-form-field",36),2&o){const t=e.XpG();e.Y8G("ngIf",t.accountFieldQuestion)}}function Eo(o,n){if(1&o&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.value," ")}}function Do(o,n){if(1&o&&e.nrm(0,"input",43),2&o){const t=e.XpG(3);e.Y8G("placeholder",null==t.accountRoleQuestion?null:t.accountRoleQuestion.hint)}}function Mo(o,n){if(1&o&&(e.j41(0,"app-form-field",45)(1,"select",46)(2,"optgroup",39),e.DNE(3,Eo,2,2,"option",29),e.j41(4,"option",40),e.EFF(5,"Other"),e.k0s()()(),e.DNE(6,Do,1,1,"input",41),e.k0s()),2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("label",t.accountRoleQuestion.label),e.R7$(),e.Y8G("ngForOf",t.accountRoleQuestion.responses),e.R7$(3),e.Y8G("ngIf",t.otherRoleEnabled)}}function Ao(o,n){if(1&o&&e.DNE(0,Mo,7,3,"app-form-field",44),2&o){const t=e.XpG();e.Y8G("ngIf",t.accountRoleQuestion)}}function Go(o,n){1&o&&e.eu8(0)}function $o(o,n){if(1&o&&(e.qex(0),e.DNE(1,Go,1,0,"ng-container",47),e.bVm()),2&o){e.XpG();const t=e.sdS(37);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function wo(o,n){if(1&o&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.value," ")}}function Oo(o,n){if(1&o&&(e.j41(0,"app-form-field",51)(1,"select",52)(2,"optgroup",39),e.DNE(3,wo,2,2,"option",29),e.k0s()()()),2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("label",t.accountPurposeQuestion.label),e.R7$(),e.Y8G("ngForOf",t.accountPurposeQuestion.responses)}}function Bo(o,n){1&o&&e.eu8(0)}function No(o,n){if(1&o&&(e.qex(0),e.DNE(1,Bo,1,0,"ng-container",47),e.bVm()),2&o){e.XpG(2);const t=e.sdS(37);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function Yo(o,n){1&o&&e.eu8(0)}function Vo(o,n){1&o&&e.eu8(0)}function zo(o,n){if(1&o&&(e.qex(0),e.DNE(1,Yo,1,0,"ng-container",47)(2,Vo,1,0,"ng-container",47),e.bVm()),2&o){e.XpG(2);const t=e.sdS(35),i=e.sdS(37);e.R7$(),e.Y8G("ngTemplateOutlet",i),e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function Xo(o,n){1&o&&e.eu8(0)}function Lo(o,n){1&o&&e.eu8(0)}function Qo(o,n){if(1&o&&(e.qex(0),e.DNE(1,Xo,1,0,"ng-container",47)(2,Lo,1,0,"ng-container",47),e.bVm()),2&o){e.XpG(2);const t=e.sdS(35),i=e.sdS(37);e.R7$(),e.Y8G("ngTemplateOutlet",t),e.R7$(),e.Y8G("ngTemplateOutlet",i)}}function qo(o,n){if(1&o&&(e.DNE(0,Oo,4,2,"app-form-field",48),e.qex(1,49),e.DNE(2,No,2,1,"ng-container",50)(3,zo,3,2,"ng-container",50)(4,Qo,3,2,"ng-container",50),e.bVm()),2&o){const t=e.XpG();e.Y8G("ngIf",t.accountPurposeQuestion),e.R7$(),e.Y8G("ngSwitch",t.selectedPurpose),e.R7$(),e.Y8G("ngSwitchCase",t.accountPurposeEnum.PersonalUse),e.R7$(),e.Y8G("ngSwitchCase",t.accountPurposeEnum.Education),e.R7$(),e.Y8G("ngSwitchCase",t.accountPurposeEnum.Business)}}function Jo(o,n){if(1&o&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t.name),e.R7$(),e.SpI(" ",t.name," ")}}function Wo(o,n){if(1&o&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t.code),e.R7$(),e.SpI(" ",t.name," ")}}class Oe{constructor(n,t,i,s,a){this.store=n,this.actions=t,this.formBuilder=i,this.changeDetectorRef=s,this.snackBar=a,this.countries=Ro,this.states=ko,this.accountPurposeEnum=b.j,this.name="",this.address="",this.demographic="",this.ngUnsubscribe=new C.B}ngOnInit(){this.initForm(),this.initAccountSettingsListeners(),this.initProfileListeners(),this.formatProfileFields()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({first_name:["",d.k0.required],last_name:["",d.k0.required],city:[""],state:[""],country:[""],account_settings:this.formBuilder.group({account_purpose:this.formBuilder.group({value:[""],description:[""]}),account_role:this.formBuilder.group({value:[""],description:[""]}),account_field:this.formBuilder.group({value:[""],description:[""]})})})}initAccountSettingsListeners(){const n=this.form.get("account_settings"),t=n.get("account_purpose"),i=n.get("account_field"),s=n.get("account_role"),a=(r,u)=>(0,_.isEqual)(r,u);t.valueChanges.pipe((0,pe.F)(a),(0,h.Q)(this.ngUnsubscribe)).subscribe(r=>{const u=r.value,v=this.store.selectSnapshot(m.k.getUserProfile);this.setQuestions(v,u),i.patchValue({value:"",description:""}),s.patchValue({value:"",description:""}),this.changeDetectorRef.markForCheck()}),i.valueChanges.pipe((0,pe.F)(a),(0,h.Q)(this.ngUnsubscribe)).subscribe(r=>{const u=r.value,R=Fe(this.store.selectSnapshot(m.k.getUserProfile),this.selectedPurpose,u,!0);R.responses.length>0&&(this.accountRoleQuestion=R),this.changeDetectorRef.markForCheck()}),(0,le.z)(t.valueChanges,i.valueChanges,s.valueChanges).pipe((0,pe.F)(a),(0,h.Q)(this.ngUnsubscribe)).subscribe(([r,u,v])=>{const R=r.value,E=u.value,te=v.value;i.enable(),s.enable(),R!==b.j.Business||E?R===b.j.Education&&!te&&i.disable():s.disable(),this.selectedPurpose=R,this.selectedField=E,this.selectedRole=te,this.otherFieldEnabled="Other"===E,this.otherRoleEnabled="Other"===te,this.changeDetectorRef.markForCheck()})}initProfileListeners(){this.userProfile$.pipe((0,D.p)(n=>!(0,_.isNil)(n)),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{(0,_.isNil)(this.accountPurposeQuestion)&&this.setQuestions(n,b.j.PersonalUse);const t=this.getUserAccountSettings();this.setFormValues(n,t),this.changeDetectorRef.markForCheck()}),this.actions.pipe((0,p.xi)(f.ZD),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new f.hs(!0)),this.form.markAsPristine(),this.panel.mode="view"}),this.actions.pipe((0,p.xi)(f._h),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("There was an error updating your user profile.")})}formatProfileFields(){this.userProfile$.pipe((0,D.p)(n=>!(0,_.isNil)(n)),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.formatProfile(n),this.changeDetectorRef.markForCheck()})}handleEditClick(){this.panel.mode="edit"}handleCancelClick(){this.setFormValues(this.store.selectSnapshot(m.k.getUserProfile),this.getUserAccountSettings()),this.form.markAsPristine(),this.panel.mode="view"}handleSaveClick(){this.saveProfile()}getUserAccountSettings(){const n=this.store.selectSnapshot(m.k.getUserAccountSettings),t=this.store.selectSnapshot(T.q.getOrganizationAccountSettings);return(0,ke.j)([...n,...t])}saveProfile(){const n=this.getUserProfileFromValues(this.form.value);this.store.dispatch(new f.Kg(n)),this.changeDetectorRef.markForCheck()}setQuestions(n,t){this.accountPurposeQuestion=Ot(n,!1),this.accountFieldQuestion=Ct(t),this.accountRoleQuestion=Fe(n,t,"",!1)}setFormValues(n,t){this.form.patchValue({...n,account_settings:t})}getUserProfileFromValues(n){const{account_settings:t}=n,i=(0,ke.q)(t||{},!0);return{...n,account_settings:i}}formatProfile(n){const{first_name:t,last_name:i,city:s,state:a,country:r}=n;this.name=this.formatValues([t,i]," "),this.address=this.formatValues([s,a,r],", ");const u=this.getUserAccountSettings();this.demographic=this.formatDemographic(u)}formatDemographic(n){const t=n.account_field||{value:"",description:""},i=n.account_role||{value:"",description:""};return this.formatValues(["Other"===t.value?t.description:t.value,"Other"===i.value?i.description:i.value]," ")}formatValues(n,t=""){return n.filter(Boolean).join(t)}}(we=Oe).\u0275fac=function(n){return new(n||we)(e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(e.gRc),e.rXU(ne.UG))},we.\u0275cmp=e.VBU({type:we,selectors:[["app-account-profile"]],viewQuery:function(n,t){if(1&n&&e.GBs(z,7),2&n){let i;e.mGM(i=e.lsd())&&(t.panel=i.first)}},decls:62,vars:23,consts:[["panel",""],["fieldTemplate",""],["roleTemplate",""],["standardUserTemplate",""],["label","Profile"],["panel-view-actions",""],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click"],["panel-view",""],["card-header","",4,"ngIf"],["card-content",""],["panel-edit","",1,"profile"],[1,"profile__notice","mb-7","text-xs"],["href","https://www.biodigital.com/privacy","target","_blank",1,"text-link","underline"],["href","https://support.biodigital.com/hc/en-us/articles/360054841794-What-information-does-BioDigital-collect-about-me-","target","_blank",1,"text-link","underline"],[3,"formGroup"],["label","Email","theme","light",1,"mb-2"],["type","email",1,"input",3,"value","disabled"],[1,"flex","mb-2"],["label","First Name","theme","light",1,"grow","basis-2/4","pr-2"],["type","email","formControlName","first_name",1,"input"],["label","Last Name","theme","light",1,"grow","basis-2/4","pl-2"],["type","email","formControlName","last_name",1,"input"],["formGroupName","account_settings"],[4,"ngIf","ngIfElse"],["label","City","theme","light",1,"grow","basis-2/4","pr-2"],["type","text","formControlName","city",1,"input"],["label","State","theme","light",1,"grow","basis-2/4","pl-2"],["formControlName","state",1,"input"],["value",""],[3,"value",4,"ngFor","ngForOf"],["label","Country","theme","light",1,"pb-2"],["placeholder","Select Country","formControlName","country",1,"input"],[1,"flex","justify-end","mt-4"],["type","button","app-button","","buttonTheme","light","buttonType","default",1,"mr-4",3,"click","disabled"],["type","submit","app-button","","buttonType","primary",3,"click","disabled"],["card-header",""],["theme","light","class","pb-2","formGroupName","account_field",3,"label",4,"ngIf"],["theme","light","formGroupName","account_field",1,"pb-2",3,"label"],["placeholder","Select Field","formControlName","value",1,"input"],[3,"label"],["value","Other"],["type","text","class","input mt-2","formControlName","description",3,"placeholder",4,"ngIf"],[3,"value"],["type","text","formControlName","description",1,"input","mt-2",3,"placeholder"],["label","Role","theme","light","class","pb-2","formGroupName","account_role",4,"ngIf"],["label","Role","theme","light","formGroupName","account_role",1,"pb-2"],["placeholder","Select Role","formControlName","value",1,"input"],[4,"ngTemplateOutlet"],["label","Purpose","theme","light","class","pb-2","formGroupName","account_purpose",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["label","Purpose","theme","light","formGroupName","account_purpose",1,"pb-2"],["placeholder","Select Purpose","formControlName","value",1,"input"]],template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"app-account-panel",4,0)(2,"span",5)(3,"button",6),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleEditClick())}),e.EFF(4," Edit "),e.k0s()(),e.j41(5,"div",7)(6,"app-account-summary-card"),e.DNE(7,Io,2,1,"div",8),e.j41(8,"div",9)(9,"div"),e.EFF(10),e.nI1(11,"async"),e.k0s(),e.j41(12,"div"),e.EFF(13),e.k0s(),e.j41(14,"div"),e.EFF(15),e.k0s()()()(),e.j41(16,"div",10)(17,"div",11),e.EFF(18," This information is optional, but by entering it we can provide a more personal experience, and we will always keep it secure. See our "),e.j41(19,"a",12),e.EFF(20,"privacy policy"),e.k0s(),e.EFF(21," for details. "),e.j41(22,"a",13),e.EFF(23,"What other personal information does BioDigital store?"),e.k0s()(),e.j41(24,"form",14)(25,"app-form-field",15),e.nrm(26,"input",16),e.nI1(27,"async"),e.k0s(),e.j41(28,"div",17)(29,"app-form-field",18),e.nrm(30,"input",19),e.k0s(),e.j41(31,"app-form-field",20),e.nrm(32,"input",21),e.k0s()(),e.qex(33,22),e.DNE(34,Po,1,1,"ng-template",null,1,e.C5r)(36,Ao,1,1,"ng-template",null,2,e.C5r)(38,$o,2,1,"ng-container",23),e.nI1(39,"async"),e.DNE(40,qo,5,5,"ng-template",null,3,e.C5r),e.bVm(),e.j41(42,"div",17)(43,"app-form-field",24),e.nrm(44,"input",25),e.k0s(),e.j41(45,"app-form-field",26)(46,"select",27)(47,"option",28),e.EFF(48,"-- Select a State --"),e.k0s(),e.DNE(49,Jo,2,2,"option",29),e.k0s()()(),e.j41(50,"app-form-field",30)(51,"select",31)(52,"option",28),e.EFF(53,"-- Select a Country --"),e.k0s(),e.DNE(54,Wo,2,2,"option",29),e.k0s()(),e.j41(55,"div",32)(56,"button",33),e.nI1(57,"async"),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleCancelClick())}),e.EFF(58," Cancel "),e.k0s(),e.j41(59,"button",34),e.nI1(60,"async"),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleSaveClick())}),e.EFF(61," Save Changes "),e.k0s()()()()()}if(2&n){let i,s;const a=e.sdS(41);e.R7$(7),e.Y8G("ngIf",t.name),e.R7$(3),e.JRh(null==(i=e.bMT(11,13,t.userProfile$))?null:i.email),e.R7$(3),e.JRh(t.demographic),e.R7$(2),e.JRh(t.address),e.R7$(9),e.Y8G("formGroup",t.form),e.R7$(2),e.Y8G("value",null==(s=e.bMT(27,15,t.userProfile$))?null:s.email)("disabled",!0),e.R7$(12),e.Y8G("ngIf",e.bMT(39,17,t.hasOrganization$))("ngIfElse",a),e.R7$(11),e.Y8G("ngForOf",t.states),e.R7$(5),e.Y8G("ngForOf",t.countries),e.R7$(2),e.Y8G("disabled",e.bMT(57,19,t.profileUpdating$)),e.R7$(3),e.Y8G("disabled",!t.form.dirty||t.form.invalid||e.bMT(60,21,t.profileUpdating$))}},dependencies:[c.Sq,c.bT,c.T3,c.ux,c.e1,d.qT,d.xH,d.y7,d.me,d.wz,d.BC,d.cb,d.j4,d.JD,d.$R,$.Q,Se.K,z,yn,c.Jj],styles:[".profile__notice[_ngcontent-%COMP%]{color:#374a68}"],changeDetection:0}),Bt([(0,p.l6)(m.k.getUserProfile),Nt("design:type",g.c)],Oe.prototype,"userProfile$",void 0),Bt([(0,p.l6)(T.q.hasOrganization),Nt("design:type",g.c)],Oe.prototype,"hasOrganization$",void 0),Bt([(0,p.l6)(m.k.getProfileUpdating),Nt("design:type",g.c)],Oe.prototype,"profileUpdating$",void 0);var Be,Ce=l(53236),Ie=l(8961),Rn=l(53719);function Zo(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleEditClick())}),e.EFF(1," Edit "),e.k0s()}}function ei(o,n){1&o&&(e.qex(0),e.EFF(1," You've signed in with with your Google Account. Please visit your Google Account to manage your password. "),e.bVm())}function ti(o,n){1&o&&(e.qex(0),e.EFF(1," Change the password for your account. "),e.bVm())}function ni(o,n){if(1&o&&(e.j41(0,"div")(1,"div",11)(2,"app-message-toggle",12),e.EFF(3),e.k0s()()()),2&o){const t=e.XpG();e.R7$(2),e.Y8G("shown",t.successMessage),e.R7$(),e.SpI(" ",t.successMessage," ")}}function oi(o,n){if(1&o&&(e.j41(0,"div",27)(1,"mat-error"),e.EFF(2),e.k0s()()),2&o){const t=e.XpG(3);e.R7$(2),e.SpI(" New password must be ",t.minPasswordLength," characters or longer. ")}}function ii(o,n){1&o&&(e.j41(0,"div",27)(1,"mat-error"),e.EFF(2," Passwords must match. "),e.k0s()())}function si(o,n){if(1&o){const t=e.RV6();e.j41(0,"form",15)(1,"div",11)(2,"app-message-toggle",16),e.EFF(3),e.k0s()(),e.j41(4,"app-form-field",17),e.nrm(5,"input",18),e.k0s(),e.j41(6,"app-form-field",19),e.nrm(7,"input",20),e.DNE(8,oi,3,1,"div",21),e.k0s(),e.j41(9,"app-form-field",22),e.nrm(10,"input",23),e.DNE(11,ii,3,0,"div",21),e.k0s(),e.j41(12,"div",24)(13,"button",25),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleCancelClick())}),e.EFF(14," Cancel "),e.k0s(),e.j41(15,"button",26),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleSaveClick())}),e.EFF(16," Save Password "),e.k0s()()()}if(2&o){const t=e.XpG(2);e.Y8G("formGroup",t.form),e.R7$(2),e.Y8G("shown",!t.form.touched&&t.errorMessage),e.R7$(),e.SpI(" ",t.errorMessage," "),e.R7$(5),e.Y8G("ngIf",null==t.form.errors?null:t.form.errors.invalidLength),e.R7$(3),e.Y8G("ngIf",null==t.form.errors?null:t.form.errors.passwordsMismatch),e.R7$(2),e.Y8G("disabled",t.updating),e.R7$(2),e.Y8G("disabled",t.form.invalid||t.updating)}}function ai(o,n){if(1&o&&(e.j41(0,"div",13),e.EFF(1),e.k0s(),e.DNE(2,si,17,7,"form",14)),2&o){const t=e.XpG();e.R7$(),e.SpI(" Your password must be ",t.minPasswordLength," characters or longer. "),e.R7$(),e.Y8G("ngIf",!t.updated)}}class Yt{constructor(n,t,i,s){this.store=n,this.actions=t,this.formBuilder=i,this.changeDetectorRef=s,this.minPasswordLength=j.c.minPasswordLength,this.updating=!1,this.updated=!1,this.ngUnsubscribe=new C.B}ngOnInit(){this.initForm(),this.initUpdateListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({current_password:["",d.k0.required],new_password:["",d.k0.required],confirm_new_password:["",d.k0.required]},{validators:this.passwordValidator})}initUpdateListeners(){this.actions.pipe((0,p.xi)(f.RE),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.updating=!0,this.changeDetectorRef.markForCheck()}),this.actions.pipe((0,p.xi)(f.kP),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.form.markAsUntouched(),this.updating=!1,this.updated=!0,this.errorMessage="",this.successMessage="Your password was successfully updated.",this.changeDetectorRef.markForCheck(),setTimeout(()=>{this.resetForm(),this.resetState(),this.panel.mode="view"},5e3)}),this.actions.pipe((0,p.xi)(f.j3),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.form.markAsUntouched(),this.updating=!1,this.updated=!1,this.errorMessage=(0,Ce.u1)(n.error)||"Your password could not be updated. Please try again.",this.successMessage="",this.changeDetectorRef.markForCheck()})}handleEditClick(){this.panel.mode="edit"}handleCancelClick(){this.resetForm(),this.resetState(),this.panel.mode="view"}handleSaveClick(){this.updatePassword()}resetForm(){this.form.reset()}resetState(){this.updating=!1,this.updated=!1,this.errorMessage="",this.successMessage=""}updatePassword(){const{current_password:n,new_password:t,confirm_new_password:i}=this.form.value;this.store.dispatch(new f.RE(n,t,i))}passwordValidator(n){const{new_password:t,confirm_new_password:i}=n.value,s=t&&i&&t!==i,a=t&&t.length<j.c.minPasswordLength;return s||a?{passwordsMismatch:s,invalidLength:a}:null}}(Be=Yt).\u0275fac=function(n){return new(n||Be)(e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(e.gRc))},Be.\u0275cmp=e.VBU({type:Be,selectors:[["app-account-password"]],viewQuery:function(n,t){if(1&n&&e.GBs(z,7),2&n){let i;e.mGM(i=e.lsd())&&(t.panel=i.first)}},decls:13,vars:9,consts:[["changePasswordTemplate",""],["label","Password"],["panel-view-actions",""],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click",4,"ngIf"],["panel-view",""],[1,"text-sm",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["panel-edit",""],[4,"ngIf","ngIfElse"],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click"],[1,"my-6"],["type","message",3,"shown"],[1,"text-sm","mb-7"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["type","error","icon","exclamation-circle",3,"shown"],["label","Current Password","theme","light",1,"mb-2"],["type","password","formControlName","current_password",1,"input"],["label","New Password","theme","light",1,"mb-2"],["type","password","formControlName","new_password",1,"input"],["class","mt-1",4,"ngIf"],["label","Confirm New Password","theme","light",1,"mb-2"],["type","password","formControlName","confirm_new_password",1,"input"],[1,"flex","justify-end","mt-4"],["type","button","app-button","","buttonTheme","light","buttonType","default",1,"mr-4",3,"click","disabled"],["type","submit","app-button","","buttonType","primary",3,"click","disabled"],[1,"mt-1"]],template:function(n,t){if(1&n&&(e.j41(0,"app-account-panel",1)(1,"div",2),e.DNE(2,Zo,2,0,"button",3),e.nI1(3,"async"),e.k0s(),e.j41(4,"div",4)(5,"div",5),e.nI1(6,"async"),e.DNE(7,ei,2,0,"ng-container",6)(8,ti,2,0,"ng-container",7),e.k0s()(),e.j41(9,"div",8),e.DNE(10,ni,4,2,"div",9)(11,ai,3,2,"ng-template",null,0,e.C5r),e.k0s()()),2&n){let i,s;const a=e.sdS(12);e.R7$(2),e.Y8G("ngIf",!(null!=(i=e.bMT(3,5,t.userProfile$))&&i.is_third_party)),e.R7$(3),e.Y8G("ngSwitch",null==(s=e.bMT(6,7,t.userProfile$))?null:s.third_party_provider_name),e.R7$(2),e.Y8G("ngSwitchCase","Google"),e.R7$(3),e.Y8G("ngIf",t.updated)("ngIfElse",a)}},dependencies:[c.bT,c.ux,c.e1,c.fG,d.qT,d.me,d.BC,d.cb,d.j4,d.JD,$.Q,Se.K,Ie.X,Rn.TL,z,c.Jj],changeDetection:0}),function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);s>3&&a&&Object.defineProperty(n,t,a)}([(0,p.l6)(m.k.getUserProfile),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,g.c)],Yt.prototype,"userProfile$",void 0);var Xt,Vt=l(27182),li=l(19833),zt=l(73127),N=l(94371),L=l(34440),pi=l(28407),ui=l(46104),mi=l(21472),di=l(38399),gi=l(59771);(Xt||(Xt={})).lazyLoadScript=function n(t){return new Promise((i,s)=>{const{src:a}=t;if(document.querySelector(`script[src="${a}"]`))i(void 0);else{const u=document.createElement("script");t&&Object.entries(t).forEach(([v,R])=>{"src"!==v&&(u.attributes[v]=R)}),u.src=a,u.onload=()=>i(void 0),u.onerror=()=>s(),document.body.appendChild(u)}})};var hi=l(59e3),Te=l(97352);const _i=["cartElRef"],fi=[[["","cart-header",""]],[["","cart-footer",""]]],bi=["[cart-header]","[cart-footer]"];function vi(o,n){1&o&&e.nrm(0,"app-spinner",6)}const Ci=[{src:"https://www.paypalobjects.com/api/checkout.js","data-version-4":"","log-level":"warn"},{src:"https://js.braintreegateway.com/web/dropin/1.24.0/js/dropin.min.js"},{src:"https://js.braintreegateway.com/web/3.73.1/js/client.min.js"},{src:"https://js.braintreegateway.com/web/3.73.1/js/data-collector.min.js"}];let kn=(()=>{var o;class n{constructor(i,s,a){this.subscriptionService=i,this.vendorAnalyticsService=s,this.changeRef=a,this.loading=!0,this.cartError=new e.bkB,this.paymentMethodRequestable=!1,this.paymentOptionSelected=!1,this.ngUnsubscribe=new C.B}ngAfterViewInit(){this.initCheckout()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}requestPayment(){return this.subscriptionService.requestBraintreePayment()}initCheckout(){this.loading=!0,(0,ui.p)(Ci.map(i=>(0,mi.H)(Xt.lazyLoadScript(i)))).pipe((0,di.q)(()=>this.subscriptionService.getBraintreeClientToken()),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.initBraintee(i).catch(s=>{this.vendorAnalyticsService.track("Braintree Cart Initialization Failure",{errorMessage:s.message}),this.cartError.emit(`An error occurred initializing your payment options: ${s.message}`)})})}initBraintee(i){var s=this;return(0,pi.A)(function*(){const a=window.braintree,r={authorization:i,container:s.cartElRef.nativeElement,displayName:"BioDigital Inc.",paypal:{flow:"vault",buttonStyle:{color:"gold",shape:"rect",size:"responsive",label:"checkout"}}},u=yield a.client.create({authorization:i});s.subscriptionService.braintreeDataCollector=yield a.dataCollector.create({client:u,paypal:!0}),s.loading=!1,s.changeRef.markForCheck(),s.subscriptionService.braintreeDropin=yield a.dropin.create(r);const v=s.subscriptionService.braintreeDropin;v.isPaymentMethodRequestable()&&(s.paymentMethodRequestable=!0),v.on("paymentMethodRequestable",()=>{s.paymentMethodRequestable=!0,s.changeRef.markForCheck()}),v.on("noPaymentMethodRequestable",()=>{s.paymentMethodRequestable=!1,s.changeRef.markForCheck()}),v.on("paymentOptionSelected",()=>{s.paymentOptionSelected=!0,s.changeRef.markForCheck()}),s.changeRef.markForCheck()})()}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(gi.n),e.rXU(hi.e),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-account-subscription-cart"]],viewQuery:function(i,s){if(1&i&&e.GBs(_i,7),2&i){let a;e.mGM(a=e.lsd())&&(s.cartElRef=a.first)}},outputs:{cartError:"cartError"},ngContentSelectors:bi,decls:9,vars:1,consts:[["cartElRef",""],[1,"checkout"],[1,"checkout__header"],[1,"checkout__container"],["size","huge","class","block my-4",4,"ngIf"],[1,"checkout__footer","my-4"],["size","huge",1,"block","my-4"]],template:function(i,s){1&i&&(e.NAR(fi),e.j41(0,"div",1)(1,"div",2),e.SdG(2),e.k0s(),e.j41(3,"div",3),e.DNE(4,vi,1,0,"app-spinner",4),e.nrm(5,"div",null,0),e.k0s(),e.j41(7,"div",5),e.SdG(8,1),e.k0s()()),2&i&&(e.R7$(4),e.Y8G("ngIf",s.loading))},dependencies:[c.bT,Te.tI],changeDetection:0}),n})();var Ne=l(25780),Lt=function(o){return o.TeamAccountClosed="team_account_closed",o.ContentOwnershipTransfer="content_ownership_transfer",o}(Lt||{});function Ti(o,n){if(1&o&&(e.qex(0),e.j41(1,"span",3),e.EFF(2),e.k0s(),e.EFF(3),e.bVm()),2&o){const t=e.XpG();e.R7$(2),e.JRh(t.name),e.R7$(),e.SpI(" left the team on ",t.date," and their content was transferred to you. ")}}function yi(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"span",3),e.EFF(2,"Your team was closed"),e.k0s(),e.EFF(3),e.j41(4,"button",4),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleUpgradeClick())}),e.EFF(5," Upgrade now. "),e.k0s(),e.bVm()}if(2&o){const t=e.XpG();e.R7$(3),e.SpI(" on ",t.date,". You have been downgraded to a free Personal account. "),e.R7$(),e.Y8G("uppercase",!1)}}let Ri=(()=>{var o;class n{constructor(i,s){this.store=i,this.dialogService=s,this.UserNoticeTypes=Lt,this.name="",this.date="",this.dismissing=!1}ngOnInit(){if(this.date=(0,c.Yq)(this.userNotice.notice_created_date,"longDate","en"),this.userNotice.notice_type===Lt.ContentOwnershipTransfer){const i=this.userNotice.notice_details,{user_first_name:s,user_last_name:a}=i.transfer_user;this.name=[s,a].filter(Boolean).join(" ")}}handleUpgradeClick(){this.dialogService.openUpgradeDialog()}handleDismiss(){this.dismissing=!0,this.store.dispatch(new f.EX(this.userNotice.notice_id))}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(p.il),e.rXU(K.o))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-user-notice"]],inputs:{userNotice:"userNotice"},decls:4,vars:6,consts:[["type","notification","theme","dark","icon","info-circle",1,"user-notice",3,"handleDismiss","dismiss"],[1,"text-sm",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"font-bold"],["app-button","","buttonType","text","buttonTheme","light",1,"underline",3,"click","uppercase"]],template:function(i,s){1&i&&(e.j41(0,"app-message-toggle",0),e.bIt("handleDismiss",function(){return s.handleDismiss()}),e.j41(1,"div",1),e.DNE(2,Ti,4,2,"ng-container",2)(3,yi,6,2,"ng-container",2),e.k0s()()),2&i&&(e.AVh("user-notice--dismissing",s.dismissing),e.Y8G("dismiss",!0),e.R7$(),e.Y8G("ngSwitch",s.userNotice.notice_type),e.R7$(),e.Y8G("ngSwitchCase",s.UserNoticeTypes.ContentOwnershipTransfer),e.R7$(),e.Y8G("ngSwitchCase",s.UserNoticeTypes.TeamAccountClosed))},dependencies:[$.Q,c.ux,c.e1,Ie.X],styles:[".user-notice--dismissing[_ngcontent-%COMP%]{opacity:.5}"],changeDetection:0}),n})();function ki(o,n){1&o&&e.nrm(0,"app-user-notice",1),2&o&&e.Y8G("userNotice",n.$implicit)}let Qt=(()=>{var o;class n{constructor(i){this.store=i,this.ngUnsubscribe=new C.B}ngOnInit(){this.userNotices$=this.store.select(m.k.getUserNotices).pipe((0,D.p)(i=>!(0,_.isNil)(i)),(0,M.T)(i=>i.filter(s=>s.notice_type===this.noticeType)),(0,h.Q)(this.ngUnsubscribe)),this.store.selectSnapshot(m.k.getUserNotices)||this.store.dispatch(new f.T9)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(p.il))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-user-notices"]],inputs:{noticeType:"noticeType"},decls:2,vars:3,consts:[["class","block mb-3",3,"userNotice",4,"ngFor","ngForOf"],[1,"block","mb-3",3,"userNotice"]],template:function(i,s){1&i&&(e.DNE(0,ki,1,1,"app-user-notice",0),e.nI1(1,"async")),2&i&&e.Y8G("ngForOf",e.bMT(1,1,s.userNotices$))},dependencies:[c.Sq,Ri,c.Jj],changeDetection:0}),n})();function Fi(o,n){1&o&&e.eu8(0)}function Si(o,n){if(1&o&&(e.j41(0,"div",7),e.EFF(1," This subscription has been purchased through iTunes. "),e.DNE(2,Fi,1,0,"ng-container",8),e.k0s()),2&o){e.XpG(2);const t=e.sdS(7);e.R7$(2),e.Y8G("ngTemplateOutlet",t)}}function Ii(o,n){1&o&&e.eu8(0)}function ji(o,n){if(1&o&&(e.j41(0,"div",7),e.EFF(1," This subscription has been purchased through Google Play. "),e.DNE(2,Ii,1,0,"ng-container",8),e.k0s()),2&o){e.XpG(2);const t=e.sdS(7);e.R7$(2),e.Y8G("ngTemplateOutlet",t)}}function xi(o,n){if(1&o&&(e.j41(0,"div",6),e.DNE(1,Si,3,1,"div",5)(2,ji,3,1,"div",5),e.k0s()),2&o){const t=e.XpG(2);e.Y8G("ngSwitch",t.subscription.subscription_provider),e.R7$(),e.Y8G("ngSwitchCase","apple"),e.R7$(),e.Y8G("ngSwitchCase","google")}}function Ui(o,n){1&o&&(e.j41(0,"div",7),e.EFF(1," Premium access will remain active until your renewal date passes. "),e.k0s())}function Pi(o,n){1&o&&(e.j41(0,"div",7),e.EFF(1," Please visit your iTunes account to manage or cancel your subscription. "),e.k0s())}function Ei(o,n){1&o&&(e.j41(0,"div",7),e.EFF(1," Please visit your Google Play account to manage your subscription. "),e.k0s())}function Di(o,n){if(1&o&&(e.j41(0,"div",7),e.EFF(1," Your subscription has been canceled. "),e.qex(2,3),e.DNE(3,Ui,2,0,"div",5)(4,Pi,2,0,"div",5)(5,Ei,2,0,"div",5),e.bVm(),e.k0s()),2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("ngSwitch",t.subscription.subscription_provider),e.R7$(),e.Y8G("ngSwitchCase","braintree"),e.R7$(),e.Y8G("ngSwitchCase","apple"),e.R7$(),e.Y8G("ngSwitchCase","google")}}function Mi(o,n){1&o&&e.eu8(0)}function Ai(o,n){if(1&o&&(e.j41(0,"div",7),e.EFF(1," Your payment is past due. "),e.DNE(2,Mi,1,0,"ng-container",8),e.k0s()),2&o){e.XpG();const t=e.sdS(7);e.R7$(2),e.Y8G("ngTemplateOutlet",t)}}function Gi(o,n){1&o&&e.eu8(0)}function $i(o,n){if(1&o&&(e.j41(0,"div",7),e.EFF(1," Your subscription has been canceled or expired. "),e.DNE(2,Gi,1,0,"ng-container",8),e.k0s()),2&o){e.XpG();const t=e.sdS(7);e.R7$(2),e.Y8G("ngTemplateOutlet",t)}}function wi(o,n){1&o&&(e.j41(0,"div",7),e.EFF(1," Please update your payment info for premium access. "),e.k0s())}function Oi(o,n){1&o&&(e.j41(0,"div",7),e.EFF(1," Please visit your iTunes account to manage or cancel your subscription. "),e.k0s())}function Bi(o,n){1&o&&(e.j41(0,"div",7),e.EFF(1," Please visit your Google Play account to manage your subscription. "),e.k0s())}function Ni(o,n){if(1&o&&(e.qex(0,3),e.DNE(1,wi,2,0,"div",5)(2,Oi,2,0,"div",5)(3,Bi,2,0,"div",5),e.bVm()),2&o){const t=e.XpG(2);e.Y8G("ngSwitch",t.subscription.subscription_provider),e.R7$(),e.Y8G("ngSwitchCase","braintree"),e.R7$(),e.Y8G("ngSwitchCase","apple"),e.R7$(),e.Y8G("ngSwitchCase","google")}}function Yi(o,n){if(1&o&&(e.j41(0,"div",2),e.qex(1,3),e.DNE(2,xi,3,3,"div",4)(3,Di,6,4,"div",5)(4,Ai,3,1,"div",5)(5,$i,3,1,"div",5),e.bVm(),e.DNE(6,Ni,4,4,"ng-template",null,0,e.C5r),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngSwitch",t.subscription.subscription_status),e.R7$(),e.Y8G("ngSwitchCase","active"),e.R7$(),e.Y8G("ngSwitchCase","canceled"),e.R7$(),e.Y8G("ngSwitchCase","past due"),e.R7$(),e.Y8G("ngSwitchCase","expired")}}let Vi=(()=>{var o;class n{constructor(){}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-account-status-message"]],inputs:{subscription:"subscription"},decls:1,vars:1,consts:[["providerTpl",""],["class","text-sm",4,"ngIf"],[1,"text-sm"],[3,"ngSwitch"],["class","mb-1",3,"ngSwitch",4,"ngSwitchCase"],["class","mb-1",4,"ngSwitchCase"],[1,"mb-1",3,"ngSwitch"],[1,"mb-1"],[4,"ngTemplateOutlet"]],template:function(i,s){1&i&&e.DNE(0,Yi,8,5,"div",1),2&i&&e.Y8G("ngIf",s.subscription)},dependencies:[c.bT,c.T3,c.ux,c.e1],changeDetection:0}),n})();function zi(o,n){if(1&o&&(e.j41(0,"div",8)(1,"div",9),e.EFF(2),e.k0s(),e.j41(3,"div",10),e.EFF(4),e.k0s()()),2&o){const t=e.XpG();e.R7$(2),e.SpI(" $",t.subscription.billing_details.next_billing_period_amount," "),e.R7$(2),e.SpI(" ",t.calcPaymentFrequency(t.subscription.plan_id)," ")}}function Xi(o,n){if(1&o&&(e.qex(0),e.j41(1,"div",11),e.EFF(2,"Renewal Date"),e.k0s(),e.j41(3,"div",12),e.qex(4),e.EFF(5),e.nI1(6,"date"),e.bVm(),e.k0s(),e.bVm()),2&o){const t=n.$implicit,i=e.XpG();e.R7$(5),e.Lme(" ",e.i5U(6,2,t,"longDate")," (in ",i.calcDaysRemaining(t)," days) ")}}let qt=(()=>{var o;class n{constructor(){this.calcDaysRemaining=zt.lu,this.calcPaymentFrequency=zt.Qh}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-account-subscription-summary"]],inputs:{subscription:"subscription"},decls:10,vars:4,consts:[["card-header","",1,"summary","flex","flex-row","justify-between"],[1,"summary__title","flex-auto"],[1,"text-base","font-semibold","uppercase"],["class","flex flex-col items-center",4,"ngIf"],["card-content",""],[4,"ngIf"],[1,"my-1"],[3,"subscription"],[1,"flex","flex-col","items-center"],[1,"text-lg","font-semibold"],[1,"summary__pricing","text-xs"],[1,"text-xs","text-gray-400"],[1,"text-sm"]],template:function(i,s){1&i&&(e.j41(0,"app-account-summary-card")(1,"div",0)(2,"div",1)(3,"div",2),e.EFF(4),e.k0s()(),e.DNE(5,zi,5,2,"div",3),e.k0s(),e.j41(6,"div",4),e.DNE(7,Xi,7,5,"ng-container",5),e.j41(8,"div",6),e.nrm(9,"app-account-status-message",7),e.k0s()()()),2&i&&(e.R7$(4),e.SpI(" ",null==s.subscription?null:s.subscription.subscription_type_display," "),e.R7$(),e.Y8G("ngIf",null==s.subscription?null:s.subscription.billing_details),e.R7$(2),e.Y8G("ngIf",null==s.subscription||null==s.subscription.billing_details?null:s.subscription.billing_details.next_billing_date_time),e.R7$(2),e.Y8G("subscription",s.subscription))},dependencies:[c.bT,yn,Vi,c.vh],styles:[".summary__pricing[_ngcontent-%COMP%]{color:#374a68}"],changeDetection:0}),n})();var Ye,Fn=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},Sn=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function Li(o,n){if(1&o){const t=e.RV6();e.j41(0,"a",3),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleEnterCodeClick())}),e.EFF(1," Have a promo code? "),e.k0s()}}function Qi(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"div",6)(2,"em"),e.EFF(3),e.nI1(4,"async"),e.k0s(),e.EFF(5," Promo Code applied. "),e.j41(6,"span",7),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleRemoveClick())}),e.EFF(7,"Remove"),e.k0s()(),e.bVm()}if(2&o){let t;const i=e.XpG(2);e.R7$(3),e.SpI('"',null==(t=e.bMT(4,1,i.selectedPlan$))||null==t.discount?null:t.discount.id,'"')}}function qi(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"div")(2,"app-form-field",8),e.nrm(3,"input",9),e.k0s(),e.j41(4,"div",10)(5,"button",11),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleCancelPromoClick())}),e.EFF(6," Cancel "),e.k0s(),e.j41(7,"button",12),e.nI1(8,"async"),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleApplyPromoClick())}),e.EFF(9," Apply Promo Code "),e.k0s()()(),e.bVm()}if(2&o){const t=e.XpG(2);e.R7$(7),e.Y8G("disabled",t.form.invalid||e.bMT(8,1,t.checking$))}}function Ji(o,n){if(1&o&&(e.qex(0,4),e.DNE(1,Qi,8,3,"ng-container",5),e.nI1(2,"async"),e.DNE(3,qi,10,3,"ng-container",5),e.nI1(4,"async"),e.bVm()),2&o){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(),e.Y8G("ngIf",e.bMT(2,3,t.discountApplied$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(4,5,t.discountApplied$))}}class Tt{get discountApplied$(){return this.selectedPlan$.pipe((0,M.T)(n=>n&&n.discount))}constructor(n,t,i,s,a){this.store=n,this.actions=t,this.formBuilder=i,this.snackBar=s,this.changeRef=a,this.ngUnsubscribe=new C.B}ngOnInit(){this.initForm(),this.initCodeListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({code:["",d.k0.required]})}initCodeListeners(){this.actions.pipe((0,p.xi)(N.wq),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{const{plan:t}=n;!(0,_.isNil)(t.discount)||this.snackBar.open("Invalid promo code entered, please try again.")}),this.actions.pipe((0,p.xi)(N.Vz),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("There was an error applying the promo code, please try again.")})}handleEnterCodeClick(){this.applyingCode=!0}handleCancelPromoClick(){this.applyingCode=!1,this.changeRef.markForCheck()}handleApplyPromoClick(){const n=this.store.selectSnapshot(L.z.getSelectedPlan),{code:t}=this.form.value;this.store.dispatch(new N.FT(n.plan_id,t))}handleRemoveClick(){this.clearPromoCode(),this.store.dispatch(new N.jL),this.applyingCode=!1,this.changeRef.markForCheck()}clearPromoCode(){this.form.patchValue({code:""})}}(Ye=Tt).\u0275fac=function(n){return new(n||Ye)(e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(ne.UG),e.rXU(e.gRc))},Ye.\u0275cmp=e.VBU({type:Ye,selectors:[["app-account-subscription-promo"]],decls:5,vars:6,consts:[[1,"promo"],["appEventFence","","class","text-link underline text-sm",3,"click",4,"ngIf"],[3,"formGroup",4,"ngIf"],["appEventFence","",1,"text-link","underline","text-sm",3,"click"],[3,"formGroup"],[4,"ngIf"],[1,"text-sm"],[1,"text-link","underline",3,"click"],["label","Promo Code"],["type","text","formControlName","code",1,"input"],[1,"flex","justify-end","mt-4"],["type","reset","app-button","","buttonTheme","light","buttonType","default",1,"mr-2",3,"click"],["type","submit","app-button","","buttonType","primary",3,"click","disabled"]],template:function(n,t){1&n&&(e.j41(0,"div",0),e.DNE(1,Li,2,0,"a",1),e.nI1(2,"async"),e.DNE(3,Ji,5,7,"ng-container",2),e.nI1(4,"async"),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngIf",!t.applyingCode&&!e.bMT(2,2,t.discountApplied$)),e.R7$(2),e.Y8G("ngIf",t.applyingCode||e.bMT(4,4,t.discountApplied$)))},dependencies:[c.bT,d.me,d.BC,d.cb,d.j4,d.JD,$.Q,Ne.L,Se.K,c.Jj],changeDetection:0}),Fn([(0,p.l6)(L.z.getCheckingCode),Sn("design:type",g.c)],Tt.prototype,"checking$",void 0),Fn([(0,p.l6)(L.z.getSelectedPlan),Sn("design:type",g.c)],Tt.prototype,"selectedPlan$",void 0);var Ve,In=l(35286),Jt=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},Wt=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Wi=["cart"];function Hi(o,n){if(1&o&&(e.nrm(0,"div",14),e.nI1(1,"markdown"),e.nI1(2,"async")),2&o){const t=e.XpG().$implicit;e.Y8G("innerHTML",e.bMT(2,3,e.bMT(1,1,t.order_summary_text)),e.npT)}}function Ki(o,n){if(1&o&&(e.j41(0,"div"),e.nrm(1,"app-account-subscription-summary",12),e.DNE(2,Hi,3,5,"div",13),e.k0s()),2&o){const t=n.$implicit,i=e.XpG();e.R7$(),e.Y8G("subscription",i.convertPlanToSubscription(t)),e.R7$(),e.Y8G("ngIf",t.order_summary_text)}}function Zi(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-account-subscription-cart",null,1)(2,"div",15),e.nrm(3,"app-account-subscription-promo"),e.k0s(),e.j41(4,"div",16)(5,"button",17),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleCancelClick())}),e.EFF(6," Cancel "),e.k0s(),e.j41(7,"button",18),e.nI1(8,"async"),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handlePurchaseClick())}),e.EFF(9," Purchase "),e.k0s()()()}if(2&o){const t=e.sdS(1),i=e.XpG();e.R7$(7),e.Y8G("disabled",!t.paymentMethodRequestable||e.bMT(8,1,i.buying$))}}class ze{constructor(n,t,i,s,a,r){this.router=n,this.activatedRoute=t,this.store=i,this.actions=s,this.snackBar=a,this.dialogService=r,this.convertPlanToSubscription=zt.Xq,this.ngUnsubscribe=new C.B}ngOnInit(){this.initForm(),this.initSubscriptionListeners(),this.store.dispatch(new N.eI)}ngAfterViewInit(){this.initNavigation()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.plans$.pipe((0,D.p)(n=>n.length>0),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.store.dispatch(new N.dJ(n[0]))})}initSubscriptionListeners(){this.actions.pipe((0,p.xi)(N.Jv),(0,h.Q)(this.ngUnsubscribe)).subscribe(({request:n})=>{this.store.dispatch(new N.OR(n))}),this.actions.pipe((0,p.xi)(N.K$),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("There was an error requesting your purchase.")}),this.actions.pipe((0,p.xi)(N.XF),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.handleCheckoutSuccess(n)}),this.actions.pipe((0,p.xi)(N.ee),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.handleCheckoutFailure(n.error)}),this.actions.pipe((0,p.rM)(f.sz),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.router.navigate(["/login/verify"])})}initNavigation(){this.activatedRoute.queryParams.pipe((0,li.c)(0),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.handleNavigation(n)})}handleNavigation(n){const{section:t,mode:i}=n;"subscription"===t&&"edit"===i&&(this.panel.mode="edit")}handleLearnMoreClick(){this.dialogService.openUpgradeDialog()}handleCancelClick(){this.panel.mode="view"}handleUpgradeClick(){j.c.native?this.dialogService.openUpgradeDialog():this.panel.mode="edit"}handlePurchaseClick(){const{plan_id:n,discount:t}=this.store.selectSnapshot(L.z.getSelectedPlan);this.store.dispatch(new N.KM(n,t?t.id:""))}handleCheckoutSuccess(n){this.snackBar.open("You've Successfully upgraded to a premium account");const{discountcode:t}=n.request;t&&this.store.dispatch(new f.r({type:"promocode",id:t})),window.location.href="/account/profile"}handleCheckoutFailure(n){const t=(0,Ce.u1)(n)||"Sorry, but an issue has occurred purchasing your subscription. Please try again or contact us.";this.snackBar.open(t)}}(Ve=ze).\u0275fac=function(n){return new(n||Ve)(e.rXU(U.Ix),e.rXU(U.nX),e.rXU(p.il),e.rXU(p.En),e.rXU(ne.UG),e.rXU(K.o))},Ve.\u0275cmp=e.VBU({type:Ve,selectors:[["app-account-free-user-subscription"]],viewQuery:function(n,t){if(1&n&&(e.GBs(z,7),e.GBs(Wi,5)),2&n){let i;e.mGM(i=e.lsd())&&(t.panel=i.first),e.mGM(i=e.lsd())&&(t.cart=i.first)}},decls:23,vars:4,consts:[["panel",""],["cart",""],["label","Subscription"],["panel-view-actions",""],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click"],["panel-view","",1,"text-sm"],["noticeType","team_account_closed"],[1,"mb-4"],[1,"font-bold"],["appEventFence","",1,"text-link","underline",3,"click"],["panel-edit",""],[4,"ngIf"],[3,"subscription"],["class","my-2 text-sm html",3,"innerHTML",4,"ngIf"],[1,"my-2","text-sm","html",3,"innerHTML"],["cart-header","",1,"mt-4","mb-8"],["cart-footer","",1,"flex","justify-end"],["type","button","app-button","","buttonTheme","light","buttonType","default",1,"mr-4",3,"click"],["type","submit","app-button","","buttonTheme","light","buttonType","primary",3,"click","disabled"]],template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"app-account-panel",2,0)(2,"span",3)(3,"button",4),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleUpgradeClick())}),e.EFF(4," Upgrade "),e.k0s()(),e.j41(5,"div",5),e.nrm(6,"app-user-notices",6),e.j41(7,"div",7),e.EFF(8,"You have a free "),e.j41(9,"em",8),e.EFF(10,"Personal"),e.k0s(),e.EFF(11," account."),e.k0s(),e.j41(12,"div"),e.EFF(13," As a free user you currently have access to our basic features. Upgrade to a "),e.j41(14,"em",8),e.EFF(15,"Personal Plus"),e.k0s(),e.EFF(16," plan to unlock full access. "),e.j41(17,"a",9),e.bIt("click",function(){return e.eBV(i),e.Njj(t.handleLearnMoreClick())}),e.EFF(18,"Learn more"),e.k0s()()(),e.j41(19,"div",10),e.DNE(20,Ki,3,2,"div",11),e.nI1(21,"async"),e.DNE(22,Zi,10,3,"app-account-subscription-cart",11),e.k0s()()}if(2&n){const i=e.sdS(1);e.R7$(20),e.Y8G("ngIf",e.bMT(21,2,t.selectedPlan$)),e.R7$(2),e.Y8G("ngIf","edit"===i.mode)}},dependencies:[c.bT,$.Q,Ne.L,Qt,z,kn,qt,Tt,c.Jj,In.i0],changeDetection:0}),Jt([(0,p.l6)(L.z.getPlans),Wt("design:type",g.c)],ze.prototype,"plans$",void 0),Jt([(0,p.l6)(L.z.getSelectedPlan),Wt("design:type",g.c)],ze.prototype,"selectedPlan$",void 0),Jt([(0,p.l6)(L.z.getBuying),Wt("design:type",g.c)],ze.prototype,"buying$",void 0);var Xe,Ht=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},Kt=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};class Le{get isBraintreeSubscription$(){return this.subscriptionProvider$.pipe((0,M.T)(n=>"braintree"===n))}get subscriptionProvider$(){return this.subscription$.pipe((0,M.T)(n=>n?n.subscription_provider:""))}constructor(n){this.store=n,this.ngUnsubscribe=new C.B}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}(Xe=Le).\u0275fac=function(n){return new(n||Xe)(e.rXU(p.il))},Xe.\u0275cmp=e.VBU({type:Xe,selectors:[["app-account-premium-user-subscription"]],viewQuery:function(n,t){if(1&n&&e.GBs(z,7),2&n){let i;e.mGM(i=e.lsd())&&(t.panel=i.first)}},decls:5,vars:3,consts:[["panel",""],["label","Subscription"],[1,"account","mt-4"],[3,"subscription"]],template:function(n,t){1&n&&(e.j41(0,"app-account-panel",1,0)(2,"div",2),e.nrm(3,"app-account-subscription-summary",3),e.nI1(4,"async"),e.k0s()()),2&n&&(e.R7$(3),e.Y8G("subscription",e.bMT(4,1,t.subscription$)))},dependencies:[z,qt,c.Jj],changeDetection:0}),Ht([(0,p.l6)(m.k.getUserProfile),Kt("design:type",g.c)],Le.prototype,"userProfile$",void 0),Ht([(0,p.l6)(L.z.getSubscription),Kt("design:type",g.c)],Le.prototype,"subscription$",void 0),Ht([(0,p.l6)(L.z.isFreeTrial),Kt("design:type",g.c)],Le.prototype,"isFreeTrial$",void 0);var ue=l(15877),jn=l(28577),F=l(34006),me=l(70737),A=l(82608),he=l(99504),Zt=l(80910),yt=l(45438);function ts(o,n){if(1&o&&(e.j41(0,"div",15)(1,"p"),e.EFF(2),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(2),e.JRh(t.message)}}function ns(o,n){1&o&&e.nrm(0,"app-team-user",16),2&o&&e.Y8G("user",n.$implicit)("showEmail",!0)("showNameUnknown",!0)}function os(o,n){if(1&o&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t.id),e.R7$(),e.Lme(" ",t.name,"(",t.email,") ")}}function is(o,n){if(1&o&&(e.j41(0,"div",7),e.DNE(1,ts,3,1,"div",8),e.j41(2,"app-form-field",9),e.DNE(3,ns,1,3,"app-team-user",10),e.k0s(),e.j41(4,"app-form-field",11)(5,"select",12)(6,"option",13),e.EFF(7,"-- Select User --"),e.k0s(),e.DNE(8,os,2,3,"option",14),e.k0s()()()),2&o){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(),e.Y8G("ngIf",t.message),e.R7$(2),e.Y8G("ngForOf",t.sourceUsers),e.R7$(),e.Y8G("label","To User ("+t.availableRoles.join(" OR ")+")"),e.R7$(4),e.Y8G("ngForOf",t.availableUsers)}}const xn=[X.x.Creator,X.x.Admin];let ss=(()=>{var o;class n{constructor(i,s,a,r,u,v,R,E){this.data=i,this.dialogRef=s,this.formBuilder=a,this.store=r,this.actions=u,this.changeRef=v,this.snackBar=R,this.usersService=E,this.availableRoles=xn,this.availableUsers=[],this.sourceUsers=[],this.transferring=!1,this.ngUnsubscribe=new C.B}ngOnInit(){this.initForm(),this.initOrganization(),this.initMessaging()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({targetUserId:[`${this.data.targetUserId||""}`,d.k0.required]})}initOrganization(){const i=this.store.selectSnapshot(he.e.getUsers);this.sourceUsers=this.data.sourceUsers;const s=new Set(this.sourceUsers.map(a=>a.id));this.availableUsers=i.filter(a=>{const r=xn.includes(a.user_role.role_name),u=s.has(a.user_id);return r&&!u}).sort((a,r)=>(0,_.trim)((a.user_first_name??"").toLocaleUpperCase())>(0,_.trim)((r.user_first_name??"").toLocaleUpperCase())?1:-1).map(a=>this.usersService.createUserDisplayModel(a)),this.message="Transfer the original save location and management permissions of the user(s)' content to a new owner",this.data.action===me.y.RemoveUser&&(this.message+=" before removing the user(s).")}initMessaging(){this.actions.pipe((0,p.xi)(A.Qy),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.transferring=!0,this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(A.Fk),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.transferring=!1,this.dialogRef.close(i.users),this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(A.ah),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.transferring=!1,this.snackBar.open("There was an error transferring user content, please try again."),this.changeRef.markForCheck()})}handleTransferClick(){const{organization:i,sourceUsers:s}=this.data,a=parseInt(this.form.value.targetUserId,10),r=s.map(u=>({sourceUserId:u.id,targetUserId:a}));this.store.dispatch(new A.Qy(i.id,r))}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(F.Vh),e.rXU(F.CP),e.rXU(d.ze),e.rXU(p.il),e.rXU(p.En),e.rXU(e.gRc),e.rXU(ne.UG),e.rXU(Zt.g))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-team-transfer-dialog"]],decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["data-test","teamTransferDialog",1,"dialog"],[3,"formGroup",4,"ngIf"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","mat-dialog-close",""],["app-button","","buttonType","primary",3,"click","disabled"],[3,"formGroup"],["class","mb-3 text-sm",4,"ngIf"],["label","From User"],["class","flex grow my-1 py-2",3,"user","showEmail","showNameUnknown",4,"ngFor","ngForOf"],[3,"label"],["formControlName","targetUserId",1,"input"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"mb-3","text-sm"],[1,"flex","grow","my-1","py-2",3,"user","showEmail","showNameUnknown"],[3,"value"]],template:function(i,s){1&i&&(e.j41(0,"h1",0),e.EFF(1,"Transfer Content"),e.k0s(),e.j41(2,"div",1)(3,"div",2),e.DNE(4,is,9,5,"div",3),e.k0s()(),e.j41(5,"div",4)(6,"button",5),e.EFF(7,"Cancel"),e.k0s(),e.j41(8,"button",6),e.bIt("click",function(){return s.handleTransferClick()}),e.EFF(9," Transfer Content "),e.k0s()()),2&i&&(e.R7$(4),e.Y8G("ngIf",s.sourceUsers),e.R7$(4),e.Y8G("disabled",s.form.invalid||s.transferring))},dependencies:[c.Sq,c.bT,F.tx,F.BI,F.E7,F.Yi,$.Q,Se.K,yt.o,d.xH,d.y7,d.wz,d.BC,d.cb,d.j4,d.JD],styles:[".dialog__user-role[_ngcontent-%COMP%]{text-transform:uppercase;color:#96a8c0}"],changeDetection:0}),n})();var Rt=l(84370),Qe=l(82765),Un=l(93547);function as(o,n){if(1&o&&(e.j41(0,"app-alert",14)(1,"strong",15),e.EFF(2),e.k0s(),e.EFF(3," is excluded as they are the current user "),e.k0s()),2&o){const t=e.XpG();e.R7$(2),e.JRh(t.data.excluded)}}function rs(o,n){1&o&&e.nrm(0,"app-team-user",16),2&o&&e.Y8G("user",n.$implicit)("showEmail",!0)("showNameUnknown",!0)}function cs(o,n){if(1&o&&(e.j41(0,"option",17),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.label," ")}}function ls(o,n){if(1&o&&(e.j41(0,"app-message-toggle",18),e.EFF(1," You are trying to "),e.j41(2,"a",19),e.EFF(3),e.k0s(),e.EFF(4,". If you remove them, the apps will "),e.j41(5,"span",4),e.EFF(6,"stop working."),e.k0s(),e.j41(7,"div",20)(8,"mat-checkbox",21)(9,"span",22),e.EFF(10),e.k0s()()()()),2&o){const t=e.XpG();e.R7$(3),e.SpI(" remove ",1===t.activeDevelopersLength?"a "+t.developerNoun:t.developerNoun," with active developer apps"),e.R7$(7),e.SpI("I confirm that I want to remove the ",t.developerNoun,".")}}var Me=function(o){return o.Transfer="transfer",o.Remove="remove",o}(Me||{});let ps=(()=>{var o;class n{constructor(i,s,a){this.data=i,this.dialogRef=s,this.formBuilder=a,this.contentOptions=[{value:Me.Transfer,label:"Transfer ownership to a different team member"},{value:Me.Remove,label:"Make private and remove from team"}],this.hasActiveDevelopers=!1}ngOnInit(){const i=this.data.users.length;this.userNoun=1===i?"user":"users",this.title=`Remove ${1===i?"":`${i} `}${(0,_.capitalize)(this.userNoun)}`;const s=this.data.users.filter(a=>a.activeDeveloper);this.activeDevelopersLength=s.length,this.developerNoun=1===this.activeDevelopersLength?"user":"users",this.hasActiveDevelopers=this.activeDevelopersLength>0,this.form=this.formBuilder.group({contentOptions:[Me.Transfer,d.k0.required],confirm:[!this.hasActiveDevelopers,d.k0.requiredTrue]})}handleRemoveClick(){this.dialogRef.close(this.form.value.contentOptions)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(F.Vh),e.rXU(F.CP),e.rXU(d.ze))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-team-remove-users-dialog"]],decls:20,vars:9,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["data-test","teamRemoveUserDialog",1,"dialog",3,"formGroup"],[1,"text-sm","pb-3"],[1,"font-bold"],["type","info","theme","light",4,"ngIf"],["class","flex grow my-1 py-2",3,"user","showEmail","showNameUnknown",4,"ngFor","ngForOf"],["label","What would you like to do with their 3D models?"],["formControlName","contentOptions",1,"input"],[3,"value",4,"ngFor","ngForOf"],["type","danger","theme","dark","icon","info-circle",4,"ngIf"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","mat-dialog-close",""],["app-button","","buttonType","primary",3,"click","disabled"],["type","info","theme","light"],[1,"font-semibold"],[1,"flex","grow","my-1","py-2",3,"user","showEmail","showNameUnknown"],[3,"value"],["type","danger","theme","dark","icon","info-circle"],["href","https://support.biodigital.com/hc/en-us/articles/22012525162391-Remove-a-developer-from-my-team#h_01HRSNVCVE63TZ85HB9Y5436R0","target","_blank",1,"font-bold","text-link","underline"],[1,"theme-light","mt-3"],["formControlName","confirm"],[2,"white-space","normal"]],template:function(i,s){1&i&&(e.j41(0,"h1",0),e.EFF(1),e.k0s(),e.j41(2,"div",1)(3,"div",2)(4,"div",3),e.EFF(5),e.j41(6,"span",4),e.EFF(7),e.k0s()(),e.DNE(8,as,4,1,"app-alert",5),e.j41(9,"app-form-field"),e.DNE(10,rs,1,3,"app-team-user",6),e.k0s(),e.j41(11,"app-form-field",7)(12,"select",8),e.DNE(13,cs,2,2,"option",9),e.k0s()(),e.DNE(14,ls,11,2,"app-message-toggle",10),e.k0s()(),e.j41(15,"div",11)(16,"button",12),e.EFF(17,"Cancel"),e.k0s(),e.j41(18,"button",13),e.bIt("click",function(){return s.handleRemoveClick()}),e.EFF(19," Remove "),e.k0s()()),2&i&&(e.R7$(),e.JRh(s.title),e.R7$(2),e.Y8G("formGroup",s.form),e.R7$(2),e.SpI(" Are you sure you want to remove the following ",s.userNoun,"? They will no longer have access to "),e.R7$(2),e.JRh(s.data.organization.name),e.R7$(),e.Y8G("ngIf",""!==s.data.excluded),e.R7$(2),e.Y8G("ngForOf",s.data.users),e.R7$(3),e.Y8G("ngForOf",s.contentOptions),e.R7$(),e.Y8G("ngIf",s.hasActiveDevelopers),e.R7$(4),e.Y8G("disabled",0===s.data.users.length||s.form.invalid))},dependencies:[c.Sq,c.bT,Qe.So,F.tx,F.BI,F.E7,F.Yi,Un.C,$.Q,Se.K,Ie.X,yt.o,d.xH,d.y7,d.wz,d.BC,d.cb,d.j4,d.JD],styles:[".dialog__user-role[_ngcontent-%COMP%]{text-transform:uppercase;color:#96a8c0}"],changeDetection:0}),n})();function us(o,n){if(1&o&&(e.j41(0,"app-alert",10)(1,"strong",11),e.EFF(2),e.k0s(),e.EFF(3," is excluded as they are the current user "),e.k0s()),2&o){const t=e.XpG();e.R7$(2),e.JRh(t.data.excluded)}}function ms(o,n){1&o&&e.nrm(0,"app-team-user",12),2&o&&e.Y8G("user",n.$implicit)("showEmail",!0)("showNameUnknown",!0)}let ds=(()=>{var o;class n{constructor(i,s){this.data=i,this.dialogRef=s}ngOnInit(){this.newRoleName=this.data.role.role_display_name}handleConfirmClick(){this.dialogRef.close(!0)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(F.Vh),e.rXU(F.CP))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-team-confirm-role-dialog"]],decls:17,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["data-test","teamConfirmRoleDialog",1,"dialog"],[1,"my-3","text-sm"],[1,"font-bold"],["type","info","theme","light",4,"ngIf"],["class","flex grow my-1 py-2",3,"user","showEmail","showNameUnknown",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","mat-dialog-close",""],["app-button","","buttonType","primary",3,"click","disabled"],["type","info","theme","light"],[1,"font-semibold"],[1,"flex","grow","my-1","py-2",3,"user","showEmail","showNameUnknown"]],template:function(i,s){1&i&&(e.j41(0,"h1",0),e.EFF(1,"Confirm Role Change"),e.k0s(),e.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"p"),e.EFF(6," Are you sure you want to change the role of the following user(s) to "),e.j41(7,"span",4),e.EFF(8),e.k0s(),e.EFF(9,"? "),e.k0s()(),e.DNE(10,us,4,1,"app-alert",5)(11,ms,1,3,"app-team-user",6),e.k0s()(),e.j41(12,"div",7)(13,"button",8),e.EFF(14,"Cancel"),e.k0s(),e.j41(15,"button",9),e.bIt("click",function(){return s.handleConfirmClick()}),e.EFF(16," Confirm Role Change "),e.k0s()()),2&i&&(e.R7$(8),e.JRh(s.newRoleName),e.R7$(2),e.Y8G("ngIf",""!==s.data.excluded),e.R7$(),e.Y8G("ngForOf",s.data.users),e.R7$(4),e.Y8G("disabled",0===s.data.users.length))},dependencies:[c.Sq,c.bT,F.tx,F.BI,F.E7,F.Yi,Un.C,$.Q,yt.o],changeDetection:0}),n})();var qe,w=l(18152),en=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},tn=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function gs(o,n){1&o&&(e.j41(0,"li"),e.EFF(1," You will "),e.j41(2,"span",4),e.EFF(3,"lose access"),e.k0s(),e.EFF(4," to content you've added to the team. This content will be transferred to an admin. "),e.k0s())}function hs(o,n){1&o&&(e.j41(0,"li"),e.EFF(1," Your developer apps will "),e.j41(2,"span",4),e.EFF(3,"stop working."),e.k0s()())}function _s(o,n){1&o&&e.nrm(0,"app-spinner",13)}class Je{constructor(n,t,i,s,a,r){this.data=n,this.formBuilder=t,this.store=i,this.snackBar=s,this.actions=a,this.dialogRef=r,this.ngUnsubscribe=new C.B}ngOnInit(){this.name=this.data.organization.name,this.mode=this.data.mode,this.initActionHandlers(),this.initForm()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({confirm:[!1,d.k0.requiredTrue]})}initActionHandlers(){this.actions.pipe((0,p.xi)(w.GC,A.AA),(0,G.s)(1),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new f.hs),this.snackBar.open(("leave"===this.mode?"You have left the team.":"Your team account was closed.")+" You have been downgraded to a free Personal account."),this.dialogRef.close(!0)}),this.actions.pipe((0,p.xi)(w.XL,A.Rr),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open(`There was an error ${"leave"===this.mode?"leaving":"closing"} the team. Please try again.`)})}handleCancelClick(){this.dialogRef.close()}handleLeaveClick(){this.store.dispatch("close"===this.mode?new w.$7(this.data.organization):new A.f0(this.data.organization))}}(qe=Je).\u0275fac=function(n){return new(n||qe)(e.rXU(F.Vh),e.rXU(d.ze),e.rXU(p.il),e.rXU(ne.UG),e.rXU(p.En),e.rXU(F.CP))},qe.\u0275cmp=e.VBU({type:qe,selectors:[["app-team-leave-dialog"]],decls:36,vars:24,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"dialog",3,"formGroup"],[1,"dialog__list"],[1,"font-bold"],[4,"ngIf"],[1,"mt-4"],["formControlName","confirm"],[1,"dialog__confirm"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","buttonType","default",3,"click"],["app-button","","buttonType","primary",3,"click","disabled"],["size","small","class","mr-1","render","inline",4,"ngIf"],["size","small","render","inline",1,"mr-1"]],template:function(n,t){1&n&&(e.j41(0,"h1",0),e.EFF(1),e.nI1(2,"titlecase"),e.k0s(),e.j41(3,"div",1)(4,"div",2),e.EFF(5),e.j41(6,"ul",3)(7,"li"),e.EFF(8),e.j41(9,"span",4),e.EFF(10,"downgraded"),e.k0s(),e.EFF(11," to a free Personal account. "),e.k0s(),e.j41(12,"li"),e.EFF(13," You will "),e.j41(14,"span",4),e.EFF(15,"lose access"),e.k0s(),e.EFF(16," to collections and content in your team. "),e.k0s(),e.DNE(17,gs,5,0,"li",5)(18,hs,4,0,"li",5),e.nI1(19,"async"),e.j41(20,"li"),e.EFF(21,"Your private content will remain with your account."),e.k0s()(),e.j41(22,"div",6)(23,"mat-checkbox",7)(24,"span",8),e.EFF(25),e.k0s()()()()(),e.j41(26,"div",9)(27,"button",10),e.bIt("click",function(){return t.handleCancelClick()}),e.EFF(28," Cancel "),e.k0s(),e.j41(29,"button",11),e.nI1(30,"async"),e.nI1(31,"async"),e.bIt("click",function(){return t.handleLeaveClick()}),e.DNE(32,_s,1,0,"app-spinner",12),e.nI1(33,"async"),e.nI1(34,"async"),e.EFF(35),e.k0s()()),2&n&&(e.R7$(),e.Lme("",e.bMT(2,12,t.mode)," ",t.name," Team?"),e.R7$(3),e.Y8G("formGroup",t.form),e.R7$(),e.Lme(" Are you sure you want to ",t.mode," the ",t.name," Team? "),e.R7$(3),e.SpI(" Your account ","close"===t.mode?"and your team members' accounts":""," will be "),e.R7$(9),e.Y8G("ngIf","leave"===t.mode),e.R7$(),e.Y8G("ngIf","close"===t.mode&&e.bMT(19,14,t.hasActiveDeveloperAccount$)),e.R7$(7),e.SpI("I confirm that I want to ",t.mode," my team."),e.R7$(4),e.Y8G("disabled",t.form.invalid||e.bMT(30,16,t.leaving$)||e.bMT(31,18,t.deleting$)),e.R7$(3),e.Y8G("ngIf",e.bMT(33,20,t.leaving$)||e.bMT(34,22,t.deleting$)),e.R7$(3),e.SpI(" ",t.mode," Team "))},dependencies:[c.bT,Qe.So,F.BI,F.E7,F.Yi,$.Q,Te.tI,d.BC,d.cb,d.j4,d.JD,c.Jj,c.PV],styles:[".dialog[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.dialog__list[_ngcontent-%COMP%]{margin:12px 24px;list-style-type:disc;line-height:20px}.dialog__confirm[_ngcontent-%COMP%]{white-space:normal}"],changeDetection:0}),en([(0,p.l6)(he.e.getLeaving),tn("design:type",g.c)],Je.prototype,"leaving$",void 0),en([(0,p.l6)(T.q.getDeleting),tn("design:type",g.c)],Je.prototype,"deleting$",void 0),en([(0,p.l6)(m.k.hasActiveDeveloperAccount),tn("design:type",g.c)],Je.prototype,"hasActiveDeveloperAccount$",void 0);let Pn=(()=>{var o;class n{constructor(i,s){this.dialog=i,this.usersService=s}removeUser(i,s,a){return this.confirmRemoveUser(i,s,a).pipe((0,P.Z)(r=>{if(r===Me.Transfer)return this.transferUserContent(i,s,me.y.RemoveUser);if(r===Me.Remove){const u=s.map(v=>({sourceUserId:v.id}));return(0,ue.of)(u)}return(0,ue.of)(!1)}),(0,P.Z)(r=>r?this.usersService.removeUsers(i.id,r).pipe((0,jn.W)(()=>(0,ue.of)(!1)),(0,M.T)(u=>({success:u,targetUserId:r[0].targetUserId}))):(0,ue.of)({success:!1})))}setUserRole(i,s,a,r){const u=r.role_id,v=r.role_name,R=s.map(q=>({userId:q.id,roleId:u}));let E=[];return v===X.x.Viewer&&(E=s.filter(q=>q.role.role_name!==X.x.Viewer)),this.confirmRoleChange(s,a,r).pipe((0,P.Z)(q=>q&&E.length>0?this.transferUserContent(i,E,me.y.AssignRole):(0,ue.of)(q)),(0,P.Z)(q=>q?this.usersService.updateUserRoles(i.id,R):(0,ue.of)(!1)),(0,jn.W)(()=>(0,ue.of)(!1)),(0,M.T)(q=>({success:q,targetRoleId:r.role_id})))}confirmRoleChange(i,s,a){return this.dialog.open(ds,{id:Rt.t.ConfirmRoleDialog,disableClose:!1,maxWidth:"420px",data:{users:i,excluded:s,role:a}}).afterClosed()}confirmRemoveUser(i,s,a){return this.dialog.open(ps,{id:Rt.t.RemoveUserDialog,disableClose:!1,maxWidth:"420px",data:{organization:i,users:s,excluded:a}}).afterClosed()}transferUserContent(i,s,a){return this.dialog.open(ss,{id:Rt.t.TransferUserContentDialog,disableClose:!0,maxWidth:"420px",data:{organization:i,sourceUsers:s,action:a}}).afterClosed()}confirmLeaveTeam(i,s){return this.dialog.open(Je,{width:"480px",data:{mode:s,organization:i}}).afterClosed()}}return(o=n).\u0275fac=function(i){return new(i||o)(e.KVO(F.bZ),e.KVO(Zt.g))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})();var We,Ze,fs=l(27044),He=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},Ke=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function bs(o,n){if(1&o&&(e.j41(0,"div",9)(1,"app-message-toggle",10),e.nI1(2,"async"),e.nI1(3,"async"),e.EFF(4),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.nI1(8,"date"),e.k0s()()),2&o){const t=e.XpG();e.R7$(),e.Y8G("type",e.bMT(2,6,t.isSubscriptionExpired$)?"warning":"notification")("icon",e.bMT(3,8,t.isSubscriptionExpired$)?"exclamation-triangle":"info-circle")("shown",!0),e.R7$(3),e.E5c(" Your ",e.bMT(5,10,t.isTrial$)?"free trial":"subscription"," ",e.bMT(6,12,t.isSubscriptionExpired$)?"expired":"expires"," on ",e.i5U(8,16,e.bMT(7,14,t.subscriptionEndDate$),"longDate"),". ")}}function vs(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",11)(1,"button",12),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleNeedToLeaveClick())}),e.EFF(2),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(),e.Y8G("uppercase",!1),e.R7$(),e.SpI(" ",t.canCloseTeam?"Need to close your team or switch to a Personal Plus account?":"Need to leave the team?"," ")}}function Cs(o,n){1&o&&(e.j41(0,"div")(1,"div"),e.EFF(2," In order to upgrade to a Personal Plus account you'll first need to close your team. If you "),e.j41(3,"span",5),e.EFF(4,"close your team"),e.k0s(),e.EFF(5,", you'll lose access to everything in your team, including team collections. All members in your team including yourself will be downgraded to a Personal free account. "),e.k0s(),e.j41(6,"div",6),e.EFF(7," Once you close your team, you'll have the option to upgrade to a Personal Plus account. "),e.k0s()())}function Ts(o,n){if(1&o){const t=e.RV6();e.j41(0,"div"),e.DNE(1,Cs,8,0,"div",13),e.j41(2,"button",14),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleLeaveClick())}),e.EFF(3),e.k0s()()}if(2&o){e.XpG();const t=e.sdS(3),i=e.XpG();e.R7$(),e.Y8G("ngIf",i.canCloseTeam)("ngIfElse",t),e.R7$(2),e.SpI(" ",i.canCloseTeam?"Close Team":"Leave Team"," ")}}function ys(o,n){if(1&o&&(e.j41(0,"div"),e.EFF(1," By "),e.j41(2,"span",5),e.EFF(3),e.nI1(4,"async"),e.k0s(),e.EFF(5,", you'll lose access to everything in this team, including team collections. The content you have shared with the team will be transferred to an administrator. "),e.k0s()),2&o){let t;const i=e.XpG(2);e.R7$(3),e.SpI("leaving the ",null==(t=e.bMT(4,1,i.organization$))?null:t.name," team")}}function Rs(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-message-toggle",15),e.EFF(1," You will need to "),e.j41(2,"button",12),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleContactClick())}),e.EFF(3," contact us "),e.k0s(),e.EFF(4),e.nI1(5,"async"),e.k0s(),e.j41(6,"button",14),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleContactClick())}),e.EFF(7," Contact Us "),e.k0s()}if(2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("uppercase",!1),e.R7$(2),e.SpI(" if you need to leave the team",e.bMT(5,2,t.hasActiveDeveloperAccount$)?" because you have an active developer account associated with this team":"",". ")}}function ks(o,n){if(1&o&&(e.j41(0,"div",11),e.DNE(1,Ts,4,3,"div",13)(2,ys,6,3,"ng-template",null,0,e.C5r)(4,Rs,8,4,"ng-template",null,1,e.C5r),e.k0s()),2&o){const t=e.sdS(5),i=e.XpG();e.R7$(),e.Y8G("ngIf",i.canCloseTeam||i.canLeaveTeam)("ngIfElse",t)}}class je{constructor(n,t,i,s){this.store=n,this.zendeskService=t,this.organizationActionsService=i,this.changeDetectorRef=s,this.showLeaveTeam=!1,this.canLeaveTeam=!1,this.canCloseTeam=!1,this.needToLeaveClicked=!1,this.ngUnsubscribe=new C.B}ngOnInit(){this.organization$.pipe((0,D.p)(n=>!(0,_.isNil)(n)),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.showLeaveTeam=!this.store.selectSnapshot(m.k.isAdmin),this.canLeaveTeam=n.user_can_leave_group,this.canCloseTeam=n.account_closure_allowed&&this.store.selectSnapshot(m.k.isAdmin),this.changeDetectorRef.markForCheck()})}handleContactClick(){this.zendeskService.showWidget("contact")}handleHelpClick(){this.zendeskService.showWidget()}handleNeedToLeaveClick(){this.needToLeaveClicked=!0}handleLeaveClick(){const n=this.canCloseTeam?"close":"leave";this.organizationActionsService.confirmLeaveTeam(this.store.selectSnapshot(T.q.getOrganization),n).subscribe(()=>{this.needToLeaveClicked=!1,this.changeDetectorRef.markForCheck()})}}function Is(o,n){1&o&&(e.j41(0,"div")(1,"div",9),e.EFF(2," Are you sure you want to "),e.j41(3,"em",10),e.EFF(4,"cancel"),e.k0s(),e.EFF(5," your subscription? "),e.k0s(),e.j41(6,"ul",11)(7,"li",12),e.EFF(8," After cancelling your BioDigital Human subscription, your premium benefits will continue until the subscription end date. "),e.k0s(),e.j41(9,"li",12),e.EFF(10,"You will not be billed after your subscription end date."),e.k0s()(),e.j41(11,"div",13)(12,"mat-checkbox",14)(13,"span",15),e.EFF(14,"I confirm I want to cancel my subscription."),e.k0s()()()())}function js(o,n){1&o&&(e.j41(0,"div",16),e.nrm(1,"app-spinner",17),e.j41(2,"div",18),e.EFF(3,"Cancelling your subscription..."),e.k0s()())}(We=je).\u0275fac=function(n){return new(n||We)(e.rXU(p.il),e.rXU(fs.c),e.rXU(Pn),e.rXU(e.gRc))},We.\u0275cmp=e.VBU({type:We,selectors:[["app-account-premium-team-subscription"]],decls:22,vars:13,consts:[["leaveTeamTemplate",""],["contactUsTemplate",""],["label","Subscription"],[1,"text-sm"],["class","mb-4",4,"ngIf"],[1,"font-bold"],[1,"mt-2"],[1,"text-link","underline",3,"click"],["class","mt-4",4,"ngIf"],[1,"mb-4"],[3,"type","icon","shown"],[1,"mt-4"],["app-button","","buttonType","text","buttonTheme","light",1,"underline",3,"click","uppercase"],[4,"ngIf","ngIfElse"],["app-button","","buttonType","outline","buttonTheme","light",1,"mt-4",3,"click"],["type","notification","theme","dark","icon","info-circle","alignIcon","center"]],template:function(n,t){if(1&n&&(e.j41(0,"app-account-panel",2)(1,"div",3),e.DNE(2,bs,9,19,"div",4),e.nI1(3,"async"),e.nI1(4,"async"),e.j41(5,"div"),e.EFF(6," You have a "),e.j41(7,"em",5),e.EFF(8),e.nI1(9,"async"),e.k0s(),e.EFF(10," plan through the "),e.j41(11,"em",5),e.EFF(12),e.nI1(13,"async"),e.k0s(),e.EFF(14," team. "),e.k0s(),e.j41(15,"div",6),e.EFF(16," For more information or questions regarding your subscription, please contact our "),e.j41(17,"a",7),e.bIt("click",function(){return t.handleHelpClick()}),e.EFF(18,"Customer Experience"),e.k0s(),e.EFF(19," team. "),e.k0s(),e.DNE(20,vs,3,2,"div",8)(21,ks,6,2,"div",8),e.k0s()()),2&n){let i,s;e.R7$(2),e.Y8G("ngIf",e.bMT(3,5,t.isTrial$)||e.bMT(4,7,t.isSubscriptionExpired$)),e.R7$(6),e.JRh(null==(i=e.bMT(9,9,t.organization$))?null:i.subscription.type),e.R7$(4),e.JRh(null==(s=e.bMT(13,11,t.organization$))?null:s.name),e.R7$(8),e.Y8G("ngIf",(t.canCloseTeam||t.showLeaveTeam)&&!t.needToLeaveClicked),e.R7$(),e.Y8G("ngIf",t.needToLeaveClicked)}},dependencies:[c.bT,$.Q,Ie.X,z,c.Jj,c.vh],changeDetection:0}),He([(0,p.l6)(T.q.isTrial),Ke("design:type",g.c)],je.prototype,"isTrial$",void 0),He([(0,p.l6)(T.q.isSubscriptionExpired),Ke("design:type",g.c)],je.prototype,"isSubscriptionExpired$",void 0),He([(0,p.l6)(T.q.getSubscriptionEndDate),Ke("design:type",g.c)],je.prototype,"subscriptionEndDate$",void 0),He([(0,p.l6)(T.q.getOrganization),Ke("design:type",g.c)],je.prototype,"organization$",void 0),He([(0,p.l6)(m.k.hasActiveDeveloperAccount),Ke("design:type",g.c)],je.prototype,"hasActiveDeveloperAccount$",void 0);class nn{constructor(n,t,i,s,a){this.store=n,this.actions=t,this.formBuilder=i,this.dialogRef=s,this.snackbar=a,this.ngUnsubscribe=new C.B}ngOnInit(){this.initForm(),this.initListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({confirm:[!1,d.k0.requiredTrue]})}initListeners(){this.actions.pipe((0,p.xi)(N.lG),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackbar.open("Subscription successfully cancelled."),this.store.dispatch(new f.hs(!0)),this.dialogRef.close()}),this.actions.pipe((0,p.xi)(N.GY),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=(0,Ce.u1)(n.error)||"There was an error cancelling your subscription.";this.snackbar.open(t)})}handleCancelClick(){this.dialogRef.close()}handleCancelSubscriptionClick(){this.store.dispatch(new N.wE)}}(Ze=nn).\u0275fac=function(n){return new(n||Ze)(e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(F.CP),e.rXU(ne.UG))},Ze.\u0275cmp=e.VBU({type:Ze,selectors:[["app-cancel-subscription-dialog"]],decls:15,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"dialog",3,"formGroup"],[1,"text-sm"],[4,"ngIf"],["class","dialog__cancel flex flex-col items-center",4,"ngIf"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","buttonType","default",3,"click"],["app-button","","buttonType","primary",3,"click","disabled"],[1,"mb-6"],[1,"font-bold"],[1,"dialog__list"],[1,"my-2"],[1,"mt-4"],["formControlName","confirm"],[2,"white-space","normal"],[1,"dialog__cancel","flex","flex-col","items-center"],["size","large"],[1,"mt-3","text-xs"]],template:function(n,t){1&n&&(e.j41(0,"h1",0),e.EFF(1,"Cancel Subscription"),e.k0s(),e.j41(2,"div",1)(3,"div",2)(4,"div",3),e.DNE(5,Is,15,0,"div",4),e.nI1(6,"async"),e.DNE(7,js,4,0,"div",5),e.nI1(8,"async"),e.k0s()()(),e.j41(9,"div",6)(10,"button",7),e.bIt("click",function(){return t.handleCancelClick()}),e.EFF(11," Cancel "),e.k0s(),e.j41(12,"button",8),e.nI1(13,"async"),e.bIt("click",function(){return t.handleCancelSubscriptionClick()}),e.EFF(14," Yes, Cancel Subscription "),e.k0s()()),2&n&&(e.R7$(3),e.Y8G("formGroup",t.form),e.R7$(2),e.Y8G("ngIf",!e.bMT(6,4,t.cancelling$)),e.R7$(2),e.Y8G("ngIf",e.bMT(8,6,t.cancelling$)),e.R7$(5),e.Y8G("disabled",t.form.invalid||e.bMT(13,8,t.cancelling$)))},dependencies:[c.bT,Qe.So,F.BI,F.E7,F.Yi,$.Q,Te.tI,d.BC,d.cb,d.j4,d.JD,c.Jj],styles:[".dialog[_ngcontent-%COMP%]{max-width:520px}.dialog__list[_ngcontent-%COMP%]{list-style-type:disc;margin:0;padding-left:40px}"],changeDetection:0}),function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);s>3&&a&&Object.defineProperty(n,t,a)}([(0,p.l6)(L.z.getCancelling),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,g.c)],nn.prototype,"cancelling$",void 0);var et,Ae=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},Ge=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Us=["cart"];function Ps(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",11),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleManageClick())}),e.EFF(1),e.nI1(2,"async"),e.k0s()}if(2&o){const t=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,t.isFreeTrial$)?"Upgrade":"Update"," ")}}function Es(o,n){1&o&&(e.qex(0),e.nrm(1,"app-spinner",12),e.bVm())}function Ds(o,n){if(1&o&&(e.j41(0,"div",14)(1,"div"),e.EFF(2," You have access to Premium features through a "),e.j41(3,"em",15),e.EFF(4,"free trial"),e.k0s(),e.EFF(5,". "),e.k0s(),e.j41(6,"div"),e.EFF(7),e.nI1(8,"async"),e.nI1(9,"date"),e.k0s()()),2&o){let t;const i=e.XpG(2);e.R7$(7),e.SpI(" Your trial ends on ",e.i5U(9,3,null==(t=e.bMT(8,1,i.subscription$))?null:t.paid_through_date_time,"longDate"),". ")}}function Ms(o,n){if(1&o){const t=e.RV6();e.j41(0,"a",19),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.handleCancelSubscriptionClick())}),e.EFF(1," Cancel Subscription? "),e.k0s()}}function As(o,n){if(1&o&&(e.nrm(0,"app-account-subscription-summary",16),e.nI1(1,"async"),e.j41(2,"div",17),e.DNE(3,Ms,2,0,"a",18),e.nI1(4,"async"),e.k0s()),2&o){const t=e.XpG(2),i=e.sdS(1);e.Y8G("subscription",e.bMT(1,2,t.subscription$)),e.R7$(3),e.Y8G("ngIf",!e.bMT(4,4,t.isCanceled$)&&"edit"!==i.mode)}}function Gs(o,n){if(1&o&&(e.DNE(0,Ds,10,6,"div",13),e.nI1(1,"async"),e.DNE(2,As,5,6,"ng-template",null,2,e.C5r)),2&o){const t=e.sdS(3),i=e.XpG();e.Y8G("ngIf",e.bMT(1,2,i.isFreeTrial$))("ngIfElse",t)}}function $s(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-account-subscription-cart",null,3)(2,"div",20)(3,"button",21),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleCancelClick())}),e.EFF(4," Cancel "),e.k0s(),e.j41(5,"button",22),e.nI1(6,"async"),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleUpdatePaymentClick())}),e.EFF(7," Update Payment Method "),e.k0s()()()}if(2&o){const t=e.sdS(1),i=e.XpG();e.R7$(5),e.Y8G("disabled",!t.paymentMethodRequestable||e.bMT(6,1,i.updating$))}}class ye{constructor(n,t,i,s){this.store=n,this.actions=t,this.snackBar=i,this.dialog=s,this.ngUnsubscribe=new C.B}ngOnInit(){this.initSubscriptionListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initSubscriptionListeners(){this.actions.pipe((0,p.xi)(N.Jv),(0,h.Q)(this.ngUnsubscribe)).subscribe(({request:n})=>{this.store.dispatch(new N.P1(n))}),this.actions.pipe((0,p.xi)(N.K$),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("There was an error updating your payment method.")}),this.actions.pipe((0,p.xi)(N.Yj),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("Your subscription has been successfully updated."),this.store.dispatch(new f.hs(!0)),this.panel.mode="view"}),this.actions.pipe((0,p.xi)(N.BO),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=(0,Ce.u1)(n.error)||"There was an error updating your payment method. Please try again.";this.snackBar.open(t)})}handleCancelClick(){this.panel.mode="view"}handleCancelSubscriptionClick(){this.dialog.open(nn)}handleManageClick(){this.panel.mode="edit"}handleUpdatePaymentClick(){const{plan_id:n}=this.store.selectSnapshot(L.z.getSubscription);this.store.dispatch(new N.KM(n))}}(et=ye).\u0275fac=function(n){return new(n||et)(e.rXU(p.il),e.rXU(p.En),e.rXU(ne.UG),e.rXU(F.bZ))},et.\u0275cmp=e.VBU({type:et,selectors:[["app-account-premium-braintree"]],viewQuery:function(n,t){if(1&n&&(e.GBs(z,7),e.GBs(Us,5)),2&n){let i;e.mGM(i=e.lsd())&&(t.panel=i.first),e.mGM(i=e.lsd())&&(t.cart=i.first)}},decls:12,vars:8,consts:[["panel",""],["loadedSubscriptionTpl",""],["premiumSummaryTpl",""],["cart",""],["label","Subscription"],["panel-view-actions",""],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click",4,"ngIf"],[1,"account","mt-4","mb-8"],[4,"ngIf","ngIfElse"],["panel-edit",""],[4,"ngIf"],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click"],["size","huge"],["class","text-sm",4,"ngIf","ngIfElse"],[1,"text-sm"],[1,"font-bold"],[3,"subscription"],[1,"my-3"],["appEventFence","","class","text-link underline text-sm",3,"click",4,"ngIf"],["appEventFence","",1,"text-link","underline","text-sm",3,"click"],["cart-footer","",1,"flex","justify-end"],["type","button","app-button","","buttonTheme","light","buttonType","default",1,"mr-4",3,"click"],["type","submit","app-button","","buttonType","primary",3,"click","disabled"]],template:function(n,t){if(1&n&&(e.j41(0,"app-account-panel",4,0)(2,"span",5),e.DNE(3,Ps,3,3,"button",6),e.nI1(4,"async"),e.k0s(),e.j41(5,"div",7),e.DNE(6,Es,2,0,"ng-container",8),e.nI1(7,"async"),e.DNE(8,Gs,4,4,"ng-template",null,1,e.C5r),e.k0s(),e.j41(10,"div",9),e.DNE(11,$s,8,3,"app-account-subscription-cart",10),e.k0s()()),2&n){const i=e.sdS(1),s=e.sdS(9);e.R7$(3),e.Y8G("ngIf",!e.bMT(4,4,t.isCanceled$)),e.R7$(3),e.Y8G("ngIf",e.bMT(7,6,t.loading$))("ngIfElse",s),e.R7$(5),e.Y8G("ngIf","edit"===i.mode)}},dependencies:[c.bT,$.Q,Ne.L,Te.tI,z,kn,qt,c.Jj,c.vh],changeDetection:0}),Ae([(0,p.l6)(m.k.getUserProfile),Ge("design:type",g.c)],ye.prototype,"userProfile$",void 0),Ae([(0,p.l6)(L.z.getSubscription),Ge("design:type",g.c)],ye.prototype,"subscription$",void 0),Ae([(0,p.l6)(m.k.getLoading),Ge("design:type",g.c)],ye.prototype,"loading$",void 0),Ae([(0,p.l6)(L.z.getUpdating),Ge("design:type",g.c)],ye.prototype,"updating$",void 0),Ae([(0,p.l6)(L.z.isFreeTrial),Ge("design:type",g.c)],ye.prototype,"isFreeTrial$",void 0),Ae([(0,p.l6)(L.z.isCanceled),Ge("design:type",g.c)],ye.prototype,"isCanceled$",void 0);var tt,En=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},Dn=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function Os(o,n){1&o&&e.nrm(0,"app-account-free-user-subscription")}function Bs(o,n){1&o&&(e.qex(0),e.nrm(1,"app-account-premium-braintree"),e.bVm())}function Ns(o,n){1&o&&e.nrm(0,"app-account-premium-user-subscription")}function Ys(o,n){if(1&o&&(e.qex(0),e.DNE(1,Bs,2,0,"ng-container",3)(2,Ns,1,0,"ng-template",null,0,e.C5r),e.bVm()),2&o){const t=e.sdS(3),i=e.XpG();e.R7$(),e.Y8G("ngIf",i.isBraintreeSubscription)("ngIfElse",t)}}function Vs(o,n){1&o&&e.nrm(0,"app-account-premium-team-subscription")}class kt{constructor(n){this.changeDetectorRef=n,this.userType=Vt.I,this.isBraintreeSubscription=!1,this.ngUnsubscribe=new C.B}ngOnInit(){this.initProfileCheck()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initProfileCheck(){this.userProfile$.pipe((0,D.p)(n=>!(0,_.isNil)(n)),(0,pe.F)((n,t)=>(0,_.isEqual)(n,t)),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.isBraintreeSubscription=n.subscription&&"braintree"===n.subscription.subscription_provider,this.changeDetectorRef.markForCheck()})}}(tt=kt).\u0275fac=function(n){return new(n||tt)(e.rXU(e.gRc))},tt.\u0275cmp=e.VBU({type:tt,selectors:[["app-account-subscription"]],decls:5,vars:6,consts:[["manageExternalTmp",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngIf","ngIfElse"]],template:function(n,t){1&n&&(e.qex(0,1),e.nI1(1,"async"),e.DNE(2,Os,1,0,"app-account-free-user-subscription",2)(3,Ys,4,2,"ng-container",2)(4,Vs,1,0,"app-account-premium-team-subscription",2),e.bVm()),2&n&&(e.Y8G("ngSwitch",e.bMT(1,4,t.userType$)),e.R7$(2),e.Y8G("ngSwitchCase",t.userType.Free),e.R7$(),e.Y8G("ngSwitchCase",t.userType.Premium),e.R7$(),e.Y8G("ngSwitchCase",t.userType.Team))},dependencies:[c.bT,c.ux,c.e1,ze,Le,je,ye,c.Jj],changeDetection:0}),En([(0,p.l6)(m.k.getUserProfile),Dn("design:type",g.c)],kt.prototype,"userProfile$",void 0),En([(0,p.l6)(m.k.getUserType),Dn("design:type",g.c)],kt.prototype,"userType$",void 0);var Mn=l(52762),An=l(55361),zs=l(77276),Xs=l(11583),Gn=l(88041);function Ls(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",7),e.bIt("click",function(s){e.eBV(t);const a=e.XpG();return e.Njj(a.handleAppToggleClick(a.app,s))}),e.j41(1,"div",8),e.nrm(2,"app-icon",9),e.k0s(),e.j41(3,"div",10),e.EFF(4,"Default"),e.k0s()()}}let Qs=(()=>{var o;class n{constructor(){this.compact=!1,this.appSelected=new e.bkB,this.appToggleSelected=new e.bkB}ngOnInit(){}handleSelectAppClick(i,s){s.stopPropagation(),this.appSelected.emit(i)}handleAppToggleClick(i,s){s.stopPropagation(),this.appToggleSelected.emit(i)}formatPlatforms(i){return i.map(s=>s.display_name).join(", ")}formatPlatformTypes(i){return i.map(s=>s.type===Mn.MM.Mobile?"API Bundle IDs":"Domains").join(", ")}formatDomains(i){return i.map(s=>s.value).join(", ")}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-account-app"]],inputs:{app:"app",selected:"selected",compact:"compact"},outputs:{appSelected:"appSelected",appToggleSelected:"appToggleSelected"},decls:16,vars:10,consts:[[1,"app",3,"click"],[1,"flex","flex-row","justify-between","app__header"],[1,"text-sm","font-semibold"],["class","flex flex-row items-center app__badge",3,"click",4,"ngIf"],[1,"text-xs","text-hint"],[1,"mt-4","text-xs","app__settings"],[1,"font-semibold"],[1,"flex","flex-row","items-center","app__badge",3,"click"],[1,"mr-2","text-xs","app__badge-icon"],["icon","check"],[1,"uppercase","text-sm","font-bold"]],template:function(i,s){1&i&&(e.j41(0,"div",0),e.bIt("click",function(r){return s.handleSelectAppClick(s.app,r)}),e.j41(1,"div",1)(2,"div",2),e.EFF(3),e.k0s(),e.DNE(4,Ls,5,0,"div",3),e.k0s(),e.j41(5,"div",4),e.EFF(6),e.k0s(),e.j41(7,"div",5)(8,"div",6),e.EFF(9,"API Key"),e.k0s(),e.j41(10,"div"),e.EFF(11),e.k0s(),e.j41(12,"div",6),e.EFF(13),e.k0s(),e.j41(14,"div"),e.EFF(15),e.k0s()()()),2&i&&(e.AVh("app--selected",s.selected)("app--compact",s.compact),e.R7$(3),e.SpI(" ",s.app.app_name," "),e.R7$(),e.Y8G("ngIf",s.selected),e.R7$(2),e.SpI(" ",s.formatPlatforms(s.app.app_platform)," "),e.R7$(5),e.JRh(s.app.app_apikey),e.R7$(2),e.JRh(s.formatPlatformTypes(s.app.app_platform)),e.R7$(2),e.JRh(s.formatDomains(s.app.app_domains)))},dependencies:[c.bT,k.R],styles:[".app[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #d7e0ea;border-radius:4px;padding:20px}.app__settings[_ngcontent-%COMP%]{display:grid;grid-template-columns:20% 80%;gap:8px 0px}.app__badge[_ngcontent-%COMP%]{color:#2d72dc}.app__badge-icon[_ngcontent-%COMP%]{width:20px;height:20px;display:flex;align-items:center;justify-content:center;border-radius:50%;color:#fff;background-color:#2d72dc}.app--selected[_ngcontent-%COMP%]{border:2px solid #2d72dc}.app--compact[_ngcontent-%COMP%]{padding:12px}.app--compact[_ngcontent-%COMP%]   .app__settings[_ngcontent-%COMP%]{display:flex;flex-direction:column}"],changeDetection:0}),n})();var nt,ot=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},it=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function qs(o,n){if(1&o&&e.nrm(0,"app-tag",11),2&o){const t=e.XpG(2);e.Y8G("label",t.premiumOnlyTag)}}function Js(o,n){if(1&o&&(e.qex(0,9),e.DNE(1,qs,1,1,"app-tag",10),e.nI1(2,"async"),e.bVm()),2&o){let t;const i=e.XpG();e.R7$(),e.Y8G("ngIf",!(null!=(t=e.bMT(2,1,i.userProfile$))&&t.developer_account_valid_plan))}}function Ws(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",12),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleManageAppsClick())}),e.nrm(1,"app-icon",13),e.EFF(2," Manage "),e.k0s()}}function Hs(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",21)(1,"app-account-app",22),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("appSelected",function(s){e.eBV(t);const a=e.XpG(3);return e.Njj(a.handleSelectAppSelected(s,!1))})("appToggleSelected",function(s){e.eBV(t);const a=e.XpG(3);return e.Njj(a.handleSelectAppSelected(s,!0))}),e.k0s()()}if(2&o){let t;const i=n.$implicit,s=e.XpG(3);e.R7$(),e.Y8G("app",i)("compact",e.bMT(2,3,s.horizontalBreakpoint$)<s.breakPoints.Medium)("selected",i.id===(null==(t=e.bMT(3,5,s.selectedUserApp$))?null:t.id))}}function Ks(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"div",14),e.EFF(2,"Select a default application:"),e.k0s(),e.j41(3,"div",15)(4,"div",16),e.EFF(5),e.k0s(),e.j41(6,"div")(7,"app-sort",17),e.bIt("sortChange",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleSort(s))}),e.k0s()()(),e.DNE(8,Hs,4,7,"div",18),e.j41(9,"div",19),e.EFF(10," All models will be published with the developer key associated with your default application. Learn more about how to register an application "),e.j41(11,"a",20),e.EFF(12,"here"),e.k0s(),e.EFF(13,". "),e.k0s(),e.bVm()}if(2&o){const t=e.XpG(2);e.R7$(5),e.Lme(" ",t.userApps.length," ",1===t.userApps.length?"app":"apps"," "),e.R7$(2),e.Y8G("sortLabel","Sort Apps")("sortOptions",t.sortOptions)("sort",t.sort),e.R7$(),e.Y8G("ngForOf",t.userApps)}}function Zs(o,n){1&o&&(e.j41(0,"div",23)(1,"div",24),e.EFF(2,"You don't have any apps."),e.k0s(),e.j41(3,"a",25),e.EFF(4,"What's an app?"),e.k0s()())}function ea(o,n){if(1&o&&(e.j41(0,"div"),e.DNE(1,Ks,14,6,"ng-container",8)(2,Zs,5,0,"ng-template",null,1,e.C5r),e.k0s()),2&o){const t=e.sdS(3),i=e.XpG();e.R7$(),e.Y8G("ngIf",i.userApps.length>0)("ngIfElse",t)}}function ta(o,n){if(1&o){const t=e.RV6();e.qex(0),e.EFF(1," You must sign in on the developer site to activate access. Click "),e.j41(2,"a",27),e.bIt("click",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleDeveloperActivateClick(s))}),e.EFF(3,"here"),e.k0s(),e.EFF(4," to activate. "),e.bVm()}}function na(o,n){if(1&o){const t=e.RV6();e.EFF(0," Interested in leveraging the BioDigital Human's powerful toolkit to create your own custom applications? Visit our Developer Site to "),e.j41(1,"a",28),e.bIt("click",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleDeveloperTrialClick(s))}),e.EFF(2,"learn more"),e.k0s(),e.EFF(3,". ")}}function oa(o,n){if(1&o&&(e.j41(0,"p",26),e.DNE(1,ta,5,0,"ng-container",8),e.nI1(2,"async"),e.DNE(3,na,4,0,"ng-template",null,2,e.C5r),e.k0s()),2&o){let t;const i=e.sdS(4),s=e.XpG();e.R7$(),e.Y8G("ngIf",null==(t=e.bMT(2,2,s.userProfile$))?null:t.developer_account_valid_plan)("ngIfElse",i)}}const ia=[I.Z.QA,I.Z.Local].includes(j.c.deploy)?"https://developer-qa.biodigital.com/":"https://developer.biodigital.com/",$n=[{label:"Last Updated",fields:["timestamp"],ascending:!1},{label:"Name (A-Z)",fields:["app_name"],ascending:!0},{label:"Name (Z-A)",fields:["app_name"],ascending:!1}];class xe{get sort(){return this._sort}set sort(n){this._sort=n,this.userApps=this.sortApps(this.userApps,this.sort),this.changeDetectorRef.markForCheck()}constructor(n,t,i,s){this.store=n,this.snackBar=t,this.router=i,this.changeDetectorRef=s,this.breakPoints=se.m,this.authUserTypes=Vt.I,this.premiumOnlyTag=zs.kf,this.ngUnsubscribe=new C.B,this.userApps=[],this.sortOptions=$n,this._sort=$n[0]}ngOnInit(){this.userApps$.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.userApps=this.sortApps(n,this.sort),this.changeDetectorRef.markForCheck()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleSort(n){this.sort=n}handleSelectAppSelected(n,t=!1){if(n.app_platform.some(s=>s.type===Mn.MM.Web)){const s=this.store.selectSnapshot(m.k.getSelectedUserApp);s&&s.id===n.id?t&&this.store.dispatch(new f.A$(void 0)):this.store.dispatch(new f.A$(n.id))}else this.snackBar.open("Cannot assign default app. Please select a Web Widget to continue.")}handleManageAppsClick(){this.navigateToDeveloperPortal()}handleDeveloperActivateClick(n){n.preventDefault(),this.navigateToDeveloperPortal()}handleDeveloperTrialClick(n){n.preventDefault(),this.navigateToDeveloperPortal()}sortApps(n,t){const{ascending:i,fields:s}=t;return(0,An.h5)(n,s,i)}navigateToDeveloperPortal(){const t=this.store.selectSnapshot(m.k.getUserProfile).developer_portal_signin_url??ia;window.open(t,"_blank")}}var st;function ra(o,n){1&o&&(e.j41(0,"div",8),e.nrm(1,"app-spinner",9),e.j41(2,"div",10),e.EFF(3,"Deleting your account..."),e.k0s()())}function ca(o,n){if(1&o&&(e.j41(0,"div",20)(1,"app-message-toggle",21)(2,"em",13),e.EFF(3,"Server Error."),e.k0s(),e.EFF(4),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(4),e.SpI(" ",t.error," ")}}function la(o,n){if(1&o&&(e.j41(0,"div")(1,"div",11)(2,"div")(3,"div",12),e.EFF(4," Are you sure you want to "),e.j41(5,"em",13),e.EFF(6,"permanently delete"),e.k0s(),e.EFF(7," your account? "),e.k0s(),e.j41(8,"ul",14)(9,"li",15),e.EFF(10," Deleting your BioDigital Human account is a permanent action and "),e.j41(11,"em",13),e.EFF(12,"cannot be undone"),e.k0s(),e.EFF(13,". "),e.k0s(),e.j41(14,"li",15),e.EFF(15," After you delete your account, you will not be able to log back in to the app, and any 3D models you created and saved to your Library will be removed from our database permanently and cannot be restored. "),e.k0s()(),e.j41(16,"div",16)(17,"mat-checkbox",17)(18,"span",18),e.EFF(19,"I confirm that I want to permanently delete my account."),e.k0s()()()(),e.DNE(20,ca,5,1,"div",19),e.k0s()()),2&o){const t=e.XpG();e.R7$(20),e.Y8G("ngIf",t.error)}}(nt=xe).\u0275fac=function(n){return new(n||nt)(e.rXU(p.il),e.rXU(ne.UG),e.rXU(U.Ix),e.rXU(e.gRc))},nt.\u0275cmp=e.VBU({type:nt,selectors:[["app-account-apps"]],decls:11,vars:10,consts:[["nonDeveloper",""],["noApps",""],["nonValidPlan",""],["label","Developer Apps"],["panel-view-tags","",4,"ngIf"],["panel-view-actions",""],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click",4,"ngIf"],["panel-view","",1,"developer"],[4,"ngIf","ngIfElse"],["panel-view-tags",""],["icon","lock",3,"label",4,"ngIf"],["icon","lock",3,"label"],["type","button","app-button","","buttonType","outline","buttonTheme","light",3,"click"],["icon","external-link-alt",1,"mr-2"],[1,"my-5","text-sm"],[1,"flex","flex-row","justify-between","items-center"],[1,"text-xs"],[3,"sortChange","sortLabel","sortOptions","sort"],["class","developer__app my-3",4,"ngFor","ngForOf"],[1,"developer__notice","text-xs","my-4"],["href","https://devsupport.biodigital.com/hc/en-us/articles/234450188-How-to-register-an-app","target","_blank",1,"text-link"],[1,"developer__app","my-3"],[3,"appSelected","appToggleSelected","app","compact","selected"],[1,"flex","flex-col","items-center","my-10"],[1,"text-sm","mb-1"],["href","https://devsupport.biodigital.com/hc/en-us/articles/234450188","target","_blank",1,"text-xs","text-gray-400"],[1,"text-sm"],[1,"text-link","underline",3,"click"],["appEventFence","",1,"text-link","underline",3,"click"]],template:function(n,t){if(1&n&&(e.j41(0,"app-account-panel",3),e.DNE(1,Js,3,3,"ng-container",4),e.nI1(2,"async"),e.j41(3,"div",5),e.DNE(4,Ws,3,0,"button",6),e.nI1(5,"async"),e.k0s(),e.j41(6,"div",7),e.DNE(7,ea,4,2,"div",8),e.nI1(8,"async"),e.DNE(9,oa,5,4,"ng-template",null,0,e.C5r),e.k0s()()),2&n){let i,s;const a=e.sdS(10);e.R7$(),e.Y8G("ngIf",e.bMT(2,4,t.userType$)!==t.authUserTypes.Team),e.R7$(3),e.Y8G("ngIf",null==(i=e.bMT(5,6,t.userProfile$))?null:i.developer_account),e.R7$(3),e.Y8G("ngIf",null==(s=e.bMT(8,8,t.userProfile$))?null:s.developer_account)("ngIfElse",a)}},dependencies:[c.Sq,c.bT,$.Q,Ne.L,k.R,Xs.e,Gn.K,z,Qs,c.Jj],styles:[".developer__app[_ngcontent-%COMP%]{cursor:pointer}.developer__notice[_ngcontent-%COMP%]{color:#374a68}"],changeDetection:0}),ot([(0,p.l6)(ae.V.getHorizontalBreakpoint),it("design:type",g.c)],xe.prototype,"horizontalBreakpoint$",void 0),ot([(0,p.l6)(m.k.getUserProfile),it("design:type",g.c)],xe.prototype,"userProfile$",void 0),ot([(0,p.l6)(m.k.getUserType),it("design:type",g.c)],xe.prototype,"userType$",void 0),ot([(0,p.l6)(m.k.getUserApps),it("design:type",g.c)],xe.prototype,"userApps$",void 0),ot([(0,p.l6)(m.k.getSelectedUserApp),it("design:type",g.c)],xe.prototype,"selectedUserApp$",void 0);class on{constructor(n,t,i,s,a){this.store=n,this.actions=t,this.formBuilder=i,this.dialogRef=s,this.changeRef=a,this.error="",this.attempts=0,this.ngUnsubscribe=new C.B}ngOnInit(){this.initForm(),this.initListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.setDialogTransparent(!1)}initForm(){this.form=this.formBuilder.group({confirm:[!1,d.k0.requiredTrue]})}initListeners(){this.deleting$.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{n&&(this.error="",this.attempts++),this.setDialogTransparent(n),this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(f.nb),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new f.fQ)}),this.actions.pipe((0,p.xi)(f.cO,f.je),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.redirectOnLogout(),this.dialogRef.close()}),this.actions.pipe((0,p.xi)(f.cZ),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.error=(0,Ce.u1)(n.error)||"There was an error deleting your account.",this.changeRef.markForCheck()})}handleCancelClick(){this.dialogRef.close()}handleDeleteClick(){this.store.dispatch(new f.sG)}redirectOnLogout(){window.location.href=j.c.native?"/#/login?returnUrl=/explore":"/login"}setDialogTransparent(n){this.dialogRef.removePanelClass("transparent"),n&&this.dialogRef.addPanelClass("transparent")}}(st=on).\u0275fac=function(n){return new(n||st)(e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(F.CP),e.rXU(e.gRc))},st.\u0275cmp=e.VBU({type:st,selectors:[["app-delete-account-dialog"]],decls:13,vars:9,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"dialog",3,"formGroup"],["class","flex flex-col items-center",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions",""],["app-button","","buttonTheme","light","buttonType","default",3,"click"],["app-button","","buttonType","primary",3,"click","disabled"],[1,"flex","flex-col","items-center"],["size","large"],[1,"mt-3","text-xs"],[1,"text-sm","my-4","mb-9"],[1,"mb-6"],[1,"font-bold"],[1,"dialog__list"],[1,"my-2"],[1,"mt-4"],["formControlName","confirm"],[2,"white-space","normal"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["type","error","icon","info"]],template:function(n,t){1&n&&(e.j41(0,"h1",0),e.EFF(1,"Delete Account"),e.k0s(),e.j41(2,"div",1)(3,"div",2),e.DNE(4,ra,4,0,"div",3),e.nI1(5,"async"),e.DNE(6,la,21,1,"div",4),e.nI1(7,"async"),e.k0s()(),e.j41(8,"div",5)(9,"button",6),e.bIt("click",function(){return t.handleCancelClick()}),e.EFF(10," Cancel "),e.k0s(),e.j41(11,"button",7),e.bIt("click",function(){return t.handleDeleteClick()}),e.EFF(12),e.k0s()()),2&n&&(e.R7$(3),e.Y8G("formGroup",t.form),e.R7$(),e.Y8G("ngIf",e.bMT(5,5,t.deleting$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(7,7,t.deleting$)),e.R7$(5),e.Y8G("disabled",t.form.invalid),e.R7$(),e.SpI(" ",t.attempts>0?"Try Again":"Yes, Delete Account"," "))},dependencies:[c.bT,Qe.So,F.BI,F.E7,F.Yi,$.Q,Te.tI,Ie.X,d.BC,d.cb,d.j4,d.JD,c.Jj],styles:[".dialog[_ngcontent-%COMP%]{max-width:520px}.dialog__list[_ngcontent-%COMP%]{list-style-type:disc;margin:0;padding-left:40px}"],changeDetection:0}),function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);s>3&&a&&Object.defineProperty(n,t,a)}([(0,p.l6)(m.k.getProfileDeleting),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,g.c)],on.prototype,"deleting$",void 0);const ua=()=>["./"];let ma=(()=>{var o;class n{constructor(i){this.dialog=i}ngOnInit(){}handleDeleteAccountClick(){this.dialog.open(on)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(F.bZ))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-account-delete"]],decls:10,vars:2,consts:[["label","Delete Account"],[1,"delete-account","text-sm"],[1,"font-bold"],[1,"mt-4"],[1,"text-link","underline",3,"click","routerLink"]],template:function(i,s){1&i&&(e.j41(0,"app-account-panel",0)(1,"div",1)(2,"div"),e.EFF(3," Deleting your BioDigital Human account is a permanent action and "),e.j41(4,"em",2),e.EFF(5,"cannot be undone"),e.k0s(),e.EFF(6,". "),e.k0s(),e.j41(7,"div",3)(8,"a",4),e.bIt("click",function(){return s.handleDeleteAccountClick()}),e.EFF(9," Delete account "),e.k0s()()()()),2&i&&(e.R7$(8),e.Y8G("routerLink",e.lJ4(1,ua)))},dependencies:[U.Wk,z],changeDetection:0}),n})();var at,wn=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},On=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function da(o,n){1&o&&(e.qex(0),e.nrm(1,"mat-divider"),e.j41(2,"div",4),e.nrm(3,"app-account-apps"),e.k0s(),e.bVm())}function ga(o,n){1&o&&(e.qex(0),e.nrm(1,"mat-divider"),e.j41(2,"div",5),e.nrm(3,"app-account-delete"),e.k0s(),e.bVm())}class Ft{constructor(n,t){this.store=n,this.activatedRoute=t,this.ngUnsubscribe=new C.B,this.userRoleEnum=X.x}ngOnInit(){this.store.dispatch(new f.hs(!0))}ngAfterViewInit(){this.initRoutingListeners()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initRoutingListeners(){(0,Y.h)(this.activatedRoute.url,this.activatedRoute.queryParams).pipe((0,M.T)(()=>this.activatedRoute.snapshot.queryParams),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{const{section:t}=n;this.scrollToSection(t)})}scrollToSection(n){const i=document.getElementById(`account-${n}`);i&&i.scrollIntoView()}}(at=Ft).\u0275fac=function(n){return new(n||at)(e.rXU(p.il),e.rXU(U.nX))},at.\u0275cmp=e.VBU({type:at,selectors:[["app-profile-page"]],decls:13,vars:8,consts:[["id","account-profile",1,"mb-10"],["id","account-password",1,"my-10"],["id","account-subscription",1,"my-10"],[4,"ngIf"],["id","account-developer",1,"my-10"],["id","account-delete",1,"my-10"]],template:function(n,t){if(1&n&&(e.j41(0,"div",0),e.nrm(1,"app-account-profile"),e.k0s(),e.nrm(2,"mat-divider"),e.j41(3,"div",1),e.nrm(4,"app-account-password"),e.k0s(),e.nrm(5,"mat-divider"),e.j41(6,"div",2),e.nrm(7,"app-account-subscription"),e.k0s(),e.DNE(8,da,4,0,"ng-container",3),e.nI1(9,"async"),e.nI1(10,"async"),e.DNE(11,ga,4,0,"ng-container",3),e.nI1(12,"async")),2&n){let i;e.R7$(8),e.Y8G("ngIf",(null==(i=e.bMT(9,2,t.userRole$))?null:i.role_name)===t.userRoleEnum.Creator||(null==(i=e.bMT(10,4,t.userRole$))?null:i.role_name)===t.userRoleEnum.Admin),e.R7$(3),e.Y8G("ngIf",!e.bMT(12,6,t.organization$))}},dependencies:[c.bT,ce.q,Oe,Yt,kt,xe,ma,c.Jj],changeDetection:0}),wn([(0,p.l6)(m.k.getUserRole),On("design:type",g.c)],Ft.prototype,"userRole$",void 0),wn([(0,p.l6)(T.q.getOrganization),On("design:type",g.c)],Ft.prototype,"organization$",void 0);var ha=l(291);const _a=(o,n)=>({"toggle--checked":o,"toggle--disabled":n});let fa=(()=>{var o;class n{set id(i){this._ID=i,this.externalId=null}get id(){return this._ID}get value(){return this._value}set value(i){i!==this.value&&(this._value=i,this.onChange(i),this.onTouched())}constructor(){this.externalId="",this._ID="",this._value=!1,this.onChange=()=>{},this.onTouched=()=>{},this.disabled=!1,this.checkedIcon="check",this.uncheckedIcon="minus"}registerOnChange(i){this.onChange=i}writeValue(i){i&&(this.value=i)}registerOnTouched(i){this.onTouched=i}toggle(){this.disabled||(this.value=!this.value)}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-toggle"]],hostVars:1,hostBindings:function(i,s){2&i&&e.BMQ("id",s.externalId)},inputs:{id:"id",_value:[e.Mj6.None,"value","_value"],disabled:"disabled",checkedIcon:"checkedIcon",uncheckedIcon:"uncheckedIcon"},features:[e.Jv_([{provide:d.kq,useExisting:(0,e.Rfq)(()=>o),multi:!0}])],decls:4,vars:9,consts:[[1,"toggle",3,"click","ngClass"],["type","checkbox",1,"toggle__input",3,"value","id"],[1,"toggle__handle"],[3,"icon"]],template:function(i,s){1&i&&(e.j41(0,"div",0),e.bIt("click",function(){return s.toggle()}),e.nrm(1,"input",1),e.j41(2,"div",2),e.nrm(3,"app-icon",3),e.k0s()()),2&i&&(e.Y8G("ngClass",e.l_i(6,_a,s.value,s.disabled)),e.R7$(),e.Y8G("value",s.value)("id",s.id),e.BMQ("checked",s.value)("disabled",s.disabled),e.R7$(2),e.Y8G("icon",s.value?s.checkedIcon:s.uncheckedIcon))},dependencies:[c.YU,k.R],styles:['[_nghost-%COMP%]{padding:0 8px}.toggle[_ngcontent-%COMP%]{box-sizing:border-box;--diameter: 20px;--track-height: calc(var(--diameter) * .7);--track-color: #d7e0ea;--handle-color: #374a68;display:flex;justify-content:center;align-items:center;width:calc(var(--diameter) * 2);min-height:40px;position:relative;transition:all ease-in-out .15s;cursor:pointer}.toggle--checked[_ngcontent-%COMP%]{--track-color: #add6ff;--handle-color: #2d72dc}.toggle--checked[_ngcontent-%COMP%]   .toggle__handle[_ngcontent-%COMP%]{transform:translate(100%)}.toggle--disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.toggle[_ngcontent-%COMP%]:after{content:" ";background-color:var(--track-color);width:100%;height:var(--track-height);border-radius:calc(var(--track-height) / 2);position:absolute;z-index:1}.toggle__input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;width:0;height:0}.toggle__handle[_ngcontent-%COMP%]{width:var(--diameter);height:var(--diameter);border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--handle-color);color:#fff;font-size:calc(var(--diameter) * .4);position:absolute;left:0;z-index:2;transition:all ease-in-out .15s}'],changeDetection:0}),n})();var rt,sn=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},an=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const ba=["emailMessage"],va=["emailError"];function Ca(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",10)(1,"app-account-panel",22)(2,"div",23),e.EFF(3,"This will clear your downloaded content from this device."),e.k0s(),e.j41(4,"button",24),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleDeleteDataClick())}),e.EFF(5," Delete Data "),e.k0s()()()}}class ct{constructor(n,t,i){this.actions=n,this.changeRef=t,this.store=i,this.environment=j.c,this.ngUnsubscribe=new C.B}ngOnInit(){this.initEmailPreferenceObservers()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initEmailPreferenceObservers(){this.userAccountSettings$.pipe((0,M.T)(n=>{const t=(0,ke.j)(n);return(0,_.get)(t,"email_marketing_optin.value")}),(0,D.p)(n=>!(0,_.isNil)(n)),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.emailPreference=n,this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(f.ZD),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.updateEmailMessage="You have successfully "+(this.emailPreference?"subscribed":"unsubscribed"),this.emailMessage.shown=!0,this.changeRef.markForCheck(),this.store.dispatch(new f.hs)}),this.actions.pipe((0,p.xi)(f._h),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.emailError.shown=!0,this.changeRef.markForCheck(),this.store.dispatch(new f.hs)})}handleDeleteDataClick(){this.store.dispatch(new f.tM)}handleToggleEmail(n){n!==this.emailPreference&&(this.emailPreference=n,this.store.dispatch(new f.Kg({account_settings:[{email_marketing_optin:{value:n?1:0}}]})))}}(rt=ct).\u0275fac=function(n){return new(n||rt)(e.rXU(p.En),e.rXU(e.gRc),e.rXU(p.il))},rt.\u0275cmp=e.VBU({type:rt,selectors:[["app-settings-page"]],viewQuery:function(n,t){if(1&n&&(e.GBs(ba,7),e.GBs(va,7)),2&n){let i;e.mGM(i=e.lsd())&&(t.emailMessage=i.first),e.mGM(i=e.lsd())&&(t.emailError=i.first)}},decls:34,vars:9,consts:[["emailMessage",""],["emailError",""],[1,"settings","flex","flex-col"],[1,"mb-6"],["label","Language"],[1,"text-sm","my-5"],[1,"flex","flex-row"],["buttonType","outline","buttonTheme","light","localeFormat","full",3,"showFlag"],[1,"settings__notice","text-xs","my-2"],["class","my-6",4,"ngIf"],[1,"my-6"],["label","Email Preferences"],[1,"my-2"],["type","message",3,"shown"],["type","error",3,"shown"],[1,"flex"],["checkedIcon","","uncheckedIcon","",1,"mr-2",3,"ngModelChange","disabled","ngModel"],[1,"text-sm"],["label","Legal"],[1,"flex","flex-col","text-sm"],["href","https://www.biodigital.com/terms","target","_blank",1,"text-link","underline"],["href","https://www.biodigital.com/privacy","target","_blank",1,"text-link","underline","mt-2"],["label","Delete Stored Data"],[1,"text-sm","mb-5"],["type","submit","buttonTheme","light","app-button","","buttonType","primary",3,"click"]],template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"app-account-panel",4)(3,"div",5),e.EFF(4,"Select the language you'd like to use for our 3D models:"),e.k0s(),e.j41(5,"div",6),e.nrm(6,"app-locales",7),e.k0s(),e.j41(7,"div",8),e.EFF(8," This setting translates the contents of the 3D models (i.e., titles, descriptions, and anatomical structures) found in Explore. The models stored in your Library will not be translated. "),e.k0s()()(),e.DNE(9,Ca,6,0,"div",9),e.j41(10,"div",10)(11,"app-account-panel",11)(12,"div",12)(13,"app-message-toggle",13,0),e.EFF(15),e.k0s(),e.j41(16,"app-message-toggle",14,1),e.EFF(18," There was a problem updating your email preferences. Please try again later. "),e.k0s()(),e.j41(19,"div",15)(20,"app-toggle",16),e.nI1(21,"async"),e.bIt("ngModelChange",function(a){return e.eBV(i),e.Njj(t.handleToggleEmail(a))}),e.k0s(),e.j41(22,"div")(23,"div",17),e.EFF(24,"Receive emails for newsletters, product tips, and more."),e.k0s(),e.j41(25,"div",8),e.EFF(26," You will always receive important transactional and billing-related updates. "),e.k0s()()()()(),e.j41(27,"div",10)(28,"app-account-panel",18)(29,"div",19)(30,"a",20),e.EFF(31,"Terms of Service"),e.k0s(),e.j41(32,"a",21),e.EFF(33,"Privacy Policy"),e.k0s()()()()()}2&n&&(e.R7$(6),e.Y8G("showFlag",!1),e.R7$(3),e.Y8G("ngIf",t.environment.native),e.R7$(4),e.Y8G("shown",!1),e.R7$(2),e.SpI(" ",t.updateEmailMessage," "),e.R7$(),e.Y8G("shown",!1),e.R7$(4),e.Y8G("disabled",e.bMT(21,7,t.profileUpdating$))("ngModel",t.emailPreference))},dependencies:[c.bT,d.BC,d.vS,$.Q,Ie.X,ha.J,fa,z,c.Jj],styles:[".settings__select[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.settings__notice[_ngcontent-%COMP%]{color:#374a68}"],changeDetection:0}),sn([(0,p.l6)(m.k.getUserLocale),an("design:type",g.c)],ct.prototype,"userLocale$",void 0),sn([(0,p.l6)(m.k.getUserAccountSettings),an("design:type",g.c)],ct.prototype,"userAccountSettings$",void 0),sn([(0,p.l6)(m.k.getProfileUpdating),an("design:type",g.c)],ct.prototype,"profileUpdating$",void 0);var lt,Bn=l(76203),Nn=l(21827),rn=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},cn=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Ta=["error"];function ya(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleShowFormClick())}),e.j41(1,"div",9),e.EFF(2,"Have a team invite code for a different team?"),e.k0s()()}2&o&&e.Y8G("uppercase",!1)}function Ra(o,n){1&o&&(e.j41(0,"div",10),e.nrm(1,"mat-divider"),e.k0s())}function ka(o,n){if(1&o&&(e.qex(0),e.DNE(1,ya,3,1,"button",6),e.nI1(2,"async"),e.DNE(3,Ra,2,0,"div",7),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!1===e.bMT(2,2,t.requesting$)&&!t.showInviteForm),e.R7$(2),e.Y8G("ngIf",t.showInviteForm)}}function Fa(o,n){1&o&&e.nrm(0,"app-spinner",13)}function Sa(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.handleCancelClick())}),e.EFF(1," Cancel "),e.k0s()}}function Ia(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"div",14)(2,"app-message-toggle",15,0),e.EFF(4),e.k0s()(),e.j41(5,"div",16)(6,"app-form-field",17),e.nrm(7,"input",18),e.k0s(),e.j41(8,"div",19),e.DNE(9,Sa,2,0,"button",20),e.j41(10,"button",21),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleJoinClick())}),e.EFF(11," Join Team "),e.k0s()()(),e.bVm()}if(2&o){const t=e.XpG(2);e.R7$(2),e.Y8G("shown",!1),e.R7$(2),e.SpI(" ",t.errorMessage," "),e.R7$(),e.Y8G("formGroup",t.form),e.R7$(4),e.Y8G("ngIf",t.form.dirty),e.R7$(),e.Y8G("disabled",t.form.invalid)}}function ja(o,n){if(1&o&&(e.qex(0),e.j41(1,"div",11),e.EFF(2,"Use your team invite code to join an existing team account."),e.k0s(),e.DNE(3,Fa,1,0,"app-spinner",12),e.nI1(4,"async"),e.DNE(5,Ia,12,5,"ng-container",5),e.bVm()),2&o){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",e.bMT(4,2,t.joining$)||t.joined),e.R7$(2),e.Y8G("ngIf",!t.joined)}}function xa(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"div",10),e.nrm(2,"mat-divider"),e.k0s(),e.j41(3,"app-account-panel",23)(4,"div",24),e.nrm(5,"app-team-features"),e.k0s(),e.j41(6,"div",25)(7,"button",26),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleStartTrialClick())}),e.EFF(8," Start free trial "),e.k0s()()(),e.bVm()}}class pt{constructor(n,t,i,s,a){this.authRoutingService=n,this.store=t,this.actions=i,this.formBuilder=s,this.changeDetectorRef=a,this.showInviteForm=!1,this.showFreeTrial=!1,this.joined=!1,this.errorMessage="",this.requestOrganizationsText="The following teams are available for you to join based on your email domain. Submit a request to start collaborating.",this.ngUnsubscribe=new C.B}ngOnInit(){this.initForm(),this.initEventListers()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.form=this.formBuilder.group({code:["",d.k0.required]})}initEventListers(){this.actions.pipe((0,p.xi)(A.yX),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.joined=!0,this.errorMessage="",this.store.dispatch(new f.hs),this.changeDetectorRef.markForCheck()}),this.actions.pipe((0,p.xi)(A.zi),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.errorMessage=(0,Ce.u1)(n.error)||"There was an error joining the group",this.error.shown=!0,this.form.markAsUntouched(),this.changeDetectorRef.markForCheck()})}handleCancelClick(){this.form.reset(),this.errorMessage="",this.error.shown=!1,this.changeDetectorRef.markForCheck()}handleJoinClick(){const{code:n}=this.form.value;this.store.dispatch(new A.Jt(n))}handleStartTrialClick(){this.authRoutingService.navigateToTeamCreation()}handleShowFormClick(){this.showInviteForm=!0}handlePendingJoinRequest(n){this.showFreeTrial=void 0===n,n&&(this.showInviteForm=!1)}handleRequestOrganizationsSuccess(n){this.showInviteForm=0===n.length}}(lt=pt).\u0275fac=function(n){return new(n||lt)(e.rXU(H.y),e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(e.gRc))},lt.\u0275cmp=e.VBU({type:lt,selectors:[["app-team-free-user"]],viewQuery:function(n,t){if(1&n&&e.GBs(Ta,5),2&n){let i;e.mGM(i=e.lsd())&&(t.error=i.first)}},decls:8,vars:6,consts:[["error",""],[1,"team"],["noticeType","team_account_closed"],["label","Join a Team"],[3,"pendingJoinRequestSuccess","requestOrganizationsSuccess","requestOrganizationsText"],[4,"ngIf"],["class","mt-3","app-button","","buttonSize","xs","buttonType","text","buttonTheme","light",3,"uppercase","click",4,"ngIf"],["class","my-8",4,"ngIf"],["app-button","","buttonSize","xs","buttonType","text","buttonTheme","light",1,"mt-3",3,"click","uppercase"],[1,"text-sm","underline"],[1,"my-8"],[1,"text-sm","my-4"],["size","huge",4,"ngIf"],["size","huge"],[1,"my-4"],["type","error","icon","exclamation-circle",3,"shown"],[1,"mt-4",3,"formGroup"],["label","Team Invite Code","theme","light"],["type","text","formControlName","code",1,"input"],[1,"flex","justify-end","mt-1"],["type","reset","app-button","","buttonTheme","light","buttonType","default","class","mr-4",3,"click",4,"ngIf"],["type","submit","buttonTheme","light","app-button","","buttonType","primary",3,"click","disabled"],["type","reset","app-button","","buttonTheme","light","buttonType","default",1,"mr-4",3,"click"],["label","Create a Team"],[1,"team__features"],[1,"mt-8","flex","flex-col","items-center"],["type","button","buttonTheme","light","app-button","","buttonType","outline",1,"mb-4",3,"click"]],template:function(n,t){1&n&&(e.j41(0,"div",1),e.nrm(1,"app-user-notices",2),e.j41(2,"app-account-panel",3)(3,"app-team-join",4),e.bIt("pendingJoinRequestSuccess",function(s){return t.handlePendingJoinRequest(s)})("requestOrganizationsSuccess",function(s){return t.handleRequestOrganizationsSuccess(s)}),e.k0s(),e.DNE(4,ka,4,4,"ng-container",5)(5,ja,6,4,"ng-container",5),e.k0s(),e.DNE(6,xa,9,0,"ng-container",5),e.nI1(7,"async"),e.k0s()),2&n&&(e.R7$(3),e.Y8G("requestOrganizationsText",t.requestOrganizationsText),e.R7$(),e.Y8G("ngIf",t.showFreeTrial),e.R7$(),e.Y8G("ngIf",t.showInviteForm),e.R7$(),e.Y8G("ngIf",e.bMT(7,4,t.canStartFreeTrial$)&&t.showFreeTrial))},dependencies:[c.bT,d.me,d.BC,d.cb,d.j4,d.JD,$.Q,Se.K,Bn.W,Te.tI,Ie.X,Nn.H,Qt,ce.q,z,c.Jj],changeDetection:0}),rn([(0,p.l6)(he.e.getJoining),cn("design:type",g.c)],pt.prototype,"joining$",void 0),rn([(0,p.l6)(he.e.getRequesting),cn("design:type",g.c)],pt.prototype,"requesting$",void 0),rn([(0,p.l6)(m.k.canStartFreeTrial),cn("design:type",g.c)],pt.prototype,"canStartFreeTrial$",void 0);var ut,Pa=l(87996),Ea=l(56081),Ue=l(7213),Da=l(27561),Ma=l(43654),Aa=l(35160),Ga=l(32914),$a=l(39705),wa=l(56657),Oa=(l(15040),l(65459)),Ba=l(42482),Na=l(79083),Yn=l(5951),Ya=l(87424),Va=l(57018),za=l(65115),Xa=l(77242),La=l(41640),Pe=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},Ee=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Qa=["upload"],qa=o=>({"w-1/2":o});function Ja(o,n){if(1&o&&(e.j41(0,"div",25),e.nI1(1,"async"),e.j41(2,"app-form-field",26),e.nrm(3,"app-content-upload-input",27,4),e.k0s()()),2&o){const t=e.XpG(2);e.Y8G("ngClass",e.eq3(4,qa,e.bMT(1,2,t.horizontalBreakpoint$)>t.horizontalBreakpoint.Small)),e.R7$(2),e.Y8G("labelElement",!1)}}function Wa(o,n){if(1&o&&(e.j41(0,"div",28)(1,"mat-error"),e.EFF(2),e.k0s()()),2&o){const t=e.XpG(2);e.R7$(2),e.SpI(" ",t.teamNamePlaceholder," ")}}function Ha(o,n){if(1&o&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Ka(o,n){1&o&&(e.j41(0,"div",28)(1,"mat-error"),e.EFF(2," Please enter a valid website (e.g. www.example.com or example.com). "),e.k0s()())}function Za(o,n){if(1&o&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function er(o,n){1&o&&(e.j41(0,"div",30),e.nrm(1,"input",31),e.k0s())}function tr(o,n){if(1&o&&(e.j41(0,"div",13),e.DNE(1,Ja,5,6,"div",14),e.j41(2,"app-form-field",15),e.nrm(3,"input",16),e.DNE(4,Wa,3,1,"div",17),e.k0s(),e.j41(5,"app-form-field",15)(6,"select",18),e.nrm(7,"option",19),e.DNE(8,Ha,2,2,"option",20),e.k0s()(),e.j41(9,"app-form-field",15),e.nrm(10,"input",21),e.DNE(11,Ka,3,0,"div",17),e.k0s(),e.j41(12,"app-form-field",15)(13,"select",22),e.nrm(14,"option",19),e.DNE(15,Za,2,2,"option",20),e.nrm(16,"option",23),e.k0s(),e.DNE(17,er,2,0,"div",24),e.k0s()()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.environment.native),e.R7$(),e.Y8G("label",t.teamNameLabel),e.R7$(),e.Y8G("minlength",t.minNameLength)("maxlength",t.maxNameLength),e.R7$(),e.Y8G("ngIf",t.nameField.touched&&t.nameField.invalid),e.R7$(),e.Y8G("label",t.teamSizeLabel),e.R7$(3),e.Y8G("ngForOf",t.teamSizes),e.R7$(),e.Y8G("label",t.teamWebsiteLabel),e.R7$(2),e.Y8G("ngIf",t.websiteField.touched&&t.websiteField.invalid),e.R7$(),e.Y8G("label",t.teamIndustryLabel),e.R7$(3),e.Y8G("ngForOf",t.teamIndustries),e.R7$(),e.Y8G("label","Other")("value","Other"),e.R7$(),e.Y8G("ngIf","Other"===t.form.get("industry").value)}}function nr(o,n){1&o&&e.eu8(0)}function or(o,n){if(1&o&&(e.j41(0,"option",29),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.Y8G("value",t.role_id),e.R7$(),e.SpI(" ",t.role_display_name," ")}}function ir(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"div",34),e.EFF(2," You can generate a new team invite code and link if you no longer wish to use the old one. "),e.k0s(),e.j41(3,"button",41),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setShowGenerateCode(!0))}),e.EFF(4," Generate New Team Code and Link "),e.k0s(),e.bVm()}2&o&&(e.R7$(3),e.Y8G("uppercase",!0))}function sr(o,n){1&o&&e.nrm(0,"app-spinner",53)}function ar(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",42),e.EFF(1,"Are you sure you want to generate a new team invite code?"),e.k0s(),e.j41(2,"ul",43)(3,"li",44),e.EFF(4,"This action "),e.j41(5,"span",45),e.EFF(6,"cannot be undone."),e.k0s()(),e.j41(7,"li",44),e.EFF(8,"Previously shared team invite codes and links will be invalid."),e.k0s()(),e.j41(9,"div",46)(10,"mat-checkbox",47)(11,"span",48),e.EFF(12,"I confirm that I want to generate a new team invite code and link."),e.k0s()()(),e.j41(13,"div",49)(14,"button",50),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.setShowGenerateCode(!1))}),e.EFF(15," Cancel "),e.k0s(),e.j41(16,"button",51),e.nI1(17,"async"),e.bIt("click",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleGenerateCodeClick(s))}),e.EFF(18," Yes, Generate "),e.DNE(19,sr,1,0,"app-spinner",52),e.nI1(20,"async"),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(14),e.Y8G("uppercase",!0),e.R7$(2),e.Y8G("disabled",!t.confirmGenerateCode.value||e.bMT(17,4,t.generatingGroupCode$))("uppercase",!0),e.R7$(3),e.Y8G("ngIf",e.bMT(20,6,t.generatingGroupCode$))}}function rr(o,n){1&o&&e.nrm(0,"app-spinner",53)}function cr(o,n){1&o&&(e.j41(0,"div",28)(1,"mat-error"),e.EFF(2," Please enter a valid domain format. "),e.k0s()())}function lr(o,n){1&o&&(e.j41(0,"div",28)(1,"mat-error"),e.EFF(2," You've already added this domain. "),e.k0s()())}function pr(o,n){1&o&&(e.j41(0,"div",28)(1,"mat-error"),e.EFF(2," You cannot use this domain. "),e.k0s()())}function ur(o,n){1&o&&e.nrm(0,"app-spinner",63)}function mr(o,n){1&o&&e.nrm(0,"app-icon",64)}function dr(o,n){if(1&o){const t=e.RV6();e.j41(0,"li",59)(1,"div",60),e.EFF(2),e.k0s(),e.j41(3,"button",61),e.nI1(4,"async"),e.bIt("click",function(s){const a=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.handleRemoveDomainClick(s,a))}),e.DNE(5,ur,1,0,"app-spinner",62)(6,mr,1,0,"ng-template",null,6,e.C5r),e.k0s()()}if(2&o){const t=n.$implicit,i=e.sdS(7),s=e.XpG(3);e.R7$(2),e.JRh(t.email_domain),e.R7$(),e.Y8G("disabled",e.bMT(4,4,s.removingJoinDomains$)),e.R7$(2),e.Y8G("ngIf",t.join_domain_id===s.domainIdToRemove)("ngIfElse",i)}}function gr(o,n){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",37),e.EFF(2,"Approved Email Domains"),e.k0s(),e.j41(3,"div",34),e.EFF(4," Allow users with specific email domains to request to join your team. Administrators will be prompted via email to approve or deny each request. "),e.k0s(),e.j41(5,"app-form-field",35)(6,"div",54),e.nrm(7,"input",55),e.j41(8,"button",56),e.nI1(9,"async"),e.nI1(10,"async"),e.bIt("click",function(s){e.eBV(t);const a=e.XpG(2);return e.Njj(a.handleAddDomainClick(s))}),e.EFF(11," Add Domain "),e.DNE(12,rr,1,0,"app-spinner",52),e.nI1(13,"async"),e.k0s()(),e.DNE(14,cr,3,0,"div",17)(15,lr,3,0,"div",17)(16,pr,3,0,"div",17),e.k0s(),e.j41(17,"ul",57),e.DNE(18,dr,8,6,"li",58),e.k0s()()}if(2&o){const t=e.XpG(2);e.R7$(8),e.Y8G("disabled",t.domainToAddEmpty||t.domainToAdd.invalid||t.domainToAdd.pending||e.bMT(9,6,t.loadingJoinDomains$)||e.bMT(10,8,t.addingJoinDomains$)),e.R7$(4),e.Y8G("ngIf",t.domainToAdd.pending||e.bMT(13,10,t.addingJoinDomains$)),e.R7$(2),e.Y8G("ngIf",null==t.domainToAdd.errors?null:t.domainToAdd.errors.invalidDomainPattern),e.R7$(),e.Y8G("ngIf",null==t.domainToAdd.errors?null:t.domainToAdd.errors.duplicateDomain),e.R7$(),e.Y8G("ngIf",null==t.domainToAdd.errors?null:t.domainToAdd.errors.forbiddenDomain),e.R7$(2),e.Y8G("ngForOf",t.joinDomains)}}function hr(o,n){if(1&o&&(e.j41(0,"div",13),e.DNE(1,nr,1,0,"ng-container",32),e.j41(2,"div",33),e.EFF(3,"Default Member Role"),e.k0s(),e.j41(4,"div",34),e.EFF(5," New members are automatically assigned this role unless specified otherwise in the email invitation. Roles can also be managed on the Team page. "),e.k0s(),e.j41(6,"app-form-field",35)(7,"select",36),e.DNE(8,or,2,2,"option",20),e.nI1(9,"async"),e.k0s()(),e.j41(10,"div",37),e.EFF(11,"Team Invite Code and Link"),e.k0s(),e.nrm(12,"app-team-group-code")(13,"mat-divider",38),e.DNE(14,ir,5,1,"ng-container",39)(15,ar,21,8,"ng-template",null,5,e.C5r)(17,gr,19,12,"div",40),e.k0s()),2&o){const t=e.sdS(16),i=e.XpG(),s=e.sdS(14);e.R7$(),e.Y8G("ngTemplateOutlet",s),e.R7$(7),e.Y8G("ngForOf",e.bMT(9,5,i.defaultRoleOptions$)),e.R7$(6),e.Y8G("ngIf",!i.showGenerateGroupCode)("ngIfElse",t),e.R7$(3),e.Y8G("ngIf",i.isValidPaidSubscription)}}function _r(o,n){1&o&&e.eu8(0)}function fr(o,n){if(1&o&&(e.j41(0,"div",13),e.DNE(1,_r,1,0,"ng-container",32),e.j41(2,"p",65),e.EFF(3," Set the fallback source to use when no official BioDigital anatomy description is available. "),e.k0s(),e.j41(4,"app-form-field",35)(5,"mat-radio-group",66)(6,"app-list",67)(7,"app-list-item")(8,"mat-radio-button",68),e.EFF(9,"Wikipedia"),e.k0s()(),e.j41(10,"app-list-item")(11,"mat-radio-button",69),e.EFF(12,"NCIT"),e.k0s()()()()()()),2&o){e.XpG();const t=e.sdS(14);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function br(o,n){1&o&&e.eu8(0)}function vr(o,n){if(1&o&&(e.qex(0),e.j41(1,"legend",70),e.EFF(2,"Create your team"),e.k0s(),e.j41(3,"p",71),e.EFF(4,"Tell us about your team to set up your account."),e.k0s(),e.j41(5,"div",72),e.DNE(6,br,1,0,"ng-container",32),e.k0s(),e.bVm()),2&o){e.XpG();const t=e.sdS(3);e.R7$(6),e.Y8G("ngTemplateOutlet",t)}}function Cr(o,n){1&o&&e.eu8(0)}function Tr(o,n){1&o&&e.eu8(0)}function yr(o,n){1&o&&e.eu8(0)}function Rr(o,n){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"legend",73),e.EFF(2,"Manage Team"),e.k0s(),e.j41(3,"app-tabs",74),e.bIt("activeTabChange",function(s){e.eBV(t);const a=e.XpG();return e.Njj(a.handleActiveTabChange(s))}),e.j41(4,"app-tab",75),e.DNE(5,Cr,1,0,"ng-container",32),e.k0s(),e.j41(6,"app-tab",76),e.DNE(7,Tr,1,0,"ng-container",32),e.k0s(),e.j41(8,"app-tab",77),e.DNE(9,yr,1,0,"ng-container",32),e.k0s()(),e.bVm()}if(2&o){const t=e.XpG(),i=e.sdS(3),s=e.sdS(5),a=e.sdS(7);e.R7$(3),e.Y8G("tabUnderline",!0)("activeTab",t.sections.Profile),e.R7$(2),e.Y8G("ngTemplateOutlet",i),e.R7$(2),e.Y8G("ngTemplateOutlet",s),e.R7$(2),e.Y8G("ngTemplateOutlet",a)}}function kr(o,n){1&o&&e.nrm(0,"app-spinner",53)}function Fr(o,n){if(1&o&&(e.j41(0,"button",78),e.EFF(1),e.DNE(2,kr,1,0,"app-spinner",52),e.k0s()),2&o){const t=e.XpG();e.AVh("w-full","create"===t.mode),e.Y8G("disabled",t.form.invalid||t.actionState),e.R7$(),e.SpI(" ",t.actionLabel," "),e.R7$(),e.Y8G("ngIf",t.actionState)}}function Sr(o,n){1&o&&(e.j41(0,"div",80),e.EFF(1," Please fill out the required fields in the "),e.j41(2,"span",45),e.EFF(3,"Profile"),e.k0s(),e.EFF(4," tab. "),e.k0s())}function Ir(o,n){if(1&o&&e.DNE(0,Sr,5,0,"div",79),2&o){const t=e.XpG();e.Y8G("ngIf",t.profileFieldInvalid)}}const jr=new RegExp("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?","i"),xr=new RegExp(/^(?!-)[A-Za-z0-9-]+([\\-\\.]{1}[a-z0-9]+)*\.[A-Za-z]{2,6}$/,"i");var ln=function(o){return o[o.Profile=0]="Profile",o[o.TeamAccess=1]="TeamAccess",o[o.AppSettings=2]="AppSettings",o}(ln||{});class de{get formAccountLogoURL(){return(0,_.get)(this.form,"value.account_logo_url.default","")}get mode(){return(0,_.isNil)(this.organization)?"create":"manage"}get nameField(){return this.form.get("account_name")}get websiteField(){return this.form.get("website")}get sizeField(){return this.form.get("size")}get industry(){return this.form.get("industry")}get defaultRoleId(){return this.form.get("defaultRoleId")}get domainToAdd(){return this.form.get("domainToAdd")}get confirmGenerateCode(){return this.form.get("confirmGenerateCode")}get domainToAddEmpty(){const n=this.domainToAdd.value;return!n||0===n.length}get profileFieldInvalid(){return this.nameField.invalid||this.sizeField.invalid||this.websiteField.invalid||this.industry.invalid}constructor(n,t,i,s,a,r){this.organizationsService=n,this.formBuilder=t,this.store=i,this.actions=s,this.snackBar=a,this.changeRef=r,this.environment=j.c,this.accountPurposeEnum=b.j,this.horizontalBreakpoint=se.m,this.minNameLength=3,this.maxNameLength=45,this.isValidPaidSubscription=!1,this.joinDomains=[],this.organizationCreated=new e.bkB,this.organizationUpdated=new e.bkB,this.teamIndustries=[],this.showGenerateGroupCode=!1,this.ngUnsubscribe=new C.B,this.sections=ln,this.showSubmitButton=!0;const u=this.store.selectSnapshot(m.k.isDeveloperReferral)?"developer":"";this.form=this.formBuilder.group({account_logo_url:[this.createImageURLs()],account_logo:[this.createAccountLogo()],account_name:["",[d.k0.required,d.k0.minLength(this.minNameLength),d.k0.maxLength(this.maxNameLength)]],size:["",[d.k0.required]],website:["",[d.k0.required,d.k0.pattern(jr)]],industry:["",d.k0.required],industryDescription:[""],purposeDescription:[u],defaultRoleId:[null],confirmGenerateCode:[!1],domainToAdd:[null,{validators:this.getDomainToAddValidator(),asyncValidators:this.getDomainToAddAsyncValidator()}],anatomyDescriptionFallback:[null]},{validators:this.getFormValidator()}),this.defaultRoleOptions$=this.userRoles$.pipe((0,M.T)(v=>v.filter(({role_name:R})=>R!==X.x.Admin)),(0,pe.F)(_.isEqual),(0,h.Q)(this.ngUnsubscribe))}ngOnInit(){if(this.setTeamFields(this.purpose),this.initLoadingState(),this.initFormListeners(),this.initCreateActionListeners(),this.initGroupCodeListeners(),this.store.dispatch(new f.hs),this.isValidPaidSubscription=this.store.selectSnapshot(T.q.isValidPaidSubscription),this.isValidPaidSubscription&&(this.store.dispatch(new w.O4),this.initJoinDomainListeners()),this.organization)this.setExistingOrganizationFormValues(this.organization);else{const n=this.store.selectSnapshot(m.k.isDeveloperReferral);this.setNewOrganizationFormValues(n)}}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initLoadingState(){(0,le.z)([this.store.select(m.k.getLoading),this.store.select(T.q.getCreating),this.store.select(T.q.getUpdating)]).pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(([n,t,i])=>{this.actionState=n||t||i,"create"===this.mode?this.actionLabel=(t?"Creating":"Create")+" Team":"manage"===this.mode&&(this.actionLabel=(i?"Saving":"Save")+" Changes"),this.changeRef.markForCheck()})}setTeamFields(n){this.purpose=n===b.j.Education?b.j.Education:b.j.Business,this.teamIndustries=co[this.purpose]||[],this.teamSizes=po[this.purpose]||[],this.teamNameLabel=this.purpose===b.j.Education?"School Name":"Company Name",this.teamNamePlaceholder=`Your ${this.teamNameLabel.toLowerCase()} must be ${this.minNameLength} or more characters.`,this.teamWebsiteLabel=this.purpose===b.j.Education?"School Website":"Company Website",this.teamSizeLabel=this.purpose===b.j.Education?"# of Students":"Company Size",this.teamIndustryLabel=this.purpose===b.j.Education?"Education Level":"Company Industry"}initFormListeners(){this.form.valueChanges.pipe((0,Aa.Z)(this.formAccountLogoURL),(0,M.T)(()=>!!this.formAccountLogoURL),(0,pe.F)(),(0,P.Z)(()=>this.getOrganizationLogoModel()),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.form.patchValue({account_logo:n})}),this.defaultRoleId.valueChanges.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(n=>this.updateDefaultRoleId(n))}initCreateActionListeners(){(0,Da.y)(this.actions.pipe((0,p.xi)(f.Kg)),this.actions.pipe((0,p.xi)(w.nB))).pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new f.hs),this.store.dispatch(new A.jV),this.organizationCreated.next(),this.snackBar.open("Your team has been successfully created.")}),this.actions.pipe((0,p.xi)(w.cw),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{const t=(0,_.get)(n.error,"status",400),i=(0,Ce.u1)(n.error);let s="There was an error creating your team.";i?s=i:413===t&&(s="The file size of your logo is too large. Please upload a new logo and try again."),this.snackBar.open(s)})}initUpdateActionListeners(n=!0){this.actions.pipe((0,p.xi)(w.m1),(0,G.s)(1),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.store.dispatch(new f.hs),n&&this.organizationUpdated.next(),this.snackBar.open("Your team has been successfully updated.")}),this.actions.pipe((0,p.xi)(w.xX),(0,G.s)(1),(0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{const i=(0,Ce.u1)(t.error);this.snackBar.open(i||"There was an error updating your team.")})}initGroupCodeListeners(){this.actions.pipe((0,p.xi)(w.pv),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("New team invite code and link generated."),this.setShowGenerateCode(!1),this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(w.cz),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("There was an error generating the new team invite code and link.")})}initJoinDomainListeners(){this.joinDomains$.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.joinDomains=n,this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(w.Hi),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.store.dispatch(new w.O4)}),this.actions.pipe((0,p.xi)(w.e1,w.bE),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{n instanceof w.e1&&this.removeDomains(n.joinDomainIds),this.domainIdToRemove=null,this.changeRef.markForCheck()}),this.actions.pipe((0,p.xi)(w.Uj,w.bE),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.snackBar.open(`There was an error ${n instanceof w.Uj?"adding":"removing"} the email domain.`)})}handleDeleteLogoClick(){this.form.patchValue({account_logo_url:this.createImageURLs(),account_logo:this.createAccountLogo()}),this.changeRef.markForCheck()}onSubmit(){if(this.form.valid){const n=this.form.value;"create"===this.mode?this.createTeam(n):"manage"===this.mode&&this.updateTeam(this.organization.id,n)}}handleActiveTabChange(n){this.showSubmitButton=n!==ln.TeamAccess,this.changeRef.markForCheck()}setNewOrganizationFormValues(n){this.form.patchValue({purposeDescription:n?"developer":""})}setExistingOrganizationFormValues(n){const t=n.group_attributes,i=this.getTeamAccountSetting(t,"account_purpose"),s=this.getTeamAccountSetting(t,"account_field"),a=this.getTeamAccountSetting(t,"account_company_size"),r=this.getTeamAccountSetting(t,"account_company_website"),u=this.getTeamAppSetting(t,"anatomy_description_fallback"),v=n.group_logos?.human_app?.default?.logo_url??"",R=v.split(".").pop(),E=this.createImageURLs(v),te=this.createAccountLogo(v,R);this.setTeamFields(i?i.value:b.j.Business);let fn=(0,_.get)(i,"description","");fn="developer"===fn?"developer":"";const Ml=(0,_.get)(u,"value",Na.H.Wikipedia),Al=this.store.selectSnapshot(T.q.getDefaultUserRole).role_id;this.form.patchValue({account_name:n.name,website:r?r.value:"",account_logo_url:E,account_logo:te,size:a?a.value:"",industry:s?s.value:"",industryDescription:s?s.value_desc:"",purposeDescription:fn,anatomyDescriptionFallback:Ml}),this.form.patchValue({defaultRoleId:Al},{emitEvent:!1})}handleAddDomainClick(n){n.preventDefault(),this.store.dispatch(new w.OG([this.domainToAdd.value])),this.domainToAdd.setValue(null)}handleRemoveDomainClick(n,t){n.preventDefault(),this.domainIdToRemove=t.join_domain_id,this.store.dispatch(new w.DM([t.join_domain_id]))}removeDomains(n){n.forEach(t=>{const i=this.joinDomains.findIndex(s=>s.join_domain_id===t);this.joinDomains.splice(i,1)}),this.changeRef.markForCheck()}handleGenerateCodeClick(n){n.preventDefault(),this.organization&&this.confirmGenerateCode&&this.store.dispatch(new w.eS(this.organization.id))}setShowGenerateCode(n){this.showGenerateGroupCode=n}getTeamAccountSetting(n,t){return this.organizationsService.getOrganizationAttribute(n,"account_settings",t)}getTeamAppSetting(n,t){return this.organizationsService.getOrganizationAttribute(n,"app_settings",t)}createTeam(n){const{account_name:t,account_logo:i}=n,s=this.createTeamAccountSettings(this.purpose,n);this.store.dispatch(new f.Kg({account_settings:s})),this.store.dispatch(new w.ul({account_name:t,account_settings:s,account_logo:i.default.image_src?i:void 0}))}updateTeam(n,t){const{account_name:i}=t;let{account_logo:s}=t;const a=this.createTeamAccountSettings(this.purpose,t);s=this.formAccountLogoURL?s.default.image_src?s:void 0:this.createAccountLogo("","",!0),this.store.dispatch(new w.Lo({group_id:n,account_name:i,account_settings:a,account_logo:s})),this.initUpdateActionListeners()}updateDefaultRoleId(n){this.store.dispatch(new w.Lo({group_id:this.organization.id,account_settings:[{default_user_role_id:parseInt(n,10)}]})),this.initUpdateActionListeners(!1)}createTeamAccountSettings(n,t){const{size:i,industry:s,industryDescription:a,website:r,purposeDescription:u,anatomyDescriptionFallback:v,defaultRoleId:R}=t;return(0,ke.q)({account_purpose:{value:n,description:u},account_field:{value:s,description:"Other"===s?a:""},account_company_size:i,account_company_website:r,anatomy_description_fallback:v,default_user_role_id:R})}getFormValidator(){return n=>{const{industry:t,industryDescription:i}=n.value,s="Other"===t&&""===i;return s?{invalidIndustry:s}:null}}getDomainToAddValidator(){return n=>{const t=n.value;let i=!1,s=!1;return t&&(i=!xr.test(t),s=this.store.selectSnapshot(T.q.getJoinDomains).map(u=>u.email_domain).includes(t)),i||s?{invalidDomainPattern:i,duplicateDomain:s}:null}}getDomainToAddAsyncValidator(){return n=>{const t=n.value;return t?(0,Ma.O)(300).pipe((0,Ga.n)(()=>this.organizationsService.checkJoinDomains([t])),(0,$a.M)(()=>this.changeRef.markForCheck()),(0,M.T)(i=>i[0]?{forbiddenDomain:!0}:null)):(0,ue.of)(null)}}getOrganizationLogoModel(){const n=this.upload?this.upload.getBlob():void 0;if(this.formAccountLogoURL&&!(0,_.isNil)(n)){const t=n.type.split("/")[1];return(0,ue.of)(n).pipe((0,P.Z)(i=>Ba.X.blobToBase64(i)),(0,M.T)(i=>this.createAccountLogo(i,t)))}return(0,ue.of)(this.createAccountLogo("",""))}createAccountLogo(n="",t="",i=!1){return{default:{delete:i?"1":"0",image_type:t,image_src:n}}}createImageURLs(n=""){if(n)return{default:n,small:n,large:n}}}(ut=de).\u0275fac=function(n){return new(n||ut)(e.rXU(Oa.k),e.rXU(d.ze),e.rXU(p.il),e.rXU(p.En),e.rXU(ne.UG),e.rXU(e.gRc))},ut.\u0275cmp=e.VBU({type:ut,selectors:[["app-team-create"]],viewQuery:function(n,t){if(1&n&&e.GBs(Qa,5),2&n){let i;e.mGM(i=e.lsd())&&(t.upload=i.first)}},inputs:{organization:"organization",purpose:"purpose"},outputs:{organizationCreated:"organizationCreated",organizationUpdated:"organizationUpdated"},decls:15,vars:5,consts:[["profileTmpl",""],["teamAccessTmpl",""],["appSettingsTmpl",""],["profileFieldInvalidMessage",""],["upload",""],["generateGroupCode",""],["removeDomainIcon",""],[1,"flex","flex-auto","create","theme-light","flex-col",3,"ngSubmit","formGroup","ngSwitch"],[1,"create__fieldset"],["type","hidden","formControlName","purposeDescription","data-test","purposeDescription"],[4,"ngSwitchCase"],[1,"flex","flex-row","justify-end","mt-5"],["type","submit","app-button","","buttonSize","md","buttonTheme","light","buttonType","primary","data-test","teamActionButton",3,"disabled","w-full",4,"ngIf"],[1,"create__fields","my-5"],[3,"ngClass",4,"ngIf"],["theme","light",3,"label"],["type","text","formControlName","account_name","data-test","account_name",1,"input",3,"minlength","maxlength"],["class","mt-1",4,"ngIf"],["formControlName","size","data-test","size",1,"input"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","url","formControlName","website","data-test","website",1,"input"],["formControlName","industry","data-test","industry",1,"input"],[3,"label","value"],["class","mt-2",4,"ngIf"],[3,"ngClass"],["theme","light","label","",3,"labelElement"],["type","image","layout","compact","theme","simple","label","Add optional logo","tooltip","Recommended image size: 238x40 pixels","formControlName","account_logo_url"],[1,"mt-1"],[3,"value"],[1,"mt-2"],["type","text","formControlName","industryDescription",1,"input"],[4,"ngTemplateOutlet"],[1,"mb-3","font-semibold","text-base"],[1,"mb-3","text-sm"],["theme","light"],["formControlName","defaultRoleId",1,"w-auto","input"],[1,"font-semibold","text-base","my-3"],[1,"!my-4"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["type","button","app-button","","buttonTheme","light","buttonType","flat",1,"block","pb-4",3,"click","uppercase"],[1,"mb-4","text-sm"],[1,"pl-3","mb-3","ml-3","create__list","text-sm"],[1,"mb-1"],[1,"font-bold"],[1,"mb-3","text-xs"],["formControlName","confirmGenerateCode"],[1,"create__confirm-generate-code"],[1,"flex","justify-end","pb-4"],["app-button","","buttonSize","md","buttonTheme","light","buttonType","default",3,"click","uppercase"],["app-button","","buttonSize","md","buttonTheme","light","buttonType","primary",1,"ml-3",3,"click","disabled","uppercase"],["size","medium","class","ml-2","render","inline",4,"ngIf"],["size","medium","render","inline",1,"ml-2"],[1,"flex","flex-row"],["type","text","placeholder","e.g. example.com","formControlName","domainToAdd",1,"input"],["type","button","app-button","","buttonTheme","light","buttonType","flat",1,"flex-none","ml-4",3,"click","disabled"],[1,"create__join-domains"],["class","flex items-center justify-between p-1 create__join-domain",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-1","create__join-domain"],[1,"pl-2","text-xs"],["buttonTheme","light","app-button","","buttonSize","sm",3,"click","disabled"],["size","small","class","ml-2","render","inline",4,"ngIf","ngIfElse"],["size","small","render","inline",1,"ml-2"],["size","sm","icon","trash"],[1,"mt-3","text-xs"],["formControlName","anatomyDescriptionFallback"],["listType","flat"],["value","wikipedia",1,"text-xs"],["value","ncit",1,"text-xs"],[1,"text-3xl","font-semibold"],[1,"mt-3","mb-5","text-base"],[1,"mt-10"],[1,"mb-5","text-xl","font-semibold"],["tabSize","medium","tabTheme","light","tabColor","red",3,"activeTabChange","tabUnderline","activeTab"],["label","Profile"],["label","Team Access"],["label","App Settings"],["type","submit","app-button","","buttonSize","md","buttonTheme","light","buttonType","primary","data-test","teamActionButton",3,"disabled"],["class","p-3 mb-3 create__profile-tab-error text-sm",4,"ngIf"],[1,"p-3","mb-3","create__profile-tab-error","text-sm"]],template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"form",7),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(t.onSubmit())}),e.j41(1,"fieldset",8),e.DNE(2,tr,18,14,"ng-template",null,0,e.C5r)(4,hr,18,7,"ng-template",null,1,e.C5r)(6,fr,13,1,"ng-template",null,2,e.C5r),e.nrm(8,"input",9),e.DNE(9,vr,7,1,"ng-container",10)(10,Rr,10,5,"ng-container",10),e.k0s(),e.j41(11,"div",11),e.DNE(12,Fr,3,5,"button",12),e.k0s()(),e.DNE(13,Ir,1,1,"ng-template",null,3,e.C5r)}2&n&&(e.Y8G("formGroup",t.form)("ngSwitch",t.mode),e.R7$(9),e.Y8G("ngSwitchCase","create"),e.R7$(),e.Y8G("ngSwitchCase","manage"),e.R7$(2),e.Y8G("ngIf",t.showSubmitButton))},dependencies:[c.YU,c.Sq,c.bT,c.T3,c.ux,c.e1,Qe.So,Yn.VT,Yn._g,Rn.TL,ce.q,d.qT,d.xH,d.y7,d.me,d.wz,d.BC,d.cb,d.xh,d.tU,Se.K,d.j4,d.JD,Te.tI,$.Q,wa.c,Ya.j,Va.O,k.R,za.H,Xa.s,La.P,c.Jj],styles:[".create__fieldset[_ngcontent-%COMP%]{overflow:auto;padding:0 20px;margin:0 -20px}.create__join-domain[_ngcontent-%COMP%]{border-radius:4px}.create__join-domain[_ngcontent-%COMP%]:hover, .create__join-domain[_ngcontent-%COMP%]:focus{background-color:#eaeff5}.create__profile-tab-error[_ngcontent-%COMP%]{background-color:#fff3f0;border-radius:4px}.create__list[_ngcontent-%COMP%]{list-style-type:disc;line-height:20px}.create__confirm-generate-code[_ngcontent-%COMP%]{white-space:normal;display:block;font-size:.75rem;line-height:1rem}"],changeDetection:0}),Pe([(0,p.l6)(ae.V.getHorizontalBreakpoint),Ee("design:type",g.c)],de.prototype,"horizontalBreakpoint$",void 0),Pe([(0,p.l6)(m.k.getUserRoles),Ee("design:type",g.c)],de.prototype,"userRoles$",void 0),Pe([(0,p.l6)(T.q.getJoinDomains),Ee("design:type",g.c)],de.prototype,"joinDomains$",void 0),Pe([(0,p.l6)(T.q.getGeneratingGroupCode),Ee("design:type",g.c)],de.prototype,"generatingGroupCode$",void 0),Pe([(0,p.l6)(T.q.getLoadingJoinDomains),Ee("design:type",g.c)],de.prototype,"loadingJoinDomains$",void 0),Pe([(0,p.l6)(T.q.getAddingJoinDomains),Ee("design:type",g.c)],de.prototype,"addingJoinDomains$",void 0),Pe([(0,p.l6)(T.q.getRemovingJoinDomains),Ee("design:type",g.c)],de.prototype,"removingJoinDomains$",void 0);let Ur=(()=>{var o;class n{constructor(i,s){this.dialogRef=i,this.data=s,this.ngUnsubscribe=new C.B,this.organization=s.organization}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleCancelClick(){this.closeDialog()}handleOrganizationUpdated(){this.closeDialog()}closeDialog(){this.dialogRef.close()}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(F.CP),e.rXU(F.Vh))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-team-manage-dialog"]],decls:4,vars:2,consts:[[1,"dialog"],["app-button","","buttonType","text","buttonTheme","light","type","button","title","Close",1,"dialog__close",3,"click"],["icon","times","size","lg"],[1,"dialog__team-create",3,"organizationUpdated","organization"]],template:function(i,s){1&i&&(e.j41(0,"div",0)(1,"button",1),e.bIt("click",function(){return s.handleCancelClick()}),e.nrm(2,"app-icon",2),e.k0s(),e.j41(3,"app-team-create",3),e.bIt("organizationUpdated",function(){return s.handleOrganizationUpdated()}),e.k0s()()),2&i&&(e.R7$(),e.BMQ("aria-label","Close"),e.R7$(2),e.Y8G("organization",s.organization))},dependencies:[$.Q,k.R,de],styles:[".dialog[_ngcontent-%COMP%]{position:relative;max-height:100%;padding:24px}.dialog__close[_ngcontent-%COMP%]{position:absolute;top:24px;right:24px}.dialog__team-create[_ngcontent-%COMP%]{max-height:90vh;display:flex}@media (max-width: 480px){.dialog[_ngcontent-%COMP%]{width:100vw}.dialog__team-create[_ngcontent-%COMP%]{max-height:100vh}}"],changeDetection:0}),n})();var Pr=l(3287),Er=l(37678),Dr=l(90699),Mr=l(27180),Q=function(o){return o.Members="members",o.PendingInvites="pending-invites",o.JoinRequests="join-requests",o}(Q||{});const Vn={label:"Role",fields:["role"],dataTest:"roleDescending",ascending:!1},zn={label:"Status",fields:["invitationStatus"],dataTest:"invitationStatusAscending",ascending:!0},De={label:"Name (A-Z)",fields:["name"],dataTest:"nameAscending",ascending:!0},pn={label:"Name (Z-A)",fields:["name"],dataTest:"nameDescending",ascending:!1},un={label:"Email (A-Z)",fields:["email"],dataTest:"emailAscending",ascending:!0},mn={label:"Email (Z-A)",fields:["email"],dataTest:"emailDescending",ascending:!1},Xn=[Vn,De,pn,un,mn],Ar=[zn,De,pn,un,mn],Gr=[De,pn,un,mn];var St=l(3188),$r=l(4951),wr=l(59369),Or=l(91443);const Br=["*",[["","input-after",""]]],Nr=["*","[input-after]"],Yr=o=>({"input-group--has-icon":o});function Vr(o,n){if(1&o&&e.nrm(0,"app-icon",4),2&o){const t=e.XpG();e.Y8G("icon",t.icon)}}let zr=(()=>{var o;class n{constructor(){this.icon=""}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-input-group"]],inputs:{icon:"icon"},ngContentSelectors:Nr,decls:6,vars:4,consts:[[1,"input-group",3,"ngClass"],["class","input-group__icon",3,"icon",4,"ngIf"],[1,"input-group__main"],[1,"input-group__after"],[1,"input-group__icon",3,"icon"]],template:function(i,s){1&i&&(e.NAR(Br),e.j41(0,"div",0),e.DNE(1,Vr,1,1,"app-icon",1),e.j41(2,"div",2),e.SdG(3),e.k0s(),e.j41(4,"div",3),e.SdG(5,1),e.k0s()()),2&i&&(e.Y8G("ngClass",e.eq3(2,Yr,s.icon)),e.R7$(),e.Y8G("ngIf",s.icon))},dependencies:[c.YU,c.bT,k.R],styles:[".input-group{display:flex;position:relative}.input-group__icon{display:flex;align-items:center;justify-content:center;position:absolute;z-index:1;top:0;left:0;height:100%;width:36px}.input-group__main{flex:1 1 100%}.input-group__after{position:absolute;top:0;bottom:0;right:0;display:flex;z-index:1}.input-group--has-icon input{padding-left:36px!important}\n"],encapsulation:2,changeDetection:0}),n})();var mt,It=l(59115),dn=l(65478),Z=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},ee=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const Xr=["selectedUsersActions"],Lr=["selectedInviteeActions"],Qr=["selectedJoinRequestsActions"],qr=["selectedUsersListActions"],Jr=["selectedInviteeListActions"],Wr=["selectedJoinRequestsListActions"],Hr=(o,n)=>({"team__tab--active":o,"team__tab--pointer":n});function Kr(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",25),e.nI1(1,"async"),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleManageTeamAccountClick())}),e.j41(2,"div",26),e.nrm(3,"app-icon",27),e.j41(4,"div",28),e.EFF(5,"Manage"),e.k0s()()()}if(2&o){const t=e.XpG(2);e.Y8G("disabled",e.bMT(1,1,t.isSubscriptionExpired$))}}function Zr(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",29),e.nI1(1,"async"),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleAddMemberClick())}),e.nrm(2,"app-icon",30),e.k0s()}if(2&o){const t=e.XpG(2);e.Y8G("disabled",e.bMT(1,1,t.isSubscriptionExpired$))}}function ec(o,n){if(1&o&&(e.j41(0,"div",22),e.DNE(1,Kr,6,3,"button",23)(2,Zr,3,3,"button",24),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.canManageTeam),e.R7$(),e.Y8G("ngIf",t.canInviteUsers)}}function tc(o,n){if(1&o&&(e.qex(0),e.EFF(1),e.bVm()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.userLimitMsg," ")}}function nc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",58),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleClearQuery())}),e.EFF(1," Clear "),e.k0s()}}function oc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",59),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.navigateTo(s.Sections.PendingInvites))}),e.EFF(1),e.k0s()}if(2&o){const t=e.XpG(2);e.AVh("team__tab--active",t.activeSection===t.Sections.PendingInvites),e.R7$(),e.SpI(" Pending Invites (",t.invitees.length,") ")}}function ic(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",60),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.navigateTo(s.Sections.JoinRequests))}),e.EFF(1),e.k0s()}if(2&o){const t=e.XpG(2);e.AVh("team__tab--active",t.activeSection===t.Sections.JoinRequests),e.R7$(),e.SpI(" Join Requests (",t.joinRequests.length,") ")}}function sc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",61),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.selectAllFilteredUsers())}),e.EFF(1," Select All "),e.k0s()}2&o&&e.Y8G("uppercase",!1)}function ac(o,n){if(1&o&&(e.j41(0,"button",62)(1,"span"),e.EFF(2),e.nrm(3,"app-icon",63),e.k0s()()),2&o){const t=e.XpG(2);e.Y8G("uppercase",!1)("matMenuTriggerFor",t.activeMenu),e.R7$(2),e.SpI(" ",t.selectedUsers.size," selected ")}}function rc(o,n){1&o&&e.nrm(0,"app-divider",64)}function cc(o,n){1&o&&e.eu8(0)}function lc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.exportUsersToCSV())}),e.EFF(1," Export to CSV "),e.k0s()}}function pc(o,n){if(1&o&&(e.qex(0),e.DNE(1,lc,2,0,"button",65),e.nI1(2,"async"),e.bVm()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",e.bMT(2,1,t.horizontalBreakpoint$)>t.horizontalBreakpoint.Medium)}}function uc(o,n){1&o&&e.eu8(0)}function mc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG(3);return e.Njj(s.exportUsersToCSV())}),e.EFF(1," Export to CSV "),e.k0s()}}function dc(o,n){if(1&o&&(e.qex(0),e.DNE(1,mc,2,0,"button",65),e.nI1(2,"async"),e.bVm()),2&o){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",e.bMT(2,1,t.horizontalBreakpoint$)>t.horizontalBreakpoint.Medium)}}function gc(o,n){1&o&&e.eu8(0)}function hc(o,n){1&o&&e.eu8(0)}function _c(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",69),e.bIt("click",function(){e.eBV(t);const s=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.handleUserActionsClick(s))}),e.nrm(1,"app-icon",70),e.k0s()}if(2&o){const t=e.XpG().$implicit,i=e.XpG(2);e.Y8G("matMenuTriggerFor",i.activeListMenu)("matMenuTriggerData",t)}}function fc(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",66),e.bIt("click",function(s){const a=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.handleUserClick(s,a))})("mouseenter",function(){const s=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.handleUserMouseEnter(s))})("mouseleave",function(){const s=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.handleUserMouseLeave(s))}),e.nrm(1,"app-team-user",67),e.DNE(2,_c,2,2,"button",68),e.nI1(3,"async"),e.k0s()}if(2&o){const t=n.$implicit,i=e.XpG(2);e.AVh("team__user--selected",t.selected),e.R7$(),e.Y8G("user",t)("theme",i.getUserTheme(t))("showNameUnknown","members"===i.activeSection)("showEmail",i.showEmail),e.R7$(),e.Y8G("ngIf",e.bMT(3,7,i.isAdmin$)||i.canInviteUsers&&"pending-invites"===i.activeSection)}}function bc(o,n){1&o&&e.nrm(0,"app-spinner",71)}function vc(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",31),e.nI1(1,"async"),e.j41(2,"div",32)(3,"app-input-group",33),e.nrm(4,"input",34),e.DNE(5,nc,2,0,"button",35),e.k0s()(),e.j41(6,"div",36),e.nrm(7,"app-user-notices",37),e.k0s(),e.j41(8,"div")(9,"div",38)(10,"div",39)(11,"button",40),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.canInviteUsers&&s.navigateTo(s.Sections.Members))}),e.EFF(12),e.k0s(),e.DNE(13,oc,2,3,"button",41)(14,ic,2,3,"button",42),e.k0s(),e.j41(15,"div",43)(16,"div",44),e.DNE(17,sc,2,1,"button",45),e.nI1(18,"async"),e.DNE(19,ac,4,3,"button",46),e.nI1(20,"async"),e.DNE(21,rc,1,0,"app-divider",47),e.nI1(22,"async"),e.nI1(23,"async"),e.j41(24,"mat-menu",null,6),e.DNE(26,cc,1,0,"ng-container",20),e.j41(27,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.transferSelectedUsersContent())}),e.EFF(28," Transfer Content "),e.k0s(),e.j41(29,"button",48),e.EFF(30,"Change Role"),e.k0s(),e.DNE(31,pc,3,3,"ng-container",49),e.nrm(32,"mat-divider"),e.j41(33,"button",50),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.removeSelectedUsers())}),e.EFF(34," Remove From Team "),e.k0s()(),e.j41(35,"mat-menu",null,7),e.DNE(37,uc,1,0,"ng-container",20),e.j41(38,"button",51),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.resendSelectedUsersInvites())}),e.EFF(39," Resend Invite "),e.k0s(),e.DNE(40,dc,3,3,"ng-container",49),e.k0s(),e.j41(41,"mat-menu",null,8),e.DNE(43,gc,1,0,"ng-container",20)(44,hc,1,0,"ng-container",20),e.k0s()(),e.j41(45,"div",52)(46,"app-sort",53),e.bIt("sortChange",function(s){e.eBV(t);const a=e.XpG();return e.Njj(a.handleSort(s))}),e.k0s()()()(),e.j41(47,"div",54)(48,"cdk-virtual-scroll-viewport",55),e.DNE(49,fc,4,9,"div",56),e.k0s()()(),e.DNE(50,bc,1,0,"app-spinner",57),e.nI1(51,"async"),e.k0s()}if(2&o){const t=e.XpG(),i=e.sdS(30),s=e.sdS(34),a=e.sdS(36);e.AVh("team--admin",e.bMT(1,29,t.isAdmin$)),e.Y8G("formGroup",t.form),e.R7$(5),e.Y8G("ngIf",t.filtering),e.R7$(6),e.Y8G("ngClass",e.l_i(41,Hr,t.activeSection===t.Sections.Members&&t.canInviteUsers,!t.canInviteUsers)),e.R7$(),e.SpI(" Members (",t.users.length,") "),e.R7$(),e.Y8G("ngIf",t.showPendingInvites),e.R7$(),e.Y8G("ngIf",t.showJoinRequests),e.R7$(3),e.Y8G("ngIf",(e.bMT(18,31,t.isAdmin$)||t.canInviteUsers&&t.activeSection===t.Sections.PendingInvites)&&0===t.selectedUsers.size),e.R7$(2),e.Y8G("ngIf",(e.bMT(20,33,t.isAdmin$)||t.canInviteUsers&&t.activeSection===t.Sections.PendingInvites)&&t.selectedUsers.size>0),e.R7$(2),e.Y8G("ngIf",(e.bMT(22,35,t.isAdmin$)||t.canInviteUsers&&t.activeSection===t.Sections.PendingInvites)&&e.bMT(23,37,t.horizontalBreakpoint$)>=t.horizontalBreakpoint.Large),e.R7$(5),e.Y8G("ngTemplateOutlet",s),e.R7$(3),e.Y8G("matMenuTriggerFor",i),e.R7$(2),e.Y8G("appFlagApplication",t.envApplication.All)("appFlagApplicationMode","exclude")("appFlagApplicationNative",t.nativePlatform.All),e.R7$(6),e.Y8G("ngTemplateOutlet",s),e.R7$(3),e.Y8G("appFlagApplication",t.envApplication.All)("appFlagApplicationMode","exclude")("appFlagApplicationNative",t.nativePlatform.All),e.R7$(3),e.Y8G("ngTemplateOutlet",s),e.R7$(),e.Y8G("ngTemplateOutlet",a),e.R7$(2),e.Y8G("sortLabel","Sort Team Members")("sortOptions",t.sortOptions)("sort",t.sort),e.R7$(2),e.Y8G("itemSize",48),e.R7$(),e.Y8G("cdkVirtualForOf",t.filteredUsersToDisplay)("cdkVirtualForTrackBy",t.trackTeamNode),e.R7$(),e.Y8G("ngIf",e.bMT(51,39,t.loadingUsers$))}}function Cc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG().email,a=e.XpG();return e.Njj(a.copyEmailClick(s))}),e.EFF(1," Copy Email "),e.k0s()}}function Tc(o,n){if(1&o&&e.DNE(0,Cc,2,0,"button",65),2&o){const t=n.email,i=e.XpG();e.Y8G("ngIf",i.showEmail&&t)}}function yc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG().email,a=e.XpG();return e.Njj(a.copyEmailClick(s))}),e.EFF(1," Copy Email "),e.k0s()}}function Rc(o,n){if(1&o&&e.DNE(0,yc,2,0,"button",65),2&o){const t=n.email,i=e.XpG();e.Y8G("ngIf",i.showEmail&&t)}}function kc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG().email,a=e.XpG();return e.Njj(a.copyEmailClick(s))}),e.EFF(1," Copy Email "),e.k0s()}}function Fc(o,n){if(1&o&&e.DNE(0,kc,2,0,"button",65),2&o){const t=n.email,i=e.XpG();e.Y8G("ngIf",i.showEmail&&t)}}function Sc(o,n){1&o&&e.eu8(0)}function Ic(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",72),e.bIt("click",function(){const s=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.setSelectedUsersRole(s))}),e.j41(1,"div",73)(2,"div",74),e.EFF(3),e.k0s(),e.j41(4,"div",75),e.EFF(5),e.k0s()()()}if(2&o){const t=n.$implicit;e.R7$(3),e.SpI(" ",t.role_display_name," "),e.R7$(2),e.SpI(" ",t.role_description," ")}}function jc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.deselectAllUsers())}),e.EFF(1,"Clear Selection"),e.k0s(),e.j41(2,"button",76),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.selectAllFilteredUsers())}),e.EFF(3," Select All "),e.k0s()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("disabled",t.allFilteredUsersSelected)}}function xc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.acceptSelectedUsersJoinRequest())}),e.EFF(1,"Approve Request"),e.k0s(),e.j41(2,"button",16),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.denySelectedUsersJoinRequest())}),e.EFF(3,"Deny Request"),e.k0s()}}class W{get filtering(){return""!==this.form.value.search}get showEmail(){return this.canInviteUsers&&"pending-invites"===this.activeSection||this.canManageTeam}constructor(n,t,i,s,a,r,u,v,R,E,te,q){this.store=n,this.actions=t,this.formBuilder=i,this.dialog=s,this.dialogs=a,this.usersService=r,this.organizationActionsService=u,this.clipboardService=v,this.changeDetectorRef=R,this.snackBar=E,this.activatedRoute=te,this.router=q,this.horizontalBreakpoint=se.m,this.sortOptions=Xn,this.sort=De,this.envApplication=Mr.c,this.nativePlatform=Dr.I,this.ngUnsubscribe=new C.B,this.users=[],this.selectedUsers=new Set,this.themeDarkUsers=new Set,this.invitees=[],this.joinRequests=[],this.usersToDisplay=[],this.filteredUsersToDisplay=[],this.userLimitMsg="",this.canManageTeam=!1,this.canAssignRoles=!1,this.canRemoveUsers=!1,this.canInviteUsers=!1,this.canViewUsers=!1,this.canManageJoinRequests=!1,this.Sections=Q,this.activeSection=Q.Members,this.pendingRequesterName=""}get showPendingInvites(){return this.canInviteUsers&&this.invitees.length>0}get showJoinRequests(){return this.canManageJoinRequests&&this.joinRequests.length>0}ngOnInit(){this.initForm(),this.initEventListers(),this.initPermissions(),this.initInviteListener(),this.initJoinRequestListeners()}ngAfterViewInit(){this.activeMenu=this.selectedUsersActionsMenu,this.activeListMenu=this.selectedUsersListActionsMenu,this.initQueryParamHandling()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initQueryParamHandling(){this.activatedRoute.queryParams.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.switchSection(i.section||Q.Members),this.changeDetectorRef.markForCheck()});const{join_request_key:n,action:t}=this.activatedRoute.snapshot.queryParams;n&&t&&this.organization$.pipe((0,D.p)(i=>!(0,_.isNil)(i)),(0,P.Z)(()=>this.usersService.getOrganizationJoinRequests({join_request_key:n})),(0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{if(0===i.join_request_count)this.snackBar.open("This request cannot be found and may have been canceled by the user.");else{const s=i.join_requests[0],a=this.store.selectSnapshot(T.q.getDefaultUserRole),r=this.JoinRequestToUserDisplay(s,a);switch(s.request_status){case St.s.Pending:this.manageJoinRequests([r],"accept"===t);break;case St.s.Accepted:this.snackBar.open(`${r.name}'s request to join your team has already been accepted.`);break;case St.s.Denied:this.snackBar.open(`${r.name}'s request to join your team has already been denied.`);break;case St.s.Expired:this.snackBar.open(`${r.name}'s request to join your team has expired.`)}}})}initForm(){this.form=this.formBuilder.group({search:[""]}),this.form.valueChanges.pipe((0,Pa.B)(125),(0,h.Q)(this.ngUnsubscribe)).subscribe(({search:n})=>{this.filteredUsersToDisplay=n?this.filterUsers(this.usersToDisplay,n,this.sort):this.usersToDisplay,this.changeDetectorRef.markForCheck()})}initEventListers(){this.organization$.pipe((0,D.p)(t=>!(0,_.isNil)(t)),(0,pe.F)((t,i)=>(0,_.isEqual)(t,i)),(0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{this.userLimitMsg="Unlimited"!==t.user_limit?`The maximum number of members in your team is ${t.user_limit}.`:"This team has unlimited members.",this.refreshUsers()});const n=()=>{this.synchSelectedUsers(),this.setUsersToDisplay(),this.changeDetectorRef.markForCheck()};this.users$.pipe((0,M.T)(t=>t.map(i=>this.usersService.createUserDisplayModel(i))),(0,pe.F)((t,i)=>(0,_.isEqual)(t,i)),(0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{this.users=t;const i=this.store.selectSnapshot(m.k.getUserProfile).id;this.currentUser=this.getDisplayUser(i),n()}),this.invites$.pipe((0,M.T)(t=>t.map(i=>this.usersService.createUserDisplayModel(i.invitee_user,i.invite_status))),(0,pe.F)((t,i)=>(0,_.isEqual)(t,i)),(0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{this.invitees=t,n()}),(0,le.z)([this.joinRequests$,this.defaultUserRole$]).pipe((0,M.T)(([t,i])=>t.map(s=>this.JoinRequestToUserDisplay(s,i))),(0,pe.F)((t,i)=>(0,_.isEqual)(t,i)),(0,D.p)((t,i)=>i>0||t.length>0),(0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{this.joinRequests=t,this.activeSection!==Q.JoinRequests||this.showJoinRequests?n():this.navigateTo(Q.Members)})}initPermissions(){(0,le.z)([this.users$,this.userRole$]).pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(([,n])=>{this.canManageTeam=Ue._m(n,me.y.EditTeamAccount),this.canAssignRoles=Ue._m(n,me.y.AssignRole),this.canRemoveUsers=Ue._m(n,me.y.RemoveUser),this.canInviteUsers=Ue._m(n,me.y.InviteUsers),this.canViewUsers=Ue._m(n,me.y.ViewUsers),this.canManageJoinRequests=this.checkCanManageJoinRequests(),this.changeDetectorRef.markForCheck()}),this.store.dispatch(new f.Xb)}initInviteListener(){this.actions.pipe((0,p.xi)(A.w9),(0,h.Q)(this.ngUnsubscribe)).subscribe(({responses:n})=>{const t=n.filter(a=>"success"===a.status);0===n.filter(a=>"error"===a.status).length&&(this.snackBar.open(`${this.printCount(t.length,"invite")} have been sent`),this.refreshUsers()),this.changeDetectorRef.markForCheck()}),this.actions.pipe((0,p.xi)(A.HZ),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.snackBar.open("There was an error sending the invites, please try again."),this.changeDetectorRef.markForCheck()})}initJoinRequestListeners(){this.actions.pipe((0,p.xi)(A.mb,A.mq),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{const i=n.count>1;this.snackBar.open(`${this.pendingRequesterName?`${this.pendingRequesterName}'s`:"The"} request${i?"s":""} to join your team ${i?"have":"has"} been ${n instanceof A.mb?"accepted":"denied"}.`),this.refreshUsers(),this.pendingRequesterName="",this.changeDetectorRef.markForCheck()}),this.actions.pipe((0,p.xi)(A.DY,A.Lh),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.snackBar.open(`There was an error ${n instanceof A.DY?"accepting":"denying"} ${this.pendingRequesterName?`${this.pendingRequesterName}'s`:"the"} request${n.count>1?"s":""}, please try again.`),this.pendingRequesterName="",this.changeDetectorRef.markForCheck()})}handleUserClick(n,t){this.store.selectSnapshot(m.k.isAdmin)&&(n.shiftKey?t.selected?this.deselectUser(t):this.selectUser(t):(this.deselectAllUsers(),this.selectUser(t)))}handleUserMouseEnter(n){this.themeDarkUsers.add(n)}handleUserMouseLeave(n){n.selected||this.themeDarkUsers.delete(n)}handleUserActionsClick(n){this.store.selectSnapshot(m.k.isAdmin)&&(this.deselectAllUsers(),this.selectUser(n))}handleManageTeamAccountClick(){const n=this.store.selectSnapshot(T.q.getOrganization);this.manageTeam(n)}handleAddMemberClick(){this.dialogs.openAddUserDialog()}handleClearQuery(){this.form.patchValue({search:""})}handleSort(n){this.sort=n,this.filteredUsersToDisplay=this.sortUsers(this.filteredUsersToDisplay,n),this.changeDetectorRef.markForCheck()}trackByUser(n,t){return t.id}filterUsers(n,t,i){const s=this.searchUsers(n,t);return[...this.sortUsers(s,i)]}searchUsers(n,t){if(!t)return n;const i=t.toLocaleLowerCase();return[...n.filter(a=>{const{name:r,email:u}=a;return[r,u].some(v=>(v||"").toLocaleLowerCase().includes(i))})]}sortUsers(n,t){const{ascending:i,fields:s}=t;return t.label===Vn.label?this.sortUsers(n,De).sort((u,v)=>(0,Ea.Ub)(u.role.role_name,v.role.role_name)*(i?1:-1)):[...(0,An.h5)(n,s,i)]}navigateTo(n){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{section:n}})}switchSection(n){switch(this.activeSection=n,n){case Q.Members:this.activeMenu=this.selectedUsersActionsMenu,this.activeListMenu=this.selectedUsersListActionsMenu,this.sortOptions=Xn,this.sort=De;break;case Q.PendingInvites:this.activeMenu=this.selectedInviteeActionsMenu,this.activeListMenu=this.selectedInviteeListActionsMenu,this.sortOptions=Ar,this.sort=zn;break;case Q.JoinRequests:this.activeMenu=this.selectedJoinRequestsActionsMenu,this.activeListMenu=this.selectedJoinRequestsListActionsMenu,this.sortOptions=Gr,this.sort=De}this.deselectAllUsers(),this.setUsersToDisplay()}setUsersToDisplay(){switch(this.activeSection){case Q.Members:this.usersToDisplay=this.users;break;case Q.PendingInvites:this.usersToDisplay=this.invitees;break;case Q.JoinRequests:this.usersToDisplay=this.joinRequests}this.filteredUsersToDisplay=this.filterUsers(this.usersToDisplay,this.form.value.search,this.sort)}copyEmailClick(n){this.clipboardService.copyToClipboard(n,"text").pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(t=>{this.snackBar.open(t?"Email copied successfully.":"Email not copied.")})}resendSelectedUsersInvites(){const{eid:n}=this.store.selectSnapshot(T.q.getOrganization),i=Array.from(this.selectedUsers).map(s=>({user_email:s.email,role_id:s.role.role_id}));this.store.dispatch(new A.h2(n,i))}transferSelectedUsersContent(){const n=this.store.selectSnapshot(T.q.getOrganization),t=Array.from(this.selectedUsers);this.organizationActionsService.transferUserContent(n,t).pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.handleUserTransferResponse(i),i&&(this.deselectAllUsers(),this.changeDetectorRef.markForCheck())})}setSelectedUsersRole(n){const t=this.store.selectSnapshot(T.q.getOrganization),i=Array.from(this.selectedUsers),s=(0,_.remove)(i,r=>r.id===this.currentUser.id);this.organizationActionsService.setUserRole(t,i,s[0]?s[0].email:"",n).pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(r=>{this.handleRoleChangeResponse(r),r.success&&this.refreshUsers()})}removeSelectedUsers(){const n=this.store.selectSnapshot(T.q.getOrganization),t=Array.from(this.selectedUsers),i=(0,_.remove)(t,a=>a.id===this.currentUser.id);this.organizationActionsService.removeUser(n,t,i[0]?i[0].email:"").pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(a=>{this.handleUserRemoveResponse(a),a.success&&this.refreshUsers()})}trackTeamNode(n,t){return t.id}selectAllFilteredUsers(){this.filteredUsersToDisplay.forEach(this.selectUser,this)}deselectAllUsers(){this.selectedUsers.forEach(this.deselectUser,this)}get allFilteredUsersSelected(){return this.filteredUsersToDisplay.length===this.selectedUsers.size}isCurrentUser(n){const t=this.store.selectSnapshot(m.k.getUserProfile).id;return n.id===t}getUserTheme(n){return this.themeDarkUsers.has(n)?"dark":"light"}exportUsersToCSV(){if(this.activeSection===Q.JoinRequests)return;const n=Array.from(this.selectedUsers).map(i=>({email:i.email,name:i.name,role:i.role.role_display_name,invitationStatus:i.invitationStatus})),t=[{field:"name",label:"Name"},{field:"email",label:"Email"},{field:"role",label:"Role"}];this.activeSection===Q.PendingInvites&&t.push({field:"invitationStatus",label:"Invitation Status"}),(0,Pr.H)(n,t).subscribe(i=>{const s=(new Date).toISOString().split("T")[0],a=this.activeSection===Q.Members?`biodigital-members-${s}.csv`:`biodigital-invitations-${s}.csv`,r=new Blob([i],{type:"text/csv;charset=utf-8"});(0,Er.saveAs)(r,a)})}acceptSelectedUsersJoinRequest(){this.manageJoinRequests(Array.from(this.selectedUsers),!0)}denySelectedUsersJoinRequest(){this.manageJoinRequests(Array.from(this.selectedUsers),!1)}manageJoinRequests(n,t){this.dialogs.openTeamJoinDialog(n,t).afterClosed().subscribe(i=>{i&&(1===n.length&&(this.pendingRequesterName=n[0].name),this.store.dispatch(t?new A.$k(i):new A.H7(i)))})}selectUser(n){n.selected=!0,this.selectedUsers.add(n),this.themeDarkUsers.add(n)}deselectUser(n){n.selected=!1,this.selectedUsers.delete(n),this.themeDarkUsers.delete(n)}synchSelectedUsers(){const n=new Set(this.users.map(i=>i.id)),t=Array.from(this.selectedUsers).filter(i=>n.has(i.id)).map(i=>i.id);this.deselectAllUsers(),t.forEach(i=>{const s=this.getDisplayUser(i);this.selectUser(s)})}refreshUsers(){const n=this.store.selectSnapshot(T.q.getOrganization);this.store.dispatch(new A.iW(n.id)),this.store.dispatch(new A.Kl(n.id)),this.checkCanManageJoinRequests()&&this.store.dispatch(new A.Qi)}checkCanManageJoinRequests(){return Ue._m(this.store.selectSnapshot(m.k.getUserRole),me.y.ManageJoinRequests)&&this.store.selectSnapshot(T.q.isValidPaidSubscription)}manageTeam(n){this.dialog.open(Ur,{id:Rt.t.AddTeamModelDialog,panelClass:"bg-dialog-responsive",disableClose:!1,data:{organization:n},width:"640px"})}handleRoleChangeResponse(n){const t=this.getModifiedUserCount();if(n.success){const s=this.getRole(n.targetRoleId).role_display_name;this.snackBar.open(`The role of ${this.printCount(t,"user")} has been updated to ${s}.`)}else this.snackBar.open(`The role of ${this.printCount(t,"user")} was not updated.`)}handleUserRemoveResponse(n){const t=this.getModifiedUserCount(),i=1===t?"has":"have";if(n.success)if("number"==typeof n.targetUserId){const s=this.getDisplayUser(n.targetUserId),a=s.name||s.email;this.snackBar.open(`${this.printCount(t,"user")} ${i} been removed from the team and their content transferred to ${a}.`)}else this.snackBar.open(`${this.printCount(t,"user")} ${i} been removed from the team and their content deleted.`);else this.snackBar.open(`${this.printCount(t,"user")} ${i} not been removed.`)}handleUserTransferResponse(n){const t=this.selectedUsers.size,i=1===t?"has":"have";if(n){const s=this.getDisplayUser(n[0].targetUserId),a=s.name||s.email;this.snackBar.open(`The content of ${this.printCount(t,"user")} ${i} been transferred to ${a}.`)}else this.snackBar.open(`The content of ${this.printCount(t,"user")} was not transferred`)}getModifiedUserCount(){return[...this.selectedUsers].filter(n=>!this.isCurrentUser(n)).length}getDisplayUser(n){return this.users.find(t=>t.id===n)}getRole(n){return this.store.selectSnapshot(m.k.getUserRoles).find(t=>t.role_id===n)}JoinRequestToUserDisplay(n,t){const i={...n.request_user,user_role:t,developer_account:!1,developer_account_active:!1,developer_has_apps:!1};return this.usersService.createUserDisplayModel(i,void 0,n.join_request_key)}printCount(n,t){return`${n} ${1===n?t:t+"s"}`}}(mt=W).\u0275fac=function(n){return new(n||mt)(e.rXU(p.il),e.rXU(p.En),e.rXU(d.ze),e.rXU(F.bZ),e.rXU(K.o),e.rXU(Zt.g),e.rXU(Pn),e.rXU($r.W),e.rXU(e.gRc),e.rXU(ne.UG),e.rXU(U.nX),e.rXU(U.Ix))},mt.\u0275cmp=e.VBU({type:mt,selectors:[["app-team-manage"]],viewQuery:function(n,t){if(1&n&&(e.GBs(Xr,5),e.GBs(Lr,5),e.GBs(Qr,5),e.GBs(qr,5),e.GBs(Jr,5),e.GBs(Wr,5)),2&n){let i;e.mGM(i=e.lsd())&&(t.selectedUsersActionsMenu=i.first),e.mGM(i=e.lsd())&&(t.selectedInviteeActionsMenu=i.first),e.mGM(i=e.lsd())&&(t.selectedJoinRequestsActionsMenu=i.first),e.mGM(i=e.lsd())&&(t.selectedUsersListActionsMenu=i.first),e.mGM(i=e.lsd())&&(t.selectedInviteeListActionsMenu=i.first),e.mGM(i=e.lsd())&&(t.selectedJoinRequestsListActionsMenu=i.first)}},decls:37,vars:11,consts:[["selectedUsersListActions","matMenu"],["selectedInviteeListActions","matMenu"],["selectedJoinRequestsListActions","matMenu"],["userRolesMenu","matMenu"],["selectionActions",""],["joinRequestsActions",""],["selectedUsersActions","matMenu"],["selectedInviteeActions","matMenu"],["selectedJoinRequestsActions","matMenu"],["label","Team"],["panel-view-actions","",4,"ngIf"],[1,"mb-8","text-sm"],[1,"font-bold"],[4,"ngIf"],["class","team",3,"formGroup","team--admin",4,"ngIf"],["matMenuContent",""],["mat-menu-item","",3,"click"],["mat-menu-item","","data-test","userRoleMenuButon",3,"matMenuTriggerFor"],["mat-menu-item","","data-test","userLeaveTeamButon",1,"text-red-700",3,"click"],["mat-menu-item","","data-test","resendUserInvite",3,"click"],[4,"ngTemplateOutlet"],["mat-menu-item","","data-test","userRoleMenuItem","style","height: auto",3,"click",4,"ngFor","ngForOf"],["panel-view-actions",""],["type","button","class","mr-2","app-button","","buttonType","outline","buttonTheme","light","data-test","teamManageButton",3,"disabled","click",4,"ngIf"],["type","button","app-button","","buttonType","outline","buttonTheme","light","buttonShape","square","data-test","teamInviteMembersButton",3,"disabled","click",4,"ngIf"],["type","button","app-button","","buttonType","outline","buttonTheme","light","data-test","teamManageButton",1,"mr-2",3,"click","disabled"],[1,"flex","flex-row"],["icon","cog"],[1,"ml-2"],["type","button","app-button","","buttonType","outline","buttonTheme","light","buttonShape","square","data-test","teamInviteMembersButton",3,"click","disabled"],["icon","user-plus"],[1,"team",3,"formGroup"],[1,"mb-3"],["icon","search"],["type","text","placeholder","Search...","formControlName","search",1,"input"],["type","button","buttonSize","xs","buttonType","default","app-button","","input-after","","buttonTheme","light","class","mr-2",3,"click",4,"ngIf"],[1,"team__user-notices"],["noticeType","content_ownership_transfer"],[1,"team__header"],[1,"team__tabs"],[1,"text-xs","font-semibold","team__tab",3,"click","ngClass"],["class","text-xs font-semibold team__tab","data-test","desktopPendingInvites",3,"team__tab--active","click",4,"ngIf"],["class","text-xs font-semibold team__tab",3,"team__tab--active","click",4,"ngIf"],[1,"team__selection"],[1,"flex","items-center"],["app-button","","buttonTheme","light","buttonSize","sm","data-test","selectAllUsersButton",3,"uppercase","click",4,"ngIf"],["app-button","","buttonTheme","light","buttonSize","sm","data-test","selectedUsersActionsButton",3,"uppercase","matMenuTriggerFor",4,"ngIf"],["class","mx-1",4,"ngIf"],["mat-menu-item","",3,"matMenuTriggerFor"],[4,"appFlagApplication","appFlagApplicationMode","appFlagApplicationNative"],["mat-menu-item","",1,"text-red-700",3,"click"],["mat-menu-item","","data-test","resendSelectedUserInvites",3,"click"],["data-test","teamSort"],[3,"sortChange","sortLabel","sortOptions","sort"],[1,"py-2","pl-2"],[1,"team__users",3,"itemSize"],["class","flex flex-row items-center team__user align-center","data-test","teamMember",3,"team__user--selected","click","mouseenter","mouseleave",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["size","huge",4,"ngIf"],["type","button","buttonSize","xs","buttonType","default","app-button","","input-after","","buttonTheme","light",1,"mr-2",3,"click"],["data-test","desktopPendingInvites",1,"text-xs","font-semibold","team__tab",3,"click"],[1,"text-xs","font-semibold","team__tab",3,"click"],["app-button","","buttonTheme","light","buttonSize","sm","data-test","selectAllUsersButton",3,"click","uppercase"],["app-button","","buttonTheme","light","buttonSize","sm","data-test","selectedUsersActionsButton",3,"uppercase","matMenuTriggerFor"],["icon","caret-down",1,"ml-1"],[1,"mx-1"],["mat-menu-item","",3,"click",4,"ngIf"],["data-test","teamMember",1,"flex","flex-row","items-center","team__user","align-center",3,"click","mouseenter","mouseleave"],[1,"flex","mr-2","grow",3,"user","theme","showNameUnknown","showEmail"],["app-button","","appEventFence","","buttonTheme","light","data-test","userActionsMenuButon",3,"matMenuTriggerFor","matMenuTriggerData","click",4,"ngIf"],["app-button","","appEventFence","","buttonTheme","light","data-test","userActionsMenuButon",3,"click","matMenuTriggerFor","matMenuTriggerData"],["icon","ellipsis-v"],["size","huge"],["mat-menu-item","","data-test","userRoleMenuItem",2,"height","auto",3,"click"],[1,"team__role-option"],["data-test","userRoleName",1,"text-xs","team__role-option-name"],["data-test","userRoleDescription",1,"mt-1","text-xs","team__role-option-description"],["mat-menu-item","",3,"click","disabled"]],template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"app-account-panel",9),e.DNE(1,ec,3,2,"div",10),e.j41(2,"div",11),e.EFF(3," You are in the "),e.j41(4,"em",12),e.EFF(5),e.nI1(6,"async"),e.k0s(),e.EFF(7," team. "),e.DNE(8,tc,2,1,"ng-container",13),e.k0s(),e.DNE(9,vc,52,44,"div",14),e.k0s(),e.j41(10,"mat-menu",null,0),e.DNE(12,Tc,1,1,"ng-template",15),e.j41(13,"button",16),e.bIt("click",function(){return e.eBV(i),e.Njj(t.transferSelectedUsersContent())}),e.EFF(14,"Transfer Content"),e.k0s(),e.j41(15,"button",17),e.EFF(16," Change Role "),e.k0s(),e.nrm(17,"mat-divider"),e.j41(18,"button",18),e.bIt("click",function(){return e.eBV(i),e.Njj(t.removeSelectedUsers())}),e.EFF(19," Remove From Team "),e.k0s()(),e.j41(20,"mat-menu",null,1),e.DNE(22,Rc,1,1,"ng-template",15),e.j41(23,"button",19),e.bIt("click",function(){return e.eBV(i),e.Njj(t.resendSelectedUsersInvites())}),e.EFF(24," Resend Invite "),e.k0s()(),e.j41(25,"mat-menu",null,2),e.DNE(27,Fc,1,1,"ng-template",15)(28,Sc,1,0,"ng-container",20),e.k0s(),e.j41(29,"mat-menu",null,3),e.DNE(31,Ic,6,2,"button",21),e.nI1(32,"async"),e.k0s(),e.DNE(33,jc,4,1,"ng-template",null,4,e.C5r)(35,xc,4,0,"ng-template",null,5,e.C5r)}if(2&n){let i;const s=e.sdS(30),a=e.sdS(36);e.R7$(),e.Y8G("ngIf",t.canManageTeam||t.canInviteUsers),e.R7$(4),e.JRh(null==(i=e.bMT(6,7,t.organization$))?null:i.name),e.R7$(3),e.Y8G("ngIf",t.canViewUsers),e.R7$(),e.Y8G("ngIf",t.canViewUsers),e.R7$(6),e.Y8G("matMenuTriggerFor",s),e.R7$(13),e.Y8G("ngTemplateOutlet",a),e.R7$(3),e.Y8G("ngForOf",e.bMT(32,9,t.roles$))}},dependencies:[c.YU,c.Sq,c.bT,c.T3,d.me,d.BC,d.cb,d.j4,d.JD,$.Q,Ne.L,wr.Y,k.R,Te.tI,Gn.K,Or.h,zr,yt.o,Qt,It.kk,It.fb,It.z8,It.Cp,ce.q,dn.yg,dn.E$,dn.d6,z,c.Jj],styles:[".team__user-notices[_ngcontent-%COMP%]{overflow:auto;max-height:192px}.team__users[_ngcontent-%COMP%]{height:calc(100vh - 380px)}.team__user[_ngcontent-%COMP%]{margin:4px 0;padding:8px;border-radius:4px;-webkit-user-select:none;user-select:none}.team__user[_ngcontent-%COMP%]:hover, .team__user[_ngcontent-%COMP%]:focus{background-color:#eaeff5}.team__user--selected[_ngcontent-%COMP%]{background-color:#d6ecff}.team__user--selected[_ngcontent-%COMP%]:hover, .team__user--selected[_ngcontent-%COMP%]:focus{background-color:#add6ff}.team--admin[_ngcontent-%COMP%]   .team__user[_ngcontent-%COMP%]{cursor:pointer}.team--admin[_ngcontent-%COMP%]   .team__user--current[_ngcontent-%COMP%]{cursor:initial}.team__role-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:auto;line-height:normal;max-width:240px;white-space:normal;padding:8px 0}.team__role-option-name[_ngcontent-%COMP%]{color:#131c2a}.team__role-option-description[_ngcontent-%COMP%]{color:#374a68}.team__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-bottom:solid #eaeff5;border-width:1px}.team__selection[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.team__tab[_ngcontent-%COMP%]{background:none;border:none;padding:10px 4px;cursor:pointer;color:#374a68}.team__tab[_ngcontent-%COMP%]:not(:last-child){margin-right:12px}.team__tab--active[_ngcontent-%COMP%]{border-bottom:solid #2d72dc;border-width:3px;color:#131c2a}.team__tab--pointer[_ngcontent-%COMP%]{cursor:default}@media (max-width: 959px){.team__header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.team__selection[_ngcontent-%COMP%]{padding-top:16px;width:100%}}"],changeDetection:0}),Z([(0,p.l6)(T.q.getOrganization),ee("design:type",g.c)],W.prototype,"organization$",void 0),Z([(0,p.l6)(T.q.isSubscriptionExpired),ee("design:type",g.c)],W.prototype,"isSubscriptionExpired$",void 0),Z([(0,p.l6)(he.e.getUsers),ee("design:type",g.c)],W.prototype,"users$",void 0),Z([(0,p.l6)(he.e.getInvites),ee("design:type",g.c)],W.prototype,"invites$",void 0),Z([(0,p.l6)(he.e.getUsersLoading),ee("design:type",g.c)],W.prototype,"loadingUsers$",void 0),Z([(0,p.l6)(m.k.getUserProfile),ee("design:type",g.c)],W.prototype,"userProfile$",void 0),Z([(0,p.l6)(m.k.getUserRole),ee("design:type",g.c)],W.prototype,"userRole$",void 0),Z([(0,p.l6)(m.k.getUserRoles),ee("design:type",g.c)],W.prototype,"roles$",void 0),Z([(0,p.l6)(m.k.isAdmin),ee("design:type",g.c)],W.prototype,"isAdmin$",void 0),Z([(0,p.l6)(ae.V.getHorizontalBreakpoint),ee("design:type",g.c)],W.prototype,"horizontalBreakpoint$",void 0),Z([(0,p.l6)(he.e.getPendingOrganizationJoinRequests),ee("design:type",g.c)],W.prototype,"joinRequests$",void 0),Z([(0,p.l6)(T.q.getDefaultUserRole),ee("design:type",g.c)],W.prototype,"defaultUserRole$",void 0);var Uc=l(58686);let Pc=(()=>{var o;class n{constructor(){}ngOnInit(){}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-team-premium-user"]],decls:6,vars:1,consts:[["label","Team",1,"team"],[1,"team__features"],[1,"mt-4","flex","flex-col","items-center"],["type","button","appSupportLink","","buttonTheme","light","app-button","","buttonType","primary",3,"uppercase"]],template:function(i,s){1&i&&(e.j41(0,"app-account-panel",0)(1,"div",1),e.nrm(2,"app-team-features"),e.k0s(),e.j41(3,"div",2)(4,"button",3),e.EFF(5," Contact Us "),e.k0s()()()),2&i&&(e.R7$(4),e.Y8G("uppercase",!1))},dependencies:[$.Q,Uc.R,Bn.W,z],styles:[".team__features[_ngcontent-%COMP%]{padding:32px}@media (max-width: 480px){.team__features[_ngcontent-%COMP%]{padding:16px}}"],changeDetection:0}),n})();var dt,Ln=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},Qn=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function Ec(o,n){1&o&&e.nrm(0,"app-team-manage")}function Dc(o,n){1&o&&e.nrm(0,"app-team-premium-user")}function Mc(o,n){1&o&&e.nrm(0,"app-team-free-user")}class jt{constructor(){this.userType=Vt.I}ngOnInit(){}}(dt=jt).\u0275fac=function(n){return new(n||dt)},dt.\u0275cmp=e.VBU({type:dt,selectors:[["app-team-page"]],decls:5,vars:6,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(n,t){1&n&&(e.qex(0,0),e.nI1(1,"async"),e.DNE(2,Ec,1,0,"app-team-manage",1)(3,Dc,1,0,"app-team-premium-user",1)(4,Mc,1,0,"app-team-free-user",1),e.bVm()),2&n&&(e.Y8G("ngSwitch",e.bMT(1,4,t.userType$)),e.R7$(2),e.Y8G("ngSwitchCase",t.userType.Team),e.R7$(),e.Y8G("ngSwitchCase",t.userType.Premium),e.R7$(),e.Y8G("ngSwitchCase",t.userType.Free))},dependencies:[c.ux,c.e1,pt,W,Pc,c.Jj],changeDetection:0}),Ln([(0,p.l6)(m.k.getUserType),Qn("design:type",g.c)],jt.prototype,"userType$",void 0),Ln([(0,p.l6)(T.q.getOrganization),Qn("design:type",g.c)],jt.prototype,"organization$",void 0);var Ac=l(40621),Gc=l(49206);const $c=["optionEl"],wc=["*"];function Oc(o,n){if(1&o&&e.nrm(0,"app-icon",14),2&o){const t=e.XpG();e.Y8G("icon",t.icon)}}function Bc(o,n){if(1&o&&(e.j41(0,"div",15),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.tag," ")}}function Nc(o,n){if(1&o&&(e.j41(0,"p",16),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.description," ")}}function Yc(o,n){if(1&o&&(e.j41(0,"div",17),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.tag," ")}}function Vc(o,n){if(1&o&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&o){const t=n.$implicit;e.R7$(),e.SpI(" ",t," ")}}function zc(o,n){if(1&o&&(e.j41(0,"div",18)(1,"p"),e.EFF(2),e.k0s(),e.j41(3,"ul",19),e.DNE(4,Vc,2,1,"li",20),e.k0s()()),2&o){const t=e.XpG();e.R7$(2),e.JRh(t.content.title),e.R7$(2),e.Y8G("ngForOf",t.content.content)}}let qn=(()=>{var o;class n extends Gc.Z{constructor(){super(...arguments),this.compact=!0,this.responseSelected=new e.bkB}ngOnInit(){}handleResponseClicked(){this.responseSelected.emit()}focus(i){this.optionEl&&this.optionEl.nativeElement.focus()}}return(o=n).\u0275fac=(()=>{let t;return function(s){return(t||(t=e.xGo(o)))(s||o)}})(),o.\u0275cmp=e.VBU({type:o,selectors:[["app-account-question-response"]],viewQuery:function(i,s){if(1&i&&e.GBs($c,7),2&i){let a;e.mGM(a=e.lsd())&&(s.optionEl=a.first)}},inputs:{title:"title",description:"description",tag:"tag",icon:"icon",content:"content",selected:"selected",compact:"compact",value:"value",responsive:"responsive"},outputs:{responseSelected:"responseSelected"},features:[e.Jv_([{provide:d.kq,useExisting:(0,e.Rfq)(()=>o),multi:!0}]),e.Vt3],ngContentSelectors:wc,decls:17,vars:16,consts:[["optionEl",""],["data-test","questionResponseLabel",1,"response","flex","flex-col",3,"pointerup"],["type","radio",1,"sr-only",3,"formControl","value"],[1,"flex","flex-row","justify-between","items-center"],["aria-hidden","true",1,"flex","flex-col","flex-auto"],[1,"response__title","flex","flex-row"],["class","response__title-icon mr-2",3,"icon",4,"ngIf"],[1,"flex-auto"],["class","response__tag mt-2",4,"ngIf"],["class","response__description mt-2",4,"ngIf"],["aria-hidden","true",1,"flex","flex-row","items-center"],["class","response__tag",4,"ngIf"],[1,"response__icon","ml-3",3,"icon"],["class","response__content ml-8 mt-1","aria-hidden","","data-test","questionResponseContent",4,"ngIf"],[1,"response__title-icon","mr-2",3,"icon"],[1,"response__tag","mt-2"],[1,"response__description","mt-2"],[1,"response__tag"],["aria-hidden","","data-test","questionResponseContent",1,"response__content","ml-8","mt-1"],[1,"response__content-list"],[4,"ngFor","ngForOf"]],template:function(i,s){if(1&i){const a=e.RV6();e.NAR(),e.j41(0,"label",1,0),e.bIt("pointerup",function(){return e.eBV(a),e.Njj(s.handleResponseClicked())}),e.nrm(2,"input",2),e.j41(3,"div",3)(4,"div",4)(5,"div",5),e.DNE(6,Oc,1,1,"app-icon",6),e.j41(7,"span",7),e.EFF(8),e.k0s()(),e.DNE(9,Bc,2,1,"div",8)(10,Nc,2,1,"p",9),e.j41(11,"div"),e.SdG(12),e.k0s()(),e.j41(13,"div",10),e.DNE(14,Yc,2,1,"div",11),e.nrm(15,"app-icon",12),e.k0s()(),e.DNE(16,zc,5,2,"div",13),e.k0s()}2&i&&(e.AVh("response--selected",s.selected)("response--compact",s.compact),e.R7$(2),e.Y8G("formControl",s.control)("value",s.value),e.BMQ("aria-label",s.title),e.R7$(4),e.Y8G("ngIf",s.icon),e.R7$(2),e.JRh(s.title),e.R7$(),e.Y8G("ngIf",s.tag&&s.responsive),e.R7$(),e.Y8G("ngIf",s.description),e.R7$(4),e.Y8G("ngIf",s.tag&&!s.responsive),e.R7$(),e.xc7("visibility",s.selected?"visible":"hidden"),e.Y8G("icon",s.selected?"check-circle":"times-circle"),e.R7$(),e.Y8G("ngIf",s.selected&&s.content))},dependencies:[c.Sq,c.bT,d.me,d.Fm,d.BC,d.l_,k.R],styles:[".response[_ngcontent-%COMP%]{padding:20px 24px;border:1px solid #96a8c0;box-sizing:border-box;border-radius:4px;color:#374a68;cursor:pointer}.response__title[_ngcontent-%COMP%]{color:#1c2a3f;font-weight:600;font-size:1rem;line-height:1.5rem}.response__title-icon[_ngcontent-%COMP%]{flex:0 0 24px}.response__description[_ngcontent-%COMP%]{color:#374a68;font-size:.875rem;line-height:1.25rem}.response__tag[_ngcontent-%COMP%]{color:#61779e;font-size:.75rem;line-height:1rem;text-transform:uppercase;font-weight:600;white-space:nowrap}.response__icon[_ngcontent-%COMP%]{flex:0 0 48px;color:#2d72dc;white-space:nowrap;font-size:1.25rem;line-height:1.75rem}.response__content[_ngcontent-%COMP%]{color:#283853;font-size:.875rem;line-height:1.25rem}.response__content-list[_ngcontent-%COMP%]{list-style-type:disc;margin-left:24px}.response[_ngcontent-%COMP%]:not(.response--selected):hover, .response[_ngcontent-%COMP%]:not(.response--selected):focus{border-color:#61779e;color:#1c2a3f;background-color:#f9fafd}.response--selected[_ngcontent-%COMP%]{border-color:#2d72dc;box-shadow:0 0 0 1px #2d72dc}.response--selected[_ngcontent-%COMP%]   .response__tag[_ngcontent-%COMP%]{color:#2d72dc}.response--compact[_ngcontent-%COMP%]   .response__title[_ngcontent-%COMP%]{font-weight:400;font-size:.875rem;line-height:1.25rem}.response[_ngcontent-%COMP%]:focus-within{outline:#2d72dc solid 2px!important}"],changeDetection:0}),n})();var Xc=l(18617),Lc=l(37737);function Qc(o,n){if(1&o&&(e.j41(0,"p",9),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.question.hint," ")}}function qc(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",10)(1,"app-account-question-response",11),e.bIt("responseSelected",function(){const s=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.handleResponseSelected(s))}),e.k0s()()}if(2&o){const t=n.$implicit,i=n.index,s=e.XpG(2);e.AVh("question__item--first",0===i),e.BMQ("aria-label",t.value)("data-test-value",t.value),e.R7$(),e.Y8G("title",t.label||t.value)("description",t.hint)("tag",t.tag)("icon",t.icon)("content",t.content)("compact",!t.content)("selected",s.isResponseSelected(t))("value",t)("responsive",s.responsive)}}function Jc(o,n){if(1&o&&e.nrm(0,"input",14),2&o){const t=e.XpG(3);e.BMQ("placeholder",t.question.label||"")}}function Wc(o,n){if(1&o){const t=e.RV6();e.j41(0,"div",10)(1,"app-account-question-response",12),e.bIt("responseSelected",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleOtherResponseSelected())}),e.DNE(2,Jc,1,1,"input",13),e.k0s()()}if(2&o){const t=e.XpG(2);e.BMQ("aria-label","Other")("data-test-value","Other"),e.R7$(),e.Y8G("title","Other")("selected",t.isOtherSelected)("value",t.getOtherResponse())("responsive",t.responsive),e.R7$(),e.Y8G("ngIf",t.isOtherSelected)}}function Hc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.handleContinueClick())}),e.EFF(1),e.k0s()}if(2&o){const t=e.XpG(2);e.Y8G("buttonType",t.isAdvanceEnabled?"primary":"flat")("uppercase",!1)("disabled",!t.isAdvanceEnabled),e.BMQ("aria-disabled",!t.isAdvanceEnabled),e.R7$(),e.SpI(" ",t.advanceLabel," ")}}function Kc(o,n){if(1&o&&(e.j41(0,"fieldset",1)(1,"legend",2),e.EFF(2),e.k0s(),e.DNE(3,Qc,2,1,"p",3),e.j41(4,"div",4),e.DNE(5,qc,2,13,"div",5)(6,Wc,3,7,"div",6),e.k0s(),e.j41(7,"div",7),e.DNE(8,Hc,2,5,"button",8),e.k0s()()),2&o){const t=e.XpG();e.Y8G("formGroup",t.form),e.BMQ("data-test-value",t.question.account_setting),e.R7$(2),e.SpI(" ",t.question.label," "),e.R7$(),e.Y8G("ngIf",t.question.hint),e.R7$(2),e.Y8G("ngForOf",t.question.responses),e.R7$(),e.Y8G("ngIf",t.other),e.R7$(2),e.Y8G("ngIf",t.selectedResponse)}}let Jn=(()=>{var o;class n{get selectedResponse(){return this._selectedResponse}set selectedResponse(i){this._selectedResponse=i,this.changeRef.markForCheck()}get isOtherSelected(){return 0===this.question.responses.length||this.isResponseSelected({value:"Other"})}get isOtherValid(){const{description:i}=this.form.value;return""!==i}get isAdvanceEnabled(){return!!this.advanceEnabled&&(this.isOtherSelected?this.isOtherValid:!(0,_.isNil)(this.selectedResponse))}get shown(){return this._shown}set shown(i){this._shown=i,i&&setTimeout(()=>this.focus()),this.changeRef.markForCheck()}get responseSize(){return(this.question?.responses?.length??0)+(this.other?1:0)}constructor(i,s){this.formBuilder=i,this.changeRef=s,this.responseSelected=new e.bkB,this.advanceSelected=new e.bkB,this.other=!0,this.advanceLabel="Continue",this.advanceEnabled=!0,this._shown=!1,this.isLast=!1,this.ngUnsubscribe=new C.B,this.initForm()}ngOnInit(){this.initFormListener()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.keyManager=new Xc.Bu(this.responsesList)}focus(i){if(this.keyManager){let s=0;this.isOtherSelected?s=this.responseSize-1:this.question?.responses&&(s=this.question.responses.findIndex(r=>this.isResponseSelected(r)));const a=Math.max(s,0);this.keyManager.setActiveItem(a)}}initForm(){this.form=this.formBuilder.group({response:[null,d.k0.required],description:[""]})}initFormListener(){this.form.valueChanges.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(i=>{this.selectedResponse=i.response,this.changeRef.markForCheck()}),this.form.get("description").valueChanges.pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.selectedResponse=this.getOtherResponse()})}clearSelection(){this.selectedResponse=null}handleResponseSelected(i){this.selectedResponse=i,this.isLast||this.responseSelected.next(this.selectedResponse)}handleOtherResponseSelected(){this.selectedResponse=this.getOtherResponse()}handleContinueClick(){this.advanceSelected.next(this.selectedResponse)}isResponseSelected(i){return this.selectedResponse&&this.selectedResponse.value===i.value}getOtherResponse(){const{description:i}=this.form.value;return{value:"Other",description:i}}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(d.ze),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-account-question"]],viewQuery:function(i,s){if(1&i&&e.GBs(qn,5),2&i){let a;e.mGM(a=e.lsd())&&(s.responsesList=a)}},inputs:{question:"question",other:"other",advanceLabel:"advanceLabel",advanceEnabled:"advanceEnabled",selectedResponse:"selectedResponse",shown:"shown",isLast:"isLast",responsive:"responsive"},outputs:{responseSelected:"responseSelected",advanceSelected:"advanceSelected"},decls:1,vars:1,consts:[["class","question flex flex-col","data-test","question",3,"formGroup",4,"ngIf"],["data-test","question",1,"question","flex","flex-col",3,"formGroup"],["data-test","questionLabel",1,"question__label","font-semibold"],["class","question__hint mt-3","data-test","questionHint",4,"ngIf"],[1,"flex","flex-col","my-10"],["class","question__item","data-test","questionResponse",3,"question__item--first",4,"ngFor","ngForOf"],["class","question__item","data-test","questionResponse",4,"ngIf"],[1,"flex","flex-col","items-end"],["class","w-full","app-button","","buttonSize","xl","buttonTheme","light","data-test","questionAdvanceButton",3,"buttonType","uppercase","disabled","click",4,"ngIf"],["data-test","questionHint",1,"question__hint","mt-3"],["data-test","questionResponse",1,"question__item"],["formControlName","response",3,"responseSelected","title","description","tag","icon","content","compact","selected","value","responsive"],["formControlName","response",3,"responseSelected","title","selected","value","responsive"],["type","text","class","input my-2","formControlName","description","appAutoFocus","",4,"ngIf"],["type","text","formControlName","description","appAutoFocus","",1,"input","my-2"],["app-button","","buttonSize","xl","buttonTheme","light","data-test","questionAdvanceButton",1,"w-full",3,"click","buttonType","uppercase","disabled"]],template:function(i,s){1&i&&e.DNE(0,Kc,9,7,"fieldset",0),2&i&&e.Y8G("ngIf",s.shown)},dependencies:[c.Sq,c.bT,d.me,d.BC,d.cb,d.j4,d.JD,$.Q,Lc.B,qn],styles:[".question__label[_ngcontent-%COMP%]{color:#131c2a;font-size:1.5rem;line-height:2rem}.question__hint[_ngcontent-%COMP%]{color:#283853;font-size:1rem;line-height:1.5rem}.question__item[_ngcontent-%COMP%]{margin-top:20px}.question__item--first[_ngcontent-%COMP%]{margin-top:0}@media (max-width: 959px){.question__label[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem}}"],changeDetection:0}),n})();function Zc(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",5),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleBackClick())}),e.nrm(1,"app-button-icon",6),e.k0s()}}function el(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-account-question",7),e.bIt("responseSelected",function(s){const a=e.eBV(t),r=a.$implicit,u=a.index,v=e.XpG();return e.Njj(v.handleResponseSelected(r,s,u))})("advanceSelected",function(s){const a=e.eBV(t),r=a.$implicit,u=a.index,v=e.XpG();return e.Njj(v.handleAdvanceSelected(r,s,u))}),e.k0s()}if(2&o){const t=n.$implicit,i=n.index,s=e.XpG();e.Y8G("shown",i===s.selectedIndex)("question",t)("other",t.other)("advanceLabel",s.advanceLabel)("isLast",i===s.questions.length-1)("responsive",s.responsive)}}let tl=(()=>{var o;class n{get selectedIndex(){return this._selectedIndex}set selectedIndex(i){this._selectedIndex=i}constructor(){this.questions=[],this.advanceLabel="Continue",this.handleQuestionResponse=new e.bkB,this._selectedIndex=0}ngOnInit(){}handleResponseSelected(i,s,a){a===this.questions.length-1||this.emitResponse(i,s)}handleAdvanceSelected(i,s,a){this.emitResponse(i,s)}handleNextClick(){this.nextQuestion()}handleBackClick(){this.prevQuestion()}nextQuestion(){const i=Math.max(0,this.questions.length-1);this.selectedIndex=Math.min(i,this.selectedIndex+1)}prevQuestion(){this.selectedIndex=Math.max(0,this.selectedIndex-1)}emitResponse(i,s){this.handleQuestionResponse.next({question:i,response:s})}}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-account-question-wizard"]],inputs:{questions:"questions",advanceLabel:"advanceLabel",responsive:"responsive"},outputs:{handleQuestionResponse:"handleQuestionResponse"},decls:5,vars:2,consts:[[1,"questions"],["app-button","","buttonTheme","light","class","questions__back",3,"click",4,"ngIf"],[1,"questions__content"],[1,"questions__list"],[3,"shown","question","other","advanceLabel","isLast","responsive","responseSelected","advanceSelected",4,"ngFor","ngForOf"],["app-button","","buttonTheme","light",1,"questions__back",3,"click"],["icon","arrow-left","iconType","solid","iconPlacement","left","label","Go Back"],[3,"responseSelected","advanceSelected","shown","question","other","advanceLabel","isLast","responsive"]],template:function(i,s){1&i&&(e.j41(0,"div",0),e.DNE(1,Zc,2,0,"button",1),e.j41(2,"div",2)(3,"div",3),e.DNE(4,el,1,6,"app-account-question",4),e.k0s()()()),2&i&&(e.R7$(),e.Y8G("ngIf",s.selectedIndex>0),e.R7$(3),e.Y8G("ngForOf",s.questions))},dependencies:[c.Sq,c.bT,$.Q,Ac.T,Jn],styles:[".questions__back[_ngcontent-%COMP%]{margin-left:-16px}.questions__step[_ngcontent-%COMP%]{color:#96a8c0;font-weight:500;font-size:.875rem;line-height:1.25rem}@media (max-width: 959px){.questions__step[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem}}"],changeDetection:0}),n})();var gt,Wn=l(71263),Hn=l(81127),xt=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},Ut=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};const nl=["wizard"];class $e{constructor(n,t,i,s,a,r){this.authRoutingService=n,this.authService=t,this.store=i,this.router=s,this.activatedRoute=a,this.changeRef=r,this.breakPoints=se.m,this.selectedAccountSetting={},this.questionnaireStarted=!1,this.isReturningUser=!1,this.questions=[],this.ngUnsubscribe=new C.B}ngOnInit(){this.initQuestionnaire()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initQuestionnaire(){const n=this.authService.checkProfileIncomplete();(0,le.z)([this.userProfile$,n,this.organizationSettings$,this.accountSettings$]).pipe((0,D.p)(([t])=>!(0,_.isNil)(t)),(0,h.Q)(this.ngUnsubscribe)).subscribe(([t,i,s,a])=>{const{is_new_user:r,is_team_user:u}=i.messageData;this.completeProfileMessage=i,this.isReturningUser=!0!==r,this.intent=u?ve.Team:ve.Individual;const v=this.activatedRoute.snapshot.queryParams.question,R="true"===this.activatedRoute.snapshot.queryParams.welcome;this.selectedAccountSetting=(0,ke.j)([...a,...s]);const E=(0,_.get)(this.selectedAccountSetting,"account_purpose.value",b.j.PersonalUse),te=(0,_.get)(this.selectedAccountSetting,"account_field.value");this.questions=this.getCustomQueryQuestions(t,v,E,te,this.isReturningUser,R),this.changeRef.markForCheck()})}handleQuestionResponse(n){const{question:t,response:i}=n,s=t.account_setting,a=this.activatedRoute.snapshot.queryParams.question,r="true"===this.activatedRoute.snapshot.queryParams.welcome,u=this.store.selectSnapshot(m.k.getUserProfile);this.questionnaireStarted=!0,"account_purpose"===t.account_setting&&(this.selectedAccountSetting={}),this.selectedAccountSetting[s]=i;const v=(0,_.get)(this.selectedAccountSetting,"account_purpose.value"),R=(0,_.get)(this.selectedAccountSetting,"account_field.value"),E=this.isReturningUser;if(this.questions.length>1)if(a)this.questions=this.getCustomQueryQuestions(u,a,v,R,this.isReturningUser,r);else if(this.questions.length>1)switch(v){case b.j.PersonalUse:this.questions=this.getPersonalUseQuestions(E);break;case b.j.Education:this.questions=this.getEducationQuestions(E);break;case b.j.Business:this.questions=this.getBusinessQuestions(E,R)}this.wizard.selectedIndex===this.questions.length-1?this.completeQuestionnaire():this.nextQuestion(),this.changeRef.markForCheck()}handleSkipClick(){this.completeQuestionnaire()}nextQuestion(){this.wizard.nextQuestion()}completeQuestionnaire(){const n=(0,ke.q)(this.selectedAccountSetting,!0);if(this.store.selectSnapshot(m.k.isDeveloperReferral)){const R=n.find(E=>"account_purpose"in E);R&&"account_purpose"in R&&(R.account_purpose={...R.account_purpose,description:"developer"})}this.updateAccountSettings(...n);const t=(0,_.get)(this.completeProfileMessage,"messageSeenId");(0,_.isNil)(t)||this.store.dispatch(new f.P(t));const i=this.store.selectSnapshot(T.q.hasOrganization),s=this.store.selectSnapshot(T.q.getOrganizationProfile),a=!(0,_.isNil)(s),r=this.store.selectSnapshot(m.k.getUserRole),u=(0,Ue._m)(r,me.y.InviteUsers);this.intent===ve.Team&&i&&u&&!a&&!this.isReturningUser?this.authRoutingService.navigateToTeamInvite(!0):this.router.navigate(["/"])}getPersonalUseQuestions(n){const t=this.store.selectSnapshot(m.k.getUserProfile);return[this.createPurposeQuestion(n),Fe(t,b.j.PersonalUse,"",this.isReturningUser)]}getEducationQuestions(n){const t=this.store.selectSnapshot(m.k.getUserProfile);return[this.createPurposeQuestion(n),Fe(t,b.j.Education,"",this.isReturningUser),Ct(b.j.Education)]}getBusinessQuestions(n,t){const i=this.store.selectSnapshot(m.k.getUserProfile);return[this.createPurposeQuestion(n),Ct(b.j.Business),Fe(i,b.j.Business,t,this.isReturningUser)]}updateAccountSettings(...n){this.store.dispatch(new f.Kg({account_settings:n}))}createPurposeQuestion(n){return Ot(this.store.selectSnapshot(m.k.getUserProfile),n)}getCustomQueryQuestions(n,t,i,s,a,r){switch(t){case Hn.w.Role:return[Fe(n,i,s,a,r)];case Hn.w.Field:return[Ct(i),Fe(n,i,s,a)];default:return[...this.getPersonalUseQuestions(a)]}}}(gt=$e).\u0275fac=function(n){return new(n||gt)(e.rXU(H.y),e.rXU(Wn.u),e.rXU(p.il),e.rXU(U.Ix),e.rXU(U.nX),e.rXU(e.gRc))},gt.\u0275cmp=e.VBU({type:gt,selectors:[["app-account-questionnaire"]],viewQuery:function(n,t){if(1&n&&e.GBs(nl,7),2&n){let i;e.mGM(i=e.lsd())&&(t.wizard=i.first)}},decls:4,vars:4,consts:[["wizard",""],[1,"account","theme-light"],[3,"handleQuestionResponse","questions","responsive"]],template:function(n,t){if(1&n){const i=e.RV6();e.j41(0,"div",1)(1,"app-account-question-wizard",2,0),e.nI1(3,"async"),e.bIt("handleQuestionResponse",function(a){return e.eBV(i),e.Njj(t.handleQuestionResponse(a))}),e.k0s()()}2&n&&(e.R7$(),e.Y8G("questions",t.questions)("responsive",e.bMT(3,2,t.horizontalBreakpoint$)<t.breakPoints.Medium))},dependencies:[tl,c.Jj],changeDetection:0}),xt([(0,p.l6)(ae.V.getHorizontalBreakpoint),Ut("design:type",g.c)],$e.prototype,"horizontalBreakpoint$",void 0),xt([(0,p.l6)(m.k.getUserProfile),Ut("design:type",g.c)],$e.prototype,"userProfile$",void 0),xt([(0,p.l6)(m.k.getUserAccountSettings),Ut("design:type",g.c)],$e.prototype,"accountSettings$",void 0),xt([(0,p.l6)(T.q.getOrganizationAccountSettings),Ut("design:type",g.c)],$e.prototype,"organizationSettings$",void 0);var ht,Kn=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},Zn=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function ol(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-account-question",2),e.nI1(1,"async"),e.nI1(2,"async"),e.bIt("advanceSelected",function(s){e.eBV(t);const a=e.XpG();return e.Njj(a.handleResponseSelected(s))}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("shown",!0)("question",t.question)("other",t.question.other)("selectedResponse",t.selectedResponse)("advanceLabel","Continue")("advanceEnabled",!e.bMT(1,8,t.updating$))("isLast",!0)("responsive",e.bMT(2,10,t.horizontalBreakpoint$)<t.breakPoints.Medium)}}const il=[b.j.Education,b.j.Business];class Pt{constructor(n,t,i,s,a,r,u){this.actions=n,this.authService=t,this.authRoutingService=i,this.store=s,this.activatedRoute=a,this.changeRef=r,this.snackBar=u,this.breakPoints=se.m,this.ngUnsubscribe=new C.B}ngOnInit(){this.initQuestions(),this.initProfileUpdateRedirect()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleResponseSelected(n){this.updateAccountPurpose(n)}initQuestions(){const n=this.authService.checkProfileIncomplete();(0,le.z)([this.store.select(m.k.getUserProfile),n]).pipe((0,D.p)(([t])=>!(0,_.isNil)(t)),(0,h.Q)(this.ngUnsubscribe)).subscribe(([t,i])=>{const{is_new_user:s}=i.messageData;this.setQuestion(t,!0!==s,t.premium_account,t.organizations.length>0),this.changeRef.markForCheck()})}initProfileUpdateRedirect(){this.actions.pipe((0,p.xi)(f.ZD),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.store.dispatch(new f.hs)}),this.actions.pipe((0,p.xi)(f.ZD),(0,P.Z)(()=>this.actions.pipe((0,p.xi)(f.Cy))),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.handleProfileUpdateSuccess(n.userProfile)}),this.actions.pipe((0,p.xi)(f._h),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{this.handleProfileUpdateFailure(n)})}setQuestion(n,t,i,s){const{queryParams:a}=this.activatedRoute.snapshot,r=a.purpose,u=a.intent,v=this.store.selectSnapshot(m.k.isDeveloperReferral);let R;R=s||v?ve.Team:i?ve.Individual:u,this.question=Ot(n,t,R),this.selectedResponse=this.question.responses.find(E=>E.value===r),this.changeRef.markForCheck()}handleProfileUpdateSuccess(n){const i=(0,ke.j)(n.account_settings),s=(0,_.get)(i,"account_purpose.value",b.j.PersonalUse);il.includes(s)?this.handleBusinessPurposeSelected(s):this.handlePersonalPurposeSelected()}handleProfileUpdateFailure(n){const t=(0,_.get)(n.error,"error.error.message","There was an error updating your profile.");this.snackBar.open(t)}handlePersonalPurposeSelected(){this.authRoutingService.navigateToQuestionnaire(!0,!0,b.j.PersonalUse)}handleBusinessPurposeSelected(n){this.authRoutingService.navigateToTeamCreation(n)}updateAccountPurpose(n){this.store.dispatch(new f.Kg({account_settings:[{account_purpose:n}]}))}}var _t;(ht=Pt).\u0275fac=function(n){return new(n||ht)(e.rXU(p.En),e.rXU(Wn.u),e.rXU(H.y),e.rXU(p.il),e.rXU(U.nX),e.rXU(e.gRc),e.rXU(ne.UG))},ht.\u0275cmp=e.VBU({type:ht,selectors:[["app-account-creation"]],decls:2,vars:1,consts:[["role","status",1,"account","theme-light"],[3,"shown","question","other","selectedResponse","advanceLabel","advanceEnabled","isLast","responsive","advanceSelected",4,"ngIf"],[3,"advanceSelected","shown","question","other","selectedResponse","advanceLabel","advanceEnabled","isLast","responsive"]],template:function(n,t){1&n&&(e.j41(0,"div",0),e.DNE(1,ol,3,12,"app-account-question",1),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngIf",t.question))},dependencies:[c.bT,Jn,c.Jj],changeDetection:0}),Kn([(0,p.l6)(m.k.getProfileUpdating),Zn("design:type",g.c)],Pt.prototype,"updating$",void 0),Kn([(0,p.l6)(ae.V.getHorizontalBreakpoint),Zn("design:type",g.c)],Pt.prototype,"horizontalBreakpoint$",void 0);class gn{constructor(n,t,i){this.authRoutingService=n,this.store=t,this.activatedRoute=i,this.ngUnsubscribe=new C.B,this.purpose=this.activatedRoute.snapshot.queryParams.purpose}ngOnInit(){this.initActionListeners(),this.store.dispatch(new f.hs)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initActionListeners(){this.organization$.pipe((0,D.p)(n=>!(0,_.isNil)(n)),(0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.handleOrganizationCreated()})}handleOrganizationCreated(){this.authRoutingService.navigateToQuestionnaire(!0,!1)}}(_t=gn).\u0275fac=function(n){return new(n||_t)(e.rXU(H.y),e.rXU(p.il),e.rXU(U.nX))},_t.\u0275cmp=e.VBU({type:_t,selectors:[["app-team-create-page"]],decls:2,vars:1,consts:[[1,"team-create","theme-light"],[3,"organizationCreated","purpose"]],template:function(n,t){1&n&&(e.j41(0,"form",0)(1,"app-team-create",1),e.bIt("organizationCreated",function(){return t.handleOrganizationCreated()}),e.k0s()()),2&n&&(e.R7$(),e.Y8G("purpose",t.purpose))},dependencies:[d.qT,d.cb,d.cV,de],styles:[".team-create__skip[_ngcontent-%COMP%]{color:#283853;font-size:.875rem;line-height:1.25rem}"],changeDetection:0}),function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);s>3&&a&&Object.defineProperty(n,t,a)}([(0,p.l6)(T.q.getOrganization),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,g.c)],gn.prototype,"organization$",void 0);var rl=l(23609);function cl(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",5),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleBackClick())}),e.j41(1,"div",6),e.nrm(2,"app-icon",7),e.j41(3,"div",8),e.EFF(4,"Back"),e.k0s()()()}}let ll=(()=>{var o;class n{constructor(i,s,a,r){this.store=i,this.router=s,this.activatedRoute=a,this.changeRef=r,this.ngUnsubscribe=new C.B,this.store.dispatch(new f.hs)}ngOnInit(){this.initRouteHandling()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initRouteHandling(){(0,Y.h)(this.activatedRoute.url,this.router.events.pipe((0,D.p)(i=>i instanceof U.wF))).pipe((0,h.Q)(this.ngUnsubscribe)).subscribe(()=>{this.returnTo=this.activatedRoute.snapshot.queryParams.returnTo,this.changeRef.markForCheck()})}handleBackClick(){this.router.navigateByUrl(this.returnTo)}}return(o=n).\u0275fac=function(i){return new(i||o)(e.rXU(p.il),e.rXU(U.Ix),e.rXU(U.nX),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-account-workflow-master"]],decls:6,vars:1,consts:[[1,"master"],[1,"master__art"],[1,"master__content-wrapper","flex","flex-col","items-center","flex-auto"],["class","master__nav","app-button","","buttonTheme","light",3,"click",4,"ngIf"],[1,"master__content-container","flex","flex-col","justify-center","items-stretch","flex-auto"],["app-button","","buttonTheme","light",1,"master__nav",3,"click"],[1,"flex","flex-row"],["icon","arrow-left"],[1,"ml-2"]],template:function(i,s){1&i&&(e.j41(0,"div",0),e.nrm(1,"app-login-art",1),e.j41(2,"div",2),e.DNE(3,cl,5,0,"button",3),e.j41(4,"div",4),e.nrm(5,"router-outlet"),e.k0s()()()),2&i&&(e.R7$(3),e.Y8G("ngIf",s.returnTo))},dependencies:[c.bT,U.n3,$.Q,k.R,rl.Y],styles:[".master[_ngcontent-%COMP%]{background:#fff;display:flex;flex-direction:row;height:100vh;width:100%}.master__art[_ngcontent-%COMP%]{flex-basis:480px}.master__content-wrapper[_ngcontent-%COMP%]{overflow:auto;margin:auto;padding:40px;height:100%}.master__content-container[_ngcontent-%COMP%]{width:100%;max-width:560px;padding:12px}.master__nav[_ngcontent-%COMP%]{align-self:flex-start;margin:0 20px 24px 0}@media (max-width: 959px){.master__art[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){.master__content-wrapper[_ngcontent-%COMP%]{padding:20px}.master__content-container[_ngcontent-%COMP%]{padding:4px}}"],changeDetection:0}),n})();var ft,pl=l(21091),eo=function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a},to=function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(o,n)};function ul(o,n){if(1&o){const t=e.RV6();e.j41(0,"app-team-invite",3),e.nI1(1,"async"),e.bIt("inviteSent",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleInviteComplete())})("inviteCancelled",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleInviteComplete())}),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("organization",e.bMT(1,2,t.organization$))("layout","block")}}class Et{constructor(n,t,i){this.store=n,this.router=t,this.authRoutingService=i,this.ngUnsubscribe=new C.B}ngOnInit(){this.userProfile$.pipe((0,D.p)(n=>!(0,_.isNil)(n)),(0,G.s)(1),(0,h.Q)(this.ngUnsubscribe)).subscribe(n=>{n.organizations&&n.organizations.length>0||this.handleInviteComplete()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}handleInviteComplete(){this.store.selectSnapshot(m.k.isDeveloperReferral)?this.authRoutingService.navigateToDeveloperWelcome():this.router.navigate(["/explore"])}}(ft=Et).\u0275fac=function(n){return new(n||ft)(e.rXU(p.il),e.rXU(U.Ix),e.rXU(H.y))},ft.\u0275cmp=e.VBU({type:ft,selectors:[["app-team-invite-page"]],decls:7,vars:3,consts:[[1,"text-3xl","font-semibold"],[1,"text-base","mt-3","mb-10"],["sentText","Send invites","cancelText","Skip this step",3,"organization","layout","inviteSent","inviteCancelled",4,"ngIf"],["sentText","Send invites","cancelText","Skip this step",3,"inviteSent","inviteCancelled","organization","layout"]],template:function(n,t){1&n&&(e.j41(0,"div")(1,"h3",0),e.EFF(2,"Invite members to join your team"),e.k0s(),e.j41(3,"p",1),e.EFF(4,"If you'd like, you can always send invites later."),e.k0s(),e.DNE(5,ul,2,4,"app-team-invite",2),e.nI1(6,"async"),e.k0s()),2&n&&(e.R7$(5),e.Y8G("ngIf",e.bMT(6,1,t.organization$)))},dependencies:[c.bT,pl.G,c.Jj],changeDetection:0}),eo([(0,p.l6)(m.k.getUserProfile),to("design:type",g.c)],Et.prototype,"userProfile$",void 0),eo([(0,p.l6)(T.q.getOrganization),to("design:type",g.c)],Et.prototype,"organization$",void 0);var bt,ml=l(29160);function hl(o,n){if(1&o&&(e.j41(0,"a",3),e.nI1(1,"async"),e.EFF(2," Take me to the developer site "),e.k0s()),2&o){const t=e.XpG();e.Y8G("href",e.bMT(1,1,t.developerPortalSignInUrl$),e.B4B)}}class hn{constructor(n){this.store=n,this.ngUnsubscribe=new C.B,this.developerPortalSignInUrl$=new ml.t("")}ngOnInit(){this.store.dispatch(new f.hs(!0)),this.userProfile$.pipe((0,h.Q)(this.ngUnsubscribe),(0,D.p)(n=>!(0,_.isNil)(n))).subscribe(n=>{this.developerPortalSignInUrl$.next(n.developer_portal_signin_url)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}(bt=hn).\u0275fac=function(n){return new(n||bt)(e.rXU(p.il))},bt.\u0275cmp=e.VBU({type:bt,selectors:[["app-team-developer"]],decls:8,vars:6,consts:[[1,"text-3xl","font-semibold"],[1,"text-base","mt-3","mb-10"],["class","button button--primary button--large mb-5",3,"href",4,"ngIf"],[1,"button","button--primary","button--large","mb-5",3,"href"]],template:function(n,t){if(1&n&&(e.j41(0,"div")(1,"div",0),e.EFF(2),e.nI1(3,"async"),e.k0s(),e.j41(4,"div",1),e.EFF(5," Now that you've set up your account, navigate to the developer site to finish activating your developer access and begin building custom 3D experiences. "),e.k0s(),e.DNE(6,hl,3,3,"a",2),e.nI1(7,"async"),e.k0s()),2&n){let i;e.R7$(2),e.SpI("Welcome ",null==(i=e.bMT(3,2,t.userProfile$))?null:i.first_name,"!"),e.R7$(4),e.Y8G("ngIf",e.bMT(7,4,t.developerPortalSignInUrl$))}},dependencies:[c.bT,c.Jj],changeDetection:0}),function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);s>3&&a&&Object.defineProperty(n,t,a)}([(0,p.l6)(m.k.getUserProfile),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,g.c)],hn.prototype,"userProfile$",void 0);var vt,_l=l(48701),no=l(17215);function vl(o,n){if(1&o&&(e.j41(0,"h1",4),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" ",t.headerText," ")}}function Cl(o,n){if(1&o){const t=e.RV6();e.j41(0,"button",5),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.handleContinueClick())}),e.EFF(1),e.k0s()}if(2&o){const t=e.XpG();e.Y8G("buttonType",t.skip?"flat":"primary")("uppercase",!1),e.R7$(),e.SpI(" ",t.buttonText," ")}}class _n{constructor(n,t){this.authRoutingService=n,this.storageService=t,this.skip=!0,this.headerText="",this.buttonText="",this.requestOrganizationsText="It looks like of some of your teammates are already using the BioDigital Human. Submit a request to start collaborating.",this.joinRequestText="Your request has been sent to the team's administrators. While you wait for approval, continue to the next step to start exploring the BioDigital Human on your own."}ngOnInit(){this.storageService.setLocalItem(no.UT.UserJoinPromptSeen,!0)}handleContinueClick(){this.skip?this.authRoutingService.navigateToWorkflow():this.authRoutingService.navigateToQuestionnaire(!0,!1,b.j.PersonalUse)}handlePendingJoinRequest(n){this.skip=void 0===n,this.buttonText=this.skip?"No thanks":"Continue",this.headerText=this.skip?"We found your team":"Request sent"}handleRequestOrganizationsSuccess(n){0===n.length&&this.authRoutingService.navigateToWorkflow()}}(vt=_n).\u0275fac=function(n){return new(n||vt)(e.rXU(H.y),e.rXU(no.n$))},vt.\u0275cmp=e.VBU({type:vt,selectors:[["app-team-join-page"]],decls:6,vars:8,consts:[[1,"team-join","flex","flex-col"],["class","team-join__title mt-4 text-3xl font-semibold",4,"ngIf"],["theme","light",1,"mb-4",3,"pendingJoinRequestSuccess","requestOrganizationsSuccess","requestOrganizationsText","joinRequestText"],["class","w-full","app-button","","buttonSize","xl","buttonTheme","light",3,"buttonType","uppercase","click",4,"ngIf"],[1,"team-join__title","mt-4","text-3xl","font-semibold"],["app-button","","buttonSize","xl","buttonTheme","light",1,"w-full",3,"click","buttonType","uppercase"]],template:function(n,t){1&n&&(e.j41(0,"div",0),e.DNE(1,vl,2,1,"h1",1),e.nI1(2,"async"),e.j41(3,"app-team-join",2),e.bIt("pendingJoinRequestSuccess",function(s){return t.handlePendingJoinRequest(s)})("requestOrganizationsSuccess",function(s){return t.handleRequestOrganizationsSuccess(s)}),e.k0s(),e.DNE(4,Cl,2,3,"button",3),e.nI1(5,"async"),e.k0s()),2&n&&(e.R7$(),e.Y8G("ngIf",!1===e.bMT(2,4,t.requesting$)),e.R7$(2),e.Y8G("requestOrganizationsText",t.requestOrganizationsText)("joinRequestText",t.joinRequestText),e.R7$(),e.Y8G("ngIf",!1===e.bMT(5,6,t.requesting$)))},dependencies:[c.bT,$.Q,Nn.H,c.Jj],styles:[".team-join__title[_ngcontent-%COMP%]{color:#131c2a}"],changeDetection:0}),function(o,n,t,i){var r,s=arguments.length,a=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,n,t,i);else for(var u=o.length-1;u>=0;u--)(r=o[u])&&(a=(s<3?r(a):s>3?r(n,t,a):r(n,t))||a);s>3&&a&&Object.defineProperty(n,t,a)}([(0,p.l6)(he.e.getRequesting),function(o,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",n)}(0,g.c)],_n.prototype,"requesting$",void 0);const Tl=[{path:"questionnaire",redirectTo:"workflow/questionnaire"},{path:"workflow",component:ll,canActivate:[oe.q,_e.Y],data:{title:"Welcome"},children:[{path:"",component:Pt,pathMatch:"full"},{path:"team",children:[{path:"create",component:gn,pathMatch:"full",data:{title:"Create Your Team"}},{path:"invite",component:Et,pathMatch:"full",data:{title:"Invite Members"}},{path:"developer",component:hn,pathMatch:"full",data:{title:"App Configuration"}},{path:"join",component:_n,pathMatch:"full",data:{title:"Join Your Team"}}]},{path:"questionnaire",component:$e,pathMatch:"full",data:{title:"Questionnaire"}}]},{path:"",component:ie.m,canActivate:[oe.q,_e.Y],data:{fixedHeight:!1},children:[{path:"",component:x,children:[{path:"",redirectTo:"/account/profile",pathMatch:"full"},{path:"profile",component:Ft,pathMatch:"full",data:{title:"Account"}},{path:"team",component:jt,pathMatch:"full",data:{title:"Team"}},{path:"settings",component:ct,pathMatch:"full",data:{title:"Settings"}},{path:"internal",canLoad:[_l.InternalDevGuard],canActivate:[oe.q],loadChildren:()=>Promise.resolve().then(l.bind(l,48701)).then(o=>o.InternalDevModule)}]}]}];let oo=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[U.iI.forChild(Tl),U.iI]}),n})();var yl=l(28107),io=l(72026),Rl=l(81488),kl=l(89630);let Fl=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[c.MD,kl.$,io.o]}),n})();var Sl=l(11818),Il=l(3272),jl=l(21604),xl=l(45189),Ul=l(13403),Pl=l(36918),El=l(29644);let Dl=(()=>{var o;class n{}return(o=n).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[c.MD,oo,d.YN,d.X1,yl.R,jl.G,Sl.C,io.o,Il.D,Rl.f,Fl,xl.G,In.y2.forChild(),Ul.j,Pl.e,El.R,oo]}),n})()},48701:(Dt,ge,l)=>{l.r(ge),l.d(ge,{InternalDevGuard:()=>At,InternalDevModule:()=>Gt});var c=l(60177),U=l(38645),oe=l(24418),_e=l(12215),ie=l(36110),p=l(40215),_=l(4158),C=l(11040),g=l(3287),D=l(37678),G=l(49204),P=l(26655),h=l(22397),H=l(27180),m=l(54438),se=l(21626),ae=l(21007),K=l(77242),e=l(41640),j=l(18111);function I(S,B){if(1&S&&(m.j41(0,"app-list-item")(1,"b",3),m.EFF(2,"AWS Voice ID:"),m.k0s(),m.EFF(3),m.k0s()),2&S){const O=B.$implicit;m.R7$(3),m.SpI(" ",null==O?null:O.voiceId," ")}}function k(S,B){if(1&S&&(m.j41(0,"app-list-item")(1,"b",3),m.EFF(2,"Alias Locale ID:"),m.k0s(),m.EFF(3),m.k0s()),2&S){const O=m.XpG().$implicit,x=m.XpG();m.R7$(3),m.SpI(" ",x.localeNormalizationMap[O.id]," ")}}function V(S,B){if(1&S&&(m.j41(0,"app-list-item")(1,"b",3),m.EFF(2),m.k0s(),m.j41(3,"app-list",7)(4,"app-list-item")(5,"b",3),m.EFF(6,"ID:"),m.k0s(),m.EFF(7),m.k0s(),m.j41(8,"app-list-item")(9,"b",3),m.EFF(10,"URL Language:"),m.k0s(),m.EFF(11),m.k0s(),m.j41(12,"app-list-item")(13,"b",3),m.EFF(14,"Supported Applications:"),m.k0s(),m.EFF(15),m.k0s(),m.DNE(16,I,4,1,"app-list-item",8)(17,k,4,1,"app-list-item",8),m.k0s()()),2&S){const O=B.$implicit,x=m.XpG();m.R7$(2),m.JRh(O.title),m.R7$(5),m.SpI(" ",O.id," "),m.R7$(4),m.SpI(" ",O.lang," "),m.R7$(4),m.SpI(" ",x.formatApplications(O.applications)," "),m.R7$(),m.Y8G("ngIf",x.localeIdVoices[O.id]),m.R7$(),m.Y8G("ngIf",x.localeNormalizationMap[O.id])}}let J=(()=>{var S;class B{constructor(x,Y){this.http=x,this.changeRef=Y,this.allLocales=C.N9,this.localeIds=C.N9.map(M=>M.id),this.localeNormalizationMap=C.WF,this.localeIdVoices=C.N9.reduce((M,X)=>(M[X.id]=(0,h.P)(X.id),M),{}),this.engineVersion=P.A,this.apiVersion=P.m}ngOnInit(){}exportTranslationsClick(){const x=(0,_.KS)(this.http,this.localeIds).pipe((0,ie.T)(Y=>Y.filter(M=>!(0,G.isNil)(M))));(0,p._)(x).then(Y=>{this.exportTranslations(Y),this.changeRef.markForCheck()})}exportTranslations(x){const Y=function re(S){const B={};return S.forEach(O=>{const{locale:x,translations:Y}=O,M=C.WF[x]??x;Object.entries(Y).forEach(([X,f])=>{B[X]=B[X]??{},B[X][M]=f})}),B}(x),M=C.N9.filter(T=>T.id!==C.q.id),X=[{label:C.q.id,field:C.q.id},...M.map(T=>{const ce=C.WF[T.id]??T.id;return{label:ce,field:ce}})],f=Object.values(Y).sort((T,ce)=>{const d=T[C.q.id].trim(),le=ce[C.q.id].trim();return d.localeCompare(le)});(0,g.H)(f,X).subscribe(T=>{const d=`human-translations-export-${(new Date).toISOString().split("T")[0]}.csv`,le=new Blob([T],{type:"text/csv;charset=utf-8"});(0,D.saveAs)(le,d)})}formatApplications(x){return x.map(Y=>Y===H.c.All?"All":Y).join(", ")}}return(S=B).\u0275fac=function(x){return new(x||S)(m.rXU(se.Qq),m.rXU(m.gRc))},S.\u0275cmp=m.VBU({type:S,selectors:[["app-internal-info-component"]],decls:16,vars:3,consts:[[1,"info"],["label","Engine"],["listType","default",1,"text-base","my-1"],[1,"font-bold"],["label","Internationalization (Translations)"],[4,"ngFor","ngForOf"],["app-button","","buttonType","primary","buttonTheme","light",1,"my-2",3,"click"],["listType","default",1,"text-sm"],[4,"ngIf"]],template:function(x,Y){1&x&&(m.j41(0,"div",0)(1,"app-panel",1)(2,"app-list",2)(3,"app-list-item")(4,"b",3),m.EFF(5,"Version: "),m.k0s(),m.EFF(6),m.k0s(),m.j41(7,"app-list-item")(8,"b",3),m.EFF(9,"API Version: "),m.k0s(),m.EFF(10),m.k0s()()(),m.j41(11,"app-panel",4)(12,"app-list",2),m.DNE(13,V,18,6,"app-list-item",5),m.k0s(),m.j41(14,"button",6),m.bIt("click",function(){return Y.exportTranslationsClick()}),m.EFF(15," Export Translations "),m.k0s()()()),2&x&&(m.R7$(6),m.SpI(" ",Y.engineVersion,""),m.R7$(4),m.SpI(" ",Y.apiVersion,""),m.R7$(3),m.Y8G("ngForOf",Y.allLocales))},dependencies:[c.Sq,c.bT,ae.Q,K.s,e.P,j.g],changeDetection:0}),B})();var fe=l(11818),Re=l(21604);const Mt=[{path:"",component:J}];let At=(()=>{var S;class B{constructor(){}canLoad(x){return oe.c.deploy!==_e.Z.Production}}return(S=B).\u0275fac=function(x){return new(x||S)},S.\u0275prov=m.jDH({token:S,factory:S.\u0275fac,providedIn:"root"}),B})(),Gt=(()=>{var S;class B{}return(S=B).\u0275fac=function(x){return new(x||S)},S.\u0275mod=m.$C({type:S}),S.\u0275inj=m.G2t({imports:[U.iI.forChild(Mt),c.MD,Re.G,fe.C]}),B})()},291:(Dt,ge,l)=>{l.d(ge,{J:()=>e});var P,c=l(54438),U=l(65763),oe=l(2573),_e=l(38165),ie=l(16823),p=l(11040),_=l(82542),C=l(21007),g=l(60177),D=l(26779),G=l(59115);function m(j,I){if(1&j&&(c.nrm(0,"img",8),c.nI1(1,"async"),c.nI1(2,"async")),2&j){let k;const V=c.XpG(2);c.Y8G("src",V.getLocaleFlag(c.bMT(1,2,V.userLocale$)),c.B4B),c.BMQ("alt",null==(k=c.bMT(2,4,V.userLocale$))?null:k.title)}}function se(j,I){if(1&j&&(c.j41(0,"button",3)(1,"div",4),c.DNE(2,m,3,6,"img",5),c.j41(3,"span",6),c.EFF(4),c.nI1(5,"async"),c.k0s(),c.nrm(6,"app-icon",7),c.k0s()()),2&j){const k=c.XpG(),V=c.sdS(3);c.Y8G("buttonSize",k.buttonSize())("buttonTheme",k.buttonTheme())("buttonType",k.buttonType())("matMenuTriggerFor",V),c.BMQ("aria-label","Select your locale"),c.R7$(2),c.Y8G("ngIf",k.showFlag()),c.R7$(2),c.JRh(k.displayLocale(c.bMT(5,7,k.userLocale$)))}}function ae(j,I){if(1&j){const k=c.RV6();c.j41(0,"button",9),c.bIt("click",function(){const re=c.eBV(k).$implicit,J=c.XpG();return c.Njj(J.handleLocaleSelection(re))}),c.j41(1,"span",4),c.nrm(2,"img",8),c.EFF(3),c.nI1(4,"uppercase"),c.k0s()()}if(2&j){const k=I.$implicit,V=c.XpG();c.BMQ("aria-label",k.title)("data-test",V.localesDataTestMap[k.lang]),c.R7$(2),c.Y8G("src",V.getLocaleFlag(k),c.B4B),c.BMQ("alt",k.title),c.R7$(),c.Lme(" ",k.title," (",c.bMT(4,6,k.lang),") ")}}var K=function(j){return j.Full="full",j.Title="title",j.Lang="lang",j}(K||{});class e{constructor(I){this.store=I,this.locales=p.IB,this.localesDataTestMap=p.A8,this.buttonType=(0,c.hFB)("default"),this.buttonTheme=(0,c.hFB)(_.P.Dark),this.buttonSize=(0,c.hFB)("md"),this.localeFormat=(0,c.hFB)(K.Full),this.showFlag=(0,c.hFB)(!0)}handleLocaleSelection(I){this.store.selectSnapshot(ie.k.getUserLocale)!==I&&this.store.dispatch(new _e.aD(I,!0))}getLocaleFlag(I){return`/assets/images/flags/${I.country}.svg`}displayLocale(I){switch(this.localeFormat()){case K.Full:return`${I.title} (${I.lang})`;case K.Title:return I.title;case K.Lang:return I.lang}}}(P=e).\u0275fac=function(I){return new(I||P)(c.rXU(U.il))},P.\u0275cmp=c.VBU({type:P,selectors:[["app-locales"]],inputs:{buttonType:[c.Mj6.SignalBased,"buttonType"],buttonTheme:[c.Mj6.SignalBased,"buttonTheme"],buttonSize:[c.Mj6.SignalBased,"buttonSize"],localeFormat:[c.Mj6.SignalBased,"localeFormat"],showFlag:[c.Mj6.SignalBased,"showFlag"]},decls:5,vars:4,consts:[["localeOptions","matMenu"],["app-button","",3,"buttonSize","buttonTheme","buttonType","matMenuTriggerFor",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["app-button","",3,"buttonSize","buttonTheme","buttonType","matMenuTriggerFor"],[1,"flex","items-center"],["class","mr-2",3,"src",4,"ngIf"],[1,"font-semibold"],["icon","caret-down",1,"ml-1"],[1,"mr-2",3,"src"],["mat-menu-item","",3,"click"]],template:function(I,k){1&I&&(c.DNE(0,se,7,9,"button",1),c.nI1(1,"async"),c.j41(2,"mat-menu",null,0),c.DNE(4,ae,5,8,"button",2),c.k0s()),2&I&&(c.Y8G("ngIf",c.bMT(1,2,k.userLocale$)),c.R7$(4),c.Y8G("ngForOf",k.locales))},dependencies:[C.Q,g.Sq,g.bT,D.R,G.kk,G.fb,G.Cp,g.Jj,g.Pc],changeDetection:0}),function(j,I,k,V){var fe,re=arguments.length,J=re<3?I:null===V?V=Object.getOwnPropertyDescriptor(I,k):V;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)J=Reflect.decorate(j,I,k,V);else for(var Re=j.length-1;Re>=0;Re--)(fe=j[Re])&&(J=(re<3?fe(J):re>3?fe(I,k,J):fe(I,k))||J);re>3&&J&&Object.defineProperty(I,k,J)}([(0,U.l6)(ie.k.getUserLocale),function(j,I){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",I)}(0,oe.c)],e.prototype,"userLocale$",void 0)},88041:(Dt,ge,l)=>{l.d(ge,{K:()=>C});var c=l(54438),U=l(21007),oe=l(60177),_e=l(26779),ie=l(59115);function p(g,D){if(1&g&&(c.j41(0,"button",3)(1,"span",4)(2,"span",5)(3,"span",6),c.EFF(4,"Sort:"),c.k0s(),c.EFF(5),c.k0s(),c.nrm(6,"app-icon",7),c.k0s()()),2&g){const G=c.XpG(),P=c.sdS(2);c.Y8G("buttonSize",G.buttonSize())("uppercase",!1)("matMenuTriggerFor",P),c.BMQ("aria-label",G.sortLabel()),c.R7$(5),c.JRh(G.sort().label)}}function _(g,D){if(1&g){const G=c.RV6();c.j41(0,"button",8),c.bIt("click",function(){const h=c.eBV(G).$implicit,H=c.XpG();return c.Njj(H.handleSort(h))}),c.EFF(1),c.k0s()}if(2&g){const G=D.$implicit;c.BMQ("data-test-value",G.dataTest)("aria-label","Sort by "+G.label),c.R7$(),c.SpI(" ",G.label," ")}}let C=(()=>{var g;class D{constructor(){this.sort=(0,c.hFB)(),this.sortOptions=(0,c.hFB)([]),this.sortLabel=(0,c.hFB)(),this.sortChange=(0,c.CGW)(),this.buttonSize=(0,c.hFB)()}handleSort(P){this.sortChange.emit(P)}}return(g=D).\u0275fac=function(P){return new(P||g)},g.\u0275cmp=c.VBU({type:g,selectors:[["app-sort"]],inputs:{sort:[c.Mj6.SignalBased,"sort"],sortOptions:[c.Mj6.SignalBased,"sortOptions"],sortLabel:[c.Mj6.SignalBased,"sortLabel"],buttonSize:[c.Mj6.SignalBased,"buttonSize"]},outputs:{sortChange:"sortChange"},decls:4,vars:2,consts:[["sortActions","matMenu"],["app-button","","buttonTheme","light","data-test","gallerySortBy",3,"buttonSize","uppercase","matMenuTriggerFor",4,"ngIf"],["mat-menu-item","","data-test","gallerySortByItem",3,"click",4,"ngFor","ngForOf"],["app-button","","buttonTheme","light","data-test","gallerySortBy",3,"buttonSize","uppercase","matMenuTriggerFor"],[1,"whitespace-nowrap"],[1,"font-semibold"],[1,"hidden","mr-1","sm:inline-block"],["icon","caret-down",1,"ml-1"],["mat-menu-item","","data-test","gallerySortByItem",3,"click"]],template:function(P,h){1&P&&(c.DNE(0,p,7,5,"button",1),c.j41(1,"mat-menu",null,0),c.DNE(3,_,2,3,"button",2),c.k0s()),2&P&&(c.Y8G("ngIf",h.sort()),c.R7$(3),c.Y8G("ngForOf",h.sortOptions()))},dependencies:[U.Q,oe.Sq,oe.bT,_e.R,ie.kk,ie.fb,ie.Cp],changeDetection:0}),D})()}}]);